function uR(e,t){for(var n=0;n<t.length;n++){const a=t[n];if(typeof a!="string"&&!Array.isArray(a)){for(const c in a)if(c!=="default"&&!(c in e)){const d=Object.getOwnPropertyDescriptor(a,c);d&&Object.defineProperty(e,c,d.get?d:{enumerable:!0,get:()=>a[c]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))a(c);new MutationObserver(c=>{for(const d of c)if(d.type==="childList")for(const o of d.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function n(c){const d={};return c.integrity&&(d.integrity=c.integrity),c.referrerPolicy&&(d.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?d.credentials="include":c.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function a(c){if(c.ep)return;c.ep=!0;const d=n(c);fetch(c.href,d)}})();var wa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yg(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function jC(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function a(){if(this instanceof a){var c=[null];c.push.apply(c,arguments);var d=Function.bind.apply(t,c);return new d}return t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var c=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(n,a,c.get?c:{enumerable:!0,get:function(){return e[a]}})}),n}var VC={exports:{}},sa={},qC={exports:{}},Xr={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var o2=Object.getOwnPropertySymbols,cR=Object.prototype.hasOwnProperty,pR=Object.prototype.propertyIsEnumerable;function fR(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function hR(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var a=Object.getOwnPropertyNames(t).map(function(d){return t[d]});if(a.join("")!=="0123456789")return!1;var c={};return"abcdefghijklmnopqrst".split("").forEach(function(d){c[d]=d}),Object.keys(Object.assign({},c)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var WC=hR()?Object.assign:function(e,t){for(var n,a=fR(e),c,d=1;d<arguments.length;d++){n=Object(arguments[d]);for(var o in n)cR.call(n,o)&&(a[o]=n[o]);if(o2){c=o2(n);for(var v=0;v<c.length;v++)pR.call(n,c[v])&&(a[c[v]]=n[c[v]])}}return a};/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qx=WC,Bp=60103,GC=60106;Xr.Fragment=60107;Xr.StrictMode=60108;Xr.Profiler=60114;var HC=60109,ZC=60110,KC=60112;Xr.Suspense=60113;var XC=60115,YC=60116;if(typeof Symbol=="function"&&Symbol.for){var va=Symbol.for;Bp=va("react.element"),GC=va("react.portal"),Xr.Fragment=va("react.fragment"),Xr.StrictMode=va("react.strict_mode"),Xr.Profiler=va("react.profiler"),HC=va("react.provider"),ZC=va("react.context"),KC=va("react.forward_ref"),Xr.Suspense=va("react.suspense"),XC=va("react.memo"),YC=va("react.lazy")}var a2=typeof Symbol=="function"&&Symbol.iterator;function dR(e){return e===null||typeof e!="object"?null:(e=a2&&e[a2]||e["@@iterator"],typeof e=="function"?e:null)}function ad(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var JC={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},QC={};function Np(e,t,n){this.props=e,this.context=t,this.refs=QC,this.updater=n||JC}Np.prototype.isReactComponent={};Np.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error(ad(85));this.updater.enqueueSetState(this,e,t,"setState")};Np.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function ek(){}ek.prototype=Np.prototype;function Wx(e,t,n){this.props=e,this.context=t,this.refs=QC,this.updater=n||JC}var Gx=Wx.prototype=new ek;Gx.constructor=Wx;qx(Gx,Np.prototype);Gx.isPureReactComponent=!0;var Hx={current:null},tk=Object.prototype.hasOwnProperty,rk={key:!0,ref:!0,__self:!0,__source:!0};function nk(e,t,n){var a,c={},d=null,o=null;if(t!=null)for(a in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(d=""+t.key),t)tk.call(t,a)&&!rk.hasOwnProperty(a)&&(c[a]=t[a]);var v=arguments.length-2;if(v===1)c.children=n;else if(1<v){for(var x=Array(v),E=0;E<v;E++)x[E]=arguments[E+2];c.children=x}if(e&&e.defaultProps)for(a in v=e.defaultProps,v)c[a]===void 0&&(c[a]=v[a]);return{$$typeof:Bp,type:e,key:d,ref:o,props:c,_owner:Hx.current}}function mR(e,t){return{$$typeof:Bp,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Zx(e){return typeof e=="object"&&e!==null&&e.$$typeof===Bp}function yR(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var s2=/\/+/g;function S0(e,t){return typeof e=="object"&&e!==null&&e.key!=null?yR(""+e.key):t.toString(36)}function ry(e,t,n,a,c){var d=typeof e;(d==="undefined"||d==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(d){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Bp:case GC:o=!0}}if(o)return o=e,c=c(o),e=a===""?"."+S0(o,0):a,Array.isArray(c)?(n="",e!=null&&(n=e.replace(s2,"$&/")+"/"),ry(c,t,n,"",function(E){return E})):c!=null&&(Zx(c)&&(c=mR(c,n+(!c.key||o&&o.key===c.key?"":(""+c.key).replace(s2,"$&/")+"/")+e)),t.push(c)),1;if(o=0,a=a===""?".":a+":",Array.isArray(e))for(var v=0;v<e.length;v++){d=e[v];var x=a+S0(d,v);o+=ry(d,t,n,x,c)}else if(x=dR(e),typeof x=="function")for(e=x.call(e),v=0;!(d=e.next()).done;)d=d.value,x=a+S0(d,v++),o+=ry(d,t,n,x,c);else if(d==="object")throw t=""+e,Error(ad(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t));return o}function Rm(e,t,n){if(e==null)return e;var a=[],c=0;return ry(e,a,"","",function(d){return t.call(n,d,c++)}),a}function gR(e){if(e._status===-1){var t=e._result;t=t(),e._status=0,e._result=t,t.then(function(n){e._status===0&&(n=n.default,e._status=1,e._result=n)},function(n){e._status===0&&(e._status=2,e._result=n)})}if(e._status===1)return e._result;throw e._result}var ik={current:null};function Hs(){var e=ik.current;if(e===null)throw Error(ad(321));return e}var vR={ReactCurrentDispatcher:ik,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:Hx,IsSomeRendererActing:{current:!1},assign:qx};Xr.Children={map:Rm,forEach:function(e,t,n){Rm(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Rm(e,function(){t++}),t},toArray:function(e){return Rm(e,function(t){return t})||[]},only:function(e){if(!Zx(e))throw Error(ad(143));return e}};Xr.Component=Np;Xr.PureComponent=Wx;Xr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vR;Xr.cloneElement=function(e,t,n){if(e==null)throw Error(ad(267,e));var a=qx({},e.props),c=e.key,d=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(d=t.ref,o=Hx.current),t.key!==void 0&&(c=""+t.key),e.type&&e.type.defaultProps)var v=e.type.defaultProps;for(x in t)tk.call(t,x)&&!rk.hasOwnProperty(x)&&(a[x]=t[x]===void 0&&v!==void 0?v[x]:t[x])}var x=arguments.length-2;if(x===1)a.children=n;else if(1<x){v=Array(x);for(var E=0;E<x;E++)v[E]=arguments[E+2];a.children=v}return{$$typeof:Bp,type:e.type,key:c,ref:d,props:a,_owner:o}};Xr.createContext=function(e,t){return t===void 0&&(t=null),e={$$typeof:ZC,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider={$$typeof:HC,_context:e},e.Consumer=e};Xr.createElement=nk;Xr.createFactory=function(e){var t=nk.bind(null,e);return t.type=e,t};Xr.createRef=function(){return{current:null}};Xr.forwardRef=function(e){return{$$typeof:KC,render:e}};Xr.isValidElement=Zx;Xr.lazy=function(e){return{$$typeof:YC,_payload:{_status:-1,_result:e},_init:gR}};Xr.memo=function(e,t){return{$$typeof:XC,type:e,compare:t===void 0?null:t}};Xr.useCallback=function(e,t){return Hs().useCallback(e,t)};Xr.useContext=function(e,t){return Hs().useContext(e,t)};Xr.useDebugValue=function(){};Xr.useEffect=function(e,t){return Hs().useEffect(e,t)};Xr.useImperativeHandle=function(e,t,n){return Hs().useImperativeHandle(e,t,n)};Xr.useLayoutEffect=function(e,t){return Hs().useLayoutEffect(e,t)};Xr.useMemo=function(e,t){return Hs().useMemo(e,t)};Xr.useReducer=function(e,t,n){return Hs().useReducer(e,t,n)};Xr.useRef=function(e){return Hs().useRef(e)};Xr.useState=function(e){return Hs().useState(e)};Xr.version="17.0.2";qC.exports=Xr;var Q=qC.exports;const Ce=yg(Q),z_=uR({__proto__:null,default:Ce},[Q]);var ok={exports:{}},ak={};/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){var t,n,a,c;if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;e.unstable_now=function(){return d.now()}}else{var o=Date,v=o.now();e.unstable_now=function(){return o.now()-v}}if(typeof window>"u"||typeof MessageChannel!="function"){var x=null,E=null,T=function(){if(x!==null)try{var Pe=e.unstable_now();x(!0,Pe),x=null}catch(Ge){throw setTimeout(T,0),Ge}};t=function(Pe){x!==null?setTimeout(t,0,Pe):(x=Pe,setTimeout(T,0))},n=function(Pe,Ge){E=setTimeout(Pe,Ge)},a=function(){clearTimeout(E)},e.unstable_shouldYield=function(){return!1},c=e.unstable_forceFrameRate=function(){}}else{var P=window.setTimeout,I=window.clearTimeout;if(typeof console<"u"){var q=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof q!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var $=!1,G=null,D=-1,F=5,V=0;e.unstable_shouldYield=function(){return e.unstable_now()>=V},c=function(){},e.unstable_forceFrameRate=function(Pe){0>Pe||125<Pe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<Pe?Math.floor(1e3/Pe):5};var B=new MessageChannel,z=B.port2;B.port1.onmessage=function(){if(G!==null){var Pe=e.unstable_now();V=Pe+F;try{G(!0,Pe)?z.postMessage(null):($=!1,G=null)}catch(Ge){throw z.postMessage(null),Ge}}else $=!1},t=function(Pe){G=Pe,$||($=!0,z.postMessage(null))},n=function(Pe,Ge){D=P(function(){Pe(e.unstable_now())},Ge)},a=function(){I(D),D=-1}}function re(Pe,Ge){var lt=Pe.length;Pe.push(Ge);e:for(;;){var Re=lt-1>>>1,qe=Pe[Re];if(qe!==void 0&&0<xe(qe,Ge))Pe[Re]=Ge,Pe[lt]=qe,lt=Re;else break e}}function ie(Pe){return Pe=Pe[0],Pe===void 0?null:Pe}function ce(Pe){var Ge=Pe[0];if(Ge!==void 0){var lt=Pe.pop();if(lt!==Ge){Pe[0]=lt;e:for(var Re=0,qe=Pe.length;Re<qe;){var Xt=2*(Re+1)-1,Pt=Pe[Xt],Bt=Xt+1,Ct=Pe[Bt];if(Pt!==void 0&&0>xe(Pt,lt))Ct!==void 0&&0>xe(Ct,Pt)?(Pe[Re]=Ct,Pe[Bt]=lt,Re=Bt):(Pe[Re]=Pt,Pe[Xt]=lt,Re=Xt);else if(Ct!==void 0&&0>xe(Ct,lt))Pe[Re]=Ct,Pe[Bt]=lt,Re=Bt;else break e}}return Ge}return null}function xe(Pe,Ge){var lt=Pe.sortIndex-Ge.sortIndex;return lt!==0?lt:Pe.id-Ge.id}var Te=[],ve=[],we=1,ee=null,pe=3,Oe=!1,Ue=!1,Ee=!1;function ke(Pe){for(var Ge=ie(ve);Ge!==null;){if(Ge.callback===null)ce(ve);else if(Ge.startTime<=Pe)ce(ve),Ge.sortIndex=Ge.expirationTime,re(Te,Ge);else break;Ge=ie(ve)}}function je(Pe){if(Ee=!1,ke(Pe),!Ue)if(ie(Te)!==null)Ue=!0,t(Ze);else{var Ge=ie(ve);Ge!==null&&n(je,Ge.startTime-Pe)}}function Ze(Pe,Ge){Ue=!1,Ee&&(Ee=!1,a()),Oe=!0;var lt=pe;try{for(ke(Ge),ee=ie(Te);ee!==null&&(!(ee.expirationTime>Ge)||Pe&&!e.unstable_shouldYield());){var Re=ee.callback;if(typeof Re=="function"){ee.callback=null,pe=ee.priorityLevel;var qe=Re(ee.expirationTime<=Ge);Ge=e.unstable_now(),typeof qe=="function"?ee.callback=qe:ee===ie(Te)&&ce(Te),ke(Ge)}else ce(Te);ee=ie(Te)}if(ee!==null)var Xt=!0;else{var Pt=ie(ve);Pt!==null&&n(je,Pt.startTime-Ge),Xt=!1}return Xt}finally{ee=null,pe=lt,Oe=!1}}var wt=c;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Pe){Pe.callback=null},e.unstable_continueExecution=function(){Ue||Oe||(Ue=!0,t(Ze))},e.unstable_getCurrentPriorityLevel=function(){return pe},e.unstable_getFirstCallbackNode=function(){return ie(Te)},e.unstable_next=function(Pe){switch(pe){case 1:case 2:case 3:var Ge=3;break;default:Ge=pe}var lt=pe;pe=Ge;try{return Pe()}finally{pe=lt}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=wt,e.unstable_runWithPriority=function(Pe,Ge){switch(Pe){case 1:case 2:case 3:case 4:case 5:break;default:Pe=3}var lt=pe;pe=Pe;try{return Ge()}finally{pe=lt}},e.unstable_scheduleCallback=function(Pe,Ge,lt){var Re=e.unstable_now();switch(typeof lt=="object"&&lt!==null?(lt=lt.delay,lt=typeof lt=="number"&&0<lt?Re+lt:Re):lt=Re,Pe){case 1:var qe=-1;break;case 2:qe=250;break;case 5:qe=1073741823;break;case 4:qe=1e4;break;default:qe=5e3}return qe=lt+qe,Pe={id:we++,callback:Ge,priorityLevel:Pe,startTime:lt,expirationTime:qe,sortIndex:-1},lt>Re?(Pe.sortIndex=lt,re(ve,Pe),ie(Te)===null&&Pe===ie(ve)&&(Ee?a():Ee=!0,n(je,lt-Re))):(Pe.sortIndex=qe,re(Te,Pe),Ue||Oe||(Ue=!0,t(Ze))),Pe},e.unstable_wrapCallback=function(Pe){var Ge=pe;return function(){var lt=pe;pe=Ge;try{return Pe.apply(this,arguments)}finally{pe=lt}}}})(ak);ok.exports=ak;var _R=ok.exports;/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gg=Q,On=WC,Ti=_R;function mt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!gg)throw Error(mt(227));var sk=new Set,Nh={};function $u(e,t){Ep(e,t),Ep(e+"Capture",t)}function Ep(e,t){for(Nh[e]=t,e=0;e<t.length;e++)sk.add(t[e])}var Vs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,l2=Object.prototype.hasOwnProperty,u2={},c2={};function bR(e){return l2.call(c2,e)?!0:l2.call(u2,e)?!1:xR.test(e)?c2[e]=!0:(u2[e]=!0,!1)}function wR(e,t,n,a){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function SR(e,t,n,a){if(t===null||typeof t>"u"||wR(e,t,n,a))return!0;if(a)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function uo(e,t,n,a,c,d,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=c,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=d,this.removeEmptyString=o}var Fi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Fi[e]=new uo(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Fi[t]=new uo(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Fi[e]=new uo(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Fi[e]=new uo(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Fi[e]=new uo(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Fi[e]=new uo(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Fi[e]=new uo(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Fi[e]=new uo(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Fi[e]=new uo(e,5,!1,e.toLowerCase(),null,!1,!1)});var Kx=/[\-:]([a-z])/g;function Xx(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Kx,Xx);Fi[t]=new uo(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Kx,Xx);Fi[t]=new uo(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Kx,Xx);Fi[t]=new uo(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Fi[e]=new uo(e,1,!1,e.toLowerCase(),null,!1,!1)});Fi.xlinkHref=new uo("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Fi[e]=new uo(e,1,!1,e.toLowerCase(),null,!0,!0)});function Yx(e,t,n,a){var c=Fi.hasOwnProperty(t)?Fi[t]:null,d=c!==null?c.type===0:a?!1:!(!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N");d||(SR(t,n,c,a)&&(n=null),a||c===null?bR(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):c.mustUseProperty?e[c.propertyName]=n===null?c.type===3?!1:"":n:(t=c.attributeName,a=c.attributeNamespace,n===null?e.removeAttribute(t):(c=c.type,n=c===3||c===4&&n===!0?"":""+n,a?e.setAttributeNS(a,t,n):e.setAttribute(t,n))))}var ju=gg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fh=60103,ku=60106,yl=60107,Jx=60108,wh=60114,Qx=60109,e1=60110,vg=60112,Sh=60113,Cy=60120,_g=60115,t1=60116,r1=60121,n1=60128,lk=60129,i1=60130,D_=60131;if(typeof Symbol=="function"&&Symbol.for){var ki=Symbol.for;fh=ki("react.element"),ku=ki("react.portal"),yl=ki("react.fragment"),Jx=ki("react.strict_mode"),wh=ki("react.profiler"),Qx=ki("react.provider"),e1=ki("react.context"),vg=ki("react.forward_ref"),Sh=ki("react.suspense"),Cy=ki("react.suspense_list"),_g=ki("react.memo"),t1=ki("react.lazy"),r1=ki("react.block"),ki("react.scope"),n1=ki("react.opaque.id"),lk=ki("react.debug_trace_mode"),i1=ki("react.offscreen"),D_=ki("react.legacy_hidden")}var p2=typeof Symbol=="function"&&Symbol.iterator;function Gf(e){return e===null||typeof e!="object"?null:(e=p2&&e[p2]||e["@@iterator"],typeof e=="function"?e:null)}var E0;function hh(e){if(E0===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);E0=t&&t[1]||""}return`
`+E0+e}var C0=!1;function Lm(e,t){if(!e||C0)return"";C0=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(x){var a=x}Reflect.construct(e,[],t)}else{try{t.call()}catch(x){a=x}e.call(t.prototype)}else{try{throw Error()}catch(x){a=x}e()}}catch(x){if(x&&a&&typeof x.stack=="string"){for(var c=x.stack.split(`
`),d=a.stack.split(`
`),o=c.length-1,v=d.length-1;1<=o&&0<=v&&c[o]!==d[v];)v--;for(;1<=o&&0<=v;o--,v--)if(c[o]!==d[v]){if(o!==1||v!==1)do if(o--,v--,0>v||c[o]!==d[v])return`
`+c[o].replace(" at new "," at ");while(1<=o&&0<=v);break}}}finally{C0=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?hh(e):""}function ER(e){switch(e.tag){case 5:return hh(e.type);case 16:return hh("Lazy");case 13:return hh("Suspense");case 19:return hh("SuspenseList");case 0:case 2:case 15:return e=Lm(e.type,!1),e;case 11:return e=Lm(e.type.render,!1),e;case 22:return e=Lm(e.type._render,!1),e;case 1:return e=Lm(e.type,!0),e;default:return""}}function up(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case yl:return"Fragment";case ku:return"Portal";case wh:return"Profiler";case Jx:return"StrictMode";case Sh:return"Suspense";case Cy:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case e1:return(e.displayName||"Context")+".Consumer";case Qx:return(e._context.displayName||"Context")+".Provider";case vg:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case _g:return up(e.type);case r1:return up(e._render);case t1:t=e._payload,e=e._init;try{return up(e(t))}catch{}}return null}function Al(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function uk(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function CR(e){var t=uk(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var c=n.get,d=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(o){a=""+o,d.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return a},setValue:function(o){a=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function zm(e){e._valueTracker||(e._valueTracker=CR(e))}function ck(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),a="";return e&&(a=uk(e)?e.checked?"true":"false":e.value),e=a,e!==n?(t.setValue(e),!0):!1}function ky(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function O_(e,t){var n=t.checked;return On({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function f2(e,t){var n=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;n=Al(t.value!=null?t.value:n),e._wrapperState={initialChecked:a,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function pk(e,t){t=t.checked,t!=null&&Yx(e,"checked",t,!1)}function B_(e,t){pk(e,t);var n=Al(t.value),a=t.type;if(n!=null)a==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?N_(e,t.type,n):t.hasOwnProperty("defaultValue")&&N_(e,t.type,Al(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function h2(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function N_(e,t,n){(t!=="number"||ky(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function kR(e){var t="";return gg.Children.forEach(e,function(n){n!=null&&(t+=n)}),t}function F_(e,t){return e=On({children:void 0},t),(t=kR(t.children))&&(e.children=t),e}function cp(e,t,n,a){if(e=e.options,t){t={};for(var c=0;c<n.length;c++)t["$"+n[c]]=!0;for(n=0;n<e.length;n++)c=t.hasOwnProperty("$"+e[n].value),e[n].selected!==c&&(e[n].selected=c),c&&a&&(e[n].defaultSelected=!0)}else{for(n=""+Al(n),t=null,c=0;c<e.length;c++){if(e[c].value===n){e[c].selected=!0,a&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function U_(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(mt(91));return On({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function d2(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(mt(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(mt(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Al(n)}}function fk(e,t){var n=Al(t.value),a=Al(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),a!=null&&(e.defaultValue=""+a)}function m2(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}var $_={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function hk(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function j_(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?hk(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Dm,dk=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,a,c){MSApp.execUnsafeLocalFunction(function(){return e(t,n,a,c)})}:e}(function(e,t){if(e.namespaceURI!==$_.svg||"innerHTML"in e)e.innerHTML=t;else{for(Dm=Dm||document.createElement("div"),Dm.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Dm.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Fh(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Eh={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},TR=["Webkit","ms","Moz","O"];Object.keys(Eh).forEach(function(e){TR.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Eh[t]=Eh[e]})});function mk(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Eh.hasOwnProperty(e)&&Eh[e]?(""+t).trim():t+"px"}function yk(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var a=n.indexOf("--")===0,c=mk(n,t[n],a);n==="float"&&(n="cssFloat"),a?e.setProperty(n,c):e[n]=c}}var IR=On({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function V_(e,t){if(t){if(IR[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(mt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(mt(60));if(!(typeof t.dangerouslySetInnerHTML=="object"&&"__html"in t.dangerouslySetInnerHTML))throw Error(mt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(mt(62))}}function q_(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function o1(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var W_=null,pp=null,fp=null;function y2(e){if(e=ld(e)){if(typeof W_!="function")throw Error(mt(280));var t=e.stateNode;t&&(t=Cg(t),W_(e.stateNode,e.type,t))}}function gk(e){pp?fp?fp.push(e):fp=[e]:pp=e}function vk(){if(pp){var e=pp,t=fp;if(fp=pp=null,y2(e),t)for(e=0;e<t.length;e++)y2(t[e])}}function a1(e,t){return e(t)}function _k(e,t,n,a,c){return e(t,n,a,c)}function s1(){}var xk=a1,Tu=!1,k0=!1;function l1(){(pp!==null||fp!==null)&&(s1(),vk())}function PR(e,t,n){if(k0)return e(t,n);k0=!0;try{return xk(e,t,n)}finally{k0=!1,l1()}}function Uh(e,t){var n=e.stateNode;if(n===null)return null;var a=Cg(n);if(a===null)return null;n=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(mt(231,t,typeof n));return n}var G_=!1;if(Vs)try{var Hf={};Object.defineProperty(Hf,"passive",{get:function(){G_=!0}}),window.addEventListener("test",Hf,Hf),window.removeEventListener("test",Hf,Hf)}catch{G_=!1}function AR(e,t,n,a,c,d,o,v,x){var E=Array.prototype.slice.call(arguments,3);try{t.apply(n,E)}catch(T){this.onError(T)}}var Ch=!1,Ty=null,Iy=!1,H_=null,MR={onError:function(e){Ch=!0,Ty=e}};function RR(e,t,n,a,c,d,o,v,x){Ch=!1,Ty=null,AR.apply(MR,arguments)}function LR(e,t,n,a,c,d,o,v,x){if(RR.apply(this,arguments),Ch){if(Ch){var E=Ty;Ch=!1,Ty=null}else throw Error(mt(198));Iy||(Iy=!0,H_=E)}}function Vu(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&1026&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function bk(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function g2(e){if(Vu(e)!==e)throw Error(mt(188))}function zR(e){var t=e.alternate;if(!t){if(t=Vu(e),t===null)throw Error(mt(188));return t!==e?null:e}for(var n=e,a=t;;){var c=n.return;if(c===null)break;var d=c.alternate;if(d===null){if(a=c.return,a!==null){n=a;continue}break}if(c.child===d.child){for(d=c.child;d;){if(d===n)return g2(c),e;if(d===a)return g2(c),t;d=d.sibling}throw Error(mt(188))}if(n.return!==a.return)n=c,a=d;else{for(var o=!1,v=c.child;v;){if(v===n){o=!0,n=c,a=d;break}if(v===a){o=!0,a=c,n=d;break}v=v.sibling}if(!o){for(v=d.child;v;){if(v===n){o=!0,n=d,a=c;break}if(v===a){o=!0,a=d,n=c;break}v=v.sibling}if(!o)throw Error(mt(189))}}if(n.alternate!==a)throw Error(mt(190))}if(n.tag!==3)throw Error(mt(188));return n.stateNode.current===n?e:t}function wk(e){if(e=zR(e),!e)return null;for(var t=e;;){if(t.tag===5||t.tag===6)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function v2(e,t){for(var n=e.alternate;t!==null;){if(t===e||t===n)return!0;t=t.return}return!1}var Sk,u1,Ek,Ck,Z_=!1,Ya=[],bl=null,wl=null,Sl=null,$h=new Map,jh=new Map,Zf=[],_2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function K_(e,t,n,a,c){return{blockedOn:e,domEventName:t,eventSystemFlags:n|16,nativeEvent:c,targetContainers:[a]}}function x2(e,t){switch(e){case"focusin":case"focusout":bl=null;break;case"dragenter":case"dragleave":wl=null;break;case"mouseover":case"mouseout":Sl=null;break;case"pointerover":case"pointerout":$h.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":jh.delete(t.pointerId)}}function Kf(e,t,n,a,c,d){return e===null||e.nativeEvent!==d?(e=K_(t,n,a,c,d),t!==null&&(t=ld(t),t!==null&&u1(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function DR(e,t,n,a,c){switch(t){case"focusin":return bl=Kf(bl,e,t,n,a,c),!0;case"dragenter":return wl=Kf(wl,e,t,n,a,c),!0;case"mouseover":return Sl=Kf(Sl,e,t,n,a,c),!0;case"pointerover":var d=c.pointerId;return $h.set(d,Kf($h.get(d)||null,e,t,n,a,c)),!0;case"gotpointercapture":return d=c.pointerId,jh.set(d,Kf(jh.get(d)||null,e,t,n,a,c)),!0}return!1}function OR(e){var t=Iu(e.target);if(t!==null){var n=Vu(t);if(n!==null){if(t=n.tag,t===13){if(t=bk(n),t!==null){e.blockedOn=t,Ck(e.lanePriority,function(){Ti.unstable_runWithPriority(e.priority,function(){Ek(n)})});return}}else if(t===3&&n.stateNode.hydrate){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ny(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=h1(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n!==null)return t=ld(n),t!==null&&u1(t),e.blockedOn=n,!1;t.shift()}return!0}function b2(e,t,n){ny(e)&&n.delete(t)}function BR(){for(Z_=!1;0<Ya.length;){var e=Ya[0];if(e.blockedOn!==null){e=ld(e.blockedOn),e!==null&&Sk(e);break}for(var t=e.targetContainers;0<t.length;){var n=h1(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n!==null){e.blockedOn=n;break}t.shift()}e.blockedOn===null&&Ya.shift()}bl!==null&&ny(bl)&&(bl=null),wl!==null&&ny(wl)&&(wl=null),Sl!==null&&ny(Sl)&&(Sl=null),$h.forEach(b2),jh.forEach(b2)}function Xf(e,t){e.blockedOn===t&&(e.blockedOn=null,Z_||(Z_=!0,Ti.unstable_scheduleCallback(Ti.unstable_NormalPriority,BR)))}function kk(e){function t(c){return Xf(c,e)}if(0<Ya.length){Xf(Ya[0],e);for(var n=1;n<Ya.length;n++){var a=Ya[n];a.blockedOn===e&&(a.blockedOn=null)}}for(bl!==null&&Xf(bl,e),wl!==null&&Xf(wl,e),Sl!==null&&Xf(Sl,e),$h.forEach(t),jh.forEach(t),n=0;n<Zf.length;n++)a=Zf[n],a.blockedOn===e&&(a.blockedOn=null);for(;0<Zf.length&&(n=Zf[0],n.blockedOn===null);)OR(n),n.blockedOn===null&&Zf.shift()}function Om(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var tp={animationend:Om("Animation","AnimationEnd"),animationiteration:Om("Animation","AnimationIteration"),animationstart:Om("Animation","AnimationStart"),transitionend:Om("Transition","TransitionEnd")},T0={},Tk={};Vs&&(Tk=document.createElement("div").style,"AnimationEvent"in window||(delete tp.animationend.animation,delete tp.animationiteration.animation,delete tp.animationstart.animation),"TransitionEvent"in window||delete tp.transitionend.transition);function xg(e){if(T0[e])return T0[e];if(!tp[e])return e;var t=tp[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Tk)return T0[e]=t[n];return e}var Ik=xg("animationend"),Pk=xg("animationiteration"),Ak=xg("animationstart"),Mk=xg("transitionend"),Rk=new Map,c1=new Map,NR=["abort","abort",Ik,"animationEnd",Pk,"animationIteration",Ak,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Mk,"transitionEnd","waiting","waiting"];function p1(e,t){for(var n=0;n<e.length;n+=2){var a=e[n],c=e[n+1];c="on"+(c[0].toUpperCase()+c.slice(1)),c1.set(a,t),Rk.set(a,c),$u(c,[a])}}var FR=Ti.unstable_now;FR();var bn=8;function Xc(e){if(1&e)return bn=15,1;if(2&e)return bn=14,2;if(4&e)return bn=13,4;var t=24&e;return t!==0?(bn=12,t):e&32?(bn=11,32):(t=192&e,t!==0?(bn=10,t):e&256?(bn=9,256):(t=3584&e,t!==0?(bn=8,t):e&4096?(bn=7,4096):(t=4186112&e,t!==0?(bn=6,t):(t=62914560&e,t!==0?(bn=5,t):e&67108864?(bn=4,67108864):e&134217728?(bn=3,134217728):(t=805306368&e,t!==0?(bn=2,t):1073741824&e?(bn=1,1073741824):(bn=8,e))))))}function UR(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function $R(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(mt(358,e))}}function Vh(e,t){var n=e.pendingLanes;if(n===0)return bn=0;var a=0,c=0,d=e.expiredLanes,o=e.suspendedLanes,v=e.pingedLanes;if(d!==0)a=d,c=bn=15;else if(d=n&134217727,d!==0){var x=d&~o;x!==0?(a=Xc(x),c=bn):(v&=d,v!==0&&(a=Xc(v),c=bn))}else d=n&~o,d!==0?(a=Xc(d),c=bn):v!==0&&(a=Xc(v),c=bn);if(a===0)return 0;if(a=31-Ml(a),a=n&((0>a?0:1<<a)<<1)-1,t!==0&&t!==a&&!(t&o)){if(Xc(t),c<=bn)return t;bn=c}if(t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)n=31-Ml(t),c=1<<n,a|=e[n],t&=~c;return a}function Lk(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Py(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return e=Yc(24&~t),e===0?Py(10,t):e;case 10:return e=Yc(192&~t),e===0?Py(8,t):e;case 8:return e=Yc(3584&~t),e===0&&(e=Yc(4186112&~t),e===0&&(e=512)),e;case 2:return t=Yc(805306368&~t),t===0&&(t=268435456),t}throw Error(mt(358,e))}function Yc(e){return e&-e}function I0(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function bg(e,t,n){e.pendingLanes|=t;var a=t-1;e.suspendedLanes&=a,e.pingedLanes&=a,e=e.eventTimes,t=31-Ml(t),e[t]=n}var Ml=Math.clz32?Math.clz32:qR,jR=Math.log,VR=Math.LN2;function qR(e){return e===0?32:31-(jR(e)/VR|0)|0}var WR=Ti.unstable_UserBlockingPriority,GR=Ti.unstable_runWithPriority,iy=!0;function HR(e,t,n,a){Tu||s1();var c=f1,d=Tu;Tu=!0;try{_k(c,e,t,n,a)}finally{(Tu=d)||l1()}}function ZR(e,t,n,a){GR(WR,f1.bind(null,e,t,n,a))}function f1(e,t,n,a){if(iy){var c;if((c=(t&4)===0)&&0<Ya.length&&-1<_2.indexOf(e))e=K_(null,e,t,n,a),Ya.push(e);else{var d=h1(e,t,n,a);if(d===null)c&&x2(e,a);else{if(c){if(-1<_2.indexOf(e)){e=K_(d,e,t,n,a),Ya.push(e);return}if(DR(d,e,t,n,a))return;x2(e,a)}Gk(e,t,a,null,n)}}}}function h1(e,t,n,a){var c=o1(a);if(c=Iu(c),c!==null){var d=Vu(c);if(d===null)c=null;else{var o=d.tag;if(o===13){if(c=bk(d),c!==null)return c;c=null}else if(o===3){if(d.stateNode.hydrate)return d.tag===3?d.stateNode.containerInfo:null;c=null}else d!==c&&(c=null)}}return Gk(e,t,a,c,n),null}var gl=null,d1=null,oy=null;function zk(){if(oy)return oy;var e,t=d1,n=t.length,a,c="value"in gl?gl.value:gl.textContent,d=c.length;for(e=0;e<n&&t[e]===c[e];e++);var o=n-e;for(a=1;a<=o&&t[n-a]===c[d-a];a++);return oy=c.slice(e,1<a?1-a:void 0)}function ay(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Bm(){return!0}function w2(){return!1}function qo(e){function t(n,a,c,d,o){this._reactName=n,this._targetInst=c,this.type=a,this.nativeEvent=d,this.target=o,this.currentTarget=null;for(var v in e)e.hasOwnProperty(v)&&(n=e[v],this[v]=n?n(d):d[v]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Bm:w2,this.isPropagationStopped=w2,this}return On(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Bm)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Bm)},persist:function(){},isPersistent:Bm}),t}var Fp={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},m1=qo(Fp),sd=On({},Fp,{view:0,detail:0}),KR=qo(sd),P0,A0,Yf,wg=On({},sd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:y1,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Yf&&(Yf&&e.type==="mousemove"?(P0=e.screenX-Yf.screenX,A0=e.screenY-Yf.screenY):A0=P0=0,Yf=e),P0)},movementY:function(e){return"movementY"in e?e.movementY:A0}}),S2=qo(wg),XR=On({},wg,{dataTransfer:0}),YR=qo(XR),JR=On({},sd,{relatedTarget:0}),M0=qo(JR),QR=On({},Fp,{animationName:0,elapsedTime:0,pseudoElement:0}),e3=qo(QR),t3=On({},Fp,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),r3=qo(t3),n3=On({},Fp,{data:0}),E2=qo(n3),i3={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},o3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},a3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function s3(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=a3[e])?!!t[e]:!1}function y1(){return s3}var l3=On({},sd,{key:function(e){if(e.key){var t=i3[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ay(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?o3[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:y1,charCode:function(e){return e.type==="keypress"?ay(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ay(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),u3=qo(l3),c3=On({},wg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),C2=qo(c3),p3=On({},sd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:y1}),f3=qo(p3),h3=On({},Fp,{propertyName:0,elapsedTime:0,pseudoElement:0}),m3=qo(h3),y3=On({},wg,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),g3=qo(y3),v3=[9,13,27,32],g1=Vs&&"CompositionEvent"in window,kh=null;Vs&&"documentMode"in document&&(kh=document.documentMode);var _3=Vs&&"TextEvent"in window&&!kh,Dk=Vs&&(!g1||kh&&8<kh&&11>=kh),k2=String.fromCharCode(32),T2=!1;function Ok(e,t){switch(e){case"keyup":return v3.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bk(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var rp=!1;function x3(e,t){switch(e){case"compositionend":return Bk(t);case"keypress":return t.which!==32?null:(T2=!0,k2);case"textInput":return e=t.data,e===k2&&T2?null:e;default:return null}}function b3(e,t){if(rp)return e==="compositionend"||!g1&&Ok(e,t)?(e=zk(),oy=d1=gl=null,rp=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Dk&&t.locale!=="ko"?null:t.data;default:return null}}var w3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function I2(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!w3[e.type]:t==="textarea"}function Nk(e,t,n,a){gk(a),t=Ay(t,"onChange"),0<t.length&&(n=new m1("onChange","change",null,n,a),e.push({event:n,listeners:t}))}var Th=null,qh=null;function S3(e){Vk(e,0)}function Sg(e){var t=ip(e);if(ck(t))return e}function E3(e,t){if(e==="change")return t}var Fk=!1;if(Vs){var R0;if(Vs){var L0="oninput"in document;if(!L0){var P2=document.createElement("div");P2.setAttribute("oninput","return;"),L0=typeof P2.oninput=="function"}R0=L0}else R0=!1;Fk=R0&&(!document.documentMode||9<document.documentMode)}function A2(){Th&&(Th.detachEvent("onpropertychange",Uk),qh=Th=null)}function Uk(e){if(e.propertyName==="value"&&Sg(qh)){var t=[];if(Nk(t,qh,e,o1(e)),e=S3,Tu)e(t);else{Tu=!0;try{a1(e,t)}finally{Tu=!1,l1()}}}}function C3(e,t,n){e==="focusin"?(A2(),Th=t,qh=n,Th.attachEvent("onpropertychange",Uk)):e==="focusout"&&A2()}function k3(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Sg(qh)}function T3(e,t){if(e==="click")return Sg(t)}function I3(e,t){if(e==="input"||e==="change")return Sg(t)}function P3(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ra=typeof Object.is=="function"?Object.is:P3,A3=Object.prototype.hasOwnProperty;function Wh(e,t){if(ra(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++)if(!A3.call(t,n[a])||!ra(e[n[a]],t[n[a]]))return!1;return!0}function M2(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function R2(e,t){var n=M2(e);e=0;for(var a;n;){if(n.nodeType===3){if(a=e+n.textContent.length,e<=t&&a>=t)return{node:n,offset:t-e};e=a}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=M2(n)}}function $k(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?$k(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function L2(){for(var e=window,t=ky();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ky(e.document)}return t}function X_(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var M3=Vs&&"documentMode"in document&&11>=document.documentMode,np=null,Y_=null,Ih=null,J_=!1;function z2(e,t,n){var a=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;J_||np==null||np!==ky(a)||(a=np,"selectionStart"in a&&X_(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Ih&&Wh(Ih,a)||(Ih=a,a=Ay(Y_,"onSelect"),0<a.length&&(t=new m1("onSelect","select",null,t,n),e.push({event:t,listeners:a}),t.target=np)))}p1("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);p1("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);p1(NR,2);for(var D2="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),z0=0;z0<D2.length;z0++)c1.set(D2[z0],0);Ep("onMouseEnter",["mouseout","mouseover"]);Ep("onMouseLeave",["mouseout","mouseover"]);Ep("onPointerEnter",["pointerout","pointerover"]);Ep("onPointerLeave",["pointerout","pointerover"]);$u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));$u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));$u("onBeforeInput",["compositionend","keypress","textInput","paste"]);$u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));$u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));$u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var dh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jk=new Set("cancel close invalid load scroll toggle".split(" ").concat(dh));function O2(e,t,n){var a=e.type||"unknown-event";e.currentTarget=n,LR(a,t,void 0,e),e.currentTarget=null}function Vk(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var a=e[n],c=a.event;a=a.listeners;e:{var d=void 0;if(t)for(var o=a.length-1;0<=o;o--){var v=a[o],x=v.instance,E=v.currentTarget;if(v=v.listener,x!==d&&c.isPropagationStopped())break e;O2(c,v,E),d=x}else for(o=0;o<a.length;o++){if(v=a[o],x=v.instance,E=v.currentTarget,v=v.listener,x!==d&&c.isPropagationStopped())break e;O2(c,v,E),d=x}}}if(Iy)throw e=H_,Iy=!1,H_=null,e}function An(e,t){var n=Zk(t),a=e+"__bubble";n.has(a)||(Wk(t,e,2,!1),n.add(a))}var B2="_reactListening"+Math.random().toString(36).slice(2);function qk(e){e[B2]||(e[B2]=!0,sk.forEach(function(t){jk.has(t)||N2(t,!1,e,null),N2(t,!0,e,null)}))}function N2(e,t,n,a){var c=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,d=n;if(e==="selectionchange"&&n.nodeType!==9&&(d=n.ownerDocument),a!==null&&!t&&jk.has(e)){if(e!=="scroll")return;c|=2,d=a}var o=Zk(d),v=e+"__"+(t?"capture":"bubble");o.has(v)||(t&&(c|=4),Wk(d,e,c,t),o.add(v))}function Wk(e,t,n,a){var c=c1.get(t);switch(c===void 0?2:c){case 0:c=HR;break;case 1:c=ZR;break;default:c=f1}n=c.bind(null,t,n,e),c=void 0,!G_||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),a?c!==void 0?e.addEventListener(t,n,{capture:!0,passive:c}):e.addEventListener(t,n,!0):c!==void 0?e.addEventListener(t,n,{passive:c}):e.addEventListener(t,n,!1)}function Gk(e,t,n,a,c){var d=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var o=a.tag;if(o===3||o===4){var v=a.stateNode.containerInfo;if(v===c||v.nodeType===8&&v.parentNode===c)break;if(o===4)for(o=a.return;o!==null;){var x=o.tag;if((x===3||x===4)&&(x=o.stateNode.containerInfo,x===c||x.nodeType===8&&x.parentNode===c))return;o=o.return}for(;v!==null;){if(o=Iu(v),o===null)return;if(x=o.tag,x===5||x===6){a=d=o;continue e}v=v.parentNode}}a=a.return}PR(function(){var E=d,T=o1(n),P=[];e:{var I=Rk.get(e);if(I!==void 0){var q=m1,$=e;switch(e){case"keypress":if(ay(n)===0)break e;case"keydown":case"keyup":q=u3;break;case"focusin":$="focus",q=M0;break;case"focusout":$="blur",q=M0;break;case"beforeblur":case"afterblur":q=M0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":q=S2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":q=YR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":q=f3;break;case Ik:case Pk:case Ak:q=e3;break;case Mk:q=m3;break;case"scroll":q=KR;break;case"wheel":q=g3;break;case"copy":case"cut":case"paste":q=r3;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":q=C2}var G=(t&4)!==0,D=!G&&e==="scroll",F=G?I!==null?I+"Capture":null:I;G=[];for(var V=E,B;V!==null;){B=V;var z=B.stateNode;if(B.tag===5&&z!==null&&(B=z,F!==null&&(z=Uh(V,F),z!=null&&G.push(Gh(V,z,B)))),D)break;V=V.return}0<G.length&&(I=new q(I,$,null,n,T),P.push({event:I,listeners:G}))}}if(!(t&7)){e:{if(I=e==="mouseover"||e==="pointerover",q=e==="mouseout"||e==="pointerout",I&&!(t&16)&&($=n.relatedTarget||n.fromElement)&&(Iu($)||$[Up]))break e;if((q||I)&&(I=T.window===T?T:(I=T.ownerDocument)?I.defaultView||I.parentWindow:window,q?($=n.relatedTarget||n.toElement,q=E,$=$?Iu($):null,$!==null&&(D=Vu($),$!==D||$.tag!==5&&$.tag!==6)&&($=null)):(q=null,$=E),q!==$)){if(G=S2,z="onMouseLeave",F="onMouseEnter",V="mouse",(e==="pointerout"||e==="pointerover")&&(G=C2,z="onPointerLeave",F="onPointerEnter",V="pointer"),D=q==null?I:ip(q),B=$==null?I:ip($),I=new G(z,V+"leave",q,n,T),I.target=D,I.relatedTarget=B,z=null,Iu(T)===E&&(G=new G(F,V+"enter",$,n,T),G.target=B,G.relatedTarget=D,z=G),D=z,q&&$)t:{for(G=q,F=$,V=0,B=G;B;B=Uc(B))V++;for(B=0,z=F;z;z=Uc(z))B++;for(;0<V-B;)G=Uc(G),V--;for(;0<B-V;)F=Uc(F),B--;for(;V--;){if(G===F||F!==null&&G===F.alternate)break t;G=Uc(G),F=Uc(F)}G=null}else G=null;q!==null&&F2(P,I,q,G,!1),$!==null&&D!==null&&F2(P,D,$,G,!0)}}e:{if(I=E?ip(E):window,q=I.nodeName&&I.nodeName.toLowerCase(),q==="select"||q==="input"&&I.type==="file")var re=E3;else if(I2(I))if(Fk)re=I3;else{re=k3;var ie=C3}else(q=I.nodeName)&&q.toLowerCase()==="input"&&(I.type==="checkbox"||I.type==="radio")&&(re=T3);if(re&&(re=re(e,E))){Nk(P,re,n,T);break e}ie&&ie(e,I,E),e==="focusout"&&(ie=I._wrapperState)&&ie.controlled&&I.type==="number"&&N_(I,"number",I.value)}switch(ie=E?ip(E):window,e){case"focusin":(I2(ie)||ie.contentEditable==="true")&&(np=ie,Y_=E,Ih=null);break;case"focusout":Ih=Y_=np=null;break;case"mousedown":J_=!0;break;case"contextmenu":case"mouseup":case"dragend":J_=!1,z2(P,n,T);break;case"selectionchange":if(M3)break;case"keydown":case"keyup":z2(P,n,T)}var ce;if(g1)e:{switch(e){case"compositionstart":var xe="onCompositionStart";break e;case"compositionend":xe="onCompositionEnd";break e;case"compositionupdate":xe="onCompositionUpdate";break e}xe=void 0}else rp?Ok(e,n)&&(xe="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(xe="onCompositionStart");xe&&(Dk&&n.locale!=="ko"&&(rp||xe!=="onCompositionStart"?xe==="onCompositionEnd"&&rp&&(ce=zk()):(gl=T,d1="value"in gl?gl.value:gl.textContent,rp=!0)),ie=Ay(E,xe),0<ie.length&&(xe=new E2(xe,e,null,n,T),P.push({event:xe,listeners:ie}),ce?xe.data=ce:(ce=Bk(n),ce!==null&&(xe.data=ce)))),(ce=_3?x3(e,n):b3(e,n))&&(E=Ay(E,"onBeforeInput"),0<E.length&&(T=new E2("onBeforeInput","beforeinput",null,n,T),P.push({event:T,listeners:E}),T.data=ce))}Vk(P,t)})}function Gh(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ay(e,t){for(var n=t+"Capture",a=[];e!==null;){var c=e,d=c.stateNode;c.tag===5&&d!==null&&(c=d,d=Uh(e,n),d!=null&&a.unshift(Gh(e,d,c)),d=Uh(e,t),d!=null&&a.push(Gh(e,d,c))),e=e.return}return a}function Uc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function F2(e,t,n,a,c){for(var d=t._reactName,o=[];n!==null&&n!==a;){var v=n,x=v.alternate,E=v.stateNode;if(x!==null&&x===a)break;v.tag===5&&E!==null&&(v=E,c?(x=Uh(n,d),x!=null&&o.unshift(Gh(n,x,v))):c||(x=Uh(n,d),x!=null&&o.push(Gh(n,x,v)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}function My(){}var D0=null,O0=null;function Hk(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Q_(e,t){return e==="textarea"||e==="option"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var U2=typeof setTimeout=="function"?setTimeout:void 0,R3=typeof clearTimeout=="function"?clearTimeout:void 0;function v1(e){e.nodeType===1?e.textContent="":e.nodeType===9&&(e=e.body,e!=null&&(e.textContent=""))}function hp(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break}return e}function $2(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var B0=0;function L3(e){return{$$typeof:n1,toString:e,valueOf:e}}var Eg=Math.random().toString(36).slice(2),vl="__reactFiber$"+Eg,Ry="__reactProps$"+Eg,Up="__reactContainer$"+Eg,j2="__reactEvents$"+Eg;function Iu(e){var t=e[vl];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Up]||n[vl]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=$2(e);e!==null;){if(n=e[vl])return n;e=$2(e)}return t}e=n,n=e.parentNode}return null}function ld(e){return e=e[vl]||e[Up],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ip(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(mt(33))}function Cg(e){return e[Ry]||null}function Zk(e){var t=e[j2];return t===void 0&&(t=e[j2]=new Set),t}var ex=[],op=-1;function Nl(e){return{current:e}}function Mn(e){0>op||(e.current=ex[op],ex[op]=null,op--)}function Xn(e,t){op++,ex[op]=e.current,e.current=t}var Rl={},eo=Nl(Rl),Eo=Nl(!1),Du=Rl;function Cp(e,t){var n=e.type.contextTypes;if(!n)return Rl;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var c={},d;for(d in n)c[d]=t[d];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function Co(e){return e=e.childContextTypes,e!=null}function Ly(){Mn(Eo),Mn(eo)}function V2(e,t,n){if(eo.current!==Rl)throw Error(mt(168));Xn(eo,t),Xn(Eo,n)}function Kk(e,t,n){var a=e.stateNode;if(e=t.childContextTypes,typeof a.getChildContext!="function")return n;a=a.getChildContext();for(var c in a)if(!(c in e))throw Error(mt(108,up(t)||"Unknown",c));return On({},n,a)}function sy(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Rl,Du=eo.current,Xn(eo,e),Xn(Eo,Eo.current),!0}function q2(e,t,n){var a=e.stateNode;if(!a)throw Error(mt(169));n?(e=Kk(e,t,Du),a.__reactInternalMemoizedMergedChildContext=e,Mn(Eo),Mn(eo),Xn(eo,e)):Mn(Eo),Xn(Eo,n)}var _1=null,Lu=null,z3=Ti.unstable_runWithPriority,x1=Ti.unstable_scheduleCallback,tx=Ti.unstable_cancelCallback,D3=Ti.unstable_shouldYield,W2=Ti.unstable_requestPaint,rx=Ti.unstable_now,O3=Ti.unstable_getCurrentPriorityLevel,kg=Ti.unstable_ImmediatePriority,Xk=Ti.unstable_UserBlockingPriority,Yk=Ti.unstable_NormalPriority,Jk=Ti.unstable_LowPriority,Qk=Ti.unstable_IdlePriority,N0={},B3=W2!==void 0?W2:function(){},Os=null,ly=null,F0=!1,G2=rx(),Ji=1e4>G2?rx:function(){return rx()-G2};function kp(){switch(O3()){case kg:return 99;case Xk:return 98;case Yk:return 97;case Jk:return 96;case Qk:return 95;default:throw Error(mt(332))}}function eT(e){switch(e){case 99:return kg;case 98:return Xk;case 97:return Yk;case 96:return Jk;case 95:return Qk;default:throw Error(mt(332))}}function Ou(e,t){return e=eT(e),z3(e,t)}function Hh(e,t,n){return e=eT(e),x1(e,t,n)}function as(){if(ly!==null){var e=ly;ly=null,tx(e)}tT()}function tT(){if(!F0&&Os!==null){F0=!0;var e=0;try{var t=Os;Ou(99,function(){for(;e<t.length;e++){var n=t[e];do n=n(!0);while(n!==null)}}),Os=null}catch(n){throw Os!==null&&(Os=Os.slice(e+1)),x1(kg,as),n}finally{F0=!1}}}var N3=ju.ReactCurrentBatchConfig;function _a(e,t){if(e&&e.defaultProps){t=On({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var zy=Nl(null),Dy=null,ap=null,Oy=null;function b1(){Oy=ap=Dy=null}function w1(e){var t=zy.current;Mn(zy),e.type._context._currentValue=t}function rT(e,t){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)===t){if(n===null||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,n!==null&&(n.childLanes|=t);e=e.return}}function dp(e,t){Dy=e,Oy=ap=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Sa=!0),e.firstContext=null)}function oa(e,t){if(Oy!==e&&t!==!1&&t!==0)if((typeof t!="number"||t===1073741823)&&(Oy=e,t=1073741823),t={context:e,observedBits:t,next:null},ap===null){if(Dy===null)throw Error(mt(308));ap=t,Dy.dependencies={lanes:0,firstContext:t,responders:null}}else ap=ap.next=t;return e._currentValue}var ml=!1;function S1(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function nT(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function El(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Cl(e,t){if(e=e.updateQueue,e!==null){e=e.shared;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function H2(e,t){var n=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,n===a)){var c=null,d=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};d===null?c=d=o:d=d.next=o,n=n.next}while(n!==null);d===null?c=d=t:d=d.next=t}else c=d=t;n={baseState:a.baseState,firstBaseUpdate:c,lastBaseUpdate:d,shared:a.shared,effects:a.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Zh(e,t,n,a){var c=e.updateQueue;ml=!1;var d=c.firstBaseUpdate,o=c.lastBaseUpdate,v=c.shared.pending;if(v!==null){c.shared.pending=null;var x=v,E=x.next;x.next=null,o===null?d=E:o.next=E,o=x;var T=e.alternate;if(T!==null){T=T.updateQueue;var P=T.lastBaseUpdate;P!==o&&(P===null?T.firstBaseUpdate=E:P.next=E,T.lastBaseUpdate=x)}}if(d!==null){P=c.baseState,o=0,T=E=x=null;do{v=d.lane;var I=d.eventTime;if((a&v)===v){T!==null&&(T=T.next={eventTime:I,lane:0,tag:d.tag,payload:d.payload,callback:d.callback,next:null});e:{var q=e,$=d;switch(v=t,I=n,$.tag){case 1:if(q=$.payload,typeof q=="function"){P=q.call(I,P,v);break e}P=q;break e;case 3:q.flags=q.flags&-4097|64;case 0:if(q=$.payload,v=typeof q=="function"?q.call(I,P,v):q,v==null)break e;P=On({},P,v);break e;case 2:ml=!0}}d.callback!==null&&(e.flags|=32,v=c.effects,v===null?c.effects=[d]:v.push(d))}else I={eventTime:I,lane:v,tag:d.tag,payload:d.payload,callback:d.callback,next:null},T===null?(E=T=I,x=P):T=T.next=I,o|=v;if(d=d.next,d===null){if(v=c.shared.pending,v===null)break;d=v.next,v.next=null,c.lastBaseUpdate=v,c.shared.pending=null}}while(1);T===null&&(x=P),c.baseState=x,c.firstBaseUpdate=E,c.lastBaseUpdate=T,cd|=o,e.lanes=o,e.memoizedState=P}}function Z2(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],c=a.callback;if(c!==null){if(a.callback=null,a=n,typeof c!="function")throw Error(mt(191,c));c.call(a)}}}var iT=new gg.Component().refs;function By(e,t,n,a){t=e.memoizedState,n=n(a,t),n=n==null?t:On({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Tg={isMounted:function(e){return(e=e._reactInternals)?Vu(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var a=$o(),c=kl(e),d=El(a,c);d.payload=t,n!=null&&(d.callback=n),Cl(e,d),Tl(e,c,a)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var a=$o(),c=kl(e),d=El(a,c);d.tag=1,d.payload=t,n!=null&&(d.callback=n),Cl(e,d),Tl(e,c,a)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=$o(),a=kl(e),c=El(n,a);c.tag=2,t!=null&&(c.callback=t),Cl(e,c),Tl(e,a,n)}};function K2(e,t,n,a,c,d,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,d,o):t.prototype&&t.prototype.isPureReactComponent?!Wh(n,a)||!Wh(c,d):!0}function oT(e,t,n){var a=!1,c=Rl,d=t.contextType;return typeof d=="object"&&d!==null?d=oa(d):(c=Co(t)?Du:eo.current,a=t.contextTypes,d=(a=a!=null)?Cp(e,c):Rl),t=new t(n,d),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Tg,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=d),t}function X2(e,t,n,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,a),t.state!==e&&Tg.enqueueReplaceState(t,t.state,null)}function nx(e,t,n,a){var c=e.stateNode;c.props=n,c.state=e.memoizedState,c.refs=iT,S1(e);var d=t.contextType;typeof d=="object"&&d!==null?c.context=oa(d):(d=Co(t)?Du:eo.current,c.context=Cp(e,d)),Zh(e,n,c,a),c.state=e.memoizedState,d=t.getDerivedStateFromProps,typeof d=="function"&&(By(e,t,d,n),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&Tg.enqueueReplaceState(c,c.state,null),Zh(e,n,c,a),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4)}var Nm=Array.isArray;function Jf(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(mt(309));var a=n.stateNode}if(!a)throw Error(mt(147,e));var c=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===c?t.ref:(t=function(d){var o=a.refs;o===iT&&(o=a.refs={}),d===null?delete o[c]:o[c]=d},t._stringRef=c,t)}if(typeof e!="string")throw Error(mt(284));if(!n._owner)throw Error(mt(290,e))}return e}function Fm(e,t){if(e.type!=="textarea")throw Error(mt(31,Object.prototype.toString.call(t)==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function aT(e){function t(D,F){if(e){var V=D.lastEffect;V!==null?(V.nextEffect=F,D.lastEffect=F):D.firstEffect=D.lastEffect=F,F.nextEffect=null,F.flags=8}}function n(D,F){if(!e)return null;for(;F!==null;)t(D,F),F=F.sibling;return null}function a(D,F){for(D=new Map;F!==null;)F.key!==null?D.set(F.key,F):D.set(F.index,F),F=F.sibling;return D}function c(D,F){return D=zl(D,F),D.index=0,D.sibling=null,D}function d(D,F,V){return D.index=V,e?(V=D.alternate,V!==null?(V=V.index,V<F?(D.flags=2,F):V):(D.flags=2,F)):F}function o(D){return e&&D.alternate===null&&(D.flags=2),D}function v(D,F,V,B){return F===null||F.tag!==6?(F=q0(V,D.mode,B),F.return=D,F):(F=c(F,V),F.return=D,F)}function x(D,F,V,B){return F!==null&&F.elementType===V.type?(B=c(F,V.props),B.ref=Jf(D,F,V),B.return=D,B):(B=fy(V.type,V.key,V.props,null,D.mode,B),B.ref=Jf(D,F,V),B.return=D,B)}function E(D,F,V,B){return F===null||F.tag!==4||F.stateNode.containerInfo!==V.containerInfo||F.stateNode.implementation!==V.implementation?(F=W0(V,D.mode,B),F.return=D,F):(F=c(F,V.children||[]),F.return=D,F)}function T(D,F,V,B,z){return F===null||F.tag!==7?(F=vp(V,D.mode,B,z),F.return=D,F):(F=c(F,V),F.return=D,F)}function P(D,F,V){if(typeof F=="string"||typeof F=="number")return F=q0(""+F,D.mode,V),F.return=D,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case fh:return V=fy(F.type,F.key,F.props,null,D.mode,V),V.ref=Jf(D,null,F),V.return=D,V;case ku:return F=W0(F,D.mode,V),F.return=D,F}if(Nm(F)||Gf(F))return F=vp(F,D.mode,V,null),F.return=D,F;Fm(D,F)}return null}function I(D,F,V,B){var z=F!==null?F.key:null;if(typeof V=="string"||typeof V=="number")return z!==null?null:v(D,F,""+V,B);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case fh:return V.key===z?V.type===yl?T(D,F,V.props.children,B,z):x(D,F,V,B):null;case ku:return V.key===z?E(D,F,V,B):null}if(Nm(V)||Gf(V))return z!==null?null:T(D,F,V,B,null);Fm(D,V)}return null}function q(D,F,V,B,z){if(typeof B=="string"||typeof B=="number")return D=D.get(V)||null,v(F,D,""+B,z);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case fh:return D=D.get(B.key===null?V:B.key)||null,B.type===yl?T(F,D,B.props.children,z,B.key):x(F,D,B,z);case ku:return D=D.get(B.key===null?V:B.key)||null,E(F,D,B,z)}if(Nm(B)||Gf(B))return D=D.get(V)||null,T(F,D,B,z,null);Fm(F,B)}return null}function $(D,F,V,B){for(var z=null,re=null,ie=F,ce=F=0,xe=null;ie!==null&&ce<V.length;ce++){ie.index>ce?(xe=ie,ie=null):xe=ie.sibling;var Te=I(D,ie,V[ce],B);if(Te===null){ie===null&&(ie=xe);break}e&&ie&&Te.alternate===null&&t(D,ie),F=d(Te,F,ce),re===null?z=Te:re.sibling=Te,re=Te,ie=xe}if(ce===V.length)return n(D,ie),z;if(ie===null){for(;ce<V.length;ce++)ie=P(D,V[ce],B),ie!==null&&(F=d(ie,F,ce),re===null?z=ie:re.sibling=ie,re=ie);return z}for(ie=a(D,ie);ce<V.length;ce++)xe=q(ie,D,ce,V[ce],B),xe!==null&&(e&&xe.alternate!==null&&ie.delete(xe.key===null?ce:xe.key),F=d(xe,F,ce),re===null?z=xe:re.sibling=xe,re=xe);return e&&ie.forEach(function(ve){return t(D,ve)}),z}function G(D,F,V,B){var z=Gf(V);if(typeof z!="function")throw Error(mt(150));if(V=z.call(V),V==null)throw Error(mt(151));for(var re=z=null,ie=F,ce=F=0,xe=null,Te=V.next();ie!==null&&!Te.done;ce++,Te=V.next()){ie.index>ce?(xe=ie,ie=null):xe=ie.sibling;var ve=I(D,ie,Te.value,B);if(ve===null){ie===null&&(ie=xe);break}e&&ie&&ve.alternate===null&&t(D,ie),F=d(ve,F,ce),re===null?z=ve:re.sibling=ve,re=ve,ie=xe}if(Te.done)return n(D,ie),z;if(ie===null){for(;!Te.done;ce++,Te=V.next())Te=P(D,Te.value,B),Te!==null&&(F=d(Te,F,ce),re===null?z=Te:re.sibling=Te,re=Te);return z}for(ie=a(D,ie);!Te.done;ce++,Te=V.next())Te=q(ie,D,ce,Te.value,B),Te!==null&&(e&&Te.alternate!==null&&ie.delete(Te.key===null?ce:Te.key),F=d(Te,F,ce),re===null?z=Te:re.sibling=Te,re=Te);return e&&ie.forEach(function(we){return t(D,we)}),z}return function(D,F,V,B){var z=typeof V=="object"&&V!==null&&V.type===yl&&V.key===null;z&&(V=V.props.children);var re=typeof V=="object"&&V!==null;if(re)switch(V.$$typeof){case fh:e:{for(re=V.key,z=F;z!==null;){if(z.key===re){switch(z.tag){case 7:if(V.type===yl){n(D,z.sibling),F=c(z,V.props.children),F.return=D,D=F;break e}break;default:if(z.elementType===V.type){n(D,z.sibling),F=c(z,V.props),F.ref=Jf(D,z,V),F.return=D,D=F;break e}}n(D,z);break}else t(D,z);z=z.sibling}V.type===yl?(F=vp(V.props.children,D.mode,B,V.key),F.return=D,D=F):(B=fy(V.type,V.key,V.props,null,D.mode,B),B.ref=Jf(D,F,V),B.return=D,D=B)}return o(D);case ku:e:{for(z=V.key;F!==null;){if(F.key===z)if(F.tag===4&&F.stateNode.containerInfo===V.containerInfo&&F.stateNode.implementation===V.implementation){n(D,F.sibling),F=c(F,V.children||[]),F.return=D,D=F;break e}else{n(D,F);break}else t(D,F);F=F.sibling}F=W0(V,D.mode,B),F.return=D,D=F}return o(D)}if(typeof V=="string"||typeof V=="number")return V=""+V,F!==null&&F.tag===6?(n(D,F.sibling),F=c(F,V),F.return=D,D=F):(n(D,F),F=q0(V,D.mode,B),F.return=D,D=F),o(D);if(Nm(V))return $(D,F,V,B);if(Gf(V))return G(D,F,V,B);if(re&&Fm(D,V),typeof V>"u"&&!z)switch(D.tag){case 1:case 22:case 0:case 11:case 15:throw Error(mt(152,up(D.type)||"Component"))}return n(D,F)}}var Ny=aT(!0),sT=aT(!1),ud={},es=Nl(ud),Kh=Nl(ud),Xh=Nl(ud);function Pu(e){if(e===ud)throw Error(mt(174));return e}function ix(e,t){switch(Xn(Xh,t),Xn(Kh,e),Xn(es,ud),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:j_(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=j_(t,e)}Mn(es),Xn(es,t)}function Tp(){Mn(es),Mn(Kh),Mn(Xh)}function Y2(e){Pu(Xh.current);var t=Pu(es.current),n=j_(t,e.type);t!==n&&(Xn(Kh,e),Xn(es,n))}function E1(e){Kh.current===e&&(Mn(es),Mn(Kh))}var Kn=Nl(0);function Fy(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&64)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Fs=null,_l=null,ts=!1;function lT(e,t){var n=na(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,e.lastEffect!==null?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function J2(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,!0):!1;case 13:return!1;default:return!1}}function ox(e){if(ts){var t=_l;if(t){var n=t;if(!J2(e,t)){if(t=hp(n.nextSibling),!t||!J2(e,t)){e.flags=e.flags&-1025|2,ts=!1,Fs=e;return}lT(Fs,n)}Fs=e,_l=hp(t.firstChild)}else e.flags=e.flags&-1025|2,ts=!1,Fs=e}}function Q2(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Fs=e}function Um(e){if(e!==Fs)return!1;if(!ts)return Q2(e),ts=!0,!1;var t=e.type;if(e.tag!==5||t!=="head"&&t!=="body"&&!Q_(t,e.memoizedProps))for(t=_l;t;)lT(e,t),t=hp(t.nextSibling);if(Q2(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(mt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){_l=hp(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}_l=null}}else _l=Fs?hp(e.stateNode.nextSibling):null;return!0}function U0(){_l=Fs=null,ts=!1}var mp=[];function C1(){for(var e=0;e<mp.length;e++)mp[e]._workInProgressVersionPrimary=null;mp.length=0}var Ph=ju.ReactCurrentDispatcher,ia=ju.ReactCurrentBatchConfig,Yh=0,ii=null,Yi=null,Oi=null,Uy=!1,Ah=!1;function bo(){throw Error(mt(321))}function k1(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ra(e[n],t[n]))return!1;return!0}function T1(e,t,n,a,c,d){if(Yh=d,ii=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ph.current=e===null||e.memoizedState===null?U3:$3,e=n(a,c),Ah){d=0;do{if(Ah=!1,!(25>d))throw Error(mt(301));d+=1,Oi=Yi=null,t.updateQueue=null,Ph.current=j3,e=n(a,c)}while(Ah)}if(Ph.current=qy,t=Yi!==null&&Yi.next!==null,Yh=0,Oi=Yi=ii=null,Uy=!1,t)throw Error(mt(300));return e}function Au(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Oi===null?ii.memoizedState=Oi=e:Oi=Oi.next=e,Oi}function qu(){if(Yi===null){var e=ii.alternate;e=e!==null?e.memoizedState:null}else e=Yi.next;var t=Oi===null?ii.memoizedState:Oi.next;if(t!==null)Oi=t,Yi=e;else{if(e===null)throw Error(mt(310));Yi=e,e={memoizedState:Yi.memoizedState,baseState:Yi.baseState,baseQueue:Yi.baseQueue,queue:Yi.queue,next:null},Oi===null?ii.memoizedState=Oi=e:Oi=Oi.next=e}return Oi}function Ja(e,t){return typeof t=="function"?t(e):t}function Qf(e){var t=qu(),n=t.queue;if(n===null)throw Error(mt(311));n.lastRenderedReducer=e;var a=Yi,c=a.baseQueue,d=n.pending;if(d!==null){if(c!==null){var o=c.next;c.next=d.next,d.next=o}a.baseQueue=c=d,n.pending=null}if(c!==null){c=c.next,a=a.baseState;var v=o=d=null,x=c;do{var E=x.lane;if((Yh&E)===E)v!==null&&(v=v.next={lane:0,action:x.action,eagerReducer:x.eagerReducer,eagerState:x.eagerState,next:null}),a=x.eagerReducer===e?x.eagerState:e(a,x.action);else{var T={lane:E,action:x.action,eagerReducer:x.eagerReducer,eagerState:x.eagerState,next:null};v===null?(o=v=T,d=a):v=v.next=T,ii.lanes|=E,cd|=E}x=x.next}while(x!==null&&x!==c);v===null?d=a:v.next=o,ra(a,t.memoizedState)||(Sa=!0),t.memoizedState=a,t.baseState=d,t.baseQueue=v,n.lastRenderedState=a}return[t.memoizedState,n.dispatch]}function eh(e){var t=qu(),n=t.queue;if(n===null)throw Error(mt(311));n.lastRenderedReducer=e;var a=n.dispatch,c=n.pending,d=t.memoizedState;if(c!==null){n.pending=null;var o=c=c.next;do d=e(d,o.action),o=o.next;while(o!==c);ra(d,t.memoizedState)||(Sa=!0),t.memoizedState=d,t.baseQueue===null&&(t.baseState=d),n.lastRenderedState=d}return[d,a]}function eS(e,t,n){var a=t._getVersion;a=a(t._source);var c=t._workInProgressVersionPrimary;if(c!==null?e=c===a:(e=e.mutableReadLanes,(e=(Yh&e)===e)&&(t._workInProgressVersionPrimary=a,mp.push(t))),e)return n(t._source);throw mp.push(t),Error(mt(350))}function uT(e,t,n,a){var c=lo;if(c===null)throw Error(mt(349));var d=t._getVersion,o=d(t._source),v=Ph.current,x=v.useState(function(){return eS(c,t,n)}),E=x[1],T=x[0];x=Oi;var P=e.memoizedState,I=P.refs,q=I.getSnapshot,$=P.source;P=P.subscribe;var G=ii;return e.memoizedState={refs:I,source:t,subscribe:a},v.useEffect(function(){I.getSnapshot=n,I.setSnapshot=E;var D=d(t._source);if(!ra(o,D)){D=n(t._source),ra(T,D)||(E(D),D=kl(G),c.mutableReadLanes|=D&c.pendingLanes),D=c.mutableReadLanes,c.entangledLanes|=D;for(var F=c.entanglements,V=D;0<V;){var B=31-Ml(V),z=1<<B;F[B]|=D,V&=~z}}},[n,t,a]),v.useEffect(function(){return a(t._source,function(){var D=I.getSnapshot,F=I.setSnapshot;try{F(D(t._source));var V=kl(G);c.mutableReadLanes|=V&c.pendingLanes}catch(B){F(function(){throw B})}})},[t,a]),ra(q,n)&&ra($,t)&&ra(P,a)||(e={pending:null,dispatch:null,lastRenderedReducer:Ja,lastRenderedState:T},e.dispatch=E=A1.bind(null,ii,e),x.queue=e,x.baseQueue=null,T=eS(c,t,n),x.memoizedState=x.baseState=T),T}function cT(e,t,n){var a=qu();return uT(a,e,t,n)}function th(e){var t=Au();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e=t.queue={pending:null,dispatch:null,lastRenderedReducer:Ja,lastRenderedState:e},e=e.dispatch=A1.bind(null,ii,e),[t.memoizedState,e]}function $y(e,t,n,a){return e={tag:e,create:t,destroy:n,deps:a,next:null},t=ii.updateQueue,t===null?(t={lastEffect:null},ii.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(a=n.next,n.next=e,e.next=a,t.lastEffect=e)),e}function tS(e){var t=Au();return e={current:e},t.memoizedState=e}function jy(){return qu().memoizedState}function ax(e,t,n,a){var c=Au();ii.flags|=e,c.memoizedState=$y(1|t,n,void 0,a===void 0?null:a)}function I1(e,t,n,a){var c=qu();a=a===void 0?null:a;var d=void 0;if(Yi!==null){var o=Yi.memoizedState;if(d=o.destroy,a!==null&&k1(a,o.deps)){$y(t,n,d,a);return}}ii.flags|=e,c.memoizedState=$y(1|t,n,d,a)}function rS(e,t){return ax(516,4,e,t)}function Vy(e,t){return I1(516,4,e,t)}function pT(e,t){return I1(4,2,e,t)}function fT(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function hT(e,t,n){return n=n!=null?n.concat([e]):null,I1(4,2,fT.bind(null,t,e),n)}function P1(){}function dT(e,t){var n=qu();t=t===void 0?null:t;var a=n.memoizedState;return a!==null&&t!==null&&k1(t,a[1])?a[0]:(n.memoizedState=[e,t],e)}function mT(e,t){var n=qu();t=t===void 0?null:t;var a=n.memoizedState;return a!==null&&t!==null&&k1(t,a[1])?a[0]:(e=e(),n.memoizedState=[e,t],e)}function F3(e,t){var n=kp();Ou(98>n?98:n,function(){e(!0)}),Ou(97<n?97:n,function(){var a=ia.transition;ia.transition=1;try{e(!1),t()}finally{ia.transition=a}})}function A1(e,t,n){var a=$o(),c=kl(e),d={lane:c,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(o===null?d.next=d:(d.next=o.next,o.next=d),t.pending=d,o=e.alternate,e===ii||o!==null&&o===ii)Ah=Uy=!0;else{if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var v=t.lastRenderedState,x=o(v,n);if(d.eagerReducer=o,d.eagerState=x,ra(x,v))return}catch{}finally{}Tl(e,c,a)}}var qy={readContext:oa,useCallback:bo,useContext:bo,useEffect:bo,useImperativeHandle:bo,useLayoutEffect:bo,useMemo:bo,useReducer:bo,useRef:bo,useState:bo,useDebugValue:bo,useDeferredValue:bo,useTransition:bo,useMutableSource:bo,useOpaqueIdentifier:bo,unstable_isNewReconciler:!1},U3={readContext:oa,useCallback:function(e,t){return Au().memoizedState=[e,t===void 0?null:t],e},useContext:oa,useEffect:rS,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ax(4,2,fT.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ax(4,2,e,t)},useMemo:function(e,t){var n=Au();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var a=Au();return t=n!==void 0?n(t):t,a.memoizedState=a.baseState=t,e=a.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},e=e.dispatch=A1.bind(null,ii,e),[a.memoizedState,e]},useRef:tS,useState:th,useDebugValue:P1,useDeferredValue:function(e){var t=th(e),n=t[0],a=t[1];return rS(function(){var c=ia.transition;ia.transition=1;try{a(e)}finally{ia.transition=c}},[e]),n},useTransition:function(){var e=th(!1),t=e[0];return e=F3.bind(null,e[1]),tS(e),[e,t]},useMutableSource:function(e,t,n){var a=Au();return a.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},uT(a,e,t,n)},useOpaqueIdentifier:function(){if(ts){var e=!1,t=L3(function(){throw e||(e=!0,n("r:"+(B0++).toString(36))),Error(mt(355))}),n=th(t)[1];return!(ii.mode&2)&&(ii.flags|=516,$y(5,function(){n("r:"+(B0++).toString(36))},void 0,null)),t}return t="r:"+(B0++).toString(36),th(t),t},unstable_isNewReconciler:!1},$3={readContext:oa,useCallback:dT,useContext:oa,useEffect:Vy,useImperativeHandle:hT,useLayoutEffect:pT,useMemo:mT,useReducer:Qf,useRef:jy,useState:function(){return Qf(Ja)},useDebugValue:P1,useDeferredValue:function(e){var t=Qf(Ja),n=t[0],a=t[1];return Vy(function(){var c=ia.transition;ia.transition=1;try{a(e)}finally{ia.transition=c}},[e]),n},useTransition:function(){var e=Qf(Ja)[0];return[jy().current,e]},useMutableSource:cT,useOpaqueIdentifier:function(){return Qf(Ja)[0]},unstable_isNewReconciler:!1},j3={readContext:oa,useCallback:dT,useContext:oa,useEffect:Vy,useImperativeHandle:hT,useLayoutEffect:pT,useMemo:mT,useReducer:eh,useRef:jy,useState:function(){return eh(Ja)},useDebugValue:P1,useDeferredValue:function(e){var t=eh(Ja),n=t[0],a=t[1];return Vy(function(){var c=ia.transition;ia.transition=1;try{a(e)}finally{ia.transition=c}},[e]),n},useTransition:function(){var e=eh(Ja)[0];return[jy().current,e]},useMutableSource:cT,useOpaqueIdentifier:function(){return eh(Ja)[0]},unstable_isNewReconciler:!1},V3=ju.ReactCurrentOwner,Sa=!1;function wo(e,t,n,a){t.child=e===null?sT(t,null,n,a):Ny(t,e.child,n,a)}function nS(e,t,n,a,c){n=n.render;var d=t.ref;return dp(t,c),a=T1(e,t,n,a,d,c),e!==null&&!Sa?(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~c,Us(e,t,c)):(t.flags|=1,wo(e,t,a,c),t.child)}function iS(e,t,n,a,c,d){if(e===null){var o=n.type;return typeof o=="function"&&!O1(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,yT(e,t,o,a,c,d)):(e=fy(n.type,null,a,t,t.mode,d),e.ref=t.ref,e.return=t,t.child=e)}return o=e.child,!(c&d)&&(c=o.memoizedProps,n=n.compare,n=n!==null?n:Wh,n(c,a)&&e.ref===t.ref)?Us(e,t,d):(t.flags|=1,e=zl(o,a),e.ref=t.ref,e.return=t,t.child=e)}function yT(e,t,n,a,c,d){if(e!==null&&Wh(e.memoizedProps,a)&&e.ref===t.ref)if(Sa=!1,(d&c)!==0)e.flags&16384&&(Sa=!0);else return t.lanes=e.lanes,Us(e,t,d);return sx(e,t,n,a,d)}function $0(e,t,n){var a=t.pendingProps,c=a.children,d=e!==null?e.memoizedState:null;if(a.mode==="hidden"||a.mode==="unstable-defer-without-hiding")if(!(t.mode&4))t.memoizedState={baseLanes:0},jm(t,n);else if(n&1073741824)t.memoizedState={baseLanes:0},jm(t,d!==null?d.baseLanes:n);else return e=d!==null?d.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},jm(t,e),null;else d!==null?(a=d.baseLanes|n,t.memoizedState=null):a=n,jm(t,a);return wo(e,t,c,n),t.child}function gT(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=128)}function sx(e,t,n,a,c){var d=Co(n)?Du:eo.current;return d=Cp(t,d),dp(t,c),n=T1(e,t,n,a,d,c),e!==null&&!Sa?(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~c,Us(e,t,c)):(t.flags|=1,wo(e,t,n,c),t.child)}function oS(e,t,n,a,c){if(Co(n)){var d=!0;sy(t)}else d=!1;if(dp(t,c),t.stateNode===null)e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),oT(t,n,a),nx(t,n,a,c),a=!0;else if(e===null){var o=t.stateNode,v=t.memoizedProps;o.props=v;var x=o.context,E=n.contextType;typeof E=="object"&&E!==null?E=oa(E):(E=Co(n)?Du:eo.current,E=Cp(t,E));var T=n.getDerivedStateFromProps,P=typeof T=="function"||typeof o.getSnapshotBeforeUpdate=="function";P||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(v!==a||x!==E)&&X2(t,o,a,E),ml=!1;var I=t.memoizedState;o.state=I,Zh(t,a,o,c),x=t.memoizedState,v!==a||I!==x||Eo.current||ml?(typeof T=="function"&&(By(t,n,T,a),x=t.memoizedState),(v=ml||K2(t,n,v,a,I,x,E))?(P||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4)):(typeof o.componentDidMount=="function"&&(t.flags|=4),t.memoizedProps=a,t.memoizedState=x),o.props=a,o.state=x,o.context=E,a=v):(typeof o.componentDidMount=="function"&&(t.flags|=4),a=!1)}else{o=t.stateNode,nT(e,t),v=t.memoizedProps,E=t.type===t.elementType?v:_a(t.type,v),o.props=E,P=t.pendingProps,I=o.context,x=n.contextType,typeof x=="object"&&x!==null?x=oa(x):(x=Co(n)?Du:eo.current,x=Cp(t,x));var q=n.getDerivedStateFromProps;(T=typeof q=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(v!==P||I!==x)&&X2(t,o,a,x),ml=!1,I=t.memoizedState,o.state=I,Zh(t,a,o,c);var $=t.memoizedState;v!==P||I!==$||Eo.current||ml?(typeof q=="function"&&(By(t,n,q,a),$=t.memoizedState),(E=ml||K2(t,n,E,a,I,$,x))?(T||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(a,$,x),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(a,$,x)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=256)):(typeof o.componentDidUpdate!="function"||v===e.memoizedProps&&I===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&I===e.memoizedState||(t.flags|=256),t.memoizedProps=a,t.memoizedState=$),o.props=a,o.state=$,o.context=x,a=E):(typeof o.componentDidUpdate!="function"||v===e.memoizedProps&&I===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&I===e.memoizedState||(t.flags|=256),a=!1)}return lx(e,t,n,a,d,c)}function lx(e,t,n,a,c,d){gT(e,t);var o=(t.flags&64)!==0;if(!a&&!o)return c&&q2(t,n,!1),Us(e,t,d);a=t.stateNode,V3.current=t;var v=o&&typeof n.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&o?(t.child=Ny(t,e.child,null,d),t.child=Ny(t,null,v,d)):wo(e,t,v,d),t.memoizedState=a.state,c&&q2(t,n,!0),t.child}function aS(e){var t=e.stateNode;t.pendingContext?V2(e,t.pendingContext,t.pendingContext!==t.context):t.context&&V2(e,t.context,!1),ix(e,t.containerInfo)}var $m={dehydrated:null,retryLane:0};function sS(e,t,n){var a=t.pendingProps,c=Kn.current,d=!1,o;return(o=(t.flags&64)!==0)||(o=e!==null&&e.memoizedState===null?!1:(c&2)!==0),o?(d=!0,t.flags&=-65):e!==null&&e.memoizedState===null||a.fallback===void 0||a.unstable_avoidThisFallback===!0||(c|=1),Xn(Kn,c&1),e===null?(a.fallback!==void 0&&ox(t),e=a.children,c=a.fallback,d?(e=lS(t,e,c,n),t.child.memoizedState={baseLanes:n},t.memoizedState=$m,e):typeof a.unstable_expectedLoadTime=="number"?(e=lS(t,e,c,n),t.child.memoizedState={baseLanes:n},t.memoizedState=$m,t.lanes=33554432,e):(n=B1({mode:"visible",children:e},t.mode,n,null),n.return=t,t.child=n)):e.memoizedState!==null?d?(a=cS(e,t,a.children,a.fallback,n),d=t.child,c=e.child.memoizedState,d.memoizedState=c===null?{baseLanes:n}:{baseLanes:c.baseLanes|n},d.childLanes=e.childLanes&~n,t.memoizedState=$m,a):(n=uS(e,t,a.children,n),t.memoizedState=null,n):d?(a=cS(e,t,a.children,a.fallback,n),d=t.child,c=e.child.memoizedState,d.memoizedState=c===null?{baseLanes:n}:{baseLanes:c.baseLanes|n},d.childLanes=e.childLanes&~n,t.memoizedState=$m,a):(n=uS(e,t,a.children,n),t.memoizedState=null,n)}function lS(e,t,n,a){var c=e.mode,d=e.child;return t={mode:"hidden",children:t},!(c&2)&&d!==null?(d.childLanes=0,d.pendingProps=t):d=B1(t,c,0,null),n=vp(n,c,a,null),d.return=e,n.return=e,d.sibling=n,e.child=d,n}function uS(e,t,n,a){var c=e.child;return e=c.sibling,n=zl(c,{mode:"visible",children:n}),!(t.mode&2)&&(n.lanes=a),n.return=t,n.sibling=null,e!==null&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function cS(e,t,n,a,c){var d=t.mode,o=e.child;e=o.sibling;var v={mode:"hidden",children:n};return!(d&2)&&t.child!==o?(n=t.child,n.childLanes=0,n.pendingProps=v,o=n.lastEffect,o!==null?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=zl(o,v),e!==null?a=zl(e,a):(a=vp(a,d,c,null),a.flags|=2),a.return=t,n.return=t,n.sibling=a,t.child=n,a}function pS(e,t){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),rT(e.return,t)}function j0(e,t,n,a,c,d){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:c,lastEffect:d}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=a,o.tail=n,o.tailMode=c,o.lastEffect=d)}function fS(e,t,n){var a=t.pendingProps,c=a.revealOrder,d=a.tail;if(wo(e,t,a.children,n),a=Kn.current,a&2)a=a&1|2,t.flags|=64;else{if(e!==null&&e.flags&64)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&pS(e,n);else if(e.tag===19)pS(e,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(Xn(Kn,a),!(t.mode&2))t.memoizedState=null;else switch(c){case"forwards":for(n=t.child,c=null;n!==null;)e=n.alternate,e!==null&&Fy(e)===null&&(c=n),n=n.sibling;n=c,n===null?(c=t.child,t.child=null):(c=n.sibling,n.sibling=null),j0(t,!1,c,n,d,t.lastEffect);break;case"backwards":for(n=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&Fy(e)===null){t.child=c;break}e=c.sibling,c.sibling=n,n=c,c=e}j0(t,!0,n,null,d,t.lastEffect);break;case"together":j0(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function Us(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),cd|=t.lanes,n&t.childLanes){if(e!==null&&t.child!==e.child)throw Error(mt(153));if(t.child!==null){for(e=t.child,n=zl(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=zl(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}return null}var vT,ux,_T,xT;vT=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ux=function(){};_T=function(e,t,n,a){var c=e.memoizedProps;if(c!==a){e=t.stateNode,Pu(es.current);var d=null;switch(n){case"input":c=O_(e,c),a=O_(e,a),d=[];break;case"option":c=F_(e,c),a=F_(e,a),d=[];break;case"select":c=On({},c,{value:void 0}),a=On({},a,{value:void 0}),d=[];break;case"textarea":c=U_(e,c),a=U_(e,a),d=[];break;default:typeof c.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=My)}V_(n,a);var o;n=null;for(E in c)if(!a.hasOwnProperty(E)&&c.hasOwnProperty(E)&&c[E]!=null)if(E==="style"){var v=c[E];for(o in v)v.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else E!=="dangerouslySetInnerHTML"&&E!=="children"&&E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&E!=="autoFocus"&&(Nh.hasOwnProperty(E)?d||(d=[]):(d=d||[]).push(E,null));for(E in a){var x=a[E];if(v=c!=null?c[E]:void 0,a.hasOwnProperty(E)&&x!==v&&(x!=null||v!=null))if(E==="style")if(v){for(o in v)!v.hasOwnProperty(o)||x&&x.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in x)x.hasOwnProperty(o)&&v[o]!==x[o]&&(n||(n={}),n[o]=x[o])}else n||(d||(d=[]),d.push(E,n)),n=x;else E==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,v=v?v.__html:void 0,x!=null&&v!==x&&(d=d||[]).push(E,x)):E==="children"?typeof x!="string"&&typeof x!="number"||(d=d||[]).push(E,""+x):E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&(Nh.hasOwnProperty(E)?(x!=null&&E==="onScroll"&&An("scroll",e),d||v===x||(d=[])):typeof x=="object"&&x!==null&&x.$$typeof===n1?x.toString():(d=d||[]).push(E,x))}n&&(d=d||[]).push("style",n);var E=d;(t.updateQueue=E)&&(t.flags|=4)}};xT=function(e,t,n,a){n!==a&&(t.flags|=4)};function rh(e,t){if(!ts)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function q3(e,t,n){var a=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Co(t.type)&&Ly(),null;case 3:return Tp(),Mn(Eo),Mn(eo),C1(),a=t.stateNode,a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Um(t)?t.flags|=4:a.hydrate||(t.flags|=256)),ux(t),null;case 5:E1(t);var c=Pu(Xh.current);if(n=t.type,e!==null&&t.stateNode!=null)_T(e,t,n,a,c),e.ref!==t.ref&&(t.flags|=128);else{if(!a){if(t.stateNode===null)throw Error(mt(166));return null}if(e=Pu(es.current),Um(t)){a=t.stateNode,n=t.type;var d=t.memoizedProps;switch(a[vl]=t,a[Ry]=d,n){case"dialog":An("cancel",a),An("close",a);break;case"iframe":case"object":case"embed":An("load",a);break;case"video":case"audio":for(e=0;e<dh.length;e++)An(dh[e],a);break;case"source":An("error",a);break;case"img":case"image":case"link":An("error",a),An("load",a);break;case"details":An("toggle",a);break;case"input":f2(a,d),An("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!d.multiple},An("invalid",a);break;case"textarea":d2(a,d),An("invalid",a)}V_(n,d),e=null;for(var o in d)d.hasOwnProperty(o)&&(c=d[o],o==="children"?typeof c=="string"?a.textContent!==c&&(e=["children",c]):typeof c=="number"&&a.textContent!==""+c&&(e=["children",""+c]):Nh.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&An("scroll",a));switch(n){case"input":zm(a),h2(a,d,!0);break;case"textarea":zm(a),m2(a);break;case"select":case"option":break;default:typeof d.onClick=="function"&&(a.onclick=My)}a=e,t.updateQueue=a,a!==null&&(t.flags|=4)}else{switch(o=c.nodeType===9?c:c.ownerDocument,e===$_.html&&(e=hk(n)),e===$_.html?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=o.createElement(n,{is:a.is}):(e=o.createElement(n),n==="select"&&(o=e,a.multiple?o.multiple=!0:a.size&&(o.size=a.size))):e=o.createElementNS(e,n),e[vl]=t,e[Ry]=a,vT(e,t,!1,!1),t.stateNode=e,o=q_(n,a),n){case"dialog":An("cancel",e),An("close",e),c=a;break;case"iframe":case"object":case"embed":An("load",e),c=a;break;case"video":case"audio":for(c=0;c<dh.length;c++)An(dh[c],e);c=a;break;case"source":An("error",e),c=a;break;case"img":case"image":case"link":An("error",e),An("load",e),c=a;break;case"details":An("toggle",e),c=a;break;case"input":f2(e,a),c=O_(e,a),An("invalid",e);break;case"option":c=F_(e,a);break;case"select":e._wrapperState={wasMultiple:!!a.multiple},c=On({},a,{value:void 0}),An("invalid",e);break;case"textarea":d2(e,a),c=U_(e,a),An("invalid",e);break;default:c=a}V_(n,c);var v=c;for(d in v)if(v.hasOwnProperty(d)){var x=v[d];d==="style"?yk(e,x):d==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,x!=null&&dk(e,x)):d==="children"?typeof x=="string"?(n!=="textarea"||x!=="")&&Fh(e,x):typeof x=="number"&&Fh(e,""+x):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Nh.hasOwnProperty(d)?x!=null&&d==="onScroll"&&An("scroll",e):x!=null&&Yx(e,d,x,o))}switch(n){case"input":zm(e),h2(e,a,!1);break;case"textarea":zm(e),m2(e);break;case"option":a.value!=null&&e.setAttribute("value",""+Al(a.value));break;case"select":e.multiple=!!a.multiple,d=a.value,d!=null?cp(e,!!a.multiple,d,!1):a.defaultValue!=null&&cp(e,!!a.multiple,a.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=My)}Hk(n,a)&&(t.flags|=4)}t.ref!==null&&(t.flags|=128)}return null;case 6:if(e&&t.stateNode!=null)xT(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(mt(166));n=Pu(Xh.current),Pu(es.current),Um(t)?(a=t.stateNode,n=t.memoizedProps,a[vl]=t,a.nodeValue!==n&&(t.flags|=4)):(a=(n.nodeType===9?n:n.ownerDocument).createTextNode(a),a[vl]=t,t.stateNode=a)}return null;case 13:return Mn(Kn),a=t.memoizedState,t.flags&64?(t.lanes=n,t):(a=a!==null,n=!1,e===null?t.memoizedProps.fallback!==void 0&&Um(t):n=e.memoizedState!==null,a&&!n&&t.mode&2&&(e===null&&t.memoizedProps.unstable_avoidThisFallback!==!0||Kn.current&1?Ni===0&&(Ni=3):((Ni===0||Ni===3)&&(Ni=4),lo===null||!(cd&134217727)&&!(jp&134217727)||yp(lo,Qi))),(a||n)&&(t.flags|=4),null);case 4:return Tp(),ux(t),e===null&&qk(t.stateNode.containerInfo),null;case 10:return w1(t),null;case 17:return Co(t.type)&&Ly(),null;case 19:if(Mn(Kn),a=t.memoizedState,a===null)return null;if(d=(t.flags&64)!==0,o=a.rendering,o===null)if(d)rh(a,!1);else{if(Ni!==0||e!==null&&e.flags&64)for(e=t.child;e!==null;){if(o=Fy(e),o!==null){for(t.flags|=64,rh(a,!1),d=o.updateQueue,d!==null&&(t.updateQueue=d,t.flags|=4),a.lastEffect===null&&(t.firstEffect=null),t.lastEffect=a.lastEffect,a=n,n=t.child;n!==null;)d=n,e=a,d.flags&=2,d.nextEffect=null,d.firstEffect=null,d.lastEffect=null,o=d.alternate,o===null?(d.childLanes=0,d.lanes=e,d.child=null,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=o.childLanes,d.lanes=o.lanes,d.child=o.child,d.memoizedProps=o.memoizedProps,d.memoizedState=o.memoizedState,d.updateQueue=o.updateQueue,d.type=o.type,e=o.dependencies,d.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Xn(Kn,Kn.current&1|2),t.child}e=e.sibling}a.tail!==null&&Ji()>mx&&(t.flags|=64,d=!0,rh(a,!1),t.lanes=33554432)}else{if(!d)if(e=Fy(o),e!==null){if(t.flags|=64,d=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),rh(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!ts)return t=t.lastEffect=a.lastEffect,t!==null&&(t.nextEffect=null),null}else 2*Ji()-a.renderingStartTime>mx&&n!==1073741824&&(t.flags|=64,d=!0,rh(a,!1),t.lanes=33554432);a.isBackwards?(o.sibling=t.child,t.child=o):(n=a.last,n!==null?n.sibling=o:t.child=o,a.last=o)}return a.tail!==null?(n=a.tail,a.rendering=n,a.tail=n.sibling,a.lastEffect=t.lastEffect,a.renderingStartTime=Ji(),n.sibling=null,t=Kn.current,Xn(Kn,d?t&1|2:t&1),n):null;case 23:case 24:return D1(),e!==null&&e.memoizedState!==null!=(t.memoizedState!==null)&&a.mode!=="unstable-defer-without-hiding"&&(t.flags|=4),null}throw Error(mt(156,t.tag))}function W3(e){switch(e.tag){case 1:Co(e.type)&&Ly();var t=e.flags;return t&4096?(e.flags=t&-4097|64,e):null;case 3:if(Tp(),Mn(Eo),Mn(eo),C1(),t=e.flags,t&64)throw Error(mt(285));return e.flags=t&-4097|64,e;case 5:return E1(e),null;case 13:return Mn(Kn),t=e.flags,t&4096?(e.flags=t&-4097|64,e):null;case 19:return Mn(Kn),null;case 4:return Tp(),null;case 10:return w1(e),null;case 23:case 24:return D1(),null;default:return null}}function M1(e,t){try{var n="",a=t;do n+=ER(a),a=a.return;while(a);var c=n}catch(d){c=`
Error generating stack: `+d.message+`
`+d.stack}return{value:e,source:t,stack:c}}function cx(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var G3=typeof WeakMap=="function"?WeakMap:Map;function bT(e,t,n){n=El(-1,n),n.tag=3,n.payload={element:null};var a=t.value;return n.callback=function(){Gy||(Gy=!0,yx=a),cx(e,t)},n}function wT(e,t,n){n=El(-1,n),n.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var c=t.value;n.payload=function(){return cx(e,t),a(c)}}var d=e.stateNode;return d!==null&&typeof d.componentDidCatch=="function"&&(n.callback=function(){typeof a!="function"&&(Qa===null?Qa=new Set([this]):Qa.add(this),cx(e,t));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}var H3=typeof WeakSet=="function"?WeakSet:Set;function hS(e){var t=e.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(n){Il(e,n)}else t.current=null}function Z3(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(t.flags&256&&e!==null){var n=e.memoizedProps,a=e.memoizedState;e=t.stateNode,t=e.getSnapshotBeforeUpdate(t.elementType===t.type?n:_a(t.type,n),a),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:t.flags&256&&v1(t.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(mt(163))}function K3(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(t=n.updateQueue,t=t!==null?t.lastEffect:null,t!==null){e=t=t.next;do{if((e.tag&3)===3){var a=e.create;e.destroy=a()}e=e.next}while(e!==t)}if(t=n.updateQueue,t=t!==null?t.lastEffect:null,t!==null){e=t=t.next;do{var c=e;a=c.next,c=c.tag,c&4&&c&1&&(MT(n,e),nL(n,e)),e=a}while(e!==t)}return;case 1:e=n.stateNode,n.flags&4&&(t===null?e.componentDidMount():(a=n.elementType===n.type?t.memoizedProps:_a(n.type,t.memoizedProps),e.componentDidUpdate(a,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),t=n.updateQueue,t!==null&&Z2(n,t,e);return;case 3:if(t=n.updateQueue,t!==null){if(e=null,n.child!==null)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}Z2(n,t,e)}return;case 5:e=n.stateNode,t===null&&n.flags&4&&Hk(n.type,n.memoizedProps)&&e.focus();return;case 6:return;case 4:return;case 12:return;case 13:n.memoizedState===null&&(n=n.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&kk(n))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(mt(163))}function dS(e,t){for(var n=e;;){if(n.tag===5){var a=n.stateNode;if(t)a=a.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{a=n.stateNode;var c=n.memoizedProps.style;c=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=mk("display",c)}}else if(n.tag===6)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((n.tag!==23&&n.tag!==24||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function mS(e,t){if(Lu&&typeof Lu.onCommitFiberUnmount=="function")try{Lu.onCommitFiberUnmount(_1,t)}catch{}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(e=t.updateQueue,e!==null&&(e=e.lastEffect,e!==null)){var n=e=e.next;do{var a=n,c=a.destroy;if(a=a.tag,c!==void 0)if(a&4)MT(t,n);else{a=t;try{c()}catch(d){Il(a,d)}}n=n.next}while(n!==e)}break;case 1:if(hS(t),e=t.stateNode,typeof e.componentWillUnmount=="function")try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(d){Il(t,d)}break;case 5:hS(t);break;case 4:ST(e,t)}}function yS(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function gS(e){return e.tag===5||e.tag===3||e.tag===4}function vS(e){e:{for(var t=e.return;t!==null;){if(gS(t))break e;t=t.return}throw Error(mt(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var a=!1;break;case 3:t=t.containerInfo,a=!0;break;case 4:t=t.containerInfo,a=!0;break;default:throw Error(mt(161))}n.flags&16&&(Fh(t,""),n.flags&=-17);e:t:for(n=e;;){for(;n.sibling===null;){if(n.return===null||gS(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2)){n=n.stateNode;break e}}a?px(e,n,t):fx(e,n,t)}function px(e,t,n){var a=e.tag,c=a===5||a===6;if(c)e=c?e.stateNode:e.stateNode.instance,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=My));else if(a!==4&&(e=e.child,e!==null))for(px(e,t,n),e=e.sibling;e!==null;)px(e,t,n),e=e.sibling}function fx(e,t,n){var a=e.tag,c=a===5||a===6;if(c)e=c?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(fx(e,t,n),e=e.sibling;e!==null;)fx(e,t,n),e=e.sibling}function ST(e,t){for(var n=t,a=!1,c,d;;){if(!a){a=n.return;e:for(;;){if(a===null)throw Error(mt(160));switch(c=a.stateNode,a.tag){case 5:d=!1;break e;case 3:c=c.containerInfo,d=!0;break e;case 4:c=c.containerInfo,d=!0;break e}a=a.return}a=!0}if(n.tag===5||n.tag===6){e:for(var o=e,v=n,x=v;;)if(mS(o,x),x.child!==null&&x.tag!==4)x.child.return=x,x=x.child;else{if(x===v)break e;for(;x.sibling===null;){if(x.return===null||x.return===v)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}d?(o=c,v=n.stateNode,o.nodeType===8?o.parentNode.removeChild(v):o.removeChild(v)):c.removeChild(n.stateNode)}else if(n.tag===4){if(n.child!==null){c=n.stateNode.containerInfo,d=!0,n.child.return=n,n=n.child;continue}}else if(mS(e,n),n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return,n.tag===4&&(a=!1)}n.sibling.return=n.return,n=n.sibling}}function V0(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do(a.tag&3)===3&&(e=a.destroy,a.destroy=void 0,e!==void 0&&e()),a=a.next;while(a!==n)}return;case 1:return;case 5:if(n=t.stateNode,n!=null){a=t.memoizedProps;var c=e!==null?e.memoizedProps:a;e=t.type;var d=t.updateQueue;if(t.updateQueue=null,d!==null){for(n[Ry]=a,e==="input"&&a.type==="radio"&&a.name!=null&&pk(n,a),q_(e,c),t=q_(e,a),c=0;c<d.length;c+=2){var o=d[c],v=d[c+1];o==="style"?yk(n,v):o==="dangerouslySetInnerHTML"?dk(n,v):o==="children"?Fh(n,v):Yx(n,o,v,t)}switch(e){case"input":B_(n,a);break;case"textarea":fk(n,a);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!a.multiple,d=a.value,d!=null?cp(n,!!a.multiple,d,!1):e!==!!a.multiple&&(a.defaultValue!=null?cp(n,!!a.multiple,a.defaultValue,!0):cp(n,!!a.multiple,a.multiple?[]:"",!1))}}}return;case 6:if(t.stateNode===null)throw Error(mt(162));t.stateNode.nodeValue=t.memoizedProps;return;case 3:n=t.stateNode,n.hydrate&&(n.hydrate=!1,kk(n.containerInfo));return;case 12:return;case 13:t.memoizedState!==null&&(z1=Ji(),dS(t.child,!0)),_S(t);return;case 19:_S(t);return;case 17:return;case 23:case 24:dS(t,t.memoizedState!==null);return}throw Error(mt(163))}function _S(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new H3),t.forEach(function(a){var c=aL.bind(null,e,a);n.has(a)||(n.add(a),a.then(c,c))})}}function X3(e,t){return e!==null&&(e=e.memoizedState,e===null||e.dehydrated!==null)?(t=t.memoizedState,t!==null&&t.dehydrated===null):!1}var Y3=Math.ceil,Wy=ju.ReactCurrentDispatcher,R1=ju.ReactCurrentOwner,fr=0,lo=null,yi=null,Qi=0,Bu=0,hx=Nl(0),Ni=0,Ig=null,$p=0,cd=0,jp=0,L1=0,dx=null,z1=0,mx=1/0;function Vp(){mx=Ji()+500}var zt=null,Gy=!1,yx=null,Qa=null,Ll=!1,Mh=null,mh=90,gx=[],vx=[],js=null,Rh=0,_x=null,uy=-1,Bs=0,cy=0,Lh=null,py=!1;function $o(){return fr&48?Ji():uy!==-1?uy:uy=Ji()}function kl(e){if(e=e.mode,!(e&2))return 1;if(!(e&4))return kp()===99?1:2;if(Bs===0&&(Bs=$p),N3.transition!==0){cy!==0&&(cy=dx!==null?dx.pendingLanes:0),e=Bs;var t=4186112&~cy;return t&=-t,t===0&&(e=4186112&~e,t=e&-e,t===0&&(t=8192)),t}return e=kp(),fr&4&&e===98?e=Py(12,Bs):(e=UR(e),e=Py(e,Bs)),e}function Tl(e,t,n){if(50<Rh)throw Rh=0,_x=null,Error(mt(185));if(e=Pg(e,t),e===null)return null;bg(e,t,n),e===lo&&(jp|=t,Ni===4&&yp(e,Qi));var a=kp();t===1?fr&8&&!(fr&48)?xx(e):(aa(e,n),fr===0&&(Vp(),as())):(!(fr&4)||a!==98&&a!==99||(js===null?js=new Set([e]):js.add(e)),aa(e,n)),dx=e}function Pg(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}function aa(e,t){for(var n=e.callbackNode,a=e.suspendedLanes,c=e.pingedLanes,d=e.expirationTimes,o=e.pendingLanes;0<o;){var v=31-Ml(o),x=1<<v,E=d[v];if(E===-1){if(!(x&a)||x&c){E=t,Xc(x);var T=bn;d[v]=10<=T?E+250:6<=T?E+5e3:-1}}else E<=t&&(e.expiredLanes|=x);o&=~x}if(a=Vh(e,e===lo?Qi:0),t=bn,a===0)n!==null&&(n!==N0&&tx(n),e.callbackNode=null,e.callbackPriority=0);else{if(n!==null){if(e.callbackPriority===t)return;n!==N0&&tx(n)}t===15?(n=xx.bind(null,e),Os===null?(Os=[n],ly=x1(kg,tT)):Os.push(n),n=N0):t===14?n=Hh(99,xx.bind(null,e)):(n=$R(t),n=Hh(n,ET.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function ET(e){if(uy=-1,cy=Bs=0,fr&48)throw Error(mt(327));var t=e.callbackNode;if(Fl()&&e.callbackNode!==t)return null;var n=Vh(e,e===lo?Qi:0);if(n===0)return null;var a=n,c=fr;fr|=16;var d=IT();(lo!==e||Qi!==a)&&(Vp(),gp(e,a));do try{eL();break}catch(v){TT(e,v)}while(1);if(b1(),Wy.current=d,fr=c,yi!==null?a=0:(lo=null,Qi=0,a=Ni),$p&jp)gp(e,0);else if(a!==0){if(a===2&&(fr|=64,e.hydrate&&(e.hydrate=!1,v1(e.containerInfo)),n=Lk(e),n!==0&&(a=yh(e,n))),a===1)throw t=Ig,gp(e,0),yp(e,n),aa(e,Ji()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,a){case 0:case 1:throw Error(mt(345));case 2:wu(e);break;case 3:if(yp(e,n),(n&62914560)===n&&(a=z1+500-Ji(),10<a)){if(Vh(e,0)!==0)break;if(c=e.suspendedLanes,(c&n)!==n){$o(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=U2(wu.bind(null,e),a);break}wu(e);break;case 4:if(yp(e,n),(n&4186112)===n)break;for(a=e.eventTimes,c=-1;0<n;){var o=31-Ml(n);d=1<<o,o=a[o],o>c&&(c=o),n&=~d}if(n=c,n=Ji()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Y3(n/1960))-n,10<n){e.timeoutHandle=U2(wu.bind(null,e),n);break}wu(e);break;case 5:wu(e);break;default:throw Error(mt(329))}}return aa(e,Ji()),e.callbackNode===t?ET.bind(null,e):null}function yp(e,t){for(t&=~L1,t&=~jp,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ml(t),a=1<<n;e[n]=-1,t&=~a}}function xx(e){if(fr&48)throw Error(mt(327));if(Fl(),e===lo&&e.expiredLanes&Qi){var t=Qi,n=yh(e,t);$p&jp&&(t=Vh(e,t),n=yh(e,t))}else t=Vh(e,0),n=yh(e,t);if(e.tag!==0&&n===2&&(fr|=64,e.hydrate&&(e.hydrate=!1,v1(e.containerInfo)),t=Lk(e),t!==0&&(n=yh(e,t))),n===1)throw n=Ig,gp(e,0),yp(e,t),aa(e,Ji()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,wu(e),aa(e,Ji()),null}function J3(){if(js!==null){var e=js;js=null,e.forEach(function(t){t.expiredLanes|=24&t.pendingLanes,aa(t,Ji())})}as()}function CT(e,t){var n=fr;fr|=1;try{return e(t)}finally{fr=n,fr===0&&(Vp(),as())}}function kT(e,t){var n=fr;fr&=-2,fr|=8;try{return e(t)}finally{fr=n,fr===0&&(Vp(),as())}}function jm(e,t){Xn(hx,Bu),Bu|=t,$p|=t}function D1(){Bu=hx.current,Mn(hx)}function gp(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,R3(n)),yi!==null)for(n=yi.return;n!==null;){var a=n;switch(a.tag){case 1:a=a.type.childContextTypes,a!=null&&Ly();break;case 3:Tp(),Mn(Eo),Mn(eo),C1();break;case 5:E1(a);break;case 4:Tp();break;case 13:Mn(Kn);break;case 19:Mn(Kn);break;case 10:w1(a);break;case 23:case 24:D1()}n=n.return}lo=e,yi=zl(e.current,null),Qi=Bu=$p=t,Ni=0,Ig=null,L1=jp=cd=0}function TT(e,t){do{var n=yi;try{if(b1(),Ph.current=qy,Uy){for(var a=ii.memoizedState;a!==null;){var c=a.queue;c!==null&&(c.pending=null),a=a.next}Uy=!1}if(Yh=0,Oi=Yi=ii=null,Ah=!1,R1.current=null,n===null||n.return===null){Ni=1,Ig=t,yi=null;break}e:{var d=e,o=n.return,v=n,x=t;if(t=Qi,v.flags|=2048,v.firstEffect=v.lastEffect=null,x!==null&&typeof x=="object"&&typeof x.then=="function"){var E=x;if(!(v.mode&2)){var T=v.alternate;T?(v.updateQueue=T.updateQueue,v.memoizedState=T.memoizedState,v.lanes=T.lanes):(v.updateQueue=null,v.memoizedState=null)}var P=(Kn.current&1)!==0,I=o;do{var q;if(q=I.tag===13){var $=I.memoizedState;if($!==null)q=$.dehydrated!==null;else{var G=I.memoizedProps;q=G.fallback===void 0?!1:G.unstable_avoidThisFallback!==!0?!0:!P}}if(q){var D=I.updateQueue;if(D===null){var F=new Set;F.add(E),I.updateQueue=F}else D.add(E);if(!(I.mode&2)){if(I.flags|=64,v.flags|=16384,v.flags&=-2981,v.tag===1)if(v.alternate===null)v.tag=17;else{var V=El(-1,1);V.tag=2,Cl(v,V)}v.lanes|=1;break e}x=void 0,v=t;var B=d.pingCache;if(B===null?(B=d.pingCache=new G3,x=new Set,B.set(E,x)):(x=B.get(E),x===void 0&&(x=new Set,B.set(E,x))),!x.has(v)){x.add(v);var z=oL.bind(null,d,E,v);E.then(z,z)}I.flags|=4096,I.lanes=t;break e}I=I.return}while(I!==null);x=Error((up(v.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}Ni!==5&&(Ni=2),x=M1(x,v),I=o;do{switch(I.tag){case 3:d=x,I.flags|=4096,t&=-t,I.lanes|=t;var re=bT(I,d,t);H2(I,re);break e;case 1:d=x;var ie=I.type,ce=I.stateNode;if(!(I.flags&64)&&(typeof ie.getDerivedStateFromError=="function"||ce!==null&&typeof ce.componentDidCatch=="function"&&(Qa===null||!Qa.has(ce)))){I.flags|=4096,t&=-t,I.lanes|=t;var xe=wT(I,d,t);H2(I,xe);break e}}I=I.return}while(I!==null)}AT(n)}catch(Te){t=Te,yi===n&&n!==null&&(yi=n=n.return);continue}break}while(1)}function IT(){var e=Wy.current;return Wy.current=qy,e===null?qy:e}function yh(e,t){var n=fr;fr|=16;var a=IT();lo===e&&Qi===t||gp(e,t);do try{Q3();break}catch(c){TT(e,c)}while(1);if(b1(),fr=n,Wy.current=a,yi!==null)throw Error(mt(261));return lo=null,Qi=0,Ni}function Q3(){for(;yi!==null;)PT(yi)}function eL(){for(;yi!==null&&!D3();)PT(yi)}function PT(e){var t=RT(e.alternate,e,Bu);e.memoizedProps=e.pendingProps,t===null?AT(e):yi=t,R1.current=null}function AT(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&2048){if(n=W3(t),n!==null){n.flags&=2047,yi=n;return}e!==null&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}else{if(n=q3(n,t,Bu),n!==null){yi=n;return}if(n=t,n.tag!==24&&n.tag!==23||n.memoizedState===null||Bu&1073741824||!(n.mode&4)){for(var a=0,c=n.child;c!==null;)a|=c.lanes|c.childLanes,c=c.sibling;n.childLanes=a}e!==null&&!(e.flags&2048)&&(e.firstEffect===null&&(e.firstEffect=t.firstEffect),t.lastEffect!==null&&(e.lastEffect!==null&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(e.lastEffect!==null?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}if(t=t.sibling,t!==null){yi=t;return}yi=t=e}while(t!==null);Ni===0&&(Ni=5)}function wu(e){var t=kp();return Ou(99,tL.bind(null,e,t)),null}function tL(e,t){do Fl();while(Mh!==null);if(fr&48)throw Error(mt(327));var n=e.finishedWork;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(mt(177));e.callbackNode=null;var a=n.lanes|n.childLanes,c=a,d=e.pendingLanes&~c;e.pendingLanes=c,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=c,e.mutableReadLanes&=c,e.entangledLanes&=c,c=e.entanglements;for(var o=e.eventTimes,v=e.expirationTimes;0<d;){var x=31-Ml(d),E=1<<x;c[x]=0,o[x]=-1,v[x]=-1,d&=~E}if(js!==null&&!(a&24)&&js.has(e)&&js.delete(e),e===lo&&(yi=lo=null,Qi=0),1<n.flags?n.lastEffect!==null?(n.lastEffect.nextEffect=n,a=n.firstEffect):a=n:a=n.firstEffect,a!==null){if(c=fr,fr|=32,R1.current=null,D0=iy,o=L2(),X_(o)){if("selectionStart"in o)v={start:o.selectionStart,end:o.selectionEnd};else e:if(v=(v=o.ownerDocument)&&v.defaultView||window,(E=v.getSelection&&v.getSelection())&&E.rangeCount!==0){v=E.anchorNode,d=E.anchorOffset,x=E.focusNode,E=E.focusOffset;try{v.nodeType,x.nodeType}catch{v=null;break e}var T=0,P=-1,I=-1,q=0,$=0,G=o,D=null;t:for(;;){for(var F;G!==v||d!==0&&G.nodeType!==3||(P=T+d),G!==x||E!==0&&G.nodeType!==3||(I=T+E),G.nodeType===3&&(T+=G.nodeValue.length),(F=G.firstChild)!==null;)D=G,G=F;for(;;){if(G===o)break t;if(D===v&&++q===d&&(P=T),D===x&&++$===E&&(I=T),(F=G.nextSibling)!==null)break;G=D,D=G.parentNode}G=F}v=P===-1||I===-1?null:{start:P,end:I}}else v=null;v=v||{start:0,end:0}}else v=null;O0={focusedElem:o,selectionRange:v},iy=!1,Lh=null,py=!1,zt=a;do try{rL()}catch(Te){if(zt===null)throw Error(mt(330));Il(zt,Te),zt=zt.nextEffect}while(zt!==null);Lh=null,zt=a;do try{for(o=e;zt!==null;){var V=zt.flags;if(V&16&&Fh(zt.stateNode,""),V&128){var B=zt.alternate;if(B!==null){var z=B.ref;z!==null&&(typeof z=="function"?z(null):z.current=null)}}switch(V&1038){case 2:vS(zt),zt.flags&=-3;break;case 6:vS(zt),zt.flags&=-3,V0(zt.alternate,zt);break;case 1024:zt.flags&=-1025;break;case 1028:zt.flags&=-1025,V0(zt.alternate,zt);break;case 4:V0(zt.alternate,zt);break;case 8:v=zt,ST(o,v);var re=v.alternate;yS(v),re!==null&&yS(re)}zt=zt.nextEffect}}catch(Te){if(zt===null)throw Error(mt(330));Il(zt,Te),zt=zt.nextEffect}while(zt!==null);if(z=O0,B=L2(),V=z.focusedElem,o=z.selectionRange,B!==V&&V&&V.ownerDocument&&$k(V.ownerDocument.documentElement,V)){for(o!==null&&X_(V)&&(B=o.start,z=o.end,z===void 0&&(z=B),"selectionStart"in V?(V.selectionStart=B,V.selectionEnd=Math.min(z,V.value.length)):(z=(B=V.ownerDocument||document)&&B.defaultView||window,z.getSelection&&(z=z.getSelection(),v=V.textContent.length,re=Math.min(o.start,v),o=o.end===void 0?re:Math.min(o.end,v),!z.extend&&re>o&&(v=o,o=re,re=v),v=R2(V,re),d=R2(V,o),v&&d&&(z.rangeCount!==1||z.anchorNode!==v.node||z.anchorOffset!==v.offset||z.focusNode!==d.node||z.focusOffset!==d.offset)&&(B=B.createRange(),B.setStart(v.node,v.offset),z.removeAllRanges(),re>o?(z.addRange(B),z.extend(d.node,d.offset)):(B.setEnd(d.node,d.offset),z.addRange(B)))))),B=[],z=V;z=z.parentNode;)z.nodeType===1&&B.push({element:z,left:z.scrollLeft,top:z.scrollTop});for(typeof V.focus=="function"&&V.focus(),V=0;V<B.length;V++)z=B[V],z.element.scrollLeft=z.left,z.element.scrollTop=z.top}iy=!!D0,O0=D0=null,e.current=n,zt=a;do try{for(V=e;zt!==null;){var ie=zt.flags;if(ie&36&&K3(V,zt.alternate,zt),ie&128){B=void 0;var ce=zt.ref;if(ce!==null){var xe=zt.stateNode;switch(zt.tag){case 5:B=xe;break;default:B=xe}typeof ce=="function"?ce(B):ce.current=B}}zt=zt.nextEffect}}catch(Te){if(zt===null)throw Error(mt(330));Il(zt,Te),zt=zt.nextEffect}while(zt!==null);zt=null,B3(),fr=c}else e.current=n;if(Ll)Ll=!1,Mh=e,mh=t;else for(zt=a;zt!==null;)t=zt.nextEffect,zt.nextEffect=null,zt.flags&8&&(ie=zt,ie.sibling=null,ie.stateNode=null),zt=t;if(a=e.pendingLanes,a===0&&(Qa=null),a===1?e===_x?Rh++:(Rh=0,_x=e):Rh=0,n=n.stateNode,Lu&&typeof Lu.onCommitFiberRoot=="function")try{Lu.onCommitFiberRoot(_1,n,void 0,(n.current.flags&64)===64)}catch{}if(aa(e,Ji()),Gy)throw Gy=!1,e=yx,yx=null,e;return fr&8||as(),null}function rL(){for(;zt!==null;){var e=zt.alternate;py||Lh===null||(zt.flags&8?v2(zt,Lh)&&(py=!0):zt.tag===13&&X3(e,zt)&&v2(zt,Lh)&&(py=!0));var t=zt.flags;t&256&&Z3(e,zt),!(t&512)||Ll||(Ll=!0,Hh(97,function(){return Fl(),null})),zt=zt.nextEffect}}function Fl(){if(mh!==90){var e=97<mh?97:mh;return mh=90,Ou(e,iL)}return!1}function nL(e,t){gx.push(t,e),Ll||(Ll=!0,Hh(97,function(){return Fl(),null}))}function MT(e,t){vx.push(t,e),Ll||(Ll=!0,Hh(97,function(){return Fl(),null}))}function iL(){if(Mh===null)return!1;var e=Mh;if(Mh=null,fr&48)throw Error(mt(331));var t=fr;fr|=32;var n=vx;vx=[];for(var a=0;a<n.length;a+=2){var c=n[a],d=n[a+1],o=c.destroy;if(c.destroy=void 0,typeof o=="function")try{o()}catch(x){if(d===null)throw Error(mt(330));Il(d,x)}}for(n=gx,gx=[],a=0;a<n.length;a+=2){c=n[a],d=n[a+1];try{var v=c.create;c.destroy=v()}catch(x){if(d===null)throw Error(mt(330));Il(d,x)}}for(v=e.current.firstEffect;v!==null;)e=v.nextEffect,v.nextEffect=null,v.flags&8&&(v.sibling=null,v.stateNode=null),v=e;return fr=t,as(),!0}function xS(e,t,n){t=M1(n,t),t=bT(e,t,1),Cl(e,t),t=$o(),e=Pg(e,1),e!==null&&(bg(e,1,t),aa(e,t))}function Il(e,t){if(e.tag===3)xS(e,e,t);else for(var n=e.return;n!==null;){if(n.tag===3){xS(n,e,t);break}else if(n.tag===1){var a=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Qa===null||!Qa.has(a))){e=M1(t,e);var c=wT(n,e,1);if(Cl(n,c),c=$o(),n=Pg(n,1),n!==null)bg(n,1,c),aa(n,c);else if(typeof a.componentDidCatch=="function"&&(Qa===null||!Qa.has(a)))try{a.componentDidCatch(t,e)}catch{}break}}n=n.return}}function oL(e,t,n){var a=e.pingCache;a!==null&&a.delete(t),t=$o(),e.pingedLanes|=e.suspendedLanes&n,lo===e&&(Qi&n)===n&&(Ni===4||Ni===3&&(Qi&62914560)===Qi&&500>Ji()-z1?gp(e,0):L1|=n),aa(e,t)}function aL(e,t){var n=e.stateNode;n!==null&&n.delete(t),t=0,t===0&&(t=e.mode,t&2?t&4?(Bs===0&&(Bs=$p),t=Yc(62914560&~Bs),t===0&&(t=4194304)):t=kp()===99?1:2:t=1),n=$o(),e=Pg(e,t),e!==null&&(bg(e,t,n),aa(e,n))}var RT;RT=function(e,t,n){var a=t.lanes;if(e!==null)if(e.memoizedProps!==t.pendingProps||Eo.current)Sa=!0;else if(n&a)Sa=!!(e.flags&16384);else{switch(Sa=!1,t.tag){case 3:aS(t),U0();break;case 5:Y2(t);break;case 1:Co(t.type)&&sy(t);break;case 4:ix(t,t.stateNode.containerInfo);break;case 10:a=t.memoizedProps.value;var c=t.type._context;Xn(zy,c._currentValue),c._currentValue=a;break;case 13:if(t.memoizedState!==null)return n&t.child.childLanes?sS(e,t,n):(Xn(Kn,Kn.current&1),t=Us(e,t,n),t!==null?t.sibling:null);Xn(Kn,Kn.current&1);break;case 19:if(a=(n&t.childLanes)!==0,e.flags&64){if(a)return fS(e,t,n);t.flags|=64}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),Xn(Kn,Kn.current),a)break;return null;case 23:case 24:return t.lanes=0,$0(e,t,n)}return Us(e,t,n)}else Sa=!1;switch(t.lanes=0,t.tag){case 2:if(a=t.type,e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,c=Cp(t,eo.current),dp(t,n),c=T1(null,t,a,e,c,n),t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,Co(a)){var d=!0;sy(t)}else d=!1;t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,S1(t);var o=a.getDerivedStateFromProps;typeof o=="function"&&By(t,a,o,e),c.updater=Tg,t.stateNode=c,c._reactInternals=t,nx(t,a,e,n),t=lx(null,t,a,!0,d,n)}else t.tag=0,wo(null,t,c,n),t=t.child;return t;case 16:c=t.elementType;e:{switch(e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,d=c._init,c=d(c._payload),t.type=c,d=t.tag=lL(c),e=_a(c,e),d){case 0:t=sx(null,t,c,e,n);break e;case 1:t=oS(null,t,c,e,n);break e;case 11:t=nS(null,t,c,e,n);break e;case 14:t=iS(null,t,c,_a(c.type,e),a,n);break e}throw Error(mt(306,c,""))}return t;case 0:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:_a(a,c),sx(e,t,a,c,n);case 1:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:_a(a,c),oS(e,t,a,c,n);case 3:if(aS(t),a=t.updateQueue,e===null||a===null)throw Error(mt(282));if(a=t.pendingProps,c=t.memoizedState,c=c!==null?c.element:null,nT(e,t),Zh(t,a,null,n),a=t.memoizedState.element,a===c)U0(),t=Us(e,t,n);else{if(c=t.stateNode,(d=c.hydrate)&&(_l=hp(t.stateNode.containerInfo.firstChild),Fs=t,d=ts=!0),d){if(e=c.mutableSourceEagerHydrationData,e!=null)for(c=0;c<e.length;c+=2)d=e[c],d._workInProgressVersionPrimary=e[c+1],mp.push(d);for(n=sT(t,null,a,n),t.child=n;n;)n.flags=n.flags&-3|1024,n=n.sibling}else wo(e,t,a,n),U0();t=t.child}return t;case 5:return Y2(t),e===null&&ox(t),a=t.type,c=t.pendingProps,d=e!==null?e.memoizedProps:null,o=c.children,Q_(a,c)?o=null:d!==null&&Q_(a,d)&&(t.flags|=16),gT(e,t),wo(e,t,o,n),t.child;case 6:return e===null&&ox(t),null;case 13:return sS(e,t,n);case 4:return ix(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=Ny(t,null,a,n):wo(e,t,a,n),t.child;case 11:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:_a(a,c),nS(e,t,a,c,n);case 7:return wo(e,t,t.pendingProps,n),t.child;case 8:return wo(e,t,t.pendingProps.children,n),t.child;case 12:return wo(e,t,t.pendingProps.children,n),t.child;case 10:e:{a=t.type._context,c=t.pendingProps,o=t.memoizedProps,d=c.value;var v=t.type._context;if(Xn(zy,v._currentValue),v._currentValue=d,o!==null)if(v=o.value,d=ra(v,d)?0:(typeof a._calculateChangedBits=="function"?a._calculateChangedBits(v,d):1073741823)|0,d===0){if(o.children===c.children&&!Eo.current){t=Us(e,t,n);break e}}else for(v=t.child,v!==null&&(v.return=t);v!==null;){var x=v.dependencies;if(x!==null){o=v.child;for(var E=x.firstContext;E!==null;){if(E.context===a&&E.observedBits&d){v.tag===1&&(E=El(-1,n&-n),E.tag=2,Cl(v,E)),v.lanes|=n,E=v.alternate,E!==null&&(E.lanes|=n),rT(v.return,n),x.lanes|=n;break}E=E.next}}else o=v.tag===10&&v.type===t.type?null:v.child;if(o!==null)o.return=v;else for(o=v;o!==null;){if(o===t){o=null;break}if(v=o.sibling,v!==null){v.return=o.return,o=v;break}o=o.return}v=o}wo(e,t,c.children,n),t=t.child}return t;case 9:return c=t.type,d=t.pendingProps,a=d.children,dp(t,n),c=oa(c,d.unstable_observedBits),a=a(c),t.flags|=1,wo(e,t,a,n),t.child;case 14:return c=t.type,d=_a(c,t.pendingProps),d=_a(c.type,d),iS(e,t,c,d,a,n);case 15:return yT(e,t,t.type,t.pendingProps,a,n);case 17:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:_a(a,c),e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Co(a)?(e=!0,sy(t)):e=!1,dp(t,n),oT(t,a,c),nx(t,a,c,n),lx(null,t,a,!0,e,n);case 19:return fS(e,t,n);case 23:return $0(e,t,n);case 24:return $0(e,t,n)}throw Error(mt(156,t.tag))};function sL(e,t,n,a){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function na(e,t,n,a){return new sL(e,t,n,a)}function O1(e){return e=e.prototype,!(!e||!e.isReactComponent)}function lL(e){if(typeof e=="function")return O1(e)?1:0;if(e!=null){if(e=e.$$typeof,e===vg)return 11;if(e===_g)return 14}return 2}function zl(e,t){var n=e.alternate;return n===null?(n=na(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function fy(e,t,n,a,c,d){var o=2;if(a=e,typeof e=="function")O1(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case yl:return vp(n.children,c,d,t);case lk:o=8,c|=16;break;case Jx:o=8,c|=1;break;case wh:return e=na(12,n,t,c|8),e.elementType=wh,e.type=wh,e.lanes=d,e;case Sh:return e=na(13,n,t,c),e.type=Sh,e.elementType=Sh,e.lanes=d,e;case Cy:return e=na(19,n,t,c),e.elementType=Cy,e.lanes=d,e;case i1:return B1(n,c,d,t);case D_:return e=na(24,n,t,c),e.elementType=D_,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Qx:o=10;break e;case e1:o=9;break e;case vg:o=11;break e;case _g:o=14;break e;case t1:o=16,a=null;break e;case r1:o=22;break e}throw Error(mt(130,e==null?e:typeof e,""))}return t=na(o,n,t,c),t.elementType=e,t.type=a,t.lanes=d,t}function vp(e,t,n,a){return e=na(7,e,a,t),e.lanes=n,e}function B1(e,t,n,a){return e=na(23,e,a,t),e.elementType=i1,e.lanes=n,e}function q0(e,t,n){return e=na(6,e,null,t),e.lanes=n,e}function W0(e,t,n){return t=na(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function uL(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=I0(0),this.expirationTimes=I0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=I0(0),this.mutableSourceEagerHydrationData=null}function cL(e,t,n){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ku,key:a==null?null:""+a,children:e,containerInfo:t,implementation:n}}function Hy(e,t,n,a){var c=t.current,d=$o(),o=kl(c);e:if(n){n=n._reactInternals;t:{if(Vu(n)!==n||n.tag!==1)throw Error(mt(170));var v=n;do{switch(v.tag){case 3:v=v.stateNode.context;break t;case 1:if(Co(v.type)){v=v.stateNode.__reactInternalMemoizedMergedChildContext;break t}}v=v.return}while(v!==null);throw Error(mt(171))}if(n.tag===1){var x=n.type;if(Co(x)){n=Kk(n,x,v);break e}}n=v}else n=Rl;return t.context===null?t.context=n:t.pendingContext=n,t=El(d,o),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),Cl(c,t),Tl(c,o,d),o}function G0(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function bS(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function N1(e,t){bS(e,t),(e=e.alternate)&&bS(e,t)}function pL(){return null}function F1(e,t,n){var a=n!=null&&n.hydrationOptions!=null&&n.hydrationOptions.mutableSources||null;if(n=new uL(e,t,n!=null&&n.hydrate===!0),t=na(3,null,null,t===2?7:t===1?3:0),n.current=t,t.stateNode=n,S1(t),e[Up]=n.current,qk(e.nodeType===8?e.parentNode:e),a)for(e=0;e<a.length;e++){t=a[e];var c=t._getVersion;c=c(t._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[t,c]:n.mutableSourceEagerHydrationData.push(t,c)}this._internalRoot=n}F1.prototype.render=function(e){Hy(e,this._internalRoot,null,null)};F1.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Hy(null,e,null,function(){t[Up]=null})};function pd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function fL(e,t){if(t||(t=e?e.nodeType===9?e.documentElement:e.firstChild:null,t=!(!t||t.nodeType!==1||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new F1(e,0,t?{hydrate:!0}:void 0)}function Ag(e,t,n,a,c){var d=n._reactRootContainer;if(d){var o=d._internalRoot;if(typeof c=="function"){var v=c;c=function(){var E=G0(o);v.call(E)}}Hy(t,o,e,c)}else{if(d=n._reactRootContainer=fL(n,a),o=d._internalRoot,typeof c=="function"){var x=c;c=function(){var E=G0(o);x.call(E)}}kT(function(){Hy(t,o,e,c)})}return G0(o)}Sk=function(e){if(e.tag===13){var t=$o();Tl(e,4,t),N1(e,4)}};u1=function(e){if(e.tag===13){var t=$o();Tl(e,67108864,t),N1(e,67108864)}};Ek=function(e){if(e.tag===13){var t=$o(),n=kl(e);Tl(e,n,t),N1(e,n)}};Ck=function(e,t){return t()};W_=function(e,t,n){switch(t){case"input":if(B_(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var a=n[t];if(a!==e&&a.form===e.form){var c=Cg(a);if(!c)throw Error(mt(90));ck(a),B_(a,c)}}}break;case"textarea":fk(e,n);break;case"select":t=n.value,t!=null&&cp(e,!!n.multiple,t,!1)}};a1=CT;_k=function(e,t,n,a,c){var d=fr;fr|=4;try{return Ou(98,e.bind(null,t,n,a,c))}finally{fr=d,fr===0&&(Vp(),as())}};s1=function(){!(fr&49)&&(J3(),Fl())};xk=function(e,t){var n=fr;fr|=2;try{return e(t)}finally{fr=n,fr===0&&(Vp(),as())}};function LT(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pd(t))throw Error(mt(200));return cL(e,t,null,n)}var hL={Events:[ld,ip,Cg,gk,vk,Fl,{current:!1}]},nh={findFiberByHostInstance:Iu,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},dL={bundleType:nh.bundleType,version:nh.version,rendererPackageName:nh.rendererPackageName,rendererConfig:nh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ju.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=wk(e),e===null?null:e.stateNode},findFiberByHostInstance:nh.findFiberByHostInstance||pL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vm.isDisabled&&Vm.supportsFiber)try{_1=Vm.inject(dL),Lu=Vm}catch{}}sa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hL;sa.createPortal=LT;sa.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(mt(188)):Error(mt(268,Object.keys(e)));return e=wk(t),e=e===null?null:e.stateNode,e};sa.flushSync=function(e,t){var n=fr;if(n&48)return e(t);fr|=1;try{if(e)return Ou(99,e.bind(null,t))}finally{fr=n,as()}};sa.hydrate=function(e,t,n){if(!pd(t))throw Error(mt(200));return Ag(null,e,t,!0,n)};sa.render=function(e,t,n){if(!pd(t))throw Error(mt(200));return Ag(null,e,t,!1,n)};sa.unmountComponentAtNode=function(e){if(!pd(e))throw Error(mt(40));return e._reactRootContainer?(kT(function(){Ag(null,null,e,!1,function(){e._reactRootContainer=null,e[Up]=null})}),!0):!1};sa.unstable_batchedUpdates=CT;sa.unstable_createPortal=function(e,t){return LT(e,t,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};sa.unstable_renderSubtreeIntoContainer=function(e,t,n,a){if(!pd(n))throw Error(mt(200));if(e==null||e._reactInternals===void 0)throw Error(mt(38));return Ag(e,t,n,!1,a)};sa.version="17.0.2";function zT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(zT)}catch(e){console.error(e)}}zT(),VC.exports=sa;var U1=VC.exports;const gh=yg(U1);var DT={exports:{}};(function(e,t){(function(n,a){e.exports=a()})(wa,function(){var n,a,c;function d(o,v){if(!n)n=v;else if(!a)a=v;else{var x="var sharedChunk = {}; ("+n+")(sharedChunk); ("+a+")(sharedChunk);",E={};n(E),c=v(E),typeof window<"u"&&(c.workerUrl=window.URL.createObjectURL(new Blob([x],{type:"text/javascript"})))}}return d(["exports"],function(o){function v(r,i){return r(i={exports:{}},i.exports),i.exports}var x=E;function E(r,i,s,f){this.cx=3*r,this.bx=3*(s-r)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*i,this.by=3*(f-i)-this.cy,this.ay=1-this.cy-this.by,this.p1x=r,this.p1y=f,this.p2x=s,this.p2y=f}E.prototype.sampleCurveX=function(r){return((this.ax*r+this.bx)*r+this.cx)*r},E.prototype.sampleCurveY=function(r){return((this.ay*r+this.by)*r+this.cy)*r},E.prototype.sampleCurveDerivativeX=function(r){return(3*this.ax*r+2*this.bx)*r+this.cx},E.prototype.solveCurveX=function(r,i){var s,f,m,y,_;for(i===void 0&&(i=1e-6),m=r,_=0;_<8;_++){if(y=this.sampleCurveX(m)-r,Math.abs(y)<i)return m;var S=this.sampleCurveDerivativeX(m);if(Math.abs(S)<1e-6)break;m-=y/S}if((m=r)<(s=0))return s;if(m>(f=1))return f;for(;s<f;){if(y=this.sampleCurveX(m),Math.abs(y-r)<i)return m;r>y?s=m:f=m,m=.5*(f-s)+s}return m},E.prototype.solve=function(r,i){return this.sampleCurveY(this.solveCurveX(r,i))};var T=P;function P(r,i){this.x=r,this.y=i}P.prototype={clone:function(){return new P(this.x,this.y)},add:function(r){return this.clone()._add(r)},sub:function(r){return this.clone()._sub(r)},multByPoint:function(r){return this.clone()._multByPoint(r)},divByPoint:function(r){return this.clone()._divByPoint(r)},mult:function(r){return this.clone()._mult(r)},div:function(r){return this.clone()._div(r)},rotate:function(r){return this.clone()._rotate(r)},rotateAround:function(r,i){return this.clone()._rotateAround(r,i)},matMult:function(r){return this.clone()._matMult(r)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(r){return this.x===r.x&&this.y===r.y},dist:function(r){return Math.sqrt(this.distSqr(r))},distSqr:function(r){var i=r.x-this.x,s=r.y-this.y;return i*i+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(r){return Math.atan2(this.y-r.y,this.x-r.x)},angleWith:function(r){return this.angleWithSep(r.x,r.y)},angleWithSep:function(r,i){return Math.atan2(this.x*i-this.y*r,this.x*r+this.y*i)},_matMult:function(r){var i=r[2]*this.x+r[3]*this.y;return this.x=r[0]*this.x+r[1]*this.y,this.y=i,this},_add:function(r){return this.x+=r.x,this.y+=r.y,this},_sub:function(r){return this.x-=r.x,this.y-=r.y,this},_mult:function(r){return this.x*=r,this.y*=r,this},_div:function(r){return this.x/=r,this.y/=r,this},_multByPoint:function(r){return this.x*=r.x,this.y*=r.y,this},_divByPoint:function(r){return this.x/=r.x,this.y/=r.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var r=this.y;return this.y=this.x,this.x=-r,this},_rotate:function(r){var i=Math.cos(r),s=Math.sin(r),f=s*this.x+i*this.y;return this.x=i*this.x-s*this.y,this.y=f,this},_rotateAround:function(r,i){var s=Math.cos(r),f=Math.sin(r),m=i.y+f*(this.x-i.x)+s*(this.y-i.y);return this.x=i.x+s*(this.x-i.x)-f*(this.y-i.y),this.y=m,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},P.convert=function(r){return r instanceof P?r:Array.isArray(r)?new P(r[0],r[1]):r};var I=typeof self<"u"?self:{},q=Math.pow(2,53)-1;function $(r,i,s,f){var m=new x(r,i,s,f);return function(y){return m.solve(y)}}var G=$(.25,.1,.25,1);function D(r,i,s){return Math.min(s,Math.max(i,r))}function F(r,i,s){var f=s-i,m=((r-i)%f+f)%f+i;return m===i?s:m}function V(r){for(var i=[],s=arguments.length-1;s-- >0;)i[s]=arguments[s+1];for(var f=0,m=i;f<m.length;f+=1){var y=m[f];for(var _ in y)r[_]=y[_]}return r}var B=1;function z(){return B++}function re(){return function r(i){return i?(i^16*Math.random()>>i/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,r)}()}function ie(r){return!!r&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(r)}function ce(r,i){r.forEach(function(s){i[s]&&(i[s]=i[s].bind(i))})}function xe(r,i){return r.indexOf(i,r.length-i.length)!==-1}function Te(r,i,s){var f={};for(var m in r)f[m]=i.call(s||this,r[m],m,r);return f}function ve(r,i,s){var f={};for(var m in r)i.call(s||this,r[m],m,r)&&(f[m]=r[m]);return f}function we(r){return Array.isArray(r)?r.map(we):typeof r=="object"&&r?Te(r,we):r}var ee={};function pe(r){ee[r]||(typeof console<"u"&&console.warn(r),ee[r]=!0)}function Oe(r,i,s){return(s.y-r.y)*(i.x-r.x)>(i.y-r.y)*(s.x-r.x)}function Ue(r){for(var i=0,s=0,f=r.length,m=f-1,y=void 0,_=void 0;s<f;m=s++)i+=((_=r[m]).x-(y=r[s]).x)*(y.y+_.y);return i}function Ee(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function ke(r){var i={};if(r.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(f,m,y,_){var S=y||_;return i[m]=!S||S.toLowerCase(),""}),i["max-age"]){var s=parseInt(i["max-age"],10);isNaN(s)?delete i["max-age"]:i["max-age"]=s}return i}var je=null;function Ze(r){if(je==null){var i=r.navigator?r.navigator.userAgent:null;je=!!r.safari||!(!i||!(/\b(iPad|iPhone|iPod)\b/.test(i)||i.match("Safari")&&!i.match("Chrome")))}return je}function wt(r){try{var i=I[r];return i.setItem("_mapbox_test_",1),i.removeItem("_mapbox_test_"),!0}catch{return!1}}var Pe,Ge,lt,Re,qe=I.performance&&I.performance.now?I.performance.now.bind(I.performance):Date.now.bind(Date),Xt=I.requestAnimationFrame||I.mozRequestAnimationFrame||I.webkitRequestAnimationFrame||I.msRequestAnimationFrame,Pt=I.cancelAnimationFrame||I.mozCancelAnimationFrame||I.webkitCancelAnimationFrame||I.msCancelAnimationFrame,Bt={now:qe,frame:function(r){var i=Xt(r);return{cancel:function(){return Pt(i)}}},getImageData:function(r,i){i===void 0&&(i=0);var s=I.document.createElement("canvas"),f=s.getContext("2d");if(!f)throw new Error("failed to create canvas 2d context");return s.width=r.width,s.height=r.height,f.drawImage(r,0,0,r.width,r.height),f.getImageData(-i,-i,r.width+2*i,r.height+2*i)},resolveURL:function(r){return Pe||(Pe=I.document.createElement("a")),Pe.href=r,Pe.href},hardwareConcurrency:I.navigator&&I.navigator.hardwareConcurrency||4,get devicePixelRatio(){return I.devicePixelRatio},get prefersReducedMotion(){return!!I.matchMedia&&(Ge==null&&(Ge=I.matchMedia("(prefers-reduced-motion: reduce)")),Ge.matches)}},Ct={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},ir={supported:!1,testSupport:function(r){!Kt&&Re&&(Jt?st(r):lt=r)}},Kt=!1,Jt=!1;function st(r){var i=r.createTexture();r.bindTexture(r.TEXTURE_2D,i);try{if(r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,Re),r.isContextLost())return;ir.supported=!0}catch{}r.deleteTexture(i),Kt=!0}I.document&&((Re=I.document.createElement("img")).onload=function(){lt&&st(lt),lt=null,Jt=!0},Re.onerror=function(){Kt=!0,lt=null},Re.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var Ot="01",tr=function(r,i){this._transformRequestFn=r,this._customAccessToken=i,this._createSkuToken()};function Lr(r){return r.indexOf("mapbox:")===0}tr.prototype._createSkuToken=function(){var r=function(){for(var i="",s=0;s<10;s++)i+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Ot,i].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=r.token,this._skuTokenExpiresAt=r.tokenExpiresAt},tr.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},tr.prototype.transformRequest=function(r,i){return this._transformRequestFn&&this._transformRequestFn(r,i)||{url:r}},tr.prototype.normalizeStyleURL=function(r,i){if(!Lr(r))return r;var s=zr(r);return s.path="/styles/v1"+s.path,this._makeAPIURL(s,this._customAccessToken||i)},tr.prototype.normalizeGlyphsURL=function(r,i){if(!Lr(r))return r;var s=zr(r);return s.path="/fonts/v1"+s.path,this._makeAPIURL(s,this._customAccessToken||i)},tr.prototype.normalizeSourceURL=function(r,i){if(!Lr(r))return r;var s=zr(r);return s.path="/v4/"+s.authority+".json",s.params.push("secure"),this._makeAPIURL(s,this._customAccessToken||i)},tr.prototype.normalizeSpriteURL=function(r,i,s,f){var m=zr(r);return Lr(r)?(m.path="/styles/v1"+m.path+"/sprite"+i+s,this._makeAPIURL(m,this._customAccessToken||f)):(m.path+=""+i+s,Cr(m))},tr.prototype.normalizeTileURL=function(r,i){if(this._isSkuTokenExpired()&&this._createSkuToken(),r&&!Lr(r))return r;var s=zr(r);s.path=s.path.replace(/(\.(png|jpg)\d*)(?=$)/,(Bt.devicePixelRatio>=2||i===512?"@2x":"")+(ir.supported?".webp":"$1")),s.path=s.path.replace(/^.+\/v4\//,"/"),s.path="/v4"+s.path;var f=this._customAccessToken||function(m){for(var y=0,_=m;y<_.length;y+=1){var S=_[y].match(/^access_token=(.*)$/);if(S)return S[1]}return null}(s.params)||Ct.ACCESS_TOKEN;return Ct.REQUIRE_ACCESS_TOKEN&&f&&this._skuToken&&s.params.push("sku="+this._skuToken),this._makeAPIURL(s,f)},tr.prototype.canonicalizeTileURL=function(r,i){var s=zr(r);if(!s.path.match(/(^\/v4\/)/)||!s.path.match(/\.[\w]+$/))return r;var f="mapbox://tiles/";f+=s.path.replace("/v4/","");var m=s.params;return i&&(m=m.filter(function(y){return!y.match(/^access_token=/)})),m.length&&(f+="?"+m.join("&")),f},tr.prototype.canonicalizeTileset=function(r,i){for(var s=!!i&&Lr(i),f=[],m=0,y=r.tiles||[];m<y.length;m+=1){var _=y[m];rr(_)?f.push(this.canonicalizeTileURL(_,s)):f.push(_)}return f},tr.prototype._makeAPIURL=function(r,i){var s="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",f=zr(Ct.API_URL);if(r.protocol=f.protocol,r.authority=f.authority,r.protocol==="http"){var m=r.params.indexOf("secure");m>=0&&r.params.splice(m,1)}if(f.path!=="/"&&(r.path=""+f.path+r.path),!Ct.REQUIRE_ACCESS_TOKEN)return Cr(r);if(!(i=i||Ct.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+s);if(i[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+s);return r.params=r.params.filter(function(y){return y.indexOf("access_token")===-1}),r.params.push("access_token="+i),Cr(r)};var Fr=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function rr(r){return Fr.test(r)}var qr=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function zr(r){var i=r.match(qr);if(!i)throw new Error("Unable to parse URL object");return{protocol:i[1],authority:i[2],path:i[3]||"/",params:i[4]?i[4].split("&"):[]}}function Cr(r){var i=r.params.length?"?"+r.params.join("&"):"";return r.protocol+"://"+r.authority+r.path+i}function an(r){if(!r)return null;var i=r.split(".");if(!i||i.length!==3)return null;try{return JSON.parse(decodeURIComponent(I.atob(i[1]).split("").map(function(s){return"%"+("00"+s.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch{return null}}var Rr=function(r){this.type=r,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Rr.prototype.getStorageKey=function(r){var i,s=an(Ct.ACCESS_TOKEN);return i=s&&s.u?I.btoa(encodeURIComponent(s.u).replace(/%([0-9A-F]{2})/g,function(f,m){return String.fromCharCode(+("0x"+m))})):Ct.ACCESS_TOKEN||"",r?"mapbox.eventData."+r+":"+i:"mapbox.eventData:"+i},Rr.prototype.fetchEventData=function(){var r=wt("localStorage"),i=this.getStorageKey(),s=this.getStorageKey("uuid");if(r)try{var f=I.localStorage.getItem(i);f&&(this.eventData=JSON.parse(f));var m=I.localStorage.getItem(s);m&&(this.anonId=m)}catch{pe("Unable to read from LocalStorage")}},Rr.prototype.saveEventData=function(){var r=wt("localStorage"),i=this.getStorageKey(),s=this.getStorageKey("uuid");if(r)try{I.localStorage.setItem(s,this.anonId),Object.keys(this.eventData).length>=1&&I.localStorage.setItem(i,JSON.stringify(this.eventData))}catch{pe("Unable to write to LocalStorage")}},Rr.prototype.processRequests=function(r){},Rr.prototype.postEvent=function(r,i,s,f){var m=this;if(Ct.EVENTS_URL){var y=zr(Ct.EVENTS_URL);y.params.push("access_token="+(f||Ct.ACCESS_TOKEN||""));var _={event:this.type,created:new Date(r).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.3",skuId:Ot,userId:this.anonId},S=i?V(_,i):_,k={url:Cr(y),headers:{"Content-Type":"text/plain"},body:JSON.stringify([S])};this.pendingRequest=Zt(k,function(A){m.pendingRequest=null,s(A),m.saveEventData(),m.processRequests(f)})}},Rr.prototype.queueRequest=function(r,i){this.queue.push(r),this.processRequests(i)};var ur,Yr,Sn=function(r){function i(){r.call(this,"map.load"),this.success={},this.skuToken=""}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.postMapLoadEvent=function(s,f,m,y){this.skuToken=m;var _=!(!y&&!Ct.ACCESS_TOKEN),S=Array.isArray(s)&&s.some(function(k){return Lr(k)||rr(k)});Ct.EVENTS_URL&&_&&S&&this.queueRequest({id:f,timestamp:Date.now()},y)},i.prototype.processRequests=function(s){var f=this;if(!this.pendingRequest&&this.queue.length!==0){var m=this.queue.shift(),y=m.id,_=m.timestamp;y&&this.success[y]||(this.anonId||this.fetchEventData(),ie(this.anonId)||(this.anonId=re()),this.postEvent(_,{skuToken:this.skuToken},function(S){S||y&&(f.success[y]=!0)},s))}},i}(Rr),ai=new(function(r){function i(s){r.call(this,"appUserTurnstile"),this._customAccessToken=s}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.postTurnstileEvent=function(s,f){Ct.EVENTS_URL&&Ct.ACCESS_TOKEN&&Array.isArray(s)&&s.some(function(m){return Lr(m)||rr(m)})&&this.queueRequest(Date.now(),f)},i.prototype.processRequests=function(s){var f=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var m=an(Ct.ACCESS_TOKEN),y=m?m.u:Ct.ACCESS_TOKEN,_=y!==this.eventData.tokenU;ie(this.anonId)||(this.anonId=re(),_=!0);var S=this.queue.shift();if(this.eventData.lastSuccess){var k=new Date(this.eventData.lastSuccess),A=new Date(S),R=(S-this.eventData.lastSuccess)/864e5;_=_||R>=1||R<-1||k.getDate()!==A.getDate()}else _=!0;if(!_)return this.processRequests();this.postEvent(S,{"enabled.telemetry":!1},function(O){O||(f.eventData.lastSuccess=S,f.eventData.tokenU=y)},s)}},i}(Rr)),dr=ai.postTurnstileEvent.bind(ai),Nt=new Sn,jn=Nt.postMapLoadEvent.bind(Nt),Bn=500,$i=50;function Ut(){I.caches&&!ur&&(ur=I.caches.open("mapbox-tiles"))}function Sr(r){var i=r.indexOf("?");return i<0?r:r.slice(0,i)}var ct,Lt=1/0;function vr(){return ct==null&&(ct=I.OffscreenCanvas&&new I.OffscreenCanvas(1,1).getContext("2d")&&typeof I.createImageBitmap=="function"),ct}var Er={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Er);var nn=function(r){function i(s,f,m){f===401&&rr(m)&&(s+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),r.call(this,s),this.status=f,this.url=m,this.name=this.constructor.name,this.message=s}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},i}(Error),Le=Ee()?function(){return self.worker&&self.worker.referrer}:function(){return(I.location.protocol==="blob:"?I.parent:I).location.href},rt,St,sr=function(r,i){if(!(/^file:/.test(s=r.url)||/^file:/.test(Le())&&!/^\w+:/.test(s))){if(I.fetch&&I.Request&&I.AbortController&&I.Request.prototype.hasOwnProperty("signal"))return function(f,m){var y,_=new I.AbortController,S=new I.Request(f.url,{method:f.method||"GET",body:f.body,credentials:f.credentials,headers:f.headers,referrer:Le(),signal:_.signal}),k=!1,A=!1,R=(y=S.url).indexOf("sku=")>0&&rr(y);f.type==="json"&&S.headers.set("Accept","application/json");var O=function(H,ae,se){if(!A){if(H&&H.message!=="SecurityError"&&pe(H),ae&&se)return j(ae);var _e=Date.now();I.fetch(S).then(function(fe){if(fe.ok){var Ie=R?fe.clone():null;return j(fe,Ie,_e)}return m(new nn(fe.statusText,fe.status,f.url))}).catch(function(fe){fe.code!==20&&m(new Error(fe.message))})}},j=function(H,ae,se){(f.type==="arrayBuffer"?H.arrayBuffer():f.type==="json"?H.json():H.text()).then(function(_e){A||(ae&&se&&function(fe,Ie,Me){if(Ut(),ur){var ze={status:Ie.status,statusText:Ie.statusText,headers:new I.Headers};Ie.headers.forEach(function(We,Qe){return ze.headers.set(Qe,We)});var Be=ke(Ie.headers.get("Cache-Control")||"");Be["no-store"]||(Be["max-age"]&&ze.headers.set("Expires",new Date(Me+1e3*Be["max-age"]).toUTCString()),new Date(ze.headers.get("Expires")).getTime()-Me<42e4||function(We,Qe){if(Yr===void 0)try{new Response(new ReadableStream),Yr=!0}catch{Yr=!1}Yr?Qe(We.body):We.blob().then(Qe)}(Ie,function(We){var Qe=new I.Response(We,ze);Ut(),ur&&ur.then(function(nt){return nt.put(Sr(fe.url),Qe)}).catch(function(nt){return pe(nt.message)})}))}}(S,ae,se),k=!0,m(null,_e,H.headers.get("Cache-Control"),H.headers.get("Expires")))}).catch(function(_e){A||m(new Error(_e.message))})};return R?function(H,ae){if(Ut(),!ur)return ae(null);var se=Sr(H.url);ur.then(function(_e){_e.match(se).then(function(fe){var Ie=function(Me){if(!Me)return!1;var ze=new Date(Me.headers.get("Expires")||0),Be=ke(Me.headers.get("Cache-Control")||"");return ze>Date.now()&&!Be["no-cache"]}(fe);_e.delete(se),Ie&&_e.put(se,fe.clone()),ae(null,fe,Ie)}).catch(ae)}).catch(ae)}(S,O):O(null,null),{cancel:function(){A=!0,k||_.abort()}}}(r,i);if(Ee()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",r,i,void 0,!0)}var s;return function(f,m){var y=new I.XMLHttpRequest;for(var _ in y.open(f.method||"GET",f.url,!0),f.type==="arrayBuffer"&&(y.responseType="arraybuffer"),f.headers)y.setRequestHeader(_,f.headers[_]);return f.type==="json"&&(y.responseType="text",y.setRequestHeader("Accept","application/json")),y.withCredentials=f.credentials==="include",y.onerror=function(){m(new Error(y.statusText))},y.onload=function(){if((y.status>=200&&y.status<300||y.status===0)&&y.response!==null){var S=y.response;if(f.type==="json")try{S=JSON.parse(y.response)}catch(k){return m(k)}m(null,S,y.getResponseHeader("Cache-Control"),y.getResponseHeader("Expires"))}else m(new nn(y.statusText,y.status,f.url))},y.send(f.body),{cancel:function(){return y.abort()}}}(r,i)},Dr=function(r,i){return sr(V(r,{type:"arrayBuffer"}),i)},Zt=function(r,i){return sr(V(r,{method:"POST"}),i)},L="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";rt=[],St=0;var U=function(r,i){if(ir.supported&&(r.headers||(r.headers={}),r.headers.accept="image/webp,*/*"),St>=Ct.MAX_PARALLEL_IMAGE_REQUESTS){var s={requestParameters:r,callback:i,cancelled:!1,cancel:function(){this.cancelled=!0}};return rt.push(s),s}St++;var f=!1,m=function(){if(!f)for(f=!0,St--;rt.length&&St<Ct.MAX_PARALLEL_IMAGE_REQUESTS;){var _=rt.shift();_.cancelled||(_.cancel=U(_.requestParameters,_.callback).cancel)}},y=Dr(r,function(_,S,k,A){m(),_?i(_):S&&(vr()?function(R,O){var j=new I.Blob([new Uint8Array(R)],{type:"image/png"});I.createImageBitmap(j).then(function(H){O(null,H)}).catch(function(H){O(new Error("Could not load image because of "+H.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(S,i):function(R,O,j,H){var ae=new I.Image,se=I.URL;ae.onload=function(){O(null,ae),se.revokeObjectURL(ae.src),ae.onload=null,I.requestAnimationFrame(function(){ae.src=L})},ae.onerror=function(){return O(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var _e=new I.Blob([new Uint8Array(R)],{type:"image/png"});ae.cacheControl=j,ae.expires=H,ae.src=R.byteLength?se.createObjectURL(_e):L}(S,i,k,A))});return{cancel:function(){y.cancel(),m()}}};function W(r,i,s){s[r]&&s[r].indexOf(i)!==-1||(s[r]=s[r]||[],s[r].push(i))}function Y(r,i,s){if(s&&s[r]){var f=s[r].indexOf(i);f!==-1&&s[r].splice(f,1)}}var te=function(r,i){i===void 0&&(i={}),V(this,i),this.type=r},de=function(r){function i(s,f){f===void 0&&(f={}),r.call(this,"error",V({error:s},f))}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i}(te),me=function(){};me.prototype.on=function(r,i){return this._listeners=this._listeners||{},W(r,i,this._listeners),this},me.prototype.off=function(r,i){return Y(r,i,this._listeners),Y(r,i,this._oneTimeListeners),this},me.prototype.once=function(r,i){return this._oneTimeListeners=this._oneTimeListeners||{},W(r,i,this._oneTimeListeners),this},me.prototype.fire=function(r,i){typeof r=="string"&&(r=new te(r,i||{}));var s=r.type;if(this.listens(s)){r.target=this;for(var f=0,m=this._listeners&&this._listeners[s]?this._listeners[s].slice():[];f<m.length;f+=1)m[f].call(this,r);for(var y=0,_=this._oneTimeListeners&&this._oneTimeListeners[s]?this._oneTimeListeners[s].slice():[];y<_.length;y+=1){var S=_[y];Y(s,S,this._oneTimeListeners),S.call(this,r)}var k=this._eventedParent;k&&(V(r,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),k.fire(r))}else r instanceof de&&console.error(r.error);return this},me.prototype.listens=function(r){return this._listeners&&this._listeners[r]&&this._listeners[r].length>0||this._oneTimeListeners&&this._oneTimeListeners[r]&&this._oneTimeListeners[r].length>0||this._eventedParent&&this._eventedParent.listens(r)},me.prototype.setEventedParent=function(r,i){return this._eventedParent=r,this._eventedParentData=i,this};var Z={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},ne=function(r,i,s,f){this.message=(r?r+": ":"")+s,f&&(this.identifier=f),i!=null&&i.__line__&&(this.line=i.__line__)};function Se(r){var i=r.value;return i?[new ne(r.key,i,"constants have been deprecated as of v8")]:[]}function He(r){for(var i=[],s=arguments.length-1;s-- >0;)i[s]=arguments[s+1];for(var f=0,m=i;f<m.length;f+=1){var y=m[f];for(var _ in y)r[_]=y[_]}return r}function Ye(r){return r instanceof Number||r instanceof String||r instanceof Boolean?r.valueOf():r}function $e(r){if(Array.isArray(r))return r.map($e);if(r instanceof Object&&!(r instanceof Number||r instanceof String||r instanceof Boolean)){var i={};for(var s in r)i[s]=$e(r[s]);return i}return Ye(r)}var Je=function(r){function i(s,f){r.call(this,f),this.message=f,this.key=s}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i}(Error),_t=function(r,i){i===void 0&&(i=[]),this.parent=r,this.bindings={};for(var s=0,f=i;s<f.length;s+=1){var m=f[s];this.bindings[m[0]]=m[1]}};_t.prototype.concat=function(r){return new _t(this,r)},_t.prototype.get=function(r){if(this.bindings[r])return this.bindings[r];if(this.parent)return this.parent.get(r);throw new Error(r+" not found in scope.")},_t.prototype.has=function(r){return!!this.bindings[r]||!!this.parent&&this.parent.has(r)};var gt={kind:"null"},Ve={kind:"number"},ht={kind:"string"},it={kind:"boolean"},at={kind:"color"},ar={kind:"object"},pt={kind:"value"},yr={kind:"collator"},Hr={kind:"formatted"},cr={kind:"resolvedImage"};function Pr(r,i){return{kind:"array",itemType:r,N:i}}function _r(r){if(r.kind==="array"){var i=_r(r.itemType);return typeof r.N=="number"?"array<"+i+", "+r.N+">":r.itemType.kind==="value"?"array":"array<"+i+">"}return r.kind}var gi=[gt,Ve,ht,it,at,Hr,ar,Pr(pt),cr];function Or(r,i){if(i.kind==="error")return null;if(r.kind==="array"){if(i.kind==="array"&&(i.N===0&&i.itemType.kind==="value"||!Or(r.itemType,i.itemType))&&(typeof r.N!="number"||r.N===i.N))return null}else{if(r.kind===i.kind)return null;if(r.kind==="value"){for(var s=0,f=gi;s<f.length;s+=1)if(!Or(f[s],i))return null}}return"Expected "+_r(r)+" but found "+_r(i)+" instead."}function En(r,i){return i.some(function(s){return s.kind===r.kind})}function Wr(r,i){return i.some(function(s){return s==="null"?r===null:s==="array"?Array.isArray(r):s==="object"?r&&!Array.isArray(r)&&typeof r=="object":s===typeof r})}var mr=v(function(r,i){var s={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function f(S){return(S=Math.round(S))<0?0:S>255?255:S}function m(S){return f(S[S.length-1]==="%"?parseFloat(S)/100*255:parseInt(S))}function y(S){return(k=S[S.length-1]==="%"?parseFloat(S)/100:parseFloat(S))<0?0:k>1?1:k;var k}function _(S,k,A){return A<0?A+=1:A>1&&(A-=1),6*A<1?S+(k-S)*A*6:2*A<1?k:3*A<2?S+(k-S)*(2/3-A)*6:S}try{i.parseCSSColor=function(S){var k,A=S.replace(/ /g,"").toLowerCase();if(A in s)return s[A].slice();if(A[0]==="#")return A.length===4?(k=parseInt(A.substr(1),16))>=0&&k<=4095?[(3840&k)>>4|(3840&k)>>8,240&k|(240&k)>>4,15&k|(15&k)<<4,1]:null:A.length===7&&(k=parseInt(A.substr(1),16))>=0&&k<=16777215?[(16711680&k)>>16,(65280&k)>>8,255&k,1]:null;var R=A.indexOf("("),O=A.indexOf(")");if(R!==-1&&O+1===A.length){var j=A.substr(0,R),H=A.substr(R+1,O-(R+1)).split(","),ae=1;switch(j){case"rgba":if(H.length!==4)return null;ae=y(H.pop());case"rgb":return H.length!==3?null:[m(H[0]),m(H[1]),m(H[2]),ae];case"hsla":if(H.length!==4)return null;ae=y(H.pop());case"hsl":if(H.length!==3)return null;var se=(parseFloat(H[0])%360+360)%360/360,_e=y(H[1]),fe=y(H[2]),Ie=fe<=.5?fe*(_e+1):fe+_e-fe*_e,Me=2*fe-Ie;return[f(255*_(Me,Ie,se+1/3)),f(255*_(Me,Ie,se)),f(255*_(Me,Ie,se-1/3)),ae];default:return null}}return null}}catch{}}).parseCSSColor,Ar=function(r,i,s,f){f===void 0&&(f=1),this.r=r,this.g=i,this.b=s,this.a=f};Ar.parse=function(r){if(r){if(r instanceof Ar)return r;if(typeof r=="string"){var i=mr(r);if(i)return new Ar(i[0]/255*i[3],i[1]/255*i[3],i[2]/255*i[3],i[3])}}},Ar.prototype.toString=function(){var r=this.toArray(),i=r[1],s=r[2],f=r[3];return"rgba("+Math.round(r[0])+","+Math.round(i)+","+Math.round(s)+","+f+")"},Ar.prototype.toArray=function(){var r=this.a;return r===0?[0,0,0,0]:[255*this.r/r,255*this.g/r,255*this.b/r,r]},Ar.black=new Ar(0,0,0,1),Ar.white=new Ar(1,1,1,1),Ar.transparent=new Ar(0,0,0,0),Ar.red=new Ar(1,0,0,1);var Pi=function(r,i,s){this.sensitivity=r?i?"variant":"case":i?"accent":"base",this.locale=s,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Pi.prototype.compare=function(r,i){return this.collator.compare(r,i)},Pi.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var $l=function(r,i,s,f,m){this.text=r,this.image=i,this.scale=s,this.fontStack=f,this.textColor=m},Yn=function(r){this.sections=r};Yn.fromString=function(r){return new Yn([new $l(r,null,null,null,null)])},Yn.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(r){return r.text.length!==0||r.image&&r.image.name.length!==0})},Yn.factory=function(r){return r instanceof Yn?r:Yn.fromString(r)},Yn.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(r){return r.text}).join("")},Yn.prototype.serialize=function(){for(var r=["format"],i=0,s=this.sections;i<s.length;i+=1){var f=s[i];if(f.image)r.push(["image",f.image.name]);else{r.push(f.text);var m={};f.fontStack&&(m["text-font"]=["literal",f.fontStack.split(",")]),f.scale&&(m["font-scale"]=f.scale),f.textColor&&(m["text-color"]=["rgba"].concat(f.textColor.toArray())),r.push(m)}}return r};var Ai=function(r){this.name=r.name,this.available=r.available};function Kp(r,i,s,f){return typeof r=="number"&&r>=0&&r<=255&&typeof i=="number"&&i>=0&&i<=255&&typeof s=="number"&&s>=0&&s<=255?f===void 0||typeof f=="number"&&f>=0&&f<=1?null:"Invalid rgba value ["+[r,i,s,f].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof f=="number"?[r,i,s,f]:[r,i,s]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function jl(r){if(r===null||typeof r=="string"||typeof r=="boolean"||typeof r=="number"||r instanceof Ar||r instanceof Pi||r instanceof Yn||r instanceof Ai)return!0;if(Array.isArray(r)){for(var i=0,s=r;i<s.length;i+=1)if(!jl(s[i]))return!1;return!0}if(typeof r=="object"){for(var f in r)if(!jl(r[f]))return!1;return!0}return!1}function Cn(r){if(r===null)return gt;if(typeof r=="string")return ht;if(typeof r=="boolean")return it;if(typeof r=="number")return Ve;if(r instanceof Ar)return at;if(r instanceof Pi)return yr;if(r instanceof Yn)return Hr;if(r instanceof Ai)return cr;if(Array.isArray(r)){for(var i,s=r.length,f=0,m=r;f<m.length;f+=1){var y=Cn(m[f]);if(i){if(i===y)continue;i=pt;break}i=y}return Pr(i||pt,s)}return ar}function Vl(r){var i=typeof r;return r===null?"":i==="string"||i==="number"||i==="boolean"?String(r):r instanceof Ar||r instanceof Yn||r instanceof Ai?r.toString():JSON.stringify(r)}Ai.prototype.toString=function(){return this.name},Ai.fromString=function(r){return r?new Ai({name:r,available:!1}):null},Ai.prototype.serialize=function(){return["image",this.name]};var vi=function(r,i){this.type=r,this.value=i};vi.parse=function(r,i){if(r.length!==2)return i.error("'literal' expression requires exactly one argument, but found "+(r.length-1)+" instead.");if(!jl(r[1]))return i.error("invalid value");var s=r[1],f=Cn(s),m=i.expectedType;return f.kind!=="array"||f.N!==0||!m||m.kind!=="array"||typeof m.N=="number"&&m.N!==0||(f=m),new vi(f,s)},vi.prototype.evaluate=function(){return this.value},vi.prototype.eachChild=function(){},vi.prototype.outputDefined=function(){return!0},vi.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Ar?["rgba"].concat(this.value.toArray()):this.value instanceof Yn?this.value.serialize():this.value};var Jn=function(r){this.name="ExpressionEvaluationError",this.message=r};Jn.prototype.toJSON=function(){return this.message};var co={string:ht,number:Ve,boolean:it,object:ar},sn=function(r,i){this.type=r,this.args=i};sn.parse=function(r,i){if(r.length<2)return i.error("Expected at least one argument.");var s,f=1,m=r[0];if(m==="array"){var y,_;if(r.length>2){var S=r[1];if(typeof S!="string"||!(S in co)||S==="object")return i.error('The item type argument of "array" must be one of string, number, boolean',1);y=co[S],f++}else y=pt;if(r.length>3){if(r[2]!==null&&(typeof r[2]!="number"||r[2]<0||r[2]!==Math.floor(r[2])))return i.error('The length argument to "array" must be a positive integer literal',2);_=r[2],f++}s=Pr(y,_)}else s=co[m];for(var k=[];f<r.length;f++){var A=i.parse(r[f],f,pt);if(!A)return null;k.push(A)}return new sn(s,k)},sn.prototype.evaluate=function(r){for(var i=0;i<this.args.length;i++){var s=this.args[i].evaluate(r);if(!Or(this.type,Cn(s)))return s;if(i===this.args.length-1)throw new Jn("Expected value to be of type "+_r(this.type)+", but found "+_r(Cn(s))+" instead.")}return null},sn.prototype.eachChild=function(r){this.args.forEach(r)},sn.prototype.outputDefined=function(){return this.args.every(function(r){return r.outputDefined()})},sn.prototype.serialize=function(){var r=this.type,i=[r.kind];if(r.kind==="array"){var s=r.itemType;if(s.kind==="string"||s.kind==="number"||s.kind==="boolean"){i.push(s.kind);var f=r.N;(typeof f=="number"||this.args.length>1)&&i.push(f)}}return i.concat(this.args.map(function(m){return m.serialize()}))};var Mo=function(r){this.type=Hr,this.sections=r};Mo.parse=function(r,i){if(r.length<2)return i.error("Expected at least one argument.");var s=r[1];if(!Array.isArray(s)&&typeof s=="object")return i.error("First argument must be an image or text section.");for(var f=[],m=!1,y=1;y<=r.length-1;++y){var _=r[y];if(m&&typeof _=="object"&&!Array.isArray(_)){m=!1;var S=null;if(_["font-scale"]&&!(S=i.parse(_["font-scale"],1,Ve)))return null;var k=null;if(_["text-font"]&&!(k=i.parse(_["text-font"],1,Pr(ht))))return null;var A=null;if(_["text-color"]&&!(A=i.parse(_["text-color"],1,at)))return null;var R=f[f.length-1];R.scale=S,R.font=k,R.textColor=A}else{var O=i.parse(r[y],1,pt);if(!O)return null;var j=O.type.kind;if(j!=="string"&&j!=="value"&&j!=="null"&&j!=="resolvedImage")return i.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");m=!0,f.push({content:O,scale:null,font:null,textColor:null})}}return new Mo(f)},Mo.prototype.evaluate=function(r){return new Yn(this.sections.map(function(i){var s=i.content.evaluate(r);return Cn(s)===cr?new $l("",s,null,null,null):new $l(Vl(s),null,i.scale?i.scale.evaluate(r):null,i.font?i.font.evaluate(r).join(","):null,i.textColor?i.textColor.evaluate(r):null)}))},Mo.prototype.eachChild=function(r){for(var i=0,s=this.sections;i<s.length;i+=1){var f=s[i];r(f.content),f.scale&&r(f.scale),f.font&&r(f.font),f.textColor&&r(f.textColor)}},Mo.prototype.outputDefined=function(){return!1},Mo.prototype.serialize=function(){for(var r=["format"],i=0,s=this.sections;i<s.length;i+=1){var f=s[i];r.push(f.content.serialize());var m={};f.scale&&(m["font-scale"]=f.scale.serialize()),f.font&&(m["text-font"]=f.font.serialize()),f.textColor&&(m["text-color"]=f.textColor.serialize()),r.push(m)}return r};var ro=function(r){this.type=cr,this.input=r};ro.parse=function(r,i){if(r.length!==2)return i.error("Expected two arguments.");var s=i.parse(r[1],1,ht);return s?new ro(s):i.error("No image name provided.")},ro.prototype.evaluate=function(r){var i=this.input.evaluate(r),s=Ai.fromString(i);return s&&r.availableImages&&(s.available=r.availableImages.indexOf(i)>-1),s},ro.prototype.eachChild=function(r){r(this.input)},ro.prototype.outputDefined=function(){return!1},ro.prototype.serialize=function(){return["image",this.input.serialize()]};var wd={"to-boolean":it,"to-color":at,"to-number":Ve,"to-string":ht},po=function(r,i){this.type=r,this.args=i};po.parse=function(r,i){if(r.length<2)return i.error("Expected at least one argument.");var s=r[0];if((s==="to-boolean"||s==="to-string")&&r.length!==2)return i.error("Expected one argument.");for(var f=wd[s],m=[],y=1;y<r.length;y++){var _=i.parse(r[y],y,pt);if(!_)return null;m.push(_)}return new po(f,m)},po.prototype.evaluate=function(r){if(this.type.kind==="boolean")return!!this.args[0].evaluate(r);if(this.type.kind==="color"){for(var i,s,f=0,m=this.args;f<m.length;f+=1){if(s=null,(i=m[f].evaluate(r))instanceof Ar)return i;if(typeof i=="string"){var y=r.parseColor(i);if(y)return y}else if(Array.isArray(i)&&!(s=i.length<3||i.length>4?"Invalid rbga value "+JSON.stringify(i)+": expected an array containing either three or four numeric values.":Kp(i[0],i[1],i[2],i[3])))return new Ar(i[0]/255,i[1]/255,i[2]/255,i[3])}throw new Jn(s||"Could not parse color from value '"+(typeof i=="string"?i:String(JSON.stringify(i)))+"'")}if(this.type.kind==="number"){for(var _=null,S=0,k=this.args;S<k.length;S+=1){if((_=k[S].evaluate(r))===null)return 0;var A=Number(_);if(!isNaN(A))return A}throw new Jn("Could not convert "+JSON.stringify(_)+" to number.")}return this.type.kind==="formatted"?Yn.fromString(Vl(this.args[0].evaluate(r))):this.type.kind==="resolvedImage"?Ai.fromString(Vl(this.args[0].evaluate(r))):Vl(this.args[0].evaluate(r))},po.prototype.eachChild=function(r){this.args.forEach(r)},po.prototype.outputDefined=function(){return this.args.every(function(r){return r.outputDefined()})},po.prototype.serialize=function(){if(this.type.kind==="formatted")return new Mo([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new ro(this.args[0]).serialize();var r=["to-"+this.type.kind];return this.eachChild(function(i){r.push(i.serialize())}),r};var Mv=["Unknown","Point","LineString","Polygon"],ca=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};ca.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},ca.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?Mv[this.feature.type]:this.feature.type:null},ca.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},ca.prototype.canonicalID=function(){return this.canonical},ca.prototype.properties=function(){return this.feature&&this.feature.properties||{}},ca.prototype.parseColor=function(r){var i=this._parseColorCache[r];return i||(i=this._parseColorCache[r]=Ar.parse(r)),i};var si=function(r,i,s,f){this.name=r,this.type=i,this._evaluate=s,this.args=f};si.prototype.evaluate=function(r){return this._evaluate(r,this.args)},si.prototype.eachChild=function(r){this.args.forEach(r)},si.prototype.outputDefined=function(){return!1},si.prototype.serialize=function(){return[this.name].concat(this.args.map(function(r){return r.serialize()}))},si.parse=function(r,i){var s,f=r[0],m=si.definitions[f];if(!m)return i.error('Unknown expression "'+f+'". If you wanted a literal array, use ["literal", [...]].',0);for(var y=Array.isArray(m)?m[0]:m.type,_=Array.isArray(m)?[[m[1],m[2]]]:m.overloads,S=_.filter(function(It){var ft=It[0];return!Array.isArray(ft)||ft.length===r.length-1}),k=null,A=0,R=S;A<R.length;A+=1){var O=R[A],j=O[0],H=O[1];k=new Pa(i.registry,i.path,null,i.scope);for(var ae=[],se=!1,_e=1;_e<r.length;_e++){var fe=r[_e],Ie=Array.isArray(j)?j[_e-1]:j.type,Me=k.parse(fe,1+ae.length,Ie);if(!Me){se=!0;break}ae.push(Me)}if(!se)if(Array.isArray(j)&&j.length!==ae.length)k.error("Expected "+j.length+" arguments, but found "+ae.length+" instead.");else{for(var ze=0;ze<ae.length;ze++){var Be=Array.isArray(j)?j[ze]:j.type,We=ae[ze];k.concat(ze+1).checkSubtype(Be,We.type)}if(k.errors.length===0)return new si(f,y,H,ae)}}if(S.length===1)(s=i.errors).push.apply(s,k.errors);else{for(var Qe=(S.length?S:_).map(function(It){var ft;return ft=It[0],Array.isArray(ft)?"("+ft.map(_r).join(", ")+")":"("+_r(ft.type)+"...)"}).join(" | "),nt=[],Et=1;Et<r.length;Et++){var ut=i.parse(r[Et],1+nt.length);if(!ut)return null;nt.push(_r(ut.type))}i.error("Expected arguments of type "+Qe+", but found ("+nt.join(", ")+") instead.")}return null},si.register=function(r,i){for(var s in si.definitions=i,i)r[s]=si};var Ho=function(r,i,s){this.type=yr,this.locale=s,this.caseSensitive=r,this.diacriticSensitive=i};function _i(r,i){r[0]=Math.min(r[0],i[0]),r[1]=Math.min(r[1],i[1]),r[2]=Math.max(r[2],i[0]),r[3]=Math.max(r[3],i[1])}function us(r,i){return!(r[0]<=i[0]||r[2]>=i[2]||r[1]<=i[1]||r[3]>=i[3])}function Rv(r,i){var s=(180+r[0])/360,f=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r[1]*Math.PI/360)))/360,m=Math.pow(2,i.z);return[Math.round(s*m*8192),Math.round(f*m*8192)]}function Lv(r,i,s){return i[1]>r[1]!=s[1]>r[1]&&r[0]<(s[0]-i[0])*(r[1]-i[1])/(s[1]-i[1])+i[0]}function Xp(r,i){for(var s,f,m,y,_,S,k,A=!1,R=0,O=i.length;R<O;R++)for(var j=i[R],H=0,ae=j.length;H<ae-1;H++){if((y=(s=r)[0]-(f=j[H])[0])*(k=s[1]-(m=j[H+1])[1])-(S=s[0]-m[0])*(_=s[1]-f[1])==0&&y*S<=0&&_*k<=0)return!1;Lv(r,j[H],j[H+1])&&(A=!A)}return A}function zv(r,i){for(var s=0;s<i.length;s++)if(Xp(r,i[s]))return!0;return!1}function Sd(r,i,s,f){var m=f[0]-s[0],y=f[1]-s[1],_=(r[0]-s[0])*y-m*(r[1]-s[1]),S=(i[0]-s[0])*y-m*(i[1]-s[1]);return _>0&&S<0||_<0&&S>0}function Dv(r,i,s){for(var f=0,m=s;f<m.length;f+=1)for(var y=m[f],_=0;_<y.length-1;++_)if((O=[(R=y[_+1])[0]-(A=y[_])[0],R[1]-A[1]])[0]*(j=[(k=i)[0]-(S=r)[0],k[1]-S[1]])[1]-O[1]*j[0]!=0&&Sd(S,k,A,R)&&Sd(A,R,S,k))return!0;var S,k,A,R,O,j;return!1}function Ed(r,i){for(var s=0;s<r.length;++s)if(!Xp(r[s],i))return!1;for(var f=0;f<r.length-1;++f)if(Dv(r[f],r[f+1],i))return!1;return!0}function Cd(r,i){for(var s=0;s<i.length;s++)if(Ed(r,i[s]))return!0;return!1}function Ks(r,i,s){for(var f=[],m=0;m<r.length;m++){for(var y=[],_=0;_<r[m].length;_++){var S=Rv(r[m][_],s);_i(i,S),y.push(S)}f.push(y)}return f}function Yp(r,i,s){for(var f=[],m=0;m<r.length;m++){var y=Ks(r[m],i,s);f.push(y)}return f}function ql(r,i,s,f){if(r[0]<s[0]||r[0]>s[2]){var m=.5*f,y=r[0]-s[0]>m?-f:s[0]-r[0]>m?f:0;y===0&&(y=r[0]-s[2]>m?-f:s[2]-r[0]>m?f:0),r[0]+=y}_i(i,r)}function kd(r,i,s,f){for(var m=8192*Math.pow(2,f.z),y=[8192*f.x,8192*f.y],_=[],S=0,k=r;S<k.length;S+=1)for(var A=0,R=k[S];A<R.length;A+=1){var O=R[A],j=[O.x+y[0],O.y+y[1]];ql(j,i,s,m),_.push(j)}return _}function Gu(r,i,s,f){for(var m,y=8192*Math.pow(2,f.z),_=[8192*f.x,8192*f.y],S=[],k=0,A=r;k<A.length;k+=1){for(var R=[],O=0,j=A[k];O<j.length;O+=1){var H=j[O],ae=[H.x+_[0],H.y+_[1]];_i(i,ae),R.push(ae)}S.push(R)}if(i[2]-i[0]<=y/2){(m=i)[0]=m[1]=1/0,m[2]=m[3]=-1/0;for(var se=0,_e=S;se<_e.length;se+=1)for(var fe=0,Ie=_e[se];fe<Ie.length;fe+=1)ql(Ie[fe],i,s,y)}return S}Ho.parse=function(r,i){if(r.length!==2)return i.error("Expected one argument.");var s=r[1];if(typeof s!="object"||Array.isArray(s))return i.error("Collator options argument must be an object.");var f=i.parse(s["case-sensitive"]!==void 0&&s["case-sensitive"],1,it);if(!f)return null;var m=i.parse(s["diacritic-sensitive"]!==void 0&&s["diacritic-sensitive"],1,it);if(!m)return null;var y=null;return s.locale&&!(y=i.parse(s.locale,1,ht))?null:new Ho(f,m,y)},Ho.prototype.evaluate=function(r){return new Pi(this.caseSensitive.evaluate(r),this.diacriticSensitive.evaluate(r),this.locale?this.locale.evaluate(r):null)},Ho.prototype.eachChild=function(r){r(this.caseSensitive),r(this.diacriticSensitive),this.locale&&r(this.locale)},Ho.prototype.outputDefined=function(){return!1},Ho.prototype.serialize=function(){var r={};return r["case-sensitive"]=this.caseSensitive.serialize(),r["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(r.locale=this.locale.serialize()),["collator",r]};var fo=function(r,i){this.type=it,this.geojson=r,this.geometries=i};function ka(r){if(r instanceof si&&(r.name==="get"&&r.args.length===1||r.name==="feature-state"||r.name==="has"&&r.args.length===1||r.name==="properties"||r.name==="geometry-type"||r.name==="id"||/^filter-/.test(r.name))||r instanceof fo)return!1;var i=!0;return r.eachChild(function(s){i&&!ka(s)&&(i=!1)}),i}function Ta(r){if(r instanceof si&&r.name==="feature-state")return!1;var i=!0;return r.eachChild(function(s){i&&!Ta(s)&&(i=!1)}),i}function cs(r,i){if(r instanceof si&&i.indexOf(r.name)>=0)return!1;var s=!0;return r.eachChild(function(f){s&&!cs(f,i)&&(s=!1)}),s}fo.parse=function(r,i){if(r.length!==2)return i.error("'within' expression requires exactly one argument, but found "+(r.length-1)+" instead.");if(jl(r[1])){var s=r[1];if(s.type==="FeatureCollection")for(var f=0;f<s.features.length;++f){var m=s.features[f].geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new fo(s,s.features[f].geometry)}else if(s.type==="Feature"){var y=s.geometry.type;if(y==="Polygon"||y==="MultiPolygon")return new fo(s,s.geometry)}else if(s.type==="Polygon"||s.type==="MultiPolygon")return new fo(s,s)}return i.error("'within' expression requires valid geojson object that contains polygon geometry type.")},fo.prototype.evaluate=function(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(i,s){var f=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],y=i.canonicalID();if(s.type==="Polygon"){var _=Ks(s.coordinates,m,y),S=kd(i.geometry(),f,m,y);if(!us(f,m))return!1;for(var k=0,A=S;k<A.length;k+=1)if(!Xp(A[k],_))return!1}if(s.type==="MultiPolygon"){var R=Yp(s.coordinates,m,y),O=kd(i.geometry(),f,m,y);if(!us(f,m))return!1;for(var j=0,H=O;j<H.length;j+=1)if(!zv(H[j],R))return!1}return!0}(r,this.geometries);if(r.geometryType()==="LineString")return function(i,s){var f=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],y=i.canonicalID();if(s.type==="Polygon"){var _=Ks(s.coordinates,m,y),S=Gu(i.geometry(),f,m,y);if(!us(f,m))return!1;for(var k=0,A=S;k<A.length;k+=1)if(!Ed(A[k],_))return!1}if(s.type==="MultiPolygon"){var R=Yp(s.coordinates,m,y),O=Gu(i.geometry(),f,m,y);if(!us(f,m))return!1;for(var j=0,H=O;j<H.length;j+=1)if(!Cd(H[j],R))return!1}return!0}(r,this.geometries)}return!1},fo.prototype.eachChild=function(){},fo.prototype.outputDefined=function(){return!0},fo.prototype.serialize=function(){return["within",this.geojson]};var Ia=function(r,i){this.type=i.type,this.name=r,this.boundExpression=i};Ia.parse=function(r,i){if(r.length!==2||typeof r[1]!="string")return i.error("'var' expression requires exactly one string literal argument.");var s=r[1];return i.scope.has(s)?new Ia(s,i.scope.get(s)):i.error('Unknown variable "'+s+'". Make sure "'+s+'" has been bound in an enclosing "let" expression before using it.',1)},Ia.prototype.evaluate=function(r){return this.boundExpression.evaluate(r)},Ia.prototype.eachChild=function(){},Ia.prototype.outputDefined=function(){return!1},Ia.prototype.serialize=function(){return["var",this.name]};var Pa=function(r,i,s,f,m){i===void 0&&(i=[]),f===void 0&&(f=new _t),m===void 0&&(m=[]),this.registry=r,this.path=i,this.key=i.map(function(y){return"["+y+"]"}).join(""),this.scope=f,this.errors=m,this.expectedType=s};function Hu(r,i){for(var s,f=r.length-1,m=0,y=f,_=0;m<=y;)if((s=r[_=Math.floor((m+y)/2)])<=i){if(_===f||i<r[_+1])return _;m=_+1}else{if(!(s>i))throw new Jn("Input is not a number.");y=_-1}return 0}Pa.prototype.parse=function(r,i,s,f,m){return m===void 0&&(m={}),i?this.concat(i,s,f)._parse(r,m):this._parse(r,m)},Pa.prototype._parse=function(r,i){function s(A,R,O){return O==="assert"?new sn(R,[A]):O==="coerce"?new po(R,[A]):A}if(r!==null&&typeof r!="string"&&typeof r!="boolean"&&typeof r!="number"||(r=["literal",r]),Array.isArray(r)){if(r.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var f=r[0];if(typeof f!="string")return this.error("Expression name must be a string, but found "+typeof f+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var m=this.registry[f];if(m){var y=m.parse(r,this);if(!y)return null;if(this.expectedType){var _=this.expectedType,S=y.type;if(_.kind!=="string"&&_.kind!=="number"&&_.kind!=="boolean"&&_.kind!=="object"&&_.kind!=="array"||S.kind!=="value")if(_.kind!=="color"&&_.kind!=="formatted"&&_.kind!=="resolvedImage"||S.kind!=="value"&&S.kind!=="string"){if(this.checkSubtype(_,S))return null}else y=s(y,_,i.typeAnnotation||"coerce");else y=s(y,_,i.typeAnnotation||"assert")}if(!(y instanceof vi)&&y.type.kind!=="resolvedImage"&&function A(R){if(R instanceof Ia)return A(R.boundExpression);if(R instanceof si&&R.name==="error"||R instanceof Ho||R instanceof fo)return!1;var O=R instanceof po||R instanceof sn,j=!0;return R.eachChild(function(H){j=O?j&&A(H):j&&H instanceof vi}),!!j&&ka(R)&&cs(R,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(y)){var k=new ca;try{y=new vi(y.type,y.evaluate(k))}catch(A){return this.error(A.message),null}}return y}return this.error('Unknown expression "'+f+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(r===void 0?"'undefined' value invalid. Use null instead.":typeof r=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof r+" instead.")},Pa.prototype.concat=function(r,i,s){var f=typeof r=="number"?this.path.concat(r):this.path,m=s?this.scope.concat(s):this.scope;return new Pa(this.registry,f,i||null,m,this.errors)},Pa.prototype.error=function(r){for(var i=[],s=arguments.length-1;s-- >0;)i[s]=arguments[s+1];var f=""+this.key+i.map(function(m){return"["+m+"]"}).join("");this.errors.push(new Je(f,r))},Pa.prototype.checkSubtype=function(r,i){var s=Or(r,i);return s&&this.error(s),s};var ji=function(r,i,s){this.type=r,this.input=i,this.labels=[],this.outputs=[];for(var f=0,m=s;f<m.length;f+=1){var y=m[f],_=y[1];this.labels.push(y[0]),this.outputs.push(_)}};function Rn(r,i,s){return r*(1-s)+i*s}ji.parse=function(r,i){if(r.length-1<4)return i.error("Expected at least 4 arguments, but found only "+(r.length-1)+".");if((r.length-1)%2!=0)return i.error("Expected an even number of arguments.");var s=i.parse(r[1],1,Ve);if(!s)return null;var f=[],m=null;i.expectedType&&i.expectedType.kind!=="value"&&(m=i.expectedType);for(var y=1;y<r.length;y+=2){var _=y===1?-1/0:r[y],S=r[y+1],k=y,A=y+1;if(typeof _!="number")return i.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',k);if(f.length&&f[f.length-1][0]>=_)return i.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',k);var R=i.parse(S,A,m);if(!R)return null;m=m||R.type,f.push([_,R])}return new ji(m,s,f)},ji.prototype.evaluate=function(r){var i=this.labels,s=this.outputs;if(i.length===1)return s[0].evaluate(r);var f=this.input.evaluate(r);if(f<=i[0])return s[0].evaluate(r);var m=i.length;return f>=i[m-1]?s[m-1].evaluate(r):s[Hu(i,f)].evaluate(r)},ji.prototype.eachChild=function(r){r(this.input);for(var i=0,s=this.outputs;i<s.length;i+=1)r(s[i])},ji.prototype.outputDefined=function(){return this.outputs.every(function(r){return r.outputDefined()})},ji.prototype.serialize=function(){for(var r=["step",this.input.serialize()],i=0;i<this.labels.length;i++)i>0&&r.push(this.labels[i]),r.push(this.outputs[i].serialize());return r};var Xs=Object.freeze({__proto__:null,number:Rn,color:function(r,i,s){return new Ar(Rn(r.r,i.r,s),Rn(r.g,i.g,s),Rn(r.b,i.b,s),Rn(r.a,i.a,s))},array:function(r,i,s){return r.map(function(f,m){return Rn(f,i[m],s)})}}),Td=6/29*3*(6/29),Ov=Math.PI/180,Bv=180/Math.PI;function Jp(r){return r>.008856451679035631?Math.pow(r,1/3):r/Td+4/29}function Qp(r){return r>6/29?r*r*r:Td*(r-4/29)}function ef(r){return 255*(r<=.0031308?12.92*r:1.055*Math.pow(r,1/2.4)-.055)}function tf(r){return(r/=255)<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4)}function Id(r){var i=tf(r.r),s=tf(r.g),f=tf(r.b),m=Jp((.4124564*i+.3575761*s+.1804375*f)/.95047),y=Jp((.2126729*i+.7151522*s+.072175*f)/1);return{l:116*y-16,a:500*(m-y),b:200*(y-Jp((.0193339*i+.119192*s+.9503041*f)/1.08883)),alpha:r.a}}function Pd(r){var i=(r.l+16)/116,s=isNaN(r.a)?i:i+r.a/500,f=isNaN(r.b)?i:i-r.b/200;return i=1*Qp(i),s=.95047*Qp(s),f=1.08883*Qp(f),new Ar(ef(3.2404542*s-1.5371385*i-.4985314*f),ef(-.969266*s+1.8760108*i+.041556*f),ef(.0556434*s-.2040259*i+1.0572252*f),r.alpha)}function Nv(r,i,s){var f=i-r;return r+s*(f>180||f<-180?f-360*Math.round(f/360):f)}var Wl={forward:Id,reverse:Pd,interpolate:function(r,i,s){return{l:Rn(r.l,i.l,s),a:Rn(r.a,i.a,s),b:Rn(r.b,i.b,s),alpha:Rn(r.alpha,i.alpha,s)}}},Gl={forward:function(r){var i=Id(r),s=i.l,f=i.a,m=i.b,y=Math.atan2(m,f)*Bv;return{h:y<0?y+360:y,c:Math.sqrt(f*f+m*m),l:s,alpha:r.a}},reverse:function(r){var i=r.h*Ov,s=r.c;return Pd({l:r.l,a:Math.cos(i)*s,b:Math.sin(i)*s,alpha:r.alpha})},interpolate:function(r,i,s){return{h:Nv(r.h,i.h,s),c:Rn(r.c,i.c,s),l:Rn(r.l,i.l,s),alpha:Rn(r.alpha,i.alpha,s)}}},Ad=Object.freeze({__proto__:null,lab:Wl,hcl:Gl}),li=function(r,i,s,f,m){this.type=r,this.operator=i,this.interpolation=s,this.input=f,this.labels=[],this.outputs=[];for(var y=0,_=m;y<_.length;y+=1){var S=_[y],k=S[1];this.labels.push(S[0]),this.outputs.push(k)}};function rf(r,i,s,f){var m=f-s,y=r-s;return m===0?0:i===1?y/m:(Math.pow(i,y)-1)/(Math.pow(i,m)-1)}li.interpolationFactor=function(r,i,s,f){var m=0;if(r.name==="exponential")m=rf(i,r.base,s,f);else if(r.name==="linear")m=rf(i,1,s,f);else if(r.name==="cubic-bezier"){var y=r.controlPoints;m=new x(y[0],y[1],y[2],y[3]).solve(rf(i,1,s,f))}return m},li.parse=function(r,i){var s=r[0],f=r[1],m=r[2],y=r.slice(3);if(!Array.isArray(f)||f.length===0)return i.error("Expected an interpolation type expression.",1);if(f[0]==="linear")f={name:"linear"};else if(f[0]==="exponential"){var _=f[1];if(typeof _!="number")return i.error("Exponential interpolation requires a numeric base.",1,1);f={name:"exponential",base:_}}else{if(f[0]!=="cubic-bezier")return i.error("Unknown interpolation type "+String(f[0]),1,0);var S=f.slice(1);if(S.length!==4||S.some(function(_e){return typeof _e!="number"||_e<0||_e>1}))return i.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);f={name:"cubic-bezier",controlPoints:S}}if(r.length-1<4)return i.error("Expected at least 4 arguments, but found only "+(r.length-1)+".");if((r.length-1)%2!=0)return i.error("Expected an even number of arguments.");if(!(m=i.parse(m,2,Ve)))return null;var k=[],A=null;s==="interpolate-hcl"||s==="interpolate-lab"?A=at:i.expectedType&&i.expectedType.kind!=="value"&&(A=i.expectedType);for(var R=0;R<y.length;R+=2){var O=y[R],j=y[R+1],H=R+3,ae=R+4;if(typeof O!="number")return i.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',H);if(k.length&&k[k.length-1][0]>=O)return i.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',H);var se=i.parse(j,ae,A);if(!se)return null;A=A||se.type,k.push([O,se])}return A.kind==="number"||A.kind==="color"||A.kind==="array"&&A.itemType.kind==="number"&&typeof A.N=="number"?new li(A,s,f,m,k):i.error("Type "+_r(A)+" is not interpolatable.")},li.prototype.evaluate=function(r){var i=this.labels,s=this.outputs;if(i.length===1)return s[0].evaluate(r);var f=this.input.evaluate(r);if(f<=i[0])return s[0].evaluate(r);var m=i.length;if(f>=i[m-1])return s[m-1].evaluate(r);var y=Hu(i,f),_=li.interpolationFactor(this.interpolation,f,i[y],i[y+1]),S=s[y].evaluate(r),k=s[y+1].evaluate(r);return this.operator==="interpolate"?Xs[this.type.kind.toLowerCase()](S,k,_):this.operator==="interpolate-hcl"?Gl.reverse(Gl.interpolate(Gl.forward(S),Gl.forward(k),_)):Wl.reverse(Wl.interpolate(Wl.forward(S),Wl.forward(k),_))},li.prototype.eachChild=function(r){r(this.input);for(var i=0,s=this.outputs;i<s.length;i+=1)r(s[i])},li.prototype.outputDefined=function(){return this.outputs.every(function(r){return r.outputDefined()})},li.prototype.serialize=function(){var r;r=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var i=[this.operator,r,this.input.serialize()],s=0;s<this.labels.length;s++)i.push(this.labels[s],this.outputs[s].serialize());return i};var Aa=function(r,i){this.type=r,this.args=i};Aa.parse=function(r,i){if(r.length<2)return i.error("Expectected at least one argument.");var s=null,f=i.expectedType;f&&f.kind!=="value"&&(s=f);for(var m=[],y=0,_=r.slice(1);y<_.length;y+=1){var S=i.parse(_[y],1+m.length,s,void 0,{typeAnnotation:"omit"});if(!S)return null;s=s||S.type,m.push(S)}var k=f&&m.some(function(A){return Or(f,A.type)});return new Aa(k?pt:s,m)},Aa.prototype.evaluate=function(r){for(var i,s=null,f=0,m=0,y=this.args;m<y.length&&(f++,(s=y[m].evaluate(r))&&s instanceof Ai&&!s.available&&(i||(i=s.name),s=null,f===this.args.length&&(s=i)),s===null);m+=1);return s},Aa.prototype.eachChild=function(r){this.args.forEach(r)},Aa.prototype.outputDefined=function(){return this.args.every(function(r){return r.outputDefined()})},Aa.prototype.serialize=function(){var r=["coalesce"];return this.eachChild(function(i){r.push(i.serialize())}),r};var Ma=function(r,i){this.type=i.type,this.bindings=[].concat(r),this.result=i};Ma.prototype.evaluate=function(r){return this.result.evaluate(r)},Ma.prototype.eachChild=function(r){for(var i=0,s=this.bindings;i<s.length;i+=1)r(s[i][1]);r(this.result)},Ma.parse=function(r,i){if(r.length<4)return i.error("Expected at least 3 arguments, but found "+(r.length-1)+" instead.");for(var s=[],f=1;f<r.length-1;f+=2){var m=r[f];if(typeof m!="string")return i.error("Expected string, but found "+typeof m+" instead.",f);if(/[^a-zA-Z0-9_]/.test(m))return i.error("Variable names must contain only alphanumeric characters or '_'.",f);var y=i.parse(r[f+1],f+1);if(!y)return null;s.push([m,y])}var _=i.parse(r[r.length-1],r.length-1,i.expectedType,s);return _?new Ma(s,_):null},Ma.prototype.outputDefined=function(){return this.result.outputDefined()},Ma.prototype.serialize=function(){for(var r=["let"],i=0,s=this.bindings;i<s.length;i+=1){var f=s[i];r.push(f[0],f[1].serialize())}return r.push(this.result.serialize()),r};var ps=function(r,i,s){this.type=r,this.index=i,this.input=s};ps.parse=function(r,i){if(r.length!==3)return i.error("Expected 2 arguments, but found "+(r.length-1)+" instead.");var s=i.parse(r[1],1,Ve),f=i.parse(r[2],2,Pr(i.expectedType||pt));return s&&f?new ps(f.type.itemType,s,f):null},ps.prototype.evaluate=function(r){var i=this.index.evaluate(r),s=this.input.evaluate(r);if(i<0)throw new Jn("Array index out of bounds: "+i+" < 0.");if(i>=s.length)throw new Jn("Array index out of bounds: "+i+" > "+(s.length-1)+".");if(i!==Math.floor(i))throw new Jn("Array index must be an integer, but found "+i+" instead.");return s[i]},ps.prototype.eachChild=function(r){r(this.index),r(this.input)},ps.prototype.outputDefined=function(){return!1},ps.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var fs=function(r,i){this.type=it,this.needle=r,this.haystack=i};fs.parse=function(r,i){if(r.length!==3)return i.error("Expected 2 arguments, but found "+(r.length-1)+" instead.");var s=i.parse(r[1],1,pt),f=i.parse(r[2],2,pt);return s&&f?En(s.type,[it,ht,Ve,gt,pt])?new fs(s,f):i.error("Expected first argument to be of type boolean, string, number or null, but found "+_r(s.type)+" instead"):null},fs.prototype.evaluate=function(r){var i=this.needle.evaluate(r),s=this.haystack.evaluate(r);if(!s)return!1;if(!Wr(i,["boolean","string","number","null"]))throw new Jn("Expected first argument to be of type boolean, string, number or null, but found "+_r(Cn(i))+" instead.");if(!Wr(s,["string","array"]))throw new Jn("Expected second argument to be of type array or string, but found "+_r(Cn(s))+" instead.");return s.indexOf(i)>=0},fs.prototype.eachChild=function(r){r(this.needle),r(this.haystack)},fs.prototype.outputDefined=function(){return!0},fs.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Ra=function(r,i,s){this.type=Ve,this.needle=r,this.haystack=i,this.fromIndex=s};Ra.parse=function(r,i){if(r.length<=2||r.length>=5)return i.error("Expected 3 or 4 arguments, but found "+(r.length-1)+" instead.");var s=i.parse(r[1],1,pt),f=i.parse(r[2],2,pt);if(!s||!f)return null;if(!En(s.type,[it,ht,Ve,gt,pt]))return i.error("Expected first argument to be of type boolean, string, number or null, but found "+_r(s.type)+" instead");if(r.length===4){var m=i.parse(r[3],3,Ve);return m?new Ra(s,f,m):null}return new Ra(s,f)},Ra.prototype.evaluate=function(r){var i=this.needle.evaluate(r),s=this.haystack.evaluate(r);if(!Wr(i,["boolean","string","number","null"]))throw new Jn("Expected first argument to be of type boolean, string, number or null, but found "+_r(Cn(i))+" instead.");if(!Wr(s,["string","array"]))throw new Jn("Expected second argument to be of type array or string, but found "+_r(Cn(s))+" instead.");if(this.fromIndex){var f=this.fromIndex.evaluate(r);return s.indexOf(i,f)}return s.indexOf(i)},Ra.prototype.eachChild=function(r){r(this.needle),r(this.haystack),this.fromIndex&&r(this.fromIndex)},Ra.prototype.outputDefined=function(){return!1},Ra.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var r=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),r]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var hs=function(r,i,s,f,m,y){this.inputType=r,this.type=i,this.input=s,this.cases=f,this.outputs=m,this.otherwise=y};hs.parse=function(r,i){if(r.length<5)return i.error("Expected at least 4 arguments, but found only "+(r.length-1)+".");if(r.length%2!=1)return i.error("Expected an even number of arguments.");var s,f;i.expectedType&&i.expectedType.kind!=="value"&&(f=i.expectedType);for(var m={},y=[],_=2;_<r.length-1;_+=2){var S=r[_],k=r[_+1];Array.isArray(S)||(S=[S]);var A=i.concat(_);if(S.length===0)return A.error("Expected at least one branch label.");for(var R=0,O=S;R<O.length;R+=1){var j=O[R];if(typeof j!="number"&&typeof j!="string")return A.error("Branch labels must be numbers or strings.");if(typeof j=="number"&&Math.abs(j)>Number.MAX_SAFE_INTEGER)return A.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof j=="number"&&Math.floor(j)!==j)return A.error("Numeric branch labels must be integer values.");if(s){if(A.checkSubtype(s,Cn(j)))return null}else s=Cn(j);if(m[String(j)]!==void 0)return A.error("Branch labels must be unique.");m[String(j)]=y.length}var H=i.parse(k,_,f);if(!H)return null;f=f||H.type,y.push(H)}var ae=i.parse(r[1],1,pt);if(!ae)return null;var se=i.parse(r[r.length-1],r.length-1,f);return se?ae.type.kind!=="value"&&i.concat(1).checkSubtype(s,ae.type)?null:new hs(s,f,ae,m,y,se):null},hs.prototype.evaluate=function(r){var i=this.input.evaluate(r);return(Cn(i)===this.inputType&&this.outputs[this.cases[i]]||this.otherwise).evaluate(r)},hs.prototype.eachChild=function(r){r(this.input),this.outputs.forEach(r),r(this.otherwise)},hs.prototype.outputDefined=function(){return this.outputs.every(function(r){return r.outputDefined()})&&this.otherwise.outputDefined()},hs.prototype.serialize=function(){for(var r=this,i=["match",this.input.serialize()],s=[],f={},m=0,y=Object.keys(this.cases).sort();m<y.length;m+=1){var _=y[m];(O=f[this.cases[_]])===void 0?(f[this.cases[_]]=s.length,s.push([this.cases[_],[_]])):s[O][1].push(_)}for(var S=function(H){return r.inputType.kind==="number"?Number(H):H},k=0,A=s;k<A.length;k+=1){var R=A[k],O=R[0],j=R[1];i.push(j.length===1?S(j[0]):j.map(S)),i.push(this.outputs[outputIndex$1].serialize())}return i.push(this.otherwise.serialize()),i};var ds=function(r,i,s){this.type=r,this.branches=i,this.otherwise=s};ds.parse=function(r,i){if(r.length<4)return i.error("Expected at least 3 arguments, but found only "+(r.length-1)+".");if(r.length%2!=0)return i.error("Expected an odd number of arguments.");var s;i.expectedType&&i.expectedType.kind!=="value"&&(s=i.expectedType);for(var f=[],m=1;m<r.length-1;m+=2){var y=i.parse(r[m],m,it);if(!y)return null;var _=i.parse(r[m+1],m+1,s);if(!_)return null;f.push([y,_]),s=s||_.type}var S=i.parse(r[r.length-1],r.length-1,s);return S?new ds(s,f,S):null},ds.prototype.evaluate=function(r){for(var i=0,s=this.branches;i<s.length;i+=1){var f=s[i],m=f[1];if(f[0].evaluate(r))return m.evaluate(r)}return this.otherwise.evaluate(r)},ds.prototype.eachChild=function(r){for(var i=0,s=this.branches;i<s.length;i+=1){var f=s[i],m=f[1];r(f[0]),r(m)}r(this.otherwise)},ds.prototype.outputDefined=function(){return this.branches.every(function(r){return r[1].outputDefined()})&&this.otherwise.outputDefined()},ds.prototype.serialize=function(){var r=["case"];return this.eachChild(function(i){r.push(i.serialize())}),r};var La=function(r,i,s,f){this.type=r,this.input=i,this.beginIndex=s,this.endIndex=f};function Md(r,i){return r==="=="||r==="!="?i.kind==="boolean"||i.kind==="string"||i.kind==="number"||i.kind==="null"||i.kind==="value":i.kind==="string"||i.kind==="number"||i.kind==="value"}function Rd(r,i,s,f){return f.compare(i,s)===0}function Zr(r,i,s){var f=r!=="=="&&r!=="!=";return function(){function m(y,_,S){this.type=it,this.lhs=y,this.rhs=_,this.collator=S,this.hasUntypedArgument=y.type.kind==="value"||_.type.kind==="value"}return m.parse=function(y,_){if(y.length!==3&&y.length!==4)return _.error("Expected two or three arguments.");var S=y[0],k=_.parse(y[1],1,pt);if(!k)return null;if(!Md(S,k.type))return _.concat(1).error('"'+S+`" comparisons are not supported for type '`+_r(k.type)+"'.");var A=_.parse(y[2],2,pt);if(!A)return null;if(!Md(S,A.type))return _.concat(2).error('"'+S+`" comparisons are not supported for type '`+_r(A.type)+"'.");if(k.type.kind!==A.type.kind&&k.type.kind!=="value"&&A.type.kind!=="value")return _.error("Cannot compare types '"+_r(k.type)+"' and '"+_r(A.type)+"'.");f&&(k.type.kind==="value"&&A.type.kind!=="value"?k=new sn(A.type,[k]):k.type.kind!=="value"&&A.type.kind==="value"&&(A=new sn(k.type,[A])));var R=null;if(y.length===4){if(k.type.kind!=="string"&&A.type.kind!=="string"&&k.type.kind!=="value"&&A.type.kind!=="value")return _.error("Cannot use collator to compare non-string types.");if(!(R=_.parse(y[3],3,yr)))return null}return new m(k,A,R)},m.prototype.evaluate=function(y){var _=this.lhs.evaluate(y),S=this.rhs.evaluate(y);if(f&&this.hasUntypedArgument){var k=Cn(_),A=Cn(S);if(k.kind!==A.kind||k.kind!=="string"&&k.kind!=="number")throw new Jn('Expected arguments for "'+r+'" to be (string, string) or (number, number), but found ('+k.kind+", "+A.kind+") instead.")}if(this.collator&&!f&&this.hasUntypedArgument){var R=Cn(_),O=Cn(S);if(R.kind!=="string"||O.kind!=="string")return i(y,_,S)}return this.collator?s(y,_,S,this.collator.evaluate(y)):i(y,_,S)},m.prototype.eachChild=function(y){y(this.lhs),y(this.rhs),this.collator&&y(this.collator)},m.prototype.outputDefined=function(){return!0},m.prototype.serialize=function(){var y=[r];return this.eachChild(function(_){y.push(_.serialize())}),y},m}()}La.parse=function(r,i){if(r.length<=2||r.length>=5)return i.error("Expected 3 or 4 arguments, but found "+(r.length-1)+" instead.");var s=i.parse(r[1],1,pt),f=i.parse(r[2],2,Ve);if(!s||!f)return null;if(!En(s.type,[Pr(pt),ht,pt]))return i.error("Expected first argument to be of type array or string, but found "+_r(s.type)+" instead");if(r.length===4){var m=i.parse(r[3],3,Ve);return m?new La(s.type,s,f,m):null}return new La(s.type,s,f)},La.prototype.evaluate=function(r){var i=this.input.evaluate(r),s=this.beginIndex.evaluate(r);if(!Wr(i,["string","array"]))throw new Jn("Expected first argument to be of type array or string, but found "+_r(Cn(i))+" instead.");if(this.endIndex){var f=this.endIndex.evaluate(r);return i.slice(s,f)}return i.slice(s)},La.prototype.eachChild=function(r){r(this.input),r(this.beginIndex),this.endIndex&&r(this.endIndex)},La.prototype.outputDefined=function(){return!1},La.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var r=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),r]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Fv=Zr("==",function(r,i,s){return i===s},Rd),Zu=Zr("!=",function(r,i,s){return i!==s},function(r,i,s,f){return!Rd(0,i,s,f)}),Ld=Zr("<",function(r,i,s){return i<s},function(r,i,s,f){return f.compare(i,s)<0}),zd=Zr(">",function(r,i,s){return i>s},function(r,i,s,f){return f.compare(i,s)>0}),Dd=Zr("<=",function(r,i,s){return i<=s},function(r,i,s,f){return f.compare(i,s)<=0}),Od=Zr(">=",function(r,i,s){return i>=s},function(r,i,s,f){return f.compare(i,s)>=0}),ms=function(r,i,s,f,m){this.type=ht,this.number=r,this.locale=i,this.currency=s,this.minFractionDigits=f,this.maxFractionDigits=m};ms.parse=function(r,i){if(r.length!==3)return i.error("Expected two arguments.");var s=i.parse(r[1],1,Ve);if(!s)return null;var f=r[2];if(typeof f!="object"||Array.isArray(f))return i.error("NumberFormat options argument must be an object.");var m=null;if(f.locale&&!(m=i.parse(f.locale,1,ht)))return null;var y=null;if(f.currency&&!(y=i.parse(f.currency,1,ht)))return null;var _=null;if(f["min-fraction-digits"]&&!(_=i.parse(f["min-fraction-digits"],1,Ve)))return null;var S=null;return f["max-fraction-digits"]&&!(S=i.parse(f["max-fraction-digits"],1,Ve))?null:new ms(s,m,y,_,S)},ms.prototype.evaluate=function(r){return new Intl.NumberFormat(this.locale?this.locale.evaluate(r):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(r):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(r):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(r):void 0}).format(this.number.evaluate(r))},ms.prototype.eachChild=function(r){r(this.number),this.locale&&r(this.locale),this.currency&&r(this.currency),this.minFractionDigits&&r(this.minFractionDigits),this.maxFractionDigits&&r(this.maxFractionDigits)},ms.prototype.outputDefined=function(){return!1},ms.prototype.serialize=function(){var r={};return this.locale&&(r.locale=this.locale.serialize()),this.currency&&(r.currency=this.currency.serialize()),this.minFractionDigits&&(r["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(r["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),r]};var za=function(r){this.type=Ve,this.input=r};za.parse=function(r,i){if(r.length!==2)return i.error("Expected 1 argument, but found "+(r.length-1)+" instead.");var s=i.parse(r[1],1);return s?s.type.kind!=="array"&&s.type.kind!=="string"&&s.type.kind!=="value"?i.error("Expected argument of type string or array, but found "+_r(s.type)+" instead."):new za(s):null},za.prototype.evaluate=function(r){var i=this.input.evaluate(r);if(typeof i=="string"||Array.isArray(i))return i.length;throw new Jn("Expected value to be of type string or array, but found "+_r(Cn(i))+" instead.")},za.prototype.eachChild=function(r){r(this.input)},za.prototype.outputDefined=function(){return!1},za.prototype.serialize=function(){var r=["length"];return this.eachChild(function(i){r.push(i.serialize())}),r};var ys={"==":Fv,"!=":Zu,">":zd,"<":Ld,">=":Od,"<=":Dd,array:sn,at:ps,boolean:sn,case:ds,coalesce:Aa,collator:Ho,format:Mo,image:ro,in:fs,"index-of":Ra,interpolate:li,"interpolate-hcl":li,"interpolate-lab":li,length:za,let:Ma,literal:vi,match:hs,number:sn,"number-format":ms,object:sn,slice:La,step:ji,string:sn,"to-boolean":po,"to-color":po,"to-number":po,"to-string":po,var:Ia,within:fo};function Bd(r,i){var s=i[0],f=i[1],m=i[2],y=i[3];s=s.evaluate(r),f=f.evaluate(r),m=m.evaluate(r);var _=y?y.evaluate(r):1,S=Kp(s,f,m,_);if(S)throw new Jn(S);return new Ar(s/255*_,f/255*_,m/255*_,_)}function Nd(r,i){return r in i}function nf(r,i){var s=i[r];return s===void 0?null:s}function gs(r){return{type:r}}function Fd(r){return{result:"success",value:r}}function vs(r){return{result:"error",value:r}}function _s(r){return r["property-type"]==="data-driven"||r["property-type"]==="cross-faded-data-driven"}function Ud(r){return!!r.expression&&r.expression.parameters.indexOf("zoom")>-1}function Hl(r){return!!r.expression&&r.expression.interpolated}function Jr(r){return r instanceof Number?"number":r instanceof String?"string":r instanceof Boolean?"boolean":Array.isArray(r)?"array":r===null?"null":typeof r}function Ku(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)}function Uv(r){return r}function Ys(r,i,s){return r!==void 0?r:i!==void 0?i:s!==void 0?s:void 0}function $d(r,i,s,f,m){return Ys(typeof s===m?f[s]:void 0,r.default,i.default)}function $v(r,i,s){if(Jr(s)!=="number")return Ys(r.default,i.default);var f=r.stops.length;if(f===1||s<=r.stops[0][0])return r.stops[0][1];if(s>=r.stops[f-1][0])return r.stops[f-1][1];var m=Hu(r.stops.map(function(y){return y[0]}),s);return r.stops[m][1]}function jd(r,i,s){var f=r.base!==void 0?r.base:1;if(Jr(s)!=="number")return Ys(r.default,i.default);var m=r.stops.length;if(m===1||s<=r.stops[0][0])return r.stops[0][1];if(s>=r.stops[m-1][0])return r.stops[m-1][1];var y=Hu(r.stops.map(function(O){return O[0]}),s),_=function(O,j,H,ae){var se=ae-H,_e=O-H;return se===0?0:j===1?_e/se:(Math.pow(j,_e)-1)/(Math.pow(j,se)-1)}(s,f,r.stops[y][0],r.stops[y+1][0]),S=r.stops[y][1],k=r.stops[y+1][1],A=Xs[i.type]||Uv;if(r.colorSpace&&r.colorSpace!=="rgb"){var R=Ad[r.colorSpace];A=function(O,j){return R.reverse(R.interpolate(R.forward(O),R.forward(j),_))}}return typeof S.evaluate=="function"?{evaluate:function(){for(var O=[],j=arguments.length;j--;)O[j]=arguments[j];var H=S.evaluate.apply(void 0,O),ae=k.evaluate.apply(void 0,O);if(H!==void 0&&ae!==void 0)return A(H,ae,_)}}:A(S,k,_)}function Xu(r,i,s){return i.type==="color"?s=Ar.parse(s):i.type==="formatted"?s=Yn.fromString(s.toString()):i.type==="resolvedImage"?s=Ai.fromString(s.toString()):Jr(s)===i.type||i.type==="enum"&&i.values[s]||(s=void 0),Ys(s,r.default,i.default)}si.register(ys,{error:[{kind:"error"},[ht],function(r,i){throw new Jn(i[0].evaluate(r))}],typeof:[ht,[pt],function(r,i){return _r(Cn(i[0].evaluate(r)))}],"to-rgba":[Pr(Ve,4),[at],function(r,i){return i[0].evaluate(r).toArray()}],rgb:[at,[Ve,Ve,Ve],Bd],rgba:[at,[Ve,Ve,Ve,Ve],Bd],has:{type:it,overloads:[[[ht],function(r,i){return Nd(i[0].evaluate(r),r.properties())}],[[ht,ar],function(r,i){var s=i[1];return Nd(i[0].evaluate(r),s.evaluate(r))}]]},get:{type:pt,overloads:[[[ht],function(r,i){return nf(i[0].evaluate(r),r.properties())}],[[ht,ar],function(r,i){var s=i[1];return nf(i[0].evaluate(r),s.evaluate(r))}]]},"feature-state":[pt,[ht],function(r,i){return nf(i[0].evaluate(r),r.featureState||{})}],properties:[ar,[],function(r){return r.properties()}],"geometry-type":[ht,[],function(r){return r.geometryType()}],id:[pt,[],function(r){return r.id()}],zoom:[Ve,[],function(r){return r.globals.zoom}],"heatmap-density":[Ve,[],function(r){return r.globals.heatmapDensity||0}],"line-progress":[Ve,[],function(r){return r.globals.lineProgress||0}],accumulated:[pt,[],function(r){return r.globals.accumulated===void 0?null:r.globals.accumulated}],"+":[Ve,gs(Ve),function(r,i){for(var s=0,f=0,m=i;f<m.length;f+=1)s+=m[f].evaluate(r);return s}],"*":[Ve,gs(Ve),function(r,i){for(var s=1,f=0,m=i;f<m.length;f+=1)s*=m[f].evaluate(r);return s}],"-":{type:Ve,overloads:[[[Ve,Ve],function(r,i){var s=i[1];return i[0].evaluate(r)-s.evaluate(r)}],[[Ve],function(r,i){return-i[0].evaluate(r)}]]},"/":[Ve,[Ve,Ve],function(r,i){var s=i[1];return i[0].evaluate(r)/s.evaluate(r)}],"%":[Ve,[Ve,Ve],function(r,i){var s=i[1];return i[0].evaluate(r)%s.evaluate(r)}],ln2:[Ve,[],function(){return Math.LN2}],pi:[Ve,[],function(){return Math.PI}],e:[Ve,[],function(){return Math.E}],"^":[Ve,[Ve,Ve],function(r,i){var s=i[1];return Math.pow(i[0].evaluate(r),s.evaluate(r))}],sqrt:[Ve,[Ve],function(r,i){return Math.sqrt(i[0].evaluate(r))}],log10:[Ve,[Ve],function(r,i){return Math.log(i[0].evaluate(r))/Math.LN10}],ln:[Ve,[Ve],function(r,i){return Math.log(i[0].evaluate(r))}],log2:[Ve,[Ve],function(r,i){return Math.log(i[0].evaluate(r))/Math.LN2}],sin:[Ve,[Ve],function(r,i){return Math.sin(i[0].evaluate(r))}],cos:[Ve,[Ve],function(r,i){return Math.cos(i[0].evaluate(r))}],tan:[Ve,[Ve],function(r,i){return Math.tan(i[0].evaluate(r))}],asin:[Ve,[Ve],function(r,i){return Math.asin(i[0].evaluate(r))}],acos:[Ve,[Ve],function(r,i){return Math.acos(i[0].evaluate(r))}],atan:[Ve,[Ve],function(r,i){return Math.atan(i[0].evaluate(r))}],min:[Ve,gs(Ve),function(r,i){return Math.min.apply(Math,i.map(function(s){return s.evaluate(r)}))}],max:[Ve,gs(Ve),function(r,i){return Math.max.apply(Math,i.map(function(s){return s.evaluate(r)}))}],abs:[Ve,[Ve],function(r,i){return Math.abs(i[0].evaluate(r))}],round:[Ve,[Ve],function(r,i){var s=i[0].evaluate(r);return s<0?-Math.round(-s):Math.round(s)}],floor:[Ve,[Ve],function(r,i){return Math.floor(i[0].evaluate(r))}],ceil:[Ve,[Ve],function(r,i){return Math.ceil(i[0].evaluate(r))}],"filter-==":[it,[ht,pt],function(r,i){var s=i[0],f=i[1];return r.properties()[s.value]===f.value}],"filter-id-==":[it,[pt],function(r,i){var s=i[0];return r.id()===s.value}],"filter-type-==":[it,[ht],function(r,i){var s=i[0];return r.geometryType()===s.value}],"filter-<":[it,[ht,pt],function(r,i){var s=i[0],f=i[1],m=r.properties()[s.value],y=f.value;return typeof m==typeof y&&m<y}],"filter-id-<":[it,[pt],function(r,i){var s=i[0],f=r.id(),m=s.value;return typeof f==typeof m&&f<m}],"filter->":[it,[ht,pt],function(r,i){var s=i[0],f=i[1],m=r.properties()[s.value],y=f.value;return typeof m==typeof y&&m>y}],"filter-id->":[it,[pt],function(r,i){var s=i[0],f=r.id(),m=s.value;return typeof f==typeof m&&f>m}],"filter-<=":[it,[ht,pt],function(r,i){var s=i[0],f=i[1],m=r.properties()[s.value],y=f.value;return typeof m==typeof y&&m<=y}],"filter-id-<=":[it,[pt],function(r,i){var s=i[0],f=r.id(),m=s.value;return typeof f==typeof m&&f<=m}],"filter->=":[it,[ht,pt],function(r,i){var s=i[0],f=i[1],m=r.properties()[s.value],y=f.value;return typeof m==typeof y&&m>=y}],"filter-id->=":[it,[pt],function(r,i){var s=i[0],f=r.id(),m=s.value;return typeof f==typeof m&&f>=m}],"filter-has":[it,[pt],function(r,i){return i[0].value in r.properties()}],"filter-has-id":[it,[],function(r){return r.id()!==null&&r.id()!==void 0}],"filter-type-in":[it,[Pr(ht)],function(r,i){return i[0].value.indexOf(r.geometryType())>=0}],"filter-id-in":[it,[Pr(pt)],function(r,i){return i[0].value.indexOf(r.id())>=0}],"filter-in-small":[it,[ht,Pr(pt)],function(r,i){var s=i[0];return i[1].value.indexOf(r.properties()[s.value])>=0}],"filter-in-large":[it,[ht,Pr(pt)],function(r,i){var s=i[0],f=i[1];return function(m,y,_,S){for(;_<=S;){var k=_+S>>1;if(y[k]===m)return!0;y[k]>m?S=k-1:_=k+1}return!1}(r.properties()[s.value],f.value,0,f.value.length-1)}],all:{type:it,overloads:[[[it,it],function(r,i){var s=i[1];return i[0].evaluate(r)&&s.evaluate(r)}],[gs(it),function(r,i){for(var s=0,f=i;s<f.length;s+=1)if(!f[s].evaluate(r))return!1;return!0}]]},any:{type:it,overloads:[[[it,it],function(r,i){var s=i[1];return i[0].evaluate(r)||s.evaluate(r)}],[gs(it),function(r,i){for(var s=0,f=i;s<f.length;s+=1)if(f[s].evaluate(r))return!0;return!1}]]},"!":[it,[it],function(r,i){return!i[0].evaluate(r)}],"is-supported-script":[it,[ht],function(r,i){var s=r.globals&&r.globals.isSupportedScript;return!s||s(i[0].evaluate(r))}],upcase:[ht,[ht],function(r,i){return i[0].evaluate(r).toUpperCase()}],downcase:[ht,[ht],function(r,i){return i[0].evaluate(r).toLowerCase()}],concat:[ht,gs(pt),function(r,i){return i.map(function(s){return Vl(s.evaluate(r))}).join("")}],"resolved-locale":[ht,[yr],function(r,i){return i[0].evaluate(r).resolvedLocale()}]});var Js=function(r,i){this.expression=r,this._warningHistory={},this._evaluator=new ca,this._defaultValue=i?function(s){return s.type==="color"&&Ku(s.default)?new Ar(0,0,0,0):s.type==="color"?Ar.parse(s.default)||null:s.default===void 0?null:s.default}(i):null,this._enumValues=i&&i.type==="enum"?i.values:null};function Zl(r){return Array.isArray(r)&&r.length>0&&typeof r[0]=="string"&&r[0]in ys}function Yu(r,i){var s=new Pa(ys,[],i?function(m){var y={color:at,string:ht,number:Ve,enum:ht,boolean:it,formatted:Hr,resolvedImage:cr};return m.type==="array"?Pr(y[m.value]||pt,m.length):y[m.type]}(i):void 0),f=s.parse(r,void 0,void 0,void 0,i&&i.type==="string"?{typeAnnotation:"coerce"}:void 0);return f?Fd(new Js(f,i)):vs(s.errors)}Js.prototype.evaluateWithoutErrorHandling=function(r,i,s,f,m,y){return this._evaluator.globals=r,this._evaluator.feature=i,this._evaluator.featureState=s,this._evaluator.canonical=f,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=y,this.expression.evaluate(this._evaluator)},Js.prototype.evaluate=function(r,i,s,f,m,y){this._evaluator.globals=r,this._evaluator.feature=i||null,this._evaluator.featureState=s||null,this._evaluator.canonical=f,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=y||null;try{var _=this.expression.evaluate(this._evaluator);if(_==null||typeof _=="number"&&_!=_)return this._defaultValue;if(this._enumValues&&!(_ in this._enumValues))throw new Jn("Expected value to be one of "+Object.keys(this._enumValues).map(function(S){return JSON.stringify(S)}).join(", ")+", but found "+JSON.stringify(_)+" instead.");return _}catch(S){return this._warningHistory[S.message]||(this._warningHistory[S.message]=!0,typeof console<"u"&&console.warn(S.message)),this._defaultValue}};var Kl=function(r,i){this.kind=r,this._styleExpression=i,this.isStateDependent=r!=="constant"&&!Ta(i.expression)};Kl.prototype.evaluateWithoutErrorHandling=function(r,i,s,f,m,y){return this._styleExpression.evaluateWithoutErrorHandling(r,i,s,f,m,y)},Kl.prototype.evaluate=function(r,i,s,f,m,y){return this._styleExpression.evaluate(r,i,s,f,m,y)};var Qs=function(r,i,s,f){this.kind=r,this.zoomStops=s,this._styleExpression=i,this.isStateDependent=r!=="camera"&&!Ta(i.expression),this.interpolationType=f};function Vd(r,i){if((r=Yu(r,i)).result==="error")return r;var s=r.value.expression,f=ka(s);if(!f&&!_s(i))return vs([new Je("","data expressions not supported")]);var m=cs(s,["zoom"]);if(!m&&!Ud(i))return vs([new Je("","zoom expressions not supported")]);var y=function _(S){var k=null;if(S instanceof Ma)k=_(S.result);else if(S instanceof Aa)for(var A=0,R=S.args;A<R.length&&!(k=_(R[A]));A+=1);else(S instanceof ji||S instanceof li)&&S.input instanceof si&&S.input.name==="zoom"&&(k=S);return k instanceof Je||S.eachChild(function(O){var j=_(O);j instanceof Je?k=j:!k&&j?k=new Je("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):k&&j&&k!==j&&(k=new Je("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),k}(s);return y||m?y instanceof Je?vs([y]):y instanceof li&&!Hl(i)?vs([new Je("",'"interpolate" expressions cannot be used with this property')]):Fd(y?new Qs(f?"camera":"composite",r.value,y.labels,y instanceof li?y.interpolation:void 0):new Kl(f?"constant":"source",r.value)):vs([new Je("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}Qs.prototype.evaluateWithoutErrorHandling=function(r,i,s,f,m,y){return this._styleExpression.evaluateWithoutErrorHandling(r,i,s,f,m,y)},Qs.prototype.evaluate=function(r,i,s,f,m,y){return this._styleExpression.evaluate(r,i,s,f,m,y)},Qs.prototype.interpolationFactor=function(r,i,s){return this.interpolationType?li.interpolationFactor(this.interpolationType,r,i,s):0};var el=function(r,i){this._parameters=r,this._specification=i,He(this,function s(f,m){var y,_,S,k=m.type==="color",A=f.stops&&typeof f.stops[0][0]=="object",R=A||!(A||f.property!==void 0),O=f.type||(Hl(m)?"exponential":"interval");if(k&&((f=He({},f)).stops&&(f.stops=f.stops.map(function(ut){return[ut[0],Ar.parse(ut[1])]})),f.default=Ar.parse(f.default?f.default:m.default)),f.colorSpace&&f.colorSpace!=="rgb"&&!Ad[f.colorSpace])throw new Error("Unknown color space: "+f.colorSpace);if(O==="exponential")y=jd;else if(O==="interval")y=$v;else if(O==="categorical"){y=$d,_=Object.create(null);for(var j=0,H=f.stops;j<H.length;j+=1){var ae=H[j];_[ae[0]]=ae[1]}S=typeof f.stops[0][0]}else{if(O!=="identity")throw new Error('Unknown function type "'+O+'"');y=Xu}if(A){for(var se={},_e=[],fe=0;fe<f.stops.length;fe++){var Ie=f.stops[fe],Me=Ie[0].zoom;se[Me]===void 0&&(se[Me]={zoom:Me,type:f.type,property:f.property,default:f.default,stops:[]},_e.push(Me)),se[Me].stops.push([Ie[0].value,Ie[1]])}for(var ze=[],Be=0,We=_e;Be<We.length;Be+=1){var Qe=We[Be];ze.push([se[Qe].zoom,s(se[Qe],m)])}var nt={name:"linear"};return{kind:"composite",interpolationType:nt,interpolationFactor:li.interpolationFactor.bind(void 0,nt),zoomStops:ze.map(function(ut){return ut[0]}),evaluate:function(ut,It){var ft=ut.zoom;return jd({stops:ze,base:f.base},m,ft).evaluate(ft,It)}}}if(R){var Et=O==="exponential"?{name:"exponential",base:f.base!==void 0?f.base:1}:null;return{kind:"camera",interpolationType:Et,interpolationFactor:li.interpolationFactor.bind(void 0,Et),zoomStops:f.stops.map(function(ut){return ut[0]}),evaluate:function(ut){return y(f,m,ut.zoom,_,S)}}}return{kind:"source",evaluate:function(ut,It){var ft=It&&It.properties?It.properties[f.property]:void 0;return ft===void 0?Ys(f.default,m.default):y(f,m,ft,_,S)}}}(this._parameters,this._specification))};function Ro(r){var i=r.key,s=r.value,f=r.valueSpec||{},m=r.objectElementValidators||{},y=r.style,_=r.styleSpec,S=[],k=Jr(s);if(k!=="object")return[new ne(i,s,"object expected, "+k+" found")];for(var A in s){var R=A.split(".")[0],O=f[R]||f["*"],j=void 0;if(m[R])j=m[R];else if(f[R])j=gr;else if(m["*"])j=m["*"];else{if(!f["*"]){S.push(new ne(i,s[A],'unknown property "'+A+'"'));continue}j=gr}S=S.concat(j({key:(i&&i+".")+A,value:s[A],valueSpec:O,style:y,styleSpec:_,object:s,objectKey:A},s))}for(var H in f)m[H]||f[H].required&&f[H].default===void 0&&s[H]===void 0&&S.push(new ne(i,s,'missing required property "'+H+'"'));return S}function qd(r){var i=r.value,s=r.valueSpec,f=r.style,m=r.styleSpec,y=r.key,_=r.arrayElementValidator||gr;if(Jr(i)!=="array")return[new ne(y,i,"array expected, "+Jr(i)+" found")];if(s.length&&i.length!==s.length)return[new ne(y,i,"array length "+s.length+" expected, length "+i.length+" found")];if(s["min-length"]&&i.length<s["min-length"])return[new ne(y,i,"array length at least "+s["min-length"]+" expected, length "+i.length+" found")];var S={type:s.value,values:s.values};m.$version<7&&(S.function=s.function),Jr(s.value)==="object"&&(S=s.value);for(var k=[],A=0;A<i.length;A++)k=k.concat(_({array:i,arrayIndex:A,value:i[A],valueSpec:S,style:f,styleSpec:m,key:y+"["+A+"]"}));return k}function Wd(r){var i=r.key,s=r.value,f=r.valueSpec,m=Jr(s);return m==="number"&&s!=s&&(m="NaN"),m!=="number"?[new ne(i,s,"number expected, "+m+" found")]:"minimum"in f&&s<f.minimum?[new ne(i,s,s+" is less than the minimum value "+f.minimum)]:"maximum"in f&&s>f.maximum?[new ne(i,s,s+" is greater than the maximum value "+f.maximum)]:[]}function Gd(r){var i,s,f,m=r.valueSpec,y=Ye(r.value.type),_={},S=y!=="categorical"&&r.value.property===void 0,k=!S,A=Jr(r.value.stops)==="array"&&Jr(r.value.stops[0])==="array"&&Jr(r.value.stops[0][0])==="object",R=Ro({key:r.key,value:r.value,valueSpec:r.styleSpec.function,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{stops:function(H){if(y==="identity")return[new ne(H.key,H.value,'identity function may not have a "stops" property')];var ae=[],se=H.value;return ae=ae.concat(qd({key:H.key,value:se,valueSpec:H.valueSpec,style:H.style,styleSpec:H.styleSpec,arrayElementValidator:O})),Jr(se)==="array"&&se.length===0&&ae.push(new ne(H.key,se,"array must have at least one stop")),ae},default:function(H){return gr({key:H.key,value:H.value,valueSpec:m,style:H.style,styleSpec:H.styleSpec})}}});return y==="identity"&&S&&R.push(new ne(r.key,r.value,'missing required property "property"')),y==="identity"||r.value.stops||R.push(new ne(r.key,r.value,'missing required property "stops"')),y==="exponential"&&r.valueSpec.expression&&!Hl(r.valueSpec)&&R.push(new ne(r.key,r.value,"exponential functions not supported")),r.styleSpec.$version>=8&&(k&&!_s(r.valueSpec)?R.push(new ne(r.key,r.value,"property functions not supported")):S&&!Ud(r.valueSpec)&&R.push(new ne(r.key,r.value,"zoom functions not supported"))),y!=="categorical"&&!A||r.value.property!==void 0||R.push(new ne(r.key,r.value,'"property" property is required')),R;function O(H){var ae=[],se=H.value,_e=H.key;if(Jr(se)!=="array")return[new ne(_e,se,"array expected, "+Jr(se)+" found")];if(se.length!==2)return[new ne(_e,se,"array length 2 expected, length "+se.length+" found")];if(A){if(Jr(se[0])!=="object")return[new ne(_e,se,"object expected, "+Jr(se[0])+" found")];if(se[0].zoom===void 0)return[new ne(_e,se,"object stop key must have zoom")];if(se[0].value===void 0)return[new ne(_e,se,"object stop key must have value")];if(f&&f>Ye(se[0].zoom))return[new ne(_e,se[0].zoom,"stop zoom values must appear in ascending order")];Ye(se[0].zoom)!==f&&(f=Ye(se[0].zoom),s=void 0,_={}),ae=ae.concat(Ro({key:_e+"[0]",value:se[0],valueSpec:{zoom:{}},style:H.style,styleSpec:H.styleSpec,objectElementValidators:{zoom:Wd,value:j}}))}else ae=ae.concat(j({key:_e+"[0]",value:se[0],valueSpec:{},style:H.style,styleSpec:H.styleSpec},se));return Zl($e(se[1]))?ae.concat([new ne(_e+"[1]",se[1],"expressions are not allowed in function stops.")]):ae.concat(gr({key:_e+"[1]",value:se[1],valueSpec:m,style:H.style,styleSpec:H.styleSpec}))}function j(H,ae){var se=Jr(H.value),_e=Ye(H.value),fe=H.value!==null?H.value:ae;if(i){if(se!==i)return[new ne(H.key,fe,se+" stop domain type must match previous stop domain type "+i)]}else i=se;if(se!=="number"&&se!=="string"&&se!=="boolean")return[new ne(H.key,fe,"stop domain value must be a number, string, or boolean")];if(se!=="number"&&y!=="categorical"){var Ie="number expected, "+se+" found";return _s(m)&&y===void 0&&(Ie+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ne(H.key,fe,Ie)]}return y!=="categorical"||se!=="number"||isFinite(_e)&&Math.floor(_e)===_e?y!=="categorical"&&se==="number"&&s!==void 0&&_e<s?[new ne(H.key,fe,"stop domain values must appear in ascending order")]:(s=_e,y==="categorical"&&_e in _?[new ne(H.key,fe,"stop domain values must be unique")]:(_[_e]=!0,[])):[new ne(H.key,fe,"integer expected, found "+_e)]}}function xs(r){var i=(r.expressionContext==="property"?Vd:Yu)($e(r.value),r.valueSpec);if(i.result==="error")return i.value.map(function(f){return new ne(""+r.key+f.key,r.value,f.message)});var s=i.value.expression||i.value._styleExpression.expression;if(r.expressionContext==="property"&&r.propertyKey==="text-font"&&!s.outputDefined())return[new ne(r.key,r.value,'Invalid data expression for "'+r.propertyKey+'". Output values must be contained as literals within the expression.')];if(r.expressionContext==="property"&&r.propertyType==="layout"&&!Ta(s))return[new ne(r.key,r.value,'"feature-state" data expressions are not supported with layout properties.')];if(r.expressionContext==="filter"&&!Ta(s))return[new ne(r.key,r.value,'"feature-state" data expressions are not supported with filters.')];if(r.expressionContext&&r.expressionContext.indexOf("cluster")===0){if(!cs(s,["zoom","feature-state"]))return[new ne(r.key,r.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(r.expressionContext==="cluster-initial"&&!ka(s))return[new ne(r.key,r.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Xl(r){var i=r.key,s=r.value,f=r.valueSpec,m=[];return Array.isArray(f.values)?f.values.indexOf(Ye(s))===-1&&m.push(new ne(i,s,"expected one of ["+f.values.join(", ")+"], "+JSON.stringify(s)+" found")):Object.keys(f.values).indexOf(Ye(s))===-1&&m.push(new ne(i,s,"expected one of ["+Object.keys(f.values).join(", ")+"], "+JSON.stringify(s)+" found")),m}function Ju(r){if(r===!0||r===!1)return!0;if(!Array.isArray(r)||r.length===0)return!1;switch(r[0]){case"has":return r.length>=2&&r[1]!=="$id"&&r[1]!=="$type";case"in":return r.length>=3&&(typeof r[1]!="string"||Array.isArray(r[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return r.length!==3||Array.isArray(r[1])||Array.isArray(r[2]);case"any":case"all":for(var i=0,s=r.slice(1);i<s.length;i+=1){var f=s[i];if(!Ju(f)&&typeof f!="boolean")return!1}return!0;default:return!0}}el.deserialize=function(r){return new el(r._parameters,r._specification)},el.serialize=function(r){return{_parameters:r._parameters,_specification:r._specification}};var of={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Qu(r){if(r==null)return{filter:function(){return!0},needGeometry:!1};Ju(r)||(r=ec(r));var i=Yu(r,of);if(i.result==="error")throw new Error(i.value.map(function(s){return s.key+": "+s.message}).join(", "));return{filter:function(s,f,m){return i.value.evaluate(s,f,{},m)},needGeometry:function s(f){if(!Array.isArray(f))return!1;if(f[0]==="within")return!0;for(var m=1;m<f.length;m++)if(s(f[m]))return!0;return!1}(r)}}function jv(r,i){return r<i?-1:r>i?1:0}function ec(r){if(!r)return!0;var i,s=r[0];return r.length<=1?s!=="any":s==="=="?af(r[1],r[2],"=="):s==="!="?tc(af(r[1],r[2],"==")):s==="<"||s===">"||s==="<="||s===">="?af(r[1],r[2],s):s==="any"?(i=r.slice(1),["any"].concat(i.map(ec))):s==="all"?["all"].concat(r.slice(1).map(ec)):s==="none"?["all"].concat(r.slice(1).map(ec).map(tc)):s==="in"?Hd(r[1],r.slice(2)):s==="!in"?tc(Hd(r[1],r.slice(2))):s==="has"?Zd(r[1]):s==="!has"?tc(Zd(r[1])):s!=="within"||r}function af(r,i,s){switch(r){case"$type":return["filter-type-"+s,i];case"$id":return["filter-id-"+s,i];default:return["filter-"+s,r,i]}}function Hd(r,i){if(i.length===0)return!1;switch(r){case"$type":return["filter-type-in",["literal",i]];case"$id":return["filter-id-in",["literal",i]];default:return i.length>200&&!i.some(function(s){return typeof s!=typeof i[0]})?["filter-in-large",r,["literal",i.sort(jv)]]:["filter-in-small",r,["literal",i]]}}function Zd(r){switch(r){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",r]}}function tc(r){return["!",r]}function sf(r){return Ju($e(r.value))?xs(He({},r,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function i(s){var f=s.value,m=s.key;if(Jr(f)!=="array")return[new ne(m,f,"array expected, "+Jr(f)+" found")];var y,_=s.styleSpec,S=[];if(f.length<1)return[new ne(m,f,"filter array must have at least 1 element")];switch(S=S.concat(Xl({key:m+"[0]",value:f[0],valueSpec:_.filter_operator,style:s.style,styleSpec:s.styleSpec})),Ye(f[0])){case"<":case"<=":case">":case">=":f.length>=2&&Ye(f[1])==="$type"&&S.push(new ne(m,f,'"$type" cannot be use with operator "'+f[0]+'"'));case"==":case"!=":f.length!==3&&S.push(new ne(m,f,'filter array for operator "'+f[0]+'" must have 3 elements'));case"in":case"!in":f.length>=2&&(y=Jr(f[1]))!=="string"&&S.push(new ne(m+"[1]",f[1],"string expected, "+y+" found"));for(var k=2;k<f.length;k++)y=Jr(f[k]),Ye(f[1])==="$type"?S=S.concat(Xl({key:m+"["+k+"]",value:f[k],valueSpec:_.geometry_type,style:s.style,styleSpec:s.styleSpec})):y!=="string"&&y!=="number"&&y!=="boolean"&&S.push(new ne(m+"["+k+"]",f[k],"string, number, or boolean expected, "+y+" found"));break;case"any":case"all":case"none":for(var A=1;A<f.length;A++)S=S.concat(i({key:m+"["+A+"]",value:f[A],style:s.style,styleSpec:s.styleSpec}));break;case"has":case"!has":y=Jr(f[1]),f.length!==2?S.push(new ne(m,f,'filter array for "'+f[0]+'" operator must have 2 elements')):y!=="string"&&S.push(new ne(m+"[1]",f[1],"string expected, "+y+" found"));break;case"within":y=Jr(f[1]),f.length!==2?S.push(new ne(m,f,'filter array for "'+f[0]+'" operator must have 2 elements')):y!=="object"&&S.push(new ne(m+"[1]",f[1],"object expected, "+y+" found"))}return S}(r)}function lf(r,i){var s=r.key,f=r.style,m=r.styleSpec,y=r.value,_=r.objectKey,S=m[i+"_"+r.layerType];if(!S)return[];var k=_.match(/^(.*)-transition$/);if(i==="paint"&&k&&S[k[1]]&&S[k[1]].transition)return gr({key:s,value:y,valueSpec:m.transition,style:f,styleSpec:m});var A,R=r.valueSpec||S[_];if(!R)return[new ne(s,y,'unknown property "'+_+'"')];if(Jr(y)==="string"&&_s(R)&&!R.tokens&&(A=/^{([^}]+)}$/.exec(y)))return[new ne(s,y,'"'+_+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(A[1])+" }`.")];var O=[];return r.layerType==="symbol"&&(_==="text-field"&&f&&!f.glyphs&&O.push(new ne(s,y,'use of "text-field" requires a style "glyphs" property')),_==="text-font"&&Ku($e(y))&&Ye(y.type)==="identity"&&O.push(new ne(s,y,'"text-font" does not support identity functions'))),O.concat(gr({key:r.key,value:y,valueSpec:R,style:f,styleSpec:m,expressionContext:"property",propertyType:i,propertyKey:_}))}function uf(r){return lf(r,"paint")}function Yl(r){return lf(r,"layout")}function Kd(r){var i=[],s=r.value,f=r.key,m=r.style,y=r.styleSpec;s.type||s.ref||i.push(new ne(f,s,'either "type" or "ref" is required'));var _,S=Ye(s.type),k=Ye(s.ref);if(s.id)for(var A=Ye(s.id),R=0;R<r.arrayIndex;R++){var O=m.layers[R];Ye(O.id)===A&&i.push(new ne(f,s.id,'duplicate layer id "'+s.id+'", previously used at line '+O.id.__line__))}if("ref"in s)["type","source","source-layer","filter","layout"].forEach(function(ae){ae in s&&i.push(new ne(f,s[ae],'"'+ae+'" is prohibited for ref layers'))}),m.layers.forEach(function(ae){Ye(ae.id)===k&&(_=ae)}),_?_.ref?i.push(new ne(f,s.ref,"ref cannot reference another ref layer")):S=Ye(_.type):i.push(new ne(f,s.ref,'ref layer "'+k+'" not found'));else if(S!=="background")if(s.source){var j=m.sources&&m.sources[s.source],H=j&&Ye(j.type);j?H==="vector"&&S==="raster"?i.push(new ne(f,s.source,'layer "'+s.id+'" requires a raster source')):H==="raster"&&S!=="raster"?i.push(new ne(f,s.source,'layer "'+s.id+'" requires a vector source')):H!=="vector"||s["source-layer"]?H==="raster-dem"&&S!=="hillshade"?i.push(new ne(f,s.source,"raster-dem source can only be used with layer type 'hillshade'.")):S!=="line"||!s.paint||!s.paint["line-gradient"]||H==="geojson"&&j.lineMetrics||i.push(new ne(f,s,'layer "'+s.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):i.push(new ne(f,s,'layer "'+s.id+'" must specify a "source-layer"')):i.push(new ne(f,s.source,'source "'+s.source+'" not found'))}else i.push(new ne(f,s,'missing required property "source"'));return i=i.concat(Ro({key:f,value:s,valueSpec:y.layer,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return gr({key:f+".type",value:s.type,valueSpec:y.layer.type,style:r.style,styleSpec:r.styleSpec,object:s,objectKey:"type"})},filter:sf,layout:function(ae){return Ro({layer:s,key:ae.key,value:ae.value,style:ae.style,styleSpec:ae.styleSpec,objectElementValidators:{"*":function(se){return Yl(He({layerType:S},se))}}})},paint:function(ae){return Ro({layer:s,key:ae.key,value:ae.value,style:ae.style,styleSpec:ae.styleSpec,objectElementValidators:{"*":function(se){return uf(He({layerType:S},se))}}})}}}))}function bs(r){var i=r.value,s=r.key,f=Jr(i);return f!=="string"?[new ne(s,i,"string expected, "+f+" found")]:[]}var ln={promoteId:function(r){var i=r.key,s=r.value;if(Jr(s)==="string")return bs({key:i,value:s});var f=[];for(var m in s)f.push.apply(f,bs({key:i+"."+m,value:s[m]}));return f}};function rc(r){var i=r.value,s=r.key,f=r.styleSpec,m=r.style;if(!i.type)return[new ne(s,i,'"type" is required')];var y,_=Ye(i.type);switch(_){case"vector":case"raster":case"raster-dem":return Ro({key:s,value:i,valueSpec:f["source_"+_.replace("-","_")],style:r.style,styleSpec:f,objectElementValidators:ln});case"geojson":if(y=Ro({key:s,value:i,valueSpec:f.source_geojson,style:m,styleSpec:f,objectElementValidators:ln}),i.cluster)for(var S in i.clusterProperties){var k=i.clusterProperties[S],A=k[0],R=typeof A=="string"?[A,["accumulated"],["get",S]]:A;y.push.apply(y,xs({key:s+"."+S+".map",value:k[1],expressionContext:"cluster-map"})),y.push.apply(y,xs({key:s+"."+S+".reduce",value:R,expressionContext:"cluster-reduce"}))}return y;case"video":return Ro({key:s,value:i,valueSpec:f.source_video,style:m,styleSpec:f});case"image":return Ro({key:s,value:i,valueSpec:f.source_image,style:m,styleSpec:f});case"canvas":return[new ne(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Xl({key:s+".type",value:i.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:m,styleSpec:f})}}function ws(r){var i=r.value,s=r.styleSpec,f=s.light,m=r.style,y=[],_=Jr(i);if(i===void 0)return y;if(_!=="object")return y.concat([new ne("light",i,"object expected, "+_+" found")]);for(var S in i){var k=S.match(/^(.*)-transition$/);y=y.concat(k&&f[k[1]]&&f[k[1]].transition?gr({key:S,value:i[S],valueSpec:s.transition,style:m,styleSpec:s}):f[S]?gr({key:S,value:i[S],valueSpec:f[S],style:m,styleSpec:s}):[new ne(S,i[S],'unknown property "'+S+'"')])}return y}var Da={"*":function(){return[]},array:qd,boolean:function(r){var i=r.value,s=r.key,f=Jr(i);return f!=="boolean"?[new ne(s,i,"boolean expected, "+f+" found")]:[]},number:Wd,color:function(r){var i=r.key,s=r.value,f=Jr(s);return f!=="string"?[new ne(i,s,"color expected, "+f+" found")]:mr(s)===null?[new ne(i,s,'color expected, "'+s+'" found')]:[]},constants:Se,enum:Xl,filter:sf,function:Gd,layer:Kd,object:Ro,source:rc,light:ws,string:bs,formatted:function(r){return bs(r).length===0?[]:xs(r)},resolvedImage:function(r){return bs(r).length===0?[]:xs(r)}};function gr(r){var i=r.value,s=r.valueSpec,f=r.styleSpec;return s.expression&&Ku(Ye(i))?Gd(r):s.expression&&Zl($e(i))?xs(r):s.type&&Da[s.type]?Da[s.type](r):Ro(He({},r,{valueSpec:s.type?f[s.type]:s}))}function Qr(r){var i=r.value,s=r.key,f=bs(r);return f.length||(i.indexOf("{fontstack}")===-1&&f.push(new ne(s,i,'"glyphs" url must include a "{fontstack}" token')),i.indexOf("{range}")===-1&&f.push(new ne(s,i,'"glyphs" url must include a "{range}" token'))),f}function no(r,i){i===void 0&&(i=Z);var s=[];return s=s.concat(gr({key:"",value:r,valueSpec:i.$root,styleSpec:i,style:r,objectElementValidators:{glyphs:Qr,"*":function(){return[]}}})),r.constants&&(s=s.concat(Se({key:"constants",value:r.constants,style:r,styleSpec:i}))),Jl(s)}function Jl(r){return[].concat(r).sort(function(i,s){return i.line-s.line})}function tl(r){return function(){for(var i=[],s=arguments.length;s--;)i[s]=arguments[s];return Jl(r.apply(this,i))}}no.source=tl(rc),no.light=tl(ws),no.layer=tl(Kd),no.filter=tl(sf),no.paintProperty=tl(uf),no.layoutProperty=tl(Yl);var Ql=no,Vv=Ql.light,qv=Ql.paintProperty,eu=Ql.layoutProperty;function tu(r,i){var s=!1;if(i&&i.length)for(var f=0,m=i;f<m.length;f+=1)r.fire(new de(new Error(m[f].message))),s=!0;return s}var pa=Nn;function Nn(r,i,s){var f=this.cells=[];if(r instanceof ArrayBuffer){this.arrayBuffer=r;var m=new Int32Array(this.arrayBuffer);r=m[0],this.d=(i=m[1])+2*(s=m[2]);for(var y=0;y<this.d*this.d;y++){var _=m[3+y],S=m[3+y+1];f.push(_===S?null:m.subarray(_,S))}var k=m[3+f.length+1];this.keys=m.subarray(m[3+f.length],k),this.bboxes=m.subarray(k),this.insert=this._insertReadonly}else{this.d=i+2*s;for(var A=0;A<this.d*this.d;A++)f.push([]);this.keys=[],this.bboxes=[]}this.n=i,this.extent=r,this.padding=s,this.scale=i/r,this.uid=0;var R=s/i*r;this.min=-R,this.max=r+R}Nn.prototype.insert=function(r,i,s,f,m){this._forEachCell(i,s,f,m,this._insertCell,this.uid++),this.keys.push(r),this.bboxes.push(i),this.bboxes.push(s),this.bboxes.push(f),this.bboxes.push(m)},Nn.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Nn.prototype._insertCell=function(r,i,s,f,m,y){this.cells[m].push(y)},Nn.prototype.query=function(r,i,s,f,m){var y=this.min,_=this.max;if(r<=y&&i<=y&&_<=s&&_<=f&&!m)return Array.prototype.slice.call(this.keys);var S=[];return this._forEachCell(r,i,s,f,this._queryCell,S,{},m),S},Nn.prototype._queryCell=function(r,i,s,f,m,y,_,S){var k=this.cells[m];if(k!==null)for(var A=this.keys,R=this.bboxes,O=0;O<k.length;O++){var j=k[O];if(_[j]===void 0){var H=4*j;(S?S(R[H+0],R[H+1],R[H+2],R[H+3]):r<=R[H+2]&&i<=R[H+3]&&s>=R[H+0]&&f>=R[H+1])?(_[j]=!0,y.push(A[j])):_[j]=!1}}},Nn.prototype._forEachCell=function(r,i,s,f,m,y,_,S){for(var k=this._convertToCellCoord(r),A=this._convertToCellCoord(i),R=this._convertToCellCoord(s),O=this._convertToCellCoord(f),j=k;j<=R;j++)for(var H=A;H<=O;H++){var ae=this.d*H+j;if((!S||S(this._convertFromCellCoord(j),this._convertFromCellCoord(H),this._convertFromCellCoord(j+1),this._convertFromCellCoord(H+1)))&&m.call(this,r,i,s,f,ae,y,_,S))return}},Nn.prototype._convertFromCellCoord=function(r){return(r-this.padding)/this.scale},Nn.prototype._convertToCellCoord=function(r){return Math.max(0,Math.min(this.d-1,Math.floor(r*this.scale)+this.padding))},Nn.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var r=this.cells,i=3+this.cells.length+1+1,s=0,f=0;f<this.cells.length;f++)s+=this.cells[f].length;var m=new Int32Array(i+s+this.keys.length+this.bboxes.length);m[0]=this.extent,m[1]=this.n,m[2]=this.padding;for(var y=i,_=0;_<r.length;_++){var S=r[_];m[3+_]=y,m.set(S,y),y+=S.length}return m[3+r.length]=y,m.set(this.keys,y),m[3+r.length+1]=y+=this.keys.length,m.set(this.bboxes,y),y+=this.bboxes.length,m.buffer};var ru=I.ImageData,Xd=I.ImageBitmap,Ln={};function vt(r,i,s){s===void 0&&(s={}),Object.defineProperty(i,"_classRegistryKey",{value:r,writeable:!1}),Ln[r]={klass:i,omit:s.omit||[],shallow:s.shallow||[]}}for(var Vi in vt("Object",Object),pa.serialize=function(r,i){var s=r.toArrayBuffer();return i&&i.push(s),{buffer:s}},pa.deserialize=function(r){return new pa(r.buffer)},vt("Grid",pa),vt("Color",Ar),vt("Error",Error),vt("ResolvedImage",Ai),vt("StylePropertyFunction",el),vt("StyleExpression",Js,{omit:["_evaluator"]}),vt("ZoomDependentExpression",Qs),vt("ZoomConstantExpression",Kl),vt("CompoundExpression",si,{omit:["_evaluate"]}),ys)ys[Vi]._classRegistryKey||vt("Expression_"+Vi,ys[Vi]);function nc(r){return r&&typeof ArrayBuffer<"u"&&(r instanceof ArrayBuffer||r.constructor&&r.constructor.name==="ArrayBuffer")}function rl(r){return Xd&&r instanceof Xd}function Lo(r,i){if(r==null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp)return r;if(nc(r)||rl(r))return i&&i.push(r),r;if(ArrayBuffer.isView(r)){var s=r;return i&&i.push(s.buffer),s}if(r instanceof ru)return i&&i.push(r.data.buffer),r;if(Array.isArray(r)){for(var f=[],m=0,y=r;m<y.length;m+=1)f.push(Lo(y[m],i));return f}if(typeof r=="object"){var _=r.constructor,S=_._classRegistryKey;if(!S)throw new Error("can't serialize object of unregistered class");var k=_.serialize?_.serialize(r,i):{};if(!_.serialize){for(var A in r)if(r.hasOwnProperty(A)&&!(Ln[S].omit.indexOf(A)>=0)){var R=r[A];k[A]=Ln[S].shallow.indexOf(A)>=0?R:Lo(R,i)}r instanceof Error&&(k.message=r.message)}if(k.$name)throw new Error("$name property is reserved for worker serialization logic.");return S!=="Object"&&(k.$name=S),k}throw new Error("can't serialize object of type "+typeof r)}function qi(r){if(r==null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp||nc(r)||rl(r)||ArrayBuffer.isView(r)||r instanceof ru)return r;if(Array.isArray(r))return r.map(qi);if(typeof r=="object"){var i=r.$name||"Object",s=Ln[i].klass;if(!s)throw new Error("can't deserialize unregistered class "+i);if(s.deserialize)return s.deserialize(r);for(var f=Object.create(s.prototype),m=0,y=Object.keys(r);m<y.length;m+=1){var _=y[m];if(_!=="$name"){var S=r[_];f[_]=Ln[i].shallow.indexOf(_)>=0?S:qi(S)}}return f}throw new Error("can't deserialize object of type "+typeof r)}var cf=function(){this.first=!0};cf.prototype.update=function(r,i){var s=Math.floor(r);return this.first?(this.first=!1,this.lastIntegerZoom=s,this.lastIntegerZoomTime=0,this.lastZoom=r,this.lastFloorZoom=s,!0):(this.lastFloorZoom>s?(this.lastIntegerZoom=s+1,this.lastIntegerZoomTime=i):this.lastFloorZoom<s&&(this.lastIntegerZoom=s,this.lastIntegerZoomTime=i),r!==this.lastZoom&&(this.lastZoom=r,this.lastFloorZoom=s,!0))};var ot={"Latin-1 Supplement":function(r){return r>=128&&r<=255},Arabic:function(r){return r>=1536&&r<=1791},"Arabic Supplement":function(r){return r>=1872&&r<=1919},"Arabic Extended-A":function(r){return r>=2208&&r<=2303},"Hangul Jamo":function(r){return r>=4352&&r<=4607},"Unified Canadian Aboriginal Syllabics":function(r){return r>=5120&&r<=5759},Khmer:function(r){return r>=6016&&r<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(r){return r>=6320&&r<=6399},"General Punctuation":function(r){return r>=8192&&r<=8303},"Letterlike Symbols":function(r){return r>=8448&&r<=8527},"Number Forms":function(r){return r>=8528&&r<=8591},"Miscellaneous Technical":function(r){return r>=8960&&r<=9215},"Control Pictures":function(r){return r>=9216&&r<=9279},"Optical Character Recognition":function(r){return r>=9280&&r<=9311},"Enclosed Alphanumerics":function(r){return r>=9312&&r<=9471},"Geometric Shapes":function(r){return r>=9632&&r<=9727},"Miscellaneous Symbols":function(r){return r>=9728&&r<=9983},"Miscellaneous Symbols and Arrows":function(r){return r>=11008&&r<=11263},"CJK Radicals Supplement":function(r){return r>=11904&&r<=12031},"Kangxi Radicals":function(r){return r>=12032&&r<=12255},"Ideographic Description Characters":function(r){return r>=12272&&r<=12287},"CJK Symbols and Punctuation":function(r){return r>=12288&&r<=12351},Hiragana:function(r){return r>=12352&&r<=12447},Katakana:function(r){return r>=12448&&r<=12543},Bopomofo:function(r){return r>=12544&&r<=12591},"Hangul Compatibility Jamo":function(r){return r>=12592&&r<=12687},Kanbun:function(r){return r>=12688&&r<=12703},"Bopomofo Extended":function(r){return r>=12704&&r<=12735},"CJK Strokes":function(r){return r>=12736&&r<=12783},"Katakana Phonetic Extensions":function(r){return r>=12784&&r<=12799},"Enclosed CJK Letters and Months":function(r){return r>=12800&&r<=13055},"CJK Compatibility":function(r){return r>=13056&&r<=13311},"CJK Unified Ideographs Extension A":function(r){return r>=13312&&r<=19903},"Yijing Hexagram Symbols":function(r){return r>=19904&&r<=19967},"CJK Unified Ideographs":function(r){return r>=19968&&r<=40959},"Yi Syllables":function(r){return r>=40960&&r<=42127},"Yi Radicals":function(r){return r>=42128&&r<=42191},"Hangul Jamo Extended-A":function(r){return r>=43360&&r<=43391},"Hangul Syllables":function(r){return r>=44032&&r<=55215},"Hangul Jamo Extended-B":function(r){return r>=55216&&r<=55295},"Private Use Area":function(r){return r>=57344&&r<=63743},"CJK Compatibility Ideographs":function(r){return r>=63744&&r<=64255},"Arabic Presentation Forms-A":function(r){return r>=64336&&r<=65023},"Vertical Forms":function(r){return r>=65040&&r<=65055},"CJK Compatibility Forms":function(r){return r>=65072&&r<=65103},"Small Form Variants":function(r){return r>=65104&&r<=65135},"Arabic Presentation Forms-B":function(r){return r>=65136&&r<=65279},"Halfwidth and Fullwidth Forms":function(r){return r>=65280&&r<=65519}};function pf(r){for(var i=0,s=r;i<s.length;i+=1)if(ic(s[i].charCodeAt(0)))return!0;return!1}function ic(r){return!(r!==746&&r!==747&&(r<4352||!(ot["Bopomofo Extended"](r)||ot.Bopomofo(r)||ot["CJK Compatibility Forms"](r)&&!(r>=65097&&r<=65103)||ot["CJK Compatibility Ideographs"](r)||ot["CJK Compatibility"](r)||ot["CJK Radicals Supplement"](r)||ot["CJK Strokes"](r)||!(!ot["CJK Symbols and Punctuation"](r)||r>=12296&&r<=12305||r>=12308&&r<=12319||r===12336)||ot["CJK Unified Ideographs Extension A"](r)||ot["CJK Unified Ideographs"](r)||ot["Enclosed CJK Letters and Months"](r)||ot["Hangul Compatibility Jamo"](r)||ot["Hangul Jamo Extended-A"](r)||ot["Hangul Jamo Extended-B"](r)||ot["Hangul Jamo"](r)||ot["Hangul Syllables"](r)||ot.Hiragana(r)||ot["Ideographic Description Characters"](r)||ot.Kanbun(r)||ot["Kangxi Radicals"](r)||ot["Katakana Phonetic Extensions"](r)||ot.Katakana(r)&&r!==12540||!(!ot["Halfwidth and Fullwidth Forms"](r)||r===65288||r===65289||r===65293||r>=65306&&r<=65310||r===65339||r===65341||r===65343||r>=65371&&r<=65503||r===65507||r>=65512&&r<=65519)||!(!ot["Small Form Variants"](r)||r>=65112&&r<=65118||r>=65123&&r<=65126)||ot["Unified Canadian Aboriginal Syllabics"](r)||ot["Unified Canadian Aboriginal Syllabics Extended"](r)||ot["Vertical Forms"](r)||ot["Yijing Hexagram Symbols"](r)||ot["Yi Syllables"](r)||ot["Yi Radicals"](r))))}function ff(r){return!(ic(r)||function(i){return!!(ot["Latin-1 Supplement"](i)&&(i===167||i===169||i===174||i===177||i===188||i===189||i===190||i===215||i===247)||ot["General Punctuation"](i)&&(i===8214||i===8224||i===8225||i===8240||i===8241||i===8251||i===8252||i===8258||i===8263||i===8264||i===8265||i===8273)||ot["Letterlike Symbols"](i)||ot["Number Forms"](i)||ot["Miscellaneous Technical"](i)&&(i>=8960&&i<=8967||i>=8972&&i<=8991||i>=8996&&i<=9e3||i===9003||i>=9085&&i<=9114||i>=9150&&i<=9165||i===9167||i>=9169&&i<=9179||i>=9186&&i<=9215)||ot["Control Pictures"](i)&&i!==9251||ot["Optical Character Recognition"](i)||ot["Enclosed Alphanumerics"](i)||ot["Geometric Shapes"](i)||ot["Miscellaneous Symbols"](i)&&!(i>=9754&&i<=9759)||ot["Miscellaneous Symbols and Arrows"](i)&&(i>=11026&&i<=11055||i>=11088&&i<=11097||i>=11192&&i<=11243)||ot["CJK Symbols and Punctuation"](i)||ot.Katakana(i)||ot["Private Use Area"](i)||ot["CJK Compatibility Forms"](i)||ot["Small Form Variants"](i)||ot["Halfwidth and Fullwidth Forms"](i)||i===8734||i===8756||i===8757||i>=9984&&i<=10087||i>=10102&&i<=10131||i===65532||i===65533)}(r))}function ho(r){return r>=1424&&r<=2303||ot["Arabic Presentation Forms-A"](r)||ot["Arabic Presentation Forms-B"](r)}function Wi(r,i){return!(!i&&ho(r)||r>=2304&&r<=3583||r>=3840&&r<=4255||ot.Khmer(r))}function oc(r){for(var i=0,s=r;i<s.length;i+=1)if(ho(s[i].charCodeAt(0)))return!0;return!1}var ac=null,Gi="unavailable",fa=null,Yd=function(r){r&&typeof r=="string"&&r.indexOf("NetworkError")>-1&&(Gi="error"),ac&&ac(r)};function nu(){hf.fire(new te("pluginStateChange",{pluginStatus:Gi,pluginURL:fa}))}var hf=new me,df=function(){return Gi},zo=function(){if(Gi!=="deferred"||!fa)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Gi="loading",nu(),fa&&Dr({url:fa},function(r){r?Yd(r):(Gi="loaded",nu())})},io={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Gi==="loaded"||io.applyArabicShaping!=null},isLoading:function(){return Gi==="loading"},setState:function(r){Gi=r.pluginStatus,fa=r.pluginURL},isParsed:function(){return io.applyArabicShaping!=null&&io.processBidirectionalText!=null&&io.processStyledBidirectionalText!=null},getPluginURL:function(){return fa}},pr=function(r,i){this.zoom=r,i?(this.now=i.now,this.fadeDuration=i.fadeDuration,this.zoomHistory=i.zoomHistory,this.transition=i.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new cf,this.transition={})};pr.prototype.isSupportedScript=function(r){return function(i,s){for(var f=0,m=i;f<m.length;f+=1)if(!Wi(m[f].charCodeAt(0),s))return!1;return!0}(r,io.isLoaded())},pr.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},pr.prototype.getCrossfadeParameters=function(){var r=this.zoom,i=r-Math.floor(r),s=this.crossFadingFactor();return r>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:i+(1-i)*s}:{fromScale:.5,toScale:1,t:1-(1-s)*i}};var Zo=function(r,i){this.property=r,this.value=i,this.expression=function(s,f){if(Ku(s))return new el(s,f);if(Zl(s)){var m=Vd(s,f);if(m.result==="error")throw new Error(m.value.map(function(_){return _.key+": "+_.message}).join(", "));return m.value}var y=s;return typeof s=="string"&&f.type==="color"&&(y=Ar.parse(s)),{kind:"constant",evaluate:function(){return y}}}(i===void 0?r.specification.default:i,r.specification)};Zo.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},Zo.prototype.possiblyEvaluate=function(r,i,s){return this.property.possiblyEvaluate(this,r,i,s)};var mo=function(r){this.property=r,this.value=new Zo(r,void 0)};mo.prototype.transitioned=function(r,i){return new Ss(this.property,this.value,i,V({},r.transition,this.transition),r.now)},mo.prototype.untransitioned=function(){return new Ss(this.property,this.value,null,{},0)};var ui=function(r){this._properties=r,this._values=Object.create(r.defaultTransitionablePropertyValues)};ui.prototype.getValue=function(r){return we(this._values[r].value.value)},ui.prototype.setValue=function(r,i){this._values.hasOwnProperty(r)||(this._values[r]=new mo(this._values[r].property)),this._values[r].value=new Zo(this._values[r].property,i===null?void 0:we(i))},ui.prototype.getTransition=function(r){return we(this._values[r].transition)},ui.prototype.setTransition=function(r,i){this._values.hasOwnProperty(r)||(this._values[r]=new mo(this._values[r].property)),this._values[r].transition=we(i)||void 0},ui.prototype.serialize=function(){for(var r={},i=0,s=Object.keys(this._values);i<s.length;i+=1){var f=s[i],m=this.getValue(f);m!==void 0&&(r[f]=m);var y=this.getTransition(f);y!==void 0&&(r[f+"-transition"]=y)}return r},ui.prototype.transitioned=function(r,i){for(var s=new Oa(this._properties),f=0,m=Object.keys(this._values);f<m.length;f+=1){var y=m[f];s._values[y]=this._values[y].transitioned(r,i._values[y])}return s},ui.prototype.untransitioned=function(){for(var r=new Oa(this._properties),i=0,s=Object.keys(this._values);i<s.length;i+=1){var f=s[i];r._values[f]=this._values[f].untransitioned()}return r};var Ss=function(r,i,s,f,m){this.property=r,this.value=i,this.begin=m+f.delay||0,this.end=this.begin+f.duration||0,r.specification.transition&&(f.delay||f.duration)&&(this.prior=s)};Ss.prototype.possiblyEvaluate=function(r,i,s){var f=r.now||0,m=this.value.possiblyEvaluate(r,i,s),y=this.prior;if(y){if(f>this.end)return this.prior=null,m;if(this.value.isDataDriven())return this.prior=null,m;if(f<this.begin)return y.possiblyEvaluate(r,i,s);var _=(f-this.begin)/(this.end-this.begin);return this.property.interpolate(y.possiblyEvaluate(r,i,s),m,function(S){if(S<=0)return 0;if(S>=1)return 1;var k=S*S,A=k*S;return 4*(S<.5?A:3*(S-k)+A-.75)}(_))}return m};var Oa=function(r){this._properties=r,this._values=Object.create(r.defaultTransitioningPropertyValues)};Oa.prototype.possiblyEvaluate=function(r,i,s){for(var f=new iu(this._properties),m=0,y=Object.keys(this._values);m<y.length;m+=1){var _=y[m];f._values[_]=this._values[_].possiblyEvaluate(r,i,s)}return f},Oa.prototype.hasTransition=function(){for(var r=0,i=Object.keys(this._values);r<i.length;r+=1)if(this._values[i[r]].prior)return!0;return!1};var Do=function(r){this._properties=r,this._values=Object.create(r.defaultPropertyValues)};Do.prototype.getValue=function(r){return we(this._values[r].value)},Do.prototype.setValue=function(r,i){this._values[r]=new Zo(this._values[r].property,i===null?void 0:we(i))},Do.prototype.serialize=function(){for(var r={},i=0,s=Object.keys(this._values);i<s.length;i+=1){var f=s[i],m=this.getValue(f);m!==void 0&&(r[f]=m)}return r},Do.prototype.possiblyEvaluate=function(r,i,s){for(var f=new iu(this._properties),m=0,y=Object.keys(this._values);m<y.length;m+=1){var _=y[m];f._values[_]=this._values[_].possiblyEvaluate(r,i,s)}return f};var xi=function(r,i,s){this.property=r,this.value=i,this.parameters=s};xi.prototype.isConstant=function(){return this.value.kind==="constant"},xi.prototype.constantOr=function(r){return this.value.kind==="constant"?this.value.value:r},xi.prototype.evaluate=function(r,i,s,f){return this.property.evaluate(this.value,this.parameters,r,i,s,f)};var iu=function(r){this._properties=r,this._values=Object.create(r.defaultPossiblyEvaluatedValues)};iu.prototype.get=function(r){return this._values[r]};var kt=function(r){this.specification=r};kt.prototype.possiblyEvaluate=function(r,i){return r.expression.evaluate(i)},kt.prototype.interpolate=function(r,i,s){var f=Xs[this.specification.type];return f?f(r,i,s):r};var xt=function(r,i){this.specification=r,this.overrides=i};xt.prototype.possiblyEvaluate=function(r,i,s,f){return new xi(this,r.expression.kind==="constant"||r.expression.kind==="camera"?{kind:"constant",value:r.expression.evaluate(i,null,{},s,f)}:r.expression,i)},xt.prototype.interpolate=function(r,i,s){if(r.value.kind!=="constant"||i.value.kind!=="constant")return r;if(r.value.value===void 0||i.value.value===void 0)return new xi(this,{kind:"constant",value:void 0},r.parameters);var f=Xs[this.specification.type];return f?new xi(this,{kind:"constant",value:f(r.value.value,i.value.value,s)},r.parameters):r},xt.prototype.evaluate=function(r,i,s,f,m,y){return r.kind==="constant"?r.value:r.evaluate(i,s,f,m,y)};var sc=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.possiblyEvaluate=function(s,f,m,y){if(s.value===void 0)return new xi(this,{kind:"constant",value:void 0},f);if(s.expression.kind==="constant"){var _=s.expression.evaluate(f,null,{},m,y),S=s.property.specification.type==="resolvedImage"&&typeof _!="string"?_.name:_,k=this._calculate(S,S,S,f);return new xi(this,{kind:"constant",value:k},f)}if(s.expression.kind==="camera"){var A=this._calculate(s.expression.evaluate({zoom:f.zoom-1}),s.expression.evaluate({zoom:f.zoom}),s.expression.evaluate({zoom:f.zoom+1}),f);return new xi(this,{kind:"constant",value:A},f)}return new xi(this,s.expression,f)},i.prototype.evaluate=function(s,f,m,y,_,S){if(s.kind==="source"){var k=s.evaluate(f,m,y,_,S);return this._calculate(k,k,k,f)}return s.kind==="composite"?this._calculate(s.evaluate({zoom:Math.floor(f.zoom)-1},m,y),s.evaluate({zoom:Math.floor(f.zoom)},m,y),s.evaluate({zoom:Math.floor(f.zoom)+1},m,y),f):s.value},i.prototype._calculate=function(s,f,m,y){return y.zoom>y.zoomHistory.lastIntegerZoom?{from:s,to:f}:{from:m,to:f}},i.prototype.interpolate=function(s){return s},i}(xt),bi=function(r){this.specification=r};bi.prototype.possiblyEvaluate=function(r,i,s,f){if(r.value!==void 0){if(r.expression.kind==="constant"){var m=r.expression.evaluate(i,null,{},s,f);return this._calculate(m,m,m,i)}return this._calculate(r.expression.evaluate(new pr(Math.floor(i.zoom-1),i)),r.expression.evaluate(new pr(Math.floor(i.zoom),i)),r.expression.evaluate(new pr(Math.floor(i.zoom+1),i)),i)}},bi.prototype._calculate=function(r,i,s,f){return f.zoom>f.zoomHistory.lastIntegerZoom?{from:r,to:i}:{from:s,to:i}},bi.prototype.interpolate=function(r){return r};var Oo=function(r){this.specification=r};Oo.prototype.possiblyEvaluate=function(r,i,s,f){return!!r.expression.evaluate(i,null,{},s,f)},Oo.prototype.interpolate=function(){return!1};var ci=function(r){for(var i in this.properties=r,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],r){var s=r[i];s.specification.overridable&&this.overridableProperties.push(i);var f=this.defaultPropertyValues[i]=new Zo(s,void 0),m=this.defaultTransitionablePropertyValues[i]=new mo(s);this.defaultTransitioningPropertyValues[i]=m.untransitioned(),this.defaultPossiblyEvaluatedValues[i]=f.possiblyEvaluate({})}};vt("DataDrivenProperty",xt),vt("DataConstantProperty",kt),vt("CrossFadedDataDrivenProperty",sc),vt("CrossFadedProperty",bi),vt("ColorRampProperty",Oo);var Ko=function(r){function i(s,f){if(r.call(this),this.id=s.id,this.type=s.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},s.type!=="custom"&&(this.metadata=(s=s).metadata,this.minzoom=s.minzoom,this.maxzoom=s.maxzoom,s.type!=="background"&&(this.source=s.source,this.sourceLayer=s["source-layer"],this.filter=s.filter),f.layout&&(this._unevaluatedLayout=new Do(f.layout)),f.paint)){for(var m in this._transitionablePaint=new ui(f.paint),s.paint)this.setPaintProperty(m,s.paint[m],{validate:!1});for(var y in s.layout)this.setLayoutProperty(y,s.layout[y],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new iu(f.paint)}}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},i.prototype.getLayoutProperty=function(s){return s==="visibility"?this.visibility:this._unevaluatedLayout.getValue(s)},i.prototype.setLayoutProperty=function(s,f,m){m===void 0&&(m={}),f!=null&&this._validate(eu,"layers."+this.id+".layout."+s,s,f,m)||(s!=="visibility"?this._unevaluatedLayout.setValue(s,f):this.visibility=f)},i.prototype.getPaintProperty=function(s){return xe(s,"-transition")?this._transitionablePaint.getTransition(s.slice(0,-11)):this._transitionablePaint.getValue(s)},i.prototype.setPaintProperty=function(s,f,m){if(m===void 0&&(m={}),f!=null&&this._validate(qv,"layers."+this.id+".paint."+s,s,f,m))return!1;if(xe(s,"-transition"))return this._transitionablePaint.setTransition(s.slice(0,-11),f||void 0),!1;var y=this._transitionablePaint._values[s],_=y.property.specification["property-type"]==="cross-faded-data-driven",S=y.value.isDataDriven(),k=y.value;this._transitionablePaint.setValue(s,f),this._handleSpecialPaintPropertyUpdate(s);var A=this._transitionablePaint._values[s].value;return A.isDataDriven()||S||_||this._handleOverridablePaintPropertyUpdate(s,k,A)},i.prototype._handleSpecialPaintPropertyUpdate=function(s){},i.prototype._handleOverridablePaintPropertyUpdate=function(s,f,m){return!1},i.prototype.isHidden=function(s){return!!(this.minzoom&&s<this.minzoom)||!!(this.maxzoom&&s>=this.maxzoom)||this.visibility==="none"},i.prototype.updateTransitions=function(s){this._transitioningPaint=this._transitionablePaint.transitioned(s,this._transitioningPaint)},i.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},i.prototype.recalculate=function(s,f){s.getCrossfadeParameters&&(this._crossfadeParameters=s.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(s,void 0,f)),this.paint=this._transitioningPaint.possiblyEvaluate(s,void 0,f)},i.prototype.serialize=function(){var s={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(s.layout=s.layout||{},s.layout.visibility=this.visibility),ve(s,function(f,m){return!(f===void 0||m==="layout"&&!Object.keys(f).length||m==="paint"&&!Object.keys(f).length)})},i.prototype._validate=function(s,f,m,y,_){return _===void 0&&(_={}),(!_||_.validate!==!1)&&tu(this,s.call(Ql,{key:f,layerType:this.type,objectKey:m,value:y,styleSpec:Z,style:{glyphs:!0,sprite:!0}}))},i.prototype.is3D=function(){return!1},i.prototype.isTileClipped=function(){return!1},i.prototype.hasOffscreenPass=function(){return!1},i.prototype.resize=function(){},i.prototype.isStateDependent=function(){for(var s in this.paint._values){var f=this.paint.get(s);if(f instanceof xi&&_s(f.property.specification)&&(f.value.kind==="source"||f.value.kind==="composite")&&f.value.isStateDependent)return!0}return!1},i}(me),mf={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},lc=function(r,i){this._structArray=r,this._pos1=i*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Br=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Qn(r,i){i===void 0&&(i=1);var s=0,f=0;return{members:r.map(function(m){var y=mf[m.type].BYTES_PER_ELEMENT,_=s=Jd(s,Math.max(i,y)),S=m.components||1;return f=Math.max(f,y),s+=y*S,{name:m.name,type:m.type,components:S,offset:_}}),size:Jd(s,Math.max(f,i)),alignment:i}}function Jd(r,i){return Math.ceil(r/i)*i}Br.serialize=function(r,i){return r._trim(),i&&(r.isTransferred=!0,i.push(r.arrayBuffer)),{length:r.length,arrayBuffer:r.arrayBuffer}},Br.deserialize=function(r){var i=Object.create(this.prototype);return i.arrayBuffer=r.arrayBuffer,i.length=r.length,i.capacity=r.arrayBuffer.byteLength/i.bytesPerElement,i._refreshViews(),i},Br.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Br.prototype.clear=function(){this.length=0},Br.prototype.resize=function(r){this.reserve(r),this.length=r},Br.prototype.reserve=function(r){if(r>this.capacity){this.capacity=Math.max(r,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var i=this.uint8;this._refreshViews(),i&&this.uint8.set(i)}},Br.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Es=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,f){var m=this.length;return this.resize(m+1),this.emplace(m,s,f)},i.prototype.emplace=function(s,f,m){var y=2*s;return this.int16[y+0]=f,this.int16[y+1]=m,s},i}(Br);Es.prototype.bytesPerElement=4,vt("StructArrayLayout2i4",Es);var yf=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,f,m,y){var _=this.length;return this.resize(_+1),this.emplace(_,s,f,m,y)},i.prototype.emplace=function(s,f,m,y,_){var S=4*s;return this.int16[S+0]=f,this.int16[S+1]=m,this.int16[S+2]=y,this.int16[S+3]=_,s},i}(Br);yf.prototype.bytesPerElement=8,vt("StructArrayLayout4i8",yf);var ha=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,f,m,y,_,S){var k=this.length;return this.resize(k+1),this.emplace(k,s,f,m,y,_,S)},i.prototype.emplace=function(s,f,m,y,_,S,k){var A=6*s;return this.int16[A+0]=f,this.int16[A+1]=m,this.int16[A+2]=y,this.int16[A+3]=_,this.int16[A+4]=S,this.int16[A+5]=k,s},i}(Br);ha.prototype.bytesPerElement=12,vt("StructArrayLayout2i4i12",ha);var Hi=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,f,m,y,_,S){var k=this.length;return this.resize(k+1),this.emplace(k,s,f,m,y,_,S)},i.prototype.emplace=function(s,f,m,y,_,S,k){var A=4*s,R=8*s;return this.int16[A+0]=f,this.int16[A+1]=m,this.uint8[R+4]=y,this.uint8[R+5]=_,this.uint8[R+6]=S,this.uint8[R+7]=k,s},i}(Br);Hi.prototype.bytesPerElement=8,vt("StructArrayLayout2i4ub8",Hi);var nl=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,f){var m=this.length;return this.resize(m+1),this.emplace(m,s,f)},i.prototype.emplace=function(s,f,m){var y=2*s;return this.float32[y+0]=f,this.float32[y+1]=m,s},i}(Br);nl.prototype.bytesPerElement=8,vt("StructArrayLayout2f8",nl);var Xo=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,f,m,y,_,S,k,A,R,O){var j=this.length;return this.resize(j+1),this.emplace(j,s,f,m,y,_,S,k,A,R,O)},i.prototype.emplace=function(s,f,m,y,_,S,k,A,R,O,j){var H=10*s;return this.uint16[H+0]=f,this.uint16[H+1]=m,this.uint16[H+2]=y,this.uint16[H+3]=_,this.uint16[H+4]=S,this.uint16[H+5]=k,this.uint16[H+6]=A,this.uint16[H+7]=R,this.uint16[H+8]=O,this.uint16[H+9]=j,s},i}(Br);Xo.prototype.bytesPerElement=20,vt("StructArrayLayout10ui20",Xo);var uc=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,f,m,y,_,S,k,A,R,O,j,H){var ae=this.length;return this.resize(ae+1),this.emplace(ae,s,f,m,y,_,S,k,A,R,O,j,H)},i.prototype.emplace=function(s,f,m,y,_,S,k,A,R,O,j,H,ae){var se=12*s;return this.int16[se+0]=f,this.int16[se+1]=m,this.int16[se+2]=y,this.int16[se+3]=_,this.uint16[se+4]=S,this.uint16[se+5]=k,this.uint16[se+6]=A,this.uint16[se+7]=R,this.int16[se+8]=O,this.int16[se+9]=j,this.int16[se+10]=H,this.int16[se+11]=ae,s},i}(Br);uc.prototype.bytesPerElement=24,vt("StructArrayLayout4i4ui4i24",uc);var il=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,f,m){var y=this.length;return this.resize(y+1),this.emplace(y,s,f,m)},i.prototype.emplace=function(s,f,m,y){var _=3*s;return this.float32[_+0]=f,this.float32[_+1]=m,this.float32[_+2]=y,s},i}(Br);il.prototype.bytesPerElement=12,vt("StructArrayLayout3f12",il);var ou=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s){var f=this.length;return this.resize(f+1),this.emplace(f,s)},i.prototype.emplace=function(s,f){return this.uint32[1*s+0]=f,s},i}(Br);ou.prototype.bytesPerElement=4,vt("StructArrayLayout1ul4",ou);var gf=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,f,m,y,_,S,k,A,R){var O=this.length;return this.resize(O+1),this.emplace(O,s,f,m,y,_,S,k,A,R)},i.prototype.emplace=function(s,f,m,y,_,S,k,A,R,O){var j=10*s,H=5*s;return this.int16[j+0]=f,this.int16[j+1]=m,this.int16[j+2]=y,this.int16[j+3]=_,this.int16[j+4]=S,this.int16[j+5]=k,this.uint32[H+3]=A,this.uint16[j+8]=R,this.uint16[j+9]=O,s},i}(Br);gf.prototype.bytesPerElement=20,vt("StructArrayLayout6i1ul2ui20",gf);var ol=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,f,m,y,_,S){var k=this.length;return this.resize(k+1),this.emplace(k,s,f,m,y,_,S)},i.prototype.emplace=function(s,f,m,y,_,S,k){var A=6*s;return this.int16[A+0]=f,this.int16[A+1]=m,this.int16[A+2]=y,this.int16[A+3]=_,this.int16[A+4]=S,this.int16[A+5]=k,s},i}(Br);ol.prototype.bytesPerElement=12,vt("StructArrayLayout2i2i2i12",ol);var Cs=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,f,m,y,_){var S=this.length;return this.resize(S+1),this.emplace(S,s,f,m,y,_)},i.prototype.emplace=function(s,f,m,y,_,S){var k=4*s,A=8*s;return this.float32[k+0]=f,this.float32[k+1]=m,this.float32[k+2]=y,this.int16[A+6]=_,this.int16[A+7]=S,s},i}(Br);Cs.prototype.bytesPerElement=16,vt("StructArrayLayout2f1f2i16",Cs);var vf=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,f,m,y){var _=this.length;return this.resize(_+1),this.emplace(_,s,f,m,y)},i.prototype.emplace=function(s,f,m,y,_){var S=12*s,k=3*s;return this.uint8[S+0]=f,this.uint8[S+1]=m,this.float32[k+1]=y,this.float32[k+2]=_,s},i}(Br);vf.prototype.bytesPerElement=12,vt("StructArrayLayout2ub2f12",vf);var Ba=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,f,m){var y=this.length;return this.resize(y+1),this.emplace(y,s,f,m)},i.prototype.emplace=function(s,f,m,y){var _=3*s;return this.uint16[_+0]=f,this.uint16[_+1]=m,this.uint16[_+2]=y,s},i}(Br);Ba.prototype.bytesPerElement=6,vt("StructArrayLayout3ui6",Ba);var Na=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,f,m,y,_,S,k,A,R,O,j,H,ae,se,_e,fe,Ie){var Me=this.length;return this.resize(Me+1),this.emplace(Me,s,f,m,y,_,S,k,A,R,O,j,H,ae,se,_e,fe,Ie)},i.prototype.emplace=function(s,f,m,y,_,S,k,A,R,O,j,H,ae,se,_e,fe,Ie,Me){var ze=24*s,Be=12*s,We=48*s;return this.int16[ze+0]=f,this.int16[ze+1]=m,this.uint16[ze+2]=y,this.uint16[ze+3]=_,this.uint32[Be+2]=S,this.uint32[Be+3]=k,this.uint32[Be+4]=A,this.uint16[ze+10]=R,this.uint16[ze+11]=O,this.uint16[ze+12]=j,this.float32[Be+7]=H,this.float32[Be+8]=ae,this.uint8[We+36]=se,this.uint8[We+37]=_e,this.uint8[We+38]=fe,this.uint32[Be+10]=Ie,this.int16[ze+22]=Me,s},i}(Br);Na.prototype.bytesPerElement=48,vt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Na);var cc=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,f,m,y,_,S,k,A,R,O,j,H,ae,se,_e,fe,Ie,Me,ze,Be,We,Qe,nt,Et,ut,It,ft,or){var $t=this.length;return this.resize($t+1),this.emplace($t,s,f,m,y,_,S,k,A,R,O,j,H,ae,se,_e,fe,Ie,Me,ze,Be,We,Qe,nt,Et,ut,It,ft,or)},i.prototype.emplace=function(s,f,m,y,_,S,k,A,R,O,j,H,ae,se,_e,fe,Ie,Me,ze,Be,We,Qe,nt,Et,ut,It,ft,or,$t){var bt=34*s,lr=17*s;return this.int16[bt+0]=f,this.int16[bt+1]=m,this.int16[bt+2]=y,this.int16[bt+3]=_,this.int16[bt+4]=S,this.int16[bt+5]=k,this.int16[bt+6]=A,this.int16[bt+7]=R,this.uint16[bt+8]=O,this.uint16[bt+9]=j,this.uint16[bt+10]=H,this.uint16[bt+11]=ae,this.uint16[bt+12]=se,this.uint16[bt+13]=_e,this.uint16[bt+14]=fe,this.uint16[bt+15]=Ie,this.uint16[bt+16]=Me,this.uint16[bt+17]=ze,this.uint16[bt+18]=Be,this.uint16[bt+19]=We,this.uint16[bt+20]=Qe,this.uint16[bt+21]=nt,this.uint16[bt+22]=Et,this.uint32[lr+12]=ut,this.float32[lr+13]=It,this.float32[lr+14]=ft,this.float32[lr+15]=or,this.float32[lr+16]=$t,s},i}(Br);cc.prototype.bytesPerElement=68,vt("StructArrayLayout8i15ui1ul4f68",cc);var Fa=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s){var f=this.length;return this.resize(f+1),this.emplace(f,s)},i.prototype.emplace=function(s,f){return this.float32[1*s+0]=f,s},i}(Br);Fa.prototype.bytesPerElement=4,vt("StructArrayLayout1f4",Fa);var yo=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,f,m){var y=this.length;return this.resize(y+1),this.emplace(y,s,f,m)},i.prototype.emplace=function(s,f,m,y){var _=3*s;return this.int16[_+0]=f,this.int16[_+1]=m,this.int16[_+2]=y,s},i}(Br);yo.prototype.bytesPerElement=6,vt("StructArrayLayout3i6",yo);var _f=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,f,m){var y=this.length;return this.resize(y+1),this.emplace(y,s,f,m)},i.prototype.emplace=function(s,f,m,y){var _=4*s;return this.uint32[2*s+0]=f,this.uint16[_+2]=m,this.uint16[_+3]=y,s},i}(Br);_f.prototype.bytesPerElement=8,vt("StructArrayLayout1ul2ui8",_f);var au=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,f){var m=this.length;return this.resize(m+1),this.emplace(m,s,f)},i.prototype.emplace=function(s,f,m){var y=2*s;return this.uint16[y+0]=f,this.uint16[y+1]=m,s},i}(Br);au.prototype.bytesPerElement=4,vt("StructArrayLayout2ui4",au);var xf=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s){var f=this.length;return this.resize(f+1),this.emplace(f,s)},i.prototype.emplace=function(s,f){return this.uint16[1*s+0]=f,s},i}(Br);xf.prototype.bytesPerElement=2,vt("StructArrayLayout1ui2",xf);var pc=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,f,m,y){var _=this.length;return this.resize(_+1),this.emplace(_,s,f,m,y)},i.prototype.emplace=function(s,f,m,y,_){var S=4*s;return this.float32[S+0]=f,this.float32[S+1]=m,this.float32[S+2]=y,this.float32[S+3]=_,s},i}(Br);pc.prototype.bytesPerElement=16,vt("StructArrayLayout4f16",pc);var l=function(r){function i(){r.apply(this,arguments)}r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i;var s={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return s.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},s.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},s.x1.get=function(){return this._structArray.int16[this._pos2+2]},s.y1.get=function(){return this._structArray.int16[this._pos2+3]},s.x2.get=function(){return this._structArray.int16[this._pos2+4]},s.y2.get=function(){return this._structArray.int16[this._pos2+5]},s.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},s.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},s.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},s.anchorPoint.get=function(){return new T(this.anchorPointX,this.anchorPointY)},Object.defineProperties(i.prototype,s),i}(lc);l.prototype.size=20;var p=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.get=function(s){return new l(this,s)},i}(gf);vt("CollisionBoxArray",p);var u=function(r){function i(){r.apply(this,arguments)}r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i;var s={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return s.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},s.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},s.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},s.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},s.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},s.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},s.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},s.segment.get=function(){return this._structArray.uint16[this._pos2+10]},s.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},s.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},s.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},s.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},s.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},s.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},s.placedOrientation.set=function(f){this._structArray.uint8[this._pos1+37]=f},s.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},s.hidden.set=function(f){this._structArray.uint8[this._pos1+38]=f},s.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},s.crossTileID.set=function(f){this._structArray.uint32[this._pos4+10]=f},s.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(i.prototype,s),i}(lc);u.prototype.size=48;var h=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.get=function(s){return new u(this,s)},i}(Na);vt("PlacedSymbolArray",h);var g=function(r){function i(){r.apply(this,arguments)}r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i;var s={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return s.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},s.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},s.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},s.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},s.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},s.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},s.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},s.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},s.key.get=function(){return this._structArray.uint16[this._pos2+8]},s.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},s.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},s.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},s.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},s.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},s.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},s.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},s.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},s.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},s.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},s.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},s.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},s.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},s.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},s.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},s.crossTileID.set=function(f){this._structArray.uint32[this._pos4+12]=f},s.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},s.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},s.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},s.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(i.prototype,s),i}(lc);g.prototype.size=68;var b=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.get=function(s){return new g(this,s)},i}(cc);vt("SymbolInstanceArray",b);var w=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.getoffsetX=function(s){return this.float32[1*s+0]},i}(Fa);vt("GlyphOffsetArray",w);var C=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.getx=function(s){return this.int16[3*s+0]},i.prototype.gety=function(s){return this.int16[3*s+1]},i.prototype.gettileUnitDistanceFromAnchor=function(s){return this.int16[3*s+2]},i}(yo);vt("SymbolLineVertexArray",C);var M=function(r){function i(){r.apply(this,arguments)}r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i;var s={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return s.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},s.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},s.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(i.prototype,s),i}(lc);M.prototype.size=8;var N=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.get=function(s){return new M(this,s)},i}(_f);vt("FeatureIndexArray",N);var K=Qn([{name:"a_pos",components:2,type:"Int16"}],4).members,X=function(r){r===void 0&&(r=[]),this.segments=r};function J(r,i){return 256*(r=D(Math.floor(r),0,255))+D(Math.floor(i),0,255)}X.prototype.prepareSegment=function(r,i,s,f){var m=this.segments[this.segments.length-1];return r>X.MAX_VERTEX_ARRAY_LENGTH&&pe("Max vertices per segment is "+X.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+r),(!m||m.vertexLength+r>X.MAX_VERTEX_ARRAY_LENGTH||m.sortKey!==f)&&(m={vertexOffset:i.length,primitiveOffset:s.length,vertexLength:0,primitiveLength:0},f!==void 0&&(m.sortKey=f),this.segments.push(m)),m},X.prototype.get=function(){return this.segments},X.prototype.destroy=function(){for(var r=0,i=this.segments;r<i.length;r+=1){var s=i[r];for(var f in s.vaos)s.vaos[f].destroy()}},X.simpleSegment=function(r,i,s,f){return new X([{vertexOffset:r,primitiveOffset:i,vertexLength:s,primitiveLength:f,vaos:{},sortKey:0}])},X.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,vt("SegmentVector",X);var ue=Qn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),le=v(function(r){r.exports=function(i,s){var f,m,y,_,S,k,A,R;for(m=i.length-(f=3&i.length),y=s,S=3432918353,k=461845907,R=0;R<m;)A=255&i.charCodeAt(R)|(255&i.charCodeAt(++R))<<8|(255&i.charCodeAt(++R))<<16|(255&i.charCodeAt(++R))<<24,++R,y=27492+(65535&(_=5*(65535&(y=(y^=A=(65535&(A=(A=(65535&A)*S+(((A>>>16)*S&65535)<<16)&4294967295)<<15|A>>>17))*k+(((A>>>16)*k&65535)<<16)&4294967295)<<13|y>>>19))+((5*(y>>>16)&65535)<<16)&4294967295))+((58964+(_>>>16)&65535)<<16);switch(A=0,f){case 3:A^=(255&i.charCodeAt(R+2))<<16;case 2:A^=(255&i.charCodeAt(R+1))<<8;case 1:y^=A=(65535&(A=(A=(65535&(A^=255&i.charCodeAt(R)))*S+(((A>>>16)*S&65535)<<16)&4294967295)<<15|A>>>17))*k+(((A>>>16)*k&65535)<<16)&4294967295}return y^=i.length,y=2246822507*(65535&(y^=y>>>16))+((2246822507*(y>>>16)&65535)<<16)&4294967295,y=3266489909*(65535&(y^=y>>>13))+((3266489909*(y>>>16)&65535)<<16)&4294967295,(y^=y>>>16)>>>0}}),ge=v(function(r){r.exports=function(i,s){for(var f,m=i.length,y=s^m,_=0;m>=4;)f=1540483477*(65535&(f=255&i.charCodeAt(_)|(255&i.charCodeAt(++_))<<8|(255&i.charCodeAt(++_))<<16|(255&i.charCodeAt(++_))<<24))+((1540483477*(f>>>16)&65535)<<16),y=1540483477*(65535&y)+((1540483477*(y>>>16)&65535)<<16)^(f=1540483477*(65535&(f^=f>>>24))+((1540483477*(f>>>16)&65535)<<16)),m-=4,++_;switch(m){case 3:y^=(255&i.charCodeAt(_+2))<<16;case 2:y^=(255&i.charCodeAt(_+1))<<8;case 1:y=1540483477*(65535&(y^=255&i.charCodeAt(_)))+((1540483477*(y>>>16)&65535)<<16)}return y=1540483477*(65535&(y^=y>>>13))+((1540483477*(y>>>16)&65535)<<16),(y^=y>>>15)>>>0}}),oe=le,ye=ge;oe.murmur3=le,oe.murmur2=ye;var be=function(){this.ids=[],this.positions=[],this.indexed=!1};be.prototype.add=function(r,i,s,f){this.ids.push(Ne(r)),this.positions.push(i,s,f)},be.prototype.getPositions=function(r){for(var i=Ne(r),s=0,f=this.ids.length-1;s<f;){var m=s+f>>1;this.ids[m]>=i?f=m:s=m+1}for(var y=[];this.ids[s]===i;)y.push({index:this.positions[3*s],start:this.positions[3*s+1],end:this.positions[3*s+2]}),s++;return y},be.serialize=function(r,i){var s=new Float64Array(r.ids),f=new Uint32Array(r.positions);return function m(y,_,S,k){for(;S<k;){for(var A=y[S+k>>1],R=S-1,O=k+1;;){do R++;while(y[R]<A);do O--;while(y[O]>A);if(R>=O)break;De(y,R,O),De(_,3*R,3*O),De(_,3*R+1,3*O+1),De(_,3*R+2,3*O+2)}O-S<k-O?(m(y,_,S,O),S=O+1):(m(y,_,O+1,k),k=O)}}(s,f,0,s.length-1),i&&i.push(s.buffer,f.buffer),{ids:s,positions:f}},be.deserialize=function(r){var i=new be;return i.ids=r.ids,i.positions=r.positions,i.indexed=!0,i};var Ae=Math.pow(2,53)-1;function Ne(r){var i=+r;return!isNaN(i)&&i<=Ae?i:oe(String(r))}function De(r,i,s){var f=r[i];r[i]=r[s],r[s]=f}vt("FeaturePositionMap",be);var Fe=function(r,i){this.gl=r.gl,this.location=i},Ke=function(r){function i(s,f){r.call(this,s,f),this.current=0}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.set=function(s){this.current!==s&&(this.current=s,this.gl.uniform1i(this.location,s))},i}(Fe),tt=function(r){function i(s,f){r.call(this,s,f),this.current=0}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.set=function(s){this.current!==s&&(this.current=s,this.gl.uniform1f(this.location,s))},i}(Fe),et=function(r){function i(s,f){r.call(this,s,f),this.current=[0,0]}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.set=function(s){s[0]===this.current[0]&&s[1]===this.current[1]||(this.current=s,this.gl.uniform2f(this.location,s[0],s[1]))},i}(Fe),dt=function(r){function i(s,f){r.call(this,s,f),this.current=[0,0,0]}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.set=function(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]||(this.current=s,this.gl.uniform3f(this.location,s[0],s[1],s[2]))},i}(Fe),Tt=function(r){function i(s,f){r.call(this,s,f),this.current=[0,0,0,0]}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.set=function(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]&&s[3]===this.current[3]||(this.current=s,this.gl.uniform4f(this.location,s[0],s[1],s[2],s[3]))},i}(Fe),Rt=function(r){function i(s,f){r.call(this,s,f),this.current=Ar.transparent}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.set=function(s){s.r===this.current.r&&s.g===this.current.g&&s.b===this.current.b&&s.a===this.current.a||(this.current=s,this.gl.uniform4f(this.location,s.r,s.g,s.b,s.a))},i}(Fe),Mt=new Float32Array(16),br=function(r){function i(s,f){r.call(this,s,f),this.current=Mt}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.set=function(s){if(s[12]!==this.current[12]||s[0]!==this.current[0])return this.current=s,void this.gl.uniformMatrix4fv(this.location,!1,s);for(var f=1;f<16;f++)if(s[f]!==this.current[f]){this.current=s,this.gl.uniformMatrix4fv(this.location,!1,s);break}},i}(Fe);function yt(r){return[J(255*r.r,255*r.g),J(255*r.b,255*r.a)]}var Ht=function(r,i,s){this.value=r,this.uniformNames=i.map(function(f){return"u_"+f}),this.type=s};Ht.prototype.setUniform=function(r,i,s){r.set(s.constantOr(this.value))},Ht.prototype.getBinding=function(r,i,s){return this.type==="color"?new Rt(r,i):new tt(r,i)};var nr=function(r,i){this.uniformNames=i.map(function(s){return"u_"+s}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};nr.prototype.setConstantPatternPositions=function(r,i){this.pixelRatioFrom=i.pixelRatio,this.pixelRatioTo=r.pixelRatio,this.patternFrom=i.tlbr,this.patternTo=r.tlbr},nr.prototype.setUniform=function(r,i,s,f){var m=f==="u_pattern_to"?this.patternTo:f==="u_pattern_from"?this.patternFrom:f==="u_pixel_ratio_to"?this.pixelRatioTo:f==="u_pixel_ratio_from"?this.pixelRatioFrom:null;m&&r.set(m)},nr.prototype.getBinding=function(r,i,s){return s.substr(0,9)==="u_pattern"?new Tt(r,i):new tt(r,i)};var Gt=function(r,i,s,f){this.expression=r,this.type=s,this.maxValue=0,this.paintVertexAttributes=i.map(function(m){return{name:"a_"+m,type:"Float32",components:s==="color"?2:1,offset:0}}),this.paintVertexArray=new f};Gt.prototype.populatePaintArray=function(r,i,s,f,m){var y=this.paintVertexArray.length,_=this.expression.evaluate(new pr(0),i,{},f,[],m);this.paintVertexArray.resize(r),this._setPaintValue(y,r,_)},Gt.prototype.updatePaintArray=function(r,i,s,f){var m=this.expression.evaluate({zoom:0},s,f);this._setPaintValue(r,i,m)},Gt.prototype._setPaintValue=function(r,i,s){if(this.type==="color")for(var f=yt(s),m=r;m<i;m++)this.paintVertexArray.emplace(m,f[0],f[1]);else{for(var y=r;y<i;y++)this.paintVertexArray.emplace(y,s);this.maxValue=Math.max(this.maxValue,Math.abs(s))}},Gt.prototype.upload=function(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Gt.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var qt=function(r,i,s,f,m,y){this.expression=r,this.uniformNames=i.map(function(_){return"u_"+_+"_t"}),this.type=s,this.useIntegerZoom=f,this.zoom=m,this.maxValue=0,this.paintVertexAttributes=i.map(function(_){return{name:"a_"+_,type:"Float32",components:s==="color"?4:2,offset:0}}),this.paintVertexArray=new y};qt.prototype.populatePaintArray=function(r,i,s,f,m){var y=this.expression.evaluate(new pr(this.zoom),i,{},f,[],m),_=this.expression.evaluate(new pr(this.zoom+1),i,{},f,[],m),S=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValue(S,r,y,_)},qt.prototype.updatePaintArray=function(r,i,s,f){var m=this.expression.evaluate({zoom:this.zoom},s,f),y=this.expression.evaluate({zoom:this.zoom+1},s,f);this._setPaintValue(r,i,m,y)},qt.prototype._setPaintValue=function(r,i,s,f){if(this.type==="color")for(var m=yt(s),y=yt(f),_=r;_<i;_++)this.paintVertexArray.emplace(_,m[0],m[1],y[0],y[1]);else{for(var S=r;S<i;S++)this.paintVertexArray.emplace(S,s,f);this.maxValue=Math.max(this.maxValue,Math.abs(s),Math.abs(f))}},qt.prototype.upload=function(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},qt.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},qt.prototype.setUniform=function(r,i){var s=this.useIntegerZoom?Math.floor(i.zoom):i.zoom,f=D(this.expression.interpolationFactor(s,this.zoom,this.zoom+1),0,1);r.set(f)},qt.prototype.getBinding=function(r,i,s){return new tt(r,i)};var Qt=function(r,i,s,f,m,y){this.expression=r,this.type=i,this.useIntegerZoom=s,this.zoom=f,this.layerId=y,this.zoomInPaintVertexArray=new m,this.zoomOutPaintVertexArray=new m};Qt.prototype.populatePaintArray=function(r,i,s){var f=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(r),this.zoomOutPaintVertexArray.resize(r),this._setPaintValues(f,r,i.patterns&&i.patterns[this.layerId],s)},Qt.prototype.updatePaintArray=function(r,i,s,f,m){this._setPaintValues(r,i,s.patterns&&s.patterns[this.layerId],m)},Qt.prototype._setPaintValues=function(r,i,s,f){if(f&&s){var m=f[s.min],y=f[s.mid],_=f[s.max];if(m&&y&&_)for(var S=r;S<i;S++)this.zoomInPaintVertexArray.emplace(S,y.tl[0],y.tl[1],y.br[0],y.br[1],m.tl[0],m.tl[1],m.br[0],m.br[1],y.pixelRatio,m.pixelRatio),this.zoomOutPaintVertexArray.emplace(S,y.tl[0],y.tl[1],y.br[0],y.br[1],_.tl[0],_.tl[1],_.br[0],_.br[1],y.pixelRatio,_.pixelRatio)}},Qt.prototype.upload=function(r){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=r.createVertexBuffer(this.zoomInPaintVertexArray,ue.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=r.createVertexBuffer(this.zoomOutPaintVertexArray,ue.members,this.expression.isStateDependent))},Qt.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var jt=function(r,i,s){this.binders={},this._buffers=[];var f=[];for(var m in r.paint._values)if(s(m)){var y=r.paint.get(m);if(y instanceof xi&&_s(y.property.specification)){var _=Vn(m,r.type),S=y.value,k=y.property.specification.type,A=y.property.useIntegerZoom,R=y.property.specification["property-type"],O=R==="cross-faded"||R==="cross-faded-data-driven";if(S.kind==="constant")this.binders[m]=O?new nr(S.value,_):new Ht(S.value,_,k),f.push("/u_"+m);else if(S.kind==="source"||O){var j=vn(m,k,"source");this.binders[m]=O?new Qt(S,k,A,i,j,r.id):new Gt(S,_,k,j),f.push("/a_"+m)}else{var H=vn(m,k,"composite");this.binders[m]=new qt(S,_,k,A,i,H),f.push("/z_"+m)}}}this.cacheKey=f.sort().join("")};jt.prototype.getMaxValue=function(r){var i=this.binders[r];return i instanceof Gt||i instanceof qt?i.maxValue:0},jt.prototype.populatePaintArrays=function(r,i,s,f,m){for(var y in this.binders){var _=this.binders[y];(_ instanceof Gt||_ instanceof qt||_ instanceof Qt)&&_.populatePaintArray(r,i,s,f,m)}},jt.prototype.setConstantPatternPositions=function(r,i){for(var s in this.binders){var f=this.binders[s];f instanceof nr&&f.setConstantPatternPositions(r,i)}},jt.prototype.updatePaintArrays=function(r,i,s,f,m){var y=!1;for(var _ in r)for(var S=0,k=i.getPositions(_);S<k.length;S+=1){var A=k[S],R=s.feature(A.index);for(var O in this.binders){var j=this.binders[O];if((j instanceof Gt||j instanceof qt||j instanceof Qt)&&j.expression.isStateDependent===!0){var H=f.paint.get(O);j.expression=H.value,j.updatePaintArray(A.start,A.end,R,r[_],m),y=!0}}}return y},jt.prototype.defines=function(){var r=[];for(var i in this.binders){var s=this.binders[i];(s instanceof Ht||s instanceof nr)&&r.push.apply(r,s.uniformNames.map(function(f){return"#define HAS_UNIFORM_"+f}))}return r},jt.prototype.getBinderAttributes=function(){var r=[];for(var i in this.binders){var s=this.binders[i];if(s instanceof Gt||s instanceof qt)for(var f=0;f<s.paintVertexAttributes.length;f++)r.push(s.paintVertexAttributes[f].name);else if(s instanceof Qt)for(var m=0;m<ue.members.length;m++)r.push(ue.members[m].name)}return r},jt.prototype.getBinderUniforms=function(){var r=[];for(var i in this.binders){var s=this.binders[i];if(s instanceof Ht||s instanceof nr||s instanceof qt)for(var f=0,m=s.uniformNames;f<m.length;f+=1)r.push(m[f])}return r},jt.prototype.getPaintVertexBuffers=function(){return this._buffers},jt.prototype.getUniforms=function(r,i){var s=[];for(var f in this.binders){var m=this.binders[f];if(m instanceof Ht||m instanceof nr||m instanceof qt)for(var y=0,_=m.uniformNames;y<_.length;y+=1){var S=_[y];if(i[S]){var k=m.getBinding(r,i[S],S);s.push({name:S,property:f,binding:k})}}}return s},jt.prototype.setUniforms=function(r,i,s,f){for(var m=0,y=i;m<y.length;m+=1){var _=y[m],S=_.name,k=_.property;this.binders[k].setUniform(_.binding,f,s.get(k),S)}},jt.prototype.updatePaintBuffers=function(r){for(var i in this._buffers=[],this.binders){var s=this.binders[i];if(r&&s instanceof Qt){var f=r.fromScale===2?s.zoomInPaintVertexBuffer:s.zoomOutPaintVertexBuffer;f&&this._buffers.push(f)}else(s instanceof Gt||s instanceof qt)&&s.paintVertexBuffer&&this._buffers.push(s.paintVertexBuffer)}},jt.prototype.upload=function(r){for(var i in this.binders){var s=this.binders[i];(s instanceof Gt||s instanceof qt||s instanceof Qt)&&s.upload(r)}this.updatePaintBuffers()},jt.prototype.destroy=function(){for(var r in this.binders){var i=this.binders[r];(i instanceof Gt||i instanceof qt||i instanceof Qt)&&i.destroy()}};var Ft=function(r,i,s){s===void 0&&(s=function(){return!0}),this.programConfigurations={};for(var f=0,m=r;f<m.length;f+=1){var y=m[f];this.programConfigurations[y.id]=new jt(y,i,s)}this.needsUpload=!1,this._featureMap=new be,this._bufferOffset=0};function Vn(r,i){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[r]||[r.replace(i+"-","").replace(/-/g,"_")]}function vn(r,i,s){var f={color:{source:nl,composite:pc},number:{source:Fa,composite:nl}},m=function(y){return{"line-pattern":{source:Xo,composite:Xo},"fill-pattern":{source:Xo,composite:Xo},"fill-extrusion-pattern":{source:Xo,composite:Xo}}[y]}(r);return m&&m[s]||f[i][s]}Ft.prototype.populatePaintArrays=function(r,i,s,f,m,y){for(var _ in this.programConfigurations)this.programConfigurations[_].populatePaintArrays(r,i,f,m,y);i.id!==void 0&&this._featureMap.add(i.id,s,this._bufferOffset,r),this._bufferOffset=r,this.needsUpload=!0},Ft.prototype.updatePaintArrays=function(r,i,s,f){for(var m=0,y=s;m<y.length;m+=1){var _=y[m];this.needsUpload=this.programConfigurations[_.id].updatePaintArrays(r,this._featureMap,i,_,f)||this.needsUpload}},Ft.prototype.get=function(r){return this.programConfigurations[r]},Ft.prototype.upload=function(r){if(this.needsUpload){for(var i in this.programConfigurations)this.programConfigurations[i].upload(r);this.needsUpload=!1}},Ft.prototype.destroy=function(){for(var r in this.programConfigurations)this.programConfigurations[r].destroy()},vt("ConstantBinder",Ht),vt("CrossFadedConstantBinder",nr),vt("SourceExpressionBinder",Gt),vt("CrossFadedCompositeBinder",Qt),vt("CompositeExpressionBinder",qt),vt("ProgramConfiguration",jt,{omit:["_buffers"]}),vt("ProgramConfigurationSet",Ft);var hi=Math.pow(2,14)-1,ei=-hi-1;function mn(r){for(var i=8192/r.extent,s=r.loadGeometry(),f=0;f<s.length;f++)for(var m=s[f],y=0;y<m.length;y++){var _=m[y],S=Math.round(_.x*i),k=Math.round(_.y*i);_.x=D(S,ei,hi),_.y=D(k,ei,hi),(S<_.x||S>_.x+1||k<_.y||k>_.y+1)&&pe("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return s}function kn(r,i){return{type:r.type,id:r.id,properties:r.properties,geometry:i?mn(r):[]}}function Zi(r,i,s,f,m){r.emplaceBack(2*i+(f+1)/2,2*s+(m+1)/2)}var wi=function(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(function(i){return i.id}),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new Es,this.indexArray=new Ba,this.segments=new X,this.programConfigurations=new Ft(r.layers,r.zoom),this.stateDependentLayerIds=this.layers.filter(function(i){return i.isStateDependent()}).map(function(i){return i.id})};function Ua(r,i){for(var s=0;s<r.length;s++)if(Yo(i,r[s]))return!0;for(var f=0;f<i.length;f++)if(Yo(r,i[f]))return!0;return!!su(r,i)}function Mi(r,i,s){return!!Yo(r,i)||!!$a(i,r,s)}function Bo(r,i){if(r.length===1)return lu(i,r[0]);for(var s=0;s<i.length;s++)for(var f=i[s],m=0;m<f.length;m++)if(Yo(r,f[m]))return!0;for(var y=0;y<r.length;y++)if(lu(i,r[y]))return!0;for(var _=0;_<i.length;_++)if(su(r,i[_]))return!0;return!1}function go(r,i,s){if(r.length>1){if(su(r,i))return!0;for(var f=0;f<i.length;f++)if($a(i[f],r,s))return!0}for(var m=0;m<r.length;m++)if($a(r[m],i,s))return!0;return!1}function su(r,i){if(r.length===0||i.length===0)return!1;for(var s=0;s<r.length-1;s++)for(var f=r[s],m=r[s+1],y=0;y<i.length-1;y++)if(al(f,m,i[y],i[y+1]))return!0;return!1}function al(r,i,s,f){return Oe(r,s,f)!==Oe(i,s,f)&&Oe(r,i,s)!==Oe(r,i,f)}function $a(r,i,s){var f=s*s;if(i.length===1)return r.distSqr(i[0])<f;for(var m=1;m<i.length;m++)if(sl(r,i[m-1],i[m])<f)return!0;return!1}function sl(r,i,s){var f=i.distSqr(s);if(f===0)return r.distSqr(i);var m=((r.x-i.x)*(s.x-i.x)+(r.y-i.y)*(s.y-i.y))/f;return r.distSqr(m<0?i:m>1?s:s.sub(i)._mult(m)._add(i))}function lu(r,i){for(var s,f,m,y=!1,_=0;_<r.length;_++)for(var S=0,k=(s=r[_]).length-1;S<s.length;k=S++)(f=s[S]).y>i.y!=(m=s[k]).y>i.y&&i.x<(m.x-f.x)*(i.y-f.y)/(m.y-f.y)+f.x&&(y=!y);return y}function Yo(r,i){for(var s=!1,f=0,m=r.length-1;f<r.length;m=f++){var y=r[f],_=r[m];y.y>i.y!=_.y>i.y&&i.x<(_.x-y.x)*(i.y-y.y)/(_.y-y.y)+y.x&&(s=!s)}return s}function uu(r,i,s){var f=s[0],m=s[2];if(r.x<f.x&&i.x<f.x||r.x>m.x&&i.x>m.x||r.y<f.y&&i.y<f.y||r.y>m.y&&i.y>m.y)return!1;var y=Oe(r,i,s[0]);return y!==Oe(r,i,s[1])||y!==Oe(r,i,s[2])||y!==Oe(r,i,s[3])}function Jo(r,i,s){var f=i.paint.get(r).value;return f.kind==="constant"?f.value:s.programConfigurations.get(i.id).getMaxValue(r)}function qn(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function da(r,i,s,f,m){if(!i[0]&&!i[1])return r;var y=T.convert(i)._mult(m);s==="viewport"&&y._rotate(-f);for(var _=[],S=0;S<r.length;S++)_.push(r[S].sub(y));return _}wi.prototype.populate=function(r,i,s){var f=this.layers[0],m=[],y=null;f.type==="circle"&&(y=f.layout.get("circle-sort-key"));for(var _=0,S=r;_<S.length;_+=1){var k=S[_],A=k.feature,R=k.id,O=k.index,j=k.sourceLayerIndex,H=this.layers[0]._featureFilter.needGeometry,ae=kn(A,H);if(this.layers[0]._featureFilter.filter(new pr(this.zoom),ae,s)){var se=y?y.evaluate(ae,{},s):void 0,_e={id:R,properties:A.properties,type:A.type,sourceLayerIndex:j,index:O,geometry:H?ae.geometry:mn(A),patterns:{},sortKey:se};m.push(_e)}}y&&m.sort(function(nt,Et){return nt.sortKey-Et.sortKey});for(var fe=0,Ie=m;fe<Ie.length;fe+=1){var Me=Ie[fe],ze=Me.geometry,Be=Me.index,We=Me.sourceLayerIndex,Qe=r[Be].feature;this.addFeature(Me,ze,Be,s),i.featureIndex.insert(Qe,ze,Be,We,this.index)}},wi.prototype.update=function(r,i,s){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,i,this.stateDependentLayers,s)},wi.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},wi.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},wi.prototype.upload=function(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,K),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0},wi.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},wi.prototype.addFeature=function(r,i,s,f){for(var m=0,y=i;m<y.length;m+=1)for(var _=0,S=y[m];_<S.length;_+=1){var k=S[_],A=k.x,R=k.y;if(!(A<0||A>=8192||R<0||R>=8192)){var O=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,r.sortKey),j=O.vertexLength;Zi(this.layoutVertexArray,A,R,-1,-1),Zi(this.layoutVertexArray,A,R,1,-1),Zi(this.layoutVertexArray,A,R,1,1),Zi(this.layoutVertexArray,A,R,-1,1),this.indexArray.emplaceBack(j,j+1,j+2),this.indexArray.emplaceBack(j,j+3,j+2),O.vertexLength+=4,O.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,s,{},f)},vt("CircleBucket",wi,{omit:["layers"]});var ja=new ci({"circle-sort-key":new xt(Z.layout_circle["circle-sort-key"])}),ks={paint:new ci({"circle-radius":new xt(Z.paint_circle["circle-radius"]),"circle-color":new xt(Z.paint_circle["circle-color"]),"circle-blur":new xt(Z.paint_circle["circle-blur"]),"circle-opacity":new xt(Z.paint_circle["circle-opacity"]),"circle-translate":new kt(Z.paint_circle["circle-translate"]),"circle-translate-anchor":new kt(Z.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new kt(Z.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new kt(Z.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new xt(Z.paint_circle["circle-stroke-width"]),"circle-stroke-color":new xt(Z.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new xt(Z.paint_circle["circle-stroke-opacity"])}),layout:ja},Mr=typeof Float32Array<"u"?Float32Array:Array;function oo(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function Ri(r,i,s){var f=i[0],m=i[1],y=i[2],_=i[3],S=i[4],k=i[5],A=i[6],R=i[7],O=i[8],j=i[9],H=i[10],ae=i[11],se=i[12],_e=i[13],fe=i[14],Ie=i[15],Me=s[0],ze=s[1],Be=s[2],We=s[3];return r[0]=Me*f+ze*S+Be*O+We*se,r[1]=Me*m+ze*k+Be*j+We*_e,r[2]=Me*y+ze*A+Be*H+We*fe,r[3]=Me*_+ze*R+Be*ae+We*Ie,r[4]=(Me=s[4])*f+(ze=s[5])*S+(Be=s[6])*O+(We=s[7])*se,r[5]=Me*m+ze*k+Be*j+We*_e,r[6]=Me*y+ze*A+Be*H+We*fe,r[7]=Me*_+ze*R+Be*ae+We*Ie,r[8]=(Me=s[8])*f+(ze=s[9])*S+(Be=s[10])*O+(We=s[11])*se,r[9]=Me*m+ze*k+Be*j+We*_e,r[10]=Me*y+ze*A+Be*H+We*fe,r[11]=Me*_+ze*R+Be*ae+We*Ie,r[12]=(Me=s[12])*f+(ze=s[13])*S+(Be=s[14])*O+(We=s[15])*se,r[13]=Me*m+ze*k+Be*j+We*_e,r[14]=Me*y+ze*A+Be*H+We*fe,r[15]=Me*_+ze*R+Be*ae+We*Ie,r}Math.hypot||(Math.hypot=function(){for(var r=arguments,i=0,s=arguments.length;s--;)i+=r[s]*r[s];return Math.sqrt(i)});var Ts,Wv=Ri;function fc(r,i,s){var f=i[0],m=i[1],y=i[2],_=i[3];return r[0]=s[0]*f+s[4]*m+s[8]*y+s[12]*_,r[1]=s[1]*f+s[5]*m+s[9]*y+s[13]*_,r[2]=s[2]*f+s[6]*m+s[10]*y+s[14]*_,r[3]=s[3]*f+s[7]*m+s[11]*y+s[15]*_,r}Ts=new Mr(3),Mr!=Float32Array&&(Ts[0]=0,Ts[1]=0,Ts[2]=0),function(){var r=new Mr(4);Mr!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0,r[3]=0)}();var Gv=(function(){var r=new Mr(2);Mr!=Float32Array&&(r[0]=0,r[1]=0)}(),function(r){function i(s){r.call(this,s,ks)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.createBucket=function(s){return new wi(s)},i.prototype.queryRadius=function(s){var f=s;return Jo("circle-radius",this,f)+Jo("circle-stroke-width",this,f)+qn(this.paint.get("circle-translate"))},i.prototype.queryIntersectsFeature=function(s,f,m,y,_,S,k,A){for(var R=da(s,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),S.angle,k),O=this.paint.get("circle-radius").evaluate(f,m)+this.paint.get("circle-stroke-width").evaluate(f,m),j=this.paint.get("circle-pitch-alignment")==="map",H=j?R:function(Qe,nt){return Qe.map(function(Et){return cu(Et,nt)})}(R,A),ae=j?O*k:O,se=0,_e=y;se<_e.length;se+=1)for(var fe=0,Ie=_e[se];fe<Ie.length;fe+=1){var Me=Ie[fe],ze=j?Me:cu(Me,A),Be=ae,We=fc([],[Me.x,Me.y,0,1],A);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Be*=We[3]/S.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Be*=S.cameraToCenterDistance/We[3]),Mi(H,ze,Be))return!0}return!1},i}(Ko));function cu(r,i){var s=fc([],[r.x,r.y,0,1],i);return new T(s[0]/s[3],s[1]/s[3])}var Qd=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i}(wi);function ll(r,i,s,f){var m=i.width,y=i.height;if(f){if(f instanceof Uint8ClampedArray)f=new Uint8Array(f.buffer);else if(f.length!==m*y*s)throw new RangeError("mismatched image size")}else f=new Uint8Array(m*y*s);return r.width=m,r.height=y,r.data=f,r}function hc(r,i,s){var f=i.width,m=i.height;if(f!==r.width||m!==r.height){var y=ll({},{width:f,height:m},s);Hv(r,y,{x:0,y:0},{x:0,y:0},{width:Math.min(r.width,f),height:Math.min(r.height,m)},s),r.width=f,r.height=m,r.data=y.data}}function Hv(r,i,s,f,m,y){if(m.width===0||m.height===0)return i;if(m.width>r.width||m.height>r.height||s.x>r.width-m.width||s.y>r.height-m.height)throw new RangeError("out of range source coordinates for image copy");if(m.width>i.width||m.height>i.height||f.x>i.width-m.width||f.y>i.height-m.height)throw new RangeError("out of range destination coordinates for image copy");for(var _=r.data,S=i.data,k=0;k<m.height;k++)for(var A=((s.y+k)*r.width+s.x)*y,R=((f.y+k)*i.width+f.x)*y,O=0;O<m.width*y;O++)S[R+O]=_[A+O];return i}vt("HeatmapBucket",Qd,{omit:["layers"]});var pu=function(r,i){ll(this,r,1,i)};pu.prototype.resize=function(r){hc(this,r,1)},pu.prototype.clone=function(){return new pu({width:this.width,height:this.height},new Uint8Array(this.data))},pu.copy=function(r,i,s,f,m){Hv(r,i,s,f,m,1)};var Ki=function(r,i){ll(this,r,4,i)};Ki.prototype.resize=function(r){hc(this,r,4)},Ki.prototype.replace=function(r,i){i?this.data.set(r):this.data=r instanceof Uint8ClampedArray?new Uint8Array(r.buffer):r},Ki.prototype.clone=function(){return new Ki({width:this.width,height:this.height},new Uint8Array(this.data))},Ki.copy=function(r,i,s,f,m){Hv(r,i,s,f,m,4)},vt("AlphaImage",pu),vt("RGBAImage",Ki);var MA={paint:new ci({"heatmap-radius":new xt(Z.paint_heatmap["heatmap-radius"]),"heatmap-weight":new xt(Z.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new kt(Z.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Oo(Z.paint_heatmap["heatmap-color"]),"heatmap-opacity":new kt(Z.paint_heatmap["heatmap-opacity"])})};function Fb(r){var i={},s=r.resolution||256,f=r.clips?r.clips.length:1,m=r.image||new Ki({width:s,height:f}),y=function(ae,se,_e){i[r.evaluationKey]=_e;var fe=r.expression.evaluate(i);m.data[ae+se+0]=Math.floor(255*fe.r/fe.a),m.data[ae+se+1]=Math.floor(255*fe.g/fe.a),m.data[ae+se+2]=Math.floor(255*fe.b/fe.a),m.data[ae+se+3]=Math.floor(255*fe.a)};if(r.clips)for(var _=0,S=0;_<f;++_,S+=4*s)for(var k=0,A=0;k<s;k++,A+=4){var R=k/(s-1),O=r.clips[_];y(S,A,O.start*(1-R)+O.end*R)}else for(var j=0,H=0;j<s;j++,H+=4)y(0,H,j/(s-1));return m}var RA=function(r){function i(s){r.call(this,s,MA),this._updateColorRamp()}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.createBucket=function(s){return new Qd(s)},i.prototype._handleSpecialPaintPropertyUpdate=function(s){s==="heatmap-color"&&this._updateColorRamp()},i.prototype._updateColorRamp=function(){this.colorRamp=Fb({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},i.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},i.prototype.queryRadius=function(){return 0},i.prototype.queryIntersectsFeature=function(){return!1},i.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},i}(Ko),LA={paint:new ci({"hillshade-illumination-direction":new kt(Z.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new kt(Z.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new kt(Z.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new kt(Z.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new kt(Z.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new kt(Z.paint_hillshade["hillshade-accent-color"])})},zA=function(r){function i(s){r.call(this,s,LA)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},i}(Ko),DA=Qn([{name:"a_pos",components:2,type:"Int16"}],4).members,Zv=em,OA=em;function em(r,i,s){s=s||2;var f,m,y,_,S,k,A,R=i&&i.length,O=R?i[0]*s:r.length,j=Ub(r,0,O,s,!0),H=[];if(!j||j.next===j.prev)return H;if(R&&(j=function(se,_e,fe,Ie){var Me,ze,Be,We=[];for(Me=0,ze=_e.length;Me<ze;Me++)(Be=Ub(se,_e[Me]*Ie,Me<ze-1?_e[Me+1]*Ie:se.length,Ie,!1))===Be.next&&(Be.steiner=!0),We.push(qA(Be));for(We.sort($A),Me=0;Me<We.length;Me++)jA(We[Me],fe),fe=ul(fe,fe.next);return fe}(r,i,j,s)),r.length>80*s){f=y=r[0],m=_=r[1];for(var ae=s;ae<O;ae+=s)(S=r[ae])<f&&(f=S),(k=r[ae+1])<m&&(m=k),S>y&&(y=S),k>_&&(_=k);A=(A=Math.max(y-f,_-m))!==0?1/A:0}return bf(j,H,s,f,m,A),H}function Ub(r,i,s,f,m){var y,_;if(m===Yv(r,i,s,f)>0)for(y=i;y<s;y+=f)_=Vb(y,r[y],r[y+1],_);else for(y=s-f;y>=i;y-=f)_=Vb(y,r[y],r[y+1],_);return _&&tm(_,_.next)&&(Sf(_),_=_.next),_}function ul(r,i){if(!r)return r;i||(i=r);var s,f=r;do if(s=!1,f.steiner||!tm(f,f.next)&&Fn(f.prev,f,f.next)!==0)f=f.next;else{if(Sf(f),(f=i=f.prev)===f.next)break;s=!0}while(s||f!==i);return i}function bf(r,i,s,f,m,y,_){if(r){!_&&y&&function(R,O,j,H){var ae=R;do ae.z===null&&(ae.z=Kv(ae.x,ae.y,O,j,H)),ae.prevZ=ae.prev,ae.nextZ=ae.next,ae=ae.next;while(ae!==R);ae.prevZ.nextZ=null,ae.prevZ=null,function(se){var _e,fe,Ie,Me,ze,Be,We,Qe,nt=1;do{for(fe=se,se=null,ze=null,Be=0;fe;){for(Be++,Ie=fe,We=0,_e=0;_e<nt&&(We++,Ie=Ie.nextZ);_e++);for(Qe=nt;We>0||Qe>0&&Ie;)We!==0&&(Qe===0||!Ie||fe.z<=Ie.z)?(Me=fe,fe=fe.nextZ,We--):(Me=Ie,Ie=Ie.nextZ,Qe--),ze?ze.nextZ=Me:se=Me,Me.prevZ=ze,ze=Me;fe=Ie}ze.nextZ=null,nt*=2}while(Be>1)}(ae)}(r,f,m,y);for(var S,k,A=r;r.prev!==r.next;)if(S=r.prev,k=r.next,y?NA(r,f,m,y):BA(r))i.push(S.i/s),i.push(r.i/s),i.push(k.i/s),Sf(r),r=k.next,A=k.next;else if((r=k)===A){_?_===1?bf(r=FA(ul(r),i,s),i,s,f,m,y,2):_===2&&UA(r,i,s,f,m,y):bf(ul(r),i,s,f,m,y,1);break}}}function BA(r){var i=r.prev,s=r,f=r.next;if(Fn(i,s,f)>=0)return!1;for(var m=r.next.next;m!==r.prev;){if(dc(i.x,i.y,s.x,s.y,f.x,f.y,m.x,m.y)&&Fn(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function NA(r,i,s,f){var m=r.prev,y=r,_=r.next;if(Fn(m,y,_)>=0)return!1;for(var S=m.x>y.x?m.x>_.x?m.x:_.x:y.x>_.x?y.x:_.x,k=m.y>y.y?m.y>_.y?m.y:_.y:y.y>_.y?y.y:_.y,A=Kv(m.x<y.x?m.x<_.x?m.x:_.x:y.x<_.x?y.x:_.x,m.y<y.y?m.y<_.y?m.y:_.y:y.y<_.y?y.y:_.y,i,s,f),R=Kv(S,k,i,s,f),O=r.prevZ,j=r.nextZ;O&&O.z>=A&&j&&j.z<=R;){if(O!==r.prev&&O!==r.next&&dc(m.x,m.y,y.x,y.y,_.x,_.y,O.x,O.y)&&Fn(O.prev,O,O.next)>=0||(O=O.prevZ,j!==r.prev&&j!==r.next&&dc(m.x,m.y,y.x,y.y,_.x,_.y,j.x,j.y)&&Fn(j.prev,j,j.next)>=0))return!1;j=j.nextZ}for(;O&&O.z>=A;){if(O!==r.prev&&O!==r.next&&dc(m.x,m.y,y.x,y.y,_.x,_.y,O.x,O.y)&&Fn(O.prev,O,O.next)>=0)return!1;O=O.prevZ}for(;j&&j.z<=R;){if(j!==r.prev&&j!==r.next&&dc(m.x,m.y,y.x,y.y,_.x,_.y,j.x,j.y)&&Fn(j.prev,j,j.next)>=0)return!1;j=j.nextZ}return!0}function FA(r,i,s){var f=r;do{var m=f.prev,y=f.next.next;!tm(m,y)&&$b(m,f,f.next,y)&&wf(m,y)&&wf(y,m)&&(i.push(m.i/s),i.push(f.i/s),i.push(y.i/s),Sf(f),Sf(f.next),f=r=y),f=f.next}while(f!==r);return ul(f)}function UA(r,i,s,f,m,y){var _=r;do{for(var S=_.next.next;S!==_.prev;){if(_.i!==S.i&&WA(_,S)){var k=jb(_,S);return _=ul(_,_.next),k=ul(k,k.next),bf(_,i,s,f,m,y),void bf(k,i,s,f,m,y)}S=S.next}_=_.next}while(_!==r)}function $A(r,i){return r.x-i.x}function jA(r,i){if(i=function(f,m){var y,_=m,S=f.x,k=f.y,A=-1/0;do{if(k<=_.y&&k>=_.next.y&&_.next.y!==_.y){var R=_.x+(k-_.y)*(_.next.x-_.x)/(_.next.y-_.y);if(R<=S&&R>A){if(A=R,R===S){if(k===_.y)return _;if(k===_.next.y)return _.next}y=_.x<_.next.x?_:_.next}}_=_.next}while(_!==m);if(!y)return null;if(S===A)return y;var O,j=y,H=y.x,ae=y.y,se=1/0;_=y;do S>=_.x&&_.x>=H&&S!==_.x&&dc(k<ae?S:A,k,H,ae,k<ae?A:S,k,_.x,_.y)&&(O=Math.abs(k-_.y)/(S-_.x),wf(_,f)&&(O<se||O===se&&(_.x>y.x||_.x===y.x&&VA(y,_)))&&(y=_,se=O)),_=_.next;while(_!==j);return y}(r,i)){var s=jb(i,r);ul(i,i.next),ul(s,s.next)}}function VA(r,i){return Fn(r.prev,r,i.prev)<0&&Fn(i.next,r,r.next)<0}function Kv(r,i,s,f,m){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=32767*(r-s)*m)|r<<8))|r<<4))|r<<2))|r<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=32767*(i-f)*m)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function qA(r){var i=r,s=r;do(i.x<s.x||i.x===s.x&&i.y<s.y)&&(s=i),i=i.next;while(i!==r);return s}function dc(r,i,s,f,m,y,_,S){return(m-_)*(i-S)-(r-_)*(y-S)>=0&&(r-_)*(f-S)-(s-_)*(i-S)>=0&&(s-_)*(y-S)-(m-_)*(f-S)>=0}function WA(r,i){return r.next.i!==i.i&&r.prev.i!==i.i&&!function(s,f){var m=s;do{if(m.i!==s.i&&m.next.i!==s.i&&m.i!==f.i&&m.next.i!==f.i&&$b(m,m.next,s,f))return!0;m=m.next}while(m!==s);return!1}(r,i)&&(wf(r,i)&&wf(i,r)&&function(s,f){var m=s,y=!1,_=(s.x+f.x)/2,S=(s.y+f.y)/2;do m.y>S!=m.next.y>S&&m.next.y!==m.y&&_<(m.next.x-m.x)*(S-m.y)/(m.next.y-m.y)+m.x&&(y=!y),m=m.next;while(m!==s);return y}(r,i)&&(Fn(r.prev,r,i.prev)||Fn(r,i.prev,i))||tm(r,i)&&Fn(r.prev,r,r.next)>0&&Fn(i.prev,i,i.next)>0)}function Fn(r,i,s){return(i.y-r.y)*(s.x-i.x)-(i.x-r.x)*(s.y-i.y)}function tm(r,i){return r.x===i.x&&r.y===i.y}function $b(r,i,s,f){var m=nm(Fn(r,i,s)),y=nm(Fn(r,i,f)),_=nm(Fn(s,f,r)),S=nm(Fn(s,f,i));return m!==y&&_!==S||!(m!==0||!rm(r,s,i))||!(y!==0||!rm(r,f,i))||!(_!==0||!rm(s,r,f))||!(S!==0||!rm(s,i,f))}function rm(r,i,s){return i.x<=Math.max(r.x,s.x)&&i.x>=Math.min(r.x,s.x)&&i.y<=Math.max(r.y,s.y)&&i.y>=Math.min(r.y,s.y)}function nm(r){return r>0?1:r<0?-1:0}function wf(r,i){return Fn(r.prev,r,r.next)<0?Fn(r,i,r.next)>=0&&Fn(r,r.prev,i)>=0:Fn(r,i,r.prev)<0||Fn(r,r.next,i)<0}function jb(r,i){var s=new Xv(r.i,r.x,r.y),f=new Xv(i.i,i.x,i.y),m=r.next,y=i.prev;return r.next=i,i.prev=r,s.next=m,m.prev=s,f.next=s,s.prev=f,y.next=f,f.prev=y,f}function Vb(r,i,s,f){var m=new Xv(r,i,s);return f?(m.next=f.next,m.prev=f,f.next.prev=m,f.next=m):(m.prev=m,m.next=m),m}function Sf(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function Xv(r,i,s){this.i=r,this.x=i,this.y=s,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Yv(r,i,s,f){for(var m=0,y=i,_=s-f;y<s;y+=f)m+=(r[_]-r[y])*(r[y+1]+r[_+1]),_=y;return m}function GA(r,i,s,f,m){(function y(_,S,k,A,R){for(;A>k;){if(A-k>600){var O=A-k+1,j=S-k+1,H=Math.log(O),ae=.5*Math.exp(2*H/3),se=.5*Math.sqrt(H*ae*(O-ae)/O)*(j-O/2<0?-1:1);y(_,S,Math.max(k,Math.floor(S-j*ae/O+se)),Math.min(A,Math.floor(S+(O-j)*ae/O+se)),R)}var _e=_[S],fe=k,Ie=A;for(Ef(_,k,S),R(_[A],_e)>0&&Ef(_,k,A);fe<Ie;){for(Ef(_,fe,Ie),fe++,Ie--;R(_[fe],_e)<0;)fe++;for(;R(_[Ie],_e)>0;)Ie--}R(_[k],_e)===0?Ef(_,k,Ie):Ef(_,++Ie,A),Ie<=S&&(k=Ie+1),S<=Ie&&(A=Ie-1)}})(r,i,s||0,f||r.length-1,m||HA)}function Ef(r,i,s){var f=r[i];r[i]=r[s],r[s]=f}function HA(r,i){return r<i?-1:r>i?1:0}function Jv(r,i){var s=r.length;if(s<=1)return[r];for(var f,m,y=[],_=0;_<s;_++){var S=Ue(r[_]);S!==0&&(r[_].area=Math.abs(S),m===void 0&&(m=S<0),m===S<0?(f&&y.push(f),f=[r[_]]):f.push(r[_]))}if(f&&y.push(f),i>1)for(var k=0;k<y.length;k++)y[k].length<=i||(GA(y[k],i,1,y[k].length-1,ZA),y[k]=y[k].slice(0,i));return y}function ZA(r,i){return i.area-r.area}function Qv(r,i,s){for(var f=s.patternDependencies,m=!1,y=0,_=i;y<_.length;y+=1){var S=_[y].paint.get(r+"-pattern");S.isConstant()||(m=!0);var k=S.constantOr(null);k&&(m=!0,f[k.to]=!0,f[k.from]=!0)}return m}function e0(r,i,s,f,m){for(var y=m.patternDependencies,_=0,S=i;_<S.length;_+=1){var k=S[_],A=k.paint.get(r+"-pattern").value;if(A.kind!=="constant"){var R=A.evaluate({zoom:f-1},s,{},m.availableImages),O=A.evaluate({zoom:f},s,{},m.availableImages),j=A.evaluate({zoom:f+1},s,{},m.availableImages);O=O&&O.name?O.name:O,j=j&&j.name?j.name:j,y[R=R&&R.name?R.name:R]=!0,y[O]=!0,y[j]=!0,s.patterns[k.id]={min:R,mid:O,max:j}}}return s}em.deviation=function(r,i,s,f){var m=i&&i.length,y=Math.abs(Yv(r,0,m?i[0]*s:r.length,s));if(m)for(var _=0,S=i.length;_<S;_++)y-=Math.abs(Yv(r,i[_]*s,_<S-1?i[_+1]*s:r.length,s));var k=0;for(_=0;_<f.length;_+=3){var A=f[_]*s,R=f[_+1]*s,O=f[_+2]*s;k+=Math.abs((r[A]-r[O])*(r[R+1]-r[A+1])-(r[A]-r[R])*(r[O+1]-r[A+1]))}return y===0&&k===0?0:Math.abs((k-y)/y)},em.flatten=function(r){for(var i=r[0][0].length,s={vertices:[],holes:[],dimensions:i},f=0,m=0;m<r.length;m++){for(var y=0;y<r[m].length;y++)for(var _=0;_<i;_++)s.vertices.push(r[m][y][_]);m>0&&s.holes.push(f+=r[m-1].length)}return s},Zv.default=OA;var ma=function(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(function(i){return i.id}),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Es,this.indexArray=new Ba,this.indexArray2=new au,this.programConfigurations=new Ft(r.layers,r.zoom),this.segments=new X,this.segments2=new X,this.stateDependentLayerIds=this.layers.filter(function(i){return i.isStateDependent()}).map(function(i){return i.id})};ma.prototype.populate=function(r,i,s){this.hasPattern=Qv("fill",this.layers,i);for(var f=this.layers[0].layout.get("fill-sort-key"),m=[],y=0,_=r;y<_.length;y+=1){var S=_[y],k=S.feature,A=S.id,R=S.index,O=S.sourceLayerIndex,j=this.layers[0]._featureFilter.needGeometry,H=kn(k,j);if(this.layers[0]._featureFilter.filter(new pr(this.zoom),H,s)){var ae=f?f.evaluate(H,{},s,i.availableImages):void 0,se={id:A,properties:k.properties,type:k.type,sourceLayerIndex:O,index:R,geometry:j?H.geometry:mn(k),patterns:{},sortKey:ae};m.push(se)}}f&&m.sort(function(Qe,nt){return Qe.sortKey-nt.sortKey});for(var _e=0,fe=m;_e<fe.length;_e+=1){var Ie=fe[_e],Me=Ie.geometry,ze=Ie.index,Be=Ie.sourceLayerIndex;if(this.hasPattern){var We=e0("fill",this.layers,Ie,this.zoom,i);this.patternFeatures.push(We)}else this.addFeature(Ie,Me,ze,s,{});i.featureIndex.insert(r[ze].feature,Me,ze,Be,this.index)}},ma.prototype.update=function(r,i,s){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,i,this.stateDependentLayers,s)},ma.prototype.addFeatures=function(r,i,s){for(var f=0,m=this.patternFeatures;f<m.length;f+=1){var y=m[f];this.addFeature(y,y.geometry,y.index,i,s)}},ma.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},ma.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ma.prototype.upload=function(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,DA),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.indexBuffer2=r.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(r),this.uploaded=!0},ma.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},ma.prototype.addFeature=function(r,i,s,f,m){for(var y=0,_=Jv(i,500);y<_.length;y+=1){for(var S=_[y],k=0,A=0,R=S;A<R.length;A+=1)k+=R[A].length;for(var O=this.segments.prepareSegment(k,this.layoutVertexArray,this.indexArray),j=O.vertexLength,H=[],ae=[],se=0,_e=S;se<_e.length;se+=1){var fe=_e[se];if(fe.length!==0){fe!==S[0]&&ae.push(H.length/2);var Ie=this.segments2.prepareSegment(fe.length,this.layoutVertexArray,this.indexArray2),Me=Ie.vertexLength;this.layoutVertexArray.emplaceBack(fe[0].x,fe[0].y),this.indexArray2.emplaceBack(Me+fe.length-1,Me),H.push(fe[0].x),H.push(fe[0].y);for(var ze=1;ze<fe.length;ze++)this.layoutVertexArray.emplaceBack(fe[ze].x,fe[ze].y),this.indexArray2.emplaceBack(Me+ze-1,Me+ze),H.push(fe[ze].x),H.push(fe[ze].y);Ie.vertexLength+=fe.length,Ie.primitiveLength+=fe.length}}for(var Be=Zv(H,ae),We=0;We<Be.length;We+=3)this.indexArray.emplaceBack(j+Be[We],j+Be[We+1],j+Be[We+2]);O.vertexLength+=k,O.primitiveLength+=Be.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,s,m,f)},vt("FillBucket",ma,{omit:["layers","patternFeatures"]});var KA=new ci({"fill-sort-key":new xt(Z.layout_fill["fill-sort-key"])}),XA={paint:new ci({"fill-antialias":new kt(Z.paint_fill["fill-antialias"]),"fill-opacity":new xt(Z.paint_fill["fill-opacity"]),"fill-color":new xt(Z.paint_fill["fill-color"]),"fill-outline-color":new xt(Z.paint_fill["fill-outline-color"]),"fill-translate":new kt(Z.paint_fill["fill-translate"]),"fill-translate-anchor":new kt(Z.paint_fill["fill-translate-anchor"]),"fill-pattern":new sc(Z.paint_fill["fill-pattern"])}),layout:KA},YA=function(r){function i(s){r.call(this,s,XA)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.recalculate=function(s,f){r.prototype.recalculate.call(this,s,f);var m=this.paint._values["fill-outline-color"];m.value.kind==="constant"&&m.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},i.prototype.createBucket=function(s){return new ma(s)},i.prototype.queryRadius=function(){return qn(this.paint.get("fill-translate"))},i.prototype.queryIntersectsFeature=function(s,f,m,y,_,S,k){return Bo(da(s,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),S.angle,k),y)},i.prototype.isTileClipped=function(){return!0},i}(Ko),JA=Qn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,qb=mc;function mc(r,i,s,f,m){this.properties={},this.extent=s,this.type=0,this._pbf=r,this._geometry=-1,this._keys=f,this._values=m,r.readFields(QA,this,i)}function QA(r,i,s){r==1?i.id=s.readVarint():r==2?function(f,m){for(var y=f.readVarint()+f.pos;f.pos<y;){var _=m._keys[f.readVarint()],S=m._values[f.readVarint()];m.properties[_]=S}}(s,i):r==3?i.type=s.readVarint():r==4&&(i._geometry=s.pos)}function eM(r){for(var i,s,f=0,m=0,y=r.length,_=y-1;m<y;_=m++)f+=((s=r[_]).x-(i=r[m]).x)*(i.y+s.y);return f}mc.types=["Unknown","Point","LineString","Polygon"],mc.prototype.loadGeometry=function(){var r=this._pbf;r.pos=this._geometry;for(var i,s=r.readVarint()+r.pos,f=1,m=0,y=0,_=0,S=[];r.pos<s;){if(m<=0){var k=r.readVarint();f=7&k,m=k>>3}if(m--,f===1||f===2)y+=r.readSVarint(),_+=r.readSVarint(),f===1&&(i&&S.push(i),i=[]),i.push(new T(y,_));else{if(f!==7)throw new Error("unknown command "+f);i&&i.push(i[0].clone())}}return i&&S.push(i),S},mc.prototype.bbox=function(){var r=this._pbf;r.pos=this._geometry;for(var i=r.readVarint()+r.pos,s=1,f=0,m=0,y=0,_=1/0,S=-1/0,k=1/0,A=-1/0;r.pos<i;){if(f<=0){var R=r.readVarint();s=7&R,f=R>>3}if(f--,s===1||s===2)(m+=r.readSVarint())<_&&(_=m),m>S&&(S=m),(y+=r.readSVarint())<k&&(k=y),y>A&&(A=y);else if(s!==7)throw new Error("unknown command "+s)}return[_,k,S,A]},mc.prototype.toGeoJSON=function(r,i,s){var f,m,y=this.extent*Math.pow(2,s),_=this.extent*r,S=this.extent*i,k=this.loadGeometry(),A=mc.types[this.type];function R(H){for(var ae=0;ae<H.length;ae++){var se=H[ae];H[ae]=[360*(se.x+_)/y-180,360/Math.PI*Math.atan(Math.exp((180-360*(se.y+S)/y)*Math.PI/180))-90]}}switch(this.type){case 1:var O=[];for(f=0;f<k.length;f++)O[f]=k[f][0];R(k=O);break;case 2:for(f=0;f<k.length;f++)R(k[f]);break;case 3:for(k=function(H){var ae=H.length;if(ae<=1)return[H];for(var se,_e,fe=[],Ie=0;Ie<ae;Ie++){var Me=eM(H[Ie]);Me!==0&&(_e===void 0&&(_e=Me<0),_e===Me<0?(se&&fe.push(se),se=[H[Ie]]):se.push(H[Ie]))}return se&&fe.push(se),fe}(k),f=0;f<k.length;f++)for(m=0;m<k[f].length;m++)R(k[f][m])}k.length===1?k=k[0]:A="Multi"+A;var j={type:"Feature",geometry:{type:A,coordinates:k},properties:this.properties};return"id"in this&&(j.id=this.id),j};var Wb=Gb;function Gb(r,i){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=r,this._keys=[],this._values=[],this._features=[],r.readFields(tM,this,i),this.length=this._features.length}function tM(r,i,s){r===15?i.version=s.readVarint():r===1?i.name=s.readString():r===5?i.extent=s.readVarint():r===2?i._features.push(s.pos):r===3?i._keys.push(s.readString()):r===4&&i._values.push(function(f){for(var m=null,y=f.readVarint()+f.pos;f.pos<y;){var _=f.readVarint()>>3;m=_===1?f.readString():_===2?f.readFloat():_===3?f.readDouble():_===4?f.readVarint64():_===5?f.readVarint():_===6?f.readSVarint():_===7?f.readBoolean():null}return m}(s))}function rM(r,i,s){if(r===3){var f=new Wb(s,s.readVarint()+s.pos);f.length&&(i[f.name]=f)}}Gb.prototype.feature=function(r){if(r<0||r>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[r];var i=this._pbf.readVarint()+this._pbf.pos;return new qb(this._pbf,i,this.extent,this._keys,this._values)};var yc={VectorTile:function(r,i){this.layers=r.readFields(rM,{},i)},VectorTileFeature:qb,VectorTileLayer:Wb},nM=yc.VectorTileFeature.types,t0=Math.pow(2,13);function Cf(r,i,s,f,m,y,_,S){r.emplaceBack(i,s,2*Math.floor(f*t0)+_,m*t0*2,y*t0*2,Math.round(S))}var ya=function(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(function(i){return i.id}),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new ha,this.indexArray=new Ba,this.programConfigurations=new Ft(r.layers,r.zoom),this.segments=new X,this.stateDependentLayerIds=this.layers.filter(function(i){return i.isStateDependent()}).map(function(i){return i.id})};function iM(r,i){return r.x===i.x&&(r.x<0||r.x>8192)||r.y===i.y&&(r.y<0||r.y>8192)}ya.prototype.populate=function(r,i,s){this.features=[],this.hasPattern=Qv("fill-extrusion",this.layers,i);for(var f=0,m=r;f<m.length;f+=1){var y=m[f],_=y.feature,S=y.id,k=y.index,A=y.sourceLayerIndex,R=this.layers[0]._featureFilter.needGeometry,O=kn(_,R);if(this.layers[0]._featureFilter.filter(new pr(this.zoom),O,s)){var j={id:S,sourceLayerIndex:A,index:k,geometry:R?O.geometry:mn(_),properties:_.properties,type:_.type,patterns:{}};this.hasPattern?this.features.push(e0("fill-extrusion",this.layers,j,this.zoom,i)):this.addFeature(j,j.geometry,k,s,{}),i.featureIndex.insert(_,j.geometry,k,A,this.index,!0)}}},ya.prototype.addFeatures=function(r,i,s){for(var f=0,m=this.features;f<m.length;f+=1){var y=m[f];this.addFeature(y,y.geometry,y.index,i,s)}},ya.prototype.update=function(r,i,s){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,i,this.stateDependentLayers,s)},ya.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},ya.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ya.prototype.upload=function(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,JA),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0},ya.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ya.prototype.addFeature=function(r,i,s,f,m){for(var y=0,_=Jv(i,500);y<_.length;y+=1){for(var S=_[y],k=0,A=0,R=S;A<R.length;A+=1)k+=R[A].length;for(var O=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),j=0,H=S;j<H.length;j+=1){var ae=H[j];if(ae.length!==0&&!((lr=ae).every(function(Yt){return Yt.x<0})||lr.every(function(Yt){return Yt.x>8192})||lr.every(function(Yt){return Yt.y<0})||lr.every(function(Yt){return Yt.y>8192})))for(var se=0,_e=0;_e<ae.length;_e++){var fe=ae[_e];if(_e>=1){var Ie=ae[_e-1];if(!iM(fe,Ie)){O.vertexLength+4>X.MAX_VERTEX_ARRAY_LENGTH&&(O=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Me=fe.sub(Ie)._perp()._unit(),ze=Ie.dist(fe);se+ze>32768&&(se=0),Cf(this.layoutVertexArray,fe.x,fe.y,Me.x,Me.y,0,0,se),Cf(this.layoutVertexArray,fe.x,fe.y,Me.x,Me.y,0,1,se),Cf(this.layoutVertexArray,Ie.x,Ie.y,Me.x,Me.y,0,0,se+=ze),Cf(this.layoutVertexArray,Ie.x,Ie.y,Me.x,Me.y,0,1,se);var Be=O.vertexLength;this.indexArray.emplaceBack(Be,Be+2,Be+1),this.indexArray.emplaceBack(Be+1,Be+2,Be+3),O.vertexLength+=4,O.primitiveLength+=2}}}}if(O.vertexLength+k>X.MAX_VERTEX_ARRAY_LENGTH&&(O=this.segments.prepareSegment(k,this.layoutVertexArray,this.indexArray)),nM[r.type]==="Polygon"){for(var We=[],Qe=[],nt=O.vertexLength,Et=0,ut=S;Et<ut.length;Et+=1){var It=ut[Et];if(It.length!==0){It!==S[0]&&Qe.push(We.length/2);for(var ft=0;ft<It.length;ft++){var or=It[ft];Cf(this.layoutVertexArray,or.x,or.y,0,0,1,1,0),We.push(or.x),We.push(or.y)}}}for(var $t=Zv(We,Qe),bt=0;bt<$t.length;bt+=3)this.indexArray.emplaceBack(nt+$t[bt],nt+$t[bt+2],nt+$t[bt+1]);O.primitiveLength+=$t.length/3,O.vertexLength+=k}}var lr;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,s,m,f)},vt("FillExtrusionBucket",ya,{omit:["layers","features"]});var oM={paint:new ci({"fill-extrusion-opacity":new kt(Z["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new xt(Z["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new kt(Z["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new kt(Z["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new sc(Z["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new xt(Z["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new xt(Z["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new kt(Z["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},aM=function(r){function i(s){r.call(this,s,oM)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.createBucket=function(s){return new ya(s)},i.prototype.queryRadius=function(){return qn(this.paint.get("fill-extrusion-translate"))},i.prototype.is3D=function(){return!0},i.prototype.queryIntersectsFeature=function(s,f,m,y,_,S,k,A){var R=da(s,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),S.angle,k),O=this.paint.get("fill-extrusion-height").evaluate(f,m),j=this.paint.get("fill-extrusion-base").evaluate(f,m),H=function(se,_e,fe,Ie){for(var Me=[],ze=0,Be=se;ze<Be.length;ze+=1){var We=Be[ze],Qe=[We.x,We.y,0,1];fc(Qe,Qe,_e),Me.push(new T(Qe[0]/Qe[3],Qe[1]/Qe[3]))}return Me}(R,A),ae=function(se,_e,fe,Ie){for(var Me=[],ze=[],Be=Ie[8]*_e,We=Ie[9]*_e,Qe=Ie[10]*_e,nt=Ie[11]*_e,Et=Ie[8]*fe,ut=Ie[9]*fe,It=Ie[10]*fe,ft=Ie[11]*fe,or=0,$t=se;or<$t.length;or+=1){for(var bt=[],lr=[],Yt=0,xr=$t[or];Yt<xr.length;Yt+=1){var At=xr[Yt],kr=At.x,cn=At.y,_n=Ie[0]*kr+Ie[4]*cn+Ie[12],yn=Ie[1]*kr+Ie[5]*cn+Ie[13],pn=Ie[2]*kr+Ie[6]*cn+Ie[14],xn=Ie[3]*kr+Ie[7]*cn+Ie[15],Wn=pn+Qe,Gn=xn+nt,Ei=_n+Et,ri=yn+ut,Ci=pn+It,Tn=xn+ft,ni=new T((_n+Be)/Gn,(yn+We)/Gn);ni.z=Wn/Gn,bt.push(ni);var hr=new T(Ei/Tn,ri/Tn);hr.z=Ci/Tn,lr.push(hr)}Me.push(bt),ze.push(lr)}return[Me,ze]}(y,j,O,A);return function(se,_e,fe){var Ie=1/0;Bo(fe,_e)&&(Ie=Hb(fe,_e[0]));for(var Me=0;Me<_e.length;Me++)for(var ze=_e[Me],Be=se[Me],We=0;We<ze.length-1;We++){var Qe=ze[We],nt=[Qe,ze[We+1],Be[We+1],Be[We],Qe];Ua(fe,nt)&&(Ie=Math.min(Ie,Hb(fe,nt)))}return Ie!==1/0&&Ie}(ae[0],ae[1],H)},i}(Ko);function kf(r,i){return r.x*i.x+r.y*i.y}function Hb(r,i){if(r.length===1){for(var s,f=0,m=i[f++];!s||m.equals(s);)if(!(s=i[f++]))return 1/0;for(;f<i.length;f++){var y=i[f],_=r[0],S=s.sub(m),k=y.sub(m),A=_.sub(m),R=kf(S,S),O=kf(S,k),j=kf(k,k),H=kf(A,S),ae=kf(A,k),se=R*j-O*O,_e=(j*H-O*ae)/se,fe=(R*ae-O*H)/se,Ie=m.z*(1-_e-fe)+s.z*_e+y.z*fe;if(isFinite(Ie))return Ie}return 1/0}for(var Me=1/0,ze=0,Be=i;ze<Be.length;ze+=1)Me=Math.min(Me,Be[ze].z);return Me}var sM=Qn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,lM=Qn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,uM=yc.VectorTileFeature.types,cM=Math.cos(Math.PI/180*37.5),Zb=Math.pow(2,14)/.5,Li=function(r){var i=this;this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(function(s){return s.id}),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(s){i.gradients[s.id]={}}),this.layoutVertexArray=new Hi,this.layoutVertexArray2=new nl,this.indexArray=new Ba,this.programConfigurations=new Ft(r.layers,r.zoom),this.segments=new X,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(s){return s.isStateDependent()}).map(function(s){return s.id})};Li.prototype.populate=function(r,i,s){this.hasPattern=Qv("line",this.layers,i);for(var f=this.layers[0].layout.get("line-sort-key"),m=[],y=0,_=r;y<_.length;y+=1){var S=_[y],k=S.feature,A=S.id,R=S.index,O=S.sourceLayerIndex,j=this.layers[0]._featureFilter.needGeometry,H=kn(k,j);if(this.layers[0]._featureFilter.filter(new pr(this.zoom),H,s)){var ae=f?f.evaluate(H,{},s):void 0,se={id:A,properties:k.properties,type:k.type,sourceLayerIndex:O,index:R,geometry:j?H.geometry:mn(k),patterns:{},sortKey:ae};m.push(se)}}f&&m.sort(function(Qe,nt){return Qe.sortKey-nt.sortKey});for(var _e=0,fe=m;_e<fe.length;_e+=1){var Ie=fe[_e],Me=Ie.geometry,ze=Ie.index,Be=Ie.sourceLayerIndex;if(this.hasPattern){var We=e0("line",this.layers,Ie,this.zoom,i);this.patternFeatures.push(We)}else this.addFeature(Ie,Me,ze,s,{});i.featureIndex.insert(r[ze].feature,Me,ze,Be,this.index)}},Li.prototype.update=function(r,i,s){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,i,this.stateDependentLayers,s)},Li.prototype.addFeatures=function(r,i,s){for(var f=0,m=this.patternFeatures;f<m.length;f+=1){var y=m[f];this.addFeature(y,y.geometry,y.index,i,s)}},Li.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Li.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Li.prototype.upload=function(r){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=r.createVertexBuffer(this.layoutVertexArray2,lM)),this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,sM),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0},Li.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Li.prototype.lineFeatureClips=function(r){if(r.properties&&r.properties.hasOwnProperty("mapbox_clip_start")&&r.properties.hasOwnProperty("mapbox_clip_end"))return{start:+r.properties.mapbox_clip_start,end:+r.properties.mapbox_clip_end}},Li.prototype.addFeature=function(r,i,s,f,m){var y=this.layers[0].layout,_=y.get("line-join").evaluate(r,{}),S=y.get("line-cap"),k=y.get("line-miter-limit"),A=y.get("line-round-limit");this.lineClips=this.lineFeatureClips(r);for(var R=0,O=i;R<O.length;R+=1)this.addLine(O[R],r,_,S,k,A);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,s,m,f)},Li.prototype.addLine=function(r,i,s,f,m,y){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var _=0;_<r.length-1;_++)this.totalDistance+=r[_].dist(r[_+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var S=uM[i.type]==="Polygon",k=r.length;k>=2&&r[k-1].equals(r[k-2]);)k--;for(var A=0;A<k-1&&r[A].equals(r[A+1]);)A++;if(!(k<(S?3:2))){s==="bevel"&&(m=1.05);var R,O=this.overscaling<=16?122880/(512*this.overscaling):0,j=this.segments.prepareSegment(10*k,this.layoutVertexArray,this.indexArray),H=void 0,ae=void 0,se=void 0,_e=void 0;this.e1=this.e2=-1,S&&(_e=r[A].sub(R=r[k-2])._unit()._perp());for(var fe=A;fe<k;fe++)if(!(ae=fe===k-1?S?r[A+1]:void 0:r[fe+1])||!r[fe].equals(ae)){_e&&(se=_e),R&&(H=R),R=r[fe],_e=ae?ae.sub(R)._unit()._perp():se;var Ie=(se=se||_e).add(_e);Ie.x===0&&Ie.y===0||Ie._unit();var Me=se.x*_e.x+se.y*_e.y,ze=Ie.x*_e.x+Ie.y*_e.y,Be=ze!==0?1/ze:1/0,We=2*Math.sqrt(2-2*ze),Qe=ze<cM&&H&&ae,nt=se.x*_e.y-se.y*_e.x>0;if(Qe&&fe>A){var Et=R.dist(H);if(Et>2*O){var ut=R.sub(R.sub(H)._mult(O/Et)._round());this.updateDistance(H,ut),this.addCurrentVertex(ut,se,0,0,j),H=ut}}var It=H&&ae,ft=It?s:S?"butt":f;if(It&&ft==="round"&&(Be<y?ft="miter":Be<=2&&(ft="fakeround")),ft==="miter"&&Be>m&&(ft="bevel"),ft==="bevel"&&(Be>2&&(ft="flipbevel"),Be<m&&(ft="miter")),H&&this.updateDistance(H,R),ft==="miter")Ie._mult(Be),this.addCurrentVertex(R,Ie,0,0,j);else if(ft==="flipbevel"){if(Be>100)Ie=_e.mult(-1);else{var or=Be*se.add(_e).mag()/se.sub(_e).mag();Ie._perp()._mult(or*(nt?-1:1))}this.addCurrentVertex(R,Ie,0,0,j),this.addCurrentVertex(R,Ie.mult(-1),0,0,j)}else if(ft==="bevel"||ft==="fakeround"){var $t=-Math.sqrt(Be*Be-1),bt=nt?$t:0,lr=nt?0:$t;if(H&&this.addCurrentVertex(R,se,bt,lr,j),ft==="fakeround")for(var Yt=Math.round(180*We/Math.PI/20),xr=1;xr<Yt;xr++){var At=xr/Yt;if(At!==.5){var kr=At-.5;At+=At*kr*(At-1)*((1.0904+Me*(Me*(3.55645-1.43519*Me)-3.2452))*kr*kr+(.848013+Me*(.215638*Me-1.06021)))}var cn=_e.sub(se)._mult(At)._add(se)._unit()._mult(nt?-1:1);this.addHalfVertex(R,cn.x,cn.y,!1,nt,0,j)}ae&&this.addCurrentVertex(R,_e,-bt,-lr,j)}else if(ft==="butt")this.addCurrentVertex(R,Ie,0,0,j);else if(ft==="square"){var _n=H?1:-1;this.addCurrentVertex(R,Ie,_n,_n,j)}else ft==="round"&&(H&&(this.addCurrentVertex(R,se,0,0,j),this.addCurrentVertex(R,se,1,1,j,!0)),ae&&(this.addCurrentVertex(R,_e,-1,-1,j,!0),this.addCurrentVertex(R,_e,0,0,j)));if(Qe&&fe<k-1){var yn=R.dist(ae);if(yn>2*O){var pn=R.add(ae.sub(R)._mult(O/yn)._round());this.updateDistance(R,pn),this.addCurrentVertex(pn,_e,0,0,j),R=pn}}}}},Li.prototype.addCurrentVertex=function(r,i,s,f,m,y){y===void 0&&(y=!1);var _=i.y*f-i.x,S=-i.y-i.x*f;this.addHalfVertex(r,i.x+i.y*s,i.y-i.x*s,y,!1,s,m),this.addHalfVertex(r,_,S,y,!0,-f,m),this.distance>Zb/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(r,i,s,f,m,y))},Li.prototype.addHalfVertex=function(r,i,s,f,m,y,_){var S=.5*(this.lineClips?this.scaledDistance*(Zb-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((r.x<<1)+(f?1:0),(r.y<<1)+(m?1:0),Math.round(63*i)+128,Math.round(63*s)+128,1+(y===0?0:y<0?-1:1)|(63&S)<<2,S>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var k=_.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,k),_.primitiveLength++),m?this.e2=k:this.e1=k},Li.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},Li.prototype.updateDistance=function(r,i){this.distance+=r.dist(i),this.updateScaledDistance()},vt("LineBucket",Li,{omit:["layers","patternFeatures"]});var pM=new ci({"line-cap":new kt(Z.layout_line["line-cap"]),"line-join":new xt(Z.layout_line["line-join"]),"line-miter-limit":new kt(Z.layout_line["line-miter-limit"]),"line-round-limit":new kt(Z.layout_line["line-round-limit"]),"line-sort-key":new xt(Z.layout_line["line-sort-key"])}),Kb={paint:new ci({"line-opacity":new xt(Z.paint_line["line-opacity"]),"line-color":new xt(Z.paint_line["line-color"]),"line-translate":new kt(Z.paint_line["line-translate"]),"line-translate-anchor":new kt(Z.paint_line["line-translate-anchor"]),"line-width":new xt(Z.paint_line["line-width"]),"line-gap-width":new xt(Z.paint_line["line-gap-width"]),"line-offset":new xt(Z.paint_line["line-offset"]),"line-blur":new xt(Z.paint_line["line-blur"]),"line-dasharray":new bi(Z.paint_line["line-dasharray"]),"line-pattern":new sc(Z.paint_line["line-pattern"]),"line-gradient":new Oo(Z.paint_line["line-gradient"])}),layout:pM},Xb=new(function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.possiblyEvaluate=function(s,f){return f=new pr(Math.floor(f.zoom),{now:f.now,fadeDuration:f.fadeDuration,zoomHistory:f.zoomHistory,transition:f.transition}),r.prototype.possiblyEvaluate.call(this,s,f)},i.prototype.evaluate=function(s,f,m,y){return f=V({},f,{zoom:Math.floor(f.zoom)}),r.prototype.evaluate.call(this,s,f,m,y)},i}(xt))(Kb.paint.properties["line-width"].specification);Xb.useIntegerZoom=!0;var fM=function(r){function i(s){r.call(this,s,Kb),this.gradientVersion=0}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._handleSpecialPaintPropertyUpdate=function(s){s==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof ji,this.gradientVersion=(this.gradientVersion+1)%q)},i.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},i.prototype.recalculate=function(s,f){r.prototype.recalculate.call(this,s,f),this.paint._values["line-floorwidth"]=Xb.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,s)},i.prototype.createBucket=function(s){return new Li(s)},i.prototype.queryRadius=function(s){var f=s,m=Yb(Jo("line-width",this,f),Jo("line-gap-width",this,f)),y=Jo("line-offset",this,f);return m/2+Math.abs(y)+qn(this.paint.get("line-translate"))},i.prototype.queryIntersectsFeature=function(s,f,m,y,_,S,k){var A=da(s,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),S.angle,k),R=k/2*Yb(this.paint.get("line-width").evaluate(f,m),this.paint.get("line-gap-width").evaluate(f,m)),O=this.paint.get("line-offset").evaluate(f,m);return O&&(y=function(j,H){for(var ae=[],se=new T(0,0),_e=0;_e<j.length;_e++){for(var fe=j[_e],Ie=[],Me=0;Me<fe.length;Me++){var ze=fe[Me],Be=fe[Me+1],We=Me===0?se:ze.sub(fe[Me-1])._unit()._perp(),Qe=Me===fe.length-1?se:Be.sub(ze)._unit()._perp(),nt=We._add(Qe)._unit();nt._mult(1/(nt.x*Qe.x+nt.y*Qe.y)),Ie.push(nt._mult(H)._add(ze))}ae.push(Ie)}return ae}(y,O*k)),function(j,H,ae){for(var se=0;se<H.length;se++){var _e=H[se];if(j.length>=3){for(var fe=0;fe<_e.length;fe++)if(Yo(j,_e[fe]))return!0}if(go(j,_e,ae))return!0}return!1}(A,y,R)},i.prototype.isTileClipped=function(){return!0},i}(Ko);function Yb(r,i){return i>0?i+2*r:r}var hM=Qn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),dM=Qn([{name:"a_projected_pos",components:3,type:"Float32"}],4),mM=(Qn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Qn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Jb=(Qn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Qn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),yM=Qn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function gM(r,i,s){return r.sections.forEach(function(f){f.text=function(m,y,_){var S=y.layout.get("text-transform").evaluate(_,{});return S==="uppercase"?m=m.toLocaleUpperCase():S==="lowercase"&&(m=m.toLocaleLowerCase()),io.applyArabicShaping&&(m=io.applyArabicShaping(m)),m}(f.text,i,s)}),r}Qn([{name:"triangle",components:3,type:"Uint16"}]),Qn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Qn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Qn([{type:"Float32",name:"offsetX"}]),Qn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Tf={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},Qb=function(r,i,s,f,m){var y,_,S=8*m-f-1,k=(1<<S)-1,A=k>>1,R=-7,O=s?m-1:0,j=s?-1:1,H=r[i+O];for(O+=j,y=H&(1<<-R)-1,H>>=-R,R+=S;R>0;y=256*y+r[i+O],O+=j,R-=8);for(_=y&(1<<-R)-1,y>>=-R,R+=f;R>0;_=256*_+r[i+O],O+=j,R-=8);if(y===0)y=1-A;else{if(y===k)return _?NaN:1/0*(H?-1:1);_+=Math.pow(2,f),y-=A}return(H?-1:1)*_*Math.pow(2,y-f)},ew=function(r,i,s,f,m,y){var _,S,k,A=8*y-m-1,R=(1<<A)-1,O=R>>1,j=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,H=f?0:y-1,ae=f?1:-1,se=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(S=isNaN(i)?1:0,_=R):(_=Math.floor(Math.log(i)/Math.LN2),i*(k=Math.pow(2,-_))<1&&(_--,k*=2),(i+=_+O>=1?j/k:j*Math.pow(2,1-O))*k>=2&&(_++,k/=2),_+O>=R?(S=0,_=R):_+O>=1?(S=(i*k-1)*Math.pow(2,m),_+=O):(S=i*Math.pow(2,O-1)*Math.pow(2,m),_=0));m>=8;r[s+H]=255&S,H+=ae,S/=256,m-=8);for(_=_<<m|S,A+=m;A>0;r[s+H]=255&_,H+=ae,_/=256,A-=8);r[s+H-ae]|=128*se},im=en;function en(r){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(r)?r:new Uint8Array(r||0),this.pos=0,this.type=0,this.length=this.buf.length}en.Varint=0,en.Fixed64=1,en.Bytes=2,en.Fixed32=5;var tw=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Is(r){return r.type===en.Bytes?r.readVarint()+r.pos:r.pos+1}function gc(r,i,s){return s?4294967296*i+(r>>>0):4294967296*(i>>>0)+(r>>>0)}function rw(r,i,s){var f=i<=16383?1:i<=2097151?2:i<=268435455?3:Math.floor(Math.log(i)/(7*Math.LN2));s.realloc(f);for(var m=s.pos-1;m>=r;m--)s.buf[m+f]=s.buf[m]}function vM(r,i){for(var s=0;s<r.length;s++)i.writeVarint(r[s])}function _M(r,i){for(var s=0;s<r.length;s++)i.writeSVarint(r[s])}function xM(r,i){for(var s=0;s<r.length;s++)i.writeFloat(r[s])}function bM(r,i){for(var s=0;s<r.length;s++)i.writeDouble(r[s])}function wM(r,i){for(var s=0;s<r.length;s++)i.writeBoolean(r[s])}function SM(r,i){for(var s=0;s<r.length;s++)i.writeFixed32(r[s])}function EM(r,i){for(var s=0;s<r.length;s++)i.writeSFixed32(r[s])}function CM(r,i){for(var s=0;s<r.length;s++)i.writeFixed64(r[s])}function kM(r,i){for(var s=0;s<r.length;s++)i.writeSFixed64(r[s])}function om(r,i){return(r[i]|r[i+1]<<8|r[i+2]<<16)+16777216*r[i+3]}function vc(r,i,s){r[s]=i,r[s+1]=i>>>8,r[s+2]=i>>>16,r[s+3]=i>>>24}function nw(r,i){return(r[i]|r[i+1]<<8|r[i+2]<<16)+(r[i+3]<<24)}function TM(r,i,s){r===1&&s.readMessage(IM,i)}function IM(r,i,s){if(r===3){var f=s.readMessage(PM,{}),m=f.width,y=f.height,_=f.left,S=f.top,k=f.advance;i.push({id:f.id,bitmap:new pu({width:m+6,height:y+6},f.bitmap),metrics:{width:m,height:y,left:_,top:S,advance:k}})}}function PM(r,i,s){r===1?i.id=s.readVarint():r===2?i.bitmap=s.readBytes():r===3?i.width=s.readVarint():r===4?i.height=s.readVarint():r===5?i.left=s.readSVarint():r===6?i.top=s.readSVarint():r===7&&(i.advance=s.readVarint())}function iw(r){for(var i=0,s=0,f=0,m=r;f<m.length;f+=1){var y=m[f];i+=y.w*y.h,s=Math.max(s,y.w)}r.sort(function(se,_e){return _e.h-se.h});for(var _=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(i/.95)),s),h:1/0}],S=0,k=0,A=0,R=r;A<R.length;A+=1)for(var O=R[A],j=_.length-1;j>=0;j--){var H=_[j];if(!(O.w>H.w||O.h>H.h)){if(O.x=H.x,O.y=H.y,k=Math.max(k,O.y+O.h),S=Math.max(S,O.x+O.w),O.w===H.w&&O.h===H.h){var ae=_.pop();j<_.length&&(_[j]=ae)}else O.h===H.h?(H.x+=O.w,H.w-=O.w):O.w===H.w?(H.y+=O.h,H.h-=O.h):(_.push({x:H.x+O.w,y:H.y,w:H.w-O.w,h:O.h}),H.y+=O.h,H.h-=O.h);break}}return{w:S,h:k,fill:i/(S*k)||0}}en.prototype={destroy:function(){this.buf=null},readFields:function(r,i,s){for(s=s||this.length;this.pos<s;){var f=this.readVarint(),m=f>>3,y=this.pos;this.type=7&f,r(m,i,this),this.pos===y&&this.skip(f)}return i},readMessage:function(r,i){return this.readFields(r,i,this.readVarint()+this.pos)},readFixed32:function(){var r=om(this.buf,this.pos);return this.pos+=4,r},readSFixed32:function(){var r=nw(this.buf,this.pos);return this.pos+=4,r},readFixed64:function(){var r=om(this.buf,this.pos)+4294967296*om(this.buf,this.pos+4);return this.pos+=8,r},readSFixed64:function(){var r=om(this.buf,this.pos)+4294967296*nw(this.buf,this.pos+4);return this.pos+=8,r},readFloat:function(){var r=Qb(this.buf,this.pos,!0,23,4);return this.pos+=4,r},readDouble:function(){var r=Qb(this.buf,this.pos,!0,52,8);return this.pos+=8,r},readVarint:function(r){var i,s,f=this.buf;return i=127&(s=f[this.pos++]),s<128?i:(i|=(127&(s=f[this.pos++]))<<7,s<128?i:(i|=(127&(s=f[this.pos++]))<<14,s<128?i:(i|=(127&(s=f[this.pos++]))<<21,s<128?i:function(m,y,_){var S,k,A=_.buf;if(S=(112&(k=A[_.pos++]))>>4,k<128||(S|=(127&(k=A[_.pos++]))<<3,k<128)||(S|=(127&(k=A[_.pos++]))<<10,k<128)||(S|=(127&(k=A[_.pos++]))<<17,k<128)||(S|=(127&(k=A[_.pos++]))<<24,k<128)||(S|=(1&(k=A[_.pos++]))<<31,k<128))return gc(m,S,y);throw new Error("Expected varint not more than 10 bytes")}(i|=(15&(s=f[this.pos]))<<28,r,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var r=this.readVarint();return r%2==1?(r+1)/-2:r/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var r=this.readVarint()+this.pos,i=this.pos;return this.pos=r,r-i>=12&&tw?function(s,f,m){return tw.decode(s.subarray(f,m))}(this.buf,i,r):function(s,f,m){for(var y="",_=f;_<m;){var S,k,A,R=s[_],O=null,j=R>239?4:R>223?3:R>191?2:1;if(_+j>m)break;j===1?R<128&&(O=R):j===2?(192&(S=s[_+1]))==128&&(O=(31&R)<<6|63&S)<=127&&(O=null):j===3?(k=s[_+2],(192&(S=s[_+1]))==128&&(192&k)==128&&((O=(15&R)<<12|(63&S)<<6|63&k)<=2047||O>=55296&&O<=57343)&&(O=null)):j===4&&(k=s[_+2],A=s[_+3],(192&(S=s[_+1]))==128&&(192&k)==128&&(192&A)==128&&((O=(15&R)<<18|(63&S)<<12|(63&k)<<6|63&A)<=65535||O>=1114112)&&(O=null)),O===null?(O=65533,j=1):O>65535&&(O-=65536,y+=String.fromCharCode(O>>>10&1023|55296),O=56320|1023&O),y+=String.fromCharCode(O),_+=j}return y}(this.buf,i,r)},readBytes:function(){var r=this.readVarint()+this.pos,i=this.buf.subarray(this.pos,r);return this.pos=r,i},readPackedVarint:function(r,i){if(this.type!==en.Bytes)return r.push(this.readVarint(i));var s=Is(this);for(r=r||[];this.pos<s;)r.push(this.readVarint(i));return r},readPackedSVarint:function(r){if(this.type!==en.Bytes)return r.push(this.readSVarint());var i=Is(this);for(r=r||[];this.pos<i;)r.push(this.readSVarint());return r},readPackedBoolean:function(r){if(this.type!==en.Bytes)return r.push(this.readBoolean());var i=Is(this);for(r=r||[];this.pos<i;)r.push(this.readBoolean());return r},readPackedFloat:function(r){if(this.type!==en.Bytes)return r.push(this.readFloat());var i=Is(this);for(r=r||[];this.pos<i;)r.push(this.readFloat());return r},readPackedDouble:function(r){if(this.type!==en.Bytes)return r.push(this.readDouble());var i=Is(this);for(r=r||[];this.pos<i;)r.push(this.readDouble());return r},readPackedFixed32:function(r){if(this.type!==en.Bytes)return r.push(this.readFixed32());var i=Is(this);for(r=r||[];this.pos<i;)r.push(this.readFixed32());return r},readPackedSFixed32:function(r){if(this.type!==en.Bytes)return r.push(this.readSFixed32());var i=Is(this);for(r=r||[];this.pos<i;)r.push(this.readSFixed32());return r},readPackedFixed64:function(r){if(this.type!==en.Bytes)return r.push(this.readFixed64());var i=Is(this);for(r=r||[];this.pos<i;)r.push(this.readFixed64());return r},readPackedSFixed64:function(r){if(this.type!==en.Bytes)return r.push(this.readSFixed64());var i=Is(this);for(r=r||[];this.pos<i;)r.push(this.readSFixed64());return r},skip:function(r){var i=7&r;if(i===en.Varint)for(;this.buf[this.pos++]>127;);else if(i===en.Bytes)this.pos=this.readVarint()+this.pos;else if(i===en.Fixed32)this.pos+=4;else{if(i!==en.Fixed64)throw new Error("Unimplemented type: "+i);this.pos+=8}},writeTag:function(r,i){this.writeVarint(r<<3|i)},realloc:function(r){for(var i=this.length||16;i<this.pos+r;)i*=2;if(i!==this.length){var s=new Uint8Array(i);s.set(this.buf),this.buf=s,this.length=i}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(r){this.realloc(4),vc(this.buf,r,this.pos),this.pos+=4},writeSFixed32:function(r){this.realloc(4),vc(this.buf,r,this.pos),this.pos+=4},writeFixed64:function(r){this.realloc(8),vc(this.buf,-1&r,this.pos),vc(this.buf,Math.floor(r*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(r){this.realloc(8),vc(this.buf,-1&r,this.pos),vc(this.buf,Math.floor(r*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(r){(r=+r||0)>268435455||r<0?function(i,s){var f,m;if(i>=0?(f=i%4294967296|0,m=i/4294967296|0):(m=~(-i/4294967296),4294967295^(f=~(-i%4294967296))?f=f+1|0:(f=0,m=m+1|0)),i>=18446744073709552e3||i<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");s.realloc(10),function(y,_,S){S.buf[S.pos++]=127&y|128,y>>>=7,S.buf[S.pos++]=127&y|128,y>>>=7,S.buf[S.pos++]=127&y|128,y>>>=7,S.buf[S.pos++]=127&y|128,S.buf[S.pos]=127&(y>>>=7)}(f,0,s),function(y,_){var S=(7&y)<<4;_.buf[_.pos++]|=S|((y>>>=3)?128:0),y&&(_.buf[_.pos++]=127&y|((y>>>=7)?128:0),y&&(_.buf[_.pos++]=127&y|((y>>>=7)?128:0),y&&(_.buf[_.pos++]=127&y|((y>>>=7)?128:0),y&&(_.buf[_.pos++]=127&y|((y>>>=7)?128:0),y&&(_.buf[_.pos++]=127&y)))))}(m,s)}(r,this):(this.realloc(4),this.buf[this.pos++]=127&r|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=r>>>7&127))))},writeSVarint:function(r){this.writeVarint(r<0?2*-r-1:2*r)},writeBoolean:function(r){this.writeVarint(!!r)},writeString:function(r){r=String(r),this.realloc(4*r.length),this.pos++;var i=this.pos;this.pos=function(f,m,y){for(var _,S,k=0;k<m.length;k++){if((_=m.charCodeAt(k))>55295&&_<57344){if(!S){_>56319||k+1===m.length?(f[y++]=239,f[y++]=191,f[y++]=189):S=_;continue}if(_<56320){f[y++]=239,f[y++]=191,f[y++]=189,S=_;continue}_=S-55296<<10|_-56320|65536,S=null}else S&&(f[y++]=239,f[y++]=191,f[y++]=189,S=null);_<128?f[y++]=_:(_<2048?f[y++]=_>>6|192:(_<65536?f[y++]=_>>12|224:(f[y++]=_>>18|240,f[y++]=_>>12&63|128),f[y++]=_>>6&63|128),f[y++]=63&_|128)}return y}(this.buf,r,this.pos);var s=this.pos-i;s>=128&&rw(i,s,this),this.pos=i-1,this.writeVarint(s),this.pos+=s},writeFloat:function(r){this.realloc(4),ew(this.buf,r,this.pos,!0,23,4),this.pos+=4},writeDouble:function(r){this.realloc(8),ew(this.buf,r,this.pos,!0,52,8),this.pos+=8},writeBytes:function(r){var i=r.length;this.writeVarint(i),this.realloc(i);for(var s=0;s<i;s++)this.buf[this.pos++]=r[s]},writeRawMessage:function(r,i){this.pos++;var s=this.pos;r(i,this);var f=this.pos-s;f>=128&&rw(s,f,this),this.pos=s-1,this.writeVarint(f),this.pos+=f},writeMessage:function(r,i,s){this.writeTag(r,en.Bytes),this.writeRawMessage(i,s)},writePackedVarint:function(r,i){i.length&&this.writeMessage(r,vM,i)},writePackedSVarint:function(r,i){i.length&&this.writeMessage(r,_M,i)},writePackedBoolean:function(r,i){i.length&&this.writeMessage(r,wM,i)},writePackedFloat:function(r,i){i.length&&this.writeMessage(r,xM,i)},writePackedDouble:function(r,i){i.length&&this.writeMessage(r,bM,i)},writePackedFixed32:function(r,i){i.length&&this.writeMessage(r,SM,i)},writePackedSFixed32:function(r,i){i.length&&this.writeMessage(r,EM,i)},writePackedFixed64:function(r,i){i.length&&this.writeMessage(r,CM,i)},writePackedSFixed64:function(r,i){i.length&&this.writeMessage(r,kM,i)},writeBytesField:function(r,i){this.writeTag(r,en.Bytes),this.writeBytes(i)},writeFixed32Field:function(r,i){this.writeTag(r,en.Fixed32),this.writeFixed32(i)},writeSFixed32Field:function(r,i){this.writeTag(r,en.Fixed32),this.writeSFixed32(i)},writeFixed64Field:function(r,i){this.writeTag(r,en.Fixed64),this.writeFixed64(i)},writeSFixed64Field:function(r,i){this.writeTag(r,en.Fixed64),this.writeSFixed64(i)},writeVarintField:function(r,i){this.writeTag(r,en.Varint),this.writeVarint(i)},writeSVarintField:function(r,i){this.writeTag(r,en.Varint),this.writeSVarint(i)},writeStringField:function(r,i){this.writeTag(r,en.Bytes),this.writeString(i)},writeFloatField:function(r,i){this.writeTag(r,en.Fixed32),this.writeFloat(i)},writeDoubleField:function(r,i){this.writeTag(r,en.Fixed64),this.writeDouble(i)},writeBooleanField:function(r,i){this.writeVarintField(r,!!i)}};var am=function(r,i){var s=i.pixelRatio,f=i.version,m=i.stretchX,y=i.stretchY,_=i.content;this.paddedRect=r,this.pixelRatio=s,this.stretchX=m,this.stretchY=y,this.content=_,this.version=f},If={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};If.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},If.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},If.tlbr.get=function(){return this.tl.concat(this.br)},If.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(am.prototype,If);var Pf=function(r,i){var s={},f={};this.haveRenderCallbacks=[];var m=[];this.addImages(r,s,m),this.addImages(i,f,m);var y=iw(m),_=new Ki({width:y.w||1,height:y.h||1});for(var S in r){var k=r[S],A=s[S].paddedRect;Ki.copy(k.data,_,{x:0,y:0},{x:A.x+1,y:A.y+1},k.data)}for(var R in i){var O=i[R],j=f[R].paddedRect,H=j.x+1,ae=j.y+1,se=O.data.width,_e=O.data.height;Ki.copy(O.data,_,{x:0,y:0},{x:H,y:ae},O.data),Ki.copy(O.data,_,{x:0,y:_e-1},{x:H,y:ae-1},{width:se,height:1}),Ki.copy(O.data,_,{x:0,y:0},{x:H,y:ae+_e},{width:se,height:1}),Ki.copy(O.data,_,{x:se-1,y:0},{x:H-1,y:ae},{width:1,height:_e}),Ki.copy(O.data,_,{x:0,y:0},{x:H+se,y:ae},{width:1,height:_e})}this.image=_,this.iconPositions=s,this.patternPositions=f};Pf.prototype.addImages=function(r,i,s){for(var f in r){var m=r[f],y={x:0,y:0,w:m.data.width+2,h:m.data.height+2};s.push(y),i[f]=new am(y,m),m.hasRenderCallback&&this.haveRenderCallbacks.push(f)}},Pf.prototype.patchUpdatedImages=function(r,i){for(var s in r.dispatchRenderCallbacks(this.haveRenderCallbacks),r.updatedImages)this.patchUpdatedImage(this.iconPositions[s],r.getImage(s),i),this.patchUpdatedImage(this.patternPositions[s],r.getImage(s),i)},Pf.prototype.patchUpdatedImage=function(r,i,s){if(r&&i&&r.version!==i.version){r.version=i.version;var f=r.tl;s.update(i.data,void 0,{x:f[0],y:f[1]})}},vt("ImagePosition",am),vt("ImageAtlas",Pf);var vo={horizontal:1,vertical:2,horizontalOnly:3},_c=function(){this.scale=1,this.fontStack="",this.imageName=null};_c.forText=function(r,i){var s=new _c;return s.scale=r||1,s.fontStack=i,s},_c.forImage=function(r){var i=new _c;return i.imageName=r,i};var Si=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function sm(r,i,s,f,m,y,_,S,k,A,R,O,j,H,ae,se){var _e,fe=Si.fromFeature(r,m);O===vo.vertical&&fe.verticalizePunctuation();var Ie=io.processBidirectionalText,Me=io.processStyledBidirectionalText;if(Ie&&fe.sections.length===1){_e=[];for(var ze=0,Be=Ie(fe.toString(),r0(fe,A,y,i,f,H,ae));ze<Be.length;ze+=1){var We=Be[ze],Qe=new Si;Qe.text=We,Qe.sections=fe.sections;for(var nt=0;nt<We.length;nt++)Qe.sectionIndex.push(0);_e.push(Qe)}}else if(Me){_e=[];for(var Et=0,ut=Me(fe.text,fe.sectionIndex,r0(fe,A,y,i,f,H,ae));Et<ut.length;Et+=1){var It=ut[Et],ft=new Si;ft.text=It[0],ft.sectionIndex=It[1],ft.sections=fe.sections,_e.push(ft)}}else _e=function(bt,lr){for(var Yt=[],xr=bt.text,At=0,kr=0,cn=lr;kr<cn.length;kr+=1){var _n=cn[kr];Yt.push(bt.substring(At,_n)),At=_n}return At<xr.length&&Yt.push(bt.substring(At,xr.length)),Yt}(fe,r0(fe,A,y,i,f,H,ae));var or=[],$t={positionedLines:or,text:fe.toString(),top:R[1],bottom:R[1],left:R[0],right:R[0],writingMode:O,iconsInText:!1,verticalizable:!1};return function(bt,lr,Yt,xr,At,kr,cn,_n,yn,pn,xn,Wn){for(var Gn=0,Ei=-17,ri=0,Ci=0,Tn=_n==="right"?1:_n==="left"?0:.5,ni=0,hr=0,Kr=At;hr<Kr.length;hr+=1){var Ur=Kr[hr];Ur.trim();var wr=Ur.getMaxScale(),zi=24*(wr-1),di={positionedGlyphs:[],lineOffset:0};bt.positionedLines[ni]=di;var on=di.positionedGlyphs,zn=0;if(Ur.length()){for(var mi=0;mi<Ur.length();mi++){var Tr=Ur.getSection(mi),Va=Ur.getSectionIndex(mi),_o=Ur.getCharCode(mi),qa=0,In=null,Wa=null,Qo=null,Tc=24,mu=!(yn===vo.horizontal||!xn&&!ic(_o)||xn&&(lm[_o]||(Rs=_o,ot.Arabic(Rs)||ot["Arabic Supplement"](Rs)||ot["Arabic Extended-A"](Rs)||ot["Arabic Presentation Forms-A"](Rs)||ot["Arabic Presentation Forms-B"](Rs))));if(Tr.imageName){var Ic=xr[Tr.imageName];if(!Ic)continue;Qo=Tr.imageName,bt.iconsInText=bt.iconsInText||!0,Wa=Ic.paddedRect;var Ms=Ic.displaySize;Tr.scale=24*Tr.scale/Wn,qa=zi+(24-Ms[1]*Tr.scale),Tc=(In={width:Ms[0],height:Ms[1],left:1,top:-3,advance:mu?Ms[1]:Ms[0]}).advance;var Pc=mu?Ms[0]*Tr.scale-24*wr:Ms[1]*Tr.scale-24*wr;Pc>0&&Pc>zn&&(zn=Pc)}else{var gm=Yt[Tr.fontStack],Ac=gm&&gm[_o];if(Ac&&Ac.rect)Wa=Ac.rect,In=Ac.metrics;else{var Rf=lr[Tr.fontStack],vm=Rf&&Rf[_o];if(!vm)continue;In=vm.metrics}qa=24*(wr-Tr.scale)}mu?(bt.verticalizable=!0,on.push({glyph:_o,imageName:Qo,x:Gn,y:Ei+qa,vertical:mu,scale:Tr.scale,fontStack:Tr.fontStack,sectionIndex:Va,metrics:In,rect:Wa}),Gn+=Tc*Tr.scale+pn):(on.push({glyph:_o,imageName:Qo,x:Gn,y:Ei+qa,vertical:mu,scale:Tr.scale,fontStack:Tr.fontStack,sectionIndex:Va,metrics:In,rect:Wa}),Gn+=In.advance*Tr.scale+pn)}on.length!==0&&(ri=Math.max(Gn-pn,ri),MM(on,0,on.length-1,Tn,zn)),Gn=0;var _m=kr*wr+zn;di.lineOffset=Math.max(zn,zi),Ei+=_m,Ci=Math.max(_m,Ci),++ni}else Ei+=kr,++ni}var Rs,Lf=Ei- -17,Mc=n0(cn),pl=Mc.horizontalAlign,Rc=Mc.verticalAlign;(function(xm,bm,zf,Df,wm,Of,Bf,Nf,Sm){var Lc,Em=(bm-zf)*wm;Lc=Of!==Bf?-Nf*Df- -17:(-Df*Sm+.5)*Bf;for(var zc=0,Ff=xm;zc<Ff.length;zc+=1)for(var yu=0,Uf=Ff[zc].positionedGlyphs;yu<Uf.length;yu+=1){var Dc=Uf[yu];Dc.x+=Em,Dc.y+=Lc}})(bt.positionedLines,Tn,pl,Rc,ri,Ci,kr,Lf,At.length),bt.top+=-Rc*Lf,bt.bottom=bt.top+Lf,bt.left+=-pl*ri,bt.right=bt.left+ri}($t,i,s,f,_e,_,S,k,O,A,j,se),!function(bt){for(var lr=0,Yt=bt;lr<Yt.length;lr+=1)if(Yt[lr].positionedGlyphs.length!==0)return!1;return!0}(or)&&$t}Si.fromFeature=function(r,i){for(var s=new Si,f=0;f<r.sections.length;f++){var m=r.sections[f];m.image?s.addImageSection(m):s.addTextSection(m,i)}return s},Si.prototype.length=function(){return this.text.length},Si.prototype.getSection=function(r){return this.sections[this.sectionIndex[r]]},Si.prototype.getSectionIndex=function(r){return this.sectionIndex[r]},Si.prototype.getCharCode=function(r){return this.text.charCodeAt(r)},Si.prototype.verticalizePunctuation=function(){this.text=function(r){for(var i="",s=0;s<r.length;s++){var f=r.charCodeAt(s+1)||null,m=r.charCodeAt(s-1)||null;i+=f&&ff(f)&&!Tf[r[s+1]]||m&&ff(m)&&!Tf[r[s-1]]||!Tf[r[s]]?r[s]:Tf[r[s]]}return i}(this.text)},Si.prototype.trim=function(){for(var r=0,i=0;i<this.text.length&&lm[this.text.charCodeAt(i)];i++)r++;for(var s=this.text.length,f=this.text.length-1;f>=0&&f>=r&&lm[this.text.charCodeAt(f)];f--)s--;this.text=this.text.substring(r,s),this.sectionIndex=this.sectionIndex.slice(r,s)},Si.prototype.substring=function(r,i){var s=new Si;return s.text=this.text.substring(r,i),s.sectionIndex=this.sectionIndex.slice(r,i),s.sections=this.sections,s},Si.prototype.toString=function(){return this.text},Si.prototype.getMaxScale=function(){var r=this;return this.sectionIndex.reduce(function(i,s){return Math.max(i,r.sections[s].scale)},0)},Si.prototype.addTextSection=function(r,i){this.text+=r.text,this.sections.push(_c.forText(r.scale,r.fontStack||i));for(var s=this.sections.length-1,f=0;f<r.text.length;++f)this.sectionIndex.push(s)},Si.prototype.addImageSection=function(r){var i=r.image?r.image.name:"";if(i.length!==0){var s=this.getNextImageSectionCharCode();s?(this.text+=String.fromCharCode(s),this.sections.push(_c.forImage(i)),this.sectionIndex.push(this.sections.length-1)):pe("Reached maximum number of images 6401")}else pe("Can't add FormattedSection with an empty image.")},Si.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var lm={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},ao={};function ow(r,i,s,f,m,y){if(i.imageName){var _=f[i.imageName];return _?_.displaySize[0]*i.scale*24/y+m:0}var S=s[i.fontStack],k=S&&S[r];return k?k.metrics.advance*i.scale+m:0}function aw(r,i,s,f){var m=Math.pow(r-i,2);return f?r<i?m/2:2*m:m+Math.abs(s)*s}function AM(r,i,s){var f=0;return r===10&&(f-=1e4),s&&(f+=150),r!==40&&r!==65288||(f+=50),i!==41&&i!==65289||(f+=50),f}function sw(r,i,s,f,m,y){for(var _=null,S=aw(i,s,m,y),k=0,A=f;k<A.length;k+=1){var R=A[k],O=aw(i-R.x,s,m,y)+R.badness;O<=S&&(_=R,S=O)}return{index:r,x:i,priorBreak:_,badness:S}}function r0(r,i,s,f,m,y,_){if(y!=="point")return[];if(!r)return[];for(var S,k=[],A=function(_e,fe,Ie,Me,ze,Be){for(var We=0,Qe=0;Qe<_e.length();Qe++){var nt=_e.getSection(Qe);We+=ow(_e.getCharCode(Qe),nt,Me,ze,fe,Be)}return We/Math.max(1,Math.ceil(We/Ie))}(r,i,s,f,m,_),R=r.text.indexOf("")>=0,O=0,j=0;j<r.length();j++){var H=r.getSection(j),ae=r.getCharCode(j);if(lm[ae]||(O+=ow(ae,H,f,m,i,_)),j<r.length()-1){var se=!((S=ae)<11904||!(ot["Bopomofo Extended"](S)||ot.Bopomofo(S)||ot["CJK Compatibility Forms"](S)||ot["CJK Compatibility Ideographs"](S)||ot["CJK Compatibility"](S)||ot["CJK Radicals Supplement"](S)||ot["CJK Strokes"](S)||ot["CJK Symbols and Punctuation"](S)||ot["CJK Unified Ideographs Extension A"](S)||ot["CJK Unified Ideographs"](S)||ot["Enclosed CJK Letters and Months"](S)||ot["Halfwidth and Fullwidth Forms"](S)||ot.Hiragana(S)||ot["Ideographic Description Characters"](S)||ot["Kangxi Radicals"](S)||ot["Katakana Phonetic Extensions"](S)||ot.Katakana(S)||ot["Vertical Forms"](S)||ot["Yi Radicals"](S)||ot["Yi Syllables"](S)));(ao[ae]||se||H.imageName)&&k.push(sw(j+1,O,A,k,AM(ae,r.getCharCode(j+1),se&&R),!1))}}return function _e(fe){return fe?_e(fe.priorBreak).concat(fe.index):[]}(sw(r.length(),O,A,k,0,!0))}function n0(r){var i=.5,s=.5;switch(r){case"right":case"top-right":case"bottom-right":i=1;break;case"left":case"top-left":case"bottom-left":i=0}switch(r){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:i,verticalAlign:s}}function MM(r,i,s,f,m){if(f||m)for(var y=r[s],_=(r[s].x+y.metrics.advance*y.scale)*f,S=i;S<=s;S++)r[S].x-=_,r[S].y+=m}function lw(r,i,s,f,m,y){var _,S=r.image;if(S.content){var k=S.content,A=S.pixelRatio||1;_=[k[0]/A,k[1]/A,S.displaySize[0]-k[2]/A,S.displaySize[1]-k[3]/A]}var R,O,j,H,ae=i.left*y,se=i.right*y;s==="width"||s==="both"?(H=m[0]+ae-f[3],O=m[0]+se+f[1]):O=(H=m[0]+(ae+se-S.displaySize[0])/2)+S.displaySize[0];var _e=i.top*y,fe=i.bottom*y;return s==="height"||s==="both"?(R=m[1]+_e-f[0],j=m[1]+fe+f[2]):j=(R=m[1]+(_e+fe-S.displaySize[1])/2)+S.displaySize[1],{image:S,top:R,right:O,bottom:j,left:H,collisionPadding:_}}ao[10]=!0,ao[32]=!0,ao[38]=!0,ao[40]=!0,ao[41]=!0,ao[43]=!0,ao[45]=!0,ao[47]=!0,ao[173]=!0,ao[183]=!0,ao[8203]=!0,ao[8208]=!0,ao[8211]=!0,ao[8231]=!0;var xc=function(r){function i(s,f,m,y){r.call(this,s,f),this.angle=m,y!==void 0&&(this.segment=y)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.clone=function(){return new i(this.x,this.y,this.angle,this.segment)},i}(T);function i0(r,i){var s=i.expression;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new pr(r+1))};if(s.kind==="source")return{kind:"source"};for(var f=s.zoomStops,m=s.interpolationType,y=0;y<f.length&&f[y]<=r;)y++;for(var _=y=Math.max(0,y-1);_<f.length&&f[_]<r+1;)_++;_=Math.min(f.length-1,_);var S=f[y],k=f[_];return s.kind==="composite"?{kind:"composite",minZoom:S,maxZoom:k,interpolationType:m}:{kind:"camera",minZoom:S,maxZoom:k,minSize:s.evaluate(new pr(S)),maxSize:s.evaluate(new pr(k)),interpolationType:m}}function uw(r,i,s){var f=i.uSize,m=s.lowerSize;return r.kind==="source"?m/128:r.kind==="composite"?Rn(m/128,s.upperSize/128,i.uSizeT):f}function cw(r,i){var s=0,f=0;if(r.kind==="constant")f=r.layoutSize;else if(r.kind!=="source"){var m=r.interpolationType,y=m?D(li.interpolationFactor(m,i,r.minZoom,r.maxZoom),0,1):0;r.kind==="camera"?f=Rn(r.minSize,r.maxSize,y):s=y}return{uSizeT:s,uSize:f}}vt("Anchor",xc);var RM=Object.freeze({__proto__:null,getSizeData:i0,evaluateSizeForFeature:uw,evaluateSizeForZoom:cw,SIZE_PACK_FACTOR:128});function pw(r,i,s,f,m){if(i.segment===void 0)return!0;for(var y=i,_=i.segment+1,S=0;S>-s/2;){if(--_<0)return!1;S-=r[_].dist(y),y=r[_]}S+=r[_].dist(r[_+1]),_++;for(var k=[],A=0;S<s/2;){var R=r[_],O=r[_+1];if(!O)return!1;var j=r[_-1].angleTo(R)-R.angleTo(O);for(j=Math.abs((j+3*Math.PI)%(2*Math.PI)-Math.PI),k.push({distance:S,angleDelta:j}),A+=j;S-k[0].distance>f;)A-=k.shift().angleDelta;if(A>m)return!1;_++,S+=R.dist(O)}return!0}function fw(r){for(var i=0,s=0;s<r.length-1;s++)i+=r[s].dist(r[s+1]);return i}function hw(r,i,s){return r?.6*i*s:0}function dw(r,i){return Math.max(r?r.right-r.left:0,i?i.right-i.left:0)}function LM(r,i,s,f,m,y){for(var _=hw(s,m,y),S=dw(s,f)*y,k=0,A=fw(r)/2,R=0;R<r.length-1;R++){var O=r[R],j=r[R+1],H=O.dist(j);if(k+H>A){var ae=(A-k)/H,se=Rn(O.x,j.x,ae),_e=Rn(O.y,j.y,ae),fe=new xc(se,_e,j.angleTo(O),R);return fe._round(),!_||pw(r,fe,S,_,i)?fe:void 0}k+=H}}function zM(r,i,s,f,m,y,_,S,k){var A=hw(f,y,_),R=dw(f,m),O=R*_,j=r[0].x===0||r[0].x===k||r[0].y===0||r[0].y===k;return i-O<i/4&&(i=O+i/4),function H(ae,se,_e,fe,Ie,Me,ze,Be,We){for(var Qe=Me/2,nt=fw(ae),Et=0,ut=se-_e,It=[],ft=0;ft<ae.length-1;ft++){for(var or=ae[ft],$t=ae[ft+1],bt=or.dist($t),lr=$t.angleTo(or);ut+_e<Et+bt;){var Yt=((ut+=_e)-Et)/bt,xr=Rn(or.x,$t.x,Yt),At=Rn(or.y,$t.y,Yt);if(xr>=0&&xr<We&&At>=0&&At<We&&ut-Qe>=0&&ut+Qe<=nt){var kr=new xc(xr,At,lr,ft);kr._round(),fe&&!pw(ae,kr,Me,fe,Ie)||It.push(kr)}}Et+=bt}return Be||It.length||ze||(It=H(ae,Et/2,_e,fe,Ie,Me,ze,!0,We)),It}(r,j?i/2*S%i:(R/2+2*y)*_*S%i,i,A,s,O,j,!1,k)}function mw(r,i,s,f,m){for(var y=[],_=0;_<r.length;_++)for(var S=r[_],k=void 0,A=0;A<S.length-1;A++){var R=S[A],O=S[A+1];R.x<i&&O.x<i||(R.x<i?R=new T(i,R.y+(i-R.x)/(O.x-R.x)*(O.y-R.y))._round():O.x<i&&(O=new T(i,R.y+(i-R.x)/(O.x-R.x)*(O.y-R.y))._round()),R.y<s&&O.y<s||(R.y<s?R=new T(R.x+(s-R.y)/(O.y-R.y)*(O.x-R.x),s)._round():O.y<s&&(O=new T(R.x+(s-R.y)/(O.y-R.y)*(O.x-R.x),s)._round()),R.x>=f&&O.x>=f||(R.x>=f?R=new T(f,R.y+(f-R.x)/(O.x-R.x)*(O.y-R.y))._round():O.x>=f&&(O=new T(f,R.y+(f-R.x)/(O.x-R.x)*(O.y-R.y))._round()),R.y>=m&&O.y>=m||(R.y>=m?R=new T(R.x+(m-R.y)/(O.y-R.y)*(O.x-R.x),m)._round():O.y>=m&&(O=new T(R.x+(m-R.y)/(O.y-R.y)*(O.x-R.x),m)._round()),k&&R.equals(k[k.length-1])||y.push(k=[R]),k.push(O)))))}return y}function yw(r,i,s,f){var m=[],y=r.image,_=y.pixelRatio,S=y.paddedRect.w-2,k=y.paddedRect.h-2,A=r.right-r.left,R=r.bottom-r.top,O=y.stretchX||[[0,S]],j=y.stretchY||[[0,k]],H=function(xr,At){return xr+At[1]-At[0]},ae=O.reduce(H,0),se=j.reduce(H,0),_e=S-ae,fe=k-se,Ie=0,Me=ae,ze=0,Be=se,We=0,Qe=_e,nt=0,Et=fe;if(y.content&&f){var ut=y.content;Ie=um(O,0,ut[0]),ze=um(j,0,ut[1]),Me=um(O,ut[0],ut[2]),Be=um(j,ut[1],ut[3]),We=ut[0]-Ie,nt=ut[1]-ze,Qe=ut[2]-ut[0]-Me,Et=ut[3]-ut[1]-Be}var It=function(xr,At,kr,cn){var _n=cm(xr.stretch-Ie,Me,A,r.left),yn=pm(xr.fixed-We,Qe,xr.stretch,ae),pn=cm(At.stretch-ze,Be,R,r.top),xn=pm(At.fixed-nt,Et,At.stretch,se),Wn=cm(kr.stretch-Ie,Me,A,r.left),Gn=pm(kr.fixed-We,Qe,kr.stretch,ae),Ei=cm(cn.stretch-ze,Be,R,r.top),ri=pm(cn.fixed-nt,Et,cn.stretch,se),Ci=new T(_n,pn),Tn=new T(Wn,pn),ni=new T(Wn,Ei),hr=new T(_n,Ei),Kr=new T(yn/_,xn/_),Ur=new T(Gn/_,ri/_),wr=i*Math.PI/180;if(wr){var zi=Math.sin(wr),di=Math.cos(wr),on=[di,-zi,zi,di];Ci._matMult(on),Tn._matMult(on),hr._matMult(on),ni._matMult(on)}var zn=xr.stretch+xr.fixed,mi=At.stretch+At.fixed;return{tl:Ci,tr:Tn,bl:hr,br:ni,tex:{x:y.paddedRect.x+1+zn,y:y.paddedRect.y+1+mi,w:kr.stretch+kr.fixed-zn,h:cn.stretch+cn.fixed-mi},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Kr,pixelOffsetBR:Ur,minFontScaleX:Qe/_/A,minFontScaleY:Et/_/R,isSDF:s}};if(f&&(y.stretchX||y.stretchY))for(var ft=gw(O,_e,ae),or=gw(j,fe,se),$t=0;$t<ft.length-1;$t++)for(var bt=ft[$t],lr=ft[$t+1],Yt=0;Yt<or.length-1;Yt++)m.push(It(bt,or[Yt],lr,or[Yt+1]));else m.push(It({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:S+1},{fixed:0,stretch:k+1}));return m}function um(r,i,s){for(var f=0,m=0,y=r;m<y.length;m+=1){var _=y[m];f+=Math.max(i,Math.min(s,_[1]))-Math.max(i,Math.min(s,_[0]))}return f}function gw(r,i,s){for(var f=[{fixed:-1,stretch:0}],m=0,y=r;m<y.length;m+=1){var _=y[m],S=_[0],k=_[1],A=f[f.length-1];f.push({fixed:S-A.stretch,stretch:A.stretch}),f.push({fixed:S-A.stretch,stretch:A.stretch+(k-S)})}return f.push({fixed:i+1,stretch:s}),f}function cm(r,i,s,f){return r/i*s+f}function pm(r,i,s,f){return r-i*s/f}var fm=function(r,i,s,f,m,y,_,S,k,A){if(this.boxStartIndex=r.length,k){var R=y.top,O=y.bottom,j=y.collisionPadding;j&&(R-=j[1],O+=j[3]);var H=O-R;H>0&&(H=Math.max(10,H),this.circleDiameter=H)}else{var ae=y.top*_-S,se=y.bottom*_+S,_e=y.left*_-S,fe=y.right*_+S,Ie=y.collisionPadding;if(Ie&&(_e-=Ie[0]*_,ae-=Ie[1]*_,fe+=Ie[2]*_,se+=Ie[3]*_),A){var Me=new T(_e,ae),ze=new T(fe,ae),Be=new T(_e,se),We=new T(fe,se),Qe=A*Math.PI/180;Me._rotate(Qe),ze._rotate(Qe),Be._rotate(Qe),We._rotate(Qe),_e=Math.min(Me.x,ze.x,Be.x,We.x),fe=Math.max(Me.x,ze.x,Be.x,We.x),ae=Math.min(Me.y,ze.y,Be.y,We.y),se=Math.max(Me.y,ze.y,Be.y,We.y)}r.emplaceBack(i.x,i.y,_e,ae,fe,se,s,f,m)}this.boxEndIndex=r.length},bc=function(r,i){if(r===void 0&&(r=[]),i===void 0&&(i=DM),this.data=r,this.length=this.data.length,this.compare=i,this.length>0)for(var s=(this.length>>1)-1;s>=0;s--)this._down(s)};function DM(r,i){return r<i?-1:r>i?1:0}function OM(r,i,s){i===void 0&&(i=1),s===void 0&&(s=!1);for(var f=1/0,m=1/0,y=-1/0,_=-1/0,S=r[0],k=0;k<S.length;k++){var A=S[k];(!k||A.x<f)&&(f=A.x),(!k||A.y<m)&&(m=A.y),(!k||A.x>y)&&(y=A.x),(!k||A.y>_)&&(_=A.y)}var R=Math.min(y-f,_-m),O=R/2,j=new bc([],BM);if(R===0)return new T(f,m);for(var H=f;H<y;H+=R)for(var ae=m;ae<_;ae+=R)j.push(new wc(H+O,ae+O,O,r));for(var se=function(Ie){for(var Me=0,ze=0,Be=0,We=Ie[0],Qe=0,nt=We.length,Et=nt-1;Qe<nt;Et=Qe++){var ut=We[Qe],It=We[Et],ft=ut.x*It.y-It.x*ut.y;ze+=(ut.x+It.x)*ft,Be+=(ut.y+It.y)*ft,Me+=3*ft}return new wc(ze/Me,Be/Me,0,Ie)}(r),_e=j.length;j.length;){var fe=j.pop();(fe.d>se.d||!se.d)&&(se=fe,s&&console.log("found best %d after %d probes",Math.round(1e4*fe.d)/1e4,_e)),fe.max-se.d<=i||(j.push(new wc(fe.p.x-(O=fe.h/2),fe.p.y-O,O,r)),j.push(new wc(fe.p.x+O,fe.p.y-O,O,r)),j.push(new wc(fe.p.x-O,fe.p.y+O,O,r)),j.push(new wc(fe.p.x+O,fe.p.y+O,O,r)),_e+=4)}return s&&(console.log("num probes: "+_e),console.log("best distance: "+se.d)),se.p}function BM(r,i){return i.max-r.max}function wc(r,i,s,f){this.p=new T(r,i),this.h=s,this.d=function(m,y){for(var _=!1,S=1/0,k=0;k<y.length;k++)for(var A=y[k],R=0,O=A.length,j=O-1;R<O;j=R++){var H=A[R],ae=A[j];H.y>m.y!=ae.y>m.y&&m.x<(ae.x-H.x)*(m.y-H.y)/(ae.y-H.y)+H.x&&(_=!_),S=Math.min(S,sl(m,H,ae))}return(_?1:-1)*Math.sqrt(S)}(this.p,f),this.max=this.d+this.h*Math.SQRT2}bc.prototype.push=function(r){this.data.push(r),this.length++,this._up(this.length-1)},bc.prototype.pop=function(){if(this.length!==0){var r=this.data[0],i=this.data.pop();return this.length--,this.length>0&&(this.data[0]=i,this._down(0)),r}},bc.prototype.peek=function(){return this.data[0]},bc.prototype._up=function(r){for(var i=this.data,s=this.compare,f=i[r];r>0;){var m=r-1>>1,y=i[m];if(s(f,y)>=0)break;i[r]=y,r=m}i[r]=f},bc.prototype._down=function(r){for(var i=this.data,s=this.compare,f=this.length>>1,m=i[r];r<f;){var y=1+(r<<1),_=i[y],S=y+1;if(S<this.length&&s(i[S],_)<0&&(y=S,_=i[S]),s(_,m)>=0)break;i[r]=_,r=y}i[r]=m};var o0=Number.POSITIVE_INFINITY;function vw(r,i){return i[1]!==o0?function(s,f,m){var y=0,_=0;switch(f=Math.abs(f),m=Math.abs(m),s){case"top-right":case"top-left":case"top":_=m-7;break;case"bottom-right":case"bottom-left":case"bottom":_=7-m}switch(s){case"top-right":case"bottom-right":case"right":y=-f;break;case"top-left":case"bottom-left":case"left":y=f}return[y,_]}(r,i[0],i[1]):function(s,f){var m=0,y=0;f<0&&(f=0);var _=f/Math.sqrt(2);switch(s){case"top-right":case"top-left":y=_-7;break;case"bottom-right":case"bottom-left":y=7-_;break;case"bottom":y=7-f;break;case"top":y=f-7}switch(s){case"top-right":case"bottom-right":m=-_;break;case"top-left":case"bottom-left":m=_;break;case"left":m=f;break;case"right":m=-f}return[m,y]}(r,i[0])}function a0(r){switch(r){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function _w(r,i,s,f,m,y,_,S,k,A,R,O,j,H,ae){var se=function(ze,Be,We,Qe,nt,Et,ut,It){for(var ft=Qe.layout.get("text-rotate").evaluate(Et,{})*Math.PI/180,or=[],$t=0,bt=Be.positionedLines;$t<bt.length;$t+=1)for(var lr=bt[$t],Yt=0,xr=lr.positionedGlyphs;Yt<xr.length;Yt+=1){var At=xr[Yt];if(At.rect){var kr=At.rect||{},cn=4,_n=!0,yn=1,pn=0,xn=(nt||It)&&At.vertical,Wn=At.metrics.advance*At.scale/2;if(It&&Be.verticalizable&&(pn=lr.lineOffset/2-(At.imageName?-(24-At.metrics.width*At.scale)/2:24*(At.scale-1))),At.imageName){var Gn=ut[At.imageName];_n=Gn.sdf,cn=1/(yn=Gn.pixelRatio)}var Ei=nt?[At.x+Wn,At.y]:[0,0],ri=nt?[0,0]:[At.x+Wn+We[0],At.y+We[1]-pn],Ci=[0,0];xn&&(Ci=ri,ri=[0,0]);var Tn=(At.metrics.left-cn)*At.scale-Wn+ri[0],ni=(-At.metrics.top-cn)*At.scale+ri[1],hr=Tn+kr.w*At.scale/yn,Kr=ni+kr.h*At.scale/yn,Ur=new T(Tn,ni),wr=new T(hr,ni),zi=new T(Tn,Kr),di=new T(hr,Kr);if(xn){var on=new T(-Wn,Wn- -17),zn=-Math.PI/2,mi=12-Wn,Tr=new T(22-mi,-(At.imageName?mi:0)),Va=new(Function.prototype.bind.apply(T,[null].concat(Ci)));Ur._rotateAround(zn,on)._add(Tr)._add(Va),wr._rotateAround(zn,on)._add(Tr)._add(Va),zi._rotateAround(zn,on)._add(Tr)._add(Va),di._rotateAround(zn,on)._add(Tr)._add(Va)}if(ft){var _o=Math.sin(ft),qa=Math.cos(ft),In=[qa,-_o,_o,qa];Ur._matMult(In),wr._matMult(In),zi._matMult(In),di._matMult(In)}var Wa=new T(0,0),Qo=new T(0,0);or.push({tl:Ur,tr:wr,bl:zi,br:di,tex:kr,writingMode:Be.writingMode,glyphOffset:Ei,sectionIndex:At.sectionIndex,isSDF:_n,pixelOffsetTL:Wa,pixelOffsetBR:Qo,minFontScaleX:0,minFontScaleY:0})}}return or}(0,s,S,m,y,_,f,r.allowVerticalPlacement),_e=r.textSizeData,fe=null;_e.kind==="source"?(fe=[128*m.layout.get("text-size").evaluate(_,{})])[0]>32640&&pe(r.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):_e.kind==="composite"&&((fe=[128*H.compositeTextSizes[0].evaluate(_,{},ae),128*H.compositeTextSizes[1].evaluate(_,{},ae)])[0]>32640||fe[1]>32640)&&pe(r.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),r.addSymbols(r.text,se,fe,S,y,_,A,i,k.lineStartIndex,k.lineLength,j,ae);for(var Ie=0,Me=R;Ie<Me.length;Ie+=1)O[Me[Ie]]=r.text.placedSymbolArray.length-1;return 4*se.length}function xw(r){for(var i in r)return r[i];return null}function NM(r,i,s,f){var m=r.compareText;if(i in m){for(var y=m[i],_=y.length-1;_>=0;_--)if(f.dist(y[_])<s)return!0}else m[i]=[];return m[i].push(f),!1}var FM=yc.VectorTileFeature.types,UM=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function hm(r,i,s,f,m,y,_,S,k,A,R,O,j){var H=S?Math.min(32640,Math.round(S[0])):0,ae=S?Math.min(32640,Math.round(S[1])):0;r.emplaceBack(i,s,Math.round(32*f),Math.round(32*m),y,_,(H<<1)+(k?1:0),ae,16*A,16*R,256*O,256*j)}function s0(r,i,s){r.emplaceBack(i.x,i.y,s),r.emplaceBack(i.x,i.y,s),r.emplaceBack(i.x,i.y,s),r.emplaceBack(i.x,i.y,s)}function $M(r){for(var i=0,s=r.sections;i<s.length;i+=1)if(oc(s[i].text))return!0;return!1}var Sc=function(r){this.layoutVertexArray=new uc,this.indexArray=new Ba,this.programConfigurations=r,this.segments=new X,this.dynamicLayoutVertexArray=new il,this.opacityVertexArray=new ou,this.placedSymbolArray=new h};Sc.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},Sc.prototype.upload=function(r,i,s,f){this.isEmpty()||(s&&(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,hM.members),this.indexBuffer=r.createIndexBuffer(this.indexArray,i),this.dynamicLayoutVertexBuffer=r.createVertexBuffer(this.dynamicLayoutVertexArray,dM.members,!0),this.opacityVertexBuffer=r.createVertexBuffer(this.opacityVertexArray,UM,!0),this.opacityVertexBuffer.itemSize=1),(s||f)&&this.programConfigurations.upload(r))},Sc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},vt("SymbolBuffers",Sc);var Af=function(r,i,s){this.layoutVertexArray=new r,this.layoutAttributes=i,this.indexArray=new s,this.segments=new X,this.collisionVertexArray=new vf};Af.prototype.upload=function(r){this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=r.createVertexBuffer(this.collisionVertexArray,mM.members,!0)},Af.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},vt("CollisionBuffers",Af);var Gr=function(r){this.collisionBoxArray=r.collisionBoxArray,this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(function(y){return y.id}),this.index=r.index,this.pixelRatio=r.pixelRatio,this.sourceLayerIndex=r.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=oo([]),this.placementViewportMatrix=oo([]);var i=this.layers[0]._unevaluatedLayout._values;this.textSizeData=i0(this.zoom,i["text-size"]),this.iconSizeData=i0(this.zoom,i["icon-size"]);var s=this.layers[0].layout,f=s.get("symbol-sort-key"),m=s.get("symbol-z-order");this.canOverlap=s.get("text-allow-overlap")||s.get("icon-allow-overlap")||s.get("text-ignore-placement")||s.get("icon-ignore-placement"),this.sortFeaturesByKey=m!=="viewport-y"&&f.constantOr(1)!==void 0,this.sortFeaturesByY=(m==="viewport-y"||m==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,s.get("symbol-placement")==="point"&&(this.writingModes=s.get("text-writing-mode").map(function(y){return vo[y]})),this.stateDependentLayerIds=this.layers.filter(function(y){return y.isStateDependent()}).map(function(y){return y.id}),this.sourceID=r.sourceID};Gr.prototype.createArrays=function(){this.text=new Sc(new Ft(this.layers,this.zoom,function(r){return/^text/.test(r)})),this.icon=new Sc(new Ft(this.layers,this.zoom,function(r){return/^icon/.test(r)})),this.glyphOffsetArray=new w,this.lineVertexArray=new C,this.symbolInstances=new b},Gr.prototype.calculateGlyphDependencies=function(r,i,s,f,m){for(var y=0;y<r.length;y++)if(i[r.charCodeAt(y)]=!0,(s||f)&&m){var _=Tf[r.charAt(y)];_&&(i[_.charCodeAt(0)]=!0)}},Gr.prototype.populate=function(r,i,s){var f=this.layers[0],m=f.layout,y=m.get("text-font"),_=m.get("text-field"),S=m.get("icon-image"),k=(_.value.kind!=="constant"||_.value.value instanceof Yn&&!_.value.value.isEmpty()||_.value.value.toString().length>0)&&(y.value.kind!=="constant"||y.value.value.length>0),A=S.value.kind!=="constant"||!!S.value.value||Object.keys(S.parameters).length>0,R=m.get("symbol-sort-key");if(this.features=[],k||A){for(var O=i.iconDependencies,j=i.glyphDependencies,H=i.availableImages,ae=new pr(this.zoom),se=0,_e=r;se<_e.length;se+=1){var fe=_e[se],Ie=fe.feature,Me=fe.id,ze=fe.index,Be=fe.sourceLayerIndex,We=f._featureFilter.needGeometry,Qe=kn(Ie,We);if(f._featureFilter.filter(ae,Qe,s)){We||(Qe.geometry=mn(Ie));var nt=void 0;if(k){var Et=f.getValueAndResolveTokens("text-field",Qe,s,H),ut=Yn.factory(Et);$M(ut)&&(this.hasRTLText=!0),(!this.hasRTLText||df()==="unavailable"||this.hasRTLText&&io.isParsed())&&(nt=gM(ut,f,Qe))}var It=void 0;if(A){var ft=f.getValueAndResolveTokens("icon-image",Qe,s,H);It=ft instanceof Ai?ft:Ai.fromString(ft)}if(nt||It){var or=this.sortFeaturesByKey?R.evaluate(Qe,{},s):void 0;if(this.features.push({id:Me,text:nt,icon:It,index:ze,sourceLayerIndex:Be,geometry:Qe.geometry,properties:Ie.properties,type:FM[Ie.type],sortKey:or}),It&&(O[It.name]=!0),nt){var $t=y.evaluate(Qe,{},s).join(","),bt=m.get("text-rotation-alignment")==="map"&&m.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(vo.vertical)>=0;for(var lr=0,Yt=nt.sections;lr<Yt.length;lr+=1){var xr=Yt[lr];if(xr.image)O[xr.image.name]=!0;else{var At=pf(nt.toString()),kr=xr.fontStack||$t,cn=j[kr]=j[kr]||{};this.calculateGlyphDependencies(xr.text,cn,bt,this.allowVerticalPlacement,At)}}}}}}m.get("symbol-placement")==="line"&&(this.features=function(_n){var yn={},pn={},xn=[],Wn=0;function Gn(on){xn.push(_n[on]),Wn++}function Ei(on,zn,mi){var Tr=pn[on];return delete pn[on],pn[zn]=Tr,xn[Tr].geometry[0].pop(),xn[Tr].geometry[0]=xn[Tr].geometry[0].concat(mi[0]),Tr}function ri(on,zn,mi){var Tr=yn[zn];return delete yn[zn],yn[on]=Tr,xn[Tr].geometry[0].shift(),xn[Tr].geometry[0]=mi[0].concat(xn[Tr].geometry[0]),Tr}function Ci(on,zn,mi){var Tr=mi?zn[0][zn[0].length-1]:zn[0][0];return on+":"+Tr.x+":"+Tr.y}for(var Tn=0;Tn<_n.length;Tn++){var ni=_n[Tn],hr=ni.geometry,Kr=ni.text?ni.text.toString():null;if(Kr){var Ur=Ci(Kr,hr),wr=Ci(Kr,hr,!0);if(Ur in pn&&wr in yn&&pn[Ur]!==yn[wr]){var zi=ri(Ur,wr,hr),di=Ei(Ur,wr,xn[zi].geometry);delete yn[Ur],delete pn[wr],pn[Ci(Kr,xn[di].geometry,!0)]=di,xn[zi].geometry=null}else Ur in pn?Ei(Ur,wr,hr):wr in yn?ri(Ur,wr,hr):(Gn(Tn),yn[Ur]=Wn-1,pn[wr]=Wn-1)}else Gn(Tn)}return xn.filter(function(on){return on.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(_n,yn){return _n.sortKey-yn.sortKey})}},Gr.prototype.update=function(r,i,s){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(r,i,this.layers,s),this.icon.programConfigurations.updatePaintArrays(r,i,this.layers,s))},Gr.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},Gr.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Gr.prototype.upload=function(r){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(r),this.iconCollisionBox.upload(r)),this.text.upload(r,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(r,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Gr.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Gr.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Gr.prototype.addToLineVertexArray=function(r,i){var s=this.lineVertexArray.length;if(r.segment!==void 0){for(var f=r.dist(i[r.segment+1]),m=r.dist(i[r.segment]),y={},_=r.segment+1;_<i.length;_++)y[_]={x:i[_].x,y:i[_].y,tileUnitDistanceFromAnchor:f},_<i.length-1&&(f+=i[_+1].dist(i[_]));for(var S=r.segment||0;S>=0;S--)y[S]={x:i[S].x,y:i[S].y,tileUnitDistanceFromAnchor:m},S>0&&(m+=i[S-1].dist(i[S]));for(var k=0;k<i.length;k++){var A=y[k];this.lineVertexArray.emplaceBack(A.x,A.y,A.tileUnitDistanceFromAnchor)}}return{lineStartIndex:s,lineLength:this.lineVertexArray.length-s}},Gr.prototype.addSymbols=function(r,i,s,f,m,y,_,S,k,A,R,O){for(var j=r.indexArray,H=r.layoutVertexArray,ae=r.segments.prepareSegment(4*i.length,H,j,this.canOverlap?y.sortKey:void 0),se=this.glyphOffsetArray.length,_e=ae.vertexLength,fe=this.allowVerticalPlacement&&_===vo.vertical?Math.PI/2:0,Ie=y.text&&y.text.sections,Me=0;Me<i.length;Me++){var ze=i[Me],Be=ze.tl,We=ze.tr,Qe=ze.bl,nt=ze.br,Et=ze.tex,ut=ze.pixelOffsetTL,It=ze.pixelOffsetBR,ft=ze.minFontScaleX,or=ze.minFontScaleY,$t=ze.glyphOffset,bt=ze.isSDF,lr=ze.sectionIndex,Yt=ae.vertexLength,xr=$t[1];hm(H,S.x,S.y,Be.x,xr+Be.y,Et.x,Et.y,s,bt,ut.x,ut.y,ft,or),hm(H,S.x,S.y,We.x,xr+We.y,Et.x+Et.w,Et.y,s,bt,It.x,ut.y,ft,or),hm(H,S.x,S.y,Qe.x,xr+Qe.y,Et.x,Et.y+Et.h,s,bt,ut.x,It.y,ft,or),hm(H,S.x,S.y,nt.x,xr+nt.y,Et.x+Et.w,Et.y+Et.h,s,bt,It.x,It.y,ft,or),s0(r.dynamicLayoutVertexArray,S,fe),j.emplaceBack(Yt,Yt+1,Yt+2),j.emplaceBack(Yt+1,Yt+2,Yt+3),ae.vertexLength+=4,ae.primitiveLength+=2,this.glyphOffsetArray.emplaceBack($t[0]),Me!==i.length-1&&lr===i[Me+1].sectionIndex||r.programConfigurations.populatePaintArrays(H.length,y,y.index,{},O,Ie&&Ie[lr])}r.placedSymbolArray.emplaceBack(S.x,S.y,se,this.glyphOffsetArray.length-se,_e,k,A,S.segment,s?s[0]:0,s?s[1]:0,f[0],f[1],_,0,!1,0,R)},Gr.prototype._addCollisionDebugVertex=function(r,i,s,f,m,y){return i.emplaceBack(0,0),r.emplaceBack(s.x,s.y,f,m,Math.round(y.x),Math.round(y.y))},Gr.prototype.addCollisionDebugVertices=function(r,i,s,f,m,y,_){var S=m.segments.prepareSegment(4,m.layoutVertexArray,m.indexArray),k=S.vertexLength,A=m.layoutVertexArray,R=m.collisionVertexArray,O=_.anchorX,j=_.anchorY;this._addCollisionDebugVertex(A,R,y,O,j,new T(r,i)),this._addCollisionDebugVertex(A,R,y,O,j,new T(s,i)),this._addCollisionDebugVertex(A,R,y,O,j,new T(s,f)),this._addCollisionDebugVertex(A,R,y,O,j,new T(r,f)),S.vertexLength+=4;var H=m.indexArray;H.emplaceBack(k,k+1),H.emplaceBack(k+1,k+2),H.emplaceBack(k+2,k+3),H.emplaceBack(k+3,k),S.primitiveLength+=4},Gr.prototype.addDebugCollisionBoxes=function(r,i,s,f){for(var m=r;m<i;m++){var y=this.collisionBoxArray.get(m);this.addCollisionDebugVertices(y.x1,y.y1,y.x2,y.y2,f?this.textCollisionBox:this.iconCollisionBox,y.anchorPoint,s)}},Gr.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Af(ol,Jb.members,au),this.iconCollisionBox=new Af(ol,Jb.members,au);for(var r=0;r<this.symbolInstances.length;r++){var i=this.symbolInstances.get(r);this.addDebugCollisionBoxes(i.textBoxStartIndex,i.textBoxEndIndex,i,!0),this.addDebugCollisionBoxes(i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i,!0),this.addDebugCollisionBoxes(i.iconBoxStartIndex,i.iconBoxEndIndex,i,!1),this.addDebugCollisionBoxes(i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex,i,!1)}},Gr.prototype._deserializeCollisionBoxesForSymbol=function(r,i,s,f,m,y,_,S,k){for(var A={},R=i;R<s;R++){var O=r.get(R);A.textBox={x1:O.x1,y1:O.y1,x2:O.x2,y2:O.y2,anchorPointX:O.anchorPointX,anchorPointY:O.anchorPointY},A.textFeatureIndex=O.featureIndex;break}for(var j=f;j<m;j++){var H=r.get(j);A.verticalTextBox={x1:H.x1,y1:H.y1,x2:H.x2,y2:H.y2,anchorPointX:H.anchorPointX,anchorPointY:H.anchorPointY},A.verticalTextFeatureIndex=H.featureIndex;break}for(var ae=y;ae<_;ae++){var se=r.get(ae);A.iconBox={x1:se.x1,y1:se.y1,x2:se.x2,y2:se.y2,anchorPointX:se.anchorPointX,anchorPointY:se.anchorPointY},A.iconFeatureIndex=se.featureIndex;break}for(var _e=S;_e<k;_e++){var fe=r.get(_e);A.verticalIconBox={x1:fe.x1,y1:fe.y1,x2:fe.x2,y2:fe.y2,anchorPointX:fe.anchorPointX,anchorPointY:fe.anchorPointY},A.verticalIconFeatureIndex=fe.featureIndex;break}return A},Gr.prototype.deserializeCollisionBoxes=function(r){this.collisionArrays=[];for(var i=0;i<this.symbolInstances.length;i++){var s=this.symbolInstances.get(i);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(r,s.textBoxStartIndex,s.textBoxEndIndex,s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s.iconBoxStartIndex,s.iconBoxEndIndex,s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex))}},Gr.prototype.hasTextData=function(){return this.text.segments.get().length>0},Gr.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Gr.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Gr.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Gr.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Gr.prototype.addIndicesForPlacedSymbol=function(r,i){for(var s=r.placedSymbolArray.get(i),f=s.vertexStartIndex+4*s.numGlyphs,m=s.vertexStartIndex;m<f;m+=4)r.indexArray.emplaceBack(m,m+1,m+2),r.indexArray.emplaceBack(m+1,m+2,m+3)},Gr.prototype.getSortedSymbolIndexes=function(r){if(this.sortedAngle===r&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var i=Math.sin(r),s=Math.cos(r),f=[],m=[],y=[],_=0;_<this.symbolInstances.length;++_){y.push(_);var S=this.symbolInstances.get(_);f.push(0|Math.round(i*S.anchorX+s*S.anchorY)),m.push(S.featureIndex)}return y.sort(function(k,A){return f[k]-f[A]||m[A]-m[k]}),y},Gr.prototype.addToSortKeyRanges=function(r,i){var s=this.sortKeyRanges[this.sortKeyRanges.length-1];s&&s.sortKey===i?s.symbolInstanceEnd=r+1:this.sortKeyRanges.push({sortKey:i,symbolInstanceStart:r,symbolInstanceEnd:r+1})},Gr.prototype.sortFeatures=function(r){var i=this;if(this.sortFeaturesByY&&this.sortedAngle!==r&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(r),this.sortedAngle=r,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var s=0,f=this.symbolInstanceIndexes;s<f.length;s+=1){var m=this.symbolInstances.get(f[s]);this.featureSortOrder.push(m.featureIndex),[m.rightJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.leftJustifiedTextSymbolIndex].forEach(function(y,_,S){y>=0&&S.indexOf(y)===_&&i.addIndicesForPlacedSymbol(i.text,y)}),m.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,m.verticalPlacedTextSymbolIndex),m.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.placedIconSymbolIndex),m.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},vt("SymbolBucket",Gr,{omit:["layers","collisionBoxArray","features","compareText"]}),Gr.MAX_GLYPHS=65535,Gr.addDynamicAttributes=s0;var jM=new ci({"symbol-placement":new kt(Z.layout_symbol["symbol-placement"]),"symbol-spacing":new kt(Z.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new kt(Z.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new xt(Z.layout_symbol["symbol-sort-key"]),"symbol-z-order":new kt(Z.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new kt(Z.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new kt(Z.layout_symbol["icon-ignore-placement"]),"icon-optional":new kt(Z.layout_symbol["icon-optional"]),"icon-rotation-alignment":new kt(Z.layout_symbol["icon-rotation-alignment"]),"icon-size":new xt(Z.layout_symbol["icon-size"]),"icon-text-fit":new kt(Z.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new kt(Z.layout_symbol["icon-text-fit-padding"]),"icon-image":new xt(Z.layout_symbol["icon-image"]),"icon-rotate":new xt(Z.layout_symbol["icon-rotate"]),"icon-padding":new kt(Z.layout_symbol["icon-padding"]),"icon-keep-upright":new kt(Z.layout_symbol["icon-keep-upright"]),"icon-offset":new xt(Z.layout_symbol["icon-offset"]),"icon-anchor":new xt(Z.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new kt(Z.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new kt(Z.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new kt(Z.layout_symbol["text-rotation-alignment"]),"text-field":new xt(Z.layout_symbol["text-field"]),"text-font":new xt(Z.layout_symbol["text-font"]),"text-size":new xt(Z.layout_symbol["text-size"]),"text-max-width":new xt(Z.layout_symbol["text-max-width"]),"text-line-height":new kt(Z.layout_symbol["text-line-height"]),"text-letter-spacing":new xt(Z.layout_symbol["text-letter-spacing"]),"text-justify":new xt(Z.layout_symbol["text-justify"]),"text-radial-offset":new xt(Z.layout_symbol["text-radial-offset"]),"text-variable-anchor":new kt(Z.layout_symbol["text-variable-anchor"]),"text-anchor":new xt(Z.layout_symbol["text-anchor"]),"text-max-angle":new kt(Z.layout_symbol["text-max-angle"]),"text-writing-mode":new kt(Z.layout_symbol["text-writing-mode"]),"text-rotate":new xt(Z.layout_symbol["text-rotate"]),"text-padding":new kt(Z.layout_symbol["text-padding"]),"text-keep-upright":new kt(Z.layout_symbol["text-keep-upright"]),"text-transform":new xt(Z.layout_symbol["text-transform"]),"text-offset":new xt(Z.layout_symbol["text-offset"]),"text-allow-overlap":new kt(Z.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new kt(Z.layout_symbol["text-ignore-placement"]),"text-optional":new kt(Z.layout_symbol["text-optional"])}),l0={paint:new ci({"icon-opacity":new xt(Z.paint_symbol["icon-opacity"]),"icon-color":new xt(Z.paint_symbol["icon-color"]),"icon-halo-color":new xt(Z.paint_symbol["icon-halo-color"]),"icon-halo-width":new xt(Z.paint_symbol["icon-halo-width"]),"icon-halo-blur":new xt(Z.paint_symbol["icon-halo-blur"]),"icon-translate":new kt(Z.paint_symbol["icon-translate"]),"icon-translate-anchor":new kt(Z.paint_symbol["icon-translate-anchor"]),"text-opacity":new xt(Z.paint_symbol["text-opacity"]),"text-color":new xt(Z.paint_symbol["text-color"],{runtimeType:at,getOverride:function(r){return r.textColor},hasOverride:function(r){return!!r.textColor}}),"text-halo-color":new xt(Z.paint_symbol["text-halo-color"]),"text-halo-width":new xt(Z.paint_symbol["text-halo-width"]),"text-halo-blur":new xt(Z.paint_symbol["text-halo-blur"]),"text-translate":new kt(Z.paint_symbol["text-translate"]),"text-translate-anchor":new kt(Z.paint_symbol["text-translate-anchor"])}),layout:jM},Ec=function(r){this.type=r.property.overrides?r.property.overrides.runtimeType:gt,this.defaultValue=r};Ec.prototype.evaluate=function(r){if(r.formattedSection){var i=this.defaultValue.property.overrides;if(i&&i.hasOverride(r.formattedSection))return i.getOverride(r.formattedSection)}return r.feature&&r.featureState?this.defaultValue.evaluate(r.feature,r.featureState):this.defaultValue.property.specification.default},Ec.prototype.eachChild=function(r){this.defaultValue.isConstant()||r(this.defaultValue.value._styleExpression.expression)},Ec.prototype.outputDefined=function(){return!1},Ec.prototype.serialize=function(){return null},vt("FormatSectionOverride",Ec,{omit:["defaultValue"]});var VM=function(r){function i(s){r.call(this,s,l0)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.recalculate=function(s,f){if(r.prototype.recalculate.call(this,s,f),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var m=this.layout.get("text-writing-mode");if(m){for(var y=[],_=0,S=m;_<S.length;_+=1){var k=S[_];y.indexOf(k)<0&&y.push(k)}this.layout._values["text-writing-mode"]=y}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},i.prototype.getValueAndResolveTokens=function(s,f,m,y){var _=this.layout.get(s).evaluate(f,{},m,y),S=this._unevaluatedLayout._values[s];return S.isDataDriven()||Zl(S.value)||!_?_:function(k,A){return A.replace(/{([^{}]+)}/g,function(R,O){return O in k?String(k[O]):""})}(f.properties,_)},i.prototype.createBucket=function(s){return new Gr(s)},i.prototype.queryRadius=function(){return 0},i.prototype.queryIntersectsFeature=function(){return!1},i.prototype._setPaintOverrides=function(){for(var s=0,f=l0.paint.overridableProperties;s<f.length;s+=1){var m=f[s];if(i.hasPaintOverride(this.layout,m)){var y,_=this.paint.get(m),S=new Ec(_),k=new Js(S,_.property.specification);y=_.value.kind==="constant"||_.value.kind==="source"?new Kl("source",k):new Qs("composite",k,_.value.zoomStops,_.value._interpolationType),this.paint._values[m]=new xi(_.property,y,_.parameters)}}},i.prototype._handleOverridablePaintPropertyUpdate=function(s,f,m){return!(!this.layout||f.isDataDriven()||m.isDataDriven())&&i.hasPaintOverride(this.layout,s)},i.hasPaintOverride=function(s,f){var m=s.get("text-field"),y=l0.paint.properties[f],_=!1,S=function(R){for(var O=0,j=R;O<j.length;O+=1)if(y.overrides&&y.overrides.hasOverride(j[O]))return void(_=!0)};if(m.value.kind==="constant"&&m.value.value instanceof Yn)S(m.value.value.sections);else if(m.value.kind==="source"){var k=function(R){_||(R instanceof vi&&Cn(R.value)===Hr?S(R.value.sections):R instanceof Mo?S(R.sections):R.eachChild(k))},A=m.value;A._styleExpression&&k(A._styleExpression.expression)}return _},i}(Ko),qM={paint:new ci({"background-color":new kt(Z.paint_background["background-color"]),"background-pattern":new bi(Z.paint_background["background-pattern"]),"background-opacity":new kt(Z.paint_background["background-opacity"])})},WM=function(r){function i(s){r.call(this,s,qM)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i}(Ko),GM={paint:new ci({"raster-opacity":new kt(Z.paint_raster["raster-opacity"]),"raster-hue-rotate":new kt(Z.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new kt(Z.paint_raster["raster-brightness-min"]),"raster-brightness-max":new kt(Z.paint_raster["raster-brightness-max"]),"raster-saturation":new kt(Z.paint_raster["raster-saturation"]),"raster-contrast":new kt(Z.paint_raster["raster-contrast"]),"raster-resampling":new kt(Z.paint_raster["raster-resampling"]),"raster-fade-duration":new kt(Z.paint_raster["raster-fade-duration"])})},HM=function(r){function i(s){r.call(this,s,GM)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i}(Ko),ZM=function(r){function i(s){r.call(this,s,{}),this.implementation=s}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},i.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},i.prototype.recalculate=function(){},i.prototype.updateTransitions=function(){},i.prototype.hasTransition=function(){},i.prototype.serialize=function(){},i.prototype.onAdd=function(s){this.implementation.onAdd&&this.implementation.onAdd(s,s.painter.context.gl)},i.prototype.onRemove=function(s){this.implementation.onRemove&&this.implementation.onRemove(s,s.painter.context.gl)},i}(Ko),KM={circle:Gv,heatmap:RA,hillshade:zA,fill:YA,"fill-extrusion":aM,line:fM,symbol:VM,background:WM,raster:HM},bw=I.HTMLImageElement,ww=I.HTMLCanvasElement,Sw=I.HTMLVideoElement,Ew=I.ImageData,dm=I.ImageBitmap,fu=function(r,i,s,f){this.context=r,this.format=s,this.texture=r.gl.createTexture(),this.update(i,f)};fu.prototype.update=function(r,i,s){var f=r.width,m=r.height,y=!(this.size&&this.size[0]===f&&this.size[1]===m||s),_=this.context,S=_.gl;if(this.useMipmap=!!(i&&i.useMipmap),S.bindTexture(S.TEXTURE_2D,this.texture),_.pixelStoreUnpackFlipY.set(!1),_.pixelStoreUnpack.set(1),_.pixelStoreUnpackPremultiplyAlpha.set(this.format===S.RGBA&&(!i||i.premultiply!==!1)),y)this.size=[f,m],r instanceof bw||r instanceof ww||r instanceof Sw||r instanceof Ew||dm&&r instanceof dm?S.texImage2D(S.TEXTURE_2D,0,this.format,this.format,S.UNSIGNED_BYTE,r):S.texImage2D(S.TEXTURE_2D,0,this.format,f,m,0,this.format,S.UNSIGNED_BYTE,r.data);else{var k=s||{x:0,y:0},A=k.x,R=k.y;r instanceof bw||r instanceof ww||r instanceof Sw||r instanceof Ew||dm&&r instanceof dm?S.texSubImage2D(S.TEXTURE_2D,0,A,R,S.RGBA,S.UNSIGNED_BYTE,r):S.texSubImage2D(S.TEXTURE_2D,0,A,R,f,m,S.RGBA,S.UNSIGNED_BYTE,r.data)}this.useMipmap&&this.isSizePowerOfTwo()&&S.generateMipmap(S.TEXTURE_2D)},fu.prototype.bind=function(r,i,s){var f=this.context.gl;f.bindTexture(f.TEXTURE_2D,this.texture),s!==f.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(s=f.LINEAR),r!==this.filter&&(f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,r),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,s||r),this.filter=r),i!==this.wrap&&(f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,i),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,i),this.wrap=i)},fu.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},fu.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var u0=function(r){var i=this;this._callback=r,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){i._triggered=!1,i._callback()})};u0.prototype.trigger=function(){var r=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){r._triggered=!1,r._callback()},0))},u0.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Cc=function(r,i,s){this.target=r,this.parent=i,this.mapId=s,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},ce(["receive","process"],this),this.invoker=new u0(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Ee()?r:I};function Cw(r,i,s){var f=2*Math.PI*6378137/256/Math.pow(2,s);return[r*f-2*Math.PI*6378137/2,i*f-2*Math.PI*6378137/2]}Cc.prototype.send=function(r,i,s,f,m){var y=this;m===void 0&&(m=!1);var _=Math.round(1e18*Math.random()).toString(36).substring(0,10);s&&(this.callbacks[_]=s);var S=Ze(this.globalScope)?void 0:[];return this.target.postMessage({id:_,type:r,hasCallback:!!s,targetMapId:f,mustQueue:m,sourceMapId:this.mapId,data:Lo(i,S)},S),{cancel:function(){s&&delete y.callbacks[_],y.target.postMessage({id:_,type:"<cancel>",targetMapId:f,sourceMapId:y.mapId})}}},Cc.prototype.receive=function(r){var i=r.data,s=i.id;if(s&&(!i.targetMapId||this.mapId===i.targetMapId))if(i.type==="<cancel>"){delete this.tasks[s];var f=this.cancelCallbacks[s];delete this.cancelCallbacks[s],f&&f()}else Ee()||i.mustQueue?(this.tasks[s]=i,this.taskQueue.push(s),this.invoker.trigger()):this.processTask(s,i)},Cc.prototype.process=function(){if(this.taskQueue.length){var r=this.taskQueue.shift(),i=this.tasks[r];delete this.tasks[r],this.taskQueue.length&&this.invoker.trigger(),i&&this.processTask(r,i)}},Cc.prototype.processTask=function(r,i){var s=this;if(i.type==="<response>"){var f=this.callbacks[r];delete this.callbacks[r],f&&(i.error?f(qi(i.error)):f(null,qi(i.data)))}else{var m=!1,y=Ze(this.globalScope)?void 0:[],_=i.hasCallback?function(R,O){m=!0,delete s.cancelCallbacks[r],s.target.postMessage({id:r,type:"<response>",sourceMapId:s.mapId,error:R?Lo(R):null,data:Lo(O,y)},y)}:function(R){m=!0},S=null,k=qi(i.data);if(this.parent[i.type])S=this.parent[i.type](i.sourceMapId,k,_);else if(this.parent.getWorkerSource){var A=i.type.split(".");S=this.parent.getWorkerSource(i.sourceMapId,A[0],k.source)[A[1]](k,_)}else _(new Error("Could not find function "+i.type));!m&&S&&S.cancel&&(this.cancelCallbacks[r]=S.cancel)}},Cc.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Un=function(r,i){r&&(i?this.setSouthWest(r).setNorthEast(i):r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1]))};Un.prototype.setNorthEast=function(r){return this._ne=r instanceof un?new un(r.lng,r.lat):un.convert(r),this},Un.prototype.setSouthWest=function(r){return this._sw=r instanceof un?new un(r.lng,r.lat):un.convert(r),this},Un.prototype.extend=function(r){var i,s,f=this._sw,m=this._ne;if(r instanceof un)i=r,s=r;else{if(!(r instanceof Un))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(Un.convert(r)):this.extend(un.convert(r)):this;if(s=r._ne,!(i=r._sw)||!s)return this}return f||m?(f.lng=Math.min(i.lng,f.lng),f.lat=Math.min(i.lat,f.lat),m.lng=Math.max(s.lng,m.lng),m.lat=Math.max(s.lat,m.lat)):(this._sw=new un(i.lng,i.lat),this._ne=new un(s.lng,s.lat)),this},Un.prototype.getCenter=function(){return new un((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Un.prototype.getSouthWest=function(){return this._sw},Un.prototype.getNorthEast=function(){return this._ne},Un.prototype.getNorthWest=function(){return new un(this.getWest(),this.getNorth())},Un.prototype.getSouthEast=function(){return new un(this.getEast(),this.getSouth())},Un.prototype.getWest=function(){return this._sw.lng},Un.prototype.getSouth=function(){return this._sw.lat},Un.prototype.getEast=function(){return this._ne.lng},Un.prototype.getNorth=function(){return this._ne.lat},Un.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Un.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Un.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Un.prototype.contains=function(r){var i=un.convert(r),s=i.lng,f=i.lat,m=this._sw.lng<=s&&s<=this._ne.lng;return this._sw.lng>this._ne.lng&&(m=this._sw.lng>=s&&s>=this._ne.lng),this._sw.lat<=f&&f<=this._ne.lat&&m},Un.convert=function(r){return!r||r instanceof Un?r:new Un(r)};var un=function(r,i){if(isNaN(r)||isNaN(i))throw new Error("Invalid LngLat object: ("+r+", "+i+")");if(this.lng=+r,this.lat=+i,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};un.prototype.wrap=function(){return new un(F(this.lng,-180,180),this.lat)},un.prototype.toArray=function(){return[this.lng,this.lat]},un.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},un.prototype.distanceTo=function(r){var i=Math.PI/180,s=this.lat*i,f=r.lat*i,m=Math.sin(s)*Math.sin(f)+Math.cos(s)*Math.cos(f)*Math.cos((r.lng-this.lng)*i);return 63710088e-1*Math.acos(Math.min(m,1))},un.prototype.toBounds=function(r){r===void 0&&(r=0);var i=360*r/40075017,s=i/Math.cos(Math.PI/180*this.lat);return new Un(new un(this.lng-s,this.lat-i),new un(this.lng+s,this.lat+i))},un.convert=function(r){if(r instanceof un)return r;if(Array.isArray(r)&&(r.length===2||r.length===3))return new un(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&typeof r=="object"&&r!==null)return new un(Number("lng"in r?r.lng:r.lon),Number(r.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var kw=2*Math.PI*63710088e-1;function Tw(r){return kw*Math.cos(r*Math.PI/180)}function Iw(r){return(180+r)/360}function Pw(r){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r*Math.PI/360)))/360}function Aw(r,i){return r/Tw(i)}function c0(r){return 360/Math.PI*Math.atan(Math.exp((180-360*r)*Math.PI/180))-90}var hu=function(r,i,s){s===void 0&&(s=0),this.x=+r,this.y=+i,this.z=+s};hu.fromLngLat=function(r,i){i===void 0&&(i=0);var s=un.convert(r);return new hu(Iw(s.lng),Pw(s.lat),Aw(i,s.lat))},hu.prototype.toLngLat=function(){return new un(360*this.x-180,c0(this.y))},hu.prototype.toAltitude=function(){return this.z*Tw(c0(this.y))},hu.prototype.meterInMercatorCoordinateUnits=function(){return 1/kw*(r=c0(this.y),1/Math.cos(r*Math.PI/180));var r};var du=function(r,i,s){this.z=r,this.x=i,this.y=s,this.key=Mf(0,r,r,i,s)};du.prototype.equals=function(r){return this.z===r.z&&this.x===r.x&&this.y===r.y},du.prototype.url=function(r,i){var s,f,m,y,_,S=(f=this.y,m=this.z,y=Cw(256*(s=this.x),256*(f=Math.pow(2,m)-f-1),m),_=Cw(256*(s+1),256*(f+1),m),y[0]+","+y[1]+","+_[0]+","+_[1]),k=function(A,R,O){for(var j,H="",ae=A;ae>0;ae--)H+=(R&(j=1<<ae-1)?1:0)+(O&j?2:0);return H}(this.z,this.x,this.y);return r[(this.x+this.y)%r.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(i==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",k).replace("{bbox-epsg-3857}",S)},du.prototype.getTilePoint=function(r){var i=Math.pow(2,this.z);return new T(8192*(r.x*i-this.x),8192*(r.y*i-this.y))},du.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Mw=function(r,i){this.wrap=r,this.canonical=i,this.key=Mf(r,i.z,i.z,i.x,i.y)},$n=function(r,i,s,f,m){this.overscaledZ=r,this.wrap=i,this.canonical=new du(s,+f,+m),this.key=Mf(i,r,s,f,m)};function Mf(r,i,s,f,m){(r*=2)<0&&(r=-1*r-1);var y=1<<s;return(y*y*r+y*m+f).toString(36)+s.toString(36)+i.toString(36)}$n.prototype.equals=function(r){return this.overscaledZ===r.overscaledZ&&this.wrap===r.wrap&&this.canonical.equals(r.canonical)},$n.prototype.scaledTo=function(r){var i=this.canonical.z-r;return r>this.canonical.z?new $n(r,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new $n(r,this.wrap,r,this.canonical.x>>i,this.canonical.y>>i)},$n.prototype.calculateScaledKey=function(r,i){var s=this.canonical.z-r;return r>this.canonical.z?Mf(this.wrap*+i,r,this.canonical.z,this.canonical.x,this.canonical.y):Mf(this.wrap*+i,r,r,this.canonical.x>>s,this.canonical.y>>s)},$n.prototype.isChildOf=function(r){if(r.wrap!==this.wrap)return!1;var i=this.canonical.z-r.canonical.z;return r.overscaledZ===0||r.overscaledZ<this.overscaledZ&&r.canonical.x===this.canonical.x>>i&&r.canonical.y===this.canonical.y>>i},$n.prototype.children=function(r){if(this.overscaledZ>=r)return[new $n(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var i=this.canonical.z+1,s=2*this.canonical.x,f=2*this.canonical.y;return[new $n(i,this.wrap,i,s,f),new $n(i,this.wrap,i,s+1,f),new $n(i,this.wrap,i,s,f+1),new $n(i,this.wrap,i,s+1,f+1)]},$n.prototype.isLessThan=function(r){return this.wrap<r.wrap||!(this.wrap>r.wrap)&&(this.overscaledZ<r.overscaledZ||!(this.overscaledZ>r.overscaledZ)&&(this.canonical.x<r.canonical.x||!(this.canonical.x>r.canonical.x)&&this.canonical.y<r.canonical.y))},$n.prototype.wrapped=function(){return new $n(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},$n.prototype.unwrapTo=function(r){return new $n(this.overscaledZ,r,this.canonical.z,this.canonical.x,this.canonical.y)},$n.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},$n.prototype.toUnwrapped=function(){return new Mw(this.wrap,this.canonical)},$n.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},$n.prototype.getTilePoint=function(r){return this.canonical.getTilePoint(new hu(r.x-this.wrap,r.y))},vt("CanonicalTileID",du),vt("OverscaledTileID",$n,{omit:["posMatrix"]});var Ps=function(r,i,s){if(this.uid=r,i.height!==i.width)throw new RangeError("DEM tiles must be square");if(s&&s!=="mapbox"&&s!=="terrarium")return pe('"'+s+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=i.height;var f=this.dim=i.height-2;this.data=new Uint32Array(i.data.buffer),this.encoding=s||"mapbox";for(var m=0;m<f;m++)this.data[this._idx(-1,m)]=this.data[this._idx(0,m)],this.data[this._idx(f,m)]=this.data[this._idx(f-1,m)],this.data[this._idx(m,-1)]=this.data[this._idx(m,0)],this.data[this._idx(m,f)]=this.data[this._idx(m,f-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(f,-1)]=this.data[this._idx(f-1,0)],this.data[this._idx(-1,f)]=this.data[this._idx(0,f-1)],this.data[this._idx(f,f)]=this.data[this._idx(f-1,f-1)]};Ps.prototype.get=function(r,i){var s=new Uint8Array(this.data.buffer),f=4*this._idx(r,i);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(s[f],s[f+1],s[f+2])},Ps.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Ps.prototype._idx=function(r,i){if(r<-1||r>=this.dim+1||i<-1||i>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(i+1)*this.stride+(r+1)},Ps.prototype._unpackMapbox=function(r,i,s){return(256*r*256+256*i+s)/10-1e4},Ps.prototype._unpackTerrarium=function(r,i,s){return 256*r+i+s/256-32768},Ps.prototype.getPixels=function(){return new Ki({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Ps.prototype.backfillBorder=function(r,i,s){if(this.dim!==r.dim)throw new Error("dem dimension mismatch");var f=i*this.dim,m=i*this.dim+this.dim,y=s*this.dim,_=s*this.dim+this.dim;switch(i){case-1:f=m-1;break;case 1:m=f+1}switch(s){case-1:y=_-1;break;case 1:_=y+1}for(var S=-i*this.dim,k=-s*this.dim,A=y;A<_;A++)for(var R=f;R<m;R++)this.data[this._idx(R,A)]=r.data[this._idx(R+S,A+k)]},vt("DEMData",Ps);var mm=function(r){this._stringToNumber={},this._numberToString=[];for(var i=0;i<r.length;i++){var s=r[i];this._stringToNumber[s]=i,this._numberToString[i]=s}};mm.prototype.encode=function(r){return this._stringToNumber[r]},mm.prototype.decode=function(r){return this._numberToString[r]};var ym=function(r,i,s,f,m){this.type="Feature",this._vectorTileFeature=r,r._z=i,r._x=s,r._y=f,this.properties=r.properties,this.id=m},p0={geometry:{configurable:!0}};p0.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},p0.geometry.set=function(r){this._geometry=r},ym.prototype.toJSON=function(){var r={geometry:this.geometry};for(var i in this)i!=="_geometry"&&i!=="_vectorTileFeature"&&(r[i]=this[i]);return r},Object.defineProperties(ym.prototype,p0);var kc=function(){this.state={},this.stateChanges={},this.deletedStates={}};kc.prototype.updateState=function(r,i,s){var f=String(i);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][f]=this.stateChanges[r][f]||{},V(this.stateChanges[r][f],s),this.deletedStates[r]===null)for(var m in this.deletedStates[r]={},this.state[r])m!==f&&(this.deletedStates[r][m]=null);else if(this.deletedStates[r]&&this.deletedStates[r][f]===null)for(var y in this.deletedStates[r][f]={},this.state[r][f])s[y]||(this.deletedStates[r][f][y]=null);else for(var _ in s)this.deletedStates[r]&&this.deletedStates[r][f]&&this.deletedStates[r][f][_]===null&&delete this.deletedStates[r][f][_]},kc.prototype.removeFeatureState=function(r,i,s){if(this.deletedStates[r]!==null){var f=String(i);if(this.deletedStates[r]=this.deletedStates[r]||{},s&&i!==void 0)this.deletedStates[r][f]!==null&&(this.deletedStates[r][f]=this.deletedStates[r][f]||{},this.deletedStates[r][f][s]=null);else if(i!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][f])for(s in this.deletedStates[r][f]={},this.stateChanges[r][f])this.deletedStates[r][f][s]=null;else this.deletedStates[r][f]=null;else this.deletedStates[r]=null}},kc.prototype.getState=function(r,i){var s=String(i),f=V({},(this.state[r]||{})[s],(this.stateChanges[r]||{})[s]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){var m=this.deletedStates[r][i];if(m===null)return{};for(var y in m)delete f[y]}return f},kc.prototype.initializeTileState=function(r,i){r.setFeatureState(this.state,i)},kc.prototype.coalesceChanges=function(r,i){var s={};for(var f in this.stateChanges){this.state[f]=this.state[f]||{};var m={};for(var y in this.stateChanges[f])this.state[f][y]||(this.state[f][y]={}),V(this.state[f][y],this.stateChanges[f][y]),m[y]=this.state[f][y];s[f]=m}for(var _ in this.deletedStates){this.state[_]=this.state[_]||{};var S={};if(this.deletedStates[_]===null)for(var k in this.state[_])S[k]={},this.state[_][k]={};else for(var A in this.deletedStates[_]){if(this.deletedStates[_][A]===null)this.state[_][A]={};else for(var R=0,O=Object.keys(this.deletedStates[_][A]);R<O.length;R+=1)delete this.state[_][A][O[R]];S[A]=this.state[_][A]}s[_]=s[_]||{},V(s[_],S)}if(this.stateChanges={},this.deletedStates={},Object.keys(s).length!==0)for(var j in r)r[j].setFeatureState(s,i)};var As=function(r,i){this.tileID=r,this.x=r.canonical.x,this.y=r.canonical.y,this.z=r.canonical.z,this.grid=new pa(8192,16,0),this.grid3D=new pa(8192,16,0),this.featureIndexArray=new N,this.promoteId=i};function Rw(r,i,s,f,m){return Te(r,function(y,_){var S=i instanceof iu?i.get(_):null;return S&&S.evaluate?S.evaluate(s,f,m):S})}function Lw(r){for(var i=1/0,s=1/0,f=-1/0,m=-1/0,y=0,_=r;y<_.length;y+=1){var S=_[y];i=Math.min(i,S.x),s=Math.min(s,S.y),f=Math.max(f,S.x),m=Math.max(m,S.y)}return{minX:i,minY:s,maxX:f,maxY:m}}function XM(r,i){return i-r}As.prototype.insert=function(r,i,s,f,m,y){var _=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(s,f,m);for(var S=y?this.grid3D:this.grid,k=0;k<i.length;k++){for(var A=i[k],R=[1/0,1/0,-1/0,-1/0],O=0;O<A.length;O++){var j=A[O];R[0]=Math.min(R[0],j.x),R[1]=Math.min(R[1],j.y),R[2]=Math.max(R[2],j.x),R[3]=Math.max(R[3],j.y)}R[0]<8192&&R[1]<8192&&R[2]>=0&&R[3]>=0&&S.insert(_,R[0],R[1],R[2],R[3])}},As.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new yc.VectorTile(new im(this.rawTileData)).layers,this.sourceLayerCoder=new mm(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},As.prototype.query=function(r,i,s,f){var m=this;this.loadVTLayers();for(var y=r.params||{},_=8192/r.tileSize/r.scale,S=Qu(y.filter),k=r.queryGeometry,A=r.queryPadding*_,R=Lw(k),O=this.grid.query(R.minX-A,R.minY-A,R.maxX+A,R.maxY+A),j=Lw(r.cameraQueryGeometry),H=this.grid3D.query(j.minX-A,j.minY-A,j.maxX+A,j.maxY+A,function(ze,Be,We,Qe){return function(nt,Et,ut,It,ft){for(var or=0,$t=nt;or<$t.length;or+=1){var bt=$t[or];if(Et<=bt.x&&ut<=bt.y&&It>=bt.x&&ft>=bt.y)return!0}var lr=[new T(Et,ut),new T(Et,ft),new T(It,ft),new T(It,ut)];if(nt.length>2){for(var Yt=0,xr=lr;Yt<xr.length;Yt+=1)if(Yo(nt,xr[Yt]))return!0}for(var At=0;At<nt.length-1;At++)if(uu(nt[At],nt[At+1],lr))return!0;return!1}(r.cameraQueryGeometry,ze-A,Be-A,We+A,Qe+A)}),ae=0,se=H;ae<se.length;ae+=1)O.push(se[ae]);O.sort(XM);for(var _e,fe={},Ie=function(ze){var Be=O[ze];if(Be!==_e){_e=Be;var We=m.featureIndexArray.get(Be),Qe=null;m.loadMatchingFeature(fe,We.bucketIndex,We.sourceLayerIndex,We.featureIndex,S,y.layers,y.availableImages,i,s,f,function(nt,Et,ut){return Qe||(Qe=mn(nt)),Et.queryIntersectsFeature(k,nt,ut,Qe,m.z,r.transform,_,r.pixelPosMatrix)})}},Me=0;Me<O.length;Me++)Ie(Me);return fe},As.prototype.loadMatchingFeature=function(r,i,s,f,m,y,_,S,k,A,R){var O=this.bucketLayerIDs[i];if(!y||function(nt,Et){for(var ut=0;ut<nt.length;ut++)if(Et.indexOf(nt[ut])>=0)return!0;return!1}(y,O)){var j=this.sourceLayerCoder.decode(s),H=this.vtLayers[j].feature(f);if(m.needGeometry){var ae=kn(H,!0);if(!m.filter(new pr(this.tileID.overscaledZ),ae,this.tileID.canonical))return}else if(!m.filter(new pr(this.tileID.overscaledZ),H))return;for(var se=this.getId(H,j),_e=0;_e<O.length;_e++){var fe=O[_e];if(!(y&&y.indexOf(fe)<0)){var Ie=S[fe];if(Ie){var Me={};se!==void 0&&A&&(Me=A.getState(Ie.sourceLayer||"_geojsonTileLayer",se));var ze=V({},k[fe]);ze.paint=Rw(ze.paint,Ie.paint,H,Me,_),ze.layout=Rw(ze.layout,Ie.layout,H,Me,_);var Be=!R||R(H,Ie,Me);if(Be){var We=new ym(H,this.z,this.x,this.y,se);We.layer=ze;var Qe=r[fe];Qe===void 0&&(Qe=r[fe]=[]),Qe.push({featureIndex:f,feature:We,intersectionZ:Be})}}}}}},As.prototype.lookupSymbolFeatures=function(r,i,s,f,m,y,_,S){var k={};this.loadVTLayers();for(var A=Qu(m),R=0,O=r;R<O.length;R+=1)this.loadMatchingFeature(k,s,f,O[R],A,y,_,S,i);return k},As.prototype.hasLayer=function(r){for(var i=0,s=this.bucketLayerIDs;i<s.length;i+=1)for(var f=0,m=s[i];f<m.length;f+=1)if(r===m[f])return!0;return!1},As.prototype.getId=function(r,i){var s=r.id;return this.promoteId&&typeof(s=r.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[i]])=="boolean"&&(s=Number(s)),s},vt("FeatureIndex",As,{omit:["rawTileData","sourceLayerCoder"]});var ti=function(r,i){this.tileID=r,this.uid=z(),this.uses=0,this.tileSize=i,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};ti.prototype.registerFadeDuration=function(r){var i=r+this.timeAdded;i<Bt.now()||this.fadeEndTime&&i<this.fadeEndTime||(this.fadeEndTime=i)},ti.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},ti.prototype.loadVectorData=function(r,i,s){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){for(var f in r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(A,R){var O={};if(!R)return O;for(var j=function(){var se=ae[H],_e=se.layerIds.map(function(Me){return R.getLayer(Me)}).filter(Boolean);if(_e.length!==0){se.layers=_e,se.stateDependentLayerIds&&(se.stateDependentLayers=se.stateDependentLayerIds.map(function(Me){return _e.filter(function(ze){return ze.id===Me})[0]}));for(var fe=0,Ie=_e;fe<Ie.length;fe+=1)O[Ie[fe].id]=se}},H=0,ae=A;H<ae.length;H+=1)j();return O}(r.buckets,i.style),this.hasSymbolBuckets=!1,this.buckets){var m=this.buckets[f];if(m instanceof Gr){if(this.hasSymbolBuckets=!0,!s)break;m.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var y in this.buckets){var _=this.buckets[y];if(_ instanceof Gr&&_.hasRTLText){this.hasRTLText=!0,io.isLoading()||io.isLoaded()||df()!=="deferred"||zo();break}}for(var S in this.queryPadding=0,this.buckets){var k=this.buckets[S];this.queryPadding=Math.max(this.queryPadding,i.style.getLayer(S).queryRadius(k))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage)}else this.collisionBoxArray=new p},ti.prototype.unloadVectorData=function(){for(var r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},ti.prototype.getBucket=function(r){return this.buckets[r.id]},ti.prototype.upload=function(r){for(var i in this.buckets){var s=this.buckets[i];s.uploadPending()&&s.upload(r)}var f=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new fu(r,this.imageAtlas.image,f.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new fu(r,this.glyphAtlasImage,f.ALPHA),this.glyphAtlasImage=null)},ti.prototype.prepare=function(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)},ti.prototype.queryRenderedFeatures=function(r,i,s,f,m,y,_,S,k,A){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:f,cameraQueryGeometry:m,scale:y,tileSize:this.tileSize,pixelPosMatrix:A,transform:S,params:_,queryPadding:this.queryPadding*k},r,i,s):{}},ti.prototype.querySourceFeatures=function(r,i){var s=this.latestFeatureIndex;if(s&&s.rawTileData){var f=s.loadVTLayers(),m=i?i.sourceLayer:"",y=f._geojsonTileLayer||f[m];if(y)for(var _=Qu(i&&i.filter),S=this.tileID.canonical,k=S.z,A=S.x,R=S.y,O={z:k,x:A,y:R},j=0;j<y.length;j++){var H=y.feature(j);if(_.needGeometry){var ae=kn(H,!0);if(!_.filter(new pr(this.tileID.overscaledZ),ae,this.tileID.canonical))continue}else if(!_.filter(new pr(this.tileID.overscaledZ),H))continue;var se=s.getId(H,m),_e=new ym(H,k,A,R,se);_e.tile=O,r.push(_e)}}},ti.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},ti.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},ti.prototype.setExpiryData=function(r){var i=this.expirationTime;if(r.cacheControl){var s=ke(r.cacheControl);s["max-age"]&&(this.expirationTime=Date.now()+1e3*s["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){var f=Date.now(),m=!1;if(this.expirationTime>f)m=!1;else if(i)if(this.expirationTime<i)m=!0;else{var y=this.expirationTime-i;y?this.expirationTime=f+Math.max(y,3e4):m=!0}else m=!0;m?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},ti.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},ti.prototype.setFeatureState=function(r,i){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(r).length!==0){var s=this.latestFeatureIndex.loadVTLayers();for(var f in this.buckets)if(i.style.hasLayer(f)){var m=this.buckets[f],y=m.layers[0].sourceLayer||"_geojsonTileLayer",_=s[y],S=r[y];if(_&&S&&Object.keys(S).length!==0){m.update(S,_,this.imageAtlas&&this.imageAtlas.patternPositions||{});var k=i&&i.style&&i.style.getLayer(f);k&&(this.queryPadding=Math.max(this.queryPadding,k.queryRadius(m)))}}}},ti.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},ti.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Bt.now()},ti.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},ti.prototype.setHoldDuration=function(r){this.symbolFadeHoldUntil=Bt.now()+r},ti.prototype.setDependencies=function(r,i){for(var s={},f=0,m=i;f<m.length;f+=1)s[m[f]]=!0;this.dependencies[r]=s},ti.prototype.hasDependency=function(r,i){for(var s=0,f=r;s<f.length;s+=1){var m=this.dependencies[f[s]];if(m){for(var y=0,_=i;y<_.length;y+=1)if(m[_[y]])return!0}}return!1};var cl=I.performance,zw=function(r){this._marks={start:[r.url,"start"].join("#"),end:[r.url,"end"].join("#"),measure:r.url.toString()},cl.mark(this._marks.start)};zw.prototype.finish=function(){cl.mark(this._marks.end);var r=cl.getEntriesByName(this._marks.measure);return r.length===0&&(cl.measure(this._marks.measure,this._marks.start,this._marks.end),r=cl.getEntriesByName(this._marks.measure),cl.clearMarks(this._marks.start),cl.clearMarks(this._marks.end),cl.clearMeasures(this._marks.measure)),r},o.Actor=Cc,o.AlphaImage=pu,o.CanonicalTileID=du,o.CollisionBoxArray=p,o.Color=Ar,o.DEMData=Ps,o.DataConstantProperty=kt,o.DictionaryCoder=mm,o.EXTENT=8192,o.ErrorEvent=de,o.EvaluationParameters=pr,o.Event=te,o.Evented=me,o.FeatureIndex=As,o.FillBucket=ma,o.FillExtrusionBucket=ya,o.ImageAtlas=Pf,o.ImagePosition=am,o.LineBucket=Li,o.LngLat=un,o.LngLatBounds=Un,o.MercatorCoordinate=hu,o.ONE_EM=24,o.OverscaledTileID=$n,o.Point=T,o.Point$1=T,o.Properties=ci,o.Protobuf=im,o.RGBAImage=Ki,o.RequestManager=tr,o.RequestPerformance=zw,o.ResourceType=Er,o.SegmentVector=X,o.SourceFeatureState=kc,o.StructArrayLayout1ui2=xf,o.StructArrayLayout2f1f2i16=Cs,o.StructArrayLayout2i4=Es,o.StructArrayLayout3ui6=Ba,o.StructArrayLayout4i8=yf,o.SymbolBucket=Gr,o.Texture=fu,o.Tile=ti,o.Transitionable=ui,o.Uniform1f=tt,o.Uniform1i=Ke,o.Uniform2f=et,o.Uniform3f=dt,o.Uniform4f=Tt,o.UniformColor=Rt,o.UniformMatrix4f=br,o.UnwrappedTileID=Mw,o.ValidationError=ne,o.WritingMode=vo,o.ZoomHistory=cf,o.add=function(r,i,s){return r[0]=i[0]+s[0],r[1]=i[1]+s[1],r[2]=i[2]+s[2],r},o.addDynamicAttributes=s0,o.asyncAll=function(r,i,s){if(!r.length)return s(null,[]);var f=r.length,m=new Array(r.length),y=null;r.forEach(function(_,S){i(_,function(k,A){k&&(y=k),m[S]=A,--f==0&&s(y,m)})})},o.bezier=$,o.bindAll=ce,o.browser=Bt,o.cacheEntryPossiblyAdded=function(r){++Lt>$i&&(r.getActor().send("enforceCacheSizeLimit",Bn),Lt=0)},o.clamp=D,o.clearTileCache=function(r){var i=I.caches.delete("mapbox-tiles");r&&i.catch(r).then(function(){return r()})},o.clipLine=mw,o.clone=function(r){var i=new Mr(16);return i[0]=r[0],i[1]=r[1],i[2]=r[2],i[3]=r[3],i[4]=r[4],i[5]=r[5],i[6]=r[6],i[7]=r[7],i[8]=r[8],i[9]=r[9],i[10]=r[10],i[11]=r[11],i[12]=r[12],i[13]=r[13],i[14]=r[14],i[15]=r[15],i},o.clone$1=we,o.clone$2=function(r){var i=new Mr(3);return i[0]=r[0],i[1]=r[1],i[2]=r[2],i},o.collisionCircleLayout=yM,o.config=Ct,o.create=function(){var r=new Mr(16);return Mr!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r},o.create$1=function(){var r=new Mr(9);return Mr!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r},o.create$2=function(){var r=new Mr(4);return Mr!=Float32Array&&(r[1]=0,r[2]=0),r[0]=1,r[3]=1,r},o.createCommonjsModule=v,o.createExpression=Yu,o.createLayout=Qn,o.createStyleLayer=function(r){return r.type==="custom"?new ZM(r):new KM[r.type](r)},o.cross=function(r,i,s){var f=i[0],m=i[1],y=i[2],_=s[0],S=s[1],k=s[2];return r[0]=m*k-y*S,r[1]=y*_-f*k,r[2]=f*S-m*_,r},o.deepEqual=function r(i,s){if(Array.isArray(i)){if(!Array.isArray(s)||i.length!==s.length)return!1;for(var f=0;f<i.length;f++)if(!r(i[f],s[f]))return!1;return!0}if(typeof i=="object"&&i!==null&&s!==null){if(typeof s!="object"||Object.keys(i).length!==Object.keys(s).length)return!1;for(var m in i)if(!r(i[m],s[m]))return!1;return!0}return i===s},o.dot=function(r,i){return r[0]*i[0]+r[1]*i[1]+r[2]*i[2]},o.dot$1=function(r,i){return r[0]*i[0]+r[1]*i[1]+r[2]*i[2]+r[3]*i[3]},o.ease=G,o.emitValidationErrors=tu,o.endsWith=xe,o.enforceCacheSizeLimit=function(r){Ut(),ur&&ur.then(function(i){i.keys().then(function(s){for(var f=0;f<s.length-r;f++)i.delete(s[f])})})},o.evaluateSizeForFeature=uw,o.evaluateSizeForZoom=cw,o.evaluateVariableOffset=vw,o.evented=hf,o.extend=V,o.featureFilter=Qu,o.filterObject=ve,o.fromRotation=function(r,i){var s=Math.sin(i),f=Math.cos(i);return r[0]=f,r[1]=s,r[2]=0,r[3]=-s,r[4]=f,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r},o.getAnchorAlignment=n0,o.getAnchorJustification=a0,o.getArrayBuffer=Dr,o.getImage=U,o.getJSON=function(r,i){return sr(V(r,{type:"json"}),i)},o.getRTLTextPluginStatus=df,o.getReferrer=Le,o.getVideo=function(r,i){var s,f,m=I.document.createElement("video");m.muted=!0,m.onloadstart=function(){i(null,m)};for(var y=0;y<r.length;y++){var _=I.document.createElement("source");s=r[y],f=void 0,(f=I.document.createElement("a")).href=s,(f.protocol!==I.document.location.protocol||f.host!==I.document.location.host)&&(m.crossOrigin="Anonymous"),_.src=r[y],m.appendChild(_)}return{cancel:function(){}}},o.identity=oo,o.invert=function(r,i){var s=i[0],f=i[1],m=i[2],y=i[3],_=i[4],S=i[5],k=i[6],A=i[7],R=i[8],O=i[9],j=i[10],H=i[11],ae=i[12],se=i[13],_e=i[14],fe=i[15],Ie=s*S-f*_,Me=s*k-m*_,ze=s*A-y*_,Be=f*k-m*S,We=f*A-y*S,Qe=m*A-y*k,nt=R*se-O*ae,Et=R*_e-j*ae,ut=R*fe-H*ae,It=O*_e-j*se,ft=O*fe-H*se,or=j*fe-H*_e,$t=Ie*or-Me*ft+ze*It+Be*ut-We*Et+Qe*nt;return $t?(r[0]=(S*or-k*ft+A*It)*($t=1/$t),r[1]=(m*ft-f*or-y*It)*$t,r[2]=(se*Qe-_e*We+fe*Be)*$t,r[3]=(j*We-O*Qe-H*Be)*$t,r[4]=(k*ut-_*or-A*Et)*$t,r[5]=(s*or-m*ut+y*Et)*$t,r[6]=(_e*ze-ae*Qe-fe*Me)*$t,r[7]=(R*Qe-j*ze+H*Me)*$t,r[8]=(_*ft-S*ut+A*nt)*$t,r[9]=(f*ut-s*ft-y*nt)*$t,r[10]=(ae*We-se*ze+fe*Ie)*$t,r[11]=(O*ze-R*We-H*Ie)*$t,r[12]=(S*Et-_*It-k*nt)*$t,r[13]=(s*It-f*Et+m*nt)*$t,r[14]=(se*Me-ae*Be-_e*Ie)*$t,r[15]=(R*Be-O*Me+j*Ie)*$t,r):null},o.isChar=ot,o.isMapboxURL=Lr,o.keysDifference=function(r,i){var s=[];for(var f in r)f in i||s.push(f);return s},o.makeRequest=sr,o.mapObject=Te,o.mercatorXfromLng=Iw,o.mercatorYfromLat=Pw,o.mercatorZfromAltitude=Aw,o.mul=Wv,o.multiply=Ri,o.mvt=yc,o.nextPowerOfTwo=function(r){return r<=1?1:Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))},o.normalize=function(r,i){var s=i[0],f=i[1],m=i[2],y=s*s+f*f+m*m;return y>0&&(y=1/Math.sqrt(y)),r[0]=i[0]*y,r[1]=i[1]*y,r[2]=i[2]*y,r},o.number=Rn,o.offscreenCanvasSupported=vr,o.ortho=function(r,i,s,f,m,y,_){var S=1/(i-s),k=1/(f-m),A=1/(y-_);return r[0]=-2*S,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*k,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*A,r[11]=0,r[12]=(i+s)*S,r[13]=(m+f)*k,r[14]=(_+y)*A,r[15]=1,r},o.parseGlyphPBF=function(r){return new im(r).readFields(TM,[])},o.pbf=im,o.performSymbolLayout=function(r,i,s,f,m,y,_){r.createArrays(),r.tilePixelRatio=8192/(512*r.overscaling),r.compareText={},r.iconsNeedLinear=!1;var S=r.layers[0].layout,k=r.layers[0]._unevaluatedLayout._values,A={};if(r.textSizeData.kind==="composite"){var R=r.textSizeData,O=R.maxZoom;A.compositeTextSizes=[k["text-size"].possiblyEvaluate(new pr(R.minZoom),_),k["text-size"].possiblyEvaluate(new pr(O),_)]}if(r.iconSizeData.kind==="composite"){var j=r.iconSizeData,H=j.maxZoom;A.compositeIconSizes=[k["icon-size"].possiblyEvaluate(new pr(j.minZoom),_),k["icon-size"].possiblyEvaluate(new pr(H),_)]}A.layoutTextSize=k["text-size"].possiblyEvaluate(new pr(r.zoom+1),_),A.layoutIconSize=k["icon-size"].possiblyEvaluate(new pr(r.zoom+1),_),A.textMaxSize=k["text-size"].possiblyEvaluate(new pr(18));for(var ae=24*S.get("text-line-height"),se=S.get("text-rotation-alignment")==="map"&&S.get("symbol-placement")!=="point",_e=S.get("text-keep-upright"),fe=S.get("text-size"),Ie=function(){var Be=ze[Me],We=S.get("text-font").evaluate(Be,{},_).join(","),Qe=fe.evaluate(Be,{},_),nt=A.layoutTextSize.evaluate(Be,{},_),Et=A.layoutIconSize.evaluate(Be,{},_),ut={horizontal:{},vertical:void 0},It=Be.text,ft=[0,0];if(It){var or=It.toString(),$t=24*S.get("text-letter-spacing").evaluate(Be,{},_),bt=function(hr){for(var Kr=0,Ur=hr;Kr<Ur.length;Kr+=1)if(wr=Ur[Kr].charCodeAt(0),ot.Arabic(wr)||ot["Arabic Supplement"](wr)||ot["Arabic Extended-A"](wr)||ot["Arabic Presentation Forms-A"](wr)||ot["Arabic Presentation Forms-B"](wr))return!1;var wr;return!0}(or)?$t:0,lr=S.get("text-anchor").evaluate(Be,{},_),Yt=S.get("text-variable-anchor");if(!Yt){var xr=S.get("text-radial-offset").evaluate(Be,{},_);ft=xr?vw(lr,[24*xr,o0]):S.get("text-offset").evaluate(Be,{},_).map(function(hr){return 24*hr})}var At=se?"center":S.get("text-justify").evaluate(Be,{},_),kr=S.get("symbol-placement"),cn=kr==="point"?24*S.get("text-max-width").evaluate(Be,{},_):0,_n=function(){r.allowVerticalPlacement&&pf(or)&&(ut.vertical=sm(It,i,s,m,We,cn,ae,lr,"left",bt,ft,vo.vertical,!0,kr,nt,Qe))};if(!se&&Yt){for(var yn=At==="auto"?Yt.map(function(hr){return a0(hr)}):[At],pn=!1,xn=0;xn<yn.length;xn++){var Wn=yn[xn];if(!ut.horizontal[Wn])if(pn)ut.horizontal[Wn]=ut.horizontal[0];else{var Gn=sm(It,i,s,m,We,cn,ae,"center",Wn,bt,ft,vo.horizontal,!1,kr,nt,Qe);Gn&&(ut.horizontal[Wn]=Gn,pn=Gn.positionedLines.length===1)}}_n()}else{At==="auto"&&(At=a0(lr));var Ei=sm(It,i,s,m,We,cn,ae,lr,At,bt,ft,vo.horizontal,!1,kr,nt,Qe);Ei&&(ut.horizontal[At]=Ei),_n(),pf(or)&&se&&_e&&(ut.vertical=sm(It,i,s,m,We,cn,ae,lr,At,bt,ft,vo.vertical,!1,kr,nt,Qe))}}var ri=void 0,Ci=!1;if(Be.icon&&Be.icon.name){var Tn=f[Be.icon.name];Tn&&(ri=function(hr,Kr,Ur){var wr=n0(Ur),zi=Kr[0]-hr.displaySize[0]*wr.horizontalAlign,di=Kr[1]-hr.displaySize[1]*wr.verticalAlign;return{image:hr,top:di,bottom:di+hr.displaySize[1],left:zi,right:zi+hr.displaySize[0]}}(m[Be.icon.name],S.get("icon-offset").evaluate(Be,{},_),S.get("icon-anchor").evaluate(Be,{},_)),Ci=Tn.sdf,r.sdfIcons===void 0?r.sdfIcons=Tn.sdf:r.sdfIcons!==Tn.sdf&&pe("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Tn.pixelRatio!==r.pixelRatio||S.get("icon-rotate").constantOr(1)!==0)&&(r.iconsNeedLinear=!0))}var ni=xw(ut.horizontal)||ut.vertical;r.iconsInText=!!ni&&ni.iconsInText,(ni||ri)&&function(hr,Kr,Ur,wr,zi,di,on,zn,mi,Tr,Va){var _o=di.textMaxSize.evaluate(Kr,{});_o===void 0&&(_o=on);var qa,In=hr.layers[0].layout,Wa=In.get("icon-offset").evaluate(Kr,{},Va),Qo=xw(Ur.horizontal),Tc=on/24,mu=hr.tilePixelRatio*Tc,Ic=hr.tilePixelRatio*_o/24,Ms=hr.tilePixelRatio*zn,Pc=hr.tilePixelRatio*In.get("symbol-spacing"),gm=In.get("text-padding")*hr.tilePixelRatio,Ac=In.get("icon-padding")*hr.tilePixelRatio,Rf=In.get("text-max-angle")/180*Math.PI,vm=In.get("text-rotation-alignment")==="map"&&In.get("symbol-placement")!=="point",_m=In.get("icon-rotation-alignment")==="map"&&In.get("symbol-placement")!=="point",Rs=In.get("symbol-placement"),Lf=Pc/2,Mc=In.get("icon-text-fit");wr&&Mc!=="none"&&(hr.allowVerticalPlacement&&Ur.vertical&&(qa=lw(wr,Ur.vertical,Mc,In.get("icon-text-fit-padding"),Wa,Tc)),Qo&&(wr=lw(wr,Qo,Mc,In.get("icon-text-fit-padding"),Wa,Tc)));var pl=function(YM,$f){$f.x<0||$f.x>=8192||$f.y<0||$f.y>=8192||function(Pn,ga,JM,fl,m0,Bw,Cm,Ga,km,jf,Tm,Im,y0,Nw,Vf,Fw,Uw,$w,jw,Vw,xo,Pm,qw,Ha,QM){var Ww,gu,Oc,Bc,Nc,Fc=Pn.addToLineVertexArray(ga,JM),Gw=0,Hw=0,Zw=0,Kw=0,g0=-1,v0=-1,Ls={},Xw=oe(""),_0=0,x0=0;if(Ga._unevaluatedLayout.getValue("text-radial-offset")===void 0?(_0=(Ww=Ga.layout.get("text-offset").evaluate(xo,{},Ha).map(function(Wf){return 24*Wf}))[0],x0=Ww[1]):(_0=24*Ga.layout.get("text-radial-offset").evaluate(xo,{},Ha),x0=o0),Pn.allowVerticalPlacement&&fl.vertical){var Yw=Ga.layout.get("text-rotate").evaluate(xo,{},Ha)+90;Bc=new fm(km,ga,jf,Tm,Im,fl.vertical,y0,Nw,Vf,Yw),Cm&&(Nc=new fm(km,ga,jf,Tm,Im,Cm,Uw,$w,Vf,Yw))}if(m0){var b0=Ga.layout.get("icon-rotate").evaluate(xo,{}),Jw=Ga.layout.get("icon-text-fit")!=="none",Qw=yw(m0,b0,qw,Jw),w0=Cm?yw(Cm,b0,qw,Jw):void 0;Oc=new fm(km,ga,jf,Tm,Im,m0,Uw,$w,!1,b0),Gw=4*Qw.length;var e2=Pn.iconSizeData,qf=null;e2.kind==="source"?(qf=[128*Ga.layout.get("icon-size").evaluate(xo,{})])[0]>32640&&pe(Pn.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):e2.kind==="composite"&&((qf=[128*Pm.compositeIconSizes[0].evaluate(xo,{},Ha),128*Pm.compositeIconSizes[1].evaluate(xo,{},Ha)])[0]>32640||qf[1]>32640)&&pe(Pn.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),Pn.addSymbols(Pn.icon,Qw,qf,Vw,jw,xo,!1,ga,Fc.lineStartIndex,Fc.lineLength,-1,Ha),g0=Pn.icon.placedSymbolArray.length-1,w0&&(Hw=4*w0.length,Pn.addSymbols(Pn.icon,w0,qf,Vw,jw,xo,vo.vertical,ga,Fc.lineStartIndex,Fc.lineLength,-1,Ha),v0=Pn.icon.placedSymbolArray.length-1)}for(var t2 in fl.horizontal){var Am=fl.horizontal[t2];if(!gu){Xw=oe(Am.text);var eR=Ga.layout.get("text-rotate").evaluate(xo,{},Ha);gu=new fm(km,ga,jf,Tm,Im,Am,y0,Nw,Vf,eR)}var r2=Am.positionedLines.length===1;if(Zw+=_w(Pn,ga,Am,Bw,Ga,Vf,xo,Fw,Fc,fl.vertical?vo.horizontal:vo.horizontalOnly,r2?Object.keys(fl.horizontal):[t2],Ls,g0,Pm,Ha),r2)break}fl.vertical&&(Kw+=_w(Pn,ga,fl.vertical,Bw,Ga,Vf,xo,Fw,Fc,vo.vertical,["vertical"],Ls,v0,Pm,Ha));var tR=gu?gu.boxStartIndex:Pn.collisionBoxArray.length,rR=gu?gu.boxEndIndex:Pn.collisionBoxArray.length,nR=Bc?Bc.boxStartIndex:Pn.collisionBoxArray.length,iR=Bc?Bc.boxEndIndex:Pn.collisionBoxArray.length,oR=Oc?Oc.boxStartIndex:Pn.collisionBoxArray.length,aR=Oc?Oc.boxEndIndex:Pn.collisionBoxArray.length,sR=Nc?Nc.boxStartIndex:Pn.collisionBoxArray.length,lR=Nc?Nc.boxEndIndex:Pn.collisionBoxArray.length,Za=-1,Mm=function(Wf,i2){return Wf&&Wf.circleDiameter?Math.max(Wf.circleDiameter,i2):i2};Za=Mm(gu,Za),Za=Mm(Bc,Za),Za=Mm(Oc,Za);var n2=(Za=Mm(Nc,Za))>-1?1:0;n2&&(Za*=QM/24),Pn.glyphOffsetArray.length>=Gr.MAX_GLYPHS&&pe("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),xo.sortKey!==void 0&&Pn.addToSortKeyRanges(Pn.symbolInstances.length,xo.sortKey),Pn.symbolInstances.emplaceBack(ga.x,ga.y,Ls.right>=0?Ls.right:-1,Ls.center>=0?Ls.center:-1,Ls.left>=0?Ls.left:-1,Ls.vertical||-1,g0,v0,Xw,tR,rR,nR,iR,oR,aR,sR,lR,jf,Zw,Kw,Gw,Hw,n2,0,y0,_0,x0,Za)}(hr,$f,YM,Ur,wr,zi,qa,hr.layers[0],hr.collisionBoxArray,Kr.index,Kr.sourceLayerIndex,hr.index,mu,gm,vm,mi,Ms,Ac,_m,Wa,Kr,di,Tr,Va,on)};if(Rs==="line")for(var Rc=0,xm=mw(Kr.geometry,0,0,8192,8192);Rc<xm.length;Rc+=1)for(var bm=xm[Rc],zf=0,Df=zM(bm,Pc,Rf,Ur.vertical||Qo,wr,24,Ic,hr.overscaling,8192);zf<Df.length;zf+=1){var wm=Df[zf];Qo&&NM(hr,Qo.text,Lf,wm)||pl(bm,wm)}else if(Rs==="line-center")for(var Of=0,Bf=Kr.geometry;Of<Bf.length;Of+=1){var Nf=Bf[Of];if(Nf.length>1){var Sm=LM(Nf,Rf,Ur.vertical||Qo,wr,24,Ic);Sm&&pl(Nf,Sm)}}else if(Kr.type==="Polygon")for(var Lc=0,Em=Jv(Kr.geometry,0);Lc<Em.length;Lc+=1){var zc=Em[Lc],Ff=OM(zc,16);pl(zc[0],new xc(Ff.x,Ff.y,0))}else if(Kr.type==="LineString")for(var yu=0,Uf=Kr.geometry;yu<Uf.length;yu+=1){var Dc=Uf[yu];pl(Dc,new xc(Dc[0].x,Dc[0].y,0))}else if(Kr.type==="Point")for(var f0=0,Dw=Kr.geometry;f0<Dw.length;f0+=1)for(var h0=0,Ow=Dw[f0];h0<Ow.length;h0+=1){var d0=Ow[h0];pl([d0],new xc(d0.x,d0.y,0))}}(r,Be,ut,ri,f,A,nt,Et,ft,Ci,_)},Me=0,ze=r.features;Me<ze.length;Me+=1)Ie();y&&r.generateCollisionDebugBuffers()},o.perspective=function(r,i,s,f,m){var y,_=1/Math.tan(i/2);return r[0]=_/s,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=_,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,m!=null&&m!==1/0?(r[10]=(m+f)*(y=1/(f-m)),r[14]=2*m*f*y):(r[10]=-1,r[14]=-2*f),r},o.pick=function(r,i){for(var s={},f=0;f<i.length;f++){var m=i[f];m in r&&(s[m]=r[m])}return s},o.plugin=io,o.polygonIntersectsPolygon=Ua,o.postMapLoadEvent=jn,o.postTurnstileEvent=dr,o.potpack=iw,o.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],o.register=vt,o.registerForPluginStateChange=function(r){return r({pluginStatus:Gi,pluginURL:fa}),hf.on("pluginStateChange",r),r},o.renderColorRamp=Fb,o.rotate=function(r,i,s){var f=i[0],m=i[1],y=i[2],_=i[3],S=Math.sin(s),k=Math.cos(s);return r[0]=f*k+y*S,r[1]=m*k+_*S,r[2]=f*-S+y*k,r[3]=m*-S+_*k,r},o.rotateX=function(r,i,s){var f=Math.sin(s),m=Math.cos(s),y=i[4],_=i[5],S=i[6],k=i[7],A=i[8],R=i[9],O=i[10],j=i[11];return i!==r&&(r[0]=i[0],r[1]=i[1],r[2]=i[2],r[3]=i[3],r[12]=i[12],r[13]=i[13],r[14]=i[14],r[15]=i[15]),r[4]=y*m+A*f,r[5]=_*m+R*f,r[6]=S*m+O*f,r[7]=k*m+j*f,r[8]=A*m-y*f,r[9]=R*m-_*f,r[10]=O*m-S*f,r[11]=j*m-k*f,r},o.rotateZ=function(r,i,s){var f=Math.sin(s),m=Math.cos(s),y=i[0],_=i[1],S=i[2],k=i[3],A=i[4],R=i[5],O=i[6],j=i[7];return i!==r&&(r[8]=i[8],r[9]=i[9],r[10]=i[10],r[11]=i[11],r[12]=i[12],r[13]=i[13],r[14]=i[14],r[15]=i[15]),r[0]=y*m+A*f,r[1]=_*m+R*f,r[2]=S*m+O*f,r[3]=k*m+j*f,r[4]=A*m-y*f,r[5]=R*m-_*f,r[6]=O*m-S*f,r[7]=j*m-k*f,r},o.scale=function(r,i,s){var f=s[0],m=s[1],y=s[2];return r[0]=i[0]*f,r[1]=i[1]*f,r[2]=i[2]*f,r[3]=i[3]*f,r[4]=i[4]*m,r[5]=i[5]*m,r[6]=i[6]*m,r[7]=i[7]*m,r[8]=i[8]*y,r[9]=i[9]*y,r[10]=i[10]*y,r[11]=i[11]*y,r[12]=i[12],r[13]=i[13],r[14]=i[14],r[15]=i[15],r},o.scale$1=function(r,i,s){return r[0]=i[0]*s,r[1]=i[1]*s,r[2]=i[2]*s,r[3]=i[3]*s,r},o.scale$2=function(r,i,s){return r[0]=i[0]*s,r[1]=i[1]*s,r[2]=i[2]*s,r},o.setCacheLimits=function(r,i){Bn=r,$i=i},o.setRTLTextPlugin=function(r,i,s){if(s===void 0&&(s=!1),Gi==="deferred"||Gi==="loading"||Gi==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");fa=Bt.resolveURL(r),Gi="deferred",ac=i,nu(),s||zo()},o.sphericalToCartesian=function(r){var i=r[0],s=r[1],f=r[2];return s+=90,s*=Math.PI/180,f*=Math.PI/180,{x:i*Math.cos(s)*Math.sin(f),y:i*Math.sin(s)*Math.sin(f),z:i*Math.cos(f)}},o.sqrLen=function(r){var i=r[0],s=r[1];return i*i+s*s},o.styleSpec=Z,o.sub=function(r,i,s){return r[0]=i[0]-s[0],r[1]=i[1]-s[1],r[2]=i[2]-s[2],r},o.symbolSize=RM,o.transformMat3=function(r,i,s){var f=i[0],m=i[1],y=i[2];return r[0]=f*s[0]+m*s[3]+y*s[6],r[1]=f*s[1]+m*s[4]+y*s[7],r[2]=f*s[2]+m*s[5]+y*s[8],r},o.transformMat4=fc,o.translate=function(r,i,s){var f,m,y,_,S,k,A,R,O,j,H,ae,se=s[0],_e=s[1],fe=s[2];return i===r?(r[12]=i[0]*se+i[4]*_e+i[8]*fe+i[12],r[13]=i[1]*se+i[5]*_e+i[9]*fe+i[13],r[14]=i[2]*se+i[6]*_e+i[10]*fe+i[14],r[15]=i[3]*se+i[7]*_e+i[11]*fe+i[15]):(m=i[1],y=i[2],_=i[3],S=i[4],k=i[5],A=i[6],R=i[7],O=i[8],j=i[9],H=i[10],ae=i[11],r[0]=f=i[0],r[1]=m,r[2]=y,r[3]=_,r[4]=S,r[5]=k,r[6]=A,r[7]=R,r[8]=O,r[9]=j,r[10]=H,r[11]=ae,r[12]=f*se+S*_e+O*fe+i[12],r[13]=m*se+k*_e+j*fe+i[13],r[14]=y*se+A*_e+H*fe+i[14],r[15]=_*se+R*_e+ae*fe+i[15]),r},o.triggerPluginCompletionEvent=Yd,o.uniqueId=z,o.validateCustomStyleLayer=function(r){var i=[],s=r.id;return s===void 0&&i.push({message:"layers."+s+': missing required property "id"'}),r.render===void 0&&i.push({message:"layers."+s+': missing required method "render"'}),r.renderingMode&&r.renderingMode!=="2d"&&r.renderingMode!=="3d"&&i.push({message:"layers."+s+': property "renderingMode" must be either "2d" or "3d"'}),i},o.validateLight=Vv,o.validateStyle=Ql,o.values=function(r){var i=[];for(var s in r)i.push(r[s]);return i},o.vectorTile=yc,o.version="1.13.3",o.warnOnce=pe,o.webpSupported=ir,o.window=I,o.wrap=F}),d(["./shared"],function(o){function v(L){var U=typeof L;if(U==="number"||U==="boolean"||U==="string"||L==null)return JSON.stringify(L);if(Array.isArray(L)){for(var W="[",Y=0,te=L;Y<te.length;Y+=1)W+=v(te[Y])+",";return W+"]"}for(var de=Object.keys(L).sort(),me="{",Z=0;Z<de.length;Z++)me+=JSON.stringify(de[Z])+":"+v(L[de[Z]])+",";return me+"}"}function x(L){for(var U="",W=0,Y=o.refProperties;W<Y.length;W+=1)U+="/"+v(L[Y[W]]);return U}var E=function(L){this.keyCache={},L&&this.replace(L)};E.prototype.replace=function(L){this._layerConfigs={},this._layers={},this.update(L,[])},E.prototype.update=function(L,U){for(var W=this,Y=0,te=L;Y<te.length;Y+=1){var de=te[Y];this._layerConfigs[de.id]=de;var me=this._layers[de.id]=o.createStyleLayer(de);me._featureFilter=o.featureFilter(me.filter),this.keyCache[de.id]&&delete this.keyCache[de.id]}for(var Z=0,ne=U;Z<ne.length;Z+=1){var Se=ne[Z];delete this.keyCache[Se],delete this._layerConfigs[Se],delete this._layers[Se]}this.familiesBySource={};for(var He=0,Ye=function(it,at){for(var ar={},pt=0;pt<it.length;pt++){var yr=at&&at[it[pt].id]||x(it[pt]);at&&(at[it[pt].id]=yr);var Hr=ar[yr];Hr||(Hr=ar[yr]=[]),Hr.push(it[pt])}var cr=[];for(var Pr in ar)cr.push(ar[Pr]);return cr}(o.values(this._layerConfigs),this.keyCache);He<Ye.length;He+=1){var $e=Ye[He].map(function(it){return W._layers[it.id]}),Je=$e[0];if(Je.visibility!=="none"){var _t=Je.source||"",gt=this.familiesBySource[_t];gt||(gt=this.familiesBySource[_t]={});var Ve=Je.sourceLayer||"_geojsonTileLayer",ht=gt[Ve];ht||(ht=gt[Ve]=[]),ht.push($e)}}};var T=function(L){var U={},W=[];for(var Y in L){var te=L[Y],de=U[Y]={};for(var me in te){var Z=te[+me];if(Z&&Z.bitmap.width!==0&&Z.bitmap.height!==0){var ne={x:0,y:0,w:Z.bitmap.width+2,h:Z.bitmap.height+2};W.push(ne),de[me]={rect:ne,metrics:Z.metrics}}}}var Se=o.potpack(W),He=new o.AlphaImage({width:Se.w||1,height:Se.h||1});for(var Ye in L){var $e=L[Ye];for(var Je in $e){var _t=$e[+Je];if(_t&&_t.bitmap.width!==0&&_t.bitmap.height!==0){var gt=U[Ye][Je].rect;o.AlphaImage.copy(_t.bitmap,He,{x:0,y:0},{x:gt.x+1,y:gt.y+1},_t.bitmap)}}}this.image=He,this.positions=U};o.register("GlyphAtlas",T);var P=function(L){this.tileID=new o.OverscaledTileID(L.tileID.overscaledZ,L.tileID.wrap,L.tileID.canonical.z,L.tileID.canonical.x,L.tileID.canonical.y),this.uid=L.uid,this.zoom=L.zoom,this.pixelRatio=L.pixelRatio,this.tileSize=L.tileSize,this.source=L.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=L.showCollisionBoxes,this.collectResourceTiming=!!L.collectResourceTiming,this.returnDependencies=!!L.returnDependencies,this.promoteId=L.promoteId};function I(L,U,W){for(var Y=new o.EvaluationParameters(U),te=0,de=L;te<de.length;te+=1)de[te].recalculate(Y,W)}function q(L,U){var W=o.getArrayBuffer(L.request,function(Y,te,de,me){Y?U(Y):te&&U(null,{vectorTile:new o.vectorTile.VectorTile(new o.pbf(te)),rawData:te,cacheControl:de,expires:me})});return function(){W.cancel(),U()}}P.prototype.parse=function(L,U,W,Y,te){var de=this;this.status="parsing",this.data=L,this.collisionBoxArray=new o.CollisionBoxArray;var me=new o.DictionaryCoder(Object.keys(L.layers).sort()),Z=new o.FeatureIndex(this.tileID,this.promoteId);Z.bucketLayerIDs=[];var ne,Se,He,Ye,$e={},Je={featureIndex:Z,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:W},_t=U.familiesBySource[this.source];for(var gt in _t){var Ve=L.layers[gt];if(Ve){Ve.version===1&&o.warnOnce('Vector tile source "'+this.source+'" layer "'+gt+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var ht=me.encode(gt),it=[],at=0;at<Ve.length;at++){var ar=Ve.feature(at),pt=Z.getId(ar,gt);it.push({feature:ar,id:pt,index:at,sourceLayerIndex:ht})}for(var yr=0,Hr=_t[gt];yr<Hr.length;yr+=1){var cr=Hr[yr],Pr=cr[0];Pr.minzoom&&this.zoom<Math.floor(Pr.minzoom)||Pr.maxzoom&&this.zoom>=Pr.maxzoom||Pr.visibility!=="none"&&(I(cr,this.zoom,W),($e[Pr.id]=Pr.createBucket({index:Z.bucketLayerIDs.length,layers:cr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:ht,sourceID:this.source})).populate(it,Je,this.tileID.canonical),Z.bucketLayerIDs.push(cr.map(function(Wr){return Wr.id})))}}}var _r=o.mapObject(Je.glyphDependencies,function(Wr){return Object.keys(Wr).map(Number)});Object.keys(_r).length?Y.send("getGlyphs",{uid:this.uid,stacks:_r},function(Wr,mr){ne||(ne=Wr,Se=mr,En.call(de))}):Se={};var gi=Object.keys(Je.iconDependencies);gi.length?Y.send("getImages",{icons:gi,source:this.source,tileID:this.tileID,type:"icons"},function(Wr,mr){ne||(ne=Wr,He=mr,En.call(de))}):He={};var Or=Object.keys(Je.patternDependencies);function En(){if(ne)return te(ne);if(Se&&He&&Ye){var Wr=new T(Se),mr=new o.ImageAtlas(He,Ye);for(var Ar in $e){var Pi=$e[Ar];Pi instanceof o.SymbolBucket?(I(Pi.layers,this.zoom,W),o.performSymbolLayout(Pi,Se,Wr.positions,He,mr.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Pi.hasPattern&&(Pi instanceof o.LineBucket||Pi instanceof o.FillBucket||Pi instanceof o.FillExtrusionBucket)&&(I(Pi.layers,this.zoom,W),Pi.addFeatures(Je,this.tileID.canonical,mr.patternPositions))}this.status="done",te(null,{buckets:o.values($e).filter(function($l){return!$l.isEmpty()}),featureIndex:Z,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Wr.image,imageAtlas:mr,glyphMap:this.returnDependencies?Se:null,iconMap:this.returnDependencies?He:null,glyphPositions:this.returnDependencies?Wr.positions:null})}}Or.length?Y.send("getImages",{icons:Or,source:this.source,tileID:this.tileID,type:"patterns"},function(Wr,mr){ne||(ne=Wr,Ye=mr,En.call(de))}):Ye={},En.call(this)};var $=function(L,U,W,Y){this.actor=L,this.layerIndex=U,this.availableImages=W,this.loadVectorData=Y||q,this.loading={},this.loaded={}};$.prototype.loadTile=function(L,U){var W=this,Y=L.uid;this.loading||(this.loading={});var te=!!(L&&L.request&&L.request.collectResourceTiming)&&new o.RequestPerformance(L.request),de=this.loading[Y]=new P(L);de.abort=this.loadVectorData(L,function(me,Z){if(delete W.loading[Y],me||!Z)return de.status="done",W.loaded[Y]=de,U(me);var ne=Z.rawData,Se={};Z.expires&&(Se.expires=Z.expires),Z.cacheControl&&(Se.cacheControl=Z.cacheControl);var He={};if(te){var Ye=te.finish();Ye&&(He.resourceTiming=JSON.parse(JSON.stringify(Ye)))}de.vectorTile=Z.vectorTile,de.parse(Z.vectorTile,W.layerIndex,W.availableImages,W.actor,function($e,Je){if($e||!Je)return U($e);U(null,o.extend({rawTileData:ne.slice(0)},Je,Se,He))}),W.loaded=W.loaded||{},W.loaded[Y]=de})},$.prototype.reloadTile=function(L,U){var W=this,Y=this.loaded,te=L.uid,de=this;if(Y&&Y[te]){var me=Y[te];me.showCollisionBoxes=L.showCollisionBoxes;var Z=function(ne,Se){var He=me.reloadCallback;He&&(delete me.reloadCallback,me.parse(me.vectorTile,de.layerIndex,W.availableImages,de.actor,He)),U(ne,Se)};me.status==="parsing"?me.reloadCallback=Z:me.status==="done"&&(me.vectorTile?me.parse(me.vectorTile,this.layerIndex,this.availableImages,this.actor,Z):Z())}},$.prototype.abortTile=function(L,U){var W=this.loading,Y=L.uid;W&&W[Y]&&W[Y].abort&&(W[Y].abort(),delete W[Y]),U()},$.prototype.removeTile=function(L,U){var W=this.loaded,Y=L.uid;W&&W[Y]&&delete W[Y],U()};var G=o.window.ImageBitmap,D=function(){this.loaded={}};function F(L,U){if(L.length!==0){V(L[0],U);for(var W=1;W<L.length;W++)V(L[W],!U)}}function V(L,U){for(var W=0,Y=0,te=0,de=L.length,me=de-1;te<de;me=te++){var Z=(L[te][0]-L[me][0])*(L[me][1]+L[te][1]),ne=W+Z;Y+=Math.abs(W)>=Math.abs(Z)?W-ne+Z:Z-ne+W,W=ne}W+Y>=0!=!!U&&L.reverse()}D.prototype.loadTile=function(L,U){var W=L.uid,Y=L.encoding,te=L.rawImageData,de=G&&te instanceof G?this.getImageData(te):te,me=new o.DEMData(W,de,Y);this.loaded=this.loaded||{},this.loaded[W]=me,U(null,me)},D.prototype.getImageData=function(L){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(L.width,L.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=L.width,this.offscreenCanvas.height=L.height,this.offscreenCanvasContext.drawImage(L,0,0,L.width,L.height);var U=this.offscreenCanvasContext.getImageData(-1,-1,L.width+2,L.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new o.RGBAImage({width:U.width,height:U.height},U.data)},D.prototype.removeTile=function(L){var U=this.loaded,W=L.uid;U&&U[W]&&delete U[W]};var B=o.vectorTile.VectorTileFeature.prototype.toGeoJSON,z=function(L){this._feature=L,this.extent=o.EXTENT,this.type=L.type,this.properties=L.tags,"id"in L&&!isNaN(L.id)&&(this.id=parseInt(L.id,10))};z.prototype.loadGeometry=function(){if(this._feature.type===1){for(var L=[],U=0,W=this._feature.geometry;U<W.length;U+=1){var Y=W[U];L.push([new o.Point$1(Y[0],Y[1])])}return L}for(var te=[],de=0,me=this._feature.geometry;de<me.length;de+=1){for(var Z=[],ne=0,Se=me[de];ne<Se.length;ne+=1){var He=Se[ne];Z.push(new o.Point$1(He[0],He[1]))}te.push(Z)}return te},z.prototype.toGeoJSON=function(L,U,W){return B.call(this,L,U,W)};var re=function(L){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o.EXTENT,this.length=L.length,this._features=L};re.prototype.feature=function(L){return new z(this._features[L])};var ie=o.vectorTile.VectorTileFeature,ce=xe;function xe(L,U){this.options=U||{},this.features=L,this.length=L.length}function Te(L,U){this.id=typeof L.id=="number"?L.id:void 0,this.type=L.type,this.rawGeometry=L.type===1?[L.geometry]:L.geometry,this.properties=L.tags,this.extent=U||4096}xe.prototype.feature=function(L){return new Te(this.features[L],this.options.extent)},Te.prototype.loadGeometry=function(){var L=this.rawGeometry;this.geometry=[];for(var U=0;U<L.length;U++){for(var W=L[U],Y=[],te=0;te<W.length;te++)Y.push(new o.Point$1(W[te][0],W[te][1]));this.geometry.push(Y)}return this.geometry},Te.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var L=this.geometry,U=1/0,W=-1/0,Y=1/0,te=-1/0,de=0;de<L.length;de++)for(var me=L[de],Z=0;Z<me.length;Z++){var ne=me[Z];U=Math.min(U,ne.x),W=Math.max(W,ne.x),Y=Math.min(Y,ne.y),te=Math.max(te,ne.y)}return[U,Y,W,te]},Te.prototype.toGeoJSON=ie.prototype.toGeoJSON;var ve=ee,we=ce;function ee(L){var U=new o.pbf;return function(W,Y){for(var te in W.layers)Y.writeMessage(3,pe,W.layers[te])}(L,U),U.finish()}function pe(L,U){var W;U.writeVarintField(15,L.version||1),U.writeStringField(1,L.name||""),U.writeVarintField(5,L.extent||4096);var Y={keys:[],values:[],keycache:{},valuecache:{}};for(W=0;W<L.length;W++)Y.feature=L.feature(W),U.writeMessage(2,Oe,Y);var te=Y.keys;for(W=0;W<te.length;W++)U.writeStringField(3,te[W]);var de=Y.values;for(W=0;W<de.length;W++)U.writeMessage(4,Ze,de[W])}function Oe(L,U){var W=L.feature;W.id!==void 0&&U.writeVarintField(1,W.id),U.writeMessage(2,Ue,L),U.writeVarintField(3,W.type),U.writeMessage(4,je,W)}function Ue(L,U){var W=L.feature,Y=L.keys,te=L.values,de=L.keycache,me=L.valuecache;for(var Z in W.properties){var ne=de[Z];ne===void 0&&(Y.push(Z),de[Z]=ne=Y.length-1),U.writeVarint(ne);var Se=W.properties[Z],He=typeof Se;He!=="string"&&He!=="boolean"&&He!=="number"&&(Se=JSON.stringify(Se));var Ye=He+":"+Se,$e=me[Ye];$e===void 0&&(te.push(Se),me[Ye]=$e=te.length-1),U.writeVarint($e)}}function Ee(L,U){return(U<<3)+(7&L)}function ke(L){return L<<1^L>>31}function je(L,U){for(var W=L.loadGeometry(),Y=L.type,te=0,de=0,me=W.length,Z=0;Z<me;Z++){var ne=W[Z],Se=1;Y===1&&(Se=ne.length),U.writeVarint(Ee(1,Se));for(var He=Y===3?ne.length-1:ne.length,Ye=0;Ye<He;Ye++){Ye===1&&Y!==1&&U.writeVarint(Ee(2,He-1));var $e=ne[Ye].x-te,Je=ne[Ye].y-de;U.writeVarint(ke($e)),U.writeVarint(ke(Je)),te+=$e,de+=Je}Y===3&&U.writeVarint(Ee(7,1))}}function Ze(L,U){var W=typeof L;W==="string"?U.writeStringField(1,L):W==="boolean"?U.writeBooleanField(7,L):W==="number"&&(L%1!=0?U.writeDoubleField(3,L):L<0?U.writeSVarintField(6,L):U.writeVarintField(5,L))}function wt(L,U,W,Y){Pe(L,W,Y),Pe(U,2*W,2*Y),Pe(U,2*W+1,2*Y+1)}function Pe(L,U,W){var Y=L[U];L[U]=L[W],L[W]=Y}function Ge(L,U,W,Y){var te=L-W,de=U-Y;return te*te+de*de}ve.fromVectorTileJs=ee,ve.fromGeojsonVt=function(L,U){U=U||{};var W={};for(var Y in L)W[Y]=new ce(L[Y].features,U),W[Y].name=Y,W[Y].version=U.version,W[Y].extent=U.extent;return ee({layers:W})},ve.GeoJSONWrapper=we;var lt=function(L){return L[0]},Re=function(L){return L[1]},qe=function(L,U,W,Y,te){U===void 0&&(U=lt),W===void 0&&(W=Re),Y===void 0&&(Y=64),te===void 0&&(te=Float64Array),this.nodeSize=Y,this.points=L;for(var de=L.length<65536?Uint16Array:Uint32Array,me=this.ids=new de(L.length),Z=this.coords=new te(2*L.length),ne=0;ne<L.length;ne++)me[ne]=ne,Z[2*ne]=U(L[ne]),Z[2*ne+1]=W(L[ne]);(function Se(He,Ye,$e,Je,_t,gt){if(!(_t-Je<=$e)){var Ve=Je+_t>>1;(function ht(it,at,ar,pt,yr,Hr){for(;yr>pt;){if(yr-pt>600){var cr=yr-pt+1,Pr=ar-pt+1,_r=Math.log(cr),gi=.5*Math.exp(2*_r/3),Or=.5*Math.sqrt(_r*gi*(cr-gi)/cr)*(Pr-cr/2<0?-1:1);ht(it,at,ar,Math.max(pt,Math.floor(ar-Pr*gi/cr+Or)),Math.min(yr,Math.floor(ar+(cr-Pr)*gi/cr+Or)),Hr)}var En=at[2*ar+Hr],Wr=pt,mr=yr;for(wt(it,at,pt,ar),at[2*yr+Hr]>En&&wt(it,at,pt,yr);Wr<mr;){for(wt(it,at,Wr,mr),Wr++,mr--;at[2*Wr+Hr]<En;)Wr++;for(;at[2*mr+Hr]>En;)mr--}at[2*pt+Hr]===En?wt(it,at,pt,mr):wt(it,at,++mr,yr),mr<=ar&&(pt=mr+1),ar<=mr&&(yr=mr-1)}})(He,Ye,Ve,Je,_t,gt%2),Se(He,Ye,$e,Je,Ve-1,gt+1),Se(He,Ye,$e,Ve+1,_t,gt+1)}})(me,Z,Y,0,me.length-1,0)};qe.prototype.range=function(L,U,W,Y){return function(te,de,me,Z,ne,Se,He){for(var Ye,$e,Je=[0,te.length-1,0],_t=[];Je.length;){var gt=Je.pop(),Ve=Je.pop(),ht=Je.pop();if(Ve-ht<=He)for(var it=ht;it<=Ve;it++)$e=de[2*it+1],(Ye=de[2*it])>=me&&Ye<=ne&&$e>=Z&&$e<=Se&&_t.push(te[it]);else{var at=Math.floor((ht+Ve)/2);$e=de[2*at+1],(Ye=de[2*at])>=me&&Ye<=ne&&$e>=Z&&$e<=Se&&_t.push(te[at]);var ar=(gt+1)%2;(gt===0?me<=Ye:Z<=$e)&&(Je.push(ht),Je.push(at-1),Je.push(ar)),(gt===0?ne>=Ye:Se>=$e)&&(Je.push(at+1),Je.push(Ve),Je.push(ar))}}return _t}(this.ids,this.coords,L,U,W,Y,this.nodeSize)},qe.prototype.within=function(L,U,W){return function(Y,te,de,me,Z,ne){for(var Se=[0,Y.length-1,0],He=[],Ye=Z*Z;Se.length;){var $e=Se.pop(),Je=Se.pop(),_t=Se.pop();if(Je-_t<=ne)for(var gt=_t;gt<=Je;gt++)Ge(te[2*gt],te[2*gt+1],de,me)<=Ye&&He.push(Y[gt]);else{var Ve=Math.floor((_t+Je)/2),ht=te[2*Ve],it=te[2*Ve+1];Ge(ht,it,de,me)<=Ye&&He.push(Y[Ve]);var at=($e+1)%2;($e===0?de-Z<=ht:me-Z<=it)&&(Se.push(_t),Se.push(Ve-1),Se.push(at)),($e===0?de+Z>=ht:me+Z>=it)&&(Se.push(Ve+1),Se.push(Je),Se.push(at))}}return He}(this.ids,this.coords,L,U,W,this.nodeSize)};var Xt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(L){return L}},Pt=function(L){this.options=Ot(Object.create(Xt),L),this.trees=new Array(this.options.maxZoom+1)};function Bt(L,U,W,Y,te){return{x:L,y:U,zoom:1/0,id:W,parentId:-1,numPoints:Y,properties:te}}function Ct(L,U){var W=L.geometry.coordinates,Y=W[1];return{x:Jt(W[0]),y:st(Y),zoom:1/0,index:U,parentId:-1}}function ir(L){return{type:"Feature",id:L.id,properties:Kt(L),geometry:{type:"Point",coordinates:[(Y=L.x,360*(Y-.5)),(U=L.y,W=(180-360*U)*Math.PI/180,360*Math.atan(Math.exp(W))/Math.PI-90)]}};var U,W,Y}function Kt(L){var U=L.numPoints,W=U>=1e4?Math.round(U/1e3)+"k":U>=1e3?Math.round(U/100)/10+"k":U;return Ot(Ot({},L.properties),{cluster:!0,cluster_id:L.id,point_count:U,point_count_abbreviated:W})}function Jt(L){return L/360+.5}function st(L){var U=Math.sin(L*Math.PI/180),W=.5-.25*Math.log((1+U)/(1-U))/Math.PI;return W<0?0:W>1?1:W}function Ot(L,U){for(var W in U)L[W]=U[W];return L}function tr(L){return L.x}function Lr(L){return L.y}function Fr(L,U,W,Y,te,de){var me=te-W,Z=de-Y;if(me!==0||Z!==0){var ne=((L-W)*me+(U-Y)*Z)/(me*me+Z*Z);ne>1?(W=te,Y=de):ne>0&&(W+=me*ne,Y+=Z*ne)}return(me=L-W)*me+(Z=U-Y)*Z}function rr(L,U,W,Y){var te={id:L===void 0?null:L,type:U,geometry:W,tags:Y,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(de){var me=de.geometry,Z=de.type;if(Z==="Point"||Z==="MultiPoint"||Z==="LineString")qr(de,me);else if(Z==="Polygon"||Z==="MultiLineString")for(var ne=0;ne<me.length;ne++)qr(de,me[ne]);else if(Z==="MultiPolygon")for(ne=0;ne<me.length;ne++)for(var Se=0;Se<me[ne].length;Se++)qr(de,me[ne][Se])}(te),te}function qr(L,U){for(var W=0;W<U.length;W+=3)L.minX=Math.min(L.minX,U[W]),L.minY=Math.min(L.minY,U[W+1]),L.maxX=Math.max(L.maxX,U[W]),L.maxY=Math.max(L.maxY,U[W+1])}function zr(L,U,W,Y){if(U.geometry){var te=U.geometry.coordinates,de=U.geometry.type,me=Math.pow(W.tolerance/((1<<W.maxZoom)*W.extent),2),Z=[],ne=U.id;if(W.promoteId?ne=U.properties[W.promoteId]:W.generateId&&(ne=Y||0),de==="Point")Cr(te,Z);else if(de==="MultiPoint")for(var Se=0;Se<te.length;Se++)Cr(te[Se],Z);else if(de==="LineString")an(te,Z,me,!1);else if(de==="MultiLineString"){if(W.lineMetrics){for(Se=0;Se<te.length;Se++)an(te[Se],Z=[],me,!1),L.push(rr(ne,"LineString",Z,U.properties));return}Rr(te,Z,me,!1)}else if(de==="Polygon")Rr(te,Z,me,!0);else{if(de!=="MultiPolygon"){if(de==="GeometryCollection"){for(Se=0;Se<U.geometry.geometries.length;Se++)zr(L,{id:ne,geometry:U.geometry.geometries[Se],properties:U.properties},W,Y);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Se=0;Se<te.length;Se++){var He=[];Rr(te[Se],He,me,!0),Z.push(He)}}L.push(rr(ne,de,Z,U.properties))}}function Cr(L,U){U.push(ur(L[0])),U.push(Yr(L[1])),U.push(0)}function an(L,U,W,Y){for(var te,de,me=0,Z=0;Z<L.length;Z++){var ne=ur(L[Z][0]),Se=Yr(L[Z][1]);U.push(ne),U.push(Se),U.push(0),Z>0&&(me+=Y?(te*Se-ne*de)/2:Math.sqrt(Math.pow(ne-te,2)+Math.pow(Se-de,2))),te=ne,de=Se}var He=U.length-3;U[2]=1,function Ye($e,Je,_t,gt){for(var Ve,ht=gt,it=_t-Je>>1,at=_t-Je,ar=$e[Je],pt=$e[Je+1],yr=$e[_t],Hr=$e[_t+1],cr=Je+3;cr<_t;cr+=3){var Pr=Fr($e[cr],$e[cr+1],ar,pt,yr,Hr);if(Pr>ht)Ve=cr,ht=Pr;else if(Pr===ht){var _r=Math.abs(cr-it);_r<at&&(Ve=cr,at=_r)}}ht>gt&&(Ve-Je>3&&Ye($e,Je,Ve,gt),$e[Ve+2]=ht,_t-Ve>3&&Ye($e,Ve,_t,gt))}(U,0,He,W),U[He+2]=1,U.size=Math.abs(me),U.start=0,U.end=U.size}function Rr(L,U,W,Y){for(var te=0;te<L.length;te++){var de=[];an(L[te],de,W,Y),U.push(de)}}function ur(L){return L/360+.5}function Yr(L){var U=Math.sin(L*Math.PI/180),W=.5-.25*Math.log((1+U)/(1-U))/Math.PI;return W<0?0:W>1?1:W}function Sn(L,U,W,Y,te,de,me,Z){if(Y/=U,de>=(W/=U)&&me<Y)return L;if(me<W||de>=Y)return null;for(var ne=[],Se=0;Se<L.length;Se++){var He=L[Se],Ye=He.geometry,$e=He.type,Je=te===0?He.minX:He.minY,_t=te===0?He.maxX:He.maxY;if(Je>=W&&_t<Y)ne.push(He);else if(!(_t<W||Je>=Y)){var gt=[];if($e==="Point"||$e==="MultiPoint")ai(Ye,gt,W,Y,te);else if($e==="LineString")dr(Ye,gt,W,Y,te,!1,Z.lineMetrics);else if($e==="MultiLineString")jn(Ye,gt,W,Y,te,!1);else if($e==="Polygon")jn(Ye,gt,W,Y,te,!0);else if($e==="MultiPolygon")for(var Ve=0;Ve<Ye.length;Ve++){var ht=[];jn(Ye[Ve],ht,W,Y,te,!0),ht.length&&gt.push(ht)}if(gt.length){if(Z.lineMetrics&&$e==="LineString"){for(Ve=0;Ve<gt.length;Ve++)ne.push(rr(He.id,$e,gt[Ve],He.tags));continue}$e!=="LineString"&&$e!=="MultiLineString"||(gt.length===1?($e="LineString",gt=gt[0]):$e="MultiLineString"),$e!=="Point"&&$e!=="MultiPoint"||($e=gt.length===3?"Point":"MultiPoint"),ne.push(rr(He.id,$e,gt,He.tags))}}}return ne.length?ne:null}function ai(L,U,W,Y,te){for(var de=0;de<L.length;de+=3){var me=L[de+te];me>=W&&me<=Y&&(U.push(L[de]),U.push(L[de+1]),U.push(L[de+2]))}}function dr(L,U,W,Y,te,de,me){for(var Z,ne,Se=Nt(L),He=te===0?$i:Ut,Ye=L.start,$e=0;$e<L.length-3;$e+=3){var Je=L[$e],_t=L[$e+1],gt=L[$e+2],Ve=L[$e+3],ht=L[$e+4],it=te===0?Je:_t,at=te===0?Ve:ht,ar=!1;me&&(Z=Math.sqrt(Math.pow(Je-Ve,2)+Math.pow(_t-ht,2))),it<W?at>W&&(ne=He(Se,Je,_t,Ve,ht,W),me&&(Se.start=Ye+Z*ne)):it>Y?at<Y&&(ne=He(Se,Je,_t,Ve,ht,Y),me&&(Se.start=Ye+Z*ne)):Bn(Se,Je,_t,gt),at<W&&it>=W&&(ne=He(Se,Je,_t,Ve,ht,W),ar=!0),at>Y&&it<=Y&&(ne=He(Se,Je,_t,Ve,ht,Y),ar=!0),!de&&ar&&(me&&(Se.end=Ye+Z*ne),U.push(Se),Se=Nt(L)),me&&(Ye+=Z)}var pt=L.length-3;Je=L[pt],_t=L[pt+1],gt=L[pt+2],(it=te===0?Je:_t)>=W&&it<=Y&&Bn(Se,Je,_t,gt),pt=Se.length-3,de&&pt>=3&&(Se[pt]!==Se[0]||Se[pt+1]!==Se[1])&&Bn(Se,Se[0],Se[1],Se[2]),Se.length&&U.push(Se)}function Nt(L){var U=[];return U.size=L.size,U.start=L.start,U.end=L.end,U}function jn(L,U,W,Y,te,de){for(var me=0;me<L.length;me++)dr(L[me],U,W,Y,te,de,!1)}function Bn(L,U,W,Y){L.push(U),L.push(W),L.push(Y)}function $i(L,U,W,Y,te,de){var me=(de-U)/(Y-U);return L.push(de),L.push(W+(te-W)*me),L.push(1),me}function Ut(L,U,W,Y,te,de){var me=(de-W)/(te-W);return L.push(U+(Y-U)*me),L.push(de),L.push(1),me}function Sr(L,U){for(var W=[],Y=0;Y<L.length;Y++){var te,de=L[Y],me=de.type;if(me==="Point"||me==="MultiPoint"||me==="LineString")te=ct(de.geometry,U);else if(me==="MultiLineString"||me==="Polygon"){te=[];for(var Z=0;Z<de.geometry.length;Z++)te.push(ct(de.geometry[Z],U))}else if(me==="MultiPolygon")for(te=[],Z=0;Z<de.geometry.length;Z++){for(var ne=[],Se=0;Se<de.geometry[Z].length;Se++)ne.push(ct(de.geometry[Z][Se],U));te.push(ne)}W.push(rr(de.id,me,te,de.tags))}return W}function ct(L,U){var W=[];W.size=L.size,L.start!==void 0&&(W.start=L.start,W.end=L.end);for(var Y=0;Y<L.length;Y+=3)W.push(L[Y]+U,L[Y+1],L[Y+2]);return W}function Lt(L,U){if(L.transformed)return L;var W,Y,te,de=1<<L.z,me=L.x,Z=L.y;for(W=0;W<L.features.length;W++){var ne=L.features[W],Se=ne.geometry,He=ne.type;if(ne.geometry=[],He===1)for(Y=0;Y<Se.length;Y+=2)ne.geometry.push(vr(Se[Y],Se[Y+1],U,de,me,Z));else for(Y=0;Y<Se.length;Y++){var Ye=[];for(te=0;te<Se[Y].length;te+=2)Ye.push(vr(Se[Y][te],Se[Y][te+1],U,de,me,Z));ne.geometry.push(Ye)}}return L.transformed=!0,L}function vr(L,U,W,Y,te,de){return[Math.round(W*(L*Y-te)),Math.round(W*(U*Y-de))]}function Er(L,U,W,Y,te){for(var de=U===te.maxZoom?0:te.tolerance/((1<<U)*te.extent),me={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:W,y:Y,z:U,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Z=0;Z<L.length;Z++){me.numFeatures++,nn(me,L[Z],de,te);var ne=L[Z].minX,Se=L[Z].minY,He=L[Z].maxX,Ye=L[Z].maxY;ne<me.minX&&(me.minX=ne),Se<me.minY&&(me.minY=Se),He>me.maxX&&(me.maxX=He),Ye>me.maxY&&(me.maxY=Ye)}return me}function nn(L,U,W,Y){var te=U.geometry,de=U.type,me=[];if(de==="Point"||de==="MultiPoint")for(var Z=0;Z<te.length;Z+=3)me.push(te[Z]),me.push(te[Z+1]),L.numPoints++,L.numSimplified++;else if(de==="LineString")Le(me,te,L,W,!1,!1);else if(de==="MultiLineString"||de==="Polygon")for(Z=0;Z<te.length;Z++)Le(me,te[Z],L,W,de==="Polygon",Z===0);else if(de==="MultiPolygon")for(var ne=0;ne<te.length;ne++){var Se=te[ne];for(Z=0;Z<Se.length;Z++)Le(me,Se[Z],L,W,!0,Z===0)}if(me.length){var He=U.tags||null;if(de==="LineString"&&Y.lineMetrics){for(var Ye in He={},U.tags)He[Ye]=U.tags[Ye];He.mapbox_clip_start=te.start/te.size,He.mapbox_clip_end=te.end/te.size}var $e={geometry:me,type:de==="Polygon"||de==="MultiPolygon"?3:de==="LineString"||de==="MultiLineString"?2:1,tags:He};U.id!==null&&($e.id=U.id),L.features.push($e)}}function Le(L,U,W,Y,te,de){var me=Y*Y;if(Y>0&&U.size<(te?me:Y))W.numPoints+=U.length/3;else{for(var Z=[],ne=0;ne<U.length;ne+=3)(Y===0||U[ne+2]>me)&&(W.numSimplified++,Z.push(U[ne]),Z.push(U[ne+1])),W.numPoints++;te&&function(Se,He){for(var Ye=0,$e=0,Je=Se.length,_t=Je-2;$e<Je;_t=$e,$e+=2)Ye+=(Se[$e]-Se[_t])*(Se[$e+1]+Se[_t+1]);if(Ye>0===He)for($e=0,Je=Se.length;$e<Je/2;$e+=2){var gt=Se[$e],Ve=Se[$e+1];Se[$e]=Se[Je-2-$e],Se[$e+1]=Se[Je-1-$e],Se[Je-2-$e]=gt,Se[Je-1-$e]=Ve}}(Z,de),L.push(Z)}}function rt(L,U){var W=(U=this.options=function(te,de){for(var me in de)te[me]=de[me];return te}(Object.create(this.options),U)).debug;if(W&&console.time("preprocess data"),U.maxZoom<0||U.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(U.promoteId&&U.generateId)throw new Error("promoteId and generateId cannot be used together.");var Y=function(te,de){var me=[];if(te.type==="FeatureCollection")for(var Z=0;Z<te.features.length;Z++)zr(me,te.features[Z],de,Z);else zr(me,te.type==="Feature"?te:{geometry:te},de);return me}(L,U);this.tiles={},this.tileCoords=[],W&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",U.indexMaxZoom,U.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(Y=function(te,de){var me=de.buffer/de.extent,Z=te,ne=Sn(te,1,-1-me,me,0,-1,2,de),Se=Sn(te,1,1-me,2+me,0,-1,2,de);return(ne||Se)&&(Z=Sn(te,1,-me,1+me,0,-1,2,de)||[],ne&&(Z=Sr(ne,1).concat(Z)),Se&&(Z=Z.concat(Sr(Se,-1)))),Z}(Y,U)).length&&this.splitTile(Y,0,0,0),W&&(Y.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function St(L,U,W){return 32*((1<<L)*W+U)+L}function sr(L,U){var W=L.tileID.canonical;if(!this._geoJSONIndex)return U(null,null);var Y=this._geoJSONIndex.getTile(W.z,W.x,W.y);if(!Y)return U(null,null);var te=new re(Y.features),de=ve(te);de.byteOffset===0&&de.byteLength===de.buffer.byteLength||(de=new Uint8Array(de)),U(null,{vectorTile:te,rawData:de.buffer})}Pt.prototype.load=function(L){var U=this.options,W=U.log,Y=U.minZoom,te=U.maxZoom,de=U.nodeSize;W&&console.time("total time");var me="prepare "+L.length+" points";W&&console.time(me),this.points=L;for(var Z=[],ne=0;ne<L.length;ne++)L[ne].geometry&&Z.push(Ct(L[ne],ne));this.trees[te+1]=new qe(Z,tr,Lr,de,Float32Array),W&&console.timeEnd(me);for(var Se=te;Se>=Y;Se--){var He=+Date.now();Z=this._cluster(Z,Se),this.trees[Se]=new qe(Z,tr,Lr,de,Float32Array),W&&console.log("z%d: %d clusters in %dms",Se,Z.length,+Date.now()-He)}return W&&console.timeEnd("total time"),this},Pt.prototype.getClusters=function(L,U){var W=((L[0]+180)%360+360)%360-180,Y=Math.max(-90,Math.min(90,L[1])),te=L[2]===180?180:((L[2]+180)%360+360)%360-180,de=Math.max(-90,Math.min(90,L[3]));if(L[2]-L[0]>=360)W=-180,te=180;else if(W>te){var me=this.getClusters([W,Y,180,de],U),Z=this.getClusters([-180,Y,te,de],U);return me.concat(Z)}for(var ne=this.trees[this._limitZoom(U)],Se=[],He=0,Ye=ne.range(Jt(W),st(de),Jt(te),st(Y));He<Ye.length;He+=1){var $e=ne.points[Ye[He]];Se.push($e.numPoints?ir($e):this.points[$e.index])}return Se},Pt.prototype.getChildren=function(L){var U=this._getOriginId(L),W=this._getOriginZoom(L),Y="No cluster with the specified id.",te=this.trees[W];if(!te)throw new Error(Y);var de=te.points[U];if(!de)throw new Error(Y);for(var me=this.options.radius/(this.options.extent*Math.pow(2,W-1)),Z=[],ne=0,Se=te.within(de.x,de.y,me);ne<Se.length;ne+=1){var He=te.points[Se[ne]];He.parentId===L&&Z.push(He.numPoints?ir(He):this.points[He.index])}if(Z.length===0)throw new Error(Y);return Z},Pt.prototype.getLeaves=function(L,U,W){var Y=[];return this._appendLeaves(Y,L,U=U||10,W=W||0,0),Y},Pt.prototype.getTile=function(L,U,W){var Y=this.trees[this._limitZoom(L)],te=Math.pow(2,L),de=this.options,me=de.radius/de.extent,Z=(W-me)/te,ne=(W+1+me)/te,Se={features:[]};return this._addTileFeatures(Y.range((U-me)/te,Z,(U+1+me)/te,ne),Y.points,U,W,te,Se),U===0&&this._addTileFeatures(Y.range(1-me/te,Z,1,ne),Y.points,te,W,te,Se),U===te-1&&this._addTileFeatures(Y.range(0,Z,me/te,ne),Y.points,-1,W,te,Se),Se.features.length?Se:null},Pt.prototype.getClusterExpansionZoom=function(L){for(var U=this._getOriginZoom(L)-1;U<=this.options.maxZoom;){var W=this.getChildren(L);if(U++,W.length!==1)break;L=W[0].properties.cluster_id}return U},Pt.prototype._appendLeaves=function(L,U,W,Y,te){for(var de=0,me=this.getChildren(U);de<me.length;de+=1){var Z=me[de],ne=Z.properties;if(ne&&ne.cluster?te+ne.point_count<=Y?te+=ne.point_count:te=this._appendLeaves(L,ne.cluster_id,W,Y,te):te<Y?te++:L.push(Z),L.length===W)break}return te},Pt.prototype._addTileFeatures=function(L,U,W,Y,te,de){for(var me=0,Z=L;me<Z.length;me+=1){var ne=U[Z[me]],Se=ne.numPoints,He={type:1,geometry:[[Math.round(this.options.extent*(ne.x*te-W)),Math.round(this.options.extent*(ne.y*te-Y))]],tags:Se?Kt(ne):this.points[ne.index].properties},Ye=void 0;Se?Ye=ne.id:this.options.generateId?Ye=ne.index:this.points[ne.index].id&&(Ye=this.points[ne.index].id),Ye!==void 0&&(He.id=Ye),de.features.push(He)}},Pt.prototype._limitZoom=function(L){return Math.max(this.options.minZoom,Math.min(+L,this.options.maxZoom+1))},Pt.prototype._cluster=function(L,U){for(var W=[],Y=this.options,te=Y.reduce,de=Y.minPoints,me=Y.radius/(Y.extent*Math.pow(2,U)),Z=0;Z<L.length;Z++){var ne=L[Z];if(!(ne.zoom<=U)){ne.zoom=U;for(var Se=this.trees[U+1],He=Se.within(ne.x,ne.y,me),Ye=ne.numPoints||1,$e=Ye,Je=0,_t=He;Je<_t.length;Je+=1){var gt=Se.points[_t[Je]];gt.zoom>U&&($e+=gt.numPoints||1)}if($e>=de){for(var Ve=ne.x*Ye,ht=ne.y*Ye,it=te&&Ye>1?this._map(ne,!0):null,at=(Z<<5)+(U+1)+this.points.length,ar=0,pt=He;ar<pt.length;ar+=1){var yr=Se.points[pt[ar]];if(!(yr.zoom<=U)){yr.zoom=U;var Hr=yr.numPoints||1;Ve+=yr.x*Hr,ht+=yr.y*Hr,yr.parentId=at,te&&(it||(it=this._map(ne,!0)),te(it,this._map(yr)))}}ne.parentId=at,W.push(Bt(Ve/$e,ht/$e,at,$e,it))}else if(W.push(ne),$e>1)for(var cr=0,Pr=He;cr<Pr.length;cr+=1){var _r=Se.points[Pr[cr]];_r.zoom<=U||(_r.zoom=U,W.push(_r))}}}return W},Pt.prototype._getOriginId=function(L){return L-this.points.length>>5},Pt.prototype._getOriginZoom=function(L){return(L-this.points.length)%32},Pt.prototype._map=function(L,U){if(L.numPoints)return U?Ot({},L.properties):L.properties;var W=this.points[L.index].properties,Y=this.options.map(W);return U&&Y===W?Ot({},Y):Y},rt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},rt.prototype.splitTile=function(L,U,W,Y,te,de,me){for(var Z=[L,U,W,Y],ne=this.options,Se=ne.debug;Z.length;){Y=Z.pop(),W=Z.pop(),U=Z.pop(),L=Z.pop();var He=1<<U,Ye=St(U,W,Y),$e=this.tiles[Ye];if(!$e&&(Se>1&&console.time("creation"),$e=this.tiles[Ye]=Er(L,U,W,Y,ne),this.tileCoords.push({z:U,x:W,y:Y}),Se)){Se>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",U,W,Y,$e.numFeatures,$e.numPoints,$e.numSimplified),console.timeEnd("creation"));var Je="z"+U;this.stats[Je]=(this.stats[Je]||0)+1,this.total++}if($e.source=L,te){if(U===ne.maxZoom||U===te)continue;var _t=1<<te-U;if(W!==Math.floor(de/_t)||Y!==Math.floor(me/_t))continue}else if(U===ne.indexMaxZoom||$e.numPoints<=ne.indexMaxPoints)continue;if($e.source=null,L.length!==0){Se>1&&console.time("clipping");var gt,Ve,ht,it,at,ar,pt=.5*ne.buffer/ne.extent,yr=.5-pt,Hr=.5+pt,cr=1+pt;gt=Ve=ht=it=null,at=Sn(L,He,W-pt,W+Hr,0,$e.minX,$e.maxX,ne),ar=Sn(L,He,W+yr,W+cr,0,$e.minX,$e.maxX,ne),L=null,at&&(gt=Sn(at,He,Y-pt,Y+Hr,1,$e.minY,$e.maxY,ne),Ve=Sn(at,He,Y+yr,Y+cr,1,$e.minY,$e.maxY,ne),at=null),ar&&(ht=Sn(ar,He,Y-pt,Y+Hr,1,$e.minY,$e.maxY,ne),it=Sn(ar,He,Y+yr,Y+cr,1,$e.minY,$e.maxY,ne),ar=null),Se>1&&console.timeEnd("clipping"),Z.push(gt||[],U+1,2*W,2*Y),Z.push(Ve||[],U+1,2*W,2*Y+1),Z.push(ht||[],U+1,2*W+1,2*Y),Z.push(it||[],U+1,2*W+1,2*Y+1)}}},rt.prototype.getTile=function(L,U,W){var Y=this.options,te=Y.extent,de=Y.debug;if(L<0||L>24)return null;var me=1<<L,Z=St(L,U=(U%me+me)%me,W);if(this.tiles[Z])return Lt(this.tiles[Z],te);de>1&&console.log("drilling down to z%d-%d-%d",L,U,W);for(var ne,Se=L,He=U,Ye=W;!ne&&Se>0;)Se--,He=Math.floor(He/2),Ye=Math.floor(Ye/2),ne=this.tiles[St(Se,He,Ye)];return ne&&ne.source?(de>1&&console.log("found parent tile z%d-%d-%d",Se,He,Ye),de>1&&console.time("drilling down"),this.splitTile(ne.source,Se,He,Ye,L,U,W),de>1&&console.timeEnd("drilling down"),this.tiles[Z]?Lt(this.tiles[Z],te):null):null};var Dr=function(L){function U(W,Y,te,de){L.call(this,W,Y,te,sr),de&&(this.loadGeoJSON=de)}return L&&(U.__proto__=L),(U.prototype=Object.create(L&&L.prototype)).constructor=U,U.prototype.loadData=function(W,Y){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=Y,this._pendingLoadDataParams=W,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},U.prototype._loadData=function(){var W=this;if(this._pendingCallback&&this._pendingLoadDataParams){var Y=this._pendingCallback,te=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var de=!!(te&&te.request&&te.request.collectResourceTiming)&&new o.RequestPerformance(te.request);this.loadGeoJSON(te,function(me,Z){if(me||!Z)return Y(me);if(typeof Z!="object")return Y(new Error("Input data given to '"+te.source+"' is not a valid GeoJSON object."));(function $e(Je,_t){var gt,Ve=Je&&Je.type;if(Ve==="FeatureCollection")for(gt=0;gt<Je.features.length;gt++)$e(Je.features[gt],_t);else if(Ve==="GeometryCollection")for(gt=0;gt<Je.geometries.length;gt++)$e(Je.geometries[gt],_t);else if(Ve==="Feature")$e(Je.geometry,_t);else if(Ve==="Polygon")F(Je.coordinates,_t);else if(Ve==="MultiPolygon")for(gt=0;gt<Je.coordinates.length;gt++)F(Je.coordinates[gt],_t);return Je})(Z,!0);try{if(te.filter){var ne=o.createExpression(te.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ne.result==="error")throw new Error(ne.value.map(function($e){return $e.key+": "+$e.message}).join(", "));var Se=Z.features.filter(function($e){return ne.value.evaluate({zoom:0},$e)});Z={type:"FeatureCollection",features:Se}}W._geoJSONIndex=te.cluster?new Pt(function($e){var Je=$e.superclusterOptions,_t=$e.clusterProperties;if(!_t||!Je)return Je;for(var gt={},Ve={},ht={accumulated:null,zoom:0},it={properties:null},at=Object.keys(_t),ar=0,pt=at;ar<pt.length;ar+=1){var yr=pt[ar],Hr=_t[yr],cr=Hr[0],Pr=o.createExpression(Hr[1]),_r=o.createExpression(typeof cr=="string"?[cr,["accumulated"],["get",yr]]:cr);gt[yr]=Pr.value,Ve[yr]=_r.value}return Je.map=function(gi){it.properties=gi;for(var Or={},En=0,Wr=at;En<Wr.length;En+=1){var mr=Wr[En];Or[mr]=gt[mr].evaluate(ht,it)}return Or},Je.reduce=function(gi,Or){it.properties=Or;for(var En=0,Wr=at;En<Wr.length;En+=1){var mr=Wr[En];ht.accumulated=gi[mr],gi[mr]=Ve[mr].evaluate(ht,it)}},Je}(te)).load(Z.features):function($e,Je){return new rt($e,Je)}(Z,te.geojsonVtOptions)}catch($e){return Y($e)}W.loaded={};var He={};if(de){var Ye=de.finish();Ye&&(He.resourceTiming={},He.resourceTiming[te.source]=JSON.parse(JSON.stringify(Ye)))}Y(null,He)})}},U.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},U.prototype.reloadTile=function(W,Y){var te=this.loaded;return te&&te[W.uid]?L.prototype.reloadTile.call(this,W,Y):this.loadTile(W,Y)},U.prototype.loadGeoJSON=function(W,Y){if(W.request)o.getJSON(W.request,Y);else{if(typeof W.data!="string")return Y(new Error("Input data given to '"+W.source+"' is not a valid GeoJSON object."));try{return Y(null,JSON.parse(W.data))}catch{return Y(new Error("Input data given to '"+W.source+"' is not a valid GeoJSON object."))}}},U.prototype.removeSource=function(W,Y){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Y()},U.prototype.getClusterExpansionZoom=function(W,Y){try{Y(null,this._geoJSONIndex.getClusterExpansionZoom(W.clusterId))}catch(te){Y(te)}},U.prototype.getClusterChildren=function(W,Y){try{Y(null,this._geoJSONIndex.getChildren(W.clusterId))}catch(te){Y(te)}},U.prototype.getClusterLeaves=function(W,Y){try{Y(null,this._geoJSONIndex.getLeaves(W.clusterId,W.limit,W.offset))}catch(te){Y(te)}},U}($),Zt=function(L){var U=this;this.self=L,this.actor=new o.Actor(L,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:$,geojson:Dr},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(W,Y){if(U.workerSourceTypes[W])throw new Error('Worker source with name "'+W+'" already registered.');U.workerSourceTypes[W]=Y},this.self.registerRTLTextPlugin=function(W){if(o.plugin.isParsed())throw new Error("RTL text plugin already registered.");o.plugin.applyArabicShaping=W.applyArabicShaping,o.plugin.processBidirectionalText=W.processBidirectionalText,o.plugin.processStyledBidirectionalText=W.processStyledBidirectionalText}};return Zt.prototype.setReferrer=function(L,U){this.referrer=U},Zt.prototype.setImages=function(L,U,W){for(var Y in this.availableImages[L]=U,this.workerSources[L]){var te=this.workerSources[L][Y];for(var de in te)te[de].availableImages=U}W()},Zt.prototype.setLayers=function(L,U,W){this.getLayerIndex(L).replace(U),W()},Zt.prototype.updateLayers=function(L,U,W){this.getLayerIndex(L).update(U.layers,U.removedIds),W()},Zt.prototype.loadTile=function(L,U,W){this.getWorkerSource(L,U.type,U.source).loadTile(U,W)},Zt.prototype.loadDEMTile=function(L,U,W){this.getDEMWorkerSource(L,U.source).loadTile(U,W)},Zt.prototype.reloadTile=function(L,U,W){this.getWorkerSource(L,U.type,U.source).reloadTile(U,W)},Zt.prototype.abortTile=function(L,U,W){this.getWorkerSource(L,U.type,U.source).abortTile(U,W)},Zt.prototype.removeTile=function(L,U,W){this.getWorkerSource(L,U.type,U.source).removeTile(U,W)},Zt.prototype.removeDEMTile=function(L,U){this.getDEMWorkerSource(L,U.source).removeTile(U)},Zt.prototype.removeSource=function(L,U,W){if(this.workerSources[L]&&this.workerSources[L][U.type]&&this.workerSources[L][U.type][U.source]){var Y=this.workerSources[L][U.type][U.source];delete this.workerSources[L][U.type][U.source],Y.removeSource!==void 0?Y.removeSource(U,W):W()}},Zt.prototype.loadWorkerSource=function(L,U,W){try{this.self.importScripts(U.url),W()}catch(Y){W(Y.toString())}},Zt.prototype.syncRTLPluginState=function(L,U,W){try{o.plugin.setState(U);var Y=o.plugin.getPluginURL();if(o.plugin.isLoaded()&&!o.plugin.isParsed()&&Y!=null){this.self.importScripts(Y);var te=o.plugin.isParsed();W(te?void 0:new Error("RTL Text Plugin failed to import scripts from "+Y),te)}}catch(de){W(de.toString())}},Zt.prototype.getAvailableImages=function(L){var U=this.availableImages[L];return U||(U=[]),U},Zt.prototype.getLayerIndex=function(L){var U=this.layerIndexes[L];return U||(U=this.layerIndexes[L]=new E),U},Zt.prototype.getWorkerSource=function(L,U,W){var Y=this;return this.workerSources[L]||(this.workerSources[L]={}),this.workerSources[L][U]||(this.workerSources[L][U]={}),this.workerSources[L][U][W]||(this.workerSources[L][U][W]=new this.workerSourceTypes[U]({send:function(te,de,me){Y.actor.send(te,de,me,L)}},this.getLayerIndex(L),this.getAvailableImages(L))),this.workerSources[L][U][W]},Zt.prototype.getDEMWorkerSource=function(L,U){return this.demWorkerSources[L]||(this.demWorkerSources[L]={}),this.demWorkerSources[L][U]||(this.demWorkerSources[L][U]=new D),this.demWorkerSources[L][U]},Zt.prototype.enforceCacheSizeLimit=function(L,U){o.enforceCacheSizeLimit(U)},typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Zt(self)),Zt}),d(["./shared"],function(o){var v=o.createCommonjsModule(function(l){function p(g){return!u(g)}function u(g){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var w,C,M=new Blob([""],{type:"text/javascript"}),N=URL.createObjectURL(M);try{C=new Worker(N),w=!0}catch{w=!1}return C&&C.terminate(),URL.revokeObjectURL(N),w}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var w=document.createElement("canvas");w.width=w.height=1;var C=w.getContext("2d");if(!C)return!1;var M=C.getImageData(0,0,1,1);return M&&M.width===w.width}()?(h[b=g&&g.failIfMajorPerformanceCaveat]===void 0&&(h[b]=function(w){var C=function(N){var K=document.createElement("canvas"),X=Object.create(p.webGLContextAttributes);return X.failIfMajorPerformanceCaveat=N,K.probablySupportsContext?K.probablySupportsContext("webgl",X)||K.probablySupportsContext("experimental-webgl",X):K.supportsContext?K.supportsContext("webgl",X)||K.supportsContext("experimental-webgl",X):K.getContext("webgl",X)||K.getContext("experimental-webgl",X)}(w);if(!C)return!1;var M=C.createShader(C.VERTEX_SHADER);return!(!M||C.isContextLost())&&(C.shaderSource(M,"void main() {}"),C.compileShader(M),C.getShaderParameter(M,C.COMPILE_STATUS)===!0)}(b)),h[b]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var b}l.exports?l.exports=p:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=p,window.mapboxgl.notSupportedReason=u);var h={};p.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),x={create:function(l,p,u){var h=o.window.document.createElement(l);return p!==void 0&&(h.className=p),u&&u.appendChild(h),h},createNS:function(l,p){return o.window.document.createElementNS(l,p)}},E=o.window.document&&o.window.document.documentElement.style;function T(l){if(!E)return l[0];for(var p=0;p<l.length;p++)if(l[p]in E)return l[p];return l[0]}var P,I=T(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);x.disableDrag=function(){E&&I&&(P=E[I],E[I]="none")},x.enableDrag=function(){E&&I&&(E[I]=P)};var q=T(["transform","WebkitTransform"]);x.setTransform=function(l,p){l.style[q]=p};var $=!1;try{var G=Object.defineProperty({},"passive",{get:function(){$=!0}});o.window.addEventListener("test",G,G),o.window.removeEventListener("test",G,G)}catch{$=!1}x.addEventListener=function(l,p,u,h){h===void 0&&(h={}),l.addEventListener(p,u,"passive"in h&&$?h:h.capture)},x.removeEventListener=function(l,p,u,h){h===void 0&&(h={}),l.removeEventListener(p,u,"passive"in h&&$?h:h.capture)};var D=function(l){l.preventDefault(),l.stopPropagation(),o.window.removeEventListener("click",D,!0)};function F(l){var p=l.userImage;return!!(p&&p.render&&p.render())&&(l.data.replace(new Uint8Array(p.data.buffer)),!0)}x.suppressClick=function(){o.window.addEventListener("click",D,!0),o.window.setTimeout(function(){o.window.removeEventListener("click",D,!0)},0)},x.mousePos=function(l,p){var u=l.getBoundingClientRect();return new o.Point(p.clientX-u.left-l.clientLeft,p.clientY-u.top-l.clientTop)},x.touchPos=function(l,p){for(var u=l.getBoundingClientRect(),h=[],g=0;g<p.length;g++)h.push(new o.Point(p[g].clientX-u.left-l.clientLeft,p[g].clientY-u.top-l.clientTop));return h},x.mouseButton=function(l){return o.window.InstallTrigger!==void 0&&l.button===2&&l.ctrlKey&&o.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:l.button},x.remove=function(l){l.parentNode&&l.parentNode.removeChild(l)};var V=function(l){function p(){l.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.RGBAImage({width:1,height:1}),this.dirty=!0}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.isLoaded=function(){return this.loaded},p.prototype.setLoaded=function(u){if(this.loaded!==u&&(this.loaded=u,u)){for(var h=0,g=this.requestors;h<g.length;h+=1){var b=g[h];this._notify(b.ids,b.callback)}this.requestors=[]}},p.prototype.getImage=function(u){return this.images[u]},p.prototype.addImage=function(u,h){this._validate(u,h)&&(this.images[u]=h)},p.prototype._validate=function(u,h){var g=!0;return this._validateStretch(h.stretchX,h.data&&h.data.width)||(this.fire(new o.ErrorEvent(new Error('Image "'+u+'" has invalid "stretchX" value'))),g=!1),this._validateStretch(h.stretchY,h.data&&h.data.height)||(this.fire(new o.ErrorEvent(new Error('Image "'+u+'" has invalid "stretchY" value'))),g=!1),this._validateContent(h.content,h)||(this.fire(new o.ErrorEvent(new Error('Image "'+u+'" has invalid "content" value'))),g=!1),g},p.prototype._validateStretch=function(u,h){if(!u)return!0;for(var g=0,b=0,w=u;b<w.length;b+=1){var C=w[b];if(C[0]<g||C[1]<C[0]||h<C[1])return!1;g=C[1]}return!0},p.prototype._validateContent=function(u,h){return!(u&&(u.length!==4||u[0]<0||h.data.width<u[0]||u[1]<0||h.data.height<u[1]||u[2]<0||h.data.width<u[2]||u[3]<0||h.data.height<u[3]||u[2]<u[0]||u[3]<u[1]))},p.prototype.updateImage=function(u,h){h.version=this.images[u].version+1,this.images[u]=h,this.updatedImages[u]=!0},p.prototype.removeImage=function(u){var h=this.images[u];delete this.images[u],delete this.patterns[u],h.userImage&&h.userImage.onRemove&&h.userImage.onRemove()},p.prototype.listImages=function(){return Object.keys(this.images)},p.prototype.getImages=function(u,h){var g=!0;if(!this.isLoaded())for(var b=0,w=u;b<w.length;b+=1)this.images[w[b]]||(g=!1);this.isLoaded()||g?this._notify(u,h):this.requestors.push({ids:u,callback:h})},p.prototype._notify=function(u,h){for(var g={},b=0,w=u;b<w.length;b+=1){var C=w[b];this.images[C]||this.fire(new o.Event("styleimagemissing",{id:C}));var M=this.images[C];M?g[C]={data:M.data.clone(),pixelRatio:M.pixelRatio,sdf:M.sdf,version:M.version,stretchX:M.stretchX,stretchY:M.stretchY,content:M.content,hasRenderCallback:!!(M.userImage&&M.userImage.render)}:o.warnOnce('Image "'+C+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}h(null,g)},p.prototype.getPixelSize=function(){var u=this.atlasImage;return{width:u.width,height:u.height}},p.prototype.getPattern=function(u){var h=this.patterns[u],g=this.getImage(u);if(!g)return null;if(h&&h.position.version===g.version)return h.position;if(h)h.position.version=g.version;else{var b={w:g.data.width+2,h:g.data.height+2,x:0,y:0},w=new o.ImagePosition(b,g);this.patterns[u]={bin:b,position:w}}return this._updatePatternAtlas(),this.patterns[u].position},p.prototype.bind=function(u){var h=u.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new o.Texture(u,this.atlasImage,h.RGBA),this.atlasTexture.bind(h.LINEAR,h.CLAMP_TO_EDGE)},p.prototype._updatePatternAtlas=function(){var u=[];for(var h in this.patterns)u.push(this.patterns[h].bin);var g=o.potpack(u),b=g.w,w=g.h,C=this.atlasImage;for(var M in C.resize({width:b||1,height:w||1}),this.patterns){var N=this.patterns[M].bin,K=N.x+1,X=N.y+1,J=this.images[M].data,ue=J.width,le=J.height;o.RGBAImage.copy(J,C,{x:0,y:0},{x:K,y:X},{width:ue,height:le}),o.RGBAImage.copy(J,C,{x:0,y:le-1},{x:K,y:X-1},{width:ue,height:1}),o.RGBAImage.copy(J,C,{x:0,y:0},{x:K,y:X+le},{width:ue,height:1}),o.RGBAImage.copy(J,C,{x:ue-1,y:0},{x:K-1,y:X},{width:1,height:le}),o.RGBAImage.copy(J,C,{x:0,y:0},{x:K+ue,y:X},{width:1,height:le})}this.dirty=!0},p.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},p.prototype.dispatchRenderCallbacks=function(u){for(var h=0,g=u;h<g.length;h+=1){var b=g[h];if(!this.callbackDispatchedThisFrame[b]){this.callbackDispatchedThisFrame[b]=!0;var w=this.images[b];F(w)&&this.updateImage(b,w)}}},p}(o.Evented),B=ie,z=ie,re=1e20;function ie(l,p,u,h,g,b){this.fontSize=l||24,this.buffer=p===void 0?3:p,this.cutoff=h||.25,this.fontFamily=g||"sans-serif",this.fontWeight=b||"normal",this.radius=u||8;var w=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=w,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(w*w),this.gridInner=new Float64Array(w*w),this.f=new Float64Array(w),this.d=new Float64Array(w),this.z=new Float64Array(w+1),this.v=new Int16Array(w),this.middle=Math.round(w/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function ce(l,p,u,h,g,b,w){for(var C=0;C<p;C++){for(var M=0;M<u;M++)h[M]=l[M*p+C];for(xe(h,g,b,w,u),M=0;M<u;M++)l[M*p+C]=g[M]}for(M=0;M<u;M++){for(C=0;C<p;C++)h[C]=l[M*p+C];for(xe(h,g,b,w,p),C=0;C<p;C++)l[M*p+C]=Math.sqrt(g[C])}}function xe(l,p,u,h,g){u[0]=0,h[0]=-re,h[1]=+re;for(var b=1,w=0;b<g;b++){for(var C=(l[b]+b*b-(l[u[w]]+u[w]*u[w]))/(2*b-2*u[w]);C<=h[w];)w--,C=(l[b]+b*b-(l[u[w]]+u[w]*u[w]))/(2*b-2*u[w]);u[++w]=b,h[w]=C,h[w+1]=+re}for(b=0,w=0;b<g;b++){for(;h[w+1]<b;)w++;p[b]=(b-u[w])*(b-u[w])+l[u[w]]}}ie.prototype.draw=function(l){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(l,this.buffer,this.middle);for(var p=this.ctx.getImageData(0,0,this.size,this.size),u=new Uint8ClampedArray(this.size*this.size),h=0;h<this.size*this.size;h++){var g=p.data[4*h+3]/255;this.gridOuter[h]=g===1?0:g===0?re:Math.pow(Math.max(0,.5-g),2),this.gridInner[h]=g===1?re:g===0?0:Math.pow(Math.max(0,g-.5),2)}for(ce(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),ce(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),h=0;h<this.size*this.size;h++)u[h]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[h]-this.gridInner[h])/this.radius+this.cutoff))));return u},B.default=z;var Te=function(l,p){this.requestManager=l,this.localIdeographFontFamily=p,this.entries={}};Te.prototype.setURL=function(l){this.url=l},Te.prototype.getGlyphs=function(l,p){var u=this,h=[];for(var g in l)for(var b=0,w=l[g];b<w.length;b+=1)h.push({stack:g,id:w[b]});o.asyncAll(h,function(C,M){var N=C.stack,K=C.id,X=u.entries[N];X||(X=u.entries[N]={glyphs:{},requests:{},ranges:{}});var J=X.glyphs[K];if(J===void 0){if(J=u._tinySDF(X,N,K))return X.glyphs[K]=J,void M(null,{stack:N,id:K,glyph:J});var ue=Math.floor(K/256);if(256*ue>65535)M(new Error("glyphs > 65535 not supported"));else if(X.ranges[ue])M(null,{stack:N,id:K,glyph:J});else{var le=X.requests[ue];le||(le=X.requests[ue]=[],Te.loadGlyphRange(N,ue,u.url,u.requestManager,function(ge,oe){if(oe){for(var ye in oe)u._doesCharSupportLocalGlyph(+ye)||(X.glyphs[+ye]=oe[+ye]);X.ranges[ue]=!0}for(var be=0,Ae=le;be<Ae.length;be+=1)(0,Ae[be])(ge,oe);delete X.requests[ue]})),le.push(function(ge,oe){ge?M(ge):oe&&M(null,{stack:N,id:K,glyph:oe[K]||null})})}}else M(null,{stack:N,id:K,glyph:J})},function(C,M){if(C)p(C);else if(M){for(var N={},K=0,X=M;K<X.length;K+=1){var J=X[K],ue=J.stack,le=J.id,ge=J.glyph;(N[ue]||(N[ue]={}))[le]=ge&&{id:ge.id,bitmap:ge.bitmap.clone(),metrics:ge.metrics}}p(null,N)}})},Te.prototype._doesCharSupportLocalGlyph=function(l){return!!this.localIdeographFontFamily&&(o.isChar["CJK Unified Ideographs"](l)||o.isChar["Hangul Syllables"](l)||o.isChar.Hiragana(l)||o.isChar.Katakana(l))},Te.prototype._tinySDF=function(l,p,u){var h=this.localIdeographFontFamily;if(h&&this._doesCharSupportLocalGlyph(u)){var g=l.tinySDF;if(!g){var b="400";/bold/i.test(p)?b="900":/medium/i.test(p)?b="500":/light/i.test(p)&&(b="200"),g=l.tinySDF=new Te.TinySDF(24,3,8,.25,h,b)}return{id:u,bitmap:new o.AlphaImage({width:30,height:30},g.draw(String.fromCharCode(u))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},Te.loadGlyphRange=function(l,p,u,h,g){var b=256*p,w=b+255,C=h.transformRequest(h.normalizeGlyphsURL(u).replace("{fontstack}",l).replace("{range}",b+"-"+w),o.ResourceType.Glyphs);o.getArrayBuffer(C,function(M,N){if(M)g(M);else if(N){for(var K={},X=0,J=o.parseGlyphPBF(N);X<J.length;X+=1){var ue=J[X];K[ue.id]=ue}g(null,K)}})},Te.TinySDF=B;var ve=function(){this.specification=o.styleSpec.light.position};ve.prototype.possiblyEvaluate=function(l,p){return o.sphericalToCartesian(l.expression.evaluate(p))},ve.prototype.interpolate=function(l,p,u){return{x:o.number(l.x,p.x,u),y:o.number(l.y,p.y,u),z:o.number(l.z,p.z,u)}};var we=new o.Properties({anchor:new o.DataConstantProperty(o.styleSpec.light.anchor),position:new ve,color:new o.DataConstantProperty(o.styleSpec.light.color),intensity:new o.DataConstantProperty(o.styleSpec.light.intensity)}),ee=function(l){function p(u){l.call(this),this._transitionable=new o.Transitionable(we),this.setLight(u),this._transitioning=this._transitionable.untransitioned()}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getLight=function(){return this._transitionable.serialize()},p.prototype.setLight=function(u,h){if(h===void 0&&(h={}),!this._validate(o.validateLight,u,h))for(var g in u){var b=u[g];o.endsWith(g,"-transition")?this._transitionable.setTransition(g.slice(0,-11),b):this._transitionable.setValue(g,b)}},p.prototype.updateTransitions=function(u){this._transitioning=this._transitionable.transitioned(u,this._transitioning)},p.prototype.hasTransition=function(){return this._transitioning.hasTransition()},p.prototype.recalculate=function(u){this.properties=this._transitioning.possiblyEvaluate(u)},p.prototype._validate=function(u,h,g){return(!g||g.validate!==!1)&&o.emitValidationErrors(this,u.call(o.validateStyle,o.extend({value:h,style:{glyphs:!0,sprite:!0},styleSpec:o.styleSpec})))},p}(o.Evented),pe=function(l,p){this.width=l,this.height=p,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};pe.prototype.getDash=function(l,p){var u=l.join(",")+String(p);return this.dashEntry[u]||(this.dashEntry[u]=this.addDash(l,p)),this.dashEntry[u]},pe.prototype.getDashRanges=function(l,p,u){var h=[],g=l.length%2==1?-l[l.length-1]*u:0,b=l[0]*u,w=!0;h.push({left:g,right:b,isDash:w,zeroLength:l[0]===0});for(var C=l[0],M=1;M<l.length;M++){var N=l[M];h.push({left:g=C*u,right:b=(C+=N)*u,isDash:w=!w,zeroLength:N===0})}return h},pe.prototype.addRoundDash=function(l,p,u){for(var h=p/2,g=-u;g<=u;g++)for(var b=this.width*(this.nextRow+u+g),w=0,C=l[w],M=0;M<this.width;M++){M/C.right>1&&(C=l[++w]);var N=Math.abs(M-C.left),K=Math.abs(M-C.right),X=Math.min(N,K),J=void 0,ue=g/u*(h+1);if(C.isDash){var le=h-Math.abs(ue);J=Math.sqrt(X*X+le*le)}else J=h-Math.sqrt(X*X+ue*ue);this.data[b+M]=Math.max(0,Math.min(255,J+128))}},pe.prototype.addRegularDash=function(l){for(var p=l.length-1;p>=0;--p){var u=l[p],h=l[p+1];u.zeroLength?l.splice(p,1):h&&h.isDash===u.isDash&&(h.left=u.left,l.splice(p,1))}var g=l[0],b=l[l.length-1];g.isDash===b.isDash&&(g.left=b.left-this.width,b.right=g.right+this.width);for(var w=this.width*this.nextRow,C=0,M=l[C],N=0;N<this.width;N++){N/M.right>1&&(M=l[++C]);var K=Math.abs(N-M.left),X=Math.abs(N-M.right),J=Math.min(K,X);this.data[w+N]=Math.max(0,Math.min(255,(M.isDash?J:-J)+128))}},pe.prototype.addDash=function(l,p){var u=p?7:0,h=2*u+1;if(this.nextRow+h>this.height)return o.warnOnce("LineAtlas out of space"),null;for(var g=0,b=0;b<l.length;b++)g+=l[b];if(g!==0){var w=this.width/g,C=this.getDashRanges(l,this.width,w);p?this.addRoundDash(C,w,u):this.addRegularDash(C)}var M={y:(this.nextRow+u+.5)/this.height,height:2*u/this.height,width:g};return this.nextRow+=h,this.dirty=!0,M},pe.prototype.bind=function(l){var p=l.gl;this.texture?(p.bindTexture(p.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,p.texSubImage2D(p.TEXTURE_2D,0,0,0,this.width,this.height,p.ALPHA,p.UNSIGNED_BYTE,this.data))):(this.texture=p.createTexture(),p.bindTexture(p.TEXTURE_2D,this.texture),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.REPEAT),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.REPEAT),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.LINEAR),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.LINEAR),p.texImage2D(p.TEXTURE_2D,0,p.ALPHA,this.width,this.height,0,p.ALPHA,p.UNSIGNED_BYTE,this.data))};var Oe=function l(p,u){this.workerPool=p,this.actors=[],this.currentActor=0,this.id=o.uniqueId();for(var h=this.workerPool.acquire(this.id),g=0;g<h.length;g++){var b=new l.Actor(h[g],u,this.id);b.name="Worker "+g,this.actors.push(b)}};function Ue(l,p,u){var h=function(g,b){if(g)return u(g);if(b){var w=o.pick(o.extend(b,l),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);b.vector_layers&&(w.vectorLayers=b.vector_layers,w.vectorLayerIds=w.vectorLayers.map(function(C){return C.id})),w.tiles=p.canonicalizeTileset(w,l.url),u(null,w)}};return l.url?o.getJSON(p.transformRequest(p.normalizeSourceURL(l.url),o.ResourceType.Source),h):o.browser.frame(function(){return h(null,l)})}Oe.prototype.broadcast=function(l,p,u){o.asyncAll(this.actors,function(h,g){h.send(l,p,g)},u=u||function(){})},Oe.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},Oe.prototype.remove=function(){this.actors.forEach(function(l){l.remove()}),this.actors=[],this.workerPool.release(this.id)},Oe.Actor=o.Actor;var Ee=function(l,p,u){this.bounds=o.LngLatBounds.convert(this.validateBounds(l)),this.minzoom=p||0,this.maxzoom=u||24};Ee.prototype.validateBounds=function(l){return Array.isArray(l)&&l.length===4?[Math.max(-180,l[0]),Math.max(-90,l[1]),Math.min(180,l[2]),Math.min(90,l[3])]:[-180,-90,180,90]},Ee.prototype.contains=function(l){var p=Math.pow(2,l.z),u=Math.floor(o.mercatorXfromLng(this.bounds.getWest())*p),h=Math.floor(o.mercatorYfromLat(this.bounds.getNorth())*p),g=Math.ceil(o.mercatorXfromLng(this.bounds.getEast())*p),b=Math.ceil(o.mercatorYfromLat(this.bounds.getSouth())*p);return l.x>=u&&l.x<g&&l.y>=h&&l.y<b};var ke=function(l){function p(u,h,g,b){if(l.call(this),this.id=u,this.dispatcher=g,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.extend(this,o.pick(h,["url","scheme","tileSize","promoteId"])),this._options=o.extend({type:"vector"},h),this._collectResourceTiming=h.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(b)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.load=function(){var u=this;this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Ue(this._options,this.map._requestManager,function(h,g){u._tileJSONRequest=null,u._loaded=!0,h?u.fire(new o.ErrorEvent(h)):g&&(o.extend(u,g),g.bounds&&(u.tileBounds=new Ee(g.bounds,u.minzoom,u.maxzoom)),o.postTurnstileEvent(g.tiles,u.map._requestManager._customAccessToken),o.postMapLoadEvent(g.tiles,u.map._getMapId(),u.map._requestManager._skuToken,u.map._requestManager._customAccessToken),u.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),u.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})))})},p.prototype.loaded=function(){return this._loaded},p.prototype.hasTile=function(u){return!this.tileBounds||this.tileBounds.contains(u.canonical)},p.prototype.onAdd=function(u){this.map=u,this.load()},p.prototype.setSourceProperty=function(u){this._tileJSONRequest&&this._tileJSONRequest.cancel(),u(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},p.prototype.setTiles=function(u){var h=this;return this.setSourceProperty(function(){h._options.tiles=u}),this},p.prototype.setUrl=function(u){var h=this;return this.setSourceProperty(function(){h.url=u,h._options.url=u}),this},p.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},p.prototype.serialize=function(){return o.extend({},this._options)},p.prototype.loadTile=function(u,h){var g=this.map._requestManager.normalizeTileURL(u.tileID.canonical.url(this.tiles,this.scheme)),b={request:this.map._requestManager.transformRequest(g,o.ResourceType.Tile),uid:u.uid,tileID:u.tileID,zoom:u.tileID.overscaledZ,tileSize:this.tileSize*u.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:o.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function w(C,M){return delete u.request,u.aborted?h(null):C&&C.status!==404?h(C):(M&&M.resourceTiming&&(u.resourceTiming=M.resourceTiming),this.map._refreshExpiredTiles&&M&&u.setExpiryData(M),u.loadVectorData(M,this.map.painter),o.cacheEntryPossiblyAdded(this.dispatcher),h(null),void(u.reloadCallback&&(this.loadTile(u,u.reloadCallback),u.reloadCallback=null)))}b.request.collectResourceTiming=this._collectResourceTiming,u.actor&&u.state!=="expired"?u.state==="loading"?u.reloadCallback=h:u.request=u.actor.send("reloadTile",b,w.bind(this)):(u.actor=this.dispatcher.getActor(),u.request=u.actor.send("loadTile",b,w.bind(this)))},p.prototype.abortTile=function(u){u.request&&(u.request.cancel(),delete u.request),u.actor&&u.actor.send("abortTile",{uid:u.uid,type:this.type,source:this.id},void 0)},p.prototype.unloadTile=function(u){u.unloadVectorData(),u.actor&&u.actor.send("removeTile",{uid:u.uid,type:this.type,source:this.id},void 0)},p.prototype.hasTransition=function(){return!1},p}(o.Evented),je=function(l){function p(u,h,g,b){l.call(this),this.id=u,this.dispatcher=g,this.setEventedParent(b),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.extend({type:"raster"},h),o.extend(this,o.pick(h,["url","scheme","tileSize"]))}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.load=function(){var u=this;this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Ue(this._options,this.map._requestManager,function(h,g){u._tileJSONRequest=null,u._loaded=!0,h?u.fire(new o.ErrorEvent(h)):g&&(o.extend(u,g),g.bounds&&(u.tileBounds=new Ee(g.bounds,u.minzoom,u.maxzoom)),o.postTurnstileEvent(g.tiles),o.postMapLoadEvent(g.tiles,u.map._getMapId(),u.map._requestManager._skuToken),u.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),u.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})))})},p.prototype.loaded=function(){return this._loaded},p.prototype.onAdd=function(u){this.map=u,this.load()},p.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},p.prototype.serialize=function(){return o.extend({},this._options)},p.prototype.hasTile=function(u){return!this.tileBounds||this.tileBounds.contains(u.canonical)},p.prototype.loadTile=function(u,h){var g=this,b=this.map._requestManager.normalizeTileURL(u.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);u.request=o.getImage(this.map._requestManager.transformRequest(b,o.ResourceType.Tile),function(w,C){if(delete u.request,u.aborted)u.state="unloaded",h(null);else if(w)u.state="errored",h(w);else if(C){g.map._refreshExpiredTiles&&u.setExpiryData(C),delete C.cacheControl,delete C.expires;var M=g.map.painter.context,N=M.gl;u.texture=g.map.painter.getTileTexture(C.width),u.texture?u.texture.update(C,{useMipmap:!0}):(u.texture=new o.Texture(M,C,N.RGBA,{useMipmap:!0}),u.texture.bind(N.LINEAR,N.CLAMP_TO_EDGE,N.LINEAR_MIPMAP_NEAREST),M.extTextureFilterAnisotropic&&N.texParameterf(N.TEXTURE_2D,M.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,M.extTextureFilterAnisotropicMax)),u.state="loaded",o.cacheEntryPossiblyAdded(g.dispatcher),h(null)}})},p.prototype.abortTile=function(u,h){u.request&&(u.request.cancel(),delete u.request),h()},p.prototype.unloadTile=function(u,h){u.texture&&this.map.painter.saveTileTexture(u.texture),h()},p.prototype.hasTransition=function(){return!1},p}(o.Evented),Ze=function(l){function p(u,h,g,b){l.call(this,u,h,g,b),this.type="raster-dem",this.maxzoom=22,this._options=o.extend({type:"raster-dem"},h),this.encoding=h.encoding||"mapbox"}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},p.prototype.loadTile=function(u,h){var g=this.map._requestManager.normalizeTileURL(u.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function b(w,C){w&&(u.state="errored",h(w)),C&&(u.dem=C,u.needsHillshadePrepare=!0,u.state="loaded",h(null))}u.request=o.getImage(this.map._requestManager.transformRequest(g,o.ResourceType.Tile),function(w,C){if(delete u.request,u.aborted)u.state="unloaded",h(null);else if(w)u.state="errored",h(w);else if(C){this.map._refreshExpiredTiles&&u.setExpiryData(C),delete C.cacheControl,delete C.expires;var M=o.window.ImageBitmap&&C instanceof o.window.ImageBitmap&&o.offscreenCanvasSupported()?C:o.browser.getImageData(C,1),N={uid:u.uid,coord:u.tileID,source:this.id,rawImageData:M,encoding:this.encoding};u.actor&&u.state!=="expired"||(u.actor=this.dispatcher.getActor(),u.actor.send("loadDEMTile",N,b.bind(this)))}}.bind(this)),u.neighboringTiles=this._getNeighboringTiles(u.tileID)},p.prototype._getNeighboringTiles=function(u){var h=u.canonical,g=Math.pow(2,h.z),b=(h.x-1+g)%g,w=h.x===0?u.wrap-1:u.wrap,C=(h.x+1+g)%g,M=h.x+1===g?u.wrap+1:u.wrap,N={};return N[new o.OverscaledTileID(u.overscaledZ,w,h.z,b,h.y).key]={backfilled:!1},N[new o.OverscaledTileID(u.overscaledZ,M,h.z,C,h.y).key]={backfilled:!1},h.y>0&&(N[new o.OverscaledTileID(u.overscaledZ,w,h.z,b,h.y-1).key]={backfilled:!1},N[new o.OverscaledTileID(u.overscaledZ,u.wrap,h.z,h.x,h.y-1).key]={backfilled:!1},N[new o.OverscaledTileID(u.overscaledZ,M,h.z,C,h.y-1).key]={backfilled:!1}),h.y+1<g&&(N[new o.OverscaledTileID(u.overscaledZ,w,h.z,b,h.y+1).key]={backfilled:!1},N[new o.OverscaledTileID(u.overscaledZ,u.wrap,h.z,h.x,h.y+1).key]={backfilled:!1},N[new o.OverscaledTileID(u.overscaledZ,M,h.z,C,h.y+1).key]={backfilled:!1}),N},p.prototype.unloadTile=function(u){u.demTexture&&this.map.painter.saveTileTexture(u.demTexture),u.fbo&&(u.fbo.destroy(),delete u.fbo),u.dem&&delete u.dem,delete u.neighboringTiles,u.state="unloaded",u.actor&&u.actor.send("removeDEMTile",{uid:u.uid,source:this.id})},p}(je),wt=function(l){function p(u,h,g,b){l.call(this),this.id=u,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=g.getActor(),this.setEventedParent(b),this._data=h.data,this._options=o.extend({},h),this._collectResourceTiming=h.collectResourceTiming,this._resourceTiming=[],h.maxzoom!==void 0&&(this.maxzoom=h.maxzoom),h.type&&(this.type=h.type),h.attribution&&(this.attribution=h.attribution),this.promoteId=h.promoteId;var w=o.EXTENT/this.tileSize;this.workerOptions=o.extend({source:this.id,cluster:h.cluster||!1,geojsonVtOptions:{buffer:(h.buffer!==void 0?h.buffer:128)*w,tolerance:(h.tolerance!==void 0?h.tolerance:.375)*w,extent:o.EXTENT,maxZoom:this.maxzoom,lineMetrics:h.lineMetrics||!1,generateId:h.generateId||!1},superclusterOptions:{maxZoom:h.clusterMaxZoom!==void 0?Math.min(h.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,h.clusterMinPoints||2),extent:o.EXTENT,radius:(h.clusterRadius||50)*w,log:!1,generateId:h.generateId||!1},clusterProperties:h.clusterProperties,filter:h.filter},h.workerOptions)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.load=function(){var u=this;this.fire(new o.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(h){if(h)u.fire(new o.ErrorEvent(h));else{var g={dataType:"source",sourceDataType:"metadata"};u._collectResourceTiming&&u._resourceTiming&&u._resourceTiming.length>0&&(g.resourceTiming=u._resourceTiming,u._resourceTiming=[]),u.fire(new o.Event("data",g))}})},p.prototype.onAdd=function(u){this.map=u,this.load()},p.prototype.setData=function(u){var h=this;return this._data=u,this.fire(new o.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(g){if(g)h.fire(new o.ErrorEvent(g));else{var b={dataType:"source",sourceDataType:"content"};h._collectResourceTiming&&h._resourceTiming&&h._resourceTiming.length>0&&(b.resourceTiming=h._resourceTiming,h._resourceTiming=[]),h.fire(new o.Event("data",b))}}),this},p.prototype.getClusterExpansionZoom=function(u,h){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:u,source:this.id},h),this},p.prototype.getClusterChildren=function(u,h){return this.actor.send("geojson.getClusterChildren",{clusterId:u,source:this.id},h),this},p.prototype.getClusterLeaves=function(u,h,g,b){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:u,limit:h,offset:g},b),this},p.prototype._updateWorkerData=function(u){var h=this;this._loaded=!1;var g=o.extend({},this.workerOptions),b=this._data;typeof b=="string"?(g.request=this.map._requestManager.transformRequest(o.browser.resolveURL(b),o.ResourceType.Source),g.request.collectResourceTiming=this._collectResourceTiming):g.data=JSON.stringify(b),this.actor.send(this.type+".loadData",g,function(w,C){h._removed||C&&C.abandoned||(h._loaded=!0,C&&C.resourceTiming&&C.resourceTiming[h.id]&&(h._resourceTiming=C.resourceTiming[h.id].slice(0)),h.actor.send(h.type+".coalesce",{source:g.source},null),u(w))})},p.prototype.loaded=function(){return this._loaded},p.prototype.loadTile=function(u,h){var g=this,b=u.actor?"reloadTile":"loadTile";u.actor=this.actor,u.request=this.actor.send(b,{type:this.type,uid:u.uid,tileID:u.tileID,zoom:u.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:o.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(w,C){return delete u.request,u.unloadVectorData(),u.aborted?h(null):w?h(w):(u.loadVectorData(C,g.map.painter,b==="reloadTile"),h(null))})},p.prototype.abortTile=function(u){u.request&&(u.request.cancel(),delete u.request),u.aborted=!0},p.prototype.unloadTile=function(u){u.unloadVectorData(),this.actor.send("removeTile",{uid:u.uid,type:this.type,source:this.id})},p.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},p.prototype.serialize=function(){return o.extend({},this._options,{type:this.type,data:this._data})},p.prototype.hasTransition=function(){return!1},p}(o.Evented),Pe=o.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),Ge=function(l){function p(u,h,g,b){l.call(this),this.id=u,this.dispatcher=g,this.coordinates=h.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(b),this.options=h}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.load=function(u,h){var g=this;this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this.url=this.options.url,o.getImage(this.map._requestManager.transformRequest(this.url,o.ResourceType.Image),function(b,w){g._loaded=!0,b?g.fire(new o.ErrorEvent(b)):w&&(g.image=w,u&&(g.coordinates=u),h&&h(),g._finishLoading())})},p.prototype.loaded=function(){return this._loaded},p.prototype.updateImage=function(u){var h=this;return this.image&&u.url?(this.options.url=u.url,this.load(u.coordinates,function(){h.texture=null}),this):this},p.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})))},p.prototype.onAdd=function(u){this.map=u,this.load()},p.prototype.setCoordinates=function(u){var h=this;this.coordinates=u;var g=u.map(o.MercatorCoordinate.fromLngLat);this.tileID=function(w){for(var C=1/0,M=1/0,N=-1/0,K=-1/0,X=0,J=w;X<J.length;X+=1){var ue=J[X];C=Math.min(C,ue.x),M=Math.min(M,ue.y),N=Math.max(N,ue.x),K=Math.max(K,ue.y)}var le=Math.max(N-C,K-M),ge=Math.max(0,Math.floor(-Math.log(le)/Math.LN2)),oe=Math.pow(2,ge);return new o.CanonicalTileID(ge,Math.floor((C+N)/2*oe),Math.floor((M+K)/2*oe))}(g),this.minzoom=this.maxzoom=this.tileID.z;var b=g.map(function(w){return h.tileID.getTilePoint(w)._round()});return this._boundsArray=new o.StructArrayLayout4i8,this._boundsArray.emplaceBack(b[0].x,b[0].y,0,0),this._boundsArray.emplaceBack(b[1].x,b[1].y,o.EXTENT,0),this._boundsArray.emplaceBack(b[3].x,b[3].y,0,o.EXTENT),this._boundsArray.emplaceBack(b[2].x,b[2].y,o.EXTENT,o.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})),this},p.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var u=this.map.painter.context,h=u.gl;for(var g in this.boundsBuffer||(this.boundsBuffer=u.createVertexBuffer(this._boundsArray,Pe.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new o.Texture(u,this.image,h.RGBA),this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE)),this.tiles){var b=this.tiles[g];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture)}}},p.prototype.loadTile=function(u,h){this.tileID&&this.tileID.equals(u.tileID.canonical)?(this.tiles[String(u.tileID.wrap)]=u,u.buckets={},h(null)):(u.state="errored",h(null))},p.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},p.prototype.hasTransition=function(){return!1},p}(o.Evented),lt=function(l){function p(u,h,g,b){l.call(this,u,h,g,b),this.roundZoom=!0,this.type="video",this.options=h}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.load=function(){var u=this;this._loaded=!1;var h=this.options;this.urls=[];for(var g=0,b=h.urls;g<b.length;g+=1)this.urls.push(this.map._requestManager.transformRequest(b[g],o.ResourceType.Source).url);o.getVideo(this.urls,function(w,C){u._loaded=!0,w?u.fire(new o.ErrorEvent(w)):C&&(u.video=C,u.video.loop=!0,u.video.setAttribute("playsinline",""),u.video.addEventListener("playing",function(){u.map.triggerRepaint()}),u.map&&u.video.play(),u._finishLoading())})},p.prototype.pause=function(){this.video&&this.video.pause()},p.prototype.play=function(){this.video&&this.video.play()},p.prototype.seek=function(u){if(this.video){var h=this.video.seekable;u<h.start(0)||u>h.end(0)?this.fire(new o.ErrorEvent(new o.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+h.start(0)+" and "+h.end(0)+"-second mark."))):this.video.currentTime=u}},p.prototype.getVideo=function(){return this.video},p.prototype.onAdd=function(u){this.map||(this.map=u,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},p.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var u=this.map.painter.context,h=u.gl;for(var g in this.boundsBuffer||(this.boundsBuffer=u.createVertexBuffer(this._boundsArray,Pe.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE),h.texSubImage2D(h.TEXTURE_2D,0,0,0,h.RGBA,h.UNSIGNED_BYTE,this.video)):(this.texture=new o.Texture(u,this.video,h.RGBA),this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE)),this.tiles){var b=this.tiles[g];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture)}}},p.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},p.prototype.hasTransition=function(){return this.video&&!this.video.paused},p}(Ge),Re=function(l){function p(u,h,g,b){l.call(this,u,h,g,b),h.coordinates?Array.isArray(h.coordinates)&&h.coordinates.length===4&&!h.coordinates.some(function(w){return!Array.isArray(w)||w.length!==2||w.some(function(C){return typeof C!="number"})})||this.fire(new o.ErrorEvent(new o.ValidationError("sources."+u,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.ErrorEvent(new o.ValidationError("sources."+u,null,'missing required property "coordinates"'))),h.animate&&typeof h.animate!="boolean"&&this.fire(new o.ErrorEvent(new o.ValidationError("sources."+u,null,'optional "animate" property must be a boolean value'))),h.canvas?typeof h.canvas=="string"||h.canvas instanceof o.window.HTMLCanvasElement||this.fire(new o.ErrorEvent(new o.ValidationError("sources."+u,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.ErrorEvent(new o.ValidationError("sources."+u,null,'missing required property "canvas"'))),this.options=h,this.animate=h.animate===void 0||h.animate}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof o.window.HTMLCanvasElement?this.options.canvas:o.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},p.prototype.getCanvas=function(){return this.canvas},p.prototype.onAdd=function(u){this.map=u,this.load(),this.canvas&&this.animate&&this.play()},p.prototype.onRemove=function(){this.pause()},p.prototype.prepare=function(){var u=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,u=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,u=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var h=this.map.painter.context,g=h.gl;for(var b in this.boundsBuffer||(this.boundsBuffer=h.createVertexBuffer(this._boundsArray,Pe.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(u||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new o.Texture(h,this.canvas,g.RGBA,{premultiply:!0}),this.tiles){var w=this.tiles[b];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture)}}},p.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},p.prototype.hasTransition=function(){return this._playing},p.prototype._hasInvalidDimensions=function(){for(var u=0,h=[this.canvas.width,this.canvas.height];u<h.length;u+=1){var g=h[u];if(isNaN(g)||g<=0)return!0}return!1},p}(Ge),qe={vector:ke,raster:je,"raster-dem":Ze,geojson:wt,video:lt,image:Ge,canvas:Re};function Xt(l,p){var u=o.identity([]);return o.translate(u,u,[1,1,0]),o.scale(u,u,[.5*l.width,.5*l.height,1]),o.multiply(u,u,l.calculatePosMatrix(p.toUnwrapped()))}function Pt(l,p,u,h,g,b){var w=function(ge,oe,ye){if(ge)for(var be=0,Ae=ge;be<Ae.length;be+=1){var Ne=oe[Ae[be]];if(Ne&&Ne.source===ye&&Ne.type==="fill-extrusion")return!0}else for(var De in oe){var Fe=oe[De];if(Fe.source===ye&&Fe.type==="fill-extrusion")return!0}return!1}(g&&g.layers,p,l.id),C=b.maxPitchScaleFactor(),M=l.tilesIn(h,C,w);M.sort(Bt);for(var N=[],K=0,X=M;K<X.length;K+=1){var J=X[K];N.push({wrappedTileID:J.tileID.wrapped().key,queryResults:J.tile.queryRenderedFeatures(p,u,l._state,J.queryGeometry,J.cameraQueryGeometry,J.scale,g,b,C,Xt(l.transform,J.tileID))})}var ue=function(ge){for(var oe={},ye={},be=0,Ae=ge;be<Ae.length;be+=1){var Ne=Ae[be],De=Ne.queryResults,Fe=Ne.wrappedTileID,Ke=ye[Fe]=ye[Fe]||{};for(var tt in De)for(var et=De[tt],dt=Ke[tt]=Ke[tt]||{},Tt=oe[tt]=oe[tt]||[],Rt=0,Mt=et;Rt<Mt.length;Rt+=1){var br=Mt[Rt];dt[br.featureIndex]||(dt[br.featureIndex]=!0,Tt.push(br))}}return oe}(N);for(var le in ue)ue[le].forEach(function(ge){var oe=ge.feature,ye=l.getFeatureState(oe.layer["source-layer"],oe.id);oe.source=oe.layer.source,oe.layer["source-layer"]&&(oe.sourceLayer=oe.layer["source-layer"]),oe.state=ye});return ue}function Bt(l,p){var u=l.tileID,h=p.tileID;return u.overscaledZ-h.overscaledZ||u.canonical.y-h.canonical.y||u.wrap-h.wrap||u.canonical.x-h.canonical.x}var Ct=function(l,p){this.max=l,this.onRemove=p,this.reset()};Ct.prototype.reset=function(){for(var l in this.data)for(var p=0,u=this.data[l];p<u.length;p+=1){var h=u[p];h.timeout&&clearTimeout(h.timeout),this.onRemove(h.value)}return this.data={},this.order=[],this},Ct.prototype.add=function(l,p,u){var h=this,g=l.wrapped().key;this.data[g]===void 0&&(this.data[g]=[]);var b={value:p,timeout:void 0};if(u!==void 0&&(b.timeout=setTimeout(function(){h.remove(l,b)},u)),this.data[g].push(b),this.order.push(g),this.order.length>this.max){var w=this._getAndRemoveByKey(this.order[0]);w&&this.onRemove(w)}return this},Ct.prototype.has=function(l){return l.wrapped().key in this.data},Ct.prototype.getAndRemove=function(l){return this.has(l)?this._getAndRemoveByKey(l.wrapped().key):null},Ct.prototype._getAndRemoveByKey=function(l){var p=this.data[l].shift();return p.timeout&&clearTimeout(p.timeout),this.data[l].length===0&&delete this.data[l],this.order.splice(this.order.indexOf(l),1),p.value},Ct.prototype.getByKey=function(l){var p=this.data[l];return p?p[0].value:null},Ct.prototype.get=function(l){return this.has(l)?this.data[l.wrapped().key][0].value:null},Ct.prototype.remove=function(l,p){if(!this.has(l))return this;var u=l.wrapped().key,h=p===void 0?0:this.data[u].indexOf(p),g=this.data[u][h];return this.data[u].splice(h,1),g.timeout&&clearTimeout(g.timeout),this.data[u].length===0&&delete this.data[u],this.onRemove(g.value),this.order.splice(this.order.indexOf(u),1),this},Ct.prototype.setMaxSize=function(l){for(this.max=l;this.order.length>this.max;){var p=this._getAndRemoveByKey(this.order[0]);p&&this.onRemove(p)}return this},Ct.prototype.filter=function(l){var p=[];for(var u in this.data)for(var h=0,g=this.data[u];h<g.length;h+=1){var b=g[h];l(b.value)||p.push(b)}for(var w=0,C=p;w<C.length;w+=1){var M=C[w];this.remove(M.value.tileID,M)}};var ir=function(l,p,u){this.context=l;var h=l.gl;this.buffer=h.createBuffer(),this.dynamicDraw=!!u,this.context.unbindVAO(),l.bindElementBuffer.set(this.buffer),h.bufferData(h.ELEMENT_ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?h.DYNAMIC_DRAW:h.STATIC_DRAW),this.dynamicDraw||delete p.arrayBuffer};ir.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},ir.prototype.updateData=function(l){var p=this.context.gl;this.context.unbindVAO(),this.bind(),p.bufferSubData(p.ELEMENT_ARRAY_BUFFER,0,l.arrayBuffer)},ir.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Kt={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Jt=function(l,p,u,h){this.length=p.length,this.attributes=u,this.itemSize=p.bytesPerElement,this.dynamicDraw=h,this.context=l;var g=l.gl;this.buffer=g.createBuffer(),l.bindVertexBuffer.set(this.buffer),g.bufferData(g.ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||delete p.arrayBuffer};Jt.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},Jt.prototype.updateData=function(l){var p=this.context.gl;this.bind(),p.bufferSubData(p.ARRAY_BUFFER,0,l.arrayBuffer)},Jt.prototype.enableAttributes=function(l,p){for(var u=0;u<this.attributes.length;u++){var h=p.attributes[this.attributes[u].name];h!==void 0&&l.enableVertexAttribArray(h)}},Jt.prototype.setVertexAttribPointers=function(l,p,u){for(var h=0;h<this.attributes.length;h++){var g=this.attributes[h],b=p.attributes[g.name];b!==void 0&&l.vertexAttribPointer(b,g.components,l[Kt[g.type]],!1,this.itemSize,g.offset+this.itemSize*(u||0))}},Jt.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var st=function(l){this.gl=l.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};st.prototype.get=function(){return this.current},st.prototype.set=function(l){},st.prototype.getDefault=function(){return this.default},st.prototype.setDefault=function(){this.set(this.default)};var Ot=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return o.Color.transparent},p.prototype.set=function(u){var h=this.current;(u.r!==h.r||u.g!==h.g||u.b!==h.b||u.a!==h.a||this.dirty)&&(this.gl.clearColor(u.r,u.g,u.b,u.a),this.current=u,this.dirty=!1)},p}(st),tr=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return 1},p.prototype.set=function(u){(u!==this.current||this.dirty)&&(this.gl.clearDepth(u),this.current=u,this.dirty=!1)},p}(st),Lr=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return 0},p.prototype.set=function(u){(u!==this.current||this.dirty)&&(this.gl.clearStencil(u),this.current=u,this.dirty=!1)},p}(st),Fr=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return[!0,!0,!0,!0]},p.prototype.set=function(u){var h=this.current;(u[0]!==h[0]||u[1]!==h[1]||u[2]!==h[2]||u[3]!==h[3]||this.dirty)&&(this.gl.colorMask(u[0],u[1],u[2],u[3]),this.current=u,this.dirty=!1)},p}(st),rr=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return!0},p.prototype.set=function(u){(u!==this.current||this.dirty)&&(this.gl.depthMask(u),this.current=u,this.dirty=!1)},p}(st),qr=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return 255},p.prototype.set=function(u){(u!==this.current||this.dirty)&&(this.gl.stencilMask(u),this.current=u,this.dirty=!1)},p}(st),zr=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},p.prototype.set=function(u){var h=this.current;(u.func!==h.func||u.ref!==h.ref||u.mask!==h.mask||this.dirty)&&(this.gl.stencilFunc(u.func,u.ref,u.mask),this.current=u,this.dirty=!1)},p}(st),Cr=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){var u=this.gl;return[u.KEEP,u.KEEP,u.KEEP]},p.prototype.set=function(u){var h=this.current;(u[0]!==h[0]||u[1]!==h[1]||u[2]!==h[2]||this.dirty)&&(this.gl.stencilOp(u[0],u[1],u[2]),this.current=u,this.dirty=!1)},p}(st),an=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return!1},p.prototype.set=function(u){if(u!==this.current||this.dirty){var h=this.gl;u?h.enable(h.STENCIL_TEST):h.disable(h.STENCIL_TEST),this.current=u,this.dirty=!1}},p}(st),Rr=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return[0,1]},p.prototype.set=function(u){var h=this.current;(u[0]!==h[0]||u[1]!==h[1]||this.dirty)&&(this.gl.depthRange(u[0],u[1]),this.current=u,this.dirty=!1)},p}(st),ur=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return!1},p.prototype.set=function(u){if(u!==this.current||this.dirty){var h=this.gl;u?h.enable(h.DEPTH_TEST):h.disable(h.DEPTH_TEST),this.current=u,this.dirty=!1}},p}(st),Yr=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return this.gl.LESS},p.prototype.set=function(u){(u!==this.current||this.dirty)&&(this.gl.depthFunc(u),this.current=u,this.dirty=!1)},p}(st),Sn=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return!1},p.prototype.set=function(u){if(u!==this.current||this.dirty){var h=this.gl;u?h.enable(h.BLEND):h.disable(h.BLEND),this.current=u,this.dirty=!1}},p}(st),ai=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){var u=this.gl;return[u.ONE,u.ZERO]},p.prototype.set=function(u){var h=this.current;(u[0]!==h[0]||u[1]!==h[1]||this.dirty)&&(this.gl.blendFunc(u[0],u[1]),this.current=u,this.dirty=!1)},p}(st),dr=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return o.Color.transparent},p.prototype.set=function(u){var h=this.current;(u.r!==h.r||u.g!==h.g||u.b!==h.b||u.a!==h.a||this.dirty)&&(this.gl.blendColor(u.r,u.g,u.b,u.a),this.current=u,this.dirty=!1)},p}(st),Nt=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return this.gl.FUNC_ADD},p.prototype.set=function(u){(u!==this.current||this.dirty)&&(this.gl.blendEquation(u),this.current=u,this.dirty=!1)},p}(st),jn=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return!1},p.prototype.set=function(u){if(u!==this.current||this.dirty){var h=this.gl;u?h.enable(h.CULL_FACE):h.disable(h.CULL_FACE),this.current=u,this.dirty=!1}},p}(st),Bn=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return this.gl.BACK},p.prototype.set=function(u){(u!==this.current||this.dirty)&&(this.gl.cullFace(u),this.current=u,this.dirty=!1)},p}(st),$i=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return this.gl.CCW},p.prototype.set=function(u){(u!==this.current||this.dirty)&&(this.gl.frontFace(u),this.current=u,this.dirty=!1)},p}(st),Ut=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p.prototype.set=function(u){(u!==this.current||this.dirty)&&(this.gl.useProgram(u),this.current=u,this.dirty=!1)},p}(st),Sr=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return this.gl.TEXTURE0},p.prototype.set=function(u){(u!==this.current||this.dirty)&&(this.gl.activeTexture(u),this.current=u,this.dirty=!1)},p}(st),ct=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){var u=this.gl;return[0,0,u.drawingBufferWidth,u.drawingBufferHeight]},p.prototype.set=function(u){var h=this.current;(u[0]!==h[0]||u[1]!==h[1]||u[2]!==h[2]||u[3]!==h[3]||this.dirty)&&(this.gl.viewport(u[0],u[1],u[2],u[3]),this.current=u,this.dirty=!1)},p}(st),Lt=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p.prototype.set=function(u){if(u!==this.current||this.dirty){var h=this.gl;h.bindFramebuffer(h.FRAMEBUFFER,u),this.current=u,this.dirty=!1}},p}(st),vr=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p.prototype.set=function(u){if(u!==this.current||this.dirty){var h=this.gl;h.bindRenderbuffer(h.RENDERBUFFER,u),this.current=u,this.dirty=!1}},p}(st),Er=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p.prototype.set=function(u){if(u!==this.current||this.dirty){var h=this.gl;h.bindTexture(h.TEXTURE_2D,u),this.current=u,this.dirty=!1}},p}(st),nn=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p.prototype.set=function(u){if(u!==this.current||this.dirty){var h=this.gl;h.bindBuffer(h.ARRAY_BUFFER,u),this.current=u,this.dirty=!1}},p}(st),Le=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p.prototype.set=function(u){var h=this.gl;h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,u),this.current=u,this.dirty=!1},p}(st),rt=function(l){function p(u){l.call(this,u),this.vao=u.extVertexArrayObject}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p.prototype.set=function(u){this.vao&&(u!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(u),this.current=u,this.dirty=!1)},p}(st),St=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return 4},p.prototype.set=function(u){if(u!==this.current||this.dirty){var h=this.gl;h.pixelStorei(h.UNPACK_ALIGNMENT,u),this.current=u,this.dirty=!1}},p}(st),sr=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return!1},p.prototype.set=function(u){if(u!==this.current||this.dirty){var h=this.gl;h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,u),this.current=u,this.dirty=!1}},p}(st),Dr=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return!1},p.prototype.set=function(u){if(u!==this.current||this.dirty){var h=this.gl;h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,u),this.current=u,this.dirty=!1}},p}(st),Zt=function(l){function p(u,h){l.call(this,u),this.context=u,this.parent=h}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p}(st),L=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.setDirty=function(){this.dirty=!0},p.prototype.set=function(u){if(u!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var h=this.gl;h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,u,0),this.current=u,this.dirty=!1}},p}(Zt),U=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.set=function(u){if(u!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var h=this.gl;h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_ATTACHMENT,h.RENDERBUFFER,u),this.current=u,this.dirty=!1}},p}(Zt),W=function(l,p,u,h){this.context=l,this.width=p,this.height=u;var g=this.framebuffer=l.gl.createFramebuffer();this.colorAttachment=new L(l,g),h&&(this.depthAttachment=new U(l,g))};W.prototype.destroy=function(){var l=this.context.gl,p=this.colorAttachment.get();if(p&&l.deleteTexture(p),this.depthAttachment){var u=this.depthAttachment.get();u&&l.deleteRenderbuffer(u)}l.deleteFramebuffer(this.framebuffer)};var Y=function(l,p,u){this.func=l,this.mask=p,this.range=u};Y.ReadOnly=!1,Y.ReadWrite=!0,Y.disabled=new Y(519,Y.ReadOnly,[0,1]);var te=function(l,p,u,h,g,b){this.test=l,this.ref=p,this.mask=u,this.fail=h,this.depthFail=g,this.pass=b};te.disabled=new te({func:519,mask:0},0,0,7680,7680,7680);var de=function(l,p,u){this.blendFunction=l,this.blendColor=p,this.mask=u};de.disabled=new de(de.Replace=[1,0],o.Color.transparent,[!1,!1,!1,!1]),de.unblended=new de(de.Replace,o.Color.transparent,[!0,!0,!0,!0]),de.alphaBlended=new de([1,771],o.Color.transparent,[!0,!0,!0,!0]);var me=function(l,p,u){this.enable=l,this.mode=p,this.frontFace=u};me.disabled=new me(!1,1029,2305),me.backCCW=new me(!0,1029,2305);var Z=function(l){this.gl=l,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Ot(this),this.clearDepth=new tr(this),this.clearStencil=new Lr(this),this.colorMask=new Fr(this),this.depthMask=new rr(this),this.stencilMask=new qr(this),this.stencilFunc=new zr(this),this.stencilOp=new Cr(this),this.stencilTest=new an(this),this.depthRange=new Rr(this),this.depthTest=new ur(this),this.depthFunc=new Yr(this),this.blend=new Sn(this),this.blendFunc=new ai(this),this.blendColor=new dr(this),this.blendEquation=new Nt(this),this.cullFace=new jn(this),this.cullFaceSide=new Bn(this),this.frontFace=new $i(this),this.program=new Ut(this),this.activeTexture=new Sr(this),this.viewport=new ct(this),this.bindFramebuffer=new Lt(this),this.bindRenderbuffer=new vr(this),this.bindTexture=new Er(this),this.bindVertexBuffer=new nn(this),this.bindElementBuffer=new Le(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new rt(this),this.pixelStoreUnpack=new St(this),this.pixelStoreUnpackPremultiplyAlpha=new sr(this),this.pixelStoreUnpackFlipY=new Dr(this),this.extTextureFilterAnisotropic=l.getExtension("EXT_texture_filter_anisotropic")||l.getExtension("MOZ_EXT_texture_filter_anisotropic")||l.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=l.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=l.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(l.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=l.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=l.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE)};Z.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Z.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Z.prototype.createIndexBuffer=function(l,p){return new ir(this,l,p)},Z.prototype.createVertexBuffer=function(l,p,u){return new Jt(this,l,p,u)},Z.prototype.createRenderbuffer=function(l,p,u){var h=this.gl,g=h.createRenderbuffer();return this.bindRenderbuffer.set(g),h.renderbufferStorage(h.RENDERBUFFER,l,p,u),this.bindRenderbuffer.set(null),g},Z.prototype.createFramebuffer=function(l,p,u){return new W(this,l,p,u)},Z.prototype.clear=function(l){var p=l.color,u=l.depth,h=this.gl,g=0;p&&(g|=h.COLOR_BUFFER_BIT,this.clearColor.set(p),this.colorMask.set([!0,!0,!0,!0])),u!==void 0&&(g|=h.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),h.clear(g)},Z.prototype.setCullFace=function(l){l.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(l.mode),this.frontFace.set(l.frontFace))},Z.prototype.setDepthMode=function(l){l.func!==this.gl.ALWAYS||l.mask?(this.depthTest.set(!0),this.depthFunc.set(l.func),this.depthMask.set(l.mask),this.depthRange.set(l.range)):this.depthTest.set(!1)},Z.prototype.setStencilMode=function(l){l.test.func!==this.gl.ALWAYS||l.mask?(this.stencilTest.set(!0),this.stencilMask.set(l.mask),this.stencilOp.set([l.fail,l.depthFail,l.pass]),this.stencilFunc.set({func:l.test.func,ref:l.ref,mask:l.test.mask})):this.stencilTest.set(!1)},Z.prototype.setColorMode=function(l){o.deepEqual(l.blendFunction,de.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(l.blendFunction),this.blendColor.set(l.blendColor)),this.colorMask.set(l.mask)},Z.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var ne=function(l){function p(u,h,g){var b=this;l.call(this),this.id=u,this.dispatcher=g,this.on("data",function(w){w.dataType==="source"&&w.sourceDataType==="metadata"&&(b._sourceLoaded=!0),b._sourceLoaded&&!b._paused&&w.dataType==="source"&&w.sourceDataType==="content"&&(b.reload(),b.transform&&b.update(b.transform))}),this.on("error",function(){b._sourceErrored=!0}),this._source=function(w,C,M,N){var K=new qe[C.type](w,C,M,N);if(K.id!==w)throw new Error("Expected Source id to be "+w+" instead of "+K.id);return o.bindAll(["load","abort","unload","serialize","prepare"],K),K}(u,h,g,this),this._tiles={},this._cache=new Ct(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new o.SourceFeatureState}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.onAdd=function(u){this.map=u,this._maxTileCacheSize=u?u._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(u)},p.prototype.onRemove=function(u){this._source&&this._source.onRemove&&this._source.onRemove(u)},p.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var u in this._tiles){var h=this._tiles[u];if(h.state!=="loaded"&&h.state!=="errored")return!1}return!0},p.prototype.getSource=function(){return this._source},p.prototype.pause=function(){this._paused=!0},p.prototype.resume=function(){if(this._paused){var u=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,u&&this.reload(),this.transform&&this.update(this.transform)}},p.prototype._loadTile=function(u,h){return this._source.loadTile(u,h)},p.prototype._unloadTile=function(u){if(this._source.unloadTile)return this._source.unloadTile(u,function(){})},p.prototype._abortTile=function(u){if(this._source.abortTile)return this._source.abortTile(u,function(){})},p.prototype.serialize=function(){return this._source.serialize()},p.prototype.prepare=function(u){for(var h in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var g=this._tiles[h];g.upload(u),g.prepare(this.map.style.imageManager)}},p.prototype.getIds=function(){return o.values(this._tiles).map(function(u){return u.tileID}).sort(Se).map(function(u){return u.key})},p.prototype.getRenderableIds=function(u){var h=this,g=[];for(var b in this._tiles)this._isIdRenderable(b,u)&&g.push(this._tiles[b]);return u?g.sort(function(w,C){var M=w.tileID,N=C.tileID,K=new o.Point(M.canonical.x,M.canonical.y)._rotate(h.transform.angle),X=new o.Point(N.canonical.x,N.canonical.y)._rotate(h.transform.angle);return M.overscaledZ-N.overscaledZ||X.y-K.y||X.x-K.x}).map(function(w){return w.tileID.key}):g.map(function(w){return w.tileID}).sort(Se).map(function(w){return w.key})},p.prototype.hasRenderableParent=function(u){var h=this.findLoadedParent(u,0);return!!h&&this._isIdRenderable(h.tileID.key)},p.prototype._isIdRenderable=function(u,h){return this._tiles[u]&&this._tiles[u].hasData()&&!this._coveredTiles[u]&&(h||!this._tiles[u].holdingForFade())},p.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var u in this._cache.reset(),this._tiles)this._tiles[u].state!=="errored"&&this._reloadTile(u,"reloading")},p.prototype._reloadTile=function(u,h){var g=this._tiles[u];g&&(g.state!=="loading"&&(g.state=h),this._loadTile(g,this._tileLoaded.bind(this,g,u,h)))},p.prototype._tileLoaded=function(u,h,g,b){if(b)return u.state="errored",void(b.status!==404?this._source.fire(new o.ErrorEvent(b,{tile:u})):this.update(this.transform));u.timeAdded=o.browser.now(),g==="expired"&&(u.refreshedUponExpiration=!0),this._setTileReloadTimer(h,u),this.getSource().type==="raster-dem"&&u.dem&&this._backfillDEM(u),this._state.initializeTileState(u,this.map?this.map.painter:null),this._source.fire(new o.Event("data",{dataType:"source",tile:u,coord:u.tileID}))},p.prototype._backfillDEM=function(u){for(var h=this.getRenderableIds(),g=0;g<h.length;g++){var b=h[g];if(u.neighboringTiles&&u.neighboringTiles[b]){var w=this.getTileByID(b);C(u,w),C(w,u)}}function C(M,N){M.needsHillshadePrepare=!0;var K=N.tileID.canonical.x-M.tileID.canonical.x,X=N.tileID.canonical.y-M.tileID.canonical.y,J=Math.pow(2,M.tileID.canonical.z),ue=N.tileID.key;K===0&&X===0||Math.abs(X)>1||(Math.abs(K)>1&&(Math.abs(K+J)===1?K+=J:Math.abs(K-J)===1&&(K-=J)),N.dem&&M.dem&&(M.dem.backfillBorder(N.dem,K,X),M.neighboringTiles&&M.neighboringTiles[ue]&&(M.neighboringTiles[ue].backfilled=!0)))}},p.prototype.getTile=function(u){return this.getTileByID(u.key)},p.prototype.getTileByID=function(u){return this._tiles[u]},p.prototype._retainLoadedChildren=function(u,h,g,b){for(var w in this._tiles){var C=this._tiles[w];if(!(b[w]||!C.hasData()||C.tileID.overscaledZ<=h||C.tileID.overscaledZ>g)){for(var M=C.tileID;C&&C.tileID.overscaledZ>h+1;){var N=C.tileID.scaledTo(C.tileID.overscaledZ-1);(C=this._tiles[N.key])&&C.hasData()&&(M=N)}for(var K=M;K.overscaledZ>h;)if(u[(K=K.scaledTo(K.overscaledZ-1)).key]){b[M.key]=M;break}}}},p.prototype.findLoadedParent=function(u,h){if(u.key in this._loadedParentTiles){var g=this._loadedParentTiles[u.key];return g&&g.tileID.overscaledZ>=h?g:null}for(var b=u.overscaledZ-1;b>=h;b--){var w=u.scaledTo(b),C=this._getLoadedTile(w);if(C)return C}},p.prototype._getLoadedTile=function(u){var h=this._tiles[u.key];return h&&h.hasData()?h:this._cache.getByKey(u.wrapped().key)},p.prototype.updateCacheSize=function(u){var h=Math.ceil(u.width/this._source.tileSize)+1,g=Math.ceil(u.height/this._source.tileSize)+1,b=Math.floor(h*g*5),w=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,b):b;this._cache.setMaxSize(w)},p.prototype.handleWrapJump=function(u){var h=Math.round((u-(this._prevLng===void 0?u:this._prevLng))/360);if(this._prevLng=u,h){var g={};for(var b in this._tiles){var w=this._tiles[b];w.tileID=w.tileID.unwrapTo(w.tileID.wrap+h),g[w.tileID.key]=w}for(var C in this._tiles=g,this._timers)clearTimeout(this._timers[C]),delete this._timers[C];for(var M in this._tiles)this._setTileReloadTimer(M,this._tiles[M])}},p.prototype.update=function(u){var h=this;if(this.transform=u,this._sourceLoaded&&!this._paused){var g;this.updateCacheSize(u),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?g=u.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Ke){return new o.OverscaledTileID(Ke.canonical.z,Ke.wrap,Ke.canonical.z,Ke.canonical.x,Ke.canonical.y)}):(g=u.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(g=g.filter(function(Ke){return h._source.hasTile(Ke)}))):g=[];var b=u.coveringZoomLevel(this._source),w=Math.max(b-p.maxOverzooming,this._source.minzoom),C=Math.max(b+p.maxUnderzooming,this._source.minzoom),M=this._updateRetainedTiles(g,b);if(He(this._source.type)){for(var N={},K={},X=0,J=Object.keys(M);X<J.length;X+=1){var ue=J[X],le=M[ue],ge=this._tiles[ue];if(ge&&!(ge.fadeEndTime&&ge.fadeEndTime<=o.browser.now())){var oe=this.findLoadedParent(le,w);oe&&(this._addTile(oe.tileID),N[oe.tileID.key]=oe.tileID),K[ue]=le}}for(var ye in this._retainLoadedChildren(K,b,C,M),N)M[ye]||(this._coveredTiles[ye]=!0,M[ye]=N[ye])}for(var be in M)this._tiles[be].clearFadeHold();for(var Ae=0,Ne=o.keysDifference(this._tiles,M);Ae<Ne.length;Ae+=1){var De=Ne[Ae],Fe=this._tiles[De];Fe.hasSymbolBuckets&&!Fe.holdingForFade()?Fe.setHoldDuration(this.map._fadeDuration):Fe.hasSymbolBuckets&&!Fe.symbolFadeFinished()||this._removeTile(De)}this._updateLoadedParentTileCache()}},p.prototype.releaseSymbolFadeTiles=function(){for(var u in this._tiles)this._tiles[u].holdingForFade()&&this._removeTile(u)},p.prototype._updateRetainedTiles=function(u,h){for(var g={},b={},w=Math.max(h-p.maxOverzooming,this._source.minzoom),C=Math.max(h+p.maxUnderzooming,this._source.minzoom),M={},N=0,K=u;N<K.length;N+=1){var X=K[N],J=this._addTile(X);g[X.key]=X,J.hasData()||h<this._source.maxzoom&&(M[X.key]=X)}this._retainLoadedChildren(M,h,C,g);for(var ue=0,le=u;ue<le.length;ue+=1){var ge=le[ue],oe=this._tiles[ge.key];if(!oe.hasData()){if(h+1>this._source.maxzoom){var ye=ge.children(this._source.maxzoom)[0],be=this.getTile(ye);if(be&&be.hasData()){g[ye.key]=ye;continue}}else{var Ae=ge.children(this._source.maxzoom);if(g[Ae[0].key]&&g[Ae[1].key]&&g[Ae[2].key]&&g[Ae[3].key])continue}for(var Ne=oe.wasRequested(),De=ge.overscaledZ-1;De>=w;--De){var Fe=ge.scaledTo(De);if(b[Fe.key]||(b[Fe.key]=!0,!(oe=this.getTile(Fe))&&Ne&&(oe=this._addTile(Fe)),oe&&(g[Fe.key]=Fe,Ne=oe.wasRequested(),oe.hasData())))break}}}return g},p.prototype._updateLoadedParentTileCache=function(){for(var u in this._loadedParentTiles={},this._tiles){for(var h=[],g=void 0,b=this._tiles[u].tileID;b.overscaledZ>0;){if(b.key in this._loadedParentTiles){g=this._loadedParentTiles[b.key];break}h.push(b.key);var w=b.scaledTo(b.overscaledZ-1);if(g=this._getLoadedTile(w))break;b=w}for(var C=0,M=h;C<M.length;C+=1)this._loadedParentTiles[M[C]]=g}},p.prototype._addTile=function(u){var h=this._tiles[u.key];if(h)return h;(h=this._cache.getAndRemove(u))&&(this._setTileReloadTimer(u.key,h),h.tileID=u,this._state.initializeTileState(h,this.map?this.map.painter:null),this._cacheTimers[u.key]&&(clearTimeout(this._cacheTimers[u.key]),delete this._cacheTimers[u.key],this._setTileReloadTimer(u.key,h)));var g=!!h;return g||(h=new o.Tile(u,this._source.tileSize*u.overscaleFactor()),this._loadTile(h,this._tileLoaded.bind(this,h,u.key,h.state))),h?(h.uses++,this._tiles[u.key]=h,g||this._source.fire(new o.Event("dataloading",{tile:h,coord:h.tileID,dataType:"source"})),h):null},p.prototype._setTileReloadTimer=function(u,h){var g=this;u in this._timers&&(clearTimeout(this._timers[u]),delete this._timers[u]);var b=h.getExpiryTimeout();b&&(this._timers[u]=setTimeout(function(){g._reloadTile(u,"expired"),delete g._timers[u]},b))},p.prototype._removeTile=function(u){var h=this._tiles[u];h&&(h.uses--,delete this._tiles[u],this._timers[u]&&(clearTimeout(this._timers[u]),delete this._timers[u]),h.uses>0||(h.hasData()&&h.state!=="reloading"?this._cache.add(h.tileID,h,h.getExpiryTimeout()):(h.aborted=!0,this._abortTile(h),this._unloadTile(h))))},p.prototype.clearTiles=function(){for(var u in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(u);this._cache.reset()},p.prototype.tilesIn=function(u,h,g){var b=this,w=[],C=this.transform;if(!C)return w;for(var M=g?C.getCameraQueryGeometry(u):u,N=u.map(function(De){return C.pointCoordinate(De)}),K=M.map(function(De){return C.pointCoordinate(De)}),X=this.getIds(),J=1/0,ue=1/0,le=-1/0,ge=-1/0,oe=0,ye=K;oe<ye.length;oe+=1){var be=ye[oe];J=Math.min(J,be.x),ue=Math.min(ue,be.y),le=Math.max(le,be.x),ge=Math.max(ge,be.y)}for(var Ae=function(De){var Fe=b._tiles[X[De]];if(!Fe.holdingForFade()){var Ke=Fe.tileID,tt=Math.pow(2,C.zoom-Fe.tileID.overscaledZ),et=h*Fe.queryPadding*o.EXTENT/Fe.tileSize/tt,dt=[Ke.getTilePoint(new o.MercatorCoordinate(J,ue)),Ke.getTilePoint(new o.MercatorCoordinate(le,ge))];if(dt[0].x-et<o.EXTENT&&dt[0].y-et<o.EXTENT&&dt[1].x+et>=0&&dt[1].y+et>=0){var Tt=N.map(function(Mt){return Ke.getTilePoint(Mt)}),Rt=K.map(function(Mt){return Ke.getTilePoint(Mt)});w.push({tile:Fe,tileID:Ke,queryGeometry:Tt,cameraQueryGeometry:Rt,scale:tt})}}},Ne=0;Ne<X.length;Ne++)Ae(Ne);return w},p.prototype.getVisibleCoordinates=function(u){for(var h=this,g=this.getRenderableIds(u).map(function(M){return h._tiles[M].tileID}),b=0,w=g;b<w.length;b+=1){var C=w[b];C.posMatrix=this.transform.calculatePosMatrix(C.toUnwrapped())}return g},p.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(He(this._source.type))for(var u in this._tiles){var h=this._tiles[u];if(h.fadeEndTime!==void 0&&h.fadeEndTime>=o.browser.now())return!0}return!1},p.prototype.setFeatureState=function(u,h,g){this._state.updateState(u=u||"_geojsonTileLayer",h,g)},p.prototype.removeFeatureState=function(u,h,g){this._state.removeFeatureState(u=u||"_geojsonTileLayer",h,g)},p.prototype.getFeatureState=function(u,h){return this._state.getState(u=u||"_geojsonTileLayer",h)},p.prototype.setDependencies=function(u,h,g){var b=this._tiles[u];b&&b.setDependencies(h,g)},p.prototype.reloadTilesForDependencies=function(u,h){for(var g in this._tiles)this._tiles[g].hasDependency(u,h)&&this._reloadTile(g,"reloading");this._cache.filter(function(b){return!b.hasDependency(u,h)})},p}(o.Evented);function Se(l,p){var u=Math.abs(2*l.wrap)-+(l.wrap<0),h=Math.abs(2*p.wrap)-+(p.wrap<0);return l.overscaledZ-p.overscaledZ||h-u||p.canonical.y-l.canonical.y||p.canonical.x-l.canonical.x}function He(l){return l==="raster"||l==="image"||l==="video"}function Ye(){return new o.window.Worker(pc.workerUrl)}ne.maxOverzooming=10,ne.maxUnderzooming=3;var $e="mapboxgl_preloaded_worker_pool",Je=function(){this.active={}};Je.prototype.acquire=function(l){if(!this.workers)for(this.workers=[];this.workers.length<Je.workerCount;)this.workers.push(new Ye);return this.active[l]=!0,this.workers.slice()},Je.prototype.release=function(l){delete this.active[l],this.numActive()===0&&(this.workers.forEach(function(p){p.terminate()}),this.workers=null)},Je.prototype.isPreloaded=function(){return!!this.active[$e]},Je.prototype.numActive=function(){return Object.keys(this.active).length};var _t,gt=Math.floor(o.browser.hardwareConcurrency/2);function Ve(){return _t||(_t=new Je),_t}function ht(l,p){var u={};for(var h in l)h!=="ref"&&(u[h]=l[h]);return o.refProperties.forEach(function(g){g in p&&(u[g]=p[g])}),u}function it(l){l=l.slice();for(var p=Object.create(null),u=0;u<l.length;u++)p[l[u].id]=l[u];for(var h=0;h<l.length;h++)"ref"in l[h]&&(l[h]=ht(l[h],p[l[h].ref]));return l}Je.workerCount=Math.max(Math.min(gt,6),1);var at={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function ar(l,p,u){u.push({command:at.addSource,args:[l,p[l]]})}function pt(l,p,u){p.push({command:at.removeSource,args:[l]}),u[l]=!0}function yr(l,p,u,h){pt(l,u,h),ar(l,p,u)}function Hr(l,p,u){var h;for(h in l[u])if(l[u].hasOwnProperty(h)&&h!=="data"&&!o.deepEqual(l[u][h],p[u][h]))return!1;for(h in p[u])if(p[u].hasOwnProperty(h)&&h!=="data"&&!o.deepEqual(l[u][h],p[u][h]))return!1;return!0}function cr(l,p,u,h,g,b){var w;for(w in p=p||{},l=l||{})l.hasOwnProperty(w)&&(o.deepEqual(l[w],p[w])||u.push({command:b,args:[h,w,p[w],g]}));for(w in p)p.hasOwnProperty(w)&&!l.hasOwnProperty(w)&&(o.deepEqual(l[w],p[w])||u.push({command:b,args:[h,w,p[w],g]}))}function Pr(l){return l.id}function _r(l,p){return l[p.id]=p,l}var gi=function(l,p){this.reset(l,p)};gi.prototype.reset=function(l,p){this.points=l||[],this._distances=[0];for(var u=1;u<this.points.length;u++)this._distances[u]=this._distances[u-1]+this.points[u].dist(this.points[u-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(p||0,.5*this.length),this.paddedLength=this.length-2*this.padding},gi.prototype.lerp=function(l){if(this.points.length===1)return this.points[0];l=o.clamp(l,0,1);for(var p=1,u=this._distances[p],h=l*this.paddedLength+this.padding;u<h&&p<this._distances.length;)u=this._distances[++p];var g=p-1,b=this._distances[g],w=u-b,C=w>0?(h-b)/w:0;return this.points[g].mult(1-C).add(this.points[p].mult(C))};var Or=function(l,p,u){var h=this.boxCells=[],g=this.circleCells=[];this.xCellCount=Math.ceil(l/u),this.yCellCount=Math.ceil(p/u);for(var b=0;b<this.xCellCount*this.yCellCount;b++)h.push([]),g.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=l,this.height=p,this.xScale=this.xCellCount/l,this.yScale=this.yCellCount/p,this.boxUid=0,this.circleUid=0};function En(l,p,u,h,g){var b=o.create();return p?(o.scale(b,b,[1/g,1/g,1]),u||o.rotateZ(b,b,h.angle)):o.multiply(b,h.labelPlaneMatrix,l),b}function Wr(l,p,u,h,g){if(p){var b=o.clone(l);return o.scale(b,b,[g,g,1]),u||o.rotateZ(b,b,-h.angle),b}return h.glCoordMatrix}function mr(l,p){var u=[l.x,l.y,0,1];Jn(u,u,p);var h=u[3];return{point:new o.Point(u[0]/h,u[1]/h),signedDistanceFromCamera:h}}function Ar(l,p){return .5+l/p*.5}function Pi(l,p){var u=l[0]/l[3],h=l[1]/l[3];return u>=-p[0]&&u<=p[0]&&h>=-p[1]&&h<=p[1]}function $l(l,p,u,h,g,b,w,C){var M=h?l.textSizeData:l.iconSizeData,N=o.evaluateSizeForZoom(M,u.transform.zoom),K=[256/u.width*2+1,256/u.height*2+1],X=h?l.text.dynamicLayoutVertexArray:l.icon.dynamicLayoutVertexArray;X.clear();for(var J=l.lineVertexArray,ue=h?l.text.placedSymbolArray:l.icon.placedSymbolArray,le=u.transform.width/u.transform.height,ge=!1,oe=0;oe<ue.length;oe++){var ye=ue.get(oe);if(ye.hidden||ye.writingMode===o.WritingMode.vertical&&!ge)vi(ye.numGlyphs,X);else{ge=!1;var be=[ye.anchorX,ye.anchorY,0,1];if(o.transformMat4(be,be,p),Pi(be,K)){var Ae=Ar(u.transform.cameraToCenterDistance,be[3]),Ne=o.evaluateSizeForFeature(M,N,ye),De=w?Ne/Ae:Ne*Ae,Fe=new o.Point(ye.anchorX,ye.anchorY),Ke=mr(Fe,g).point,tt={},et=Kp(ye,De,!1,C,p,g,b,l.glyphOffsetArray,J,X,Ke,Fe,tt,le);ge=et.useVertical,(et.notEnoughRoom||ge||et.needsFlipping&&Kp(ye,De,!0,C,p,g,b,l.glyphOffsetArray,J,X,Ke,Fe,tt,le).notEnoughRoom)&&vi(ye.numGlyphs,X)}else vi(ye.numGlyphs,X)}}h?l.text.dynamicLayoutVertexBuffer.updateData(X):l.icon.dynamicLayoutVertexBuffer.updateData(X)}function Yn(l,p,u,h,g,b,w,C,M,N,K){var X=C.glyphStartIndex+C.numGlyphs,J=C.lineStartIndex,ue=C.lineStartIndex+C.lineLength,le=p.getoffsetX(C.glyphStartIndex),ge=p.getoffsetX(X-1),oe=Cn(l*le,u,h,g,b,w,C.segment,J,ue,M,N,K);if(!oe)return null;var ye=Cn(l*ge,u,h,g,b,w,C.segment,J,ue,M,N,K);return ye?{first:oe,last:ye}:null}function Ai(l,p,u,h){return l===o.WritingMode.horizontal&&Math.abs(u.y-p.y)>Math.abs(u.x-p.x)*h?{useVertical:!0}:(l===o.WritingMode.vertical?p.y<u.y:p.x>u.x)?{needsFlipping:!0}:null}function Kp(l,p,u,h,g,b,w,C,M,N,K,X,J,ue){var le,ge=p/24,oe=l.lineOffsetX*ge,ye=l.lineOffsetY*ge;if(l.numGlyphs>1){var be=l.glyphStartIndex+l.numGlyphs,Ae=l.lineStartIndex,Ne=l.lineStartIndex+l.lineLength,De=Yn(ge,C,oe,ye,u,K,X,l,M,b,J);if(!De)return{notEnoughRoom:!0};var Fe=mr(De.first.point,w).point,Ke=mr(De.last.point,w).point;if(h&&!u){var tt=Ai(l.writingMode,Fe,Ke,ue);if(tt)return tt}le=[De.first];for(var et=l.glyphStartIndex+1;et<be-1;et++)le.push(Cn(ge*C.getoffsetX(et),oe,ye,u,K,X,l.segment,Ae,Ne,M,b,J));le.push(De.last)}else{if(h&&!u){var dt=mr(X,g).point,Tt=l.lineStartIndex+l.segment+1,Rt=new o.Point(M.getx(Tt),M.gety(Tt)),Mt=mr(Rt,g),br=Mt.signedDistanceFromCamera>0?Mt.point:jl(X,Rt,dt,1,g),yt=Ai(l.writingMode,dt,br,ue);if(yt)return yt}var Ht=Cn(ge*C.getoffsetX(l.glyphStartIndex),oe,ye,u,K,X,l.segment,l.lineStartIndex,l.lineStartIndex+l.lineLength,M,b,J);if(!Ht)return{notEnoughRoom:!0};le=[Ht]}for(var nr=0,Gt=le;nr<Gt.length;nr+=1){var qt=Gt[nr];o.addDynamicAttributes(N,qt.point,qt.angle)}return{}}function jl(l,p,u,h,g){var b=mr(l.add(l.sub(p)._unit()),g).point,w=u.sub(b);return u.add(w._mult(h/w.mag()))}function Cn(l,p,u,h,g,b,w,C,M,N,K,X){var J=h?l-p:l+p,ue=J>0?1:-1,le=0;h&&(ue*=-1,le=Math.PI),ue<0&&(le+=Math.PI);for(var ge=ue>0?C+w:C+w+1,oe=g,ye=g,be=0,Ae=0,Ne=Math.abs(J),De=[];be+Ae<=Ne;){if((ge+=ue)<C||ge>=M)return null;if(ye=oe,De.push(oe),(oe=X[ge])===void 0){var Fe=new o.Point(N.getx(ge),N.gety(ge)),Ke=mr(Fe,K);if(Ke.signedDistanceFromCamera>0)oe=X[ge]=Ke.point;else{var tt=ge-ue;oe=jl(be===0?b:new o.Point(N.getx(tt),N.gety(tt)),Fe,ye,Ne-be+1,K)}}be+=Ae,Ae=ye.dist(oe)}var et=(Ne-be)/Ae,dt=oe.sub(ye),Tt=dt.mult(et)._add(ye);Tt._add(dt._unit()._perp()._mult(u*ue));var Rt=le+Math.atan2(oe.y-ye.y,oe.x-ye.x);return De.push(Tt),{point:Tt,angle:Rt,path:De}}Or.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Or.prototype.insert=function(l,p,u,h,g){this._forEachCell(p,u,h,g,this._insertBoxCell,this.boxUid++),this.boxKeys.push(l),this.bboxes.push(p),this.bboxes.push(u),this.bboxes.push(h),this.bboxes.push(g)},Or.prototype.insertCircle=function(l,p,u,h){this._forEachCell(p-h,u-h,p+h,u+h,this._insertCircleCell,this.circleUid++),this.circleKeys.push(l),this.circles.push(p),this.circles.push(u),this.circles.push(h)},Or.prototype._insertBoxCell=function(l,p,u,h,g,b){this.boxCells[g].push(b)},Or.prototype._insertCircleCell=function(l,p,u,h,g,b){this.circleCells[g].push(b)},Or.prototype._query=function(l,p,u,h,g,b){if(u<0||l>this.width||h<0||p>this.height)return!g&&[];var w=[];if(l<=0&&p<=0&&this.width<=u&&this.height<=h){if(g)return!0;for(var C=0;C<this.boxKeys.length;C++)w.push({key:this.boxKeys[C],x1:this.bboxes[4*C],y1:this.bboxes[4*C+1],x2:this.bboxes[4*C+2],y2:this.bboxes[4*C+3]});for(var M=0;M<this.circleKeys.length;M++){var N=this.circles[3*M],K=this.circles[3*M+1],X=this.circles[3*M+2];w.push({key:this.circleKeys[M],x1:N-X,y1:K-X,x2:N+X,y2:K+X})}return b?w.filter(b):w}return this._forEachCell(l,p,u,h,this._queryCell,w,{hitTest:g,seenUids:{box:{},circle:{}}},b),g?w.length>0:w},Or.prototype._queryCircle=function(l,p,u,h,g){var b=l-u,w=l+u,C=p-u,M=p+u;if(w<0||b>this.width||M<0||C>this.height)return!h&&[];var N=[];return this._forEachCell(b,C,w,M,this._queryCellCircle,N,{hitTest:h,circle:{x:l,y:p,radius:u},seenUids:{box:{},circle:{}}},g),h?N.length>0:N},Or.prototype.query=function(l,p,u,h,g){return this._query(l,p,u,h,!1,g)},Or.prototype.hitTest=function(l,p,u,h,g){return this._query(l,p,u,h,!0,g)},Or.prototype.hitTestCircle=function(l,p,u,h){return this._queryCircle(l,p,u,!0,h)},Or.prototype._queryCell=function(l,p,u,h,g,b,w,C){var M=w.seenUids,N=this.boxCells[g];if(N!==null)for(var K=this.bboxes,X=0,J=N;X<J.length;X+=1){var ue=J[X];if(!M.box[ue]){M.box[ue]=!0;var le=4*ue;if(l<=K[le+2]&&p<=K[le+3]&&u>=K[le+0]&&h>=K[le+1]&&(!C||C(this.boxKeys[ue]))){if(w.hitTest)return b.push(!0),!0;b.push({key:this.boxKeys[ue],x1:K[le],y1:K[le+1],x2:K[le+2],y2:K[le+3]})}}}var ge=this.circleCells[g];if(ge!==null)for(var oe=this.circles,ye=0,be=ge;ye<be.length;ye+=1){var Ae=be[ye];if(!M.circle[Ae]){M.circle[Ae]=!0;var Ne=3*Ae;if(this._circleAndRectCollide(oe[Ne],oe[Ne+1],oe[Ne+2],l,p,u,h)&&(!C||C(this.circleKeys[Ae]))){if(w.hitTest)return b.push(!0),!0;var De=oe[Ne],Fe=oe[Ne+1],Ke=oe[Ne+2];b.push({key:this.circleKeys[Ae],x1:De-Ke,y1:Fe-Ke,x2:De+Ke,y2:Fe+Ke})}}}},Or.prototype._queryCellCircle=function(l,p,u,h,g,b,w,C){var M=w.circle,N=w.seenUids,K=this.boxCells[g];if(K!==null)for(var X=this.bboxes,J=0,ue=K;J<ue.length;J+=1){var le=ue[J];if(!N.box[le]){N.box[le]=!0;var ge=4*le;if(this._circleAndRectCollide(M.x,M.y,M.radius,X[ge+0],X[ge+1],X[ge+2],X[ge+3])&&(!C||C(this.boxKeys[le])))return b.push(!0),!0}}var oe=this.circleCells[g];if(oe!==null)for(var ye=this.circles,be=0,Ae=oe;be<Ae.length;be+=1){var Ne=Ae[be];if(!N.circle[Ne]){N.circle[Ne]=!0;var De=3*Ne;if(this._circlesCollide(ye[De],ye[De+1],ye[De+2],M.x,M.y,M.radius)&&(!C||C(this.circleKeys[Ne])))return b.push(!0),!0}}},Or.prototype._forEachCell=function(l,p,u,h,g,b,w,C){for(var M=this._convertToXCellCoord(l),N=this._convertToYCellCoord(p),K=this._convertToXCellCoord(u),X=this._convertToYCellCoord(h),J=M;J<=K;J++)for(var ue=N;ue<=X;ue++)if(g.call(this,l,p,u,h,this.xCellCount*ue+J,b,w,C))return},Or.prototype._convertToXCellCoord=function(l){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(l*this.xScale)))},Or.prototype._convertToYCellCoord=function(l){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(l*this.yScale)))},Or.prototype._circlesCollide=function(l,p,u,h,g,b){var w=h-l,C=g-p,M=u+b;return M*M>w*w+C*C},Or.prototype._circleAndRectCollide=function(l,p,u,h,g,b,w){var C=(b-h)/2,M=Math.abs(l-(h+C));if(M>C+u)return!1;var N=(w-g)/2,K=Math.abs(p-(g+N));if(K>N+u)return!1;if(M<=C||K<=N)return!0;var X=M-C,J=K-N;return X*X+J*J<=u*u};var Vl=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function vi(l,p){for(var u=0;u<l;u++){var h=p.length;p.resize(h+4),p.float32.set(Vl,3*h)}}function Jn(l,p,u){var h=p[0],g=p[1];return l[0]=u[0]*h+u[4]*g+u[12],l[1]=u[1]*h+u[5]*g+u[13],l[3]=u[3]*h+u[7]*g+u[15],l}var co=function(l,p,u){p===void 0&&(p=new Or(l.width+200,l.height+200,25)),u===void 0&&(u=new Or(l.width+200,l.height+200,25)),this.transform=l,this.grid=p,this.ignoredGrid=u,this.pitchfactor=Math.cos(l._pitch)*l.cameraToCenterDistance,this.screenRightBoundary=l.width+100,this.screenBottomBoundary=l.height+100,this.gridRightBoundary=l.width+200,this.gridBottomBoundary=l.height+200};function sn(l,p,u){return p*(o.EXTENT/(l.tileSize*Math.pow(2,u-l.tileID.overscaledZ)))}co.prototype.placeCollisionBox=function(l,p,u,h,g){var b=this.projectAndGetPerspectiveRatio(h,l.anchorPointX,l.anchorPointY),w=u*b.perspectiveRatio,C=l.x1*w+b.point.x,M=l.y1*w+b.point.y,N=l.x2*w+b.point.x,K=l.y2*w+b.point.y;return!this.isInsideGrid(C,M,N,K)||!p&&this.grid.hitTest(C,M,N,K,g)?{box:[],offscreen:!1}:{box:[C,M,N,K],offscreen:this.isOffscreen(C,M,N,K)}},co.prototype.placeCollisionCircles=function(l,p,u,h,g,b,w,C,M,N,K,X,J){var ue=[],le=new o.Point(p.anchorX,p.anchorY),ge=mr(le,b),oe=Ar(this.transform.cameraToCenterDistance,ge.signedDistanceFromCamera),ye=(N?g/oe:g*oe)/o.ONE_EM,be=mr(le,w).point,Ae=Yn(ye,h,p.lineOffsetX*ye,p.lineOffsetY*ye,!1,be,le,p,u,w,{}),Ne=!1,De=!1,Fe=!0;if(Ae){for(var Ke=.5*X*oe+J,tt=new o.Point(-100,-100),et=new o.Point(this.screenRightBoundary,this.screenBottomBoundary),dt=new gi,Tt=Ae.first,Rt=Ae.last,Mt=[],br=Tt.path.length-1;br>=1;br--)Mt.push(Tt.path[br]);for(var yt=1;yt<Rt.path.length;yt++)Mt.push(Rt.path[yt]);var Ht=2.5*Ke;if(C){var nr=Mt.map(function(go){return mr(go,C)});Mt=nr.some(function(go){return go.signedDistanceFromCamera<=0})?[]:nr.map(function(go){return go.point})}var Gt=[];if(Mt.length>0){for(var qt=Mt[0].clone(),Qt=Mt[0].clone(),jt=1;jt<Mt.length;jt++)qt.x=Math.min(qt.x,Mt[jt].x),qt.y=Math.min(qt.y,Mt[jt].y),Qt.x=Math.max(Qt.x,Mt[jt].x),Qt.y=Math.max(Qt.y,Mt[jt].y);Gt=qt.x>=tt.x&&Qt.x<=et.x&&qt.y>=tt.y&&Qt.y<=et.y?[Mt]:Qt.x<tt.x||qt.x>et.x||Qt.y<tt.y||qt.y>et.y?[]:o.clipLine([Mt],tt.x,tt.y,et.x,et.y)}for(var Ft=0,Vn=Gt;Ft<Vn.length;Ft+=1){var vn;dt.reset(Vn[Ft],.25*Ke),vn=dt.length<=.5*Ke?1:Math.ceil(dt.paddedLength/Ht)+1;for(var hi=0;hi<vn;hi++){var ei=hi/Math.max(vn-1,1),mn=dt.lerp(ei),kn=mn.x+100,Zi=mn.y+100;ue.push(kn,Zi,Ke,0);var wi=kn-Ke,Ua=Zi-Ke,Mi=kn+Ke,Bo=Zi+Ke;if(Fe=Fe&&this.isOffscreen(wi,Ua,Mi,Bo),De=De||this.isInsideGrid(wi,Ua,Mi,Bo),!l&&this.grid.hitTestCircle(kn,Zi,Ke,K)&&(Ne=!0,!M))return{circles:[],offscreen:!1,collisionDetected:Ne}}}}return{circles:!M&&Ne||!De?[]:ue,offscreen:Fe,collisionDetected:Ne}},co.prototype.queryRenderedSymbols=function(l){if(l.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var p=[],u=1/0,h=1/0,g=-1/0,b=-1/0,w=0,C=l;w<C.length;w+=1){var M=C[w],N=new o.Point(M.x+100,M.y+100);u=Math.min(u,N.x),h=Math.min(h,N.y),g=Math.max(g,N.x),b=Math.max(b,N.y),p.push(N)}for(var K={},X={},J=0,ue=this.grid.query(u,h,g,b).concat(this.ignoredGrid.query(u,h,g,b));J<ue.length;J+=1){var le=ue[J],ge=le.key;if(K[ge.bucketInstanceId]===void 0&&(K[ge.bucketInstanceId]={}),!K[ge.bucketInstanceId][ge.featureIndex]){var oe=[new o.Point(le.x1,le.y1),new o.Point(le.x2,le.y1),new o.Point(le.x2,le.y2),new o.Point(le.x1,le.y2)];o.polygonIntersectsPolygon(p,oe)&&(K[ge.bucketInstanceId][ge.featureIndex]=!0,X[ge.bucketInstanceId]===void 0&&(X[ge.bucketInstanceId]=[]),X[ge.bucketInstanceId].push(ge.featureIndex))}}return X},co.prototype.insertCollisionBox=function(l,p,u,h,g){(p?this.ignoredGrid:this.grid).insert({bucketInstanceId:u,featureIndex:h,collisionGroupID:g},l[0],l[1],l[2],l[3])},co.prototype.insertCollisionCircles=function(l,p,u,h,g){for(var b=p?this.ignoredGrid:this.grid,w={bucketInstanceId:u,featureIndex:h,collisionGroupID:g},C=0;C<l.length;C+=4)b.insertCircle(w,l[C],l[C+1],l[C+2])},co.prototype.projectAndGetPerspectiveRatio=function(l,p,u){var h=[p,u,0,1];return Jn(h,h,l),{point:new o.Point((h[0]/h[3]+1)/2*this.transform.width+100,(-h[1]/h[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/h[3]*.5}},co.prototype.isOffscreen=function(l,p,u,h){return u<100||l>=this.screenRightBoundary||h<100||p>this.screenBottomBoundary},co.prototype.isInsideGrid=function(l,p,u,h){return u>=0&&l<this.gridRightBoundary&&h>=0&&p<this.gridBottomBoundary},co.prototype.getViewportMatrix=function(){var l=o.identity([]);return o.translate(l,l,[-100,-100,0]),l};var Mo=function(l,p,u,h){this.opacity=l?Math.max(0,Math.min(1,l.opacity+(l.placed?p:-p))):h&&u?1:0,this.placed=u};Mo.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var ro=function(l,p,u,h,g){this.text=new Mo(l?l.text:null,p,u,g),this.icon=new Mo(l?l.icon:null,p,h,g)};ro.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var wd=function(l,p,u){this.text=l,this.icon=p,this.skipFade=u},po=function(){this.invProjMatrix=o.create(),this.viewportMatrix=o.create(),this.circles=[]},Mv=function(l,p,u,h,g){this.bucketInstanceId=l,this.featureIndex=p,this.sourceLayerIndex=u,this.bucketIndex=h,this.tileID=g},ca=function(l){this.crossSourceCollisions=l,this.maxGroupID=0,this.collisionGroups={}};function si(l,p,u,h,g){var b=o.getAnchorAlignment(l),w=-(b.horizontalAlign-.5)*p,C=-(b.verticalAlign-.5)*u,M=o.evaluateVariableOffset(l,h);return new o.Point(w+M[0]*g,C+M[1]*g)}function Ho(l,p,u,h,g,b){var w=l.x1,C=l.x2,M=l.y1,N=l.y2,K=l.anchorPointX,X=l.anchorPointY,J=new o.Point(p,u);return h&&J._rotate(g?b:-b),{x1:w+J.x,y1:M+J.y,x2:C+J.x,y2:N+J.y,anchorPointX:K,anchorPointY:X}}ca.prototype.get=function(l){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[l]){var p=++this.maxGroupID;this.collisionGroups[l]={ID:p,predicate:function(u){return u.collisionGroupID===p}}}return this.collisionGroups[l]};var _i=function(l,p,u,h){this.transform=l.clone(),this.collisionIndex=new co(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=p,this.retainedQueryData={},this.collisionGroups=new ca(u),this.collisionCircleArrays={},this.prevPlacement=h,h&&(h.prevPlacement=void 0),this.placedOrientations={}};function us(l,p,u,h,g){l.emplaceBack(p?1:0,u?1:0,h||0,g||0),l.emplaceBack(p?1:0,u?1:0,h||0,g||0),l.emplaceBack(p?1:0,u?1:0,h||0,g||0),l.emplaceBack(p?1:0,u?1:0,h||0,g||0)}_i.prototype.getBucketParts=function(l,p,u,h){var g=u.getBucket(p),b=u.latestFeatureIndex;if(g&&b&&p.id===g.layerIds[0]){var w=u.collisionBoxArray,C=g.layers[0].layout,M=Math.pow(2,this.transform.zoom-u.tileID.overscaledZ),N=u.tileSize/o.EXTENT,K=this.transform.calculatePosMatrix(u.tileID.toUnwrapped()),X=C.get("text-pitch-alignment")==="map",J=C.get("text-rotation-alignment")==="map",ue=sn(u,1,this.transform.zoom),le=En(K,X,J,this.transform,ue),ge=null;if(X){var oe=Wr(K,X,J,this.transform,ue);ge=o.multiply([],this.transform.labelPlaneMatrix,oe)}this.retainedQueryData[g.bucketInstanceId]=new Mv(g.bucketInstanceId,b,g.sourceLayerIndex,g.index,u.tileID);var ye={bucket:g,layout:C,posMatrix:K,textLabelPlaneMatrix:le,labelToScreenMatrix:ge,scale:M,textPixelRatio:N,holdingForFade:u.holdingForFade(),collisionBoxArray:w,partiallyEvaluatedTextSize:o.evaluateSizeForZoom(g.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(g.sourceID)};if(h)for(var be=0,Ae=g.sortKeyRanges;be<Ae.length;be+=1){var Ne=Ae[be];l.push({sortKey:Ne.sortKey,symbolInstanceStart:Ne.symbolInstanceStart,symbolInstanceEnd:Ne.symbolInstanceEnd,parameters:ye})}else l.push({symbolInstanceStart:0,symbolInstanceEnd:g.symbolInstances.length,parameters:ye})}},_i.prototype.attemptAnchorPlacement=function(l,p,u,h,g,b,w,C,M,N,K,X,J,ue,le){var ge,oe=[X.textOffset0,X.textOffset1],ye=si(l,u,h,oe,g),be=this.collisionIndex.placeCollisionBox(Ho(p,ye.x,ye.y,b,w,this.transform.angle),K,C,M,N.predicate);if(!le||this.collisionIndex.placeCollisionBox(Ho(le,ye.x,ye.y,b,w,this.transform.angle),K,C,M,N.predicate).box.length!==0)return be.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[X.crossTileID]&&this.prevPlacement.placements[X.crossTileID]&&this.prevPlacement.placements[X.crossTileID].text&&(ge=this.prevPlacement.variableOffsets[X.crossTileID].anchor),this.variableOffsets[X.crossTileID]={textOffset:oe,width:u,height:h,anchor:l,textBoxScale:g,prevAnchor:ge},this.markUsedJustification(J,l,X,ue),J.allowVerticalPlacement&&(this.markUsedOrientation(J,ue,X),this.placedOrientations[X.crossTileID]=ue),{shift:ye,placedGlyphBoxes:be}):void 0},_i.prototype.placeLayerBucketPart=function(l,p,u){var h=this,g=l.parameters,b=g.bucket,w=g.layout,C=g.posMatrix,M=g.textLabelPlaneMatrix,N=g.labelToScreenMatrix,K=g.textPixelRatio,X=g.holdingForFade,J=g.collisionBoxArray,ue=g.partiallyEvaluatedTextSize,le=g.collisionGroup,ge=w.get("text-optional"),oe=w.get("icon-optional"),ye=w.get("text-allow-overlap"),be=w.get("icon-allow-overlap"),Ae=w.get("text-rotation-alignment")==="map",Ne=w.get("text-pitch-alignment")==="map",De=w.get("icon-text-fit")!=="none",Fe=w.get("symbol-z-order")==="viewport-y",Ke=ye&&(be||!b.hasIconData()||oe),tt=be&&(ye||!b.hasTextData()||ge);!b.collisionArrays&&J&&b.deserializeCollisionBoxes(J);var et=function(yt,Ht){if(!p[yt.crossTileID])if(X)h.placements[yt.crossTileID]=new wd(!1,!1,!1);else{var nr,Gt=!1,qt=!1,Qt=!0,jt=null,Ft={box:null,offscreen:null},Vn={box:null,offscreen:null},vn=null,hi=null,ei=0,mn=0,kn=0;Ht.textFeatureIndex?ei=Ht.textFeatureIndex:yt.useRuntimeCollisionCircles&&(ei=yt.featureIndex),Ht.verticalTextFeatureIndex&&(mn=Ht.verticalTextFeatureIndex);var Zi=Ht.textBox;if(Zi){var wi=function(Mr){var oo=o.WritingMode.horizontal;if(b.allowVerticalPlacement&&!Mr&&h.prevPlacement){var Ri=h.prevPlacement.placedOrientations[yt.crossTileID];Ri&&(h.placedOrientations[yt.crossTileID]=Ri,h.markUsedOrientation(b,oo=Ri,yt))}return oo},Ua=function(Mr,oo){if(b.allowVerticalPlacement&&yt.numVerticalGlyphVertices>0&&Ht.verticalTextBox)for(var Ri=0,Ts=b.writingModes;Ri<Ts.length&&(Ts[Ri]===o.WritingMode.vertical?(Ft=oo(),Vn=Ft):Ft=Mr(),!(Ft&&Ft.box&&Ft.box.length));Ri+=1);else Ft=Mr()};if(w.get("text-variable-anchor")){var Mi=w.get("text-variable-anchor");if(h.prevPlacement&&h.prevPlacement.variableOffsets[yt.crossTileID]){var Bo=h.prevPlacement.variableOffsets[yt.crossTileID];Mi.indexOf(Bo.anchor)>0&&(Mi=Mi.filter(function(Mr){return Mr!==Bo.anchor})).unshift(Bo.anchor)}var go=function(Mr,oo,Ri){for(var Ts=Mr.x2-Mr.x1,Wv=Mr.y2-Mr.y1,fc=yt.textBoxScale,Gv=De&&!be?oo:null,cu={box:[],offscreen:!1},Qd=ye?2*Mi.length:Mi.length,ll=0;ll<Qd;++ll){var hc=h.attemptAnchorPlacement(Mi[ll%Mi.length],Mr,Ts,Wv,fc,Ae,Ne,K,C,le,ll>=Mi.length,yt,b,Ri,Gv);if(hc&&(cu=hc.placedGlyphBoxes)&&cu.box&&cu.box.length){Gt=!0,jt=hc.shift;break}}return cu};Ua(function(){return go(Zi,Ht.iconBox,o.WritingMode.horizontal)},function(){var Mr=Ht.verticalTextBox;return b.allowVerticalPlacement&&!(Ft&&Ft.box&&Ft.box.length)&&yt.numVerticalGlyphVertices>0&&Mr?go(Mr,Ht.verticalIconBox,o.WritingMode.vertical):{box:null,offscreen:null}}),Ft&&(Gt=Ft.box,Qt=Ft.offscreen);var su=wi(Ft&&Ft.box);if(!Gt&&h.prevPlacement){var al=h.prevPlacement.variableOffsets[yt.crossTileID];al&&(h.variableOffsets[yt.crossTileID]=al,h.markUsedJustification(b,al.anchor,yt,su))}}else{var $a=function(Mr,oo){var Ri=h.collisionIndex.placeCollisionBox(Mr,ye,K,C,le.predicate);return Ri&&Ri.box&&Ri.box.length&&(h.markUsedOrientation(b,oo,yt),h.placedOrientations[yt.crossTileID]=oo),Ri};Ua(function(){return $a(Zi,o.WritingMode.horizontal)},function(){var Mr=Ht.verticalTextBox;return b.allowVerticalPlacement&&yt.numVerticalGlyphVertices>0&&Mr?$a(Mr,o.WritingMode.vertical):{box:null,offscreen:null}}),wi(Ft&&Ft.box&&Ft.box.length)}}if(Gt=(nr=Ft)&&nr.box&&nr.box.length>0,Qt=nr&&nr.offscreen,yt.useRuntimeCollisionCircles){var sl=b.text.placedSymbolArray.get(yt.centerJustifiedTextSymbolIndex),lu=o.evaluateSizeForFeature(b.textSizeData,ue,sl),Yo=w.get("text-padding");vn=h.collisionIndex.placeCollisionCircles(ye,sl,b.lineVertexArray,b.glyphOffsetArray,lu,C,M,N,u,Ne,le.predicate,yt.collisionCircleDiameter,Yo),Gt=ye||vn.circles.length>0&&!vn.collisionDetected,Qt=Qt&&vn.offscreen}if(Ht.iconFeatureIndex&&(kn=Ht.iconFeatureIndex),Ht.iconBox){var uu=function(Mr){var oo=De&&jt?Ho(Mr,jt.x,jt.y,Ae,Ne,h.transform.angle):Mr;return h.collisionIndex.placeCollisionBox(oo,be,K,C,le.predicate)};qt=Vn&&Vn.box&&Vn.box.length&&Ht.verticalIconBox?(hi=uu(Ht.verticalIconBox)).box.length>0:(hi=uu(Ht.iconBox)).box.length>0,Qt=Qt&&hi.offscreen}var Jo=ge||yt.numHorizontalGlyphVertices===0&&yt.numVerticalGlyphVertices===0,qn=oe||yt.numIconVertices===0;if(Jo||qn?qn?Jo||(qt=qt&&Gt):Gt=qt&&Gt:qt=Gt=qt&&Gt,Gt&&nr&&nr.box&&h.collisionIndex.insertCollisionBox(nr.box,w.get("text-ignore-placement"),b.bucketInstanceId,Vn&&Vn.box&&mn?mn:ei,le.ID),qt&&hi&&h.collisionIndex.insertCollisionBox(hi.box,w.get("icon-ignore-placement"),b.bucketInstanceId,kn,le.ID),vn&&(Gt&&h.collisionIndex.insertCollisionCircles(vn.circles,w.get("text-ignore-placement"),b.bucketInstanceId,ei,le.ID),u)){var da=b.bucketInstanceId,ja=h.collisionCircleArrays[da];ja===void 0&&(ja=h.collisionCircleArrays[da]=new po);for(var ks=0;ks<vn.circles.length;ks+=4)ja.circles.push(vn.circles[ks+0]),ja.circles.push(vn.circles[ks+1]),ja.circles.push(vn.circles[ks+2]),ja.circles.push(vn.collisionDetected?1:0)}h.placements[yt.crossTileID]=new wd(Gt||Ke,qt||tt,Qt||b.justReloaded),p[yt.crossTileID]=!0}};if(Fe)for(var dt=b.getSortedSymbolIndexes(this.transform.angle),Tt=dt.length-1;Tt>=0;--Tt){var Rt=dt[Tt];et(b.symbolInstances.get(Rt),b.collisionArrays[Rt])}else for(var Mt=l.symbolInstanceStart;Mt<l.symbolInstanceEnd;Mt++)et(b.symbolInstances.get(Mt),b.collisionArrays[Mt]);if(u&&b.bucketInstanceId in this.collisionCircleArrays){var br=this.collisionCircleArrays[b.bucketInstanceId];o.invert(br.invProjMatrix,C),br.viewportMatrix=this.collisionIndex.getViewportMatrix()}b.justReloaded=!1},_i.prototype.markUsedJustification=function(l,p,u,h){var g;g=h===o.WritingMode.vertical?u.verticalPlacedTextSymbolIndex:{left:u.leftJustifiedTextSymbolIndex,center:u.centerJustifiedTextSymbolIndex,right:u.rightJustifiedTextSymbolIndex}[o.getAnchorJustification(p)];for(var b=0,w=[u.leftJustifiedTextSymbolIndex,u.centerJustifiedTextSymbolIndex,u.rightJustifiedTextSymbolIndex,u.verticalPlacedTextSymbolIndex];b<w.length;b+=1){var C=w[b];C>=0&&(l.text.placedSymbolArray.get(C).crossTileID=g>=0&&C!==g?0:u.crossTileID)}},_i.prototype.markUsedOrientation=function(l,p,u){for(var h=p===o.WritingMode.horizontal||p===o.WritingMode.horizontalOnly?p:0,g=p===o.WritingMode.vertical?p:0,b=0,w=[u.leftJustifiedTextSymbolIndex,u.centerJustifiedTextSymbolIndex,u.rightJustifiedTextSymbolIndex];b<w.length;b+=1)l.text.placedSymbolArray.get(w[b]).placedOrientation=h;u.verticalPlacedTextSymbolIndex&&(l.text.placedSymbolArray.get(u.verticalPlacedTextSymbolIndex).placedOrientation=g)},_i.prototype.commit=function(l){this.commitTime=l,this.zoomAtLastRecencyCheck=this.transform.zoom;var p=this.prevPlacement,u=!1;this.prevZoomAdjustment=p?p.zoomAdjustment(this.transform.zoom):0;var h=p?p.symbolFadeChange(l):1,g=p?p.opacities:{},b=p?p.variableOffsets:{},w=p?p.placedOrientations:{};for(var C in this.placements){var M=this.placements[C],N=g[C];N?(this.opacities[C]=new ro(N,h,M.text,M.icon),u=u||M.text!==N.text.placed||M.icon!==N.icon.placed):(this.opacities[C]=new ro(null,h,M.text,M.icon,M.skipFade),u=u||M.text||M.icon)}for(var K in g){var X=g[K];if(!this.opacities[K]){var J=new ro(X,h,!1,!1);J.isHidden()||(this.opacities[K]=J,u=u||X.text.placed||X.icon.placed)}}for(var ue in b)this.variableOffsets[ue]||!this.opacities[ue]||this.opacities[ue].isHidden()||(this.variableOffsets[ue]=b[ue]);for(var le in w)this.placedOrientations[le]||!this.opacities[le]||this.opacities[le].isHidden()||(this.placedOrientations[le]=w[le]);u?this.lastPlacementChangeTime=l:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=p?p.lastPlacementChangeTime:l)},_i.prototype.updateLayerOpacities=function(l,p){for(var u={},h=0,g=p;h<g.length;h+=1){var b=g[h],w=b.getBucket(l);w&&b.latestFeatureIndex&&l.id===w.layerIds[0]&&this.updateBucketOpacities(w,u,b.collisionBoxArray)}},_i.prototype.updateBucketOpacities=function(l,p,u){var h=this;l.hasTextData()&&l.text.opacityVertexArray.clear(),l.hasIconData()&&l.icon.opacityVertexArray.clear(),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexArray.clear(),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexArray.clear();var g=l.layers[0].layout,b=new ro(null,0,!1,!1,!0),w=g.get("text-allow-overlap"),C=g.get("icon-allow-overlap"),M=g.get("text-variable-anchor"),N=g.get("text-rotation-alignment")==="map",K=g.get("text-pitch-alignment")==="map",X=g.get("icon-text-fit")!=="none",J=new ro(null,0,w&&(C||!l.hasIconData()||g.get("icon-optional")),C&&(w||!l.hasTextData()||g.get("text-optional")),!0);!l.collisionArrays&&u&&(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData())&&l.deserializeCollisionBoxes(u);for(var ue=function(ye,be,Ae){for(var Ne=0;Ne<be/4;Ne++)ye.opacityVertexArray.emplaceBack(Ae)},le=function(ye){var be=l.symbolInstances.get(ye),Ae=be.numHorizontalGlyphVertices,Ne=be.numVerticalGlyphVertices,De=be.crossTileID,Fe=h.opacities[De];p[De]?Fe=b:Fe||(h.opacities[De]=Fe=J),p[De]=!0;var Ke=be.numIconVertices>0,tt=h.placedOrientations[be.crossTileID],et=tt===o.WritingMode.vertical,dt=tt===o.WritingMode.horizontal||tt===o.WritingMode.horizontalOnly;if(Ae>0||Ne>0){var Tt=Cd(Fe.text);ue(l.text,Ae,et?Ks:Tt),ue(l.text,Ne,dt?Ks:Tt);var Rt=Fe.text.isHidden();[be.rightJustifiedTextSymbolIndex,be.centerJustifiedTextSymbolIndex,be.leftJustifiedTextSymbolIndex].forEach(function(Ft){Ft>=0&&(l.text.placedSymbolArray.get(Ft).hidden=Rt||et?1:0)}),be.verticalPlacedTextSymbolIndex>=0&&(l.text.placedSymbolArray.get(be.verticalPlacedTextSymbolIndex).hidden=Rt||dt?1:0);var Mt=h.variableOffsets[be.crossTileID];Mt&&h.markUsedJustification(l,Mt.anchor,be,tt);var br=h.placedOrientations[be.crossTileID];br&&(h.markUsedJustification(l,"left",be,br),h.markUsedOrientation(l,br,be))}if(Ke){var yt=Cd(Fe.icon),Ht=!(X&&be.verticalPlacedIconSymbolIndex&&et);be.placedIconSymbolIndex>=0&&(ue(l.icon,be.numIconVertices,Ht?yt:Ks),l.icon.placedSymbolArray.get(be.placedIconSymbolIndex).hidden=Fe.icon.isHidden()),be.verticalPlacedIconSymbolIndex>=0&&(ue(l.icon,be.numVerticalIconVertices,Ht?Ks:yt),l.icon.placedSymbolArray.get(be.verticalPlacedIconSymbolIndex).hidden=Fe.icon.isHidden())}if(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData()){var nr=l.collisionArrays[ye];if(nr){var Gt=new o.Point(0,0);if(nr.textBox||nr.verticalTextBox){var qt=!0;if(M){var Qt=h.variableOffsets[De];Qt?(Gt=si(Qt.anchor,Qt.width,Qt.height,Qt.textOffset,Qt.textBoxScale),N&&Gt._rotate(K?h.transform.angle:-h.transform.angle)):qt=!1}nr.textBox&&us(l.textCollisionBox.collisionVertexArray,Fe.text.placed,!qt||et,Gt.x,Gt.y),nr.verticalTextBox&&us(l.textCollisionBox.collisionVertexArray,Fe.text.placed,!qt||dt,Gt.x,Gt.y)}var jt=!!(!dt&&nr.verticalIconBox);nr.iconBox&&us(l.iconCollisionBox.collisionVertexArray,Fe.icon.placed,jt,X?Gt.x:0,X?Gt.y:0),nr.verticalIconBox&&us(l.iconCollisionBox.collisionVertexArray,Fe.icon.placed,!jt,X?Gt.x:0,X?Gt.y:0)}}},ge=0;ge<l.symbolInstances.length;ge++)le(ge);if(l.sortFeatures(this.transform.angle),this.retainedQueryData[l.bucketInstanceId]&&(this.retainedQueryData[l.bucketInstanceId].featureSortOrder=l.featureSortOrder),l.hasTextData()&&l.text.opacityVertexBuffer&&l.text.opacityVertexBuffer.updateData(l.text.opacityVertexArray),l.hasIconData()&&l.icon.opacityVertexBuffer&&l.icon.opacityVertexBuffer.updateData(l.icon.opacityVertexArray),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexBuffer&&l.iconCollisionBox.collisionVertexBuffer.updateData(l.iconCollisionBox.collisionVertexArray),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexBuffer&&l.textCollisionBox.collisionVertexBuffer.updateData(l.textCollisionBox.collisionVertexArray),l.bucketInstanceId in this.collisionCircleArrays){var oe=this.collisionCircleArrays[l.bucketInstanceId];l.placementInvProjMatrix=oe.invProjMatrix,l.placementViewportMatrix=oe.viewportMatrix,l.collisionCircleArray=oe.circles,delete this.collisionCircleArrays[l.bucketInstanceId]}},_i.prototype.symbolFadeChange=function(l){return this.fadeDuration===0?1:(l-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},_i.prototype.zoomAdjustment=function(l){return Math.max(0,(this.transform.zoom-l)/1.5)},_i.prototype.hasTransitions=function(l){return this.stale||l-this.lastPlacementChangeTime<this.fadeDuration},_i.prototype.stillRecent=function(l,p){var u=this.zoomAtLastRecencyCheck===p?1-this.zoomAdjustment(p):1;return this.zoomAtLastRecencyCheck=p,this.commitTime+this.fadeDuration*u>l},_i.prototype.setStale=function(){this.stale=!0};var Rv=Math.pow(2,25),Lv=Math.pow(2,24),Xp=Math.pow(2,17),zv=Math.pow(2,16),Sd=Math.pow(2,9),Dv=Math.pow(2,8),Ed=Math.pow(2,1);function Cd(l){if(l.opacity===0&&!l.placed)return 0;if(l.opacity===1&&l.placed)return 4294967295;var p=l.placed?1:0,u=Math.floor(127*l.opacity);return u*Rv+p*Lv+u*Xp+p*zv+u*Sd+p*Dv+u*Ed+p}var Ks=0,Yp=function(l){this._sortAcrossTiles=l.layout.get("symbol-z-order")!=="viewport-y"&&l.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Yp.prototype.continuePlacement=function(l,p,u,h,g){for(var b=this._bucketParts;this._currentTileIndex<l.length;)if(p.getBucketParts(b,h,l[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,g())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,b.sort(function(w,C){return w.sortKey-C.sortKey}));this._currentPartIndex<b.length;)if(p.placeLayerBucketPart(b[this._currentPartIndex],this._seenCrossTileIDs,u),this._currentPartIndex++,g())return!0;return!1};var ql=function(l,p,u,h,g,b,w){this.placement=new _i(l,g,b,w),this._currentPlacementIndex=p.length-1,this._forceFullPlacement=u,this._showCollisionBoxes=h,this._done=!1};ql.prototype.isDone=function(){return this._done},ql.prototype.continuePlacement=function(l,p,u){for(var h=this,g=o.browser.now(),b=function(){var M=o.browser.now()-g;return!h._forceFullPlacement&&M>2};this._currentPlacementIndex>=0;){var w=p[l[this._currentPlacementIndex]],C=this.placement.collisionIndex.transform.zoom;if(w.type==="symbol"&&(!w.minzoom||w.minzoom<=C)&&(!w.maxzoom||w.maxzoom>C)){if(this._inProgressLayer||(this._inProgressLayer=new Yp(w)),this._inProgressLayer.continuePlacement(u[w.source],this.placement,this._showCollisionBoxes,w,b))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},ql.prototype.commit=function(l){return this.placement.commit(l),this.placement};var kd=512/o.EXTENT/2,Gu=function(l,p,u){this.tileID=l,this.indexedSymbolInstances={},this.bucketInstanceId=u;for(var h=0;h<p.length;h++){var g=p.get(h),b=g.key;this.indexedSymbolInstances[b]||(this.indexedSymbolInstances[b]=[]),this.indexedSymbolInstances[b].push({crossTileID:g.crossTileID,coord:this.getScaledCoordinates(g,l)})}};Gu.prototype.getScaledCoordinates=function(l,p){var u=kd/Math.pow(2,p.canonical.z-this.tileID.canonical.z);return{x:Math.floor((p.canonical.x*o.EXTENT+l.anchorX)*u),y:Math.floor((p.canonical.y*o.EXTENT+l.anchorY)*u)}},Gu.prototype.findMatches=function(l,p,u){for(var h=this.tileID.canonical.z<p.canonical.z?1:Math.pow(2,this.tileID.canonical.z-p.canonical.z),g=0;g<l.length;g++){var b=l.get(g);if(!b.crossTileID){var w=this.indexedSymbolInstances[b.key];if(w)for(var C=this.getScaledCoordinates(b,p),M=0,N=w;M<N.length;M+=1){var K=N[M];if(Math.abs(K.coord.x-C.x)<=h&&Math.abs(K.coord.y-C.y)<=h&&!u[K.crossTileID]){u[K.crossTileID]=!0,b.crossTileID=K.crossTileID;break}}}}};var fo=function(){this.maxCrossTileID=0};fo.prototype.generate=function(){return++this.maxCrossTileID};var ka=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};ka.prototype.handleWrapJump=function(l){var p=Math.round((l-this.lng)/360);if(p!==0)for(var u in this.indexes){var h=this.indexes[u],g={};for(var b in h){var w=h[b];w.tileID=w.tileID.unwrapTo(w.tileID.wrap+p),g[w.tileID.key]=w}this.indexes[u]=g}this.lng=l},ka.prototype.addBucket=function(l,p,u){if(this.indexes[l.overscaledZ]&&this.indexes[l.overscaledZ][l.key]){if(this.indexes[l.overscaledZ][l.key].bucketInstanceId===p.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(l.overscaledZ,this.indexes[l.overscaledZ][l.key])}for(var h=0;h<p.symbolInstances.length;h++)p.symbolInstances.get(h).crossTileID=0;this.usedCrossTileIDs[l.overscaledZ]||(this.usedCrossTileIDs[l.overscaledZ]={});var g=this.usedCrossTileIDs[l.overscaledZ];for(var b in this.indexes){var w=this.indexes[b];if(Number(b)>l.overscaledZ)for(var C in w){var M=w[C];M.tileID.isChildOf(l)&&M.findMatches(p.symbolInstances,l,g)}else{var N=w[l.scaledTo(Number(b)).key];N&&N.findMatches(p.symbolInstances,l,g)}}for(var K=0;K<p.symbolInstances.length;K++){var X=p.symbolInstances.get(K);X.crossTileID||(X.crossTileID=u.generate(),g[X.crossTileID]=!0)}return this.indexes[l.overscaledZ]===void 0&&(this.indexes[l.overscaledZ]={}),this.indexes[l.overscaledZ][l.key]=new Gu(l,p.symbolInstances,p.bucketInstanceId),!0},ka.prototype.removeBucketCrossTileIDs=function(l,p){for(var u in p.indexedSymbolInstances)for(var h=0,g=p.indexedSymbolInstances[u];h<g.length;h+=1)delete this.usedCrossTileIDs[l][g[h].crossTileID]},ka.prototype.removeStaleBuckets=function(l){var p=!1;for(var u in this.indexes){var h=this.indexes[u];for(var g in h)l[h[g].bucketInstanceId]||(this.removeBucketCrossTileIDs(u,h[g]),delete h[g],p=!0)}return p};var Ta=function(){this.layerIndexes={},this.crossTileIDs=new fo,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Ta.prototype.addLayer=function(l,p,u){var h=this.layerIndexes[l.id];h===void 0&&(h=this.layerIndexes[l.id]=new ka);var g=!1,b={};h.handleWrapJump(u);for(var w=0,C=p;w<C.length;w+=1){var M=C[w],N=M.getBucket(l);N&&l.id===N.layerIds[0]&&(N.bucketInstanceId||(N.bucketInstanceId=++this.maxBucketInstanceId),h.addBucket(M.tileID,N,this.crossTileIDs)&&(g=!0),b[N.bucketInstanceId]=!0)}return h.removeStaleBuckets(b)&&(g=!0),g},Ta.prototype.pruneUnusedLayers=function(l){var p={};for(var u in l.forEach(function(h){p[h]=!0}),this.layerIndexes)p[u]||delete this.layerIndexes[u]};var cs=function(l,p){return o.emitValidationErrors(l,p&&p.filter(function(u){return u.identifier!=="source.canvas"}))},Ia=o.pick(at,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Pa=o.pick(at,["setCenter","setZoom","setBearing","setPitch"]),Hu=function(){var l={},p=o.styleSpec.$version;for(var u in o.styleSpec.$root){var h,g=o.styleSpec.$root[u];g.required&&(h=u==="version"?p:g.type==="array"?[]:{})!=null&&(l[u]=h)}return l}(),ji=function(l){function p(u,h){var g=this;h===void 0&&(h={}),l.call(this),this.map=u,this.dispatcher=new Oe(Ve(),this),this.imageManager=new V,this.imageManager.setEventedParent(this),this.glyphManager=new Te(u._requestManager,h.localIdeographFontFamily),this.lineAtlas=new pe(256,512),this.crossTileSymbolIndex=new Ta,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new o.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",o.getReferrer());var b=this;this._rtlTextPluginCallback=p.registerForPluginStateChange(function(w){b.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:w.pluginStatus,pluginURL:w.pluginURL},function(C,M){if(o.triggerPluginCompletionEvent(C),M&&M.every(function(K){return K}))for(var N in b.sourceCaches)b.sourceCaches[N].reload()})}),this.on("data",function(w){if(w.dataType==="source"&&w.sourceDataType==="metadata"){var C=g.sourceCaches[w.sourceId];if(C){var M=C.getSource();if(M&&M.vectorLayerIds)for(var N in g._layers){var K=g._layers[N];K.source===M.id&&g._validateLayer(K)}}}})}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.loadURL=function(u,h){var g=this;h===void 0&&(h={}),this.fire(new o.Event("dataloading",{dataType:"style"}));var b=typeof h.validate=="boolean"?h.validate:!o.isMapboxURL(u);u=this.map._requestManager.normalizeStyleURL(u,h.accessToken);var w=this.map._requestManager.transformRequest(u,o.ResourceType.Style);this._request=o.getJSON(w,function(C,M){g._request=null,C?g.fire(new o.ErrorEvent(C)):M&&g._load(M,b)})},p.prototype.loadJSON=function(u,h){var g=this;h===void 0&&(h={}),this.fire(new o.Event("dataloading",{dataType:"style"})),this._request=o.browser.frame(function(){g._request=null,g._load(u,h.validate!==!1)})},p.prototype.loadEmpty=function(){this.fire(new o.Event("dataloading",{dataType:"style"})),this._load(Hu,!1)},p.prototype._load=function(u,h){if(!h||!cs(this,o.validateStyle(u))){for(var g in this._loaded=!0,this.stylesheet=u,u.sources)this.addSource(g,u.sources[g],{validate:!1});u.sprite?this._loadSprite(u.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(u.glyphs);var b=it(this.stylesheet.layers);this._order=b.map(function(N){return N.id}),this._layers={},this._serializedLayers={};for(var w=0,C=b;w<C.length;w+=1){var M=C[w];(M=o.createStyleLayer(M)).setEventedParent(this,{layer:{id:M.id}}),this._layers[M.id]=M,this._serializedLayers[M.id]=M.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new ee(this.stylesheet.light),this.fire(new o.Event("data",{dataType:"style"})),this.fire(new o.Event("style.load"))}},p.prototype._loadSprite=function(u){var h=this;this._spriteRequest=function(g,b,w){var C,M,N,K=o.browser.devicePixelRatio>1?"@2x":"",X=o.getJSON(b.transformRequest(b.normalizeSpriteURL(g,K,".json"),o.ResourceType.SpriteJSON),function(le,ge){X=null,N||(N=le,C=ge,ue())}),J=o.getImage(b.transformRequest(b.normalizeSpriteURL(g,K,".png"),o.ResourceType.SpriteImage),function(le,ge){J=null,N||(N=le,M=ge,ue())});function ue(){if(N)w(N);else if(C&&M){var le=o.browser.getImageData(M),ge={};for(var oe in C){var ye=C[oe],be=ye.width,Ae=ye.height,Ne=ye.x,De=ye.y,Fe=ye.sdf,Ke=ye.pixelRatio,tt=ye.stretchX,et=ye.stretchY,dt=ye.content,Tt=new o.RGBAImage({width:be,height:Ae});o.RGBAImage.copy(le,Tt,{x:Ne,y:De},{x:0,y:0},{width:be,height:Ae}),ge[oe]={data:Tt,pixelRatio:Ke,sdf:Fe,stretchX:tt,stretchY:et,content:dt}}w(null,ge)}}return{cancel:function(){X&&(X.cancel(),X=null),J&&(J.cancel(),J=null)}}}(u,this.map._requestManager,function(g,b){if(h._spriteRequest=null,g)h.fire(new o.ErrorEvent(g));else if(b)for(var w in b)h.imageManager.addImage(w,b[w]);h.imageManager.setLoaded(!0),h._availableImages=h.imageManager.listImages(),h.dispatcher.broadcast("setImages",h._availableImages),h.fire(new o.Event("data",{dataType:"style"}))})},p.prototype._validateLayer=function(u){var h=this.sourceCaches[u.source];if(h){var g=u.sourceLayer;if(g){var b=h.getSource();(b.type==="geojson"||b.vectorLayerIds&&b.vectorLayerIds.indexOf(g)===-1)&&this.fire(new o.ErrorEvent(new Error('Source layer "'+g+'" does not exist on source "'+b.id+'" as specified by style layer "'+u.id+'"')))}}},p.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var u in this.sourceCaches)if(!this.sourceCaches[u].loaded())return!1;return!!this.imageManager.isLoaded()},p.prototype._serializeLayers=function(u){for(var h=[],g=0,b=u;g<b.length;g+=1){var w=this._layers[b[g]];w.type!=="custom"&&h.push(w.serialize())}return h},p.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var u in this.sourceCaches)if(this.sourceCaches[u].hasTransition())return!0;for(var h in this._layers)if(this._layers[h].hasTransition())return!0;return!1},p.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},p.prototype.update=function(u){if(this._loaded){var h=this._changed;if(this._changed){var g=Object.keys(this._updatedLayers),b=Object.keys(this._removedLayers);for(var w in(g.length||b.length)&&this._updateWorkerLayers(g,b),this._updatedSources){var C=this._updatedSources[w];C==="reload"?this._reloadSource(w):C==="clear"&&this._clearSource(w)}for(var M in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[M].updateTransitions(u);this.light.updateTransitions(u),this._resetUpdates()}var N={};for(var K in this.sourceCaches){var X=this.sourceCaches[K];N[K]=X.used,X.used=!1}for(var J=0,ue=this._order;J<ue.length;J+=1){var le=this._layers[ue[J]];le.recalculate(u,this._availableImages),!le.isHidden(u.zoom)&&le.source&&(this.sourceCaches[le.source].used=!0)}for(var ge in N){var oe=this.sourceCaches[ge];N[ge]!==oe.used&&oe.fire(new o.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:ge}))}this.light.recalculate(u),this.z=u.zoom,h&&this.fire(new o.Event("data",{dataType:"style"}))}},p.prototype._updateTilesForChangedImages=function(){var u=Object.keys(this._changedImages);if(u.length){for(var h in this.sourceCaches)this.sourceCaches[h].reloadTilesForDependencies(["icons","patterns"],u);this._changedImages={}}},p.prototype._updateWorkerLayers=function(u,h){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(u),removedIds:h})},p.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},p.prototype.setState=function(u){var h=this;if(this._checkLoaded(),cs(this,o.validateStyle(u)))return!1;(u=o.clone$1(u)).layers=it(u.layers);var g=function(w,C){if(!w)return[{command:at.setStyle,args:[C]}];var M=[];try{if(!o.deepEqual(w.version,C.version))return[{command:at.setStyle,args:[C]}];o.deepEqual(w.center,C.center)||M.push({command:at.setCenter,args:[C.center]}),o.deepEqual(w.zoom,C.zoom)||M.push({command:at.setZoom,args:[C.zoom]}),o.deepEqual(w.bearing,C.bearing)||M.push({command:at.setBearing,args:[C.bearing]}),o.deepEqual(w.pitch,C.pitch)||M.push({command:at.setPitch,args:[C.pitch]}),o.deepEqual(w.sprite,C.sprite)||M.push({command:at.setSprite,args:[C.sprite]}),o.deepEqual(w.glyphs,C.glyphs)||M.push({command:at.setGlyphs,args:[C.glyphs]}),o.deepEqual(w.transition,C.transition)||M.push({command:at.setTransition,args:[C.transition]}),o.deepEqual(w.light,C.light)||M.push({command:at.setLight,args:[C.light]});var N={},K=[];(function(J,ue,le,ge){var oe;for(oe in ue=ue||{},J=J||{})J.hasOwnProperty(oe)&&(ue.hasOwnProperty(oe)||pt(oe,le,ge));for(oe in ue)ue.hasOwnProperty(oe)&&(J.hasOwnProperty(oe)?o.deepEqual(J[oe],ue[oe])||(J[oe].type==="geojson"&&ue[oe].type==="geojson"&&Hr(J,ue,oe)?le.push({command:at.setGeoJSONSourceData,args:[oe,ue[oe].data]}):yr(oe,ue,le,ge)):ar(oe,ue,le))})(w.sources,C.sources,K,N);var X=[];w.layers&&w.layers.forEach(function(J){N[J.source]?M.push({command:at.removeLayer,args:[J.id]}):X.push(J)}),M=M.concat(K),function(J,ue,le){ue=ue||[];var ge,oe,ye,be,Ae,Ne,De,Fe=(J=J||[]).map(Pr),Ke=ue.map(Pr),tt=J.reduce(_r,{}),et=ue.reduce(_r,{}),dt=Fe.slice(),Tt=Object.create(null);for(ge=0,oe=0;ge<Fe.length;ge++)et.hasOwnProperty(ye=Fe[ge])?oe++:(le.push({command:at.removeLayer,args:[ye]}),dt.splice(dt.indexOf(ye,oe),1));for(ge=0,oe=0;ge<Ke.length;ge++)dt[dt.length-1-ge]!==(ye=Ke[Ke.length-1-ge])&&(tt.hasOwnProperty(ye)?(le.push({command:at.removeLayer,args:[ye]}),dt.splice(dt.lastIndexOf(ye,dt.length-oe),1)):oe++,le.push({command:at.addLayer,args:[et[ye],Ne=dt[dt.length-ge]]}),dt.splice(dt.length-ge,0,ye),Tt[ye]=!0);for(ge=0;ge<Ke.length;ge++)if(be=tt[ye=Ke[ge]],Ae=et[ye],!Tt[ye]&&!o.deepEqual(be,Ae))if(o.deepEqual(be.source,Ae.source)&&o.deepEqual(be["source-layer"],Ae["source-layer"])&&o.deepEqual(be.type,Ae.type)){for(De in cr(be.layout,Ae.layout,le,ye,null,at.setLayoutProperty),cr(be.paint,Ae.paint,le,ye,null,at.setPaintProperty),o.deepEqual(be.filter,Ae.filter)||le.push({command:at.setFilter,args:[ye,Ae.filter]}),o.deepEqual(be.minzoom,Ae.minzoom)&&o.deepEqual(be.maxzoom,Ae.maxzoom)||le.push({command:at.setLayerZoomRange,args:[ye,Ae.minzoom,Ae.maxzoom]}),be)be.hasOwnProperty(De)&&De!=="layout"&&De!=="paint"&&De!=="filter"&&De!=="metadata"&&De!=="minzoom"&&De!=="maxzoom"&&(De.indexOf("paint.")===0?cr(be[De],Ae[De],le,ye,De.slice(6),at.setPaintProperty):o.deepEqual(be[De],Ae[De])||le.push({command:at.setLayerProperty,args:[ye,De,Ae[De]]}));for(De in Ae)Ae.hasOwnProperty(De)&&!be.hasOwnProperty(De)&&De!=="layout"&&De!=="paint"&&De!=="filter"&&De!=="metadata"&&De!=="minzoom"&&De!=="maxzoom"&&(De.indexOf("paint.")===0?cr(be[De],Ae[De],le,ye,De.slice(6),at.setPaintProperty):o.deepEqual(be[De],Ae[De])||le.push({command:at.setLayerProperty,args:[ye,De,Ae[De]]}))}else le.push({command:at.removeLayer,args:[ye]}),Ne=dt[dt.lastIndexOf(ye)+1],le.push({command:at.addLayer,args:[Ae,Ne]})}(X,C.layers,M)}catch(J){console.warn("Unable to compute style diff:",J),M=[{command:at.setStyle,args:[C]}]}return M}(this.serialize(),u).filter(function(w){return!(w.command in Pa)});if(g.length===0)return!1;var b=g.filter(function(w){return!(w.command in Ia)});if(b.length>0)throw new Error("Unimplemented: "+b.map(function(w){return w.command}).join(", ")+".");return g.forEach(function(w){w.command!=="setTransition"&&h[w.command].apply(h,w.args)}),this.stylesheet=u,!0},p.prototype.addImage=function(u,h){if(this.getImage(u))return this.fire(new o.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(u,h),this._afterImageUpdated(u)},p.prototype.updateImage=function(u,h){this.imageManager.updateImage(u,h)},p.prototype.getImage=function(u){return this.imageManager.getImage(u)},p.prototype.removeImage=function(u){if(!this.getImage(u))return this.fire(new o.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(u),this._afterImageUpdated(u)},p.prototype._afterImageUpdated=function(u){this._availableImages=this.imageManager.listImages(),this._changedImages[u]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new o.Event("data",{dataType:"style"}))},p.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},p.prototype.addSource=function(u,h,g){var b=this;if(g===void 0&&(g={}),this._checkLoaded(),this.sourceCaches[u]!==void 0)throw new Error("There is already a source with this ID");if(!h.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(h).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(h.type)>=0&&this._validate(o.validateStyle.source,"sources."+u,h,null,g))){this.map&&this.map._collectResourceTiming&&(h.collectResourceTiming=!0);var w=this.sourceCaches[u]=new ne(u,h,this.dispatcher);w.style=this,w.setEventedParent(this,function(){return{isSourceLoaded:b.loaded(),source:w.serialize(),sourceId:u}}),w.onAdd(this.map),this._changed=!0}},p.prototype.removeSource=function(u){if(this._checkLoaded(),this.sourceCaches[u]===void 0)throw new Error("There is no source with this ID");for(var h in this._layers)if(this._layers[h].source===u)return this.fire(new o.ErrorEvent(new Error('Source "'+u+'" cannot be removed while layer "'+h+'" is using it.')));var g=this.sourceCaches[u];delete this.sourceCaches[u],delete this._updatedSources[u],g.fire(new o.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:u})),g.setEventedParent(null),g.clearTiles(),g.onRemove&&g.onRemove(this.map),this._changed=!0},p.prototype.setGeoJSONSourceData=function(u,h){this._checkLoaded(),this.sourceCaches[u].getSource().setData(h),this._changed=!0},p.prototype.getSource=function(u){return this.sourceCaches[u]&&this.sourceCaches[u].getSource()},p.prototype.addLayer=function(u,h,g){g===void 0&&(g={}),this._checkLoaded();var b=u.id;if(this.getLayer(b))this.fire(new o.ErrorEvent(new Error('Layer with id "'+b+'" already exists on this map')));else{var w;if(u.type==="custom"){if(cs(this,o.validateCustomStyleLayer(u)))return;w=o.createStyleLayer(u)}else{if(typeof u.source=="object"&&(this.addSource(b,u.source),u=o.clone$1(u),u=o.extend(u,{source:b})),this._validate(o.validateStyle.layer,"layers."+b,u,{arrayIndex:-1},g))return;w=o.createStyleLayer(u),this._validateLayer(w),w.setEventedParent(this,{layer:{id:b}}),this._serializedLayers[w.id]=w.serialize()}var C=h?this._order.indexOf(h):this._order.length;if(h&&C===-1)this.fire(new o.ErrorEvent(new Error('Layer with id "'+h+'" does not exist on this map.')));else{if(this._order.splice(C,0,b),this._layerOrderChanged=!0,this._layers[b]=w,this._removedLayers[b]&&w.source&&w.type!=="custom"){var M=this._removedLayers[b];delete this._removedLayers[b],M.type!==w.type?this._updatedSources[w.source]="clear":(this._updatedSources[w.source]="reload",this.sourceCaches[w.source].pause())}this._updateLayer(w),w.onAdd&&w.onAdd(this.map)}}},p.prototype.moveLayer=function(u,h){if(this._checkLoaded(),this._changed=!0,this._layers[u]){if(u!==h){var g=this._order.indexOf(u);this._order.splice(g,1);var b=h?this._order.indexOf(h):this._order.length;h&&b===-1?this.fire(new o.ErrorEvent(new Error('Layer with id "'+h+'" does not exist on this map.'))):(this._order.splice(b,0,u),this._layerOrderChanged=!0)}}else this.fire(new o.ErrorEvent(new Error("The layer '"+u+"' does not exist in the map's style and cannot be moved.")))},p.prototype.removeLayer=function(u){this._checkLoaded();var h=this._layers[u];if(h){h.setEventedParent(null);var g=this._order.indexOf(u);this._order.splice(g,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[u]=h,delete this._layers[u],delete this._serializedLayers[u],delete this._updatedLayers[u],delete this._updatedPaintProps[u],h.onRemove&&h.onRemove(this.map)}else this.fire(new o.ErrorEvent(new Error("The layer '"+u+"' does not exist in the map's style and cannot be removed.")))},p.prototype.getLayer=function(u){return this._layers[u]},p.prototype.hasLayer=function(u){return u in this._layers},p.prototype.setLayerZoomRange=function(u,h,g){this._checkLoaded();var b=this.getLayer(u);b?b.minzoom===h&&b.maxzoom===g||(h!=null&&(b.minzoom=h),g!=null&&(b.maxzoom=g),this._updateLayer(b)):this.fire(new o.ErrorEvent(new Error("The layer '"+u+"' does not exist in the map's style and cannot have zoom extent.")))},p.prototype.setFilter=function(u,h,g){g===void 0&&(g={}),this._checkLoaded();var b=this.getLayer(u);if(b){if(!o.deepEqual(b.filter,h))return h==null?(b.filter=void 0,void this._updateLayer(b)):void(this._validate(o.validateStyle.filter,"layers."+b.id+".filter",h,null,g)||(b.filter=o.clone$1(h),this._updateLayer(b)))}else this.fire(new o.ErrorEvent(new Error("The layer '"+u+"' does not exist in the map's style and cannot be filtered.")))},p.prototype.getFilter=function(u){return o.clone$1(this.getLayer(u).filter)},p.prototype.setLayoutProperty=function(u,h,g,b){b===void 0&&(b={}),this._checkLoaded();var w=this.getLayer(u);w?o.deepEqual(w.getLayoutProperty(h),g)||(w.setLayoutProperty(h,g,b),this._updateLayer(w)):this.fire(new o.ErrorEvent(new Error("The layer '"+u+"' does not exist in the map's style and cannot be styled.")))},p.prototype.getLayoutProperty=function(u,h){var g=this.getLayer(u);if(g)return g.getLayoutProperty(h);this.fire(new o.ErrorEvent(new Error("The layer '"+u+"' does not exist in the map's style.")))},p.prototype.setPaintProperty=function(u,h,g,b){b===void 0&&(b={}),this._checkLoaded();var w=this.getLayer(u);w?o.deepEqual(w.getPaintProperty(h),g)||(w.setPaintProperty(h,g,b)&&this._updateLayer(w),this._changed=!0,this._updatedPaintProps[u]=!0):this.fire(new o.ErrorEvent(new Error("The layer '"+u+"' does not exist in the map's style and cannot be styled.")))},p.prototype.getPaintProperty=function(u,h){return this.getLayer(u).getPaintProperty(h)},p.prototype.setFeatureState=function(u,h){this._checkLoaded();var g=u.source,b=u.sourceLayer,w=this.sourceCaches[g];if(w!==void 0){var C=w.getSource().type;C==="geojson"&&b?this.fire(new o.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):C!=="vector"||b?(u.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided."))),w.setFeatureState(b,u.id,h)):this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error("The source '"+g+"' does not exist in the map's style.")))},p.prototype.removeFeatureState=function(u,h){this._checkLoaded();var g=u.source,b=this.sourceCaches[g];if(b!==void 0){var w=b.getSource().type,C=w==="vector"?u.sourceLayer:void 0;w!=="vector"||C?h&&typeof u.id!="string"&&typeof u.id!="number"?this.fire(new o.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):b.removeFeatureState(C,u.id,h):this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error("The source '"+g+"' does not exist in the map's style.")))},p.prototype.getFeatureState=function(u){this._checkLoaded();var h=u.source,g=u.sourceLayer,b=this.sourceCaches[h];if(b!==void 0){if(b.getSource().type!=="vector"||g)return u.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided."))),b.getFeatureState(g,u.id);this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error("The source '"+h+"' does not exist in the map's style.")))},p.prototype.getTransition=function(){return o.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},p.prototype.serialize=function(){return o.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:o.mapObject(this.sourceCaches,function(u){return u.serialize()}),layers:this._serializeLayers(this._order)},function(u){return u!==void 0})},p.prototype._updateLayer=function(u){this._updatedLayers[u.id]=!0,u.source&&!this._updatedSources[u.source]&&this.sourceCaches[u.source].getSource().type!=="raster"&&(this._updatedSources[u.source]="reload",this.sourceCaches[u.source].pause()),this._changed=!0},p.prototype._flattenAndSortRenderedFeatures=function(u){for(var h=this,g=function(tt){return h._layers[tt].type==="fill-extrusion"},b={},w=[],C=this._order.length-1;C>=0;C--){var M=this._order[C];if(g(M)){b[M]=C;for(var N=0,K=u;N<K.length;N+=1){var X=K[N][M];if(X)for(var J=0,ue=X;J<ue.length;J+=1)w.push(ue[J])}}}w.sort(function(tt,et){return et.intersectionZ-tt.intersectionZ});for(var le=[],ge=this._order.length-1;ge>=0;ge--){var oe=this._order[ge];if(g(oe))for(var ye=w.length-1;ye>=0;ye--){var be=w[ye].feature;if(b[be.layer.id]<ge)break;le.push(be),w.pop()}else for(var Ae=0,Ne=u;Ae<Ne.length;Ae+=1){var De=Ne[Ae][oe];if(De)for(var Fe=0,Ke=De;Fe<Ke.length;Fe+=1)le.push(Ke[Fe].feature)}}return le},p.prototype.queryRenderedFeatures=function(u,h,g){h&&h.filter&&this._validate(o.validateStyle.filter,"queryRenderedFeatures.filter",h.filter,null,h);var b={};if(h&&h.layers){if(!Array.isArray(h.layers))return this.fire(new o.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var w=0,C=h.layers;w<C.length;w+=1){var M=C[w],N=this._layers[M];if(!N)return this.fire(new o.ErrorEvent(new Error("The layer '"+M+"' does not exist in the map's style and cannot be queried for features."))),[];b[N.source]=!0}}var K=[];for(var X in h.availableImages=this._availableImages,this.sourceCaches)h.layers&&!b[X]||K.push(Pt(this.sourceCaches[X],this._layers,this._serializedLayers,u,h,g));return this.placement&&K.push(function(J,ue,le,ge,oe,ye,be){for(var Ae={},Ne=ye.queryRenderedSymbols(ge),De=[],Fe=0,Ke=Object.keys(Ne).map(Number);Fe<Ke.length;Fe+=1)De.push(be[Ke[Fe]]);De.sort(Bt);for(var tt=function(){var Mt=dt[et],br=Mt.featureIndex.lookupSymbolFeatures(Ne[Mt.bucketInstanceId],ue,Mt.bucketIndex,Mt.sourceLayerIndex,oe.filter,oe.layers,oe.availableImages,J);for(var yt in br){var Ht=Ae[yt]=Ae[yt]||[],nr=br[yt];nr.sort(function(Qt,jt){var Ft=Mt.featureSortOrder;if(Ft){var Vn=Ft.indexOf(Qt.featureIndex);return Ft.indexOf(jt.featureIndex)-Vn}return jt.featureIndex-Qt.featureIndex});for(var Gt=0,qt=nr;Gt<qt.length;Gt+=1)Ht.push(qt[Gt])}},et=0,dt=De;et<dt.length;et+=1)tt();var Tt=function(Mt){Ae[Mt].forEach(function(br){var yt=br.feature,Ht=le[J[Mt].source].getFeatureState(yt.layer["source-layer"],yt.id);yt.source=yt.layer.source,yt.layer["source-layer"]&&(yt.sourceLayer=yt.layer["source-layer"]),yt.state=Ht})};for(var Rt in Ae)Tt(Rt);return Ae}(this._layers,this._serializedLayers,this.sourceCaches,u,h,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(K)},p.prototype.querySourceFeatures=function(u,h){h&&h.filter&&this._validate(o.validateStyle.filter,"querySourceFeatures.filter",h.filter,null,h);var g=this.sourceCaches[u];return g?function(b,w){for(var C=b.getRenderableIds().map(function(ue){return b.getTileByID(ue)}),M=[],N={},K=0;K<C.length;K++){var X=C[K],J=X.tileID.canonical.key;N[J]||(N[J]=!0,X.querySourceFeatures(M,w))}return M}(g,h):[]},p.prototype.addSourceType=function(u,h,g){return p.getSourceType(u)?g(new Error('A source type called "'+u+'" already exists.')):(p.setSourceType(u,h),h.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:u,url:h.workerSourceURL},g):g(null,null))},p.prototype.getLight=function(){return this.light.getLight()},p.prototype.setLight=function(u,h){h===void 0&&(h={}),this._checkLoaded();var g=this.light.getLight(),b=!1;for(var w in u)if(!o.deepEqual(u[w],g[w])){b=!0;break}if(b){var C={now:o.browser.now(),transition:o.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(u,h),this.light.updateTransitions(C)}},p.prototype._validate=function(u,h,g,b,w){return w===void 0&&(w={}),(!w||w.validate!==!1)&&cs(this,u.call(o.validateStyle,o.extend({key:h,style:this.serialize(),value:g,styleSpec:o.styleSpec},b)))},p.prototype._remove=function(){for(var u in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),o.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[u].setEventedParent(null);for(var h in this.sourceCaches)this.sourceCaches[h].clearTiles(),this.sourceCaches[h].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},p.prototype._clearSource=function(u){this.sourceCaches[u].clearTiles()},p.prototype._reloadSource=function(u){this.sourceCaches[u].resume(),this.sourceCaches[u].reload()},p.prototype._updateSources=function(u){for(var h in this.sourceCaches)this.sourceCaches[h].update(u)},p.prototype._generateCollisionBoxes=function(){for(var u in this.sourceCaches)this._reloadSource(u)},p.prototype._updatePlacement=function(u,h,g,b,w){w===void 0&&(w=!1);for(var C=!1,M=!1,N={},K=0,X=this._order;K<X.length;K+=1){var J=this._layers[X[K]];if(J.type==="symbol"){if(!N[J.source]){var ue=this.sourceCaches[J.source];N[J.source]=ue.getRenderableIds(!0).map(function(be){return ue.getTileByID(be)}).sort(function(be,Ae){return Ae.tileID.overscaledZ-be.tileID.overscaledZ||(be.tileID.isLessThan(Ae.tileID)?-1:1)})}var le=this.crossTileSymbolIndex.addLayer(J,N[J.source],u.center.lng);C=C||le}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((w=w||this._layerOrderChanged||g===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(o.browser.now(),u.zoom))&&(this.pauseablePlacement=new ql(u,this._order,w,h,g,b,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,N),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(o.browser.now()),M=!0),C&&this.pauseablePlacement.placement.setStale()),M||C)for(var ge=0,oe=this._order;ge<oe.length;ge+=1){var ye=this._layers[oe[ge]];ye.type==="symbol"&&this.placement.updateLayerOpacities(ye,N[ye.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(o.browser.now())},p.prototype._releaseSymbolFadeTiles=function(){for(var u in this.sourceCaches)this.sourceCaches[u].releaseSymbolFadeTiles()},p.prototype.getImages=function(u,h,g){this.imageManager.getImages(h.icons,g),this._updateTilesForChangedImages();var b=this.sourceCaches[h.source];b&&b.setDependencies(h.tileID.key,h.type,h.icons)},p.prototype.getGlyphs=function(u,h,g){this.glyphManager.getGlyphs(h.stacks,g)},p.prototype.getResource=function(u,h,g){return o.makeRequest(h,g)},p}(o.Evented);ji.getSourceType=function(l){return qe[l]},ji.setSourceType=function(l,p){qe[l]=p},ji.registerForPluginStateChange=o.registerForPluginStateChange;var Rn=o.createLayout([{name:"a_pos",type:"Int16",components:2}]),Xs=Zr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),Td=Zr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Ov=Zr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Bv=Zr(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),Jp=Zr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Qp=Zr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),ef=Zr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),tf=Zr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Id=Zr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),Pd=Zr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),Nv=Zr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),Wl=Zr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Gl=Zr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Ad=Zr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),li=Zr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),rf=Zr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),Aa=Zr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Ma=Zr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),ps=Zr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),fs=Zr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Ra=Zr(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),hs=Zr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),ds=Zr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),La=Zr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),Md=Zr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),Rd=Zr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function Zr(l,p){var u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,h=p.match(/attribute ([\w]+) ([\w]+)/g),g=l.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),b=p.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),w=b?b.concat(g):g,C={};return{fragmentSource:l=l.replace(u,function(M,N,K,X,J){return C[J]=!0,N==="define"?`
#ifndef HAS_UNIFORM_u_`+J+`
varying `+K+" "+X+" "+J+`;
#else
uniform `+K+" "+X+" u_"+J+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+J+`
    `+K+" "+X+" "+J+" = u_"+J+`;
#endif
`}),vertexSource:p=p.replace(u,function(M,N,K,X,J){var ue=X==="float"?"vec2":"vec4",le=J.match(/color/)?"color":ue;return C[J]?N==="define"?`
#ifndef HAS_UNIFORM_u_`+J+`
uniform lowp float u_`+J+`_t;
attribute `+K+" "+ue+" a_"+J+`;
varying `+K+" "+X+" "+J+`;
#else
uniform `+K+" "+X+" u_"+J+`;
#endif
`:le==="vec4"?`
#ifndef HAS_UNIFORM_u_`+J+`
    `+J+" = a_"+J+`;
#else
    `+K+" "+X+" "+J+" = u_"+J+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+J+`
    `+J+" = unpack_mix_"+le+"(a_"+J+", u_"+J+`_t);
#else
    `+K+" "+X+" "+J+" = u_"+J+`;
#endif
`:N==="define"?`
#ifndef HAS_UNIFORM_u_`+J+`
uniform lowp float u_`+J+`_t;
attribute `+K+" "+ue+" a_"+J+`;
#else
uniform `+K+" "+X+" u_"+J+`;
#endif
`:le==="vec4"?`
#ifndef HAS_UNIFORM_u_`+J+`
    `+K+" "+X+" "+J+" = a_"+J+`;
#else
    `+K+" "+X+" "+J+" = u_"+J+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+J+`
    `+K+" "+X+" "+J+" = unpack_mix_"+le+"(a_"+J+", u_"+J+`_t);
#else
    `+K+" "+X+" "+J+" = u_"+J+`;
#endif
`}),staticAttributes:h,staticUniforms:w}}var Fv=Object.freeze({__proto__:null,prelude:Xs,background:Td,backgroundPattern:Ov,circle:Bv,clippingMask:Jp,heatmap:Qp,heatmapTexture:ef,collisionBox:tf,collisionCircle:Id,debug:Pd,fill:Nv,fillOutline:Wl,fillOutlinePattern:Gl,fillPattern:Ad,fillExtrusion:li,fillExtrusionPattern:rf,hillshadePrepare:Aa,hillshade:Ma,line:ps,lineGradient:fs,linePattern:Ra,lineSDF:hs,raster:ds,symbolIcon:La,symbolSDF:Md,symbolTextAndIcon:Rd}),Zu=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function Ld(l){for(var p=[],u=0;u<l.length;u++)if(l[u]!==null){var h=l[u].split(" ");p.push(h.pop())}return p}Zu.prototype.bind=function(l,p,u,h,g,b,w,C){this.context=l;for(var M=this.boundPaintVertexBuffers.length!==h.length,N=0;!M&&N<h.length;N++)this.boundPaintVertexBuffers[N]!==h[N]&&(M=!0);l.extVertexArrayObject&&this.vao&&this.boundProgram===p&&this.boundLayoutVertexBuffer===u&&!M&&this.boundIndexBuffer===g&&this.boundVertexOffset===b&&this.boundDynamicVertexBuffer===w&&this.boundDynamicVertexBuffer2===C?(l.bindVertexArrayOES.set(this.vao),w&&w.bind(),g&&g.dynamicDraw&&g.bind(),C&&C.bind()):this.freshBind(p,u,h,g,b,w,C)},Zu.prototype.freshBind=function(l,p,u,h,g,b,w){var C,M=l.numAttributes,N=this.context,K=N.gl;if(N.extVertexArrayObject)this.vao&&this.destroy(),this.vao=N.extVertexArrayObject.createVertexArrayOES(),N.bindVertexArrayOES.set(this.vao),C=0,this.boundProgram=l,this.boundLayoutVertexBuffer=p,this.boundPaintVertexBuffers=u,this.boundIndexBuffer=h,this.boundVertexOffset=g,this.boundDynamicVertexBuffer=b,this.boundDynamicVertexBuffer2=w;else{C=N.currentNumAttributes||0;for(var X=M;X<C;X++)K.disableVertexAttribArray(X)}p.enableAttributes(K,l);for(var J=0,ue=u;J<ue.length;J+=1)ue[J].enableAttributes(K,l);b&&b.enableAttributes(K,l),w&&w.enableAttributes(K,l),p.bind(),p.setVertexAttribPointers(K,l,g);for(var le=0,ge=u;le<ge.length;le+=1){var oe=ge[le];oe.bind(),oe.setVertexAttribPointers(K,l,g)}b&&(b.bind(),b.setVertexAttribPointers(K,l,g)),h&&h.bind(),w&&(w.bind(),w.setVertexAttribPointers(K,l,g)),N.currentNumAttributes=M},Zu.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var zd=function(l,p,u,h,g,b){var w=l.gl;this.program=w.createProgram();for(var C=Ld(u.staticAttributes),M=h?h.getBinderAttributes():[],N=C.concat(M),K=u.staticUniforms?Ld(u.staticUniforms):[],X=h?h.getBinderUniforms():[],J=[],ue=0,le=K.concat(X);ue<le.length;ue+=1){var ge=le[ue];J.indexOf(ge)<0&&J.push(ge)}var oe=h?h.defines():[];b&&oe.push("#define OVERDRAW_INSPECTOR;");var ye=oe.concat(Xs.fragmentSource,u.fragmentSource).join(`
`),be=oe.concat(Xs.vertexSource,u.vertexSource).join(`
`),Ae=w.createShader(w.FRAGMENT_SHADER);if(w.isContextLost())this.failedToCreate=!0;else{w.shaderSource(Ae,ye),w.compileShader(Ae),w.attachShader(this.program,Ae);var Ne=w.createShader(w.VERTEX_SHADER);if(w.isContextLost())this.failedToCreate=!0;else{w.shaderSource(Ne,be),w.compileShader(Ne),w.attachShader(this.program,Ne),this.attributes={};var De={};this.numAttributes=N.length;for(var Fe=0;Fe<this.numAttributes;Fe++)N[Fe]&&(w.bindAttribLocation(this.program,Fe,N[Fe]),this.attributes[N[Fe]]=Fe);w.linkProgram(this.program),w.deleteShader(Ne),w.deleteShader(Ae);for(var Ke=0;Ke<J.length;Ke++){var tt=J[Ke];if(tt&&!De[tt]){var et=w.getUniformLocation(this.program,tt);et&&(De[tt]=et)}}this.fixedUniforms=g(l,De),this.binderUniforms=h?h.getUniforms(l,De):[]}}};function Dd(l,p,u){var h=1/sn(u,1,p.transform.tileZoom),g=Math.pow(2,u.tileID.overscaledZ),b=u.tileSize*Math.pow(2,p.transform.tileZoom)/g,w=b*(u.tileID.canonical.x+u.tileID.wrap*g),C=b*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_scale:[h,l.fromScale,l.toScale],u_fade:l.t,u_pixel_coord_upper:[w>>16,C>>16],u_pixel_coord_lower:[65535&w,65535&C]}}zd.prototype.draw=function(l,p,u,h,g,b,w,C,M,N,K,X,J,ue,le,ge){var oe,ye=l.gl;if(!this.failedToCreate){for(var be in l.program.set(this.program),l.setDepthMode(u),l.setStencilMode(h),l.setColorMode(g),l.setCullFace(b),this.fixedUniforms)this.fixedUniforms[be].set(w[be]);ue&&ue.setUniforms(l,this.binderUniforms,X,{zoom:J});for(var Ae=(oe={},oe[ye.LINES]=2,oe[ye.TRIANGLES]=3,oe[ye.LINE_STRIP]=1,oe)[p],Ne=0,De=K.get();Ne<De.length;Ne+=1){var Fe=De[Ne],Ke=Fe.vaos||(Fe.vaos={});(Ke[C]||(Ke[C]=new Zu)).bind(l,this,M,ue?ue.getPaintVertexBuffers():[],N,Fe.vertexOffset,le,ge),ye.drawElements(p,Fe.primitiveLength*Ae,ye.UNSIGNED_SHORT,Fe.primitiveOffset*Ae*2)}}};var Od=function(l,p,u,h){var g=p.style.light,b=g.properties.get("position"),w=[b.x,b.y,b.z],C=o.create$1();g.properties.get("anchor")==="viewport"&&o.fromRotation(C,-p.transform.angle),o.transformMat3(w,w,C);var M=g.properties.get("color");return{u_matrix:l,u_lightpos:w,u_lightintensity:g.properties.get("intensity"),u_lightcolor:[M.r,M.g,M.b],u_vertical_gradient:+u,u_opacity:h}},ms=function(l,p,u,h,g,b,w){return o.extend(Od(l,p,u,h),Dd(b,p,w),{u_height_factor:-Math.pow(2,g.overscaledZ)/w.tileSize/8})},za=function(l){return{u_matrix:l}},ys=function(l,p,u,h){return o.extend(za(l),Dd(u,p,h))},Bd=function(l,p){return{u_matrix:l,u_world:p}},Nd=function(l,p,u,h,g){return o.extend(ys(l,p,u,h),{u_world:g})},nf=function(l,p,u,h){var g,b,w=l.transform;if(h.paint.get("circle-pitch-alignment")==="map"){var C=sn(u,1,w.zoom);g=!0,b=[C,C]}else g=!1,b=w.pixelsToGLUnits;return{u_camera_to_center_distance:w.cameraToCenterDistance,u_scale_with_map:+(h.paint.get("circle-pitch-scale")==="map"),u_matrix:l.translatePosMatrix(p.posMatrix,u,h.paint.get("circle-translate"),h.paint.get("circle-translate-anchor")),u_pitch_with_map:+g,u_device_pixel_ratio:o.browser.devicePixelRatio,u_extrude_scale:b}},gs=function(l,p,u){var h=sn(u,1,p.zoom),g=Math.pow(2,p.zoom-u.tileID.overscaledZ),b=u.tileID.overscaleFactor();return{u_matrix:l,u_camera_to_center_distance:p.cameraToCenterDistance,u_pixels_to_tile_units:h,u_extrude_scale:[p.pixelsToGLUnits[0]/(h*g),p.pixelsToGLUnits[1]/(h*g)],u_overscale_factor:b}},Fd=function(l,p,u){return{u_matrix:l,u_inv_matrix:p,u_camera_to_center_distance:u.cameraToCenterDistance,u_viewport_size:[u.width,u.height]}},vs=function(l,p,u){return u===void 0&&(u=1),{u_matrix:l,u_color:p,u_overlay:0,u_overlay_scale:u}},_s=function(l){return{u_matrix:l}},Ud=function(l,p,u,h){return{u_matrix:l,u_extrude_scale:sn(p,1,u),u_intensity:h}},Hl=function(l,p,u){var h=l.transform;return{u_matrix:$d(l,p,u),u_ratio:1/sn(p,1,h.zoom),u_device_pixel_ratio:o.browser.devicePixelRatio,u_units_to_pixels:[1/h.pixelsToGLUnits[0],1/h.pixelsToGLUnits[1]]}},Jr=function(l,p,u,h){return o.extend(Hl(l,p,u),{u_image:0,u_image_height:h})},Ku=function(l,p,u,h){var g=l.transform,b=Ys(p,g);return{u_matrix:$d(l,p,u),u_texsize:p.imageAtlasTexture.size,u_ratio:1/sn(p,1,g.zoom),u_device_pixel_ratio:o.browser.devicePixelRatio,u_image:0,u_scale:[b,h.fromScale,h.toScale],u_fade:h.t,u_units_to_pixels:[1/g.pixelsToGLUnits[0],1/g.pixelsToGLUnits[1]]}},Uv=function(l,p,u,h,g){var b=l.lineAtlas,w=Ys(p,l.transform),C=u.layout.get("line-cap")==="round",M=b.getDash(h.from,C),N=b.getDash(h.to,C),K=M.width*g.fromScale,X=N.width*g.toScale;return o.extend(Hl(l,p,u),{u_patternscale_a:[w/K,-M.height/2],u_patternscale_b:[w/X,-N.height/2],u_sdfgamma:b.width/(256*Math.min(K,X)*o.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:M.y,u_tex_y_b:N.y,u_mix:g.t})};function Ys(l,p){return 1/sn(l,1,p.tileZoom)}function $d(l,p,u){return l.translatePosMatrix(p.tileID.posMatrix,p,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}var $v=function(l,p,u,h,g){return{u_matrix:l,u_tl_parent:p,u_scale_parent:u,u_buffer_scale:1,u_fade_t:h.mix,u_opacity:h.opacity*g.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:g.paint.get("raster-brightness-min"),u_brightness_high:g.paint.get("raster-brightness-max"),u_saturation_factor:(w=g.paint.get("raster-saturation"),w>0?1-1/(1.001-w):-w),u_contrast_factor:(b=g.paint.get("raster-contrast"),b>0?1/(1-b):1+b),u_spin_weights:jd(g.paint.get("raster-hue-rotate"))};var b,w};function jd(l){l*=Math.PI/180;var p=Math.sin(l),u=Math.cos(l);return[(2*u+1)/3,(-Math.sqrt(3)*p-u+1)/3,(Math.sqrt(3)*p-u+1)/3]}var Xu,Js=function(l,p,u,h,g,b,w,C,M,N){var K=g.transform;return{u_is_size_zoom_constant:+(l==="constant"||l==="source"),u_is_size_feature_constant:+(l==="constant"||l==="camera"),u_size_t:p?p.uSizeT:0,u_size:p?p.uSize:0,u_camera_to_center_distance:K.cameraToCenterDistance,u_pitch:K.pitch/360*2*Math.PI,u_rotate_symbol:+u,u_aspect_ratio:K.width/K.height,u_fade_change:g.options.fadeDuration?g.symbolFadeChange:1,u_matrix:b,u_label_plane_matrix:w,u_coord_matrix:C,u_is_text:+M,u_pitch_with_map:+h,u_texsize:N,u_texture:0}},Zl=function(l,p,u,h,g,b,w,C,M,N,K){var X=g.transform;return o.extend(Js(l,p,u,h,g,b,w,C,M,N),{u_gamma_scale:h?Math.cos(X._pitch)*X.cameraToCenterDistance:1,u_device_pixel_ratio:o.browser.devicePixelRatio,u_is_halo:+K})},Yu=function(l,p,u,h,g,b,w,C,M,N){return o.extend(Zl(l,p,u,h,g,b,w,C,!0,M,!0),{u_texsize_icon:N,u_texture_icon:1})},Kl=function(l,p,u){return{u_matrix:l,u_opacity:p,u_color:u}},Qs=function(l,p,u,h,g,b){return o.extend(function(w,C,M,N){var K=M.imageManager.getPattern(w.from.toString()),X=M.imageManager.getPattern(w.to.toString()),J=M.imageManager.getPixelSize(),ue=J.width,le=J.height,ge=Math.pow(2,N.tileID.overscaledZ),oe=N.tileSize*Math.pow(2,M.transform.tileZoom)/ge,ye=oe*(N.tileID.canonical.x+N.tileID.wrap*ge),be=oe*N.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:K.tl,u_pattern_br_a:K.br,u_pattern_tl_b:X.tl,u_pattern_br_b:X.br,u_texsize:[ue,le],u_mix:C.t,u_pattern_size_a:K.displaySize,u_pattern_size_b:X.displaySize,u_scale_a:C.fromScale,u_scale_b:C.toScale,u_tile_units_to_pixels:1/sn(N,1,M.transform.tileZoom),u_pixel_coord_upper:[ye>>16,be>>16],u_pixel_coord_lower:[65535&ye,65535&be]}}(h,b,u,g),{u_matrix:l,u_opacity:p})},Vd={fillExtrusion:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_lightpos:new o.Uniform3f(l,p.u_lightpos),u_lightintensity:new o.Uniform1f(l,p.u_lightintensity),u_lightcolor:new o.Uniform3f(l,p.u_lightcolor),u_vertical_gradient:new o.Uniform1f(l,p.u_vertical_gradient),u_opacity:new o.Uniform1f(l,p.u_opacity)}},fillExtrusionPattern:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_lightpos:new o.Uniform3f(l,p.u_lightpos),u_lightintensity:new o.Uniform1f(l,p.u_lightintensity),u_lightcolor:new o.Uniform3f(l,p.u_lightcolor),u_vertical_gradient:new o.Uniform1f(l,p.u_vertical_gradient),u_height_factor:new o.Uniform1f(l,p.u_height_factor),u_image:new o.Uniform1i(l,p.u_image),u_texsize:new o.Uniform2f(l,p.u_texsize),u_pixel_coord_upper:new o.Uniform2f(l,p.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(l,p.u_pixel_coord_lower),u_scale:new o.Uniform3f(l,p.u_scale),u_fade:new o.Uniform1f(l,p.u_fade),u_opacity:new o.Uniform1f(l,p.u_opacity)}},fill:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix)}},fillPattern:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_image:new o.Uniform1i(l,p.u_image),u_texsize:new o.Uniform2f(l,p.u_texsize),u_pixel_coord_upper:new o.Uniform2f(l,p.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(l,p.u_pixel_coord_lower),u_scale:new o.Uniform3f(l,p.u_scale),u_fade:new o.Uniform1f(l,p.u_fade)}},fillOutline:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_world:new o.Uniform2f(l,p.u_world)}},fillOutlinePattern:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_world:new o.Uniform2f(l,p.u_world),u_image:new o.Uniform1i(l,p.u_image),u_texsize:new o.Uniform2f(l,p.u_texsize),u_pixel_coord_upper:new o.Uniform2f(l,p.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(l,p.u_pixel_coord_lower),u_scale:new o.Uniform3f(l,p.u_scale),u_fade:new o.Uniform1f(l,p.u_fade)}},circle:function(l,p){return{u_camera_to_center_distance:new o.Uniform1f(l,p.u_camera_to_center_distance),u_scale_with_map:new o.Uniform1i(l,p.u_scale_with_map),u_pitch_with_map:new o.Uniform1i(l,p.u_pitch_with_map),u_extrude_scale:new o.Uniform2f(l,p.u_extrude_scale),u_device_pixel_ratio:new o.Uniform1f(l,p.u_device_pixel_ratio),u_matrix:new o.UniformMatrix4f(l,p.u_matrix)}},collisionBox:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_camera_to_center_distance:new o.Uniform1f(l,p.u_camera_to_center_distance),u_pixels_to_tile_units:new o.Uniform1f(l,p.u_pixels_to_tile_units),u_extrude_scale:new o.Uniform2f(l,p.u_extrude_scale),u_overscale_factor:new o.Uniform1f(l,p.u_overscale_factor)}},collisionCircle:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_inv_matrix:new o.UniformMatrix4f(l,p.u_inv_matrix),u_camera_to_center_distance:new o.Uniform1f(l,p.u_camera_to_center_distance),u_viewport_size:new o.Uniform2f(l,p.u_viewport_size)}},debug:function(l,p){return{u_color:new o.UniformColor(l,p.u_color),u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_overlay:new o.Uniform1i(l,p.u_overlay),u_overlay_scale:new o.Uniform1f(l,p.u_overlay_scale)}},clippingMask:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix)}},heatmap:function(l,p){return{u_extrude_scale:new o.Uniform1f(l,p.u_extrude_scale),u_intensity:new o.Uniform1f(l,p.u_intensity),u_matrix:new o.UniformMatrix4f(l,p.u_matrix)}},heatmapTexture:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_world:new o.Uniform2f(l,p.u_world),u_image:new o.Uniform1i(l,p.u_image),u_color_ramp:new o.Uniform1i(l,p.u_color_ramp),u_opacity:new o.Uniform1f(l,p.u_opacity)}},hillshade:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_image:new o.Uniform1i(l,p.u_image),u_latrange:new o.Uniform2f(l,p.u_latrange),u_light:new o.Uniform2f(l,p.u_light),u_shadow:new o.UniformColor(l,p.u_shadow),u_highlight:new o.UniformColor(l,p.u_highlight),u_accent:new o.UniformColor(l,p.u_accent)}},hillshadePrepare:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_image:new o.Uniform1i(l,p.u_image),u_dimension:new o.Uniform2f(l,p.u_dimension),u_zoom:new o.Uniform1f(l,p.u_zoom),u_unpack:new o.Uniform4f(l,p.u_unpack)}},line:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_ratio:new o.Uniform1f(l,p.u_ratio),u_device_pixel_ratio:new o.Uniform1f(l,p.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(l,p.u_units_to_pixels)}},lineGradient:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_ratio:new o.Uniform1f(l,p.u_ratio),u_device_pixel_ratio:new o.Uniform1f(l,p.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(l,p.u_units_to_pixels),u_image:new o.Uniform1i(l,p.u_image),u_image_height:new o.Uniform1f(l,p.u_image_height)}},linePattern:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_texsize:new o.Uniform2f(l,p.u_texsize),u_ratio:new o.Uniform1f(l,p.u_ratio),u_device_pixel_ratio:new o.Uniform1f(l,p.u_device_pixel_ratio),u_image:new o.Uniform1i(l,p.u_image),u_units_to_pixels:new o.Uniform2f(l,p.u_units_to_pixels),u_scale:new o.Uniform3f(l,p.u_scale),u_fade:new o.Uniform1f(l,p.u_fade)}},lineSDF:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_ratio:new o.Uniform1f(l,p.u_ratio),u_device_pixel_ratio:new o.Uniform1f(l,p.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(l,p.u_units_to_pixels),u_patternscale_a:new o.Uniform2f(l,p.u_patternscale_a),u_patternscale_b:new o.Uniform2f(l,p.u_patternscale_b),u_sdfgamma:new o.Uniform1f(l,p.u_sdfgamma),u_image:new o.Uniform1i(l,p.u_image),u_tex_y_a:new o.Uniform1f(l,p.u_tex_y_a),u_tex_y_b:new o.Uniform1f(l,p.u_tex_y_b),u_mix:new o.Uniform1f(l,p.u_mix)}},raster:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_tl_parent:new o.Uniform2f(l,p.u_tl_parent),u_scale_parent:new o.Uniform1f(l,p.u_scale_parent),u_buffer_scale:new o.Uniform1f(l,p.u_buffer_scale),u_fade_t:new o.Uniform1f(l,p.u_fade_t),u_opacity:new o.Uniform1f(l,p.u_opacity),u_image0:new o.Uniform1i(l,p.u_image0),u_image1:new o.Uniform1i(l,p.u_image1),u_brightness_low:new o.Uniform1f(l,p.u_brightness_low),u_brightness_high:new o.Uniform1f(l,p.u_brightness_high),u_saturation_factor:new o.Uniform1f(l,p.u_saturation_factor),u_contrast_factor:new o.Uniform1f(l,p.u_contrast_factor),u_spin_weights:new o.Uniform3f(l,p.u_spin_weights)}},symbolIcon:function(l,p){return{u_is_size_zoom_constant:new o.Uniform1i(l,p.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(l,p.u_is_size_feature_constant),u_size_t:new o.Uniform1f(l,p.u_size_t),u_size:new o.Uniform1f(l,p.u_size),u_camera_to_center_distance:new o.Uniform1f(l,p.u_camera_to_center_distance),u_pitch:new o.Uniform1f(l,p.u_pitch),u_rotate_symbol:new o.Uniform1i(l,p.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(l,p.u_aspect_ratio),u_fade_change:new o.Uniform1f(l,p.u_fade_change),u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(l,p.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(l,p.u_coord_matrix),u_is_text:new o.Uniform1i(l,p.u_is_text),u_pitch_with_map:new o.Uniform1i(l,p.u_pitch_with_map),u_texsize:new o.Uniform2f(l,p.u_texsize),u_texture:new o.Uniform1i(l,p.u_texture)}},symbolSDF:function(l,p){return{u_is_size_zoom_constant:new o.Uniform1i(l,p.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(l,p.u_is_size_feature_constant),u_size_t:new o.Uniform1f(l,p.u_size_t),u_size:new o.Uniform1f(l,p.u_size),u_camera_to_center_distance:new o.Uniform1f(l,p.u_camera_to_center_distance),u_pitch:new o.Uniform1f(l,p.u_pitch),u_rotate_symbol:new o.Uniform1i(l,p.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(l,p.u_aspect_ratio),u_fade_change:new o.Uniform1f(l,p.u_fade_change),u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(l,p.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(l,p.u_coord_matrix),u_is_text:new o.Uniform1i(l,p.u_is_text),u_pitch_with_map:new o.Uniform1i(l,p.u_pitch_with_map),u_texsize:new o.Uniform2f(l,p.u_texsize),u_texture:new o.Uniform1i(l,p.u_texture),u_gamma_scale:new o.Uniform1f(l,p.u_gamma_scale),u_device_pixel_ratio:new o.Uniform1f(l,p.u_device_pixel_ratio),u_is_halo:new o.Uniform1i(l,p.u_is_halo)}},symbolTextAndIcon:function(l,p){return{u_is_size_zoom_constant:new o.Uniform1i(l,p.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(l,p.u_is_size_feature_constant),u_size_t:new o.Uniform1f(l,p.u_size_t),u_size:new o.Uniform1f(l,p.u_size),u_camera_to_center_distance:new o.Uniform1f(l,p.u_camera_to_center_distance),u_pitch:new o.Uniform1f(l,p.u_pitch),u_rotate_symbol:new o.Uniform1i(l,p.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(l,p.u_aspect_ratio),u_fade_change:new o.Uniform1f(l,p.u_fade_change),u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(l,p.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(l,p.u_coord_matrix),u_is_text:new o.Uniform1i(l,p.u_is_text),u_pitch_with_map:new o.Uniform1i(l,p.u_pitch_with_map),u_texsize:new o.Uniform2f(l,p.u_texsize),u_texsize_icon:new o.Uniform2f(l,p.u_texsize_icon),u_texture:new o.Uniform1i(l,p.u_texture),u_texture_icon:new o.Uniform1i(l,p.u_texture_icon),u_gamma_scale:new o.Uniform1f(l,p.u_gamma_scale),u_device_pixel_ratio:new o.Uniform1f(l,p.u_device_pixel_ratio),u_is_halo:new o.Uniform1i(l,p.u_is_halo)}},background:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_opacity:new o.Uniform1f(l,p.u_opacity),u_color:new o.UniformColor(l,p.u_color)}},backgroundPattern:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_opacity:new o.Uniform1f(l,p.u_opacity),u_image:new o.Uniform1i(l,p.u_image),u_pattern_tl_a:new o.Uniform2f(l,p.u_pattern_tl_a),u_pattern_br_a:new o.Uniform2f(l,p.u_pattern_br_a),u_pattern_tl_b:new o.Uniform2f(l,p.u_pattern_tl_b),u_pattern_br_b:new o.Uniform2f(l,p.u_pattern_br_b),u_texsize:new o.Uniform2f(l,p.u_texsize),u_mix:new o.Uniform1f(l,p.u_mix),u_pattern_size_a:new o.Uniform2f(l,p.u_pattern_size_a),u_pattern_size_b:new o.Uniform2f(l,p.u_pattern_size_b),u_scale_a:new o.Uniform1f(l,p.u_scale_a),u_scale_b:new o.Uniform1f(l,p.u_scale_b),u_pixel_coord_upper:new o.Uniform2f(l,p.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(l,p.u_pixel_coord_lower),u_tile_units_to_pixels:new o.Uniform1f(l,p.u_tile_units_to_pixels)}}};function el(l,p,u,h,g,b,w){for(var C=l.context,M=C.gl,N=l.useProgram("collisionBox"),K=[],X=0,J=0,ue=0;ue<h.length;ue++){var le=h[ue],ge=p.getTile(le),oe=ge.getBucket(u);if(oe){var ye=le.posMatrix;g[0]===0&&g[1]===0||(ye=l.translatePosMatrix(le.posMatrix,ge,g,b));var be=w?oe.textCollisionBox:oe.iconCollisionBox,Ae=oe.collisionCircleArray;if(Ae.length>0){var Ne=o.create(),De=ye;o.mul(Ne,oe.placementInvProjMatrix,l.transform.glCoordMatrix),o.mul(Ne,Ne,oe.placementViewportMatrix),K.push({circleArray:Ae,circleOffset:J,transform:De,invTransform:Ne}),J=X+=Ae.length/4}be&&N.draw(C,M.LINES,Y.disabled,te.disabled,l.colorModeForRenderPass(),me.disabled,gs(ye,l.transform,ge),u.id,be.layoutVertexBuffer,be.indexBuffer,be.segments,null,l.transform.zoom,null,null,be.collisionVertexBuffer)}}if(w&&K.length){var Fe=l.useProgram("collisionCircle"),Ke=new o.StructArrayLayout2f1f2i16;Ke.resize(4*X),Ke._trim();for(var tt=0,et=0,dt=K;et<dt.length;et+=1)for(var Tt=dt[et],Rt=0;Rt<Tt.circleArray.length/4;Rt++){var Mt=4*Rt,br=Tt.circleArray[Mt+0],yt=Tt.circleArray[Mt+1],Ht=Tt.circleArray[Mt+2],nr=Tt.circleArray[Mt+3];Ke.emplace(tt++,br,yt,Ht,nr,0),Ke.emplace(tt++,br,yt,Ht,nr,1),Ke.emplace(tt++,br,yt,Ht,nr,2),Ke.emplace(tt++,br,yt,Ht,nr,3)}(!Xu||Xu.length<2*X)&&(Xu=function(vn){var hi=2*vn,ei=new o.StructArrayLayout3ui6;ei.resize(hi),ei._trim();for(var mn=0;mn<hi;mn++){var kn=6*mn;ei.uint16[kn+0]=4*mn+0,ei.uint16[kn+1]=4*mn+1,ei.uint16[kn+2]=4*mn+2,ei.uint16[kn+3]=4*mn+2,ei.uint16[kn+4]=4*mn+3,ei.uint16[kn+5]=4*mn+0}return ei}(X));for(var Gt=C.createIndexBuffer(Xu,!0),qt=C.createVertexBuffer(Ke,o.collisionCircleLayout.members,!0),Qt=0,jt=K;Qt<jt.length;Qt+=1){var Ft=jt[Qt],Vn=Fd(Ft.transform,Ft.invTransform,l.transform);Fe.draw(C,M.TRIANGLES,Y.disabled,te.disabled,l.colorModeForRenderPass(),me.disabled,Vn,u.id,qt,Gt,o.SegmentVector.simpleSegment(0,2*Ft.circleOffset,Ft.circleArray.length,Ft.circleArray.length/2),null,l.transform.zoom,null,null,null)}qt.destroy(),Gt.destroy()}}var Ro=o.identity(new Float32Array(16));function qd(l,p,u,h,g,b){var w=o.getAnchorAlignment(l),C=-(w.horizontalAlign-.5)*p,M=-(w.verticalAlign-.5)*u,N=o.evaluateVariableOffset(l,h);return new o.Point((C/g+N[0])*b,(M/g+N[1])*b)}function Wd(l,p,u,h,g,b,w,C,M,N,K){var X=l.text.placedSymbolArray,J=l.text.dynamicLayoutVertexArray,ue=l.icon.dynamicLayoutVertexArray,le={};J.clear();for(var ge=0;ge<X.length;ge++){var oe=X.get(ge),ye=oe.hidden||!oe.crossTileID||l.allowVerticalPlacement&&!oe.placedOrientation?null:h[oe.crossTileID];if(ye){var be=new o.Point(oe.anchorX,oe.anchorY),Ae=mr(be,u?C:w),Ne=Ar(b.cameraToCenterDistance,Ae.signedDistanceFromCamera),De=g.evaluateSizeForFeature(l.textSizeData,N,oe)*Ne/o.ONE_EM;u&&(De*=l.tilePixelRatio/M);for(var Fe=qd(ye.anchor,ye.width,ye.height,ye.textOffset,ye.textBoxScale,De),Ke=u?mr(be.add(Fe),w).point:Ae.point.add(p?Fe.rotate(-b.angle):Fe),tt=l.allowVerticalPlacement&&oe.placedOrientation===o.WritingMode.vertical?Math.PI/2:0,et=0;et<oe.numGlyphs;et++)o.addDynamicAttributes(J,Ke,tt);K&&oe.associatedIconIndex>=0&&(le[oe.associatedIconIndex]={shiftedAnchor:Ke,angle:tt})}else vi(oe.numGlyphs,J)}if(K){ue.clear();for(var dt=l.icon.placedSymbolArray,Tt=0;Tt<dt.length;Tt++){var Rt=dt.get(Tt);if(Rt.hidden)vi(Rt.numGlyphs,ue);else{var Mt=le[Tt];if(Mt)for(var br=0;br<Rt.numGlyphs;br++)o.addDynamicAttributes(ue,Mt.shiftedAnchor,Mt.angle);else vi(Rt.numGlyphs,ue)}}l.icon.dynamicLayoutVertexBuffer.updateData(ue)}l.text.dynamicLayoutVertexBuffer.updateData(J)}function Gd(l,p,u){return u.iconsInText&&p?"symbolTextAndIcon":l?"symbolSDF":"symbolIcon"}function xs(l,p,u,h,g,b,w,C,M,N,K,X){for(var J=l.context,ue=J.gl,le=l.transform,ge=C==="map",oe=M==="map",ye=ge&&u.layout.get("symbol-placement")!=="point",be=ge&&!oe&&!ye,Ae=u.layout.get("symbol-sort-key").constantOr(1)!==void 0,Ne=!1,De=l.depthModeForSublayer(0,Y.ReadOnly),Fe=u.layout.get("text-variable-anchor"),Ke=[],tt=0,et=h;tt<et.length;tt+=1){var dt=et[tt],Tt=p.getTile(dt),Rt=Tt.getBucket(u);if(Rt){var Mt=g?Rt.text:Rt.icon;if(Mt&&Mt.segments.get().length){var br=Mt.programConfigurations.get(u.id),yt=g||Rt.sdfIcons,Ht=g?Rt.textSizeData:Rt.iconSizeData,nr=oe||le.pitch!==0,Gt=l.useProgram(Gd(yt,g,Rt),br),qt=o.evaluateSizeForZoom(Ht,le.zoom),Qt=void 0,jt=[0,0],Ft=void 0,Vn=void 0,vn=null,hi=void 0;if(g)Ft=Tt.glyphAtlasTexture,Vn=ue.LINEAR,Qt=Tt.glyphAtlasTexture.size,Rt.iconsInText&&(jt=Tt.imageAtlasTexture.size,vn=Tt.imageAtlasTexture,hi=nr||l.options.rotating||l.options.zooming||Ht.kind==="composite"||Ht.kind==="camera"?ue.LINEAR:ue.NEAREST);else{var ei=u.layout.get("icon-size").constantOr(0)!==1||Rt.iconsNeedLinear;Ft=Tt.imageAtlasTexture,Vn=yt||l.options.rotating||l.options.zooming||ei||nr?ue.LINEAR:ue.NEAREST,Qt=Tt.imageAtlasTexture.size}var mn=sn(Tt,1,l.transform.zoom),kn=En(dt.posMatrix,oe,ge,l.transform,mn),Zi=Wr(dt.posMatrix,oe,ge,l.transform,mn),wi=Fe&&Rt.hasTextData(),Ua=u.layout.get("icon-text-fit")!=="none"&&wi&&Rt.hasIconData();ye&&$l(Rt,dt.posMatrix,l,g,kn,Zi,oe,N);var Mi=l.translatePosMatrix(dt.posMatrix,Tt,b,w),Bo=ye||g&&Fe||Ua?Ro:kn,go=l.translatePosMatrix(Zi,Tt,b,w,!0),su=yt&&u.paint.get(g?"text-halo-width":"icon-halo-width").constantOr(1)!==0,al={program:Gt,buffers:Mt,uniformValues:yt?Rt.iconsInText?Yu(Ht.kind,qt,be,oe,l,Mi,Bo,go,Qt,jt):Zl(Ht.kind,qt,be,oe,l,Mi,Bo,go,g,Qt,!0):Js(Ht.kind,qt,be,oe,l,Mi,Bo,go,g,Qt),atlasTexture:Ft,atlasTextureIcon:vn,atlasInterpolation:Vn,atlasInterpolationIcon:hi,isSDF:yt,hasHalo:su};if(Ae&&Rt.canOverlap){Ne=!0;for(var $a=0,sl=Mt.segments.get();$a<sl.length;$a+=1){var lu=sl[$a];Ke.push({segments:new o.SegmentVector([lu]),sortKey:lu.sortKey,state:al})}}else Ke.push({segments:Mt.segments,sortKey:0,state:al})}}}Ne&&Ke.sort(function(ja,ks){return ja.sortKey-ks.sortKey});for(var Yo=0,uu=Ke;Yo<uu.length;Yo+=1){var Jo=uu[Yo],qn=Jo.state;if(J.activeTexture.set(ue.TEXTURE0),qn.atlasTexture.bind(qn.atlasInterpolation,ue.CLAMP_TO_EDGE),qn.atlasTextureIcon&&(J.activeTexture.set(ue.TEXTURE1),qn.atlasTextureIcon&&qn.atlasTextureIcon.bind(qn.atlasInterpolationIcon,ue.CLAMP_TO_EDGE)),qn.isSDF){var da=qn.uniformValues;qn.hasHalo&&(da.u_is_halo=1,Xl(qn.buffers,Jo.segments,u,l,qn.program,De,K,X,da)),da.u_is_halo=0}Xl(qn.buffers,Jo.segments,u,l,qn.program,De,K,X,qn.uniformValues)}}function Xl(l,p,u,h,g,b,w,C,M){var N=h.context;g.draw(N,N.gl.TRIANGLES,b,w,C,me.disabled,M,u.id,l.layoutVertexBuffer,l.indexBuffer,p,u.paint,h.transform.zoom,l.programConfigurations.get(u.id),l.dynamicLayoutVertexBuffer,l.opacityVertexBuffer)}function Ju(l,p,u,h,g,b,w){var C,M,N,K,X,J=l.context.gl,ue=u.paint.get("fill-pattern"),le=ue&&ue.constantOr(1),ge=u.getCrossfadeParameters();w?(M=le&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",C=J.LINES):(M=le?"fillPattern":"fill",C=J.TRIANGLES);for(var oe=0,ye=h;oe<ye.length;oe+=1){var be=ye[oe],Ae=p.getTile(be);if(!le||Ae.patternsLoaded()){var Ne=Ae.getBucket(u);if(Ne){var De=Ne.programConfigurations.get(u.id),Fe=l.useProgram(M,De);le&&(l.context.activeTexture.set(J.TEXTURE0),Ae.imageAtlasTexture.bind(J.LINEAR,J.CLAMP_TO_EDGE),De.updatePaintBuffers(ge));var Ke=ue.constantOr(null);if(Ke&&Ae.imageAtlas){var tt=Ae.imageAtlas,et=tt.patternPositions[Ke.to.toString()],dt=tt.patternPositions[Ke.from.toString()];et&&dt&&De.setConstantPatternPositions(et,dt)}var Tt=l.translatePosMatrix(be.posMatrix,Ae,u.paint.get("fill-translate"),u.paint.get("fill-translate-anchor"));if(w){K=Ne.indexBuffer2,X=Ne.segments2;var Rt=[J.drawingBufferWidth,J.drawingBufferHeight];N=M==="fillOutlinePattern"&&le?Nd(Tt,l,ge,Ae,Rt):Bd(Tt,Rt)}else K=Ne.indexBuffer,X=Ne.segments,N=le?ys(Tt,l,ge,Ae):za(Tt);Fe.draw(l.context,C,g,l.stencilModeForClipping(be),b,me.disabled,N,u.id,Ne.layoutVertexBuffer,K,X,u.paint,l.transform.zoom,De)}}}}function of(l,p,u,h,g,b,w){for(var C=l.context,M=C.gl,N=u.paint.get("fill-extrusion-pattern"),K=N.constantOr(1),X=u.getCrossfadeParameters(),J=u.paint.get("fill-extrusion-opacity"),ue=0,le=h;ue<le.length;ue+=1){var ge=le[ue],oe=p.getTile(ge),ye=oe.getBucket(u);if(ye){var be=ye.programConfigurations.get(u.id),Ae=l.useProgram(K?"fillExtrusionPattern":"fillExtrusion",be);K&&(l.context.activeTexture.set(M.TEXTURE0),oe.imageAtlasTexture.bind(M.LINEAR,M.CLAMP_TO_EDGE),be.updatePaintBuffers(X));var Ne=N.constantOr(null);if(Ne&&oe.imageAtlas){var De=oe.imageAtlas,Fe=De.patternPositions[Ne.to.toString()],Ke=De.patternPositions[Ne.from.toString()];Fe&&Ke&&be.setConstantPatternPositions(Fe,Ke)}var tt=l.translatePosMatrix(ge.posMatrix,oe,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),et=u.paint.get("fill-extrusion-vertical-gradient"),dt=K?ms(tt,l,et,J,ge,X,oe):Od(tt,l,et,J);Ae.draw(C,C.gl.TRIANGLES,g,b,w,me.backCCW,dt,u.id,ye.layoutVertexBuffer,ye.indexBuffer,ye.segments,u.paint,l.transform.zoom,be)}}}function Qu(l,p,u,h,g,b){var w=l.context,C=w.gl,M=p.fbo;if(M){var N=l.useProgram("hillshade");w.activeTexture.set(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,M.colorAttachment.get());var K=function(X,J,ue){var le=ue.paint.get("hillshade-shadow-color"),ge=ue.paint.get("hillshade-highlight-color"),oe=ue.paint.get("hillshade-accent-color"),ye=ue.paint.get("hillshade-illumination-direction")*(Math.PI/180);ue.paint.get("hillshade-illumination-anchor")==="viewport"&&(ye-=X.transform.angle);var be,Ae,Ne,De=!X.options.moving;return{u_matrix:X.transform.calculatePosMatrix(J.tileID.toUnwrapped(),De),u_image:0,u_latrange:(be=J.tileID,Ae=Math.pow(2,be.canonical.z),Ne=be.canonical.y,[new o.MercatorCoordinate(0,Ne/Ae).toLngLat().lat,new o.MercatorCoordinate(0,(Ne+1)/Ae).toLngLat().lat]),u_light:[ue.paint.get("hillshade-exaggeration"),ye],u_shadow:le,u_highlight:ge,u_accent:oe}}(l,p,u);N.draw(w,C.TRIANGLES,h,g,b,me.disabled,K,u.id,l.rasterBoundsBuffer,l.quadTriangleIndexBuffer,l.rasterBoundsSegments)}}function jv(l,p,u,h,g,b){var w=l.context,C=w.gl,M=p.dem;if(M&&M.data){var N=M.dim,K=M.stride,X=M.getPixels();if(w.activeTexture.set(C.TEXTURE1),w.pixelStoreUnpackPremultiplyAlpha.set(!1),p.demTexture=p.demTexture||l.getTileTexture(K),p.demTexture){var J=p.demTexture;J.update(X,{premultiply:!1}),J.bind(C.NEAREST,C.CLAMP_TO_EDGE)}else p.demTexture=new o.Texture(w,X,C.RGBA,{premultiply:!1}),p.demTexture.bind(C.NEAREST,C.CLAMP_TO_EDGE);w.activeTexture.set(C.TEXTURE0);var ue=p.fbo;if(!ue){var le=new o.Texture(w,{width:N,height:N,data:null},C.RGBA);le.bind(C.LINEAR,C.CLAMP_TO_EDGE),(ue=p.fbo=w.createFramebuffer(N,N,!0)).colorAttachment.set(le.texture)}w.bindFramebuffer.set(ue.framebuffer),w.viewport.set([0,0,N,N]),l.useProgram("hillshadePrepare").draw(w,C.TRIANGLES,h,g,b,me.disabled,function(ge,oe){var ye=oe.stride,be=o.create();return o.ortho(be,0,o.EXTENT,-o.EXTENT,0,0,1),o.translate(be,be,[0,-o.EXTENT,0]),{u_matrix:be,u_image:1,u_dimension:[ye,ye],u_zoom:ge.overscaledZ,u_unpack:oe.getUnpackVector()}}(p.tileID,M),u.id,l.rasterBoundsBuffer,l.quadTriangleIndexBuffer,l.rasterBoundsSegments),p.needsHillshadePrepare=!1}}function ec(l,p,u,h,g){var b=h.paint.get("raster-fade-duration");if(b>0){var w=o.browser.now(),C=(w-l.timeAdded)/b,M=p?(w-p.timeAdded)/b:-1,N=u.getSource(),K=g.coveringZoomLevel({tileSize:N.tileSize,roundZoom:N.roundZoom}),X=!p||Math.abs(p.tileID.overscaledZ-K)>Math.abs(l.tileID.overscaledZ-K),J=X&&l.refreshedUponExpiration?1:o.clamp(X?C:1-M,0,1);return l.refreshedUponExpiration&&C>=1&&(l.refreshedUponExpiration=!1),p?{opacity:1,mix:1-J}:{opacity:J,mix:0}}return{opacity:1,mix:0}}var af=new o.Color(1,0,0,1),Hd=new o.Color(0,1,0,1),Zd=new o.Color(0,0,1,1),tc=new o.Color(1,0,1,1),sf=new o.Color(0,1,1,1);function lf(l,p,u,h){Yl(l,0,p+u/2,l.transform.width,u,h)}function uf(l,p,u,h){Yl(l,p-u/2,0,u,l.transform.height,h)}function Yl(l,p,u,h,g,b){var w=l.context,C=w.gl;C.enable(C.SCISSOR_TEST),C.scissor(p*o.browser.devicePixelRatio,u*o.browser.devicePixelRatio,h*o.browser.devicePixelRatio,g*o.browser.devicePixelRatio),w.clear({color:b}),C.disable(C.SCISSOR_TEST)}function Kd(l,p,u){var h=l.context,g=h.gl,b=u.posMatrix,w=l.useProgram("debug"),C=Y.disabled,M=te.disabled,N=l.colorModeForRenderPass();h.activeTexture.set(g.TEXTURE0),l.emptyTexture.bind(g.LINEAR,g.CLAMP_TO_EDGE),w.draw(h,g.LINE_STRIP,C,M,N,me.disabled,vs(b,o.Color.red),"$debug",l.debugBuffer,l.tileBorderIndexBuffer,l.debugSegments);var K=p.getTileByID(u.key).latestRawTileData,X=Math.floor((K&&K.byteLength||0)/1024),J=p.getTile(u).tileSize,ue=512/Math.min(J,512)*(u.overscaledZ/l.transform.zoom)*.5,le=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(le+=" => "+u.overscaledZ),function(ge,oe){ge.initDebugOverlayCanvas();var ye=ge.debugOverlayCanvas,be=ge.context.gl,Ae=ge.debugOverlayCanvas.getContext("2d");Ae.clearRect(0,0,ye.width,ye.height),Ae.shadowColor="white",Ae.shadowBlur=2,Ae.lineWidth=1.5,Ae.strokeStyle="white",Ae.textBaseline="top",Ae.font="bold 36px Open Sans, sans-serif",Ae.fillText(oe,5,5),Ae.strokeText(oe,5,5),ge.debugOverlayTexture.update(ye),ge.debugOverlayTexture.bind(be.LINEAR,be.CLAMP_TO_EDGE)}(l,le+" "+X+"kb"),w.draw(h,g.TRIANGLES,C,M,de.alphaBlended,me.disabled,vs(b,o.Color.transparent,ue),"$debug",l.debugBuffer,l.quadTriangleIndexBuffer,l.debugSegments)}var bs={symbol:function(l,p,u,h,g){if(l.renderPass==="translucent"){var b=te.disabled,w=l.colorModeForRenderPass();u.layout.get("text-variable-anchor")&&function(C,M,N,K,X,J,ue){for(var le=M.transform,ge=X==="map",oe=J==="map",ye=0,be=C;ye<be.length;ye+=1){var Ae=be[ye],Ne=K.getTile(Ae),De=Ne.getBucket(N);if(De&&De.text&&De.text.segments.get().length){var Fe=o.evaluateSizeForZoom(De.textSizeData,le.zoom),Ke=sn(Ne,1,M.transform.zoom),tt=En(Ae.posMatrix,oe,ge,M.transform,Ke),et=N.layout.get("icon-text-fit")!=="none"&&De.hasIconData();if(Fe){var dt=Math.pow(2,le.zoom-Ne.tileID.overscaledZ);Wd(De,ge,oe,ue,o.symbolSize,le,tt,Ae.posMatrix,dt,Fe,et)}}}}(h,l,u,p,u.layout.get("text-rotation-alignment"),u.layout.get("text-pitch-alignment"),g),u.paint.get("icon-opacity").constantOr(1)!==0&&xs(l,p,u,h,!1,u.paint.get("icon-translate"),u.paint.get("icon-translate-anchor"),u.layout.get("icon-rotation-alignment"),u.layout.get("icon-pitch-alignment"),u.layout.get("icon-keep-upright"),b,w),u.paint.get("text-opacity").constantOr(1)!==0&&xs(l,p,u,h,!0,u.paint.get("text-translate"),u.paint.get("text-translate-anchor"),u.layout.get("text-rotation-alignment"),u.layout.get("text-pitch-alignment"),u.layout.get("text-keep-upright"),b,w),p.map.showCollisionBoxes&&(el(l,p,u,h,u.paint.get("text-translate"),u.paint.get("text-translate-anchor"),!0),el(l,p,u,h,u.paint.get("icon-translate"),u.paint.get("icon-translate-anchor"),!1))}},circle:function(l,p,u,h){if(l.renderPass==="translucent"){var g=u.paint.get("circle-opacity"),b=u.paint.get("circle-stroke-width"),w=u.paint.get("circle-stroke-opacity"),C=u.layout.get("circle-sort-key").constantOr(1)!==void 0;if(g.constantOr(1)!==0||b.constantOr(1)!==0&&w.constantOr(1)!==0){for(var M=l.context,N=M.gl,K=l.depthModeForSublayer(0,Y.ReadOnly),X=te.disabled,J=l.colorModeForRenderPass(),ue=[],le=0;le<h.length;le++){var ge=h[le],oe=p.getTile(ge),ye=oe.getBucket(u);if(ye){var be=ye.programConfigurations.get(u.id),Ae={programConfiguration:be,program:l.useProgram("circle",be),layoutVertexBuffer:ye.layoutVertexBuffer,indexBuffer:ye.indexBuffer,uniformValues:nf(l,ge,oe,u)};if(C)for(var Ne=0,De=ye.segments.get();Ne<De.length;Ne+=1){var Fe=De[Ne];ue.push({segments:new o.SegmentVector([Fe]),sortKey:Fe.sortKey,state:Ae})}else ue.push({segments:ye.segments,sortKey:0,state:Ae})}}C&&ue.sort(function(Tt,Rt){return Tt.sortKey-Rt.sortKey});for(var Ke=0,tt=ue;Ke<tt.length;Ke+=1){var et=tt[Ke],dt=et.state;dt.program.draw(M,N.TRIANGLES,K,X,J,me.disabled,dt.uniformValues,u.id,dt.layoutVertexBuffer,dt.indexBuffer,et.segments,u.paint,l.transform.zoom,dt.programConfiguration)}}}},heatmap:function(l,p,u,h){if(u.paint.get("heatmap-opacity")!==0)if(l.renderPass==="offscreen"){var g=l.context,b=g.gl,w=te.disabled,C=new de([b.ONE,b.ONE],o.Color.transparent,[!0,!0,!0,!0]);(function(ue,le,ge){var oe=ue.gl;ue.activeTexture.set(oe.TEXTURE1),ue.viewport.set([0,0,le.width/4,le.height/4]);var ye=ge.heatmapFbo;if(ye)oe.bindTexture(oe.TEXTURE_2D,ye.colorAttachment.get()),ue.bindFramebuffer.set(ye.framebuffer);else{var be=oe.createTexture();oe.bindTexture(oe.TEXTURE_2D,be),oe.texParameteri(oe.TEXTURE_2D,oe.TEXTURE_WRAP_S,oe.CLAMP_TO_EDGE),oe.texParameteri(oe.TEXTURE_2D,oe.TEXTURE_WRAP_T,oe.CLAMP_TO_EDGE),oe.texParameteri(oe.TEXTURE_2D,oe.TEXTURE_MIN_FILTER,oe.LINEAR),oe.texParameteri(oe.TEXTURE_2D,oe.TEXTURE_MAG_FILTER,oe.LINEAR),ye=ge.heatmapFbo=ue.createFramebuffer(le.width/4,le.height/4,!1),function(Ae,Ne,De,Fe){var Ke=Ae.gl;Ke.texImage2D(Ke.TEXTURE_2D,0,Ke.RGBA,Ne.width/4,Ne.height/4,0,Ke.RGBA,Ae.extRenderToTextureHalfFloat?Ae.extTextureHalfFloat.HALF_FLOAT_OES:Ke.UNSIGNED_BYTE,null),Fe.colorAttachment.set(De)}(ue,le,be,ye)}})(g,l,u),g.clear({color:o.Color.transparent});for(var M=0;M<h.length;M++){var N=h[M];if(!p.hasRenderableParent(N)){var K=p.getTile(N),X=K.getBucket(u);if(X){var J=X.programConfigurations.get(u.id);l.useProgram("heatmap",J).draw(g,b.TRIANGLES,Y.disabled,w,C,me.disabled,Ud(N.posMatrix,K,l.transform.zoom,u.paint.get("heatmap-intensity")),u.id,X.layoutVertexBuffer,X.indexBuffer,X.segments,u.paint,l.transform.zoom,J)}}}g.viewport.set([0,0,l.width,l.height])}else l.renderPass==="translucent"&&(l.context.setColorMode(l.colorModeForRenderPass()),function(ue,le){var ge=ue.context,oe=ge.gl,ye=le.heatmapFbo;if(ye){ge.activeTexture.set(oe.TEXTURE0),oe.bindTexture(oe.TEXTURE_2D,ye.colorAttachment.get()),ge.activeTexture.set(oe.TEXTURE1);var be=le.colorRampTexture;be||(be=le.colorRampTexture=new o.Texture(ge,le.colorRamp,oe.RGBA)),be.bind(oe.LINEAR,oe.CLAMP_TO_EDGE),ue.useProgram("heatmapTexture").draw(ge,oe.TRIANGLES,Y.disabled,te.disabled,ue.colorModeForRenderPass(),me.disabled,function(Ae,Ne,De,Fe){var Ke=o.create();o.ortho(Ke,0,Ae.width,Ae.height,0,0,1);var tt=Ae.context.gl;return{u_matrix:Ke,u_world:[tt.drawingBufferWidth,tt.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Ne.paint.get("heatmap-opacity")}}(ue,le),le.id,ue.viewportBuffer,ue.quadTriangleIndexBuffer,ue.viewportSegments,le.paint,ue.transform.zoom)}}(l,u))},line:function(l,p,u,h){if(l.renderPass==="translucent"){var g=u.paint.get("line-opacity"),b=u.paint.get("line-width");if(g.constantOr(1)!==0&&b.constantOr(1)!==0)for(var w=l.depthModeForSublayer(0,Y.ReadOnly),C=l.colorModeForRenderPass(),M=u.paint.get("line-dasharray"),N=u.paint.get("line-pattern"),K=N.constantOr(1),X=u.paint.get("line-gradient"),J=u.getCrossfadeParameters(),ue=K?"linePattern":M?"lineSDF":X?"lineGradient":"line",le=l.context,ge=le.gl,oe=!0,ye=0,be=h;ye<be.length;ye+=1){var Ae=be[ye],Ne=p.getTile(Ae);if(!K||Ne.patternsLoaded()){var De=Ne.getBucket(u);if(De){var Fe=De.programConfigurations.get(u.id),Ke=l.context.program.get(),tt=l.useProgram(ue,Fe),et=oe||tt.program!==Ke,dt=N.constantOr(null);if(dt&&Ne.imageAtlas){var Tt=Ne.imageAtlas,Rt=Tt.patternPositions[dt.to.toString()],Mt=Tt.patternPositions[dt.from.toString()];Rt&&Mt&&Fe.setConstantPatternPositions(Rt,Mt)}var br=K?Ku(l,Ne,u,J):M?Uv(l,Ne,u,M,J):X?Jr(l,Ne,u,De.lineClipsArray.length):Hl(l,Ne,u);if(K)le.activeTexture.set(ge.TEXTURE0),Ne.imageAtlasTexture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE),Fe.updatePaintBuffers(J);else if(M&&(et||l.lineAtlas.dirty))le.activeTexture.set(ge.TEXTURE0),l.lineAtlas.bind(le);else if(X){var yt=De.gradients[u.id],Ht=yt.texture;if(u.gradientVersion!==yt.version){var nr=256;if(u.stepInterpolant){var Gt=p.getSource().maxzoom,qt=Ae.canonical.z===Gt?Math.ceil(1<<l.transform.maxZoom-Ae.canonical.z):1;nr=o.clamp(o.nextPowerOfTwo(De.maxLineLength/o.EXTENT*1024*qt),256,le.maxTextureSize)}yt.gradient=o.renderColorRamp({expression:u.gradientExpression(),evaluationKey:"lineProgress",resolution:nr,image:yt.gradient||void 0,clips:De.lineClipsArray}),yt.texture?yt.texture.update(yt.gradient):yt.texture=new o.Texture(le,yt.gradient,ge.RGBA),yt.version=u.gradientVersion,Ht=yt.texture}le.activeTexture.set(ge.TEXTURE0),Ht.bind(u.stepInterpolant?ge.NEAREST:ge.LINEAR,ge.CLAMP_TO_EDGE)}tt.draw(le,ge.TRIANGLES,w,l.stencilModeForClipping(Ae),C,me.disabled,br,u.id,De.layoutVertexBuffer,De.indexBuffer,De.segments,u.paint,l.transform.zoom,Fe,De.layoutVertexBuffer2),oe=!1}}}}},fill:function(l,p,u,h){var g=u.paint.get("fill-color"),b=u.paint.get("fill-opacity");if(b.constantOr(1)!==0){var w=l.colorModeForRenderPass(),C=u.paint.get("fill-pattern"),M=l.opaquePassEnabledForLayer()&&!C.constantOr(1)&&g.constantOr(o.Color.transparent).a===1&&b.constantOr(0)===1?"opaque":"translucent";if(l.renderPass===M){var N=l.depthModeForSublayer(1,l.renderPass==="opaque"?Y.ReadWrite:Y.ReadOnly);Ju(l,p,u,h,N,w,!1)}if(l.renderPass==="translucent"&&u.paint.get("fill-antialias")){var K=l.depthModeForSublayer(u.getPaintProperty("fill-outline-color")?2:0,Y.ReadOnly);Ju(l,p,u,h,K,w,!0)}}},"fill-extrusion":function(l,p,u,h){var g=u.paint.get("fill-extrusion-opacity");if(g!==0&&l.renderPass==="translucent"){var b=new Y(l.context.gl.LEQUAL,Y.ReadWrite,l.depthRangeFor3D);if(g!==1||u.paint.get("fill-extrusion-pattern").constantOr(1))of(l,p,u,h,b,te.disabled,de.disabled),of(l,p,u,h,b,l.stencilModeFor3D(),l.colorModeForRenderPass());else{var w=l.colorModeForRenderPass();of(l,p,u,h,b,te.disabled,w)}}},hillshade:function(l,p,u,h){if(l.renderPass==="offscreen"||l.renderPass==="translucent"){for(var g=l.context,b=l.depthModeForSublayer(0,Y.ReadOnly),w=l.colorModeForRenderPass(),C=l.renderPass==="translucent"?l.stencilConfigForOverlap(h):[{},h],M=C[0],N=0,K=C[1];N<K.length;N+=1){var X=K[N],J=p.getTile(X);J.needsHillshadePrepare&&l.renderPass==="offscreen"?jv(l,J,u,b,te.disabled,w):l.renderPass==="translucent"&&Qu(l,J,u,b,M[X.overscaledZ],w)}g.viewport.set([0,0,l.width,l.height])}},raster:function(l,p,u,h){if(l.renderPass==="translucent"&&u.paint.get("raster-opacity")!==0&&h.length)for(var g=l.context,b=g.gl,w=p.getSource(),C=l.useProgram("raster"),M=l.colorModeForRenderPass(),N=w instanceof Ge?[{},h]:l.stencilConfigForOverlap(h),K=N[0],X=N[1],J=X[X.length-1].overscaledZ,ue=!l.options.moving,le=0,ge=X;le<ge.length;le+=1){var oe=ge[le],ye=l.depthModeForSublayer(oe.overscaledZ-J,u.paint.get("raster-opacity")===1?Y.ReadWrite:Y.ReadOnly,b.LESS),be=p.getTile(oe),Ae=l.transform.calculatePosMatrix(oe.toUnwrapped(),ue);be.registerFadeDuration(u.paint.get("raster-fade-duration"));var Ne=p.findLoadedParent(oe,0),De=ec(be,Ne,p,u,l.transform),Fe=void 0,Ke=void 0,tt=u.paint.get("raster-resampling")==="nearest"?b.NEAREST:b.LINEAR;g.activeTexture.set(b.TEXTURE0),be.texture.bind(tt,b.CLAMP_TO_EDGE,b.LINEAR_MIPMAP_NEAREST),g.activeTexture.set(b.TEXTURE1),Ne?(Ne.texture.bind(tt,b.CLAMP_TO_EDGE,b.LINEAR_MIPMAP_NEAREST),Fe=Math.pow(2,Ne.tileID.overscaledZ-be.tileID.overscaledZ),Ke=[be.tileID.canonical.x*Fe%1,be.tileID.canonical.y*Fe%1]):be.texture.bind(tt,b.CLAMP_TO_EDGE,b.LINEAR_MIPMAP_NEAREST);var et=$v(Ae,Ke||[0,0],Fe||1,De,u);w instanceof Ge?C.draw(g,b.TRIANGLES,ye,te.disabled,M,me.disabled,et,u.id,w.boundsBuffer,l.quadTriangleIndexBuffer,w.boundsSegments):C.draw(g,b.TRIANGLES,ye,K[oe.overscaledZ],M,me.disabled,et,u.id,l.rasterBoundsBuffer,l.quadTriangleIndexBuffer,l.rasterBoundsSegments)}},background:function(l,p,u){var h=u.paint.get("background-color"),g=u.paint.get("background-opacity");if(g!==0){var b=l.context,w=b.gl,C=l.transform,M=C.tileSize,N=u.paint.get("background-pattern");if(!l.isPatternMissing(N)){var K=!N&&h.a===1&&g===1&&l.opaquePassEnabledForLayer()?"opaque":"translucent";if(l.renderPass===K){var X=te.disabled,J=l.depthModeForSublayer(0,K==="opaque"?Y.ReadWrite:Y.ReadOnly),ue=l.colorModeForRenderPass(),le=l.useProgram(N?"backgroundPattern":"background"),ge=C.coveringTiles({tileSize:M});N&&(b.activeTexture.set(w.TEXTURE0),l.imageManager.bind(l.context));for(var oe=u.getCrossfadeParameters(),ye=0,be=ge;ye<be.length;ye+=1){var Ae=be[ye],Ne=l.transform.calculatePosMatrix(Ae.toUnwrapped()),De=N?Qs(Ne,g,l,N,{tileID:Ae,tileSize:M},oe):Kl(Ne,g,h);le.draw(b,w.TRIANGLES,J,X,ue,me.disabled,De,u.id,l.tileExtentBuffer,l.quadTriangleIndexBuffer,l.tileExtentSegments)}}}}},debug:function(l,p,u){for(var h=0;h<u.length;h++)Kd(l,p,u[h])},custom:function(l,p,u){var h=l.context,g=u.implementation;if(l.renderPass==="offscreen"){var b=g.prerender;b&&(l.setCustomLayerDefaults(),h.setColorMode(l.colorModeForRenderPass()),b.call(g,h.gl,l.transform.customLayerMatrix()),h.setDirty(),l.setBaseState())}else if(l.renderPass==="translucent"){l.setCustomLayerDefaults(),h.setColorMode(l.colorModeForRenderPass()),h.setStencilMode(te.disabled);var w=g.renderingMode==="3d"?new Y(l.context.gl.LEQUAL,Y.ReadWrite,l.depthRangeFor3D):l.depthModeForSublayer(0,Y.ReadOnly);h.setDepthMode(w),g.render(h.gl,l.transform.customLayerMatrix()),h.setDirty(),l.setBaseState(),h.bindFramebuffer.set(null)}}},ln=function(l,p){this.context=new Z(l),this.transform=p,this._tileTextures={},this.setup(),this.numSublayers=ne.maxUnderzooming+ne.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Ta,this.gpuTimers={}};ln.prototype.resize=function(l,p){if(this.width=l*o.browser.devicePixelRatio,this.height=p*o.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var u=0,h=this.style._order;u<h.length;u+=1)this.style._layers[h[u]].resize()},ln.prototype.setup=function(){var l=this.context,p=new o.StructArrayLayout2i4;p.emplaceBack(0,0),p.emplaceBack(o.EXTENT,0),p.emplaceBack(0,o.EXTENT),p.emplaceBack(o.EXTENT,o.EXTENT),this.tileExtentBuffer=l.createVertexBuffer(p,Rn.members),this.tileExtentSegments=o.SegmentVector.simpleSegment(0,0,4,2);var u=new o.StructArrayLayout2i4;u.emplaceBack(0,0),u.emplaceBack(o.EXTENT,0),u.emplaceBack(0,o.EXTENT),u.emplaceBack(o.EXTENT,o.EXTENT),this.debugBuffer=l.createVertexBuffer(u,Rn.members),this.debugSegments=o.SegmentVector.simpleSegment(0,0,4,5);var h=new o.StructArrayLayout4i8;h.emplaceBack(0,0,0,0),h.emplaceBack(o.EXTENT,0,o.EXTENT,0),h.emplaceBack(0,o.EXTENT,0,o.EXTENT),h.emplaceBack(o.EXTENT,o.EXTENT,o.EXTENT,o.EXTENT),this.rasterBoundsBuffer=l.createVertexBuffer(h,Pe.members),this.rasterBoundsSegments=o.SegmentVector.simpleSegment(0,0,4,2);var g=new o.StructArrayLayout2i4;g.emplaceBack(0,0),g.emplaceBack(1,0),g.emplaceBack(0,1),g.emplaceBack(1,1),this.viewportBuffer=l.createVertexBuffer(g,Rn.members),this.viewportSegments=o.SegmentVector.simpleSegment(0,0,4,2);var b=new o.StructArrayLayout1ui2;b.emplaceBack(0),b.emplaceBack(1),b.emplaceBack(3),b.emplaceBack(2),b.emplaceBack(0),this.tileBorderIndexBuffer=l.createIndexBuffer(b);var w=new o.StructArrayLayout3ui6;w.emplaceBack(0,1,2),w.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=l.createIndexBuffer(w),this.emptyTexture=new o.Texture(l,{width:1,height:1,data:new Uint8Array([0,0,0,0])},l.gl.RGBA);var C=this.context.gl;this.stencilClearMode=new te({func:C.ALWAYS,mask:0},0,255,C.ZERO,C.ZERO,C.ZERO)},ln.prototype.clearStencil=function(){var l=this.context,p=l.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var u=o.create();o.ortho(u,0,this.width,this.height,0,0,1),o.scale(u,u,[p.drawingBufferWidth,p.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(l,p.TRIANGLES,Y.disabled,this.stencilClearMode,de.disabled,me.disabled,_s(u),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},ln.prototype._renderTileClippingMasks=function(l,p){if(this.currentStencilSource!==l.source&&l.isTileClipped()&&p&&p.length){this.currentStencilSource=l.source;var u=this.context,h=u.gl;this.nextStencilID+p.length>256&&this.clearStencil(),u.setColorMode(de.disabled),u.setDepthMode(Y.disabled);var g=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var b=0,w=p;b<w.length;b+=1){var C=w[b],M=this._tileClippingMaskIDs[C.key]=this.nextStencilID++;g.draw(u,h.TRIANGLES,Y.disabled,new te({func:h.ALWAYS,mask:0},M,255,h.KEEP,h.KEEP,h.REPLACE),de.disabled,me.disabled,_s(C.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},ln.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var l=this.nextStencilID++,p=this.context.gl;return new te({func:p.NOTEQUAL,mask:255},l,255,p.KEEP,p.KEEP,p.REPLACE)},ln.prototype.stencilModeForClipping=function(l){var p=this.context.gl;return new te({func:p.EQUAL,mask:255},this._tileClippingMaskIDs[l.key],0,p.KEEP,p.KEEP,p.REPLACE)},ln.prototype.stencilConfigForOverlap=function(l){var p,u=this.context.gl,h=l.sort(function(M,N){return N.overscaledZ-M.overscaledZ}),g=h[h.length-1].overscaledZ,b=h[0].overscaledZ-g+1;if(b>1){this.currentStencilSource=void 0,this.nextStencilID+b>256&&this.clearStencil();for(var w={},C=0;C<b;C++)w[C+g]=new te({func:u.GEQUAL,mask:255},C+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=b,[w,h]}return[(p={},p[g]=te.disabled,p),h]},ln.prototype.colorModeForRenderPass=function(){var l=this.context.gl;return this._showOverdrawInspector?new de([l.CONSTANT_COLOR,l.ONE],new o.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?de.unblended:de.alphaBlended},ln.prototype.depthModeForSublayer=function(l,p,u){if(!this.opaquePassEnabledForLayer())return Y.disabled;var h=1-((1+this.currentLayer)*this.numSublayers+l)*this.depthEpsilon;return new Y(u||this.context.gl.LEQUAL,p,[h,h])},ln.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},ln.prototype.render=function(l,p){var u=this;this.style=l,this.options=p,this.lineAtlas=l.lineAtlas,this.imageManager=l.imageManager,this.glyphManager=l.glyphManager,this.symbolFadeChange=l.placement.symbolFadeChange(o.browser.now()),this.imageManager.beginFrame();var h=this.style._order,g=this.style.sourceCaches;for(var b in g){var w=g[b];w.used&&w.prepare(this.context)}var C,M,N={},K={},X={};for(var J in g){var ue=g[J];N[J]=ue.getVisibleCoordinates(),K[J]=N[J].slice().reverse(),X[J]=ue.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var le=0;le<h.length;le++)if(this.style._layers[h[le]].is3D()){this.opaquePassCutoff=le;break}this.renderPass="offscreen";for(var ge=0,oe=h;ge<oe.length;ge+=1){var ye=this.style._layers[oe[ge]];if(ye.hasOffscreenPass()&&!ye.isHidden(this.transform.zoom)){var be=K[ye.source];(ye.type==="custom"||be.length)&&this.renderLayer(this,g[ye.source],ye,be)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:p.showOverdrawInspector?o.Color.black:o.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=p.showOverdrawInspector,this.depthRangeFor3D=[0,1-(l._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=h.length-1;this.currentLayer>=0;this.currentLayer--){var Ae=this.style._layers[h[this.currentLayer]],Ne=g[Ae.source],De=N[Ae.source];this._renderTileClippingMasks(Ae,De),this.renderLayer(this,Ne,Ae,De)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<h.length;this.currentLayer++){var Fe=this.style._layers[h[this.currentLayer]],Ke=g[Fe.source],tt=(Fe.type==="symbol"?X:K)[Fe.source];this._renderTileClippingMasks(Fe,N[Fe.source]),this.renderLayer(this,Ke,Fe,tt)}this.options.showTileBoundaries&&(o.values(this.style._layers).forEach(function(et){et.source&&!et.isHidden(u.transform.zoom)&&(et.source!==(M&&M.id)&&(M=u.style.sourceCaches[et.source]),(!C||C.getSource().maxzoom<M.getSource().maxzoom)&&(C=M))}),C&&bs.debug(this,C,C.getVisibleCoordinates())),this.options.showPadding&&function(et){var dt=et.transform.padding;lf(et,et.transform.height-(dt.top||0),3,af),lf(et,dt.bottom||0,3,Hd),uf(et,dt.left||0,3,Zd),uf(et,et.transform.width-(dt.right||0),3,tc);var Tt=et.transform.centerPoint;(function(Rt,Mt,br,yt){Yl(Rt,Mt-1,br-10,2,20,yt),Yl(Rt,Mt-10,br-1,20,2,yt)})(et,Tt.x,et.transform.height-Tt.y,sf)}(this),this.context.setDefault()},ln.prototype.renderLayer=function(l,p,u,h){u.isHidden(this.transform.zoom)||(u.type==="background"||u.type==="custom"||h.length)&&(this.id=u.id,this.gpuTimingStart(u),bs[u.type](l,p,u,h,this.style.placement.variableOffsets),this.gpuTimingEnd())},ln.prototype.gpuTimingStart=function(l){if(this.options.gpuTiming){var p=this.context.extTimerQuery,u=this.gpuTimers[l.id];u||(u=this.gpuTimers[l.id]={calls:0,cpuTime:0,query:p.createQueryEXT()}),u.calls++,p.beginQueryEXT(p.TIME_ELAPSED_EXT,u.query)}},ln.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var l=this.context.extTimerQuery;l.endQueryEXT(l.TIME_ELAPSED_EXT)}},ln.prototype.collectGpuTimers=function(){var l=this.gpuTimers;return this.gpuTimers={},l},ln.prototype.queryGpuTimers=function(l){var p={};for(var u in l){var h=l[u],g=this.context.extTimerQuery,b=g.getQueryObjectEXT(h.query,g.QUERY_RESULT_EXT)/1e6;g.deleteQueryEXT(h.query),p[u]=b}return p},ln.prototype.translatePosMatrix=function(l,p,u,h,g){if(!u[0]&&!u[1])return l;var b=g?h==="map"?this.transform.angle:0:h==="viewport"?-this.transform.angle:0;if(b){var w=Math.sin(b),C=Math.cos(b);u=[u[0]*C-u[1]*w,u[0]*w+u[1]*C]}var M=[g?u[0]:sn(p,u[0],this.transform.zoom),g?u[1]:sn(p,u[1],this.transform.zoom),0],N=new Float32Array(16);return o.translate(N,l,M),N},ln.prototype.saveTileTexture=function(l){var p=this._tileTextures[l.size[0]];p?p.push(l):this._tileTextures[l.size[0]]=[l]},ln.prototype.getTileTexture=function(l){var p=this._tileTextures[l];return p&&p.length>0?p.pop():null},ln.prototype.isPatternMissing=function(l){if(!l)return!1;if(!l.from||!l.to)return!0;var p=this.imageManager.getPattern(l.from.toString()),u=this.imageManager.getPattern(l.to.toString());return!p||!u},ln.prototype.useProgram=function(l,p){this.cache=this.cache||{};var u=""+l+(p?p.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[u]||(this.cache[u]=new zd(this.context,l,Fv[l],p,Vd[l],this._showOverdrawInspector)),this.cache[u]},ln.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},ln.prototype.setBaseState=function(){var l=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(l.FUNC_ADD)},ln.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=o.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new o.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},ln.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var rc=function(l,p){this.points=l,this.planes=p};rc.fromInvProjectionMatrix=function(l,p,u){var h=Math.pow(2,u),g=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(w){return o.transformMat4([],w,l)}).map(function(w){return o.scale$1([],w,1/w[3]/p*h)}),b=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(w){var C=o.sub([],g[w[0]],g[w[1]]),M=o.sub([],g[w[2]],g[w[1]]),N=o.normalize([],o.cross([],C,M)),K=-o.dot(N,g[w[1]]);return N.concat(K)});return new rc(g,b)};var ws=function(l,p){this.min=l,this.max=p,this.center=o.scale$2([],o.add([],this.min,this.max),.5)};ws.prototype.quadrant=function(l){for(var p=[l%2==0,l<2],u=o.clone$2(this.min),h=o.clone$2(this.max),g=0;g<p.length;g++)u[g]=p[g]?this.min[g]:this.center[g],h[g]=p[g]?this.center[g]:this.max[g];return h[2]=this.max[2],new ws(u,h)},ws.prototype.distanceX=function(l){return Math.max(Math.min(this.max[0],l[0]),this.min[0])-l[0]},ws.prototype.distanceY=function(l){return Math.max(Math.min(this.max[1],l[1]),this.min[1])-l[1]},ws.prototype.intersects=function(l){for(var p=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],u=!0,h=0;h<l.planes.length;h++){for(var g=l.planes[h],b=0,w=0;w<p.length;w++)b+=o.dot$1(g,p[w])>=0;if(b===0)return 0;b!==p.length&&(u=!1)}if(u)return 2;for(var C=0;C<3;C++){for(var M=Number.MAX_VALUE,N=-Number.MAX_VALUE,K=0;K<l.points.length;K++){var X=l.points[K][C]-this.min[C];M=Math.min(M,X),N=Math.max(N,X)}if(N<0||M>this.max[C]-this.min[C])return 0}return 1};var Da=function(l,p,u,h){if(l===void 0&&(l=0),p===void 0&&(p=0),u===void 0&&(u=0),h===void 0&&(h=0),isNaN(l)||l<0||isNaN(p)||p<0||isNaN(u)||u<0||isNaN(h)||h<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=l,this.bottom=p,this.left=u,this.right=h};Da.prototype.interpolate=function(l,p,u){return p.top!=null&&l.top!=null&&(this.top=o.number(l.top,p.top,u)),p.bottom!=null&&l.bottom!=null&&(this.bottom=o.number(l.bottom,p.bottom,u)),p.left!=null&&l.left!=null&&(this.left=o.number(l.left,p.left,u)),p.right!=null&&l.right!=null&&(this.right=o.number(l.right,p.right,u)),this},Da.prototype.getCenter=function(l,p){var u=o.clamp((this.left+l-this.right)/2,0,l),h=o.clamp((this.top+p-this.bottom)/2,0,p);return new o.Point(u,h)},Da.prototype.equals=function(l){return this.top===l.top&&this.bottom===l.bottom&&this.left===l.left&&this.right===l.right},Da.prototype.clone=function(){return new Da(this.top,this.bottom,this.left,this.right)},Da.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var gr=function(l,p,u,h,g){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=g===void 0||g,this._minZoom=l||0,this._maxZoom=p||22,this._minPitch=u??0,this._maxPitch=h??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new o.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Da,this._posMatrixCache={},this._alignedPosMatrixCache={}},Qr={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};gr.prototype.clone=function(){var l=new gr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return l.tileSize=this.tileSize,l.latRange=this.latRange,l.width=this.width,l.height=this.height,l._center=this._center,l.zoom=this.zoom,l.angle=this.angle,l._fov=this._fov,l._pitch=this._pitch,l._unmodified=this._unmodified,l._edgeInsets=this._edgeInsets.clone(),l._calcMatrices(),l},Qr.minZoom.get=function(){return this._minZoom},Qr.minZoom.set=function(l){this._minZoom!==l&&(this._minZoom=l,this.zoom=Math.max(this.zoom,l))},Qr.maxZoom.get=function(){return this._maxZoom},Qr.maxZoom.set=function(l){this._maxZoom!==l&&(this._maxZoom=l,this.zoom=Math.min(this.zoom,l))},Qr.minPitch.get=function(){return this._minPitch},Qr.minPitch.set=function(l){this._minPitch!==l&&(this._minPitch=l,this.pitch=Math.max(this.pitch,l))},Qr.maxPitch.get=function(){return this._maxPitch},Qr.maxPitch.set=function(l){this._maxPitch!==l&&(this._maxPitch=l,this.pitch=Math.min(this.pitch,l))},Qr.renderWorldCopies.get=function(){return this._renderWorldCopies},Qr.renderWorldCopies.set=function(l){l===void 0?l=!0:l===null&&(l=!1),this._renderWorldCopies=l},Qr.worldSize.get=function(){return this.tileSize*this.scale},Qr.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Qr.size.get=function(){return new o.Point(this.width,this.height)},Qr.bearing.get=function(){return-this.angle/Math.PI*180},Qr.bearing.set=function(l){var p=-o.wrap(l,-180,180)*Math.PI/180;this.angle!==p&&(this._unmodified=!1,this.angle=p,this._calcMatrices(),this.rotationMatrix=o.create$2(),o.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Qr.pitch.get=function(){return this._pitch/Math.PI*180},Qr.pitch.set=function(l){var p=o.clamp(l,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==p&&(this._unmodified=!1,this._pitch=p,this._calcMatrices())},Qr.fov.get=function(){return this._fov/Math.PI*180},Qr.fov.set=function(l){l=Math.max(.01,Math.min(60,l)),this._fov!==l&&(this._unmodified=!1,this._fov=l/180*Math.PI,this._calcMatrices())},Qr.zoom.get=function(){return this._zoom},Qr.zoom.set=function(l){var p=Math.min(Math.max(l,this.minZoom),this.maxZoom);this._zoom!==p&&(this._unmodified=!1,this._zoom=p,this.scale=this.zoomScale(p),this.tileZoom=Math.floor(p),this.zoomFraction=p-this.tileZoom,this._constrain(),this._calcMatrices())},Qr.center.get=function(){return this._center},Qr.center.set=function(l){l.lat===this._center.lat&&l.lng===this._center.lng||(this._unmodified=!1,this._center=l,this._constrain(),this._calcMatrices())},Qr.padding.get=function(){return this._edgeInsets.toJSON()},Qr.padding.set=function(l){this._edgeInsets.equals(l)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,l,1),this._calcMatrices())},Qr.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},gr.prototype.isPaddingEqual=function(l){return this._edgeInsets.equals(l)},gr.prototype.interpolatePadding=function(l,p,u){this._unmodified=!1,this._edgeInsets.interpolate(l,p,u),this._constrain(),this._calcMatrices()},gr.prototype.coveringZoomLevel=function(l){var p=(l.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/l.tileSize));return Math.max(0,p)},gr.prototype.getVisibleUnwrappedCoordinates=function(l){var p=[new o.UnwrappedTileID(0,l)];if(this._renderWorldCopies)for(var u=this.pointCoordinate(new o.Point(0,0)),h=this.pointCoordinate(new o.Point(this.width,0)),g=this.pointCoordinate(new o.Point(this.width,this.height)),b=this.pointCoordinate(new o.Point(0,this.height)),w=Math.floor(Math.min(u.x,h.x,g.x,b.x)),C=Math.floor(Math.max(u.x,h.x,g.x,b.x)),M=w-1;M<=C+1;M++)M!==0&&p.push(new o.UnwrappedTileID(M,l));return p},gr.prototype.coveringTiles=function(l){var p=this.coveringZoomLevel(l),u=p;if(l.minzoom!==void 0&&p<l.minzoom)return[];l.maxzoom!==void 0&&p>l.maxzoom&&(p=l.maxzoom);var h=o.MercatorCoordinate.fromLngLat(this.center),g=Math.pow(2,p),b=[g*h.x,g*h.y,0],w=rc.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,p),C=l.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(C=p);var M=function(et){return{aabb:new ws([et*g,0,0],[(et+1)*g,g,0]),zoom:0,x:0,y:0,wrap:et,fullyVisible:!1}},N=[],K=[],X=p,J=l.reparseOverscaled?u:p;if(this._renderWorldCopies)for(var ue=1;ue<=3;ue++)N.push(M(-ue)),N.push(M(ue));for(N.push(M(0));N.length>0;){var le=N.pop(),ge=le.x,oe=le.y,ye=le.fullyVisible;if(!ye){var be=le.aabb.intersects(w);if(be===0)continue;ye=be===2}var Ae=le.aabb.distanceX(b),Ne=le.aabb.distanceY(b),De=Math.max(Math.abs(Ae),Math.abs(Ne));if(le.zoom===X||De>3+(1<<X-le.zoom)-2&&le.zoom>=C)K.push({tileID:new o.OverscaledTileID(le.zoom===X?J:le.zoom,le.wrap,le.zoom,ge,oe),distanceSq:o.sqrLen([b[0]-.5-ge,b[1]-.5-oe])});else for(var Fe=0;Fe<4;Fe++){var Ke=(ge<<1)+Fe%2,tt=(oe<<1)+(Fe>>1);N.push({aabb:le.aabb.quadrant(Fe),zoom:le.zoom+1,x:Ke,y:tt,wrap:le.wrap,fullyVisible:ye})}}return K.sort(function(et,dt){return et.distanceSq-dt.distanceSq}).map(function(et){return et.tileID})},gr.prototype.resize=function(l,p){this.width=l,this.height=p,this.pixelsToGLUnits=[2/l,-2/p],this._constrain(),this._calcMatrices()},Qr.unmodified.get=function(){return this._unmodified},gr.prototype.zoomScale=function(l){return Math.pow(2,l)},gr.prototype.scaleZoom=function(l){return Math.log(l)/Math.LN2},gr.prototype.project=function(l){var p=o.clamp(l.lat,-this.maxValidLatitude,this.maxValidLatitude);return new o.Point(o.mercatorXfromLng(l.lng)*this.worldSize,o.mercatorYfromLat(p)*this.worldSize)},gr.prototype.unproject=function(l){return new o.MercatorCoordinate(l.x/this.worldSize,l.y/this.worldSize).toLngLat()},Qr.point.get=function(){return this.project(this.center)},gr.prototype.setLocationAtPoint=function(l,p){var u=this.pointCoordinate(p),h=this.pointCoordinate(this.centerPoint),g=this.locationCoordinate(l),b=new o.MercatorCoordinate(g.x-(u.x-h.x),g.y-(u.y-h.y));this.center=this.coordinateLocation(b),this._renderWorldCopies&&(this.center=this.center.wrap())},gr.prototype.locationPoint=function(l){return this.coordinatePoint(this.locationCoordinate(l))},gr.prototype.pointLocation=function(l){return this.coordinateLocation(this.pointCoordinate(l))},gr.prototype.locationCoordinate=function(l){return o.MercatorCoordinate.fromLngLat(l)},gr.prototype.coordinateLocation=function(l){return l.toLngLat()},gr.prototype.pointCoordinate=function(l){var p=[l.x,l.y,0,1],u=[l.x,l.y,1,1];o.transformMat4(p,p,this.pixelMatrixInverse),o.transformMat4(u,u,this.pixelMatrixInverse);var h=p[3],g=u[3],b=p[1]/h,w=u[1]/g,C=p[2]/h,M=u[2]/g,N=C===M?0:(0-C)/(M-C);return new o.MercatorCoordinate(o.number(p[0]/h,u[0]/g,N)/this.worldSize,o.number(b,w,N)/this.worldSize)},gr.prototype.coordinatePoint=function(l){var p=[l.x*this.worldSize,l.y*this.worldSize,0,1];return o.transformMat4(p,p,this.pixelMatrix),new o.Point(p[0]/p[3],p[1]/p[3])},gr.prototype.getBounds=function(){return new o.LngLatBounds().extend(this.pointLocation(new o.Point(0,0))).extend(this.pointLocation(new o.Point(this.width,0))).extend(this.pointLocation(new o.Point(this.width,this.height))).extend(this.pointLocation(new o.Point(0,this.height)))},gr.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new o.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},gr.prototype.setMaxBounds=function(l){l?(this.lngRange=[l.getWest(),l.getEast()],this.latRange=[l.getSouth(),l.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},gr.prototype.calculatePosMatrix=function(l,p){p===void 0&&(p=!1);var u=l.key,h=p?this._alignedPosMatrixCache:this._posMatrixCache;if(h[u])return h[u];var g=l.canonical,b=this.worldSize/this.zoomScale(g.z),w=g.x+Math.pow(2,g.z)*l.wrap,C=o.identity(new Float64Array(16));return o.translate(C,C,[w*b,g.y*b,0]),o.scale(C,C,[b/o.EXTENT,b/o.EXTENT,1]),o.multiply(C,p?this.alignedProjMatrix:this.projMatrix,C),h[u]=new Float32Array(C),h[u]},gr.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},gr.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var l,p,u,h,g=-90,b=90,w=-180,C=180,M=this.size,N=this._unmodified;if(this.latRange){var K=this.latRange;g=o.mercatorYfromLat(K[1])*this.worldSize,l=(b=o.mercatorYfromLat(K[0])*this.worldSize)-g<M.y?M.y/(b-g):0}if(this.lngRange){var X=this.lngRange;w=o.mercatorXfromLng(X[0])*this.worldSize,p=(C=o.mercatorXfromLng(X[1])*this.worldSize)-w<M.x?M.x/(C-w):0}var J=this.point,ue=Math.max(p||0,l||0);if(ue)return this.center=this.unproject(new o.Point(p?(C+w)/2:J.x,l?(b+g)/2:J.y)),this.zoom+=this.scaleZoom(ue),this._unmodified=N,void(this._constraining=!1);if(this.latRange){var le=J.y,ge=M.y/2;le-ge<g&&(h=g+ge),le+ge>b&&(h=b-ge)}if(this.lngRange){var oe=J.x,ye=M.x/2;oe-ye<w&&(u=w+ye),oe+ye>C&&(u=C-ye)}u===void 0&&h===void 0||(this.center=this.unproject(new o.Point(u!==void 0?u:J.x,h!==void 0?h:J.y))),this._unmodified=N,this._constraining=!1}},gr.prototype._calcMatrices=function(){if(this.height){var l=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var p=Math.PI/2+this._pitch,u=this._fov*(.5+l.y/this.height),h=Math.sin(u)*this.cameraToCenterDistance/Math.sin(o.clamp(Math.PI-p-u,.01,Math.PI-.01)),g=this.point,b=g.x,w=g.y,C=1.01*(Math.cos(Math.PI/2-this._pitch)*h+this.cameraToCenterDistance),M=this.height/50,N=new Float64Array(16);o.perspective(N,this._fov,this.width/this.height,M,C),N[8]=2*-l.x/this.width,N[9]=2*l.y/this.height,o.scale(N,N,[1,-1,1]),o.translate(N,N,[0,0,-this.cameraToCenterDistance]),o.rotateX(N,N,this._pitch),o.rotateZ(N,N,this.angle),o.translate(N,N,[-b,-w,0]),this.mercatorMatrix=o.scale([],N,[this.worldSize,this.worldSize,this.worldSize]),o.scale(N,N,[1,1,o.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=N,this.invProjMatrix=o.invert([],this.projMatrix);var K=this.width%2/2,X=this.height%2/2,J=Math.cos(this.angle),ue=Math.sin(this.angle),le=b-Math.round(b)+J*K+ue*X,ge=w-Math.round(w)+J*X+ue*K,oe=new Float64Array(N);if(o.translate(oe,oe,[le>.5?le-1:le,ge>.5?ge-1:ge,0]),this.alignedProjMatrix=oe,N=o.create(),o.scale(N,N,[this.width/2,-this.height/2,1]),o.translate(N,N,[1,-1,0]),this.labelPlaneMatrix=N,N=o.create(),o.scale(N,N,[1,-1,1]),o.translate(N,N,[-1,-1,0]),o.scale(N,N,[2/this.width,2/this.height,1]),this.glCoordMatrix=N,this.pixelMatrix=o.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(N=o.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=N,this._posMatrixCache={},this._alignedPosMatrixCache={}}},gr.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var l=this.pointCoordinate(new o.Point(0,0)),p=[l.x*this.worldSize,l.y*this.worldSize,0,1];return o.transformMat4(p,p,this.pixelMatrix)[3]/this.cameraToCenterDistance},gr.prototype.getCameraPoint=function(){var l=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.Point(0,l))},gr.prototype.getCameraQueryGeometry=function(l){var p=this.getCameraPoint();if(l.length===1)return[l[0],p];for(var u=p.x,h=p.y,g=p.x,b=p.y,w=0,C=l;w<C.length;w+=1){var M=C[w];u=Math.min(u,M.x),h=Math.min(h,M.y),g=Math.max(g,M.x),b=Math.max(b,M.y)}return[new o.Point(u,h),new o.Point(g,h),new o.Point(g,b),new o.Point(u,b),new o.Point(u,h)]},Object.defineProperties(gr.prototype,Qr);var no=function(l){var p,u,h,g;this._hashName=l&&encodeURIComponent(l),o.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(p=this._updateHashUnthrottled.bind(this),u=!1,h=null,g=function(){h=null,u&&(p(),h=setTimeout(g,300),u=!1)},function(){return u=!0,h||g(),h})};no.prototype.addTo=function(l){return this._map=l,o.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},no.prototype.remove=function(){return o.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},no.prototype.getHashString=function(l){var p=this._map.getCenter(),u=Math.round(100*this._map.getZoom())/100,h=Math.ceil((u*Math.LN2+Math.log(512/360/.5))/Math.LN10),g=Math.pow(10,h),b=Math.round(p.lng*g)/g,w=Math.round(p.lat*g)/g,C=this._map.getBearing(),M=this._map.getPitch(),N="";if(N+=l?"/"+b+"/"+w+"/"+u:u+"/"+w+"/"+b,(C||M)&&(N+="/"+Math.round(10*C)/10),M&&(N+="/"+Math.round(M)),this._hashName){var K=this._hashName,X=!1,J=o.window.location.hash.slice(1).split("&").map(function(ue){var le=ue.split("=")[0];return le===K?(X=!0,le+"="+N):ue}).filter(function(ue){return ue});return X||J.push(K+"="+N),"#"+J.join("&")}return"#"+N},no.prototype._getCurrentHash=function(){var l,p=this,u=o.window.location.hash.replace("#","");return this._hashName?(u.split("&").map(function(h){return h.split("=")}).forEach(function(h){h[0]===p._hashName&&(l=h)}),(l&&l[1]||"").split("/")):u.split("/")},no.prototype._onHashChange=function(){var l=this._getCurrentHash();if(l.length>=3&&!l.some(function(u){return isNaN(u)})){var p=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(l[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+l[2],+l[1]],zoom:+l[0],bearing:p,pitch:+(l[4]||0)}),!0}return!1},no.prototype._updateHashUnthrottled=function(){var l=o.window.location.href.replace(/(#.+)?$/,this.getHashString());try{o.window.history.replaceState(o.window.history.state,null,l)}catch{}};var Jl={linearity:.3,easing:o.bezier(0,0,.3,1)},tl=o.extend({deceleration:2500,maxSpeed:1400},Jl),Ql=o.extend({deceleration:20,maxSpeed:1400},Jl),Vv=o.extend({deceleration:1e3,maxSpeed:360},Jl),qv=o.extend({deceleration:1e3,maxSpeed:90},Jl),eu=function(l){this._map=l,this.clear()};function tu(l,p){(!l.duration||l.duration<p.duration)&&(l.duration=p.duration,l.easing=p.easing)}function pa(l,p,u){var h=u.maxSpeed,g=u.linearity,b=u.deceleration,w=o.clamp(l*g/(p/1e3),-h,h),C=Math.abs(w)/(b*g);return{easing:u.easing,duration:1e3*C,amount:w*(C/2)}}eu.prototype.clear=function(){this._inertiaBuffer=[]},eu.prototype.record=function(l){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:o.browser.now(),settings:l})},eu.prototype._drainInertiaBuffer=function(){for(var l=this._inertiaBuffer,p=o.browser.now();l.length>0&&p-l[0].time>160;)l.shift()},eu.prototype._onMoveEnd=function(l){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var p={zoom:0,bearing:0,pitch:0,pan:new o.Point(0,0),pinchAround:void 0,around:void 0},u=0,h=this._inertiaBuffer;u<h.length;u+=1){var g=h[u].settings;p.zoom+=g.zoomDelta||0,p.bearing+=g.bearingDelta||0,p.pitch+=g.pitchDelta||0,g.panDelta&&p.pan._add(g.panDelta),g.around&&(p.around=g.around),g.pinchAround&&(p.pinchAround=g.pinchAround)}var b=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,w={};if(p.pan.mag()){var C=pa(p.pan.mag(),b,o.extend({},tl,l||{}));w.offset=p.pan.mult(C.amount/p.pan.mag()),w.center=this._map.transform.center,tu(w,C)}if(p.zoom){var M=pa(p.zoom,b,Ql);w.zoom=this._map.transform.zoom+M.amount,tu(w,M)}if(p.bearing){var N=pa(p.bearing,b,Vv);w.bearing=this._map.transform.bearing+o.clamp(N.amount,-179,179),tu(w,N)}if(p.pitch){var K=pa(p.pitch,b,qv);w.pitch=this._map.transform.pitch+K.amount,tu(w,K)}if(w.zoom||w.bearing){var X=p.pinchAround===void 0?p.around:p.pinchAround;w.around=X?this._map.unproject(X):this._map.getCenter()}return this.clear(),o.extend(w,{noMoveStart:!0})}};var Nn=function(l){function p(h,g,b,w){w===void 0&&(w={});var C=x.mousePos(g.getCanvasContainer(),b),M=g.unproject(C);l.call(this,h,o.extend({point:C,lngLat:M,originalEvent:b},w)),this._defaultPrevented=!1,this.target=g}l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p;var u={defaultPrevented:{configurable:!0}};return p.prototype.preventDefault=function(){this._defaultPrevented=!0},u.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(p.prototype,u),p}(o.Event),ru=function(l){function p(h,g,b){var w=h==="touchend"?b.changedTouches:b.touches,C=x.touchPos(g.getCanvasContainer(),w),M=C.map(function(X){return g.unproject(X)}),N=C.reduce(function(X,J,ue,le){return X.add(J.div(le.length))},new o.Point(0,0)),K=g.unproject(N);l.call(this,h,{points:C,point:N,lngLats:M,lngLat:K,originalEvent:b}),this._defaultPrevented=!1}l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p;var u={defaultPrevented:{configurable:!0}};return p.prototype.preventDefault=function(){this._defaultPrevented=!0},u.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(p.prototype,u),p}(o.Event),Xd=function(l){function p(h,g,b){l.call(this,h,{originalEvent:b}),this._defaultPrevented=!1}l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p;var u={defaultPrevented:{configurable:!0}};return p.prototype.preventDefault=function(){this._defaultPrevented=!0},u.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(p.prototype,u),p}(o.Event),Ln=function(l,p){this._map=l,this._clickTolerance=p.clickTolerance};Ln.prototype.reset=function(){delete this._mousedownPos},Ln.prototype.wheel=function(l){return this._firePreventable(new Xd(l.type,this._map,l))},Ln.prototype.mousedown=function(l,p){return this._mousedownPos=p,this._firePreventable(new Nn(l.type,this._map,l))},Ln.prototype.mouseup=function(l){this._map.fire(new Nn(l.type,this._map,l))},Ln.prototype.click=function(l,p){this._mousedownPos&&this._mousedownPos.dist(p)>=this._clickTolerance||this._map.fire(new Nn(l.type,this._map,l))},Ln.prototype.dblclick=function(l){return this._firePreventable(new Nn(l.type,this._map,l))},Ln.prototype.mouseover=function(l){this._map.fire(new Nn(l.type,this._map,l))},Ln.prototype.mouseout=function(l){this._map.fire(new Nn(l.type,this._map,l))},Ln.prototype.touchstart=function(l){return this._firePreventable(new ru(l.type,this._map,l))},Ln.prototype.touchmove=function(l){this._map.fire(new ru(l.type,this._map,l))},Ln.prototype.touchend=function(l){this._map.fire(new ru(l.type,this._map,l))},Ln.prototype.touchcancel=function(l){this._map.fire(new ru(l.type,this._map,l))},Ln.prototype._firePreventable=function(l){if(this._map.fire(l),l.defaultPrevented)return{}},Ln.prototype.isEnabled=function(){return!0},Ln.prototype.isActive=function(){return!1},Ln.prototype.enable=function(){},Ln.prototype.disable=function(){};var vt=function(l){this._map=l};vt.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},vt.prototype.mousemove=function(l){this._map.fire(new Nn(l.type,this._map,l))},vt.prototype.mousedown=function(){this._delayContextMenu=!0},vt.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Nn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},vt.prototype.contextmenu=function(l){this._delayContextMenu?this._contextMenuEvent=l:this._map.fire(new Nn(l.type,this._map,l)),this._map.listens("contextmenu")&&l.preventDefault()},vt.prototype.isEnabled=function(){return!0},vt.prototype.isActive=function(){return!1},vt.prototype.enable=function(){},vt.prototype.disable=function(){};var Vi=function(l,p){this._map=l,this._el=l.getCanvasContainer(),this._container=l.getContainer(),this._clickTolerance=p.clickTolerance||1};function nc(l,p){for(var u={},h=0;h<l.length;h++)u[l[h].identifier]=p[h];return u}Vi.prototype.isEnabled=function(){return!!this._enabled},Vi.prototype.isActive=function(){return!!this._active},Vi.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Vi.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Vi.prototype.mousedown=function(l,p){this.isEnabled()&&l.shiftKey&&l.button===0&&(x.disableDrag(),this._startPos=this._lastPos=p,this._active=!0)},Vi.prototype.mousemoveWindow=function(l,p){if(this._active){var u=p;if(!(this._lastPos.equals(u)||!this._box&&u.dist(this._startPos)<this._clickTolerance)){var h=this._startPos;this._lastPos=u,this._box||(this._box=x.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",l));var g=Math.min(h.x,u.x),b=Math.max(h.x,u.x),w=Math.min(h.y,u.y),C=Math.max(h.y,u.y);x.setTransform(this._box,"translate("+g+"px,"+w+"px)"),this._box.style.width=b-g+"px",this._box.style.height=C-w+"px"}}},Vi.prototype.mouseupWindow=function(l,p){var u=this;if(this._active&&l.button===0){var h=this._startPos,g=p;if(this.reset(),x.suppressClick(),h.x!==g.x||h.y!==g.y)return this._map.fire(new o.Event("boxzoomend",{originalEvent:l})),{cameraAnimation:function(b){return b.fitScreenCoordinates(h,g,u._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",l)}},Vi.prototype.keydown=function(l){this._active&&l.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",l))},Vi.prototype.blur=function(){this.reset()},Vi.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(x.remove(this._box),this._box=null),x.enableDrag(),delete this._startPos,delete this._lastPos},Vi.prototype._fireEvent=function(l,p){return this._map.fire(new o.Event(l,{originalEvent:p}))};var rl=function(l){this.reset(),this.numTouches=l.numTouches};rl.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},rl.prototype.touchstart=function(l,p,u){(this.centroid||u.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=l.timeStamp),u.length===this.numTouches&&(this.centroid=function(h){for(var g=new o.Point(0,0),b=0,w=h;b<w.length;b+=1)g._add(w[b]);return g.div(h.length)}(p),this.touches=nc(u,p)))},rl.prototype.touchmove=function(l,p,u){if(!this.aborted&&this.centroid){var h=nc(u,p);for(var g in this.touches){var b=h[g];(!b||b.dist(this.touches[g])>30)&&(this.aborted=!0)}}},rl.prototype.touchend=function(l,p,u){if((!this.centroid||l.timeStamp-this.startTime>500)&&(this.aborted=!0),u.length===0){var h=!this.aborted&&this.centroid;if(this.reset(),h)return h}};var Lo=function(l){this.singleTap=new rl(l),this.numTaps=l.numTaps,this.reset()};Lo.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Lo.prototype.touchstart=function(l,p,u){this.singleTap.touchstart(l,p,u)},Lo.prototype.touchmove=function(l,p,u){this.singleTap.touchmove(l,p,u)},Lo.prototype.touchend=function(l,p,u){var h=this.singleTap.touchend(l,p,u);if(h){var g=l.timeStamp-this.lastTime<500,b=!this.lastTap||this.lastTap.dist(h)<30;if(g&&b||this.reset(),this.count++,this.lastTime=l.timeStamp,this.lastTap=h,this.count===this.numTaps)return this.reset(),h}};var qi=function(){this._zoomIn=new Lo({numTouches:1,numTaps:2}),this._zoomOut=new Lo({numTouches:2,numTaps:1}),this.reset()};qi.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},qi.prototype.touchstart=function(l,p,u){this._zoomIn.touchstart(l,p,u),this._zoomOut.touchstart(l,p,u)},qi.prototype.touchmove=function(l,p,u){this._zoomIn.touchmove(l,p,u),this._zoomOut.touchmove(l,p,u)},qi.prototype.touchend=function(l,p,u){var h=this,g=this._zoomIn.touchend(l,p,u),b=this._zoomOut.touchend(l,p,u);return g?(this._active=!0,l.preventDefault(),setTimeout(function(){return h.reset()},0),{cameraAnimation:function(w){return w.easeTo({duration:300,zoom:w.getZoom()+1,around:w.unproject(g)},{originalEvent:l})}}):b?(this._active=!0,l.preventDefault(),setTimeout(function(){return h.reset()},0),{cameraAnimation:function(w){return w.easeTo({duration:300,zoom:w.getZoom()-1,around:w.unproject(b)},{originalEvent:l})}}):void 0},qi.prototype.touchcancel=function(){this.reset()},qi.prototype.enable=function(){this._enabled=!0},qi.prototype.disable=function(){this._enabled=!1,this.reset()},qi.prototype.isEnabled=function(){return this._enabled},qi.prototype.isActive=function(){return this._active};var cf={0:1,2:2},ot=function(l){this.reset(),this._clickTolerance=l.clickTolerance||1};ot.prototype.blur=function(){this.reset()},ot.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},ot.prototype._correctButton=function(l,p){return!1},ot.prototype._move=function(l,p){return{}},ot.prototype.mousedown=function(l,p){if(!this._lastPoint){var u=x.mouseButton(l);this._correctButton(l,u)&&(this._lastPoint=p,this._eventButton=u)}},ot.prototype.mousemoveWindow=function(l,p){var u=this._lastPoint;if(u){if(l.preventDefault(),function(h,g){var b=cf[g];return h.buttons===void 0||(h.buttons&b)!==b}(l,this._eventButton))this.reset();else if(this._moved||!(p.dist(u)<this._clickTolerance))return this._moved=!0,this._lastPoint=p,this._move(u,p)}},ot.prototype.mouseupWindow=function(l){this._lastPoint&&x.mouseButton(l)===this._eventButton&&(this._moved&&x.suppressClick(),this.reset())},ot.prototype.enable=function(){this._enabled=!0},ot.prototype.disable=function(){this._enabled=!1,this.reset()},ot.prototype.isEnabled=function(){return this._enabled},ot.prototype.isActive=function(){return this._active};var pf=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.mousedown=function(u,h){l.prototype.mousedown.call(this,u,h),this._lastPoint&&(this._active=!0)},p.prototype._correctButton=function(u,h){return h===0&&!u.ctrlKey},p.prototype._move=function(u,h){return{around:h,panDelta:h.sub(u)}},p}(ot),ic=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype._correctButton=function(u,h){return h===0&&u.ctrlKey||h===2},p.prototype._move=function(u,h){var g=.8*(h.x-u.x);if(g)return this._active=!0,{bearingDelta:g}},p.prototype.contextmenu=function(u){u.preventDefault()},p}(ot),ff=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype._correctButton=function(u,h){return h===0&&u.ctrlKey||h===2},p.prototype._move=function(u,h){var g=-.5*(h.y-u.y);if(g)return this._active=!0,{pitchDelta:g}},p.prototype.contextmenu=function(u){u.preventDefault()},p}(ot),ho=function(l){this._minTouches=1,this._clickTolerance=l.clickTolerance||1,this.reset()};ho.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new o.Point(0,0)},ho.prototype.touchstart=function(l,p,u){return this._calculateTransform(l,p,u)},ho.prototype.touchmove=function(l,p,u){if(this._active&&!(u.length<this._minTouches))return l.preventDefault(),this._calculateTransform(l,p,u)},ho.prototype.touchend=function(l,p,u){this._calculateTransform(l,p,u),this._active&&u.length<this._minTouches&&this.reset()},ho.prototype.touchcancel=function(){this.reset()},ho.prototype._calculateTransform=function(l,p,u){u.length>0&&(this._active=!0);var h=nc(u,p),g=new o.Point(0,0),b=new o.Point(0,0),w=0;for(var C in h){var M=h[C],N=this._touches[C];N&&(g._add(M),b._add(M.sub(N)),w++,h[C]=M)}if(this._touches=h,!(w<this._minTouches)&&b.mag()){var K=b.div(w);if(this._sum._add(K),!(this._sum.mag()<this._clickTolerance))return{around:g.div(w),panDelta:K}}},ho.prototype.enable=function(){this._enabled=!0},ho.prototype.disable=function(){this._enabled=!1,this.reset()},ho.prototype.isEnabled=function(){return this._enabled},ho.prototype.isActive=function(){return this._active};var Wi=function(){this.reset()};function oc(l,p,u){for(var h=0;h<l.length;h++)if(l[h].identifier===u)return p[h]}function ac(l,p){return Math.log(l/p)/Math.LN2}Wi.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Wi.prototype._start=function(l){},Wi.prototype._move=function(l,p,u){return{}},Wi.prototype.touchstart=function(l,p,u){this._firstTwoTouches||u.length<2||(this._firstTwoTouches=[u[0].identifier,u[1].identifier],this._start([p[0],p[1]]))},Wi.prototype.touchmove=function(l,p,u){if(this._firstTwoTouches){l.preventDefault();var h=this._firstTwoTouches,g=h[1],b=oc(u,p,h[0]),w=oc(u,p,g);if(b&&w){var C=this._aroundCenter?null:b.add(w).div(2);return this._move([b,w],C,l)}}},Wi.prototype.touchend=function(l,p,u){if(this._firstTwoTouches){var h=this._firstTwoTouches,g=h[1],b=oc(u,p,h[0]),w=oc(u,p,g);b&&w||(this._active&&x.suppressClick(),this.reset())}},Wi.prototype.touchcancel=function(){this.reset()},Wi.prototype.enable=function(l){this._enabled=!0,this._aroundCenter=!!l&&l.around==="center"},Wi.prototype.disable=function(){this._enabled=!1,this.reset()},Wi.prototype.isEnabled=function(){return this._enabled},Wi.prototype.isActive=function(){return this._active};var Gi=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.reset=function(){l.prototype.reset.call(this),delete this._distance,delete this._startDistance},p.prototype._start=function(u){this._startDistance=this._distance=u[0].dist(u[1])},p.prototype._move=function(u,h){var g=this._distance;if(this._distance=u[0].dist(u[1]),this._active||!(Math.abs(ac(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:ac(this._distance,g),pinchAround:h}},p}(Wi);function fa(l,p){return 180*l.angleWith(p)/Math.PI}var Yd=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.reset=function(){l.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},p.prototype._start=function(u){this._startVector=this._vector=u[0].sub(u[1]),this._minDiameter=u[0].dist(u[1])},p.prototype._move=function(u,h){var g=this._vector;if(this._vector=u[0].sub(u[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:fa(this._vector,g),pinchAround:h}},p.prototype._isBelowThreshold=function(u){this._minDiameter=Math.min(this._minDiameter,u.mag());var h=25/(Math.PI*this._minDiameter)*360,g=fa(u,this._startVector);return Math.abs(g)<h},p}(Wi);function nu(l){return Math.abs(l.y)>Math.abs(l.x)}var hf=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.reset=function(){l.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},p.prototype._start=function(u){this._lastPoints=u,nu(u[0].sub(u[1]))&&(this._valid=!1)},p.prototype._move=function(u,h,g){var b=u[0].sub(this._lastPoints[0]),w=u[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(b,w,g.timeStamp),this._valid)return this._lastPoints=u,this._active=!0,{pitchDelta:(b.y+w.y)/2*-.5}},p.prototype.gestureBeginsVertically=function(u,h,g){if(this._valid!==void 0)return this._valid;var b=u.mag()>=2,w=h.mag()>=2;if(b||w){if(!b||!w)return this._firstMove===void 0&&(this._firstMove=g),g-this._firstMove<100&&void 0;var C=u.y>0==h.y>0;return nu(u)&&nu(h)&&C}},p}(Wi),df={panStep:100,bearingStep:15,pitchStep:10},zo=function(){var l=df;this._panStep=l.panStep,this._bearingStep=l.bearingStep,this._pitchStep=l.pitchStep,this._rotationDisabled=!1};function io(l){return l*(2-l)}zo.prototype.blur=function(){this.reset()},zo.prototype.reset=function(){this._active=!1},zo.prototype.keydown=function(l){var p=this;if(!(l.altKey||l.ctrlKey||l.metaKey)){var u=0,h=0,g=0,b=0,w=0;switch(l.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:l.shiftKey?h=-1:(l.preventDefault(),b=-1);break;case 39:l.shiftKey?h=1:(l.preventDefault(),b=1);break;case 38:l.shiftKey?g=1:(l.preventDefault(),w=-1);break;case 40:l.shiftKey?g=-1:(l.preventDefault(),w=1);break;default:return}return this._rotationDisabled&&(h=0,g=0),{cameraAnimation:function(C){var M=C.getZoom();C.easeTo({duration:300,easeId:"keyboardHandler",easing:io,zoom:u?Math.round(M)+u*(l.shiftKey?2:1):M,bearing:C.getBearing()+h*p._bearingStep,pitch:C.getPitch()+g*p._pitchStep,offset:[-b*p._panStep,-w*p._panStep],center:C.getCenter()},{originalEvent:l})}}}},zo.prototype.enable=function(){this._enabled=!0},zo.prototype.disable=function(){this._enabled=!1,this.reset()},zo.prototype.isEnabled=function(){return this._enabled},zo.prototype.isActive=function(){return this._active},zo.prototype.disableRotation=function(){this._rotationDisabled=!0},zo.prototype.enableRotation=function(){this._rotationDisabled=!1};var pr=function(l,p){this._map=l,this._el=l.getCanvasContainer(),this._handler=p,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,o.bindAll(["_onTimeout"],this)};pr.prototype.setZoomRate=function(l){this._defaultZoomRate=l},pr.prototype.setWheelZoomRate=function(l){this._wheelZoomRate=l},pr.prototype.isEnabled=function(){return!!this._enabled},pr.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},pr.prototype.isZooming=function(){return!!this._zooming},pr.prototype.enable=function(l){this.isEnabled()||(this._enabled=!0,this._aroundCenter=l&&l.around==="center")},pr.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},pr.prototype.wheel=function(l){if(this.isEnabled()){var p=l.deltaMode===o.window.WheelEvent.DOM_DELTA_LINE?40*l.deltaY:l.deltaY,u=o.browser.now(),h=u-(this._lastWheelEventTime||0);this._lastWheelEventTime=u,p!==0&&p%4.000244140625==0?this._type="wheel":p!==0&&Math.abs(p)<4?this._type="trackpad":h>400?(this._type=null,this._lastValue=p,this._timeout=setTimeout(this._onTimeout,40,l)):this._type||(this._type=Math.abs(h*p)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,p+=this._lastValue)),l.shiftKey&&p&&(p/=4),this._type&&(this._lastWheelEvent=l,this._delta-=p,this._active||this._start(l)),l.preventDefault()}},pr.prototype._onTimeout=function(l){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(l)},pr.prototype._start=function(l){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var p=x.mousePos(this._el,l);this._around=o.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(p)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},pr.prototype.renderFrame=function(){var l=this;if(this._frameId&&(this._frameId=null,this.isActive())){var p=this._map.transform;if(this._delta!==0){var u=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,h=2/(1+Math.exp(-Math.abs(this._delta*u)));this._delta<0&&h!==0&&(h=1/h);var g=typeof this._targetZoom=="number"?p.zoomScale(this._targetZoom):p.scale;this._targetZoom=Math.min(p.maxZoom,Math.max(p.minZoom,p.scaleZoom(g*h))),this._type==="wheel"&&(this._startZoom=p.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var b,w=typeof this._targetZoom=="number"?this._targetZoom:p.zoom,C=this._startZoom,M=this._easing,N=!1;if(this._type==="wheel"&&C&&M){var K=Math.min((o.browser.now()-this._lastWheelEventTime)/200,1),X=M(K);b=o.number(C,w,X),K<1?this._frameId||(this._frameId=!0):N=!0}else b=w,N=!0;return this._active=!0,N&&(this._active=!1,this._finishTimeout=setTimeout(function(){l._zooming=!1,l._handler._triggerRenderFrame(),delete l._targetZoom,delete l._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!N,zoomDelta:b-p.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},pr.prototype._smoothOutEasing=function(l){var p=o.ease;if(this._prevEase){var u=this._prevEase,h=(o.browser.now()-u.start)/u.duration,g=u.easing(h+.01)-u.easing(h),b=.27/Math.sqrt(g*g+1e-4)*.01,w=Math.sqrt(.0729-b*b);p=o.bezier(b,w,.25,1)}return this._prevEase={start:o.browser.now(),duration:l,easing:p},p},pr.prototype.blur=function(){this.reset()},pr.prototype.reset=function(){this._active=!1};var Zo=function(l,p){this._clickZoom=l,this._tapZoom=p};Zo.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Zo.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Zo.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Zo.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var mo=function(){this.reset()};mo.prototype.reset=function(){this._active=!1},mo.prototype.blur=function(){this.reset()},mo.prototype.dblclick=function(l,p){return l.preventDefault(),{cameraAnimation:function(u){u.easeTo({duration:300,zoom:u.getZoom()+(l.shiftKey?-1:1),around:u.unproject(p)},{originalEvent:l})}}},mo.prototype.enable=function(){this._enabled=!0},mo.prototype.disable=function(){this._enabled=!1,this.reset()},mo.prototype.isEnabled=function(){return this._enabled},mo.prototype.isActive=function(){return this._active};var ui=function(){this._tap=new Lo({numTouches:1,numTaps:1}),this.reset()};ui.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},ui.prototype.touchstart=function(l,p,u){this._swipePoint||(this._tapTime&&l.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?u.length>0&&(this._swipePoint=p[0],this._swipeTouch=u[0].identifier):this._tap.touchstart(l,p,u))},ui.prototype.touchmove=function(l,p,u){if(this._tapTime){if(this._swipePoint){if(u[0].identifier!==this._swipeTouch)return;var h=p[0],g=h.y-this._swipePoint.y;return this._swipePoint=h,l.preventDefault(),this._active=!0,{zoomDelta:g/128}}}else this._tap.touchmove(l,p,u)},ui.prototype.touchend=function(l,p,u){this._tapTime?this._swipePoint&&u.length===0&&this.reset():this._tap.touchend(l,p,u)&&(this._tapTime=l.timeStamp)},ui.prototype.touchcancel=function(){this.reset()},ui.prototype.enable=function(){this._enabled=!0},ui.prototype.disable=function(){this._enabled=!1,this.reset()},ui.prototype.isEnabled=function(){return this._enabled},ui.prototype.isActive=function(){return this._active};var Ss=function(l,p,u){this._el=l,this._mousePan=p,this._touchPan=u};Ss.prototype.enable=function(l){this._inertiaOptions=l||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},Ss.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},Ss.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},Ss.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Oa=function(l,p,u){this._pitchWithRotate=l.pitchWithRotate,this._mouseRotate=p,this._mousePitch=u};Oa.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Oa.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Oa.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Oa.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Do=function(l,p,u,h){this._el=l,this._touchZoom=p,this._touchRotate=u,this._tapDragZoom=h,this._rotationDisabled=!1,this._enabled=!0};Do.prototype.enable=function(l){this._touchZoom.enable(l),this._rotationDisabled||this._touchRotate.enable(l),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},Do.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},Do.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Do.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Do.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Do.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var xi=function(l){return l.zoom||l.drag||l.pitch||l.rotate},iu=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p}(o.Event);function kt(l){return l.panDelta&&l.panDelta.mag()||l.zoomDelta||l.bearingDelta||l.pitchDelta}var xt=function(l,p){this._map=l,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new eu(l),this._bearingSnap=p.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(p),o.bindAll(["handleEvent","handleWindowEvent"],this);var u=this._el;this._listeners=[[u,"touchstart",{passive:!0}],[u,"touchmove",{passive:!1}],[u,"touchend",void 0],[u,"touchcancel",void 0],[u,"mousedown",void 0],[u,"mousemove",void 0],[u,"mouseup",void 0],[o.window.document,"mousemove",{capture:!0}],[o.window.document,"mouseup",void 0],[u,"mouseover",void 0],[u,"mouseout",void 0],[u,"dblclick",void 0],[u,"click",void 0],[u,"keydown",{capture:!1}],[u,"keyup",void 0],[u,"wheel",{passive:!1}],[u,"contextmenu",void 0],[o.window,"blur",void 0]];for(var h=0,g=this._listeners;h<g.length;h+=1){var b=g[h],w=b[0];x.addEventListener(w,b[1],w===o.window.document?this.handleWindowEvent:this.handleEvent,b[2])}};xt.prototype.destroy=function(){for(var l=0,p=this._listeners;l<p.length;l+=1){var u=p[l],h=u[0];x.removeEventListener(h,u[1],h===o.window.document?this.handleWindowEvent:this.handleEvent,u[2])}},xt.prototype._addDefaultHandlers=function(l){var p=this._map,u=p.getCanvasContainer();this._add("mapEvent",new Ln(p,l));var h=p.boxZoom=new Vi(p,l);this._add("boxZoom",h);var g=new qi,b=new mo;p.doubleClickZoom=new Zo(b,g),this._add("tapZoom",g),this._add("clickZoom",b);var w=new ui;this._add("tapDragZoom",w);var C=p.touchPitch=new hf;this._add("touchPitch",C);var M=new ic(l),N=new ff(l);p.dragRotate=new Oa(l,M,N),this._add("mouseRotate",M,["mousePitch"]),this._add("mousePitch",N,["mouseRotate"]);var K=new pf(l),X=new ho(l);p.dragPan=new Ss(u,K,X),this._add("mousePan",K),this._add("touchPan",X,["touchZoom","touchRotate"]);var J=new Yd,ue=new Gi;p.touchZoomRotate=new Do(u,ue,J,w),this._add("touchRotate",J,["touchPan","touchZoom"]),this._add("touchZoom",ue,["touchPan","touchRotate"]);var le=p.scrollZoom=new pr(p,this);this._add("scrollZoom",le,["mousePan"]);var ge=p.keyboard=new zo;this._add("keyboard",ge),this._add("blockableMapEvent",new vt(p));for(var oe=0,ye=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];oe<ye.length;oe+=1){var be=ye[oe];l.interactive&&l[be]&&p[be].enable(l[be])}},xt.prototype._add=function(l,p,u){this._handlers.push({handlerName:l,handler:p,allowed:u}),this._handlersById[l]=p},xt.prototype.stop=function(l){if(!this._updatingCamera){for(var p=0,u=this._handlers;p<u.length;p+=1)u[p].handler.reset();this._inertia.clear(),this._fireEvents({},{},l),this._changes=[]}},xt.prototype.isActive=function(){for(var l=0,p=this._handlers;l<p.length;l+=1)if(p[l].handler.isActive())return!0;return!1},xt.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},xt.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},xt.prototype.isMoving=function(){return!!xi(this._eventsInProgress)||this.isZooming()},xt.prototype._blockedByActive=function(l,p,u){for(var h in l)if(h!==u&&(!p||p.indexOf(h)<0))return!0;return!1},xt.prototype.handleWindowEvent=function(l){this.handleEvent(l,l.type+"Window")},xt.prototype._getMapTouches=function(l){for(var p=[],u=0,h=l;u<h.length;u+=1){var g=h[u];this._el.contains(g.target)&&p.push(g)}return p},xt.prototype.handleEvent=function(l,p){this._updatingCamera=!0;for(var u=l.type==="renderFrame"?void 0:l,h={needsRenderFrame:!1},g={},b={},w=l.touches?this._getMapTouches(l.touches):void 0,C=w?x.touchPos(this._el,w):x.mousePos(this._el,l),M=0,N=this._handlers;M<N.length;M+=1){var K=N[M],X=K.handlerName,J=K.handler,ue=K.allowed;if(J.isEnabled()){var le=void 0;this._blockedByActive(b,ue,X)?J.reset():J[p||l.type]&&(le=J[p||l.type](l,C,w),this.mergeHandlerResult(h,g,le,X,u),le&&le.needsRenderFrame&&this._triggerRenderFrame()),(le||J.isActive())&&(b[X]=J)}}var ge={};for(var oe in this._previousActiveHandlers)b[oe]||(ge[oe]=u);this._previousActiveHandlers=b,(Object.keys(ge).length||kt(h))&&(this._changes.push([h,g,ge]),this._triggerRenderFrame()),(Object.keys(b).length||kt(h))&&this._map._stop(!0),this._updatingCamera=!1;var ye=h.cameraAnimation;ye&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ye(this._map))},xt.prototype.mergeHandlerResult=function(l,p,u,h,g){if(u){o.extend(l,u);var b={handlerName:h,originalEvent:u.originalEvent||g};u.zoomDelta!==void 0&&(p.zoom=b),u.panDelta!==void 0&&(p.drag=b),u.pitchDelta!==void 0&&(p.pitch=b),u.bearingDelta!==void 0&&(p.rotate=b)}},xt.prototype._applyChanges=function(){for(var l={},p={},u={},h=0,g=this._changes;h<g.length;h+=1){var b=g[h],w=b[0],C=b[1],M=b[2];w.panDelta&&(l.panDelta=(l.panDelta||new o.Point(0,0))._add(w.panDelta)),w.zoomDelta&&(l.zoomDelta=(l.zoomDelta||0)+w.zoomDelta),w.bearingDelta&&(l.bearingDelta=(l.bearingDelta||0)+w.bearingDelta),w.pitchDelta&&(l.pitchDelta=(l.pitchDelta||0)+w.pitchDelta),w.around!==void 0&&(l.around=w.around),w.pinchAround!==void 0&&(l.pinchAround=w.pinchAround),w.noInertia&&(l.noInertia=w.noInertia),o.extend(p,C),o.extend(u,M)}this._updateMapTransform(l,p,u),this._changes=[]},xt.prototype._updateMapTransform=function(l,p,u){var h=this._map,g=h.transform;if(!kt(l))return this._fireEvents(p,u,!0);var b=l.panDelta,w=l.zoomDelta,C=l.bearingDelta,M=l.pitchDelta,N=l.around,K=l.pinchAround;K!==void 0&&(N=K),h._stop(!0),N=N||h.transform.centerPoint;var X=g.pointLocation(b?N.sub(b):N);C&&(g.bearing+=C),M&&(g.pitch+=M),w&&(g.zoom+=w),g.setLocationAtPoint(X,N),this._map._update(),l.noInertia||this._inertia.record(l),this._fireEvents(p,u,!0)},xt.prototype._fireEvents=function(l,p,u){var h=this,g=xi(this._eventsInProgress),b=xi(l),w={};for(var C in l)this._eventsInProgress[C]||(w[C+"start"]=l[C].originalEvent),this._eventsInProgress[C]=l[C];for(var M in!g&&b&&this._fireEvent("movestart",b.originalEvent),w)this._fireEvent(M,w[M]);for(var N in b&&this._fireEvent("move",b.originalEvent),l)this._fireEvent(N,l[N].originalEvent);var K,X={};for(var J in this._eventsInProgress){var ue=this._eventsInProgress[J],le=ue.handlerName,ge=ue.originalEvent;this._handlersById[le].isActive()||(delete this._eventsInProgress[J],X[J+"end"]=K=p[le]||ge)}for(var oe in X)this._fireEvent(oe,X[oe]);var ye=xi(this._eventsInProgress);if(u&&(g||b)&&!ye){this._updatingCamera=!0;var be=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Ae=function(Ne){return Ne!==0&&-h._bearingSnap<Ne&&Ne<h._bearingSnap};be?(Ae(be.bearing||this._map.getBearing())&&(be.bearing=0),this._map.easeTo(be,{originalEvent:K})):(this._map.fire(new o.Event("moveend",{originalEvent:K})),Ae(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},xt.prototype._fireEvent=function(l,p){this._map.fire(new o.Event(l,p?{originalEvent:p}:{}))},xt.prototype._requestFrame=function(){var l=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(p){delete l._frameId,l.handleEvent(new iu("renderFrame",{timeStamp:p})),l._applyChanges()})},xt.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var sc=function(l){function p(u,h){l.call(this),this._moving=!1,this._zooming=!1,this.transform=u,this._bearingSnap=h.bearingSnap,o.bindAll(["_renderFrameCallback"],this)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getCenter=function(){return new o.LngLat(this.transform.center.lng,this.transform.center.lat)},p.prototype.setCenter=function(u,h){return this.jumpTo({center:u},h)},p.prototype.panBy=function(u,h,g){return u=o.Point.convert(u).mult(-1),this.panTo(this.transform.center,o.extend({offset:u},h),g)},p.prototype.panTo=function(u,h,g){return this.easeTo(o.extend({center:u},h),g)},p.prototype.getZoom=function(){return this.transform.zoom},p.prototype.setZoom=function(u,h){return this.jumpTo({zoom:u},h),this},p.prototype.zoomTo=function(u,h,g){return this.easeTo(o.extend({zoom:u},h),g)},p.prototype.zoomIn=function(u,h){return this.zoomTo(this.getZoom()+1,u,h),this},p.prototype.zoomOut=function(u,h){return this.zoomTo(this.getZoom()-1,u,h),this},p.prototype.getBearing=function(){return this.transform.bearing},p.prototype.setBearing=function(u,h){return this.jumpTo({bearing:u},h),this},p.prototype.getPadding=function(){return this.transform.padding},p.prototype.setPadding=function(u,h){return this.jumpTo({padding:u},h),this},p.prototype.rotateTo=function(u,h,g){return this.easeTo(o.extend({bearing:u},h),g)},p.prototype.resetNorth=function(u,h){return this.rotateTo(0,o.extend({duration:1e3},u),h),this},p.prototype.resetNorthPitch=function(u,h){return this.easeTo(o.extend({bearing:0,pitch:0,duration:1e3},u),h),this},p.prototype.snapToNorth=function(u,h){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(u,h):this},p.prototype.getPitch=function(){return this.transform.pitch},p.prototype.setPitch=function(u,h){return this.jumpTo({pitch:u},h),this},p.prototype.cameraForBounds=function(u,h){u=o.LngLatBounds.convert(u);var g=h&&h.bearing||0;return this._cameraForBoxAndBearing(u.getNorthWest(),u.getSouthEast(),g,h)},p.prototype._cameraForBoxAndBearing=function(u,h,g,b){var w={top:0,bottom:0,right:0,left:0};if(typeof(b=o.extend({padding:w,offset:[0,0],maxZoom:this.transform.maxZoom},b)).padding=="number"){var C=b.padding;b.padding={top:C,bottom:C,right:C,left:C}}b.padding=o.extend(w,b.padding);var M=this.transform,N=M.padding,K=M.project(o.LngLat.convert(u)),X=M.project(o.LngLat.convert(h)),J=K.rotate(-g*Math.PI/180),ue=X.rotate(-g*Math.PI/180),le=new o.Point(Math.max(J.x,ue.x),Math.max(J.y,ue.y)),ge=new o.Point(Math.min(J.x,ue.x),Math.min(J.y,ue.y)),oe=le.sub(ge),ye=(M.width-(N.left+N.right+b.padding.left+b.padding.right))/oe.x,be=(M.height-(N.top+N.bottom+b.padding.top+b.padding.bottom))/oe.y;if(!(be<0||ye<0)){var Ae=Math.min(M.scaleZoom(M.scale*Math.min(ye,be)),b.maxZoom),Ne=typeof b.offset.x=="number"?new o.Point(b.offset.x,b.offset.y):o.Point.convert(b.offset),De=new o.Point((b.padding.left-b.padding.right)/2,(b.padding.top-b.padding.bottom)/2).rotate(g*Math.PI/180),Fe=Ne.add(De).mult(M.scale/M.zoomScale(Ae));return{center:M.unproject(K.add(X).div(2).sub(Fe)),zoom:Ae,bearing:g}}o.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},p.prototype.fitBounds=function(u,h,g){return this._fitInternal(this.cameraForBounds(u,h),h,g)},p.prototype.fitScreenCoordinates=function(u,h,g,b,w){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(o.Point.convert(u)),this.transform.pointLocation(o.Point.convert(h)),g,b),b,w)},p.prototype._fitInternal=function(u,h,g){return u?(delete(h=o.extend(u,h)).padding,h.linear?this.easeTo(h,g):this.flyTo(h,g)):this},p.prototype.jumpTo=function(u,h){this.stop();var g=this.transform,b=!1,w=!1,C=!1;return"zoom"in u&&g.zoom!==+u.zoom&&(b=!0,g.zoom=+u.zoom),u.center!==void 0&&(g.center=o.LngLat.convert(u.center)),"bearing"in u&&g.bearing!==+u.bearing&&(w=!0,g.bearing=+u.bearing),"pitch"in u&&g.pitch!==+u.pitch&&(C=!0,g.pitch=+u.pitch),u.padding==null||g.isPaddingEqual(u.padding)||(g.padding=u.padding),this.fire(new o.Event("movestart",h)).fire(new o.Event("move",h)),b&&this.fire(new o.Event("zoomstart",h)).fire(new o.Event("zoom",h)).fire(new o.Event("zoomend",h)),w&&this.fire(new o.Event("rotatestart",h)).fire(new o.Event("rotate",h)).fire(new o.Event("rotateend",h)),C&&this.fire(new o.Event("pitchstart",h)).fire(new o.Event("pitch",h)).fire(new o.Event("pitchend",h)),this.fire(new o.Event("moveend",h))},p.prototype.easeTo=function(u,h){var g=this;this._stop(!1,u.easeId),((u=o.extend({offset:[0,0],duration:500,easing:o.ease},u)).animate===!1||!u.essential&&o.browser.prefersReducedMotion)&&(u.duration=0);var b=this.transform,w=this.getZoom(),C=this.getBearing(),M=this.getPitch(),N=this.getPadding(),K="zoom"in u?+u.zoom:w,X="bearing"in u?this._normalizeBearing(u.bearing,C):C,J="pitch"in u?+u.pitch:M,ue="padding"in u?u.padding:b.padding,le=o.Point.convert(u.offset),ge=b.centerPoint.add(le),oe=b.pointLocation(ge),ye=o.LngLat.convert(u.center||oe);this._normalizeCenter(ye);var be,Ae,Ne=b.project(oe),De=b.project(ye).sub(Ne),Fe=b.zoomScale(K-w);u.around&&(be=o.LngLat.convert(u.around),Ae=b.locationPoint(be));var Ke={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||K!==w,this._rotating=this._rotating||C!==X,this._pitching=this._pitching||J!==M,this._padding=!b.isPaddingEqual(ue),this._easeId=u.easeId,this._prepareEase(h,u.noMoveStart,Ke),this._ease(function(tt){if(g._zooming&&(b.zoom=o.number(w,K,tt)),g._rotating&&(b.bearing=o.number(C,X,tt)),g._pitching&&(b.pitch=o.number(M,J,tt)),g._padding&&(b.interpolatePadding(N,ue,tt),ge=b.centerPoint.add(le)),be)b.setLocationAtPoint(be,Ae);else{var et=b.zoomScale(b.zoom-w),dt=K>w?Math.min(2,Fe):Math.max(.5,Fe),Tt=Math.pow(dt,1-tt),Rt=b.unproject(Ne.add(De.mult(tt*Tt)).mult(et));b.setLocationAtPoint(b.renderWorldCopies?Rt.wrap():Rt,ge)}g._fireMoveEvents(h)},function(tt){g._afterEase(h,tt)},u),this},p.prototype._prepareEase=function(u,h,g){g===void 0&&(g={}),this._moving=!0,h||g.moving||this.fire(new o.Event("movestart",u)),this._zooming&&!g.zooming&&this.fire(new o.Event("zoomstart",u)),this._rotating&&!g.rotating&&this.fire(new o.Event("rotatestart",u)),this._pitching&&!g.pitching&&this.fire(new o.Event("pitchstart",u))},p.prototype._fireMoveEvents=function(u){this.fire(new o.Event("move",u)),this._zooming&&this.fire(new o.Event("zoom",u)),this._rotating&&this.fire(new o.Event("rotate",u)),this._pitching&&this.fire(new o.Event("pitch",u))},p.prototype._afterEase=function(u,h){if(!this._easeId||!h||this._easeId!==h){delete this._easeId;var g=this._zooming,b=this._rotating,w=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,g&&this.fire(new o.Event("zoomend",u)),b&&this.fire(new o.Event("rotateend",u)),w&&this.fire(new o.Event("pitchend",u)),this.fire(new o.Event("moveend",u))}},p.prototype.flyTo=function(u,h){var g=this;if(!u.essential&&o.browser.prefersReducedMotion){var b=o.pick(u,["center","zoom","bearing","pitch","around"]);return this.jumpTo(b,h)}this.stop(),u=o.extend({offset:[0,0],speed:1.2,curve:1.42,easing:o.ease},u);var w=this.transform,C=this.getZoom(),M=this.getBearing(),N=this.getPitch(),K=this.getPadding(),X="zoom"in u?o.clamp(+u.zoom,w.minZoom,w.maxZoom):C,J="bearing"in u?this._normalizeBearing(u.bearing,M):M,ue="pitch"in u?+u.pitch:N,le="padding"in u?u.padding:w.padding,ge=w.zoomScale(X-C),oe=o.Point.convert(u.offset),ye=w.centerPoint.add(oe),be=w.pointLocation(ye),Ae=o.LngLat.convert(u.center||be);this._normalizeCenter(Ae);var Ne=w.project(be),De=w.project(Ae).sub(Ne),Fe=u.curve,Ke=Math.max(w.width,w.height),tt=Ke/ge,et=De.mag();if("minZoom"in u){var dt=o.clamp(Math.min(u.minZoom,C,X),w.minZoom,w.maxZoom),Tt=Ke/w.zoomScale(dt-C);Fe=Math.sqrt(Tt/et*2)}var Rt=Fe*Fe;function Mt(jt){var Ft=(tt*tt-Ke*Ke+(jt?-1:1)*Rt*Rt*et*et)/(2*(jt?tt:Ke)*Rt*et);return Math.log(Math.sqrt(Ft*Ft+1)-Ft)}function br(jt){return(Math.exp(jt)-Math.exp(-jt))/2}function yt(jt){return(Math.exp(jt)+Math.exp(-jt))/2}var Ht=Mt(0),nr=function(jt){return yt(Ht)/yt(Ht+Fe*jt)},Gt=function(jt){return Ke*((yt(Ht)*(br(Ft=Ht+Fe*jt)/yt(Ft))-br(Ht))/Rt)/et;var Ft},qt=(Mt(1)-Ht)/Fe;if(Math.abs(et)<1e-6||!isFinite(qt)){if(Math.abs(Ke-tt)<1e-6)return this.easeTo(u,h);var Qt=tt<Ke?-1:1;qt=Math.abs(Math.log(tt/Ke))/Fe,Gt=function(){return 0},nr=function(jt){return Math.exp(Qt*Fe*jt)}}return u.duration="duration"in u?+u.duration:1e3*qt/("screenSpeed"in u?+u.screenSpeed/Fe:+u.speed),u.maxDuration&&u.duration>u.maxDuration&&(u.duration=0),this._zooming=!0,this._rotating=M!==J,this._pitching=ue!==N,this._padding=!w.isPaddingEqual(le),this._prepareEase(h,!1),this._ease(function(jt){var Ft=jt*qt,Vn=1/nr(Ft);w.zoom=jt===1?X:C+w.scaleZoom(Vn),g._rotating&&(w.bearing=o.number(M,J,jt)),g._pitching&&(w.pitch=o.number(N,ue,jt)),g._padding&&(w.interpolatePadding(K,le,jt),ye=w.centerPoint.add(oe));var vn=jt===1?Ae:w.unproject(Ne.add(De.mult(Gt(Ft))).mult(Vn));w.setLocationAtPoint(w.renderWorldCopies?vn.wrap():vn,ye),g._fireMoveEvents(h)},function(){return g._afterEase(h)},u),this},p.prototype.isEasing=function(){return!!this._easeFrameId},p.prototype.stop=function(){return this._stop()},p.prototype._stop=function(u,h){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var g=this._onEaseEnd;delete this._onEaseEnd,g.call(this,h)}if(!u){var b=this.handlers;b&&b.stop(!1)}return this},p.prototype._ease=function(u,h,g){g.animate===!1||g.duration===0?(u(1),h()):(this._easeStart=o.browser.now(),this._easeOptions=g,this._onEaseFrame=u,this._onEaseEnd=h,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},p.prototype._renderFrameCallback=function(){var u=Math.min((o.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(u)),u<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},p.prototype._normalizeBearing=function(u,h){u=o.wrap(u,-180,180);var g=Math.abs(u-h);return Math.abs(u-360-h)<g&&(u-=360),Math.abs(u+360-h)<g&&(u+=360),u},p.prototype._normalizeCenter=function(u){var h=this.transform;if(h.renderWorldCopies&&!h.lngRange){var g=u.lng-h.center.lng;u.lng+=g>180?-360:g<-180?360:0}},p}(o.Evented),bi=function(l){l===void 0&&(l={}),this.options=l,o.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};bi.prototype.getDefaultPosition=function(){return"bottom-right"},bi.prototype.onAdd=function(l){var p=this.options&&this.options.compact;return this._map=l,this._container=x.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=x.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=x.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),p&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),p===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},bi.prototype.onRemove=function(){x.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},bi.prototype._setElementTitle=function(l,p){var u=this._map._getUIString("AttributionControl."+p);l.title=u,l.setAttribute("aria-label",u)},bi.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},bi.prototype._updateEditLink=function(){var l=this._editLink;l||(l=this._editLink=this._container.querySelector(".mapbox-improve-map"));var p=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||o.config.ACCESS_TOKEN}];if(l){var u=p.reduce(function(h,g,b){return g.value&&(h+=g.key+"="+g.value+(b<p.length-1?"&":"")),h},"?");l.href=o.config.FEEDBACK_URL+"/"+u+(this._map._hash?this._map._hash.getHashString(!0):""),l.rel="noopener nofollow",this._setElementTitle(l,"MapFeedback")}},bi.prototype._updateData=function(l){!l||l.sourceDataType!=="metadata"&&l.sourceDataType!=="visibility"&&l.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},bi.prototype._updateAttributions=function(){if(this._map.style){var l=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?l=l.concat(this.options.customAttribution.map(function(C){return typeof C!="string"?"":C})):typeof this.options.customAttribution=="string"&&l.push(this.options.customAttribution)),this._map.style.stylesheet){var p=this._map.style.stylesheet;this.styleOwner=p.owner,this.styleId=p.id}var u=this._map.style.sourceCaches;for(var h in u){var g=u[h];if(g.used){var b=g.getSource();b.attribution&&l.indexOf(b.attribution)<0&&l.push(b.attribution)}}l.sort(function(C,M){return C.length-M.length});var w=(l=l.filter(function(C,M){for(var N=M+1;N<l.length;N++)if(l[N].indexOf(C)>=0)return!1;return!0})).join(" | ");w!==this._attribHTML&&(this._attribHTML=w,l.length?(this._innerContainer.innerHTML=w,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},bi.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var Oo=function(){o.bindAll(["_updateLogo"],this),o.bindAll(["_updateCompact"],this)};Oo.prototype.onAdd=function(l){this._map=l,this._container=x.create("div","mapboxgl-ctrl");var p=x.create("a","mapboxgl-ctrl-logo");return p.target="_blank",p.rel="noopener nofollow",p.href="https://www.mapbox.com/",p.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),p.setAttribute("rel","noopener nofollow"),this._container.appendChild(p),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Oo.prototype.onRemove=function(){x.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Oo.prototype.getDefaultPosition=function(){return"bottom-left"},Oo.prototype._updateLogo=function(l){l&&l.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},Oo.prototype._logoRequired=function(){if(this._map.style){var l=this._map.style.sourceCaches;for(var p in l)if(l[p].getSource().mapbox_logo)return!0;return!1}},Oo.prototype._updateCompact=function(){var l=this._container.children;if(l.length){var p=l[0];this._map.getCanvasContainer().offsetWidth<250?p.classList.add("mapboxgl-compact"):p.classList.remove("mapboxgl-compact")}};var ci=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};ci.prototype.add=function(l){var p=++this._id;return this._queue.push({callback:l,id:p,cancelled:!1}),p},ci.prototype.remove=function(l){for(var p=this._currentlyRunning,u=0,h=p?this._queue.concat(p):this._queue;u<h.length;u+=1){var g=h[u];if(g.id===l)return void(g.cancelled=!0)}},ci.prototype.run=function(l){l===void 0&&(l=0);var p=this._currentlyRunning=this._queue;this._queue=[];for(var u=0,h=p;u<h.length;u+=1){var g=h[u];if(!g.cancelled&&(g.callback(l),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},ci.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Ko={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},mf=o.window.HTMLImageElement,lc=o.window.HTMLElement,Br=o.window.ImageBitmap,Qn={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Jd=function(l){function p(h){var g=this;if((h=o.extend({},Qn,h)).minZoom!=null&&h.maxZoom!=null&&h.minZoom>h.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(h.minPitch!=null&&h.maxPitch!=null&&h.minPitch>h.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(h.minPitch!=null&&h.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(h.maxPitch!=null&&h.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var b=new gr(h.minZoom,h.maxZoom,h.minPitch,h.maxPitch,h.renderWorldCopies);if(l.call(this,b,h),this._interactive=h.interactive,this._maxTileCacheSize=h.maxTileCacheSize,this._failIfMajorPerformanceCaveat=h.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=h.preserveDrawingBuffer,this._antialias=h.antialias,this._trackResize=h.trackResize,this._bearingSnap=h.bearingSnap,this._refreshExpiredTiles=h.refreshExpiredTiles,this._fadeDuration=h.fadeDuration,this._crossSourceCollisions=h.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=h.collectResourceTiming,this._renderTaskQueue=new ci,this._controls=[],this._mapId=o.uniqueId(),this._locale=o.extend({},Ko,h.locale),this._clickTolerance=h.clickTolerance,this._requestManager=new o.RequestManager(h.transformRequest,h.accessToken),typeof h.container=="string"){if(this._container=o.window.document.getElementById(h.container),!this._container)throw new Error("Container '"+h.container+"' not found.")}else{if(!(h.container instanceof lc))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=h.container}if(h.maxBounds&&this.setMaxBounds(h.maxBounds),o.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return g._update(!1)}),this.on("moveend",function(){return g._update(!1)}),this.on("zoom",function(){return g._update(!0)}),o.window!==void 0&&(o.window.addEventListener("online",this._onWindowOnline,!1),o.window.addEventListener("resize",this._onWindowResize,!1),o.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new xt(this,h),this._hash=h.hash&&new no(typeof h.hash=="string"&&h.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:h.center,zoom:h.zoom,bearing:h.bearing,pitch:h.pitch}),h.bounds&&(this.resize(),this.fitBounds(h.bounds,o.extend({},h.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=h.localIdeographFontFamily,h.style&&this.setStyle(h.style,{localIdeographFontFamily:h.localIdeographFontFamily}),h.attributionControl&&this.addControl(new bi({customAttribution:h.customAttribution})),this.addControl(new Oo,h.logoPosition),this.on("style.load",function(){g.transform.unmodified&&g.jumpTo(g.style.stylesheet)}),this.on("data",function(w){g._update(w.dataType==="style"),g.fire(new o.Event(w.dataType+"data",w))}),this.on("dataloading",function(w){g.fire(new o.Event(w.dataType+"dataloading",w))})}l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p;var u={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return p.prototype._getMapId=function(){return this._mapId},p.prototype.addControl=function(h,g){if(g===void 0&&(g=h.getDefaultPosition?h.getDefaultPosition():"top-right"),!h||!h.onAdd)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var b=h.onAdd(this);this._controls.push(h);var w=this._controlPositions[g];return g.indexOf("bottom")!==-1?w.insertBefore(b,w.firstChild):w.appendChild(b),this},p.prototype.removeControl=function(h){if(!h||!h.onRemove)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var g=this._controls.indexOf(h);return g>-1&&this._controls.splice(g,1),h.onRemove(this),this},p.prototype.hasControl=function(h){return this._controls.indexOf(h)>-1},p.prototype.resize=function(h){var g=this._containerDimensions(),b=g[0],w=g[1];if(b===this.transform.width&&w===this.transform.height)return this;this._resizeCanvas(b,w),this.transform.resize(b,w),this.painter.resize(b,w);var C=!this._moving;return C&&this.fire(new o.Event("movestart",h)).fire(new o.Event("move",h)),this.fire(new o.Event("resize",h)),C&&this.fire(new o.Event("moveend",h)),this},p.prototype.getBounds=function(){return this.transform.getBounds()},p.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},p.prototype.setMaxBounds=function(h){return this.transform.setMaxBounds(o.LngLatBounds.convert(h)),this._update()},p.prototype.setMinZoom=function(h){if((h=h??-2)>=-2&&h<=this.transform.maxZoom)return this.transform.minZoom=h,this._update(),this.getZoom()<h&&this.setZoom(h),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},p.prototype.getMinZoom=function(){return this.transform.minZoom},p.prototype.setMaxZoom=function(h){if((h=h??22)>=this.transform.minZoom)return this.transform.maxZoom=h,this._update(),this.getZoom()>h&&this.setZoom(h),this;throw new Error("maxZoom must be greater than the current minZoom")},p.prototype.getMaxZoom=function(){return this.transform.maxZoom},p.prototype.setMinPitch=function(h){if((h=h??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(h>=0&&h<=this.transform.maxPitch)return this.transform.minPitch=h,this._update(),this.getPitch()<h&&this.setPitch(h),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},p.prototype.getMinPitch=function(){return this.transform.minPitch},p.prototype.setMaxPitch=function(h){if((h=h??60)>60)throw new Error("maxPitch must be less than or equal to 60");if(h>=this.transform.minPitch)return this.transform.maxPitch=h,this._update(),this.getPitch()>h&&this.setPitch(h),this;throw new Error("maxPitch must be greater than the current minPitch")},p.prototype.getMaxPitch=function(){return this.transform.maxPitch},p.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},p.prototype.setRenderWorldCopies=function(h){return this.transform.renderWorldCopies=h,this._update()},p.prototype.project=function(h){return this.transform.locationPoint(o.LngLat.convert(h))},p.prototype.unproject=function(h){return this.transform.pointLocation(o.Point.convert(h))},p.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},p.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},p.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},p.prototype._createDelegatedListener=function(h,g,b){var w,C=this;if(h==="mouseenter"||h==="mouseover"){var M=!1;return{layer:g,listener:b,delegates:{mousemove:function(K){var X=C.getLayer(g)?C.queryRenderedFeatures(K.point,{layers:[g]}):[];X.length?M||(M=!0,b.call(C,new Nn(h,C,K.originalEvent,{features:X}))):M=!1},mouseout:function(){M=!1}}}}if(h==="mouseleave"||h==="mouseout"){var N=!1;return{layer:g,listener:b,delegates:{mousemove:function(K){(C.getLayer(g)?C.queryRenderedFeatures(K.point,{layers:[g]}):[]).length?N=!0:N&&(N=!1,b.call(C,new Nn(h,C,K.originalEvent)))},mouseout:function(K){N&&(N=!1,b.call(C,new Nn(h,C,K.originalEvent)))}}}}return{layer:g,listener:b,delegates:(w={},w[h]=function(K){var X=C.getLayer(g)?C.queryRenderedFeatures(K.point,{layers:[g]}):[];X.length&&(K.features=X,b.call(C,K),delete K.features)},w)}},p.prototype.on=function(h,g,b){if(b===void 0)return l.prototype.on.call(this,h,g);var w=this._createDelegatedListener(h,g,b);for(var C in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[h]=this._delegatedListeners[h]||[],this._delegatedListeners[h].push(w),w.delegates)this.on(C,w.delegates[C]);return this},p.prototype.once=function(h,g,b){if(b===void 0)return l.prototype.once.call(this,h,g);var w=this._createDelegatedListener(h,g,b);for(var C in w.delegates)this.once(C,w.delegates[C]);return this},p.prototype.off=function(h,g,b){var w=this;return b===void 0?l.prototype.off.call(this,h,g):(this._delegatedListeners&&this._delegatedListeners[h]&&function(C){for(var M=C[h],N=0;N<M.length;N++){var K=M[N];if(K.layer===g&&K.listener===b){for(var X in K.delegates)w.off(X,K.delegates[X]);return M.splice(N,1),w}}}(this._delegatedListeners),this)},p.prototype.queryRenderedFeatures=function(h,g){if(!this.style)return[];var b;if(g!==void 0||h===void 0||h instanceof o.Point||Array.isArray(h)||(g=h,h=void 0),g=g||{},(h=h||[[0,0],[this.transform.width,this.transform.height]])instanceof o.Point||typeof h[0]=="number")b=[o.Point.convert(h)];else{var w=o.Point.convert(h[0]),C=o.Point.convert(h[1]);b=[w,new o.Point(C.x,w.y),C,new o.Point(w.x,C.y),w]}return this.style.queryRenderedFeatures(b,g,this.transform)},p.prototype.querySourceFeatures=function(h,g){return this.style.querySourceFeatures(h,g)},p.prototype.setStyle=function(h,g){return(g=o.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},g)).diff!==!1&&g.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&h?(this._diffStyle(h,g),this):(this._localIdeographFontFamily=g.localIdeographFontFamily,this._updateStyle(h,g))},p.prototype._getUIString=function(h){var g=this._locale[h];if(g==null)throw new Error("Missing UI string '"+h+"'");return g},p.prototype._updateStyle=function(h,g){return this.style&&(this.style.setEventedParent(null),this.style._remove()),h?(this.style=new ji(this,g||{}),this.style.setEventedParent(this,{style:this.style}),typeof h=="string"?this.style.loadURL(h):this.style.loadJSON(h),this):(delete this.style,this)},p.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new ji(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},p.prototype._diffStyle=function(h,g){var b=this;if(typeof h=="string"){var w=this._requestManager.normalizeStyleURL(h),C=this._requestManager.transformRequest(w,o.ResourceType.Style);o.getJSON(C,function(M,N){M?b.fire(new o.ErrorEvent(M)):N&&b._updateDiff(N,g)})}else typeof h=="object"&&this._updateDiff(h,g)},p.prototype._updateDiff=function(h,g){try{this.style.setState(h)&&this._update(!0)}catch(b){o.warnOnce("Unable to perform style diff: "+(b.message||b.error||b)+".  Rebuilding the style from scratch."),this._updateStyle(h,g)}},p.prototype.getStyle=function(){if(this.style)return this.style.serialize()},p.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():o.warnOnce("There is no style added to the map.")},p.prototype.addSource=function(h,g){return this._lazyInitEmptyStyle(),this.style.addSource(h,g),this._update(!0)},p.prototype.isSourceLoaded=function(h){var g=this.style&&this.style.sourceCaches[h];if(g!==void 0)return g.loaded();this.fire(new o.ErrorEvent(new Error("There is no source with ID '"+h+"'")))},p.prototype.areTilesLoaded=function(){var h=this.style&&this.style.sourceCaches;for(var g in h){var b=h[g]._tiles;for(var w in b){var C=b[w];if(C.state!=="loaded"&&C.state!=="errored")return!1}}return!0},p.prototype.addSourceType=function(h,g,b){return this._lazyInitEmptyStyle(),this.style.addSourceType(h,g,b)},p.prototype.removeSource=function(h){return this.style.removeSource(h),this._update(!0)},p.prototype.getSource=function(h){return this.style.getSource(h)},p.prototype.addImage=function(h,g,b){b===void 0&&(b={});var w=b.pixelRatio;w===void 0&&(w=1);var C=b.sdf;C===void 0&&(C=!1);var M=b.stretchX,N=b.stretchY,K=b.content;if(this._lazyInitEmptyStyle(),g instanceof mf||Br&&g instanceof Br){var X=o.browser.getImageData(g);this.style.addImage(h,{data:new o.RGBAImage({width:X.width,height:X.height},X.data),pixelRatio:w,stretchX:M,stretchY:N,content:K,sdf:C,version:0})}else{if(g.width===void 0||g.height===void 0)return this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var J=g;this.style.addImage(h,{data:new o.RGBAImage({width:g.width,height:g.height},new Uint8Array(g.data)),pixelRatio:w,stretchX:M,stretchY:N,content:K,sdf:C,version:0,userImage:J}),J.onAdd&&J.onAdd(this,h)}},p.prototype.updateImage=function(h,g){var b=this.style.getImage(h);if(!b)return this.fire(new o.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var w=g instanceof mf||Br&&g instanceof Br?o.browser.getImageData(g):g,C=w.width,M=w.height,N=w.data;return C===void 0||M===void 0?this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):C!==b.data.width||M!==b.data.height?this.fire(new o.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(b.data.replace(N,!(g instanceof mf||Br&&g instanceof Br)),void this.style.updateImage(h,b))},p.prototype.hasImage=function(h){return h?!!this.style.getImage(h):(this.fire(new o.ErrorEvent(new Error("Missing required image id"))),!1)},p.prototype.removeImage=function(h){this.style.removeImage(h)},p.prototype.loadImage=function(h,g){o.getImage(this._requestManager.transformRequest(h,o.ResourceType.Image),g)},p.prototype.listImages=function(){return this.style.listImages()},p.prototype.addLayer=function(h,g){return this._lazyInitEmptyStyle(),this.style.addLayer(h,g),this._update(!0)},p.prototype.moveLayer=function(h,g){return this.style.moveLayer(h,g),this._update(!0)},p.prototype.removeLayer=function(h){return this.style.removeLayer(h),this._update(!0)},p.prototype.getLayer=function(h){return this.style.getLayer(h)},p.prototype.setLayerZoomRange=function(h,g,b){return this.style.setLayerZoomRange(h,g,b),this._update(!0)},p.prototype.setFilter=function(h,g,b){return b===void 0&&(b={}),this.style.setFilter(h,g,b),this._update(!0)},p.prototype.getFilter=function(h){return this.style.getFilter(h)},p.prototype.setPaintProperty=function(h,g,b,w){return w===void 0&&(w={}),this.style.setPaintProperty(h,g,b,w),this._update(!0)},p.prototype.getPaintProperty=function(h,g){return this.style.getPaintProperty(h,g)},p.prototype.setLayoutProperty=function(h,g,b,w){return w===void 0&&(w={}),this.style.setLayoutProperty(h,g,b,w),this._update(!0)},p.prototype.getLayoutProperty=function(h,g){return this.style.getLayoutProperty(h,g)},p.prototype.setLight=function(h,g){return g===void 0&&(g={}),this._lazyInitEmptyStyle(),this.style.setLight(h,g),this._update(!0)},p.prototype.getLight=function(){return this.style.getLight()},p.prototype.setFeatureState=function(h,g){return this.style.setFeatureState(h,g),this._update()},p.prototype.removeFeatureState=function(h,g){return this.style.removeFeatureState(h,g),this._update()},p.prototype.getFeatureState=function(h){return this.style.getFeatureState(h)},p.prototype.getContainer=function(){return this._container},p.prototype.getCanvasContainer=function(){return this._canvasContainer},p.prototype.getCanvas=function(){return this._canvas},p.prototype._containerDimensions=function(){var h=0,g=0;return this._container&&(h=this._container.clientWidth||400,g=this._container.clientHeight||300),[h,g]},p.prototype._detectMissingCSS=function(){o.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&o.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},p.prototype._setupContainer=function(){var h=this._container;h.classList.add("mapboxgl-map"),(this._missingCSSCanary=x.create("div","mapboxgl-canary",h)).style.visibility="hidden",this._detectMissingCSS();var g=this._canvasContainer=x.create("div","mapboxgl-canvas-container",h);this._interactive&&g.classList.add("mapboxgl-interactive"),this._canvas=x.create("canvas","mapboxgl-canvas",g),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var b=this._containerDimensions();this._resizeCanvas(b[0],b[1]);var w=this._controlContainer=x.create("div","mapboxgl-control-container",h),C=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(M){C[M]=x.create("div","mapboxgl-ctrl-"+M,w)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},p.prototype._resizeCanvas=function(h,g){var b=o.browser.devicePixelRatio||1;this._canvas.width=b*h,this._canvas.height=b*g,this._canvas.style.width=h+"px",this._canvas.style.height=g+"px"},p.prototype._setupPainter=function(){var h=o.extend({},v.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),g=this._canvas.getContext("webgl",h)||this._canvas.getContext("experimental-webgl",h);g?(this.painter=new ln(g,this.transform),o.webpSupported.testSupport(g)):this.fire(new o.ErrorEvent(new Error("Failed to initialize WebGL")))},p.prototype._contextLost=function(h){h.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new o.Event("webglcontextlost",{originalEvent:h}))},p.prototype._contextRestored=function(h){this._setupPainter(),this.resize(),this._update(),this.fire(new o.Event("webglcontextrestored",{originalEvent:h}))},p.prototype._onMapScroll=function(h){if(h.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},p.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},p.prototype._update=function(h){return this.style?(this._styleDirty=this._styleDirty||h,this._sourcesDirty=!0,this.triggerRepaint(),this):this},p.prototype._requestRenderFrame=function(h){return this._update(),this._renderTaskQueue.add(h)},p.prototype._cancelRenderFrame=function(h){this._renderTaskQueue.remove(h)},p.prototype._render=function(h){var g,b=this,w=0,C=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(g=C.createQueryEXT(),C.beginQueryEXT(C.TIME_ELAPSED_EXT,g),w=o.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(h),!this._removed){var M=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var N=this.transform.zoom,K=o.browser.now();this.style.zoomHistory.update(N,K);var X=new o.EvaluationParameters(N,{now:K,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),J=X.crossFadingFactor();J===1&&J===this._crossFadingFactor||(M=!0,this._crossFadingFactor=J),this.style.update(X)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new o.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new o.Event("load"))),this.style&&(this.style.hasTransitions()||M)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var ue=o.browser.now()-w;C.endQueryEXT(C.TIME_ELAPSED_EXT,g),setTimeout(function(){var oe=C.getQueryObjectEXT(g,C.QUERY_RESULT_EXT)/1e6;C.deleteQueryEXT(g),b.fire(new o.Event("gpu-timing-frame",{cpuTime:ue,gpuTime:oe}))},50)}if(this.listens("gpu-timing-layer")){var le=this.painter.collectGpuTimers();setTimeout(function(){var oe=b.painter.queryGpuTimers(le);b.fire(new o.Event("gpu-timing-layer",{layerTimes:oe}))},50)}var ge=this._sourcesDirty||this._styleDirty||this._placementDirty;return ge||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.Event("idle")),!this._loaded||this._fullyLoaded||ge||(this._fullyLoaded=!0),this}},p.prototype.remove=function(){this._hash&&this._hash.remove();for(var h=0,g=this._controls;h<g.length;h+=1)g[h].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),o.window!==void 0&&(o.window.removeEventListener("resize",this._onWindowResize,!1),o.window.removeEventListener("orientationchange",this._onWindowResize,!1),o.window.removeEventListener("online",this._onWindowOnline,!1));var b=this.painter.context.gl.getExtension("WEBGL_lose_context");b&&b.loseContext(),Es(this._canvasContainer),Es(this._controlContainer),Es(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new o.Event("remove"))},p.prototype.triggerRepaint=function(){var h=this;this.style&&!this._frame&&(this._frame=o.browser.frame(function(g){h._frame=null,h._render(g)}))},p.prototype._onWindowOnline=function(){this._update()},p.prototype._onWindowResize=function(h){this._trackResize&&this.resize({originalEvent:h})._update()},u.showTileBoundaries.get=function(){return!!this._showTileBoundaries},u.showTileBoundaries.set=function(h){this._showTileBoundaries!==h&&(this._showTileBoundaries=h,this._update())},u.showPadding.get=function(){return!!this._showPadding},u.showPadding.set=function(h){this._showPadding!==h&&(this._showPadding=h,this._update())},u.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},u.showCollisionBoxes.set=function(h){this._showCollisionBoxes!==h&&(this._showCollisionBoxes=h,h?this.style._generateCollisionBoxes():this._update())},u.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},u.showOverdrawInspector.set=function(h){this._showOverdrawInspector!==h&&(this._showOverdrawInspector=h,this._update())},u.repaint.get=function(){return!!this._repaint},u.repaint.set=function(h){this._repaint!==h&&(this._repaint=h,this.triggerRepaint())},u.vertices.get=function(){return!!this._vertices},u.vertices.set=function(h){this._vertices=h,this._update()},p.prototype._setCacheLimits=function(h,g){o.setCacheLimits(h,g)},u.version.get=function(){return o.version},Object.defineProperties(p.prototype,u),p}(sc);function Es(l){l.parentNode&&l.parentNode.removeChild(l)}var yf={showCompass:!0,showZoom:!0,visualizePitch:!1},ha=function(l){var p=this;this.options=o.extend({},yf,l),this._container=x.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(u){return u.preventDefault()}),this.options.showZoom&&(o.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(u){return p._map.zoomIn({},{originalEvent:u})}),x.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(u){return p._map.zoomOut({},{originalEvent:u})}),x.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(o.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(u){p.options.visualizePitch?p._map.resetNorthPitch({},{originalEvent:u}):p._map.resetNorth({},{originalEvent:u})}),this._compassIcon=x.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};ha.prototype._updateZoomButtons=function(){var l=this._map.getZoom(),p=l===this._map.getMaxZoom(),u=l===this._map.getMinZoom();this._zoomInButton.disabled=p,this._zoomOutButton.disabled=u,this._zoomInButton.setAttribute("aria-disabled",p.toString()),this._zoomOutButton.setAttribute("aria-disabled",u.toString())},ha.prototype._rotateCompassArrow=function(){var l=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=l},ha.prototype.onAdd=function(l){return this._map=l,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Hi(this._map,this._compass,this.options.visualizePitch)),this._container},ha.prototype.onRemove=function(){x.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},ha.prototype._createButton=function(l,p){var u=x.create("button",l,this._container);return u.type="button",u.addEventListener("click",p),u},ha.prototype._setButtonTitle=function(l,p){var u=this._map._getUIString("NavigationControl."+p);l.title=u,l.setAttribute("aria-label",u)};var Hi=function(l,p,u){u===void 0&&(u=!1),this._clickTolerance=10,this.element=p,this.mouseRotate=new ic({clickTolerance:l.dragRotate._mouseRotate._clickTolerance}),this.map=l,u&&(this.mousePitch=new ff({clickTolerance:l.dragRotate._mousePitch._clickTolerance})),o.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),x.addEventListener(p,"mousedown",this.mousedown),x.addEventListener(p,"touchstart",this.touchstart,{passive:!1}),x.addEventListener(p,"touchmove",this.touchmove),x.addEventListener(p,"touchend",this.touchend),x.addEventListener(p,"touchcancel",this.reset)};function nl(l,p,u){if(l=new o.LngLat(l.lng,l.lat),p){var h=new o.LngLat(l.lng-360,l.lat),g=new o.LngLat(l.lng+360,l.lat),b=u.locationPoint(l).distSqr(p);u.locationPoint(h).distSqr(p)<b?l=h:u.locationPoint(g).distSqr(p)<b&&(l=g)}for(;Math.abs(l.lng-u.center.lng)>180;){var w=u.locationPoint(l);if(w.x>=0&&w.y>=0&&w.x<=u.width&&w.y<=u.height)break;l.lng>u.center.lng?l.lng-=360:l.lng+=360}return l}Hi.prototype.down=function(l,p){this.mouseRotate.mousedown(l,p),this.mousePitch&&this.mousePitch.mousedown(l,p),x.disableDrag()},Hi.prototype.move=function(l,p){var u=this.map,h=this.mouseRotate.mousemoveWindow(l,p);if(h&&h.bearingDelta&&u.setBearing(u.getBearing()+h.bearingDelta),this.mousePitch){var g=this.mousePitch.mousemoveWindow(l,p);g&&g.pitchDelta&&u.setPitch(u.getPitch()+g.pitchDelta)}},Hi.prototype.off=function(){var l=this.element;x.removeEventListener(l,"mousedown",this.mousedown),x.removeEventListener(l,"touchstart",this.touchstart,{passive:!1}),x.removeEventListener(l,"touchmove",this.touchmove),x.removeEventListener(l,"touchend",this.touchend),x.removeEventListener(l,"touchcancel",this.reset),this.offTemp()},Hi.prototype.offTemp=function(){x.enableDrag(),x.removeEventListener(o.window,"mousemove",this.mousemove),x.removeEventListener(o.window,"mouseup",this.mouseup)},Hi.prototype.mousedown=function(l){this.down(o.extend({},l,{ctrlKey:!0,preventDefault:function(){return l.preventDefault()}}),x.mousePos(this.element,l)),x.addEventListener(o.window,"mousemove",this.mousemove),x.addEventListener(o.window,"mouseup",this.mouseup)},Hi.prototype.mousemove=function(l){this.move(l,x.mousePos(this.element,l))},Hi.prototype.mouseup=function(l){this.mouseRotate.mouseupWindow(l),this.mousePitch&&this.mousePitch.mouseupWindow(l),this.offTemp()},Hi.prototype.touchstart=function(l){l.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=x.touchPos(this.element,l.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return l.preventDefault()}},this._startPos))},Hi.prototype.touchmove=function(l){l.targetTouches.length!==1?this.reset():(this._lastPos=x.touchPos(this.element,l.targetTouches)[0],this.move({preventDefault:function(){return l.preventDefault()}},this._lastPos))},Hi.prototype.touchend=function(l){l.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Hi.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Xo={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function uc(l,p,u){var h=l.classList;for(var g in Xo)h.remove("mapboxgl-"+u+"-anchor-"+g);h.add("mapboxgl-"+u+"-anchor-"+p)}var il,ou=function(l){function p(u,h){if(l.call(this),(u instanceof o.window.HTMLElement||h)&&(u=o.extend({element:u},h)),o.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=u&&u.anchor||"center",this._color=u&&u.color||"#3FB1CE",this._scale=u&&u.scale||1,this._draggable=u&&u.draggable||!1,this._clickTolerance=u&&u.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=u&&u.rotation||0,this._rotationAlignment=u&&u.rotationAlignment||"auto",this._pitchAlignment=u&&u.pitchAlignment&&u.pitchAlignment!=="auto"?u.pitchAlignment:this._rotationAlignment,u&&u.element)this._element=u.element,this._offset=o.Point.convert(u&&u.offset||[0,0]);else{this._defaultMarker=!0,this._element=x.create("div"),this._element.setAttribute("aria-label","Map marker");var g=x.createNS("http://www.w3.org/2000/svg","svg");g.setAttributeNS(null,"display","block"),g.setAttributeNS(null,"height","41px"),g.setAttributeNS(null,"width","27px"),g.setAttributeNS(null,"viewBox","0 0 27 41");var b=x.createNS("http://www.w3.org/2000/svg","g");b.setAttributeNS(null,"stroke","none"),b.setAttributeNS(null,"stroke-width","1"),b.setAttributeNS(null,"fill","none"),b.setAttributeNS(null,"fill-rule","evenodd");var w=x.createNS("http://www.w3.org/2000/svg","g");w.setAttributeNS(null,"fill-rule","nonzero");var C=x.createNS("http://www.w3.org/2000/svg","g");C.setAttributeNS(null,"transform","translate(3.0, 29.0)"),C.setAttributeNS(null,"fill","#000000");for(var M=0,N=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];M<N.length;M+=1){var K=N[M],X=x.createNS("http://www.w3.org/2000/svg","ellipse");X.setAttributeNS(null,"opacity","0.04"),X.setAttributeNS(null,"cx","10.5"),X.setAttributeNS(null,"cy","5.80029008"),X.setAttributeNS(null,"rx",K.rx),X.setAttributeNS(null,"ry",K.ry),C.appendChild(X)}var J=x.createNS("http://www.w3.org/2000/svg","g");J.setAttributeNS(null,"fill",this._color);var ue=x.createNS("http://www.w3.org/2000/svg","path");ue.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),J.appendChild(ue);var le=x.createNS("http://www.w3.org/2000/svg","g");le.setAttributeNS(null,"opacity","0.25"),le.setAttributeNS(null,"fill","#000000");var ge=x.createNS("http://www.w3.org/2000/svg","path");ge.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),le.appendChild(ge);var oe=x.createNS("http://www.w3.org/2000/svg","g");oe.setAttributeNS(null,"transform","translate(6.0, 7.0)"),oe.setAttributeNS(null,"fill","#FFFFFF");var ye=x.createNS("http://www.w3.org/2000/svg","g");ye.setAttributeNS(null,"transform","translate(8.0, 8.0)");var be=x.createNS("http://www.w3.org/2000/svg","circle");be.setAttributeNS(null,"fill","#000000"),be.setAttributeNS(null,"opacity","0.25"),be.setAttributeNS(null,"cx","5.5"),be.setAttributeNS(null,"cy","5.5"),be.setAttributeNS(null,"r","5.4999962");var Ae=x.createNS("http://www.w3.org/2000/svg","circle");Ae.setAttributeNS(null,"fill","#FFFFFF"),Ae.setAttributeNS(null,"cx","5.5"),Ae.setAttributeNS(null,"cy","5.5"),Ae.setAttributeNS(null,"r","5.4999962"),ye.appendChild(be),ye.appendChild(Ae),w.appendChild(C),w.appendChild(J),w.appendChild(le),w.appendChild(oe),w.appendChild(ye),g.appendChild(w),g.setAttributeNS(null,"height",41*this._scale+"px"),g.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(g),this._offset=o.Point.convert(u&&u.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Ne){Ne.preventDefault()}),this._element.addEventListener("mousedown",function(Ne){Ne.preventDefault()}),uc(this._element,this._anchor,"marker"),this._popup=null}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.addTo=function(u){return this.remove(),this._map=u,u.getCanvasContainer().appendChild(this._element),u.on("move",this._update),u.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},p.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),x.remove(this._element),this._popup&&this._popup.remove(),this},p.prototype.getLngLat=function(){return this._lngLat},p.prototype.setLngLat=function(u){return this._lngLat=o.LngLat.convert(u),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},p.prototype.getElement=function(){return this._element},p.prototype.setPopup=function(u){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),u){if(!("offset"in u.options)){var h=Math.sqrt(Math.pow(13.5,2)/2);u.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[h,-1*(24.6+h)],"bottom-right":[-h,-1*(24.6+h)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=u,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},p.prototype._onKeyPress=function(u){var h=u.code,g=u.charCode||u.keyCode;h!=="Space"&&h!=="Enter"&&g!==32&&g!==13||this.togglePopup()},p.prototype._onMapClick=function(u){var h=u.originalEvent.target,g=this._element;this._popup&&(h===g||g.contains(h))&&this.togglePopup()},p.prototype.getPopup=function(){return this._popup},p.prototype.togglePopup=function(){var u=this._popup;return u?(u.isOpen()?u.remove():u.addTo(this._map),this):this},p.prototype._update=function(u){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=nl(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var h="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?h="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(h="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var g="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?g="rotateX(0deg)":this._pitchAlignment==="map"&&(g="rotateX("+this._map.getPitch()+"deg)"),u&&u.type!=="moveend"||(this._pos=this._pos.round()),x.setTransform(this._element,Xo[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+g+" "+h)}},p.prototype.getOffset=function(){return this._offset},p.prototype.setOffset=function(u){return this._offset=o.Point.convert(u),this._update(),this},p.prototype._onMove=function(u){if(!this._isDragging){var h=this._clickTolerance||this._map._clickTolerance;this._isDragging=u.point.dist(this._pointerdownPos)>=h}this._isDragging&&(this._pos=u.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.Event("dragstart"))),this.fire(new o.Event("drag")))},p.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.Event("dragend")),this._state="inactive"},p.prototype._addDragHandler=function(u){this._element.contains(u.originalEvent.target)&&(u.preventDefault(),this._positionDelta=u.point.sub(this._pos).add(this._offset),this._pointerdownPos=u.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},p.prototype.setDraggable=function(u){return this._draggable=!!u,this._map&&(u?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},p.prototype.isDraggable=function(){return this._draggable},p.prototype.setRotation=function(u){return this._rotation=u||0,this._update(),this},p.prototype.getRotation=function(){return this._rotation},p.prototype.setRotationAlignment=function(u){return this._rotationAlignment=u||"auto",this._update(),this},p.prototype.getRotationAlignment=function(){return this._rotationAlignment},p.prototype.setPitchAlignment=function(u){return this._pitchAlignment=u&&u!=="auto"?u:this._rotationAlignment,this._update(),this},p.prototype.getPitchAlignment=function(){return this._pitchAlignment},p}(o.Evented),gf={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},ol=0,Cs=!1,vf=function(l){function p(u){l.call(this),this.options=o.extend({},gf,u),o.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.onAdd=function(u){var h;return this._map=u,this._container=x.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),h=this._setupUI,il!==void 0?h(il):o.window.navigator.permissions!==void 0?o.window.navigator.permissions.query({name:"geolocation"}).then(function(g){h(il=g.state!=="denied")}):h(il=!!o.window.navigator.geolocation),this._container},p.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(o.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),x.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,ol=0,Cs=!1},p.prototype._isOutOfMapMaxBounds=function(u){var h=this._map.getMaxBounds(),g=u.coords;return h&&(g.longitude<h.getWest()||g.longitude>h.getEast()||g.latitude<h.getSouth()||g.latitude>h.getNorth())},p.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},p.prototype._onSuccess=function(u){if(this._map){if(this._isOutOfMapMaxBounds(u))return this._setErrorState(),this.fire(new o.Event("outofmaxbounds",u)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=u,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(u),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(u),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("geolocate",u)),this._finish()}},p.prototype._updateCamera=function(u){var h=new o.LngLat(u.coords.longitude,u.coords.latitude),g=u.coords.accuracy,b=this._map.getBearing(),w=o.extend({bearing:b},this.options.fitBoundsOptions);this._map.fitBounds(h.toBounds(g),w,{geolocateSource:!0})},p.prototype._updateMarker=function(u){if(u){var h=new o.LngLat(u.coords.longitude,u.coords.latitude);this._accuracyCircleMarker.setLngLat(h).addTo(this._map),this._userLocationDotMarker.setLngLat(h).addTo(this._map),this._accuracy=u.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},p.prototype._updateCircleRadius=function(){var u=this._map._container.clientHeight/2,h=this._map.unproject([0,u]),g=this._map.unproject([1,u]),b=h.distanceTo(g),w=Math.ceil(2*this._accuracy/b);this._circleElement.style.width=w+"px",this._circleElement.style.height=w+"px"},p.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},p.prototype._onError=function(u){if(this._map){if(this.options.trackUserLocation)if(u.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var h=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=h,this._geolocateButton.setAttribute("aria-label",h),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(u.code===3&&Cs)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("error",u)),this._finish()}},p.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},p.prototype._setupUI=function(u){var h=this;if(this._container.addEventListener("contextmenu",function(w){return w.preventDefault()}),this._geolocateButton=x.create("button","mapboxgl-ctrl-geolocate",this._container),x.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",u===!1){o.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var g=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=g,this._geolocateButton.setAttribute("aria-label",g)}else{var b=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=b,this._geolocateButton.setAttribute("aria-label",b)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=x.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new ou(this._dotElement),this._circleElement=x.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ou({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(w){w.geolocateSource||h._watchState!=="ACTIVE_LOCK"||w.originalEvent&&w.originalEvent.type==="resize"||(h._watchState="BACKGROUND",h._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),h._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),h.fire(new o.Event("trackuserlocationend")))})},p.prototype.trigger=function(){if(!this._setup)return o.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":ol--,Cs=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new o.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var u;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++ol>1?(u={maximumAge:6e5,timeout:0},Cs=!0):(u=this.options.positionOptions,Cs=!1),this._geolocationWatchID=o.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,u)}}else o.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},p.prototype._clearWatch=function(){o.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},p}(o.Evented),Ba={maxWidth:100,unit:"metric"},Na=function(l){this.options=o.extend({},Ba,l),o.bindAll(["_onMove","setUnit"],this)};function cc(l,p,u){var h=u&&u.maxWidth||100,g=l._container.clientHeight/2,b=l.unproject([0,g]),w=l.unproject([h,g]),C=b.distanceTo(w);if(u&&u.unit==="imperial"){var M=3.2808*C;M>5280?Fa(p,h,M/5280,l._getUIString("ScaleControl.Miles")):Fa(p,h,M,l._getUIString("ScaleControl.Feet"))}else u&&u.unit==="nautical"?Fa(p,h,C/1852,l._getUIString("ScaleControl.NauticalMiles")):C>=1e3?Fa(p,h,C/1e3,l._getUIString("ScaleControl.Kilometers")):Fa(p,h,C,l._getUIString("ScaleControl.Meters"))}function Fa(l,p,u,h){var g,b,w,C=(g=u,(b=Math.pow(10,(""+Math.floor(g)).length-1))*(w=(w=g/b)>=10?10:w>=5?5:w>=3?3:w>=2?2:w>=1?1:function(M){var N=Math.pow(10,Math.ceil(-Math.log(M)/Math.LN10));return Math.round(M*N)/N}(w)));l.style.width=p*(C/u)+"px",l.innerHTML=C+"&nbsp;"+h}Na.prototype.getDefaultPosition=function(){return"bottom-left"},Na.prototype._onMove=function(){cc(this._map,this._container,this.options)},Na.prototype.onAdd=function(l){return this._map=l,this._container=x.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",l.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Na.prototype.onRemove=function(){x.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Na.prototype.setUnit=function(l){this.options.unit=l,cc(this._map,this._container,this.options)};var yo=function(l){this._fullscreen=!1,l&&l.container&&(l.container instanceof o.window.HTMLElement?this._container=l.container:o.warnOnce("Full screen control 'container' must be a DOM element.")),o.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in o.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in o.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in o.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in o.window.document&&(this._fullscreenchange="MSFullscreenChange")};yo.prototype.onAdd=function(l){return this._map=l,this._container||(this._container=this._map.getContainer()),this._controlContainer=x.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",o.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},yo.prototype.onRemove=function(){x.remove(this._controlContainer),this._map=null,o.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},yo.prototype._checkFullscreenSupport=function(){return!!(o.window.document.fullscreenEnabled||o.window.document.mozFullScreenEnabled||o.window.document.msFullscreenEnabled||o.window.document.webkitFullscreenEnabled)},yo.prototype._setupUI=function(){var l=this._fullscreenButton=x.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);x.create("span","mapboxgl-ctrl-icon",l).setAttribute("aria-hidden",!0),l.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),o.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},yo.prototype._updateTitle=function(){var l=this._getTitle();this._fullscreenButton.setAttribute("aria-label",l),this._fullscreenButton.title=l},yo.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},yo.prototype._isFullscreen=function(){return this._fullscreen},yo.prototype._changeIcon=function(){(o.window.document.fullscreenElement||o.window.document.mozFullScreenElement||o.window.document.webkitFullscreenElement||o.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},yo.prototype._onClickFullscreen=function(){this._isFullscreen()?o.window.document.exitFullscreen?o.window.document.exitFullscreen():o.window.document.mozCancelFullScreen?o.window.document.mozCancelFullScreen():o.window.document.msExitFullscreen?o.window.document.msExitFullscreen():o.window.document.webkitCancelFullScreen&&o.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var _f={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},au=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),xf=function(l){function p(u){l.call(this),this.options=o.extend(Object.create(_f),u),o.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.addTo=function(u){return this._map&&this.remove(),this._map=u,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new o.Event("open")),this},p.prototype.isOpen=function(){return!!this._map},p.prototype.remove=function(){return this._content&&x.remove(this._content),this._container&&(x.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new o.Event("close")),this},p.prototype.getLngLat=function(){return this._lngLat},p.prototype.setLngLat=function(u){return this._lngLat=o.LngLat.convert(u),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},p.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},p.prototype.getElement=function(){return this._container},p.prototype.setText=function(u){return this.setDOMContent(o.window.document.createTextNode(u))},p.prototype.setHTML=function(u){var h,g=o.window.document.createDocumentFragment(),b=o.window.document.createElement("body");for(b.innerHTML=u;h=b.firstChild;)g.appendChild(h);return this.setDOMContent(g)},p.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},p.prototype.setMaxWidth=function(u){return this.options.maxWidth=u,this._update(),this},p.prototype.setDOMContent=function(u){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=x.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(u),this._createCloseButton(),this._update(),this._focusFirstElement(),this},p.prototype.addClassName=function(u){this._container&&this._container.classList.add(u)},p.prototype.removeClassName=function(u){this._container&&this._container.classList.remove(u)},p.prototype.setOffset=function(u){return this.options.offset=u,this._update(),this},p.prototype.toggleClassName=function(u){if(this._container)return this._container.classList.toggle(u)},p.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=x.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},p.prototype._onMouseUp=function(u){this._update(u.point)},p.prototype._onMouseMove=function(u){this._update(u.point)},p.prototype._onDrag=function(u){this._update(u.point)},p.prototype._update=function(u){var h=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=x.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=x.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(X){return h._container.classList.add(X)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=nl(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||u)){var g=this._pos=this._trackPointer&&u?u:this._map.project(this._lngLat),b=this.options.anchor,w=function X(J){if(J){if(typeof J=="number"){var ue=Math.round(Math.sqrt(.5*Math.pow(J,2)));return{center:new o.Point(0,0),top:new o.Point(0,J),"top-left":new o.Point(ue,ue),"top-right":new o.Point(-ue,ue),bottom:new o.Point(0,-J),"bottom-left":new o.Point(ue,-ue),"bottom-right":new o.Point(-ue,-ue),left:new o.Point(J,0),right:new o.Point(-J,0)}}if(J instanceof o.Point||Array.isArray(J)){var le=o.Point.convert(J);return{center:le,top:le,"top-left":le,"top-right":le,bottom:le,"bottom-left":le,"bottom-right":le,left:le,right:le}}return{center:o.Point.convert(J.center||[0,0]),top:o.Point.convert(J.top||[0,0]),"top-left":o.Point.convert(J["top-left"]||[0,0]),"top-right":o.Point.convert(J["top-right"]||[0,0]),bottom:o.Point.convert(J.bottom||[0,0]),"bottom-left":o.Point.convert(J["bottom-left"]||[0,0]),"bottom-right":o.Point.convert(J["bottom-right"]||[0,0]),left:o.Point.convert(J.left||[0,0]),right:o.Point.convert(J.right||[0,0])}}return X(new o.Point(0,0))}(this.options.offset);if(!b){var C,M=this._container.offsetWidth,N=this._container.offsetHeight;C=g.y+w.bottom.y<N?["top"]:g.y>this._map.transform.height-N?["bottom"]:[],g.x<M/2?C.push("left"):g.x>this._map.transform.width-M/2&&C.push("right"),b=C.length===0?"bottom":C.join("-")}var K=g.add(w[b]).round();x.setTransform(this._container,Xo[b]+" translate("+K.x+"px,"+K.y+"px)"),uc(this._container,b,"popup")}},p.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var u=this._container.querySelector(au);u&&u.focus()}},p.prototype._onClose=function(){this.remove()},p}(o.Evented),pc={version:o.version,supported:v,setRTLTextPlugin:o.setRTLTextPlugin,getRTLTextPluginStatus:o.getRTLTextPluginStatus,Map:Jd,NavigationControl:ha,GeolocateControl:vf,AttributionControl:bi,ScaleControl:Na,FullscreenControl:yo,Popup:xf,Marker:ou,Style:ji,LngLat:o.LngLat,LngLatBounds:o.LngLatBounds,Point:o.Point,MercatorCoordinate:o.MercatorCoordinate,Evented:o.Evented,config:o.config,prewarm:function(){Ve().acquire($e)},clearPrewarmedResources:function(){var l=_t;l&&(l.isPreloaded()&&l.numActive()===1?(l.release($e),_t=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return o.config.ACCESS_TOKEN},set accessToken(l){o.config.ACCESS_TOKEN=l},get baseApiUrl(){return o.config.API_URL},set baseApiUrl(l){o.config.API_URL=l},get workerCount(){return Je.workerCount},set workerCount(l){Je.workerCount=l},get maxParallelImageRequests(){return o.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(l){o.config.MAX_PARALLEL_IMAGE_REQUESTS=l},clearStorage:function(l){o.clearTileCache(l)},workerUrl:""};return pc}),c})})(DT);var mL=DT.exports;const Ds=yg(mL);var qp=gL,yL=Object.prototype.hasOwnProperty;function gL(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var a in n)yL.call(n,a)&&(e[a]=n[a])}return e}var OT={exports:{}};(function(e,t){(function(){var n={};e.exports=n,n.simpleFilter=function(a,c){return c.filter(function(d){return n.test(a,d)})},n.test=function(a,c){return n.match(a,c)!==null},n.match=function(a,c,d){d=d||{};var o=0,v=[],x=c.length,E=0,T=0,P=d.pre||"",I=d.post||"",q=d.caseSensitive&&c||c.toLowerCase(),$;a=d.caseSensitive&&a||a.toLowerCase();for(var G=0;G<x;G++)$=c[G],q[G]===a[o]?($=P+$+I,o+=1,T+=1+T):T=0,E+=T,v[v.length]=$;return o===a.length?(E=q===a?1/0:E,{rendered:v.join(""),score:E}):null},n.filter=function(a,c,d){return!c||c.length===0?[]:typeof a!="string"?c:(d=d||{},c.reduce(function(o,v,x,E){var T=v;d.extract&&(T=d.extract(v));var P=n.match(a,T,d);return P!=null&&(o[o.length]={string:P.rendered,score:P.score,index:x,original:v}),o},[]).sort(function(o,v){var x=v.score-o.score;return x||o.index-v.index}))}})()})(OT);var vL=OT.exports,Po=function(e){return this.component=e,this.items=[],this.active=0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,e.el.parentNode.insertBefore(this.wrapper,e.el.nextSibling),this};Po.prototype.show=function(){this.element.style.display="block"};Po.prototype.hide=function(){this.element.style.display="none"};Po.prototype.add=function(e){this.items.push(e)};Po.prototype.clear=function(){this.items=[],this.active=0};Po.prototype.isEmpty=function(){return!this.items.length};Po.prototype.isVisible=function(){return this.element.style.display==="block"};Po.prototype.draw=function(){if(this.element.innerHTML="",this.items.length===0){this.hide();return}for(var e=0;e<this.items.length;e++)this.drawItem(this.items[e],this.active===e);this.show()};Po.prototype.drawItem=function(e,t){var n=document.createElement("li"),a=document.createElement("a");t&&(n.className+=" active"),a.innerHTML=e.string,n.appendChild(a),this.element.appendChild(n),n.addEventListener("mousedown",function(){this.selectingListItem=!0}.bind(this)),n.addEventListener("mouseup",function(){this.handleMouseUp.call(this,e)}.bind(this))};Po.prototype.handleMouseUp=function(e){this.selectingListItem=!1,this.component.value(e.original),this.clear(),this.draw()};Po.prototype.move=function(e){this.active=e,this.draw()};Po.prototype.previous=function(){this.move(this.active===0?this.items.length-1:this.active-1)};Po.prototype.next=function(){this.move(this.active===this.items.length-1?0:this.active+1)};Po.prototype.drawError=function(e){var t=document.createElement("li");t.innerHTML=e,this.element.appendChild(t),this.show()};var _L=Po,xL=qp,bL=vL,wL=_L,to=function(e,t,n){return n=n||{},this.options=xL({minLength:2,limit:5,filter:!0,hideOnBlur:!0},n),this.el=e,this.data=t||[],this.list=new wL(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",function(a){this.handleKeyUp(a.keyCode)}.bind(this),!1),this.el.addEventListener("keydown",function(a){this.handleKeyDown(a)}.bind(this)),this.el.addEventListener("focus",function(){this.handleFocus()}.bind(this)),this.el.addEventListener("blur",function(){this.handleBlur()}.bind(this)),this.el.addEventListener("paste",function(a){this.handlePaste(a)}.bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};to.prototype.handleKeyUp=function(e){e===40||e===38||e===27||e===13||e===9||this.handleInputChange(this.el.value)};to.prototype.handleKeyDown=function(e){switch(e.keyCode){case 13:case 9:this.list.isEmpty()||(this.list.isVisible()&&e.preventDefault(),this.value(this.list.items[this.list.active].original),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next();break}};to.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()};to.prototype.handlePaste=function(e){if(e.clipboardData)this.handleInputChange(e.clipboardData.getData("Text"));else{var t=this;setTimeout(function(){t.handleInputChange(e.target.value)},100)}};to.prototype.handleInputChange=function(e){if(this.query=this.normalize(e),this.list.clear(),this.query.length<this.options.minLength){this.list.draw();return}this.getCandidates(function(t){for(var n=0;n<t.length&&(this.list.add(t[n]),n!==this.options.limit-1);n++);this.list.draw()}.bind(this))};to.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1};to.prototype.update=function(e){this.data=e,this.handleKeyUp()};to.prototype.clear=function(){this.data=[],this.list.clear()};to.prototype.normalize=function(e){return e=e.toLowerCase(),e};to.prototype.match=function(e,t){return e.indexOf(t)>-1};to.prototype.value=function(e){if(this.selected=e,this.el.value=this.getItemValue(e),document.createEvent){var t=document.createEvent("HTMLEvents");t.initEvent("change",!0,!1),this.el.dispatchEvent(t)}else this.el.fireEvent("onchange")};to.prototype.getCandidates=function(e){var t={pre:"<strong>",post:"</strong>",extract:function(a){return this.getItemValue(a)}.bind(this)},n;this.options.filter?(n=bL.filter(this.query,this.data,t),n=n.map(function(a){return{original:a.original,string:this.render(a.original,a.string)}}.bind(this))):n=this.data.map(function(a){var c=this.render(a);return{original:a,string:c}}.bind(this)),e(n)};to.prototype.getItemValue=function(e){return e};to.prototype.render=function(e,t){if(t)return t;for(var n=e.original?this.getItemValue(e.original):this.getItemValue(e),a=this.normalize(n),c=a.lastIndexOf(this.query);c>-1;){var d=c+this.query.length;n=n.slice(0,c)+"<strong>"+n.slice(c,d)+"</strong>"+n.slice(d),c=a.slice(0,c).lastIndexOf(this.query)}return n};to.prototype.renderError=function(e){this.list.drawError(e)};var SL=to,BT=SL,EL=BT;typeof window<"u"&&(window.Suggestions=BT);var CL="Expected a function",wS=0/0,kL="[object Symbol]",TL=/^\s+|\s+$/g,IL=/^[-+]0x[0-9a-f]+$/i,PL=/^0b[01]+$/i,AL=/^0o[0-7]+$/i,ML=parseInt,RL=typeof wa=="object"&&wa&&wa.Object===Object&&wa,LL=typeof self=="object"&&self&&self.Object===Object&&self,zL=RL||LL||Function("return this")(),DL=Object.prototype,OL=DL.toString,BL=Math.max,NL=Math.min,H0=function(){return zL.Date.now()};function FL(e,t,n){var a,c,d,o,v,x,E=0,T=!1,P=!1,I=!0;if(typeof e!="function")throw new TypeError(CL);t=SS(t)||0,bx(n)&&(T=!!n.leading,P="maxWait"in n,d=P?BL(SS(n.maxWait)||0,t):d,I="trailing"in n?!!n.trailing:I);function q(ie){var ce=a,xe=c;return a=c=void 0,E=ie,o=e.apply(xe,ce),o}function $(ie){return E=ie,v=setTimeout(F,t),T?q(ie):o}function G(ie){var ce=ie-x,xe=ie-E,Te=t-ce;return P?NL(Te,d-xe):Te}function D(ie){var ce=ie-x,xe=ie-E;return x===void 0||ce>=t||ce<0||P&&xe>=d}function F(){var ie=H0();if(D(ie))return V(ie);v=setTimeout(F,G(ie))}function V(ie){return v=void 0,I&&a?q(ie):(a=c=void 0,o)}function B(){v!==void 0&&clearTimeout(v),E=0,a=x=c=v=void 0}function z(){return v===void 0?o:V(H0())}function re(){var ie=H0(),ce=D(ie);if(a=arguments,c=this,x=ie,ce){if(v===void 0)return $(x);if(P)return v=setTimeout(F,t),q(x)}return v===void 0&&(v=setTimeout(F,t)),o}return re.cancel=B,re.flush=z,re}function bx(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function UL(e){return!!e&&typeof e=="object"}function $L(e){return typeof e=="symbol"||UL(e)&&OL.call(e)==kL}function SS(e){if(typeof e=="number")return e;if($L(e))return wS;if(bx(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=bx(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(TL,"");var n=PL.test(e);return n||AL.test(e)?ML(e.slice(2),n?2:8):IL.test(e)?wS:+e}var jL=FL,$1={exports:{}},_p=typeof Reflect=="object"?Reflect:null,ES=_p&&typeof _p.apply=="function"?_p.apply:function(t,n,a){return Function.prototype.apply.call(t,n,a)},hy;_p&&typeof _p.ownKeys=="function"?hy=_p.ownKeys:Object.getOwnPropertySymbols?hy=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:hy=function(t){return Object.getOwnPropertyNames(t)};function VL(e){console&&console.warn&&console.warn(e)}var NT=Number.isNaN||function(t){return t!==t};function hn(){hn.init.call(this)}$1.exports=hn;$1.exports.once=HL;hn.EventEmitter=hn;hn.prototype._events=void 0;hn.prototype._eventsCount=0;hn.prototype._maxListeners=void 0;var CS=10;function Mg(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(hn,"defaultMaxListeners",{enumerable:!0,get:function(){return CS},set:function(e){if(typeof e!="number"||e<0||NT(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");CS=e}});hn.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};hn.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||NT(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function FT(e){return e._maxListeners===void 0?hn.defaultMaxListeners:e._maxListeners}hn.prototype.getMaxListeners=function(){return FT(this)};hn.prototype.emit=function(t){for(var n=[],a=1;a<arguments.length;a++)n.push(arguments[a]);var c=t==="error",d=this._events;if(d!==void 0)c=c&&d.error===void 0;else if(!c)return!1;if(c){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var v=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw v.context=o,v}var x=d[t];if(x===void 0)return!1;if(typeof x=="function")ES(x,this,n);else for(var E=x.length,T=qT(x,E),a=0;a<E;++a)ES(T[a],this,n);return!0};function UT(e,t,n,a){var c,d,o;if(Mg(n),d=e._events,d===void 0?(d=e._events=Object.create(null),e._eventsCount=0):(d.newListener!==void 0&&(e.emit("newListener",t,n.listener?n.listener:n),d=e._events),o=d[t]),o===void 0)o=d[t]=n,++e._eventsCount;else if(typeof o=="function"?o=d[t]=a?[n,o]:[o,n]:a?o.unshift(n):o.push(n),c=FT(e),c>0&&o.length>c&&!o.warned){o.warned=!0;var v=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");v.name="MaxListenersExceededWarning",v.emitter=e,v.type=t,v.count=o.length,VL(v)}return e}hn.prototype.addListener=function(t,n){return UT(this,t,n,!1)};hn.prototype.on=hn.prototype.addListener;hn.prototype.prependListener=function(t,n){return UT(this,t,n,!0)};function qL(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function $T(e,t,n){var a={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},c=qL.bind(a);return c.listener=n,a.wrapFn=c,c}hn.prototype.once=function(t,n){return Mg(n),this.on(t,$T(this,t,n)),this};hn.prototype.prependOnceListener=function(t,n){return Mg(n),this.prependListener(t,$T(this,t,n)),this};hn.prototype.removeListener=function(t,n){var a,c,d,o,v;if(Mg(n),c=this._events,c===void 0)return this;if(a=c[t],a===void 0)return this;if(a===n||a.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete c[t],c.removeListener&&this.emit("removeListener",t,a.listener||n));else if(typeof a!="function"){for(d=-1,o=a.length-1;o>=0;o--)if(a[o]===n||a[o].listener===n){v=a[o].listener,d=o;break}if(d<0)return this;d===0?a.shift():WL(a,d),a.length===1&&(c[t]=a[0]),c.removeListener!==void 0&&this.emit("removeListener",t,v||n)}return this};hn.prototype.off=hn.prototype.removeListener;hn.prototype.removeAllListeners=function(t){var n,a,c;if(a=this._events,a===void 0)return this;if(a.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):a[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete a[t]),this;if(arguments.length===0){var d=Object.keys(a),o;for(c=0;c<d.length;++c)o=d[c],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=a[t],typeof n=="function")this.removeListener(t,n);else if(n!==void 0)for(c=n.length-1;c>=0;c--)this.removeListener(t,n[c]);return this};function jT(e,t,n){var a=e._events;if(a===void 0)return[];var c=a[t];return c===void 0?[]:typeof c=="function"?n?[c.listener||c]:[c]:n?GL(c):qT(c,c.length)}hn.prototype.listeners=function(t){return jT(this,t,!0)};hn.prototype.rawListeners=function(t){return jT(this,t,!1)};hn.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):VT.call(e,t)};hn.prototype.listenerCount=VT;function VT(e){var t=this._events;if(t!==void 0){var n=t[e];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}hn.prototype.eventNames=function(){return this._eventsCount>0?hy(this._events):[]};function qT(e,t){for(var n=new Array(t),a=0;a<t;++a)n[a]=e[a];return n}function WL(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function GL(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function HL(e,t){return new Promise(function(n,a){function c(o){e.removeListener(t,d),a(o)}function d(){typeof e.removeListener=="function"&&e.removeListener("error",c),n([].slice.call(arguments))}WT(e,t,d,{once:!0}),t!=="error"&&ZL(e,c,{once:!0})})}function ZL(e,t,n){typeof e.on=="function"&&WT(e,"error",t,n)}function WT(e,t,n,a){if(typeof e.on=="function")a.once?e.once(t,n):e.on(t,n);else if(typeof e.addEventListener=="function")e.addEventListener(t,function c(d){a.once&&e.removeEventListener(t,c),n(d)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var KL=$1.exports,XL={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}};function YL(e){var t=e.match(/\s*(.+)\s*=\s*"?([^"]+)"?/);return t?{key:t[1],value:t[2]}:null}function JL(e){var t=e.match(/<?([^>]*)>(.*)/);if(!t)return null;var n=t[1],a=t[2].split(";"),c=null,d=a.reduce(function(o,v){var x=YL(v);return x?x.key==="rel"?(c||(c=x.value),o):(o[x.key]=x.value,o):o},{});return c?{url:n,rel:c,params:d}:null}function QL(e){return e?e.split(/,\s*</).reduce(function(t,n){var a=JL(n);if(!a)return t;var c=a.rel.split(/\s+/);return c.forEach(function(d){t[d]||(t[d]={url:a.url,params:a.params})}),t},{}):{}}var ez=QL,tz=ez;function j1(e,t){this.request=e,this.headers=t.headers,this.rawBody=t.body,this.statusCode=t.statusCode;try{this.body=JSON.parse(t.body||"{}")}catch{this.body=t.body}this.links=tz(this.headers.link)}j1.prototype.hasNextPage=function(){return!!this.links.next};j1.prototype.nextPage=function(){return this.hasNextPage()?this.request._extend({path:this.links.next.url}):null};var rz=j1,Rg={API_ORIGIN:"https://api.mapbox.com",EVENT_PROGRESS_DOWNLOAD:"downloadProgress",EVENT_PROGRESS_UPLOAD:"uploadProgress",EVENT_ERROR:"error",EVENT_RESPONSE:"response",ERROR_HTTP:"HttpError",ERROR_REQUEST_ABORTED:"RequestAbortedError"},kS=Rg;function nz(e){var t=e.type||kS.ERROR_HTTP,n;if(e.body)try{n=JSON.parse(e.body)}catch{n=e.body}else n=null;var a=e.message||null;a||(typeof n=="string"?a=n:n&&typeof n.message=="string"?a=n.message:t===kS.ERROR_REQUEST_ABORTED&&(a="Request aborted")),this.message=a,this.type=t,this.statusCode=e.statusCode||null,this.request=e.request,this.body=n}var iz=nz;function oz(e){var t=e.indexOf(":"),n=e.substring(0,t).trim().toLowerCase(),a=e.substring(t+1).trim();return{name:n,value:a}}function az(e){var t={};return e&&e.trim().split(/[\r|\n]+/).forEach(function(n){var a=oz(n);t[a.name]=a.value}),t}var sz=az,lz=rz,TS=iz,Z0=Rg,uz=sz,Zy={};function cz(e){var t=Zy[e.id];t&&(t.abort(),delete Zy[e.id])}function pz(e,t){return new lz(e,{body:t.response,headers:uz(t.getAllResponseHeaders()),statusCode:t.status})}function IS(e){var t=e.total,n=e.loaded,a=100*n/t;return{total:t,transferred:n,percent:a}}function GT(e,t){return new Promise(function(n,a){t.onprogress=function(o){e.emitter.emit(Z0.EVENT_PROGRESS_DOWNLOAD,IS(o))};var c=e.file;c&&(t.upload.onprogress=function(o){e.emitter.emit(Z0.EVENT_PROGRESS_UPLOAD,IS(o))}),t.onerror=function(o){a(o)},t.onabort=function(){var o=new TS({request:e,type:Z0.ERROR_REQUEST_ABORTED});a(o)},t.onload=function(){if(delete Zy[e.id],t.status<200||t.status>=400){var o=new TS({request:e,body:t.response,statusCode:t.status});a(o);return}n(t)};var d=e.body;typeof d=="string"?t.send(d):d?t.send(JSON.stringify(d)):c?t.send(c):t.send(),Zy[e.id]=t}).then(function(n){return pz(e,n)})}function HT(e,t){var n=e.url(t),a=new window.XMLHttpRequest;return a.open(e.method,n),Object.keys(e.headers).forEach(function(c){a.setRequestHeader(c,e.headers[c])}),a}function fz(e){return Promise.resolve().then(function(){var t=HT(e,e.client.accessToken);return GT(e,t)})}var hz={browserAbort:cz,sendRequestXhr:GT,browserSend:fz,createRequestXhr:HT},Ky={exports:{}};/*! http://mths.be/base64 v0.1.0 by @mathias | MIT license */Ky.exports;(function(e,t){(function(n){var a=t,c=e&&e.exports==a&&e,d=typeof wa=="object"&&wa;(d.global===d||d.window===d)&&(n=d);var o=function($){this.message=$};o.prototype=new Error,o.prototype.name="InvalidCharacterError";var v=function($){throw new o($)},x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",E=/[\t\n\f\r ]/g,T=function($){$=String($).replace(E,"");var G=$.length;G%4==0&&($=$.replace(/==?$/,""),G=$.length),(G%4==1||/[^+a-zA-Z0-9/]/.test($))&&v("Invalid character: the string to be decoded is not correctly encoded.");for(var D=0,F,V,B="",z=-1;++z<G;)V=x.indexOf($.charAt(z)),F=D%4?F*64+V:V,D++%4&&(B+=String.fromCharCode(255&F>>(-2*D&6)));return B},P=function($){$=String($),/[^\0-\xFF]/.test($)&&v("The string to be encoded contains characters outside of the Latin1 range.");for(var G=$.length%3,D="",F=-1,V,B,z,re,ie=$.length-G;++F<ie;)V=$.charCodeAt(F)<<16,B=$.charCodeAt(++F)<<8,z=$.charCodeAt(++F),re=V+B+z,D+=x.charAt(re>>18&63)+x.charAt(re>>12&63)+x.charAt(re>>6&63)+x.charAt(re&63);return G==2?(V=$.charCodeAt(F)<<8,B=$.charCodeAt(++F),re=V+B,D+=x.charAt(re>>10)+x.charAt(re>>4&63)+x.charAt(re<<2&63)+"="):G==1&&(re=$.charCodeAt(F),D+=x.charAt(re>>2)+x.charAt(re<<4&63)+"=="),D},I={encode:P,decode:T,version:"0.1.0"};if(a&&!a.nodeType)if(c)c.exports=I;else for(var q in I)I.hasOwnProperty(q)&&(a[q]=I[q]);else n.base64=I})(wa)})(Ky,Ky.exports);var dz=Ky.exports,mz=dz,K0={};function yz(e){if(K0[e])return K0[e];var t=e.split("."),n=t[0],a=t[1];if(!a)throw new Error("Invalid token");var c=gz(a),d={usage:n,user:c.u};return vu(c,"a")&&(d.authorization=c.a),vu(c,"exp")&&(d.expires=c.exp*1e3),vu(c,"iat")&&(d.created=c.iat*1e3),vu(c,"scopes")&&(d.scopes=c.scopes),vu(c,"client")&&(d.client=c.client),vu(c,"ll")&&(d.lastLogin=c.ll),vu(c,"iu")&&(d.impersonator=c.iu),K0[e]=d,d}function gz(e){try{return JSON.parse(mz.decode(e))}catch{throw new Error("Invalid token")}}function vu(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var ZT=yz,KT={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(n=!1));function c(x,E,T){this.fn=x,this.context=E,this.once=T||!1}function d(x,E,T,P,I){if(typeof T!="function")throw new TypeError("The listener must be a function");var q=new c(T,P||x,I),$=n?n+E:E;return x._events[$]?x._events[$].fn?x._events[$]=[x._events[$],q]:x._events[$].push(q):(x._events[$]=q,x._eventsCount++),x}function o(x,E){--x._eventsCount===0?x._events=new a:delete x._events[E]}function v(){this._events=new a,this._eventsCount=0}v.prototype.eventNames=function(){var E=[],T,P;if(this._eventsCount===0)return E;for(P in T=this._events)t.call(T,P)&&E.push(n?P.slice(1):P);return Object.getOwnPropertySymbols?E.concat(Object.getOwnPropertySymbols(T)):E},v.prototype.listeners=function(E){var T=n?n+E:E,P=this._events[T];if(!P)return[];if(P.fn)return[P.fn];for(var I=0,q=P.length,$=new Array(q);I<q;I++)$[I]=P[I].fn;return $},v.prototype.listenerCount=function(E){var T=n?n+E:E,P=this._events[T];return P?P.fn?1:P.length:0},v.prototype.emit=function(E,T,P,I,q,$){var G=n?n+E:E;if(!this._events[G])return!1;var D=this._events[G],F=arguments.length,V,B;if(D.fn){switch(D.once&&this.removeListener(E,D.fn,void 0,!0),F){case 1:return D.fn.call(D.context),!0;case 2:return D.fn.call(D.context,T),!0;case 3:return D.fn.call(D.context,T,P),!0;case 4:return D.fn.call(D.context,T,P,I),!0;case 5:return D.fn.call(D.context,T,P,I,q),!0;case 6:return D.fn.call(D.context,T,P,I,q,$),!0}for(B=1,V=new Array(F-1);B<F;B++)V[B-1]=arguments[B];D.fn.apply(D.context,V)}else{var z=D.length,re;for(B=0;B<z;B++)switch(D[B].once&&this.removeListener(E,D[B].fn,void 0,!0),F){case 1:D[B].fn.call(D[B].context);break;case 2:D[B].fn.call(D[B].context,T);break;case 3:D[B].fn.call(D[B].context,T,P);break;case 4:D[B].fn.call(D[B].context,T,P,I);break;default:if(!V)for(re=1,V=new Array(F-1);re<F;re++)V[re-1]=arguments[re];D[B].fn.apply(D[B].context,V)}}return!0},v.prototype.on=function(E,T,P){return d(this,E,T,P,!1)},v.prototype.once=function(E,T,P){return d(this,E,T,P,!0)},v.prototype.removeListener=function(E,T,P,I){var q=n?n+E:E;if(!this._events[q])return this;if(!T)return o(this,q),this;var $=this._events[q];if($.fn)$.fn===T&&(!I||$.once)&&(!P||$.context===P)&&o(this,q);else{for(var G=0,D=[],F=$.length;G<F;G++)($[G].fn!==T||I&&!$[G].once||P&&$[G].context!==P)&&D.push($[G]);D.length?this._events[q]=D.length===1?D[0]:D:o(this,q)}return this},v.prototype.removeAllListeners=function(E){var T;return E?(T=n?n+E:E,this._events[T]&&o(this,T)):(this._events=new a,this._eventsCount=0),this},v.prototype.off=v.prototype.removeListener,v.prototype.addListener=v.prototype.on,v.prefixed=n,v.EventEmitter=v,e.exports=v})(KT);var vz=KT.exports;function _z(e){return e.map(encodeURIComponent).join(",")}function XT(e){return Array.isArray(e)?_z(e):encodeURIComponent(String(e))}function YT(e,t,n){if(n===!1||n===null)return e;var a=/\?/.test(e)?"&":"?",c=encodeURIComponent(t);return n!==void 0&&n!==""&&n!==!0&&(c+="="+XT(n)),""+e+a+c}function xz(e,t){if(!t)return e;var n=e;return Object.keys(t).forEach(function(a){var c=t[a];c!==void 0&&(Array.isArray(c)&&(c=c.filter(function(d){return d!=null}).join(",")),n=YT(n,a,c))}),n}function bz(e,t){if(!t||e.slice(0,4)==="http")return e;var n=e[0]==="/"?"":"/";return""+t.replace(/\/$/,"")+n+e}function wz(e,t){return t?e.replace(/\/:([a-zA-Z0-9]+)/g,function(n,a){var c=t[a];if(c===void 0)throw new Error("Unspecified route parameter "+a);var d=XT(c);return"/"+d}):e}var Sz={appendQueryObject:xz,appendQueryParam:YT,prependOrigin:bz,interpolateRouteParams:wz},Ez=ZT,V1=qp,Cz=vz,qm=Sz,PS=Rg,kz=1;function Dl(e,t){if(!e)throw new Error("MapiRequest requires a client");if(!t||!t.path||!t.method)throw new Error("MapiRequest requires an options object with path and method properties");var n={};t.body&&(n["content-type"]="application/json");var a=V1(n,t.headers),c=Object.keys(a).reduce(function(d,o){return d[o.toLowerCase()]=a[o],d},{});this.id=kz++,this._options=t,this.emitter=new Cz,this.client=e,this.response=null,this.error=null,this.sent=!1,this.aborted=!1,this.path=t.path,this.method=t.method,this.origin=t.origin||e.origin,this.query=t.query||{},this.params=t.params||{},this.body=t.body||null,this.file=t.file||null,this.encoding=t.encoding||"utf8",this.sendFileAs=t.sendFileAs||null,this.headers=c}Dl.prototype.url=function(t){var n=qm.prependOrigin(this.path,this.origin);n=qm.appendQueryObject(n,this.query);var a=this.params,c=t??this.client.accessToken;if(c){n=qm.appendQueryParam(n,"access_token",c);var d=Ez(c).user;a=V1({ownerId:d},a)}return n=qm.interpolateRouteParams(n,a),n};Dl.prototype.send=function(){var t=this;if(t.sent)throw new Error("This request has already been sent. Check the response and error properties. Create a new request with clone().");return t.sent=!0,t.client.sendRequest(t).then(function(n){return t.response=n,t.emitter.emit(PS.EVENT_RESPONSE,n),n},function(n){throw t.error=n,t.emitter.emit(PS.EVENT_ERROR,n),n})};Dl.prototype.abort=function(){this._nextPageRequest&&(this._nextPageRequest.abort(),delete this._nextPageRequest),!(this.response||this.error||this.aborted)&&(this.aborted=!0,this.client.abortRequest(this))};Dl.prototype.eachPage=function(t){var n=this;function a(o){function v(){delete n._nextPageRequest;var x=o.nextPage();x&&(n._nextPageRequest=x,d(x))}t(null,o,v)}function c(o){t(o,null,function(){})}function d(o){o.send().then(a,c)}d(this)};Dl.prototype.clone=function(){return this._extend()};Dl.prototype._extend=function(t){var n=V1(this._options,t);return new Dl(this.client,n)};var Tz=Dl,Iz=ZT,Pz=Tz,Az=Rg;function JT(e){if(!e||!e.accessToken)throw new Error("Cannot create a client without an access token");Iz(e.accessToken),this.accessToken=e.accessToken,this.origin=e.origin||Az.API_ORIGIN}JT.prototype.createRequest=function(t){return new Pz(this,t)};var QT=JT,eI=hz,tI=QT;function Ip(e){tI.call(this,e)}Ip.prototype=Object.create(tI.prototype);Ip.prototype.constructor=Ip;Ip.prototype.sendRequest=eI.browserSend;Ip.prototype.abortRequest=eI.browserAbort;function Mz(e){return new Ip(e)}var rI=Mz,Rz=rI,Lz=Rz,zz=Object.prototype.toString,Dz=function(e){var t;return zz.call(e)==="[object Object]"&&(t=Object.getPrototypeOf(e),t===null||t===Object.getPrototypeOf({}))},Oz=Dz,Bz=qp,nI="value",X0=`
  `,wn={};wn.assert=function(e,t){return t=t||{},function(n){var a=Ol(e,n);if(a){var c=q1(a,t);throw t.apiName&&(c=t.apiName+": "+c),new Error(c)}}};wn.shape=function(t){var n=$z(t);return function(c){var d=Ol(wn.plainObject,c);if(d)return d;for(var o,v,x=[],E=0;E<n.length;E++)o=n[E].key,v=n[E].value,d=Ol(v,c[o]),d&&x.push([o].concat(d));return x.length<2?x[0]:function(T){x=x.map(function(q){var $=q[0],G=q1(q,T).split(`
`).join(X0);return"- "+$+": "+G});var P=T.path.join("."),I=P===nI?"":" of "+P;return"The following properties"+I+" have invalid values:"+X0+x.join(X0)}}};wn.strictShape=function(t){var n=wn.shape(t);return function(c){var d=n(c);if(d)return d;var o=Object.keys(c).reduce(function(v,x){return t[x]===void 0&&v.push(x),v},[]);if(o.length!==0)return function(){return"The following keys are invalid: "+o.join(", ")}}};wn.arrayOf=function(t){return iI(t)};wn.tuple=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return iI(t)};function iI(e){var t=Array.isArray(e),n=function(a){return t?e[a]:e};return function(c){var d=Ol(wn.plainArray,c);if(d)return d;if(t&&c.length!==e.length)return"an array with "+e.length+" items";for(var o=0;o<c.length;o++)if(d=Ol(n(o),c[o]),d)return[o].concat(d)}}wn.required=function(t){function n(a){return a==null?function(c){return oI(c,aI(c.path)?"cannot be undefined/null.":"is required.")}:t.apply(this,arguments)}return n.__required=!0,n};wn.oneOfType=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return function(a){var c=t.map(function(d){return Ol(d,a)}).filter(Boolean);if(c.length===t.length)return c.every(function(d){return d.length===1&&typeof d[0]=="string"})?Nz(c.map(function(d){return d[0]})):c.reduce(function(d,o){return o.length>d.length?o:d})}};wn.equal=function(t){return function(a){if(a!==t)return JSON.stringify(t)}};wn.oneOf=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments),n=t.map(function(a){return wn.equal(a)});return wn.oneOfType.apply(this,n)};wn.range=function(t){var n=t[0],a=t[1];return function(d){var o=Ol(wn.number,d);if(o||d<n||d>a)return"number between "+n+" & "+a+" (inclusive)"}};wn.any=function(){};wn.boolean=function(t){if(typeof t!="boolean")return"boolean"};wn.number=function(t){if(typeof t!="number")return"number"};wn.plainArray=function(t){if(!Array.isArray(t))return"array"};wn.plainObject=function(t){if(!Oz(t))return"object"};wn.string=function(t){if(typeof t!="string")return"string"};wn.func=function(t){if(typeof t!="function")return"function"};function Ol(e,t){if(!(t==null&&!e.hasOwnProperty("__required"))){var n=e(t);if(n)return Array.isArray(n)?n:[n]}}function q1(e,t){var n=e.length,a=e[n-1],c=e.slice(0,n-1);return c.length===0&&(c=[nI]),t=Bz(t,{path:c}),typeof a=="function"?a(t):oI(t,Fz(a))}function Nz(e){return e.length<2?e[0]:e.length===2?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e.slice(-1)}function Fz(e){return"must be "+Uz(e)+"."}function Uz(e){return/^an? /.test(e)?e:/^[aeiou]/i.test(e)?"an "+e:/^[a-z]/i.test(e)?"a "+e:e}function oI(e,t){var n=aI(e.path),a=e.path.join(".")+" "+t,c=n?"Item at position ":"";return c+a}function aI(e){return typeof e[e.length-1]=="number"||typeof e[0]=="number"}function $z(e){return Object.keys(e||{}).map(function(t){return{key:t,value:e[t]}})}wn.validate=Ol;wn.processMessage=q1;var jz=wn,Vz=qp,xp=jz;function qz(e){if(typeof window<"u")return e instanceof wa.Blob||e instanceof wa.ArrayBuffer?void 0:"Blob or ArrayBuffer";if(!(typeof e=="string"||e.pipe!==void 0))return"Filename or Readable stream"}function Wz(e,t){return xp.assert(xp.strictShape(e),t)}function Gz(e){var t="date";if(typeof e=="boolean")return t;try{var n=new Date(e);if(n.getTime&&isNaN(n.getTime()))return t}catch{return t}}function Hz(e){return xp.tuple(xp.number,xp.number)(e)}var Zz=Vz(xp,{file:qz,date:Gz,coordinates:Hz,assertShape:Wz});function Kz(e,t){var n=function(a,c){return t.indexOf(a)!==-1&&c!==void 0};return typeof t=="function"&&(n=t),Object.keys(e).filter(function(a){return n(a,e[a])}).reduce(function(a,c){return a[c]=e[c],a},{})}var Xz=Kz;function Yz(e,t){return Object.keys(e).reduce(function(n,a){return n[a]=t(a,e[a]),n},{})}var Jz=Yz,Qz=Jz;function e5(e){return Qz(e,function(t,n){return typeof n=="boolean"?JSON.stringify(n):n})}var t5=e5,r5=QT,n5=rI;function i5(e){return function(t){var n;r5.prototype.isPrototypeOf(t)?n=t:n=n5(t);var a=Object.create(e);return a.client=n,a}}var o5=i5,sI=qp,$r=Zz,Xy=Xz,lI=t5,a5=o5,W1={},uI=["country","region","postcode","district","place","locality","neighborhood","address","poi","poi.landmark"];W1.forwardGeocode=function(e){$r.assertShape({query:$r.required($r.string),mode:$r.oneOf("mapbox.places","mapbox.places-permanent"),countries:$r.arrayOf($r.string),proximity:$r.oneOf($r.coordinates,"ip"),types:$r.arrayOf($r.oneOf(uI)),autocomplete:$r.boolean,bbox:$r.arrayOf($r.number),limit:$r.number,language:$r.arrayOf($r.string),routing:$r.boolean,fuzzyMatch:$r.boolean,worldview:$r.string})(e),e.mode=e.mode||"mapbox.places";var t=lI(sI({country:e.countries},Xy(e,["proximity","types","autocomplete","bbox","limit","language","routing","fuzzyMatch","worldview"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:Xy(e,["mode","query"]),query:t})};W1.reverseGeocode=function(e){$r.assertShape({query:$r.required($r.coordinates),mode:$r.oneOf("mapbox.places","mapbox.places-permanent"),countries:$r.arrayOf($r.string),types:$r.arrayOf($r.oneOf(uI)),bbox:$r.arrayOf($r.number),limit:$r.number,language:$r.arrayOf($r.string),reverseMode:$r.oneOf("distance","score"),routing:$r.boolean,worldview:$r.string})(e),e.mode=e.mode||"mapbox.places";var t=lI(sI({country:e.countries},Xy(e,["country","types","bbox","limit","language","reverseMode","routing","worldview"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:Xy(e,["mode","query"]),query:t})};var s5=a5(W1);let l5="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",cI=e=>crypto.getRandomValues(new Uint8Array(e)),pI=(e,t,n)=>{let a=(2<<Math.log(e.length-1)/Math.LN2)-1,c=-~(1.6*a*t/e.length);return(d=t)=>{let o="";for(;;){let v=n(c),x=c;for(;x--;)if(o+=e[v[x]&a]||"",o.length===d)return o}}},u5=(e,t=21)=>pI(e,t,cI),c5=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"");const p5=Object.freeze(Object.defineProperty({__proto__:null,customAlphabet:u5,customRandom:pI,nanoid:c5,random:cI,urlAlphabet:l5},Symbol.toStringTag,{value:"Module"})),f5=jC(p5);var h5=f5.nanoid;function fI(e){this.origin=e.origin||"https://api.mapbox.com",this.endpoint="events/v2",this.access_token=e.accessToken,this.version="0.2.0",this.sessionID=this.generateSessionID(),this.userAgent=this.getUserAgent(),this.options=e,this.send=this.send.bind(this),this.countries=e.countries?e.countries.split(","):null,this.types=e.types?e.types.split(","):null,this.bbox=e.bbox?e.bbox:null,this.language=e.language?e.language.split(","):null,this.limit=e.limit?+e.limit:null,this.locale=navigator.language||null,this.enableEventLogging=this.shouldEnableLogging(e),this.eventQueue=new Array,this.flushInterval=e.flushInterval||1e3,this.maxQueueSize=e.maxQueueSize||100,this.timer=this.flushInterval?setTimeout(this.flush.bind(this),this.flushInterval):null,this.lastSentInput="",this.lastSentIndex=0}fI.prototype={select:function(e,t){var n=this.getSelectedIndex(e,t),a=this.getEventPayload("search.select",t);if(a.resultIndex=n,a.resultPlaceName=e.place_name,a.resultId=e.id,!(n===this.lastSentIndex&&a.queryString===this.lastSentInput||n==-1)&&(this.lastSentIndex=n,this.lastSentInput=a.queryString,!!a.queryString))return this.push(a)},start:function(e){var t=this.getEventPayload("search.start",e);if(t.queryString)return this.push(t)},keyevent:function(e,t){if(e.key&&!(e.metaKey||[9,27,37,39,13,38,40].indexOf(e.keyCode)!==-1)){var n=this.getEventPayload("search.keystroke",t);if(n.lastAction=e.key,!!n.queryString)return this.push(n)}},send:function(e,t){if(!this.enableEventLogging)return t?t():void 0;var n=this.getRequestOptions(e);this.request(n,function(a){if(a)return this.handleError(a,t);if(t)return t()}.bind(this))},getRequestOptions:function(e){Array.isArray(e)||(e=[e]);var t={method:"POST",host:this.origin,path:this.endpoint+"?access_token="+this.access_token,headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return t},getEventPayload:function(e,t){var n;t.options.proximity?typeof t.options.proximity=="object"?n=[t.options.proximity.longitude,t.options.proximity.latitude]:t.options.proximity==="ip"?n=[999,999]:n=t.options.proximity:n=null;var a=t._map?t._map.getZoom():void 0,c={event:e,created:+new Date,sessionIdentifier:this.sessionID,country:this.countries,userAgent:this.userAgent,language:this.language,bbox:this.bbox,types:this.types,endpoint:"mapbox.places",autocomplete:t.options.autocomplete,fuzzyMatch:t.options.fuzzyMatch,proximity:n,limit:t.options.limit,routing:t.options.routing,worldview:t.options.worldview,mapZoom:a,keyboardLocale:this.locale};return e==="search.select"?c.queryString=t.inputString:e!="search.select"&&t._inputEl?c.queryString=t._inputEl.value:c.queryString=t.inputString,c},request:function(e,t){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(this.readyState==4)return this.status==204?t(null):t(this.statusText)},n.open(e.method,e.host+"/"+e.path,!0);for(var a in e.headers){var c=e.headers[a];n.setRequestHeader(a,c)}n.send(e.body)},handleError:function(e,t){if(t)return t(e)},generateSessionID:function(){return h5()},getUserAgent:function(){return"mapbox-gl-geocoder."+this.version+"."+navigator.userAgent},getSelectedIndex:function(e,t){if(t._typeahead){var n=t._typeahead.data,a=e.id,c=n.map(function(o){return o.id}),d=c.indexOf(a);return d}},shouldEnableLogging:function(e){return!(e.enableEventLogging===!1||e.origin&&e.origin!=="https://api.mapbox.com"||e.localGeocoder||e.filter)},flush:function(){this.eventQueue.length>0&&(this.send(this.eventQueue),this.eventQueue=new Array),this.timer&&clearTimeout(this.timer),this.flushInterval&&(this.timer=setTimeout(this.flush.bind(this),this.flushInterval))},push:function(e,t){this.eventQueue.push(e),(this.eventQueue.length>=this.maxQueueSize||t)&&this.flush()},remove:function(){this.flush()}};var d5=fI,m5={de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"",ja:"",lv:"Meklt",pt:"Procurar",sr:"",zh:"",cs:"Vyhledvn",hu:"Keress",ka:"",nb:"Ske",sk:"Vyhadvanie",th:"",fi:"Hae",is:"Leita",ko:"",pl:"Szukaj",sl:"Iskanje",fa:"",ru:""},y5={placeholder:m5},hI={exports:{}};(function(e){(function(t,n,a){e.exports?e.exports=a():t[n]=a()})(wa,"subtag",function(){var t="",n=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function a(x){return x.match(n)||[]}function c(x){return a(x).filter(function(E,T){return E&&T})}function d(x){return x=a(x),{language:x[1]||t,extlang:x[2]||t,script:x[3]||t,region:x[4]||t}}function o(x,E,T){Object.defineProperty(x,E,{value:T,enumerable:!0})}function v(x,E,T){function P(I){return a(I)[x]||t}o(P,"pattern",E),o(d,T,P)}return v(1,/^[a-zA-Z]{2,3}$/,"language"),v(2,/^[a-zA-Z]{3}$/,"extlang"),v(3,/^[a-zA-Z]{4}$/,"script"),v(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),o(d,"split",c),d})})(hI);var g5=hI.exports;function dI(){}dI.prototype={isSupport:function(){return!!window.navigator.geolocation},getCurrentPosition:function(){const e={enableHighAccuracy:!0};return new Promise(function(t,n){window.navigator.geolocation.getCurrentPosition(t,n,e)})}};var v5=dI;function _5(e,t){const n=mI(e),a=["address","street","place","country"];var c;if(typeof t=="function")return t(n);const d=a.indexOf(t);return d===-1?c=a:c=a.slice(d),c.reduce(function(o,v){return n[v]?(o!==""&&(o=o+", "),o+n[v]):o},"")}function mI(e){const t=e.address||"",n=e.text||"",a=e.place_name||"",d={address:a.split(",")[0],houseNumber:t,street:n,placeName:a};return e.context.forEach(function(o){const v=o.id.split(".")[0];d[v]=o.text}),d}const x5=/^[ ]*(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)[ ]*$/;var b5={transformFeatureToGeolocationText:_5,getAddressInfo:mI,REVERSE_GEOCODE_COORD_RGX:x5},w5=EL,S5=jL,Su=qp,E5=KL.EventEmitter,AS=XL,Y0=Lz,J0=s5,C5=d5,k5=y5,T5=g5,I5=v5,MS=b5;const hl={FORWARD:0,LOCAL:1,REVERSE:2};function P5(){var e=document.createElement("div");return e.className="mapboxgl-ctrl-geocoder--powered-by",e.innerHTML='<a href="https://www.mapbox.com/search-service" target="_blank">Powered by Mapbox</a>',e}function yI(e){this._eventEmitter=new E5,this.options=Su({},this.options,e),this.inputString="",this.fresh=!0,this.lastSelected=null,this.geolocation=new I5}yI.prototype={options:{zoom:16,flyTo:!0,trackProximity:!0,minLength:2,reverseGeocode:!1,flipCoordinates:!1,limit:5,origin:"https://api.mapbox.com",enableEventLogging:!0,marker:!0,mapboxgl:null,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,enableGeolocation:!1,addressAccuracy:"street",getItemValue:function(e){return e.place_name},render:function(e){var t=e.place_name.split(",");return'<div class="mapboxgl-ctrl-geocoder--suggestion"><div class="mapboxgl-ctrl-geocoder--suggestion-title">'+t[0]+'</div><div class="mapboxgl-ctrl-geocoder--suggestion-address">'+t.splice(1,t.length).join(",")+"</div></div>"}},addTo:function(e){function t(n,a){if(!document.body.contains(a))throw new Error("Element provided to #addTo() exists, but is not in the DOM");const c=n.onAdd();a.appendChild(c)}if(e._controlContainer)e.addControl(this);else if(e instanceof HTMLElement)t(this,e);else if(typeof e=="string"){const n=document.querySelectorAll(e);if(n.length===0)throw new Error("Element ",e,"not found.");if(n.length>1)throw new Error("Geocoder can only be added to a single html element");t(this,n[0])}else throw new Error("Error: addTo must be a mapbox-gl-js map, an html element, or a CSS selector query for a single html element")},onAdd:function(e){if(e&&typeof e!="string"&&(this._map=e),this.setLanguage(),this.options.localGeocoderOnly||(this.geocoderService=J0(Y0({accessToken:this.options.accessToken,origin:this.options.origin}))),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this.eventManager=new C5(this.options),this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this),this._geolocateUser=this._geolocateUser.bind(this);var t=this.container=document.createElement("div");t.className="mapboxgl-ctrl-geocoder mapboxgl-ctrl";var n=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.className="mapboxgl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",S5(this._onKeyDown,200)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton),this._inputEl.addEventListener("keyup",function(E){this.eventManager.keyevent(E,this)}.bind(this));var a=document.createElement("div");a.classList.add("mapboxgl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="mapboxgl-ctrl-geocoder--button";var c=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');if(this._clearEl.appendChild(c),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),a.appendChild(this._clearEl),a.appendChild(this._loadingEl),t.appendChild(n),t.appendChild(this._inputEl),t.appendChild(a),this.options.enableGeolocation&&this.geolocation.isSupport()){this._geolocateEl=document.createElement("button"),this._geolocateEl.setAttribute("aria-label","Geolocate"),this._geolocateEl.addEventListener("click",this._geolocateUser),this._geolocateEl.className="mapboxgl-ctrl-geocoder--button";var d=this.createIcon("geolocate",'<path d="M12.999 3.677L2.042 8.269c-.962.403-.747 1.823.29 1.912l5.032.431.431 5.033c.089 1.037 1.509 1.252 1.912.29l4.592-10.957c.345-.822-.477-1.644-1.299-1.299z" fill="#4264fb"/>');this._geolocateEl.appendChild(d),a.appendChild(this._geolocateEl),this._showGeolocateButton()}var o=this._typeahead=new w5(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit});this.setRenderFunction(this.options.render),o.getItemValue=this.options.getItemValue;var v=o.list.draw,x=this._footerNode=P5();return o.list.draw=function(){v.call(this),x.addEventListener("mousedown",function(){this.selectingListItem=!0}.bind(this)),x.addEventListener("mouseup",function(){this.selectingListItem=!1}.bind(this)),this.element.appendChild(x)},this.mapMarker=null,this._handleMarker=this._handleMarker.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._mapboxgl=this.options.mapboxgl,!this._mapboxgl&&this.options.marker&&(console.error("No mapboxgl detected in options. Map markers are disabled. Please set options.mapboxgl."),this.options.marker=!1)),t},_geolocateUser:function(){this._hideGeolocateButton(),this._showLoadingIcon(),this.geolocation.getCurrentPosition().then(function(e){this._hideLoadingIcon();const t={geometry:{type:"Point",coordinates:[e.coords.longitude,e.coords.latitude]}};this._handleMarker(t),this._fly(t),this._typeahead.clear(),this._typeahead.selected=!0,this.lastSelected=JSON.stringify(t),this._showClearButton(),this.fresh=!1;const n={limit:1,language:[this.options.language],query:t.geometry.coordinates,types:["address"]};if(this.options.localGeocoderOnly){const a=t.geometry.coordinates[0]+","+t.geometry.coordinates[1];this._setInputValue(a),this._eventEmitter.emit("result",{result:t})}else this.geocoderService.reverseGeocode(n).send().then(function(a){const c=a.body.features[0];if(c){const d=MS.transformFeatureToGeolocationText(c,this.options.addressAccuracy);this._setInputValue(d),c.user_coordinates=t.geometry.coordinates,this._eventEmitter.emit("result",{result:c})}else this._eventEmitter.emit("result",{result:{user_coordinates:t.geometry.coordinates}})}.bind(this))}.bind(this)).catch(function(e){e.code===1?this._renderUserDeniedGeolocationError():this._renderLocationError(),this._hideLoadingIcon(),this._showGeolocateButton(),this._hideAttribution()}.bind(this))},createIcon:function(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");return n.setAttribute("class","mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-"+e),n.setAttribute("viewBox","0 0 18 18"),n.setAttribute("xml:space","preserve"),n.setAttribute("width",18),n.setAttribute("height",18),n.innerHTML=t,n},onRemove:function(){return this.container.parentNode.removeChild(this.container),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this},_setInputValue:function(e){this._inputEl.value=e,setTimeout(function(){this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0)}.bind(this),1)},_onPaste:function(e){var t=(e.clipboardData||window.clipboardData).getData("text");t.length>=this.options.minLength&&this._geocode(t)},_onKeyDown:function(e){var t=27,n=9;if(e.keyCode===t&&this.options.clearAndBlurOnEsc)return this._clear(e),this._inputEl.blur();var a=e.target&&e.target.shadowRoot?e.target.shadowRoot.activeElement:e.target,c=a?a.value:"";if(!c)return this.fresh=!0,e.keyCode!==n&&this.clear(e),this._showGeolocateButton(),this._hideClearButton();this._hideGeolocateButton(),!(e.metaKey||[n,t,37,39,13,38,40].indexOf(e.keyCode)!==-1)&&a.value.length>=this.options.minLength&&this._geocode(a.value)},_showButton:function(){this._typeahead.selected&&this._showClearButton()},_hideButton:function(){this._typeahead.selected&&this._hideClearButton()},_showClearButton:function(){this._clearEl.style.display="block"},_hideClearButton:function(){this._clearEl.style.display="none"},_showGeolocateButton:function(){this._geolocateEl&&this.geolocation.isSupport()&&(this._geolocateEl.style.display="block")},_hideGeolocateButton:function(){this._geolocateEl&&(this._geolocateEl.style.display="none")},_showLoadingIcon:function(){this._loadingEl.style.display="block"},_hideLoadingIcon:function(){this._loadingEl.style.display="none"},_showAttribution:function(){this._footerNode.style.display="block"},_hideAttribution:function(){this._footerNode.style.display="none"},_onBlur:function(e){this.options.clearOnBlur&&this._clearOnBlur(e),this.options.collapsed&&this._collapse()},_onChange:function(){var e=this._typeahead.selected;e&&JSON.stringify(e)!==this.lastSelected&&(this._hideClearButton(),this.options.flyTo&&this._fly(e),this.options.marker&&this._mapboxgl&&this._handleMarker(e),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(e),this._eventEmitter.emit("result",{result:e}),this.eventManager.select(e,this))},_fly:function(e){var t;if(e.properties&&AS[e.properties.short_code])t=Su({},this.options.flyTo),this._map&&this._map.fitBounds(AS[e.properties.short_code].bbox,t);else if(e.bbox){var n=e.bbox;t=Su({},this.options.flyTo),this._map&&this._map.fitBounds([[n[0],n[1]],[n[2],n[3]]],t)}else{var a={zoom:this.options.zoom};t=Su({},a,this.options.flyTo),e.center?t.center=e.center:e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&(t.center=e.geometry.coordinates),this._map&&this._map.flyTo(t)}},_requestType:function(e,t){var n;return e.localGeocoderOnly?n=hl.LOCAL:e.reverseGeocode&&MS.REVERSE_GEOCODE_COORD_RGX.test(t)?n=hl.REVERSE:n=hl.FORWARD,n},_setupConfig:function(e,t){const n=["bbox","limit","proximity","countries","types","language","reverseMode","mode","autocomplete","fuzzyMatch","routing","worldview"],a=/[\s,]+/;var c=this,d=n.reduce(function(v,x){if(c.options[x]===void 0||c.options[x]===null)return v;["countries","types","language"].indexOf(x)>-1?v[x]=c.options[x].split(a):v[x]=c.options[x];const E=typeof c.options[x].longitude=="number"&&typeof c.options[x].latitude=="number";if(x==="proximity"&&E){const T=c.options[x].longitude,P=c.options[x].latitude;v[x]=[T,P]}return v},{});switch(e){case hl.REVERSE:{var o=t.split(a).map(function(v){return parseFloat(v,10)});c.options.flipCoordinates||o.reverse(),d.types&&d.types[0],d=Su(d,{query:o,limit:1}),["proximity","autocomplete","fuzzyMatch","bbox"].forEach(function(v){v in d&&delete d[v]})}break;case hl.FORWARD:{const v=t.trim();/^(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)?$/.test(v)&&(t=t.replace(/,/g," ")),d=Su(d,{query:t})}break}return d},_geocode:function(e){this.inputString=e,this._showLoadingIcon(),this._eventEmitter.emit("loading",{query:e});const t=this._requestType(this.options,e),n=this._setupConfig(t,e);var a;switch(t){case hl.LOCAL:a=Promise.resolve();break;case hl.FORWARD:a=this.geocoderService.forwardGeocode(n).send();break;case hl.REVERSE:a=this.geocoderService.reverseGeocode(n).send();break}var c=this.options.localGeocoder?this.options.localGeocoder(e)||[]:[],d=[],o=null;return a.catch(function(v){o=v}.bind(this)).then(function(v){this._hideLoadingIcon();var x={};return v?v.statusCode=="200"&&(x=v.body,x.request=v.request,x.headers=v.headers):x={type:"FeatureCollection",features:[]},x.config=n,this.fresh&&(this.eventManager.start(this),this.fresh=!1),x.features=x.features?c.concat(x.features):c,this.options.externalGeocoder?(d=this.options.externalGeocoder(e,x.features)||Promise.resolve([]),d.then(function(E){return x.features=x.features?E.concat(x.features):E,x},function(){return x})):x}.bind(this)).then(function(v){if(o)throw o;this.options.filter&&v.features.length&&(v.features=v.features.filter(this.options.filter)),v.features.length?(this._showClearButton(),this._hideGeolocateButton(),this._showAttribution(),this._eventEmitter.emit("results",v),this._typeahead.update(v.features)):(this._hideClearButton(),this._hideAttribution(),this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",v))}.bind(this)).catch(function(v){this._hideLoadingIcon(),this._hideAttribution(),c.length&&this.options.localGeocoder||d.length&&this.options.externalGeocoder?(this._showClearButton(),this._hideGeolocateButton(),this._typeahead.update(c)):(this._hideClearButton(),this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:c}),this._eventEmitter.emit("error",{error:v})}.bind(this)),a},_clear:function(e){e&&e.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._hideClearButton(),this._showGeolocateButton(),this._removeMarker(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0},clear:function(e){this._clear(e),this._inputEl.focus()},_clearOnBlur:function(e){var t=this;e.relatedTarget&&t._clear(e)},_onQueryResult:function(e){var t=e.body;if(t.features.length){var n=t.features[0];this._typeahead.selected=n,this._inputEl.value=n.place_name,this._onChange()}},_updateProximity:function(){if(!(!this._map||!this.options.trackProximity))if(this._map.getZoom()>9){var e=this._map.getCenter().wrap();this.setProximity({longitude:e.lng,latitude:e.lat},!1)}else this.setProximity(null,!1)},_collapse:function(){!this._inputEl.value&&this._inputEl!==document.activeElement&&this.container.classList.add("mapboxgl-ctrl-geocoder--collapsed")},_unCollapse:function(){this.container.classList.remove("mapboxgl-ctrl-geocoder--collapsed")},query:function(e){return this._geocode(e).then(this._onQueryResult),this},_renderError:function(){var e="<div class='mapbox-gl-geocoder--error'>There was an error reaching the server</div>";this._renderMessage(e)},_renderLocationError:function(){var e="<div class='mapbox-gl-geocoder--error'>A location error has occurred</div>";this._renderMessage(e)},_renderNoResults:function(){var e="<div class='mapbox-gl-geocoder--error mapbox-gl-geocoder--no-results'>No results found</div>";this._renderMessage(e)},_renderUserDeniedGeolocationError:function(){var e="<div class='mapbox-gl-geocoder--error'>Geolocation permission denied</div>";this._renderMessage(e)},_renderMessage:function(e){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(e)},_getPlaceholderText:function(){if(this.options.placeholder)return this.options.placeholder;if(this.options.language){var e=this.options.language.split(",")[0],t=T5.language(e),n=k5.placeholder[t];if(n)return n}return"Search"},setInput:function(e){return this._inputEl.value=e,this._typeahead.selected=null,this._typeahead.clear(),e.length>=this.options.minLength&&this._geocode(e),this},setProximity:function(e,t=!0){return this.options.proximity=e,t&&(this.options.trackProximity=!1),this},getProximity:function(){return this.options.proximity},setRenderFunction:function(e){return e&&typeof e=="function"&&(this._typeahead.render=e),this},getRenderFunction:function(){return this._typeahead.render},setLanguage:function(e){var t=navigator.language||navigator.userLanguage||navigator.browserLanguage;return this.options.language=e||this.options.language||t,this},getLanguage:function(){return this.options.language},getZoom:function(){return this.options.zoom},setZoom:function(e){return this.options.zoom=e,this},getFlyTo:function(){return this.options.flyTo},setFlyTo:function(e){return this.options.flyTo=e,this},getPlaceholder:function(){return this.options.placeholder},setPlaceholder:function(e){return this.placeholder=e||this._getPlaceholderText(),this._inputEl.placeholder=this.placeholder,this._inputEl.setAttribute("aria-label",this.placeholder),this},getBbox:function(){return this.options.bbox},setBbox:function(e){return this.options.bbox=e,this},getCountries:function(){return this.options.countries},setCountries:function(e){return this.options.countries=e,this},getTypes:function(){return this.options.types},setTypes:function(e){return this.options.types=e,this},getMinLength:function(){return this.options.minLength},setMinLength:function(e){return this.options.minLength=e,this._typeahead&&(this._typeahead.options.minLength=e),this},getLimit:function(){return this.options.limit},setLimit:function(e){return this.options.limit=e,this._typeahead&&(this._typeahead.options.limit=e),this},getFilter:function(){return this.options.filter},setFilter:function(e){return this.options.filter=e,this},setOrigin:function(e){return this.options.origin=e,this.geocoderService=J0(Y0({accessToken:this.options.accessToken,origin:this.options.origin})),this},getOrigin:function(){return this.options.origin},setAccessToken:function(e){return this.options.accessToken=e,this.geocoderService=J0(Y0({accessToken:this.options.accessToken,origin:this.options.origin})),this},setAutocomplete:function(e){return this.options.autocomplete=e,this},getAutocomplete:function(){return this.options.autocomplete},setFuzzyMatch:function(e){return this.options.fuzzyMatch=e,this},getFuzzyMatch:function(){return this.options.fuzzyMatch},setRouting:function(e){return this.options.routing=e,this},getRouting:function(){return this.options.routing},setWorldview:function(e){return this.options.worldview=e,this},getWorldview:function(){return this.options.worldview},_handleMarker:function(e){if(this._map){this._removeMarker();var t={color:"#4668F2"},n=Su({},t,this.options.marker);return this.mapMarker=new this._mapboxgl.Marker(n),e.center?this.mapMarker.setLngLat(e.center).addTo(this._map):e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&this.mapMarker.setLngLat(e.geometry.coordinates).addTo(this._map),this}},_removeMarker:function(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)},on:function(e,t){return this._eventEmitter.on(e,t),this},off:function(e,t){return this._eventEmitter.removeListener(e,t),this.eventManager.remove(),this}};var A5=yI;const M5=yg(A5);var gI={exports:{}},G1={exports:{}},H1={exports:{}},vI=function(t,n){return function(){for(var c=new Array(arguments.length),d=0;d<c.length;d++)c[d]=arguments[d];return t.apply(n,c)}},R5=vI,Ul=Object.prototype.toString;function Z1(e){return Array.isArray(e)}function wx(e){return typeof e>"u"}function L5(e){return e!==null&&!wx(e)&&e.constructor!==null&&!wx(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function _I(e){return Ul.call(e)==="[object ArrayBuffer]"}function z5(e){return Ul.call(e)==="[object FormData]"}function D5(e){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&_I(e.buffer),t}function O5(e){return typeof e=="string"}function B5(e){return typeof e=="number"}function xI(e){return e!==null&&typeof e=="object"}function dy(e){if(Ul.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function N5(e){return Ul.call(e)==="[object Date]"}function F5(e){return Ul.call(e)==="[object File]"}function U5(e){return Ul.call(e)==="[object Blob]"}function bI(e){return Ul.call(e)==="[object Function]"}function $5(e){return xI(e)&&bI(e.pipe)}function j5(e){return Ul.call(e)==="[object URLSearchParams]"}function V5(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function q5(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function K1(e,t){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),Z1(e))for(var n=0,a=e.length;n<a;n++)t.call(null,e[n],n,e);else for(var c in e)Object.prototype.hasOwnProperty.call(e,c)&&t.call(null,e[c],c,e)}function Sx(){var e={};function t(c,d){dy(e[d])&&dy(c)?e[d]=Sx(e[d],c):dy(c)?e[d]=Sx({},c):Z1(c)?e[d]=c.slice():e[d]=c}for(var n=0,a=arguments.length;n<a;n++)K1(arguments[n],t);return e}function W5(e,t,n){return K1(t,function(c,d){n&&typeof c=="function"?e[d]=R5(c,n):e[d]=c}),e}function G5(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}var Ao={isArray:Z1,isArrayBuffer:_I,isBuffer:L5,isFormData:z5,isArrayBufferView:D5,isString:O5,isNumber:B5,isObject:xI,isPlainObject:dy,isUndefined:wx,isDate:N5,isFile:F5,isBlob:U5,isFunction:bI,isStream:$5,isURLSearchParams:j5,isStandardBrowserEnv:q5,forEach:K1,merge:Sx,extend:W5,trim:V5,stripBOM:G5},$c=Ao;function RS(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var wI=function(t,n,a){if(!n)return t;var c;if(a)c=a(n);else if($c.isURLSearchParams(n))c=n.toString();else{var d=[];$c.forEach(n,function(x,E){x===null||typeof x>"u"||($c.isArray(x)?E=E+"[]":x=[x],$c.forEach(x,function(P){$c.isDate(P)?P=P.toISOString():$c.isObject(P)&&(P=JSON.stringify(P)),d.push(RS(E)+"="+RS(P))}))}),c=d.join("&")}if(c){var o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+c}return t},H5=Ao;function Lg(){this.handlers=[]}Lg.prototype.use=function(t,n,a){return this.handlers.push({fulfilled:t,rejected:n,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1};Lg.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};Lg.prototype.forEach=function(t){H5.forEach(this.handlers,function(a){a!==null&&t(a)})};var Z5=Lg,K5=Ao,X5=function(t,n){K5.forEach(t,function(c,d){d!==n&&d.toUpperCase()===n.toUpperCase()&&(t[n]=c,delete t[d])})},SI=function(t,n,a,c,d){return t.config=n,a&&(t.code=a),t.request=c,t.response=d,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},t},EI={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Q0,LS;function CI(){if(LS)return Q0;LS=1;var e=SI;return Q0=function(n,a,c,d,o){var v=new Error(n);return e(v,a,c,d,o)},Q0}var e_,zS;function Y5(){if(zS)return e_;zS=1;var e=CI();return e_=function(n,a,c){var d=c.config.validateStatus;!c.status||!d||d(c.status)?n(c):a(e("Request failed with status code "+c.status,c.config,null,c.request,c))},e_}var t_,DS;function J5(){if(DS)return t_;DS=1;var e=Ao;return t_=e.isStandardBrowserEnv()?function(){return{write:function(a,c,d,o,v,x){var E=[];E.push(a+"="+encodeURIComponent(c)),e.isNumber(d)&&E.push("expires="+new Date(d).toGMTString()),e.isString(o)&&E.push("path="+o),e.isString(v)&&E.push("domain="+v),x===!0&&E.push("secure"),document.cookie=E.join("; ")},read:function(a){var c=document.cookie.match(new RegExp("(^|;\\s*)("+a+")=([^;]*)"));return c?decodeURIComponent(c[3]):null},remove:function(a){this.write(a,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),t_}var r_,OS;function Q5(){return OS||(OS=1,r_=function(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}),r_}var n_,BS;function eD(){return BS||(BS=1,n_=function(t,n){return n?t.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):t}),n_}var i_,NS;function tD(){if(NS)return i_;NS=1;var e=Q5(),t=eD();return i_=function(a,c){return a&&!e(c)?t(a,c):c},i_}var o_,FS;function rD(){if(FS)return o_;FS=1;var e=Ao,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return o_=function(a){var c={},d,o,v;return a&&e.forEach(a.split(`
`),function(E){if(v=E.indexOf(":"),d=e.trim(E.substr(0,v)).toLowerCase(),o=e.trim(E.substr(v+1)),d){if(c[d]&&t.indexOf(d)>=0)return;d==="set-cookie"?c[d]=(c[d]?c[d]:[]).concat([o]):c[d]=c[d]?c[d]+", "+o:o}}),c},o_}var a_,US;function nD(){if(US)return a_;US=1;var e=Ao;return a_=e.isStandardBrowserEnv()?function(){var n=/(msie|trident)/i.test(navigator.userAgent),a=document.createElement("a"),c;function d(o){var v=o;return n&&(a.setAttribute("href",v),v=a.href),a.setAttribute("href",v),{href:a.href,protocol:a.protocol?a.protocol.replace(/:$/,""):"",host:a.host,search:a.search?a.search.replace(/^\?/,""):"",hash:a.hash?a.hash.replace(/^#/,""):"",hostname:a.hostname,port:a.port,pathname:a.pathname.charAt(0)==="/"?a.pathname:"/"+a.pathname}}return c=d(window.location.href),function(v){var x=e.isString(v)?d(v):v;return x.protocol===c.protocol&&x.host===c.host}}():function(){return function(){return!0}}(),a_}var s_,$S;function zg(){if($S)return s_;$S=1;function e(t){this.message=t}return e.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},e.prototype.__CANCEL__=!0,s_=e,s_}var l_,jS;function VS(){if(jS)return l_;jS=1;var e=Ao,t=Y5(),n=J5(),a=wI,c=tD(),d=rD(),o=nD(),v=CI(),x=EI,E=zg();return l_=function(P){return new Promise(function(q,$){var G=P.data,D=P.headers,F=P.responseType,V;function B(){P.cancelToken&&P.cancelToken.unsubscribe(V),P.signal&&P.signal.removeEventListener("abort",V)}e.isFormData(G)&&delete D["Content-Type"];var z=new XMLHttpRequest;if(P.auth){var re=P.auth.username||"",ie=P.auth.password?unescape(encodeURIComponent(P.auth.password)):"";D.Authorization="Basic "+btoa(re+":"+ie)}var ce=c(P.baseURL,P.url);z.open(P.method.toUpperCase(),a(ce,P.params,P.paramsSerializer),!0),z.timeout=P.timeout;function xe(){if(z){var ve="getAllResponseHeaders"in z?d(z.getAllResponseHeaders()):null,we=!F||F==="text"||F==="json"?z.responseText:z.response,ee={data:we,status:z.status,statusText:z.statusText,headers:ve,config:P,request:z};t(function(Oe){q(Oe),B()},function(Oe){$(Oe),B()},ee),z=null}}if("onloadend"in z?z.onloadend=xe:z.onreadystatechange=function(){!z||z.readyState!==4||z.status===0&&!(z.responseURL&&z.responseURL.indexOf("file:")===0)||setTimeout(xe)},z.onabort=function(){z&&($(v("Request aborted",P,"ECONNABORTED",z)),z=null)},z.onerror=function(){$(v("Network Error",P,null,z)),z=null},z.ontimeout=function(){var we=P.timeout?"timeout of "+P.timeout+"ms exceeded":"timeout exceeded",ee=P.transitional||x;P.timeoutErrorMessage&&(we=P.timeoutErrorMessage),$(v(we,P,ee.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",z)),z=null},e.isStandardBrowserEnv()){var Te=(P.withCredentials||o(ce))&&P.xsrfCookieName?n.read(P.xsrfCookieName):void 0;Te&&(D[P.xsrfHeaderName]=Te)}"setRequestHeader"in z&&e.forEach(D,function(we,ee){typeof G>"u"&&ee.toLowerCase()==="content-type"?delete D[ee]:z.setRequestHeader(ee,we)}),e.isUndefined(P.withCredentials)||(z.withCredentials=!!P.withCredentials),F&&F!=="json"&&(z.responseType=P.responseType),typeof P.onDownloadProgress=="function"&&z.addEventListener("progress",P.onDownloadProgress),typeof P.onUploadProgress=="function"&&z.upload&&z.upload.addEventListener("progress",P.onUploadProgress),(P.cancelToken||P.signal)&&(V=function(ve){z&&($(!ve||ve&&ve.type?new E("canceled"):ve),z.abort(),z=null)},P.cancelToken&&P.cancelToken.subscribe(V),P.signal&&(P.signal.aborted?V():P.signal.addEventListener("abort",V))),G||(G=null),z.send(G)})},l_}var Di=Ao,qS=X5,iD=SI,oD=EI,aD={"Content-Type":"application/x-www-form-urlencoded"};function WS(e,t){!Di.isUndefined(e)&&Di.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function sD(){var e;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(e=VS()),e}function lD(e,t,n){if(Di.isString(e))try{return(t||JSON.parse)(e),Di.trim(e)}catch(a){if(a.name!=="SyntaxError")throw a}return(n||JSON.stringify)(e)}var Dg={transitional:oD,adapter:sD(),transformRequest:[function(t,n){return qS(n,"Accept"),qS(n,"Content-Type"),Di.isFormData(t)||Di.isArrayBuffer(t)||Di.isBuffer(t)||Di.isStream(t)||Di.isFile(t)||Di.isBlob(t)?t:Di.isArrayBufferView(t)?t.buffer:Di.isURLSearchParams(t)?(WS(n,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):Di.isObject(t)||n&&n["Content-Type"]==="application/json"?(WS(n,"application/json"),lD(t)):t}],transformResponse:[function(t){var n=this.transitional||Dg.transitional,a=n&&n.silentJSONParsing,c=n&&n.forcedJSONParsing,d=!a&&this.responseType==="json";if(d||c&&Di.isString(t)&&t.length)try{return JSON.parse(t)}catch(o){if(d)throw o.name==="SyntaxError"?iD(o,this,"E_JSON_PARSE"):o}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Di.forEach(["delete","get","head"],function(t){Dg.headers[t]={}});Di.forEach(["post","put","patch"],function(t){Dg.headers[t]=Di.merge(aD)});var X1=Dg,uD=Ao,cD=X1,pD=function(t,n,a){var c=this||cD;return uD.forEach(a,function(o){t=o.call(c,t,n)}),t},u_,GS;function kI(){return GS||(GS=1,u_=function(t){return!!(t&&t.__CANCEL__)}),u_}var HS=Ao,c_=pD,fD=kI(),hD=X1,dD=zg();function p_(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new dD("canceled")}var mD=function(t){p_(t),t.headers=t.headers||{},t.data=c_.call(t,t.data,t.headers,t.transformRequest),t.headers=HS.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),HS.forEach(["delete","get","head","post","put","patch","common"],function(c){delete t.headers[c]});var n=t.adapter||hD.adapter;return n(t).then(function(c){return p_(t),c.data=c_.call(t,c.data,c.headers,t.transformResponse),c},function(c){return fD(c)||(p_(t),c&&c.response&&(c.response.data=c_.call(t,c.response.data,c.response.headers,t.transformResponse))),Promise.reject(c)})},No=Ao,TI=function(t,n){n=n||{};var a={};function c(T,P){return No.isPlainObject(T)&&No.isPlainObject(P)?No.merge(T,P):No.isPlainObject(P)?No.merge({},P):No.isArray(P)?P.slice():P}function d(T){if(No.isUndefined(n[T])){if(!No.isUndefined(t[T]))return c(void 0,t[T])}else return c(t[T],n[T])}function o(T){if(!No.isUndefined(n[T]))return c(void 0,n[T])}function v(T){if(No.isUndefined(n[T])){if(!No.isUndefined(t[T]))return c(void 0,t[T])}else return c(void 0,n[T])}function x(T){if(T in n)return c(t[T],n[T]);if(T in t)return c(void 0,t[T])}var E={url:o,method:o,data:o,baseURL:v,transformRequest:v,transformResponse:v,paramsSerializer:v,timeout:v,timeoutMessage:v,withCredentials:v,adapter:v,responseType:v,xsrfCookieName:v,xsrfHeaderName:v,onUploadProgress:v,onDownloadProgress:v,decompress:v,maxContentLength:v,maxBodyLength:v,transport:v,httpAgent:v,httpsAgent:v,cancelToken:v,socketPath:v,responseEncoding:v,validateStatus:x};return No.forEach(Object.keys(t).concat(Object.keys(n)),function(P){var I=E[P]||d,q=I(P);No.isUndefined(q)&&I!==x||(a[P]=q)}),a},f_,ZS;function II(){return ZS||(ZS=1,f_={version:"0.26.1"}),f_}var yD=II().version,Y1={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){Y1[e]=function(a){return typeof a===e||"a"+(t<1?"n ":" ")+e}});var KS={};Y1.transitional=function(t,n,a){function c(d,o){return"[Axios v"+yD+"] Transitional option '"+d+"'"+o+(a?". "+a:"")}return function(d,o,v){if(t===!1)throw new Error(c(o," has been removed"+(n?" in "+n:"")));return n&&!KS[o]&&(KS[o]=!0,console.warn(c(o," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(d,o,v):!0}};function gD(e,t,n){if(typeof e!="object")throw new TypeError("options must be an object");for(var a=Object.keys(e),c=a.length;c-- >0;){var d=a[c],o=t[d];if(o){var v=e[d],x=v===void 0||o(v,d,e);if(x!==!0)throw new TypeError("option "+d+" must be "+x);continue}if(n!==!0)throw Error("Unknown option "+d)}}var vD={assertOptions:gD,validators:Y1},PI=Ao,_D=wI,XS=Z5,YS=mD,Og=TI,AI=vD,jc=AI.validators;function fd(e){this.defaults=e,this.interceptors={request:new XS,response:new XS}}fd.prototype.request=function(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Og(this.defaults,n),n.method?n.method=n.method.toLowerCase():this.defaults.method?n.method=this.defaults.method.toLowerCase():n.method="get";var a=n.transitional;a!==void 0&&AI.assertOptions(a,{silentJSONParsing:jc.transitional(jc.boolean),forcedJSONParsing:jc.transitional(jc.boolean),clarifyTimeoutError:jc.transitional(jc.boolean)},!1);var c=[],d=!0;this.interceptors.request.forEach(function(q){typeof q.runWhen=="function"&&q.runWhen(n)===!1||(d=d&&q.synchronous,c.unshift(q.fulfilled,q.rejected))});var o=[];this.interceptors.response.forEach(function(q){o.push(q.fulfilled,q.rejected)});var v;if(!d){var x=[YS,void 0];for(Array.prototype.unshift.apply(x,c),x=x.concat(o),v=Promise.resolve(n);x.length;)v=v.then(x.shift(),x.shift());return v}for(var E=n;c.length;){var T=c.shift(),P=c.shift();try{E=T(E)}catch(I){P(I);break}}try{v=YS(E)}catch(I){return Promise.reject(I)}for(;o.length;)v=v.then(o.shift(),o.shift());return v};fd.prototype.getUri=function(t){return t=Og(this.defaults,t),_D(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};PI.forEach(["delete","get","head","options"],function(t){fd.prototype[t]=function(n,a){return this.request(Og(a||{},{method:t,url:n,data:(a||{}).data}))}});PI.forEach(["post","put","patch"],function(t){fd.prototype[t]=function(n,a,c){return this.request(Og(c||{},{method:t,url:n,data:a}))}});var xD=fd,h_,JS;function bD(){if(JS)return h_;JS=1;var e=zg();function t(n){if(typeof n!="function")throw new TypeError("executor must be a function.");var a;this.promise=new Promise(function(o){a=o});var c=this;this.promise.then(function(d){if(c._listeners){var o,v=c._listeners.length;for(o=0;o<v;o++)c._listeners[o](d);c._listeners=null}}),this.promise.then=function(d){var o,v=new Promise(function(x){c.subscribe(x),o=x}).then(d);return v.cancel=function(){c.unsubscribe(o)},v},n(function(o){c.reason||(c.reason=new e(o),a(c.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.prototype.subscribe=function(a){if(this.reason){a(this.reason);return}this._listeners?this._listeners.push(a):this._listeners=[a]},t.prototype.unsubscribe=function(a){if(this._listeners){var c=this._listeners.indexOf(a);c!==-1&&this._listeners.splice(c,1)}},t.source=function(){var a,c=new t(function(o){a=o});return{token:c,cancel:a}},h_=t,h_}var d_,QS;function wD(){return QS||(QS=1,d_=function(t){return function(a){return t.apply(null,a)}}),d_}var m_,eE;function SD(){if(eE)return m_;eE=1;var e=Ao;return m_=function(n){return e.isObject(n)&&n.isAxiosError===!0},m_}var tE=Ao,ED=vI,my=xD,CD=TI,kD=X1;function MI(e){var t=new my(e),n=ED(my.prototype.request,t);return tE.extend(n,my.prototype,t),tE.extend(n,t),n.create=function(c){return MI(CD(e,c))},n}var ss=MI(kD);ss.Axios=my;ss.Cancel=zg();ss.CancelToken=bD();ss.isCancel=kI();ss.VERSION=II().version;ss.all=function(t){return Promise.all(t)};ss.spread=wD();ss.isAxiosError=SD();H1.exports=ss;H1.exports.default=ss;var TD=H1.exports,ID=TD;const PD="@sendgrid/client",AD="Twilio SendGrid NodeJS API client",MD="7.7.0",RD="Twilio SendGrid <help@twilio.com> (sendgrid.com)",LD=["Kyle Partridge <kyle.partridge@sendgrid.com>","David Tomberlin <david.tomberlin@sendgrid.com>","Swift <swift@sendgrid.com>","Brandon West <brandon.west@sendgrid.com>","Scott Motte <scott.motte@sendgrid.com>","Robert Acosta <robert.acosta@sendgrid.com>","Elmer Thomas <ethomas@twilio.com>","Adam Reis <adam@reis.nz>"],zD="MIT",DD="https://sendgrid.com",OD={type:"git",url:"git://github.com/sendgrid/sendgrid-nodejs.git"},BD={access:"public"},ND="index.js",FD={node:"6.* || 8.* || >=10.*"},UD={"@sendgrid/helpers":"^7.7.0",axios:"^0.26.0"},$D={chai:"4.2.0",nock:"^10.0.6"},jD={chai:"4.2.0"},VD=["http","rest","api","mail","sendgrid"],qD="30eebb16a51b51e6a2df1b3596044db6f5fdbe92",WD={name:PD,description:AD,version:MD,author:RD,contributors:LD,license:zD,homepage:DD,repository:OD,publishConfig:BD,main:ND,engines:FD,dependencies:UD,devDependencies:$D,resolutions:jD,tags:VD,gitHead:qD};var J1=function e(t,n,a){if(typeof t!="object"||t===null)throw new Error("Non object passed to convertKeys: "+t);if(Array.isArray(t))return t;Array.isArray(a)||(a=[]);for(const c in t)if(t.hasOwnProperty(c)){const d=n(c);typeof t[c]=="object"&&t[c]!==null&&!a.includes(c)&&!a.includes(d)&&(t[c]=e(t[c],n,a)),d!==c&&(t[d]=t[c],delete t[c])}return t},GD=function(t){if(typeof t!="string")throw new Error("String expected for conversion to snake case");return t.trim().replace(/_+|\-+/g," ").replace(/(?:^\w|[A-Z]|\b\w|\s+)/g,function(n,a){return Number(n)===0?"":a===0?n.toLowerCase():n.toUpperCase()})};const HD=J1,ZD=GD;var hd=function(t,n){return HD(t,ZD,n)},KD=function(t){if(typeof t!="string")throw new Error("String expected for conversion to snake case");return t.trim().replace(/(\s*\-*\b\w|[A-Z])/g,function(n){return n=n.trim().toLowerCase().replace("-",""),(n[0]==="_"?"":"_")+n}).slice(1)};const XD=J1,YD=KD;var Bg=function(t,n){return XD(t,YD,n)},dd=function(t){return JSON.parse(JSON.stringify(t))};const JD={},QD=Object.freeze(Object.defineProperty({__proto__:null,default:JD},Symbol.toStringTag,{value:"Module"})),RI=jC(QD),e4=hd,t4=Bg,r4=dd,n4=RI,i4=RI;let o4=class{constructor(t){t&&this.fromData(t)}fromData(t){if(typeof t!="object")throw new Error("Expecting object for Mail data");t=r4(t),t=e4(t);const{content:n,filename:a,type:c,disposition:d,contentId:o,filePath:v}=t;if(typeof n<"u"&&typeof v<"u")throw new Error("The props 'content' and 'filePath' cannot be used together.");this.setFilename(a),this.setType(c),this.setDisposition(d),this.setContentId(o),this.setContent(v?this.readFile(v):n)}readFile(t){return n4.readFileSync(i4.resolve(t))}setContent(t){if(typeof t=="string"){this.content=t;return}else if(t instanceof Buffer&&t.toString!==void 0){this.content=t.toString(),this.disposition==="attachment"&&(this.content=t.toString("base64"));return}throw new Error("`content` expected to be either Buffer or string")}setFileContent(t){if(t instanceof Buffer&&t.toString!==void 0){this.content=t.toString("base64");return}throw new Error("`content` expected to be Buffer")}setFilename(t){if(!(typeof t>"u")){if(t&&typeof t!="string")throw new Error("String expected for `filename`");this.filename=t}}setType(t){if(!(typeof t>"u")){if(typeof t!="string")throw new Error("String expected for `type`");this.type=t}}setDisposition(t){if(!(typeof t>"u")){if(typeof t!="string")throw new Error("String expected for `disposition`");this.disposition=t}}setContentId(t){if(!(typeof t>"u")){if(typeof t!="string")throw new Error("String expected for `contentId`");this.contentId=t}}toJSON(){const{content:t,filename:n,type:a,disposition:c,contentId:d}=this,o={content:t,filename:n};return typeof a<"u"&&(o.type=a),typeof c<"u"&&(o.disposition=c),typeof d<"u"&&(o.contentId=d),t4(o)}};var a4=o4,LI=function(t){if(t.indexOf("<")===-1)return["",t];let[n,a]=t.split("<");return n=n.trim(),a=a.replace(">","").trim(),[n,a]};const s4=LI;let l4=class Ex{constructor(t){t&&this.fromData(t)}fromData(t){if(typeof t=="string"){const[c,d]=s4(t);t={name:c,email:d}}if(typeof t!="object")throw new Error("Expecting object or string for EmailAddress data");const{name:n,email:a}=t;this.setEmail(a),this.setName(n)}setName(t){if(!(typeof t>"u")){if(typeof t!="string")throw new Error("String expected for `name`");this.name=t}}setEmail(t){if(typeof t>"u")throw new Error("Must provide `email`");if(typeof t!="string")throw new Error("String expected for `email`");this.email=t}toJSON(){const{email:t,name:n}=this,a={email:t};return n!==""&&(a.name=n),a}static create(t){return Array.isArray(t)?t.filter(n=>!!n).map(n=>this.create(n)):t instanceof Ex?t:new Ex(t)}};var Q1=l4,u4=function(t){return c4(t)&&!p4(t)};function c4(e){return!!e&&typeof e=="object"}function p4(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"||d4(e)}var f4=typeof Symbol=="function"&&Symbol.for,h4=f4?Symbol.for("react.element"):60103;function d4(e){return e.$$typeof===h4}function m4(e){return Array.isArray(e)?[]:{}}function Jh(e,t){return t.clone!==!1&&t.isMergeableObject(e)?Pp(m4(e),e,t):e}function y4(e,t,n){return e.concat(t).map(function(a){return Jh(a,n)})}function g4(e,t){if(!t.customMerge)return Pp;var n=t.customMerge(e);return typeof n=="function"?n:Pp}function v4(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return Object.propertyIsEnumerable.call(e,t)}):[]}function rE(e){return Object.keys(e).concat(v4(e))}function zI(e,t){try{return t in e}catch{return!1}}function _4(e,t){return zI(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))}function x4(e,t,n){var a={};return n.isMergeableObject(e)&&rE(e).forEach(function(c){a[c]=Jh(e[c],n)}),rE(t).forEach(function(c){_4(e,c)||(zI(e,c)&&n.isMergeableObject(t[c])?a[c]=g4(c,n)(e[c],t[c],n):a[c]=Jh(t[c],n))}),a}function Pp(e,t,n){n=n||{},n.arrayMerge=n.arrayMerge||y4,n.isMergeableObject=n.isMergeableObject||u4,n.cloneUnlessOtherwiseSpecified=Jh;var a=Array.isArray(t),c=Array.isArray(e),d=a===c;return d?a?n.arrayMerge(e,t,n):x4(e,t,n):Jh(t,n)}Pp.all=function(t,n){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(a,c){return Pp(a,c,n)},{})};var b4=Pp,w4=b4,DI=function e(t,n="{{",a="}}"){if(Array.isArray(t))return t.map(d=>e(d,n,a));const c={};for(const d in t)t.hasOwnProperty(d)&&(c[n+d+a]=String(t[d]));return c};const _u=Q1,S4=hd,E4=Bg,C4=dd,k4=w4,T4=DI;let I4=class{constructor(t){this.to=[],this.cc=[],this.bcc=[],this.headers={},this.customArgs={},this.substitutions={},this.substitutionWrappers=["{{","}}"],this.dynamicTemplateData={},t&&this.fromData(t)}fromData(t){if(typeof t!="object")throw new Error("Expecting object for Mail data");t=C4(t),t=S4(t,["substitutions","dynamicTemplateData","customArgs","headers"]);const{to:n,from:a,cc:c,bcc:d,subject:o,headers:v,customArgs:x,sendAt:E,substitutions:T,substitutionWrappers:P,dynamicTemplateData:I}=t;this.setTo(n),this.setFrom(a),this.setCc(c),this.setBcc(d),this.setSubject(o),this.setHeaders(v),this.setSubstitutions(T),this.setSubstitutionWrappers(P),this.setCustomArgs(x),this.setDynamicTemplateData(I),this.setSendAt(E)}setSubject(t){if(!(typeof t>"u")){if(typeof t!="string")throw new Error("String expected for `subject`");this.subject=t}}setSendAt(t){if(!(typeof t>"u")){if(!Number.isInteger(t))throw new Error("Integer expected for `sendAt`");this.sendAt=t}}setTo(t){typeof t>"u"||(Array.isArray(t)||(t=[t]),this.to=_u.create(t))}setFrom(t){typeof t>"u"||(this.from=_u.create(t))}addTo(t){typeof t>"u"||this.to.push(_u.create(t))}setCc(t){typeof t>"u"||(Array.isArray(t)||(t=[t]),this.cc=_u.create(t))}addCc(t){typeof t>"u"||this.cc.push(_u.create(t))}setBcc(t){typeof t>"u"||(Array.isArray(t)||(t=[t]),this.bcc=_u.create(t))}addBcc(t){typeof t>"u"||this.bcc.push(_u.create(t))}setHeaders(t){if(!(typeof t>"u")){if(typeof t!="object"||t===null)throw new Error("Object expected for `headers`");this.headers=t}}addHeader(t,n){if(typeof t!="string")throw new Error("String expected for header key");if(typeof n!="string")throw new Error("String expected for header value");this.headers[t]=n}setCustomArgs(t){if(!(typeof t>"u")){if(typeof t!="object"||t===null)throw new Error("Object expected for `customArgs`");this.customArgs=t}}addCustomArg(t,n){if(typeof t!="string")throw new Error("String expected for custom arg key");if(typeof n!="string")throw new Error("String expected for custom arg value");this.customArgs[t]=n}setSubstitutions(t){if(!(typeof t>"u")){if(typeof t!="object")throw new Error("Object expected for `substitutions`");this.substitutions=t}}addSubstitution(t,n){if(typeof t!="string")throw new Error("String expected for substitution key");if(typeof n!="string"&&typeof n!="number")throw new Error("String or Number expected for substitution value");this.substitutions[t]=n}reverseMergeSubstitutions(t){if(!(typeof t>"u"||t===null)){if(typeof t!="object")throw new Error("Object expected for `substitutions` in reverseMergeSubstitutions");this.substitutions=Object.assign({},t,this.substitutions)}}setSubstitutionWrappers(t){if(!(typeof t>"u"||t===null)){if(!Array.isArray(t)||t.length!==2)throw new Error("Array expected with two elements for `substitutionWrappers`");this.substitutionWrappers=t}}deepMergeDynamicTemplateData(t){if(!(typeof t>"u"||t===null)){if(typeof t!="object")throw new Error("Object expected for `dynamicTemplateData` in deepMergeDynamicTemplateData");this.dynamicTemplateData=k4(t,this.dynamicTemplateData)}}setDynamicTemplateData(t){if(!(typeof t>"u")){if(typeof t!="object")throw new Error("Object expected for `dynamicTemplateData`");this.dynamicTemplateData=t}}toJSON(){const{to:t,from:n,cc:a,bcc:c,subject:d,headers:o,customArgs:v,sendAt:x,substitutions:E,substitutionWrappers:T,dynamicTemplateData:P}=this,I={to:t};if(Array.isArray(a)&&a.length>0&&(I.cc=a),Array.isArray(c)&&c.length>0&&(I.bcc=c),Object.keys(o).length>0&&(I.headers=o),E&&Object.keys(E).length>0){const[q,$]=T;I.substitutions=T4(E,q,$)}return Object.keys(v).length>0&&(I.customArgs=v),P&&Object.keys(P).length>0&&(I.dynamicTemplateData=P),typeof d<"u"&&(I.subject=d),typeof x<"u"&&(I.sendAt=x),typeof n<"u"&&(I.from=n),E4(I,["substitutions","dynamicTemplateData","customArgs","headers"])}};var OI=I4,BI=function(t){return t.map(n=>typeof n=="object"&&n!==null&&typeof n.toJSON=="function"?n.toJSON():n)};const P4=`
Content with characters ', " or & may need to be escaped with three brackets
{{{ content }}}
See https://sendgrid.com/docs/for-developers/sending-email/using-handlebars/ for more information.`;var A4={DYNAMIC_TEMPLATE_CHAR_WARNING:P4};const gn=(e,t,n,a)=>{if(!(typeof e>"u"||typeof e[n]>"u")&&typeof e[n]!==a)throw new Error(`${a} expected for \`${t}.${n}\``)};var M4={validateMailSettings(e){if(typeof e!="object")throw new Error("Object expected for `mailSettings`");const{bcc:t,bypassListManagement:n,bypassSpamManagement:a,bypassBounceManagement:c,bypassUnsubscribeManagement:d,footer:o,sandboxMode:v,spamCheck:x}=e;gn(t,"bcc","enable","boolean"),gn(t,"bcc","email","string"),gn(n,"bypassListManagement","enable","boolean"),gn(a,"bypassSpamManagement","enable","boolean"),gn(c,"bypassBounceManagement","enable","boolean"),gn(d,"bypassUnsubscribeManagement","enable","boolean"),gn(o,"footer","enable","boolean"),gn(o,"footer","text","string"),gn(o,"footer","html","string"),gn(v,"sandboxMode","enable","boolean"),gn(x,"spamCheck","enable","boolean"),gn(x,"spamCheck","threshold","number"),gn(x,"spamCheck","postToUrl","string")},validateTrackingSettings(e){if(typeof e!="object")throw new Error("Object expected for `trackingSettings`");const{clickTracking:t,openTracking:n,subscriptionTracking:a,ganalytics:c}=e;gn(t,"clickTracking","enable","boolean"),gn(t,"clickTracking","enableText","boolean"),gn(n,"openTracking","enable","boolean"),gn(n,"openTracking","substitutionTag","string"),gn(a,"subscriptionTracking","enable","boolean"),gn(a,"subscriptionTracking","text","string"),gn(a,"subscriptionTracking","html","string"),gn(a,"subscriptionTracking","substitutionTag","string"),gn(c,"ganalytics","enable","boolean"),gn(c,"ganalytics","utm_source","string"),gn(c,"ganalytics","utm_medium","string"),gn(c,"ganalytics","utm_term","string"),gn(c,"ganalytics","utm_content","string"),gn(c,"ganalytics","utm_campaign","string")}};const nE=Q1,ih=OI,R4=hd,L4=Bg,z4=dd,y_=BI,{DYNAMIC_TEMPLATE_CHAR_WARNING:D4}=A4,{validateMailSettings:O4,validateTrackingSettings:B4}=M4;let N4=class Cx{constructor(t){this.isDynamic=!1,this.hideWarnings=!1,this.personalizations=[],this.attachments=[],this.content=[],this.categories=[],this.headers={},this.sections={},this.customArgs={},this.trackingSettings={},this.mailSettings={},this.asm={},this.substitutions=null,this.substitutionWrappers=null,this.dynamicTemplateData=null,t&&this.fromData(t)}fromData(t){if(typeof t!="object")throw new Error("Expecting object for Mail data");t=z4(t),t=R4(t,["substitutions","dynamicTemplateData","customArgs","headers","sections"]);const{to:n,from:a,replyTo:c,cc:d,bcc:o,sendAt:v,subject:x,text:E,html:T,content:P,templateId:I,personalizations:q,attachments:$,ipPoolName:G,batchId:D,sections:F,headers:V,categories:B,category:z,customArgs:re,asm:ie,mailSettings:ce,trackingSettings:xe,substitutions:Te,substitutionWrappers:ve,dynamicTemplateData:we,isMultiple:ee,hideWarnings:pe,replyToList:Oe}=t;this.setFrom(a),this.setReplyTo(c),this.setSubject(x),this.setSendAt(v),this.setTemplateId(I),this.setBatchId(D),this.setIpPoolName(G),this.setAttachments($),this.setContent(P),this.setSections(F),this.setHeaders(V),this.setCategories(z),this.setCategories(B),this.setCustomArgs(re),this.setAsm(ie),this.setMailSettings(ce),this.setTrackingSettings(xe),this.setHideWarnings(pe),this.setReplyToList(Oe),this.isDynamic?this.setDynamicTemplateData(we):(this.setSubstitutions(Te),this.setSubstitutionWrappers(ve)),this.addTextContent(E),this.addHtmlContent(T),q?this.setPersonalizations(q):ee&&Array.isArray(n)?n.forEach(Ue=>this.addTo(Ue,d,o)):this.addTo(n,d,o)}setFrom(t){if(this._checkProperty("from",t,[this._checkUndefined])){if(typeof t!="string"&&typeof t.email!="string")throw new Error("String or address object expected for `from`");this.from=nE.create(t)}}setReplyTo(t){if(this._checkProperty("replyTo",t,[this._checkUndefined])){if(typeof t!="string"&&typeof t.email!="string")throw new Error("String or address object expected for `replyTo`");this.replyTo=nE.create(t)}}setSubject(t){this._setProperty("subject",t,"string")}setSendAt(t){this._checkProperty("sendAt",t,[this._checkUndefined,this._createCheckThatThrows(Number.isInteger,"Integer expected for `sendAt`")])&&(this.sendAt=t)}setTemplateId(t){this._setProperty("templateId",t,"string")&&t.indexOf("d-")===0&&(this.isDynamic=!0)}setBatchId(t){this._setProperty("batchId",t,"string")}setIpPoolName(t){this._setProperty("ipPoolName",t,"string")}setAsm(t){if(this._checkProperty("asm",t,[this._checkUndefined,this._createTypeCheck("object")])){if(typeof t.groupId!="number")throw new Error("Expected `asm` to include an integer in its `groupId` field");if(t.groupsToDisplay&&(!Array.isArray(t.groupsToDisplay)||!t.groupsToDisplay.every(n=>typeof n=="number")))throw new Error("Array of integers expected for `asm.groupsToDisplay`");this.asm=t}}setPersonalizations(t){if(this._doArrayCheck("personalizations",t)){if(!t.every(n=>typeof n=="object"))throw new Error("Array of objects expected for `personalizations`");this.personalizations=[],t.forEach(n=>this.addPersonalization(n))}}addPersonalization(t){this.isDynamic&&t.substitutions?delete t.substitutions:!this.isDynamic&&t.dynamicTemplateData&&delete t.dynamicTemplateData,t instanceof ih||(t=new ih(t)),this.isDynamic?this.applyDynamicTemplateData(t):this.applySubstitutions(t),this.personalizations.push(t)}addTo(t,n,a){if(typeof t>"u"&&typeof n>"u"&&typeof a>"u")throw new Error("Provide at least one of to, cc or bcc");this.addPersonalization(new ih({to:t,cc:n,bcc:a}))}setSubstitutions(t){this._setProperty("substitutions",t,"object")}setSubstitutionWrappers(t){let n=(a,c)=>{if(!Array.isArray(c)||c.length!==2)throw new Error("Array expected with two elements for `"+a+"`")};this._checkProperty("substitutionWrappers",t,[this._checkUndefined,n])&&(this.substitutionWrappers=t)}applySubstitutions(t){t instanceof ih&&(t.reverseMergeSubstitutions(this.substitutions),t.setSubstitutionWrappers(this.substitutionWrappers))}applyDynamicTemplateData(t){t instanceof ih&&t.deepMergeDynamicTemplateData(this.dynamicTemplateData)}setDynamicTemplateData(t){if(!(typeof t>"u")){if(typeof t!="object")throw new Error("Object expected for `dynamicTemplateData`");this.hideWarnings||Object.values(t).forEach(n=>{/['"&]/.test(n)&&console.warn(D4)}),this.dynamicTemplateData=t}}setContent(t){if(this._doArrayCheck("content",t)){if(!t.every(n=>typeof n=="object"))throw new Error("Expected each entry in `content` to be an object");if(!t.every(n=>typeof n.type=="string"))throw new Error("Expected each `content` entry to contain a `type` string");if(!t.every(n=>typeof n.value=="string"))throw new Error("Expected each `content` entry to contain a `value` string");this.content=t}}addContent(t){this._checkProperty("content",t,[this._createTypeCheck("object")])&&this.content.push(t)}addTextContent(t){this._checkProperty("text",t,[this._checkUndefined,this._createTypeCheck("string")])&&this.addContent({value:t,type:"text/plain"})}addHtmlContent(t){this._checkProperty("html",t,[this._checkUndefined,this._createTypeCheck("string")])&&this.addContent({value:t,type:"text/html"})}setAttachments(t){if(this._doArrayCheck("attachments",t)){if(!t.every(n=>typeof n.content=="string"))throw new Error("Expected each attachment to contain a `content` string");if(!t.every(n=>typeof n.filename=="string"))throw new Error("Expected each attachment to contain a `filename` string");if(!t.every(n=>!n.type||typeof n.type=="string"))throw new Error("Expected the attachment's `type` field to be a string");if(!t.every(n=>!n.disposition||typeof n.disposition=="string"))throw new Error("Expected the attachment's `disposition` field to be a string");this.attachments=t}}addAttachment(t){this._checkProperty("attachment",t,[this._checkUndefined,this._createTypeCheck("object")])&&this.attachments.push(t)}setCategories(t){let n=(a,c)=>{if(!Array.isArray(c)||!c.every(d=>typeof d=="string"))throw new Error("Array of strings expected for `"+a+"`")};typeof t=="string"&&(t=[t]),this._checkProperty("categories",t,[this._checkUndefined,n])&&(this.categories=t)}addCategory(t){this._checkProperty("category",t,[this._createTypeCheck("string")])&&this.categories.push(t)}setHeaders(t){this._setProperty("headers",t,"object")}addHeader(t,n){this._checkProperty("key",t,[this._createTypeCheck("string")])&&this._checkProperty("value",n,[this._createTypeCheck("string")])&&(this.headers[t]=n)}setSections(t){this._setProperty("sections",t,"object")}setCustomArgs(t){this._setProperty("customArgs",t,"object")}setTrackingSettings(t){typeof t>"u"||(B4(t),this.trackingSettings=t)}setMailSettings(t){typeof t>"u"||(O4(t),this.mailSettings=t)}setHideWarnings(t){if(!(typeof t>"u")){if(typeof t!="boolean")throw new Error("Boolean expected for `hideWarnings`");this.hideWarnings=t}}toJSON(){const{from:t,replyTo:n,sendAt:a,subject:c,content:d,templateId:o,personalizations:v,attachments:x,ipPoolName:E,batchId:T,asm:P,sections:I,headers:q,categories:$,customArgs:G,mailSettings:D,trackingSettings:F,replyToList:V}=this,B={from:t,subject:c,personalizations:y_(v)};return Array.isArray(x)&&x.length>0&&(B.attachments=y_(x)),Array.isArray($)&&$.length>0&&(B.categories=$.filter(z=>z!=="")),Array.isArray(d)&&d.length>0&&(B.content=y_(d)),Object.keys(q).length>0&&(B.headers=q),Object.keys(D).length>0&&(B.mailSettings=D),Object.keys(F).length>0&&(B.trackingSettings=F),Object.keys(G).length>0&&(B.customArgs=G),Object.keys(I).length>0&&(B.sections=I),Object.keys(P).length>0&&(B.asm=P),typeof n<"u"&&(B.replyTo=n),typeof a<"u"&&(B.sendAt=a),typeof T<"u"&&(B.batchId=T),typeof o<"u"&&(B.templateId=o),typeof E<"u"&&(B.ipPoolName=E),typeof V<"u"&&(B.replyToList=V),L4(B,["substitutions","dynamicTemplateData","customArgs","headers","sections"])}static create(t){return Array.isArray(t)?t.filter(n=>!!n).map(n=>this.create(n)):t instanceof Cx?t:new Cx(t)}_checkProperty(t,n,a){return!a.some(c=>c(t,n))}_setProperty(t,n,a){let c=this._checkProperty(t,n,[this._checkUndefined,this._createTypeCheck(a)]);return c&&(this[t]=n),c}_checkUndefined(t,n){return typeof n>"u"}_createTypeCheck(t){return(n,a)=>{if(typeof a!==t)throw new Error(t+" expected for `"+n+"`")}}_createCheckThatThrows(t,n){return(a,c)=>{if(!t(c))throw new Error(n)}}_setArrayProperty(t,n){this._doArrayCheck(t,n)&&(this[t]=n)}_doArrayCheck(t,n){return this._checkProperty(t,n,[this._checkUndefined,this._createCheckThatThrows(Array.isArray,"Array expected for`"+t+"`")])}setReplyToList(t){if(this._doArrayCheck("replyToList",t)&&t.length){if(!t.every(n=>n&&typeof n.email=="string"))throw new Error("Expected each replyTo to contain an `email` string");this.replyToList=t}}};var F4=N4;let U4=class{constructor(t,n,a){this.statusCode=t,this.body=n,this.headers=a}toString(){return"HTTP "+this.statusCode+" "+this.body}};var $4=U4;let j4=class extends Error{constructor(t){super();const{headers:n,status:a,statusText:c,data:d}=t;this.code=a,this.message=c,this.response={headers:n,body:d},this.stack||Error.captureStackTrace(this,this.constructor);const o=new RegExp(process.cwd()+"/","gi");this.stack=this.stack.replace(o,"")}toString(){const{body:t}=this.response;let n=`${this.message} (${this.code})`;return t&&Array.isArray(t.errors)&&t.errors.forEach(a=>{const c=a.message,d=a.field,o=a.help;n+=`
  ${c}
    ${d}
    ${o}`}),n}toJSON(){const{message:t,code:n,response:a}=this;return{message:t,code:n,response:a}}};var V4=j4;const q4=hd,W4=dd,G4=["day","week","month"],H4=["us","ca"],Wm=["desc","asc"];let Z4=class{constructor(t){this.startDate=null,this.endDate=null,this.aggregatedBy=null,t&&this.fromData(t)}fromData(t){if(typeof t!="object")throw new Error("Expecting object for Statistics data");t=W4(t),t=q4(t,["substitutions","customArgs"]);const{startDate:n,endDate:a,aggregatedBy:c}=t;this.setStartDate(n),this.setEndDate(a),this.setAggregatedBy(c)}setStartDate(t){if(typeof t>"u")throw new Error("Date expected for `startDate`");if(new Date(t)==="Invalid Date"||isNaN(new Date(t)))throw new Error("Date expected for `startDate`");console.log(t),this.startDate=new Date(t).toISOString().slice(0,10)}setEndDate(t){if(typeof t>"u"){this.endDate=new Date().toISOString().slice(0,10);return}if(new Date(t)==="Invalid Date"||isNaN(new Date(t)))throw new Error("Date expected for `endDate`");this.endDate=new Date(t).toISOString().slice(0,10)}setAggregatedBy(t){if(!(typeof t>"u"))if(typeof t=="string"&&G4.includes(t.toLowerCase()))this.aggregatedBy=t;else throw new Error("Incorrect value for `aggregatedBy`")}getGlobal(){const{startDate:t,endDate:n,aggregatedBy:a}=this;return{startDate:t,endDate:n,aggregatedBy:a}}getAdvanced(t){const n=this.getGlobal();return typeof t>"u"||typeof t=="string"&&H4.includes(t.toLowerCase())&&(n.country=t),n}getAdvancedMailboxProviders(t){const n=this.getGlobal();if(typeof t>"u")return n;if(Array.isArray(t)&&t.some(a=>typeof a!="string"))throw new Error("Array of strings expected for `mailboxProviders`");return n.mailBoxProviders=t,n}getAdvancedBrowsers(t){const n=this.getGlobal();if(typeof t>"u")return n;if(Array.isArray(t)&&t.some(a=>typeof a!="string"))throw new Error("Array of strings expected for `browsers`");return n.browsers=t,n}getCategories(t){if(typeof t>"u")throw new Error("Array of strings expected for `categories`");if(!this._isValidArrayOfStrings(t))throw new Error("Array of strings expected for `categories`");const n=this.getGlobal();return n.categories=t,n}getSubuser(t){if(typeof t>"u")throw new Error("Array of strings expected for `subusers`");if(!this._isValidArrayOfStrings(t))throw new Error("Array of strings expected for `subusers`");const n=this.getGlobal();return n.subusers=t,n}getSubuserSum(t="delivered",n=Wm[0],a=5,c=0){if(typeof t!="string")throw new Error("string expected for `sortByMetric`");if(!Wm.includes(n.toLowerCase()))throw new Error("desc or asc expected for `sortByDirection`");if(typeof a!="number")throw new Error("number expected for `limit`");if(typeof c!="number")throw new Error("number expected for `offset`");const d=this.getGlobal();return d.sortByMetric=t,d.sortByDirection=n,d.limit=a,d.offset=c,d}getSubuserMonthly(t="delivered",n=Wm[0],a=5,c=0){if(typeof t!="string")throw new Error("string expected for `sortByMetric`");if(!Wm.includes(n.toLowerCase()))throw new Error("desc or asc expected for `sortByDirection`");if(typeof a!="number")throw new Error("number expected for `limit`");if(typeof c!="number")throw new Error("number expected for `offset`");const d=this.getGlobal();return d.sortByMetric=t,d.sortByDirection=n,d.limit=a,d.offset=c,d}_isValidArrayOfStrings(t){return!(!Array.isArray(t)||t.length<1||t.some(n=>typeof n!="string"))}};var K4=Z4;const X4=a4,Y4=Q1,J4=F4,Q4=OI,eO=$4,tO=V4,rO=K4;var nO={Attachment:X4,EmailAddress:Y4,Mail:J4,Personalization:Q4,Response:eO,ResponseError:tO,Statistics:rO},iO=function(t,n){if(typeof t!="object"||t===null)throw new Error("Not an object provided for base");if(typeof n!="object"||n===null)throw new Error("Not an object provided for data");const a=Object.assign({},t);for(const c in n)n.hasOwnProperty(c)&&(n[c]&&Array.isArray(n[c])?a[c]=n[c]:n[c]&&typeof n[c]=="object"?a[c]=Object.assign({},n[c]):n[c]&&(a[c]=n[c]));return a};const oO=BI,aO=J1,sO=dd,lO=iO,uO=LI,cO=hd,pO=Bg,fO=DI;var hO={arrayToJSON:oO,convertKeys:aO,deepClone:sO,mergeData:lO,splitNameEmail:uO,toCamelCase:cO,toSnakeCase:pO,wrapSubstitutions:fO};const dO=nO,mO=hO;var NI={classes:dO,helpers:mO};const yO=ID,gO=WD,{helpers:{mergeData:iE},classes:{Response:vO,ResponseError:_O}}=NI,oE="SG.",aE="https://api.sendgrid.com/",xO="https://email.twilio.com/";let bO=class{constructor(){this.auth="",this.impersonateSubuser="",this.defaultHeaders={Accept:"application/json","Content-Type":"application/json","User-Agent":"sendgrid/"+gO.version+";nodejs"},this.defaultRequest={baseUrl:aE,url:"",method:"GET",headers:{},maxContentLength:1/0,maxBodyLength:1/0}}setApiKey(t){this.auth="Bearer "+t,this.setDefaultRequest("baseUrl",aE),this.isValidApiKey(t)||console.warn(`API key does not start with "${oE}".`)}setTwilioEmailAuth(t,n){const a=Buffer.from(t+":"+n).toString("base64");this.auth="Basic "+a,this.setDefaultRequest("baseUrl",xO),this.isValidTwilioAuth(t,n)||console.warn("Twilio Email credentials must be non-empty strings.")}isValidApiKey(t){return this.isString(t)&&t.trim().startsWith(oE)}isValidTwilioAuth(t,n){return this.isString(t)&&t&&this.isString(n)&&n}isString(t){return typeof t=="string"||t instanceof String}setImpersonateSubuser(t){this.impersonateSubuser=t}setDefaultHeader(t,n){return t!==null&&typeof t=="object"?(Object.assign(this.defaultHeaders,t),this):(this.defaultHeaders[t]=n,this)}setDefaultRequest(t,n){return t!==null&&typeof t=="object"?(Object.assign(this.defaultRequest,t),this):(this.defaultRequest[t]=n,this)}createHeaders(t){const n=iE(this.defaultHeaders,t);return typeof n.Authorization>"u"&&this.auth&&(n.Authorization=this.auth),this.impersonateSubuser&&(n["On-Behalf-Of"]=this.impersonateSubuser),n}createRequest(t){let n={url:t.uri||t.url,baseUrl:t.baseUrl,method:t.method,data:t.body,params:t.qs,headers:t.headers};return n=iE(this.defaultRequest,n),n.headers=this.createHeaders(n.headers),n.baseURL=n.baseUrl,delete n.baseUrl,n}request(t,n){t=this.createRequest(t);const a=new Promise((c,d)=>{yO(t).then(o=>c([new vO(o.status,o.data,o.headers),o.data])).catch(o=>o.response&&o.response.status>=400?d(new _O(o.response)):d(o))});if(n&&typeof n!="function")throw new Error("Callback passed is not a function.");return n?a.then(c=>n(null,c)).catch(c=>n(c,null)):a}};var FI=bO;const wO=FI;var SO=new wO;const EO=SO,CO=FI;G1.exports=EO;G1.exports.Client=CO;var kO=G1.exports;const{Client:TO}=kO,{classes:{Mail:IO}}=NI;let PO=class{constructor(){this.setClient(new TO),this.setSubstitutionWrappers("{{","}}"),this.secretRules=[]}setClient(t){return this.client=t,this}setApiKey(t){return this.client.setApiKey(t),this}setTwilioEmailAuth(t,n){this.client.setTwilioEmailAuth(t,n)}setTimeout(t){typeof t>"u"||this.client.setDefaultRequest("timeout",t)}setSubstitutionWrappers(t,n){if(typeof t>"u"||typeof n>"u")throw new Error("Must provide both left and right side wrappers");return Array.isArray(this.substitutionWrappers)||(this.substitutionWrappers=[]),this.substitutionWrappers[0]=t,this.substitutionWrappers[1]=n,this}setSecretRules(t){t instanceof Array||(t=[t]);const n=t.map(function(a){const c=typeof a;if(c==="string")return{pattern:new RegExp(a)};if(c==="object"){a instanceof RegExp?a={pattern:a}:a.hasOwnProperty("pattern")&&typeof a.pattern=="string"&&(a.pattern=new RegExp(a.pattern));try{return a.pattern.test(""),a}catch{}}});this.secretRules=n.filter(function(a){return a})}filterSecrets(t){if(typeof t=="object"&&!t.hasOwnProperty("content"))return;const n=this;t.content.forEach(function(a){n.secretRules.forEach(function(c){if(c.hasOwnProperty("pattern")&&!c.pattern.test(a.value))return;let d=`The pattern '${c.pattern}'`;throw c.name&&(d+=`identified by '${c.name}'`),d+=" was found in the Mail content!",new Error(d)})})}send(t,n=!1,a){if(typeof n=="function"&&(a=n,n=!1),Array.isArray(t)){const c=Promise.all(t.map(d=>this.send(d,n)));return a&&c.then(d=>a(null,d)).catch(d=>a(d,null)),c}try{typeof t.isMultiple>"u"&&(t.isMultiple=n),typeof t.substitutionWrappers>"u"&&(t.substitutionWrappers=this.substitutionWrappers);const c=IO.create(t),d=c.toJSON();this.filterSecrets(d);const o={method:"POST",url:"/v3/mail/send",headers:c.headers,body:d};return this.client.request(o,a)}catch(c){return a&&a(c,null),Promise.reject(c)}}sendMultiple(t,n){return this.send(t,!0,n)}};var UI=PO;const AO=UI;var MO=new AO;const RO=MO,LO=UI;gI.exports=RO;gI.exports.MailService=LO;function yy(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function zO(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function $I(e){let t,n,a;e.length!==2?(t=yy,n=(v,x)=>yy(e(v),x),a=(v,x)=>e(v)-x):(t=e===yy||e===zO?e:DO,n=e,a=e);function c(v,x,E=0,T=v.length){if(E<T){if(t(x,x)!==0)return T;do{const P=E+T>>>1;n(v[P],x)<0?E=P+1:T=P}while(E<T)}return E}function d(v,x,E=0,T=v.length){if(E<T){if(t(x,x)!==0)return T;do{const P=E+T>>>1;n(v[P],x)<=0?E=P+1:T=P}while(E<T)}return E}function o(v,x,E=0,T=v.length){const P=c(v,x,E,T-1);return P>E&&a(v[P-1],x)>-a(v[P],x)?P-1:P}return{left:c,center:o,right:d}}function DO(){return 0}function OO(e){return e===null?NaN:+e}const BO=$I(yy),NO=BO.right;$I(OO).center;const FO=NO;class sE extends Map{constructor(t,n=jO){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[a,c]of t)this.set(a,c)}get(t){return super.get(lE(this,t))}has(t){return super.has(lE(this,t))}set(t,n){return super.set(UO(this,t),n)}delete(t){return super.delete($O(this,t))}}function lE({_intern:e,_key:t},n){const a=t(n);return e.has(a)?e.get(a):n}function UO({_intern:e,_key:t},n){const a=t(n);return e.has(a)?e.get(a):(e.set(a,n),n)}function $O({_intern:e,_key:t},n){const a=t(n);return e.has(a)&&(n=e.get(a),e.delete(a)),n}function jO(e){return e!==null&&typeof e=="object"?e.valueOf():e}const VO=Math.sqrt(50),qO=Math.sqrt(10),WO=Math.sqrt(2);function Yy(e,t,n){const a=(t-e)/Math.max(0,n),c=Math.floor(Math.log10(a)),d=a/Math.pow(10,c),o=d>=VO?10:d>=qO?5:d>=WO?2:1;let v,x,E;return c<0?(E=Math.pow(10,-c)/o,v=Math.round(e*E),x=Math.round(t*E),v/E<e&&++v,x/E>t&&--x,E=-E):(E=Math.pow(10,c)*o,v=Math.round(e/E),x=Math.round(t/E),v*E<e&&++v,x*E>t&&--x),x<v&&.5<=n&&n<2?Yy(e,t,n*2):[v,x,E]}function GO(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const a=t<e,[c,d,o]=a?Yy(t,e,n):Yy(e,t,n);if(!(d>=c))return[];const v=d-c+1,x=new Array(v);if(a)if(o<0)for(let E=0;E<v;++E)x[E]=(d-E)/-o;else for(let E=0;E<v;++E)x[E]=(d-E)*o;else if(o<0)for(let E=0;E<v;++E)x[E]=(c+E)/-o;else for(let E=0;E<v;++E)x[E]=(c+E)*o;return x}function kx(e,t,n){return t=+t,e=+e,n=+n,Yy(e,t,n)[2]}function HO(e,t,n){t=+t,e=+e,n=+n;const a=t<e,c=a?kx(t,e,n):kx(e,t,n);return(a?-1:1)*(c<0?1/-c:c)}function ZO(e,t){let n=0;if(t===void 0)for(let a of e)(a=+a)&&(n+=a);else{let a=-1;for(let c of e)(c=+t(c,++a,e))&&(n+=c)}return n}var KO={value:()=>{}};function jI(){for(var e=0,t=arguments.length,n={},a;e<t;++e){if(!(a=arguments[e]+"")||a in n||/[\s.]/.test(a))throw new Error("illegal type: "+a);n[a]=[]}return new gy(n)}function gy(e){this._=e}function XO(e,t){return e.trim().split(/^|\s+/).map(function(n){var a="",c=n.indexOf(".");if(c>=0&&(a=n.slice(c+1),n=n.slice(0,c)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:a}})}gy.prototype=jI.prototype={constructor:gy,on:function(e,t){var n=this._,a=XO(e+"",n),c,d=-1,o=a.length;if(arguments.length<2){for(;++d<o;)if((c=(e=a[d]).type)&&(c=YO(n[c],e.name)))return c;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++d<o;)if(c=(e=a[d]).type)n[c]=uE(n[c],e.name,t);else if(t==null)for(c in n)n[c]=uE(n[c],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new gy(e)},call:function(e,t){if((c=arguments.length-2)>0)for(var n=new Array(c),a=0,c,d;a<c;++a)n[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(d=this._[e],a=0,c=d.length;a<c;++a)d[a].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var a=this._[e],c=0,d=a.length;c<d;++c)a[c].value.apply(t,n)}};function YO(e,t){for(var n=0,a=e.length,c;n<a;++n)if((c=e[n]).name===t)return c.value}function uE(e,t,n){for(var a=0,c=e.length;a<c;++a)if(e[a].name===t){e[a]=KO,e=e.slice(0,a).concat(e.slice(a+1));break}return n!=null&&e.push({name:t,value:n}),e}var Tx="http://www.w3.org/1999/xhtml";const cE={svg:"http://www.w3.org/2000/svg",xhtml:Tx,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ng(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),cE.hasOwnProperty(t)?{space:cE[t],local:e}:e}function JO(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Tx&&t.documentElement.namespaceURI===Tx?t.createElement(e):t.createElementNS(n,e)}}function QO(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function VI(e){var t=Ng(e);return(t.local?QO:JO)(t)}function eB(){}function eb(e){return e==null?eB:function(){return this.querySelector(e)}}function tB(e){typeof e!="function"&&(e=eb(e));for(var t=this._groups,n=t.length,a=new Array(n),c=0;c<n;++c)for(var d=t[c],o=d.length,v=a[c]=new Array(o),x,E,T=0;T<o;++T)(x=d[T])&&(E=e.call(x,x.__data__,T,d))&&("__data__"in x&&(E.__data__=x.__data__),v[T]=E);return new Vo(a,this._parents)}function rB(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function nB(){return[]}function qI(e){return e==null?nB:function(){return this.querySelectorAll(e)}}function iB(e){return function(){return rB(e.apply(this,arguments))}}function oB(e){typeof e=="function"?e=iB(e):e=qI(e);for(var t=this._groups,n=t.length,a=[],c=[],d=0;d<n;++d)for(var o=t[d],v=o.length,x,E=0;E<v;++E)(x=o[E])&&(a.push(e.call(x,x.__data__,E,o)),c.push(x));return new Vo(a,c)}function WI(e){return function(){return this.matches(e)}}function GI(e){return function(t){return t.matches(e)}}var aB=Array.prototype.find;function sB(e){return function(){return aB.call(this.children,e)}}function lB(){return this.firstElementChild}function uB(e){return this.select(e==null?lB:sB(typeof e=="function"?e:GI(e)))}var cB=Array.prototype.filter;function pB(){return Array.from(this.children)}function fB(e){return function(){return cB.call(this.children,e)}}function hB(e){return this.selectAll(e==null?pB:fB(typeof e=="function"?e:GI(e)))}function dB(e){typeof e!="function"&&(e=WI(e));for(var t=this._groups,n=t.length,a=new Array(n),c=0;c<n;++c)for(var d=t[c],o=d.length,v=a[c]=[],x,E=0;E<o;++E)(x=d[E])&&e.call(x,x.__data__,E,d)&&v.push(x);return new Vo(a,this._parents)}function HI(e){return new Array(e.length)}function mB(){return new Vo(this._enter||this._groups.map(HI),this._parents)}function Jy(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Jy.prototype={constructor:Jy,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function yB(e){return function(){return e}}function gB(e,t,n,a,c,d){for(var o=0,v,x=t.length,E=d.length;o<E;++o)(v=t[o])?(v.__data__=d[o],a[o]=v):n[o]=new Jy(e,d[o]);for(;o<x;++o)(v=t[o])&&(c[o]=v)}function vB(e,t,n,a,c,d,o){var v,x,E=new Map,T=t.length,P=d.length,I=new Array(T),q;for(v=0;v<T;++v)(x=t[v])&&(I[v]=q=o.call(x,x.__data__,v,t)+"",E.has(q)?c[v]=x:E.set(q,x));for(v=0;v<P;++v)q=o.call(e,d[v],v,d)+"",(x=E.get(q))?(a[v]=x,x.__data__=d[v],E.delete(q)):n[v]=new Jy(e,d[v]);for(v=0;v<T;++v)(x=t[v])&&E.get(I[v])===x&&(c[v]=x)}function _B(e){return e.__data__}function xB(e,t){if(!arguments.length)return Array.from(this,_B);var n=t?vB:gB,a=this._parents,c=this._groups;typeof e!="function"&&(e=yB(e));for(var d=c.length,o=new Array(d),v=new Array(d),x=new Array(d),E=0;E<d;++E){var T=a[E],P=c[E],I=P.length,q=bB(e.call(T,T&&T.__data__,E,a)),$=q.length,G=v[E]=new Array($),D=o[E]=new Array($),F=x[E]=new Array(I);n(T,P,G,D,F,q,t);for(var V=0,B=0,z,re;V<$;++V)if(z=G[V]){for(V>=B&&(B=V+1);!(re=D[B])&&++B<$;);z._next=re||null}}return o=new Vo(o,a),o._enter=v,o._exit=x,o}function bB(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function wB(){return new Vo(this._exit||this._groups.map(HI),this._parents)}function SB(e,t,n){var a=this.enter(),c=this,d=this.exit();return typeof e=="function"?(a=e(a),a&&(a=a.selection())):a=a.append(e+""),t!=null&&(c=t(c),c&&(c=c.selection())),n==null?d.remove():n(d),a&&c?a.merge(c).order():c}function EB(e){for(var t=e.selection?e.selection():e,n=this._groups,a=t._groups,c=n.length,d=a.length,o=Math.min(c,d),v=new Array(c),x=0;x<o;++x)for(var E=n[x],T=a[x],P=E.length,I=v[x]=new Array(P),q,$=0;$<P;++$)(q=E[$]||T[$])&&(I[$]=q);for(;x<c;++x)v[x]=n[x];return new Vo(v,this._parents)}function CB(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var a=e[t],c=a.length-1,d=a[c],o;--c>=0;)(o=a[c])&&(d&&o.compareDocumentPosition(d)^4&&d.parentNode.insertBefore(o,d),d=o);return this}function kB(e){e||(e=TB);function t(P,I){return P&&I?e(P.__data__,I.__data__):!P-!I}for(var n=this._groups,a=n.length,c=new Array(a),d=0;d<a;++d){for(var o=n[d],v=o.length,x=c[d]=new Array(v),E,T=0;T<v;++T)(E=o[T])&&(x[T]=E);x.sort(t)}return new Vo(c,this._parents).order()}function TB(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function IB(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function PB(){return Array.from(this)}function AB(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var a=e[t],c=0,d=a.length;c<d;++c){var o=a[c];if(o)return o}return null}function MB(){let e=0;for(const t of this)++e;return e}function RB(){return!this.node()}function LB(e){for(var t=this._groups,n=0,a=t.length;n<a;++n)for(var c=t[n],d=0,o=c.length,v;d<o;++d)(v=c[d])&&e.call(v,v.__data__,d,c);return this}function zB(e){return function(){this.removeAttribute(e)}}function DB(e){return function(){this.removeAttributeNS(e.space,e.local)}}function OB(e,t){return function(){this.setAttribute(e,t)}}function BB(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function NB(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function FB(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function UB(e,t){var n=Ng(e);if(arguments.length<2){var a=this.node();return n.local?a.getAttributeNS(n.space,n.local):a.getAttribute(n)}return this.each((t==null?n.local?DB:zB:typeof t=="function"?n.local?FB:NB:n.local?BB:OB)(n,t))}function ZI(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function $B(e){return function(){this.style.removeProperty(e)}}function jB(e,t,n){return function(){this.style.setProperty(e,t,n)}}function VB(e,t,n){return function(){var a=t.apply(this,arguments);a==null?this.style.removeProperty(e):this.style.setProperty(e,a,n)}}function qB(e,t,n){return arguments.length>1?this.each((t==null?$B:typeof t=="function"?VB:jB)(e,t,n??"")):Ap(this.node(),e)}function Ap(e,t){return e.style.getPropertyValue(t)||ZI(e).getComputedStyle(e,null).getPropertyValue(t)}function WB(e){return function(){delete this[e]}}function GB(e,t){return function(){this[e]=t}}function HB(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function ZB(e,t){return arguments.length>1?this.each((t==null?WB:typeof t=="function"?HB:GB)(e,t)):this.node()[e]}function KI(e){return e.trim().split(/^|\s+/)}function tb(e){return e.classList||new XI(e)}function XI(e){this._node=e,this._names=KI(e.getAttribute("class")||"")}XI.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function YI(e,t){for(var n=tb(e),a=-1,c=t.length;++a<c;)n.add(t[a])}function JI(e,t){for(var n=tb(e),a=-1,c=t.length;++a<c;)n.remove(t[a])}function KB(e){return function(){YI(this,e)}}function XB(e){return function(){JI(this,e)}}function YB(e,t){return function(){(t.apply(this,arguments)?YI:JI)(this,e)}}function JB(e,t){var n=KI(e+"");if(arguments.length<2){for(var a=tb(this.node()),c=-1,d=n.length;++c<d;)if(!a.contains(n[c]))return!1;return!0}return this.each((typeof t=="function"?YB:t?KB:XB)(n,t))}function QB(){this.textContent=""}function eN(e){return function(){this.textContent=e}}function tN(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function rN(e){return arguments.length?this.each(e==null?QB:(typeof e=="function"?tN:eN)(e)):this.node().textContent}function nN(){this.innerHTML=""}function iN(e){return function(){this.innerHTML=e}}function oN(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function aN(e){return arguments.length?this.each(e==null?nN:(typeof e=="function"?oN:iN)(e)):this.node().innerHTML}function sN(){this.nextSibling&&this.parentNode.appendChild(this)}function lN(){return this.each(sN)}function uN(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function cN(){return this.each(uN)}function pN(e){var t=typeof e=="function"?e:VI(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function fN(){return null}function hN(e,t){var n=typeof e=="function"?e:VI(e),a=t==null?fN:typeof t=="function"?t:eb(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),a.apply(this,arguments)||null)})}function dN(){var e=this.parentNode;e&&e.removeChild(this)}function mN(){return this.each(dN)}function yN(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function gN(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function vN(e){return this.select(e?gN:yN)}function _N(e){return arguments.length?this.property("__data__",e):this.node().__data__}function xN(e){return function(t){e.call(this,t,this.__data__)}}function bN(e){return e.trim().split(/^|\s+/).map(function(t){var n="",a=t.indexOf(".");return a>=0&&(n=t.slice(a+1),t=t.slice(0,a)),{type:t,name:n}})}function wN(e){return function(){var t=this.__on;if(t){for(var n=0,a=-1,c=t.length,d;n<c;++n)d=t[n],(!e.type||d.type===e.type)&&d.name===e.name?this.removeEventListener(d.type,d.listener,d.options):t[++a]=d;++a?t.length=a:delete this.__on}}}function SN(e,t,n){return function(){var a=this.__on,c,d=xN(t);if(a){for(var o=0,v=a.length;o<v;++o)if((c=a[o]).type===e.type&&c.name===e.name){this.removeEventListener(c.type,c.listener,c.options),this.addEventListener(c.type,c.listener=d,c.options=n),c.value=t;return}}this.addEventListener(e.type,d,n),c={type:e.type,name:e.name,value:t,listener:d,options:n},a?a.push(c):this.__on=[c]}}function EN(e,t,n){var a=bN(e+""),c,d=a.length,o;if(arguments.length<2){var v=this.node().__on;if(v){for(var x=0,E=v.length,T;x<E;++x)for(c=0,T=v[x];c<d;++c)if((o=a[c]).type===T.type&&o.name===T.name)return T.value}return}for(v=t?SN:wN,c=0;c<d;++c)this.each(v(a[c],t,n));return this}function QI(e,t,n){var a=ZI(e),c=a.CustomEvent;typeof c=="function"?c=new c(t,n):(c=a.document.createEvent("Event"),n?(c.initEvent(t,n.bubbles,n.cancelable),c.detail=n.detail):c.initEvent(t,!1,!1)),e.dispatchEvent(c)}function CN(e,t){return function(){return QI(this,e,t)}}function kN(e,t){return function(){return QI(this,e,t.apply(this,arguments))}}function TN(e,t){return this.each((typeof t=="function"?kN:CN)(e,t))}function*IN(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var a=e[t],c=0,d=a.length,o;c<d;++c)(o=a[c])&&(yield o)}var eP=[null];function Vo(e,t){this._groups=e,this._parents=t}function md(){return new Vo([[document.documentElement]],eP)}function PN(){return this}Vo.prototype=md.prototype={constructor:Vo,select:tB,selectAll:oB,selectChild:uB,selectChildren:hB,filter:dB,data:xB,enter:mB,exit:wB,join:SB,merge:EB,selection:PN,order:CB,sort:kB,call:IB,nodes:PB,node:AB,size:MB,empty:RB,each:LB,attr:UB,style:qB,property:ZB,classed:JB,text:rN,html:aN,raise:lN,lower:cN,append:pN,insert:hN,remove:mN,clone:vN,datum:_N,on:EN,dispatch:TN,[Symbol.iterator]:IN};function Qy(e){return typeof e=="string"?new Vo([[document.querySelector(e)]],[document.documentElement]):new Vo([[e]],eP)}function rb(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function tP(e,t){var n=Object.create(e.prototype);for(var a in t)n[a]=t[a];return n}function yd(){}var Qh=.7,eg=1/Qh,bp="\\s*([+-]?\\d+)\\s*",ed="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",rs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",AN=/^#([0-9a-f]{3,8})$/,MN=new RegExp(`^rgb\\(${bp},${bp},${bp}\\)$`),RN=new RegExp(`^rgb\\(${rs},${rs},${rs}\\)$`),LN=new RegExp(`^rgba\\(${bp},${bp},${bp},${ed}\\)$`),zN=new RegExp(`^rgba\\(${rs},${rs},${rs},${ed}\\)$`),DN=new RegExp(`^hsl\\(${ed},${rs},${rs}\\)$`),ON=new RegExp(`^hsla\\(${ed},${rs},${rs},${ed}\\)$`),pE={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};rb(yd,Nu,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:fE,formatHex:fE,formatHex8:BN,formatHsl:NN,formatRgb:hE,toString:hE});function fE(){return this.rgb().formatHex()}function BN(){return this.rgb().formatHex8()}function NN(){return rP(this).formatHsl()}function hE(){return this.rgb().formatRgb()}function Nu(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=AN.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?dE(t):n===3?new So(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Gm(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Gm(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=MN.exec(e))?new So(t[1],t[2],t[3],1):(t=RN.exec(e))?new So(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=LN.exec(e))?Gm(t[1],t[2],t[3],t[4]):(t=zN.exec(e))?Gm(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=DN.exec(e))?gE(t[1],t[2]/100,t[3]/100,1):(t=ON.exec(e))?gE(t[1],t[2]/100,t[3]/100,t[4]):pE.hasOwnProperty(e)?dE(pE[e]):e==="transparent"?new So(NaN,NaN,NaN,0):null}function dE(e){return new So(e>>16&255,e>>8&255,e&255,1)}function Gm(e,t,n,a){return a<=0&&(e=t=n=NaN),new So(e,t,n,a)}function FN(e){return e instanceof yd||(e=Nu(e)),e?(e=e.rgb(),new So(e.r,e.g,e.b,e.opacity)):new So}function Ix(e,t,n,a){return arguments.length===1?FN(e):new So(e,t,n,a??1)}function So(e,t,n,a){this.r=+e,this.g=+t,this.b=+n,this.opacity=+a}rb(So,Ix,tP(yd,{brighter(e){return e=e==null?eg:Math.pow(eg,e),new So(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Qh:Math.pow(Qh,e),new So(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new So(zu(this.r),zu(this.g),zu(this.b),tg(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:mE,formatHex:mE,formatHex8:UN,formatRgb:yE,toString:yE}));function mE(){return`#${Mu(this.r)}${Mu(this.g)}${Mu(this.b)}`}function UN(){return`#${Mu(this.r)}${Mu(this.g)}${Mu(this.b)}${Mu((isNaN(this.opacity)?1:this.opacity)*255)}`}function yE(){const e=tg(this.opacity);return`${e===1?"rgb(":"rgba("}${zu(this.r)}, ${zu(this.g)}, ${zu(this.b)}${e===1?")":`, ${e})`}`}function tg(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function zu(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Mu(e){return e=zu(e),(e<16?"0":"")+e.toString(16)}function gE(e,t,n,a){return a<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ba(e,t,n,a)}function rP(e){if(e instanceof ba)return new ba(e.h,e.s,e.l,e.opacity);if(e instanceof yd||(e=Nu(e)),!e)return new ba;if(e instanceof ba)return e;e=e.rgb();var t=e.r/255,n=e.g/255,a=e.b/255,c=Math.min(t,n,a),d=Math.max(t,n,a),o=NaN,v=d-c,x=(d+c)/2;return v?(t===d?o=(n-a)/v+(n<a)*6:n===d?o=(a-t)/v+2:o=(t-n)/v+4,v/=x<.5?d+c:2-d-c,o*=60):v=x>0&&x<1?0:o,new ba(o,v,x,e.opacity)}function $N(e,t,n,a){return arguments.length===1?rP(e):new ba(e,t,n,a??1)}function ba(e,t,n,a){this.h=+e,this.s=+t,this.l=+n,this.opacity=+a}rb(ba,$N,tP(yd,{brighter(e){return e=e==null?eg:Math.pow(eg,e),new ba(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Qh:Math.pow(Qh,e),new ba(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,a=n+(n<.5?n:1-n)*t,c=2*n-a;return new So(g_(e>=240?e-240:e+120,c,a),g_(e,c,a),g_(e<120?e+240:e-120,c,a),this.opacity)},clamp(){return new ba(vE(this.h),Hm(this.s),Hm(this.l),tg(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=tg(this.opacity);return`${e===1?"hsl(":"hsla("}${vE(this.h)}, ${Hm(this.s)*100}%, ${Hm(this.l)*100}%${e===1?")":`, ${e})`}`}}));function vE(e){return e=(e||0)%360,e<0?e+360:e}function Hm(e){return Math.max(0,Math.min(1,e||0))}function g_(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const nb=e=>()=>e;function jN(e,t){return function(n){return e+n*t}}function VN(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(a){return Math.pow(e+a*t,n)}}function qN(e){return(e=+e)==1?nP:function(t,n){return n-t?VN(t,n,e):nb(isNaN(t)?n:t)}}function nP(e,t){var n=t-e;return n?jN(e,n):nb(isNaN(e)?t:e)}const rg=function e(t){var n=qN(t);function a(c,d){var o=n((c=Ix(c)).r,(d=Ix(d)).r),v=n(c.g,d.g),x=n(c.b,d.b),E=nP(c.opacity,d.opacity);return function(T){return c.r=o(T),c.g=v(T),c.b=x(T),c.opacity=E(T),c+""}}return a.gamma=e,a}(1);function WN(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,a=t.slice(),c;return function(d){for(c=0;c<n;++c)a[c]=e[c]*(1-d)+t[c]*d;return a}}function GN(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function HN(e,t){var n=t?t.length:0,a=e?Math.min(n,e.length):0,c=new Array(a),d=new Array(n),o;for(o=0;o<a;++o)c[o]=ib(e[o],t[o]);for(;o<n;++o)d[o]=t[o];return function(v){for(o=0;o<a;++o)d[o]=c[o](v);return d}}function ZN(e,t){var n=new Date;return e=+e,t=+t,function(a){return n.setTime(e*(1-a)+t*a),n}}function xa(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function KN(e,t){var n={},a={},c;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(c in t)c in e?n[c]=ib(e[c],t[c]):a[c]=t[c];return function(d){for(c in n)a[c]=n[c](d);return a}}var Px=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,v_=new RegExp(Px.source,"g");function XN(e){return function(){return e}}function YN(e){return function(t){return e(t)+""}}function iP(e,t){var n=Px.lastIndex=v_.lastIndex=0,a,c,d,o=-1,v=[],x=[];for(e=e+"",t=t+"";(a=Px.exec(e))&&(c=v_.exec(t));)(d=c.index)>n&&(d=t.slice(n,d),v[o]?v[o]+=d:v[++o]=d),(a=a[0])===(c=c[0])?v[o]?v[o]+=c:v[++o]=c:(v[++o]=null,x.push({i:o,x:xa(a,c)})),n=v_.lastIndex;return n<t.length&&(d=t.slice(n),v[o]?v[o]+=d:v[++o]=d),v.length<2?x[0]?YN(x[0].x):XN(t):(t=x.length,function(E){for(var T=0,P;T<t;++T)v[(P=x[T]).i]=P.x(E);return v.join("")})}function ib(e,t){var n=typeof t,a;return t==null||n==="boolean"?nb(t):(n==="number"?xa:n==="string"?(a=Nu(t))?(t=a,rg):iP:t instanceof Nu?rg:t instanceof Date?ZN:GN(t)?WN:Array.isArray(t)?HN:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?KN:xa)(e,t)}function JN(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var _E=180/Math.PI,Ax={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function oP(e,t,n,a,c,d){var o,v,x;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(x=e*n+t*a)&&(n-=e*x,a-=t*x),(v=Math.sqrt(n*n+a*a))&&(n/=v,a/=v,x/=v),e*a<t*n&&(e=-e,t=-t,x=-x,o=-o),{translateX:c,translateY:d,rotate:Math.atan2(t,e)*_E,skewX:Math.atan(x)*_E,scaleX:o,scaleY:v}}var Zm;function QN(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Ax:oP(t.a,t.b,t.c,t.d,t.e,t.f)}function eF(e){return e==null||(Zm||(Zm=document.createElementNS("http://www.w3.org/2000/svg","g")),Zm.setAttribute("transform",e),!(e=Zm.transform.baseVal.consolidate()))?Ax:(e=e.matrix,oP(e.a,e.b,e.c,e.d,e.e,e.f))}function aP(e,t,n,a){function c(E){return E.length?E.pop()+" ":""}function d(E,T,P,I,q,$){if(E!==P||T!==I){var G=q.push("translate(",null,t,null,n);$.push({i:G-4,x:xa(E,P)},{i:G-2,x:xa(T,I)})}else(P||I)&&q.push("translate("+P+t+I+n)}function o(E,T,P,I){E!==T?(E-T>180?T+=360:T-E>180&&(E+=360),I.push({i:P.push(c(P)+"rotate(",null,a)-2,x:xa(E,T)})):T&&P.push(c(P)+"rotate("+T+a)}function v(E,T,P,I){E!==T?I.push({i:P.push(c(P)+"skewX(",null,a)-2,x:xa(E,T)}):T&&P.push(c(P)+"skewX("+T+a)}function x(E,T,P,I,q,$){if(E!==P||T!==I){var G=q.push(c(q)+"scale(",null,",",null,")");$.push({i:G-4,x:xa(E,P)},{i:G-2,x:xa(T,I)})}else(P!==1||I!==1)&&q.push(c(q)+"scale("+P+","+I+")")}return function(E,T){var P=[],I=[];return E=e(E),T=e(T),d(E.translateX,E.translateY,T.translateX,T.translateY,P,I),o(E.rotate,T.rotate,P,I),v(E.skewX,T.skewX,P,I),x(E.scaleX,E.scaleY,T.scaleX,T.scaleY,P,I),E=T=null,function(q){for(var $=-1,G=I.length,D;++$<G;)P[(D=I[$]).i]=D.x(q);return P.join("")}}}var tF=aP(QN,"px, ","px)","deg)"),rF=aP(eF,", ",")",")"),Mp=0,vh=0,oh=0,sP=1e3,ng,_h,ig=0,Fu=0,Fg=0,td=typeof performance=="object"&&performance.now?performance:Date,lP=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ob(){return Fu||(lP(nF),Fu=td.now()+Fg)}function nF(){Fu=0}function og(){this._call=this._time=this._next=null}og.prototype=uP.prototype={constructor:og,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?ob():+n)+(t==null?0:+t),!this._next&&_h!==this&&(_h?_h._next=this:ng=this,_h=this),this._call=e,this._time=n,Mx()},stop:function(){this._call&&(this._call=null,this._time=1/0,Mx())}};function uP(e,t,n){var a=new og;return a.restart(e,t,n),a}function iF(){ob(),++Mp;for(var e=ng,t;e;)(t=Fu-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Mp}function xE(){Fu=(ig=td.now())+Fg,Mp=vh=0;try{iF()}finally{Mp=0,aF(),Fu=0}}function oF(){var e=td.now(),t=e-ig;t>sP&&(Fg-=t,ig=e)}function aF(){for(var e,t=ng,n,a=1/0;t;)t._call?(a>t._time&&(a=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:ng=n);_h=e,Mx(a)}function Mx(e){if(!Mp){vh&&(vh=clearTimeout(vh));var t=e-Fu;t>24?(e<1/0&&(vh=setTimeout(xE,e-td.now()-Fg)),oh&&(oh=clearInterval(oh))):(oh||(ig=td.now(),oh=setInterval(oF,sP)),Mp=1,lP(xE))}}function bE(e,t,n){var a=new og;return t=t==null?0:+t,a.restart(c=>{a.stop(),e(c+t)},t,n),a}var sF=jI("start","end","cancel","interrupt"),lF=[],cP=0,wE=1,Rx=2,vy=3,SE=4,Lx=5,_y=6;function Ug(e,t,n,a,c,d){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;uF(e,n,{name:t,index:a,group:c,on:sF,tween:lF,time:d.time,delay:d.delay,duration:d.duration,ease:d.ease,timer:null,state:cP})}function ab(e,t){var n=Ca(e,t);if(n.state>cP)throw new Error("too late; already scheduled");return n}function ls(e,t){var n=Ca(e,t);if(n.state>vy)throw new Error("too late; already running");return n}function Ca(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function uF(e,t,n){var a=e.__transition,c;a[t]=n,n.timer=uP(d,0,n.time);function d(E){n.state=wE,n.timer.restart(o,n.delay,n.time),n.delay<=E&&o(E-n.delay)}function o(E){var T,P,I,q;if(n.state!==wE)return x();for(T in a)if(q=a[T],q.name===n.name){if(q.state===vy)return bE(o);q.state===SE?(q.state=_y,q.timer.stop(),q.on.call("interrupt",e,e.__data__,q.index,q.group),delete a[T]):+T<t&&(q.state=_y,q.timer.stop(),q.on.call("cancel",e,e.__data__,q.index,q.group),delete a[T])}if(bE(function(){n.state===vy&&(n.state=SE,n.timer.restart(v,n.delay,n.time),v(E))}),n.state=Rx,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Rx){for(n.state=vy,c=new Array(I=n.tween.length),T=0,P=-1;T<I;++T)(q=n.tween[T].value.call(e,e.__data__,n.index,n.group))&&(c[++P]=q);c.length=P+1}}function v(E){for(var T=E<n.duration?n.ease.call(null,E/n.duration):(n.timer.restart(x),n.state=Lx,1),P=-1,I=c.length;++P<I;)c[P].call(e,T);n.state===Lx&&(n.on.call("end",e,e.__data__,n.index,n.group),x())}function x(){n.state=_y,n.timer.stop(),delete a[t];for(var E in a)return;delete e.__transition}}function cF(e,t){var n=e.__transition,a,c,d=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((a=n[o]).name!==t){d=!1;continue}c=a.state>Rx&&a.state<Lx,a.state=_y,a.timer.stop(),a.on.call(c?"interrupt":"cancel",e,e.__data__,a.index,a.group),delete n[o]}d&&delete e.__transition}}function pF(e){return this.each(function(){cF(this,e)})}function fF(e,t){var n,a;return function(){var c=ls(this,e),d=c.tween;if(d!==n){a=n=d;for(var o=0,v=a.length;o<v;++o)if(a[o].name===t){a=a.slice(),a.splice(o,1);break}}c.tween=a}}function hF(e,t,n){var a,c;if(typeof n!="function")throw new Error;return function(){var d=ls(this,e),o=d.tween;if(o!==a){c=(a=o).slice();for(var v={name:t,value:n},x=0,E=c.length;x<E;++x)if(c[x].name===t){c[x]=v;break}x===E&&c.push(v)}d.tween=c}}function dF(e,t){var n=this._id;if(e+="",arguments.length<2){for(var a=Ca(this.node(),n).tween,c=0,d=a.length,o;c<d;++c)if((o=a[c]).name===e)return o.value;return null}return this.each((t==null?fF:hF)(n,e,t))}function sb(e,t,n){var a=e._id;return e.each(function(){var c=ls(this,a);(c.value||(c.value={}))[t]=n.apply(this,arguments)}),function(c){return Ca(c,a).value[t]}}function pP(e,t){var n;return(typeof t=="number"?xa:t instanceof Nu?rg:(n=Nu(t))?(t=n,rg):iP)(e,t)}function mF(e){return function(){this.removeAttribute(e)}}function yF(e){return function(){this.removeAttributeNS(e.space,e.local)}}function gF(e,t,n){var a,c=n+"",d;return function(){var o=this.getAttribute(e);return o===c?null:o===a?d:d=t(a=o,n)}}function vF(e,t,n){var a,c=n+"",d;return function(){var o=this.getAttributeNS(e.space,e.local);return o===c?null:o===a?d:d=t(a=o,n)}}function _F(e,t,n){var a,c,d;return function(){var o,v=n(this),x;return v==null?void this.removeAttribute(e):(o=this.getAttribute(e),x=v+"",o===x?null:o===a&&x===c?d:(c=x,d=t(a=o,v)))}}function xF(e,t,n){var a,c,d;return function(){var o,v=n(this),x;return v==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),x=v+"",o===x?null:o===a&&x===c?d:(c=x,d=t(a=o,v)))}}function bF(e,t){var n=Ng(e),a=n==="transform"?rF:pP;return this.attrTween(e,typeof t=="function"?(n.local?xF:_F)(n,a,sb(this,"attr."+e,t)):t==null?(n.local?yF:mF)(n):(n.local?vF:gF)(n,a,t))}function wF(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function SF(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function EF(e,t){var n,a;function c(){var d=t.apply(this,arguments);return d!==a&&(n=(a=d)&&SF(e,d)),n}return c._value=t,c}function CF(e,t){var n,a;function c(){var d=t.apply(this,arguments);return d!==a&&(n=(a=d)&&wF(e,d)),n}return c._value=t,c}function kF(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var a=Ng(e);return this.tween(n,(a.local?EF:CF)(a,t))}function TF(e,t){return function(){ab(this,e).delay=+t.apply(this,arguments)}}function IF(e,t){return t=+t,function(){ab(this,e).delay=t}}function PF(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?TF:IF)(t,e)):Ca(this.node(),t).delay}function AF(e,t){return function(){ls(this,e).duration=+t.apply(this,arguments)}}function MF(e,t){return t=+t,function(){ls(this,e).duration=t}}function RF(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?AF:MF)(t,e)):Ca(this.node(),t).duration}function LF(e,t){if(typeof t!="function")throw new Error;return function(){ls(this,e).ease=t}}function zF(e){var t=this._id;return arguments.length?this.each(LF(t,e)):Ca(this.node(),t).ease}function DF(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;ls(this,e).ease=n}}function OF(e){if(typeof e!="function")throw new Error;return this.each(DF(this._id,e))}function BF(e){typeof e!="function"&&(e=WI(e));for(var t=this._groups,n=t.length,a=new Array(n),c=0;c<n;++c)for(var d=t[c],o=d.length,v=a[c]=[],x,E=0;E<o;++E)(x=d[E])&&e.call(x,x.__data__,E,d)&&v.push(x);return new qs(a,this._parents,this._name,this._id)}function NF(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,a=t.length,c=n.length,d=Math.min(a,c),o=new Array(a),v=0;v<d;++v)for(var x=t[v],E=n[v],T=x.length,P=o[v]=new Array(T),I,q=0;q<T;++q)(I=x[q]||E[q])&&(P[q]=I);for(;v<a;++v)o[v]=t[v];return new qs(o,this._parents,this._name,this._id)}function FF(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function UF(e,t,n){var a,c,d=FF(t)?ab:ls;return function(){var o=d(this,e),v=o.on;v!==a&&(c=(a=v).copy()).on(t,n),o.on=c}}function $F(e,t){var n=this._id;return arguments.length<2?Ca(this.node(),n).on.on(e):this.each(UF(n,e,t))}function jF(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function VF(){return this.on("end.remove",jF(this._id))}function qF(e){var t=this._name,n=this._id;typeof e!="function"&&(e=eb(e));for(var a=this._groups,c=a.length,d=new Array(c),o=0;o<c;++o)for(var v=a[o],x=v.length,E=d[o]=new Array(x),T,P,I=0;I<x;++I)(T=v[I])&&(P=e.call(T,T.__data__,I,v))&&("__data__"in T&&(P.__data__=T.__data__),E[I]=P,Ug(E[I],t,n,I,E,Ca(T,n)));return new qs(d,this._parents,t,n)}function WF(e){var t=this._name,n=this._id;typeof e!="function"&&(e=qI(e));for(var a=this._groups,c=a.length,d=[],o=[],v=0;v<c;++v)for(var x=a[v],E=x.length,T,P=0;P<E;++P)if(T=x[P]){for(var I=e.call(T,T.__data__,P,x),q,$=Ca(T,n),G=0,D=I.length;G<D;++G)(q=I[G])&&Ug(q,t,n,G,I,$);d.push(I),o.push(T)}return new qs(d,o,t,n)}var GF=md.prototype.constructor;function HF(){return new GF(this._groups,this._parents)}function ZF(e,t){var n,a,c;return function(){var d=Ap(this,e),o=(this.style.removeProperty(e),Ap(this,e));return d===o?null:d===n&&o===a?c:c=t(n=d,a=o)}}function fP(e){return function(){this.style.removeProperty(e)}}function KF(e,t,n){var a,c=n+"",d;return function(){var o=Ap(this,e);return o===c?null:o===a?d:d=t(a=o,n)}}function XF(e,t,n){var a,c,d;return function(){var o=Ap(this,e),v=n(this),x=v+"";return v==null&&(x=v=(this.style.removeProperty(e),Ap(this,e))),o===x?null:o===a&&x===c?d:(c=x,d=t(a=o,v))}}function YF(e,t){var n,a,c,d="style."+t,o="end."+d,v;return function(){var x=ls(this,e),E=x.on,T=x.value[d]==null?v||(v=fP(t)):void 0;(E!==n||c!==T)&&(a=(n=E).copy()).on(o,c=T),x.on=a}}function JF(e,t,n){var a=(e+="")=="transform"?tF:pP;return t==null?this.styleTween(e,ZF(e,a)).on("end.style."+e,fP(e)):typeof t=="function"?this.styleTween(e,XF(e,a,sb(this,"style."+e,t))).each(YF(this._id,e)):this.styleTween(e,KF(e,a,t),n).on("end.style."+e,null)}function QF(e,t,n){return function(a){this.style.setProperty(e,t.call(this,a),n)}}function e6(e,t,n){var a,c;function d(){var o=t.apply(this,arguments);return o!==c&&(a=(c=o)&&QF(e,o,n)),a}return d._value=t,d}function t6(e,t,n){var a="style."+(e+="");if(arguments.length<2)return(a=this.tween(a))&&a._value;if(t==null)return this.tween(a,null);if(typeof t!="function")throw new Error;return this.tween(a,e6(e,t,n??""))}function r6(e){return function(){this.textContent=e}}function n6(e){return function(){var t=e(this);this.textContent=t??""}}function i6(e){return this.tween("text",typeof e=="function"?n6(sb(this,"text",e)):r6(e==null?"":e+""))}function o6(e){return function(t){this.textContent=e.call(this,t)}}function a6(e){var t,n;function a(){var c=e.apply(this,arguments);return c!==n&&(t=(n=c)&&o6(c)),t}return a._value=e,a}function s6(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,a6(e))}function l6(){for(var e=this._name,t=this._id,n=hP(),a=this._groups,c=a.length,d=0;d<c;++d)for(var o=a[d],v=o.length,x,E=0;E<v;++E)if(x=o[E]){var T=Ca(x,t);Ug(x,e,n,E,o,{time:T.time+T.delay+T.duration,delay:0,duration:T.duration,ease:T.ease})}return new qs(a,this._parents,e,n)}function u6(){var e,t,n=this,a=n._id,c=n.size();return new Promise(function(d,o){var v={value:o},x={value:function(){--c===0&&d()}};n.each(function(){var E=ls(this,a),T=E.on;T!==e&&(t=(e=T).copy(),t._.cancel.push(v),t._.interrupt.push(v),t._.end.push(x)),E.on=t}),c===0&&d()})}var c6=0;function qs(e,t,n,a){this._groups=e,this._parents=t,this._name=n,this._id=a}function hP(){return++c6}var zs=md.prototype;qs.prototype={constructor:qs,select:qF,selectAll:WF,selectChild:zs.selectChild,selectChildren:zs.selectChildren,filter:BF,merge:NF,selection:HF,transition:l6,call:zs.call,nodes:zs.nodes,node:zs.node,size:zs.size,empty:zs.empty,each:zs.each,on:$F,attr:bF,attrTween:kF,style:JF,styleTween:t6,text:i6,textTween:s6,remove:VF,tween:dF,delay:PF,duration:RF,ease:zF,easeVarying:OF,end:u6,[Symbol.iterator]:zs[Symbol.iterator]};function p6(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var f6={time:null,delay:0,duration:250,ease:p6};function h6(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function d6(e){var t,n;e instanceof qs?(t=e._id,e=e._name):(t=hP(),(n=f6).time=ob(),e=e==null?null:e+"");for(var a=this._groups,c=a.length,d=0;d<c;++d)for(var o=a[d],v=o.length,x,E=0;E<v;++E)(x=o[E])&&Ug(x,e,t,E,o,n||h6(x,t));return new qs(a,this._parents,e,t)}md.prototype.interrupt=pF;md.prototype.transition=d6;function m6(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function ag(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,a=e.slice(0,n);return[a.length>1?a[0]+a.slice(2):a,+e.slice(n+1)]}function Rp(e){return e=ag(Math.abs(e)),e?e[1]:NaN}function y6(e,t){return function(n,a){for(var c=n.length,d=[],o=0,v=e[0],x=0;c>0&&v>0&&(x+v+1>a&&(v=Math.max(1,a-x)),d.push(n.substring(c-=v,c+v)),!((x+=v+1)>a));)v=e[o=(o+1)%e.length];return d.reverse().join(t)}}function g6(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var v6=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function sg(e){if(!(t=v6.exec(e)))throw new Error("invalid format: "+e);var t;return new lb({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}sg.prototype=lb.prototype;function lb(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}lb.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function _6(e){e:for(var t=e.length,n=1,a=-1,c;n<t;++n)switch(e[n]){case".":a=c=n;break;case"0":a===0&&(a=n),c=n;break;default:if(!+e[n])break e;a>0&&(a=0);break}return a>0?e.slice(0,a)+e.slice(c+1):e}var dP;function x6(e,t){var n=ag(e,t);if(!n)return e+"";var a=n[0],c=n[1],d=c-(dP=Math.max(-8,Math.min(8,Math.floor(c/3)))*3)+1,o=a.length;return d===o?a:d>o?a+new Array(d-o+1).join("0"):d>0?a.slice(0,d)+"."+a.slice(d):"0."+new Array(1-d).join("0")+ag(e,Math.max(0,t+d-1))[0]}function EE(e,t){var n=ag(e,t);if(!n)return e+"";var a=n[0],c=n[1];return c<0?"0."+new Array(-c).join("0")+a:a.length>c+1?a.slice(0,c+1)+"."+a.slice(c+1):a+new Array(c-a.length+2).join("0")}const CE={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:m6,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>EE(e*100,t),r:EE,s:x6,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function kE(e){return e}var TE=Array.prototype.map,IE=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function b6(e){var t=e.grouping===void 0||e.thousands===void 0?kE:y6(TE.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",a=e.currency===void 0?"":e.currency[1]+"",c=e.decimal===void 0?".":e.decimal+"",d=e.numerals===void 0?kE:g6(TE.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",v=e.minus===void 0?"":e.minus+"",x=e.nan===void 0?"NaN":e.nan+"";function E(P){P=sg(P);var I=P.fill,q=P.align,$=P.sign,G=P.symbol,D=P.zero,F=P.width,V=P.comma,B=P.precision,z=P.trim,re=P.type;re==="n"?(V=!0,re="g"):CE[re]||(B===void 0&&(B=12),z=!0,re="g"),(D||I==="0"&&q==="=")&&(D=!0,I="0",q="=");var ie=G==="$"?n:G==="#"&&/[boxX]/.test(re)?"0"+re.toLowerCase():"",ce=G==="$"?a:/[%p]/.test(re)?o:"",xe=CE[re],Te=/[defgprs%]/.test(re);B=B===void 0?6:/[gprs]/.test(re)?Math.max(1,Math.min(21,B)):Math.max(0,Math.min(20,B));function ve(we){var ee=ie,pe=ce,Oe,Ue,Ee;if(re==="c")pe=xe(we)+pe,we="";else{we=+we;var ke=we<0||1/we<0;if(we=isNaN(we)?x:xe(Math.abs(we),B),z&&(we=_6(we)),ke&&+we==0&&$!=="+"&&(ke=!1),ee=(ke?$==="("?$:v:$==="-"||$==="("?"":$)+ee,pe=(re==="s"?IE[8+dP/3]:"")+pe+(ke&&$==="("?")":""),Te){for(Oe=-1,Ue=we.length;++Oe<Ue;)if(Ee=we.charCodeAt(Oe),48>Ee||Ee>57){pe=(Ee===46?c+we.slice(Oe+1):we.slice(Oe))+pe,we=we.slice(0,Oe);break}}}V&&!D&&(we=t(we,1/0));var je=ee.length+we.length+pe.length,Ze=je<F?new Array(F-je+1).join(I):"";switch(V&&D&&(we=t(Ze+we,Ze.length?F-pe.length:1/0),Ze=""),q){case"<":we=ee+we+pe+Ze;break;case"=":we=ee+Ze+we+pe;break;case"^":we=Ze.slice(0,je=Ze.length>>1)+ee+we+pe+Ze.slice(je);break;default:we=Ze+ee+we+pe;break}return d(we)}return ve.toString=function(){return P+""},ve}function T(P,I){var q=E((P=sg(P),P.type="f",P)),$=Math.max(-8,Math.min(8,Math.floor(Rp(I)/3)))*3,G=Math.pow(10,-$),D=IE[8+$/3];return function(F){return q(G*F)+D}}return{format:E,formatPrefix:T}}var Km,mP,yP;w6({thousands:",",grouping:[3],currency:["$",""]});function w6(e){return Km=b6(e),mP=Km.format,yP=Km.formatPrefix,Km}function S6(e){return Math.max(0,-Rp(Math.abs(e)))}function E6(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Rp(t)/3)))*3-Rp(Math.abs(e)))}function C6(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Rp(t)-Rp(e))+1}function gP(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const PE=Symbol("implicit");function vP(){var e=new sE,t=[],n=[],a=PE;function c(d){let o=e.get(d);if(o===void 0){if(a!==PE)return a;e.set(d,o=t.push(d)-1)}return n[o%n.length]}return c.domain=function(d){if(!arguments.length)return t.slice();t=[],e=new sE;for(const o of d)e.has(o)||e.set(o,t.push(o)-1);return c},c.range=function(d){return arguments.length?(n=Array.from(d),c):n.slice()},c.unknown=function(d){return arguments.length?(a=d,c):a},c.copy=function(){return vP(t,n).unknown(a)},gP.apply(c,arguments),c}function k6(e){return function(){return e}}function T6(e){return+e}var AE=[0,1];function sp(e){return e}function zx(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:k6(isNaN(t)?NaN:.5)}function I6(e,t){var n;return e>t&&(n=e,e=t,t=n),function(a){return Math.max(e,Math.min(t,a))}}function P6(e,t,n){var a=e[0],c=e[1],d=t[0],o=t[1];return c<a?(a=zx(c,a),d=n(o,d)):(a=zx(a,c),d=n(d,o)),function(v){return d(a(v))}}function A6(e,t,n){var a=Math.min(e.length,t.length)-1,c=new Array(a),d=new Array(a),o=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<a;)c[o]=zx(e[o],e[o+1]),d[o]=n(t[o],t[o+1]);return function(v){var x=FO(e,v,1,a)-1;return d[x](c[x](v))}}function M6(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function R6(){var e=AE,t=AE,n=ib,a,c,d,o=sp,v,x,E;function T(){var I=Math.min(e.length,t.length);return o!==sp&&(o=I6(e[0],e[I-1])),v=I>2?A6:P6,x=E=null,P}function P(I){return I==null||isNaN(I=+I)?d:(x||(x=v(e.map(a),t,n)))(a(o(I)))}return P.invert=function(I){return o(c((E||(E=v(t,e.map(a),xa)))(I)))},P.domain=function(I){return arguments.length?(e=Array.from(I,T6),T()):e.slice()},P.range=function(I){return arguments.length?(t=Array.from(I),T()):t.slice()},P.rangeRound=function(I){return t=Array.from(I),n=JN,T()},P.clamp=function(I){return arguments.length?(o=I?!0:sp,T()):o!==sp},P.interpolate=function(I){return arguments.length?(n=I,T()):n},P.unknown=function(I){return arguments.length?(d=I,P):d},function(I,q){return a=I,c=q,T()}}function L6(){return R6()(sp,sp)}function z6(e,t,n,a){var c=HO(e,t,n),d;switch(a=sg(a??",f"),a.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return a.precision==null&&!isNaN(d=E6(c,o))&&(a.precision=d),yP(a,o)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(d=C6(c,Math.max(Math.abs(e),Math.abs(t))))&&(a.precision=d-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(d=S6(c))&&(a.precision=d-(a.type==="%")*2);break}}return mP(a)}function D6(e){var t=e.domain;return e.ticks=function(n){var a=t();return GO(a[0],a[a.length-1],n??10)},e.tickFormat=function(n,a){var c=t();return z6(c[0],c[c.length-1],n??10,a)},e.nice=function(n){n==null&&(n=10);var a=t(),c=0,d=a.length-1,o=a[c],v=a[d],x,E,T=10;for(v<o&&(E=o,o=v,v=E,E=c,c=d,d=E);T-- >0;){if(E=kx(o,v,n),E===x)return a[c]=o,a[d]=v,t(a);if(E>0)o=Math.floor(o/E)*E,v=Math.ceil(v/E)*E;else if(E<0)o=Math.ceil(o*E)/E,v=Math.floor(v*E)/E;else break;x=E}return e},e}function _P(){var e=L6();return e.copy=function(){return M6(e,_P())},gP.apply(e,arguments),D6(e)}function xh(e,t,n){this.k=e,this.x=t,this.y=n}xh.prototype={constructor:xh,scale:function(e){return e===1?this:new xh(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new xh(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};xh.prototype;const Fo=(e,t)=>{(t===null||isNaN(t)||t<9)&&(t=9);const n=10,a=t/n,c=["interpolate",["linear"],["to-number",["get",e]],0,"rgba(65, 182, 196, 0.85)"],d=[];for(let o=1;o<=n;o++){if(o===1){const v=o*a;d.push({stop:v,color:"rgba(127, 205, 187, .99)"})}if(o===2){const v=o*a;d.push({stop:v,color:"rgba(199, 233, 180, .99)"})}if(o===3){const v=o*a;d.push({stop:v,color:"rgba(220, 230, 177, 0.99)"})}if(o===4){const v=o*a;d.push({stop:v,color:"rgba(247, 237, 195,0.99)"})}if(o===5){const v=o*a;d.push({stop:v,color:"rgba(250, 240, 160, 0.99)"})}if(o===6){const v=o*a;d.push({stop:v,color:"rgba(255, 200, 118, 0.99)"})}if(o===7){const v=o*a;d.push({stop:v,color:"rgba(254, 178, 76, .99)"})}if(o===8){const v=o*a;d.push({stop:v,color:"rgba(253, 141, 60, .99)"})}if(o===9){const v=o*a;d.push({stop:v,color:"rgba(252, 78, 42, .99)"})}if(o===10){const v=o*a;d.push({stop:v,color:"rgba(227, 26, 28, .99)"})}}for(const o of d){const v=o.stop,x=o.color;c.push(v,x)}return c},O6=e=>e>11e3?Math.round(e/1e3)*1e3:e>1e3?Math.round(e/100)*100:e>100?Math.round(e/10)*10:e>10?Math.round(e/5)*5:e.toFixed(0),__=(e,t)=>{t.current=new Set;const n=e.current;n&&["mobility-Street-Detailed-highlighted","mobility-Block-Detailed-highlighted","mobility-Street-Detailed-other","energy-Building-highlighted","energy-Feeder-highlighted"].forEach(c=>{n.setFilter(c,["in","object_id",""]),n.setFilter(c,["in","ID_ESL",""])})},x_=(e,t)=>{const n=t.current;if(!n)return;const a=d3.select("#graph-container-mobility-summary");a.html("");const c=[];n.queryRenderedFeatures({layers:["mobility-Street-Detailed","mobility-Block-Detailed"]}).forEach(B=>{const z=B.properties.object_id;e.current.has(z)&&c.push({type:"Feature",geometry:B.geometry,properties:B.properties})});let o=[{timePeriod:"Morning",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Breakfast",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Lunch",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Afternoon",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Dinner",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Night",walk:0,bike:0,car:0,publicTransit:0}],v=[{timePeriod:"Morning",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Breakfast",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Lunch",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Afternoon",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Dinner",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Night",walk:0,bike:0,car:0,publicTransit:0}];const x=[{timePeriod:"Early Morning",walk:225.31,bike:44.53,car:1766.11,publicTransit:1508.7},{timePeriod:"Morning",walk:3207.24,bike:378.92,car:20038.77,publicTransit:6659.61},{timePeriod:"Lunch",walk:2306.27,bike:316.9,car:13787.66,publicTransit:7026.34},{timePeriod:"Afternoon",walk:1359.1,bike:186.25,car:9242.15,publicTransit:6118.57},{timePeriod:"Evening",walk:1685.12,bike:331.32,car:12511.29,publicTransit:10306.86},{timePeriod:"Night",walk:263.57,bike:51.43,car:2276.55,publicTransit:2076.8}];e.current.size===0&&(o=[...x]),c.length>0&&c.forEach(B=>{Object.keys(B.properties).forEach(z=>{const[re,ie,ce,xe,Te,ve]=z.split("_");ce==="0"&&ie==="1"&&Te==="-1"&&ve==="-1"?xe==="-1"?o[0].walk+=Number(B.properties[z]):xe==="1"?o[1].walk+=Number(B.properties[z]):xe==="2"?o[2].walk+=Number(B.properties[z]):xe==="3"?o[3].walk+=Number(B.properties[z]):xe==="4"?o[4].walk+=Number(B.properties[z]):xe==="5"&&(o[5].walk+=Number(B.properties[z])):ce==="1"&&ie==="1"&&Te==="-1"&&ve==="-1"?xe==="0"?o[0].bike+=Number(B.properties[z]):xe==="1"?o[1].bike+=Number(B.properties[z]):xe==="2"?o[2].bike+=Number(B.properties[z]):xe==="3"?o[3].bike+=Number(B.properties[z]):xe==="4"?o[4].bike+=Number(B.properties[z]):xe==="5"&&(o[5].bike+=Number(B.properties[z])):ce==="2"&&ie==="1"&&Te==="-1"&&ve==="-1"?xe==="0"?o[0].car+=Number(B.properties[z]):xe==="1"?o[1].car+=Number(B.properties[z]):xe==="2"?o[2].car+=Number(B.properties[z]):xe==="3"?o[3].car+=Number(B.properties[z]):xe==="4"?o[4].car+=Number(B.properties[z]):xe==="5"&&(o[5].car+=Number(B.properties[z])):ce==="3"&&ie==="1"&&Te==="-1"&&ve==="-1"&&(xe==="0"?o[0].publicTransit+=Number(B.properties[z]):xe==="1"?o[1].publicTransit+=Number(B.properties[z]):xe==="2"?o[2].publicTransit+=Number(B.properties[z]):xe==="3"?o[3].publicTransit+=Number(B.properties[z]):xe==="4"?o[4].publicTransit+=Number(B.properties[z]):xe==="5"&&(o[5].publicTransit+=Number(B.properties[z])))})}),c.length>0&&c.forEach(B=>{Object.keys(B.properties).forEach(z=>{const[re,ie,ce,xe,Te,ve]=z.split("_");ce==="0"&&ie==="0"&&Te==="-1"&&ve==="-1"?xe==="-1"?v[0].walk+=Number(B.properties[z]):xe==="1"?v[1].walk+=Number(B.properties[z]):xe==="2"?v[2].walk+=Number(B.properties[z]):xe==="3"?v[3].walk+=Number(B.properties[z]):xe==="4"?v[4].walk+=Number(B.properties[z]):xe==="5"&&(v[5].walk+=Number(B.properties[z])):ce==="1"&&ie==="0"&&Te==="-1"&&ve==="-1"?xe==="0"?v[0].bike+=Number(B.properties[z]):xe==="1"?v[1].bike+=Number(B.properties[z]):xe==="2"?v[2].bike+=Number(B.properties[z]):xe==="3"?v[3].bike+=Number(B.properties[z]):xe==="4"?v[4].bike+=Number(B.properties[z]):xe==="5"&&(v[5].bike+=Number(B.properties[z])):ce==="2"&&ie==="0"&&Te==="-1"&&ve==="-1"?xe==="0"?v[0].car+=Number(B.properties[z]):xe==="1"?v[1].car+=Number(B.properties[z]):xe==="2"?v[2].car+=Number(B.properties[z]):xe==="3"?v[3].car+=Number(B.properties[z]):xe==="4"?v[4].car+=Number(B.properties[z]):xe==="5"&&(v[5].car+=Number(B.properties[z])):ce==="3"&&ie==="0"&&Te==="-1"&&ve==="-1"&&(xe==="0"?v[0].publicTransit+=Number(B.properties[z]):xe==="1"?v[1].publicTransit+=Number(B.properties[z]):xe==="2"?v[2].publicTransit+=Number(B.properties[z]):xe==="3"?v[3].publicTransit+=Number(B.properties[z]):xe==="4"?v[4].publicTransit+=Number(B.properties[z]):xe==="5"&&(v[5].publicTransit+=Number(B.properties[z])))})});const E=parseInt(o.reduce((B,z)=>B+z.walk,0))+parseInt(v.reduce((B,z)=>B+z.walk,0)),T=parseInt(o.reduce((B,z)=>B+z.bike,0))+parseInt(v.reduce((B,z)=>B+z.bike,0)),P=parseInt(o.reduce((B,z)=>B+z.car,0))+parseInt(v.reduce((B,z)=>B+z.car,0)),I=parseInt(o.reduce((B,z)=>B+z.publicTransit,0))+parseInt(v.reduce((B,z)=>B+z.publicTransit,0)),q=["walk","bike","car","publicTransit"];d3.stack().keys(q)(o);const G=340,D=70,F={top:130,right:40,bottom:40,left:80},V=a.append("svg").attr("width",G).attr("height",D);V.append("rect").attr("x",G/10).attr("y",F.top-90).attr("width",55).attr("height",25).attr("fill","#f24726").attr("rx",5).attr("ry",5),V.append("text").attr("x",G/10+26).attr("y",F.top-73).attr("text-anchor","middle").attr("font-size","12px").attr("fill","white").text(`${E.toLocaleString()}`),V.append("rect").attr("x",G/10+80).attr("y",F.top-90).attr("width",55).attr("height",25).attr("fill","#fac710").attr("rx",5).attr("ry",5),V.append("text").attr("x",G/10+106).attr("y",F.top-73).attr("text-anchor","middle").attr("font-size","12px").attr("fill","white").text(`${T.toLocaleString()}`),V.append("rect").attr("x",G/10+160).attr("y",F.top-90).attr("width",55).attr("height",25).attr("fill","#2d9bf0").attr("rx",5).attr("ry",5),V.append("text").attr("x",G/10+186).attr("y",F.top-73).attr("text-anchor","middle").attr("font-size","12px").attr("fill","white").text(`${P.toLocaleString()}`),V.append("rect").attr("x",G/10+240).attr("y",F.top-90).attr("width",55).attr("height",25).attr("fill","#0263b9").attr("rx",5).attr("ry",5),V.append("text").attr("x",G/10+266).attr("y",F.top-73).attr("text-anchor","middle").attr("font-size","12px").attr("fill","white").text(`${I.toLocaleString()}`)},b_=(e,t)=>{const n=t.current;if(!n)return;const a=d3.select("#graph-container-mobility-senario");if(!a.node()){console.error("Container element not found.");return}a.html("");const c=[];n.queryRenderedFeatures({layers:["mobility-Street-Detailed","mobility-Block-Detailed"]}).forEach(re=>{const ie=re.properties.object_id;e.current.has(ie)&&c.push({type:"Feature",geometry:re.geometry,properties:re.properties})});let o=[{timePeriod:"Base Case",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Senario 1",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Senario 2",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Senario 3",walk:0,bike:0,car:0,publicTransit:0}];const v=[{timePeriod:"Base Case",walk:196.42,bike:44.66,car:1591.73,publicTransit:1473.78},{timePeriod:"Senario 1",walk:3069.64,bike:394.12,car:20284.15,publicTransit:6109.5},{timePeriod:"Senario 2",walk:3000.93,bike:416.66,car:13787.66,publicTransit:9402.27},{timePeriod:"Senario 3",walk:1331.69,bike:196.68,car:19540.22,publicTransit:6137.72}];e.current.size===0&&(o=[...v]),c.length>0&&c.forEach(re=>{Object.keys(re.properties).forEach(ie=>{const[ce,xe,Te,ve,we,ee]=ie.split("_");Te==="0"&&xe==="0"&&we==="-1"&&ee==="-1"?ve==="-1"?o[0].walk+=Number(re.properties[ie]):ve==="1"?o[1].walk+=Number(re.properties[ie]):ve==="2"?o[2].walk+=Number(re.properties[ie]):ve==="3"&&(o[3].walk+=Number(re.properties[ie])):Te==="1"&&xe==="0"&&we==="-1"&&ee==="-1"?ve==="0"?o[0].bike+=Number(re.properties[ie]):ve==="1"?o[1].bike+=Number(re.properties[ie]):ve==="2"?o[2].bike+=Number(re.properties[ie]):ve==="3"&&(o[3].bike+=Number(re.properties[ie])):Te==="2"&&xe==="0"&&we==="-1"&&ee==="-1"?ve==="0"?o[0].car+=Number(re.properties[ie]):ve==="1"?o[1].car+=Number(re.properties[ie]):ve==="2"?o[2].car+=Number(re.properties[ie]):ve==="3"&&(o[3].car+=Number(re.properties[ie])):Te==="3"&&xe==="0"&&we==="-1"&&ee==="-1"&&(ve==="0"?o[0].publicTransit+=Number(re.properties[ie]):ve==="1"?o[1].publicTransit+=Number(re.properties[ie]):ve==="2"?o[2].publicTransit+=Number(re.properties[ie]):ve==="3"&&(o[3].publicTransit+=Number(re.properties[ie])))})});const x=["walk","bike","car","publicTransit"],T=d3.stack().keys(x)(o),P={top:10,right:40,bottom:40,left:70},I=240,q=100,$=180,G=a.append("svg").attr("width",I+P.left+P.right).attr("height",q+P.top+P.bottom).append("g").attr("transform",`translate(${P.left},${P.top})`),D=d3.scaleBand().domain(o.map(re=>re.timePeriod)).range([0,I]).padding(.1),F=d3.scaleLinear().domain([0,d3.max(T[T.length-1],re=>re[1])]).nice().range([q,0]),V=d3.scaleOrdinal().domain(x).range(["#f24726","#fac710","#2d9bf0","#0263b9"]);G.append("g").selectAll("g").data(T).join("g").attr("fill",re=>V(re.key)).selectAll("rect").data(re=>re).join("rect").attr("x",(re,ie)=>D(o[ie].timePeriod)).attr("y",re=>F(re[1])).attr("height",re=>F(re[0])-F(re[1])).attr("width",D.bandwidth()),G.append("g").attr("transform",`translate(0,${q})`).call(d3.axisBottom(D)),G.append("g").call(d3.axisLeft(F).ticks(null,"s"));const z=G.append("g").attr("class","legend").attr("transform",`translate(${P.left}, ${$-P.bottom+30})`).selectAll(".legend-item").data(x).enter().append("g").attr("class","legend-item").attr("transform",(re,ie)=>`translate(${ie*60}, 0)`).attr("stroke","none");z.append("rect").attr("x",-80).attr("y",-20).attr("width",10).attr("height",10).style("fill",re=>V(re)),z.append("text").attr("x",-65).attr("y",-10).text(re=>re).attr("font-size","10px")},w_=(e,t)=>{const n=t.current;if(!n)return;const a=d3.select("#graph-container-weekday");a.html("");const c=[];n.queryRenderedFeatures({layers:["mobility-Street-Detailed","mobility-Block-Detailed"]}).forEach(ee=>{const pe=ee.properties.object_id;e.current.has(pe)&&c.push({type:"Feature",geometry:ee.geometry,properties:ee.properties})});let o=[{timePeriod:"Morning",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Breakfast",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Lunch",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Afternoon",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Dinner",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Night",walk:0,bike:0,car:0,publicTransit:0}],v=[{timePeriod:"Morning",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Breakfast",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Lunch",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Afternoon",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Dinner",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Night",walk:0,bike:0,car:0,publicTransit:0}];const x=[{timePeriod:"Early Morning",walk:225.31,bike:44.53,car:1766.11,publicTransit:1508.7},{timePeriod:"Morning",walk:3207.24,bike:378.92,car:20038.77,publicTransit:6659.61},{timePeriod:"Lunch",walk:2306.27,bike:316.9,car:13787.66,publicTransit:7026.34},{timePeriod:"Afternoon",walk:1359.1,bike:186.25,car:9242.15,publicTransit:6118.57},{timePeriod:"Evening",walk:1685.12,bike:331.32,car:12511.29,publicTransit:10306.86},{timePeriod:"Night",walk:263.57,bike:51.43,car:2276.55,publicTransit:2076.8}];e.current.size===0&&(o=[...x]),c.length>0&&c.forEach(ee=>{Object.keys(ee.properties).forEach(pe=>{const[Oe,Ue,Ee,ke,je,Ze]=pe.split("_");Ee==="0"&&Ue==="1"&&je==="-1"&&Ze==="-1"?ke==="-1"?o[0].walk+=Number(ee.properties[pe]):ke==="1"?o[1].walk+=Number(ee.properties[pe]):ke==="2"?o[2].walk+=Number(ee.properties[pe]):ke==="3"?o[3].walk+=Number(ee.properties[pe]):ke==="4"?o[4].walk+=Number(ee.properties[pe]):ke==="5"&&(o[5].walk+=Number(ee.properties[pe])):Ee==="1"&&Ue==="1"&&je==="-1"&&Ze==="-1"?ke==="0"?o[0].bike+=Number(ee.properties[pe]):ke==="1"?o[1].bike+=Number(ee.properties[pe]):ke==="2"?o[2].bike+=Number(ee.properties[pe]):ke==="3"?o[3].bike+=Number(ee.properties[pe]):ke==="4"?o[4].bike+=Number(ee.properties[pe]):ke==="5"&&(o[5].bike+=Number(ee.properties[pe])):Ee==="2"&&Ue==="1"&&je==="-1"&&Ze==="-1"?ke==="0"?o[0].car+=Number(ee.properties[pe]):ke==="1"?o[1].car+=Number(ee.properties[pe]):ke==="2"?o[2].car+=Number(ee.properties[pe]):ke==="3"?o[3].car+=Number(ee.properties[pe]):ke==="4"?o[4].car+=Number(ee.properties[pe]):ke==="5"&&(o[5].car+=Number(ee.properties[pe])):Ee==="3"&&Ue==="1"&&je==="-1"&&Ze==="-1"&&(ke==="0"?o[0].publicTransit+=Number(ee.properties[pe]):ke==="1"?o[1].publicTransit+=Number(ee.properties[pe]):ke==="2"?o[2].publicTransit+=Number(ee.properties[pe]):ke==="3"?o[3].publicTransit+=Number(ee.properties[pe]):ke==="4"?o[4].publicTransit+=Number(ee.properties[pe]):ke==="5"&&(o[5].publicTransit+=Number(ee.properties[pe])))})}),c.length>0&&c.forEach(ee=>{Object.keys(ee.properties).forEach(pe=>{const[Oe,Ue,Ee,ke,je,Ze]=pe.split("_");Ee==="0"&&Ue==="0"&&je==="-1"&&Ze==="-1"?ke==="-1"?v[0].walk+=Number(ee.properties[pe]):ke==="1"?v[1].walk+=Number(ee.properties[pe]):ke==="2"?v[2].walk+=Number(ee.properties[pe]):ke==="3"?v[3].walk+=Number(ee.properties[pe]):ke==="4"?v[4].walk+=Number(ee.properties[pe]):ke==="5"&&(v[5].walk+=Number(ee.properties[pe])):Ee==="1"&&Ue==="0"&&je==="-1"&&Ze==="-1"?ke==="0"?v[0].bike+=Number(ee.properties[pe]):ke==="1"?v[1].bike+=Number(ee.properties[pe]):ke==="2"?v[2].bike+=Number(ee.properties[pe]):ke==="3"?v[3].bike+=Number(ee.properties[pe]):ke==="4"?v[4].bike+=Number(ee.properties[pe]):ke==="5"&&(v[5].bike+=Number(ee.properties[pe])):Ee==="2"&&Ue==="0"&&je==="-1"&&Ze==="-1"?ke==="0"?v[0].car+=Number(ee.properties[pe]):ke==="1"?v[1].car+=Number(ee.properties[pe]):ke==="2"?v[2].car+=Number(ee.properties[pe]):ke==="3"?v[3].car+=Number(ee.properties[pe]):ke==="4"?v[4].car+=Number(ee.properties[pe]):ke==="5"&&(v[5].car+=Number(ee.properties[pe])):Ee==="3"&&Ue==="0"&&je==="-1"&&Ze==="-1"&&(ke==="0"?v[0].publicTransit+=Number(ee.properties[pe]):ke==="1"?v[1].publicTransit+=Number(ee.properties[pe]):ke==="2"?v[2].publicTransit+=Number(ee.properties[pe]):ke==="3"?v[3].publicTransit+=Number(ee.properties[pe]):ke==="4"?v[4].publicTransit+=Number(ee.properties[pe]):ke==="5"&&(v[5].publicTransit+=Number(ee.properties[pe])))})}),parseInt(o.reduce((ee,pe)=>ee+pe.walk,0))+parseInt(v.reduce((ee,pe)=>ee+pe.walk,0)),parseInt(o.reduce((ee,pe)=>ee+pe.bike,0))+parseInt(v.reduce((ee,pe)=>ee+pe.bike,0)),parseInt(o.reduce((ee,pe)=>ee+pe.car,0))+parseInt(v.reduce((ee,pe)=>ee+pe.car,0)),parseInt(o.reduce((ee,pe)=>ee+pe.publicTransit,0))+parseInt(v.reduce((ee,pe)=>ee+pe.publicTransit,0));const E=["walk","bike","car","publicTransit"],P=d3.stack().keys(E)(o),I=340,q=225,$={top:40,right:40,bottom:50,left:70},G=I-$.left-$.right,D=q-$.top-$.bottom,F=a.append("svg").attr("width",I).attr("height",q);F.append("text").attr("class","graph-title").attr("x",I/2).attr("y",$.top-25).attr("font-size","14px").attr("text-anchor","middle").text("Weekday Trip Volume and Mode Split"),F.append("text").attr("class","graph-title").attr("x",30).attr("y",$.top,0).attr("font-size","9px").attr("text-anchor","middle").text("Time Periods"),F.append("text").attr("class","graph-title").attr("x",G+90).attr("y",D+70).attr("font-size","9px").attr("text-anchor","middle").text("Number of Trips");const V=F.append("g").attr("transform",`translate(${$.left}, ${$.top})`),B=d3.scaleLinear().domain([0,d3.max(P,ee=>d3.max(ee,pe=>pe[1]))]).range([0,G]),z=d3.scaleBand().domain(o.map(ee=>ee.timePeriod)).range([0,D]).padding(.3),re=d3.scaleOrdinal().domain(E).range(["#f24726","#fac710","#2d9bf0","#0263b9"]);V.selectAll("g").data(P).enter().append("g").attr("fill",ee=>re(ee.key)).selectAll("rect").data(ee=>ee).enter().append("rect").attr("y",ee=>z(ee.data.timePeriod)).attr("x",ee=>B(ee[0])).attr("height",z.bandwidth()).attr("width",ee=>B(ee[1])-B(ee[0]));const ce=d3.axisLeft(z);V.append("g").call(ce);const xe=5,Te=d3.axisBottom(B).ticks(xe);V.append("g").attr("transform",`translate(0, ${D})`).call(Te),F.append("text").attr("x",I/2).attr("y",q).attr("text-anchor","middle"),F.append("text").attr("transform","rotate(-90)").attr("x",-(q/2)).attr("y",10).attr("text-anchor","middle");const we=F.append("g").attr("class","legend").attr("transform",`translate(${$.left}, ${q-$.bottom+30})`).selectAll(".legend-item").data(E).enter().append("g").attr("class","legend-item").attr("transform",(ee,pe)=>`translate(${pe*60}, 0)`).attr("stroke","none");we.append("rect").attr("x",0).attr("y",10).attr("width",10).attr("height",10).style("fill",ee=>re(ee)),we.append("text").attr("x",15).attr("y",20).text(ee=>ee).attr("font-size","10px")},S_=(e,t)=>{const n=t.current;if(!n)return;const a=d3.select("#graph-container-weekend");a.html("");const c=[];n.queryRenderedFeatures({layers:["mobility-Street-Detailed","mobility-Block-Detailed"]}).forEach(we=>{const ee=we.properties.object_id;e.current.has(ee)&&c.push({type:"Feature",geometry:we.geometry,properties:we.properties})});let o=[{timePeriod:"Morning",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Breakfast",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Lunch",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Afternoon",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Dinner",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Night",walk:0,bike:0,car:0,publicTransit:0}];const v=[{timePeriod:"Early Morning",walk:196.42,bike:44.66,car:1591.73,publicTransit:1473.78},{timePeriod:"Morning",walk:3069.64,bike:394.12,car:20284.15,publicTransit:6109.5},{timePeriod:"Lunch",walk:3000.93,bike:416.66,car:13787.66,publicTransit:9402.27},{timePeriod:"Afternoon",walk:1331.69,bike:196.68,car:19540.22,publicTransit:6137.72},{timePeriod:"Evening",walk:1916.97,bike:373.59,car:15200.76,publicTransit:11944.84},{timePeriod:"Night",walk:498.61,bike:109.18,car:4576.76,publicTransit:3883.33}];e.current.size===0&&(o=[...v]),c.length>0&&c.forEach(we=>{Object.keys(we.properties).forEach(ee=>{const[pe,Oe,Ue,Ee,ke,je]=ee.split("_");Ue==="0"&&Oe==="0"&&ke==="-1"&&je==="-1"?Ee==="-1"?o[0].walk+=Number(we.properties[ee]):Ee==="1"?o[1].walk+=Number(we.properties[ee]):Ee==="2"?o[2].walk+=Number(we.properties[ee]):Ee==="3"?o[3].walk+=Number(we.properties[ee]):Ee==="4"?o[4].walk+=Number(we.properties[ee]):Ee==="5"&&(o[5].walk+=Number(we.properties[ee])):Ue==="1"&&Oe==="0"&&ke==="-1"&&je==="-1"?Ee==="0"?o[0].bike+=Number(we.properties[ee]):Ee==="1"?o[1].bike+=Number(we.properties[ee]):Ee==="2"?o[2].bike+=Number(we.properties[ee]):Ee==="3"?o[3].bike+=Number(we.properties[ee]):Ee==="4"?o[4].bike+=Number(we.properties[ee]):Ee==="5"&&(o[5].bike+=Number(we.properties[ee])):Ue==="2"&&Oe==="0"&&ke==="-1"&&je==="-1"?Ee==="0"?o[0].car+=Number(we.properties[ee]):Ee==="1"?o[1].car+=Number(we.properties[ee]):Ee==="2"?o[2].car+=Number(we.properties[ee]):Ee==="3"?o[3].car+=Number(we.properties[ee]):Ee==="4"?o[4].car+=Number(we.properties[ee]):Ee==="5"&&(o[5].car+=Number(we.properties[ee])):Ue==="3"&&Oe==="0"&&ke==="-1"&&je==="-1"&&(Ee==="0"?o[0].publicTransit+=Number(we.properties[ee]):Ee==="1"?o[1].publicTransit+=Number(we.properties[ee]):Ee==="2"?o[2].publicTransit+=Number(we.properties[ee]):Ee==="3"?o[3].publicTransit+=Number(we.properties[ee]):Ee==="4"?o[4].publicTransit+=Number(we.properties[ee]):Ee==="5"&&(o[5].publicTransit+=Number(we.properties[ee])))})});const x=["walk","bike","car","publicTransit"],T=d3.stack().keys(x)(o),P=340,I=225,q={top:40,right:40,bottom:50,left:70},$=P-q.left-q.right,G=I-q.top-q.bottom,D=a.append("svg").attr("width",P).attr("height",I);D.append("text").attr("class","graph-title").attr("x",P/2).attr("y",q.top-22).attr("font-size","14px").attr("text-anchor","middle").text("Weekend Trip Volume and Mode Split"),D.append("text").attr("class","graph-title").attr("x",30).attr("y",q.top,10).attr("font-size","9px").attr("text-anchor","middle").text("Time Periods"),D.append("text").attr("class","graph-title").attr("x",$+90).attr("y",G+70).attr("font-size","9px").attr("text-anchor","middle").text("Number of Trips");const F=D.append("g").attr("transform",`translate(${q.left}, ${q.top})`),V=d3.scaleLinear().domain([0,d3.max(T,we=>d3.max(we,ee=>ee[1]))]).range([0,$]),B=d3.scaleBand().domain(o.map(we=>we.timePeriod)).range([0,G]).padding(.3),z=d3.scaleOrdinal().domain(x).range(["#f24726","#fac710","#2d9bf0","#0263b9"]);F.selectAll("g").data(T).enter().append("g").attr("fill",we=>z(we.key)).selectAll("rect").data(we=>we).enter().append("rect").attr("y",we=>B(we.data.timePeriod)).attr("x",we=>V(we[0])).attr("height",B.bandwidth()).attr("width",we=>V(we[1])-V(we[0]));const ie=d3.axisLeft(B);F.append("g").call(ie);const ce=5,xe=d3.axisBottom(V).ticks(ce);F.append("g").attr("class","x-axis").attr("transform",`translate(0, ${G})`).call(xe),D.append("text").attr("x",P/2).attr("y",I).attr("text-anchor","middle"),D.append("text").attr("transform","rotate(-90)").attr("x",-(I/2)).attr("y",20).attr("text-anchor","middle");const ve=D.append("g").attr("class","legend").attr("transform",`translate(${q.left}, ${I-q.bottom+30})`).selectAll(".legend-item").data(x).enter().append("g").attr("class","legend-item").attr("transform",(we,ee)=>`translate(${ee*60}, 0)`).attr("stroke","none");ve.append("rect").attr("x",0).attr("y",10).attr("width",10).attr("height",10).style("fill",we=>z(we)),ve.append("text").attr("x",15).attr("y",20).text(we=>we).attr("font-size","10px")},B6=(e,t,n)=>{const a=t.current;a&&d3.json(n).then(c=>{const d=d3.select("#graph-container-energybuildingsenario");d.html("");let o=0,v=Array.from({length:12},(je,Ze)=>({Month:Ze+1,equipment:0,lighting:0,hotWater:0,pv:0,heating:0,cooling:0}));const x=c.features[0].properties["Gas[kWh][Mth]"];c.features[0].properties["Electricity[kWh][Mth]"];const E=c.features[0].properties["Heating[KWh][Mth]"],T=c.features[0].properties["Cooling[KWh][Mth]"],P=c.features[0].properties["Equipment[KWh][Mth]"],I=c.features[0].properties["PV[KWh][Mth]"],q=c.features[0].properties["Lighting[KWh][Mth]"],$=c.features[0].properties["HotWater[KWh][Mth]"],G=x.map((je,Ze)=>({Month:Ze+1,heating:E[Ze],cooling:T[Ze],equipment:P[Ze],lighting:q[Ze],hotWater:$[Ze],pv:I[Ze]})),D=G.reduce((je,Ze)=>({heating:je.heating+Ze.heating,cooling:je.cooling+Ze.cooling,equipment:je.equipment+Ze.equipment,lighting:je.lighting+Ze.lighting,hotWater:je.hotWater+Ze.hotWater,pv:je.pv+Ze.pv}),{heating:0,cooling:0,equipment:0,lighting:0,hotWater:0,pv:0});if(Object.values(D).reduce((je,Ze)=>je+Ze,0),e.current.size===0)parseInt(c.features[0].properties.Area_SQM_ESL),parseInt(c.features[0].properties["Cost[$][Yr]"]),o=parseInt(c.features[0].properties["CO2[kg][Yr]"]),v=[...G];else{const je=Array.from(e.current),Ze=[];a.queryRenderedFeatures({layers:["energy-Building"]}).forEach(Pe=>{const Ge=Pe.properties.ID_ESL;je.includes(Ge)&&Ze.push({type:"Feature",geometry:Pe.geometry,properties:Pe.properties})}),Ze.forEach(Pe=>{const Ge=JSON.parse(Pe.properties["Heating[KWh][Mth]"]),lt=JSON.parse(Pe.properties["Cooling[KWh][Mth]"]),Re=JSON.parse(Pe.properties["Equipment[KWh][Mth]"]),qe=JSON.parse(Pe.properties["Lighting[KWh][Mth]"]),Xt=JSON.parse(Pe.properties["HotWater[KWh][Mth]"]),Pt=JSON.parse(Pe.properties["PV[KWh][Mth]"]),Bt=JSON.parse(Pe.properties["CO2[kg][Yr]"]);JSON.parse(Pe.properties["Cost[$][Yr]"]),JSON.parse(Pe.properties.Area_SQM_ESL),console.log("co2Data:",Bt),Ge.forEach((Ct,ir)=>{const Kt=ir;v[Kt].heating+=parseFloat(Ct),v[Kt].cooling+=parseFloat(lt[ir]),v[Kt].equipment+=parseFloat(Re[ir]),v[Kt].lighting+=parseFloat(qe[ir]),v[Kt].hotWater+=parseFloat(Xt[ir]),v[Kt].pv+=parseFloat(Pt[ir])}),o+=parseInt(Bt),console.log("totalCo2:",o)})}const F=v.reduce((je,Ze)=>({heating:je.heating+Ze.heating,cooling:je.cooling+Ze.cooling,equipment:je.equipment+Ze.equipment,lighting:je.lighting+Ze.lighting,hotWater:je.hotWater+Ze.hotWater,pv:je.pv+Ze.pv}),{heating:0,cooling:0,equipment:0,lighting:0,hotWater:0,pv:0});Object.values(F).reduce((je,Ze)=>je+Ze,0);const B=d3.stack().keys(["equipment","lighting","hotWater","PV","cooling","heating"]).order(d3.stackOrderNone).offset(d3.stackOffsetNone)(v),z=360,re=240,ie={top:30,right:20,bottom:70,left:70},ce=z-ie.left-ie.right,xe=re-ie.top-ie.bottom,Te=d.append("svg").attr("width",z).attr("height",re),ve=Te.append("g").attr("transform",`translate(${ie.left}, ${ie.top})`),we=d3.max(v,je=>d3.sum(Object.values(je).slice(1))),ee=d3.scaleBand().domain(v.map(je=>je.Month)).rangeRound([0,ce]).padding(.1),pe=d3.scaleLinear().domain([0,we]).range([xe,0]),Oe=d3.scaleOrdinal().domain(["equipment","lighting","hotWater","PV","cooling","heating"]).range(["#959595","#f2e75c","#eec176","#9C27B0","#6faadd","#cf5867"]);ve.selectAll(".stack").data(B).enter().append("g").attr("class","stack").attr("fill",je=>Oe(je.key)).selectAll("rect").data(je=>je).enter().append("rect").attr("x",je=>ee(je.data.Month)).attr("y",je=>pe(je[1])).attr("height",je=>pe(je[0])-pe(je[1])).attr("width",ee.bandwidth());const Ee=Te.append("g").attr("class","legend").attr("transform",`translate(${ie.left}, ${re-ie.bottom+20})`),ke=100;Oe.domain().forEach((je,Ze)=>{const wt=Ee.append("g").attr("transform",`translate(${Ze%3*ke}, ${Math.floor(Ze/3)*20})`);wt.append("rect").attr("x",0).attr("y",20).attr("width",10).attr("height",10).attr("fill",Oe(je)),wt.append("text").attr("x",15).attr("y",25).attr("dy","0.35em").style("font-size","10px").text(je)})})},N6=(e,t,n)=>{const a=t.current;a&&d3.json(n).then(c=>{const d=d3.select("#graph-container-energysummaryuse");d.html("");let o=0,v=0,x=0,E=Array.from({length:12},(Re,qe)=>({Month:qe+1,equipment:0,lighting:0,hotWater:0,pv:0,heating:0,cooling:0}));const T=c.features[0].properties["Gas[kWh][Mth]"];c.features[0].properties["Electricity[kWh][Mth]"];const P=c.features[0].properties["Heating[KWh][Mth]"],I=c.features[0].properties["Cooling[KWh][Mth]"],q=c.features[0].properties["Equipment[KWh][Mth]"],$=c.features[0].properties["PV[KWh][Mth]"],G=c.features[0].properties["Lighting[KWh][Mth]"],D=c.features[0].properties["HotWater[KWh][Mth]"],F=T.map((Re,qe)=>({Month:qe+1,heating:P[qe],cooling:I[qe],equipment:q[qe],lighting:G[qe],hotWater:D[qe],pv:$[qe]})),V=F.reduce((Re,qe)=>({heating:Re.heating+qe.heating,cooling:Re.cooling+qe.cooling,equipment:Re.equipment+qe.equipment,lighting:Re.lighting+qe.lighting,hotWater:Re.hotWater+qe.hotWater,pv:Re.pv+qe.pv}),{heating:0,cooling:0,equipment:0,lighting:0,hotWater:0,pv:0}),B=Object.values(V).reduce((Re,qe)=>Re+qe,0);if(e.current.size===0)x=parseInt(c.features[0].properties.Area_SQM_ESL),v=parseInt(c.features[0].properties["Cost[$][Yr]"]),o=parseInt(c.features[0].properties["CO2[kg][Yr]"]),E=[...F];else{const Re=Array.from(e.current),qe=[];a.queryRenderedFeatures({layers:["energy-Building"]}).forEach(Pt=>{const Bt=Pt.properties.ID_ESL;Re.includes(Bt)&&qe.push({type:"Feature",geometry:Pt.geometry,properties:Pt.properties})}),qe.forEach(Pt=>{const Bt=JSON.parse(Pt.properties["Heating[KWh][Mth]"]),Ct=JSON.parse(Pt.properties["Cooling[KWh][Mth]"]),ir=JSON.parse(Pt.properties["Equipment[KWh][Mth]"]),Kt=JSON.parse(Pt.properties["Lighting[KWh][Mth]"]),Jt=JSON.parse(Pt.properties["HotWater[KWh][Mth]"]),st=JSON.parse(Pt.properties["PV[KWh][Mth]"]),Ot=JSON.parse(Pt.properties["CO2[kg][Yr]"]),tr=JSON.parse(Pt.properties["Cost[$][Yr]"]),Lr=JSON.parse(Pt.properties.Area_SQM_ESL);console.log("co2Data:",Ot),Bt.forEach((Fr,rr)=>{const qr=rr;E[qr].heating+=parseFloat(Fr),E[qr].cooling+=parseFloat(Ct[rr]),E[qr].equipment+=parseFloat(ir[rr]),E[qr].lighting+=parseFloat(Kt[rr]),E[qr].hotWater+=parseFloat(Jt[rr]),E[qr].pv+=parseFloat(st[rr])}),o+=parseInt(Ot),v+=parseInt(tr),x+=Lr,console.log("totalCo2:",o)})}const z=E.reduce((Re,qe)=>({heating:Re.heating+qe.heating,cooling:Re.cooling+qe.cooling,equipment:Re.equipment+qe.equipment,lighting:Re.lighting+qe.lighting,hotWater:Re.hotWater+qe.hotWater,pv:Re.pv+qe.pv}),{heating:0,cooling:0,equipment:0,lighting:0,hotWater:0,pv:0}),re=Object.values(z).reduce((Re,qe)=>Re+qe,0);d3.stack().keys(["equipment","lighting","hotWater","PV","cooling","heating"]).order(d3.stackOrderNone).offset(d3.stackOffsetNone)(E);const ce=380,xe=200,Te={top:170,right:50,bottom:100,left:10},ve=ce-Te.left-Te.right,ee=d.append("svg").attr("width",ce).attr("height",xe).append("g").attr("transform",`translate(${Te.left}, ${Te.top})`);var pe=Te.top-300,Oe=100,Ue=30,Ee=5,ke=5,je=[{x:0,y:pe,width:Oe,height:Ue,fill:"#89c8a6",rx:Ee,ry:ke,value:v.toLocaleString(),title:"Cost",unit:"[$/Yr]"},{x:110,y:pe,width:Oe,height:Ue,fill:"#d0df5a",rx:Ee,ry:ke,value:re.toLocaleString(),title:"Total Energy",unit:"[kWh/Yr]"},{x:220,y:pe,width:Oe,height:Ue,fill:"#f2e75c",rx:Ee,ry:ke,value:o.toLocaleString(),title:"CO2",unit:"[kg/Yr]"}],Ze=[{x:0,y:pe+Ue+50,width:Oe,height:Ue,fill:"#D8E0BB",rx:Ee,ry:ke,value:x.toLocaleString(),title:"Area",unit:"[SQM]"},{x:110,y:pe+Ue+50,width:Oe,height:Ue,fill:"#B6CEC7",rx:Ee,ry:ke,value:parseInt(re/x).toLocaleString(),title:"Normalized Energy",unit:"[kWh/SQM/Yr]"},{x:220,y:pe+Ue+50,width:Oe,height:Ue,fill:"#86A3C3",rx:Ee,ry:ke,value:(re/B).toFixed(4),title:"Percentage",unit:"[%]"}],wt=ee.selectAll(".rectangle").data(je),Pe=ee.selectAll(".rectangle").data(Ze),Ge=wt.enter().append("g").attr("class","rectangle"),lt=Pe.enter().append("g").attr("class","rectangle");Ge.append("text").attr("class","graph-title").attr("x",ve/2).attr("y",Te.top/2-240).attr("font-size","14px").attr("text-anchor","middle").attr("font-family","Open Sans","sans-serif").text("Energy Use Summary"),Ge.append("rect").attr("x",Re=>Re.x).attr("y",Re=>Re.y).attr("width",Re=>Re.width).attr("height",Re=>Re.height).attr("fill",Re=>Re.fill).attr("rx",Re=>Re.rx).attr("ry",Re=>Re.ry),Ge.append("text").attr("x",Re=>Re.x+Re.width/2).attr("y",Re=>Re.y+Re.height/2).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("font-size","12px").style("font-weight","bold").text(Re=>Re.value),Ge.append("text").attr("x",Re=>Re.x).attr("y",Re=>Re.y+Re.height+12).attr("text-anchor","left").attr("dominant-baseline","middle").attr("font-size","11px").style("font-weight","normal").text(Re=>Re.title),Ge.append("text").attr("x",Re=>Re.x).attr("y",Re=>Re.y+Re.height+24).attr("text-anchor","left").attr("dominant-baseline","middle").attr("font-size","8px").style("font-weight","light").attr("fill","gray").text(Re=>Re.unit),lt.append("rect").attr("x",Re=>Re.x).attr("y",Re=>Re.y).attr("width",Re=>Re.width).attr("height",Re=>Re.height).attr("fill",Re=>Re.fill).attr("rx",Re=>Re.rx).attr("ry",Re=>Re.ry),lt.append("text").attr("x",Re=>Re.x+Re.width/2).attr("y",Re=>Re.y+Re.height/2).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("font-size","12px").style("font-weight","bold").text(Re=>Re.value),lt.append("text").attr("x",Re=>Re.x).attr("y",Re=>Re.y+Re.height+12).attr("text-anchor","left").attr("dominant-baseline","middle").attr("font-size","11px").style("font-weight","normal").text(Re=>Re.title),lt.append("text").attr("x",Re=>Re.x).attr("y",Re=>Re.y+Re.height+24).attr("text-anchor","left").attr("dominant-baseline","middle").attr("font-size","8px").style("font-weight","light").attr("fill","gray").text(Re=>Re.unit)})},ME=(e,t,n)=>{const a=t.current;a&&d3.json(n).then(c=>{const d=d3.select("#graph-container-energyenduse");d.html("");let o=0,v=Array.from({length:12},(Pe,Ge)=>({Month:Ge+1,equipment:0,lighting:0,hotWater:0,pv:0,heating:0,cooling:0}));const x=c.features[0].properties["Gas[kWh][Mth]"];c.features[0].properties["Electricity[kWh][Mth]"];const E=c.features[0].properties["Heating[KWh][Mth]"],T=c.features[0].properties["Cooling[KWh][Mth]"],P=c.features[0].properties["Equipment[KWh][Mth]"],I=c.features[0].properties["PV[KWh][Mth]"],q=c.features[0].properties["Lighting[KWh][Mth]"],$=c.features[0].properties["HotWater[KWh][Mth]"],G=x.map((Pe,Ge)=>({Month:Ge+1,heating:E[Ge],cooling:T[Ge],equipment:P[Ge],lighting:q[Ge],hotWater:$[Ge],pv:I[Ge]})),D=G.reduce((Pe,Ge)=>({heating:Pe.heating+Ge.heating,cooling:Pe.cooling+Ge.cooling,equipment:Pe.equipment+Ge.equipment,lighting:Pe.lighting+Ge.lighting,hotWater:Pe.hotWater+Ge.hotWater,pv:Pe.pv+Ge.pv}),{heating:0,cooling:0,equipment:0,lighting:0,hotWater:0,pv:0});if(Object.values(D).reduce((Pe,Ge)=>Pe+Ge,0),e.current.size===0)parseInt(c.features[0].properties.Area_SQM_ESL),parseInt(c.features[0].properties["Cost[$][Yr]"]),o=parseInt(c.features[0].properties["CO2[kg][Yr]"]),v=[...G];else{const Pe=Array.from(e.current),Ge=[];a.queryRenderedFeatures({layers:["energy-Building"]}).forEach(Re=>{const qe=Re.properties.ID_ESL;Pe.includes(qe)&&Ge.push({type:"Feature",geometry:Re.geometry,properties:Re.properties})}),Ge.forEach(Re=>{const qe=JSON.parse(Re.properties["Heating[KWh][Mth]"]),Xt=JSON.parse(Re.properties["Cooling[KWh][Mth]"]),Pt=JSON.parse(Re.properties["Equipment[KWh][Mth]"]),Bt=JSON.parse(Re.properties["Lighting[KWh][Mth]"]),Ct=JSON.parse(Re.properties["HotWater[KWh][Mth]"]),ir=JSON.parse(Re.properties["PV[KWh][Mth]"]),Kt=JSON.parse(Re.properties["CO2[kg][Yr]"]);JSON.parse(Re.properties["Cost[$][Yr]"]),JSON.parse(Re.properties.Area_SQM_ESL),console.log("co2Data:",Kt),qe.forEach((Jt,st)=>{const Ot=st;v[Ot].heating+=parseFloat(Jt),v[Ot].cooling+=parseFloat(Xt[st]),v[Ot].equipment+=parseFloat(Pt[st]),v[Ot].lighting+=parseFloat(Bt[st]),v[Ot].hotWater+=parseFloat(Ct[st]),v[Ot].pv+=parseFloat(ir[st])}),o+=parseInt(Kt),console.log("totalCo2:",o)})}const F=v.reduce((Pe,Ge)=>({heating:Pe.heating+Ge.heating,cooling:Pe.cooling+Ge.cooling,equipment:Pe.equipment+Ge.equipment,lighting:Pe.lighting+Ge.lighting,hotWater:Pe.hotWater+Ge.hotWater,pv:Pe.pv+Ge.pv}),{heating:0,cooling:0,equipment:0,lighting:0,hotWater:0,pv:0});Object.values(F).reduce((Pe,Ge)=>Pe+Ge,0);const B=d3.stack().keys(["equipment","lighting","hotWater","PV","cooling","heating"]).order(d3.stackOrderNone).offset(d3.stackOffsetNone)(v),z=340,re=225,ie={top:30,right:20,bottom:80,left:40},ce=z-ie.left-ie.right,xe=re-ie.top-ie.bottom,Te=d.append("svg").attr("width",z).attr("height",re),ve=Te.append("g").attr("transform",`translate(${ie.left}, ${ie.top})`);ve.append("text").attr("class","graph-title").attr("x",ce/2).attr("y",ie.top/2-30).attr("font-size","14px").attr("text-anchor","middle").text("Energy Use by End Use"),ve.append("text").attr("class","graph-title").attr("x",ce+1).attr("y",xe+30).attr("font-size","10px").attr("text-anchor","middle").text("Month"),ve.append("text").attr("class","graph-title").attr("x",-15).attr("y",ie.top-40).attr("font-size","10px").attr("text-anchor","middle").text("kWh");const we=d3.max(v,Pe=>d3.sum(Object.values(Pe).slice(1))),ee=d3.scaleLinear().domain([1,12]).range([0,ce]),pe=d3.scaleLinear().domain([0,we]).range([xe,0]),Oe=d3.scaleOrdinal().domain(["equipment","lighting","hotWater","PV","cooling","heating"]).range(["#959595","#f2e75c","#eec176","#9C27B0","#6faadd","#cf5867"]);ve.append("g").attr("class","y-axis").call(d3.axisLeft(pe).ticks(8).tickFormat(Pe=>{let Ge=1,lt="";return Pe>=1e9?(Ge=1e9,lt="G"):Pe>=1e6?(Ge=1e6,lt="M"):Pe>=1e3&&(Ge=1e3,lt="K"),Pe/Ge+lt})),ve.selectAll(".stack").data(B).enter().append("g").attr("class","stack").attr("fill",Pe=>Oe(Pe.key)).selectAll("rect").data(Pe=>Pe).enter().append("rect").attr("x",Pe=>ee(Pe.data.Month)).attr("y",Pe=>pe(Pe[1])).attr("height",Pe=>pe(Pe[0])-pe(Pe[1])).attr("width",ee(1)-ee(0)-5),ve.append("g").attr("class","x-axis").attr("transform",`translate(0, ${xe})`).call(d3.axisBottom(ee).ticks(12).tickFormat(d3.format("d")));const Ee=ve.append("g").attr("class","reference-lines");ve.selectAll(".y-axis .tick").data().map(Pe=>+Pe).forEach(Pe=>{Ee.append("line").attr("x1",0).attr("x2",ce+25).attr("y1",pe(Pe)).attr("y2",pe(Pe)).attr("class","reference-line").style("stroke","grey").attr("stroke-width",.3).style("stroke-dasharray","4 4")});const Ze=Te.append("g").attr("class","legend").attr("transform",`translate(${ie.left}, ${re-ie.bottom+20})`),wt=100;Oe.domain().forEach((Pe,Ge)=>{const lt=Ze.append("g").attr("transform",`translate(${Ge%3*wt}, ${Math.floor(Ge/3)*20})`);lt.append("rect").attr("x",0).attr("y",20).attr("width",10).attr("height",10).attr("fill",Oe(Pe)),lt.append("text").attr("x",15).attr("y",25).attr("dy","0.35em").style("font-size","10px").text(Pe)})})},F6=(e,t)=>{const n=t.current;if(!n)return;const a=d3.select("#graph-container-energyfueluse");a.html("");let c=[{month:1,gas:0,electricity:0},{month:2,gas:0,electricity:0},{month:3,gas:0,electricity:0},{month:4,gas:0,electricity:0},{month:5,gas:0,electricity:0},{month:6,gas:0,electricity:0},{month:7,gas:0,electricity:0},{month:8,gas:0,electricity:0},{month:9,gas:0,electricity:0},{month:10,gas:0,electricity:0},{month:11,gas:0,electricity:0},{month:12,gas:0,electricity:0}];const d=[{month:1,gas:292456832,electricity:37756},{month:2,gas:243212032,electricity:33694},{month:3,gas:214523040,electricity:36607},{month:4,gas:113816456,electricity:32627},{month:5,gas:40872760,electricity:36890},{month:6,gas:13437732,electricity:38806},{month:7,gas:5359225,electricity:43566},{month:8,gas:9691384,electricity:42551},{month:9,gas:28674048,electricity:35716},{month:10,gas:80831360,electricity:34014},{month:11,gas:158096176,electricity:34262},{month:12,gas:238814736,electricity:35995}];if(e.current.size===0)c=[...d];else{const ve=[];n.queryRenderedFeatures({layers:["energy-Building"]}).forEach(ee=>{const pe=ee.properties.ID_ESL;e.current.has(pe)&&ve.push({type:"Feature",geometry:ee.geometry,properties:ee.properties})}),c=ve.reduce((ee,pe)=>{const Oe=JSON.parse(pe.properties["Gas[kWh][Mth]"]),Ue=JSON.parse(pe.properties["Electricity[kWh][Mth]"]);return Oe.forEach((Ee,ke)=>{ee[ke]||(ee[ke]={month:ke+1,gas:0,electricity:0}),ee[ke].gas+=Math.round(parseFloat(Ee)),ee[ke].electricity+=Math.round(parseFloat(Ue[ke]))}),ee},[])}const o=340,v=225,x={top:30,right:20,bottom:40,left:40},E=o-x.left-x.right,T=v-x.top-x.bottom,P=a.append("svg").attr("width",o).attr("height",v),I=P.append("g").attr("transform",`translate(${x.left}, ${x.top})`),q=d3.max(c,ve=>ve.gas),$=d3.max(c,ve=>ve.electricity),G=Math.max(q,$),D=d3.scaleLinear().domain([1,12]).range([0,E]),F=d3.scaleLinear().domain([0,G]).range([T,0]),V=d3.line().x(ve=>D(ve.month)).y(ve=>F(ve.gas)),B=d3.line().x(ve=>D(ve.month)).y(ve=>F(ve.electricity));I.append("g").attr("transform",`translate(0, ${T})`).call(d3.axisBottom(D)),I.append("g").attr("class","y-axis").call(d3.axisLeft(F).ticks(8).tickFormat(ve=>{let we=1,ee="";return ve>=1e9?(we=1e9,ee="G"):ve>=1e6?(we=1e6,ee="M"):ve>=1e3&&(we=1e3,ee="K"),ve/we+ee})),I.append("text").attr("class","graph-title").attr("x",E/2).attr("y",x.top-40).attr("font-size","14px").attr("text-anchor","middle").text("Energy Use by Fuel Use"),I.append("text").attr("class","graph-title").attr("x",E+1).attr("y",T+30).attr("font-size","10px").attr("text-anchor","middle").text("Month"),I.append("text").attr("class","graph-title").attr("x",-20).attr("y",x.top-40).attr("font-size","10px").attr("text-anchor","middle").text("kWh"),I.append("path").datum(c).attr("fill","none").attr("stroke","#FFB100").attr("stroke-width",2).attr("d",V),I.append("path").datum(c).attr("fill","none").attr("stroke","#1569C7").attr("stroke-width",2).attr("d",B);const z=I.append("g").attr("class","reference-lines");I.selectAll(".y-axis .tick").data().map(ve=>+ve).forEach(ve=>{z.append("line").attr("x1",0).attr("x2",E).attr("y1",F(ve)).attr("y2",F(ve)).attr("class","reference-line").style("stroke","grey").attr("stroke-width",.3).style("stroke-dasharray","4 4")});const ce=P.append("g").attr("class","legend").attr("transform",`translate(${x.left}, ${v-x.bottom})`),xe=100,Te=35;ce.append("line").attr("x1",0).attr("y1",Te).attr("x2",30).attr("y2",Te).attr("stroke","#FFB100").attr("stroke-width",2),ce.append("text").attr("x",35).attr("y",Te).attr("dy","0.35em").style("font-size","10px").style("fill","black").text("Gas"),ce.append("line").attr("x1",xe).attr("y1",Te).attr("x2",xe+30).attr("y2",Te).attr("stroke","#1569C7").attr("stroke-width",2),ce.append("text").attr("x",xe+35).attr("y",Te).attr("dy","0.35em").style("font-size","10px").style("fill","black").text("Electricity")},RE=(e,t)=>{const n=t.current;if(!n)return;const a=d3.select("#graph-container-energyone");a.html("");const c=[];n.queryRenderedFeatures({layers:["energy-Feeder"]}).forEach(Ee=>{const ke=Ee.properties.ID_ESL;e.current.has(ke)&&c.push({type:"Feature",geometry:Ee.geometry,properties:Ee.properties})});const o=c.reduce((Ee,ke)=>{const je=JSON.parse(ke.properties.GasDemand_KWh),Ze=JSON.parse(ke.properties.ElectricityDemand_KWh);return console.log("gasData:",je),je.forEach((wt,Pe)=>{Ee[Pe]||(Ee[Pe]={hour:Pe+1,gas:0,electricity:0}),Ee[Pe].gas+=Math.round(wt),Ee[Pe].electricity+=Math.round(Ze[Pe])}),Ee},[]),v=1,x=168,E=o.filter((Ee,ke)=>ke>=v&&ke<=x),T=340,P=220,I={top:50,right:20,bottom:40,left:60},q=T-I.left-I.right,$=P-I.top-I.bottom,G=a.append("svg").attr("width",T).attr("height",P),D=G.append("g").attr("transform",`translate(${I.left}, ${I.top})`),F=d3.max(E,Ee=>Ee.gas),V=d3.max(E,Ee=>Ee.electricity),B=Math.max(F,V),z=d3.scaleLinear().domain([1,168]).range([0,q]),re=d3.scaleLinear().domain([0,B]).range([$,0]),ie=d3.line().x(Ee=>z(Ee.hour)).y(Ee=>re(Ee.gas)),ce=d3.line().x(Ee=>z(Ee.hour)).y(Ee=>re(Ee.electricity)),xe=[24,48,72,96,120,144],Te=d3.axisBottom(z).tickValues(xe);D.append("g").attr("class","x-axis").attr("transform","translate(0,"+$+")").call(Te),D.append("g").attr("class","y-axis").call(d3.axisLeft(re)),D.append("text").attr("class","graph-title").attr("x",q/2).attr("y",I.top-70).attr("font-size","13px").attr("text-anchor","middle").text("Energy Load of Winter Week").append("tspan").attr("font-size","10px").text(" (1.1-1.7)"),D.append("text").attr("class","graph-title").attr("x",-20).attr("y",I.top-60).attr("font-size","10px").attr("text-anchor","middle").text("kWh"),D.append("text").attr("class","graph-title").attr("x",q+8).attr("y",$+15).attr("font-size","10px").attr("text-anchor","middle").text("Hr");const ve=[24,48,72,96,120,144,168];D.selectAll(".vertical-line").data(ve).enter().append("line").attr("class","vertical-line").attr("x1",Ee=>z(Ee)).attr("x2",Ee=>z(Ee)).attr("y1",0).attr("y2",$).attr("stroke-width",1).style("stroke","black").style("stroke-dasharray","2");const we=D.append("g").attr("class","reference-lines");D.selectAll(".y-axis .tick").data().map(Ee=>+Ee).forEach(Ee=>{we.append("line").attr("x1",0).attr("x2",q).attr("y1",re(Ee)).attr("y2",re(Ee)).attr("class","reference-line").style("stroke","grey").attr("stroke-width",.3).style("stroke-dasharray","4 4")}),D.append("path").datum(E).attr("fill","none").attr("stroke","#FFB100").attr("stroke-width",2).attr("d",ie),D.append("path").datum(E).attr("fill","none").attr("stroke","#1569C7").attr("stroke-width",2).attr("d",ce);const Oe=G.append("g").attr("class","legend").attr("transform",`translate(${I.left}, ${P-I.bottom})`),Ue=100;Oe.append("line").attr("x1",0).attr("y1",30).attr("x2",30).attr("y2",30).attr("stroke","#FFBF00").attr("stroke-width",2),Oe.append("text").attr("x",35).attr("y",30).attr("dy","0.35em").style("font-size","10px").style("fill","black").text("Gas"),Oe.append("line").attr("x1",Ue).attr("y1",30).attr("x2",Ue+30).attr("y2",30).attr("stroke","#1569C7").attr("stroke-width",2),Oe.append("text").attr("x",Ue+35).attr("y",30).attr("dy","0.35em").style("font-size","10px").style("fill","black").text("Electricity")},LE=(e,t)=>{const n=t.current;if(!n)return;const a=d3.select("#graph-container-energytwo");a.html("");const c=[];n.queryRenderedFeatures({layers:["energy-Feeder"]}).forEach(Ee=>{const ke=Ee.properties.ID_ESL;e.current.has(ke)&&c.push({type:"Feature",geometry:Ee.geometry,properties:Ee.properties})});const o=c.reduce((Ee,ke)=>{const je=JSON.parse(ke.properties.GasDemand_KWh),Ze=JSON.parse(ke.properties.ElectricityDemand_KWh);return je.forEach((wt,Pe)=>{Ee[Pe]||(Ee[Pe]={hour:Pe+1,gas:0,electricity:0}),Ee[Pe].gas+=Math.round(wt),Ee[Pe].electricity+=Math.round(Ze[Pe])}),Ee},[]),v=5285,x=5453,E=o.filter((Ee,ke)=>ke>=v&&ke<=x),T=340,P=220,I={top:50,right:20,bottom:40,left:60},q=T-I.left-I.right,$=P-I.top-I.bottom,G=a.append("svg").attr("width",T).attr("height",P),D=G.append("g").attr("transform",`translate(${I.left}, ${I.top})`),F=d3.max(E,Ee=>Ee.gas),V=d3.max(E,Ee=>Ee.electricity),B=Math.max(F,V),z=d3.scaleLinear().domain([5285,5453]).range([0,q]),re=d3.scaleLinear().domain([0,B]).range([$,0]),ie=d3.line().x(Ee=>z(Ee.hour)).y(Ee=>re(Ee.gas)),ce=d3.line().x(Ee=>z(Ee.hour)).y(Ee=>re(Ee.electricity)),xe=[5309,5333,5357,5381,5405,5429],Te=d3.axisBottom(z).tickValues(xe);D.append("g").attr("class","x-axis").attr("transform","translate(0,"+$+")").call(Te),D.append("g").attr("class","y-axis").call(d3.axisLeft(re)),D.append("text").attr("class","graph-title").attr("x",q/2).attr("y",I.top-70).attr("font-size","13px").attr("text-anchor","middle").text("Energy Load of Summer Week").append("tspan").attr("font-size","10px").text(" (7.1-7.7)"),D.append("text").attr("class","graph-title").attr("x",-20).attr("y",I.top-60).attr("font-size","10px").attr("text-anchor","middle").text("kWh"),D.append("text").attr("class","graph-title").attr("x",q+8).attr("y",$+15).attr("font-size","10px").attr("text-anchor","middle").text("Hr");const ve=[5309,5333,5357,5381,5405,5429,5453];D.selectAll(".vertical-line").data(ve).enter().append("line").attr("class","vertical-line").attr("x1",Ee=>z(Ee)).attr("x2",Ee=>z(Ee)).attr("y1",0).attr("y2",$).attr("stroke-width",1).style("stroke","black").style("stroke-dasharray","2"),D.append("path").datum(E).attr("fill","none").attr("stroke","#FFB100").attr("stroke-width",2).attr("d",ie),D.append("path").datum(E).attr("fill","none").attr("stroke","#1569C7").attr("stroke-width",2).attr("d",ce);const we=D.append("g").attr("class","reference-lines");D.selectAll(".y-axis .tick").data().map(Ee=>+Ee).forEach(Ee=>{we.append("line").attr("x1",0).attr("x2",q).attr("y1",re(Ee)).attr("y2",re(Ee)).attr("class","reference-line").style("stroke","grey").attr("stroke-width",.3).style("stroke-dasharray","4 4")});const Oe=G.append("g").attr("class","legend").attr("transform",`translate(${I.left}, ${P-I.bottom})`),Ue=100;Oe.append("line").attr("x1",0).attr("y1",30).attr("x2",30).attr("y2",30).attr("stroke","#FFB100").attr("stroke-width",2),Oe.append("text").attr("x",35).attr("y",30).attr("dy","0.35em").style("font-size","10px").style("fill","black").text("Gas"),Oe.append("line").attr("x1",Ue).attr("y1",30).attr("x2",Ue+30).attr("y2",30).attr("stroke","#1569C7").attr("stroke-width",2),Oe.append("text").attr("x",Ue+35).attr("y",30).attr("dy","0.35em").style("font-size","10px").style("fill","black").text("Electricity")},zE=(e,t)=>{const n=t.current;if(!n)return;const a=d3.select("#graph-container-energythree");a.html("");const c=[];n.queryRenderedFeatures({layers:["energy-Feeder"]}).forEach(ee=>{const pe=ee.properties.ID_ESL;e.current.has(pe)&&c.push({type:"Feature",geometry:ee.geometry,properties:ee.properties})});const o=c.reduce((ee,pe)=>{const Oe=JSON.parse(pe.properties.GasDemand_KWh),Ue=JSON.parse(pe.properties.ElectricityDemand_KWh);return Oe.forEach((Ee,ke)=>{ee[ke]||(ee[ke]={hour:ke+1,gas:0,electricity:0}),ee[ke].gas+=Math.round(Ee),ee[ke].electricity+=Math.round(Ue[ke])}),ee},[]),v=o.map(ee=>({hour:ee.hour,gas:ee.gas,electricity:0})),x=o.map(ee=>({hour:ee.hour,gas:0,electricity:ee.electricity}));v.sort((ee,pe)=>pe.gas-ee.gas),x.sort((ee,pe)=>pe.electricity-ee.electricity),o.forEach((ee,pe)=>{ee.gas=v[pe].gas,ee.electricity=x[pe].electricity});const E=340,T=220,P={top:60,right:20,bottom:40,left:60},I=E-P.left-P.right,q=T-P.top-P.bottom,$=a.append("svg").attr("width",E).attr("height",T),G=$.append("g").attr("transform",`translate(${P.left}, ${P.top})`),D=d3.max(o,ee=>ee.gas),F=d3.max(o,ee=>ee.electricity),V=Math.max(D,F),B=d3.scaleLinear().domain([1,8765]).range([0,I]),z=d3.scaleLinear().domain([0,V]).range([q,0]),re=d3.line().x(ee=>B(ee.hour)).y(ee=>z(ee.gas)),ie=d3.line().x(ee=>B(ee.hour)).y(ee=>z(ee.electricity));G.append("g").attr("transform",`translate(0, ${q})`).call(d3.axisBottom(B)),G.append("g").attr("class","y-axis").call(d3.axisLeft(z)),G.append("text").attr("class","graph-title").attr("x",I/2).attr("y",P.top-70).attr("font-size","14px").attr("text-anchor","middle").text("Load Duration Curve"),G.append("text").attr("class","graph-title").attr("x",-20).attr("y",P.top-70).attr("font-size","10px").attr("text-anchor","middle").text("kWh"),G.append("text").attr("class","graph-title").attr("x",I+8).attr("y",q+15).attr("font-size","10px").attr("text-anchor","middle").text("Hr"),G.append("path").datum(o).attr("fill","none").attr("stroke","#FFB100").attr("stroke-width",2).attr("d",re),G.append("path").datum(o).attr("fill","none").attr("stroke","#1569C7").attr("stroke-width",2).attr("d",ie);const ce=G.append("g").attr("class","reference-lines");G.selectAll(".y-axis .tick").data().map(ee=>+ee).forEach(ee=>{ce.append("line").attr("x1",0).attr("x2",I).attr("y1",z(ee)).attr("y2",z(ee)).attr("class","reference-line").style("stroke","grey").attr("stroke-width",.3).style("stroke-dasharray","4 4")});const ve=$.append("g").attr("class","legend").attr("transform",`translate(${P.left}, ${T-P.bottom})`),we=100;ve.append("line").attr("x1",0).attr("y1",30).attr("x2",30).attr("y2",30).attr("stroke","#FFB100").attr("stroke-width",2),ve.append("text").attr("x",35).attr("y",30).attr("dy","0.35em").style("font-size","10px").style("fill","black").text("Gas"),ve.append("line").attr("x1",we).attr("y1",30).attr("x2",we+30).attr("y2",30).attr("stroke","#1569C7").attr("stroke-width",2),ve.append("text").attr("x",we+35).attr("y",30).attr("dy","0.35em").style("font-size","10px").style("fill","black").text("Electricity")},U6=[{id:"energy-Building",label:"Building Energy"},{id:"energy-Feeder",label:"Grid Energy"},{id:"mobility-Street-Detailed",label:"Street Mobility"},{id:"mobility-Block-Detailed",label:"Block Mobility"}],DE=e=>e?`${e}-highlighted`:null,OE=e=>e?`${e}-other`:null,$6=({handleDigitalTwinClick:e})=>Ce.createElement("div",{className:"home-page"},Ce.createElement("p",{className:"second-title"},"Digital Twin APIs"),Ce.createElement("img",{className:"general-image",src:"../Image/digitalTwin_withIcon.png",onClick:e}),Ce.createElement("img",{className:"general-image",src:"../Image/digitalTwinAdd.png"}),Ce.createElement("img",{className:"general-image",src:"../Image/digitalTwinBlank.png"}),Ce.createElement("img",{className:"general-image",src:"../Image/digitalTwinBlank.png"}),Ce.createElement("img",{className:"general-image",src:"../Image/digitalTwinBlank.png"}),Ce.createElement("p",{className:"second-title"},"Our Partners"),Ce.createElement("img",{className:"general-image",src:"../Image/partners.png"}),Ce.createElement("p",{className:"second-title"},"Disclaimer"),Ce.createElement("p",{className:"main-text"},'The data and the associated metadata are provided "as-is," without express or implied warranty of completeness, accuracy, or fitness for a particular purpose.')),j6=({buildingLayerCode:e,setBuildingLayerCode:t})=>Ce.createElement("select",{className:"energy-dropdown",value:e,onChange:n=>t(n.target.value)},Ce.createElement("option",{value:"Gas[kWh_m2][Yr]"},"Gas Demand"),Ce.createElement("option",{value:"Electricity[kWh_m2][Yr]"},"Electricity Demand"),Ce.createElement("option",{value:"Heating[KWh_m2][Yr]"},"Heating Demand"),Ce.createElement("option",{value:"Cooling[KWh_m2][Yr]"},"Cooling Demand"),Ce.createElement("option",{value:"Equipment[KWh_m2][Yr]"},"Equipment Demand"),Ce.createElement("option",{value:"Lighting[KWh_m2][Yr]"},"Lighting Demand"),Ce.createElement("option",{value:"HotWater[KWh_m2][Yr]"},"Hotwater Demand"),Ce.createElement("option",{value:"PV[KWh_m2][Yr]"},"Electricity Produced")),V6={black:"#000",white:"#fff"},rd=V6,q6={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},Vc=q6,W6={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},qc=W6,G6={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},Wc=G6,H6={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},Gc=H6,Z6={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},Hc=Z6,K6={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},ah=K6,X6={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},Y6=X6;function Bl(e){let t="https://mui.com/production-error/?code="+e;for(let n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}const gd="$$material";function he(){return he=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},he.apply(this,arguments)}function Vt(e,t){if(e==null)return{};var n={},a=Object.keys(e),c,d;for(d=0;d<a.length;d++)c=a[d],!(t.indexOf(c)>=0)&&(n[c]=e[c]);return n}function xP(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var J6=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Q6=xP(function(e){return J6.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91});function e8(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function t8(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var r8=function(){function e(n){var a=this;this._insertTag=function(c){var d;a.tags.length===0?a.insertionPoint?d=a.insertionPoint.nextSibling:a.prepend?d=a.container.firstChild:d=a.before:d=a.tags[a.tags.length-1].nextSibling,a.container.insertBefore(c,d),a.tags.push(c)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(a){a.forEach(this._insertTag)},t.insert=function(a){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(t8(this));var c=this.tags[this.tags.length-1];if(this.isSpeedy){var d=e8(c);try{d.insertRule(a,d.cssRules.length)}catch{}}else c.appendChild(document.createTextNode(a));this.ctr++},t.flush=function(){this.tags.forEach(function(a){return a.parentNode&&a.parentNode.removeChild(a)}),this.tags=[],this.ctr=0},e}(),Xi="-ms-",lg="-moz-",tn="-webkit-",bP="comm",ub="rule",cb="decl",n8="@import",wP="@keyframes",i8="@layer",o8=Math.abs,$g=String.fromCharCode,a8=Object.assign;function s8(e,t){return Bi(e,0)^45?(((t<<2^Bi(e,0))<<2^Bi(e,1))<<2^Bi(e,2))<<2^Bi(e,3):0}function SP(e){return e.trim()}function l8(e,t){return(e=t.exec(e))?e[0]:e}function rn(e,t,n){return e.replace(t,n)}function Dx(e,t){return e.indexOf(t)}function Bi(e,t){return e.charCodeAt(t)|0}function nd(e,t,n){return e.slice(t,n)}function Ka(e){return e.length}function pb(e){return e.length}function Xm(e,t){return t.push(e),e}function u8(e,t){return e.map(t).join("")}var jg=1,Lp=1,EP=0,Io=0,pi=0,Wp="";function Vg(e,t,n,a,c,d,o){return{value:e,root:t,parent:n,type:a,props:c,children:d,line:jg,column:Lp,length:o,return:""}}function sh(e,t){return a8(Vg("",null,null,"",null,null,0),e,{length:-e.length},t)}function c8(){return pi}function p8(){return pi=Io>0?Bi(Wp,--Io):0,Lp--,pi===10&&(Lp=1,jg--),pi}function jo(){return pi=Io<EP?Bi(Wp,Io++):0,Lp++,pi===10&&(Lp=1,jg++),pi}function ns(){return Bi(Wp,Io)}function xy(){return Io}function vd(e,t){return nd(Wp,e,t)}function id(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function CP(e){return jg=Lp=1,EP=Ka(Wp=e),Io=0,[]}function kP(e){return Wp="",e}function by(e){return SP(vd(Io-1,Ox(e===91?e+2:e===40?e+1:e)))}function f8(e){for(;(pi=ns())&&pi<33;)jo();return id(e)>2||id(pi)>3?"":" "}function h8(e,t){for(;--t&&jo()&&!(pi<48||pi>102||pi>57&&pi<65||pi>70&&pi<97););return vd(e,xy()+(t<6&&ns()==32&&jo()==32))}function Ox(e){for(;jo();)switch(pi){case e:return Io;case 34:case 39:e!==34&&e!==39&&Ox(pi);break;case 40:e===41&&Ox(e);break;case 92:jo();break}return Io}function d8(e,t){for(;jo()&&e+pi!==47+10;)if(e+pi===42+42&&ns()===47)break;return"/*"+vd(t,Io-1)+"*"+$g(e===47?e:jo())}function m8(e){for(;!id(ns());)jo();return vd(e,Io)}function y8(e){return kP(wy("",null,null,null,[""],e=CP(e),0,[0],e))}function wy(e,t,n,a,c,d,o,v,x){for(var E=0,T=0,P=o,I=0,q=0,$=0,G=1,D=1,F=1,V=0,B="",z=c,re=d,ie=a,ce=B;D;)switch($=V,V=jo()){case 40:if($!=108&&Bi(ce,P-1)==58){Dx(ce+=rn(by(V),"&","&\f"),"&\f")!=-1&&(F=-1);break}case 34:case 39:case 91:ce+=by(V);break;case 9:case 10:case 13:case 32:ce+=f8($);break;case 92:ce+=h8(xy()-1,7);continue;case 47:switch(ns()){case 42:case 47:Xm(g8(d8(jo(),xy()),t,n),x);break;default:ce+="/"}break;case 123*G:v[E++]=Ka(ce)*F;case 125*G:case 59:case 0:switch(V){case 0:case 125:D=0;case 59+T:F==-1&&(ce=rn(ce,/\f/g,"")),q>0&&Ka(ce)-P&&Xm(q>32?NE(ce+";",a,n,P-1):NE(rn(ce," ","")+";",a,n,P-2),x);break;case 59:ce+=";";default:if(Xm(ie=BE(ce,t,n,E,T,c,v,B,z=[],re=[],P),d),V===123)if(T===0)wy(ce,t,ie,ie,z,d,P,v,re);else switch(I===99&&Bi(ce,3)===110?100:I){case 100:case 108:case 109:case 115:wy(e,ie,ie,a&&Xm(BE(e,ie,ie,0,0,c,v,B,c,z=[],P),re),c,re,P,v,a?z:re);break;default:wy(ce,ie,ie,ie,[""],re,0,v,re)}}E=T=q=0,G=F=1,B=ce="",P=o;break;case 58:P=1+Ka(ce),q=$;default:if(G<1){if(V==123)--G;else if(V==125&&G++==0&&p8()==125)continue}switch(ce+=$g(V),V*G){case 38:F=T>0?1:(ce+="\f",-1);break;case 44:v[E++]=(Ka(ce)-1)*F,F=1;break;case 64:ns()===45&&(ce+=by(jo())),I=ns(),T=P=Ka(B=ce+=m8(xy())),V++;break;case 45:$===45&&Ka(ce)==2&&(G=0)}}return d}function BE(e,t,n,a,c,d,o,v,x,E,T){for(var P=c-1,I=c===0?d:[""],q=pb(I),$=0,G=0,D=0;$<a;++$)for(var F=0,V=nd(e,P+1,P=o8(G=o[$])),B=e;F<q;++F)(B=SP(G>0?I[F]+" "+V:rn(V,/&\f/g,I[F])))&&(x[D++]=B);return Vg(e,t,n,c===0?ub:v,x,E,T)}function g8(e,t,n){return Vg(e,t,n,bP,$g(c8()),nd(e,2,-2),0)}function NE(e,t,n,a){return Vg(e,t,n,cb,nd(e,0,a),nd(e,a+1,-1),a)}function wp(e,t){for(var n="",a=pb(e),c=0;c<a;c++)n+=t(e[c],c,e,t)||"";return n}function v8(e,t,n,a){switch(e.type){case i8:if(e.children.length)break;case n8:case cb:return e.return=e.return||e.value;case bP:return"";case wP:return e.return=e.value+"{"+wp(e.children,a)+"}";case ub:e.value=e.props.join(",")}return Ka(n=wp(e.children,a))?e.return=e.value+"{"+n+"}":""}function _8(e){var t=pb(e);return function(n,a,c,d){for(var o="",v=0;v<t;v++)o+=e[v](n,a,c,d)||"";return o}}function x8(e){return function(t){t.root||(t=t.return)&&e(t)}}var b8=function(t,n,a){for(var c=0,d=0;c=d,d=ns(),c===38&&d===12&&(n[a]=1),!id(d);)jo();return vd(t,Io)},w8=function(t,n){var a=-1,c=44;do switch(id(c)){case 0:c===38&&ns()===12&&(n[a]=1),t[a]+=b8(Io-1,n,a);break;case 2:t[a]+=by(c);break;case 4:if(c===44){t[++a]=ns()===58?"&\f":"",n[a]=t[a].length;break}default:t[a]+=$g(c)}while(c=jo());return t},S8=function(t,n){return kP(w8(CP(t),n))},FE=new WeakMap,E8=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,a=t.parent,c=t.column===a.column&&t.line===a.line;a.type!=="rule";)if(a=a.parent,!a)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!FE.get(a))&&!c){FE.set(t,!0);for(var d=[],o=S8(n,d),v=a.props,x=0,E=0;x<o.length;x++)for(var T=0;T<v.length;T++,E++)t.props[E]=d[x]?o[x].replace(/&\f/g,v[T]):v[T]+" "+o[x]}}},C8=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function TP(e,t){switch(s8(e,t)){case 5103:return tn+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return tn+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return tn+e+lg+e+Xi+e+e;case 6828:case 4268:return tn+e+Xi+e+e;case 6165:return tn+e+Xi+"flex-"+e+e;case 5187:return tn+e+rn(e,/(\w+).+(:[^]+)/,tn+"box-$1$2"+Xi+"flex-$1$2")+e;case 5443:return tn+e+Xi+"flex-item-"+rn(e,/flex-|-self/,"")+e;case 4675:return tn+e+Xi+"flex-line-pack"+rn(e,/align-content|flex-|-self/,"")+e;case 5548:return tn+e+Xi+rn(e,"shrink","negative")+e;case 5292:return tn+e+Xi+rn(e,"basis","preferred-size")+e;case 6060:return tn+"box-"+rn(e,"-grow","")+tn+e+Xi+rn(e,"grow","positive")+e;case 4554:return tn+rn(e,/([^-])(transform)/g,"$1"+tn+"$2")+e;case 6187:return rn(rn(rn(e,/(zoom-|grab)/,tn+"$1"),/(image-set)/,tn+"$1"),e,"")+e;case 5495:case 3959:return rn(e,/(image-set\([^]*)/,tn+"$1$`$1");case 4968:return rn(rn(e,/(.+:)(flex-)?(.*)/,tn+"box-pack:$3"+Xi+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+tn+e+e;case 4095:case 3583:case 4068:case 2532:return rn(e,/(.+)-inline(.+)/,tn+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ka(e)-1-t>6)switch(Bi(e,t+1)){case 109:if(Bi(e,t+4)!==45)break;case 102:return rn(e,/(.+:)(.+)-([^]+)/,"$1"+tn+"$2-$3$1"+lg+(Bi(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~Dx(e,"stretch")?TP(rn(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Bi(e,t+1)!==115)break;case 6444:switch(Bi(e,Ka(e)-3-(~Dx(e,"!important")&&10))){case 107:return rn(e,":",":"+tn)+e;case 101:return rn(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+tn+(Bi(e,14)===45?"inline-":"")+"box$3$1"+tn+"$2$3$1"+Xi+"$2box$3")+e}break;case 5936:switch(Bi(e,t+11)){case 114:return tn+e+Xi+rn(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return tn+e+Xi+rn(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return tn+e+Xi+rn(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return tn+e+Xi+e+e}return e}var k8=function(t,n,a,c){if(t.length>-1&&!t.return)switch(t.type){case cb:t.return=TP(t.value,t.length);break;case wP:return wp([sh(t,{value:rn(t.value,"@","@"+tn)})],c);case ub:if(t.length)return u8(t.props,function(d){switch(l8(d,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return wp([sh(t,{props:[rn(d,/:(read-\w+)/,":"+lg+"$1")]})],c);case"::placeholder":return wp([sh(t,{props:[rn(d,/:(plac\w+)/,":"+tn+"input-$1")]}),sh(t,{props:[rn(d,/:(plac\w+)/,":"+lg+"$1")]}),sh(t,{props:[rn(d,/:(plac\w+)/,Xi+"input-$1")]})],c)}return""})}},T8=[k8],I8=function(t){var n=t.key;if(n==="css"){var a=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(a,function(G){var D=G.getAttribute("data-emotion");D.indexOf(" ")!==-1&&(document.head.appendChild(G),G.setAttribute("data-s",""))})}var c=t.stylisPlugins||T8,d={},o,v=[];o=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(G){for(var D=G.getAttribute("data-emotion").split(" "),F=1;F<D.length;F++)d[D[F]]=!0;v.push(G)});var x,E=[E8,C8];{var T,P=[v8,x8(function(G){T.insert(G)})],I=_8(E.concat(c,P)),q=function(D){return wp(y8(D),I)};x=function(D,F,V,B){T=V,q(D?D+"{"+F.styles+"}":F.styles),B&&($.inserted[F.name]=!0)}}var $={key:n,sheet:new r8({key:n,container:o,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:d,registered:{},insert:x};return $.sheet.hydrate(v),$},IP={exports:{}},fn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ii=typeof Symbol=="function"&&Symbol.for,fb=Ii?Symbol.for("react.element"):60103,hb=Ii?Symbol.for("react.portal"):60106,qg=Ii?Symbol.for("react.fragment"):60107,Wg=Ii?Symbol.for("react.strict_mode"):60108,Gg=Ii?Symbol.for("react.profiler"):60114,Hg=Ii?Symbol.for("react.provider"):60109,Zg=Ii?Symbol.for("react.context"):60110,db=Ii?Symbol.for("react.async_mode"):60111,Kg=Ii?Symbol.for("react.concurrent_mode"):60111,Xg=Ii?Symbol.for("react.forward_ref"):60112,Yg=Ii?Symbol.for("react.suspense"):60113,P8=Ii?Symbol.for("react.suspense_list"):60120,Jg=Ii?Symbol.for("react.memo"):60115,Qg=Ii?Symbol.for("react.lazy"):60116,A8=Ii?Symbol.for("react.block"):60121,M8=Ii?Symbol.for("react.fundamental"):60117,R8=Ii?Symbol.for("react.responder"):60118,L8=Ii?Symbol.for("react.scope"):60119;function Wo(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case fb:switch(e=e.type,e){case db:case Kg:case qg:case Gg:case Wg:case Yg:return e;default:switch(e=e&&e.$$typeof,e){case Zg:case Xg:case Qg:case Jg:case Hg:return e;default:return t}}case hb:return t}}}function PP(e){return Wo(e)===Kg}fn.AsyncMode=db;fn.ConcurrentMode=Kg;fn.ContextConsumer=Zg;fn.ContextProvider=Hg;fn.Element=fb;fn.ForwardRef=Xg;fn.Fragment=qg;fn.Lazy=Qg;fn.Memo=Jg;fn.Portal=hb;fn.Profiler=Gg;fn.StrictMode=Wg;fn.Suspense=Yg;fn.isAsyncMode=function(e){return PP(e)||Wo(e)===db};fn.isConcurrentMode=PP;fn.isContextConsumer=function(e){return Wo(e)===Zg};fn.isContextProvider=function(e){return Wo(e)===Hg};fn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===fb};fn.isForwardRef=function(e){return Wo(e)===Xg};fn.isFragment=function(e){return Wo(e)===qg};fn.isLazy=function(e){return Wo(e)===Qg};fn.isMemo=function(e){return Wo(e)===Jg};fn.isPortal=function(e){return Wo(e)===hb};fn.isProfiler=function(e){return Wo(e)===Gg};fn.isStrictMode=function(e){return Wo(e)===Wg};fn.isSuspense=function(e){return Wo(e)===Yg};fn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===qg||e===Kg||e===Gg||e===Wg||e===Yg||e===P8||typeof e=="object"&&e!==null&&(e.$$typeof===Qg||e.$$typeof===Jg||e.$$typeof===Hg||e.$$typeof===Zg||e.$$typeof===Xg||e.$$typeof===M8||e.$$typeof===R8||e.$$typeof===L8||e.$$typeof===A8)};fn.typeOf=Wo;IP.exports=fn;var z8=IP.exports,AP=z8,D8={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},O8={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},MP={};MP[AP.ForwardRef]=D8;MP[AP.Memo]=O8;var B8=!0;function N8(e,t,n){var a="";return n.split(" ").forEach(function(c){e[c]!==void 0?t.push(e[c]+";"):a+=c+" "}),a}var RP=function(t,n,a){var c=t.key+"-"+n.name;(a===!1||B8===!1)&&t.registered[c]===void 0&&(t.registered[c]=n.styles)},LP=function(t,n,a){RP(t,n,a);var c=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var d=n;do t.insert(n===d?"."+c:"",d,t.sheet,!0),d=d.next;while(d!==void 0)}};function F8(e){for(var t=0,n,a=0,c=e.length;c>=4;++a,c-=4)n=e.charCodeAt(a)&255|(e.charCodeAt(++a)&255)<<8|(e.charCodeAt(++a)&255)<<16|(e.charCodeAt(++a)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(c){case 3:t^=(e.charCodeAt(a+2)&255)<<16;case 2:t^=(e.charCodeAt(a+1)&255)<<8;case 1:t^=e.charCodeAt(a)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var U8={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},$8=/[A-Z]|^ms/g,j8=/_EMO_([^_]+?)_([^]*?)_EMO_/g,zP=function(t){return t.charCodeAt(1)===45},UE=function(t){return t!=null&&typeof t!="boolean"},E_=xP(function(e){return zP(e)?e:e.replace($8,"-$&").toLowerCase()}),$E=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(j8,function(a,c,d){return Xa={name:c,styles:d,next:Xa},c})}return U8[t]!==1&&!zP(t)&&typeof n=="number"&&n!==0?n+"px":n};function od(e,t,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return Xa={name:n.name,styles:n.styles,next:Xa},n.name;if(n.styles!==void 0){var a=n.next;if(a!==void 0)for(;a!==void 0;)Xa={name:a.name,styles:a.styles,next:Xa},a=a.next;var c=n.styles+";";return c}return V8(e,t,n)}case"function":{if(e!==void 0){var d=Xa,o=n(e);return Xa=d,od(e,t,o)}break}}if(t==null)return n;var v=t[n];return v!==void 0?v:n}function V8(e,t,n){var a="";if(Array.isArray(n))for(var c=0;c<n.length;c++)a+=od(e,t,n[c])+";";else for(var d in n){var o=n[d];if(typeof o!="object")t!=null&&t[o]!==void 0?a+=d+"{"+t[o]+"}":UE(o)&&(a+=E_(d)+":"+$E(d,o)+";");else if(Array.isArray(o)&&typeof o[0]=="string"&&(t==null||t[o[0]]===void 0))for(var v=0;v<o.length;v++)UE(o[v])&&(a+=E_(d)+":"+$E(d,o[v])+";");else{var x=od(e,t,o);switch(d){case"animation":case"animationName":{a+=E_(d)+":"+x+";";break}default:a+=d+"{"+x+"}"}}}return a}var jE=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Xa,mb=function(t,n,a){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var c=!0,d="";Xa=void 0;var o=t[0];o==null||o.raw===void 0?(c=!1,d+=od(a,n,o)):d+=o[0];for(var v=1;v<t.length;v++)d+=od(a,n,t[v]),c&&(d+=o[v]);jE.lastIndex=0;for(var x="",E;(E=jE.exec(d))!==null;)x+="-"+E[1];var T=F8(d)+x;return{name:T,styles:d,next:Xa}},q8=function(t){return t()},DP=z_["useInsertionEffect"]?z_["useInsertionEffect"]:!1,W8=DP||q8,VE=DP||Q.useLayoutEffect,OP=Q.createContext(typeof HTMLElement<"u"?I8({key:"css"}):null);OP.Provider;var BP=function(t){return Q.forwardRef(function(n,a){var c=Q.useContext(OP);return t(n,c,a)})},yb=Q.createContext({}),G8=BP(function(e,t){var n=e.styles,a=mb([n],void 0,Q.useContext(yb)),c=Q.useRef();return VE(function(){var d=t.key+"-global",o=new t.sheet.constructor({key:d,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),v=!1,x=document.querySelector('style[data-emotion="'+d+" "+a.name+'"]');return t.sheet.tags.length&&(o.before=t.sheet.tags[0]),x!==null&&(v=!0,x.setAttribute("data-emotion",d),o.hydrate([x])),c.current=[o,v],function(){o.flush()}},[t]),VE(function(){var d=c.current,o=d[0],v=d[1];if(v){d[1]=!1;return}if(a.next!==void 0&&LP(t,a.next,!0),o.tags.length){var x=o.tags[o.tags.length-1].nextElementSibling;o.before=x,o.flush()}t.insert("",a,o,!1)},[t,a.name]),null});function H8(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return mb(t)}var gb=function(){var t=H8.apply(void 0,arguments),n="animation-"+t.name;return{name:n,styles:"@keyframes "+n+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},Z8=Q6,K8=function(t){return t!=="theme"},qE=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?Z8:K8},WE=function(t,n,a){var c;if(n){var d=n.shouldForwardProp;c=t.__emotion_forwardProp&&d?function(o){return t.__emotion_forwardProp(o)&&d(o)}:d}return typeof c!="function"&&a&&(c=t.__emotion_forwardProp),c},X8=function(t){var n=t.cache,a=t.serialized,c=t.isStringTag;return RP(n,a,c),W8(function(){return LP(n,a,c)}),null},Y8=function e(t,n){var a=t.__emotion_real===t,c=a&&t.__emotion_base||t,d,o;n!==void 0&&(d=n.label,o=n.target);var v=WE(t,n,a),x=v||qE(c),E=!x("as");return function(){var T=arguments,P=a&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(d!==void 0&&P.push("label:"+d+";"),T[0]==null||T[0].raw===void 0)P.push.apply(P,T);else{P.push(T[0][0]);for(var I=T.length,q=1;q<I;q++)P.push(T[q],T[0][q])}var $=BP(function(G,D,F){var V=E&&G.as||c,B="",z=[],re=G;if(G.theme==null){re={};for(var ie in G)re[ie]=G[ie];re.theme=Q.useContext(yb)}typeof G.className=="string"?B=N8(D.registered,z,G.className):G.className!=null&&(B=G.className+" ");var ce=mb(P.concat(z),D.registered,re);B+=D.key+"-"+ce.name,o!==void 0&&(B+=" "+o);var xe=E&&v===void 0?qE(V):x,Te={};for(var ve in G)E&&ve==="as"||xe(ve)&&(Te[ve]=G[ve]);return Te.className=B,Te.ref=F,Q.createElement(Q.Fragment,null,Q.createElement(X8,{cache:D,serialized:ce,isStringTag:typeof V=="string"}),Q.createElement(V,Te))});return $.displayName=d!==void 0?d:"Styled("+(typeof c=="string"?c:c.displayName||c.name||"Component")+")",$.defaultProps=t.defaultProps,$.__emotion_real=$,$.__emotion_base=c,$.__emotion_styles=P,$.__emotion_forwardProp=v,Object.defineProperty($,"toString",{value:function(){return"."+o}}),$.withComponent=function(G,D){return e(G,he({},n,D,{shouldForwardProp:WE($,D,!0)})).apply(void 0,P)},$}},J8=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],Bx=Y8.bind();J8.forEach(function(e){Bx[e]=Bx(e)});var NP={exports:{}},_d={};/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q8=Q,FP=60103;_d.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var GE=Symbol.for;FP=GE("react.element"),_d.Fragment=GE("react.fragment")}var eU=Q8.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,tU=Object.prototype.hasOwnProperty,rU={key:!0,ref:!0,__self:!0,__source:!0};function UP(e,t,n){var a,c={},d=null,o=null;n!==void 0&&(d=""+n),t.key!==void 0&&(d=""+t.key),t.ref!==void 0&&(o=t.ref);for(a in t)tU.call(t,a)&&!rU.hasOwnProperty(a)&&(c[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps,t)c[a]===void 0&&(c[a]=t[a]);return{$$typeof:FP,type:e,key:d,ref:o,props:c,_owner:eU.current}}_d.jsx=UP;_d.jsxs=UP;NP.exports=_d;var Xe=NP.exports;function nU(e){return e==null||Object.keys(e).length===0}function iU(e){const{styles:t,defaultTheme:n={}}=e,a=typeof t=="function"?c=>t(nU(c)?n:c):t;return Xe.jsx(G8,{styles:a})}/**
 * @mui/styled-engine v5.15.7
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function $P(e,t){return Bx(e,t)}const oU=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))};function Ns(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function jP(e){if(!Ns(e))return e;const t={};return Object.keys(e).forEach(n=>{t[n]=jP(e[n])}),t}function ko(e,t,n={clone:!0}){const a=n.clone?he({},e):e;return Ns(e)&&Ns(t)&&Object.keys(t).forEach(c=>{c!=="__proto__"&&(Ns(t[c])&&c in e&&Ns(e[c])?a[c]=ko(e[c],t[c],n):n.clone?a[c]=Ns(t[c])?jP(t[c]):t[c]:a[c]=t[c])}),a}function er(e){if(typeof e!="string")throw new Error(Bl(7));return e.charAt(0).toUpperCase()+e.slice(1)}function HE(...e){return e.reduce((t,n)=>n==null?t:function(...c){t.apply(this,c),n.apply(this,c)},()=>{})}function ev(e,t=166){let n;function a(...c){const d=()=>{e.apply(this,c)};clearTimeout(n),n=setTimeout(d,t)}return a.clear=()=>{clearTimeout(n)},a}function Sy(e,t){var n,a;return Q.isValidElement(e)&&t.indexOf((n=e.type.muiName)!=null?n:(a=e.type)==null||(a=a._payload)==null||(a=a.value)==null?void 0:a.muiName)!==-1}function To(e){return e&&e.ownerDocument||document}function Ws(e){return To(e).defaultView||window}function Nx(e,t){typeof e=="function"?e(t):e&&(e.current=t)}const aU=typeof window<"u"?Q.useLayoutEffect:Q.useEffect,Ea=aU;let ZE=0;function sU(e){const[t,n]=Q.useState(e),a=e||t;return Q.useEffect(()=>{t==null&&(ZE+=1,n(`mui-${ZE}`))},[t]),a}const KE=z_["useId".toString()];function vb(e){if(KE!==void 0){const t=KE();return e??t}return sU(e)}function XE({controlled:e,default:t,name:n,state:a="value"}){const{current:c}=Q.useRef(e!==void 0),[d,o]=Q.useState(t),v=c?e:d,x=Q.useCallback(E=>{c||o(E)},[]);return[v,x]}function $s(e){const t=Q.useRef(e);return Ea(()=>{t.current=e}),Q.useRef((...n)=>(0,t.current)(...n)).current}function Ui(...e){return Q.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(n=>{Nx(n,t)})},e)}const YE={};function lU(e,t){const n=Q.useRef(YE);return n.current===YE&&(n.current=e(t)),n}const uU=[];function cU(e){Q.useEffect(e,uU)}class tv{constructor(){this.currentId=0,this.clear=()=>{this.currentId!==0&&(clearTimeout(this.currentId),this.currentId=0)},this.disposeEffect=()=>this.clear}static create(){return new tv}start(t,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=0,n()},t)}}function VP(){const e=lU(tv.create).current;return cU(e.disposeEffect),e}let rv=!0,Fx=!1;const pU=new tv,fU={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function hU(e){const{type:t,tagName:n}=e;return!!(n==="INPUT"&&fU[t]&&!e.readOnly||n==="TEXTAREA"&&!e.readOnly||e.isContentEditable)}function dU(e){e.metaKey||e.altKey||e.ctrlKey||(rv=!0)}function C_(){rv=!1}function mU(){this.visibilityState==="hidden"&&Fx&&(rv=!0)}function yU(e){e.addEventListener("keydown",dU,!0),e.addEventListener("mousedown",C_,!0),e.addEventListener("pointerdown",C_,!0),e.addEventListener("touchstart",C_,!0),e.addEventListener("visibilitychange",mU,!0)}function gU(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch{}return rv||hU(t)}function vU(){const e=Q.useCallback(c=>{c!=null&&yU(c.ownerDocument)},[]),t=Q.useRef(!1);function n(){return t.current?(Fx=!0,pU.start(100,()=>{Fx=!1}),t.current=!1,!0):!1}function a(c){return gU(c)?(t.current=!0,!0):!1}return{isFocusVisibleRef:t,onFocus:a,onBlur:n,ref:e}}function qP(e){const t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}let Zc;function WP(){if(Zc)return Zc;const e=document.createElement("div"),t=document.createElement("div");return t.style.width="10px",t.style.height="1px",e.appendChild(t),e.dir="rtl",e.style.fontSize="14px",e.style.width="4px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.overflow="scroll",document.body.appendChild(e),Zc="reverse",e.scrollLeft>0?Zc="default":(e.scrollLeft=1,e.scrollLeft===0&&(Zc="negative")),document.body.removeChild(e),Zc}function _U(e,t){const n=e.scrollLeft;if(t!=="rtl")return n;switch(WP()){case"negative":return e.scrollWidth-e.clientWidth+n;case"reverse":return e.scrollWidth-e.clientWidth-n;default:return n}}function _b(e,t){const n=he({},t);return Object.keys(e).forEach(a=>{if(a.toString().match(/^(components|slots)$/))n[a]=he({},e[a],n[a]);else if(a.toString().match(/^(componentsProps|slotProps)$/)){const c=e[a]||{},d=t[a];n[a]={},!d||!Object.keys(d)?n[a]=c:!c||!Object.keys(c)?n[a]=d:(n[a]=he({},d),Object.keys(c).forEach(o=>{n[a][o]=_b(c[o],d[o])}))}else n[a]===void 0&&(n[a]=e[a])}),n}function jr(e,t,n=void 0){const a={};return Object.keys(e).forEach(c=>{a[c]=e[c].reduce((d,o)=>{if(o){const v=t(o);v!==""&&d.push(v),n&&n[o]&&d.push(n[o])}return d},[]).join(" ")}),a}const JE=e=>e,xU=()=>{let e=JE;return{configure(t){e=t},generate(t){return e(t)},reset(){e=JE}}},bU=xU(),GP=bU,wU={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Nr(e,t,n="Mui"){const a=wU[t];return a?`${n}-${a}`:`${GP.generate(e)}-${t}`}function Ir(e,t,n="Mui"){const a={};return t.forEach(c=>{a[c]=Nr(e,c,n)}),a}function SU(e,t=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,n))}const EU=["values","unit","step"],CU=e=>{const t=Object.keys(e).map(n=>({key:n,val:e[n]}))||[];return t.sort((n,a)=>n.val-a.val),t.reduce((n,a)=>he({},n,{[a.key]:a.val}),{})};function kU(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:a=5}=e,c=Vt(e,EU),d=CU(t),o=Object.keys(d);function v(I){return`@media (min-width:${typeof t[I]=="number"?t[I]:I}${n})`}function x(I){return`@media (max-width:${(typeof t[I]=="number"?t[I]:I)-a/100}${n})`}function E(I,q){const $=o.indexOf(q);return`@media (min-width:${typeof t[I]=="number"?t[I]:I}${n}) and (max-width:${($!==-1&&typeof t[o[$]]=="number"?t[o[$]]:q)-a/100}${n})`}function T(I){return o.indexOf(I)+1<o.length?E(I,o[o.indexOf(I)+1]):v(I)}function P(I){const q=o.indexOf(I);return q===0?v(o[1]):q===o.length-1?x(o[q]):E(I,o[o.indexOf(I)+1]).replace("@media","@media not all and")}return he({keys:o,values:d,up:v,down:x,between:E,only:T,not:P,unit:n},c)}const TU={borderRadius:4},IU=TU;function zh(e,t){return t?ko(e,t,{clone:!1}):e}const xb={xs:0,sm:600,md:900,lg:1200,xl:1536},QE={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${xb[e]}px)`};function Gs(e,t,n){const a=e.theme||{};if(Array.isArray(t)){const d=a.breakpoints||QE;return t.reduce((o,v,x)=>(o[d.up(d.keys[x])]=n(t[x]),o),{})}if(typeof t=="object"){const d=a.breakpoints||QE;return Object.keys(t).reduce((o,v)=>{if(Object.keys(d.values||xb).indexOf(v)!==-1){const x=d.up(v);o[x]=n(t[v],v)}else{const x=v;o[x]=t[x]}return o},{})}return n(t)}function PU(e={}){var t;return((t=e.keys)==null?void 0:t.reduce((a,c)=>{const d=e.up(c);return a[d]={},a},{}))||{}}function AU(e,t){return e.reduce((n,a)=>{const c=n[a];return(!c||Object.keys(c).length===0)&&delete n[a],n},t)}function nv(e,t,n=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&n){const a=`vars.${t}`.split(".").reduce((c,d)=>c&&c[d]?c[d]:null,e);if(a!=null)return a}return t.split(".").reduce((a,c)=>a&&a[c]!=null?a[c]:null,e)}function ug(e,t,n,a=n){let c;return typeof e=="function"?c=e(n):Array.isArray(e)?c=e[n]||a:c=nv(e,n)||a,t&&(c=t(c,a,e)),c}function oi(e){const{prop:t,cssProperty:n=e.prop,themeKey:a,transform:c}=e,d=o=>{if(o[t]==null)return null;const v=o[t],x=o.theme,E=nv(x,a)||{};return Gs(o,v,P=>{let I=ug(E,c,P);return P===I&&typeof P=="string"&&(I=ug(E,c,`${t}${P==="default"?"":er(P)}`,P)),n===!1?I:{[n]:I}})};return d.propTypes={},d.filterProps=[t],d}function MU(e){const t={};return n=>(t[n]===void 0&&(t[n]=e(n)),t[n])}const RU={m:"margin",p:"padding"},LU={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},eC={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},zU=MU(e=>{if(e.length>2)if(eC[e])e=eC[e];else return[e];const[t,n]=e.split(""),a=RU[t],c=LU[n]||"";return Array.isArray(c)?c.map(d=>a+d):[a+c]}),bb=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],wb=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...bb,...wb];function xd(e,t,n,a){var c;const d=(c=nv(e,t,!1))!=null?c:n;return typeof d=="number"?o=>typeof o=="string"?o:d*o:Array.isArray(d)?o=>typeof o=="string"?o:d[o]:typeof d=="function"?d:()=>{}}function HP(e){return xd(e,"spacing",8)}function bd(e,t){if(typeof t=="string"||t==null)return t;const n=Math.abs(t),a=e(n);return t>=0?a:typeof a=="number"?-a:`-${a}`}function DU(e,t){return n=>e.reduce((a,c)=>(a[c]=bd(t,n),a),{})}function OU(e,t,n,a){if(t.indexOf(n)===-1)return null;const c=zU(n),d=DU(c,a),o=e[n];return Gs(e,o,d)}function ZP(e,t){const n=HP(e.theme);return Object.keys(e).map(a=>OU(e,t,a,n)).reduce(zh,{})}function Hn(e){return ZP(e,bb)}Hn.propTypes={};Hn.filterProps=bb;function Zn(e){return ZP(e,wb)}Zn.propTypes={};Zn.filterProps=wb;function BU(e=8){if(e.mui)return e;const t=HP({spacing:e}),n=(...a)=>(a.length===0?[1]:a).map(d=>{const o=t(d);return typeof o=="number"?`${o}px`:o}).join(" ");return n.mui=!0,n}function iv(...e){const t=e.reduce((a,c)=>(c.filterProps.forEach(d=>{a[d]=c}),a),{}),n=a=>Object.keys(a).reduce((c,d)=>t[d]?zh(c,t[d](a)):c,{});return n.propTypes={},n.filterProps=e.reduce((a,c)=>a.concat(c.filterProps),[]),n}function ta(e){return typeof e!="number"?e:`${e}px solid`}function la(e,t){return oi({prop:e,themeKey:"borders",transform:t})}const NU=la("border",ta),FU=la("borderTop",ta),UU=la("borderRight",ta),$U=la("borderBottom",ta),jU=la("borderLeft",ta),VU=la("borderColor"),qU=la("borderTopColor"),WU=la("borderRightColor"),GU=la("borderBottomColor"),HU=la("borderLeftColor"),ZU=la("outline",ta),KU=la("outlineColor"),ov=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=xd(e.theme,"shape.borderRadius",4),n=a=>({borderRadius:bd(t,a)});return Gs(e,e.borderRadius,n)}return null};ov.propTypes={};ov.filterProps=["borderRadius"];iv(NU,FU,UU,$U,jU,VU,qU,WU,GU,HU,ov,ZU,KU);const av=e=>{if(e.gap!==void 0&&e.gap!==null){const t=xd(e.theme,"spacing",8),n=a=>({gap:bd(t,a)});return Gs(e,e.gap,n)}return null};av.propTypes={};av.filterProps=["gap"];const sv=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=xd(e.theme,"spacing",8),n=a=>({columnGap:bd(t,a)});return Gs(e,e.columnGap,n)}return null};sv.propTypes={};sv.filterProps=["columnGap"];const lv=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=xd(e.theme,"spacing",8),n=a=>({rowGap:bd(t,a)});return Gs(e,e.rowGap,n)}return null};lv.propTypes={};lv.filterProps=["rowGap"];const XU=oi({prop:"gridColumn"}),YU=oi({prop:"gridRow"}),JU=oi({prop:"gridAutoFlow"}),QU=oi({prop:"gridAutoColumns"}),e$=oi({prop:"gridAutoRows"}),t$=oi({prop:"gridTemplateColumns"}),r$=oi({prop:"gridTemplateRows"}),n$=oi({prop:"gridTemplateAreas"}),i$=oi({prop:"gridArea"});iv(av,sv,lv,XU,YU,JU,QU,e$,t$,r$,n$,i$);function Sp(e,t){return t==="grey"?t:e}const o$=oi({prop:"color",themeKey:"palette",transform:Sp}),a$=oi({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Sp}),s$=oi({prop:"backgroundColor",themeKey:"palette",transform:Sp});iv(o$,a$,s$);function Uo(e){return e<=1&&e!==0?`${e*100}%`:e}const l$=oi({prop:"width",transform:Uo}),Sb=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=n=>{var a,c;const d=((a=e.theme)==null||(a=a.breakpoints)==null||(a=a.values)==null?void 0:a[n])||xb[n];return d?((c=e.theme)==null||(c=c.breakpoints)==null?void 0:c.unit)!=="px"?{maxWidth:`${d}${e.theme.breakpoints.unit}`}:{maxWidth:d}:{maxWidth:Uo(n)}};return Gs(e,e.maxWidth,t)}return null};Sb.filterProps=["maxWidth"];const u$=oi({prop:"minWidth",transform:Uo}),c$=oi({prop:"height",transform:Uo}),p$=oi({prop:"maxHeight",transform:Uo}),f$=oi({prop:"minHeight",transform:Uo});oi({prop:"size",cssProperty:"width",transform:Uo});oi({prop:"size",cssProperty:"height",transform:Uo});const h$=oi({prop:"boxSizing"});iv(l$,Sb,u$,c$,p$,f$,h$);const d$={border:{themeKey:"borders",transform:ta},borderTop:{themeKey:"borders",transform:ta},borderRight:{themeKey:"borders",transform:ta},borderBottom:{themeKey:"borders",transform:ta},borderLeft:{themeKey:"borders",transform:ta},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:ta},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:ov},color:{themeKey:"palette",transform:Sp},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Sp},backgroundColor:{themeKey:"palette",transform:Sp},p:{style:Zn},pt:{style:Zn},pr:{style:Zn},pb:{style:Zn},pl:{style:Zn},px:{style:Zn},py:{style:Zn},padding:{style:Zn},paddingTop:{style:Zn},paddingRight:{style:Zn},paddingBottom:{style:Zn},paddingLeft:{style:Zn},paddingX:{style:Zn},paddingY:{style:Zn},paddingInline:{style:Zn},paddingInlineStart:{style:Zn},paddingInlineEnd:{style:Zn},paddingBlock:{style:Zn},paddingBlockStart:{style:Zn},paddingBlockEnd:{style:Zn},m:{style:Hn},mt:{style:Hn},mr:{style:Hn},mb:{style:Hn},ml:{style:Hn},mx:{style:Hn},my:{style:Hn},margin:{style:Hn},marginTop:{style:Hn},marginRight:{style:Hn},marginBottom:{style:Hn},marginLeft:{style:Hn},marginX:{style:Hn},marginY:{style:Hn},marginInline:{style:Hn},marginInlineStart:{style:Hn},marginInlineEnd:{style:Hn},marginBlock:{style:Hn},marginBlockStart:{style:Hn},marginBlockEnd:{style:Hn},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:av},rowGap:{style:lv},columnGap:{style:sv},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Uo},maxWidth:{style:Sb},minWidth:{transform:Uo},height:{transform:Uo},maxHeight:{transform:Uo},minHeight:{transform:Uo},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},uv=d$;function m$(...e){const t=e.reduce((a,c)=>a.concat(Object.keys(c)),[]),n=new Set(t);return e.every(a=>n.size===Object.keys(a).length)}function y$(e,t){return typeof e=="function"?e(t):e}function g$(){function e(n,a,c,d){const o={[n]:a,theme:c},v=d[n];if(!v)return{[n]:a};const{cssProperty:x=n,themeKey:E,transform:T,style:P}=v;if(a==null)return null;if(E==="typography"&&a==="inherit")return{[n]:a};const I=nv(c,E)||{};return P?P(o):Gs(o,a,$=>{let G=ug(I,T,$);return $===G&&typeof $=="string"&&(G=ug(I,T,`${n}${$==="default"?"":er($)}`,$)),x===!1?G:{[x]:G}})}function t(n){var a;const{sx:c,theme:d={}}=n||{};if(!c)return null;const o=(a=d.unstable_sxConfig)!=null?a:uv;function v(x){let E=x;if(typeof x=="function")E=x(d);else if(typeof x!="object")return x;if(!E)return null;const T=PU(d.breakpoints),P=Object.keys(T);let I=T;return Object.keys(E).forEach(q=>{const $=y$(E[q],d);if($!=null)if(typeof $=="object")if(o[q])I=zh(I,e(q,$,d,o));else{const G=Gs({theme:d},$,D=>({[q]:D}));m$(G,$)?I[q]=t({sx:$,theme:d}):I=zh(I,G)}else I=zh(I,e(q,$,d,o))}),AU(P,I)}return Array.isArray(c)?c.map(v):v(c)}return t}const KP=g$();KP.filterProps=["sx"];const cv=KP;function v$(e,t){const n=this;return n.vars&&typeof n.getColorSchemeSelector=="function"?{[n.getColorSchemeSelector(e).replace(/(\[[^\]]+\])/,"*:where($1)")]:t}:n.palette.mode===e?t:{}}const _$=["breakpoints","palette","spacing","shape"];function Eb(e={},...t){const{breakpoints:n={},palette:a={},spacing:c,shape:d={}}=e,o=Vt(e,_$),v=kU(n),x=BU(c);let E=ko({breakpoints:v,direction:"ltr",components:{},palette:he({mode:"light"},a),spacing:x,shape:he({},IU,d)},o);return E.applyStyles=v$,E=t.reduce((T,P)=>ko(T,P),E),E.unstable_sxConfig=he({},uv,o==null?void 0:o.unstable_sxConfig),E.unstable_sx=function(P){return cv({sx:P,theme:this})},E}function x$(e){return Object.keys(e).length===0}function b$(e=null){const t=Q.useContext(yb);return!t||x$(t)?e:t}const w$=Eb();function pv(e=w$){return b$(e)}function S$({styles:e,themeId:t,defaultTheme:n={}}){const a=pv(n),c=typeof e=="function"?e(t&&a[t]||a):e;return Xe.jsx(iU,{styles:c})}const E$=["sx"],C$=e=>{var t,n;const a={systemProps:{},otherProps:{}},c=(t=e==null||(n=e.theme)==null?void 0:n.unstable_sxConfig)!=null?t:uv;return Object.keys(e).forEach(d=>{c[d]?a.systemProps[d]=e[d]:a.otherProps[d]=e[d]}),a};function XP(e){const{sx:t}=e,n=Vt(e,E$),{systemProps:a,otherProps:c}=C$(n);let d;return Array.isArray(t)?d=[a,...t]:typeof t=="function"?d=(...o)=>{const v=t(...o);return Ns(v)?he({},a,v):a}:d=he({},a,t),he({},c,{sx:d})}function YP(e){var t,n,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var c=e.length;for(t=0;t<c;t++)e[t]&&(n=YP(e[t]))&&(a&&(a+=" "),a+=n)}else for(n in e)e[n]&&(a&&(a+=" "),a+=n);return a}function Wt(){for(var e,t,n=0,a="",c=arguments.length;n<c;n++)(e=arguments[n])&&(t=YP(e))&&(a&&(a+=" "),a+=t);return a}const k$=["className","component"];function T$(e={}){const{themeId:t,defaultTheme:n,defaultClassName:a="MuiBox-root",generateClassName:c}=e,d=$P("div",{shouldForwardProp:v=>v!=="theme"&&v!=="sx"&&v!=="as"})(cv);return Q.forwardRef(function(x,E){const T=pv(n),P=XP(x),{className:I,component:q="div"}=P,$=Vt(P,k$);return Xe.jsx(d,he({as:q,ref:E,className:Wt(I,c?c(a):a),theme:t&&T[t]||T},$))})}const I$=["variant"];function tC(e){return e.length===0}function JP(e){const{variant:t}=e,n=Vt(e,I$);let a=t||"";return Object.keys(n).sort().forEach(c=>{c==="color"?a+=tC(a)?e[c]:er(e[c]):a+=`${tC(a)?c:er(c)}${er(e[c].toString())}`}),a}const P$=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function A$(e){return Object.keys(e).length===0}function M$(e){return typeof e=="string"&&e.charCodeAt(0)>96}const R$=(e,t)=>t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null,cg=e=>{let t=0;const n={};return e&&e.forEach(a=>{let c="";typeof a.props=="function"?(c=`callback${t}`,t+=1):c=JP(a.props),n[c]=a.style}),n},L$=(e,t)=>{let n=[];return t&&t.components&&t.components[e]&&t.components[e].variants&&(n=t.components[e].variants),cg(n)},pg=(e,t,n)=>{const{ownerState:a={}}=e,c=[];let d=0;return n&&n.forEach(o=>{let v=!0;if(typeof o.props=="function"){const x=he({},e,a);v=o.props(x)}else Object.keys(o.props).forEach(x=>{a[x]!==o.props[x]&&e[x]!==o.props[x]&&(v=!1)});v&&(typeof o.props=="function"?c.push(t[`callback${d}`]):c.push(t[JP(o.props)])),typeof o.props=="function"&&(d+=1)}),c},z$=(e,t,n,a)=>{var c;const d=n==null||(c=n.components)==null||(c=c[a])==null?void 0:c.variants;return pg(e,t,d)};function Dh(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const D$=Eb(),O$=e=>e&&e.charAt(0).toLowerCase()+e.slice(1);function Ey({defaultTheme:e,theme:t,themeId:n}){return A$(t)?e:t[n]||t}function B$(e){return e?(t,n)=>n[e]:null}const rC=({styledArg:e,props:t,defaultTheme:n,themeId:a})=>{const c=e(he({},t,{theme:Ey(he({},t,{defaultTheme:n,themeId:a}))}));let d;if(c&&c.variants&&(d=c.variants,delete c.variants),d){const o=pg(t,cg(d),d);return[c,...o]}return c};function N$(e={}){const{themeId:t,defaultTheme:n=D$,rootShouldForwardProp:a=Dh,slotShouldForwardProp:c=Dh}=e,d=o=>cv(he({},o,{theme:Ey(he({},o,{defaultTheme:n,themeId:t}))}));return d.__mui_systemSx=!0,(o,v={})=>{oU(o,z=>z.filter(re=>!(re!=null&&re.__mui_systemSx)));const{name:x,slot:E,skipVariantsResolver:T,skipSx:P,overridesResolver:I=B$(O$(E))}=v,q=Vt(v,P$),$=T!==void 0?T:E&&E!=="Root"&&E!=="root"||!1,G=P||!1;let D,F=Dh;E==="Root"||E==="root"?F=a:E?F=c:M$(o)&&(F=void 0);const V=$P(o,he({shouldForwardProp:F,label:D},q)),B=(z,...re)=>{const ie=re?re.map(ve=>{if(typeof ve=="function"&&ve.__emotion_real!==ve)return we=>rC({styledArg:ve,props:we,defaultTheme:n,themeId:t});if(Ns(ve)){let we=ve,ee;return ve&&ve.variants&&(ee=ve.variants,delete we.variants,we=pe=>{let Oe=ve;return pg(pe,cg(ee),ee).forEach(Ee=>{Oe=ko(Oe,Ee)}),Oe}),we}return ve}):[];let ce=z;if(Ns(z)){let ve;z&&z.variants&&(ve=z.variants,delete ce.variants,ce=we=>{let ee=z;return pg(we,cg(ve),ve).forEach(Oe=>{ee=ko(ee,Oe)}),ee})}else typeof z=="function"&&z.__emotion_real!==z&&(ce=ve=>rC({styledArg:z,props:ve,defaultTheme:n,themeId:t}));x&&I&&ie.push(ve=>{const we=Ey(he({},ve,{defaultTheme:n,themeId:t})),ee=R$(x,we);if(ee){const pe={};return Object.entries(ee).forEach(([Oe,Ue])=>{pe[Oe]=typeof Ue=="function"?Ue(he({},ve,{theme:we})):Ue}),I(ve,pe)}return null}),x&&!$&&ie.push(ve=>{const we=Ey(he({},ve,{defaultTheme:n,themeId:t}));return z$(ve,L$(x,we),we,x)}),G||ie.push(d);const xe=ie.length-re.length;if(Array.isArray(z)&&xe>0){const ve=new Array(xe).fill("");ce=[...z,...ve],ce.raw=[...z.raw,...ve]}const Te=V(ce,...ie);return o.muiName&&(Te.muiName=o.muiName),Te};return V.withConfig&&(B.withConfig=V.withConfig),B}}function F$(e){const{theme:t,name:n,props:a}=e;return!t||!t.components||!t.components[n]||!t.components[n].defaultProps?a:_b(t.components[n].defaultProps,a)}function U$({props:e,name:t,defaultTheme:n,themeId:a}){let c=pv(n);return a&&(c=c[a]||c),F$({theme:c,name:t,props:e})}function Cb(e,t=0,n=1){return SU(e,t,n)}function $$(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&n[0].length===1&&(n=n.map(a=>a+a)),n?`rgb${n.length===4?"a":""}(${n.map((a,c)=>c<3?parseInt(a,16):Math.round(parseInt(a,16)/255*1e3)/1e3).join(", ")})`:""}function Uu(e){if(e.type)return e;if(e.charAt(0)==="#")return Uu($$(e));const t=e.indexOf("("),n=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(n)===-1)throw new Error(Bl(9,e));let a=e.substring(t+1,e.length-1),c;if(n==="color"){if(a=a.split(" "),c=a.shift(),a.length===4&&a[3].charAt(0)==="/"&&(a[3]=a[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(c)===-1)throw new Error(Bl(10,c))}else a=a.split(",");return a=a.map(d=>parseFloat(d)),{type:n,values:a,colorSpace:c}}function fv(e){const{type:t,colorSpace:n}=e;let{values:a}=e;return t.indexOf("rgb")!==-1?a=a.map((c,d)=>d<3?parseInt(c,10):c):t.indexOf("hsl")!==-1&&(a[1]=`${a[1]}%`,a[2]=`${a[2]}%`),t.indexOf("color")!==-1?a=`${n} ${a.join(" ")}`:a=`${a.join(", ")}`,`${t}(${a})`}function j$(e){e=Uu(e);const{values:t}=e,n=t[0],a=t[1]/100,c=t[2]/100,d=a*Math.min(c,1-c),o=(E,T=(E+n/30)%12)=>c-d*Math.max(Math.min(T-3,9-T,1),-1);let v="rgb";const x=[Math.round(o(0)*255),Math.round(o(8)*255),Math.round(o(4)*255)];return e.type==="hsla"&&(v+="a",x.push(t[3])),fv({type:v,values:x})}function nC(e){e=Uu(e);let t=e.type==="hsl"||e.type==="hsla"?Uu(j$(e)).values:e.values;return t=t.map(n=>(e.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function V$(e,t){const n=nC(e),a=nC(t);return(Math.max(n,a)+.05)/(Math.min(n,a)+.05)}function fi(e,t){return e=Uu(e),t=Cb(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,fv(e)}function q$(e,t){if(e=Uu(e),t=Cb(t),e.type.indexOf("hsl")!==-1)e.values[2]*=1-t;else if(e.type.indexOf("rgb")!==-1||e.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)e.values[n]*=1-t;return fv(e)}function W$(e,t){if(e=Uu(e),t=Cb(t),e.type.indexOf("hsl")!==-1)e.values[2]+=(100-e.values[2])*t;else if(e.type.indexOf("rgb")!==-1)for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(e.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return fv(e)}function G$(e,t){return he({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}const H$=["mode","contrastThreshold","tonalOffset"],iC={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:rd.white,default:rd.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},k_={text:{primary:rd.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:rd.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function oC(e,t,n,a){const c=a.light||a,d=a.dark||a*1.5;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:t==="light"?e.light=W$(e.main,c):t==="dark"&&(e.dark=q$(e.main,d)))}function Z$(e="light"){return e==="dark"?{main:Wc[200],light:Wc[50],dark:Wc[400]}:{main:Wc[700],light:Wc[400],dark:Wc[800]}}function K$(e="light"){return e==="dark"?{main:qc[200],light:qc[50],dark:qc[400]}:{main:qc[500],light:qc[300],dark:qc[700]}}function X$(e="light"){return e==="dark"?{main:Vc[500],light:Vc[300],dark:Vc[700]}:{main:Vc[700],light:Vc[400],dark:Vc[800]}}function Y$(e="light"){return e==="dark"?{main:Gc[400],light:Gc[300],dark:Gc[700]}:{main:Gc[700],light:Gc[500],dark:Gc[900]}}function J$(e="light"){return e==="dark"?{main:Hc[400],light:Hc[300],dark:Hc[700]}:{main:Hc[800],light:Hc[500],dark:Hc[900]}}function Q$(e="light"){return e==="dark"?{main:ah[400],light:ah[300],dark:ah[700]}:{main:"#ed6c02",light:ah[500],dark:ah[900]}}function ej(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:a=.2}=e,c=Vt(e,H$),d=e.primary||Z$(t),o=e.secondary||K$(t),v=e.error||X$(t),x=e.info||Y$(t),E=e.success||J$(t),T=e.warning||Q$(t);function P(G){return V$(G,k_.text.primary)>=n?k_.text.primary:iC.text.primary}const I=({color:G,name:D,mainShade:F=500,lightShade:V=300,darkShade:B=700})=>{if(G=he({},G),!G.main&&G[F]&&(G.main=G[F]),!G.hasOwnProperty("main"))throw new Error(Bl(11,D?` (${D})`:"",F));if(typeof G.main!="string")throw new Error(Bl(12,D?` (${D})`:"",JSON.stringify(G.main)));return oC(G,"light",V,a),oC(G,"dark",B,a),G.contrastText||(G.contrastText=P(G.main)),G},q={dark:k_,light:iC};return ko(he({common:he({},rd),mode:t,primary:I({color:d,name:"primary"}),secondary:I({color:o,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:I({color:v,name:"error"}),warning:I({color:T,name:"warning"}),info:I({color:x,name:"info"}),success:I({color:E,name:"success"}),grey:Y6,contrastThreshold:n,getContrastText:P,augmentColor:I,tonalOffset:a},q[t]),c)}const tj=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function rj(e){return Math.round(e*1e5)/1e5}const aC={textTransform:"uppercase"},sC='"Roboto", "Helvetica", "Arial", sans-serif';function nj(e,t){const n=typeof t=="function"?t(e):t,{fontFamily:a=sC,fontSize:c=14,fontWeightLight:d=300,fontWeightRegular:o=400,fontWeightMedium:v=500,fontWeightBold:x=700,htmlFontSize:E=16,allVariants:T,pxToRem:P}=n,I=Vt(n,tj),q=c/14,$=P||(F=>`${F/E*q}rem`),G=(F,V,B,z,re)=>he({fontFamily:a,fontWeight:F,fontSize:$(V),lineHeight:B},a===sC?{letterSpacing:`${rj(z/V)}em`}:{},re,T),D={h1:G(d,96,1.167,-1.5),h2:G(d,60,1.2,-.5),h3:G(o,48,1.167,0),h4:G(o,34,1.235,.25),h5:G(o,24,1.334,0),h6:G(v,20,1.6,.15),subtitle1:G(o,16,1.75,.15),subtitle2:G(v,14,1.57,.1),body1:G(o,16,1.5,.15),body2:G(o,14,1.43,.15),button:G(v,14,1.75,.4,aC),caption:G(o,12,1.66,.4),overline:G(o,12,2.66,1,aC),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return ko(he({htmlFontSize:E,pxToRem:$,fontFamily:a,fontSize:c,fontWeightLight:d,fontWeightRegular:o,fontWeightMedium:v,fontWeightBold:x},D),I,{clone:!1})}const ij=.2,oj=.14,aj=.12;function Dn(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${ij})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${oj})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${aj})`].join(",")}const sj=["none",Dn(0,2,1,-1,0,1,1,0,0,1,3,0),Dn(0,3,1,-2,0,2,2,0,0,1,5,0),Dn(0,3,3,-2,0,3,4,0,0,1,8,0),Dn(0,2,4,-1,0,4,5,0,0,1,10,0),Dn(0,3,5,-1,0,5,8,0,0,1,14,0),Dn(0,3,5,-1,0,6,10,0,0,1,18,0),Dn(0,4,5,-2,0,7,10,1,0,2,16,1),Dn(0,5,5,-3,0,8,10,1,0,3,14,2),Dn(0,5,6,-3,0,9,12,1,0,3,16,2),Dn(0,6,6,-3,0,10,14,1,0,4,18,3),Dn(0,6,7,-4,0,11,15,1,0,4,20,3),Dn(0,7,8,-4,0,12,17,2,0,5,22,4),Dn(0,7,8,-4,0,13,19,2,0,5,24,4),Dn(0,7,9,-4,0,14,21,2,0,5,26,4),Dn(0,8,9,-5,0,15,22,2,0,6,28,5),Dn(0,8,10,-5,0,16,24,2,0,6,30,5),Dn(0,8,11,-5,0,17,26,2,0,6,32,5),Dn(0,9,11,-5,0,18,28,2,0,7,34,6),Dn(0,9,12,-6,0,19,29,2,0,7,36,6),Dn(0,10,13,-6,0,20,31,3,0,8,38,7),Dn(0,10,13,-6,0,21,33,3,0,8,40,7),Dn(0,10,14,-6,0,22,35,3,0,8,42,7),Dn(0,11,14,-7,0,23,36,3,0,9,44,8),Dn(0,11,15,-7,0,24,38,3,0,9,46,8)],lj=sj,uj=["duration","easing","delay"],cj={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},pj={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function lC(e){return`${Math.round(e)}ms`}function fj(e){if(!e)return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function hj(e){const t=he({},cj,e.easing),n=he({},pj,e.duration);return he({getAutoHeightDuration:fj,create:(c=["all"],d={})=>{const{duration:o=n.standard,easing:v=t.easeInOut,delay:x=0}=d;return Vt(d,uj),(Array.isArray(c)?c:[c]).map(E=>`${E} ${typeof o=="string"?o:lC(o)} ${v} ${typeof x=="string"?x:lC(x)}`).join(",")}},e,{easing:t,duration:n})}const dj={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},mj=dj,yj=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function QP(e={},...t){const{mixins:n={},palette:a={},transitions:c={},typography:d={}}=e,o=Vt(e,yj);if(e.vars)throw new Error(Bl(18));const v=ej(a),x=Eb(e);let E=ko(x,{mixins:G$(x.breakpoints,n),palette:v,shadows:lj.slice(),typography:nj(v,d),transitions:hj(c),zIndex:he({},mj)});return E=ko(E,o),E=t.reduce((T,P)=>ko(T,P),E),E.unstable_sxConfig=he({},uv,o==null?void 0:o.unstable_sxConfig),E.unstable_sx=function(P){return cv({sx:P,theme:this})},E}const gj=QP(),hv=gj;function Gp(){const e=pv(hv);return e[gd]||e}function Vr({props:e,name:t}){return U$({props:e,name:t,defaultTheme:hv,themeId:gd})}const Go=e=>Dh(e)&&e!=="classes",vj=Dh,_j=N$({themeId:gd,defaultTheme:hv,rootShouldForwardProp:Go}),Dt=_j,xj=e=>{let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,(t/100).toFixed(2)},uC=xj;function bj(e){return Nr("MuiSvgIcon",e)}Ir("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const wj=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],Sj=e=>{const{color:t,fontSize:n,classes:a}=e,c={root:["root",t!=="inherit"&&`color${er(t)}`,`fontSize${er(n)}`]};return jr(c,bj,a)},Ej=Dt("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="inherit"&&t[`color${er(n.color)}`],t[`fontSize${er(n.fontSize)}`]]}})(({theme:e,ownerState:t})=>{var n,a,c,d,o,v,x,E,T,P,I,q,$;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:t.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(n=e.transitions)==null||(a=n.create)==null?void 0:a.call(n,"fill",{duration:(c=e.transitions)==null||(c=c.duration)==null?void 0:c.shorter}),fontSize:{inherit:"inherit",small:((d=e.typography)==null||(o=d.pxToRem)==null?void 0:o.call(d,20))||"1.25rem",medium:((v=e.typography)==null||(x=v.pxToRem)==null?void 0:x.call(v,24))||"1.5rem",large:((E=e.typography)==null||(T=E.pxToRem)==null?void 0:T.call(E,35))||"2.1875rem"}[t.fontSize],color:(P=(I=(e.vars||e).palette)==null||(I=I[t.color])==null?void 0:I.main)!=null?P:{action:(q=(e.vars||e).palette)==null||(q=q.action)==null?void 0:q.active,disabled:($=(e.vars||e).palette)==null||($=$.action)==null?void 0:$.disabled,inherit:void 0}[t.color]}}),eA=Q.forwardRef(function(t,n){const a=Vr({props:t,name:"MuiSvgIcon"}),{children:c,className:d,color:o="inherit",component:v="svg",fontSize:x="medium",htmlColor:E,inheritViewBox:T=!1,titleAccess:P,viewBox:I="0 0 24 24"}=a,q=Vt(a,wj),$=Q.isValidElement(c)&&c.type==="svg",G=he({},a,{color:o,component:v,fontSize:x,instanceFontSize:t.fontSize,inheritViewBox:T,viewBox:I,hasSvgAsChild:$}),D={};T||(D.viewBox=I);const F=Sj(G);return Xe.jsxs(Ej,he({as:v,className:Wt(F.root,d),focusable:"false",color:E,"aria-hidden":P?void 0:!0,role:P?"img":void 0,ref:n},D,q,$&&c.props,{ownerState:G,children:[$?c.props.children:c,P?Xe.jsx("title",{children:P}):null]}))});eA.muiName="SvgIcon";const cC=eA;function kb(e,t){function n(a,c){return Xe.jsx(cC,he({"data-testid":`${t}Icon`,ref:c},a,{children:e}))}return n.muiName=cC.muiName,Q.memo(Q.forwardRef(n))}var dn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tb=Symbol.for("react.element"),Ib=Symbol.for("react.portal"),dv=Symbol.for("react.fragment"),mv=Symbol.for("react.strict_mode"),yv=Symbol.for("react.profiler"),gv=Symbol.for("react.provider"),vv=Symbol.for("react.context"),Cj=Symbol.for("react.server_context"),_v=Symbol.for("react.forward_ref"),xv=Symbol.for("react.suspense"),bv=Symbol.for("react.suspense_list"),wv=Symbol.for("react.memo"),Sv=Symbol.for("react.lazy"),kj=Symbol.for("react.offscreen"),tA;tA=Symbol.for("react.module.reference");function ua(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Tb:switch(e=e.type,e){case dv:case yv:case mv:case xv:case bv:return e;default:switch(e=e&&e.$$typeof,e){case Cj:case vv:case _v:case Sv:case wv:case gv:return e;default:return t}}case Ib:return t}}}dn.ContextConsumer=vv;dn.ContextProvider=gv;dn.Element=Tb;dn.ForwardRef=_v;dn.Fragment=dv;dn.Lazy=Sv;dn.Memo=wv;dn.Portal=Ib;dn.Profiler=yv;dn.StrictMode=mv;dn.Suspense=xv;dn.SuspenseList=bv;dn.isAsyncMode=function(){return!1};dn.isConcurrentMode=function(){return!1};dn.isContextConsumer=function(e){return ua(e)===vv};dn.isContextProvider=function(e){return ua(e)===gv};dn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Tb};dn.isForwardRef=function(e){return ua(e)===_v};dn.isFragment=function(e){return ua(e)===dv};dn.isLazy=function(e){return ua(e)===Sv};dn.isMemo=function(e){return ua(e)===wv};dn.isPortal=function(e){return ua(e)===Ib};dn.isProfiler=function(e){return ua(e)===yv};dn.isStrictMode=function(e){return ua(e)===mv};dn.isSuspense=function(e){return ua(e)===xv};dn.isSuspenseList=function(e){return ua(e)===bv};dn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===dv||e===yv||e===mv||e===xv||e===bv||e===kj||typeof e=="object"&&e!==null&&(e.$$typeof===Sv||e.$$typeof===wv||e.$$typeof===gv||e.$$typeof===vv||e.$$typeof===_v||e.$$typeof===tA||e.getModuleId!==void 0)};dn.typeOf=ua;function Ux(e,t){return Ux=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,c){return a.__proto__=c,a},Ux(e,t)}function rA(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Ux(e,t)}const pC={disabled:!1},fg=Ce.createContext(null);var Tj=function(t){return t.scrollTop},bh="unmounted",Eu="exited",Cu="entering",Jc="entered",$x="exiting",Zs=function(e){rA(t,e);function t(a,c){var d;d=e.call(this,a,c)||this;var o=c,v=o&&!o.isMounting?a.enter:a.appear,x;return d.appearStatus=null,a.in?v?(x=Eu,d.appearStatus=Cu):x=Jc:a.unmountOnExit||a.mountOnEnter?x=bh:x=Eu,d.state={status:x},d.nextCallback=null,d}t.getDerivedStateFromProps=function(c,d){var o=c.in;return o&&d.status===bh?{status:Eu}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(c){var d=null;if(c!==this.props){var o=this.state.status;this.props.in?o!==Cu&&o!==Jc&&(d=Cu):(o===Cu||o===Jc)&&(d=$x)}this.updateStatus(!1,d)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var c=this.props.timeout,d,o,v;return d=o=v=c,c!=null&&typeof c!="number"&&(d=c.exit,o=c.enter,v=c.appear!==void 0?c.appear:o),{exit:d,enter:o,appear:v}},n.updateStatus=function(c,d){if(c===void 0&&(c=!1),d!==null)if(this.cancelNextCallback(),d===Cu){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:gh.findDOMNode(this);o&&Tj(o)}this.performEnter(c)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Eu&&this.setState({status:bh})},n.performEnter=function(c){var d=this,o=this.props.enter,v=this.context?this.context.isMounting:c,x=this.props.nodeRef?[v]:[gh.findDOMNode(this),v],E=x[0],T=x[1],P=this.getTimeouts(),I=v?P.appear:P.enter;if(!c&&!o||pC.disabled){this.safeSetState({status:Jc},function(){d.props.onEntered(E)});return}this.props.onEnter(E,T),this.safeSetState({status:Cu},function(){d.props.onEntering(E,T),d.onTransitionEnd(I,function(){d.safeSetState({status:Jc},function(){d.props.onEntered(E,T)})})})},n.performExit=function(){var c=this,d=this.props.exit,o=this.getTimeouts(),v=this.props.nodeRef?void 0:gh.findDOMNode(this);if(!d||pC.disabled){this.safeSetState({status:Eu},function(){c.props.onExited(v)});return}this.props.onExit(v),this.safeSetState({status:$x},function(){c.props.onExiting(v),c.onTransitionEnd(o.exit,function(){c.safeSetState({status:Eu},function(){c.props.onExited(v)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(c,d){d=this.setNextCallback(d),this.setState(c,d)},n.setNextCallback=function(c){var d=this,o=!0;return this.nextCallback=function(v){o&&(o=!1,d.nextCallback=null,c(v))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(c,d){this.setNextCallback(d);var o=this.props.nodeRef?this.props.nodeRef.current:gh.findDOMNode(this),v=c==null&&!this.props.addEndListener;if(!o||v){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var x=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],E=x[0],T=x[1];this.props.addEndListener(E,T)}c!=null&&setTimeout(this.nextCallback,c)},n.render=function(){var c=this.state.status;if(c===bh)return null;var d=this.props,o=d.children;d.in,d.mountOnEnter,d.unmountOnExit,d.appear,d.enter,d.exit,d.timeout,d.addEndListener,d.onEnter,d.onEntering,d.onEntered,d.onExit,d.onExiting,d.onExited,d.nodeRef;var v=Vt(d,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Ce.createElement(fg.Provider,{value:null},typeof o=="function"?o(c,v):Ce.cloneElement(Ce.Children.only(o),v))},t}(Ce.Component);Zs.contextType=fg;Zs.propTypes={};function Kc(){}Zs.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Kc,onEntering:Kc,onEntered:Kc,onExit:Kc,onExiting:Kc,onExited:Kc};Zs.UNMOUNTED=bh;Zs.EXITED=Eu;Zs.ENTERING=Cu;Zs.ENTERED=Jc;Zs.EXITING=$x;const nA=Zs;function Ij(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pb(e,t){var n=function(d){return t&&Q.isValidElement(d)?t(d):d},a=Object.create(null);return e&&Q.Children.map(e,function(c){return c}).forEach(function(c){a[c.key]=n(c)}),a}function Pj(e,t){e=e||{},t=t||{};function n(T){return T in t?t[T]:e[T]}var a=Object.create(null),c=[];for(var d in e)d in t?c.length&&(a[d]=c,c=[]):c.push(d);var o,v={};for(var x in t){if(a[x])for(o=0;o<a[x].length;o++){var E=a[x][o];v[a[x][o]]=n(E)}v[x]=n(x)}for(o=0;o<c.length;o++)v[c[o]]=n(c[o]);return v}function Ru(e,t,n){return n[t]!=null?n[t]:e.props[t]}function Aj(e,t){return Pb(e.children,function(n){return Q.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:Ru(n,"appear",e),enter:Ru(n,"enter",e),exit:Ru(n,"exit",e)})})}function Mj(e,t,n){var a=Pb(e.children),c=Pj(t,a);return Object.keys(c).forEach(function(d){var o=c[d];if(Q.isValidElement(o)){var v=d in t,x=d in a,E=t[d],T=Q.isValidElement(E)&&!E.props.in;x&&(!v||T)?c[d]=Q.cloneElement(o,{onExited:n.bind(null,o),in:!0,exit:Ru(o,"exit",e),enter:Ru(o,"enter",e)}):!x&&v&&!T?c[d]=Q.cloneElement(o,{in:!1}):x&&v&&Q.isValidElement(E)&&(c[d]=Q.cloneElement(o,{onExited:n.bind(null,o),in:E.props.in,exit:Ru(o,"exit",e),enter:Ru(o,"enter",e)}))}}),c}var Rj=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},Lj={component:"div",childFactory:function(t){return t}},Ab=function(e){rA(t,e);function t(a,c){var d;d=e.call(this,a,c)||this;var o=d.handleExited.bind(Ij(d));return d.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},d}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(c,d){var o=d.children,v=d.handleExited,x=d.firstRender;return{children:x?Aj(c,v):Mj(c,o,v),firstRender:!1}},n.handleExited=function(c,d){var o=Pb(this.props.children);c.key in o||(c.props.onExited&&c.props.onExited(d),this.mounted&&this.setState(function(v){var x=he({},v.children);return delete x[c.key],{children:x}}))},n.render=function(){var c=this.props,d=c.component,o=c.childFactory,v=Vt(c,["component","childFactory"]),x=this.state.contextValue,E=Rj(this.state.children).map(o);return delete v.appear,delete v.enter,delete v.exit,d===null?Ce.createElement(fg.Provider,{value:x},E):Ce.createElement(fg.Provider,{value:x},Ce.createElement(d,v,E))},t}(Ce.Component);Ab.propTypes={};Ab.defaultProps=Lj;const zj=Ab,iA=e=>e.scrollTop;function hg(e,t){var n,a;const{timeout:c,easing:d,style:o={}}=e;return{duration:(n=o.transitionDuration)!=null?n:typeof c=="number"?c:c[t.mode]||0,easing:(a=o.transitionTimingFunction)!=null?a:typeof d=="object"?d[t.mode]:d,delay:o.transitionDelay}}function Dj(e){return Nr("MuiPaper",e)}Ir("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const Oj=["className","component","elevation","square","variant"],Bj=e=>{const{square:t,elevation:n,variant:a,classes:c}=e,d={root:["root",a,!t&&"rounded",a==="elevation"&&`elevation${n}`]};return jr(d,Dj,c)},Nj=Dt("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!n.square&&t.rounded,n.variant==="elevation"&&t[`elevation${n.elevation}`]]}})(({theme:e,ownerState:t})=>{var n;return he({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow")},!t.square&&{borderRadius:e.shape.borderRadius},t.variant==="outlined"&&{border:`1px solid ${(e.vars||e).palette.divider}`},t.variant==="elevation"&&he({boxShadow:(e.vars||e).shadows[t.elevation]},!e.vars&&e.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${fi("#fff",uC(t.elevation))}, ${fi("#fff",uC(t.elevation))})`},e.vars&&{backgroundImage:(n=e.vars.overlays)==null?void 0:n[t.elevation]}))}),Fj=Q.forwardRef(function(t,n){const a=Vr({props:t,name:"MuiPaper"}),{className:c,component:d="div",elevation:o=1,square:v=!1,variant:x="elevation"}=a,E=Vt(a,Oj),T=he({},a,{component:d,elevation:o,square:v,variant:x}),P=Bj(T);return Xe.jsx(Nj,he({as:d,ownerState:T,className:Wt(P.root,c),ref:n},E))}),Mb=Fj;function zp(e){return typeof e=="string"}function Uj(e,t,n){return e===void 0||zp(e)?t:he({},t,{ownerState:he({},t.ownerState,n)})}function oA(e,t=[]){if(e===void 0)return{};const n={};return Object.keys(e).filter(a=>a.match(/^on[A-Z]/)&&typeof e[a]=="function"&&!t.includes(a)).forEach(a=>{n[a]=e[a]}),n}function $j(e,t,n){return typeof e=="function"?e(t,n):e}function fC(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(n=>!(n.match(/^on[A-Z]/)&&typeof e[n]=="function")).forEach(n=>{t[n]=e[n]}),t}function jj(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:a,externalForwardedProps:c,className:d}=e;if(!t){const q=Wt(n==null?void 0:n.className,d,c==null?void 0:c.className,a==null?void 0:a.className),$=he({},n==null?void 0:n.style,c==null?void 0:c.style,a==null?void 0:a.style),G=he({},n,c,a);return q.length>0&&(G.className=q),Object.keys($).length>0&&(G.style=$),{props:G,internalRef:void 0}}const o=oA(he({},c,a)),v=fC(a),x=fC(c),E=t(o),T=Wt(E==null?void 0:E.className,n==null?void 0:n.className,d,c==null?void 0:c.className,a==null?void 0:a.className),P=he({},E==null?void 0:E.style,n==null?void 0:n.style,c==null?void 0:c.style,a==null?void 0:a.style),I=he({},E,n,x,v);return T.length>0&&(I.className=T),Object.keys(P).length>0&&(I.style=P),{props:I,internalRef:E.ref}}const Vj=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function os(e){var t;const{elementType:n,externalSlotProps:a,ownerState:c,skipResolvingSlotProps:d=!1}=e,o=Vt(e,Vj),v=d?{}:$j(a,c),{props:x,internalRef:E}=jj(he({},o,{externalSlotProps:v})),T=Ui(E,v==null?void 0:v.ref,(t=e.additionalProps)==null?void 0:t.ref);return Uj(n,he({},x,{ref:T}),c)}function qj(e){const{className:t,classes:n,pulsate:a=!1,rippleX:c,rippleY:d,rippleSize:o,in:v,onExited:x,timeout:E}=e,[T,P]=Q.useState(!1),I=Wt(t,n.ripple,n.rippleVisible,a&&n.ripplePulsate),q={width:o,height:o,top:-(o/2)+d,left:-(o/2)+c},$=Wt(n.child,T&&n.childLeaving,a&&n.childPulsate);return!v&&!T&&P(!0),Q.useEffect(()=>{if(!v&&x!=null){const G=setTimeout(x,E);return()=>{clearTimeout(G)}}},[x,v,E]),Xe.jsx("span",{className:I,style:q,children:Xe.jsx("span",{className:$})})}const Wj=Ir("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),ea=Wj,Gj=["center","classes","className"];let Ev=e=>e,hC,dC,mC,yC;const jx=550,Hj=80,Zj=gb(hC||(hC=Ev`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),Kj=gb(dC||(dC=Ev`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),Xj=gb(mC||(mC=Ev`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),Yj=Dt("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),Jj=Dt(qj,{name:"MuiTouchRipple",slot:"Ripple"})(yC||(yC=Ev`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),ea.rippleVisible,Zj,jx,({theme:e})=>e.transitions.easing.easeInOut,ea.ripplePulsate,({theme:e})=>e.transitions.duration.shorter,ea.child,ea.childLeaving,Kj,jx,({theme:e})=>e.transitions.easing.easeInOut,ea.childPulsate,Xj,({theme:e})=>e.transitions.easing.easeInOut),Qj=Q.forwardRef(function(t,n){const a=Vr({props:t,name:"MuiTouchRipple"}),{center:c=!1,classes:d={},className:o}=a,v=Vt(a,Gj),[x,E]=Q.useState([]),T=Q.useRef(0),P=Q.useRef(null);Q.useEffect(()=>{P.current&&(P.current(),P.current=null)},[x]);const I=Q.useRef(!1),q=VP(),$=Q.useRef(null),G=Q.useRef(null),D=Q.useCallback(z=>{const{pulsate:re,rippleX:ie,rippleY:ce,rippleSize:xe,cb:Te}=z;E(ve=>[...ve,Xe.jsx(Jj,{classes:{ripple:Wt(d.ripple,ea.ripple),rippleVisible:Wt(d.rippleVisible,ea.rippleVisible),ripplePulsate:Wt(d.ripplePulsate,ea.ripplePulsate),child:Wt(d.child,ea.child),childLeaving:Wt(d.childLeaving,ea.childLeaving),childPulsate:Wt(d.childPulsate,ea.childPulsate)},timeout:jx,pulsate:re,rippleX:ie,rippleY:ce,rippleSize:xe},T.current)]),T.current+=1,P.current=Te},[d]),F=Q.useCallback((z={},re={},ie=()=>{})=>{const{pulsate:ce=!1,center:xe=c||re.pulsate,fakeElement:Te=!1}=re;if((z==null?void 0:z.type)==="mousedown"&&I.current){I.current=!1;return}(z==null?void 0:z.type)==="touchstart"&&(I.current=!0);const ve=Te?null:G.current,we=ve?ve.getBoundingClientRect():{width:0,height:0,left:0,top:0};let ee,pe,Oe;if(xe||z===void 0||z.clientX===0&&z.clientY===0||!z.clientX&&!z.touches)ee=Math.round(we.width/2),pe=Math.round(we.height/2);else{const{clientX:Ue,clientY:Ee}=z.touches&&z.touches.length>0?z.touches[0]:z;ee=Math.round(Ue-we.left),pe=Math.round(Ee-we.top)}if(xe)Oe=Math.sqrt((2*we.width**2+we.height**2)/3),Oe%2===0&&(Oe+=1);else{const Ue=Math.max(Math.abs((ve?ve.clientWidth:0)-ee),ee)*2+2,Ee=Math.max(Math.abs((ve?ve.clientHeight:0)-pe),pe)*2+2;Oe=Math.sqrt(Ue**2+Ee**2)}z!=null&&z.touches?$.current===null&&($.current=()=>{D({pulsate:ce,rippleX:ee,rippleY:pe,rippleSize:Oe,cb:ie})},q.start(Hj,()=>{$.current&&($.current(),$.current=null)})):D({pulsate:ce,rippleX:ee,rippleY:pe,rippleSize:Oe,cb:ie})},[c,D,q]),V=Q.useCallback(()=>{F({},{pulsate:!0})},[F]),B=Q.useCallback((z,re)=>{if(q.clear(),(z==null?void 0:z.type)==="touchend"&&$.current){$.current(),$.current=null,q.start(0,()=>{B(z,re)});return}$.current=null,E(ie=>ie.length>0?ie.slice(1):ie),P.current=re},[q]);return Q.useImperativeHandle(n,()=>({pulsate:V,start:F,stop:B}),[V,F,B]),Xe.jsx(Yj,he({className:Wt(ea.root,d.root,o),ref:G},v,{children:Xe.jsx(zj,{component:null,exit:!0,children:x})}))}),eV=Qj;function tV(e){return Nr("MuiButtonBase",e)}const rV=Ir("MuiButtonBase",["root","disabled","focusVisible"]),nV=rV,iV=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],oV=e=>{const{disabled:t,focusVisible:n,focusVisibleClassName:a,classes:c}=e,o=jr({root:["root",t&&"disabled",n&&"focusVisible"]},tV,c);return n&&a&&(o.root+=` ${a}`),o},aV=Dt("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${nV.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),sV=Q.forwardRef(function(t,n){const a=Vr({props:t,name:"MuiButtonBase"}),{action:c,centerRipple:d=!1,children:o,className:v,component:x="button",disabled:E=!1,disableRipple:T=!1,disableTouchRipple:P=!1,focusRipple:I=!1,LinkComponent:q="a",onBlur:$,onClick:G,onContextMenu:D,onDragLeave:F,onFocus:V,onFocusVisible:B,onKeyDown:z,onKeyUp:re,onMouseDown:ie,onMouseLeave:ce,onMouseUp:xe,onTouchEnd:Te,onTouchMove:ve,onTouchStart:we,tabIndex:ee=0,TouchRippleProps:pe,touchRippleRef:Oe,type:Ue}=a,Ee=Vt(a,iV),ke=Q.useRef(null),je=Q.useRef(null),Ze=Ui(je,Oe),{isFocusVisibleRef:wt,onFocus:Pe,onBlur:Ge,ref:lt}=vU(),[Re,qe]=Q.useState(!1);E&&Re&&qe(!1),Q.useImperativeHandle(c,()=>({focusVisible:()=>{qe(!0),ke.current.focus()}}),[]);const[Xt,Pt]=Q.useState(!1);Q.useEffect(()=>{Pt(!0)},[]);const Bt=Xt&&!T&&!E;Q.useEffect(()=>{Re&&I&&!T&&Xt&&je.current.pulsate()},[T,I,Re,Xt]);function Ct(Nt,jn,Bn=P){return $s($i=>(jn&&jn($i),!Bn&&je.current&&je.current[Nt]($i),!0))}const ir=Ct("start",ie),Kt=Ct("stop",D),Jt=Ct("stop",F),st=Ct("stop",xe),Ot=Ct("stop",Nt=>{Re&&Nt.preventDefault(),ce&&ce(Nt)}),tr=Ct("start",we),Lr=Ct("stop",Te),Fr=Ct("stop",ve),rr=Ct("stop",Nt=>{Ge(Nt),wt.current===!1&&qe(!1),$&&$(Nt)},!1),qr=$s(Nt=>{ke.current||(ke.current=Nt.currentTarget),Pe(Nt),wt.current===!0&&(qe(!0),B&&B(Nt)),V&&V(Nt)}),zr=()=>{const Nt=ke.current;return x&&x!=="button"&&!(Nt.tagName==="A"&&Nt.href)},Cr=Q.useRef(!1),an=$s(Nt=>{I&&!Cr.current&&Re&&je.current&&Nt.key===" "&&(Cr.current=!0,je.current.stop(Nt,()=>{je.current.start(Nt)})),Nt.target===Nt.currentTarget&&zr()&&Nt.key===" "&&Nt.preventDefault(),z&&z(Nt),Nt.target===Nt.currentTarget&&zr()&&Nt.key==="Enter"&&!E&&(Nt.preventDefault(),G&&G(Nt))}),Rr=$s(Nt=>{I&&Nt.key===" "&&je.current&&Re&&!Nt.defaultPrevented&&(Cr.current=!1,je.current.stop(Nt,()=>{je.current.pulsate(Nt)})),re&&re(Nt),G&&Nt.target===Nt.currentTarget&&zr()&&Nt.key===" "&&!Nt.defaultPrevented&&G(Nt)});let ur=x;ur==="button"&&(Ee.href||Ee.to)&&(ur=q);const Yr={};ur==="button"?(Yr.type=Ue===void 0?"button":Ue,Yr.disabled=E):(!Ee.href&&!Ee.to&&(Yr.role="button"),E&&(Yr["aria-disabled"]=E));const Sn=Ui(n,lt,ke),ai=he({},a,{centerRipple:d,component:x,disabled:E,disableRipple:T,disableTouchRipple:P,focusRipple:I,tabIndex:ee,focusVisible:Re}),dr=oV(ai);return Xe.jsxs(aV,he({as:ur,className:Wt(dr.root,v),ownerState:ai,onBlur:rr,onClick:G,onContextMenu:Kt,onFocus:qr,onKeyDown:an,onKeyUp:Rr,onMouseDown:ir,onMouseLeave:Ot,onMouseUp:st,onDragLeave:Jt,onTouchEnd:Lr,onTouchMove:Fr,onTouchStart:tr,ref:Sn,tabIndex:E?-1:ee,type:Ue},Yr,Ee,{children:[o,Bt?Xe.jsx(eV,he({ref:Ze,center:d},pe)):null]}))}),Wu=sV;function lV(e){return Nr("MuiIconButton",e)}const uV=Ir("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),cV=uV,pV=["edge","children","className","color","disabled","disableFocusRipple","size"],fV=e=>{const{classes:t,disabled:n,color:a,edge:c,size:d}=e,o={root:["root",n&&"disabled",a!=="default"&&`color${er(a)}`,c&&`edge${er(c)}`,`size${er(d)}`]};return jr(o,lV,t)},hV=Dt(Wu,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="default"&&t[`color${er(n.color)}`],n.edge&&t[`edge${er(n.edge)}`],t[`size${er(n.size)}`]]}})(({theme:e,ownerState:t})=>he({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest})},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:fi(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.edge==="start"&&{marginLeft:t.size==="small"?-3:-12},t.edge==="end"&&{marginRight:t.size==="small"?-3:-12}),({theme:e,ownerState:t})=>{var n;const a=(n=(e.vars||e).palette)==null?void 0:n[t.color];return he({},t.color==="inherit"&&{color:"inherit"},t.color!=="inherit"&&t.color!=="default"&&he({color:a==null?void 0:a.main},!t.disableRipple&&{"&:hover":he({},a&&{backgroundColor:e.vars?`rgba(${a.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:fi(a.main,e.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),t.size==="small"&&{padding:5,fontSize:e.typography.pxToRem(18)},t.size==="large"&&{padding:12,fontSize:e.typography.pxToRem(28)},{[`&.${cV.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled}})}),dV=Q.forwardRef(function(t,n){const a=Vr({props:t,name:"MuiIconButton"}),{edge:c=!1,children:d,className:o,color:v="default",disabled:x=!1,disableFocusRipple:E=!1,size:T="medium"}=a,P=Vt(a,pV),I=he({},a,{edge:c,color:v,disabled:x,disableFocusRipple:E,size:T}),q=fV(I);return Xe.jsx(hV,he({className:Wt(q.root,o),centerRipple:!0,focusRipple:!E,disabled:x,ref:n,ownerState:I},P,{children:d}))}),mV=dV;function yV(e){return Nr("MuiTypography",e)}Ir("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const gV=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],vV=e=>{const{align:t,gutterBottom:n,noWrap:a,paragraph:c,variant:d,classes:o}=e,v={root:["root",d,e.align!=="inherit"&&`align${er(t)}`,n&&"gutterBottom",a&&"noWrap",c&&"paragraph"]};return jr(v,yV,o)},_V=Dt("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.variant&&t[n.variant],n.align!=="inherit"&&t[`align${er(n.align)}`],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})(({theme:e,ownerState:t})=>he({margin:0},t.variant==="inherit"&&{font:"inherit"},t.variant!=="inherit"&&e.typography[t.variant],t.align!=="inherit"&&{textAlign:t.align},t.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t.gutterBottom&&{marginBottom:"0.35em"},t.paragraph&&{marginBottom:16})),gC={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},xV={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},bV=e=>xV[e]||e,wV=Q.forwardRef(function(t,n){const a=Vr({props:t,name:"MuiTypography"}),c=bV(a.color),d=XP(he({},a,{color:c})),{align:o="inherit",className:v,component:x,gutterBottom:E=!1,noWrap:T=!1,paragraph:P=!1,variant:I="body1",variantMapping:q=gC}=d,$=Vt(d,gV),G=he({},d,{align:o,color:c,className:v,component:x,gutterBottom:E,noWrap:T,paragraph:P,variant:I,variantMapping:q}),D=x||(P?"p":q[I]||gC[I])||"span",F=vV(G);return Xe.jsx(_V,he({as:D,ref:n,ownerState:G,className:Wt(F.root,v)},$))}),lp=wV,SV=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function EV(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?e.contentEditable==="true"||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:t}function CV(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;const t=a=>e.ownerDocument.querySelector(`input[type="radio"]${a}`);let n=t(`[name="${e.name}"]:checked`);return n||(n=t(`[name="${e.name}"]`)),n!==e}function kV(e){return!(e.disabled||e.tagName==="INPUT"&&e.type==="hidden"||CV(e))}function TV(e){const t=[],n=[];return Array.from(e.querySelectorAll(SV)).forEach((a,c)=>{const d=EV(a);d===-1||!kV(a)||(d===0?t.push(a):n.push({documentOrder:c,tabIndex:d,node:a}))}),n.sort((a,c)=>a.tabIndex===c.tabIndex?a.documentOrder-c.documentOrder:a.tabIndex-c.tabIndex).map(a=>a.node).concat(t)}function IV(){return!0}function PV(e){const{children:t,disableAutoFocus:n=!1,disableEnforceFocus:a=!1,disableRestoreFocus:c=!1,getTabbable:d=TV,isEnabled:o=IV,open:v}=e,x=Q.useRef(!1),E=Q.useRef(null),T=Q.useRef(null),P=Q.useRef(null),I=Q.useRef(null),q=Q.useRef(!1),$=Q.useRef(null),G=Ui(t.ref,$),D=Q.useRef(null);Q.useEffect(()=>{!v||!$.current||(q.current=!n)},[n,v]),Q.useEffect(()=>{if(!v||!$.current)return;const B=To($.current);return $.current.contains(B.activeElement)||($.current.hasAttribute("tabIndex")||$.current.setAttribute("tabIndex","-1"),q.current&&$.current.focus()),()=>{c||(P.current&&P.current.focus&&(x.current=!0,P.current.focus()),P.current=null)}},[v]),Q.useEffect(()=>{if(!v||!$.current)return;const B=To($.current),z=ce=>{D.current=ce,!(a||!o()||ce.key!=="Tab")&&B.activeElement===$.current&&ce.shiftKey&&(x.current=!0,T.current&&T.current.focus())},re=()=>{const ce=$.current;if(ce===null)return;if(!B.hasFocus()||!o()||x.current){x.current=!1;return}if(ce.contains(B.activeElement)||a&&B.activeElement!==E.current&&B.activeElement!==T.current)return;if(B.activeElement!==I.current)I.current=null;else if(I.current!==null)return;if(!q.current)return;let xe=[];if((B.activeElement===E.current||B.activeElement===T.current)&&(xe=d($.current)),xe.length>0){var Te,ve;const we=!!((Te=D.current)!=null&&Te.shiftKey&&((ve=D.current)==null?void 0:ve.key)==="Tab"),ee=xe[0],pe=xe[xe.length-1];typeof ee!="string"&&typeof pe!="string"&&(we?pe.focus():ee.focus())}else ce.focus()};B.addEventListener("focusin",re),B.addEventListener("keydown",z,!0);const ie=setInterval(()=>{B.activeElement&&B.activeElement.tagName==="BODY"&&re()},50);return()=>{clearInterval(ie),B.removeEventListener("focusin",re),B.removeEventListener("keydown",z,!0)}},[n,a,c,o,v,d]);const F=B=>{P.current===null&&(P.current=B.relatedTarget),q.current=!0,I.current=B.target;const z=t.props.onFocus;z&&z(B)},V=B=>{P.current===null&&(P.current=B.relatedTarget),q.current=!0};return Xe.jsxs(Q.Fragment,{children:[Xe.jsx("div",{tabIndex:v?0:-1,onFocus:V,ref:E,"data-testid":"sentinelStart"}),Q.cloneElement(t,{ref:G,onFocus:F}),Xe.jsx("div",{tabIndex:v?0:-1,onFocus:V,ref:T,"data-testid":"sentinelEnd"})]})}function AV(e){return typeof e=="function"?e():e}const MV=Q.forwardRef(function(t,n){const{children:a,container:c,disablePortal:d=!1}=t,[o,v]=Q.useState(null),x=Ui(Q.isValidElement(a)?a.ref:null,n);if(Ea(()=>{d||v(AV(c)||document.body)},[c,d]),Ea(()=>{if(o&&!d)return Nx(n,o),()=>{Nx(n,null)}},[n,o,d]),d){if(Q.isValidElement(a)){const E={ref:x};return Q.cloneElement(a,E)}return Xe.jsx(Q.Fragment,{children:a})}return Xe.jsx(Q.Fragment,{children:o&&U1.createPortal(a,o)})});function RV(e){const t=To(e);return t.body===e?Ws(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function Oh(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function vC(e){return parseInt(Ws(e).getComputedStyle(e).paddingRight,10)||0}function LV(e){const n=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(e.tagName)!==-1,a=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return n||a}function _C(e,t,n,a,c){const d=[t,n,...a];[].forEach.call(e.children,o=>{const v=d.indexOf(o)===-1,x=!LV(o);v&&x&&Oh(o,c)})}function T_(e,t){let n=-1;return e.some((a,c)=>t(a)?(n=c,!0):!1),n}function zV(e,t){const n=[],a=e.container;if(!t.disableScrollLock){if(RV(a)){const o=qP(To(a));n.push({value:a.style.paddingRight,property:"padding-right",el:a}),a.style.paddingRight=`${vC(a)+o}px`;const v=To(a).querySelectorAll(".mui-fixed");[].forEach.call(v,x=>{n.push({value:x.style.paddingRight,property:"padding-right",el:x}),x.style.paddingRight=`${vC(x)+o}px`})}let d;if(a.parentNode instanceof DocumentFragment)d=To(a).body;else{const o=a.parentElement,v=Ws(a);d=(o==null?void 0:o.nodeName)==="HTML"&&v.getComputedStyle(o).overflowY==="scroll"?o:a}n.push({value:d.style.overflow,property:"overflow",el:d},{value:d.style.overflowX,property:"overflow-x",el:d},{value:d.style.overflowY,property:"overflow-y",el:d}),d.style.overflow="hidden"}return()=>{n.forEach(({value:d,el:o,property:v})=>{d?o.style.setProperty(v,d):o.style.removeProperty(v)})}}function DV(e){const t=[];return[].forEach.call(e.children,n=>{n.getAttribute("aria-hidden")==="true"&&t.push(n)}),t}class OV{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(t,n){let a=this.modals.indexOf(t);if(a!==-1)return a;a=this.modals.length,this.modals.push(t),t.modalRef&&Oh(t.modalRef,!1);const c=DV(n);_C(n,t.mount,t.modalRef,c,!0);const d=T_(this.containers,o=>o.container===n);return d!==-1?(this.containers[d].modals.push(t),a):(this.containers.push({modals:[t],container:n,restore:null,hiddenSiblings:c}),a)}mount(t,n){const a=T_(this.containers,d=>d.modals.indexOf(t)!==-1),c=this.containers[a];c.restore||(c.restore=zV(c,n))}remove(t,n=!0){const a=this.modals.indexOf(t);if(a===-1)return a;const c=T_(this.containers,o=>o.modals.indexOf(t)!==-1),d=this.containers[c];if(d.modals.splice(d.modals.indexOf(t),1),this.modals.splice(a,1),d.modals.length===0)d.restore&&d.restore(),t.modalRef&&Oh(t.modalRef,n),_C(d.container,t.mount,t.modalRef,d.hiddenSiblings,!1),this.containers.splice(c,1);else{const o=d.modals[d.modals.length-1];o.modalRef&&Oh(o.modalRef,!1)}return a}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}function BV(e){return typeof e=="function"?e():e}function NV(e){return e?e.props.hasOwnProperty("in"):!1}const FV=new OV;function UV(e){const{container:t,disableEscapeKeyDown:n=!1,disableScrollLock:a=!1,manager:c=FV,closeAfterTransition:d=!1,onTransitionEnter:o,onTransitionExited:v,children:x,onClose:E,open:T,rootRef:P}=e,I=Q.useRef({}),q=Q.useRef(null),$=Q.useRef(null),G=Ui($,P),[D,F]=Q.useState(!T),V=NV(x);let B=!0;(e["aria-hidden"]==="false"||e["aria-hidden"]===!1)&&(B=!1);const z=()=>To(q.current),re=()=>(I.current.modalRef=$.current,I.current.mount=q.current,I.current),ie=()=>{c.mount(re(),{disableScrollLock:a}),$.current&&($.current.scrollTop=0)},ce=$s(()=>{const Ee=BV(t)||z().body;c.add(re(),Ee),$.current&&ie()}),xe=Q.useCallback(()=>c.isTopModal(re()),[c]),Te=$s(Ee=>{q.current=Ee,Ee&&(T&&xe()?ie():$.current&&Oh($.current,B))}),ve=Q.useCallback(()=>{c.remove(re(),B)},[B,c]);Q.useEffect(()=>()=>{ve()},[ve]),Q.useEffect(()=>{T?ce():(!V||!d)&&ve()},[T,ve,V,d,ce]);const we=Ee=>ke=>{var je;(je=Ee.onKeyDown)==null||je.call(Ee,ke),!(ke.key!=="Escape"||ke.which===229||!xe())&&(n||(ke.stopPropagation(),E&&E(ke,"escapeKeyDown")))},ee=Ee=>ke=>{var je;(je=Ee.onClick)==null||je.call(Ee,ke),ke.target===ke.currentTarget&&E&&E(ke,"backdropClick")};return{getRootProps:(Ee={})=>{const ke=oA(e);delete ke.onTransitionEnter,delete ke.onTransitionExited;const je=he({},ke,Ee);return he({role:"presentation"},je,{onKeyDown:we(je),ref:G})},getBackdropProps:(Ee={})=>{const ke=Ee;return he({"aria-hidden":!0},ke,{onClick:ee(ke),open:T})},getTransitionProps:()=>{const Ee=()=>{F(!1),o&&o()},ke=()=>{F(!0),v&&v(),d&&ve()};return{onEnter:HE(Ee,x==null?void 0:x.props.onEnter),onExited:HE(ke,x==null?void 0:x.props.onExited)}},rootRef:G,portalRef:Te,isTopModal:xe,exited:D,hasTransition:V}}const $V=["onChange","maxRows","minRows","style","value"];function Ym(e){return parseInt(e,10)||0}const jV={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function xC(e){return e==null||Object.keys(e).length===0||e.outerHeightStyle===0&&!e.overflow}const VV=Q.forwardRef(function(t,n){const{onChange:a,maxRows:c,minRows:d=1,style:o,value:v}=t,x=Vt(t,$V),{current:E}=Q.useRef(v!=null),T=Q.useRef(null),P=Ui(n,T),I=Q.useRef(null),q=Q.useRef(0),[$,G]=Q.useState({outerHeightStyle:0}),D=Q.useCallback(()=>{const z=T.current,ie=Ws(z).getComputedStyle(z);if(ie.width==="0px")return{outerHeightStyle:0};const ce=I.current;ce.style.width=ie.width,ce.value=z.value||t.placeholder||"x",ce.value.slice(-1)===`
`&&(ce.value+=" ");const xe=ie.boxSizing,Te=Ym(ie.paddingBottom)+Ym(ie.paddingTop),ve=Ym(ie.borderBottomWidth)+Ym(ie.borderTopWidth),we=ce.scrollHeight;ce.value="x";const ee=ce.scrollHeight;let pe=we;d&&(pe=Math.max(Number(d)*ee,pe)),c&&(pe=Math.min(Number(c)*ee,pe)),pe=Math.max(pe,ee);const Oe=pe+(xe==="border-box"?Te+ve:0),Ue=Math.abs(pe-we)<=1;return{outerHeightStyle:Oe,overflow:Ue}},[c,d,t.placeholder]),F=(z,re)=>{const{outerHeightStyle:ie,overflow:ce}=re;return q.current<20&&(ie>0&&Math.abs((z.outerHeightStyle||0)-ie)>1||z.overflow!==ce)?(q.current+=1,{overflow:ce,outerHeightStyle:ie}):z},V=Q.useCallback(()=>{const z=D();xC(z)||G(re=>F(re,z))},[D]);Ea(()=>{const z=()=>{const we=D();xC(we)||U1.flushSync(()=>{G(ee=>F(ee,we))})},re=()=>{q.current=0,z()};let ie;const ce=ev(re),xe=T.current,Te=Ws(xe);Te.addEventListener("resize",ce);let ve;return typeof ResizeObserver<"u"&&(ve=new ResizeObserver(re),ve.observe(xe)),()=>{ce.clear(),cancelAnimationFrame(ie),Te.removeEventListener("resize",ce),ve&&ve.disconnect()}},[D]),Ea(()=>{V()}),Q.useEffect(()=>{q.current=0},[v]);const B=z=>{q.current=0,E||V(),a&&a(z)};return Xe.jsxs(Q.Fragment,{children:[Xe.jsx("textarea",he({value:v,onChange:B,ref:P,rows:d,style:he({height:$.outerHeightStyle,overflow:$.overflow?"hidden":void 0},o)},x)),Xe.jsx("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:I,tabIndex:-1,style:he({},jV.shadow,o,{paddingTop:0,paddingBottom:0})})]})});function Hp({props:e,states:t,muiFormControl:n}){return t.reduce((a,c)=>(a[c]=e[c],n&&typeof e[c]>"u"&&(a[c]=n[c]),a),{})}const qV=Q.createContext(void 0),Rb=qV;function Zp(){return Q.useContext(Rb)}function WV(e){return Xe.jsx(S$,he({},e,{defaultTheme:hv,themeId:gd}))}function bC(e){return e!=null&&!(Array.isArray(e)&&e.length===0)}function dg(e,t=!1){return e&&(bC(e.value)&&e.value!==""||t&&bC(e.defaultValue)&&e.defaultValue!=="")}function GV(e){return e.startAdornment}function HV(e){return Nr("MuiInputBase",e)}const ZV=Ir("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),Dp=ZV,KV=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],Cv=(e,t)=>{const{ownerState:n}=e;return[t.root,n.formControl&&t.formControl,n.startAdornment&&t.adornedStart,n.endAdornment&&t.adornedEnd,n.error&&t.error,n.size==="small"&&t.sizeSmall,n.multiline&&t.multiline,n.color&&t[`color${er(n.color)}`],n.fullWidth&&t.fullWidth,n.hiddenLabel&&t.hiddenLabel]},kv=(e,t)=>{const{ownerState:n}=e;return[t.input,n.size==="small"&&t.inputSizeSmall,n.multiline&&t.inputMultiline,n.type==="search"&&t.inputTypeSearch,n.startAdornment&&t.inputAdornedStart,n.endAdornment&&t.inputAdornedEnd,n.hiddenLabel&&t.inputHiddenLabel]},XV=e=>{const{classes:t,color:n,disabled:a,error:c,endAdornment:d,focused:o,formControl:v,fullWidth:x,hiddenLabel:E,multiline:T,readOnly:P,size:I,startAdornment:q,type:$}=e,G={root:["root",`color${er(n)}`,a&&"disabled",c&&"error",x&&"fullWidth",o&&"focused",v&&"formControl",I&&I!=="medium"&&`size${er(I)}`,T&&"multiline",q&&"adornedStart",d&&"adornedEnd",E&&"hiddenLabel",P&&"readOnly"],input:["input",a&&"disabled",$==="search"&&"inputTypeSearch",T&&"inputMultiline",I==="small"&&"inputSizeSmall",E&&"inputHiddenLabel",q&&"inputAdornedStart",d&&"inputAdornedEnd",P&&"readOnly"]};return jr(G,HV,t)},Tv=Dt("div",{name:"MuiInputBase",slot:"Root",overridesResolver:Cv})(({theme:e,ownerState:t})=>he({},e.typography.body1,{color:(e.vars||e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${Dp.disabled}`]:{color:(e.vars||e).palette.text.disabled,cursor:"default"}},t.multiline&&he({padding:"4px 0 5px"},t.size==="small"&&{paddingTop:1}),t.fullWidth&&{width:"100%"})),Iv=Dt("input",{name:"MuiInputBase",slot:"Input",overridesResolver:kv})(({theme:e,ownerState:t})=>{const n=e.palette.mode==="light",a=he({color:"currentColor"},e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5},{transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})}),c={opacity:"0 !important"},d=e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5};return he({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":a,"&::-moz-placeholder":a,"&:-ms-input-placeholder":a,"&::-ms-input-placeholder":a,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${Dp.formControl} &`]:{"&::-webkit-input-placeholder":c,"&::-moz-placeholder":c,"&:-ms-input-placeholder":c,"&::-ms-input-placeholder":c,"&:focus::-webkit-input-placeholder":d,"&:focus::-moz-placeholder":d,"&:focus:-ms-input-placeholder":d,"&:focus::-ms-input-placeholder":d},[`&.${Dp.disabled}`]:{opacity:1,WebkitTextFillColor:(e.vars||e).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},t.size==="small"&&{paddingTop:1},t.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},t.type==="search"&&{MozAppearance:"textfield"})}),YV=Xe.jsx(WV,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),JV=Q.forwardRef(function(t,n){var a;const c=Vr({props:t,name:"MuiInputBase"}),{"aria-describedby":d,autoComplete:o,autoFocus:v,className:x,components:E={},componentsProps:T={},defaultValue:P,disabled:I,disableInjectingGlobalStyles:q,endAdornment:$,fullWidth:G=!1,id:D,inputComponent:F="input",inputProps:V={},inputRef:B,maxRows:z,minRows:re,multiline:ie=!1,name:ce,onBlur:xe,onChange:Te,onClick:ve,onFocus:we,onKeyDown:ee,onKeyUp:pe,placeholder:Oe,readOnly:Ue,renderSuffix:Ee,rows:ke,slotProps:je={},slots:Ze={},startAdornment:wt,type:Pe="text",value:Ge}=c,lt=Vt(c,KV),Re=V.value!=null?V.value:Ge,{current:qe}=Q.useRef(Re!=null),Xt=Q.useRef(),Pt=Q.useCallback(dr=>{},[]),Bt=Ui(Xt,B,V.ref,Pt),[Ct,ir]=Q.useState(!1),Kt=Zp(),Jt=Hp({props:c,muiFormControl:Kt,states:["color","disabled","error","hiddenLabel","size","required","filled"]});Jt.focused=Kt?Kt.focused:Ct,Q.useEffect(()=>{!Kt&&I&&Ct&&(ir(!1),xe&&xe())},[Kt,I,Ct,xe]);const st=Kt&&Kt.onFilled,Ot=Kt&&Kt.onEmpty,tr=Q.useCallback(dr=>{dg(dr)?st&&st():Ot&&Ot()},[st,Ot]);Ea(()=>{qe&&tr({value:Re})},[Re,tr,qe]);const Lr=dr=>{if(Jt.disabled){dr.stopPropagation();return}we&&we(dr),V.onFocus&&V.onFocus(dr),Kt&&Kt.onFocus?Kt.onFocus(dr):ir(!0)},Fr=dr=>{xe&&xe(dr),V.onBlur&&V.onBlur(dr),Kt&&Kt.onBlur?Kt.onBlur(dr):ir(!1)},rr=(dr,...Nt)=>{if(!qe){const jn=dr.target||Xt.current;if(jn==null)throw new Error(Bl(1));tr({value:jn.value})}V.onChange&&V.onChange(dr,...Nt),Te&&Te(dr,...Nt)};Q.useEffect(()=>{tr(Xt.current)},[]);const qr=dr=>{Xt.current&&dr.currentTarget===dr.target&&Xt.current.focus(),ve&&ve(dr)};let zr=F,Cr=V;ie&&zr==="input"&&(ke?Cr=he({type:void 0,minRows:ke,maxRows:ke},Cr):Cr=he({type:void 0,maxRows:z,minRows:re},Cr),zr=VV);const an=dr=>{tr(dr.animationName==="mui-auto-fill-cancel"?Xt.current:{value:"x"})};Q.useEffect(()=>{Kt&&Kt.setAdornedStart(!!wt)},[Kt,wt]);const Rr=he({},c,{color:Jt.color||"primary",disabled:Jt.disabled,endAdornment:$,error:Jt.error,focused:Jt.focused,formControl:Kt,fullWidth:G,hiddenLabel:Jt.hiddenLabel,multiline:ie,size:Jt.size,startAdornment:wt,type:Pe}),ur=XV(Rr),Yr=Ze.root||E.Root||Tv,Sn=je.root||T.root||{},ai=Ze.input||E.Input||Iv;return Cr=he({},Cr,(a=je.input)!=null?a:T.input),Xe.jsxs(Q.Fragment,{children:[!q&&YV,Xe.jsxs(Yr,he({},Sn,!zp(Yr)&&{ownerState:he({},Rr,Sn.ownerState)},{ref:n,onClick:qr},lt,{className:Wt(ur.root,Sn.className,x,Ue&&"MuiInputBase-readOnly"),children:[wt,Xe.jsx(Rb.Provider,{value:null,children:Xe.jsx(ai,he({ownerState:Rr,"aria-invalid":Jt.error,"aria-describedby":d,autoComplete:o,autoFocus:v,defaultValue:P,disabled:Jt.disabled,id:D,onAnimationStart:an,name:ce,placeholder:Oe,readOnly:Ue,required:Jt.required,rows:ke,value:Re,onKeyDown:ee,onKeyUp:pe,type:Pe},Cr,!zp(ai)&&{as:zr,ownerState:he({},Rr,Cr.ownerState)},{ref:Bt,className:Wt(ur.input,Cr.className,Ue&&"MuiInputBase-readOnly"),onBlur:Fr,onChange:rr,onFocus:Lr}))}),$,Ee?Ee(he({},Jt,{startAdornment:wt})):null]}))]})}),Lb=JV;function QV(e){return Nr("MuiInput",e)}const e9=he({},Dp,Ir("MuiInput",["root","underline","input"])),lh=e9;function t9(e){return Nr("MuiOutlinedInput",e)}const r9=he({},Dp,Ir("MuiOutlinedInput",["root","notchedOutline","input"])),dl=r9;function n9(e){return Nr("MuiFilledInput",e)}const i9=he({},Dp,Ir("MuiFilledInput",["root","underline","input"])),xu=i9,o9=kb(Xe.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),a9=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],s9={entering:{opacity:1},entered:{opacity:1}},l9=Q.forwardRef(function(t,n){const a=Gp(),c={enter:a.transitions.duration.enteringScreen,exit:a.transitions.duration.leavingScreen},{addEndListener:d,appear:o=!0,children:v,easing:x,in:E,onEnter:T,onEntered:P,onEntering:I,onExit:q,onExited:$,onExiting:G,style:D,timeout:F=c,TransitionComponent:V=nA}=t,B=Vt(t,a9),z=Q.useRef(null),re=Ui(z,v.ref,n),ie=Oe=>Ue=>{if(Oe){const Ee=z.current;Ue===void 0?Oe(Ee):Oe(Ee,Ue)}},ce=ie(I),xe=ie((Oe,Ue)=>{iA(Oe);const Ee=hg({style:D,timeout:F,easing:x},{mode:"enter"});Oe.style.webkitTransition=a.transitions.create("opacity",Ee),Oe.style.transition=a.transitions.create("opacity",Ee),T&&T(Oe,Ue)}),Te=ie(P),ve=ie(G),we=ie(Oe=>{const Ue=hg({style:D,timeout:F,easing:x},{mode:"exit"});Oe.style.webkitTransition=a.transitions.create("opacity",Ue),Oe.style.transition=a.transitions.create("opacity",Ue),q&&q(Oe)}),ee=ie($),pe=Oe=>{d&&d(z.current,Oe)};return Xe.jsx(V,he({appear:o,in:E,nodeRef:z,onEnter:xe,onEntered:Te,onEntering:ce,onExit:we,onExited:ee,onExiting:ve,addEndListener:pe,timeout:F},B,{children:(Oe,Ue)=>Q.cloneElement(v,he({style:he({opacity:0,visibility:Oe==="exited"&&!E?"hidden":void 0},s9[Oe],D,v.props.style),ref:re},Ue))}))}),aA=l9;function u9(e){return Nr("MuiBackdrop",e)}Ir("MuiBackdrop",["root","invisible"]);const c9=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],p9=e=>{const{classes:t,invisible:n}=e;return jr({root:["root",n&&"invisible"]},u9,t)},f9=Dt("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.invisible&&t.invisible]}})(({ownerState:e})=>he({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},e.invisible&&{backgroundColor:"transparent"})),h9=Q.forwardRef(function(t,n){var a,c,d;const o=Vr({props:t,name:"MuiBackdrop"}),{children:v,className:x,component:E="div",components:T={},componentsProps:P={},invisible:I=!1,open:q,slotProps:$={},slots:G={},TransitionComponent:D=aA,transitionDuration:F}=o,V=Vt(o,c9),B=he({},o,{component:E,invisible:I}),z=p9(B),re=(a=$.root)!=null?a:P.root;return Xe.jsx(D,he({in:q,timeout:F},V,{children:Xe.jsx(f9,he({"aria-hidden":!0},re,{as:(c=(d=G.root)!=null?d:T.Root)!=null?c:E,className:Wt(z.root,x,re==null?void 0:re.className),ownerState:he({},B,re==null?void 0:re.ownerState),classes:z,ref:n,children:v}))}))}),sA=h9,d9=Ir("MuiBox",["root"]),m9=d9,y9=QP(),g9=T$({themeId:gd,defaultTheme:y9,defaultClassName:m9.root,generateClassName:GP.generate}),so=g9;function v9(e){return Nr("MuiButton",e)}const _9=Ir("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),Jm=_9,x9=Q.createContext({}),b9=x9,w9=Q.createContext(void 0),S9=w9,E9=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],C9=e=>{const{color:t,disableElevation:n,fullWidth:a,size:c,variant:d,classes:o}=e,v={root:["root",d,`${d}${er(t)}`,`size${er(c)}`,`${d}Size${er(c)}`,t==="inherit"&&"colorInherit",n&&"disableElevation",a&&"fullWidth"],label:["label"],startIcon:["startIcon",`iconSize${er(c)}`],endIcon:["endIcon",`iconSize${er(c)}`]},x=jr(v,v9,o);return he({},o,x)},lA=e=>he({},e.size==="small"&&{"& > *:nth-of-type(1)":{fontSize:18}},e.size==="medium"&&{"& > *:nth-of-type(1)":{fontSize:20}},e.size==="large"&&{"& > *:nth-of-type(1)":{fontSize:22}}),k9=Dt(Wu,{shouldForwardProp:e=>Go(e)||e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`${n.variant}${er(n.color)}`],t[`size${er(n.size)}`],t[`${n.variant}Size${er(n.size)}`],n.color==="inherit"&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth]}})(({theme:e,ownerState:t})=>{var n,a;const c=e.palette.mode==="light"?e.palette.grey[300]:e.palette.grey[800],d=e.palette.mode==="light"?e.palette.grey.A100:e.palette.grey[700];return he({},e.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":he({textDecoration:"none",backgroundColor:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:fi(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="text"&&t.color!=="inherit"&&{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:fi(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="outlined"&&t.color!=="inherit"&&{border:`1px solid ${(e.vars||e).palette[t.color].main}`,backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:fi(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="contained"&&{backgroundColor:e.vars?e.vars.palette.Button.inheritContainedHoverBg:d,boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2],backgroundColor:(e.vars||e).palette.grey[300]}},t.variant==="contained"&&t.color!=="inherit"&&{backgroundColor:(e.vars||e).palette[t.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t.color].main}}),"&:active":he({},t.variant==="contained"&&{boxShadow:(e.vars||e).shadows[8]}),[`&.${Jm.focusVisible}`]:he({},t.variant==="contained"&&{boxShadow:(e.vars||e).shadows[6]}),[`&.${Jm.disabled}`]:he({color:(e.vars||e).palette.action.disabled},t.variant==="outlined"&&{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`},t.variant==="contained"&&{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground})},t.variant==="text"&&{padding:"6px 8px"},t.variant==="text"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].main},t.variant==="outlined"&&{padding:"5px 15px",border:"1px solid currentColor"},t.variant==="outlined"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].main,border:e.vars?`1px solid rgba(${e.vars.palette[t.color].mainChannel} / 0.5)`:`1px solid ${fi(e.palette[t.color].main,.5)}`},t.variant==="contained"&&{color:e.vars?e.vars.palette.text.primary:(n=(a=e.palette).getContrastText)==null?void 0:n.call(a,e.palette.grey[300]),backgroundColor:e.vars?e.vars.palette.Button.inheritContainedBg:c,boxShadow:(e.vars||e).shadows[2]},t.variant==="contained"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].contrastText,backgroundColor:(e.vars||e).palette[t.color].main},t.color==="inherit"&&{color:"inherit",borderColor:"currentColor"},t.size==="small"&&t.variant==="text"&&{padding:"4px 5px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="text"&&{padding:"8px 11px",fontSize:e.typography.pxToRem(15)},t.size==="small"&&t.variant==="outlined"&&{padding:"3px 9px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="outlined"&&{padding:"7px 21px",fontSize:e.typography.pxToRem(15)},t.size==="small"&&t.variant==="contained"&&{padding:"4px 10px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="contained"&&{padding:"8px 22px",fontSize:e.typography.pxToRem(15)},t.fullWidth&&{width:"100%"})},({ownerState:e})=>e.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${Jm.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${Jm.disabled}`]:{boxShadow:"none"}}),T9=Dt("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.startIcon,t[`iconSize${er(n.size)}`]]}})(({ownerState:e})=>he({display:"inherit",marginRight:8,marginLeft:-4},e.size==="small"&&{marginLeft:-2},lA(e))),I9=Dt("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.endIcon,t[`iconSize${er(n.size)}`]]}})(({ownerState:e})=>he({display:"inherit",marginRight:-4,marginLeft:8},e.size==="small"&&{marginRight:-2},lA(e))),P9=Q.forwardRef(function(t,n){const a=Q.useContext(b9),c=Q.useContext(S9),d=_b(a,t),o=Vr({props:d,name:"MuiButton"}),{children:v,color:x="primary",component:E="button",className:T,disabled:P=!1,disableElevation:I=!1,disableFocusRipple:q=!1,endIcon:$,focusVisibleClassName:G,fullWidth:D=!1,size:F="medium",startIcon:V,type:B,variant:z="text"}=o,re=Vt(o,E9),ie=he({},o,{color:x,component:E,disabled:P,disableElevation:I,disableFocusRipple:q,fullWidth:D,size:F,type:B,variant:z}),ce=C9(ie),xe=V&&Xe.jsx(T9,{className:ce.startIcon,ownerState:ie,children:V}),Te=$&&Xe.jsx(I9,{className:ce.endIcon,ownerState:ie,children:$}),ve=c||"";return Xe.jsxs(k9,he({ownerState:ie,className:Wt(a.className,ce.root,T,ve),component:E,disabled:P,focusRipple:!q,focusVisibleClassName:Wt(ce.focusVisible,G),ref:n,type:B},re,{classes:ce,children:[xe,v,Te]}))}),xl=P9;function A9(e){return Nr("MuiModal",e)}Ir("MuiModal",["root","hidden","backdrop"]);const M9=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","onTransitionEnter","onTransitionExited","open","slotProps","slots","theme"],R9=e=>{const{open:t,exited:n,classes:a}=e;return jr({root:["root",!t&&n&&"hidden"],backdrop:["backdrop"]},A9,a)},L9=Dt("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.open&&n.exited&&t.hidden]}})(({theme:e,ownerState:t})=>he({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0},!t.open&&t.exited&&{visibility:"hidden"})),z9=Dt(sA,{name:"MuiModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({zIndex:-1}),D9=Q.forwardRef(function(t,n){var a,c,d,o,v,x;const E=Vr({name:"MuiModal",props:t}),{BackdropComponent:T=z9,BackdropProps:P,className:I,closeAfterTransition:q=!1,children:$,container:G,component:D,components:F={},componentsProps:V={},disableAutoFocus:B=!1,disableEnforceFocus:z=!1,disableEscapeKeyDown:re=!1,disablePortal:ie=!1,disableRestoreFocus:ce=!1,disableScrollLock:xe=!1,hideBackdrop:Te=!1,keepMounted:ve=!1,onBackdropClick:we,open:ee,slotProps:pe,slots:Oe}=E,Ue=Vt(E,M9),Ee=he({},E,{closeAfterTransition:q,disableAutoFocus:B,disableEnforceFocus:z,disableEscapeKeyDown:re,disablePortal:ie,disableRestoreFocus:ce,disableScrollLock:xe,hideBackdrop:Te,keepMounted:ve}),{getRootProps:ke,getBackdropProps:je,getTransitionProps:Ze,portalRef:wt,isTopModal:Pe,exited:Ge,hasTransition:lt}=UV(he({},Ee,{rootRef:n})),Re=he({},Ee,{exited:Ge}),qe=R9(Re),Xt={};if($.props.tabIndex===void 0&&(Xt.tabIndex="-1"),lt){const{onEnter:st,onExited:Ot}=Ze();Xt.onEnter=st,Xt.onExited=Ot}const Pt=(a=(c=Oe==null?void 0:Oe.root)!=null?c:F.Root)!=null?a:L9,Bt=(d=(o=Oe==null?void 0:Oe.backdrop)!=null?o:F.Backdrop)!=null?d:T,Ct=(v=pe==null?void 0:pe.root)!=null?v:V.root,ir=(x=pe==null?void 0:pe.backdrop)!=null?x:V.backdrop,Kt=os({elementType:Pt,externalSlotProps:Ct,externalForwardedProps:Ue,getSlotProps:ke,additionalProps:{ref:n,as:D},ownerState:Re,className:Wt(I,Ct==null?void 0:Ct.className,qe==null?void 0:qe.root,!Re.open&&Re.exited&&(qe==null?void 0:qe.hidden))}),Jt=os({elementType:Bt,externalSlotProps:ir,additionalProps:P,getSlotProps:st=>je(he({},st,{onClick:Ot=>{we&&we(Ot),st!=null&&st.onClick&&st.onClick(Ot)}})),className:Wt(ir==null?void 0:ir.className,P==null?void 0:P.className,qe==null?void 0:qe.backdrop),ownerState:Re});return!ve&&!ee&&(!lt||Ge)?null:Xe.jsx(MV,{ref:wt,container:G,disablePortal:ie,children:Xe.jsxs(Pt,he({},Kt,{children:[!Te&&T?Xe.jsx(Bt,he({},Jt)):null,Xe.jsx(PV,{disableEnforceFocus:z,disableAutoFocus:B,disableRestoreFocus:ce,isEnabled:Pe,open:ee,children:Q.cloneElement($,Xt)})]}))})}),uA=D9;function O9(e){return Nr("MuiDialog",e)}const B9=Ir("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),I_=B9,N9=Q.createContext({}),cA=N9,F9=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],U9=Dt(sA,{name:"MuiDialog",slot:"Backdrop",overrides:(e,t)=>t.backdrop})({zIndex:-1}),$9=e=>{const{classes:t,scroll:n,maxWidth:a,fullWidth:c,fullScreen:d}=e,o={root:["root"],container:["container",`scroll${er(n)}`],paper:["paper",`paperScroll${er(n)}`,`paperWidth${er(String(a))}`,c&&"paperFullWidth",d&&"paperFullScreen"]};return jr(o,O9,t)},j9=Dt(uA,{name:"MuiDialog",slot:"Root",overridesResolver:(e,t)=>t.root})({"@media print":{position:"absolute !important"}}),V9=Dt("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.container,t[`scroll${er(n.scroll)}`]]}})(({ownerState:e})=>he({height:"100%","@media print":{height:"auto"},outline:0},e.scroll==="paper"&&{display:"flex",justifyContent:"center",alignItems:"center"},e.scroll==="body"&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}})),q9=Dt(Mb,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.paper,t[`scrollPaper${er(n.scroll)}`],t[`paperWidth${er(String(n.maxWidth))}`],n.fullWidth&&t.paperFullWidth,n.fullScreen&&t.paperFullScreen]}})(({theme:e,ownerState:t})=>he({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},t.scroll==="paper"&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},t.scroll==="body"&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!t.maxWidth&&{maxWidth:"calc(100% - 64px)"},t.maxWidth==="xs"&&{maxWidth:e.breakpoints.unit==="px"?Math.max(e.breakpoints.values.xs,444):`max(${e.breakpoints.values.xs}${e.breakpoints.unit}, 444px)`,[`&.${I_.paperScrollBody}`]:{[e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}},t.maxWidth&&t.maxWidth!=="xs"&&{maxWidth:`${e.breakpoints.values[t.maxWidth]}${e.breakpoints.unit}`,[`&.${I_.paperScrollBody}`]:{[e.breakpoints.down(e.breakpoints.values[t.maxWidth]+32*2)]:{maxWidth:"calc(100% - 64px)"}}},t.fullWidth&&{width:"calc(100% - 64px)"},t.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${I_.paperScrollBody}`]:{margin:0,maxWidth:"100%"}})),W9=Q.forwardRef(function(t,n){const a=Vr({props:t,name:"MuiDialog"}),c=Gp(),d={enter:c.transitions.duration.enteringScreen,exit:c.transitions.duration.leavingScreen},{"aria-describedby":o,"aria-labelledby":v,BackdropComponent:x,BackdropProps:E,children:T,className:P,disableEscapeKeyDown:I=!1,fullScreen:q=!1,fullWidth:$=!1,maxWidth:G="sm",onBackdropClick:D,onClose:F,open:V,PaperComponent:B=Mb,PaperProps:z={},scroll:re="paper",TransitionComponent:ie=aA,transitionDuration:ce=d,TransitionProps:xe}=a,Te=Vt(a,F9),ve=he({},a,{disableEscapeKeyDown:I,fullScreen:q,fullWidth:$,maxWidth:G,scroll:re}),we=$9(ve),ee=Q.useRef(),pe=ke=>{ee.current=ke.target===ke.currentTarget},Oe=ke=>{ee.current&&(ee.current=null,D&&D(ke),F&&F(ke,"backdropClick"))},Ue=vb(v),Ee=Q.useMemo(()=>({titleId:Ue}),[Ue]);return Xe.jsx(j9,he({className:Wt(we.root,P),closeAfterTransition:!0,components:{Backdrop:U9},componentsProps:{backdrop:he({transitionDuration:ce,as:x},E)},disableEscapeKeyDown:I,onClose:F,open:V,ref:n,onClick:Oe,ownerState:ve},Te,{children:Xe.jsx(ie,he({appear:!0,in:V,timeout:ce,role:"presentation"},xe,{children:Xe.jsx(V9,{className:Wt(we.container),onMouseDown:pe,ownerState:ve,children:Xe.jsx(q9,he({as:B,elevation:24,role:"dialog","aria-describedby":o,"aria-labelledby":Ue},z,{className:Wt(we.paper,z.className),ownerState:ve,children:Xe.jsx(cA.Provider,{value:Ee,children:T})}))})}))}))}),pA=W9;function G9(e){return Nr("MuiDialogActions",e)}Ir("MuiDialogActions",["root","spacing"]);const H9=["className","disableSpacing"],Z9=e=>{const{classes:t,disableSpacing:n}=e;return jr({root:["root",!n&&"spacing"]},G9,t)},K9=Dt("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableSpacing&&t.spacing]}})(({ownerState:e})=>he({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!e.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})),X9=Q.forwardRef(function(t,n){const a=Vr({props:t,name:"MuiDialogActions"}),{className:c,disableSpacing:d=!1}=a,o=Vt(a,H9),v=he({},a,{disableSpacing:d}),x=Z9(v);return Xe.jsx(K9,he({className:Wt(x.root,c),ownerState:v,ref:n},o))}),fA=X9;function Y9(e){return Nr("MuiDialogContent",e)}Ir("MuiDialogContent",["root","dividers"]);function J9(e){return Nr("MuiDialogTitle",e)}const Q9=Ir("MuiDialogTitle",["root"]),e7=Q9,t7=["className","dividers"],r7=e=>{const{classes:t,dividers:n}=e;return jr({root:["root",n&&"dividers"]},Y9,t)},n7=Dt("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dividers&&t.dividers]}})(({theme:e,ownerState:t})=>he({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},t.dividers?{padding:"16px 24px",borderTop:`1px solid ${(e.vars||e).palette.divider}`,borderBottom:`1px solid ${(e.vars||e).palette.divider}`}:{[`.${e7.root} + &`]:{paddingTop:0}})),i7=Q.forwardRef(function(t,n){const a=Vr({props:t,name:"MuiDialogContent"}),{className:c,dividers:d=!1}=a,o=Vt(a,t7),v=he({},a,{dividers:d}),x=r7(v);return Xe.jsx(n7,he({className:Wt(x.root,c),ownerState:v,ref:n},o))}),hA=i7,o7=["className","id"],a7=e=>{const{classes:t}=e;return jr({root:["root"]},J9,t)},s7=Dt(lp,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),l7=Q.forwardRef(function(t,n){const a=Vr({props:t,name:"MuiDialogTitle"}),{className:c,id:d}=a,o=Vt(a,o7),v=a,x=a7(v),{titleId:E=d}=Q.useContext(cA);return Xe.jsx(s7,he({component:"h2",className:Wt(x.root,c),ownerState:v,ref:n,variant:"h6",id:d??E},o))}),dA=l7,u7=Ir("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),wC=u7,c7=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],p7=e=>{const{classes:t,disableUnderline:n}=e,c=jr({root:["root",!n&&"underline"],input:["input"]},n9,t);return he({},t,c)},f7=Dt(Tv,{shouldForwardProp:e=>Go(e)||e==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...Cv(e,t),!n.disableUnderline&&t.underline]}})(({theme:e,ownerState:t})=>{var n;const a=e.palette.mode==="light",c=a?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",d=a?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",o=a?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",v=a?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return he({position:"relative",backgroundColor:e.vars?e.vars.palette.FilledInput.bg:d,borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:e.vars?e.vars.palette.FilledInput.hoverBg:o,"@media (hover: none)":{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:d}},[`&.${xu.focused}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:d},[`&.${xu.disabled}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.disabledBg:v}},!t.disableUnderline&&{"&::after":{borderBottom:`2px solid ${(n=(e.vars||e).palette[t.color||"primary"])==null?void 0:n.main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${xu.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${xu.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`:c}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${xu.disabled}, .${xu.error}):before`]:{borderBottom:`1px solid ${(e.vars||e).palette.text.primary}`},[`&.${xu.disabled}:before`]:{borderBottomStyle:"dotted"}},t.startAdornment&&{paddingLeft:12},t.endAdornment&&{paddingRight:12},t.multiline&&he({padding:"25px 12px 8px"},t.size==="small"&&{paddingTop:21,paddingBottom:4},t.hiddenLabel&&{paddingTop:16,paddingBottom:17},t.hiddenLabel&&t.size==="small"&&{paddingTop:8,paddingBottom:9}))}),h7=Dt(Iv,{name:"MuiFilledInput",slot:"Input",overridesResolver:kv})(({theme:e,ownerState:t})=>he({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},e.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},t.size==="small"&&{paddingTop:21,paddingBottom:4},t.hiddenLabel&&{paddingTop:16,paddingBottom:17},t.startAdornment&&{paddingLeft:0},t.endAdornment&&{paddingRight:0},t.hiddenLabel&&t.size==="small"&&{paddingTop:8,paddingBottom:9},t.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0})),mA=Q.forwardRef(function(t,n){var a,c,d,o;const v=Vr({props:t,name:"MuiFilledInput"}),{components:x={},componentsProps:E,fullWidth:T=!1,inputComponent:P="input",multiline:I=!1,slotProps:q,slots:$={},type:G="text"}=v,D=Vt(v,c7),F=he({},v,{fullWidth:T,inputComponent:P,multiline:I,type:G}),V=p7(v),B={root:{ownerState:F},input:{ownerState:F}},z=q??E?ko(B,q??E):B,re=(a=(c=$.root)!=null?c:x.Root)!=null?a:f7,ie=(d=(o=$.input)!=null?o:x.Input)!=null?d:h7;return Xe.jsx(Lb,he({slots:{root:re,input:ie},componentsProps:z,fullWidth:T,inputComponent:P,multiline:I,ref:n,type:G},D,{classes:V}))});mA.muiName="Input";const yA=mA;function d7(e){return Nr("MuiFormControl",e)}Ir("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const m7=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],y7=e=>{const{classes:t,margin:n,fullWidth:a}=e,c={root:["root",n!=="none"&&`margin${er(n)}`,a&&"fullWidth"]};return jr(c,d7,t)},g7=Dt("div",{name:"MuiFormControl",slot:"Root",overridesResolver:({ownerState:e},t)=>he({},t.root,t[`margin${er(e.margin)}`],e.fullWidth&&t.fullWidth)})(({ownerState:e})=>he({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},e.margin==="normal"&&{marginTop:16,marginBottom:8},e.margin==="dense"&&{marginTop:8,marginBottom:4},e.fullWidth&&{width:"100%"})),v7=Q.forwardRef(function(t,n){const a=Vr({props:t,name:"MuiFormControl"}),{children:c,className:d,color:o="primary",component:v="div",disabled:x=!1,error:E=!1,focused:T,fullWidth:P=!1,hiddenLabel:I=!1,margin:q="none",required:$=!1,size:G="medium",variant:D="outlined"}=a,F=Vt(a,m7),V=he({},a,{color:o,component:v,disabled:x,error:E,fullWidth:P,hiddenLabel:I,margin:q,required:$,size:G,variant:D}),B=y7(V),[z,re]=Q.useState(()=>{let pe=!1;return c&&Q.Children.forEach(c,Oe=>{if(!Sy(Oe,["Input","Select"]))return;const Ue=Sy(Oe,["Select"])?Oe.props.input:Oe;Ue&&GV(Ue.props)&&(pe=!0)}),pe}),[ie,ce]=Q.useState(()=>{let pe=!1;return c&&Q.Children.forEach(c,Oe=>{Sy(Oe,["Input","Select"])&&(dg(Oe.props,!0)||dg(Oe.props.inputProps,!0))&&(pe=!0)}),pe}),[xe,Te]=Q.useState(!1);x&&xe&&Te(!1);const ve=T!==void 0&&!x?T:xe;let we;const ee=Q.useMemo(()=>({adornedStart:z,setAdornedStart:re,color:o,disabled:x,error:E,filled:ie,focused:ve,fullWidth:P,hiddenLabel:I,size:G,onBlur:()=>{Te(!1)},onEmpty:()=>{ce(!1)},onFilled:()=>{ce(!0)},onFocus:()=>{Te(!0)},registerEffect:we,required:$,variant:D}),[z,o,x,E,ie,ve,P,I,we,$,G,D]);return Xe.jsx(Rb.Provider,{value:ee,children:Xe.jsx(g7,he({as:v,ownerState:V,className:Wt(B.root,d),ref:n},F,{children:c}))})}),Pv=v7;function _7(e){return Nr("MuiFormHelperText",e)}const x7=Ir("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]),SC=x7;var EC;const b7=["children","className","component","disabled","error","filled","focused","margin","required","variant"],w7=e=>{const{classes:t,contained:n,size:a,disabled:c,error:d,filled:o,focused:v,required:x}=e,E={root:["root",c&&"disabled",d&&"error",a&&`size${er(a)}`,n&&"contained",v&&"focused",o&&"filled",x&&"required"]};return jr(E,_7,t)},S7=Dt("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.size&&t[`size${er(n.size)}`],n.contained&&t.contained,n.filled&&t.filled]}})(({theme:e,ownerState:t})=>he({color:(e.vars||e).palette.text.secondary},e.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${SC.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${SC.error}`]:{color:(e.vars||e).palette.error.main}},t.size==="small"&&{marginTop:4},t.contained&&{marginLeft:14,marginRight:14})),E7=Q.forwardRef(function(t,n){const a=Vr({props:t,name:"MuiFormHelperText"}),{children:c,className:d,component:o="p"}=a,v=Vt(a,b7),x=Zp(),E=Hp({props:a,muiFormControl:x,states:["variant","size","disabled","error","filled","focused","required"]}),T=he({},a,{component:o,contained:E.variant==="filled"||E.variant==="outlined",variant:E.variant,size:E.size,disabled:E.disabled,error:E.error,filled:E.filled,focused:E.focused,required:E.required}),P=w7(T);return Xe.jsx(S7,he({as:o,ownerState:T,className:Wt(P.root,d),ref:n},v,{children:c===" "?EC||(EC=Xe.jsx("span",{className:"notranslate",children:""})):c}))}),C7=E7;function k7(e){return Nr("MuiFormLabel",e)}const T7=Ir("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),Bh=T7,I7=["children","className","color","component","disabled","error","filled","focused","required"],P7=e=>{const{classes:t,color:n,focused:a,disabled:c,error:d,filled:o,required:v}=e,x={root:["root",`color${er(n)}`,c&&"disabled",d&&"error",o&&"filled",a&&"focused",v&&"required"],asterisk:["asterisk",d&&"error"]};return jr(x,k7,t)},A7=Dt("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:({ownerState:e},t)=>he({},t.root,e.color==="secondary"&&t.colorSecondary,e.filled&&t.filled)})(({theme:e,ownerState:t})=>he({color:(e.vars||e).palette.text.secondary},e.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",[`&.${Bh.focused}`]:{color:(e.vars||e).palette[t.color].main},[`&.${Bh.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${Bh.error}`]:{color:(e.vars||e).palette.error.main}})),M7=Dt("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(({theme:e})=>({[`&.${Bh.error}`]:{color:(e.vars||e).palette.error.main}})),R7=Q.forwardRef(function(t,n){const a=Vr({props:t,name:"MuiFormLabel"}),{children:c,className:d,component:o="label"}=a,v=Vt(a,I7),x=Zp(),E=Hp({props:a,muiFormControl:x,states:["color","required","focused","disabled","error","filled"]}),T=he({},a,{color:E.color||"primary",component:o,disabled:E.disabled,error:E.error,filled:E.filled,focused:E.focused,required:E.required}),P=P7(T);return Xe.jsxs(A7,he({as:o,ownerState:T,className:Wt(P.root,d),ref:n},v,{children:[c,E.required&&Xe.jsxs(M7,{ownerState:T,"aria-hidden":!0,className:P.asterisk,children:["","*"]})]}))}),L7=R7,z7=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function Vx(e){return`scale(${e}, ${e**2})`}const D7={entering:{opacity:1,transform:Vx(1)},entered:{opacity:1,transform:"none"}},P_=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),gA=Q.forwardRef(function(t,n){const{addEndListener:a,appear:c=!0,children:d,easing:o,in:v,onEnter:x,onEntered:E,onEntering:T,onExit:P,onExited:I,onExiting:q,style:$,timeout:G="auto",TransitionComponent:D=nA}=t,F=Vt(t,z7),V=VP(),B=Q.useRef(),z=Gp(),re=Q.useRef(null),ie=Ui(re,d.ref,n),ce=Ue=>Ee=>{if(Ue){const ke=re.current;Ee===void 0?Ue(ke):Ue(ke,Ee)}},xe=ce(T),Te=ce((Ue,Ee)=>{iA(Ue);const{duration:ke,delay:je,easing:Ze}=hg({style:$,timeout:G,easing:o},{mode:"enter"});let wt;G==="auto"?(wt=z.transitions.getAutoHeightDuration(Ue.clientHeight),B.current=wt):wt=ke,Ue.style.transition=[z.transitions.create("opacity",{duration:wt,delay:je}),z.transitions.create("transform",{duration:P_?wt:wt*.666,delay:je,easing:Ze})].join(","),x&&x(Ue,Ee)}),ve=ce(E),we=ce(q),ee=ce(Ue=>{const{duration:Ee,delay:ke,easing:je}=hg({style:$,timeout:G,easing:o},{mode:"exit"});let Ze;G==="auto"?(Ze=z.transitions.getAutoHeightDuration(Ue.clientHeight),B.current=Ze):Ze=Ee,Ue.style.transition=[z.transitions.create("opacity",{duration:Ze,delay:ke}),z.transitions.create("transform",{duration:P_?Ze:Ze*.666,delay:P_?ke:ke||Ze*.333,easing:je})].join(","),Ue.style.opacity=0,Ue.style.transform=Vx(.75),P&&P(Ue)}),pe=ce(I),Oe=Ue=>{G==="auto"&&V.start(B.current||0,Ue),a&&a(re.current,Ue)};return Xe.jsx(D,he({appear:c,in:v,nodeRef:re,onEnter:Te,onEntered:ve,onEntering:xe,onExit:ee,onExited:pe,onExiting:we,addEndListener:Oe,timeout:G==="auto"?null:G},F,{children:(Ue,Ee)=>Q.cloneElement(d,he({style:he({opacity:0,transform:Vx(.75),visibility:Ue==="exited"&&!v?"hidden":void 0},D7[Ue],$,d.props.style),ref:ie},Ee))}))});gA.muiSupportAuto=!0;const O7=gA;function B7(e){return Nr("MuiIcon",e)}Ir("MuiIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const N7=["baseClassName","className","color","component","fontSize"],F7=e=>{const{color:t,fontSize:n,classes:a}=e,c={root:["root",t!=="inherit"&&`color${er(t)}`,`fontSize${er(n)}`]};return jr(c,B7,a)},U7=Dt("span",{name:"MuiIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="inherit"&&t[`color${er(n.color)}`],t[`fontSize${er(n.fontSize)}`]]}})(({theme:e,ownerState:t})=>({userSelect:"none",width:"1em",height:"1em",overflow:"hidden",display:"inline-block",textAlign:"center",flexShrink:0,fontSize:{inherit:"inherit",small:e.typography.pxToRem(20),medium:e.typography.pxToRem(24),large:e.typography.pxToRem(36)}[t.fontSize],color:{primary:(e.vars||e).palette.primary.main,secondary:(e.vars||e).palette.secondary.main,info:(e.vars||e).palette.info.main,success:(e.vars||e).palette.success.main,warning:(e.vars||e).palette.warning.main,action:(e.vars||e).palette.action.active,error:(e.vars||e).palette.error.main,disabled:(e.vars||e).palette.action.disabled,inherit:void 0}[t.color]})),vA=Q.forwardRef(function(t,n){const a=Vr({props:t,name:"MuiIcon"}),{baseClassName:c="material-icons",className:d,color:o="inherit",component:v="span",fontSize:x="medium"}=a,E=Vt(a,N7),T=he({},a,{baseClassName:c,color:o,component:v,fontSize:x}),P=F7(T);return Xe.jsx(U7,he({as:v,className:Wt(c,"notranslate",P.root,d),ownerState:T,"aria-hidden":!0,ref:n},E))});vA.muiName="Icon";const $7=vA,j7=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],V7=e=>{const{classes:t,disableUnderline:n}=e,c=jr({root:["root",!n&&"underline"],input:["input"]},QV,t);return he({},t,c)},q7=Dt(Tv,{shouldForwardProp:e=>Go(e)||e==="classes",name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...Cv(e,t),!n.disableUnderline&&t.underline]}})(({theme:e,ownerState:t})=>{let a=e.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return e.vars&&(a=`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`),he({position:"relative"},t.formControl&&{"label + &":{marginTop:16}},!t.disableUnderline&&{"&::after":{borderBottom:`2px solid ${(e.vars||e).palette[t.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${lh.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${lh.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${a}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${lh.disabled}, .${lh.error}):before`]:{borderBottom:`2px solid ${(e.vars||e).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${a}`}},[`&.${lh.disabled}:before`]:{borderBottomStyle:"dotted"}})}),W7=Dt(Iv,{name:"MuiInput",slot:"Input",overridesResolver:kv})({}),_A=Q.forwardRef(function(t,n){var a,c,d,o;const v=Vr({props:t,name:"MuiInput"}),{disableUnderline:x,components:E={},componentsProps:T,fullWidth:P=!1,inputComponent:I="input",multiline:q=!1,slotProps:$,slots:G={},type:D="text"}=v,F=Vt(v,j7),V=V7(v),z={root:{ownerState:{disableUnderline:x}}},re=$??T?ko($??T,z):z,ie=(a=(c=G.root)!=null?c:E.Root)!=null?a:q7,ce=(d=(o=G.input)!=null?o:E.Input)!=null?d:W7;return Xe.jsx(Lb,he({slots:{root:ie,input:ce},slotProps:re,fullWidth:P,inputComponent:I,multiline:q,ref:n,type:D},F,{classes:V}))});_A.muiName="Input";const xA=_A;function G7(e){return Nr("MuiInputLabel",e)}Ir("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const H7=["disableAnimation","margin","shrink","variant","className"],Z7=e=>{const{classes:t,formControl:n,size:a,shrink:c,disableAnimation:d,variant:o,required:v}=e,x={root:["root",n&&"formControl",!d&&"animated",c&&"shrink",a&&a!=="normal"&&`size${er(a)}`,o],asterisk:[v&&"asterisk"]},E=jr(x,G7,t);return he({},t,E)},K7=Dt(L7,{shouldForwardProp:e=>Go(e)||e==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${Bh.asterisk}`]:t.asterisk},t.root,n.formControl&&t.formControl,n.size==="small"&&t.sizeSmall,n.shrink&&t.shrink,!n.disableAnimation&&t.animated,n.focused&&t.focused,t[n.variant]]}})(({theme:e,ownerState:t})=>he({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},t.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},t.size==="small"&&{transform:"translate(0, 17px) scale(1)"},t.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!t.disableAnimation&&{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})},t.variant==="filled"&&he({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},t.size==="small"&&{transform:"translate(12px, 13px) scale(1)"},t.shrink&&he({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},t.size==="small"&&{transform:"translate(12px, 4px) scale(0.75)"})),t.variant==="outlined"&&he({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},t.size==="small"&&{transform:"translate(14px, 9px) scale(1)"},t.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))),X7=Q.forwardRef(function(t,n){const a=Vr({name:"MuiInputLabel",props:t}),{disableAnimation:c=!1,shrink:d,className:o}=a,v=Vt(a,H7),x=Zp();let E=d;typeof E>"u"&&x&&(E=x.filled||x.focused||x.adornedStart);const T=Hp({props:a,muiFormControl:x,states:["size","variant","required","focused"]}),P=he({},a,{disableAnimation:c,formControl:x,shrink:E,size:T.size,variant:T.variant,required:T.required,focused:T.focused}),I=Z7(P);return Xe.jsx(K7,he({"data-shrink":E,ownerState:P,ref:n,className:Wt(I.root,o)},v,{classes:I}))}),zb=X7,Y7=Q.createContext({}),is=Y7;function J7(e){return Nr("MuiList",e)}Ir("MuiList",["root","padding","dense","subheader"]);const Q7=["children","className","component","dense","disablePadding","subheader"],eq=e=>{const{classes:t,disablePadding:n,dense:a,subheader:c}=e;return jr({root:["root",!n&&"padding",a&&"dense",c&&"subheader"]},J7,t)},tq=Dt("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disablePadding&&t.padding,n.dense&&t.dense,n.subheader&&t.subheader]}})(({ownerState:e})=>he({listStyle:"none",margin:0,padding:0,position:"relative"},!e.disablePadding&&{paddingTop:8,paddingBottom:8},e.subheader&&{paddingTop:0})),rq=Q.forwardRef(function(t,n){const a=Vr({props:t,name:"MuiList"}),{children:c,className:d,component:o="ul",dense:v=!1,disablePadding:x=!1,subheader:E}=a,T=Vt(a,Q7),P=Q.useMemo(()=>({dense:v}),[v]),I=he({},a,{component:o,dense:v,disablePadding:x}),q=eq(I);return Xe.jsx(is.Provider,{value:P,children:Xe.jsxs(tq,he({as:o,className:Wt(q.root,d),ref:n,ownerState:I},T,{children:[E,c]}))})}),Db=rq;function nq(e){return Nr("MuiListItem",e)}const iq=Ir("MuiListItem",["root","container","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","padding","button","secondaryAction","selected"]),Qc=iq;function oq(e){return Nr("MuiListItemButton",e)}const aq=Ir("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]),ep=aq,sq=["alignItems","autoFocus","component","children","dense","disableGutters","divider","focusVisibleClassName","selected","className"],lq=(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.alignItems==="flex-start"&&t.alignItemsFlexStart,n.divider&&t.divider,!n.disableGutters&&t.gutters]},uq=e=>{const{alignItems:t,classes:n,dense:a,disabled:c,disableGutters:d,divider:o,selected:v}=e,E=jr({root:["root",a&&"dense",!d&&"gutters",o&&"divider",c&&"disabled",t==="flex-start"&&"alignItemsFlexStart",v&&"selected"]},oq,n);return he({},n,E)},cq=Dt(Wu,{shouldForwardProp:e=>Go(e)||e==="classes",name:"MuiListItemButton",slot:"Root",overridesResolver:lq})(({theme:e,ownerState:t})=>he({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${ep.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:fi(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${ep.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:fi(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${ep.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:fi(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:fi(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${ep.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${ep.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},t.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},t.alignItems==="flex-start"&&{alignItems:"flex-start"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.dense&&{paddingTop:4,paddingBottom:4})),pq=Q.forwardRef(function(t,n){const a=Vr({props:t,name:"MuiListItemButton"}),{alignItems:c="center",autoFocus:d=!1,component:o="div",children:v,dense:x=!1,disableGutters:E=!1,divider:T=!1,focusVisibleClassName:P,selected:I=!1,className:q}=a,$=Vt(a,sq),G=Q.useContext(is),D=Q.useMemo(()=>({dense:x||G.dense||!1,alignItems:c,disableGutters:E}),[c,G.dense,x,E]),F=Q.useRef(null);Ea(()=>{d&&F.current&&F.current.focus()},[d]);const V=he({},a,{alignItems:c,dense:D.dense,disableGutters:E,divider:T,selected:I}),B=uq(V),z=Ui(F,n);return Xe.jsx(is.Provider,{value:D,children:Xe.jsx(cq,he({ref:z,href:$.href||$.to,component:($.href||$.to)&&o==="div"?"button":o,focusVisibleClassName:Wt(B.focusVisible,P),ownerState:V,className:Wt(B.root,q)},$,{classes:B,children:v}))})}),fq=pq;function hq(e){return Nr("MuiListItemSecondaryAction",e)}Ir("MuiListItemSecondaryAction",["root","disableGutters"]);const dq=["className"],mq=e=>{const{disableGutters:t,classes:n}=e;return jr({root:["root",t&&"disableGutters"]},hq,n)},yq=Dt("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.disableGutters&&t.disableGutters]}})(({ownerState:e})=>he({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"},e.disableGutters&&{right:0})),bA=Q.forwardRef(function(t,n){const a=Vr({props:t,name:"MuiListItemSecondaryAction"}),{className:c}=a,d=Vt(a,dq),o=Q.useContext(is),v=he({},a,{disableGutters:o.disableGutters}),x=mq(v);return Xe.jsx(yq,he({className:Wt(x.root,c),ownerState:v,ref:n},d))});bA.muiName="ListItemSecondaryAction";const gq=bA,vq=["className"],_q=["alignItems","autoFocus","button","children","className","component","components","componentsProps","ContainerComponent","ContainerProps","dense","disabled","disableGutters","disablePadding","divider","focusVisibleClassName","secondaryAction","selected","slotProps","slots"],xq=(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.alignItems==="flex-start"&&t.alignItemsFlexStart,n.divider&&t.divider,!n.disableGutters&&t.gutters,!n.disablePadding&&t.padding,n.button&&t.button,n.hasSecondaryAction&&t.secondaryAction]},bq=e=>{const{alignItems:t,button:n,classes:a,dense:c,disabled:d,disableGutters:o,disablePadding:v,divider:x,hasSecondaryAction:E,selected:T}=e;return jr({root:["root",c&&"dense",!o&&"gutters",!v&&"padding",x&&"divider",d&&"disabled",n&&"button",t==="flex-start"&&"alignItemsFlexStart",E&&"secondaryAction",T&&"selected"],container:["container"]},nq,a)},wq=Dt("div",{name:"MuiListItem",slot:"Root",overridesResolver:xq})(({theme:e,ownerState:t})=>he({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left"},!t.disablePadding&&he({paddingTop:8,paddingBottom:8},t.dense&&{paddingTop:4,paddingBottom:4},!t.disableGutters&&{paddingLeft:16,paddingRight:16},!!t.secondaryAction&&{paddingRight:48}),!!t.secondaryAction&&{[`& > .${ep.root}`]:{paddingRight:48}},{[`&.${Qc.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${Qc.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:fi(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${Qc.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:fi(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${Qc.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},t.alignItems==="flex-start"&&{alignItems:"flex-start"},t.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},t.button&&{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Qc.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:fi(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:fi(e.palette.primary.main,e.palette.action.selectedOpacity)}}},t.hasSecondaryAction&&{paddingRight:48})),Sq=Dt("li",{name:"MuiListItem",slot:"Container",overridesResolver:(e,t)=>t.container})({position:"relative"}),Eq=Q.forwardRef(function(t,n){const a=Vr({props:t,name:"MuiListItem"}),{alignItems:c="center",autoFocus:d=!1,button:o=!1,children:v,className:x,component:E,components:T={},componentsProps:P={},ContainerComponent:I="li",ContainerProps:{className:q}={},dense:$=!1,disabled:G=!1,disableGutters:D=!1,disablePadding:F=!1,divider:V=!1,focusVisibleClassName:B,secondaryAction:z,selected:re=!1,slotProps:ie={},slots:ce={}}=a,xe=Vt(a.ContainerProps,vq),Te=Vt(a,_q),ve=Q.useContext(is),we=Q.useMemo(()=>({dense:$||ve.dense||!1,alignItems:c,disableGutters:D}),[c,ve.dense,$,D]),ee=Q.useRef(null);Ea(()=>{d&&ee.current&&ee.current.focus()},[d]);const pe=Q.Children.toArray(v),Oe=pe.length&&Sy(pe[pe.length-1],["ListItemSecondaryAction"]),Ue=he({},a,{alignItems:c,autoFocus:d,button:o,dense:we.dense,disabled:G,disableGutters:D,disablePadding:F,divider:V,hasSecondaryAction:Oe,selected:re}),Ee=bq(Ue),ke=Ui(ee,n),je=ce.root||T.Root||wq,Ze=ie.root||P.root||{},wt=he({className:Wt(Ee.root,Ze.className,x),disabled:G},Te);let Pe=E||"li";return o&&(wt.component=E||"div",wt.focusVisibleClassName=Wt(Qc.focusVisible,B),Pe=Wu),Oe?(Pe=!wt.component&&!E?"div":Pe,I==="li"&&(Pe==="li"?Pe="div":wt.component==="li"&&(wt.component="div")),Xe.jsx(is.Provider,{value:we,children:Xe.jsxs(Sq,he({as:I,className:Wt(Ee.container,q),ref:ke,ownerState:Ue},xe,{children:[Xe.jsx(je,he({},Ze,!zp(je)&&{as:Pe,ownerState:he({},Ue,Ze.ownerState)},wt,{children:pe})),pe.pop()]}))})):Xe.jsx(is.Provider,{value:we,children:Xe.jsxs(je,he({},Ze,{as:Pe,ref:ke},!zp(je)&&{ownerState:he({},Ue,Ze.ownerState)},wt,{children:[pe,z&&Xe.jsx(gq,{children:z})]}))})}),wA=Eq,Cq=Ir("MuiListItemIcon",["root","alignItemsFlexStart"]),CC=Cq;function kq(e){return Nr("MuiListItemText",e)}const Tq=Ir("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),mg=Tq,Iq=["children","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"],Pq=e=>{const{classes:t,inset:n,primary:a,secondary:c,dense:d}=e;return jr({root:["root",n&&"inset",d&&"dense",a&&c&&"multiline"],primary:["primary"],secondary:["secondary"]},kq,t)},Aq=Dt("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${mg.primary}`]:t.primary},{[`& .${mg.secondary}`]:t.secondary},t.root,n.inset&&t.inset,n.primary&&n.secondary&&t.multiline,n.dense&&t.dense]}})(({ownerState:e})=>he({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},e.primary&&e.secondary&&{marginTop:6,marginBottom:6},e.inset&&{paddingLeft:56})),Mq=Q.forwardRef(function(t,n){const a=Vr({props:t,name:"MuiListItemText"}),{children:c,className:d,disableTypography:o=!1,inset:v=!1,primary:x,primaryTypographyProps:E,secondary:T,secondaryTypographyProps:P}=a,I=Vt(a,Iq),{dense:q}=Q.useContext(is);let $=x??c,G=T;const D=he({},a,{disableTypography:o,inset:v,primary:!!$,secondary:!!G,dense:q}),F=Pq(D);return $!=null&&$.type!==lp&&!o&&($=Xe.jsx(lp,he({variant:q?"body2":"body1",className:F.primary,component:E!=null&&E.variant?void 0:"span",display:"block"},E,{children:$}))),G!=null&&G.type!==lp&&!o&&(G=Xe.jsx(lp,he({variant:"body2",className:F.secondary,color:"text.secondary",display:"block"},P,{children:G}))),Xe.jsxs(Aq,he({className:Wt(F.root,d),ownerState:D,ref:n},I,{children:[$,G]}))}),Rq=Mq,Lq=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function A_(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function kC(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function SA(e,t){if(t===void 0)return!0;let n=e.innerText;return n===void 0&&(n=e.textContent),n=n.trim().toLowerCase(),n.length===0?!1:t.repeating?n[0]===t.keys[0]:n.indexOf(t.keys.join(""))===0}function uh(e,t,n,a,c,d){let o=!1,v=c(e,t,t?n:!1);for(;v;){if(v===e.firstChild){if(o)return!1;o=!0}const x=a?!1:v.disabled||v.getAttribute("aria-disabled")==="true";if(!v.hasAttribute("tabindex")||!SA(v,d)||x)v=c(e,v,n);else return v.focus(),!0}return!1}const zq=Q.forwardRef(function(t,n){const{actions:a,autoFocus:c=!1,autoFocusItem:d=!1,children:o,className:v,disabledItemsFocusable:x=!1,disableListWrap:E=!1,onKeyDown:T,variant:P="selectedMenu"}=t,I=Vt(t,Lq),q=Q.useRef(null),$=Q.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Ea(()=>{c&&q.current.focus()},[c]),Q.useImperativeHandle(a,()=>({adjustStyleForScrollbar:(B,z)=>{const re=!q.current.style.width;if(B.clientHeight<q.current.clientHeight&&re){const ie=`${qP(To(B))}px`;q.current.style[z.direction==="rtl"?"paddingLeft":"paddingRight"]=ie,q.current.style.width=`calc(100% + ${ie})`}return q.current}}),[]);const G=B=>{const z=q.current,re=B.key,ie=To(z).activeElement;if(re==="ArrowDown")B.preventDefault(),uh(z,ie,E,x,A_);else if(re==="ArrowUp")B.preventDefault(),uh(z,ie,E,x,kC);else if(re==="Home")B.preventDefault(),uh(z,null,E,x,A_);else if(re==="End")B.preventDefault(),uh(z,null,E,x,kC);else if(re.length===1){const ce=$.current,xe=re.toLowerCase(),Te=performance.now();ce.keys.length>0&&(Te-ce.lastTime>500?(ce.keys=[],ce.repeating=!0,ce.previousKeyMatched=!0):ce.repeating&&xe!==ce.keys[0]&&(ce.repeating=!1)),ce.lastTime=Te,ce.keys.push(xe);const ve=ie&&!ce.repeating&&SA(ie,ce);ce.previousKeyMatched&&(ve||uh(z,ie,!1,x,A_,ce))?B.preventDefault():ce.previousKeyMatched=!1}T&&T(B)},D=Ui(q,n);let F=-1;Q.Children.forEach(o,(B,z)=>{if(!Q.isValidElement(B)){F===z&&(F+=1,F>=o.length&&(F=-1));return}B.props.disabled||(P==="selectedMenu"&&B.props.selected||F===-1)&&(F=z),F===z&&(B.props.disabled||B.props.muiSkipListHighlight||B.type.muiSkipListHighlight)&&(F+=1,F>=o.length&&(F=-1))});const V=Q.Children.map(o,(B,z)=>{if(z===F){const re={};return d&&(re.autoFocus=!0),B.props.tabIndex===void 0&&P==="selectedMenu"&&(re.tabIndex=0),Q.cloneElement(B,re)}return B});return Xe.jsx(Db,he({role:"menu",ref:D,className:v,onKeyDown:G,tabIndex:c?0:-1},I,{children:V}))}),Dq=zq;function Oq(e){return Nr("MuiPopover",e)}Ir("MuiPopover",["root","paper"]);const Bq=["onEntering"],Nq=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],Fq=["slotProps"];function TC(e,t){let n=0;return typeof t=="number"?n=t:t==="center"?n=e.height/2:t==="bottom"&&(n=e.height),n}function IC(e,t){let n=0;return typeof t=="number"?n=t:t==="center"?n=e.width/2:t==="right"&&(n=e.width),n}function PC(e){return[e.horizontal,e.vertical].map(t=>typeof t=="number"?`${t}px`:t).join(" ")}function M_(e){return typeof e=="function"?e():e}const Uq=e=>{const{classes:t}=e;return jr({root:["root"],paper:["paper"]},Oq,t)},$q=Dt(uA,{name:"MuiPopover",slot:"Root",overridesResolver:(e,t)=>t.root})({}),EA=Dt(Mb,{name:"MuiPopover",slot:"Paper",overridesResolver:(e,t)=>t.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),jq=Q.forwardRef(function(t,n){var a,c,d;const o=Vr({props:t,name:"MuiPopover"}),{action:v,anchorEl:x,anchorOrigin:E={vertical:"top",horizontal:"left"},anchorPosition:T,anchorReference:P="anchorEl",children:I,className:q,container:$,elevation:G=8,marginThreshold:D=16,open:F,PaperProps:V={},slots:B,slotProps:z,transformOrigin:re={vertical:"top",horizontal:"left"},TransitionComponent:ie=O7,transitionDuration:ce="auto",TransitionProps:{onEntering:xe}={},disableScrollLock:Te=!1}=o,ve=Vt(o.TransitionProps,Bq),we=Vt(o,Nq),ee=(a=z==null?void 0:z.paper)!=null?a:V,pe=Q.useRef(),Oe=Ui(pe,ee.ref),Ue=he({},o,{anchorOrigin:E,anchorReference:P,elevation:G,marginThreshold:D,externalPaperSlotProps:ee,transformOrigin:re,TransitionComponent:ie,transitionDuration:ce,TransitionProps:ve}),Ee=Uq(Ue),ke=Q.useCallback(()=>{if(P==="anchorPosition")return T;const st=M_(x),tr=(st&&st.nodeType===1?st:To(pe.current).body).getBoundingClientRect();return{top:tr.top+TC(tr,E.vertical),left:tr.left+IC(tr,E.horizontal)}},[x,E.horizontal,E.vertical,T,P]),je=Q.useCallback(st=>({vertical:TC(st,re.vertical),horizontal:IC(st,re.horizontal)}),[re.horizontal,re.vertical]),Ze=Q.useCallback(st=>{const Ot={width:st.offsetWidth,height:st.offsetHeight},tr=je(Ot);if(P==="none")return{top:null,left:null,transformOrigin:PC(tr)};const Lr=ke();let Fr=Lr.top-tr.vertical,rr=Lr.left-tr.horizontal;const qr=Fr+Ot.height,zr=rr+Ot.width,Cr=Ws(M_(x)),an=Cr.innerHeight-D,Rr=Cr.innerWidth-D;if(D!==null&&Fr<D){const ur=Fr-D;Fr-=ur,tr.vertical+=ur}else if(D!==null&&qr>an){const ur=qr-an;Fr-=ur,tr.vertical+=ur}if(D!==null&&rr<D){const ur=rr-D;rr-=ur,tr.horizontal+=ur}else if(zr>Rr){const ur=zr-Rr;rr-=ur,tr.horizontal+=ur}return{top:`${Math.round(Fr)}px`,left:`${Math.round(rr)}px`,transformOrigin:PC(tr)}},[x,P,ke,je,D]),[wt,Pe]=Q.useState(F),Ge=Q.useCallback(()=>{const st=pe.current;if(!st)return;const Ot=Ze(st);Ot.top!==null&&(st.style.top=Ot.top),Ot.left!==null&&(st.style.left=Ot.left),st.style.transformOrigin=Ot.transformOrigin,Pe(!0)},[Ze]);Q.useEffect(()=>(Te&&window.addEventListener("scroll",Ge),()=>window.removeEventListener("scroll",Ge)),[x,Te,Ge]);const lt=(st,Ot)=>{xe&&xe(st,Ot),Ge()},Re=()=>{Pe(!1)};Q.useEffect(()=>{F&&Ge()}),Q.useImperativeHandle(v,()=>F?{updatePosition:()=>{Ge()}}:null,[F,Ge]),Q.useEffect(()=>{if(!F)return;const st=ev(()=>{Ge()}),Ot=Ws(x);return Ot.addEventListener("resize",st),()=>{st.clear(),Ot.removeEventListener("resize",st)}},[x,F,Ge]);let qe=ce;ce==="auto"&&!ie.muiSupportAuto&&(qe=void 0);const Xt=$||(x?To(M_(x)).body:void 0),Pt=(c=B==null?void 0:B.root)!=null?c:$q,Bt=(d=B==null?void 0:B.paper)!=null?d:EA,Ct=os({elementType:Bt,externalSlotProps:he({},ee,{style:wt?ee.style:he({},ee.style,{opacity:0})}),additionalProps:{elevation:G,ref:Oe},ownerState:Ue,className:Wt(Ee.paper,ee==null?void 0:ee.className)}),ir=os({elementType:Pt,externalSlotProps:(z==null?void 0:z.root)||{},externalForwardedProps:we,additionalProps:{ref:n,slotProps:{backdrop:{invisible:!0}},container:Xt,open:F},ownerState:Ue,className:Wt(Ee.root,q)}),{slotProps:Kt}=ir,Jt=Vt(ir,Fq);return Xe.jsx(Pt,he({},Jt,!zp(Pt)&&{slotProps:Kt,disableScrollLock:Te},{children:Xe.jsx(ie,he({appear:!0,in:F,onEntering:lt,onExited:Re,timeout:qe},ve,{children:Xe.jsx(Bt,he({},Ct,{children:I}))}))}))}),Vq=jq;function qq(e){return Nr("MuiMenu",e)}Ir("MuiMenu",["root","paper","list"]);const Wq=["onEntering"],Gq=["autoFocus","children","className","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant","slots","slotProps"],Hq={vertical:"top",horizontal:"right"},Zq={vertical:"top",horizontal:"left"},Kq=e=>{const{classes:t}=e;return jr({root:["root"],paper:["paper"],list:["list"]},qq,t)},Xq=Dt(Vq,{shouldForwardProp:e=>Go(e)||e==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Yq=Dt(EA,{name:"MuiMenu",slot:"Paper",overridesResolver:(e,t)=>t.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),Jq=Dt(Dq,{name:"MuiMenu",slot:"List",overridesResolver:(e,t)=>t.list})({outline:0}),Qq=Q.forwardRef(function(t,n){var a,c;const d=Vr({props:t,name:"MuiMenu"}),{autoFocus:o=!0,children:v,className:x,disableAutoFocusItem:E=!1,MenuListProps:T={},onClose:P,open:I,PaperProps:q={},PopoverClasses:$,transitionDuration:G="auto",TransitionProps:{onEntering:D}={},variant:F="selectedMenu",slots:V={},slotProps:B={}}=d,z=Vt(d.TransitionProps,Wq),re=Vt(d,Gq),ie=Gp(),ce=ie.direction==="rtl",xe=he({},d,{autoFocus:o,disableAutoFocusItem:E,MenuListProps:T,onEntering:D,PaperProps:q,transitionDuration:G,TransitionProps:z,variant:F}),Te=Kq(xe),ve=o&&!E&&I,we=Q.useRef(null),ee=(Ze,wt)=>{we.current&&we.current.adjustStyleForScrollbar(Ze,ie),D&&D(Ze,wt)},pe=Ze=>{Ze.key==="Tab"&&(Ze.preventDefault(),P&&P(Ze,"tabKeyDown"))};let Oe=-1;Q.Children.map(v,(Ze,wt)=>{Q.isValidElement(Ze)&&(Ze.props.disabled||(F==="selectedMenu"&&Ze.props.selected||Oe===-1)&&(Oe=wt))});const Ue=(a=V.paper)!=null?a:Yq,Ee=(c=B.paper)!=null?c:q,ke=os({elementType:V.root,externalSlotProps:B.root,ownerState:xe,className:[Te.root,x]}),je=os({elementType:Ue,externalSlotProps:Ee,ownerState:xe,className:Te.paper});return Xe.jsx(Xq,he({onClose:P,anchorOrigin:{vertical:"bottom",horizontal:ce?"right":"left"},transformOrigin:ce?Hq:Zq,slots:{paper:Ue,root:V.root},slotProps:{root:ke,paper:je},open:I,ref:n,transitionDuration:G,TransitionProps:he({onEntering:ee},z),ownerState:xe},re,{classes:$,children:Xe.jsx(Jq,he({onKeyDown:pe,actions:we,autoFocus:o&&(Oe===-1||E),autoFocusItem:ve,variant:F},T,{className:Wt(Te.list,T.className),children:v}))}))}),eW=Qq;function tW(e){return Nr("MuiMenuItem",e)}const rW=Ir("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),ch=rW,nW=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],iW=(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.divider&&t.divider,!n.disableGutters&&t.gutters]},oW=e=>{const{disabled:t,dense:n,divider:a,disableGutters:c,selected:d,classes:o}=e,x=jr({root:["root",n&&"dense",t&&"disabled",!c&&"gutters",a&&"divider",d&&"selected"]},tW,o);return he({},o,x)},aW=Dt(Wu,{shouldForwardProp:e=>Go(e)||e==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:iW})(({theme:e,ownerState:t})=>he({},e.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${ch.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:fi(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${ch.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:fi(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${ch.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:fi(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:fi(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${ch.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${ch.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${wC.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${wC.inset}`]:{marginLeft:52},[`& .${mg.root}`]:{marginTop:0,marginBottom:0},[`& .${mg.inset}`]:{paddingLeft:36},[`& .${CC.root}`]:{minWidth:36}},!t.dense&&{[e.breakpoints.up("sm")]:{minHeight:"auto"}},t.dense&&he({minHeight:32,paddingTop:4,paddingBottom:4},e.typography.body2,{[`& .${CC.root} svg`]:{fontSize:"1.25rem"}}))),sW=Q.forwardRef(function(t,n){const a=Vr({props:t,name:"MuiMenuItem"}),{autoFocus:c=!1,component:d="li",dense:o=!1,divider:v=!1,disableGutters:x=!1,focusVisibleClassName:E,role:T="menuitem",tabIndex:P,className:I}=a,q=Vt(a,nW),$=Q.useContext(is),G=Q.useMemo(()=>({dense:o||$.dense||!1,disableGutters:x}),[$.dense,o,x]),D=Q.useRef(null);Ea(()=>{c&&D.current&&D.current.focus()},[c]);const F=he({},a,{dense:G.dense,divider:v,disableGutters:x}),V=oW(a),B=Ui(D,n);let z;return a.disabled||(z=P!==void 0?P:-1),Xe.jsx(is.Provider,{value:G,children:Xe.jsx(aW,he({ref:B,role:T,tabIndex:z,component:d,focusVisibleClassName:Wt(V.focusVisible,E),className:Wt(V.root,I)},q,{ownerState:F,classes:V}))})}),Op=sW;function lW(e){return Nr("MuiNativeSelect",e)}const uW=Ir("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),Ob=uW,cW=["className","disabled","error","IconComponent","inputRef","variant"],pW=e=>{const{classes:t,variant:n,disabled:a,multiple:c,open:d,error:o}=e,v={select:["select",n,a&&"disabled",c&&"multiple",o&&"error"],icon:["icon",`icon${er(n)}`,d&&"iconOpen",a&&"disabled"]};return jr(v,lW,t)},CA=({ownerState:e,theme:t})=>he({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":he({},t.vars?{backgroundColor:`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.05)`}:{backgroundColor:t.palette.mode==="light"?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},[`&.${Ob.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(t.vars||t).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},e.variant==="filled"&&{"&&&":{paddingRight:32}},e.variant==="outlined"&&{borderRadius:(t.vars||t).shape.borderRadius,"&:focus":{borderRadius:(t.vars||t).shape.borderRadius},"&&&":{paddingRight:32}}),fW=Dt("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:Go,overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.select,t[n.variant],n.error&&t.error,{[`&.${Ob.multiple}`]:t.multiple}]}})(CA),kA=({ownerState:e,theme:t})=>he({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(t.vars||t).palette.action.active,[`&.${Ob.disabled}`]:{color:(t.vars||t).palette.action.disabled}},e.open&&{transform:"rotate(180deg)"},e.variant==="filled"&&{right:7},e.variant==="outlined"&&{right:7}),hW=Dt("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${er(n.variant)}`],n.open&&t.iconOpen]}})(kA),dW=Q.forwardRef(function(t,n){const{className:a,disabled:c,error:d,IconComponent:o,inputRef:v,variant:x="standard"}=t,E=Vt(t,cW),T=he({},t,{disabled:c,variant:x,error:d}),P=pW(T);return Xe.jsxs(Q.Fragment,{children:[Xe.jsx(fW,he({ownerState:T,className:Wt(P.select,a),disabled:c,ref:v||n},E)),t.multiple?null:Xe.jsx(hW,{as:o,ownerState:T,className:P.icon})]})}),mW=dW;var AC;const yW=["children","classes","className","label","notched"],gW=Dt("fieldset",{shouldForwardProp:Go})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),vW=Dt("legend",{shouldForwardProp:Go})(({ownerState:e,theme:t})=>he({float:"unset",width:"auto",overflow:"hidden"},!e.withLabel&&{padding:0,lineHeight:"11px",transition:t.transitions.create("width",{duration:150,easing:t.transitions.easing.easeOut})},e.withLabel&&he({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:t.transitions.create("max-width",{duration:50,easing:t.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},e.notched&&{maxWidth:"100%",transition:t.transitions.create("max-width",{duration:100,easing:t.transitions.easing.easeOut,delay:50})})));function _W(e){const{className:t,label:n,notched:a}=e,c=Vt(e,yW),d=n!=null&&n!=="",o=he({},e,{notched:a,withLabel:d});return Xe.jsx(gW,he({"aria-hidden":!0,className:t,ownerState:o},c,{children:Xe.jsx(vW,{ownerState:o,children:d?Xe.jsx("span",{children:n}):AC||(AC=Xe.jsx("span",{className:"notranslate",children:""}))})}))}const xW=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],bW=e=>{const{classes:t}=e,a=jr({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},t9,t);return he({},t,a)},wW=Dt(Tv,{shouldForwardProp:e=>Go(e)||e==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:Cv})(({theme:e,ownerState:t})=>{const n=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return he({position:"relative",borderRadius:(e.vars||e).shape.borderRadius,[`&:hover .${dl.notchedOutline}`]:{borderColor:(e.vars||e).palette.text.primary},"@media (hover: none)":{[`&:hover .${dl.notchedOutline}`]:{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:n}},[`&.${dl.focused} .${dl.notchedOutline}`]:{borderColor:(e.vars||e).palette[t.color].main,borderWidth:2},[`&.${dl.error} .${dl.notchedOutline}`]:{borderColor:(e.vars||e).palette.error.main},[`&.${dl.disabled} .${dl.notchedOutline}`]:{borderColor:(e.vars||e).palette.action.disabled}},t.startAdornment&&{paddingLeft:14},t.endAdornment&&{paddingRight:14},t.multiline&&he({padding:"16.5px 14px"},t.size==="small"&&{padding:"8.5px 14px"}))}),SW=Dt(_W,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(e,t)=>t.notchedOutline})(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:t}}),EW=Dt(Iv,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:kv})(({theme:e,ownerState:t})=>he({padding:"16.5px 14px"},!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},e.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},t.size==="small"&&{padding:"8.5px 14px"},t.multiline&&{padding:0},t.startAdornment&&{paddingLeft:0},t.endAdornment&&{paddingRight:0})),TA=Q.forwardRef(function(t,n){var a,c,d,o,v;const x=Vr({props:t,name:"MuiOutlinedInput"}),{components:E={},fullWidth:T=!1,inputComponent:P="input",label:I,multiline:q=!1,notched:$,slots:G={},type:D="text"}=x,F=Vt(x,xW),V=bW(x),B=Zp(),z=Hp({props:x,muiFormControl:B,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),re=he({},x,{color:z.color||"primary",disabled:z.disabled,error:z.error,focused:z.focused,formControl:B,fullWidth:T,hiddenLabel:z.hiddenLabel,multiline:q,size:z.size,type:D}),ie=(a=(c=G.root)!=null?c:E.Root)!=null?a:wW,ce=(d=(o=G.input)!=null?o:E.Input)!=null?d:EW;return Xe.jsx(Lb,he({slots:{root:ie,input:ce},renderSuffix:xe=>Xe.jsx(SW,{ownerState:re,className:V.notchedOutline,label:I!=null&&I!==""&&z.required?v||(v=Xe.jsxs(Q.Fragment,{children:[I,"","*"]})):I,notched:typeof $<"u"?$:!!(xe.startAdornment||xe.filled||xe.focused)}),fullWidth:T,inputComponent:P,multiline:q,ref:n,type:D},F,{classes:he({},V,{notchedOutline:null})}))});TA.muiName="Input";const IA=TA;function CW(e){return Nr("MuiSelect",e)}const kW=Ir("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),ph=kW;var MC;const TW=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],IW=Dt("div",{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`&.${ph.select}`]:t.select},{[`&.${ph.select}`]:t[n.variant]},{[`&.${ph.error}`]:t.error},{[`&.${ph.multiple}`]:t.multiple}]}})(CA,{[`&.${ph.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),PW=Dt("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${er(n.variant)}`],n.open&&t.iconOpen]}})(kA),AW=Dt("input",{shouldForwardProp:e=>vj(e)&&e!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(e,t)=>t.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function RC(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}function MW(e){return e==null||typeof e=="string"&&!e.trim()}const RW=e=>{const{classes:t,variant:n,disabled:a,multiple:c,open:d,error:o}=e,v={select:["select",n,a&&"disabled",c&&"multiple",o&&"error"],icon:["icon",`icon${er(n)}`,d&&"iconOpen",a&&"disabled"],nativeInput:["nativeInput"]};return jr(v,CW,t)},LW=Q.forwardRef(function(t,n){var a;const{"aria-describedby":c,"aria-label":d,autoFocus:o,autoWidth:v,children:x,className:E,defaultOpen:T,defaultValue:P,disabled:I,displayEmpty:q,error:$=!1,IconComponent:G,inputRef:D,labelId:F,MenuProps:V={},multiple:B,name:z,onBlur:re,onChange:ie,onClose:ce,onFocus:xe,onOpen:Te,open:ve,readOnly:we,renderValue:ee,SelectDisplayProps:pe={},tabIndex:Oe,value:Ue,variant:Ee="standard"}=t,ke=Vt(t,TW),[je,Ze]=XE({controlled:Ue,default:P,name:"Select"}),[wt,Pe]=XE({controlled:ve,default:T,name:"Select"}),Ge=Q.useRef(null),lt=Q.useRef(null),[Re,qe]=Q.useState(null),{current:Xt}=Q.useRef(ve!=null),[Pt,Bt]=Q.useState(),Ct=Ui(n,D),ir=Q.useCallback(Ut=>{lt.current=Ut,Ut&&qe(Ut)},[]),Kt=Re==null?void 0:Re.parentNode;Q.useImperativeHandle(Ct,()=>({focus:()=>{lt.current.focus()},node:Ge.current,value:je}),[je]),Q.useEffect(()=>{T&&wt&&Re&&!Xt&&(Bt(v?null:Kt.clientWidth),lt.current.focus())},[Re,v]),Q.useEffect(()=>{o&&lt.current.focus()},[o]),Q.useEffect(()=>{if(!F)return;const Ut=To(lt.current).getElementById(F);if(Ut){const Sr=()=>{getSelection().isCollapsed&&lt.current.focus()};return Ut.addEventListener("click",Sr),()=>{Ut.removeEventListener("click",Sr)}}},[F]);const Jt=(Ut,Sr)=>{Ut?Te&&Te(Sr):ce&&ce(Sr),Xt||(Bt(v?null:Kt.clientWidth),Pe(Ut))},st=Ut=>{Ut.button===0&&(Ut.preventDefault(),lt.current.focus(),Jt(!0,Ut))},Ot=Ut=>{Jt(!1,Ut)},tr=Q.Children.toArray(x),Lr=Ut=>{const Sr=tr.find(ct=>ct.props.value===Ut.target.value);Sr!==void 0&&(Ze(Sr.props.value),ie&&ie(Ut,Sr))},Fr=Ut=>Sr=>{let ct;if(Sr.currentTarget.hasAttribute("tabindex")){if(B){ct=Array.isArray(je)?je.slice():[];const Lt=je.indexOf(Ut.props.value);Lt===-1?ct.push(Ut.props.value):ct.splice(Lt,1)}else ct=Ut.props.value;if(Ut.props.onClick&&Ut.props.onClick(Sr),je!==ct&&(Ze(ct),ie)){const Lt=Sr.nativeEvent||Sr,vr=new Lt.constructor(Lt.type,Lt);Object.defineProperty(vr,"target",{writable:!0,value:{value:ct,name:z}}),ie(vr,Ut)}B||Jt(!1,Sr)}},rr=Ut=>{we||[" ","ArrowUp","ArrowDown","Enter"].indexOf(Ut.key)!==-1&&(Ut.preventDefault(),Jt(!0,Ut))},qr=Re!==null&&wt,zr=Ut=>{!qr&&re&&(Object.defineProperty(Ut,"target",{writable:!0,value:{value:je,name:z}}),re(Ut))};delete ke["aria-invalid"];let Cr,an;const Rr=[];let ur=!1;(dg({value:je})||q)&&(ee?Cr=ee(je):ur=!0);const Yr=tr.map(Ut=>{if(!Q.isValidElement(Ut))return null;let Sr;if(B){if(!Array.isArray(je))throw new Error(Bl(2));Sr=je.some(ct=>RC(ct,Ut.props.value)),Sr&&ur&&Rr.push(Ut.props.children)}else Sr=RC(je,Ut.props.value),Sr&&ur&&(an=Ut.props.children);return Q.cloneElement(Ut,{"aria-selected":Sr?"true":"false",onClick:Fr(Ut),onKeyUp:ct=>{ct.key===" "&&ct.preventDefault(),Ut.props.onKeyUp&&Ut.props.onKeyUp(ct)},role:"option",selected:Sr,value:void 0,"data-value":Ut.props.value})});ur&&(B?Rr.length===0?Cr=null:Cr=Rr.reduce((Ut,Sr,ct)=>(Ut.push(Sr),ct<Rr.length-1&&Ut.push(", "),Ut),[]):Cr=an);let Sn=Pt;!v&&Xt&&Re&&(Sn=Kt.clientWidth);let ai;typeof Oe<"u"?ai=Oe:ai=I?null:0;const dr=pe.id||(z?`mui-component-select-${z}`:void 0),Nt=he({},t,{variant:Ee,value:je,open:qr,error:$}),jn=RW(Nt),Bn=he({},V.PaperProps,(a=V.slotProps)==null?void 0:a.paper),$i=vb();return Xe.jsxs(Q.Fragment,{children:[Xe.jsx(IW,he({ref:ir,tabIndex:ai,role:"combobox","aria-controls":$i,"aria-disabled":I?"true":void 0,"aria-expanded":qr?"true":"false","aria-haspopup":"listbox","aria-label":d,"aria-labelledby":[F,dr].filter(Boolean).join(" ")||void 0,"aria-describedby":c,onKeyDown:rr,onMouseDown:I||we?null:st,onBlur:zr,onFocus:xe},pe,{ownerState:Nt,className:Wt(pe.className,jn.select,E),id:dr,children:MW(Cr)?MC||(MC=Xe.jsx("span",{className:"notranslate",children:""})):Cr})),Xe.jsx(AW,he({"aria-invalid":$,value:Array.isArray(je)?je.join(","):je,name:z,ref:Ge,"aria-hidden":!0,onChange:Lr,tabIndex:-1,disabled:I,className:jn.nativeInput,autoFocus:o,ownerState:Nt},ke)),Xe.jsx(PW,{as:G,className:jn.icon,ownerState:Nt}),Xe.jsx(eW,he({id:`menu-${z||""}`,anchorEl:Kt,open:qr,onClose:Ot,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},V,{MenuListProps:he({"aria-labelledby":F,role:"listbox","aria-multiselectable":B?"true":void 0,disableListWrap:!0,id:$i},V.MenuListProps),slotProps:he({},V.slotProps,{paper:he({},Bn,{style:he({minWidth:Sn},Bn!=null?Bn.style:null)})}),children:Yr}))]})}),zW=LW,DW=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],OW=["root"],BW=e=>{const{classes:t}=e;return t},Bb={name:"MuiSelect",overridesResolver:(e,t)=>t.root,shouldForwardProp:e=>Go(e)&&e!=="variant",slot:"Root"},NW=Dt(xA,Bb)(""),FW=Dt(IA,Bb)(""),UW=Dt(yA,Bb)(""),PA=Q.forwardRef(function(t,n){const a=Vr({name:"MuiSelect",props:t}),{autoWidth:c=!1,children:d,classes:o={},className:v,defaultOpen:x=!1,displayEmpty:E=!1,IconComponent:T=o9,id:P,input:I,inputProps:q,label:$,labelId:G,MenuProps:D,multiple:F=!1,native:V=!1,onClose:B,onOpen:z,open:re,renderValue:ie,SelectDisplayProps:ce,variant:xe="outlined"}=a,Te=Vt(a,DW),ve=V?mW:zW,we=Zp(),ee=Hp({props:a,muiFormControl:we,states:["variant","error"]}),pe=ee.variant||xe,Oe=he({},a,{variant:pe,classes:o}),Ue=BW(Oe),Ee=Vt(Ue,OW),ke=I||{standard:Xe.jsx(NW,{ownerState:Oe}),outlined:Xe.jsx(FW,{label:$,ownerState:Oe}),filled:Xe.jsx(UW,{ownerState:Oe})}[pe],je=Ui(n,ke.ref);return Xe.jsx(Q.Fragment,{children:Q.cloneElement(ke,he({inputComponent:ve,inputProps:he({children:d,error:ee.error,IconComponent:T,variant:pe,type:void 0,multiple:F},V?{id:P}:{autoWidth:c,defaultOpen:x,displayEmpty:E,labelId:G,MenuProps:D,onClose:B,onOpen:z,open:re,renderValue:ie,SelectDisplayProps:he({id:P},ce)},q,{classes:q?ko(Ee,q.classes):Ee},I?I.props.inputProps:{})},(F&&V||E)&&pe==="outlined"?{notched:!0}:{},{ref:je,className:Wt(ke.props.className,v,Ue.root)},!I&&{variant:pe},Te))})});PA.muiName="Select";const Av=PA;function $W(e){return Nr("MuiTab",e)}const jW=Ir("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper"]),bu=jW,VW=["className","disabled","disableFocusRipple","fullWidth","icon","iconPosition","indicator","label","onChange","onClick","onFocus","selected","selectionFollowsFocus","textColor","value","wrapped"],qW=e=>{const{classes:t,textColor:n,fullWidth:a,wrapped:c,icon:d,label:o,selected:v,disabled:x}=e,E={root:["root",d&&o&&"labelIcon",`textColor${er(n)}`,a&&"fullWidth",c&&"wrapped",v&&"selected",x&&"disabled"],iconWrapper:["iconWrapper"]};return jr(E,$W,t)},WW=Dt(Wu,{name:"MuiTab",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.label&&n.icon&&t.labelIcon,t[`textColor${er(n.textColor)}`],n.fullWidth&&t.fullWidth,n.wrapped&&t.wrapped]}})(({theme:e,ownerState:t})=>he({},e.typography.button,{maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center"},t.label&&{flexDirection:t.iconPosition==="top"||t.iconPosition==="bottom"?"column":"row"},{lineHeight:1.25},t.icon&&t.label&&{minHeight:72,paddingTop:9,paddingBottom:9,[`& > .${bu.iconWrapper}`]:he({},t.iconPosition==="top"&&{marginBottom:6},t.iconPosition==="bottom"&&{marginTop:6},t.iconPosition==="start"&&{marginRight:e.spacing(1)},t.iconPosition==="end"&&{marginLeft:e.spacing(1)})},t.textColor==="inherit"&&{color:"inherit",opacity:.6,[`&.${bu.selected}`]:{opacity:1},[`&.${bu.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},t.textColor==="primary"&&{color:(e.vars||e).palette.text.secondary,[`&.${bu.selected}`]:{color:(e.vars||e).palette.primary.main},[`&.${bu.disabled}`]:{color:(e.vars||e).palette.text.disabled}},t.textColor==="secondary"&&{color:(e.vars||e).palette.text.secondary,[`&.${bu.selected}`]:{color:(e.vars||e).palette.secondary.main},[`&.${bu.disabled}`]:{color:(e.vars||e).palette.text.disabled}},t.fullWidth&&{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"},t.wrapped&&{fontSize:e.typography.pxToRem(12)})),GW=Q.forwardRef(function(t,n){const a=Vr({props:t,name:"MuiTab"}),{className:c,disabled:d=!1,disableFocusRipple:o=!1,fullWidth:v,icon:x,iconPosition:E="top",indicator:T,label:P,onChange:I,onClick:q,onFocus:$,selected:G,selectionFollowsFocus:D,textColor:F="inherit",value:V,wrapped:B=!1}=a,z=Vt(a,VW),re=he({},a,{disabled:d,disableFocusRipple:o,selected:G,icon:!!x,iconPosition:E,label:!!P,fullWidth:v,textColor:F,wrapped:B}),ie=qW(re),ce=x&&P&&Q.isValidElement(x)?Q.cloneElement(x,{className:Wt(ie.iconWrapper,x.props.className)}):x,xe=ve=>{!G&&I&&I(ve,V),q&&q(ve)},Te=ve=>{D&&!G&&I&&I(ve,V),$&&$(ve)};return Xe.jsxs(WW,he({focusRipple:!o,className:Wt(ie.root,c),ref:n,role:"tab","aria-selected":G,disabled:d,onClick:xe,onFocus:Te,ownerState:re,tabIndex:G?0:-1},z,{children:[E==="top"||E==="start"?Xe.jsxs(Q.Fragment,{children:[ce,P]}):Xe.jsxs(Q.Fragment,{children:[P,ce]}),T]}))}),Pl=GW,HW=kb(Xe.jsx("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft"),ZW=kb(Xe.jsx("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight");function KW(e){return(1+Math.sin(Math.PI*e-Math.PI/2))/2}function XW(e,t,n,a={},c=()=>{}){const{ease:d=KW,duration:o=300}=a;let v=null;const x=t[e];let E=!1;const T=()=>{E=!0},P=I=>{if(E){c(new Error("Animation cancelled"));return}v===null&&(v=I);const q=Math.min(1,(I-v)/o);if(t[e]=d(q)*(n-x)+x,q>=1){requestAnimationFrame(()=>{c(null)});return}requestAnimationFrame(P)};return x===n?(c(new Error("Element already at target position")),T):(requestAnimationFrame(P),T)}const YW=["onChange"],JW={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};function QW(e){const{onChange:t}=e,n=Vt(e,YW),a=Q.useRef(),c=Q.useRef(null),d=()=>{a.current=c.current.offsetHeight-c.current.clientHeight};return Ea(()=>{const o=ev(()=>{const x=a.current;d(),x!==a.current&&t(a.current)}),v=Ws(c.current);return v.addEventListener("resize",o),()=>{o.clear(),v.removeEventListener("resize",o)}},[t]),Q.useEffect(()=>{d(),t(a.current)},[t]),Xe.jsx("div",he({style:JW,ref:c},n))}function eG(e){return Nr("MuiTabScrollButton",e)}const tG=Ir("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),rG=tG,nG=["className","slots","slotProps","direction","orientation","disabled"],iG=e=>{const{classes:t,orientation:n,disabled:a}=e;return jr({root:["root",n,a&&"disabled"]},eG,t)},oG=Dt(Wu,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.orientation&&t[n.orientation]]}})(({ownerState:e})=>he({width:40,flexShrink:0,opacity:.8,[`&.${rG.disabled}`]:{opacity:0}},e.orientation==="vertical"&&{width:"100%",height:40,"& svg":{transform:`rotate(${e.isRtl?-90:90}deg)`}})),aG=Q.forwardRef(function(t,n){var a,c;const d=Vr({props:t,name:"MuiTabScrollButton"}),{className:o,slots:v={},slotProps:x={},direction:E}=d,T=Vt(d,nG),I=Gp().direction==="rtl",q=he({isRtl:I},d),$=iG(q),G=(a=v.StartScrollButtonIcon)!=null?a:HW,D=(c=v.EndScrollButtonIcon)!=null?c:ZW,F=os({elementType:G,externalSlotProps:x.startScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:q}),V=os({elementType:D,externalSlotProps:x.endScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:q});return Xe.jsx(oG,he({component:"div",className:Wt($.root,o),ref:n,role:null,ownerState:q,tabIndex:null},T,{children:E==="left"?Xe.jsx(G,he({},F)):Xe.jsx(D,he({},V))}))}),sG=aG;function lG(e){return Nr("MuiTabs",e)}const uG=Ir("MuiTabs",["root","vertical","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),R_=uG,cG=["aria-label","aria-labelledby","action","centered","children","className","component","allowScrollButtonsMobile","indicatorColor","onChange","orientation","ScrollButtonComponent","scrollButtons","selectionFollowsFocus","slots","slotProps","TabIndicatorProps","TabScrollButtonProps","textColor","value","variant","visibleScrollbar"],LC=(e,t)=>e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:e.firstChild,zC=(e,t)=>e===t?e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:e.lastChild,Qm=(e,t,n)=>{let a=!1,c=n(e,t);for(;c;){if(c===e.firstChild){if(a)return;a=!0}const d=c.disabled||c.getAttribute("aria-disabled")==="true";if(!c.hasAttribute("tabindex")||d)c=n(e,c);else{c.focus();return}}},pG=e=>{const{vertical:t,fixed:n,hideScrollbar:a,scrollableX:c,scrollableY:d,centered:o,scrollButtonsHideMobile:v,classes:x}=e;return jr({root:["root",t&&"vertical"],scroller:["scroller",n&&"fixed",a&&"hideScrollbar",c&&"scrollableX",d&&"scrollableY"],flexContainer:["flexContainer",t&&"flexContainerVertical",o&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",v&&"scrollButtonsHideMobile"],scrollableX:[c&&"scrollableX"],hideScrollbar:[a&&"hideScrollbar"]},lG,x)},fG=Dt("div",{name:"MuiTabs",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${R_.scrollButtons}`]:t.scrollButtons},{[`& .${R_.scrollButtons}`]:n.scrollButtonsHideMobile&&t.scrollButtonsHideMobile},t.root,n.vertical&&t.vertical]}})(({ownerState:e,theme:t})=>he({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex"},e.vertical&&{flexDirection:"column"},e.scrollButtonsHideMobile&&{[`& .${R_.scrollButtons}`]:{[t.breakpoints.down("sm")]:{display:"none"}}})),hG=Dt("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.scroller,n.fixed&&t.fixed,n.hideScrollbar&&t.hideScrollbar,n.scrollableX&&t.scrollableX,n.scrollableY&&t.scrollableY]}})(({ownerState:e})=>he({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap"},e.fixed&&{overflowX:"hidden",width:"100%"},e.hideScrollbar&&{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},e.scrollableX&&{overflowX:"auto",overflowY:"hidden"},e.scrollableY&&{overflowY:"auto",overflowX:"hidden"})),dG=Dt("div",{name:"MuiTabs",slot:"FlexContainer",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.flexContainer,n.vertical&&t.flexContainerVertical,n.centered&&t.centered]}})(({ownerState:e})=>he({display:"flex"},e.vertical&&{flexDirection:"column"},e.centered&&{justifyContent:"center"})),mG=Dt("span",{name:"MuiTabs",slot:"Indicator",overridesResolver:(e,t)=>t.indicator})(({ownerState:e,theme:t})=>he({position:"absolute",height:2,bottom:0,width:"100%",transition:t.transitions.create()},e.indicatorColor==="primary"&&{backgroundColor:(t.vars||t).palette.primary.main},e.indicatorColor==="secondary"&&{backgroundColor:(t.vars||t).palette.secondary.main},e.vertical&&{height:"100%",width:2,right:0})),yG=Dt(QW)({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),DC={},gG=Q.forwardRef(function(t,n){const a=Vr({props:t,name:"MuiTabs"}),c=Gp(),d=c.direction==="rtl",{"aria-label":o,"aria-labelledby":v,action:x,centered:E=!1,children:T,className:P,component:I="div",allowScrollButtonsMobile:q=!1,indicatorColor:$="primary",onChange:G,orientation:D="horizontal",ScrollButtonComponent:F=sG,scrollButtons:V="auto",selectionFollowsFocus:B,slots:z={},slotProps:re={},TabIndicatorProps:ie={},TabScrollButtonProps:ce={},textColor:xe="primary",value:Te,variant:ve="standard",visibleScrollbar:we=!1}=a,ee=Vt(a,cG),pe=ve==="scrollable",Oe=D==="vertical",Ue=Oe?"scrollTop":"scrollLeft",Ee=Oe?"top":"left",ke=Oe?"bottom":"right",je=Oe?"clientHeight":"clientWidth",Ze=Oe?"height":"width",wt=he({},a,{component:I,allowScrollButtonsMobile:q,indicatorColor:$,orientation:D,vertical:Oe,scrollButtons:V,textColor:xe,variant:ve,visibleScrollbar:we,fixed:!pe,hideScrollbar:pe&&!we,scrollableX:pe&&!Oe,scrollableY:pe&&Oe,centered:E&&!pe,scrollButtonsHideMobile:!q}),Pe=pG(wt),Ge=os({elementType:z.StartScrollButtonIcon,externalSlotProps:re.startScrollButtonIcon,ownerState:wt}),lt=os({elementType:z.EndScrollButtonIcon,externalSlotProps:re.endScrollButtonIcon,ownerState:wt}),[Re,qe]=Q.useState(!1),[Xt,Pt]=Q.useState(DC),[Bt,Ct]=Q.useState(!1),[ir,Kt]=Q.useState(!1),[Jt,st]=Q.useState(!1),[Ot,tr]=Q.useState({overflow:"hidden",scrollbarWidth:0}),Lr=new Map,Fr=Q.useRef(null),rr=Q.useRef(null),qr=()=>{const ct=Fr.current;let Lt;if(ct){const Er=ct.getBoundingClientRect();Lt={clientWidth:ct.clientWidth,scrollLeft:ct.scrollLeft,scrollTop:ct.scrollTop,scrollLeftNormalized:_U(ct,c.direction),scrollWidth:ct.scrollWidth,top:Er.top,bottom:Er.bottom,left:Er.left,right:Er.right}}let vr;if(ct&&Te!==!1){const Er=rr.current.children;if(Er.length>0){const nn=Er[Lr.get(Te)];vr=nn?nn.getBoundingClientRect():null}}return{tabsMeta:Lt,tabMeta:vr}},zr=$s(()=>{const{tabsMeta:ct,tabMeta:Lt}=qr();let vr=0,Er;if(Oe)Er="top",Lt&&ct&&(vr=Lt.top-ct.top+ct.scrollTop);else if(Er=d?"right":"left",Lt&&ct){const Le=d?ct.scrollLeftNormalized+ct.clientWidth-ct.scrollWidth:ct.scrollLeft;vr=(d?-1:1)*(Lt[Er]-ct[Er]+Le)}const nn={[Er]:vr,[Ze]:Lt?Lt[Ze]:0};if(isNaN(Xt[Er])||isNaN(Xt[Ze]))Pt(nn);else{const Le=Math.abs(Xt[Er]-nn[Er]),rt=Math.abs(Xt[Ze]-nn[Ze]);(Le>=1||rt>=1)&&Pt(nn)}}),Cr=(ct,{animation:Lt=!0}={})=>{Lt?XW(Ue,Fr.current,ct,{duration:c.transitions.duration.standard}):Fr.current[Ue]=ct},an=ct=>{let Lt=Fr.current[Ue];Oe?Lt+=ct:(Lt+=ct*(d?-1:1),Lt*=d&&WP()==="reverse"?-1:1),Cr(Lt)},Rr=()=>{const ct=Fr.current[je];let Lt=0;const vr=Array.from(rr.current.children);for(let Er=0;Er<vr.length;Er+=1){const nn=vr[Er];if(Lt+nn[je]>ct){Er===0&&(Lt=ct);break}Lt+=nn[je]}return Lt},ur=()=>{an(-1*Rr())},Yr=()=>{an(Rr())},Sn=Q.useCallback(ct=>{tr({overflow:null,scrollbarWidth:ct})},[]),ai=()=>{const ct={};ct.scrollbarSizeListener=pe?Xe.jsx(yG,{onChange:Sn,className:Wt(Pe.scrollableX,Pe.hideScrollbar)}):null;const vr=pe&&(V==="auto"&&(Bt||ir)||V===!0);return ct.scrollButtonStart=vr?Xe.jsx(F,he({slots:{StartScrollButtonIcon:z.StartScrollButtonIcon},slotProps:{startScrollButtonIcon:Ge},orientation:D,direction:d?"right":"left",onClick:ur,disabled:!Bt},ce,{className:Wt(Pe.scrollButtons,ce.className)})):null,ct.scrollButtonEnd=vr?Xe.jsx(F,he({slots:{EndScrollButtonIcon:z.EndScrollButtonIcon},slotProps:{endScrollButtonIcon:lt},orientation:D,direction:d?"left":"right",onClick:Yr,disabled:!ir},ce,{className:Wt(Pe.scrollButtons,ce.className)})):null,ct},dr=$s(ct=>{const{tabsMeta:Lt,tabMeta:vr}=qr();if(!(!vr||!Lt)){if(vr[Ee]<Lt[Ee]){const Er=Lt[Ue]+(vr[Ee]-Lt[Ee]);Cr(Er,{animation:ct})}else if(vr[ke]>Lt[ke]){const Er=Lt[Ue]+(vr[ke]-Lt[ke]);Cr(Er,{animation:ct})}}}),Nt=$s(()=>{pe&&V!==!1&&st(!Jt)});Q.useEffect(()=>{const ct=ev(()=>{Fr.current&&zr()});let Lt;const vr=Le=>{Le.forEach(rt=>{rt.removedNodes.forEach(St=>{var sr;(sr=Lt)==null||sr.unobserve(St)}),rt.addedNodes.forEach(St=>{var sr;(sr=Lt)==null||sr.observe(St)})}),ct(),Nt()},Er=Ws(Fr.current);Er.addEventListener("resize",ct);let nn;return typeof ResizeObserver<"u"&&(Lt=new ResizeObserver(ct),Array.from(rr.current.children).forEach(Le=>{Lt.observe(Le)})),typeof MutationObserver<"u"&&(nn=new MutationObserver(vr),nn.observe(rr.current,{childList:!0})),()=>{var Le,rt;ct.clear(),Er.removeEventListener("resize",ct),(Le=nn)==null||Le.disconnect(),(rt=Lt)==null||rt.disconnect()}},[zr,Nt]),Q.useEffect(()=>{const ct=Array.from(rr.current.children),Lt=ct.length;if(typeof IntersectionObserver<"u"&&Lt>0&&pe&&V!==!1){const vr=ct[0],Er=ct[Lt-1],nn={root:Fr.current,threshold:.99},Le=Dr=>{Ct(!Dr[0].isIntersecting)},rt=new IntersectionObserver(Le,nn);rt.observe(vr);const St=Dr=>{Kt(!Dr[0].isIntersecting)},sr=new IntersectionObserver(St,nn);return sr.observe(Er),()=>{rt.disconnect(),sr.disconnect()}}},[pe,V,Jt,T==null?void 0:T.length]),Q.useEffect(()=>{qe(!0)},[]),Q.useEffect(()=>{zr()}),Q.useEffect(()=>{dr(DC!==Xt)},[dr,Xt]),Q.useImperativeHandle(x,()=>({updateIndicator:zr,updateScrollButtons:Nt}),[zr,Nt]);const jn=Xe.jsx(mG,he({},ie,{className:Wt(Pe.indicator,ie.className),ownerState:wt,style:he({},Xt,ie.style)}));let Bn=0;const $i=Q.Children.map(T,ct=>{if(!Q.isValidElement(ct))return null;const Lt=ct.props.value===void 0?Bn:ct.props.value;Lr.set(Lt,Bn);const vr=Lt===Te;return Bn+=1,Q.cloneElement(ct,he({fullWidth:ve==="fullWidth",indicator:vr&&!Re&&jn,selected:vr,selectionFollowsFocus:B,onChange:G,textColor:xe,value:Lt},Bn===1&&Te===!1&&!ct.props.tabIndex?{tabIndex:0}:{}))}),Ut=ct=>{const Lt=rr.current,vr=To(Lt).activeElement;if(vr.getAttribute("role")!=="tab")return;let nn=D==="horizontal"?"ArrowLeft":"ArrowUp",Le=D==="horizontal"?"ArrowRight":"ArrowDown";switch(D==="horizontal"&&d&&(nn="ArrowRight",Le="ArrowLeft"),ct.key){case nn:ct.preventDefault(),Qm(Lt,vr,zC);break;case Le:ct.preventDefault(),Qm(Lt,vr,LC);break;case"Home":ct.preventDefault(),Qm(Lt,null,LC);break;case"End":ct.preventDefault(),Qm(Lt,null,zC);break}},Sr=ai();return Xe.jsxs(fG,he({className:Wt(Pe.root,P),ownerState:wt,ref:n,as:I},ee,{children:[Sr.scrollButtonStart,Sr.scrollbarSizeListener,Xe.jsxs(hG,{className:Pe.scroller,ownerState:wt,style:{overflow:Ot.overflow,[Oe?`margin${d?"Left":"Right"}`:"marginBottom"]:we?void 0:-Ot.scrollbarWidth},ref:Fr,children:[Xe.jsx(dG,{"aria-label":o,"aria-labelledby":v,"aria-orientation":D==="vertical"?"vertical":null,className:Pe.flexContainer,ownerState:wt,onKeyDown:Ut,ref:rr,role:"tablist",children:$i}),Re&&jn]}),Sr.scrollButtonEnd]}))}),Nb=gG;function vG(e){return Nr("MuiTextField",e)}Ir("MuiTextField",["root"]);const _G=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],xG={standard:xA,filled:yA,outlined:IA},bG=e=>{const{classes:t}=e;return jr({root:["root"]},vG,t)},wG=Dt(Pv,{name:"MuiTextField",slot:"Root",overridesResolver:(e,t)=>t.root})({}),SG=Q.forwardRef(function(t,n){const a=Vr({props:t,name:"MuiTextField"}),{autoComplete:c,autoFocus:d=!1,children:o,className:v,color:x="primary",defaultValue:E,disabled:T=!1,error:P=!1,FormHelperTextProps:I,fullWidth:q=!1,helperText:$,id:G,InputLabelProps:D,inputProps:F,InputProps:V,inputRef:B,label:z,maxRows:re,minRows:ie,multiline:ce=!1,name:xe,onBlur:Te,onChange:ve,onFocus:we,placeholder:ee,required:pe=!1,rows:Oe,select:Ue=!1,SelectProps:Ee,type:ke,value:je,variant:Ze="outlined"}=a,wt=Vt(a,_G),Pe=he({},a,{autoFocus:d,color:x,disabled:T,error:P,fullWidth:q,multiline:ce,required:pe,select:Ue,variant:Ze}),Ge=bG(Pe),lt={};Ze==="outlined"&&(D&&typeof D.shrink<"u"&&(lt.notched=D.shrink),lt.label=z),Ue&&((!Ee||!Ee.native)&&(lt.id=void 0),lt["aria-describedby"]=void 0);const Re=vb(G),qe=$&&Re?`${Re}-helper-text`:void 0,Xt=z&&Re?`${Re}-label`:void 0,Pt=xG[Ze],Bt=Xe.jsx(Pt,he({"aria-describedby":qe,autoComplete:c,autoFocus:d,defaultValue:E,fullWidth:q,multiline:ce,name:xe,rows:Oe,maxRows:re,minRows:ie,type:ke,value:je,id:Re,inputRef:B,onBlur:Te,onChange:ve,onFocus:we,placeholder:ee,inputProps:F},lt,V));return Xe.jsxs(wG,he({className:Wt(Ge.root,v),disabled:T,error:P,fullWidth:q,ref:n,required:pe,color:x,variant:Ze,ownerState:Pe},wt,{children:[z!=null&&z!==""&&Xe.jsx(zb,he({htmlFor:Re,id:Xt},D,{children:z})),Ue?Xe.jsx(Av,he({"aria-describedby":qe,id:Re,labelId:Xt,value:je,input:Bt},Ee,{children:o})):Bt,$&&Xe.jsx(C7,he({id:qe},I,{children:$}))]}))}),AA=SG,EG=({feederLayerCode:e,setFeederLayerCode:t})=>{const n=a=>{t(a.target.value)};return Ce.createElement(Pv,{variant:"outlined",className:"custom-feeder-selection"},Ce.createElement(Av,{id:"feeder-selection",value:e,onChange:n,style:{width:"100%",height:"40px",fontSize:"12px",marginRight:"20px"}},Ce.createElement(Op,{value:"PeakHourGasDemand_KW"},"Peak Hour Gas Demand"),Ce.createElement(Op,{value:"PeakHourElectricityDemand_KW"},"Peak Hour Electricity Demand")))},CG=({propertiesNumber:e,handlePropertyChange:t,blockContainerVisible:n,mobilityContainerVisible:a})=>Ce.createElement("div",null,Ce.createElement("div",{className:"mobility-dropdown-container"},Ce.createElement("select",{className:"mobility-dropdown",value:e.mode,onChange:c=>t("mode",c.target.value)},Ce.createElement("option",{value:"-1"},"All Trip Modes"),Ce.createElement("option",{value:"0"},"Walk"),Ce.createElement("option",{value:"1"},"Bike"),Ce.createElement("option",{value:"2"},"Car"),n&&Ce.createElement("option",{value:"3"},"Public Transit")),Ce.createElement("select",{className:"mobility-dropdown",value:e.season,onChange:c=>t("season",c.target.value)},Ce.createElement("option",{value:"1"},"Spring")),Ce.createElement("select",{className:"mobility-dropdown",value:e.timeOfDay,onChange:c=>t("timeOfDay",c.target.value)},Ce.createElement("option",{value:"-1"},"All Time Periods"),Ce.createElement("option",{value:"0"},"Morning (12am - 6am)"),Ce.createElement("option",{value:"1"},"Breakfast (6am - 11am)"),Ce.createElement("option",{value:"2"},"Lunch (11am - 3pm)"),Ce.createElement("option",{value:"3"},"Afternoon (3pm - 5pm)"),Ce.createElement("option",{value:"4"},"Dinner (5pm - 9pm)"),Ce.createElement("option",{value:"5"},"Night (9pm - 12am)")))),kG=({propertiesNumber:e,handlePropertyChange:t})=>Ce.createElement("div",{className:"mobility-dropdown-container"},Ce.createElement("select",{className:"mobility-dropdown",value:e.weekday,onChange:n=>t("weekday",n.target.value)},Ce.createElement("option",{value:"1"},"Weekday"),Ce.createElement("option",{value:"0"},"Weekend")),Ce.createElement("select",{className:"mobility-dropdown-activity",value:e.fromActivity,onChange:n=>t("fromActivity",n.target.value)},Ce.createElement("option",{value:"0"},"Home"),Ce.createElement("option",{value:"1"},"Work/School"),Ce.createElement("option",{value:"2"},"Leisure"),Ce.createElement("option",{value:"-1"},"All From-Activities")),Ce.createElement("select",{className:"mobility-dropdown-activity",value:e.toActivity,onChange:n=>t("toActivity",n.target.value)},Ce.createElement("option",{value:"0"},"Home"),Ce.createElement("option",{value:"1"},"Work/School"),Ce.createElement("option",{value:"2"},"Leisure"),Ce.createElement("option",{value:"-1"},"All To-Activities"))),TG=()=>{const[e,t]=Q.useState(0),n=(a,c)=>{t(c)};return Ce.createElement(so,{sx:{width:"100%"}},Ce.createElement(Nb,{value:e,onChange:n,centered:!0},Ce.createElement(Pl,{label:"Weekday Trip Volume",sx:{textTransform:"none"}}),Ce.createElement(Pl,{label:"Weekend Trip Volume",sx:{textTransform:"none"}})),Ce.createElement("div",{role:"tabpanel",hidden:e!==0},Ce.createElement(so,{sx:{p:3}},Ce.createElement("div",{id:"graph-container-weekday",className:"graph-container-weekday"}))),Ce.createElement("div",{role:"tabpanel",hidden:e!==1},Ce.createElement(so,{sx:{p:3}},Ce.createElement("div",{id:"graph-container-weekend",className:"graph-container-weekend"}))))},IG=()=>{const[e,t]=Q.useState(0),n=(a,c)=>{t(c)};return Ce.createElement(so,{sx:{width:"100%",overflow:"hidden"}}," ",Ce.createElement(Nb,{value:e,onChange:n,centered:!0,sx:{".MuiTabs-flexContainer":{paddingLeft:"30px"},".MuiTab-root":{textTransform:"none",marginRight:"8px"}}},Ce.createElement(Pl,{label:"Energy Summary"}),Ce.createElement(Pl,{label:"Energy End Use"}),Ce.createElement(Pl,{label:"Energy Fuel Use"})),Ce.createElement("div",{role:"tabpanel",hidden:e!==0},Ce.createElement(so,{sx:{p:3}},Ce.createElement("div",{id:"graph-container-energysummaryuse",className:"graph-container-energysummaryuse"}))),Ce.createElement("div",{role:"tabpanel",hidden:e!==1},Ce.createElement(so,{sx:{p:3}},Ce.createElement("div",{id:"graph-container-energyenduse",className:"graph-container-energyenduse"}))),Ce.createElement("div",{role:"tabpanel",hidden:e!==2},Ce.createElement(so,{sx:{p:3}},Ce.createElement("div",{id:"graph-container-energyfueluse",className:"graph-container-energyfueluse"}))))},PG=()=>{const[e,t]=Q.useState(0),n=(a,c)=>{t(c)};return Ce.createElement(so,{sx:{width:"100%"}},Ce.createElement(Nb,{value:e,onChange:n,centered:!0},Ce.createElement(Pl,{label:"Winter Energy Load",sx:{textTransform:"none"}}),Ce.createElement(Pl,{label:"Summer Energy Load",sx:{textTransform:"none"}}),Ce.createElement(Pl,{label:"Load Duration Curve",sx:{textTransform:"none"}})),Ce.createElement("div",{role:"tabpanel",hidden:e!==0},Ce.createElement(so,{sx:{p:3}},Ce.createElement("div",{id:"graph-container-energyone",className:"graph-container-energyone"}))),Ce.createElement("div",{role:"tabpanel",hidden:e!==1},Ce.createElement(so,{sx:{p:3}},Ce.createElement("div",{id:"graph-container-energytwo",className:"graph-container-energytwo"}))),Ce.createElement("div",{role:"tabpanel",hidden:e!==2},Ce.createElement(so,{sx:{p:3}},Ce.createElement("div",{id:"graph-container-energythree",className:"graph-container-energythree"}))))},OC=vP().domain(["Heating","Cooling","Equipment","Lighting","HotWater","PV"]).range(["#cf5867","#6faadd","#959595","#f2e75c","#eec176","#9C27B0"]);function AG({data:e,colorScale:t,onBarDoubleClick:n}){const a=Q.useRef();return Q.useEffect(()=>{if(!a.current)return;const c=a.current;Qy(c).selectAll("*").remove();const d={top:0,right:0,bottom:0,left:0},o=220-d.left-d.right,v=20-d.top-d.bottom,x=Qy(c).append("svg").attr("width",o+d.left+d.right).attr("height",v+d.top+d.bottom).append("g").attr("transform",`translate(${d.left}, ${d.top})`),E=_P().domain([0,ZO(e,P=>P.value)]).range([0,o]);let T=0;x.selectAll(".bar").data(e).enter().append("rect").attr("class","bar").attr("x",P=>{const I=T;return T+=E(P.value),I}).attr("y",0).attr("width",P=>E(P.value)).attr("height",v).attr("fill",P=>t(P.name)).on("dblclick",P=>n(P.name))},[e,t,n]),Ce.createElement(so,{ref:a})}function MG({colorScale:e}){const t=Q.useRef();return Q.useEffect(()=>{if(!t.current)return;const n=t.current;Qy(n).selectAll("*").remove();const a=100,c=20,o=Math.ceil(e.domain().length/3)*c,v=Qy(n).append("svg").attr("width","100%").attr("height",o).append("g");e.domain().forEach((x,E)=>{const T=Math.floor(E/3),P=E%3,I=v.append("g").attr("transform",`translate(${P*a}, ${T*c})`);I.append("rect").attr("x",40).attr("y",0).attr("width",10).attr("height",10).attr("fill",e(x)),I.append("text").attr("x",60).attr("y",10).style("font-size","10px").text(x)})},[e]),Ce.createElement(so,{ref:t})}function L_({mapRef:e,setBuildingDataUrl:t,setIthacaEnergyUrl:n,BUILDING_DATA_URL:a,BUILDING_DATA_URL_INITIAL:c,ITHACA_ENERGY_URL_INITIAL:d}){const[o,v]=Q.useState([{id:1,name:"Baseline",data:[{name:"Heating",value:39973},{name:"Cooling",value:4630},{name:"Equipment",value:3372},{name:"Lighting",value:1810},{name:"HotWater",value:4900},{name:"PV",value:0}]},{id:2,name:"ResidentialElectrified",data:[{name:"Heating",value:32973},{name:"Cooling",value:4630},{name:"Equipment",value:3372},{name:"Lighting",value:1810},{name:"HotWater",value:4900},{name:"PV",value:0}]},{id:3,name:"CommercialElectrified",data:[{name:"Heating",value:22973},{name:"Cooling",value:4630},{name:"Equipment",value:3372},{name:"Lighting",value:1810},{name:"HotWater",value:4900},{name:"PV",value:0}]},{id:4,name:"FullElectrified",data:[{name:"Heating",value:15973},{name:"Cooling",value:4630},{name:"Equipment",value:3372},{name:"Lighting",value:1810},{name:"HotWater",value:4900},{name:"PV",value:0}]}]),[x,E]=Q.useState(null),T=($,G)=>{$.dataTransfer.setData("text/plain",G)},P=($,G)=>{$.preventDefault();const D=parseInt($.dataTransfer.getData("text/plain"),10),F=o.findIndex(re=>re.id===G),V=o.findIndex(re=>re.id===D),B=[...o],[z]=B.splice(V,1);B.splice(F,0,z),v(B)},I=$=>{$.preventDefault()},q=$=>{E($);let G,D;switch(x){case"Baseline":G="./ScenarioData/Baseline_clean.geojson",D="./ScenarioData/Baseline_SiteSummary.geojson";break;case"Residential Electrified":G="./ScenarioData/ResidentialElectrified_clean.geojson",D="./ScenarioData/ResidentialElectrified_SiteSummary.geojson";break;case"Commercial Electrified":G="./ScenarioData/CommercialElectrified_clean.geojson",D="./ScenarioData/CommercialElectrified_SiteSummary.geojson";break;case"Full Electrified":G="./ScenarioData/FullElectrified_clean.geojson",D="./ScenarioData/FullElectrified_SiteSummary.geojson";break;default:G=c,D=d}G!==a&&(t(G),n(D));const F=e.current;F&&(F.getSource("ithaca-energy-Building").setData(G),F.getSource("ithaca-energy-Summary").setData(D))};return Ce.createElement(so,null,Ce.createElement(Db,{style:{padding:"12px",backgroundColor:"transparent",fontFamily:"Open Sans, sans-serif"}},o.map($=>Ce.createElement(wA,{key:$.id,draggable:!0,onDragStart:G=>T(G,$.id),onDragOver:I,onDrop:G=>P(G,$.id),onDoubleClick:()=>q($.name),style:{margin:"8px 0",backgroundColor:x===$.name?"#E0E0E0":"#F5F5F5",borderRadius:"4px",border:"1px solid #E0E0E0",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px",height:"35px",cursor:"pointer"},disableGutters:!0},Ce.createElement(so,null,$.name.split(" ").map((G,D)=>Ce.createElement(lp,{key:D,variant:"body2",style:{fontSize:"12px"}},G))),Ce.createElement(AG,{data:$.data,colorScale:OC})))),Ce.createElement(MG,{colorScale:OC}))}const RG=({onDataImport:e,addFile:t,mapRef:n,setTitle:a,setDisplayingLayers:c,setHomeContainerVisible:d,setGeneralContainerVisible:o})=>{const[v,x]=Q.useState(!1),[E,T]=Q.useState(null),[P,I]=Q.useState(""),[q,$]=Q.useState(""),[G,D]=Q.useState(null),F=Q.useRef(null),V=()=>x(!0),B=()=>x(!1),z=xe=>I(xe.target.value),re=xe=>$(xe.target.value),ie=xe=>{const Te=xe.target.files[0];if(!Te)return;T(Te),I(Te.name);const ve=new FileReader;ve.onload=we=>{D(we.target.result);const ee={file:Te,name:P||Te.name,content:we.target.result};t(ee)},ve.readAsText(Te)},ce=()=>{if(!E){alert("Please select a file first!");return}if(!q){alert("Please select a data type!");return}try{const xe=URL.createObjectURL(E);e(xe);const Te=n.current,ve=JSON.parse(G);ve.features&&ve.features.length>0&&Te.flyTo({center:[-76.5087,42.444],zoom:13}),c(["energy-Building","energy-Building-highlighted","energy-Building-other"]),["energy-Building","energy-Building-highlighted","energy-Building-other"].forEach(we=>{Te.setLayoutProperty(we,"visibility","visible")}),a("UBEM Viewer / Ithaca"),d(!1),o(!0)}catch(xe){console.error("Error processing the file",xe)}B()};return Ce.createElement("div",null,Ce.createElement(xl,{variant:"contained",color:"primary",onClick:V,sx:{backgroundColor:"gray",position:"absolute",top:"35%",left:"46%",fontSize:"1.25rem",padding:"4px 12px"}},"+ Add Data"),Ce.createElement(pA,{open:v,onClose:B},Ce.createElement(dA,null,"Upload your GeoJSON file(s) Here."),Ce.createElement(hA,null,Ce.createElement(xl,{variant:"outlined",component:"label",sx:{marginTop:2}},"Choose File",Ce.createElement("input",{type:"file",hidden:!0,accept:".geojson",onChange:ie,ref:F})),E&&Ce.createElement(Ce.Fragment,null,Ce.createElement(AA,{fullWidth:!0,label:"File Name",variant:"outlined",value:P,onChange:z,margin:"normal"}),Ce.createElement(Pv,{fullWidth:!0,margin:"normal"},Ce.createElement(zb,null,"Data Type"),Ce.createElement(Av,{value:q,label:"Data Type",onChange:re},Ce.createElement(Op,{value:"mobility"},"Mobility"),Ce.createElement(Op,{value:"energy"},"Energy"))))),Ce.createElement(fA,null,Ce.createElement(xl,{onClick:B},"Cancel"),Ce.createElement(xl,{onClick:ce},"View"))))},LG=({selectedFile:e,setSelectedFile:t,onDataImport:n,files:a,setFiles:c,deleteFile:d})=>{const[o,v]=Q.useState(!1),[x,E]=Q.useState(""),T=Q.useRef(null),P=()=>v(!0),I=()=>v(!1),q=B=>E(B.target.value),$=B=>{const z=B.target.value;t({...e,name:z});const re=a.map(ie=>ie===e?{...ie,name:z}:ie);c(re)},G=B=>{const z=B.target.files[0];if(!z)return;const re={file:z,name:z.name,content:null},ie=new FileReader;ie.onload=ce=>{re.content=ce.target.result,c(xe=>[...xe,re])},ie.readAsText(z)},D=()=>{if(!e){alert("Please select a file from the list!");return}if(!x){alert("Please select a data type!");return}const B=URL.createObjectURL(e.file);n(B),I()},F=B=>{t(B),n(B)},V=(B,z)=>{z.stopPropagation(),d(B),e&&a[B]===e&&t(null)};return Ce.createElement("div",null,Ce.createElement(xl,{variant:"contained",color:"primary",onClick:P,sx:{backgroundColor:"gray",fontSize:"0.75rem",padding:"2px 5px"}},"+ Manage Data"),Ce.createElement(pA,{open:o,onClose:I,fullWidth:!0,maxWidth:"sm"},Ce.createElement(dA,null,"Manage your GeoJSON files"),Ce.createElement(hA,null,Ce.createElement(xl,{variant:"outlined",component:"label",sx:{marginTop:2}},"Add File",Ce.createElement("input",{type:"file",hidden:!0,accept:".geojson",onChange:G,ref:T})),Ce.createElement(Db,null,a.map((B,z)=>Ce.createElement(wA,{key:z,disablePadding:!0,secondaryAction:Ce.createElement(mV,{edge:"end","aria-label":"delete",onClick:re=>V(z,re)},Ce.createElement($7,null,"X"))},Ce.createElement(fq,{onClick:()=>F(B),selected:e===B,sx:{bgcolor:re=>e===B?re.palette.primary.main:"transparent"}},Ce.createElement(Rq,{primary:B.name}))))),e&&Ce.createElement(Ce.Fragment,null,Ce.createElement(AA,{fullWidth:!0,label:"File Name",variant:"outlined",value:e.name,onChange:$,margin:"normal"}),Ce.createElement(Pv,{fullWidth:!0,margin:"normal"},Ce.createElement(zb,null,"Data Type"),Ce.createElement(Av,{value:x,label:"Data Type",onChange:q},Ce.createElement(Op,{value:"mobility"},"Mobility"),Ce.createElement(Op,{value:"energy"},"Energy"))))),Ce.createElement(fA,null,Ce.createElement(xl,{onClick:I},"Cancel"),Ce.createElement(xl,{onClick:D},"View"))))};Ds.accessToken="pk.eyJ1Ijoia3g2NCIsImEiOiJjbGkzd2E1dmsxMzNoM2twY2p2azF0bGVlIn0.t_v73kaAMUtoGBPESpw3uA";const zG="./Data/ithaca_mobility_summary.geojson",DG="./Data/ithaca_mobility_summary_point.geojson",ey="./Data/ithaca_siteSummary_energy.geojson",ty="./Data/ithaca_energy_buildingData_1107.geojson",BC="./Data/ithaca_energy_feeder.geojson",NC="./Data/ithaca_trip_volume_by_streets.geojson",FC="./Data/ithaca_trip_volume_from_blocks.geojson",UC="./Data/mobility_metric_specification.json",$C="./Data/energy_metric_specification.json",OG="https://geotile.urbano.io/Ithaca_TripVolume/{z}/{x}/{y}.mvt";function BG(){var nn;const e=Q.useRef(null),t=Q.useRef(null),[n,a]=Q.useState([0,398]),[c,d]=Q.useState(ty),[o,v]=Q.useState(ey),[x,E]=Q.useState(!0),T="mapbox://styles/kx64/cljdd8xr6003l01qkbxctho6q",[P,I]=Q.useState("UBEM Viewer"),[q,$]=Q.useState(""),[G,D]=Q.useState(!0),[F,V]=Q.useState(!1),[B,z]=Q.useState(!1),[re,ie]=Q.useState(!1),[ce,xe]=Q.useState(!1),[Te,ve]=Q.useState(!1),[we,ee]=Q.useState(!1),[pe,Oe]=Q.useState(!1),[Ue,Ee]=Q.useState(!1);Q.useState("weekday"),Q.useState("enduse"),Q.useState("winter");const[ke,je]=Q.useState([]);Q.useState(!1);const[Ze,wt]=Q.useState([]),[Pe,Ge]=Q.useState(null),lt=Le=>{wt(rt=>[...rt,Le])},Re=Le=>{wt(rt=>rt.filter((St,sr)=>sr!==Le))},qe=Q.useRef(new Set),[Xt,Pt]=Q.useState(0),[Bt,Ct]=Q.useState("1_1_-1_-1_-1_-1"),[ir,Kt]=Q.useState("Gas[kWh_m2][Yr]"),[Jt,st]=Q.useState("PeakHourElectricityDemand_KW"),[Ot,tr]=Q.useState(12857),[Lr,Fr]=Q.useState(1700),[rr,qr]=Q.useState(1e3),[zr,Cr]=Q.useState(0),[an,Rr]=Q.useState(53143),[ur,Yr]=Q.useState(1),[Sn,ai]=Q.useState(1),[dr,Nt]=Q.useState({season:1,mode:-1,weekday:1,timeOfDay:-1,fromActivity:-1,toActivity:-1}),[jn,Bn]=Q.useState("People/hr");Q.useState(ke.length>0?(nn=U6.find(Le=>Le.id===ke[0]))==null?void 0:nn.label:"Dashboard Selector");const $i=()=>{if(t.current){const Le=t.current;ke.forEach(rt=>{Le.setLayoutProperty(rt,"visibility","none")}),I("UBEM Viewer"),ve(!1),z(!1),ie(!1),xe(!1),ee(!1),V(!1),D(!0),__(t,qe),Pt(qe.current.size),Le.flyTo({center:[-76.5087,42.4558],zoom:8})}},Ut=()=>{if(t.current){const Le=t.current;Le.flyTo({center:[-76.5087,42.444],zoom:13}),je(["energy-Building","energy-Building-highlighted","energy-Building-other"]),ke.forEach(rt=>{Le.setLayoutProperty(rt,"visibility","visible")}),I("UBEM Viewer / Ithaca"),$("Ithaca /k/ is a city and the county seat of Tompkins County, New York, United States. Situated on the southern shore of Cayuga Lake in the Finger Lakes region of New York, Ithaca is the largest community in the Ithaca metropolitan statistical area. It is named after the Greek island of Ithaca."),D(!1),V(!0),z(!1),__(t,qe),Pt(qe.current.size),popup.remove()}},Sr=(Le,rt)=>{Nt(St=>({...St,[Le]:parseInt(rt)}))},ct=()=>{const Le=`1_${dr.weekday}_${dr.mode}_${dr.timeOfDay}_${dr.fromActivity}_${dr.toActivity}`;Ct(Le),console.log("the layer Code you selected is",Bt)};Q.useEffect(()=>{const Le=rt=>{rt.key==="Escape"&&(__(t,qe),Pt(qe.current.size),ke.includes("energy-Building")&&(generateEndUseBarGraph(qe,t),generateFuelUseBarGraph(qe,t)),ke.includes("energy-Feeder")&&(RE(qe,t),LE(qe,t),zE(qe,t)),ke.includes("mobility-Block-Detailed")&&(b_(qe,t),x_(qe,t),w_(qe,t),S_(qe,t)),ke.includes("mobility-Street-Detailed")&&(b_(qe,t),x_(qe,t),w_(qe,t),S_(qe,t)))};return document.addEventListener("keydown",Le),()=>{document.removeEventListener("keydown",Le)}},[]),Q.useEffect(()=>{fetch(NC).then(Le=>Le.json()).then(Le=>{const rt=Le.features.map(te=>{var me;return((me=te.properties[Bt])==null?void 0:me.replace(/,/g,""))||0});rt.sort((te,de)=>te-de);const St=Math.floor(rt.length*.05),sr=Math.floor(rt.length*.95),Dr=rt[St],Zt=rt[sr],L=Zt-Dr,U=Zt+1.5*L,W=rt.filter(te=>te<=U),Y=Math.max(...W);tr(Y),ke.includes("mobility-Street-Detailed")&&Yr(Y)}).catch(Le=>{console.error("Error loading GeoJSON data:",Le)})},[Bt]),Q.useEffect(()=>{fetch(FC).then(Le=>Le.json()).then(Le=>{const rt=Le.features.map(te=>{var me;return parseFloat((me=te.properties[Bt])==null?void 0:me.replace(/,/g,""))||0});rt.sort((te,de)=>te-de);const St=Math.floor(rt.length*.05),sr=Math.floor(rt.length*.95),Dr=rt[St],Zt=rt[sr],L=Zt-Dr,U=Zt+1.5*L,W=rt.filter(te=>te<=U),Y=Math.max(...W);Fr(Y),ke.includes("mobility-Block-Detailed")&&Yr(Y)}).catch(Le=>{console.error("Error loading GeoJSON data:",Le)})},[Bt]),Q.useEffect(()=>{fetch(c).then(Le=>Le.json()).then(Le=>{const rt=Le.features.map(de=>de.properties[ir]||0);rt.sort((de,me)=>de-me);const St=Math.floor(rt.length*.2),sr=Math.floor(rt.length*.8),Dr=rt[St],Zt=rt[sr],L=Zt-Dr,U=Zt+1.5*L,W=rt.filter(de=>de<=U),Y=Math.max(...W),te=Math.min(...W);qr(Y),Cr(te),ke.includes("energy-Building")&&(Yr(Y),ai(te))}).catch(Le=>{console.error("Error loading GeoJSON data:",Le)})},[ir,c]),Q.useEffect(()=>{fetch(BC).then(Le=>Le.json()).then(Le=>{const rt=Le.features.map(te=>parseFloat(String(te.properties[Jt]).replace(/,/g,""))||0);rt.sort((te,de)=>te-de);const St=Math.floor(rt.length*.2),sr=Math.floor(rt.length*.8),Dr=rt[St],Zt=rt[sr],L=Zt-Dr,U=Zt+1.5*L,W=rt.filter(te=>te<=U),Y=Math.max(...W);Rr(Y),ke.includes("energy-Feeder")&&Yr(Y)}).catch(Le=>{console.error("Error loading GeoJSON data:",Le)})},[Jt]);const Lt=Le=>{const rt=[];let St=9,sr=Fo(Bt,St);Le.includes("mobility-Street-Detailed")?(St=Ot,sr=Fo(Bt,St)):Le.includes("mobility-Block-Detailed")?(St=Lr,sr=Fo(Bt,St)):Le.includes("energy-Building")?(St=rr,sr=Fo(ir,St)):Le.includes("energy-Feeder")&&(St=an,sr=Fo(Jt,St)),rt.push(Ce.createElement("div",{key:"legend-title",className:"legend-title"},jn)),rt.push(Ce.createElement("div",{className:"input-container"}," ",vr()));for(let Dr=sr.length-2;Dr>=2;Dr-=2){const Zt=parseFloat(sr[Dr]),L=sr[Dr+1];rt.push(Ce.createElement("div",{key:Zt,className:"legend-item"},Ce.createElement("span",{className:"value-label"},O6(Zt)),Ce.createElement("div",{className:"color-swatch",style:{backgroundColor:L}})))}return rt},vr=()=>{if(ke.includes("mobility-Street-Detailed"))return Ce.createElement("input",{id:"user-max-value",type:"number",value:parseInt(Ot),onChange:Le=>{const rt=parseInt(Le.target.value);tr(rt)},onBlur:Le=>{Ot<10&&tr(10),Le.target.value.trim()===""&&tr(ur)},placeholder:"Enter Max Value",inputMode:"numeric"});if(ke.includes("mobility-Block-Detailed"))return Ce.createElement("input",{id:"user-max-value",type:"number",value:parseInt(Lr),onChange:Le=>{const rt=parseInt(Le.target.value);Fr(rt)},onBlur:Le=>{Lr<10&&Fr(10),Le.target.value.trim()===""&&Fr(ur)},placeholder:"Enter Max Value",inputMode:"numeric"});if(ke.includes("energy-Building"))return Ce.createElement("input",{id:"user-max-value",type:"number",value:parseInt(rr),onChange:Le=>{const rt=parseInt(Le.target.value);qr(rt)},onBlur:Le=>{rr<10&&qr(10),Le.target.value.trim()===""&&qr(ur)},placeholder:"Enter Max Value",inputMode:"numeric"});if(ke.includes("energy-Feeder"))return Ce.createElement("input",{id:"user-max-value",type:"number",value:parseInt(an),onChange:Le=>{const rt=parseInt(Le.target.value);Rr(rt)},onBlur:Le=>{an<10&&Rr(10),Le.target.value.trim()===""&&Rr(ur)},placeholder:"Enter Max Value",inputMode:"numeric"})};Q.useEffect(()=>{if(!e.current)return;const Le=new Ds.Map({container:e.current,style:T,center:[-76.5087,42.4558],zoom:8.5,dragRotate:!1,accessToken:Ds.accessToken});return t.current=Le,()=>{Le&&Le.remove()}},[x]),Q.useEffect(()=>{if(t.current){const Le=t.current,rt=new M5({accessToken:Ds.accessToken,flyTo:{bearing:0,speed:2,curve:1,easing:function(St){return St}},mapboxgl:Ds});Le.addControl(rt)}},[]),Q.useEffect(()=>{t.current&&t.current.addControl(new Ds.NavigationControl)},[]),Q.useEffect(()=>{if(t.current){const Le=t.current,rt=Le.getCanvasContainer();let St,sr,Dr;Le.on("load",function(){const Zt=Le.getStyle().layers;let L;for(const ne of Zt)if(ne.type==="symbol"){L=ne.id;break}Le.addSource("mobility-Street-mvt",{type:"vector",tiles:[OG]}),Le.addSource("mobility-Street-geojson",{type:"geojson",data:NC}),Le.addSource("mobility-Block-geojson",{type:"geojson",data:FC}),Le.addSource("mobility-Ithaca",{type:"geojson",data:zG}),Le.addSource("mobility-Ithaca-dot",{type:"geojson",data:DG}),Le.addLayer({id:"mobility-Block-Detailed",type:"fill",source:"mobility-Block-geojson",paint:{"fill-outline-color":"#ECECEC","fill-color":Fo(Bt,Lr),"fill-opacity":.75},layout:{visibility:"none"}},L),Le.addLayer({id:"mobility-Block-Detailed-other",type:"fill",source:"mobility-Block-geojson",paint:{"fill-opacity":0},layout:{visibility:"none"}},L),Le.addLayer({id:"mobility-Block-Detailed-highlighted",type:"fill",source:"mobility-Block-geojson",paint:{"fill-outline-color":"#ffffff","fill-color":"#E8E8E8","fill-opacity":.99},filter:["in","object_id",""],layout:{visibility:"none"}},L),Le.addLayer({id:"mobility-Street-Detailed",type:"line",source:"mobility-Street-geojson",paint:{"line-color":Fo(Bt,Ot),"line-width":["interpolate",["exponential",1],["to-number",["get",Bt]],0,1,parseFloat(Ot),5]},layout:{visibility:"none"}},L),Le.addLayer({id:"mobility-Street-Detailed-other",type:"line",source:"mobility-Street-geojson",paint:{"line-color":"#f7f7f7","line-width":0},layout:{visibility:"none"}},L),Le.addLayer({id:"mobility-Street-Detailed-highlighted",type:"line",source:"mobility-Street-geojson",paint:{"line-color":"#d8d8d8","line-width":["interpolate",["exponential",1],["to-number",["get",Bt]],0,1.75,parseFloat(Ot),6]},filter:["in","object_id",""],layout:{visibility:"none"}},L),Le.addLayer({id:"mobility-point",type:"circle",source:"mobility-Ithaca-dot",paint:{"circle-color":"rgba(254, 178, 76, 0.85)","circle-radius":40},layout:{visibility:"none"}}),Le.addLayer({id:"mobility-point-label",type:"symbol",source:"mobility-Ithaca-dot",layout:{"text-field":["get","name"],"text-font":["Open Sans Regular"],"text-size":18},layout:{visibility:"none"}}),Le.addLayer({id:"mobility-Ithaca-boundary",type:"line",source:"mobility-Ithaca",paint:{"line-color":"#bbbbbb","line-dasharray":[10,6],"line-opacity":.6},layout:{visibility:"none"}});const U=new Ds.Popup({closeButton:!1,closeOnClick:!1});Le.on("mouseenter","mobility-point",ne=>{Le.getCanvas().style.cursor="pointer";const Se=ne.features[0].geometry.coordinates.slice(),He=`<div style="font-size: 20px; font-weight: bold; margin-bottom: 5px;">Ithaca, New York</div>
              <div style="font-size: 12px; font-weight: normal; margin-bottom: 10px;">Available Dashboard:</div>
       
              <div style="font-size: 10px; font-weight: light;">Building Energy </div>
              <div style="font-size: 10px; font-weight: light;">Grid Energy </div>
              <div style="font-size: 10px; font-weight: light;">Street Mobility </div>
              <div style="font-size: 10px; font-weight: light;">Block Mobility </div>`;for(;Math.abs(ne.lngLat.lng-Se[0])>180;)Se[0]+=ne.lngLat.lng>Se[0]?360:-360;U.setLngLat(Se).setHTML(He).addTo(Le)}),Le.on("mouseleave","mobility-point",()=>{Le.getCanvas().style.cursor="",U.remove()}),Le.on("click","mobility-point",ne=>{Le.flyTo({center:ne.features[0].geometry.coordinates,zoom:13}),je(["energy-Building","energy-Building-highlighted","energy-Building-other"]),ke.forEach(Se=>{Le.setLayoutProperty(Se,"visibility","visible")}),I("UBEM Viewer / Ithaca"),$("Ithaca /k/ is a city and the county seat of Tompkins County, New York, United States. Situated on the southern shore of Cayuga Lake in the Finger Lakes region of New York, Ithaca is the largest community in the Ithaca metropolitan statistical area. It is named after the Greek island of Ithaca."),D(!1),V(!0),U.remove()}),Le.on("boxzoomend",ne=>{Le.dragPan.enable();const Se=ne.boxZoomBounds;Le.fitBounds(Se,{padding:1})}),Le.on("zoom",()=>{const ne="mobility-point",Se="mobility-point-label",He="mobility-Ithaca-boundary";Le.getZoom()<10?(Le.setLayoutProperty(ne,"visibility","visible"),Le.setLayoutProperty(Se,"visibility","visible"),Le.setLayoutProperty(He,"visibility","none")):(Le.setLayoutProperty(ne,"visibility","none"),Le.setLayoutProperty(Se,"visibility","none"),Le.setLayoutProperty(He,"visibility","visible"))}),rt.addEventListener("mousedown",te,!0);function W(ne){const Se=rt.getBoundingClientRect();return new Ds.Point(ne.clientX-Se.left-rt.clientLeft,ne.clientY-Se.top-rt.clientTop)}function Y(){Le.setFilter("mobility-Street-Detailed-highlighted",["!in","object_id",...qe.current]),Le.setFilter("mobility-Block-Detailed-highlighted",["!in","object_id",...qe.current])}function te(ne){if(ne.button===0&&(ne.shiftKey&&Le.dragPan.disable(),document.addEventListener("mouseup",de),document.addEventListener("keydown",Z),St=W(ne),ne.ctrlKey)){const He=Le.queryRenderedFeatures([St,St],{layers:["mobility-Street-Detailed","mobility-Block-Detailed"]}).map(Ye=>Ye.properties.object_id);qe.current=new Set([...qe.current].filter(Ye=>!He.includes(Ye))),Y(),Pt(qe.current.size)}}function de(ne){Le.dragPan.enable(),sr=W(ne);const Se=Le.queryRenderedFeatures([St,sr],{layers:["mobility-Street-Detailed","mobility-Block-Detailed"]});me(ne,Se)}function me(ne,Se){if(Dr||(Dr=document.createElement("div"),Dr.classList.add("boxdraw"),rt.appendChild(Dr)),ne.shiftKey){for(const He of Se)qe.current.add(He.properties.object_id);Y()}if(ne.ctrlKey){for(const He of Se)qe.current.delete(He.properties.object_id);Y()}document.removeEventListener("keydown",Z),document.removeEventListener("mouseup",de),Pt(qe.current.size)}function Z(ne){ne.keyCode===27&&mobilityfinish()}})}},[]),Q.useEffect(()=>{if(t.current){const Le=t.current,rt=Le.getCanvasContainer();let St,sr;Le.on("load",function(){const Dr=Le.getStyle().layers;let Zt;for(const me of Dr)if(me.type==="symbol"){Zt=me.id;break}Le.addSource("ithaca-energy-Summary",{type:"geojson",data:o}),Le.addSource("ithaca-energy-Building",{type:"geojson",data:c}),Le.addSource("ithaca-energy-Feeder",{type:"geojson",data:BC}),Le.addLayer({id:"energy-Building",type:"fill",source:"ithaca-energy-Building",filter:["has","Equipment[KWh][Yr]"],paint:{"fill-outline-color":"#eeeeee","fill-color":Fo(ir,rr)},layout:{visibility:"none"}},Zt),Le.addLayer({id:"energy-Building-highlighted",type:"fill",source:"ithaca-energy-Building",paint:{"fill-outline-color":"#ffffff","fill-color":"#d8d8d8","fill-opacity":.99},filter:["in","ID_ESL",""],layout:{visibility:"none"}},Zt),Le.addLayer({id:"energy-Building-other",type:"fill",source:"ithaca-energy-Building",filter:["!",["has","Gas[kWh][Mth]"]],paint:{"fill-outline-color":"#d9d9d9","fill-color":"#f1f1f1"},layout:{visibility:"none"}},Zt),Le.addLayer({id:"energy-Feeder",type:"line",source:"ithaca-energy-Feeder",filter:["has","GasDemand_KWh"],paint:{"line-color":Fo(Jt,an),"line-width":3},layout:{visibility:"none"}},Zt),Le.addLayer({id:"energy-Feeder-other",type:"line",source:"ithaca-energy-Feeder",filter:["!",["has","GasDemand_KWh"]],paint:{"line-width":3,"line-color":"#d8d8d8"},layout:{visibility:"none"}},Zt),Le.addLayer({id:"energy-Feeder-highlighted",type:"line",source:"ithaca-energy-Feeder",filter:["has","GasDemand_KWh"],paint:{"line-color":"#d8d8d8","line-width":3},layout:{visibility:"none"}},Zt),rt.addEventListener("mousedown",W,!0);function L(me){const Z=rt.getBoundingClientRect();return new Ds.Point(me.clientX-Z.left-rt.clientLeft,me.clientY-Z.top-rt.clientTop)}function U(){Le.setFilter("energy-Building-highlighted",["!in","ID_ESL",...qe.current]),Le.setFilter("energy-Feeder-highlighted",["!in","ID_ESL",...qe.current])}function W(me){me.button===0&&(me.shiftKey&&Le.dragPan.disable(),document.removeEventListener("mouseup",Y),document.removeEventListener("keydown",te),document.addEventListener("mouseup",Y),document.addEventListener("keydown",te),St=L(me),me.ctrlKey&&(Le.queryRenderedFeatures([St,St],{layers:["energy-Building","energy-Feeder"]}).map(Se=>Se.properties.ID_ESL).forEach(Se=>{qe.current.has(Se)&&qe.current.delete(Se)}),U()))}function Y(me){Le.dragPan.enable(),sr=L(me);const Z=Le.queryRenderedFeatures([St,sr],{layers:["energy-Building","energy-Feeder"]});de(me,Z)}function te(me){me.keyCode===27&&de(me,[])}function de(me,Z){document.removeEventListener("mouseup",Y),document.removeEventListener("keydown",te),me.shiftKey?(Z.forEach(ne=>{const Se=ne.properties.ID_ESL;qe.current.has(Se)||qe.current.add(Se)}),U()):me.ctrlKey&&(Z.forEach(ne=>{const Se=ne.properties.ID_ESL;qe.current.has(Se)&&qe.current.delete(Se)}),U()),Pt(qe.current.size),console.log(qe.current)}Q.useEffect(()=>{ME(qe,t,o)},[c])})}},[]),Q.useEffect(()=>{const rt=setTimeout(async()=>{if(t.current){const St=t.current,sr="mobility-Street-Detailed",Dr="mobility-Street-Detailed-highlighted",Zt="mobility-Block-Detailed",L="energy-Building",U="energy-Feeder",W=Ot,Y=Lr,te=rr,de=an;St.getLayer(sr)&&(St.setPaintProperty(sr,"line-color",Fo(Bt,W)),St.setPaintProperty(Dr,"line-width",["interpolate",["exponential",1],["to-number",["get",Bt]],0,1.75,parseFloat(Ot),6]),St.setPaintProperty(sr,"line-width",["interpolate",["exponential",1],["to-number",["get",Bt]],0,1.5,parseFloat(Ot),6])),St.getLayer(Zt)&&St.setPaintProperty(Zt,"fill-color",Fo(Bt,Y)),St.getLayer(L)&&St.setPaintProperty(L,"fill-color",Fo(ir,te)),St.getLayer(U)&&St.setPaintProperty(U,"line-color",Fo(Jt,de))}},700);return()=>clearTimeout(rt)},[Lr,Ot,rr,an,Bt,ir,Jt]),Q.useEffect(()=>{if(t.current){const Le=t.current,rt=["mobility-Street-Detailed","mobility-Block-Detailed","energy-Building","energy-Feeder"];for(const St of rt){if(!Le.getLayer(St))continue;const sr=ke.includes(DE(St)),Dr=ke.includes(OE(St)),Zt=ke.includes(St)||sr||Dr;Dr&&Le.setLayoutProperty(OE(St),"visibility",Zt?"visible":"none"),sr&&Le.setLayoutProperty(DE(St),"visibility",Zt?"visible":"none"),Le.setLayoutProperty(St,"visibility",Zt?"visible":"none")}}},[ke]),Q.useEffect(()=>{ke.includes("energy-Building")&&(z(!1),xe(!0),ve(!0),ee(!1),fetch($C).then(Le=>Le.json()).then(Le=>{const rt=Le[0].metric_description;$(rt)}),Yr(rr),Bn("kWh/m2")),ke.includes("energy-Feeder")&&(z(!1),ie(!1),xe(!0),ee(!0),ve(!1),fetch($C).then(Le=>Le.json()).then(Le=>{const rt=Le[1].metric_description;$(rt)}),Yr(an),Bn("kW")),(ke.includes("mobility-Street-Detailed")||ke.includes("mobility-Block-Detailed"))&&(z(!0),xe(!1),ve(!1),ee(!1),ke.includes("mobility-Street-Detailed")?(fetch(UC).then(Le=>Le.json()).then(Le=>{const rt=Le[0].metric_description;$(rt)}),Yr(Ot),ie(!1)):(fetch(UC).then(Le=>Le.json()).then(Le=>{const rt=Le[1].metric_description;$(rt)}),Yr(Lr),ie(!0)),Bn("Number of Trips"))},[ke,ir,qe]),Q.useEffect(()=>{const Le=parseInt(zr),rt=parseInt(rr),St=[Math.min(n[0],rt),Math.min(n[1],rt)];St[0]>St[1]&&(St[0]=Le),a(St)},[rr,zr]);const Er=()=>{Ee(!Ue)};return Ce.createElement("div",{className:"container"},(B||ce)&&Ce.createElement("div",{className:"sidebar"},Ce.createElement("div",{className:"title-container"},Ce.createElement("div",{className:"title"},Ce.createElement("p",{onClick:$i},P))),G&&Ce.createElement("div",{className:"home-page"},Ce.createElement($6,{handleDigitalTwinClick:Ut})),pe&&Ce.createElement("div",{className:"city-info"},q),F&&Ce.createElement("div",{class:"hr-container"},Ce.createElement("span",{class:"summary-title"},"Dataset Management")),F&&Ce.createElement("div",null,Ce.createElement(LG,{onDataImport:d,files:Ze,setFiles:wt,deleteFile:Re,selectedFile:Pe,setSelectedFile:Ge})),B&&Ce.createElement("div",null,Ce.createElement(L_,{selectedFileName:Pe?Pe.name:null,mapRef:t,setBuildingDataUrl:d,setIthacaEnergyUrl:v,BUILDING_DATA_URL:c,BUILDING_DATA_URL_INITIAL:ty,ITHACA_ENERGY_URL_INITIAL:ey})),Te&&Ce.createElement("div",null,Ce.createElement(L_,{mapRef:t,setBuildingDataUrl:d,setIthacaEnergyUrl:v,BUILDING_DATA_URL:c,BUILDING_DATA_URL_INITIAL:ty,ITHACA_ENERGY_URL_INITIAL:ey})),we&&Ce.createElement("div",null,Ce.createElement(L_,{mapRef:t,setBuildingDataUrl:d,setIthacaEnergyUrl:v,BUILDING_DATA_URL:c,BUILDING_DATA_URL_INITIAL:ty,ITHACA_ENERGY_URL_INITIAL:ey}))),(B||ce)&&Ce.createElement("div",{className:"sidebar-graph"},F&&Ce.createElement("div",null,Ce.createElement("div",{class:"hr-container"},Ce.createElement("span",{class:"summary-title"},"Summary Report")),Ce.createElement("div",{className:"selected-number"},Ce.createElement("p",null,Xt," Selected objects."))),B&&Ce.createElement("div",null,Ce.createElement(TG,null)),Te&&Ce.createElement("div",null,Ce.createElement(IG,null)),we&&Ce.createElement("div",null,Ce.createElement(PG,null)),(G||F)&&Ce.createElement("div",{style:{margin:"20px"}}),B&&(b_(qe,t),x_(qe,t),w_(qe,t),S_(qe,t)),ce&&(B6(qe,t,o),N6(qe,t,o),ME(qe,t,o),F6(qe,t)),we&&(RE(qe,t),LE(qe,t),zE(qe,t))),Ce.createElement("div",{className:"content-container"},Ce.createElement("div",{className:"map-container",ref:e}),G&&Ce.createElement("div",{className:"homepage-title"},"UBEM Viewer"),G&&Ce.createElement("div",null,Ce.createElement(RG,{onDataImport:d,addFile:lt,mapRef:t,setTitle:I,setDisplayingLayers:je,setHomeContainerVisible:D,setGeneralContainerVisible:V})),(B||ce)&&Ce.createElement("div",{className:"main-legend-container"},Lt(ke)),(B||ce)&&Ce.createElement("div",{className:"metric-container"},F&&Ce.createElement("div",{style:{position:"relative"}},Ce.createElement("span",{class:"click-title",onClick:Er},Ce.createElement("div",{class:"click-title",style:{display:"flex",alignItems:"center"}},Ce.createElement("img",{src:"./Image/metric.png",alt:"Metrics Icon",style:{width:"30px",marginLeft:"5px"}}),"Metrics"))),Ue&&Te&&Ce.createElement(j6,{buildingLayerCode:ir,setBuildingLayerCode:Kt}),Ue&&we&&Ce.createElement(EG,{feederLayerCode:Jt,setFeederLayerCode:st}),Ue&&B&&Ce.createElement(CG,{propertiesNumber:dr,handlePropertyChange:Sr,blockContainerVisible:re}),Ue&&B&&Ce.createElement(kG,{propertiesNumber:dr,handlePropertyChange:Sr}),Ue&&B&&Ce.createElement("button",{className:"submit-button",onClick:ct},"Apply"))))}function NG(e){gh.render(Ce.createElement(BG,null),e)}NG(document.getElementById("app"));
