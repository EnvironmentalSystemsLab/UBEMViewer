function UM(e,t){for(var n=0;n<t.length;n++){const a=t[n];if(typeof a!="string"&&!Array.isArray(a)){for(const c in a)if(c!=="default"&&!(c in e)){const d=Object.getOwnPropertyDescriptor(a,c);d&&Object.defineProperty(e,c,d.get?d:{enumerable:!0,get:()=>a[c]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))a(c);new MutationObserver(c=>{for(const d of c)if(d.type==="childList")for(const o of d.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function n(c){const d={};return c.integrity&&(d.integrity=c.integrity),c.referrerPolicy&&(d.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?d.credentials="include":c.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function a(c){if(c.ep)return;c.ep=!0;const d=n(c);fetch(c.href,d)}})();var ba=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function MS(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function a(){if(this instanceof a){var c=[null];c.push.apply(c,arguments);var d=Function.bind.apply(t,c);return new d}return t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var c=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(n,a,c.get?c:{enumerable:!0,get:function(){return e[a]}})}),n}var RS={exports:{}},aa={},zS={exports:{}},Gr={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var Xw=Object.getOwnPropertySymbols,jM=Object.prototype.hasOwnProperty,VM=Object.prototype.propertyIsEnumerable;function $M(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function qM(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var a=Object.getOwnPropertyNames(t).map(function(d){return t[d]});if(a.join("")!=="0123456789")return!1;var c={};return"abcdefghijklmnopqrst".split("").forEach(function(d){c[d]=d}),Object.keys(Object.assign({},c)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var LS=qM()?Object.assign:function(e,t){for(var n,a=$M(e),c,d=1;d<arguments.length;d++){n=Object(arguments[d]);for(var o in n)jM.call(n,o)&&(a[o]=n[o]);if(Xw){c=Xw(n);for(var v=0;v<c.length;v++)VM.call(n,c[v])&&(a[c[v]]=n[c[v]])}}return a};/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dx=LS,Rp=60103,OS=60106;Gr.Fragment=60107;Gr.StrictMode=60108;Gr.Profiler=60114;var DS=60109,BS=60110,NS=60112;Gr.Suspense=60113;var FS=60115,US=60116;if(typeof Symbol=="function"&&Symbol.for){var ga=Symbol.for;Rp=ga("react.element"),OS=ga("react.portal"),Gr.Fragment=ga("react.fragment"),Gr.StrictMode=ga("react.strict_mode"),Gr.Profiler=ga("react.profiler"),DS=ga("react.provider"),BS=ga("react.context"),NS=ga("react.forward_ref"),Gr.Suspense=ga("react.suspense"),FS=ga("react.memo"),US=ga("react.lazy")}var Qw=typeof Symbol=="function"&&Symbol.iterator;function WM(e){return e===null||typeof e!="object"?null:(e=Qw&&e[Qw]||e["@@iterator"],typeof e=="function"?e:null)}function Jf(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var jS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},VS={};function zp(e,t,n){this.props=e,this.context=t,this.refs=VS,this.updater=n||jS}zp.prototype.isReactComponent={};zp.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error(Jf(85));this.updater.enqueueSetState(this,e,t,"setState")};zp.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function $S(){}$S.prototype=zp.prototype;function Bx(e,t,n){this.props=e,this.context=t,this.refs=VS,this.updater=n||jS}var Nx=Bx.prototype=new $S;Nx.constructor=Bx;Dx(Nx,zp.prototype);Nx.isPureReactComponent=!0;var Fx={current:null},qS=Object.prototype.hasOwnProperty,WS={key:!0,ref:!0,__self:!0,__source:!0};function GS(e,t,n){var a,c={},d=null,o=null;if(t!=null)for(a in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(d=""+t.key),t)qS.call(t,a)&&!WS.hasOwnProperty(a)&&(c[a]=t[a]);var v=arguments.length-2;if(v===1)c.children=n;else if(1<v){for(var x=Array(v),E=0;E<v;E++)x[E]=arguments[E+2];c.children=x}if(e&&e.defaultProps)for(a in v=e.defaultProps,v)c[a]===void 0&&(c[a]=v[a]);return{$$typeof:Rp,type:e,key:d,ref:o,props:c,_owner:Fx.current}}function GM(e,t){return{$$typeof:Rp,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ux(e){return typeof e=="object"&&e!==null&&e.$$typeof===Rp}function HM(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Jw=/\/+/g;function d0(e,t){return typeof e=="object"&&e!==null&&e.key!=null?HM(""+e.key):t.toString(36)}function Qm(e,t,n,a,c){var d=typeof e;(d==="undefined"||d==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(d){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Rp:case OS:o=!0}}if(o)return o=e,c=c(o),e=a===""?"."+d0(o,0):a,Array.isArray(c)?(n="",e!=null&&(n=e.replace(Jw,"$&/")+"/"),Qm(c,t,n,"",function(E){return E})):c!=null&&(Ux(c)&&(c=GM(c,n+(!c.key||o&&o.key===c.key?"":(""+c.key).replace(Jw,"$&/")+"/")+e)),t.push(c)),1;if(o=0,a=a===""?".":a+":",Array.isArray(e))for(var v=0;v<e.length;v++){d=e[v];var x=a+d0(d,v);o+=Qm(d,t,n,x,c)}else if(x=WM(e),typeof x=="function")for(e=x.call(e),v=0;!(d=e.next()).done;)d=d.value,x=a+d0(d,v++),o+=Qm(d,t,n,x,c);else if(d==="object")throw t=""+e,Error(Jf(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t));return o}function Cm(e,t,n){if(e==null)return e;var a=[],c=0;return Qm(e,a,"","",function(d){return t.call(n,d,c++)}),a}function ZM(e){if(e._status===-1){var t=e._result;t=t(),e._status=0,e._result=t,t.then(function(n){e._status===0&&(n=n.default,e._status=1,e._result=n)},function(n){e._status===0&&(e._status=2,e._result=n)})}if(e._status===1)return e._result;throw e._result}var HS={current:null};function Gs(){var e=HS.current;if(e===null)throw Error(Jf(321));return e}var KM={ReactCurrentDispatcher:HS,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:Fx,IsSomeRendererActing:{current:!1},assign:Dx};Gr.Children={map:Cm,forEach:function(e,t,n){Cm(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Cm(e,function(){t++}),t},toArray:function(e){return Cm(e,function(t){return t})||[]},only:function(e){if(!Ux(e))throw Error(Jf(143));return e}};Gr.Component=zp;Gr.PureComponent=Bx;Gr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=KM;Gr.cloneElement=function(e,t,n){if(e==null)throw Error(Jf(267,e));var a=Dx({},e.props),c=e.key,d=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(d=t.ref,o=Fx.current),t.key!==void 0&&(c=""+t.key),e.type&&e.type.defaultProps)var v=e.type.defaultProps;for(x in t)qS.call(t,x)&&!WS.hasOwnProperty(x)&&(a[x]=t[x]===void 0&&v!==void 0?v[x]:t[x])}var x=arguments.length-2;if(x===1)a.children=n;else if(1<x){v=Array(x);for(var E=0;E<x;E++)v[E]=arguments[E+2];a.children=v}return{$$typeof:Rp,type:e.type,key:c,ref:d,props:a,_owner:o}};Gr.createContext=function(e,t){return t===void 0&&(t=null),e={$$typeof:BS,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider={$$typeof:DS,_context:e},e.Consumer=e};Gr.createElement=GS;Gr.createFactory=function(e){var t=GS.bind(null,e);return t.type=e,t};Gr.createRef=function(){return{current:null}};Gr.forwardRef=function(e){return{$$typeof:NS,render:e}};Gr.isValidElement=Ux;Gr.lazy=function(e){return{$$typeof:US,_payload:{_status:-1,_result:e},_init:ZM}};Gr.memo=function(e,t){return{$$typeof:FS,type:e,compare:t===void 0?null:t}};Gr.useCallback=function(e,t){return Gs().useCallback(e,t)};Gr.useContext=function(e,t){return Gs().useContext(e,t)};Gr.useDebugValue=function(){};Gr.useEffect=function(e,t){return Gs().useEffect(e,t)};Gr.useImperativeHandle=function(e,t,n){return Gs().useImperativeHandle(e,t,n)};Gr.useLayoutEffect=function(e,t){return Gs().useLayoutEffect(e,t)};Gr.useMemo=function(e,t){return Gs().useMemo(e,t)};Gr.useReducer=function(e,t,n){return Gs().useReducer(e,t,n)};Gr.useRef=function(e){return Gs().useRef(e)};Gr.useState=function(e){return Gs().useState(e)};Gr.version="17.0.2";zS.exports=Gr;var ee=zS.exports;const Ie=Qf(ee),C_=UM({__proto__:null,default:Ie},[ee]);var ZS={exports:{}},KS={};/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){var t,n,a,c;if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;e.unstable_now=function(){return d.now()}}else{var o=Date,v=o.now();e.unstable_now=function(){return o.now()-v}}if(typeof window>"u"||typeof MessageChannel!="function"){var x=null,E=null,k=function(){if(x!==null)try{var Ce=e.unstable_now();x(!0,Ce),x=null}catch(qe){throw setTimeout(k,0),qe}};t=function(Ce){x!==null?setTimeout(t,0,Ce):(x=Ce,setTimeout(k,0))},n=function(Ce,qe){E=setTimeout(Ce,qe)},a=function(){clearTimeout(E)},e.unstable_shouldYield=function(){return!1},c=e.unstable_forceFrameRate=function(){}}else{var P=window.setTimeout,T=window.clearTimeout;if(typeof console<"u"){var W=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof W!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var $=!1,H=null,D=-1,U=5,q=0;e.unstable_shouldYield=function(){return e.unstable_now()>=q},c=function(){},e.unstable_forceFrameRate=function(Ce){0>Ce||125<Ce?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<Ce?Math.floor(1e3/Ce):5};var N=new MessageChannel,O=N.port2;N.port1.onmessage=function(){if(H!==null){var Ce=e.unstable_now();q=Ce+U;try{H(!0,Ce)?O.postMessage(null):($=!1,H=null)}catch(qe){throw O.postMessage(null),qe}}else $=!1},t=function(Ce){H=Ce,$||($=!0,O.postMessage(null))},n=function(Ce,qe){D=P(function(){Ce(e.unstable_now())},qe)},a=function(){T(D),D=-1}}function te(Ce,qe){var gt=Ce.length;Ce.push(qe);e:for(;;){var ze=gt-1>>>1,st=Ce[ze];if(st!==void 0&&0<xe(st,qe))Ce[ze]=qe,Ce[gt]=st,gt=ze;else break e}}function ne(Ce){return Ce=Ce[0],Ce===void 0?null:Ce}function fe(Ce){var qe=Ce[0];if(qe!==void 0){var gt=Ce.pop();if(gt!==qe){Ce[0]=gt;e:for(var ze=0,st=Ce.length;ze<st;){var Wt=2*(ze+1)-1,Dt=Ce[Wt],Ht=Wt+1,At=Ce[Ht];if(Dt!==void 0&&0>xe(Dt,gt))At!==void 0&&0>xe(At,Dt)?(Ce[ze]=At,Ce[Ht]=gt,ze=Ht):(Ce[ze]=Dt,Ce[Wt]=gt,ze=Wt);else if(At!==void 0&&0>xe(At,gt))Ce[ze]=At,Ce[Ht]=gt,ze=Ht;else break e}}return qe}return null}function xe(Ce,qe){var gt=Ce.sortIndex-qe.sortIndex;return gt!==0?gt:Ce.id-qe.id}var Te=[],ve=[],Ee=1,Y=null,he=3,Ne=!1,We=!1,we=!1;function be(Ce){for(var qe=ne(ve);qe!==null;){if(qe.callback===null)fe(ve);else if(qe.startTime<=Ce)fe(ve),qe.sortIndex=qe.expirationTime,te(Te,qe);else break;qe=ne(ve)}}function $e(Ce){if(we=!1,be(Ce),!We)if(ne(Te)!==null)We=!0,t(Le);else{var qe=ne(ve);qe!==null&&n($e,qe.startTime-Ce)}}function Le(Ce,qe){We=!1,we&&(we=!1,a()),Ne=!0;var gt=he;try{for(be(qe),Y=ne(Te);Y!==null&&(!(Y.expirationTime>qe)||Ce&&!e.unstable_shouldYield());){var ze=Y.callback;if(typeof ze=="function"){Y.callback=null,he=Y.priorityLevel;var st=ze(Y.expirationTime<=qe);qe=e.unstable_now(),typeof st=="function"?Y.callback=st:Y===ne(Te)&&fe(Te),be(qe)}else fe(Te);Y=ne(Te)}if(Y!==null)var Wt=!0;else{var Dt=ne(ve);Dt!==null&&n($e,Dt.startTime-qe),Wt=!1}return Wt}finally{Y=null,he=gt,Ne=!1}}var St=c;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Ce){Ce.callback=null},e.unstable_continueExecution=function(){We||Ne||(We=!0,t(Le))},e.unstable_getCurrentPriorityLevel=function(){return he},e.unstable_getFirstCallbackNode=function(){return ne(Te)},e.unstable_next=function(Ce){switch(he){case 1:case 2:case 3:var qe=3;break;default:qe=he}var gt=he;he=qe;try{return Ce()}finally{he=gt}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=St,e.unstable_runWithPriority=function(Ce,qe){switch(Ce){case 1:case 2:case 3:case 4:case 5:break;default:Ce=3}var gt=he;he=Ce;try{return qe()}finally{he=gt}},e.unstable_scheduleCallback=function(Ce,qe,gt){var ze=e.unstable_now();switch(typeof gt=="object"&&gt!==null?(gt=gt.delay,gt=typeof gt=="number"&&0<gt?ze+gt:ze):gt=ze,Ce){case 1:var st=-1;break;case 2:st=250;break;case 5:st=1073741823;break;case 4:st=1e4;break;default:st=5e3}return st=gt+st,Ce={id:Ee++,callback:qe,priorityLevel:Ce,startTime:gt,expirationTime:st,sortIndex:-1},gt>ze?(Ce.sortIndex=gt,te(ve,Ce),ne(Te)===null&&Ce===ne(ve)&&(we?a():we=!0,n($e,gt-ze))):(Ce.sortIndex=st,te(Te,Ce),We||Ne||(We=!0,t(Le))),Ce},e.unstable_wrapCallback=function(Ce){var qe=he;return function(){var gt=he;he=qe;try{return Ce.apply(this,arguments)}finally{he=gt}}}})(KS);ZS.exports=KS;var XM=ZS.exports;/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cg=ee,zn=LS,Ci=XM;function mt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!cg)throw Error(mt(227));var XS=new Set,If={};function Uu(e,t){xp(e,t),xp(e+"Capture",t)}function xp(e,t){for(If[e]=t,e=0;e<t.length;e++)XS.add(t[e])}var Vs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),QM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Yw=Object.prototype.hasOwnProperty,e2={},t2={};function JM(e){return Yw.call(t2,e)?!0:Yw.call(e2,e)?!1:QM.test(e)?t2[e]=!0:(e2[e]=!0,!1)}function YM(e,t,n,a){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function e3(e,t,n,a){if(t===null||typeof t>"u"||YM(e,t,n,a))return!0;if(a)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function lo(e,t,n,a,c,d,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=c,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=d,this.removeEmptyString=o}var Ni={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ni[e]=new lo(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ni[t]=new lo(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ni[e]=new lo(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ni[e]=new lo(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ni[e]=new lo(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ni[e]=new lo(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ni[e]=new lo(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ni[e]=new lo(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ni[e]=new lo(e,5,!1,e.toLowerCase(),null,!1,!1)});var jx=/[\-:]([a-z])/g;function Vx(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(jx,Vx);Ni[t]=new lo(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(jx,Vx);Ni[t]=new lo(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(jx,Vx);Ni[t]=new lo(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ni[e]=new lo(e,1,!1,e.toLowerCase(),null,!1,!1)});Ni.xlinkHref=new lo("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ni[e]=new lo(e,1,!1,e.toLowerCase(),null,!0,!0)});function $x(e,t,n,a){var c=Ni.hasOwnProperty(t)?Ni[t]:null,d=c!==null?c.type===0:a?!1:!(!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N");d||(e3(t,n,c,a)&&(n=null),a||c===null?JM(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):c.mustUseProperty?e[c.propertyName]=n===null?c.type===3?!1:"":n:(t=c.attributeName,a=c.attributeNamespace,n===null?e.removeAttribute(t):(c=c.type,n=c===3||c===4&&n===!0?"":""+n,a?e.setAttributeNS(a,t,n):e.setAttribute(t,n))))}var ju=cg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,nf=60103,Eu=60106,ml=60107,qx=60108,df=60114,Wx=60109,Gx=60110,pg=60112,mf=60113,xy=60120,hg=60115,Hx=60116,Zx=60121,Kx=60128,QS=60129,Xx=60130,k_=60131;if(typeof Symbol=="function"&&Symbol.for){var Si=Symbol.for;nf=Si("react.element"),Eu=Si("react.portal"),ml=Si("react.fragment"),qx=Si("react.strict_mode"),df=Si("react.profiler"),Wx=Si("react.provider"),Gx=Si("react.context"),pg=Si("react.forward_ref"),mf=Si("react.suspense"),xy=Si("react.suspense_list"),hg=Si("react.memo"),Hx=Si("react.lazy"),Zx=Si("react.block"),Si("react.scope"),Kx=Si("react.opaque.id"),QS=Si("react.debug_trace_mode"),Xx=Si("react.offscreen"),k_=Si("react.legacy_hidden")}var r2=typeof Symbol=="function"&&Symbol.iterator;function Bh(e){return e===null||typeof e!="object"?null:(e=r2&&e[r2]||e["@@iterator"],typeof e=="function"?e:null)}var m0;function of(e){if(m0===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);m0=t&&t[1]||""}return`
`+m0+e}var y0=!1;function km(e,t){if(!e||y0)return"";y0=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(x){var a=x}Reflect.construct(e,[],t)}else{try{t.call()}catch(x){a=x}e.call(t.prototype)}else{try{throw Error()}catch(x){a=x}e()}}catch(x){if(x&&a&&typeof x.stack=="string"){for(var c=x.stack.split(`
`),d=a.stack.split(`
`),o=c.length-1,v=d.length-1;1<=o&&0<=v&&c[o]!==d[v];)v--;for(;1<=o&&0<=v;o--,v--)if(c[o]!==d[v]){if(o!==1||v!==1)do if(o--,v--,0>v||c[o]!==d[v])return`
`+c[o].replace(" at new "," at ");while(1<=o&&0<=v);break}}}finally{y0=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?of(e):""}function t3(e){switch(e.tag){case 5:return of(e.type);case 16:return of("Lazy");case 13:return of("Suspense");case 19:return of("SuspenseList");case 0:case 2:case 15:return e=km(e.type,!1),e;case 11:return e=km(e.type.render,!1),e;case 22:return e=km(e.type._render,!1),e;case 1:return e=km(e.type,!0),e;default:return""}}function op(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ml:return"Fragment";case Eu:return"Portal";case df:return"Profiler";case qx:return"StrictMode";case mf:return"Suspense";case xy:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Gx:return(e.displayName||"Context")+".Consumer";case Wx:return(e._context.displayName||"Context")+".Provider";case pg:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case hg:return op(e.type);case Zx:return op(e._render);case Hx:t=e._payload,e=e._init;try{return op(e(t))}catch{}}return null}function Tl(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function JS(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function r3(e){var t=JS(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var c=n.get,d=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(o){a=""+o,d.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return a},setValue:function(o){a=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Tm(e){e._valueTracker||(e._valueTracker=r3(e))}function YS(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),a="";return e&&(a=JS(e)?e.checked?"true":"false":e.value),e=a,e!==n?(t.setValue(e),!0):!1}function by(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function T_(e,t){var n=t.checked;return zn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function n2(e,t){var n=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;n=Tl(t.value!=null?t.value:n),e._wrapperState={initialChecked:a,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function eC(e,t){t=t.checked,t!=null&&$x(e,"checked",t,!1)}function I_(e,t){eC(e,t);var n=Tl(t.value),a=t.type;if(n!=null)a==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?P_(e,t.type,n):t.hasOwnProperty("defaultValue")&&P_(e,t.type,Tl(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function i2(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function P_(e,t,n){(t!=="number"||by(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function n3(e){var t="";return cg.Children.forEach(e,function(n){n!=null&&(t+=n)}),t}function M_(e,t){return e=zn({children:void 0},t),(t=n3(t.children))&&(e.children=t),e}function ap(e,t,n,a){if(e=e.options,t){t={};for(var c=0;c<n.length;c++)t["$"+n[c]]=!0;for(n=0;n<e.length;n++)c=t.hasOwnProperty("$"+e[n].value),e[n].selected!==c&&(e[n].selected=c),c&&a&&(e[n].defaultSelected=!0)}else{for(n=""+Tl(n),t=null,c=0;c<e.length;c++){if(e[c].value===n){e[c].selected=!0,a&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function R_(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(mt(91));return zn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function o2(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(mt(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(mt(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Tl(n)}}function tC(e,t){var n=Tl(t.value),a=Tl(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),a!=null&&(e.defaultValue=""+a)}function a2(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}var z_={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function rC(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function L_(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?rC(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Im,nC=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,a,c){MSApp.execUnsafeLocalFunction(function(){return e(t,n,a,c)})}:e}(function(e,t){if(e.namespaceURI!==z_.svg||"innerHTML"in e)e.innerHTML=t;else{for(Im=Im||document.createElement("div"),Im.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Im.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Pf(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var yf={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},i3=["Webkit","ms","Moz","O"];Object.keys(yf).forEach(function(e){i3.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),yf[t]=yf[e]})});function iC(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||yf.hasOwnProperty(e)&&yf[e]?(""+t).trim():t+"px"}function oC(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var a=n.indexOf("--")===0,c=iC(n,t[n],a);n==="float"&&(n="cssFloat"),a?e.setProperty(n,c):e[n]=c}}var o3=zn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function O_(e,t){if(t){if(o3[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(mt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(mt(60));if(!(typeof t.dangerouslySetInnerHTML=="object"&&"__html"in t.dangerouslySetInnerHTML))throw Error(mt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(mt(62))}}function D_(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Qx(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var B_=null,sp=null,lp=null;function s2(e){if(e=ed(e)){if(typeof B_!="function")throw Error(mt(280));var t=e.stateNode;t&&(t=vg(t),B_(e.stateNode,e.type,t))}}function aC(e){sp?lp?lp.push(e):lp=[e]:sp=e}function sC(){if(sp){var e=sp,t=lp;if(lp=sp=null,s2(e),t)for(e=0;e<t.length;e++)s2(t[e])}}function Jx(e,t){return e(t)}function lC(e,t,n,a,c){return e(t,n,a,c)}function Yx(){}var uC=Jx,Su=!1,g0=!1;function e1(){(sp!==null||lp!==null)&&(Yx(),sC())}function a3(e,t,n){if(g0)return e(t,n);g0=!0;try{return uC(e,t,n)}finally{g0=!1,e1()}}function Mf(e,t){var n=e.stateNode;if(n===null)return null;var a=vg(n);if(a===null)return null;n=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(mt(231,t,typeof n));return n}var N_=!1;if(Vs)try{var Nh={};Object.defineProperty(Nh,"passive",{get:function(){N_=!0}}),window.addEventListener("test",Nh,Nh),window.removeEventListener("test",Nh,Nh)}catch{N_=!1}function s3(e,t,n,a,c,d,o,v,x){var E=Array.prototype.slice.call(arguments,3);try{t.apply(n,E)}catch(k){this.onError(k)}}var gf=!1,wy=null,Ay=!1,F_=null,l3={onError:function(e){gf=!0,wy=e}};function u3(e,t,n,a,c,d,o,v,x){gf=!1,wy=null,s3.apply(l3,arguments)}function c3(e,t,n,a,c,d,o,v,x){if(u3.apply(this,arguments),gf){if(gf){var E=wy;gf=!1,wy=null}else throw Error(mt(198));Ay||(Ay=!0,F_=E)}}function Vu(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&1026&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function cC(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function l2(e){if(Vu(e)!==e)throw Error(mt(188))}function p3(e){var t=e.alternate;if(!t){if(t=Vu(e),t===null)throw Error(mt(188));return t!==e?null:e}for(var n=e,a=t;;){var c=n.return;if(c===null)break;var d=c.alternate;if(d===null){if(a=c.return,a!==null){n=a;continue}break}if(c.child===d.child){for(d=c.child;d;){if(d===n)return l2(c),e;if(d===a)return l2(c),t;d=d.sibling}throw Error(mt(188))}if(n.return!==a.return)n=c,a=d;else{for(var o=!1,v=c.child;v;){if(v===n){o=!0,n=c,a=d;break}if(v===a){o=!0,a=c,n=d;break}v=v.sibling}if(!o){for(v=d.child;v;){if(v===n){o=!0,n=d,a=c;break}if(v===a){o=!0,a=d,n=c;break}v=v.sibling}if(!o)throw Error(mt(189))}}if(n.alternate!==a)throw Error(mt(190))}if(n.tag!==3)throw Error(mt(188));return n.stateNode.current===n?e:t}function pC(e){if(e=p3(e),!e)return null;for(var t=e;;){if(t.tag===5||t.tag===6)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function u2(e,t){for(var n=e.alternate;t!==null;){if(t===e||t===n)return!0;t=t.return}return!1}var hC,t1,fC,dC,U_=!1,Xa=[],_l=null,xl=null,bl=null,Rf=new Map,zf=new Map,Fh=[],c2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function j_(e,t,n,a,c){return{blockedOn:e,domEventName:t,eventSystemFlags:n|16,nativeEvent:c,targetContainers:[a]}}function p2(e,t){switch(e){case"focusin":case"focusout":_l=null;break;case"dragenter":case"dragleave":xl=null;break;case"mouseover":case"mouseout":bl=null;break;case"pointerover":case"pointerout":Rf.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":zf.delete(t.pointerId)}}function Uh(e,t,n,a,c,d){return e===null||e.nativeEvent!==d?(e=j_(t,n,a,c,d),t!==null&&(t=ed(t),t!==null&&t1(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function h3(e,t,n,a,c){switch(t){case"focusin":return _l=Uh(_l,e,t,n,a,c),!0;case"dragenter":return xl=Uh(xl,e,t,n,a,c),!0;case"mouseover":return bl=Uh(bl,e,t,n,a,c),!0;case"pointerover":var d=c.pointerId;return Rf.set(d,Uh(Rf.get(d)||null,e,t,n,a,c)),!0;case"gotpointercapture":return d=c.pointerId,zf.set(d,Uh(zf.get(d)||null,e,t,n,a,c)),!0}return!1}function f3(e){var t=Cu(e.target);if(t!==null){var n=Vu(t);if(n!==null){if(t=n.tag,t===13){if(t=cC(n),t!==null){e.blockedOn=t,dC(e.lanePriority,function(){Ci.unstable_runWithPriority(e.priority,function(){fC(n)})});return}}else if(t===3&&n.stateNode.hydrate){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Jm(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=o1(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n!==null)return t=ed(n),t!==null&&t1(t),e.blockedOn=n,!1;t.shift()}return!0}function h2(e,t,n){Jm(e)&&n.delete(t)}function m3(){for(U_=!1;0<Xa.length;){var e=Xa[0];if(e.blockedOn!==null){e=ed(e.blockedOn),e!==null&&hC(e);break}for(var t=e.targetContainers;0<t.length;){var n=o1(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n!==null){e.blockedOn=n;break}t.shift()}e.blockedOn===null&&Xa.shift()}_l!==null&&Jm(_l)&&(_l=null),xl!==null&&Jm(xl)&&(xl=null),bl!==null&&Jm(bl)&&(bl=null),Rf.forEach(h2),zf.forEach(h2)}function jh(e,t){e.blockedOn===t&&(e.blockedOn=null,U_||(U_=!0,Ci.unstable_scheduleCallback(Ci.unstable_NormalPriority,m3)))}function mC(e){function t(c){return jh(c,e)}if(0<Xa.length){jh(Xa[0],e);for(var n=1;n<Xa.length;n++){var a=Xa[n];a.blockedOn===e&&(a.blockedOn=null)}}for(_l!==null&&jh(_l,e),xl!==null&&jh(xl,e),bl!==null&&jh(bl,e),Rf.forEach(t),zf.forEach(t),n=0;n<Fh.length;n++)a=Fh[n],a.blockedOn===e&&(a.blockedOn=null);for(;0<Fh.length&&(n=Fh[0],n.blockedOn===null);)f3(n),n.blockedOn===null&&Fh.shift()}function Pm(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Jc={animationend:Pm("Animation","AnimationEnd"),animationiteration:Pm("Animation","AnimationIteration"),animationstart:Pm("Animation","AnimationStart"),transitionend:Pm("Transition","TransitionEnd")},v0={},yC={};Vs&&(yC=document.createElement("div").style,"AnimationEvent"in window||(delete Jc.animationend.animation,delete Jc.animationiteration.animation,delete Jc.animationstart.animation),"TransitionEvent"in window||delete Jc.transitionend.transition);function fg(e){if(v0[e])return v0[e];if(!Jc[e])return e;var t=Jc[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in yC)return v0[e]=t[n];return e}var gC=fg("animationend"),vC=fg("animationiteration"),_C=fg("animationstart"),xC=fg("transitionend"),bC=new Map,r1=new Map,y3=["abort","abort",gC,"animationEnd",vC,"animationIteration",_C,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",xC,"transitionEnd","waiting","waiting"];function n1(e,t){for(var n=0;n<e.length;n+=2){var a=e[n],c=e[n+1];c="on"+(c[0].toUpperCase()+c.slice(1)),r1.set(a,t),bC.set(a,c),Uu(c,[a])}}var g3=Ci.unstable_now;g3();var vn=8;function Zc(e){if(1&e)return vn=15,1;if(2&e)return vn=14,2;if(4&e)return vn=13,4;var t=24&e;return t!==0?(vn=12,t):e&32?(vn=11,32):(t=192&e,t!==0?(vn=10,t):e&256?(vn=9,256):(t=3584&e,t!==0?(vn=8,t):e&4096?(vn=7,4096):(t=4186112&e,t!==0?(vn=6,t):(t=62914560&e,t!==0?(vn=5,t):e&67108864?(vn=4,67108864):e&134217728?(vn=3,134217728):(t=805306368&e,t!==0?(vn=2,t):1073741824&e?(vn=1,1073741824):(vn=8,e))))))}function v3(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function _3(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(mt(358,e))}}function Lf(e,t){var n=e.pendingLanes;if(n===0)return vn=0;var a=0,c=0,d=e.expiredLanes,o=e.suspendedLanes,v=e.pingedLanes;if(d!==0)a=d,c=vn=15;else if(d=n&134217727,d!==0){var x=d&~o;x!==0?(a=Zc(x),c=vn):(v&=d,v!==0&&(a=Zc(v),c=vn))}else d=n&~o,d!==0?(a=Zc(d),c=vn):v!==0&&(a=Zc(v),c=vn);if(a===0)return 0;if(a=31-Il(a),a=n&((0>a?0:1<<a)<<1)-1,t!==0&&t!==a&&!(t&o)){if(Zc(t),c<=vn)return t;vn=c}if(t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)n=31-Il(t),c=1<<n,a|=e[n],t&=~c;return a}function wC(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Ey(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return e=Kc(24&~t),e===0?Ey(10,t):e;case 10:return e=Kc(192&~t),e===0?Ey(8,t):e;case 8:return e=Kc(3584&~t),e===0&&(e=Kc(4186112&~t),e===0&&(e=512)),e;case 2:return t=Kc(805306368&~t),t===0&&(t=268435456),t}throw Error(mt(358,e))}function Kc(e){return e&-e}function _0(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function dg(e,t,n){e.pendingLanes|=t;var a=t-1;e.suspendedLanes&=a,e.pingedLanes&=a,e=e.eventTimes,t=31-Il(t),e[t]=n}var Il=Math.clz32?Math.clz32:w3,x3=Math.log,b3=Math.LN2;function w3(e){return e===0?32:31-(x3(e)/b3|0)|0}var A3=Ci.unstable_UserBlockingPriority,E3=Ci.unstable_runWithPriority,Ym=!0;function S3(e,t,n,a){Su||Yx();var c=i1,d=Su;Su=!0;try{lC(c,e,t,n,a)}finally{(Su=d)||e1()}}function C3(e,t,n,a){E3(A3,i1.bind(null,e,t,n,a))}function i1(e,t,n,a){if(Ym){var c;if((c=(t&4)===0)&&0<Xa.length&&-1<c2.indexOf(e))e=j_(null,e,t,n,a),Xa.push(e);else{var d=o1(e,t,n,a);if(d===null)c&&p2(e,a);else{if(c){if(-1<c2.indexOf(e)){e=j_(d,e,t,n,a),Xa.push(e);return}if(h3(d,e,t,n,a))return;p2(e,a)}OC(e,t,a,null,n)}}}}function o1(e,t,n,a){var c=Qx(a);if(c=Cu(c),c!==null){var d=Vu(c);if(d===null)c=null;else{var o=d.tag;if(o===13){if(c=cC(d),c!==null)return c;c=null}else if(o===3){if(d.stateNode.hydrate)return d.tag===3?d.stateNode.containerInfo:null;c=null}else d!==c&&(c=null)}}return OC(e,t,a,c,n),null}var yl=null,a1=null,ey=null;function AC(){if(ey)return ey;var e,t=a1,n=t.length,a,c="value"in yl?yl.value:yl.textContent,d=c.length;for(e=0;e<n&&t[e]===c[e];e++);var o=n-e;for(a=1;a<=o&&t[n-a]===c[d-a];a++);return ey=c.slice(e,1<a?1-a:void 0)}function ty(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Mm(){return!0}function f2(){return!1}function qo(e){function t(n,a,c,d,o){this._reactName=n,this._targetInst=c,this.type=a,this.nativeEvent=d,this.target=o,this.currentTarget=null;for(var v in e)e.hasOwnProperty(v)&&(n=e[v],this[v]=n?n(d):d[v]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Mm:f2,this.isPropagationStopped=f2,this}return zn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Mm)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Mm)},persist:function(){},isPersistent:Mm}),t}var Lp={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},s1=qo(Lp),Yf=zn({},Lp,{view:0,detail:0}),k3=qo(Yf),x0,b0,Vh,mg=zn({},Yf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:l1,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Vh&&(Vh&&e.type==="mousemove"?(x0=e.screenX-Vh.screenX,b0=e.screenY-Vh.screenY):b0=x0=0,Vh=e),x0)},movementY:function(e){return"movementY"in e?e.movementY:b0}}),d2=qo(mg),T3=zn({},mg,{dataTransfer:0}),I3=qo(T3),P3=zn({},Yf,{relatedTarget:0}),w0=qo(P3),M3=zn({},Lp,{animationName:0,elapsedTime:0,pseudoElement:0}),R3=qo(M3),z3=zn({},Lp,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),L3=qo(z3),O3=zn({},Lp,{data:0}),m2=qo(O3),D3={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},B3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},N3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function F3(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=N3[e])?!!t[e]:!1}function l1(){return F3}var U3=zn({},Yf,{key:function(e){if(e.key){var t=D3[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ty(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?B3[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:l1,charCode:function(e){return e.type==="keypress"?ty(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ty(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),j3=qo(U3),V3=zn({},mg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),y2=qo(V3),$3=zn({},Yf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:l1}),q3=qo($3),W3=zn({},Lp,{propertyName:0,elapsedTime:0,pseudoElement:0}),G3=qo(W3),H3=zn({},mg,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Z3=qo(H3),K3=[9,13,27,32],u1=Vs&&"CompositionEvent"in window,vf=null;Vs&&"documentMode"in document&&(vf=document.documentMode);var X3=Vs&&"TextEvent"in window&&!vf,EC=Vs&&(!u1||vf&&8<vf&&11>=vf),g2=String.fromCharCode(32),v2=!1;function SC(e,t){switch(e){case"keyup":return K3.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function CC(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Yc=!1;function Q3(e,t){switch(e){case"compositionend":return CC(t);case"keypress":return t.which!==32?null:(v2=!0,g2);case"textInput":return e=t.data,e===g2&&v2?null:e;default:return null}}function J3(e,t){if(Yc)return e==="compositionend"||!u1&&SC(e,t)?(e=AC(),ey=a1=yl=null,Yc=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return EC&&t.locale!=="ko"?null:t.data;default:return null}}var Y3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _2(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Y3[e.type]:t==="textarea"}function kC(e,t,n,a){aC(a),t=Sy(t,"onChange"),0<t.length&&(n=new s1("onChange","change",null,n,a),e.push({event:n,listeners:t}))}var _f=null,Of=null;function eR(e){RC(e,0)}function yg(e){var t=tp(e);if(YS(t))return e}function tR(e,t){if(e==="change")return t}var TC=!1;if(Vs){var A0;if(Vs){var E0="oninput"in document;if(!E0){var x2=document.createElement("div");x2.setAttribute("oninput","return;"),E0=typeof x2.oninput=="function"}A0=E0}else A0=!1;TC=A0&&(!document.documentMode||9<document.documentMode)}function b2(){_f&&(_f.detachEvent("onpropertychange",IC),Of=_f=null)}function IC(e){if(e.propertyName==="value"&&yg(Of)){var t=[];if(kC(t,Of,e,Qx(e)),e=eR,Su)e(t);else{Su=!0;try{Jx(e,t)}finally{Su=!1,e1()}}}}function rR(e,t,n){e==="focusin"?(b2(),_f=t,Of=n,_f.attachEvent("onpropertychange",IC)):e==="focusout"&&b2()}function nR(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return yg(Of)}function iR(e,t){if(e==="click")return yg(t)}function oR(e,t){if(e==="input"||e==="change")return yg(t)}function aR(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ta=typeof Object.is=="function"?Object.is:aR,sR=Object.prototype.hasOwnProperty;function Df(e,t){if(ta(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++)if(!sR.call(t,n[a])||!ta(e[n[a]],t[n[a]]))return!1;return!0}function w2(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function A2(e,t){var n=w2(e);e=0;for(var a;n;){if(n.nodeType===3){if(a=e+n.textContent.length,e<=t&&a>=t)return{node:n,offset:t-e};e=a}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=w2(n)}}function PC(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?PC(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function E2(){for(var e=window,t=by();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=by(e.document)}return t}function V_(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var lR=Vs&&"documentMode"in document&&11>=document.documentMode,ep=null,$_=null,xf=null,q_=!1;function S2(e,t,n){var a=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;q_||ep==null||ep!==by(a)||(a=ep,"selectionStart"in a&&V_(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),xf&&Df(xf,a)||(xf=a,a=Sy($_,"onSelect"),0<a.length&&(t=new s1("onSelect","select",null,t,n),e.push({event:t,listeners:a}),t.target=ep)))}n1("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);n1("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);n1(y3,2);for(var C2="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),S0=0;S0<C2.length;S0++)r1.set(C2[S0],0);xp("onMouseEnter",["mouseout","mouseover"]);xp("onMouseLeave",["mouseout","mouseover"]);xp("onPointerEnter",["pointerout","pointerover"]);xp("onPointerLeave",["pointerout","pointerover"]);Uu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Uu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Uu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Uu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Uu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Uu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var af="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),MC=new Set("cancel close invalid load scroll toggle".split(" ").concat(af));function k2(e,t,n){var a=e.type||"unknown-event";e.currentTarget=n,c3(a,t,void 0,e),e.currentTarget=null}function RC(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var a=e[n],c=a.event;a=a.listeners;e:{var d=void 0;if(t)for(var o=a.length-1;0<=o;o--){var v=a[o],x=v.instance,E=v.currentTarget;if(v=v.listener,x!==d&&c.isPropagationStopped())break e;k2(c,v,E),d=x}else for(o=0;o<a.length;o++){if(v=a[o],x=v.instance,E=v.currentTarget,v=v.listener,x!==d&&c.isPropagationStopped())break e;k2(c,v,E),d=x}}}if(Ay)throw e=F_,Ay=!1,F_=null,e}function kn(e,t){var n=BC(t),a=e+"__bubble";n.has(a)||(LC(t,e,2,!1),n.add(a))}var T2="_reactListening"+Math.random().toString(36).slice(2);function zC(e){e[T2]||(e[T2]=!0,XS.forEach(function(t){MC.has(t)||I2(t,!1,e,null),I2(t,!0,e,null)}))}function I2(e,t,n,a){var c=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,d=n;if(e==="selectionchange"&&n.nodeType!==9&&(d=n.ownerDocument),a!==null&&!t&&MC.has(e)){if(e!=="scroll")return;c|=2,d=a}var o=BC(d),v=e+"__"+(t?"capture":"bubble");o.has(v)||(t&&(c|=4),LC(d,e,c,t),o.add(v))}function LC(e,t,n,a){var c=r1.get(t);switch(c===void 0?2:c){case 0:c=S3;break;case 1:c=C3;break;default:c=i1}n=c.bind(null,t,n,e),c=void 0,!N_||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),a?c!==void 0?e.addEventListener(t,n,{capture:!0,passive:c}):e.addEventListener(t,n,!0):c!==void 0?e.addEventListener(t,n,{passive:c}):e.addEventListener(t,n,!1)}function OC(e,t,n,a,c){var d=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var o=a.tag;if(o===3||o===4){var v=a.stateNode.containerInfo;if(v===c||v.nodeType===8&&v.parentNode===c)break;if(o===4)for(o=a.return;o!==null;){var x=o.tag;if((x===3||x===4)&&(x=o.stateNode.containerInfo,x===c||x.nodeType===8&&x.parentNode===c))return;o=o.return}for(;v!==null;){if(o=Cu(v),o===null)return;if(x=o.tag,x===5||x===6){a=d=o;continue e}v=v.parentNode}}a=a.return}a3(function(){var E=d,k=Qx(n),P=[];e:{var T=bC.get(e);if(T!==void 0){var W=s1,$=e;switch(e){case"keypress":if(ty(n)===0)break e;case"keydown":case"keyup":W=j3;break;case"focusin":$="focus",W=w0;break;case"focusout":$="blur",W=w0;break;case"beforeblur":case"afterblur":W=w0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=d2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=I3;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=q3;break;case gC:case vC:case _C:W=R3;break;case xC:W=G3;break;case"scroll":W=k3;break;case"wheel":W=Z3;break;case"copy":case"cut":case"paste":W=L3;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=y2}var H=(t&4)!==0,D=!H&&e==="scroll",U=H?T!==null?T+"Capture":null:T;H=[];for(var q=E,N;q!==null;){N=q;var O=N.stateNode;if(N.tag===5&&O!==null&&(N=O,U!==null&&(O=Mf(q,U),O!=null&&H.push(Bf(q,O,N)))),D)break;q=q.return}0<H.length&&(T=new W(T,$,null,n,k),P.push({event:T,listeners:H}))}}if(!(t&7)){e:{if(T=e==="mouseover"||e==="pointerover",W=e==="mouseout"||e==="pointerout",T&&!(t&16)&&($=n.relatedTarget||n.fromElement)&&(Cu($)||$[Op]))break e;if((W||T)&&(T=k.window===k?k:(T=k.ownerDocument)?T.defaultView||T.parentWindow:window,W?($=n.relatedTarget||n.toElement,W=E,$=$?Cu($):null,$!==null&&(D=Vu($),$!==D||$.tag!==5&&$.tag!==6)&&($=null)):(W=null,$=E),W!==$)){if(H=d2,O="onMouseLeave",U="onMouseEnter",q="mouse",(e==="pointerout"||e==="pointerover")&&(H=y2,O="onPointerLeave",U="onPointerEnter",q="pointer"),D=W==null?T:tp(W),N=$==null?T:tp($),T=new H(O,q+"leave",W,n,k),T.target=D,T.relatedTarget=N,O=null,Cu(k)===E&&(H=new H(U,q+"enter",$,n,k),H.target=N,H.relatedTarget=D,O=H),D=O,W&&$)t:{for(H=W,U=$,q=0,N=H;N;N=Nc(N))q++;for(N=0,O=U;O;O=Nc(O))N++;for(;0<q-N;)H=Nc(H),q--;for(;0<N-q;)U=Nc(U),N--;for(;q--;){if(H===U||U!==null&&H===U.alternate)break t;H=Nc(H),U=Nc(U)}H=null}else H=null;W!==null&&P2(P,T,W,H,!1),$!==null&&D!==null&&P2(P,D,$,H,!0)}}e:{if(T=E?tp(E):window,W=T.nodeName&&T.nodeName.toLowerCase(),W==="select"||W==="input"&&T.type==="file")var te=tR;else if(_2(T))if(TC)te=oR;else{te=nR;var ne=rR}else(W=T.nodeName)&&W.toLowerCase()==="input"&&(T.type==="checkbox"||T.type==="radio")&&(te=iR);if(te&&(te=te(e,E))){kC(P,te,n,k);break e}ne&&ne(e,T,E),e==="focusout"&&(ne=T._wrapperState)&&ne.controlled&&T.type==="number"&&P_(T,"number",T.value)}switch(ne=E?tp(E):window,e){case"focusin":(_2(ne)||ne.contentEditable==="true")&&(ep=ne,$_=E,xf=null);break;case"focusout":xf=$_=ep=null;break;case"mousedown":q_=!0;break;case"contextmenu":case"mouseup":case"dragend":q_=!1,S2(P,n,k);break;case"selectionchange":if(lR)break;case"keydown":case"keyup":S2(P,n,k)}var fe;if(u1)e:{switch(e){case"compositionstart":var xe="onCompositionStart";break e;case"compositionend":xe="onCompositionEnd";break e;case"compositionupdate":xe="onCompositionUpdate";break e}xe=void 0}else Yc?SC(e,n)&&(xe="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(xe="onCompositionStart");xe&&(EC&&n.locale!=="ko"&&(Yc||xe!=="onCompositionStart"?xe==="onCompositionEnd"&&Yc&&(fe=AC()):(yl=k,a1="value"in yl?yl.value:yl.textContent,Yc=!0)),ne=Sy(E,xe),0<ne.length&&(xe=new m2(xe,e,null,n,k),P.push({event:xe,listeners:ne}),fe?xe.data=fe:(fe=CC(n),fe!==null&&(xe.data=fe)))),(fe=X3?Q3(e,n):J3(e,n))&&(E=Sy(E,"onBeforeInput"),0<E.length&&(k=new m2("onBeforeInput","beforeinput",null,n,k),P.push({event:k,listeners:E}),k.data=fe))}RC(P,t)})}function Bf(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Sy(e,t){for(var n=t+"Capture",a=[];e!==null;){var c=e,d=c.stateNode;c.tag===5&&d!==null&&(c=d,d=Mf(e,n),d!=null&&a.unshift(Bf(e,d,c)),d=Mf(e,t),d!=null&&a.push(Bf(e,d,c))),e=e.return}return a}function Nc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function P2(e,t,n,a,c){for(var d=t._reactName,o=[];n!==null&&n!==a;){var v=n,x=v.alternate,E=v.stateNode;if(x!==null&&x===a)break;v.tag===5&&E!==null&&(v=E,c?(x=Mf(n,d),x!=null&&o.unshift(Bf(n,x,v))):c||(x=Mf(n,d),x!=null&&o.push(Bf(n,x,v)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}function Cy(){}var C0=null,k0=null;function DC(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function W_(e,t){return e==="textarea"||e==="option"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var M2=typeof setTimeout=="function"?setTimeout:void 0,uR=typeof clearTimeout=="function"?clearTimeout:void 0;function c1(e){e.nodeType===1?e.textContent="":e.nodeType===9&&(e=e.body,e!=null&&(e.textContent=""))}function up(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break}return e}function R2(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var T0=0;function cR(e){return{$$typeof:Kx,toString:e,valueOf:e}}var gg=Math.random().toString(36).slice(2),gl="__reactFiber$"+gg,ky="__reactProps$"+gg,Op="__reactContainer$"+gg,z2="__reactEvents$"+gg;function Cu(e){var t=e[gl];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Op]||n[gl]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=R2(e);e!==null;){if(n=e[gl])return n;e=R2(e)}return t}e=n,n=e.parentNode}return null}function ed(e){return e=e[gl]||e[Op],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function tp(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(mt(33))}function vg(e){return e[ky]||null}function BC(e){var t=e[z2];return t===void 0&&(t=e[z2]=new Set),t}var G_=[],rp=-1;function Dl(e){return{current:e}}function Tn(e){0>rp||(e.current=G_[rp],G_[rp]=null,rp--)}function Kn(e,t){rp++,G_[rp]=e.current,e.current=t}var Pl={},Yi=Dl(Pl),Eo=Dl(!1),Lu=Pl;function bp(e,t){var n=e.type.contextTypes;if(!n)return Pl;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var c={},d;for(d in n)c[d]=t[d];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function So(e){return e=e.childContextTypes,e!=null}function Ty(){Tn(Eo),Tn(Yi)}function L2(e,t,n){if(Yi.current!==Pl)throw Error(mt(168));Kn(Yi,t),Kn(Eo,n)}function NC(e,t,n){var a=e.stateNode;if(e=t.childContextTypes,typeof a.getChildContext!="function")return n;a=a.getChildContext();for(var c in a)if(!(c in e))throw Error(mt(108,op(t)||"Unknown",c));return zn({},n,a)}function ry(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Pl,Lu=Yi.current,Kn(Yi,e),Kn(Eo,Eo.current),!0}function O2(e,t,n){var a=e.stateNode;if(!a)throw Error(mt(169));n?(e=NC(e,t,Lu),a.__reactInternalMemoizedMergedChildContext=e,Tn(Eo),Tn(Yi),Kn(Yi,e)):Tn(Eo),Kn(Eo,n)}var p1=null,Mu=null,pR=Ci.unstable_runWithPriority,h1=Ci.unstable_scheduleCallback,H_=Ci.unstable_cancelCallback,hR=Ci.unstable_shouldYield,D2=Ci.unstable_requestPaint,Z_=Ci.unstable_now,fR=Ci.unstable_getCurrentPriorityLevel,_g=Ci.unstable_ImmediatePriority,FC=Ci.unstable_UserBlockingPriority,UC=Ci.unstable_NormalPriority,jC=Ci.unstable_LowPriority,VC=Ci.unstable_IdlePriority,I0={},dR=D2!==void 0?D2:function(){},Os=null,ny=null,P0=!1,B2=Z_(),Xi=1e4>B2?Z_:function(){return Z_()-B2};function wp(){switch(fR()){case _g:return 99;case FC:return 98;case UC:return 97;case jC:return 96;case VC:return 95;default:throw Error(mt(332))}}function $C(e){switch(e){case 99:return _g;case 98:return FC;case 97:return UC;case 96:return jC;case 95:return VC;default:throw Error(mt(332))}}function Ou(e,t){return e=$C(e),pR(e,t)}function Nf(e,t,n){return e=$C(e),h1(e,t,n)}function os(){if(ny!==null){var e=ny;ny=null,H_(e)}qC()}function qC(){if(!P0&&Os!==null){P0=!0;var e=0;try{var t=Os;Ou(99,function(){for(;e<t.length;e++){var n=t[e];do n=n(!0);while(n!==null)}}),Os=null}catch(n){throw Os!==null&&(Os=Os.slice(e+1)),h1(_g,os),n}finally{P0=!1}}}var mR=ju.ReactCurrentBatchConfig;function va(e,t){if(e&&e.defaultProps){t=zn({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var Iy=Dl(null),Py=null,np=null,My=null;function f1(){My=np=Py=null}function d1(e){var t=Iy.current;Tn(Iy),e.type._context._currentValue=t}function WC(e,t){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)===t){if(n===null||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,n!==null&&(n.childLanes|=t);e=e.return}}function cp(e,t){Py=e,My=np=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(wa=!0),e.firstContext=null)}function ia(e,t){if(My!==e&&t!==!1&&t!==0)if((typeof t!="number"||t===1073741823)&&(My=e,t=1073741823),t={context:e,observedBits:t,next:null},np===null){if(Py===null)throw Error(mt(308));np=t,Py.dependencies={lanes:0,firstContext:t,responders:null}}else np=np.next=t;return e._currentValue}var dl=!1;function m1(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function GC(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function wl(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Al(e,t){if(e=e.updateQueue,e!==null){e=e.shared;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function N2(e,t){var n=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,n===a)){var c=null,d=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};d===null?c=d=o:d=d.next=o,n=n.next}while(n!==null);d===null?c=d=t:d=d.next=t}else c=d=t;n={baseState:a.baseState,firstBaseUpdate:c,lastBaseUpdate:d,shared:a.shared,effects:a.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ff(e,t,n,a){var c=e.updateQueue;dl=!1;var d=c.firstBaseUpdate,o=c.lastBaseUpdate,v=c.shared.pending;if(v!==null){c.shared.pending=null;var x=v,E=x.next;x.next=null,o===null?d=E:o.next=E,o=x;var k=e.alternate;if(k!==null){k=k.updateQueue;var P=k.lastBaseUpdate;P!==o&&(P===null?k.firstBaseUpdate=E:P.next=E,k.lastBaseUpdate=x)}}if(d!==null){P=c.baseState,o=0,k=E=x=null;do{v=d.lane;var T=d.eventTime;if((a&v)===v){k!==null&&(k=k.next={eventTime:T,lane:0,tag:d.tag,payload:d.payload,callback:d.callback,next:null});e:{var W=e,$=d;switch(v=t,T=n,$.tag){case 1:if(W=$.payload,typeof W=="function"){P=W.call(T,P,v);break e}P=W;break e;case 3:W.flags=W.flags&-4097|64;case 0:if(W=$.payload,v=typeof W=="function"?W.call(T,P,v):W,v==null)break e;P=zn({},P,v);break e;case 2:dl=!0}}d.callback!==null&&(e.flags|=32,v=c.effects,v===null?c.effects=[d]:v.push(d))}else T={eventTime:T,lane:v,tag:d.tag,payload:d.payload,callback:d.callback,next:null},k===null?(E=k=T,x=P):k=k.next=T,o|=v;if(d=d.next,d===null){if(v=c.shared.pending,v===null)break;d=v.next,v.next=null,c.lastBaseUpdate=v,c.shared.pending=null}}while(1);k===null&&(x=P),c.baseState=x,c.firstBaseUpdate=E,c.lastBaseUpdate=k,rd|=o,e.lanes=o,e.memoizedState=P}}function F2(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],c=a.callback;if(c!==null){if(a.callback=null,a=n,typeof c!="function")throw Error(mt(191,c));c.call(a)}}}var HC=new cg.Component().refs;function Ry(e,t,n,a){t=e.memoizedState,n=n(a,t),n=n==null?t:zn({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var xg={isMounted:function(e){return(e=e._reactInternals)?Vu(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var a=jo(),c=El(e),d=wl(a,c);d.payload=t,n!=null&&(d.callback=n),Al(e,d),Sl(e,c,a)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var a=jo(),c=El(e),d=wl(a,c);d.tag=1,d.payload=t,n!=null&&(d.callback=n),Al(e,d),Sl(e,c,a)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=jo(),a=El(e),c=wl(n,a);c.tag=2,t!=null&&(c.callback=t),Al(e,c),Sl(e,a,n)}};function U2(e,t,n,a,c,d,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,d,o):t.prototype&&t.prototype.isPureReactComponent?!Df(n,a)||!Df(c,d):!0}function ZC(e,t,n){var a=!1,c=Pl,d=t.contextType;return typeof d=="object"&&d!==null?d=ia(d):(c=So(t)?Lu:Yi.current,a=t.contextTypes,d=(a=a!=null)?bp(e,c):Pl),t=new t(n,d),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=xg,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=d),t}function j2(e,t,n,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,a),t.state!==e&&xg.enqueueReplaceState(t,t.state,null)}function K_(e,t,n,a){var c=e.stateNode;c.props=n,c.state=e.memoizedState,c.refs=HC,m1(e);var d=t.contextType;typeof d=="object"&&d!==null?c.context=ia(d):(d=So(t)?Lu:Yi.current,c.context=bp(e,d)),Ff(e,n,c,a),c.state=e.memoizedState,d=t.getDerivedStateFromProps,typeof d=="function"&&(Ry(e,t,d,n),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&xg.enqueueReplaceState(c,c.state,null),Ff(e,n,c,a),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4)}var Rm=Array.isArray;function $h(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(mt(309));var a=n.stateNode}if(!a)throw Error(mt(147,e));var c=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===c?t.ref:(t=function(d){var o=a.refs;o===HC&&(o=a.refs={}),d===null?delete o[c]:o[c]=d},t._stringRef=c,t)}if(typeof e!="string")throw Error(mt(284));if(!n._owner)throw Error(mt(290,e))}return e}function zm(e,t){if(e.type!=="textarea")throw Error(mt(31,Object.prototype.toString.call(t)==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function KC(e){function t(D,U){if(e){var q=D.lastEffect;q!==null?(q.nextEffect=U,D.lastEffect=U):D.firstEffect=D.lastEffect=U,U.nextEffect=null,U.flags=8}}function n(D,U){if(!e)return null;for(;U!==null;)t(D,U),U=U.sibling;return null}function a(D,U){for(D=new Map;U!==null;)U.key!==null?D.set(U.key,U):D.set(U.index,U),U=U.sibling;return D}function c(D,U){return D=Rl(D,U),D.index=0,D.sibling=null,D}function d(D,U,q){return D.index=q,e?(q=D.alternate,q!==null?(q=q.index,q<U?(D.flags=2,U):q):(D.flags=2,U)):U}function o(D){return e&&D.alternate===null&&(D.flags=2),D}function v(D,U,q,N){return U===null||U.tag!==6?(U=O0(q,D.mode,N),U.return=D,U):(U=c(U,q),U.return=D,U)}function x(D,U,q,N){return U!==null&&U.elementType===q.type?(N=c(U,q.props),N.ref=$h(D,U,q),N.return=D,N):(N=sy(q.type,q.key,q.props,null,D.mode,N),N.ref=$h(D,U,q),N.return=D,N)}function E(D,U,q,N){return U===null||U.tag!==4||U.stateNode.containerInfo!==q.containerInfo||U.stateNode.implementation!==q.implementation?(U=D0(q,D.mode,N),U.return=D,U):(U=c(U,q.children||[]),U.return=D,U)}function k(D,U,q,N,O){return U===null||U.tag!==7?(U=dp(q,D.mode,N,O),U.return=D,U):(U=c(U,q),U.return=D,U)}function P(D,U,q){if(typeof U=="string"||typeof U=="number")return U=O0(""+U,D.mode,q),U.return=D,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case nf:return q=sy(U.type,U.key,U.props,null,D.mode,q),q.ref=$h(D,null,U),q.return=D,q;case Eu:return U=D0(U,D.mode,q),U.return=D,U}if(Rm(U)||Bh(U))return U=dp(U,D.mode,q,null),U.return=D,U;zm(D,U)}return null}function T(D,U,q,N){var O=U!==null?U.key:null;if(typeof q=="string"||typeof q=="number")return O!==null?null:v(D,U,""+q,N);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case nf:return q.key===O?q.type===ml?k(D,U,q.props.children,N,O):x(D,U,q,N):null;case Eu:return q.key===O?E(D,U,q,N):null}if(Rm(q)||Bh(q))return O!==null?null:k(D,U,q,N,null);zm(D,q)}return null}function W(D,U,q,N,O){if(typeof N=="string"||typeof N=="number")return D=D.get(q)||null,v(U,D,""+N,O);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case nf:return D=D.get(N.key===null?q:N.key)||null,N.type===ml?k(U,D,N.props.children,O,N.key):x(U,D,N,O);case Eu:return D=D.get(N.key===null?q:N.key)||null,E(U,D,N,O)}if(Rm(N)||Bh(N))return D=D.get(q)||null,k(U,D,N,O,null);zm(U,N)}return null}function $(D,U,q,N){for(var O=null,te=null,ne=U,fe=U=0,xe=null;ne!==null&&fe<q.length;fe++){ne.index>fe?(xe=ne,ne=null):xe=ne.sibling;var Te=T(D,ne,q[fe],N);if(Te===null){ne===null&&(ne=xe);break}e&&ne&&Te.alternate===null&&t(D,ne),U=d(Te,U,fe),te===null?O=Te:te.sibling=Te,te=Te,ne=xe}if(fe===q.length)return n(D,ne),O;if(ne===null){for(;fe<q.length;fe++)ne=P(D,q[fe],N),ne!==null&&(U=d(ne,U,fe),te===null?O=ne:te.sibling=ne,te=ne);return O}for(ne=a(D,ne);fe<q.length;fe++)xe=W(ne,D,fe,q[fe],N),xe!==null&&(e&&xe.alternate!==null&&ne.delete(xe.key===null?fe:xe.key),U=d(xe,U,fe),te===null?O=xe:te.sibling=xe,te=xe);return e&&ne.forEach(function(ve){return t(D,ve)}),O}function H(D,U,q,N){var O=Bh(q);if(typeof O!="function")throw Error(mt(150));if(q=O.call(q),q==null)throw Error(mt(151));for(var te=O=null,ne=U,fe=U=0,xe=null,Te=q.next();ne!==null&&!Te.done;fe++,Te=q.next()){ne.index>fe?(xe=ne,ne=null):xe=ne.sibling;var ve=T(D,ne,Te.value,N);if(ve===null){ne===null&&(ne=xe);break}e&&ne&&ve.alternate===null&&t(D,ne),U=d(ve,U,fe),te===null?O=ve:te.sibling=ve,te=ve,ne=xe}if(Te.done)return n(D,ne),O;if(ne===null){for(;!Te.done;fe++,Te=q.next())Te=P(D,Te.value,N),Te!==null&&(U=d(Te,U,fe),te===null?O=Te:te.sibling=Te,te=Te);return O}for(ne=a(D,ne);!Te.done;fe++,Te=q.next())Te=W(ne,D,fe,Te.value,N),Te!==null&&(e&&Te.alternate!==null&&ne.delete(Te.key===null?fe:Te.key),U=d(Te,U,fe),te===null?O=Te:te.sibling=Te,te=Te);return e&&ne.forEach(function(Ee){return t(D,Ee)}),O}return function(D,U,q,N){var O=typeof q=="object"&&q!==null&&q.type===ml&&q.key===null;O&&(q=q.props.children);var te=typeof q=="object"&&q!==null;if(te)switch(q.$$typeof){case nf:e:{for(te=q.key,O=U;O!==null;){if(O.key===te){switch(O.tag){case 7:if(q.type===ml){n(D,O.sibling),U=c(O,q.props.children),U.return=D,D=U;break e}break;default:if(O.elementType===q.type){n(D,O.sibling),U=c(O,q.props),U.ref=$h(D,O,q),U.return=D,D=U;break e}}n(D,O);break}else t(D,O);O=O.sibling}q.type===ml?(U=dp(q.props.children,D.mode,N,q.key),U.return=D,D=U):(N=sy(q.type,q.key,q.props,null,D.mode,N),N.ref=$h(D,U,q),N.return=D,D=N)}return o(D);case Eu:e:{for(O=q.key;U!==null;){if(U.key===O)if(U.tag===4&&U.stateNode.containerInfo===q.containerInfo&&U.stateNode.implementation===q.implementation){n(D,U.sibling),U=c(U,q.children||[]),U.return=D,D=U;break e}else{n(D,U);break}else t(D,U);U=U.sibling}U=D0(q,D.mode,N),U.return=D,D=U}return o(D)}if(typeof q=="string"||typeof q=="number")return q=""+q,U!==null&&U.tag===6?(n(D,U.sibling),U=c(U,q),U.return=D,D=U):(n(D,U),U=O0(q,D.mode,N),U.return=D,D=U),o(D);if(Rm(q))return $(D,U,q,N);if(Bh(q))return H(D,U,q,N);if(te&&zm(D,q),typeof q>"u"&&!O)switch(D.tag){case 1:case 22:case 0:case 11:case 15:throw Error(mt(152,op(D.type)||"Component"))}return n(D,U)}}var zy=KC(!0),XC=KC(!1),td={},Ya=Dl(td),Uf=Dl(td),jf=Dl(td);function ku(e){if(e===td)throw Error(mt(174));return e}function X_(e,t){switch(Kn(jf,t),Kn(Uf,e),Kn(Ya,td),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:L_(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=L_(t,e)}Tn(Ya),Kn(Ya,t)}function Ap(){Tn(Ya),Tn(Uf),Tn(jf)}function V2(e){ku(jf.current);var t=ku(Ya.current),n=L_(t,e.type);t!==n&&(Kn(Uf,e),Kn(Ya,n))}function y1(e){Uf.current===e&&(Tn(Ya),Tn(Uf))}var Zn=Dl(0);function Ly(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&64)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ns=null,vl=null,es=!1;function QC(e,t){var n=ra(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,e.lastEffect!==null?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function $2(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,!0):!1;case 13:return!1;default:return!1}}function Q_(e){if(es){var t=vl;if(t){var n=t;if(!$2(e,t)){if(t=up(n.nextSibling),!t||!$2(e,t)){e.flags=e.flags&-1025|2,es=!1,Ns=e;return}QC(Ns,n)}Ns=e,vl=up(t.firstChild)}else e.flags=e.flags&-1025|2,es=!1,Ns=e}}function q2(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ns=e}function Lm(e){if(e!==Ns)return!1;if(!es)return q2(e),es=!0,!1;var t=e.type;if(e.tag!==5||t!=="head"&&t!=="body"&&!W_(t,e.memoizedProps))for(t=vl;t;)QC(e,t),t=up(t.nextSibling);if(q2(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(mt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){vl=up(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}vl=null}}else vl=Ns?up(e.stateNode.nextSibling):null;return!0}function M0(){vl=Ns=null,es=!1}var pp=[];function g1(){for(var e=0;e<pp.length;e++)pp[e]._workInProgressVersionPrimary=null;pp.length=0}var bf=ju.ReactCurrentDispatcher,na=ju.ReactCurrentBatchConfig,Vf=0,oi=null,Ki=null,Oi=null,Oy=!1,wf=!1;function xo(){throw Error(mt(321))}function v1(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ta(e[n],t[n]))return!1;return!0}function _1(e,t,n,a,c,d){if(Vf=d,oi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,bf.current=e===null||e.memoizedState===null?gR:vR,e=n(a,c),wf){d=0;do{if(wf=!1,!(25>d))throw Error(mt(301));d+=1,Oi=Ki=null,t.updateQueue=null,bf.current=_R,e=n(a,c)}while(wf)}if(bf.current=Fy,t=Ki!==null&&Ki.next!==null,Vf=0,Oi=Ki=oi=null,Oy=!1,t)throw Error(mt(300));return e}function Tu(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Oi===null?oi.memoizedState=Oi=e:Oi=Oi.next=e,Oi}function $u(){if(Ki===null){var e=oi.alternate;e=e!==null?e.memoizedState:null}else e=Ki.next;var t=Oi===null?oi.memoizedState:Oi.next;if(t!==null)Oi=t,Ki=e;else{if(e===null)throw Error(mt(310));Ki=e,e={memoizedState:Ki.memoizedState,baseState:Ki.baseState,baseQueue:Ki.baseQueue,queue:Ki.queue,next:null},Oi===null?oi.memoizedState=Oi=e:Oi=Oi.next=e}return Oi}function Qa(e,t){return typeof t=="function"?t(e):t}function qh(e){var t=$u(),n=t.queue;if(n===null)throw Error(mt(311));n.lastRenderedReducer=e;var a=Ki,c=a.baseQueue,d=n.pending;if(d!==null){if(c!==null){var o=c.next;c.next=d.next,d.next=o}a.baseQueue=c=d,n.pending=null}if(c!==null){c=c.next,a=a.baseState;var v=o=d=null,x=c;do{var E=x.lane;if((Vf&E)===E)v!==null&&(v=v.next={lane:0,action:x.action,eagerReducer:x.eagerReducer,eagerState:x.eagerState,next:null}),a=x.eagerReducer===e?x.eagerState:e(a,x.action);else{var k={lane:E,action:x.action,eagerReducer:x.eagerReducer,eagerState:x.eagerState,next:null};v===null?(o=v=k,d=a):v=v.next=k,oi.lanes|=E,rd|=E}x=x.next}while(x!==null&&x!==c);v===null?d=a:v.next=o,ta(a,t.memoizedState)||(wa=!0),t.memoizedState=a,t.baseState=d,t.baseQueue=v,n.lastRenderedState=a}return[t.memoizedState,n.dispatch]}function Wh(e){var t=$u(),n=t.queue;if(n===null)throw Error(mt(311));n.lastRenderedReducer=e;var a=n.dispatch,c=n.pending,d=t.memoizedState;if(c!==null){n.pending=null;var o=c=c.next;do d=e(d,o.action),o=o.next;while(o!==c);ta(d,t.memoizedState)||(wa=!0),t.memoizedState=d,t.baseQueue===null&&(t.baseState=d),n.lastRenderedState=d}return[d,a]}function W2(e,t,n){var a=t._getVersion;a=a(t._source);var c=t._workInProgressVersionPrimary;if(c!==null?e=c===a:(e=e.mutableReadLanes,(e=(Vf&e)===e)&&(t._workInProgressVersionPrimary=a,pp.push(t))),e)return n(t._source);throw pp.push(t),Error(mt(350))}function JC(e,t,n,a){var c=so;if(c===null)throw Error(mt(349));var d=t._getVersion,o=d(t._source),v=bf.current,x=v.useState(function(){return W2(c,t,n)}),E=x[1],k=x[0];x=Oi;var P=e.memoizedState,T=P.refs,W=T.getSnapshot,$=P.source;P=P.subscribe;var H=oi;return e.memoizedState={refs:T,source:t,subscribe:a},v.useEffect(function(){T.getSnapshot=n,T.setSnapshot=E;var D=d(t._source);if(!ta(o,D)){D=n(t._source),ta(k,D)||(E(D),D=El(H),c.mutableReadLanes|=D&c.pendingLanes),D=c.mutableReadLanes,c.entangledLanes|=D;for(var U=c.entanglements,q=D;0<q;){var N=31-Il(q),O=1<<N;U[N]|=D,q&=~O}}},[n,t,a]),v.useEffect(function(){return a(t._source,function(){var D=T.getSnapshot,U=T.setSnapshot;try{U(D(t._source));var q=El(H);c.mutableReadLanes|=q&c.pendingLanes}catch(N){U(function(){throw N})}})},[t,a]),ta(W,n)&&ta($,t)&&ta(P,a)||(e={pending:null,dispatch:null,lastRenderedReducer:Qa,lastRenderedState:k},e.dispatch=E=w1.bind(null,oi,e),x.queue=e,x.baseQueue=null,k=W2(c,t,n),x.memoizedState=x.baseState=k),k}function YC(e,t,n){var a=$u();return JC(a,e,t,n)}function Gh(e){var t=Tu();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e=t.queue={pending:null,dispatch:null,lastRenderedReducer:Qa,lastRenderedState:e},e=e.dispatch=w1.bind(null,oi,e),[t.memoizedState,e]}function Dy(e,t,n,a){return e={tag:e,create:t,destroy:n,deps:a,next:null},t=oi.updateQueue,t===null?(t={lastEffect:null},oi.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(a=n.next,n.next=e,e.next=a,t.lastEffect=e)),e}function G2(e){var t=Tu();return e={current:e},t.memoizedState=e}function By(){return $u().memoizedState}function J_(e,t,n,a){var c=Tu();oi.flags|=e,c.memoizedState=Dy(1|t,n,void 0,a===void 0?null:a)}function x1(e,t,n,a){var c=$u();a=a===void 0?null:a;var d=void 0;if(Ki!==null){var o=Ki.memoizedState;if(d=o.destroy,a!==null&&v1(a,o.deps)){Dy(t,n,d,a);return}}oi.flags|=e,c.memoizedState=Dy(1|t,n,d,a)}function H2(e,t){return J_(516,4,e,t)}function Ny(e,t){return x1(516,4,e,t)}function ek(e,t){return x1(4,2,e,t)}function tk(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function rk(e,t,n){return n=n!=null?n.concat([e]):null,x1(4,2,tk.bind(null,t,e),n)}function b1(){}function nk(e,t){var n=$u();t=t===void 0?null:t;var a=n.memoizedState;return a!==null&&t!==null&&v1(t,a[1])?a[0]:(n.memoizedState=[e,t],e)}function ik(e,t){var n=$u();t=t===void 0?null:t;var a=n.memoizedState;return a!==null&&t!==null&&v1(t,a[1])?a[0]:(e=e(),n.memoizedState=[e,t],e)}function yR(e,t){var n=wp();Ou(98>n?98:n,function(){e(!0)}),Ou(97<n?97:n,function(){var a=na.transition;na.transition=1;try{e(!1),t()}finally{na.transition=a}})}function w1(e,t,n){var a=jo(),c=El(e),d={lane:c,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(o===null?d.next=d:(d.next=o.next,o.next=d),t.pending=d,o=e.alternate,e===oi||o!==null&&o===oi)wf=Oy=!0;else{if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var v=t.lastRenderedState,x=o(v,n);if(d.eagerReducer=o,d.eagerState=x,ta(x,v))return}catch{}finally{}Sl(e,c,a)}}var Fy={readContext:ia,useCallback:xo,useContext:xo,useEffect:xo,useImperativeHandle:xo,useLayoutEffect:xo,useMemo:xo,useReducer:xo,useRef:xo,useState:xo,useDebugValue:xo,useDeferredValue:xo,useTransition:xo,useMutableSource:xo,useOpaqueIdentifier:xo,unstable_isNewReconciler:!1},gR={readContext:ia,useCallback:function(e,t){return Tu().memoizedState=[e,t===void 0?null:t],e},useContext:ia,useEffect:H2,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,J_(4,2,tk.bind(null,t,e),n)},useLayoutEffect:function(e,t){return J_(4,2,e,t)},useMemo:function(e,t){var n=Tu();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var a=Tu();return t=n!==void 0?n(t):t,a.memoizedState=a.baseState=t,e=a.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},e=e.dispatch=w1.bind(null,oi,e),[a.memoizedState,e]},useRef:G2,useState:Gh,useDebugValue:b1,useDeferredValue:function(e){var t=Gh(e),n=t[0],a=t[1];return H2(function(){var c=na.transition;na.transition=1;try{a(e)}finally{na.transition=c}},[e]),n},useTransition:function(){var e=Gh(!1),t=e[0];return e=yR.bind(null,e[1]),G2(e),[e,t]},useMutableSource:function(e,t,n){var a=Tu();return a.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},JC(a,e,t,n)},useOpaqueIdentifier:function(){if(es){var e=!1,t=cR(function(){throw e||(e=!0,n("r:"+(T0++).toString(36))),Error(mt(355))}),n=Gh(t)[1];return!(oi.mode&2)&&(oi.flags|=516,Dy(5,function(){n("r:"+(T0++).toString(36))},void 0,null)),t}return t="r:"+(T0++).toString(36),Gh(t),t},unstable_isNewReconciler:!1},vR={readContext:ia,useCallback:nk,useContext:ia,useEffect:Ny,useImperativeHandle:rk,useLayoutEffect:ek,useMemo:ik,useReducer:qh,useRef:By,useState:function(){return qh(Qa)},useDebugValue:b1,useDeferredValue:function(e){var t=qh(Qa),n=t[0],a=t[1];return Ny(function(){var c=na.transition;na.transition=1;try{a(e)}finally{na.transition=c}},[e]),n},useTransition:function(){var e=qh(Qa)[0];return[By().current,e]},useMutableSource:YC,useOpaqueIdentifier:function(){return qh(Qa)[0]},unstable_isNewReconciler:!1},_R={readContext:ia,useCallback:nk,useContext:ia,useEffect:Ny,useImperativeHandle:rk,useLayoutEffect:ek,useMemo:ik,useReducer:Wh,useRef:By,useState:function(){return Wh(Qa)},useDebugValue:b1,useDeferredValue:function(e){var t=Wh(Qa),n=t[0],a=t[1];return Ny(function(){var c=na.transition;na.transition=1;try{a(e)}finally{na.transition=c}},[e]),n},useTransition:function(){var e=Wh(Qa)[0];return[By().current,e]},useMutableSource:YC,useOpaqueIdentifier:function(){return Wh(Qa)[0]},unstable_isNewReconciler:!1},xR=ju.ReactCurrentOwner,wa=!1;function bo(e,t,n,a){t.child=e===null?XC(t,null,n,a):zy(t,e.child,n,a)}function Z2(e,t,n,a,c){n=n.render;var d=t.ref;return cp(t,c),a=_1(e,t,n,a,d,c),e!==null&&!wa?(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~c,Fs(e,t,c)):(t.flags|=1,bo(e,t,a,c),t.child)}function K2(e,t,n,a,c,d){if(e===null){var o=n.type;return typeof o=="function"&&!T1(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,ok(e,t,o,a,c,d)):(e=sy(n.type,null,a,t,t.mode,d),e.ref=t.ref,e.return=t,t.child=e)}return o=e.child,!(c&d)&&(c=o.memoizedProps,n=n.compare,n=n!==null?n:Df,n(c,a)&&e.ref===t.ref)?Fs(e,t,d):(t.flags|=1,e=Rl(o,a),e.ref=t.ref,e.return=t,t.child=e)}function ok(e,t,n,a,c,d){if(e!==null&&Df(e.memoizedProps,a)&&e.ref===t.ref)if(wa=!1,(d&c)!==0)e.flags&16384&&(wa=!0);else return t.lanes=e.lanes,Fs(e,t,d);return Y_(e,t,n,a,d)}function R0(e,t,n){var a=t.pendingProps,c=a.children,d=e!==null?e.memoizedState:null;if(a.mode==="hidden"||a.mode==="unstable-defer-without-hiding")if(!(t.mode&4))t.memoizedState={baseLanes:0},Dm(t,n);else if(n&1073741824)t.memoizedState={baseLanes:0},Dm(t,d!==null?d.baseLanes:n);else return e=d!==null?d.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},Dm(t,e),null;else d!==null?(a=d.baseLanes|n,t.memoizedState=null):a=n,Dm(t,a);return bo(e,t,c,n),t.child}function ak(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=128)}function Y_(e,t,n,a,c){var d=So(n)?Lu:Yi.current;return d=bp(t,d),cp(t,c),n=_1(e,t,n,a,d,c),e!==null&&!wa?(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~c,Fs(e,t,c)):(t.flags|=1,bo(e,t,n,c),t.child)}function X2(e,t,n,a,c){if(So(n)){var d=!0;ry(t)}else d=!1;if(cp(t,c),t.stateNode===null)e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),ZC(t,n,a),K_(t,n,a,c),a=!0;else if(e===null){var o=t.stateNode,v=t.memoizedProps;o.props=v;var x=o.context,E=n.contextType;typeof E=="object"&&E!==null?E=ia(E):(E=So(n)?Lu:Yi.current,E=bp(t,E));var k=n.getDerivedStateFromProps,P=typeof k=="function"||typeof o.getSnapshotBeforeUpdate=="function";P||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(v!==a||x!==E)&&j2(t,o,a,E),dl=!1;var T=t.memoizedState;o.state=T,Ff(t,a,o,c),x=t.memoizedState,v!==a||T!==x||Eo.current||dl?(typeof k=="function"&&(Ry(t,n,k,a),x=t.memoizedState),(v=dl||U2(t,n,v,a,T,x,E))?(P||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4)):(typeof o.componentDidMount=="function"&&(t.flags|=4),t.memoizedProps=a,t.memoizedState=x),o.props=a,o.state=x,o.context=E,a=v):(typeof o.componentDidMount=="function"&&(t.flags|=4),a=!1)}else{o=t.stateNode,GC(e,t),v=t.memoizedProps,E=t.type===t.elementType?v:va(t.type,v),o.props=E,P=t.pendingProps,T=o.context,x=n.contextType,typeof x=="object"&&x!==null?x=ia(x):(x=So(n)?Lu:Yi.current,x=bp(t,x));var W=n.getDerivedStateFromProps;(k=typeof W=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(v!==P||T!==x)&&j2(t,o,a,x),dl=!1,T=t.memoizedState,o.state=T,Ff(t,a,o,c);var $=t.memoizedState;v!==P||T!==$||Eo.current||dl?(typeof W=="function"&&(Ry(t,n,W,a),$=t.memoizedState),(E=dl||U2(t,n,E,a,T,$,x))?(k||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(a,$,x),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(a,$,x)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=256)):(typeof o.componentDidUpdate!="function"||v===e.memoizedProps&&T===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&T===e.memoizedState||(t.flags|=256),t.memoizedProps=a,t.memoizedState=$),o.props=a,o.state=$,o.context=x,a=E):(typeof o.componentDidUpdate!="function"||v===e.memoizedProps&&T===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&T===e.memoizedState||(t.flags|=256),a=!1)}return ex(e,t,n,a,d,c)}function ex(e,t,n,a,c,d){ak(e,t);var o=(t.flags&64)!==0;if(!a&&!o)return c&&O2(t,n,!1),Fs(e,t,d);a=t.stateNode,xR.current=t;var v=o&&typeof n.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&o?(t.child=zy(t,e.child,null,d),t.child=zy(t,null,v,d)):bo(e,t,v,d),t.memoizedState=a.state,c&&O2(t,n,!0),t.child}function Q2(e){var t=e.stateNode;t.pendingContext?L2(e,t.pendingContext,t.pendingContext!==t.context):t.context&&L2(e,t.context,!1),X_(e,t.containerInfo)}var Om={dehydrated:null,retryLane:0};function J2(e,t,n){var a=t.pendingProps,c=Zn.current,d=!1,o;return(o=(t.flags&64)!==0)||(o=e!==null&&e.memoizedState===null?!1:(c&2)!==0),o?(d=!0,t.flags&=-65):e!==null&&e.memoizedState===null||a.fallback===void 0||a.unstable_avoidThisFallback===!0||(c|=1),Kn(Zn,c&1),e===null?(a.fallback!==void 0&&Q_(t),e=a.children,c=a.fallback,d?(e=Y2(t,e,c,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Om,e):typeof a.unstable_expectedLoadTime=="number"?(e=Y2(t,e,c,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Om,t.lanes=33554432,e):(n=I1({mode:"visible",children:e},t.mode,n,null),n.return=t,t.child=n)):e.memoizedState!==null?d?(a=tA(e,t,a.children,a.fallback,n),d=t.child,c=e.child.memoizedState,d.memoizedState=c===null?{baseLanes:n}:{baseLanes:c.baseLanes|n},d.childLanes=e.childLanes&~n,t.memoizedState=Om,a):(n=eA(e,t,a.children,n),t.memoizedState=null,n):d?(a=tA(e,t,a.children,a.fallback,n),d=t.child,c=e.child.memoizedState,d.memoizedState=c===null?{baseLanes:n}:{baseLanes:c.baseLanes|n},d.childLanes=e.childLanes&~n,t.memoizedState=Om,a):(n=eA(e,t,a.children,n),t.memoizedState=null,n)}function Y2(e,t,n,a){var c=e.mode,d=e.child;return t={mode:"hidden",children:t},!(c&2)&&d!==null?(d.childLanes=0,d.pendingProps=t):d=I1(t,c,0,null),n=dp(n,c,a,null),d.return=e,n.return=e,d.sibling=n,e.child=d,n}function eA(e,t,n,a){var c=e.child;return e=c.sibling,n=Rl(c,{mode:"visible",children:n}),!(t.mode&2)&&(n.lanes=a),n.return=t,n.sibling=null,e!==null&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function tA(e,t,n,a,c){var d=t.mode,o=e.child;e=o.sibling;var v={mode:"hidden",children:n};return!(d&2)&&t.child!==o?(n=t.child,n.childLanes=0,n.pendingProps=v,o=n.lastEffect,o!==null?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Rl(o,v),e!==null?a=Rl(e,a):(a=dp(a,d,c,null),a.flags|=2),a.return=t,n.return=t,n.sibling=a,t.child=n,a}function rA(e,t){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),WC(e.return,t)}function z0(e,t,n,a,c,d){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:c,lastEffect:d}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=a,o.tail=n,o.tailMode=c,o.lastEffect=d)}function nA(e,t,n){var a=t.pendingProps,c=a.revealOrder,d=a.tail;if(bo(e,t,a.children,n),a=Zn.current,a&2)a=a&1|2,t.flags|=64;else{if(e!==null&&e.flags&64)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&rA(e,n);else if(e.tag===19)rA(e,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(Kn(Zn,a),!(t.mode&2))t.memoizedState=null;else switch(c){case"forwards":for(n=t.child,c=null;n!==null;)e=n.alternate,e!==null&&Ly(e)===null&&(c=n),n=n.sibling;n=c,n===null?(c=t.child,t.child=null):(c=n.sibling,n.sibling=null),z0(t,!1,c,n,d,t.lastEffect);break;case"backwards":for(n=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&Ly(e)===null){t.child=c;break}e=c.sibling,c.sibling=n,n=c,c=e}z0(t,!0,n,null,d,t.lastEffect);break;case"together":z0(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function Fs(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),rd|=t.lanes,n&t.childLanes){if(e!==null&&t.child!==e.child)throw Error(mt(153));if(t.child!==null){for(e=t.child,n=Rl(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Rl(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}return null}var sk,tx,lk,uk;sk=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};tx=function(){};lk=function(e,t,n,a){var c=e.memoizedProps;if(c!==a){e=t.stateNode,ku(Ya.current);var d=null;switch(n){case"input":c=T_(e,c),a=T_(e,a),d=[];break;case"option":c=M_(e,c),a=M_(e,a),d=[];break;case"select":c=zn({},c,{value:void 0}),a=zn({},a,{value:void 0}),d=[];break;case"textarea":c=R_(e,c),a=R_(e,a),d=[];break;default:typeof c.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=Cy)}O_(n,a);var o;n=null;for(E in c)if(!a.hasOwnProperty(E)&&c.hasOwnProperty(E)&&c[E]!=null)if(E==="style"){var v=c[E];for(o in v)v.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else E!=="dangerouslySetInnerHTML"&&E!=="children"&&E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&E!=="autoFocus"&&(If.hasOwnProperty(E)?d||(d=[]):(d=d||[]).push(E,null));for(E in a){var x=a[E];if(v=c!=null?c[E]:void 0,a.hasOwnProperty(E)&&x!==v&&(x!=null||v!=null))if(E==="style")if(v){for(o in v)!v.hasOwnProperty(o)||x&&x.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in x)x.hasOwnProperty(o)&&v[o]!==x[o]&&(n||(n={}),n[o]=x[o])}else n||(d||(d=[]),d.push(E,n)),n=x;else E==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,v=v?v.__html:void 0,x!=null&&v!==x&&(d=d||[]).push(E,x)):E==="children"?typeof x!="string"&&typeof x!="number"||(d=d||[]).push(E,""+x):E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&(If.hasOwnProperty(E)?(x!=null&&E==="onScroll"&&kn("scroll",e),d||v===x||(d=[])):typeof x=="object"&&x!==null&&x.$$typeof===Kx?x.toString():(d=d||[]).push(E,x))}n&&(d=d||[]).push("style",n);var E=d;(t.updateQueue=E)&&(t.flags|=4)}};uk=function(e,t,n,a){n!==a&&(t.flags|=4)};function Hh(e,t){if(!es)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function bR(e,t,n){var a=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return So(t.type)&&Ty(),null;case 3:return Ap(),Tn(Eo),Tn(Yi),g1(),a=t.stateNode,a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Lm(t)?t.flags|=4:a.hydrate||(t.flags|=256)),tx(t),null;case 5:y1(t);var c=ku(jf.current);if(n=t.type,e!==null&&t.stateNode!=null)lk(e,t,n,a,c),e.ref!==t.ref&&(t.flags|=128);else{if(!a){if(t.stateNode===null)throw Error(mt(166));return null}if(e=ku(Ya.current),Lm(t)){a=t.stateNode,n=t.type;var d=t.memoizedProps;switch(a[gl]=t,a[ky]=d,n){case"dialog":kn("cancel",a),kn("close",a);break;case"iframe":case"object":case"embed":kn("load",a);break;case"video":case"audio":for(e=0;e<af.length;e++)kn(af[e],a);break;case"source":kn("error",a);break;case"img":case"image":case"link":kn("error",a),kn("load",a);break;case"details":kn("toggle",a);break;case"input":n2(a,d),kn("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!d.multiple},kn("invalid",a);break;case"textarea":o2(a,d),kn("invalid",a)}O_(n,d),e=null;for(var o in d)d.hasOwnProperty(o)&&(c=d[o],o==="children"?typeof c=="string"?a.textContent!==c&&(e=["children",c]):typeof c=="number"&&a.textContent!==""+c&&(e=["children",""+c]):If.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&kn("scroll",a));switch(n){case"input":Tm(a),i2(a,d,!0);break;case"textarea":Tm(a),a2(a);break;case"select":case"option":break;default:typeof d.onClick=="function"&&(a.onclick=Cy)}a=e,t.updateQueue=a,a!==null&&(t.flags|=4)}else{switch(o=c.nodeType===9?c:c.ownerDocument,e===z_.html&&(e=rC(n)),e===z_.html?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=o.createElement(n,{is:a.is}):(e=o.createElement(n),n==="select"&&(o=e,a.multiple?o.multiple=!0:a.size&&(o.size=a.size))):e=o.createElementNS(e,n),e[gl]=t,e[ky]=a,sk(e,t,!1,!1),t.stateNode=e,o=D_(n,a),n){case"dialog":kn("cancel",e),kn("close",e),c=a;break;case"iframe":case"object":case"embed":kn("load",e),c=a;break;case"video":case"audio":for(c=0;c<af.length;c++)kn(af[c],e);c=a;break;case"source":kn("error",e),c=a;break;case"img":case"image":case"link":kn("error",e),kn("load",e),c=a;break;case"details":kn("toggle",e),c=a;break;case"input":n2(e,a),c=T_(e,a),kn("invalid",e);break;case"option":c=M_(e,a);break;case"select":e._wrapperState={wasMultiple:!!a.multiple},c=zn({},a,{value:void 0}),kn("invalid",e);break;case"textarea":o2(e,a),c=R_(e,a),kn("invalid",e);break;default:c=a}O_(n,c);var v=c;for(d in v)if(v.hasOwnProperty(d)){var x=v[d];d==="style"?oC(e,x):d==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,x!=null&&nC(e,x)):d==="children"?typeof x=="string"?(n!=="textarea"||x!=="")&&Pf(e,x):typeof x=="number"&&Pf(e,""+x):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(If.hasOwnProperty(d)?x!=null&&d==="onScroll"&&kn("scroll",e):x!=null&&$x(e,d,x,o))}switch(n){case"input":Tm(e),i2(e,a,!1);break;case"textarea":Tm(e),a2(e);break;case"option":a.value!=null&&e.setAttribute("value",""+Tl(a.value));break;case"select":e.multiple=!!a.multiple,d=a.value,d!=null?ap(e,!!a.multiple,d,!1):a.defaultValue!=null&&ap(e,!!a.multiple,a.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=Cy)}DC(n,a)&&(t.flags|=4)}t.ref!==null&&(t.flags|=128)}return null;case 6:if(e&&t.stateNode!=null)uk(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(mt(166));n=ku(jf.current),ku(Ya.current),Lm(t)?(a=t.stateNode,n=t.memoizedProps,a[gl]=t,a.nodeValue!==n&&(t.flags|=4)):(a=(n.nodeType===9?n:n.ownerDocument).createTextNode(a),a[gl]=t,t.stateNode=a)}return null;case 13:return Tn(Zn),a=t.memoizedState,t.flags&64?(t.lanes=n,t):(a=a!==null,n=!1,e===null?t.memoizedProps.fallback!==void 0&&Lm(t):n=e.memoizedState!==null,a&&!n&&t.mode&2&&(e===null&&t.memoizedProps.unstable_avoidThisFallback!==!0||Zn.current&1?Bi===0&&(Bi=3):((Bi===0||Bi===3)&&(Bi=4),so===null||!(rd&134217727)&&!(Bp&134217727)||hp(so,Ji))),(a||n)&&(t.flags|=4),null);case 4:return Ap(),tx(t),e===null&&zC(t.stateNode.containerInfo),null;case 10:return d1(t),null;case 17:return So(t.type)&&Ty(),null;case 19:if(Tn(Zn),a=t.memoizedState,a===null)return null;if(d=(t.flags&64)!==0,o=a.rendering,o===null)if(d)Hh(a,!1);else{if(Bi!==0||e!==null&&e.flags&64)for(e=t.child;e!==null;){if(o=Ly(e),o!==null){for(t.flags|=64,Hh(a,!1),d=o.updateQueue,d!==null&&(t.updateQueue=d,t.flags|=4),a.lastEffect===null&&(t.firstEffect=null),t.lastEffect=a.lastEffect,a=n,n=t.child;n!==null;)d=n,e=a,d.flags&=2,d.nextEffect=null,d.firstEffect=null,d.lastEffect=null,o=d.alternate,o===null?(d.childLanes=0,d.lanes=e,d.child=null,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=o.childLanes,d.lanes=o.lanes,d.child=o.child,d.memoizedProps=o.memoizedProps,d.memoizedState=o.memoizedState,d.updateQueue=o.updateQueue,d.type=o.type,e=o.dependencies,d.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Kn(Zn,Zn.current&1|2),t.child}e=e.sibling}a.tail!==null&&Xi()>sx&&(t.flags|=64,d=!0,Hh(a,!1),t.lanes=33554432)}else{if(!d)if(e=Ly(o),e!==null){if(t.flags|=64,d=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Hh(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!es)return t=t.lastEffect=a.lastEffect,t!==null&&(t.nextEffect=null),null}else 2*Xi()-a.renderingStartTime>sx&&n!==1073741824&&(t.flags|=64,d=!0,Hh(a,!1),t.lanes=33554432);a.isBackwards?(o.sibling=t.child,t.child=o):(n=a.last,n!==null?n.sibling=o:t.child=o,a.last=o)}return a.tail!==null?(n=a.tail,a.rendering=n,a.tail=n.sibling,a.lastEffect=t.lastEffect,a.renderingStartTime=Xi(),n.sibling=null,t=Zn.current,Kn(Zn,d?t&1|2:t&1),n):null;case 23:case 24:return k1(),e!==null&&e.memoizedState!==null!=(t.memoizedState!==null)&&a.mode!=="unstable-defer-without-hiding"&&(t.flags|=4),null}throw Error(mt(156,t.tag))}function wR(e){switch(e.tag){case 1:So(e.type)&&Ty();var t=e.flags;return t&4096?(e.flags=t&-4097|64,e):null;case 3:if(Ap(),Tn(Eo),Tn(Yi),g1(),t=e.flags,t&64)throw Error(mt(285));return e.flags=t&-4097|64,e;case 5:return y1(e),null;case 13:return Tn(Zn),t=e.flags,t&4096?(e.flags=t&-4097|64,e):null;case 19:return Tn(Zn),null;case 4:return Ap(),null;case 10:return d1(e),null;case 23:case 24:return k1(),null;default:return null}}function A1(e,t){try{var n="",a=t;do n+=t3(a),a=a.return;while(a);var c=n}catch(d){c=`
Error generating stack: `+d.message+`
`+d.stack}return{value:e,source:t,stack:c}}function rx(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var AR=typeof WeakMap=="function"?WeakMap:Map;function ck(e,t,n){n=wl(-1,n),n.tag=3,n.payload={element:null};var a=t.value;return n.callback=function(){jy||(jy=!0,lx=a),rx(e,t)},n}function pk(e,t,n){n=wl(-1,n),n.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var c=t.value;n.payload=function(){return rx(e,t),a(c)}}var d=e.stateNode;return d!==null&&typeof d.componentDidCatch=="function"&&(n.callback=function(){typeof a!="function"&&(Ja===null?Ja=new Set([this]):Ja.add(this),rx(e,t));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}var ER=typeof WeakSet=="function"?WeakSet:Set;function iA(e){var t=e.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(n){Cl(e,n)}else t.current=null}function SR(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(t.flags&256&&e!==null){var n=e.memoizedProps,a=e.memoizedState;e=t.stateNode,t=e.getSnapshotBeforeUpdate(t.elementType===t.type?n:va(t.type,n),a),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:t.flags&256&&c1(t.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(mt(163))}function CR(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(t=n.updateQueue,t=t!==null?t.lastEffect:null,t!==null){e=t=t.next;do{if((e.tag&3)===3){var a=e.create;e.destroy=a()}e=e.next}while(e!==t)}if(t=n.updateQueue,t=t!==null?t.lastEffect:null,t!==null){e=t=t.next;do{var c=e;a=c.next,c=c.tag,c&4&&c&1&&(xk(n,e),LR(n,e)),e=a}while(e!==t)}return;case 1:e=n.stateNode,n.flags&4&&(t===null?e.componentDidMount():(a=n.elementType===n.type?t.memoizedProps:va(n.type,t.memoizedProps),e.componentDidUpdate(a,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),t=n.updateQueue,t!==null&&F2(n,t,e);return;case 3:if(t=n.updateQueue,t!==null){if(e=null,n.child!==null)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}F2(n,t,e)}return;case 5:e=n.stateNode,t===null&&n.flags&4&&DC(n.type,n.memoizedProps)&&e.focus();return;case 6:return;case 4:return;case 12:return;case 13:n.memoizedState===null&&(n=n.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&mC(n))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(mt(163))}function oA(e,t){for(var n=e;;){if(n.tag===5){var a=n.stateNode;if(t)a=a.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{a=n.stateNode;var c=n.memoizedProps.style;c=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=iC("display",c)}}else if(n.tag===6)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((n.tag!==23&&n.tag!==24||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function aA(e,t){if(Mu&&typeof Mu.onCommitFiberUnmount=="function")try{Mu.onCommitFiberUnmount(p1,t)}catch{}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(e=t.updateQueue,e!==null&&(e=e.lastEffect,e!==null)){var n=e=e.next;do{var a=n,c=a.destroy;if(a=a.tag,c!==void 0)if(a&4)xk(t,n);else{a=t;try{c()}catch(d){Cl(a,d)}}n=n.next}while(n!==e)}break;case 1:if(iA(t),e=t.stateNode,typeof e.componentWillUnmount=="function")try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(d){Cl(t,d)}break;case 5:iA(t);break;case 4:hk(e,t)}}function sA(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function lA(e){return e.tag===5||e.tag===3||e.tag===4}function uA(e){e:{for(var t=e.return;t!==null;){if(lA(t))break e;t=t.return}throw Error(mt(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var a=!1;break;case 3:t=t.containerInfo,a=!0;break;case 4:t=t.containerInfo,a=!0;break;default:throw Error(mt(161))}n.flags&16&&(Pf(t,""),n.flags&=-17);e:t:for(n=e;;){for(;n.sibling===null;){if(n.return===null||lA(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2)){n=n.stateNode;break e}}a?nx(e,n,t):ix(e,n,t)}function nx(e,t,n){var a=e.tag,c=a===5||a===6;if(c)e=c?e.stateNode:e.stateNode.instance,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Cy));else if(a!==4&&(e=e.child,e!==null))for(nx(e,t,n),e=e.sibling;e!==null;)nx(e,t,n),e=e.sibling}function ix(e,t,n){var a=e.tag,c=a===5||a===6;if(c)e=c?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(ix(e,t,n),e=e.sibling;e!==null;)ix(e,t,n),e=e.sibling}function hk(e,t){for(var n=t,a=!1,c,d;;){if(!a){a=n.return;e:for(;;){if(a===null)throw Error(mt(160));switch(c=a.stateNode,a.tag){case 5:d=!1;break e;case 3:c=c.containerInfo,d=!0;break e;case 4:c=c.containerInfo,d=!0;break e}a=a.return}a=!0}if(n.tag===5||n.tag===6){e:for(var o=e,v=n,x=v;;)if(aA(o,x),x.child!==null&&x.tag!==4)x.child.return=x,x=x.child;else{if(x===v)break e;for(;x.sibling===null;){if(x.return===null||x.return===v)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}d?(o=c,v=n.stateNode,o.nodeType===8?o.parentNode.removeChild(v):o.removeChild(v)):c.removeChild(n.stateNode)}else if(n.tag===4){if(n.child!==null){c=n.stateNode.containerInfo,d=!0,n.child.return=n,n=n.child;continue}}else if(aA(e,n),n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return,n.tag===4&&(a=!1)}n.sibling.return=n.return,n=n.sibling}}function L0(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do(a.tag&3)===3&&(e=a.destroy,a.destroy=void 0,e!==void 0&&e()),a=a.next;while(a!==n)}return;case 1:return;case 5:if(n=t.stateNode,n!=null){a=t.memoizedProps;var c=e!==null?e.memoizedProps:a;e=t.type;var d=t.updateQueue;if(t.updateQueue=null,d!==null){for(n[ky]=a,e==="input"&&a.type==="radio"&&a.name!=null&&eC(n,a),D_(e,c),t=D_(e,a),c=0;c<d.length;c+=2){var o=d[c],v=d[c+1];o==="style"?oC(n,v):o==="dangerouslySetInnerHTML"?nC(n,v):o==="children"?Pf(n,v):$x(n,o,v,t)}switch(e){case"input":I_(n,a);break;case"textarea":tC(n,a);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!a.multiple,d=a.value,d!=null?ap(n,!!a.multiple,d,!1):e!==!!a.multiple&&(a.defaultValue!=null?ap(n,!!a.multiple,a.defaultValue,!0):ap(n,!!a.multiple,a.multiple?[]:"",!1))}}}return;case 6:if(t.stateNode===null)throw Error(mt(162));t.stateNode.nodeValue=t.memoizedProps;return;case 3:n=t.stateNode,n.hydrate&&(n.hydrate=!1,mC(n.containerInfo));return;case 12:return;case 13:t.memoizedState!==null&&(C1=Xi(),oA(t.child,!0)),cA(t);return;case 19:cA(t);return;case 17:return;case 23:case 24:oA(t,t.memoizedState!==null);return}throw Error(mt(163))}function cA(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new ER),t.forEach(function(a){var c=BR.bind(null,e,a);n.has(a)||(n.add(a),a.then(c,c))})}}function kR(e,t){return e!==null&&(e=e.memoizedState,e===null||e.dehydrated!==null)?(t=t.memoizedState,t!==null&&t.dehydrated===null):!1}var TR=Math.ceil,Uy=ju.ReactCurrentDispatcher,E1=ju.ReactCurrentOwner,cr=0,so=null,mi=null,Ji=0,Du=0,ox=Dl(0),Bi=0,bg=null,Dp=0,rd=0,Bp=0,S1=0,ax=null,C1=0,sx=1/0;function Np(){sx=Xi()+500}var zt=null,jy=!1,lx=null,Ja=null,Ml=!1,Af=null,sf=90,ux=[],cx=[],js=null,Ef=0,px=null,iy=-1,Ds=0,oy=0,Sf=null,ay=!1;function jo(){return cr&48?Xi():iy!==-1?iy:iy=Xi()}function El(e){if(e=e.mode,!(e&2))return 1;if(!(e&4))return wp()===99?1:2;if(Ds===0&&(Ds=Dp),mR.transition!==0){oy!==0&&(oy=ax!==null?ax.pendingLanes:0),e=Ds;var t=4186112&~oy;return t&=-t,t===0&&(e=4186112&~e,t=e&-e,t===0&&(t=8192)),t}return e=wp(),cr&4&&e===98?e=Ey(12,Ds):(e=v3(e),e=Ey(e,Ds)),e}function Sl(e,t,n){if(50<Ef)throw Ef=0,px=null,Error(mt(185));if(e=wg(e,t),e===null)return null;dg(e,t,n),e===so&&(Bp|=t,Bi===4&&hp(e,Ji));var a=wp();t===1?cr&8&&!(cr&48)?hx(e):(oa(e,n),cr===0&&(Np(),os())):(!(cr&4)||a!==98&&a!==99||(js===null?js=new Set([e]):js.add(e)),oa(e,n)),ax=e}function wg(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}function oa(e,t){for(var n=e.callbackNode,a=e.suspendedLanes,c=e.pingedLanes,d=e.expirationTimes,o=e.pendingLanes;0<o;){var v=31-Il(o),x=1<<v,E=d[v];if(E===-1){if(!(x&a)||x&c){E=t,Zc(x);var k=vn;d[v]=10<=k?E+250:6<=k?E+5e3:-1}}else E<=t&&(e.expiredLanes|=x);o&=~x}if(a=Lf(e,e===so?Ji:0),t=vn,a===0)n!==null&&(n!==I0&&H_(n),e.callbackNode=null,e.callbackPriority=0);else{if(n!==null){if(e.callbackPriority===t)return;n!==I0&&H_(n)}t===15?(n=hx.bind(null,e),Os===null?(Os=[n],ny=h1(_g,qC)):Os.push(n),n=I0):t===14?n=Nf(99,hx.bind(null,e)):(n=_3(t),n=Nf(n,fk.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function fk(e){if(iy=-1,oy=Ds=0,cr&48)throw Error(mt(327));var t=e.callbackNode;if(Bl()&&e.callbackNode!==t)return null;var n=Lf(e,e===so?Ji:0);if(n===0)return null;var a=n,c=cr;cr|=16;var d=gk();(so!==e||Ji!==a)&&(Np(),fp(e,a));do try{MR();break}catch(v){yk(e,v)}while(1);if(f1(),Uy.current=d,cr=c,mi!==null?a=0:(so=null,Ji=0,a=Bi),Dp&Bp)fp(e,0);else if(a!==0){if(a===2&&(cr|=64,e.hydrate&&(e.hydrate=!1,c1(e.containerInfo)),n=wC(e),n!==0&&(a=lf(e,n))),a===1)throw t=bg,fp(e,0),hp(e,n),oa(e,Xi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,a){case 0:case 1:throw Error(mt(345));case 2:xu(e);break;case 3:if(hp(e,n),(n&62914560)===n&&(a=C1+500-Xi(),10<a)){if(Lf(e,0)!==0)break;if(c=e.suspendedLanes,(c&n)!==n){jo(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=M2(xu.bind(null,e),a);break}xu(e);break;case 4:if(hp(e,n),(n&4186112)===n)break;for(a=e.eventTimes,c=-1;0<n;){var o=31-Il(n);d=1<<o,o=a[o],o>c&&(c=o),n&=~d}if(n=c,n=Xi()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*TR(n/1960))-n,10<n){e.timeoutHandle=M2(xu.bind(null,e),n);break}xu(e);break;case 5:xu(e);break;default:throw Error(mt(329))}}return oa(e,Xi()),e.callbackNode===t?fk.bind(null,e):null}function hp(e,t){for(t&=~S1,t&=~Bp,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Il(t),a=1<<n;e[n]=-1,t&=~a}}function hx(e){if(cr&48)throw Error(mt(327));if(Bl(),e===so&&e.expiredLanes&Ji){var t=Ji,n=lf(e,t);Dp&Bp&&(t=Lf(e,t),n=lf(e,t))}else t=Lf(e,0),n=lf(e,t);if(e.tag!==0&&n===2&&(cr|=64,e.hydrate&&(e.hydrate=!1,c1(e.containerInfo)),t=wC(e),t!==0&&(n=lf(e,t))),n===1)throw n=bg,fp(e,0),hp(e,t),oa(e,Xi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,xu(e),oa(e,Xi()),null}function IR(){if(js!==null){var e=js;js=null,e.forEach(function(t){t.expiredLanes|=24&t.pendingLanes,oa(t,Xi())})}os()}function dk(e,t){var n=cr;cr|=1;try{return e(t)}finally{cr=n,cr===0&&(Np(),os())}}function mk(e,t){var n=cr;cr&=-2,cr|=8;try{return e(t)}finally{cr=n,cr===0&&(Np(),os())}}function Dm(e,t){Kn(ox,Du),Du|=t,Dp|=t}function k1(){Du=ox.current,Tn(ox)}function fp(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,uR(n)),mi!==null)for(n=mi.return;n!==null;){var a=n;switch(a.tag){case 1:a=a.type.childContextTypes,a!=null&&Ty();break;case 3:Ap(),Tn(Eo),Tn(Yi),g1();break;case 5:y1(a);break;case 4:Ap();break;case 13:Tn(Zn);break;case 19:Tn(Zn);break;case 10:d1(a);break;case 23:case 24:k1()}n=n.return}so=e,mi=Rl(e.current,null),Ji=Du=Dp=t,Bi=0,bg=null,S1=Bp=rd=0}function yk(e,t){do{var n=mi;try{if(f1(),bf.current=Fy,Oy){for(var a=oi.memoizedState;a!==null;){var c=a.queue;c!==null&&(c.pending=null),a=a.next}Oy=!1}if(Vf=0,Oi=Ki=oi=null,wf=!1,E1.current=null,n===null||n.return===null){Bi=1,bg=t,mi=null;break}e:{var d=e,o=n.return,v=n,x=t;if(t=Ji,v.flags|=2048,v.firstEffect=v.lastEffect=null,x!==null&&typeof x=="object"&&typeof x.then=="function"){var E=x;if(!(v.mode&2)){var k=v.alternate;k?(v.updateQueue=k.updateQueue,v.memoizedState=k.memoizedState,v.lanes=k.lanes):(v.updateQueue=null,v.memoizedState=null)}var P=(Zn.current&1)!==0,T=o;do{var W;if(W=T.tag===13){var $=T.memoizedState;if($!==null)W=$.dehydrated!==null;else{var H=T.memoizedProps;W=H.fallback===void 0?!1:H.unstable_avoidThisFallback!==!0?!0:!P}}if(W){var D=T.updateQueue;if(D===null){var U=new Set;U.add(E),T.updateQueue=U}else D.add(E);if(!(T.mode&2)){if(T.flags|=64,v.flags|=16384,v.flags&=-2981,v.tag===1)if(v.alternate===null)v.tag=17;else{var q=wl(-1,1);q.tag=2,Al(v,q)}v.lanes|=1;break e}x=void 0,v=t;var N=d.pingCache;if(N===null?(N=d.pingCache=new AR,x=new Set,N.set(E,x)):(x=N.get(E),x===void 0&&(x=new Set,N.set(E,x))),!x.has(v)){x.add(v);var O=DR.bind(null,d,E,v);E.then(O,O)}T.flags|=4096,T.lanes=t;break e}T=T.return}while(T!==null);x=Error((op(v.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}Bi!==5&&(Bi=2),x=A1(x,v),T=o;do{switch(T.tag){case 3:d=x,T.flags|=4096,t&=-t,T.lanes|=t;var te=ck(T,d,t);N2(T,te);break e;case 1:d=x;var ne=T.type,fe=T.stateNode;if(!(T.flags&64)&&(typeof ne.getDerivedStateFromError=="function"||fe!==null&&typeof fe.componentDidCatch=="function"&&(Ja===null||!Ja.has(fe)))){T.flags|=4096,t&=-t,T.lanes|=t;var xe=pk(T,d,t);N2(T,xe);break e}}T=T.return}while(T!==null)}_k(n)}catch(Te){t=Te,mi===n&&n!==null&&(mi=n=n.return);continue}break}while(1)}function gk(){var e=Uy.current;return Uy.current=Fy,e===null?Fy:e}function lf(e,t){var n=cr;cr|=16;var a=gk();so===e&&Ji===t||fp(e,t);do try{PR();break}catch(c){yk(e,c)}while(1);if(f1(),cr=n,Uy.current=a,mi!==null)throw Error(mt(261));return so=null,Ji=0,Bi}function PR(){for(;mi!==null;)vk(mi)}function MR(){for(;mi!==null&&!hR();)vk(mi)}function vk(e){var t=bk(e.alternate,e,Du);e.memoizedProps=e.pendingProps,t===null?_k(e):mi=t,E1.current=null}function _k(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&2048){if(n=wR(t),n!==null){n.flags&=2047,mi=n;return}e!==null&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}else{if(n=bR(n,t,Du),n!==null){mi=n;return}if(n=t,n.tag!==24&&n.tag!==23||n.memoizedState===null||Du&1073741824||!(n.mode&4)){for(var a=0,c=n.child;c!==null;)a|=c.lanes|c.childLanes,c=c.sibling;n.childLanes=a}e!==null&&!(e.flags&2048)&&(e.firstEffect===null&&(e.firstEffect=t.firstEffect),t.lastEffect!==null&&(e.lastEffect!==null&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(e.lastEffect!==null?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}if(t=t.sibling,t!==null){mi=t;return}mi=t=e}while(t!==null);Bi===0&&(Bi=5)}function xu(e){var t=wp();return Ou(99,RR.bind(null,e,t)),null}function RR(e,t){do Bl();while(Af!==null);if(cr&48)throw Error(mt(327));var n=e.finishedWork;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(mt(177));e.callbackNode=null;var a=n.lanes|n.childLanes,c=a,d=e.pendingLanes&~c;e.pendingLanes=c,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=c,e.mutableReadLanes&=c,e.entangledLanes&=c,c=e.entanglements;for(var o=e.eventTimes,v=e.expirationTimes;0<d;){var x=31-Il(d),E=1<<x;c[x]=0,o[x]=-1,v[x]=-1,d&=~E}if(js!==null&&!(a&24)&&js.has(e)&&js.delete(e),e===so&&(mi=so=null,Ji=0),1<n.flags?n.lastEffect!==null?(n.lastEffect.nextEffect=n,a=n.firstEffect):a=n:a=n.firstEffect,a!==null){if(c=cr,cr|=32,E1.current=null,C0=Ym,o=E2(),V_(o)){if("selectionStart"in o)v={start:o.selectionStart,end:o.selectionEnd};else e:if(v=(v=o.ownerDocument)&&v.defaultView||window,(E=v.getSelection&&v.getSelection())&&E.rangeCount!==0){v=E.anchorNode,d=E.anchorOffset,x=E.focusNode,E=E.focusOffset;try{v.nodeType,x.nodeType}catch{v=null;break e}var k=0,P=-1,T=-1,W=0,$=0,H=o,D=null;t:for(;;){for(var U;H!==v||d!==0&&H.nodeType!==3||(P=k+d),H!==x||E!==0&&H.nodeType!==3||(T=k+E),H.nodeType===3&&(k+=H.nodeValue.length),(U=H.firstChild)!==null;)D=H,H=U;for(;;){if(H===o)break t;if(D===v&&++W===d&&(P=k),D===x&&++$===E&&(T=k),(U=H.nextSibling)!==null)break;H=D,D=H.parentNode}H=U}v=P===-1||T===-1?null:{start:P,end:T}}else v=null;v=v||{start:0,end:0}}else v=null;k0={focusedElem:o,selectionRange:v},Ym=!1,Sf=null,ay=!1,zt=a;do try{zR()}catch(Te){if(zt===null)throw Error(mt(330));Cl(zt,Te),zt=zt.nextEffect}while(zt!==null);Sf=null,zt=a;do try{for(o=e;zt!==null;){var q=zt.flags;if(q&16&&Pf(zt.stateNode,""),q&128){var N=zt.alternate;if(N!==null){var O=N.ref;O!==null&&(typeof O=="function"?O(null):O.current=null)}}switch(q&1038){case 2:uA(zt),zt.flags&=-3;break;case 6:uA(zt),zt.flags&=-3,L0(zt.alternate,zt);break;case 1024:zt.flags&=-1025;break;case 1028:zt.flags&=-1025,L0(zt.alternate,zt);break;case 4:L0(zt.alternate,zt);break;case 8:v=zt,hk(o,v);var te=v.alternate;sA(v),te!==null&&sA(te)}zt=zt.nextEffect}}catch(Te){if(zt===null)throw Error(mt(330));Cl(zt,Te),zt=zt.nextEffect}while(zt!==null);if(O=k0,N=E2(),q=O.focusedElem,o=O.selectionRange,N!==q&&q&&q.ownerDocument&&PC(q.ownerDocument.documentElement,q)){for(o!==null&&V_(q)&&(N=o.start,O=o.end,O===void 0&&(O=N),"selectionStart"in q?(q.selectionStart=N,q.selectionEnd=Math.min(O,q.value.length)):(O=(N=q.ownerDocument||document)&&N.defaultView||window,O.getSelection&&(O=O.getSelection(),v=q.textContent.length,te=Math.min(o.start,v),o=o.end===void 0?te:Math.min(o.end,v),!O.extend&&te>o&&(v=o,o=te,te=v),v=A2(q,te),d=A2(q,o),v&&d&&(O.rangeCount!==1||O.anchorNode!==v.node||O.anchorOffset!==v.offset||O.focusNode!==d.node||O.focusOffset!==d.offset)&&(N=N.createRange(),N.setStart(v.node,v.offset),O.removeAllRanges(),te>o?(O.addRange(N),O.extend(d.node,d.offset)):(N.setEnd(d.node,d.offset),O.addRange(N)))))),N=[],O=q;O=O.parentNode;)O.nodeType===1&&N.push({element:O,left:O.scrollLeft,top:O.scrollTop});for(typeof q.focus=="function"&&q.focus(),q=0;q<N.length;q++)O=N[q],O.element.scrollLeft=O.left,O.element.scrollTop=O.top}Ym=!!C0,k0=C0=null,e.current=n,zt=a;do try{for(q=e;zt!==null;){var ne=zt.flags;if(ne&36&&CR(q,zt.alternate,zt),ne&128){N=void 0;var fe=zt.ref;if(fe!==null){var xe=zt.stateNode;switch(zt.tag){case 5:N=xe;break;default:N=xe}typeof fe=="function"?fe(N):fe.current=N}}zt=zt.nextEffect}}catch(Te){if(zt===null)throw Error(mt(330));Cl(zt,Te),zt=zt.nextEffect}while(zt!==null);zt=null,dR(),cr=c}else e.current=n;if(Ml)Ml=!1,Af=e,sf=t;else for(zt=a;zt!==null;)t=zt.nextEffect,zt.nextEffect=null,zt.flags&8&&(ne=zt,ne.sibling=null,ne.stateNode=null),zt=t;if(a=e.pendingLanes,a===0&&(Ja=null),a===1?e===px?Ef++:(Ef=0,px=e):Ef=0,n=n.stateNode,Mu&&typeof Mu.onCommitFiberRoot=="function")try{Mu.onCommitFiberRoot(p1,n,void 0,(n.current.flags&64)===64)}catch{}if(oa(e,Xi()),jy)throw jy=!1,e=lx,lx=null,e;return cr&8||os(),null}function zR(){for(;zt!==null;){var e=zt.alternate;ay||Sf===null||(zt.flags&8?u2(zt,Sf)&&(ay=!0):zt.tag===13&&kR(e,zt)&&u2(zt,Sf)&&(ay=!0));var t=zt.flags;t&256&&SR(e,zt),!(t&512)||Ml||(Ml=!0,Nf(97,function(){return Bl(),null})),zt=zt.nextEffect}}function Bl(){if(sf!==90){var e=97<sf?97:sf;return sf=90,Ou(e,OR)}return!1}function LR(e,t){ux.push(t,e),Ml||(Ml=!0,Nf(97,function(){return Bl(),null}))}function xk(e,t){cx.push(t,e),Ml||(Ml=!0,Nf(97,function(){return Bl(),null}))}function OR(){if(Af===null)return!1;var e=Af;if(Af=null,cr&48)throw Error(mt(331));var t=cr;cr|=32;var n=cx;cx=[];for(var a=0;a<n.length;a+=2){var c=n[a],d=n[a+1],o=c.destroy;if(c.destroy=void 0,typeof o=="function")try{o()}catch(x){if(d===null)throw Error(mt(330));Cl(d,x)}}for(n=ux,ux=[],a=0;a<n.length;a+=2){c=n[a],d=n[a+1];try{var v=c.create;c.destroy=v()}catch(x){if(d===null)throw Error(mt(330));Cl(d,x)}}for(v=e.current.firstEffect;v!==null;)e=v.nextEffect,v.nextEffect=null,v.flags&8&&(v.sibling=null,v.stateNode=null),v=e;return cr=t,os(),!0}function pA(e,t,n){t=A1(n,t),t=ck(e,t,1),Al(e,t),t=jo(),e=wg(e,1),e!==null&&(dg(e,1,t),oa(e,t))}function Cl(e,t){if(e.tag===3)pA(e,e,t);else for(var n=e.return;n!==null;){if(n.tag===3){pA(n,e,t);break}else if(n.tag===1){var a=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Ja===null||!Ja.has(a))){e=A1(t,e);var c=pk(n,e,1);if(Al(n,c),c=jo(),n=wg(n,1),n!==null)dg(n,1,c),oa(n,c);else if(typeof a.componentDidCatch=="function"&&(Ja===null||!Ja.has(a)))try{a.componentDidCatch(t,e)}catch{}break}}n=n.return}}function DR(e,t,n){var a=e.pingCache;a!==null&&a.delete(t),t=jo(),e.pingedLanes|=e.suspendedLanes&n,so===e&&(Ji&n)===n&&(Bi===4||Bi===3&&(Ji&62914560)===Ji&&500>Xi()-C1?fp(e,0):S1|=n),oa(e,t)}function BR(e,t){var n=e.stateNode;n!==null&&n.delete(t),t=0,t===0&&(t=e.mode,t&2?t&4?(Ds===0&&(Ds=Dp),t=Kc(62914560&~Ds),t===0&&(t=4194304)):t=wp()===99?1:2:t=1),n=jo(),e=wg(e,t),e!==null&&(dg(e,t,n),oa(e,n))}var bk;bk=function(e,t,n){var a=t.lanes;if(e!==null)if(e.memoizedProps!==t.pendingProps||Eo.current)wa=!0;else if(n&a)wa=!!(e.flags&16384);else{switch(wa=!1,t.tag){case 3:Q2(t),M0();break;case 5:V2(t);break;case 1:So(t.type)&&ry(t);break;case 4:X_(t,t.stateNode.containerInfo);break;case 10:a=t.memoizedProps.value;var c=t.type._context;Kn(Iy,c._currentValue),c._currentValue=a;break;case 13:if(t.memoizedState!==null)return n&t.child.childLanes?J2(e,t,n):(Kn(Zn,Zn.current&1),t=Fs(e,t,n),t!==null?t.sibling:null);Kn(Zn,Zn.current&1);break;case 19:if(a=(n&t.childLanes)!==0,e.flags&64){if(a)return nA(e,t,n);t.flags|=64}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),Kn(Zn,Zn.current),a)break;return null;case 23:case 24:return t.lanes=0,R0(e,t,n)}return Fs(e,t,n)}else wa=!1;switch(t.lanes=0,t.tag){case 2:if(a=t.type,e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,c=bp(t,Yi.current),cp(t,n),c=_1(null,t,a,e,c,n),t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,So(a)){var d=!0;ry(t)}else d=!1;t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,m1(t);var o=a.getDerivedStateFromProps;typeof o=="function"&&Ry(t,a,o,e),c.updater=xg,t.stateNode=c,c._reactInternals=t,K_(t,a,e,n),t=ex(null,t,a,!0,d,n)}else t.tag=0,bo(null,t,c,n),t=t.child;return t;case 16:c=t.elementType;e:{switch(e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,d=c._init,c=d(c._payload),t.type=c,d=t.tag=FR(c),e=va(c,e),d){case 0:t=Y_(null,t,c,e,n);break e;case 1:t=X2(null,t,c,e,n);break e;case 11:t=Z2(null,t,c,e,n);break e;case 14:t=K2(null,t,c,va(c.type,e),a,n);break e}throw Error(mt(306,c,""))}return t;case 0:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:va(a,c),Y_(e,t,a,c,n);case 1:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:va(a,c),X2(e,t,a,c,n);case 3:if(Q2(t),a=t.updateQueue,e===null||a===null)throw Error(mt(282));if(a=t.pendingProps,c=t.memoizedState,c=c!==null?c.element:null,GC(e,t),Ff(t,a,null,n),a=t.memoizedState.element,a===c)M0(),t=Fs(e,t,n);else{if(c=t.stateNode,(d=c.hydrate)&&(vl=up(t.stateNode.containerInfo.firstChild),Ns=t,d=es=!0),d){if(e=c.mutableSourceEagerHydrationData,e!=null)for(c=0;c<e.length;c+=2)d=e[c],d._workInProgressVersionPrimary=e[c+1],pp.push(d);for(n=XC(t,null,a,n),t.child=n;n;)n.flags=n.flags&-3|1024,n=n.sibling}else bo(e,t,a,n),M0();t=t.child}return t;case 5:return V2(t),e===null&&Q_(t),a=t.type,c=t.pendingProps,d=e!==null?e.memoizedProps:null,o=c.children,W_(a,c)?o=null:d!==null&&W_(a,d)&&(t.flags|=16),ak(e,t),bo(e,t,o,n),t.child;case 6:return e===null&&Q_(t),null;case 13:return J2(e,t,n);case 4:return X_(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=zy(t,null,a,n):bo(e,t,a,n),t.child;case 11:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:va(a,c),Z2(e,t,a,c,n);case 7:return bo(e,t,t.pendingProps,n),t.child;case 8:return bo(e,t,t.pendingProps.children,n),t.child;case 12:return bo(e,t,t.pendingProps.children,n),t.child;case 10:e:{a=t.type._context,c=t.pendingProps,o=t.memoizedProps,d=c.value;var v=t.type._context;if(Kn(Iy,v._currentValue),v._currentValue=d,o!==null)if(v=o.value,d=ta(v,d)?0:(typeof a._calculateChangedBits=="function"?a._calculateChangedBits(v,d):1073741823)|0,d===0){if(o.children===c.children&&!Eo.current){t=Fs(e,t,n);break e}}else for(v=t.child,v!==null&&(v.return=t);v!==null;){var x=v.dependencies;if(x!==null){o=v.child;for(var E=x.firstContext;E!==null;){if(E.context===a&&E.observedBits&d){v.tag===1&&(E=wl(-1,n&-n),E.tag=2,Al(v,E)),v.lanes|=n,E=v.alternate,E!==null&&(E.lanes|=n),WC(v.return,n),x.lanes|=n;break}E=E.next}}else o=v.tag===10&&v.type===t.type?null:v.child;if(o!==null)o.return=v;else for(o=v;o!==null;){if(o===t){o=null;break}if(v=o.sibling,v!==null){v.return=o.return,o=v;break}o=o.return}v=o}bo(e,t,c.children,n),t=t.child}return t;case 9:return c=t.type,d=t.pendingProps,a=d.children,cp(t,n),c=ia(c,d.unstable_observedBits),a=a(c),t.flags|=1,bo(e,t,a,n),t.child;case 14:return c=t.type,d=va(c,t.pendingProps),d=va(c.type,d),K2(e,t,c,d,a,n);case 15:return ok(e,t,t.type,t.pendingProps,a,n);case 17:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:va(a,c),e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,So(a)?(e=!0,ry(t)):e=!1,cp(t,n),ZC(t,a,c),K_(t,a,c,n),ex(null,t,a,!0,e,n);case 19:return nA(e,t,n);case 23:return R0(e,t,n);case 24:return R0(e,t,n)}throw Error(mt(156,t.tag))};function NR(e,t,n,a){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function ra(e,t,n,a){return new NR(e,t,n,a)}function T1(e){return e=e.prototype,!(!e||!e.isReactComponent)}function FR(e){if(typeof e=="function")return T1(e)?1:0;if(e!=null){if(e=e.$$typeof,e===pg)return 11;if(e===hg)return 14}return 2}function Rl(e,t){var n=e.alternate;return n===null?(n=ra(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function sy(e,t,n,a,c,d){var o=2;if(a=e,typeof e=="function")T1(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case ml:return dp(n.children,c,d,t);case QS:o=8,c|=16;break;case qx:o=8,c|=1;break;case df:return e=ra(12,n,t,c|8),e.elementType=df,e.type=df,e.lanes=d,e;case mf:return e=ra(13,n,t,c),e.type=mf,e.elementType=mf,e.lanes=d,e;case xy:return e=ra(19,n,t,c),e.elementType=xy,e.lanes=d,e;case Xx:return I1(n,c,d,t);case k_:return e=ra(24,n,t,c),e.elementType=k_,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Wx:o=10;break e;case Gx:o=9;break e;case pg:o=11;break e;case hg:o=14;break e;case Hx:o=16,a=null;break e;case Zx:o=22;break e}throw Error(mt(130,e==null?e:typeof e,""))}return t=ra(o,n,t,c),t.elementType=e,t.type=a,t.lanes=d,t}function dp(e,t,n,a){return e=ra(7,e,a,t),e.lanes=n,e}function I1(e,t,n,a){return e=ra(23,e,a,t),e.elementType=Xx,e.lanes=n,e}function O0(e,t,n){return e=ra(6,e,null,t),e.lanes=n,e}function D0(e,t,n){return t=ra(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function UR(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=_0(0),this.expirationTimes=_0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_0(0),this.mutableSourceEagerHydrationData=null}function jR(e,t,n){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Eu,key:a==null?null:""+a,children:e,containerInfo:t,implementation:n}}function Vy(e,t,n,a){var c=t.current,d=jo(),o=El(c);e:if(n){n=n._reactInternals;t:{if(Vu(n)!==n||n.tag!==1)throw Error(mt(170));var v=n;do{switch(v.tag){case 3:v=v.stateNode.context;break t;case 1:if(So(v.type)){v=v.stateNode.__reactInternalMemoizedMergedChildContext;break t}}v=v.return}while(v!==null);throw Error(mt(171))}if(n.tag===1){var x=n.type;if(So(x)){n=NC(n,x,v);break e}}n=v}else n=Pl;return t.context===null?t.context=n:t.pendingContext=n,t=wl(d,o),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),Al(c,t),Sl(c,o,d),o}function B0(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function hA(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function P1(e,t){hA(e,t),(e=e.alternate)&&hA(e,t)}function VR(){return null}function M1(e,t,n){var a=n!=null&&n.hydrationOptions!=null&&n.hydrationOptions.mutableSources||null;if(n=new UR(e,t,n!=null&&n.hydrate===!0),t=ra(3,null,null,t===2?7:t===1?3:0),n.current=t,t.stateNode=n,m1(t),e[Op]=n.current,zC(e.nodeType===8?e.parentNode:e),a)for(e=0;e<a.length;e++){t=a[e];var c=t._getVersion;c=c(t._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[t,c]:n.mutableSourceEagerHydrationData.push(t,c)}this._internalRoot=n}M1.prototype.render=function(e){Vy(e,this._internalRoot,null,null)};M1.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Vy(null,e,null,function(){t[Op]=null})};function nd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function $R(e,t){if(t||(t=e?e.nodeType===9?e.documentElement:e.firstChild:null,t=!(!t||t.nodeType!==1||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new M1(e,0,t?{hydrate:!0}:void 0)}function Ag(e,t,n,a,c){var d=n._reactRootContainer;if(d){var o=d._internalRoot;if(typeof c=="function"){var v=c;c=function(){var E=B0(o);v.call(E)}}Vy(t,o,e,c)}else{if(d=n._reactRootContainer=$R(n,a),o=d._internalRoot,typeof c=="function"){var x=c;c=function(){var E=B0(o);x.call(E)}}mk(function(){Vy(t,o,e,c)})}return B0(o)}hC=function(e){if(e.tag===13){var t=jo();Sl(e,4,t),P1(e,4)}};t1=function(e){if(e.tag===13){var t=jo();Sl(e,67108864,t),P1(e,67108864)}};fC=function(e){if(e.tag===13){var t=jo(),n=El(e);Sl(e,n,t),P1(e,n)}};dC=function(e,t){return t()};B_=function(e,t,n){switch(t){case"input":if(I_(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var a=n[t];if(a!==e&&a.form===e.form){var c=vg(a);if(!c)throw Error(mt(90));YS(a),I_(a,c)}}}break;case"textarea":tC(e,n);break;case"select":t=n.value,t!=null&&ap(e,!!n.multiple,t,!1)}};Jx=dk;lC=function(e,t,n,a,c){var d=cr;cr|=4;try{return Ou(98,e.bind(null,t,n,a,c))}finally{cr=d,cr===0&&(Np(),os())}};Yx=function(){!(cr&49)&&(IR(),Bl())};uC=function(e,t){var n=cr;cr|=2;try{return e(t)}finally{cr=n,cr===0&&(Np(),os())}};function wk(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nd(t))throw Error(mt(200));return jR(e,t,null,n)}var qR={Events:[ed,tp,vg,aC,sC,Bl,{current:!1}]},Zh={findFiberByHostInstance:Cu,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},WR={bundleType:Zh.bundleType,version:Zh.version,rendererPackageName:Zh.rendererPackageName,rendererConfig:Zh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ju.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=pC(e),e===null?null:e.stateNode},findFiberByHostInstance:Zh.findFiberByHostInstance||VR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bm.isDisabled&&Bm.supportsFiber)try{p1=Bm.inject(WR),Mu=Bm}catch{}}aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qR;aa.createPortal=wk;aa.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(mt(188)):Error(mt(268,Object.keys(e)));return e=pC(t),e=e===null?null:e.stateNode,e};aa.flushSync=function(e,t){var n=cr;if(n&48)return e(t);cr|=1;try{if(e)return Ou(99,e.bind(null,t))}finally{cr=n,os()}};aa.hydrate=function(e,t,n){if(!nd(t))throw Error(mt(200));return Ag(null,e,t,!0,n)};aa.render=function(e,t,n){if(!nd(t))throw Error(mt(200));return Ag(null,e,t,!1,n)};aa.unmountComponentAtNode=function(e){if(!nd(e))throw Error(mt(40));return e._reactRootContainer?(mk(function(){Ag(null,null,e,!1,function(){e._reactRootContainer=null,e[Op]=null})}),!0):!1};aa.unstable_batchedUpdates=dk;aa.unstable_createPortal=function(e,t){return wk(e,t,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};aa.unstable_renderSubtreeIntoContainer=function(e,t,n,a){if(!nd(n))throw Error(mt(200));if(e==null||e._reactInternals===void 0)throw Error(mt(38));return Ag(e,t,n,!1,a)};aa.version="17.0.2";function Ak(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ak)}catch(e){console.error(e)}}Ak(),RS.exports=aa;var R1=RS.exports;const uf=Qf(R1);var Ek={exports:{}};(function(e,t){(function(n,a){e.exports=a()})(ba,function(){var n,a,c;function d(o,v){if(!n)n=v;else if(!a)a=v;else{var x="var sharedChunk = {}; ("+n+")(sharedChunk); ("+a+")(sharedChunk);",E={};n(E),c=v(E),typeof window<"u"&&(c.workerUrl=window.URL.createObjectURL(new Blob([x],{type:"text/javascript"})))}}return d(["exports"],function(o){function v(r,i){return r(i={exports:{}},i.exports),i.exports}var x=E;function E(r,i,s,h){this.cx=3*r,this.bx=3*(s-r)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*i,this.by=3*(h-i)-this.cy,this.ay=1-this.cy-this.by,this.p1x=r,this.p1y=h,this.p2x=s,this.p2y=h}E.prototype.sampleCurveX=function(r){return((this.ax*r+this.bx)*r+this.cx)*r},E.prototype.sampleCurveY=function(r){return((this.ay*r+this.by)*r+this.cy)*r},E.prototype.sampleCurveDerivativeX=function(r){return(3*this.ax*r+2*this.bx)*r+this.cx},E.prototype.solveCurveX=function(r,i){var s,h,m,y,_;for(i===void 0&&(i=1e-6),m=r,_=0;_<8;_++){if(y=this.sampleCurveX(m)-r,Math.abs(y)<i)return m;var A=this.sampleCurveDerivativeX(m);if(Math.abs(A)<1e-6)break;m-=y/A}if((m=r)<(s=0))return s;if(m>(h=1))return h;for(;s<h;){if(y=this.sampleCurveX(m),Math.abs(y-r)<i)return m;r>y?s=m:h=m,m=.5*(h-s)+s}return m},E.prototype.solve=function(r,i){return this.sampleCurveY(this.solveCurveX(r,i))};var k=P;function P(r,i){this.x=r,this.y=i}P.prototype={clone:function(){return new P(this.x,this.y)},add:function(r){return this.clone()._add(r)},sub:function(r){return this.clone()._sub(r)},multByPoint:function(r){return this.clone()._multByPoint(r)},divByPoint:function(r){return this.clone()._divByPoint(r)},mult:function(r){return this.clone()._mult(r)},div:function(r){return this.clone()._div(r)},rotate:function(r){return this.clone()._rotate(r)},rotateAround:function(r,i){return this.clone()._rotateAround(r,i)},matMult:function(r){return this.clone()._matMult(r)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(r){return this.x===r.x&&this.y===r.y},dist:function(r){return Math.sqrt(this.distSqr(r))},distSqr:function(r){var i=r.x-this.x,s=r.y-this.y;return i*i+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(r){return Math.atan2(this.y-r.y,this.x-r.x)},angleWith:function(r){return this.angleWithSep(r.x,r.y)},angleWithSep:function(r,i){return Math.atan2(this.x*i-this.y*r,this.x*r+this.y*i)},_matMult:function(r){var i=r[2]*this.x+r[3]*this.y;return this.x=r[0]*this.x+r[1]*this.y,this.y=i,this},_add:function(r){return this.x+=r.x,this.y+=r.y,this},_sub:function(r){return this.x-=r.x,this.y-=r.y,this},_mult:function(r){return this.x*=r,this.y*=r,this},_div:function(r){return this.x/=r,this.y/=r,this},_multByPoint:function(r){return this.x*=r.x,this.y*=r.y,this},_divByPoint:function(r){return this.x/=r.x,this.y/=r.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var r=this.y;return this.y=this.x,this.x=-r,this},_rotate:function(r){var i=Math.cos(r),s=Math.sin(r),h=s*this.x+i*this.y;return this.x=i*this.x-s*this.y,this.y=h,this},_rotateAround:function(r,i){var s=Math.cos(r),h=Math.sin(r),m=i.y+h*(this.x-i.x)+s*(this.y-i.y);return this.x=i.x+s*(this.x-i.x)-h*(this.y-i.y),this.y=m,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},P.convert=function(r){return r instanceof P?r:Array.isArray(r)?new P(r[0],r[1]):r};var T=typeof self<"u"?self:{},W=Math.pow(2,53)-1;function $(r,i,s,h){var m=new x(r,i,s,h);return function(y){return m.solve(y)}}var H=$(.25,.1,.25,1);function D(r,i,s){return Math.min(s,Math.max(i,r))}function U(r,i,s){var h=s-i,m=((r-i)%h+h)%h+i;return m===i?s:m}function q(r){for(var i=[],s=arguments.length-1;s-- >0;)i[s]=arguments[s+1];for(var h=0,m=i;h<m.length;h+=1){var y=m[h];for(var _ in y)r[_]=y[_]}return r}var N=1;function O(){return N++}function te(){return function r(i){return i?(i^16*Math.random()>>i/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,r)}()}function ne(r){return!!r&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(r)}function fe(r,i){r.forEach(function(s){i[s]&&(i[s]=i[s].bind(i))})}function xe(r,i){return r.indexOf(i,r.length-i.length)!==-1}function Te(r,i,s){var h={};for(var m in r)h[m]=i.call(s||this,r[m],m,r);return h}function ve(r,i,s){var h={};for(var m in r)i.call(s||this,r[m],m,r)&&(h[m]=r[m]);return h}function Ee(r){return Array.isArray(r)?r.map(Ee):typeof r=="object"&&r?Te(r,Ee):r}var Y={};function he(r){Y[r]||(typeof console<"u"&&console.warn(r),Y[r]=!0)}function Ne(r,i,s){return(s.y-r.y)*(i.x-r.x)>(i.y-r.y)*(s.x-r.x)}function We(r){for(var i=0,s=0,h=r.length,m=h-1,y=void 0,_=void 0;s<h;m=s++)i+=((_=r[m]).x-(y=r[s]).x)*(y.y+_.y);return i}function we(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function be(r){var i={};if(r.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(h,m,y,_){var A=y||_;return i[m]=!A||A.toLowerCase(),""}),i["max-age"]){var s=parseInt(i["max-age"],10);isNaN(s)?delete i["max-age"]:i["max-age"]=s}return i}var $e=null;function Le(r){if($e==null){var i=r.navigator?r.navigator.userAgent:null;$e=!!r.safari||!(!i||!(/\b(iPad|iPhone|iPod)\b/.test(i)||i.match("Safari")&&!i.match("Chrome")))}return $e}function St(r){try{var i=T[r];return i.setItem("_mapbox_test_",1),i.removeItem("_mapbox_test_"),!0}catch{return!1}}var Ce,qe,gt,ze,st=T.performance&&T.performance.now?T.performance.now.bind(T.performance):Date.now.bind(Date),Wt=T.requestAnimationFrame||T.mozRequestAnimationFrame||T.webkitRequestAnimationFrame||T.msRequestAnimationFrame,Dt=T.cancelAnimationFrame||T.mozCancelAnimationFrame||T.webkitCancelAnimationFrame||T.msCancelAnimationFrame,Ht={now:st,frame:function(r){var i=Wt(r);return{cancel:function(){return Dt(i)}}},getImageData:function(r,i){i===void 0&&(i=0);var s=T.document.createElement("canvas"),h=s.getContext("2d");if(!h)throw new Error("failed to create canvas 2d context");return s.width=r.width,s.height=r.height,h.drawImage(r,0,0,r.width,r.height),h.getImageData(-i,-i,r.width+2*i,r.height+2*i)},resolveURL:function(r){return Ce||(Ce=T.document.createElement("a")),Ce.href=r,Ce.href},hardwareConcurrency:T.navigator&&T.navigator.hardwareConcurrency||4,get devicePixelRatio(){return T.devicePixelRatio},get prefersReducedMotion(){return!!T.matchMedia&&(qe==null&&(qe=T.matchMedia("(prefers-reduced-motion: reduce)")),qe.matches)}},At={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},er={supported:!1,testSupport:function(r){!$t&&ze&&(Zt?nt(r):gt=r)}},$t=!1,Zt=!1;function nt(r){var i=r.createTexture();r.bindTexture(r.TEXTURE_2D,i);try{if(r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,ze),r.isContextLost())return;er.supported=!0}catch{}r.deleteTexture(i),$t=!0}T.document&&((ze=T.document.createElement("img")).onload=function(){gt&&nt(gt),gt=null,Zt=!0},ze.onerror=function(){$t=!0,gt=null},ze.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var Gt="01",or=function(r,i){this._transformRequestFn=r,this._customAccessToken=i,this._createSkuToken()};function zr(r){return r.indexOf("mapbox:")===0}or.prototype._createSkuToken=function(){var r=function(){for(var i="",s=0;s<10;s++)i+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Gt,i].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=r.token,this._skuTokenExpiresAt=r.tokenExpiresAt},or.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},or.prototype.transformRequest=function(r,i){return this._transformRequestFn&&this._transformRequestFn(r,i)||{url:r}},or.prototype.normalizeStyleURL=function(r,i){if(!zr(r))return r;var s=Fr(r);return s.path="/styles/v1"+s.path,this._makeAPIURL(s,this._customAccessToken||i)},or.prototype.normalizeGlyphsURL=function(r,i){if(!zr(r))return r;var s=Fr(r);return s.path="/fonts/v1"+s.path,this._makeAPIURL(s,this._customAccessToken||i)},or.prototype.normalizeSourceURL=function(r,i){if(!zr(r))return r;var s=Fr(r);return s.path="/v4/"+s.authority+".json",s.params.push("secure"),this._makeAPIURL(s,this._customAccessToken||i)},or.prototype.normalizeSpriteURL=function(r,i,s,h){var m=Fr(r);return zr(r)?(m.path="/styles/v1"+m.path+"/sprite"+i+s,this._makeAPIURL(m,this._customAccessToken||h)):(m.path+=""+i+s,Ar(m))},or.prototype.normalizeTileURL=function(r,i){if(this._isSkuTokenExpired()&&this._createSkuToken(),r&&!zr(r))return r;var s=Fr(r);s.path=s.path.replace(/(\.(png|jpg)\d*)(?=$)/,(Ht.devicePixelRatio>=2||i===512?"@2x":"")+(er.supported?".webp":"$1")),s.path=s.path.replace(/^.+\/v4\//,"/"),s.path="/v4"+s.path;var h=this._customAccessToken||function(m){for(var y=0,_=m;y<_.length;y+=1){var A=_[y].match(/^access_token=(.*)$/);if(A)return A[1]}return null}(s.params)||At.ACCESS_TOKEN;return At.REQUIRE_ACCESS_TOKEN&&h&&this._skuToken&&s.params.push("sku="+this._skuToken),this._makeAPIURL(s,h)},or.prototype.canonicalizeTileURL=function(r,i){var s=Fr(r);if(!s.path.match(/(^\/v4\/)/)||!s.path.match(/\.[\w]+$/))return r;var h="mapbox://tiles/";h+=s.path.replace("/v4/","");var m=s.params;return i&&(m=m.filter(function(y){return!y.match(/^access_token=/)})),m.length&&(h+="?"+m.join("&")),h},or.prototype.canonicalizeTileset=function(r,i){for(var s=!!i&&zr(i),h=[],m=0,y=r.tiles||[];m<y.length;m+=1){var _=y[m];sr(_)?h.push(this.canonicalizeTileURL(_,s)):h.push(_)}return h},or.prototype._makeAPIURL=function(r,i){var s="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",h=Fr(At.API_URL);if(r.protocol=h.protocol,r.authority=h.authority,r.protocol==="http"){var m=r.params.indexOf("secure");m>=0&&r.params.splice(m,1)}if(h.path!=="/"&&(r.path=""+h.path+r.path),!At.REQUIRE_ACCESS_TOKEN)return Ar(r);if(!(i=i||At.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+s);if(i[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+s);return r.params=r.params.filter(function(y){return y.indexOf("access_token")===-1}),r.params.push("access_token="+i),Ar(r)};var Dr=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function sr(r){return Dr.test(r)}var Tr=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Fr(r){var i=r.match(Tr);if(!i)throw new Error("Unable to parse URL object");return{protocol:i[1],authority:i[2],path:i[3]||"/",params:i[4]?i[4].split("&"):[]}}function Ar(r){var i=r.params.length?"?"+r.params.join("&"):"";return r.protocol+"://"+r.authority+r.path+i}function en(r){if(!r)return null;var i=r.split(".");if(!i||i.length!==3)return null;try{return JSON.parse(decodeURIComponent(T.atob(i[1]).split("").map(function(s){return"%"+("00"+s.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch{return null}}var Ur=function(r){this.type=r,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Ur.prototype.getStorageKey=function(r){var i,s=en(At.ACCESS_TOKEN);return i=s&&s.u?T.btoa(encodeURIComponent(s.u).replace(/%([0-9A-F]{2})/g,function(h,m){return String.fromCharCode(+("0x"+m))})):At.ACCESS_TOKEN||"",r?"mapbox.eventData."+r+":"+i:"mapbox.eventData:"+i},Ur.prototype.fetchEventData=function(){var r=St("localStorage"),i=this.getStorageKey(),s=this.getStorageKey("uuid");if(r)try{var h=T.localStorage.getItem(i);h&&(this.eventData=JSON.parse(h));var m=T.localStorage.getItem(s);m&&(this.anonId=m)}catch{he("Unable to read from LocalStorage")}},Ur.prototype.saveEventData=function(){var r=St("localStorage"),i=this.getStorageKey(),s=this.getStorageKey("uuid");if(r)try{T.localStorage.setItem(s,this.anonId),Object.keys(this.eventData).length>=1&&T.localStorage.setItem(i,JSON.stringify(this.eventData))}catch{he("Unable to write to LocalStorage")}},Ur.prototype.processRequests=function(r){},Ur.prototype.postEvent=function(r,i,s,h){var m=this;if(At.EVENTS_URL){var y=Fr(At.EVENTS_URL);y.params.push("access_token="+(h||At.ACCESS_TOKEN||""));var _={event:this.type,created:new Date(r).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.3",skuId:Gt,userId:this.anonId},A=i?q(_,i):_,C={url:Ar(y),headers:{"Content-Type":"text/plain"},body:JSON.stringify([A])};this.pendingRequest=pr(C,function(I){m.pendingRequest=null,s(I),m.saveEventData(),m.processRequests(h)})}},Ur.prototype.queueRequest=function(r,i){this.queue.push(r),this.processRequests(i)};var mr,dn,xn=function(r){function i(){r.call(this,"map.load"),this.success={},this.skuToken=""}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.postMapLoadEvent=function(s,h,m,y){this.skuToken=m;var _=!(!y&&!At.ACCESS_TOKEN),A=Array.isArray(s)&&s.some(function(C){return zr(C)||sr(C)});At.EVENTS_URL&&_&&A&&this.queueRequest({id:h,timestamp:Date.now()},y)},i.prototype.processRequests=function(s){var h=this;if(!this.pendingRequest&&this.queue.length!==0){var m=this.queue.shift(),y=m.id,_=m.timestamp;y&&this.success[y]||(this.anonId||this.fetchEventData(),ne(this.anonId)||(this.anonId=te()),this.postEvent(_,{skuToken:this.skuToken},function(A){A||y&&(h.success[y]=!0)},s))}},i}(Ur),Xn=new(function(r){function i(s){r.call(this,"appUserTurnstile"),this._customAccessToken=s}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.postTurnstileEvent=function(s,h){At.EVENTS_URL&&At.ACCESS_TOKEN&&Array.isArray(s)&&s.some(function(m){return zr(m)||sr(m)})&&this.queueRequest(Date.now(),h)},i.prototype.processRequests=function(s){var h=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var m=en(At.ACCESS_TOKEN),y=m?m.u:At.ACCESS_TOKEN,_=y!==this.eventData.tokenU;ne(this.anonId)||(this.anonId=te(),_=!0);var A=this.queue.shift();if(this.eventData.lastSuccess){var C=new Date(this.eventData.lastSuccess),I=new Date(A),R=(A-this.eventData.lastSuccess)/864e5;_=_||R>=1||R<-1||C.getDate()!==I.getDate()}else _=!0;if(!_)return this.processRequests();this.postEvent(A,{"enabled.telemetry":!1},function(L){L||(h.eventData.lastSuccess=A,h.eventData.tokenU=y)},s)}},i}(Ur)),Ir=Xn.postTurnstileEvent.bind(Xn),Lt=new xn,On=Lt.postMapLoadEvent.bind(Lt),Qn=500,Fi=50;function Bt(){T.caches&&!mr&&(mr=T.caches.open("mapbox-tiles"))}function Er(r){var i=r.indexOf("?");return i<0?r:r.slice(0,i)}var ut,Mt=1/0;function ke(){return ut==null&&(ut=T.OffscreenCanvas&&new T.OffscreenCanvas(1,1).getContext("2d")&&typeof T.createImageBitmap=="function"),ut}var Ke={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Ke);var ct=function(r){function i(s,h,m){h===401&&sr(m)&&(s+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),r.call(this,s),this.status=h,this.url=m,this.name=this.constructor.name,this.message=s}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},i}(Error),jt=we()?function(){return self.worker&&self.worker.referrer}:function(){return(T.location.protocol==="blob:"?T.parent:T).location.href},tr,Qt,yr=function(r,i){if(!(/^file:/.test(s=r.url)||/^file:/.test(jt())&&!/^\w+:/.test(s))){if(T.fetch&&T.Request&&T.AbortController&&T.Request.prototype.hasOwnProperty("signal"))return function(h,m){var y,_=new T.AbortController,A=new T.Request(h.url,{method:h.method||"GET",body:h.body,credentials:h.credentials,headers:h.headers,referrer:jt(),signal:_.signal}),C=!1,I=!1,R=(y=A.url).indexOf("sku=")>0&&sr(y);h.type==="json"&&A.headers.set("Accept","application/json");var L=function(G,oe,ae){if(!I){if(G&&G.message!=="SecurityError"&&he(G),oe&&ae)return j(oe);var ge=Date.now();T.fetch(A).then(function(pe){if(pe.ok){var Se=R?pe.clone():null;return j(pe,Se,ge)}return m(new ct(pe.statusText,pe.status,h.url))}).catch(function(pe){pe.code!==20&&m(new Error(pe.message))})}},j=function(G,oe,ae){(h.type==="arrayBuffer"?G.arrayBuffer():h.type==="json"?G.json():G.text()).then(function(ge){I||(oe&&ae&&function(pe,Se,Re){if(Bt(),mr){var Oe={status:Se.status,statusText:Se.statusText,headers:new T.Headers};Se.headers.forEach(function(Ge,Je){return Oe.headers.set(Je,Ge)});var Be=be(Se.headers.get("Cache-Control")||"");Be["no-store"]||(Be["max-age"]&&Oe.headers.set("Expires",new Date(Re+1e3*Be["max-age"]).toUTCString()),new Date(Oe.headers.get("Expires")).getTime()-Re<42e4||function(Ge,Je){if(dn===void 0)try{new Response(new ReadableStream),dn=!0}catch{dn=!1}dn?Je(Ge.body):Ge.blob().then(Je)}(Se,function(Ge){var Je=new T.Response(Ge,Oe);Bt(),mr&&mr.then(function(tt){return tt.put(Er(pe.url),Je)}).catch(function(tt){return he(tt.message)})}))}}(A,oe,ae),C=!0,m(null,ge,G.headers.get("Cache-Control"),G.headers.get("Expires")))}).catch(function(ge){I||m(new Error(ge.message))})};return R?function(G,oe){if(Bt(),!mr)return oe(null);var ae=Er(G.url);mr.then(function(ge){ge.match(ae).then(function(pe){var Se=function(Re){if(!Re)return!1;var Oe=new Date(Re.headers.get("Expires")||0),Be=be(Re.headers.get("Cache-Control")||"");return Oe>Date.now()&&!Be["no-cache"]}(pe);ge.delete(ae),Se&&ge.put(ae,pe.clone()),oe(null,pe,Se)}).catch(oe)}).catch(oe)}(A,L):L(null,null),{cancel:function(){I=!0,C||_.abort()}}}(r,i);if(we()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",r,i,void 0,!0)}var s;return function(h,m){var y=new T.XMLHttpRequest;for(var _ in y.open(h.method||"GET",h.url,!0),h.type==="arrayBuffer"&&(y.responseType="arraybuffer"),h.headers)y.setRequestHeader(_,h.headers[_]);return h.type==="json"&&(y.responseType="text",y.setRequestHeader("Accept","application/json")),y.withCredentials=h.credentials==="include",y.onerror=function(){m(new Error(y.statusText))},y.onload=function(){if((y.status>=200&&y.status<300||y.status===0)&&y.response!==null){var A=y.response;if(h.type==="json")try{A=JSON.parse(y.response)}catch(C){return m(C)}m(null,A,y.getResponseHeader("Cache-Control"),y.getResponseHeader("Expires"))}else m(new ct(y.statusText,y.status,h.url))},y.send(h.body),{cancel:function(){return y.abort()}}}(r,i)},Sr=function(r,i){return yr(q(r,{type:"arrayBuffer"}),i)},pr=function(r,i){return yr(q(r,{method:"POST"}),i)},z="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";tr=[],Qt=0;var F=function(r,i){if(er.supported&&(r.headers||(r.headers={}),r.headers.accept="image/webp,*/*"),Qt>=At.MAX_PARALLEL_IMAGE_REQUESTS){var s={requestParameters:r,callback:i,cancelled:!1,cancel:function(){this.cancelled=!0}};return tr.push(s),s}Qt++;var h=!1,m=function(){if(!h)for(h=!0,Qt--;tr.length&&Qt<At.MAX_PARALLEL_IMAGE_REQUESTS;){var _=tr.shift();_.cancelled||(_.cancel=F(_.requestParameters,_.callback).cancel)}},y=Sr(r,function(_,A,C,I){m(),_?i(_):A&&(ke()?function(R,L){var j=new T.Blob([new Uint8Array(R)],{type:"image/png"});T.createImageBitmap(j).then(function(G){L(null,G)}).catch(function(G){L(new Error("Could not load image because of "+G.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(A,i):function(R,L,j,G){var oe=new T.Image,ae=T.URL;oe.onload=function(){L(null,oe),ae.revokeObjectURL(oe.src),oe.onload=null,T.requestAnimationFrame(function(){oe.src=z})},oe.onerror=function(){return L(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var ge=new T.Blob([new Uint8Array(R)],{type:"image/png"});oe.cacheControl=j,oe.expires=G,oe.src=R.byteLength?ae.createObjectURL(ge):z}(A,i,C,I))});return{cancel:function(){y.cancel(),m()}}};function V(r,i,s){s[r]&&s[r].indexOf(i)!==-1||(s[r]=s[r]||[],s[r].push(i))}function X(r,i,s){if(s&&s[r]){var h=s[r].indexOf(i);h!==-1&&s[r].splice(h,1)}}var re=function(r,i){i===void 0&&(i={}),q(this,i),this.type=r},ce=function(r){function i(s,h){h===void 0&&(h={}),r.call(this,"error",q({error:s},h))}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i}(re),de=function(){};de.prototype.on=function(r,i){return this._listeners=this._listeners||{},V(r,i,this._listeners),this},de.prototype.off=function(r,i){return X(r,i,this._listeners),X(r,i,this._oneTimeListeners),this},de.prototype.once=function(r,i){return this._oneTimeListeners=this._oneTimeListeners||{},V(r,i,this._oneTimeListeners),this},de.prototype.fire=function(r,i){typeof r=="string"&&(r=new re(r,i||{}));var s=r.type;if(this.listens(s)){r.target=this;for(var h=0,m=this._listeners&&this._listeners[s]?this._listeners[s].slice():[];h<m.length;h+=1)m[h].call(this,r);for(var y=0,_=this._oneTimeListeners&&this._oneTimeListeners[s]?this._oneTimeListeners[s].slice():[];y<_.length;y+=1){var A=_[y];X(s,A,this._oneTimeListeners),A.call(this,r)}var C=this._eventedParent;C&&(q(r,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),C.fire(r))}else r instanceof ce&&console.error(r.error);return this},de.prototype.listens=function(r){return this._listeners&&this._listeners[r]&&this._listeners[r].length>0||this._oneTimeListeners&&this._oneTimeListeners[r]&&this._oneTimeListeners[r].length>0||this._eventedParent&&this._eventedParent.listens(r)},de.prototype.setEventedParent=function(r,i){return this._eventedParent=r,this._eventedParentData=i,this};var Z={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},ue=function(r,i,s,h){this.message=(r?r+": ":"")+s,h&&(this.identifier=h),i!=null&&i.__line__&&(this.line=i.__line__)};function Me(r){var i=r.value;return i?[new ue(r.key,i,"constants have been deprecated as of v8")]:[]}function Ze(r){for(var i=[],s=arguments.length-1;s-- >0;)i[s]=arguments[s+1];for(var h=0,m=i;h<m.length;h+=1){var y=m[h];for(var _ in y)r[_]=y[_]}return r}function Qe(r){return r instanceof Number||r instanceof String||r instanceof Boolean?r.valueOf():r}function je(r){if(Array.isArray(r))return r.map(je);if(r instanceof Object&&!(r instanceof Number||r instanceof String||r instanceof Boolean)){var i={};for(var s in r)i[s]=je(r[s]);return i}return Qe(r)}var Xe=function(r){function i(s,h){r.call(this,h),this.message=h,this.key=s}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i}(Error),xt=function(r,i){i===void 0&&(i=[]),this.parent=r,this.bindings={};for(var s=0,h=i;s<h.length;s+=1){var m=h[s];this.bindings[m[0]]=m[1]}};xt.prototype.concat=function(r){return new xt(this,r)},xt.prototype.get=function(r){if(this.bindings[r])return this.bindings[r];if(this.parent)return this.parent.get(r);throw new Error(r+" not found in scope.")},xt.prototype.has=function(r){return!!this.bindings[r]||!!this.parent&&this.parent.has(r)};var vt={kind:"null"},Ve={kind:"number"},ft={kind:"string"},it={kind:"boolean"},at={kind:"color"},rr={kind:"object"},pt={kind:"value"},gr={kind:"collator"},$r={kind:"formatted"},lr={kind:"resolvedImage"};function Pr(r,i){return{kind:"array",itemType:r,N:i}}function _r(r){if(r.kind==="array"){var i=_r(r.itemType);return typeof r.N=="number"?"array<"+i+", "+r.N+">":r.itemType.kind==="value"?"array":"array<"+i+">"}return r.kind}var yi=[vt,Ve,ft,it,at,$r,rr,Pr(pt),lr];function Lr(r,i){if(i.kind==="error")return null;if(r.kind==="array"){if(i.kind==="array"&&(i.N===0&&i.itemType.kind==="value"||!Lr(r.itemType,i.itemType))&&(typeof r.N!="number"||r.N===i.N))return null}else{if(r.kind===i.kind)return null;if(r.kind==="value"){for(var s=0,h=yi;s<h.length;s+=1)if(!Lr(h[s],i))return null}}return"Expected "+_r(r)+" but found "+_r(i)+" instead."}function bn(r,i){return i.some(function(s){return s.kind===r.kind})}function jr(r,i){return i.some(function(s){return s==="null"?r===null:s==="array"?Array.isArray(r):s==="object"?r&&!Array.isArray(r)&&typeof r=="object":s===typeof r})}var dr=v(function(r,i){var s={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function h(A){return(A=Math.round(A))<0?0:A>255?255:A}function m(A){return h(A[A.length-1]==="%"?parseFloat(A)/100*255:parseInt(A))}function y(A){return(C=A[A.length-1]==="%"?parseFloat(A)/100:parseFloat(A))<0?0:C>1?1:C;var C}function _(A,C,I){return I<0?I+=1:I>1&&(I-=1),6*I<1?A+(C-A)*I*6:2*I<1?C:3*I<2?A+(C-A)*(2/3-I)*6:A}try{i.parseCSSColor=function(A){var C,I=A.replace(/ /g,"").toLowerCase();if(I in s)return s[I].slice();if(I[0]==="#")return I.length===4?(C=parseInt(I.substr(1),16))>=0&&C<=4095?[(3840&C)>>4|(3840&C)>>8,240&C|(240&C)>>4,15&C|(15&C)<<4,1]:null:I.length===7&&(C=parseInt(I.substr(1),16))>=0&&C<=16777215?[(16711680&C)>>16,(65280&C)>>8,255&C,1]:null;var R=I.indexOf("("),L=I.indexOf(")");if(R!==-1&&L+1===I.length){var j=I.substr(0,R),G=I.substr(R+1,L-(R+1)).split(","),oe=1;switch(j){case"rgba":if(G.length!==4)return null;oe=y(G.pop());case"rgb":return G.length!==3?null:[m(G[0]),m(G[1]),m(G[2]),oe];case"hsla":if(G.length!==4)return null;oe=y(G.pop());case"hsl":if(G.length!==3)return null;var ae=(parseFloat(G[0])%360+360)%360/360,ge=y(G[1]),pe=y(G[2]),Se=pe<=.5?pe*(ge+1):pe+ge-pe*ge,Re=2*pe-Se;return[h(255*_(Re,Se,ae+1/3)),h(255*_(Re,Se,ae)),h(255*_(Re,Se,ae-1/3)),oe];default:return null}}return null}}catch{}}).parseCSSColor,Mr=function(r,i,s,h){h===void 0&&(h=1),this.r=r,this.g=i,this.b=s,this.a=h};Mr.parse=function(r){if(r){if(r instanceof Mr)return r;if(typeof r=="string"){var i=dr(r);if(i)return new Mr(i[0]/255*i[3],i[1]/255*i[3],i[2]/255*i[3],i[3])}}},Mr.prototype.toString=function(){var r=this.toArray(),i=r[1],s=r[2],h=r[3];return"rgba("+Math.round(r[0])+","+Math.round(i)+","+Math.round(s)+","+h+")"},Mr.prototype.toArray=function(){var r=this.a;return r===0?[0,0,0,0]:[255*this.r/r,255*this.g/r,255*this.b/r,r]},Mr.black=new Mr(0,0,0,1),Mr.white=new Mr(1,1,1,1),Mr.transparent=new Mr(0,0,0,0),Mr.red=new Mr(1,0,0,1);var Ti=function(r,i,s){this.sensitivity=r?i?"variant":"case":i?"accent":"base",this.locale=s,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Ti.prototype.compare=function(r,i){return this.collator.compare(r,i)},Ti.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Fl=function(r,i,s,h,m){this.text=r,this.image=i,this.scale=s,this.fontStack=h,this.textColor=m},Jn=function(r){this.sections=r};Jn.fromString=function(r){return new Jn([new Fl(r,null,null,null,null)])},Jn.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(r){return r.text.length!==0||r.image&&r.image.name.length!==0})},Jn.factory=function(r){return r instanceof Jn?r:Jn.fromString(r)},Jn.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(r){return r.text}).join("")},Jn.prototype.serialize=function(){for(var r=["format"],i=0,s=this.sections;i<s.length;i+=1){var h=s[i];if(h.image)r.push(["image",h.image.name]);else{r.push(h.text);var m={};h.fontStack&&(m["text-font"]=["literal",h.fontStack.split(",")]),h.scale&&(m["font-scale"]=h.scale),h.textColor&&(m["text-color"]=["rgba"].concat(h.textColor.toArray())),r.push(m)}}return r};var Ii=function(r){this.name=r.name,this.available=r.available};function jp(r,i,s,h){return typeof r=="number"&&r>=0&&r<=255&&typeof i=="number"&&i>=0&&i<=255&&typeof s=="number"&&s>=0&&s<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:"Invalid rgba value ["+[r,i,s,h].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof h=="number"?[r,i,s,h]:[r,i,s]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function Ul(r){if(r===null||typeof r=="string"||typeof r=="boolean"||typeof r=="number"||r instanceof Mr||r instanceof Ti||r instanceof Jn||r instanceof Ii)return!0;if(Array.isArray(r)){for(var i=0,s=r;i<s.length;i+=1)if(!Ul(s[i]))return!1;return!0}if(typeof r=="object"){for(var h in r)if(!Ul(r[h]))return!1;return!0}return!1}function wn(r){if(r===null)return vt;if(typeof r=="string")return ft;if(typeof r=="boolean")return it;if(typeof r=="number")return Ve;if(r instanceof Mr)return at;if(r instanceof Ti)return gr;if(r instanceof Jn)return $r;if(r instanceof Ii)return lr;if(Array.isArray(r)){for(var i,s=r.length,h=0,m=r;h<m.length;h+=1){var y=wn(m[h]);if(i){if(i===y)continue;i=pt;break}i=y}return Pr(i||pt,s)}return rr}function jl(r){var i=typeof r;return r===null?"":i==="string"||i==="number"||i==="boolean"?String(r):r instanceof Mr||r instanceof Jn||r instanceof Ii?r.toString():JSON.stringify(r)}Ii.prototype.toString=function(){return this.name},Ii.fromString=function(r){return r?new Ii({name:r,available:!1}):null},Ii.prototype.serialize=function(){return["image",this.name]};var gi=function(r,i){this.type=r,this.value=i};gi.parse=function(r,i){if(r.length!==2)return i.error("'literal' expression requires exactly one argument, but found "+(r.length-1)+" instead.");if(!Ul(r[1]))return i.error("invalid value");var s=r[1],h=wn(s),m=i.expectedType;return h.kind!=="array"||h.N!==0||!m||m.kind!=="array"||typeof m.N=="number"&&m.N!==0||(h=m),new gi(h,s)},gi.prototype.evaluate=function(){return this.value},gi.prototype.eachChild=function(){},gi.prototype.outputDefined=function(){return!0},gi.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Mr?["rgba"].concat(this.value.toArray()):this.value instanceof Jn?this.value.serialize():this.value};var Yn=function(r){this.name="ExpressionEvaluationError",this.message=r};Yn.prototype.toJSON=function(){return this.message};var uo={string:ft,number:Ve,boolean:it,object:rr},tn=function(r,i){this.type=r,this.args=i};tn.parse=function(r,i){if(r.length<2)return i.error("Expected at least one argument.");var s,h=1,m=r[0];if(m==="array"){var y,_;if(r.length>2){var A=r[1];if(typeof A!="string"||!(A in uo)||A==="object")return i.error('The item type argument of "array" must be one of string, number, boolean',1);y=uo[A],h++}else y=pt;if(r.length>3){if(r[2]!==null&&(typeof r[2]!="number"||r[2]<0||r[2]!==Math.floor(r[2])))return i.error('The length argument to "array" must be a positive integer literal',2);_=r[2],h++}s=Pr(y,_)}else s=uo[m];for(var C=[];h<r.length;h++){var I=i.parse(r[h],h,pt);if(!I)return null;C.push(I)}return new tn(s,C)},tn.prototype.evaluate=function(r){for(var i=0;i<this.args.length;i++){var s=this.args[i].evaluate(r);if(!Lr(this.type,wn(s)))return s;if(i===this.args.length-1)throw new Yn("Expected value to be of type "+_r(this.type)+", but found "+_r(wn(s))+" instead.")}return null},tn.prototype.eachChild=function(r){this.args.forEach(r)},tn.prototype.outputDefined=function(){return this.args.every(function(r){return r.outputDefined()})},tn.prototype.serialize=function(){var r=this.type,i=[r.kind];if(r.kind==="array"){var s=r.itemType;if(s.kind==="string"||s.kind==="number"||s.kind==="boolean"){i.push(s.kind);var h=r.N;(typeof h=="number"||this.args.length>1)&&i.push(h)}}return i.concat(this.args.map(function(m){return m.serialize()}))};var Mo=function(r){this.type=$r,this.sections=r};Mo.parse=function(r,i){if(r.length<2)return i.error("Expected at least one argument.");var s=r[1];if(!Array.isArray(s)&&typeof s=="object")return i.error("First argument must be an image or text section.");for(var h=[],m=!1,y=1;y<=r.length-1;++y){var _=r[y];if(m&&typeof _=="object"&&!Array.isArray(_)){m=!1;var A=null;if(_["font-scale"]&&!(A=i.parse(_["font-scale"],1,Ve)))return null;var C=null;if(_["text-font"]&&!(C=i.parse(_["text-font"],1,Pr(ft))))return null;var I=null;if(_["text-color"]&&!(I=i.parse(_["text-color"],1,at)))return null;var R=h[h.length-1];R.scale=A,R.font=C,R.textColor=I}else{var L=i.parse(r[y],1,pt);if(!L)return null;var j=L.type.kind;if(j!=="string"&&j!=="value"&&j!=="null"&&j!=="resolvedImage")return i.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");m=!0,h.push({content:L,scale:null,font:null,textColor:null})}}return new Mo(h)},Mo.prototype.evaluate=function(r){return new Jn(this.sections.map(function(i){var s=i.content.evaluate(r);return wn(s)===lr?new Fl("",s,null,null,null):new Fl(jl(s),null,i.scale?i.scale.evaluate(r):null,i.font?i.font.evaluate(r).join(","):null,i.textColor?i.textColor.evaluate(r):null)}))},Mo.prototype.eachChild=function(r){for(var i=0,s=this.sections;i<s.length;i+=1){var h=s[i];r(h.content),h.scale&&r(h.scale),h.font&&r(h.font),h.textColor&&r(h.textColor)}},Mo.prototype.outputDefined=function(){return!1},Mo.prototype.serialize=function(){for(var r=["format"],i=0,s=this.sections;i<s.length;i+=1){var h=s[i];r.push(h.content.serialize());var m={};h.scale&&(m["font-scale"]=h.scale.serialize()),h.font&&(m["text-font"]=h.font.serialize()),h.textColor&&(m["text-color"]=h.textColor.serialize()),r.push(m)}return r};var ro=function(r){this.type=lr,this.input=r};ro.parse=function(r,i){if(r.length!==2)return i.error("Expected two arguments.");var s=i.parse(r[1],1,ft);return s?new ro(s):i.error("No image name provided.")},ro.prototype.evaluate=function(r){var i=this.input.evaluate(r),s=Ii.fromString(i);return s&&r.availableImages&&(s.available=r.availableImages.indexOf(i)>-1),s},ro.prototype.eachChild=function(r){r(this.input)},ro.prototype.outputDefined=function(){return!1},ro.prototype.serialize=function(){return["image",this.input.serialize()]};var yd={"to-boolean":it,"to-color":at,"to-number":Ve,"to-string":ft},co=function(r,i){this.type=r,this.args=i};co.parse=function(r,i){if(r.length<2)return i.error("Expected at least one argument.");var s=r[0];if((s==="to-boolean"||s==="to-string")&&r.length!==2)return i.error("Expected one argument.");for(var h=yd[s],m=[],y=1;y<r.length;y++){var _=i.parse(r[y],y,pt);if(!_)return null;m.push(_)}return new co(h,m)},co.prototype.evaluate=function(r){if(this.type.kind==="boolean")return!!this.args[0].evaluate(r);if(this.type.kind==="color"){for(var i,s,h=0,m=this.args;h<m.length;h+=1){if(s=null,(i=m[h].evaluate(r))instanceof Mr)return i;if(typeof i=="string"){var y=r.parseColor(i);if(y)return y}else if(Array.isArray(i)&&!(s=i.length<3||i.length>4?"Invalid rbga value "+JSON.stringify(i)+": expected an array containing either three or four numeric values.":jp(i[0],i[1],i[2],i[3])))return new Mr(i[0]/255,i[1]/255,i[2]/255,i[3])}throw new Yn(s||"Could not parse color from value '"+(typeof i=="string"?i:String(JSON.stringify(i)))+"'")}if(this.type.kind==="number"){for(var _=null,A=0,C=this.args;A<C.length;A+=1){if((_=C[A].evaluate(r))===null)return 0;var I=Number(_);if(!isNaN(I))return I}throw new Yn("Could not convert "+JSON.stringify(_)+" to number.")}return this.type.kind==="formatted"?Jn.fromString(jl(this.args[0].evaluate(r))):this.type.kind==="resolvedImage"?Ii.fromString(jl(this.args[0].evaluate(r))):jl(this.args[0].evaluate(r))},co.prototype.eachChild=function(r){this.args.forEach(r)},co.prototype.outputDefined=function(){return this.args.every(function(r){return r.outputDefined()})},co.prototype.serialize=function(){if(this.type.kind==="formatted")return new Mo([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new ro(this.args[0]).serialize();var r=["to-"+this.type.kind];return this.eachChild(function(i){r.push(i.serialize())}),r};var wv=["Unknown","Point","LineString","Polygon"],ua=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};ua.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},ua.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?wv[this.feature.type]:this.feature.type:null},ua.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},ua.prototype.canonicalID=function(){return this.canonical},ua.prototype.properties=function(){return this.feature&&this.feature.properties||{}},ua.prototype.parseColor=function(r){var i=this._parseColorCache[r];return i||(i=this._parseColorCache[r]=Mr.parse(r)),i};var si=function(r,i,s,h){this.name=r,this.type=i,this._evaluate=s,this.args=h};si.prototype.evaluate=function(r){return this._evaluate(r,this.args)},si.prototype.eachChild=function(r){this.args.forEach(r)},si.prototype.outputDefined=function(){return!1},si.prototype.serialize=function(){return[this.name].concat(this.args.map(function(r){return r.serialize()}))},si.parse=function(r,i){var s,h=r[0],m=si.definitions[h];if(!m)return i.error('Unknown expression "'+h+'". If you wanted a literal array, use ["literal", [...]].',0);for(var y=Array.isArray(m)?m[0]:m.type,_=Array.isArray(m)?[[m[1],m[2]]]:m.overloads,A=_.filter(function(Tt){var ht=Tt[0];return!Array.isArray(ht)||ht.length===r.length-1}),C=null,I=0,R=A;I<R.length;I+=1){var L=R[I],j=L[0],G=L[1];C=new Ta(i.registry,i.path,null,i.scope);for(var oe=[],ae=!1,ge=1;ge<r.length;ge++){var pe=r[ge],Se=Array.isArray(j)?j[ge-1]:j.type,Re=C.parse(pe,1+oe.length,Se);if(!Re){ae=!0;break}oe.push(Re)}if(!ae)if(Array.isArray(j)&&j.length!==oe.length)C.error("Expected "+j.length+" arguments, but found "+oe.length+" instead.");else{for(var Oe=0;Oe<oe.length;Oe++){var Be=Array.isArray(j)?j[Oe]:j.type,Ge=oe[Oe];C.concat(Oe+1).checkSubtype(Be,Ge.type)}if(C.errors.length===0)return new si(h,y,G,oe)}}if(A.length===1)(s=i.errors).push.apply(s,C.errors);else{for(var Je=(A.length?A:_).map(function(Tt){var ht;return ht=Tt[0],Array.isArray(ht)?"("+ht.map(_r).join(", ")+")":"("+_r(ht.type)+"...)"}).join(" | "),tt=[],Et=1;Et<r.length;Et++){var lt=i.parse(r[Et],1+tt.length);if(!lt)return null;tt.push(_r(lt.type))}i.error("Expected arguments of type "+Je+", but found ("+tt.join(", ")+") instead.")}return null},si.register=function(r,i){for(var s in si.definitions=i,i)r[s]=si};var Go=function(r,i,s){this.type=gr,this.locale=s,this.caseSensitive=r,this.diacriticSensitive=i};function vi(r,i){r[0]=Math.min(r[0],i[0]),r[1]=Math.min(r[1],i[1]),r[2]=Math.max(r[2],i[0]),r[3]=Math.max(r[3],i[1])}function ls(r,i){return!(r[0]<=i[0]||r[2]>=i[2]||r[1]<=i[1]||r[3]>=i[3])}function Av(r,i){var s=(180+r[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r[1]*Math.PI/360)))/360,m=Math.pow(2,i.z);return[Math.round(s*m*8192),Math.round(h*m*8192)]}function Ev(r,i,s){return i[1]>r[1]!=s[1]>r[1]&&r[0]<(s[0]-i[0])*(r[1]-i[1])/(s[1]-i[1])+i[0]}function Vp(r,i){for(var s,h,m,y,_,A,C,I=!1,R=0,L=i.length;R<L;R++)for(var j=i[R],G=0,oe=j.length;G<oe-1;G++){if((y=(s=r)[0]-(h=j[G])[0])*(C=s[1]-(m=j[G+1])[1])-(A=s[0]-m[0])*(_=s[1]-h[1])==0&&y*A<=0&&_*C<=0)return!1;Ev(r,j[G],j[G+1])&&(I=!I)}return I}function Sv(r,i){for(var s=0;s<i.length;s++)if(Vp(r,i[s]))return!0;return!1}function gd(r,i,s,h){var m=h[0]-s[0],y=h[1]-s[1],_=(r[0]-s[0])*y-m*(r[1]-s[1]),A=(i[0]-s[0])*y-m*(i[1]-s[1]);return _>0&&A<0||_<0&&A>0}function Cv(r,i,s){for(var h=0,m=s;h<m.length;h+=1)for(var y=m[h],_=0;_<y.length-1;++_)if((L=[(R=y[_+1])[0]-(I=y[_])[0],R[1]-I[1]])[0]*(j=[(C=i)[0]-(A=r)[0],C[1]-A[1]])[1]-L[1]*j[0]!=0&&gd(A,C,I,R)&&gd(I,R,A,C))return!0;var A,C,I,R,L,j;return!1}function vd(r,i){for(var s=0;s<r.length;++s)if(!Vp(r[s],i))return!1;for(var h=0;h<r.length-1;++h)if(Cv(r[h],r[h+1],i))return!1;return!0}function _d(r,i){for(var s=0;s<i.length;s++)if(vd(r,i[s]))return!0;return!1}function Zs(r,i,s){for(var h=[],m=0;m<r.length;m++){for(var y=[],_=0;_<r[m].length;_++){var A=Av(r[m][_],s);vi(i,A),y.push(A)}h.push(y)}return h}function $p(r,i,s){for(var h=[],m=0;m<r.length;m++){var y=Zs(r[m],i,s);h.push(y)}return h}function Vl(r,i,s,h){if(r[0]<s[0]||r[0]>s[2]){var m=.5*h,y=r[0]-s[0]>m?-h:s[0]-r[0]>m?h:0;y===0&&(y=r[0]-s[2]>m?-h:s[2]-r[0]>m?h:0),r[0]+=y}vi(i,r)}function xd(r,i,s,h){for(var m=8192*Math.pow(2,h.z),y=[8192*h.x,8192*h.y],_=[],A=0,C=r;A<C.length;A+=1)for(var I=0,R=C[A];I<R.length;I+=1){var L=R[I],j=[L.x+y[0],L.y+y[1]];Vl(j,i,s,m),_.push(j)}return _}function qu(r,i,s,h){for(var m,y=8192*Math.pow(2,h.z),_=[8192*h.x,8192*h.y],A=[],C=0,I=r;C<I.length;C+=1){for(var R=[],L=0,j=I[C];L<j.length;L+=1){var G=j[L],oe=[G.x+_[0],G.y+_[1]];vi(i,oe),R.push(oe)}A.push(R)}if(i[2]-i[0]<=y/2){(m=i)[0]=m[1]=1/0,m[2]=m[3]=-1/0;for(var ae=0,ge=A;ae<ge.length;ae+=1)for(var pe=0,Se=ge[ae];pe<Se.length;pe+=1)Vl(Se[pe],i,s,y)}return A}Go.parse=function(r,i){if(r.length!==2)return i.error("Expected one argument.");var s=r[1];if(typeof s!="object"||Array.isArray(s))return i.error("Collator options argument must be an object.");var h=i.parse(s["case-sensitive"]!==void 0&&s["case-sensitive"],1,it);if(!h)return null;var m=i.parse(s["diacritic-sensitive"]!==void 0&&s["diacritic-sensitive"],1,it);if(!m)return null;var y=null;return s.locale&&!(y=i.parse(s.locale,1,ft))?null:new Go(h,m,y)},Go.prototype.evaluate=function(r){return new Ti(this.caseSensitive.evaluate(r),this.diacriticSensitive.evaluate(r),this.locale?this.locale.evaluate(r):null)},Go.prototype.eachChild=function(r){r(this.caseSensitive),r(this.diacriticSensitive),this.locale&&r(this.locale)},Go.prototype.outputDefined=function(){return!1},Go.prototype.serialize=function(){var r={};return r["case-sensitive"]=this.caseSensitive.serialize(),r["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(r.locale=this.locale.serialize()),["collator",r]};var po=function(r,i){this.type=it,this.geojson=r,this.geometries=i};function Sa(r){if(r instanceof si&&(r.name==="get"&&r.args.length===1||r.name==="feature-state"||r.name==="has"&&r.args.length===1||r.name==="properties"||r.name==="geometry-type"||r.name==="id"||/^filter-/.test(r.name))||r instanceof po)return!1;var i=!0;return r.eachChild(function(s){i&&!Sa(s)&&(i=!1)}),i}function Ca(r){if(r instanceof si&&r.name==="feature-state")return!1;var i=!0;return r.eachChild(function(s){i&&!Ca(s)&&(i=!1)}),i}function us(r,i){if(r instanceof si&&i.indexOf(r.name)>=0)return!1;var s=!0;return r.eachChild(function(h){s&&!us(h,i)&&(s=!1)}),s}po.parse=function(r,i){if(r.length!==2)return i.error("'within' expression requires exactly one argument, but found "+(r.length-1)+" instead.");if(Ul(r[1])){var s=r[1];if(s.type==="FeatureCollection")for(var h=0;h<s.features.length;++h){var m=s.features[h].geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new po(s,s.features[h].geometry)}else if(s.type==="Feature"){var y=s.geometry.type;if(y==="Polygon"||y==="MultiPolygon")return new po(s,s.geometry)}else if(s.type==="Polygon"||s.type==="MultiPolygon")return new po(s,s)}return i.error("'within' expression requires valid geojson object that contains polygon geometry type.")},po.prototype.evaluate=function(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(i,s){var h=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],y=i.canonicalID();if(s.type==="Polygon"){var _=Zs(s.coordinates,m,y),A=xd(i.geometry(),h,m,y);if(!ls(h,m))return!1;for(var C=0,I=A;C<I.length;C+=1)if(!Vp(I[C],_))return!1}if(s.type==="MultiPolygon"){var R=$p(s.coordinates,m,y),L=xd(i.geometry(),h,m,y);if(!ls(h,m))return!1;for(var j=0,G=L;j<G.length;j+=1)if(!Sv(G[j],R))return!1}return!0}(r,this.geometries);if(r.geometryType()==="LineString")return function(i,s){var h=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],y=i.canonicalID();if(s.type==="Polygon"){var _=Zs(s.coordinates,m,y),A=qu(i.geometry(),h,m,y);if(!ls(h,m))return!1;for(var C=0,I=A;C<I.length;C+=1)if(!vd(I[C],_))return!1}if(s.type==="MultiPolygon"){var R=$p(s.coordinates,m,y),L=qu(i.geometry(),h,m,y);if(!ls(h,m))return!1;for(var j=0,G=L;j<G.length;j+=1)if(!_d(G[j],R))return!1}return!0}(r,this.geometries)}return!1},po.prototype.eachChild=function(){},po.prototype.outputDefined=function(){return!0},po.prototype.serialize=function(){return["within",this.geojson]};var ka=function(r,i){this.type=i.type,this.name=r,this.boundExpression=i};ka.parse=function(r,i){if(r.length!==2||typeof r[1]!="string")return i.error("'var' expression requires exactly one string literal argument.");var s=r[1];return i.scope.has(s)?new ka(s,i.scope.get(s)):i.error('Unknown variable "'+s+'". Make sure "'+s+'" has been bound in an enclosing "let" expression before using it.',1)},ka.prototype.evaluate=function(r){return this.boundExpression.evaluate(r)},ka.prototype.eachChild=function(){},ka.prototype.outputDefined=function(){return!1},ka.prototype.serialize=function(){return["var",this.name]};var Ta=function(r,i,s,h,m){i===void 0&&(i=[]),h===void 0&&(h=new xt),m===void 0&&(m=[]),this.registry=r,this.path=i,this.key=i.map(function(y){return"["+y+"]"}).join(""),this.scope=h,this.errors=m,this.expectedType=s};function Wu(r,i){for(var s,h=r.length-1,m=0,y=h,_=0;m<=y;)if((s=r[_=Math.floor((m+y)/2)])<=i){if(_===h||i<r[_+1])return _;m=_+1}else{if(!(s>i))throw new Yn("Input is not a number.");y=_-1}return 0}Ta.prototype.parse=function(r,i,s,h,m){return m===void 0&&(m={}),i?this.concat(i,s,h)._parse(r,m):this._parse(r,m)},Ta.prototype._parse=function(r,i){function s(I,R,L){return L==="assert"?new tn(R,[I]):L==="coerce"?new co(R,[I]):I}if(r!==null&&typeof r!="string"&&typeof r!="boolean"&&typeof r!="number"||(r=["literal",r]),Array.isArray(r)){if(r.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var h=r[0];if(typeof h!="string")return this.error("Expression name must be a string, but found "+typeof h+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var m=this.registry[h];if(m){var y=m.parse(r,this);if(!y)return null;if(this.expectedType){var _=this.expectedType,A=y.type;if(_.kind!=="string"&&_.kind!=="number"&&_.kind!=="boolean"&&_.kind!=="object"&&_.kind!=="array"||A.kind!=="value")if(_.kind!=="color"&&_.kind!=="formatted"&&_.kind!=="resolvedImage"||A.kind!=="value"&&A.kind!=="string"){if(this.checkSubtype(_,A))return null}else y=s(y,_,i.typeAnnotation||"coerce");else y=s(y,_,i.typeAnnotation||"assert")}if(!(y instanceof gi)&&y.type.kind!=="resolvedImage"&&function I(R){if(R instanceof ka)return I(R.boundExpression);if(R instanceof si&&R.name==="error"||R instanceof Go||R instanceof po)return!1;var L=R instanceof co||R instanceof tn,j=!0;return R.eachChild(function(G){j=L?j&&I(G):j&&G instanceof gi}),!!j&&Sa(R)&&us(R,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(y)){var C=new ua;try{y=new gi(y.type,y.evaluate(C))}catch(I){return this.error(I.message),null}}return y}return this.error('Unknown expression "'+h+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(r===void 0?"'undefined' value invalid. Use null instead.":typeof r=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof r+" instead.")},Ta.prototype.concat=function(r,i,s){var h=typeof r=="number"?this.path.concat(r):this.path,m=s?this.scope.concat(s):this.scope;return new Ta(this.registry,h,i||null,m,this.errors)},Ta.prototype.error=function(r){for(var i=[],s=arguments.length-1;s-- >0;)i[s]=arguments[s+1];var h=""+this.key+i.map(function(m){return"["+m+"]"}).join("");this.errors.push(new Xe(h,r))},Ta.prototype.checkSubtype=function(r,i){var s=Lr(r,i);return s&&this.error(s),s};var Ui=function(r,i,s){this.type=r,this.input=i,this.labels=[],this.outputs=[];for(var h=0,m=s;h<m.length;h+=1){var y=m[h],_=y[1];this.labels.push(y[0]),this.outputs.push(_)}};function In(r,i,s){return r*(1-s)+i*s}Ui.parse=function(r,i){if(r.length-1<4)return i.error("Expected at least 4 arguments, but found only "+(r.length-1)+".");if((r.length-1)%2!=0)return i.error("Expected an even number of arguments.");var s=i.parse(r[1],1,Ve);if(!s)return null;var h=[],m=null;i.expectedType&&i.expectedType.kind!=="value"&&(m=i.expectedType);for(var y=1;y<r.length;y+=2){var _=y===1?-1/0:r[y],A=r[y+1],C=y,I=y+1;if(typeof _!="number")return i.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',C);if(h.length&&h[h.length-1][0]>=_)return i.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',C);var R=i.parse(A,I,m);if(!R)return null;m=m||R.type,h.push([_,R])}return new Ui(m,s,h)},Ui.prototype.evaluate=function(r){var i=this.labels,s=this.outputs;if(i.length===1)return s[0].evaluate(r);var h=this.input.evaluate(r);if(h<=i[0])return s[0].evaluate(r);var m=i.length;return h>=i[m-1]?s[m-1].evaluate(r):s[Wu(i,h)].evaluate(r)},Ui.prototype.eachChild=function(r){r(this.input);for(var i=0,s=this.outputs;i<s.length;i+=1)r(s[i])},Ui.prototype.outputDefined=function(){return this.outputs.every(function(r){return r.outputDefined()})},Ui.prototype.serialize=function(){for(var r=["step",this.input.serialize()],i=0;i<this.labels.length;i++)i>0&&r.push(this.labels[i]),r.push(this.outputs[i].serialize());return r};var Ks=Object.freeze({__proto__:null,number:In,color:function(r,i,s){return new Mr(In(r.r,i.r,s),In(r.g,i.g,s),In(r.b,i.b,s),In(r.a,i.a,s))},array:function(r,i,s){return r.map(function(h,m){return In(h,i[m],s)})}}),bd=6/29*3*(6/29),kv=Math.PI/180,Tv=180/Math.PI;function qp(r){return r>.008856451679035631?Math.pow(r,1/3):r/bd+4/29}function Wp(r){return r>6/29?r*r*r:bd*(r-4/29)}function Gp(r){return 255*(r<=.0031308?12.92*r:1.055*Math.pow(r,1/2.4)-.055)}function Hp(r){return(r/=255)<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4)}function wd(r){var i=Hp(r.r),s=Hp(r.g),h=Hp(r.b),m=qp((.4124564*i+.3575761*s+.1804375*h)/.95047),y=qp((.2126729*i+.7151522*s+.072175*h)/1);return{l:116*y-16,a:500*(m-y),b:200*(y-qp((.0193339*i+.119192*s+.9503041*h)/1.08883)),alpha:r.a}}function Ad(r){var i=(r.l+16)/116,s=isNaN(r.a)?i:i+r.a/500,h=isNaN(r.b)?i:i-r.b/200;return i=1*Wp(i),s=.95047*Wp(s),h=1.08883*Wp(h),new Mr(Gp(3.2404542*s-1.5371385*i-.4985314*h),Gp(-.969266*s+1.8760108*i+.041556*h),Gp(.0556434*s-.2040259*i+1.0572252*h),r.alpha)}function Iv(r,i,s){var h=i-r;return r+s*(h>180||h<-180?h-360*Math.round(h/360):h)}var $l={forward:wd,reverse:Ad,interpolate:function(r,i,s){return{l:In(r.l,i.l,s),a:In(r.a,i.a,s),b:In(r.b,i.b,s),alpha:In(r.alpha,i.alpha,s)}}},ql={forward:function(r){var i=wd(r),s=i.l,h=i.a,m=i.b,y=Math.atan2(m,h)*Tv;return{h:y<0?y+360:y,c:Math.sqrt(h*h+m*m),l:s,alpha:r.a}},reverse:function(r){var i=r.h*kv,s=r.c;return Ad({l:r.l,a:Math.cos(i)*s,b:Math.sin(i)*s,alpha:r.alpha})},interpolate:function(r,i,s){return{h:Iv(r.h,i.h,s),c:In(r.c,i.c,s),l:In(r.l,i.l,s),alpha:In(r.alpha,i.alpha,s)}}},Ed=Object.freeze({__proto__:null,lab:$l,hcl:ql}),li=function(r,i,s,h,m){this.type=r,this.operator=i,this.interpolation=s,this.input=h,this.labels=[],this.outputs=[];for(var y=0,_=m;y<_.length;y+=1){var A=_[y],C=A[1];this.labels.push(A[0]),this.outputs.push(C)}};function Zp(r,i,s,h){var m=h-s,y=r-s;return m===0?0:i===1?y/m:(Math.pow(i,y)-1)/(Math.pow(i,m)-1)}li.interpolationFactor=function(r,i,s,h){var m=0;if(r.name==="exponential")m=Zp(i,r.base,s,h);else if(r.name==="linear")m=Zp(i,1,s,h);else if(r.name==="cubic-bezier"){var y=r.controlPoints;m=new x(y[0],y[1],y[2],y[3]).solve(Zp(i,1,s,h))}return m},li.parse=function(r,i){var s=r[0],h=r[1],m=r[2],y=r.slice(3);if(!Array.isArray(h)||h.length===0)return i.error("Expected an interpolation type expression.",1);if(h[0]==="linear")h={name:"linear"};else if(h[0]==="exponential"){var _=h[1];if(typeof _!="number")return i.error("Exponential interpolation requires a numeric base.",1,1);h={name:"exponential",base:_}}else{if(h[0]!=="cubic-bezier")return i.error("Unknown interpolation type "+String(h[0]),1,0);var A=h.slice(1);if(A.length!==4||A.some(function(ge){return typeof ge!="number"||ge<0||ge>1}))return i.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);h={name:"cubic-bezier",controlPoints:A}}if(r.length-1<4)return i.error("Expected at least 4 arguments, but found only "+(r.length-1)+".");if((r.length-1)%2!=0)return i.error("Expected an even number of arguments.");if(!(m=i.parse(m,2,Ve)))return null;var C=[],I=null;s==="interpolate-hcl"||s==="interpolate-lab"?I=at:i.expectedType&&i.expectedType.kind!=="value"&&(I=i.expectedType);for(var R=0;R<y.length;R+=2){var L=y[R],j=y[R+1],G=R+3,oe=R+4;if(typeof L!="number")return i.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',G);if(C.length&&C[C.length-1][0]>=L)return i.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',G);var ae=i.parse(j,oe,I);if(!ae)return null;I=I||ae.type,C.push([L,ae])}return I.kind==="number"||I.kind==="color"||I.kind==="array"&&I.itemType.kind==="number"&&typeof I.N=="number"?new li(I,s,h,m,C):i.error("Type "+_r(I)+" is not interpolatable.")},li.prototype.evaluate=function(r){var i=this.labels,s=this.outputs;if(i.length===1)return s[0].evaluate(r);var h=this.input.evaluate(r);if(h<=i[0])return s[0].evaluate(r);var m=i.length;if(h>=i[m-1])return s[m-1].evaluate(r);var y=Wu(i,h),_=li.interpolationFactor(this.interpolation,h,i[y],i[y+1]),A=s[y].evaluate(r),C=s[y+1].evaluate(r);return this.operator==="interpolate"?Ks[this.type.kind.toLowerCase()](A,C,_):this.operator==="interpolate-hcl"?ql.reverse(ql.interpolate(ql.forward(A),ql.forward(C),_)):$l.reverse($l.interpolate($l.forward(A),$l.forward(C),_))},li.prototype.eachChild=function(r){r(this.input);for(var i=0,s=this.outputs;i<s.length;i+=1)r(s[i])},li.prototype.outputDefined=function(){return this.outputs.every(function(r){return r.outputDefined()})},li.prototype.serialize=function(){var r;r=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var i=[this.operator,r,this.input.serialize()],s=0;s<this.labels.length;s++)i.push(this.labels[s],this.outputs[s].serialize());return i};var Ia=function(r,i){this.type=r,this.args=i};Ia.parse=function(r,i){if(r.length<2)return i.error("Expectected at least one argument.");var s=null,h=i.expectedType;h&&h.kind!=="value"&&(s=h);for(var m=[],y=0,_=r.slice(1);y<_.length;y+=1){var A=i.parse(_[y],1+m.length,s,void 0,{typeAnnotation:"omit"});if(!A)return null;s=s||A.type,m.push(A)}var C=h&&m.some(function(I){return Lr(h,I.type)});return new Ia(C?pt:s,m)},Ia.prototype.evaluate=function(r){for(var i,s=null,h=0,m=0,y=this.args;m<y.length&&(h++,(s=y[m].evaluate(r))&&s instanceof Ii&&!s.available&&(i||(i=s.name),s=null,h===this.args.length&&(s=i)),s===null);m+=1);return s},Ia.prototype.eachChild=function(r){this.args.forEach(r)},Ia.prototype.outputDefined=function(){return this.args.every(function(r){return r.outputDefined()})},Ia.prototype.serialize=function(){var r=["coalesce"];return this.eachChild(function(i){r.push(i.serialize())}),r};var Pa=function(r,i){this.type=i.type,this.bindings=[].concat(r),this.result=i};Pa.prototype.evaluate=function(r){return this.result.evaluate(r)},Pa.prototype.eachChild=function(r){for(var i=0,s=this.bindings;i<s.length;i+=1)r(s[i][1]);r(this.result)},Pa.parse=function(r,i){if(r.length<4)return i.error("Expected at least 3 arguments, but found "+(r.length-1)+" instead.");for(var s=[],h=1;h<r.length-1;h+=2){var m=r[h];if(typeof m!="string")return i.error("Expected string, but found "+typeof m+" instead.",h);if(/[^a-zA-Z0-9_]/.test(m))return i.error("Variable names must contain only alphanumeric characters or '_'.",h);var y=i.parse(r[h+1],h+1);if(!y)return null;s.push([m,y])}var _=i.parse(r[r.length-1],r.length-1,i.expectedType,s);return _?new Pa(s,_):null},Pa.prototype.outputDefined=function(){return this.result.outputDefined()},Pa.prototype.serialize=function(){for(var r=["let"],i=0,s=this.bindings;i<s.length;i+=1){var h=s[i];r.push(h[0],h[1].serialize())}return r.push(this.result.serialize()),r};var cs=function(r,i,s){this.type=r,this.index=i,this.input=s};cs.parse=function(r,i){if(r.length!==3)return i.error("Expected 2 arguments, but found "+(r.length-1)+" instead.");var s=i.parse(r[1],1,Ve),h=i.parse(r[2],2,Pr(i.expectedType||pt));return s&&h?new cs(h.type.itemType,s,h):null},cs.prototype.evaluate=function(r){var i=this.index.evaluate(r),s=this.input.evaluate(r);if(i<0)throw new Yn("Array index out of bounds: "+i+" < 0.");if(i>=s.length)throw new Yn("Array index out of bounds: "+i+" > "+(s.length-1)+".");if(i!==Math.floor(i))throw new Yn("Array index must be an integer, but found "+i+" instead.");return s[i]},cs.prototype.eachChild=function(r){r(this.index),r(this.input)},cs.prototype.outputDefined=function(){return!1},cs.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var ps=function(r,i){this.type=it,this.needle=r,this.haystack=i};ps.parse=function(r,i){if(r.length!==3)return i.error("Expected 2 arguments, but found "+(r.length-1)+" instead.");var s=i.parse(r[1],1,pt),h=i.parse(r[2],2,pt);return s&&h?bn(s.type,[it,ft,Ve,vt,pt])?new ps(s,h):i.error("Expected first argument to be of type boolean, string, number or null, but found "+_r(s.type)+" instead"):null},ps.prototype.evaluate=function(r){var i=this.needle.evaluate(r),s=this.haystack.evaluate(r);if(!s)return!1;if(!jr(i,["boolean","string","number","null"]))throw new Yn("Expected first argument to be of type boolean, string, number or null, but found "+_r(wn(i))+" instead.");if(!jr(s,["string","array"]))throw new Yn("Expected second argument to be of type array or string, but found "+_r(wn(s))+" instead.");return s.indexOf(i)>=0},ps.prototype.eachChild=function(r){r(this.needle),r(this.haystack)},ps.prototype.outputDefined=function(){return!0},ps.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Ma=function(r,i,s){this.type=Ve,this.needle=r,this.haystack=i,this.fromIndex=s};Ma.parse=function(r,i){if(r.length<=2||r.length>=5)return i.error("Expected 3 or 4 arguments, but found "+(r.length-1)+" instead.");var s=i.parse(r[1],1,pt),h=i.parse(r[2],2,pt);if(!s||!h)return null;if(!bn(s.type,[it,ft,Ve,vt,pt]))return i.error("Expected first argument to be of type boolean, string, number or null, but found "+_r(s.type)+" instead");if(r.length===4){var m=i.parse(r[3],3,Ve);return m?new Ma(s,h,m):null}return new Ma(s,h)},Ma.prototype.evaluate=function(r){var i=this.needle.evaluate(r),s=this.haystack.evaluate(r);if(!jr(i,["boolean","string","number","null"]))throw new Yn("Expected first argument to be of type boolean, string, number or null, but found "+_r(wn(i))+" instead.");if(!jr(s,["string","array"]))throw new Yn("Expected second argument to be of type array or string, but found "+_r(wn(s))+" instead.");if(this.fromIndex){var h=this.fromIndex.evaluate(r);return s.indexOf(i,h)}return s.indexOf(i)},Ma.prototype.eachChild=function(r){r(this.needle),r(this.haystack),this.fromIndex&&r(this.fromIndex)},Ma.prototype.outputDefined=function(){return!1},Ma.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var r=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),r]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var hs=function(r,i,s,h,m,y){this.inputType=r,this.type=i,this.input=s,this.cases=h,this.outputs=m,this.otherwise=y};hs.parse=function(r,i){if(r.length<5)return i.error("Expected at least 4 arguments, but found only "+(r.length-1)+".");if(r.length%2!=1)return i.error("Expected an even number of arguments.");var s,h;i.expectedType&&i.expectedType.kind!=="value"&&(h=i.expectedType);for(var m={},y=[],_=2;_<r.length-1;_+=2){var A=r[_],C=r[_+1];Array.isArray(A)||(A=[A]);var I=i.concat(_);if(A.length===0)return I.error("Expected at least one branch label.");for(var R=0,L=A;R<L.length;R+=1){var j=L[R];if(typeof j!="number"&&typeof j!="string")return I.error("Branch labels must be numbers or strings.");if(typeof j=="number"&&Math.abs(j)>Number.MAX_SAFE_INTEGER)return I.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof j=="number"&&Math.floor(j)!==j)return I.error("Numeric branch labels must be integer values.");if(s){if(I.checkSubtype(s,wn(j)))return null}else s=wn(j);if(m[String(j)]!==void 0)return I.error("Branch labels must be unique.");m[String(j)]=y.length}var G=i.parse(C,_,h);if(!G)return null;h=h||G.type,y.push(G)}var oe=i.parse(r[1],1,pt);if(!oe)return null;var ae=i.parse(r[r.length-1],r.length-1,h);return ae?oe.type.kind!=="value"&&i.concat(1).checkSubtype(s,oe.type)?null:new hs(s,h,oe,m,y,ae):null},hs.prototype.evaluate=function(r){var i=this.input.evaluate(r);return(wn(i)===this.inputType&&this.outputs[this.cases[i]]||this.otherwise).evaluate(r)},hs.prototype.eachChild=function(r){r(this.input),this.outputs.forEach(r),r(this.otherwise)},hs.prototype.outputDefined=function(){return this.outputs.every(function(r){return r.outputDefined()})&&this.otherwise.outputDefined()},hs.prototype.serialize=function(){for(var r=this,i=["match",this.input.serialize()],s=[],h={},m=0,y=Object.keys(this.cases).sort();m<y.length;m+=1){var _=y[m];(L=h[this.cases[_]])===void 0?(h[this.cases[_]]=s.length,s.push([this.cases[_],[_]])):s[L][1].push(_)}for(var A=function(G){return r.inputType.kind==="number"?Number(G):G},C=0,I=s;C<I.length;C+=1){var R=I[C],L=R[0],j=R[1];i.push(j.length===1?A(j[0]):j.map(A)),i.push(this.outputs[outputIndex$1].serialize())}return i.push(this.otherwise.serialize()),i};var fs=function(r,i,s){this.type=r,this.branches=i,this.otherwise=s};fs.parse=function(r,i){if(r.length<4)return i.error("Expected at least 3 arguments, but found only "+(r.length-1)+".");if(r.length%2!=0)return i.error("Expected an odd number of arguments.");var s;i.expectedType&&i.expectedType.kind!=="value"&&(s=i.expectedType);for(var h=[],m=1;m<r.length-1;m+=2){var y=i.parse(r[m],m,it);if(!y)return null;var _=i.parse(r[m+1],m+1,s);if(!_)return null;h.push([y,_]),s=s||_.type}var A=i.parse(r[r.length-1],r.length-1,s);return A?new fs(s,h,A):null},fs.prototype.evaluate=function(r){for(var i=0,s=this.branches;i<s.length;i+=1){var h=s[i],m=h[1];if(h[0].evaluate(r))return m.evaluate(r)}return this.otherwise.evaluate(r)},fs.prototype.eachChild=function(r){for(var i=0,s=this.branches;i<s.length;i+=1){var h=s[i],m=h[1];r(h[0]),r(m)}r(this.otherwise)},fs.prototype.outputDefined=function(){return this.branches.every(function(r){return r[1].outputDefined()})&&this.otherwise.outputDefined()},fs.prototype.serialize=function(){var r=["case"];return this.eachChild(function(i){r.push(i.serialize())}),r};var Ra=function(r,i,s,h){this.type=r,this.input=i,this.beginIndex=s,this.endIndex=h};function Sd(r,i){return r==="=="||r==="!="?i.kind==="boolean"||i.kind==="string"||i.kind==="number"||i.kind==="null"||i.kind==="value":i.kind==="string"||i.kind==="number"||i.kind==="value"}function Cd(r,i,s,h){return h.compare(i,s)===0}function qr(r,i,s){var h=r!=="=="&&r!=="!=";return function(){function m(y,_,A){this.type=it,this.lhs=y,this.rhs=_,this.collator=A,this.hasUntypedArgument=y.type.kind==="value"||_.type.kind==="value"}return m.parse=function(y,_){if(y.length!==3&&y.length!==4)return _.error("Expected two or three arguments.");var A=y[0],C=_.parse(y[1],1,pt);if(!C)return null;if(!Sd(A,C.type))return _.concat(1).error('"'+A+`" comparisons are not supported for type '`+_r(C.type)+"'.");var I=_.parse(y[2],2,pt);if(!I)return null;if(!Sd(A,I.type))return _.concat(2).error('"'+A+`" comparisons are not supported for type '`+_r(I.type)+"'.");if(C.type.kind!==I.type.kind&&C.type.kind!=="value"&&I.type.kind!=="value")return _.error("Cannot compare types '"+_r(C.type)+"' and '"+_r(I.type)+"'.");h&&(C.type.kind==="value"&&I.type.kind!=="value"?C=new tn(I.type,[C]):C.type.kind!=="value"&&I.type.kind==="value"&&(I=new tn(C.type,[I])));var R=null;if(y.length===4){if(C.type.kind!=="string"&&I.type.kind!=="string"&&C.type.kind!=="value"&&I.type.kind!=="value")return _.error("Cannot use collator to compare non-string types.");if(!(R=_.parse(y[3],3,gr)))return null}return new m(C,I,R)},m.prototype.evaluate=function(y){var _=this.lhs.evaluate(y),A=this.rhs.evaluate(y);if(h&&this.hasUntypedArgument){var C=wn(_),I=wn(A);if(C.kind!==I.kind||C.kind!=="string"&&C.kind!=="number")throw new Yn('Expected arguments for "'+r+'" to be (string, string) or (number, number), but found ('+C.kind+", "+I.kind+") instead.")}if(this.collator&&!h&&this.hasUntypedArgument){var R=wn(_),L=wn(A);if(R.kind!=="string"||L.kind!=="string")return i(y,_,A)}return this.collator?s(y,_,A,this.collator.evaluate(y)):i(y,_,A)},m.prototype.eachChild=function(y){y(this.lhs),y(this.rhs),this.collator&&y(this.collator)},m.prototype.outputDefined=function(){return!0},m.prototype.serialize=function(){var y=[r];return this.eachChild(function(_){y.push(_.serialize())}),y},m}()}Ra.parse=function(r,i){if(r.length<=2||r.length>=5)return i.error("Expected 3 or 4 arguments, but found "+(r.length-1)+" instead.");var s=i.parse(r[1],1,pt),h=i.parse(r[2],2,Ve);if(!s||!h)return null;if(!bn(s.type,[Pr(pt),ft,pt]))return i.error("Expected first argument to be of type array or string, but found "+_r(s.type)+" instead");if(r.length===4){var m=i.parse(r[3],3,Ve);return m?new Ra(s.type,s,h,m):null}return new Ra(s.type,s,h)},Ra.prototype.evaluate=function(r){var i=this.input.evaluate(r),s=this.beginIndex.evaluate(r);if(!jr(i,["string","array"]))throw new Yn("Expected first argument to be of type array or string, but found "+_r(wn(i))+" instead.");if(this.endIndex){var h=this.endIndex.evaluate(r);return i.slice(s,h)}return i.slice(s)},Ra.prototype.eachChild=function(r){r(this.input),r(this.beginIndex),this.endIndex&&r(this.endIndex)},Ra.prototype.outputDefined=function(){return!1},Ra.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var r=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),r]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Pv=qr("==",function(r,i,s){return i===s},Cd),Gu=qr("!=",function(r,i,s){return i!==s},function(r,i,s,h){return!Cd(0,i,s,h)}),kd=qr("<",function(r,i,s){return i<s},function(r,i,s,h){return h.compare(i,s)<0}),Td=qr(">",function(r,i,s){return i>s},function(r,i,s,h){return h.compare(i,s)>0}),Id=qr("<=",function(r,i,s){return i<=s},function(r,i,s,h){return h.compare(i,s)<=0}),Pd=qr(">=",function(r,i,s){return i>=s},function(r,i,s,h){return h.compare(i,s)>=0}),ds=function(r,i,s,h,m){this.type=ft,this.number=r,this.locale=i,this.currency=s,this.minFractionDigits=h,this.maxFractionDigits=m};ds.parse=function(r,i){if(r.length!==3)return i.error("Expected two arguments.");var s=i.parse(r[1],1,Ve);if(!s)return null;var h=r[2];if(typeof h!="object"||Array.isArray(h))return i.error("NumberFormat options argument must be an object.");var m=null;if(h.locale&&!(m=i.parse(h.locale,1,ft)))return null;var y=null;if(h.currency&&!(y=i.parse(h.currency,1,ft)))return null;var _=null;if(h["min-fraction-digits"]&&!(_=i.parse(h["min-fraction-digits"],1,Ve)))return null;var A=null;return h["max-fraction-digits"]&&!(A=i.parse(h["max-fraction-digits"],1,Ve))?null:new ds(s,m,y,_,A)},ds.prototype.evaluate=function(r){return new Intl.NumberFormat(this.locale?this.locale.evaluate(r):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(r):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(r):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(r):void 0}).format(this.number.evaluate(r))},ds.prototype.eachChild=function(r){r(this.number),this.locale&&r(this.locale),this.currency&&r(this.currency),this.minFractionDigits&&r(this.minFractionDigits),this.maxFractionDigits&&r(this.maxFractionDigits)},ds.prototype.outputDefined=function(){return!1},ds.prototype.serialize=function(){var r={};return this.locale&&(r.locale=this.locale.serialize()),this.currency&&(r.currency=this.currency.serialize()),this.minFractionDigits&&(r["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(r["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),r]};var za=function(r){this.type=Ve,this.input=r};za.parse=function(r,i){if(r.length!==2)return i.error("Expected 1 argument, but found "+(r.length-1)+" instead.");var s=i.parse(r[1],1);return s?s.type.kind!=="array"&&s.type.kind!=="string"&&s.type.kind!=="value"?i.error("Expected argument of type string or array, but found "+_r(s.type)+" instead."):new za(s):null},za.prototype.evaluate=function(r){var i=this.input.evaluate(r);if(typeof i=="string"||Array.isArray(i))return i.length;throw new Yn("Expected value to be of type string or array, but found "+_r(wn(i))+" instead.")},za.prototype.eachChild=function(r){r(this.input)},za.prototype.outputDefined=function(){return!1},za.prototype.serialize=function(){var r=["length"];return this.eachChild(function(i){r.push(i.serialize())}),r};var ms={"==":Pv,"!=":Gu,">":Td,"<":kd,">=":Pd,"<=":Id,array:tn,at:cs,boolean:tn,case:fs,coalesce:Ia,collator:Go,format:Mo,image:ro,in:ps,"index-of":Ma,interpolate:li,"interpolate-hcl":li,"interpolate-lab":li,length:za,let:Pa,literal:gi,match:hs,number:tn,"number-format":ds,object:tn,slice:Ra,step:Ui,string:tn,"to-boolean":co,"to-color":co,"to-number":co,"to-string":co,var:ka,within:po};function Md(r,i){var s=i[0],h=i[1],m=i[2],y=i[3];s=s.evaluate(r),h=h.evaluate(r),m=m.evaluate(r);var _=y?y.evaluate(r):1,A=jp(s,h,m,_);if(A)throw new Yn(A);return new Mr(s/255*_,h/255*_,m/255*_,_)}function Rd(r,i){return r in i}function Kp(r,i){var s=i[r];return s===void 0?null:s}function ys(r){return{type:r}}function zd(r){return{result:"success",value:r}}function gs(r){return{result:"error",value:r}}function vs(r){return r["property-type"]==="data-driven"||r["property-type"]==="cross-faded-data-driven"}function Ld(r){return!!r.expression&&r.expression.parameters.indexOf("zoom")>-1}function Wl(r){return!!r.expression&&r.expression.interpolated}function Zr(r){return r instanceof Number?"number":r instanceof String?"string":r instanceof Boolean?"boolean":Array.isArray(r)?"array":r===null?"null":typeof r}function Hu(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)}function Mv(r){return r}function Xs(r,i,s){return r!==void 0?r:i!==void 0?i:s!==void 0?s:void 0}function Od(r,i,s,h,m){return Xs(typeof s===m?h[s]:void 0,r.default,i.default)}function Rv(r,i,s){if(Zr(s)!=="number")return Xs(r.default,i.default);var h=r.stops.length;if(h===1||s<=r.stops[0][0])return r.stops[0][1];if(s>=r.stops[h-1][0])return r.stops[h-1][1];var m=Wu(r.stops.map(function(y){return y[0]}),s);return r.stops[m][1]}function Dd(r,i,s){var h=r.base!==void 0?r.base:1;if(Zr(s)!=="number")return Xs(r.default,i.default);var m=r.stops.length;if(m===1||s<=r.stops[0][0])return r.stops[0][1];if(s>=r.stops[m-1][0])return r.stops[m-1][1];var y=Wu(r.stops.map(function(L){return L[0]}),s),_=function(L,j,G,oe){var ae=oe-G,ge=L-G;return ae===0?0:j===1?ge/ae:(Math.pow(j,ge)-1)/(Math.pow(j,ae)-1)}(s,h,r.stops[y][0],r.stops[y+1][0]),A=r.stops[y][1],C=r.stops[y+1][1],I=Ks[i.type]||Mv;if(r.colorSpace&&r.colorSpace!=="rgb"){var R=Ed[r.colorSpace];I=function(L,j){return R.reverse(R.interpolate(R.forward(L),R.forward(j),_))}}return typeof A.evaluate=="function"?{evaluate:function(){for(var L=[],j=arguments.length;j--;)L[j]=arguments[j];var G=A.evaluate.apply(void 0,L),oe=C.evaluate.apply(void 0,L);if(G!==void 0&&oe!==void 0)return I(G,oe,_)}}:I(A,C,_)}function Zu(r,i,s){return i.type==="color"?s=Mr.parse(s):i.type==="formatted"?s=Jn.fromString(s.toString()):i.type==="resolvedImage"?s=Ii.fromString(s.toString()):Zr(s)===i.type||i.type==="enum"&&i.values[s]||(s=void 0),Xs(s,r.default,i.default)}si.register(ms,{error:[{kind:"error"},[ft],function(r,i){throw new Yn(i[0].evaluate(r))}],typeof:[ft,[pt],function(r,i){return _r(wn(i[0].evaluate(r)))}],"to-rgba":[Pr(Ve,4),[at],function(r,i){return i[0].evaluate(r).toArray()}],rgb:[at,[Ve,Ve,Ve],Md],rgba:[at,[Ve,Ve,Ve,Ve],Md],has:{type:it,overloads:[[[ft],function(r,i){return Rd(i[0].evaluate(r),r.properties())}],[[ft,rr],function(r,i){var s=i[1];return Rd(i[0].evaluate(r),s.evaluate(r))}]]},get:{type:pt,overloads:[[[ft],function(r,i){return Kp(i[0].evaluate(r),r.properties())}],[[ft,rr],function(r,i){var s=i[1];return Kp(i[0].evaluate(r),s.evaluate(r))}]]},"feature-state":[pt,[ft],function(r,i){return Kp(i[0].evaluate(r),r.featureState||{})}],properties:[rr,[],function(r){return r.properties()}],"geometry-type":[ft,[],function(r){return r.geometryType()}],id:[pt,[],function(r){return r.id()}],zoom:[Ve,[],function(r){return r.globals.zoom}],"heatmap-density":[Ve,[],function(r){return r.globals.heatmapDensity||0}],"line-progress":[Ve,[],function(r){return r.globals.lineProgress||0}],accumulated:[pt,[],function(r){return r.globals.accumulated===void 0?null:r.globals.accumulated}],"+":[Ve,ys(Ve),function(r,i){for(var s=0,h=0,m=i;h<m.length;h+=1)s+=m[h].evaluate(r);return s}],"*":[Ve,ys(Ve),function(r,i){for(var s=1,h=0,m=i;h<m.length;h+=1)s*=m[h].evaluate(r);return s}],"-":{type:Ve,overloads:[[[Ve,Ve],function(r,i){var s=i[1];return i[0].evaluate(r)-s.evaluate(r)}],[[Ve],function(r,i){return-i[0].evaluate(r)}]]},"/":[Ve,[Ve,Ve],function(r,i){var s=i[1];return i[0].evaluate(r)/s.evaluate(r)}],"%":[Ve,[Ve,Ve],function(r,i){var s=i[1];return i[0].evaluate(r)%s.evaluate(r)}],ln2:[Ve,[],function(){return Math.LN2}],pi:[Ve,[],function(){return Math.PI}],e:[Ve,[],function(){return Math.E}],"^":[Ve,[Ve,Ve],function(r,i){var s=i[1];return Math.pow(i[0].evaluate(r),s.evaluate(r))}],sqrt:[Ve,[Ve],function(r,i){return Math.sqrt(i[0].evaluate(r))}],log10:[Ve,[Ve],function(r,i){return Math.log(i[0].evaluate(r))/Math.LN10}],ln:[Ve,[Ve],function(r,i){return Math.log(i[0].evaluate(r))}],log2:[Ve,[Ve],function(r,i){return Math.log(i[0].evaluate(r))/Math.LN2}],sin:[Ve,[Ve],function(r,i){return Math.sin(i[0].evaluate(r))}],cos:[Ve,[Ve],function(r,i){return Math.cos(i[0].evaluate(r))}],tan:[Ve,[Ve],function(r,i){return Math.tan(i[0].evaluate(r))}],asin:[Ve,[Ve],function(r,i){return Math.asin(i[0].evaluate(r))}],acos:[Ve,[Ve],function(r,i){return Math.acos(i[0].evaluate(r))}],atan:[Ve,[Ve],function(r,i){return Math.atan(i[0].evaluate(r))}],min:[Ve,ys(Ve),function(r,i){return Math.min.apply(Math,i.map(function(s){return s.evaluate(r)}))}],max:[Ve,ys(Ve),function(r,i){return Math.max.apply(Math,i.map(function(s){return s.evaluate(r)}))}],abs:[Ve,[Ve],function(r,i){return Math.abs(i[0].evaluate(r))}],round:[Ve,[Ve],function(r,i){var s=i[0].evaluate(r);return s<0?-Math.round(-s):Math.round(s)}],floor:[Ve,[Ve],function(r,i){return Math.floor(i[0].evaluate(r))}],ceil:[Ve,[Ve],function(r,i){return Math.ceil(i[0].evaluate(r))}],"filter-==":[it,[ft,pt],function(r,i){var s=i[0],h=i[1];return r.properties()[s.value]===h.value}],"filter-id-==":[it,[pt],function(r,i){var s=i[0];return r.id()===s.value}],"filter-type-==":[it,[ft],function(r,i){var s=i[0];return r.geometryType()===s.value}],"filter-<":[it,[ft,pt],function(r,i){var s=i[0],h=i[1],m=r.properties()[s.value],y=h.value;return typeof m==typeof y&&m<y}],"filter-id-<":[it,[pt],function(r,i){var s=i[0],h=r.id(),m=s.value;return typeof h==typeof m&&h<m}],"filter->":[it,[ft,pt],function(r,i){var s=i[0],h=i[1],m=r.properties()[s.value],y=h.value;return typeof m==typeof y&&m>y}],"filter-id->":[it,[pt],function(r,i){var s=i[0],h=r.id(),m=s.value;return typeof h==typeof m&&h>m}],"filter-<=":[it,[ft,pt],function(r,i){var s=i[0],h=i[1],m=r.properties()[s.value],y=h.value;return typeof m==typeof y&&m<=y}],"filter-id-<=":[it,[pt],function(r,i){var s=i[0],h=r.id(),m=s.value;return typeof h==typeof m&&h<=m}],"filter->=":[it,[ft,pt],function(r,i){var s=i[0],h=i[1],m=r.properties()[s.value],y=h.value;return typeof m==typeof y&&m>=y}],"filter-id->=":[it,[pt],function(r,i){var s=i[0],h=r.id(),m=s.value;return typeof h==typeof m&&h>=m}],"filter-has":[it,[pt],function(r,i){return i[0].value in r.properties()}],"filter-has-id":[it,[],function(r){return r.id()!==null&&r.id()!==void 0}],"filter-type-in":[it,[Pr(ft)],function(r,i){return i[0].value.indexOf(r.geometryType())>=0}],"filter-id-in":[it,[Pr(pt)],function(r,i){return i[0].value.indexOf(r.id())>=0}],"filter-in-small":[it,[ft,Pr(pt)],function(r,i){var s=i[0];return i[1].value.indexOf(r.properties()[s.value])>=0}],"filter-in-large":[it,[ft,Pr(pt)],function(r,i){var s=i[0],h=i[1];return function(m,y,_,A){for(;_<=A;){var C=_+A>>1;if(y[C]===m)return!0;y[C]>m?A=C-1:_=C+1}return!1}(r.properties()[s.value],h.value,0,h.value.length-1)}],all:{type:it,overloads:[[[it,it],function(r,i){var s=i[1];return i[0].evaluate(r)&&s.evaluate(r)}],[ys(it),function(r,i){for(var s=0,h=i;s<h.length;s+=1)if(!h[s].evaluate(r))return!1;return!0}]]},any:{type:it,overloads:[[[it,it],function(r,i){var s=i[1];return i[0].evaluate(r)||s.evaluate(r)}],[ys(it),function(r,i){for(var s=0,h=i;s<h.length;s+=1)if(h[s].evaluate(r))return!0;return!1}]]},"!":[it,[it],function(r,i){return!i[0].evaluate(r)}],"is-supported-script":[it,[ft],function(r,i){var s=r.globals&&r.globals.isSupportedScript;return!s||s(i[0].evaluate(r))}],upcase:[ft,[ft],function(r,i){return i[0].evaluate(r).toUpperCase()}],downcase:[ft,[ft],function(r,i){return i[0].evaluate(r).toLowerCase()}],concat:[ft,ys(pt),function(r,i){return i.map(function(s){return jl(s.evaluate(r))}).join("")}],"resolved-locale":[ft,[gr],function(r,i){return i[0].evaluate(r).resolvedLocale()}]});var Qs=function(r,i){this.expression=r,this._warningHistory={},this._evaluator=new ua,this._defaultValue=i?function(s){return s.type==="color"&&Hu(s.default)?new Mr(0,0,0,0):s.type==="color"?Mr.parse(s.default)||null:s.default===void 0?null:s.default}(i):null,this._enumValues=i&&i.type==="enum"?i.values:null};function Gl(r){return Array.isArray(r)&&r.length>0&&typeof r[0]=="string"&&r[0]in ms}function Ku(r,i){var s=new Ta(ms,[],i?function(m){var y={color:at,string:ft,number:Ve,enum:ft,boolean:it,formatted:$r,resolvedImage:lr};return m.type==="array"?Pr(y[m.value]||pt,m.length):y[m.type]}(i):void 0),h=s.parse(r,void 0,void 0,void 0,i&&i.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?zd(new Qs(h,i)):gs(s.errors)}Qs.prototype.evaluateWithoutErrorHandling=function(r,i,s,h,m,y){return this._evaluator.globals=r,this._evaluator.feature=i,this._evaluator.featureState=s,this._evaluator.canonical=h,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=y,this.expression.evaluate(this._evaluator)},Qs.prototype.evaluate=function(r,i,s,h,m,y){this._evaluator.globals=r,this._evaluator.feature=i||null,this._evaluator.featureState=s||null,this._evaluator.canonical=h,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=y||null;try{var _=this.expression.evaluate(this._evaluator);if(_==null||typeof _=="number"&&_!=_)return this._defaultValue;if(this._enumValues&&!(_ in this._enumValues))throw new Yn("Expected value to be one of "+Object.keys(this._enumValues).map(function(A){return JSON.stringify(A)}).join(", ")+", but found "+JSON.stringify(_)+" instead.");return _}catch(A){return this._warningHistory[A.message]||(this._warningHistory[A.message]=!0,typeof console<"u"&&console.warn(A.message)),this._defaultValue}};var Hl=function(r,i){this.kind=r,this._styleExpression=i,this.isStateDependent=r!=="constant"&&!Ca(i.expression)};Hl.prototype.evaluateWithoutErrorHandling=function(r,i,s,h,m,y){return this._styleExpression.evaluateWithoutErrorHandling(r,i,s,h,m,y)},Hl.prototype.evaluate=function(r,i,s,h,m,y){return this._styleExpression.evaluate(r,i,s,h,m,y)};var Js=function(r,i,s,h){this.kind=r,this.zoomStops=s,this._styleExpression=i,this.isStateDependent=r!=="camera"&&!Ca(i.expression),this.interpolationType=h};function Bd(r,i){if((r=Ku(r,i)).result==="error")return r;var s=r.value.expression,h=Sa(s);if(!h&&!vs(i))return gs([new Xe("","data expressions not supported")]);var m=us(s,["zoom"]);if(!m&&!Ld(i))return gs([new Xe("","zoom expressions not supported")]);var y=function _(A){var C=null;if(A instanceof Pa)C=_(A.result);else if(A instanceof Ia)for(var I=0,R=A.args;I<R.length&&!(C=_(R[I]));I+=1);else(A instanceof Ui||A instanceof li)&&A.input instanceof si&&A.input.name==="zoom"&&(C=A);return C instanceof Xe||A.eachChild(function(L){var j=_(L);j instanceof Xe?C=j:!C&&j?C=new Xe("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):C&&j&&C!==j&&(C=new Xe("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),C}(s);return y||m?y instanceof Xe?gs([y]):y instanceof li&&!Wl(i)?gs([new Xe("",'"interpolate" expressions cannot be used with this property')]):zd(y?new Js(h?"camera":"composite",r.value,y.labels,y instanceof li?y.interpolation:void 0):new Hl(h?"constant":"source",r.value)):gs([new Xe("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}Js.prototype.evaluateWithoutErrorHandling=function(r,i,s,h,m,y){return this._styleExpression.evaluateWithoutErrorHandling(r,i,s,h,m,y)},Js.prototype.evaluate=function(r,i,s,h,m,y){return this._styleExpression.evaluate(r,i,s,h,m,y)},Js.prototype.interpolationFactor=function(r,i,s){return this.interpolationType?li.interpolationFactor(this.interpolationType,r,i,s):0};var Ys=function(r,i){this._parameters=r,this._specification=i,Ze(this,function s(h,m){var y,_,A,C=m.type==="color",I=h.stops&&typeof h.stops[0][0]=="object",R=I||!(I||h.property!==void 0),L=h.type||(Wl(m)?"exponential":"interval");if(C&&((h=Ze({},h)).stops&&(h.stops=h.stops.map(function(lt){return[lt[0],Mr.parse(lt[1])]})),h.default=Mr.parse(h.default?h.default:m.default)),h.colorSpace&&h.colorSpace!=="rgb"&&!Ed[h.colorSpace])throw new Error("Unknown color space: "+h.colorSpace);if(L==="exponential")y=Dd;else if(L==="interval")y=Rv;else if(L==="categorical"){y=Od,_=Object.create(null);for(var j=0,G=h.stops;j<G.length;j+=1){var oe=G[j];_[oe[0]]=oe[1]}A=typeof h.stops[0][0]}else{if(L!=="identity")throw new Error('Unknown function type "'+L+'"');y=Zu}if(I){for(var ae={},ge=[],pe=0;pe<h.stops.length;pe++){var Se=h.stops[pe],Re=Se[0].zoom;ae[Re]===void 0&&(ae[Re]={zoom:Re,type:h.type,property:h.property,default:h.default,stops:[]},ge.push(Re)),ae[Re].stops.push([Se[0].value,Se[1]])}for(var Oe=[],Be=0,Ge=ge;Be<Ge.length;Be+=1){var Je=Ge[Be];Oe.push([ae[Je].zoom,s(ae[Je],m)])}var tt={name:"linear"};return{kind:"composite",interpolationType:tt,interpolationFactor:li.interpolationFactor.bind(void 0,tt),zoomStops:Oe.map(function(lt){return lt[0]}),evaluate:function(lt,Tt){var ht=lt.zoom;return Dd({stops:Oe,base:h.base},m,ht).evaluate(ht,Tt)}}}if(R){var Et=L==="exponential"?{name:"exponential",base:h.base!==void 0?h.base:1}:null;return{kind:"camera",interpolationType:Et,interpolationFactor:li.interpolationFactor.bind(void 0,Et),zoomStops:h.stops.map(function(lt){return lt[0]}),evaluate:function(lt){return y(h,m,lt.zoom,_,A)}}}return{kind:"source",evaluate:function(lt,Tt){var ht=Tt&&Tt.properties?Tt.properties[h.property]:void 0;return ht===void 0?Xs(h.default,m.default):y(h,m,ht,_,A)}}}(this._parameters,this._specification))};function Ro(r){var i=r.key,s=r.value,h=r.valueSpec||{},m=r.objectElementValidators||{},y=r.style,_=r.styleSpec,A=[],C=Zr(s);if(C!=="object")return[new ue(i,s,"object expected, "+C+" found")];for(var I in s){var R=I.split(".")[0],L=h[R]||h["*"],j=void 0;if(m[R])j=m[R];else if(h[R])j=vr;else if(m["*"])j=m["*"];else{if(!h["*"]){A.push(new ue(i,s[I],'unknown property "'+I+'"'));continue}j=vr}A=A.concat(j({key:(i&&i+".")+I,value:s[I],valueSpec:L,style:y,styleSpec:_,object:s,objectKey:I},s))}for(var G in h)m[G]||h[G].required&&h[G].default===void 0&&s[G]===void 0&&A.push(new ue(i,s,'missing required property "'+G+'"'));return A}function Nd(r){var i=r.value,s=r.valueSpec,h=r.style,m=r.styleSpec,y=r.key,_=r.arrayElementValidator||vr;if(Zr(i)!=="array")return[new ue(y,i,"array expected, "+Zr(i)+" found")];if(s.length&&i.length!==s.length)return[new ue(y,i,"array length "+s.length+" expected, length "+i.length+" found")];if(s["min-length"]&&i.length<s["min-length"])return[new ue(y,i,"array length at least "+s["min-length"]+" expected, length "+i.length+" found")];var A={type:s.value,values:s.values};m.$version<7&&(A.function=s.function),Zr(s.value)==="object"&&(A=s.value);for(var C=[],I=0;I<i.length;I++)C=C.concat(_({array:i,arrayIndex:I,value:i[I],valueSpec:A,style:h,styleSpec:m,key:y+"["+I+"]"}));return C}function Fd(r){var i=r.key,s=r.value,h=r.valueSpec,m=Zr(s);return m==="number"&&s!=s&&(m="NaN"),m!=="number"?[new ue(i,s,"number expected, "+m+" found")]:"minimum"in h&&s<h.minimum?[new ue(i,s,s+" is less than the minimum value "+h.minimum)]:"maximum"in h&&s>h.maximum?[new ue(i,s,s+" is greater than the maximum value "+h.maximum)]:[]}function Ud(r){var i,s,h,m=r.valueSpec,y=Qe(r.value.type),_={},A=y!=="categorical"&&r.value.property===void 0,C=!A,I=Zr(r.value.stops)==="array"&&Zr(r.value.stops[0])==="array"&&Zr(r.value.stops[0][0])==="object",R=Ro({key:r.key,value:r.value,valueSpec:r.styleSpec.function,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{stops:function(G){if(y==="identity")return[new ue(G.key,G.value,'identity function may not have a "stops" property')];var oe=[],ae=G.value;return oe=oe.concat(Nd({key:G.key,value:ae,valueSpec:G.valueSpec,style:G.style,styleSpec:G.styleSpec,arrayElementValidator:L})),Zr(ae)==="array"&&ae.length===0&&oe.push(new ue(G.key,ae,"array must have at least one stop")),oe},default:function(G){return vr({key:G.key,value:G.value,valueSpec:m,style:G.style,styleSpec:G.styleSpec})}}});return y==="identity"&&A&&R.push(new ue(r.key,r.value,'missing required property "property"')),y==="identity"||r.value.stops||R.push(new ue(r.key,r.value,'missing required property "stops"')),y==="exponential"&&r.valueSpec.expression&&!Wl(r.valueSpec)&&R.push(new ue(r.key,r.value,"exponential functions not supported")),r.styleSpec.$version>=8&&(C&&!vs(r.valueSpec)?R.push(new ue(r.key,r.value,"property functions not supported")):A&&!Ld(r.valueSpec)&&R.push(new ue(r.key,r.value,"zoom functions not supported"))),y!=="categorical"&&!I||r.value.property!==void 0||R.push(new ue(r.key,r.value,'"property" property is required')),R;function L(G){var oe=[],ae=G.value,ge=G.key;if(Zr(ae)!=="array")return[new ue(ge,ae,"array expected, "+Zr(ae)+" found")];if(ae.length!==2)return[new ue(ge,ae,"array length 2 expected, length "+ae.length+" found")];if(I){if(Zr(ae[0])!=="object")return[new ue(ge,ae,"object expected, "+Zr(ae[0])+" found")];if(ae[0].zoom===void 0)return[new ue(ge,ae,"object stop key must have zoom")];if(ae[0].value===void 0)return[new ue(ge,ae,"object stop key must have value")];if(h&&h>Qe(ae[0].zoom))return[new ue(ge,ae[0].zoom,"stop zoom values must appear in ascending order")];Qe(ae[0].zoom)!==h&&(h=Qe(ae[0].zoom),s=void 0,_={}),oe=oe.concat(Ro({key:ge+"[0]",value:ae[0],valueSpec:{zoom:{}},style:G.style,styleSpec:G.styleSpec,objectElementValidators:{zoom:Fd,value:j}}))}else oe=oe.concat(j({key:ge+"[0]",value:ae[0],valueSpec:{},style:G.style,styleSpec:G.styleSpec},ae));return Gl(je(ae[1]))?oe.concat([new ue(ge+"[1]",ae[1],"expressions are not allowed in function stops.")]):oe.concat(vr({key:ge+"[1]",value:ae[1],valueSpec:m,style:G.style,styleSpec:G.styleSpec}))}function j(G,oe){var ae=Zr(G.value),ge=Qe(G.value),pe=G.value!==null?G.value:oe;if(i){if(ae!==i)return[new ue(G.key,pe,ae+" stop domain type must match previous stop domain type "+i)]}else i=ae;if(ae!=="number"&&ae!=="string"&&ae!=="boolean")return[new ue(G.key,pe,"stop domain value must be a number, string, or boolean")];if(ae!=="number"&&y!=="categorical"){var Se="number expected, "+ae+" found";return vs(m)&&y===void 0&&(Se+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ue(G.key,pe,Se)]}return y!=="categorical"||ae!=="number"||isFinite(ge)&&Math.floor(ge)===ge?y!=="categorical"&&ae==="number"&&s!==void 0&&ge<s?[new ue(G.key,pe,"stop domain values must appear in ascending order")]:(s=ge,y==="categorical"&&ge in _?[new ue(G.key,pe,"stop domain values must be unique")]:(_[ge]=!0,[])):[new ue(G.key,pe,"integer expected, found "+ge)]}}function _s(r){var i=(r.expressionContext==="property"?Bd:Ku)(je(r.value),r.valueSpec);if(i.result==="error")return i.value.map(function(h){return new ue(""+r.key+h.key,r.value,h.message)});var s=i.value.expression||i.value._styleExpression.expression;if(r.expressionContext==="property"&&r.propertyKey==="text-font"&&!s.outputDefined())return[new ue(r.key,r.value,'Invalid data expression for "'+r.propertyKey+'". Output values must be contained as literals within the expression.')];if(r.expressionContext==="property"&&r.propertyType==="layout"&&!Ca(s))return[new ue(r.key,r.value,'"feature-state" data expressions are not supported with layout properties.')];if(r.expressionContext==="filter"&&!Ca(s))return[new ue(r.key,r.value,'"feature-state" data expressions are not supported with filters.')];if(r.expressionContext&&r.expressionContext.indexOf("cluster")===0){if(!us(s,["zoom","feature-state"]))return[new ue(r.key,r.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(r.expressionContext==="cluster-initial"&&!Sa(s))return[new ue(r.key,r.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Zl(r){var i=r.key,s=r.value,h=r.valueSpec,m=[];return Array.isArray(h.values)?h.values.indexOf(Qe(s))===-1&&m.push(new ue(i,s,"expected one of ["+h.values.join(", ")+"], "+JSON.stringify(s)+" found")):Object.keys(h.values).indexOf(Qe(s))===-1&&m.push(new ue(i,s,"expected one of ["+Object.keys(h.values).join(", ")+"], "+JSON.stringify(s)+" found")),m}function Xu(r){if(r===!0||r===!1)return!0;if(!Array.isArray(r)||r.length===0)return!1;switch(r[0]){case"has":return r.length>=2&&r[1]!=="$id"&&r[1]!=="$type";case"in":return r.length>=3&&(typeof r[1]!="string"||Array.isArray(r[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return r.length!==3||Array.isArray(r[1])||Array.isArray(r[2]);case"any":case"all":for(var i=0,s=r.slice(1);i<s.length;i+=1){var h=s[i];if(!Xu(h)&&typeof h!="boolean")return!1}return!0;default:return!0}}Ys.deserialize=function(r){return new Ys(r._parameters,r._specification)},Ys.serialize=function(r){return{_parameters:r._parameters,_specification:r._specification}};var Xp={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Qu(r){if(r==null)return{filter:function(){return!0},needGeometry:!1};Xu(r)||(r=Ju(r));var i=Ku(r,Xp);if(i.result==="error")throw new Error(i.value.map(function(s){return s.key+": "+s.message}).join(", "));return{filter:function(s,h,m){return i.value.evaluate(s,h,{},m)},needGeometry:function s(h){if(!Array.isArray(h))return!1;if(h[0]==="within")return!0;for(var m=1;m<h.length;m++)if(s(h[m]))return!0;return!1}(r)}}function zv(r,i){return r<i?-1:r>i?1:0}function Ju(r){if(!r)return!0;var i,s=r[0];return r.length<=1?s!=="any":s==="=="?Qp(r[1],r[2],"=="):s==="!="?Yu(Qp(r[1],r[2],"==")):s==="<"||s===">"||s==="<="||s===">="?Qp(r[1],r[2],s):s==="any"?(i=r.slice(1),["any"].concat(i.map(Ju))):s==="all"?["all"].concat(r.slice(1).map(Ju)):s==="none"?["all"].concat(r.slice(1).map(Ju).map(Yu)):s==="in"?jd(r[1],r.slice(2)):s==="!in"?Yu(jd(r[1],r.slice(2))):s==="has"?Vd(r[1]):s==="!has"?Yu(Vd(r[1])):s!=="within"||r}function Qp(r,i,s){switch(r){case"$type":return["filter-type-"+s,i];case"$id":return["filter-id-"+s,i];default:return["filter-"+s,r,i]}}function jd(r,i){if(i.length===0)return!1;switch(r){case"$type":return["filter-type-in",["literal",i]];case"$id":return["filter-id-in",["literal",i]];default:return i.length>200&&!i.some(function(s){return typeof s!=typeof i[0]})?["filter-in-large",r,["literal",i.sort(zv)]]:["filter-in-small",r,["literal",i]]}}function Vd(r){switch(r){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",r]}}function Yu(r){return["!",r]}function Jp(r){return Xu(je(r.value))?_s(Ze({},r,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function i(s){var h=s.value,m=s.key;if(Zr(h)!=="array")return[new ue(m,h,"array expected, "+Zr(h)+" found")];var y,_=s.styleSpec,A=[];if(h.length<1)return[new ue(m,h,"filter array must have at least 1 element")];switch(A=A.concat(Zl({key:m+"[0]",value:h[0],valueSpec:_.filter_operator,style:s.style,styleSpec:s.styleSpec})),Qe(h[0])){case"<":case"<=":case">":case">=":h.length>=2&&Qe(h[1])==="$type"&&A.push(new ue(m,h,'"$type" cannot be use with operator "'+h[0]+'"'));case"==":case"!=":h.length!==3&&A.push(new ue(m,h,'filter array for operator "'+h[0]+'" must have 3 elements'));case"in":case"!in":h.length>=2&&(y=Zr(h[1]))!=="string"&&A.push(new ue(m+"[1]",h[1],"string expected, "+y+" found"));for(var C=2;C<h.length;C++)y=Zr(h[C]),Qe(h[1])==="$type"?A=A.concat(Zl({key:m+"["+C+"]",value:h[C],valueSpec:_.geometry_type,style:s.style,styleSpec:s.styleSpec})):y!=="string"&&y!=="number"&&y!=="boolean"&&A.push(new ue(m+"["+C+"]",h[C],"string, number, or boolean expected, "+y+" found"));break;case"any":case"all":case"none":for(var I=1;I<h.length;I++)A=A.concat(i({key:m+"["+I+"]",value:h[I],style:s.style,styleSpec:s.styleSpec}));break;case"has":case"!has":y=Zr(h[1]),h.length!==2?A.push(new ue(m,h,'filter array for "'+h[0]+'" operator must have 2 elements')):y!=="string"&&A.push(new ue(m+"[1]",h[1],"string expected, "+y+" found"));break;case"within":y=Zr(h[1]),h.length!==2?A.push(new ue(m,h,'filter array for "'+h[0]+'" operator must have 2 elements')):y!=="object"&&A.push(new ue(m+"[1]",h[1],"object expected, "+y+" found"))}return A}(r)}function Yp(r,i){var s=r.key,h=r.style,m=r.styleSpec,y=r.value,_=r.objectKey,A=m[i+"_"+r.layerType];if(!A)return[];var C=_.match(/^(.*)-transition$/);if(i==="paint"&&C&&A[C[1]]&&A[C[1]].transition)return vr({key:s,value:y,valueSpec:m.transition,style:h,styleSpec:m});var I,R=r.valueSpec||A[_];if(!R)return[new ue(s,y,'unknown property "'+_+'"')];if(Zr(y)==="string"&&vs(R)&&!R.tokens&&(I=/^{([^}]+)}$/.exec(y)))return[new ue(s,y,'"'+_+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(I[1])+" }`.")];var L=[];return r.layerType==="symbol"&&(_==="text-field"&&h&&!h.glyphs&&L.push(new ue(s,y,'use of "text-field" requires a style "glyphs" property')),_==="text-font"&&Hu(je(y))&&Qe(y.type)==="identity"&&L.push(new ue(s,y,'"text-font" does not support identity functions'))),L.concat(vr({key:r.key,value:y,valueSpec:R,style:h,styleSpec:m,expressionContext:"property",propertyType:i,propertyKey:_}))}function eh(r){return Yp(r,"paint")}function Kl(r){return Yp(r,"layout")}function $d(r){var i=[],s=r.value,h=r.key,m=r.style,y=r.styleSpec;s.type||s.ref||i.push(new ue(h,s,'either "type" or "ref" is required'));var _,A=Qe(s.type),C=Qe(s.ref);if(s.id)for(var I=Qe(s.id),R=0;R<r.arrayIndex;R++){var L=m.layers[R];Qe(L.id)===I&&i.push(new ue(h,s.id,'duplicate layer id "'+s.id+'", previously used at line '+L.id.__line__))}if("ref"in s)["type","source","source-layer","filter","layout"].forEach(function(oe){oe in s&&i.push(new ue(h,s[oe],'"'+oe+'" is prohibited for ref layers'))}),m.layers.forEach(function(oe){Qe(oe.id)===C&&(_=oe)}),_?_.ref?i.push(new ue(h,s.ref,"ref cannot reference another ref layer")):A=Qe(_.type):i.push(new ue(h,s.ref,'ref layer "'+C+'" not found'));else if(A!=="background")if(s.source){var j=m.sources&&m.sources[s.source],G=j&&Qe(j.type);j?G==="vector"&&A==="raster"?i.push(new ue(h,s.source,'layer "'+s.id+'" requires a raster source')):G==="raster"&&A!=="raster"?i.push(new ue(h,s.source,'layer "'+s.id+'" requires a vector source')):G!=="vector"||s["source-layer"]?G==="raster-dem"&&A!=="hillshade"?i.push(new ue(h,s.source,"raster-dem source can only be used with layer type 'hillshade'.")):A!=="line"||!s.paint||!s.paint["line-gradient"]||G==="geojson"&&j.lineMetrics||i.push(new ue(h,s,'layer "'+s.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):i.push(new ue(h,s,'layer "'+s.id+'" must specify a "source-layer"')):i.push(new ue(h,s.source,'source "'+s.source+'" not found'))}else i.push(new ue(h,s,'missing required property "source"'));return i=i.concat(Ro({key:h,value:s,valueSpec:y.layer,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return vr({key:h+".type",value:s.type,valueSpec:y.layer.type,style:r.style,styleSpec:r.styleSpec,object:s,objectKey:"type"})},filter:Jp,layout:function(oe){return Ro({layer:s,key:oe.key,value:oe.value,style:oe.style,styleSpec:oe.styleSpec,objectElementValidators:{"*":function(ae){return Kl(Ze({layerType:A},ae))}}})},paint:function(oe){return Ro({layer:s,key:oe.key,value:oe.value,style:oe.style,styleSpec:oe.styleSpec,objectElementValidators:{"*":function(ae){return eh(Ze({layerType:A},ae))}}})}}}))}function xs(r){var i=r.value,s=r.key,h=Zr(i);return h!=="string"?[new ue(s,i,"string expected, "+h+" found")]:[]}var rn={promoteId:function(r){var i=r.key,s=r.value;if(Zr(s)==="string")return xs({key:i,value:s});var h=[];for(var m in s)h.push.apply(h,xs({key:i+"."+m,value:s[m]}));return h}};function ec(r){var i=r.value,s=r.key,h=r.styleSpec,m=r.style;if(!i.type)return[new ue(s,i,'"type" is required')];var y,_=Qe(i.type);switch(_){case"vector":case"raster":case"raster-dem":return Ro({key:s,value:i,valueSpec:h["source_"+_.replace("-","_")],style:r.style,styleSpec:h,objectElementValidators:rn});case"geojson":if(y=Ro({key:s,value:i,valueSpec:h.source_geojson,style:m,styleSpec:h,objectElementValidators:rn}),i.cluster)for(var A in i.clusterProperties){var C=i.clusterProperties[A],I=C[0],R=typeof I=="string"?[I,["accumulated"],["get",A]]:I;y.push.apply(y,_s({key:s+"."+A+".map",value:C[1],expressionContext:"cluster-map"})),y.push.apply(y,_s({key:s+"."+A+".reduce",value:R,expressionContext:"cluster-reduce"}))}return y;case"video":return Ro({key:s,value:i,valueSpec:h.source_video,style:m,styleSpec:h});case"image":return Ro({key:s,value:i,valueSpec:h.source_image,style:m,styleSpec:h});case"canvas":return[new ue(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Zl({key:s+".type",value:i.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:m,styleSpec:h})}}function bs(r){var i=r.value,s=r.styleSpec,h=s.light,m=r.style,y=[],_=Zr(i);if(i===void 0)return y;if(_!=="object")return y.concat([new ue("light",i,"object expected, "+_+" found")]);for(var A in i){var C=A.match(/^(.*)-transition$/);y=y.concat(C&&h[C[1]]&&h[C[1]].transition?vr({key:A,value:i[A],valueSpec:s.transition,style:m,styleSpec:s}):h[A]?vr({key:A,value:i[A],valueSpec:h[A],style:m,styleSpec:s}):[new ue(A,i[A],'unknown property "'+A+'"')])}return y}var La={"*":function(){return[]},array:Nd,boolean:function(r){var i=r.value,s=r.key,h=Zr(i);return h!=="boolean"?[new ue(s,i,"boolean expected, "+h+" found")]:[]},number:Fd,color:function(r){var i=r.key,s=r.value,h=Zr(s);return h!=="string"?[new ue(i,s,"color expected, "+h+" found")]:dr(s)===null?[new ue(i,s,'color expected, "'+s+'" found')]:[]},constants:Me,enum:Zl,filter:Jp,function:Ud,layer:$d,object:Ro,source:ec,light:bs,string:xs,formatted:function(r){return xs(r).length===0?[]:_s(r)},resolvedImage:function(r){return xs(r).length===0?[]:_s(r)}};function vr(r){var i=r.value,s=r.valueSpec,h=r.styleSpec;return s.expression&&Hu(Qe(i))?Ud(r):s.expression&&Gl(je(i))?_s(r):s.type&&La[s.type]?La[s.type](r):Ro(Ze({},r,{valueSpec:s.type?h[s.type]:s}))}function Kr(r){var i=r.value,s=r.key,h=xs(r);return h.length||(i.indexOf("{fontstack}")===-1&&h.push(new ue(s,i,'"glyphs" url must include a "{fontstack}" token')),i.indexOf("{range}")===-1&&h.push(new ue(s,i,'"glyphs" url must include a "{range}" token'))),h}function no(r,i){i===void 0&&(i=Z);var s=[];return s=s.concat(vr({key:"",value:r,valueSpec:i.$root,styleSpec:i,style:r,objectElementValidators:{glyphs:Kr,"*":function(){return[]}}})),r.constants&&(s=s.concat(Me({key:"constants",value:r.constants,style:r,styleSpec:i}))),Xl(s)}function Xl(r){return[].concat(r).sort(function(i,s){return i.line-s.line})}function el(r){return function(){for(var i=[],s=arguments.length;s--;)i[s]=arguments[s];return Xl(r.apply(this,i))}}no.source=el(ec),no.light=el(bs),no.layer=el($d),no.filter=el(Jp),no.paintProperty=el(eh),no.layoutProperty=el(Kl);var Ql=no,Lv=Ql.light,Ov=Ql.paintProperty,Jl=Ql.layoutProperty;function Yl(r,i){var s=!1;if(i&&i.length)for(var h=0,m=i;h<m.length;h+=1)r.fire(new ce(new Error(m[h].message))),s=!0;return s}var ca=Dn;function Dn(r,i,s){var h=this.cells=[];if(r instanceof ArrayBuffer){this.arrayBuffer=r;var m=new Int32Array(this.arrayBuffer);r=m[0],this.d=(i=m[1])+2*(s=m[2]);for(var y=0;y<this.d*this.d;y++){var _=m[3+y],A=m[3+y+1];h.push(_===A?null:m.subarray(_,A))}var C=m[3+h.length+1];this.keys=m.subarray(m[3+h.length],C),this.bboxes=m.subarray(C),this.insert=this._insertReadonly}else{this.d=i+2*s;for(var I=0;I<this.d*this.d;I++)h.push([]);this.keys=[],this.bboxes=[]}this.n=i,this.extent=r,this.padding=s,this.scale=i/r,this.uid=0;var R=s/i*r;this.min=-R,this.max=r+R}Dn.prototype.insert=function(r,i,s,h,m){this._forEachCell(i,s,h,m,this._insertCell,this.uid++),this.keys.push(r),this.bboxes.push(i),this.bboxes.push(s),this.bboxes.push(h),this.bboxes.push(m)},Dn.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Dn.prototype._insertCell=function(r,i,s,h,m,y){this.cells[m].push(y)},Dn.prototype.query=function(r,i,s,h,m){var y=this.min,_=this.max;if(r<=y&&i<=y&&_<=s&&_<=h&&!m)return Array.prototype.slice.call(this.keys);var A=[];return this._forEachCell(r,i,s,h,this._queryCell,A,{},m),A},Dn.prototype._queryCell=function(r,i,s,h,m,y,_,A){var C=this.cells[m];if(C!==null)for(var I=this.keys,R=this.bboxes,L=0;L<C.length;L++){var j=C[L];if(_[j]===void 0){var G=4*j;(A?A(R[G+0],R[G+1],R[G+2],R[G+3]):r<=R[G+2]&&i<=R[G+3]&&s>=R[G+0]&&h>=R[G+1])?(_[j]=!0,y.push(I[j])):_[j]=!1}}},Dn.prototype._forEachCell=function(r,i,s,h,m,y,_,A){for(var C=this._convertToCellCoord(r),I=this._convertToCellCoord(i),R=this._convertToCellCoord(s),L=this._convertToCellCoord(h),j=C;j<=R;j++)for(var G=I;G<=L;G++){var oe=this.d*G+j;if((!A||A(this._convertFromCellCoord(j),this._convertFromCellCoord(G),this._convertFromCellCoord(j+1),this._convertFromCellCoord(G+1)))&&m.call(this,r,i,s,h,oe,y,_,A))return}},Dn.prototype._convertFromCellCoord=function(r){return(r-this.padding)/this.scale},Dn.prototype._convertToCellCoord=function(r){return Math.max(0,Math.min(this.d-1,Math.floor(r*this.scale)+this.padding))},Dn.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var r=this.cells,i=3+this.cells.length+1+1,s=0,h=0;h<this.cells.length;h++)s+=this.cells[h].length;var m=new Int32Array(i+s+this.keys.length+this.bboxes.length);m[0]=this.extent,m[1]=this.n,m[2]=this.padding;for(var y=i,_=0;_<r.length;_++){var A=r[_];m[3+_]=y,m.set(A,y),y+=A.length}return m[3+r.length]=y,m.set(this.keys,y),m[3+r.length+1]=y+=this.keys.length,m.set(this.bboxes,y),y+=this.bboxes.length,m.buffer};var eu=T.ImageData,qd=T.ImageBitmap,Pn={};function _t(r,i,s){s===void 0&&(s={}),Object.defineProperty(i,"_classRegistryKey",{value:r,writeable:!1}),Pn[r]={klass:i,omit:s.omit||[],shallow:s.shallow||[]}}for(var ji in _t("Object",Object),ca.serialize=function(r,i){var s=r.toArrayBuffer();return i&&i.push(s),{buffer:s}},ca.deserialize=function(r){return new ca(r.buffer)},_t("Grid",ca),_t("Color",Mr),_t("Error",Error),_t("ResolvedImage",Ii),_t("StylePropertyFunction",Ys),_t("StyleExpression",Qs,{omit:["_evaluator"]}),_t("ZoomDependentExpression",Js),_t("ZoomConstantExpression",Hl),_t("CompoundExpression",si,{omit:["_evaluate"]}),ms)ms[ji]._classRegistryKey||_t("Expression_"+ji,ms[ji]);function tc(r){return r&&typeof ArrayBuffer<"u"&&(r instanceof ArrayBuffer||r.constructor&&r.constructor.name==="ArrayBuffer")}function tl(r){return qd&&r instanceof qd}function zo(r,i){if(r==null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp)return r;if(tc(r)||tl(r))return i&&i.push(r),r;if(ArrayBuffer.isView(r)){var s=r;return i&&i.push(s.buffer),s}if(r instanceof eu)return i&&i.push(r.data.buffer),r;if(Array.isArray(r)){for(var h=[],m=0,y=r;m<y.length;m+=1)h.push(zo(y[m],i));return h}if(typeof r=="object"){var _=r.constructor,A=_._classRegistryKey;if(!A)throw new Error("can't serialize object of unregistered class");var C=_.serialize?_.serialize(r,i):{};if(!_.serialize){for(var I in r)if(r.hasOwnProperty(I)&&!(Pn[A].omit.indexOf(I)>=0)){var R=r[I];C[I]=Pn[A].shallow.indexOf(I)>=0?R:zo(R,i)}r instanceof Error&&(C.message=r.message)}if(C.$name)throw new Error("$name property is reserved for worker serialization logic.");return A!=="Object"&&(C.$name=A),C}throw new Error("can't serialize object of type "+typeof r)}function Vi(r){if(r==null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp||tc(r)||tl(r)||ArrayBuffer.isView(r)||r instanceof eu)return r;if(Array.isArray(r))return r.map(Vi);if(typeof r=="object"){var i=r.$name||"Object",s=Pn[i].klass;if(!s)throw new Error("can't deserialize unregistered class "+i);if(s.deserialize)return s.deserialize(r);for(var h=Object.create(s.prototype),m=0,y=Object.keys(r);m<y.length;m+=1){var _=y[m];if(_!=="$name"){var A=r[_];h[_]=Pn[i].shallow.indexOf(_)>=0?A:Vi(A)}}return h}throw new Error("can't deserialize object of type "+typeof r)}var th=function(){this.first=!0};th.prototype.update=function(r,i){var s=Math.floor(r);return this.first?(this.first=!1,this.lastIntegerZoom=s,this.lastIntegerZoomTime=0,this.lastZoom=r,this.lastFloorZoom=s,!0):(this.lastFloorZoom>s?(this.lastIntegerZoom=s+1,this.lastIntegerZoomTime=i):this.lastFloorZoom<s&&(this.lastIntegerZoom=s,this.lastIntegerZoomTime=i),r!==this.lastZoom&&(this.lastZoom=r,this.lastFloorZoom=s,!0))};var ot={"Latin-1 Supplement":function(r){return r>=128&&r<=255},Arabic:function(r){return r>=1536&&r<=1791},"Arabic Supplement":function(r){return r>=1872&&r<=1919},"Arabic Extended-A":function(r){return r>=2208&&r<=2303},"Hangul Jamo":function(r){return r>=4352&&r<=4607},"Unified Canadian Aboriginal Syllabics":function(r){return r>=5120&&r<=5759},Khmer:function(r){return r>=6016&&r<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(r){return r>=6320&&r<=6399},"General Punctuation":function(r){return r>=8192&&r<=8303},"Letterlike Symbols":function(r){return r>=8448&&r<=8527},"Number Forms":function(r){return r>=8528&&r<=8591},"Miscellaneous Technical":function(r){return r>=8960&&r<=9215},"Control Pictures":function(r){return r>=9216&&r<=9279},"Optical Character Recognition":function(r){return r>=9280&&r<=9311},"Enclosed Alphanumerics":function(r){return r>=9312&&r<=9471},"Geometric Shapes":function(r){return r>=9632&&r<=9727},"Miscellaneous Symbols":function(r){return r>=9728&&r<=9983},"Miscellaneous Symbols and Arrows":function(r){return r>=11008&&r<=11263},"CJK Radicals Supplement":function(r){return r>=11904&&r<=12031},"Kangxi Radicals":function(r){return r>=12032&&r<=12255},"Ideographic Description Characters":function(r){return r>=12272&&r<=12287},"CJK Symbols and Punctuation":function(r){return r>=12288&&r<=12351},Hiragana:function(r){return r>=12352&&r<=12447},Katakana:function(r){return r>=12448&&r<=12543},Bopomofo:function(r){return r>=12544&&r<=12591},"Hangul Compatibility Jamo":function(r){return r>=12592&&r<=12687},Kanbun:function(r){return r>=12688&&r<=12703},"Bopomofo Extended":function(r){return r>=12704&&r<=12735},"CJK Strokes":function(r){return r>=12736&&r<=12783},"Katakana Phonetic Extensions":function(r){return r>=12784&&r<=12799},"Enclosed CJK Letters and Months":function(r){return r>=12800&&r<=13055},"CJK Compatibility":function(r){return r>=13056&&r<=13311},"CJK Unified Ideographs Extension A":function(r){return r>=13312&&r<=19903},"Yijing Hexagram Symbols":function(r){return r>=19904&&r<=19967},"CJK Unified Ideographs":function(r){return r>=19968&&r<=40959},"Yi Syllables":function(r){return r>=40960&&r<=42127},"Yi Radicals":function(r){return r>=42128&&r<=42191},"Hangul Jamo Extended-A":function(r){return r>=43360&&r<=43391},"Hangul Syllables":function(r){return r>=44032&&r<=55215},"Hangul Jamo Extended-B":function(r){return r>=55216&&r<=55295},"Private Use Area":function(r){return r>=57344&&r<=63743},"CJK Compatibility Ideographs":function(r){return r>=63744&&r<=64255},"Arabic Presentation Forms-A":function(r){return r>=64336&&r<=65023},"Vertical Forms":function(r){return r>=65040&&r<=65055},"CJK Compatibility Forms":function(r){return r>=65072&&r<=65103},"Small Form Variants":function(r){return r>=65104&&r<=65135},"Arabic Presentation Forms-B":function(r){return r>=65136&&r<=65279},"Halfwidth and Fullwidth Forms":function(r){return r>=65280&&r<=65519}};function rh(r){for(var i=0,s=r;i<s.length;i+=1)if(rc(s[i].charCodeAt(0)))return!0;return!1}function rc(r){return!(r!==746&&r!==747&&(r<4352||!(ot["Bopomofo Extended"](r)||ot.Bopomofo(r)||ot["CJK Compatibility Forms"](r)&&!(r>=65097&&r<=65103)||ot["CJK Compatibility Ideographs"](r)||ot["CJK Compatibility"](r)||ot["CJK Radicals Supplement"](r)||ot["CJK Strokes"](r)||!(!ot["CJK Symbols and Punctuation"](r)||r>=12296&&r<=12305||r>=12308&&r<=12319||r===12336)||ot["CJK Unified Ideographs Extension A"](r)||ot["CJK Unified Ideographs"](r)||ot["Enclosed CJK Letters and Months"](r)||ot["Hangul Compatibility Jamo"](r)||ot["Hangul Jamo Extended-A"](r)||ot["Hangul Jamo Extended-B"](r)||ot["Hangul Jamo"](r)||ot["Hangul Syllables"](r)||ot.Hiragana(r)||ot["Ideographic Description Characters"](r)||ot.Kanbun(r)||ot["Kangxi Radicals"](r)||ot["Katakana Phonetic Extensions"](r)||ot.Katakana(r)&&r!==12540||!(!ot["Halfwidth and Fullwidth Forms"](r)||r===65288||r===65289||r===65293||r>=65306&&r<=65310||r===65339||r===65341||r===65343||r>=65371&&r<=65503||r===65507||r>=65512&&r<=65519)||!(!ot["Small Form Variants"](r)||r>=65112&&r<=65118||r>=65123&&r<=65126)||ot["Unified Canadian Aboriginal Syllabics"](r)||ot["Unified Canadian Aboriginal Syllabics Extended"](r)||ot["Vertical Forms"](r)||ot["Yijing Hexagram Symbols"](r)||ot["Yi Syllables"](r)||ot["Yi Radicals"](r))))}function nh(r){return!(rc(r)||function(i){return!!(ot["Latin-1 Supplement"](i)&&(i===167||i===169||i===174||i===177||i===188||i===189||i===190||i===215||i===247)||ot["General Punctuation"](i)&&(i===8214||i===8224||i===8225||i===8240||i===8241||i===8251||i===8252||i===8258||i===8263||i===8264||i===8265||i===8273)||ot["Letterlike Symbols"](i)||ot["Number Forms"](i)||ot["Miscellaneous Technical"](i)&&(i>=8960&&i<=8967||i>=8972&&i<=8991||i>=8996&&i<=9e3||i===9003||i>=9085&&i<=9114||i>=9150&&i<=9165||i===9167||i>=9169&&i<=9179||i>=9186&&i<=9215)||ot["Control Pictures"](i)&&i!==9251||ot["Optical Character Recognition"](i)||ot["Enclosed Alphanumerics"](i)||ot["Geometric Shapes"](i)||ot["Miscellaneous Symbols"](i)&&!(i>=9754&&i<=9759)||ot["Miscellaneous Symbols and Arrows"](i)&&(i>=11026&&i<=11055||i>=11088&&i<=11097||i>=11192&&i<=11243)||ot["CJK Symbols and Punctuation"](i)||ot.Katakana(i)||ot["Private Use Area"](i)||ot["CJK Compatibility Forms"](i)||ot["Small Form Variants"](i)||ot["Halfwidth and Fullwidth Forms"](i)||i===8734||i===8756||i===8757||i>=9984&&i<=10087||i>=10102&&i<=10131||i===65532||i===65533)}(r))}function ho(r){return r>=1424&&r<=2303||ot["Arabic Presentation Forms-A"](r)||ot["Arabic Presentation Forms-B"](r)}function $i(r,i){return!(!i&&ho(r)||r>=2304&&r<=3583||r>=3840&&r<=4255||ot.Khmer(r))}function nc(r){for(var i=0,s=r;i<s.length;i+=1)if(ho(s[i].charCodeAt(0)))return!0;return!1}var ic=null,qi="unavailable",pa=null,Wd=function(r){r&&typeof r=="string"&&r.indexOf("NetworkError")>-1&&(qi="error"),ic&&ic(r)};function tu(){ih.fire(new re("pluginStateChange",{pluginStatus:qi,pluginURL:pa}))}var ih=new de,oh=function(){return qi},Lo=function(){if(qi!=="deferred"||!pa)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");qi="loading",tu(),pa&&Sr({url:pa},function(r){r?Wd(r):(qi="loaded",tu())})},io={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return qi==="loaded"||io.applyArabicShaping!=null},isLoading:function(){return qi==="loading"},setState:function(r){qi=r.pluginStatus,pa=r.pluginURL},isParsed:function(){return io.applyArabicShaping!=null&&io.processBidirectionalText!=null&&io.processStyledBidirectionalText!=null},getPluginURL:function(){return pa}},ur=function(r,i){this.zoom=r,i?(this.now=i.now,this.fadeDuration=i.fadeDuration,this.zoomHistory=i.zoomHistory,this.transition=i.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new th,this.transition={})};ur.prototype.isSupportedScript=function(r){return function(i,s){for(var h=0,m=i;h<m.length;h+=1)if(!$i(m[h].charCodeAt(0),s))return!1;return!0}(r,io.isLoaded())},ur.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},ur.prototype.getCrossfadeParameters=function(){var r=this.zoom,i=r-Math.floor(r),s=this.crossFadingFactor();return r>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:i+(1-i)*s}:{fromScale:.5,toScale:1,t:1-(1-s)*i}};var Ho=function(r,i){this.property=r,this.value=i,this.expression=function(s,h){if(Hu(s))return new Ys(s,h);if(Gl(s)){var m=Bd(s,h);if(m.result==="error")throw new Error(m.value.map(function(_){return _.key+": "+_.message}).join(", "));return m.value}var y=s;return typeof s=="string"&&h.type==="color"&&(y=Mr.parse(s)),{kind:"constant",evaluate:function(){return y}}}(i===void 0?r.specification.default:i,r.specification)};Ho.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},Ho.prototype.possiblyEvaluate=function(r,i,s){return this.property.possiblyEvaluate(this,r,i,s)};var fo=function(r){this.property=r,this.value=new Ho(r,void 0)};fo.prototype.transitioned=function(r,i){return new ws(this.property,this.value,i,q({},r.transition,this.transition),r.now)},fo.prototype.untransitioned=function(){return new ws(this.property,this.value,null,{},0)};var ui=function(r){this._properties=r,this._values=Object.create(r.defaultTransitionablePropertyValues)};ui.prototype.getValue=function(r){return Ee(this._values[r].value.value)},ui.prototype.setValue=function(r,i){this._values.hasOwnProperty(r)||(this._values[r]=new fo(this._values[r].property)),this._values[r].value=new Ho(this._values[r].property,i===null?void 0:Ee(i))},ui.prototype.getTransition=function(r){return Ee(this._values[r].transition)},ui.prototype.setTransition=function(r,i){this._values.hasOwnProperty(r)||(this._values[r]=new fo(this._values[r].property)),this._values[r].transition=Ee(i)||void 0},ui.prototype.serialize=function(){for(var r={},i=0,s=Object.keys(this._values);i<s.length;i+=1){var h=s[i],m=this.getValue(h);m!==void 0&&(r[h]=m);var y=this.getTransition(h);y!==void 0&&(r[h+"-transition"]=y)}return r},ui.prototype.transitioned=function(r,i){for(var s=new Oa(this._properties),h=0,m=Object.keys(this._values);h<m.length;h+=1){var y=m[h];s._values[y]=this._values[y].transitioned(r,i._values[y])}return s},ui.prototype.untransitioned=function(){for(var r=new Oa(this._properties),i=0,s=Object.keys(this._values);i<s.length;i+=1){var h=s[i];r._values[h]=this._values[h].untransitioned()}return r};var ws=function(r,i,s,h,m){this.property=r,this.value=i,this.begin=m+h.delay||0,this.end=this.begin+h.duration||0,r.specification.transition&&(h.delay||h.duration)&&(this.prior=s)};ws.prototype.possiblyEvaluate=function(r,i,s){var h=r.now||0,m=this.value.possiblyEvaluate(r,i,s),y=this.prior;if(y){if(h>this.end)return this.prior=null,m;if(this.value.isDataDriven())return this.prior=null,m;if(h<this.begin)return y.possiblyEvaluate(r,i,s);var _=(h-this.begin)/(this.end-this.begin);return this.property.interpolate(y.possiblyEvaluate(r,i,s),m,function(A){if(A<=0)return 0;if(A>=1)return 1;var C=A*A,I=C*A;return 4*(A<.5?I:3*(A-C)+I-.75)}(_))}return m};var Oa=function(r){this._properties=r,this._values=Object.create(r.defaultTransitioningPropertyValues)};Oa.prototype.possiblyEvaluate=function(r,i,s){for(var h=new ru(this._properties),m=0,y=Object.keys(this._values);m<y.length;m+=1){var _=y[m];h._values[_]=this._values[_].possiblyEvaluate(r,i,s)}return h},Oa.prototype.hasTransition=function(){for(var r=0,i=Object.keys(this._values);r<i.length;r+=1)if(this._values[i[r]].prior)return!0;return!1};var Oo=function(r){this._properties=r,this._values=Object.create(r.defaultPropertyValues)};Oo.prototype.getValue=function(r){return Ee(this._values[r].value)},Oo.prototype.setValue=function(r,i){this._values[r]=new Ho(this._values[r].property,i===null?void 0:Ee(i))},Oo.prototype.serialize=function(){for(var r={},i=0,s=Object.keys(this._values);i<s.length;i+=1){var h=s[i],m=this.getValue(h);m!==void 0&&(r[h]=m)}return r},Oo.prototype.possiblyEvaluate=function(r,i,s){for(var h=new ru(this._properties),m=0,y=Object.keys(this._values);m<y.length;m+=1){var _=y[m];h._values[_]=this._values[_].possiblyEvaluate(r,i,s)}return h};var _i=function(r,i,s){this.property=r,this.value=i,this.parameters=s};_i.prototype.isConstant=function(){return this.value.kind==="constant"},_i.prototype.constantOr=function(r){return this.value.kind==="constant"?this.value.value:r},_i.prototype.evaluate=function(r,i,s,h){return this.property.evaluate(this.value,this.parameters,r,i,s,h)};var ru=function(r){this._properties=r,this._values=Object.create(r.defaultPossiblyEvaluatedValues)};ru.prototype.get=function(r){return this._values[r]};var Ct=function(r){this.specification=r};Ct.prototype.possiblyEvaluate=function(r,i){return r.expression.evaluate(i)},Ct.prototype.interpolate=function(r,i,s){var h=Ks[this.specification.type];return h?h(r,i,s):r};var bt=function(r,i){this.specification=r,this.overrides=i};bt.prototype.possiblyEvaluate=function(r,i,s,h){return new _i(this,r.expression.kind==="constant"||r.expression.kind==="camera"?{kind:"constant",value:r.expression.evaluate(i,null,{},s,h)}:r.expression,i)},bt.prototype.interpolate=function(r,i,s){if(r.value.kind!=="constant"||i.value.kind!=="constant")return r;if(r.value.value===void 0||i.value.value===void 0)return new _i(this,{kind:"constant",value:void 0},r.parameters);var h=Ks[this.specification.type];return h?new _i(this,{kind:"constant",value:h(r.value.value,i.value.value,s)},r.parameters):r},bt.prototype.evaluate=function(r,i,s,h,m,y){return r.kind==="constant"?r.value:r.evaluate(i,s,h,m,y)};var oc=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.possiblyEvaluate=function(s,h,m,y){if(s.value===void 0)return new _i(this,{kind:"constant",value:void 0},h);if(s.expression.kind==="constant"){var _=s.expression.evaluate(h,null,{},m,y),A=s.property.specification.type==="resolvedImage"&&typeof _!="string"?_.name:_,C=this._calculate(A,A,A,h);return new _i(this,{kind:"constant",value:C},h)}if(s.expression.kind==="camera"){var I=this._calculate(s.expression.evaluate({zoom:h.zoom-1}),s.expression.evaluate({zoom:h.zoom}),s.expression.evaluate({zoom:h.zoom+1}),h);return new _i(this,{kind:"constant",value:I},h)}return new _i(this,s.expression,h)},i.prototype.evaluate=function(s,h,m,y,_,A){if(s.kind==="source"){var C=s.evaluate(h,m,y,_,A);return this._calculate(C,C,C,h)}return s.kind==="composite"?this._calculate(s.evaluate({zoom:Math.floor(h.zoom)-1},m,y),s.evaluate({zoom:Math.floor(h.zoom)},m,y),s.evaluate({zoom:Math.floor(h.zoom)+1},m,y),h):s.value},i.prototype._calculate=function(s,h,m,y){return y.zoom>y.zoomHistory.lastIntegerZoom?{from:s,to:h}:{from:m,to:h}},i.prototype.interpolate=function(s){return s},i}(bt),xi=function(r){this.specification=r};xi.prototype.possiblyEvaluate=function(r,i,s,h){if(r.value!==void 0){if(r.expression.kind==="constant"){var m=r.expression.evaluate(i,null,{},s,h);return this._calculate(m,m,m,i)}return this._calculate(r.expression.evaluate(new ur(Math.floor(i.zoom-1),i)),r.expression.evaluate(new ur(Math.floor(i.zoom),i)),r.expression.evaluate(new ur(Math.floor(i.zoom+1),i)),i)}},xi.prototype._calculate=function(r,i,s,h){return h.zoom>h.zoomHistory.lastIntegerZoom?{from:r,to:i}:{from:s,to:i}},xi.prototype.interpolate=function(r){return r};var Do=function(r){this.specification=r};Do.prototype.possiblyEvaluate=function(r,i,s,h){return!!r.expression.evaluate(i,null,{},s,h)},Do.prototype.interpolate=function(){return!1};var ci=function(r){for(var i in this.properties=r,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],r){var s=r[i];s.specification.overridable&&this.overridableProperties.push(i);var h=this.defaultPropertyValues[i]=new Ho(s,void 0),m=this.defaultTransitionablePropertyValues[i]=new fo(s);this.defaultTransitioningPropertyValues[i]=m.untransitioned(),this.defaultPossiblyEvaluatedValues[i]=h.possiblyEvaluate({})}};_t("DataDrivenProperty",bt),_t("DataConstantProperty",Ct),_t("CrossFadedDataDrivenProperty",oc),_t("CrossFadedProperty",xi),_t("ColorRampProperty",Do);var Zo=function(r){function i(s,h){if(r.call(this),this.id=s.id,this.type=s.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},s.type!=="custom"&&(this.metadata=(s=s).metadata,this.minzoom=s.minzoom,this.maxzoom=s.maxzoom,s.type!=="background"&&(this.source=s.source,this.sourceLayer=s["source-layer"],this.filter=s.filter),h.layout&&(this._unevaluatedLayout=new Oo(h.layout)),h.paint)){for(var m in this._transitionablePaint=new ui(h.paint),s.paint)this.setPaintProperty(m,s.paint[m],{validate:!1});for(var y in s.layout)this.setLayoutProperty(y,s.layout[y],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ru(h.paint)}}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},i.prototype.getLayoutProperty=function(s){return s==="visibility"?this.visibility:this._unevaluatedLayout.getValue(s)},i.prototype.setLayoutProperty=function(s,h,m){m===void 0&&(m={}),h!=null&&this._validate(Jl,"layers."+this.id+".layout."+s,s,h,m)||(s!=="visibility"?this._unevaluatedLayout.setValue(s,h):this.visibility=h)},i.prototype.getPaintProperty=function(s){return xe(s,"-transition")?this._transitionablePaint.getTransition(s.slice(0,-11)):this._transitionablePaint.getValue(s)},i.prototype.setPaintProperty=function(s,h,m){if(m===void 0&&(m={}),h!=null&&this._validate(Ov,"layers."+this.id+".paint."+s,s,h,m))return!1;if(xe(s,"-transition"))return this._transitionablePaint.setTransition(s.slice(0,-11),h||void 0),!1;var y=this._transitionablePaint._values[s],_=y.property.specification["property-type"]==="cross-faded-data-driven",A=y.value.isDataDriven(),C=y.value;this._transitionablePaint.setValue(s,h),this._handleSpecialPaintPropertyUpdate(s);var I=this._transitionablePaint._values[s].value;return I.isDataDriven()||A||_||this._handleOverridablePaintPropertyUpdate(s,C,I)},i.prototype._handleSpecialPaintPropertyUpdate=function(s){},i.prototype._handleOverridablePaintPropertyUpdate=function(s,h,m){return!1},i.prototype.isHidden=function(s){return!!(this.minzoom&&s<this.minzoom)||!!(this.maxzoom&&s>=this.maxzoom)||this.visibility==="none"},i.prototype.updateTransitions=function(s){this._transitioningPaint=this._transitionablePaint.transitioned(s,this._transitioningPaint)},i.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},i.prototype.recalculate=function(s,h){s.getCrossfadeParameters&&(this._crossfadeParameters=s.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(s,void 0,h)),this.paint=this._transitioningPaint.possiblyEvaluate(s,void 0,h)},i.prototype.serialize=function(){var s={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(s.layout=s.layout||{},s.layout.visibility=this.visibility),ve(s,function(h,m){return!(h===void 0||m==="layout"&&!Object.keys(h).length||m==="paint"&&!Object.keys(h).length)})},i.prototype._validate=function(s,h,m,y,_){return _===void 0&&(_={}),(!_||_.validate!==!1)&&Yl(this,s.call(Ql,{key:h,layerType:this.type,objectKey:m,value:y,styleSpec:Z,style:{glyphs:!0,sprite:!0}}))},i.prototype.is3D=function(){return!1},i.prototype.isTileClipped=function(){return!1},i.prototype.hasOffscreenPass=function(){return!1},i.prototype.resize=function(){},i.prototype.isStateDependent=function(){for(var s in this.paint._values){var h=this.paint.get(s);if(h instanceof _i&&vs(h.property.specification)&&(h.value.kind==="source"||h.value.kind==="composite")&&h.value.isStateDependent)return!0}return!1},i}(de),ah={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},ac=function(r,i){this._structArray=r,this._pos1=i*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Or=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function ei(r,i){i===void 0&&(i=1);var s=0,h=0;return{members:r.map(function(m){var y=ah[m.type].BYTES_PER_ELEMENT,_=s=Gd(s,Math.max(i,y)),A=m.components||1;return h=Math.max(h,y),s+=y*A,{name:m.name,type:m.type,components:A,offset:_}}),size:Gd(s,Math.max(h,i)),alignment:i}}function Gd(r,i){return Math.ceil(r/i)*i}Or.serialize=function(r,i){return r._trim(),i&&(r.isTransferred=!0,i.push(r.arrayBuffer)),{length:r.length,arrayBuffer:r.arrayBuffer}},Or.deserialize=function(r){var i=Object.create(this.prototype);return i.arrayBuffer=r.arrayBuffer,i.length=r.length,i.capacity=r.arrayBuffer.byteLength/i.bytesPerElement,i._refreshViews(),i},Or.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Or.prototype.clear=function(){this.length=0},Or.prototype.resize=function(r){this.reserve(r),this.length=r},Or.prototype.reserve=function(r){if(r>this.capacity){this.capacity=Math.max(r,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var i=this.uint8;this._refreshViews(),i&&this.uint8.set(i)}},Or.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var As=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,h){var m=this.length;return this.resize(m+1),this.emplace(m,s,h)},i.prototype.emplace=function(s,h,m){var y=2*s;return this.int16[y+0]=h,this.int16[y+1]=m,s},i}(Or);As.prototype.bytesPerElement=4,_t("StructArrayLayout2i4",As);var sh=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,h,m,y){var _=this.length;return this.resize(_+1),this.emplace(_,s,h,m,y)},i.prototype.emplace=function(s,h,m,y,_){var A=4*s;return this.int16[A+0]=h,this.int16[A+1]=m,this.int16[A+2]=y,this.int16[A+3]=_,s},i}(Or);sh.prototype.bytesPerElement=8,_t("StructArrayLayout4i8",sh);var ha=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,h,m,y,_,A){var C=this.length;return this.resize(C+1),this.emplace(C,s,h,m,y,_,A)},i.prototype.emplace=function(s,h,m,y,_,A,C){var I=6*s;return this.int16[I+0]=h,this.int16[I+1]=m,this.int16[I+2]=y,this.int16[I+3]=_,this.int16[I+4]=A,this.int16[I+5]=C,s},i}(Or);ha.prototype.bytesPerElement=12,_t("StructArrayLayout2i4i12",ha);var Wi=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,h,m,y,_,A){var C=this.length;return this.resize(C+1),this.emplace(C,s,h,m,y,_,A)},i.prototype.emplace=function(s,h,m,y,_,A,C){var I=4*s,R=8*s;return this.int16[I+0]=h,this.int16[I+1]=m,this.uint8[R+4]=y,this.uint8[R+5]=_,this.uint8[R+6]=A,this.uint8[R+7]=C,s},i}(Or);Wi.prototype.bytesPerElement=8,_t("StructArrayLayout2i4ub8",Wi);var rl=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,h){var m=this.length;return this.resize(m+1),this.emplace(m,s,h)},i.prototype.emplace=function(s,h,m){var y=2*s;return this.float32[y+0]=h,this.float32[y+1]=m,s},i}(Or);rl.prototype.bytesPerElement=8,_t("StructArrayLayout2f8",rl);var Ko=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,h,m,y,_,A,C,I,R,L){var j=this.length;return this.resize(j+1),this.emplace(j,s,h,m,y,_,A,C,I,R,L)},i.prototype.emplace=function(s,h,m,y,_,A,C,I,R,L,j){var G=10*s;return this.uint16[G+0]=h,this.uint16[G+1]=m,this.uint16[G+2]=y,this.uint16[G+3]=_,this.uint16[G+4]=A,this.uint16[G+5]=C,this.uint16[G+6]=I,this.uint16[G+7]=R,this.uint16[G+8]=L,this.uint16[G+9]=j,s},i}(Or);Ko.prototype.bytesPerElement=20,_t("StructArrayLayout10ui20",Ko);var sc=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,h,m,y,_,A,C,I,R,L,j,G){var oe=this.length;return this.resize(oe+1),this.emplace(oe,s,h,m,y,_,A,C,I,R,L,j,G)},i.prototype.emplace=function(s,h,m,y,_,A,C,I,R,L,j,G,oe){var ae=12*s;return this.int16[ae+0]=h,this.int16[ae+1]=m,this.int16[ae+2]=y,this.int16[ae+3]=_,this.uint16[ae+4]=A,this.uint16[ae+5]=C,this.uint16[ae+6]=I,this.uint16[ae+7]=R,this.int16[ae+8]=L,this.int16[ae+9]=j,this.int16[ae+10]=G,this.int16[ae+11]=oe,s},i}(Or);sc.prototype.bytesPerElement=24,_t("StructArrayLayout4i4ui4i24",sc);var nl=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,h,m){var y=this.length;return this.resize(y+1),this.emplace(y,s,h,m)},i.prototype.emplace=function(s,h,m,y){var _=3*s;return this.float32[_+0]=h,this.float32[_+1]=m,this.float32[_+2]=y,s},i}(Or);nl.prototype.bytesPerElement=12,_t("StructArrayLayout3f12",nl);var nu=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s){var h=this.length;return this.resize(h+1),this.emplace(h,s)},i.prototype.emplace=function(s,h){return this.uint32[1*s+0]=h,s},i}(Or);nu.prototype.bytesPerElement=4,_t("StructArrayLayout1ul4",nu);var lh=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,h,m,y,_,A,C,I,R){var L=this.length;return this.resize(L+1),this.emplace(L,s,h,m,y,_,A,C,I,R)},i.prototype.emplace=function(s,h,m,y,_,A,C,I,R,L){var j=10*s,G=5*s;return this.int16[j+0]=h,this.int16[j+1]=m,this.int16[j+2]=y,this.int16[j+3]=_,this.int16[j+4]=A,this.int16[j+5]=C,this.uint32[G+3]=I,this.uint16[j+8]=R,this.uint16[j+9]=L,s},i}(Or);lh.prototype.bytesPerElement=20,_t("StructArrayLayout6i1ul2ui20",lh);var il=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,h,m,y,_,A){var C=this.length;return this.resize(C+1),this.emplace(C,s,h,m,y,_,A)},i.prototype.emplace=function(s,h,m,y,_,A,C){var I=6*s;return this.int16[I+0]=h,this.int16[I+1]=m,this.int16[I+2]=y,this.int16[I+3]=_,this.int16[I+4]=A,this.int16[I+5]=C,s},i}(Or);il.prototype.bytesPerElement=12,_t("StructArrayLayout2i2i2i12",il);var Es=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,h,m,y,_){var A=this.length;return this.resize(A+1),this.emplace(A,s,h,m,y,_)},i.prototype.emplace=function(s,h,m,y,_,A){var C=4*s,I=8*s;return this.float32[C+0]=h,this.float32[C+1]=m,this.float32[C+2]=y,this.int16[I+6]=_,this.int16[I+7]=A,s},i}(Or);Es.prototype.bytesPerElement=16,_t("StructArrayLayout2f1f2i16",Es);var uh=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,h,m,y){var _=this.length;return this.resize(_+1),this.emplace(_,s,h,m,y)},i.prototype.emplace=function(s,h,m,y,_){var A=12*s,C=3*s;return this.uint8[A+0]=h,this.uint8[A+1]=m,this.float32[C+1]=y,this.float32[C+2]=_,s},i}(Or);uh.prototype.bytesPerElement=12,_t("StructArrayLayout2ub2f12",uh);var Da=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,h,m){var y=this.length;return this.resize(y+1),this.emplace(y,s,h,m)},i.prototype.emplace=function(s,h,m,y){var _=3*s;return this.uint16[_+0]=h,this.uint16[_+1]=m,this.uint16[_+2]=y,s},i}(Or);Da.prototype.bytesPerElement=6,_t("StructArrayLayout3ui6",Da);var Ba=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,h,m,y,_,A,C,I,R,L,j,G,oe,ae,ge,pe,Se){var Re=this.length;return this.resize(Re+1),this.emplace(Re,s,h,m,y,_,A,C,I,R,L,j,G,oe,ae,ge,pe,Se)},i.prototype.emplace=function(s,h,m,y,_,A,C,I,R,L,j,G,oe,ae,ge,pe,Se,Re){var Oe=24*s,Be=12*s,Ge=48*s;return this.int16[Oe+0]=h,this.int16[Oe+1]=m,this.uint16[Oe+2]=y,this.uint16[Oe+3]=_,this.uint32[Be+2]=A,this.uint32[Be+3]=C,this.uint32[Be+4]=I,this.uint16[Oe+10]=R,this.uint16[Oe+11]=L,this.uint16[Oe+12]=j,this.float32[Be+7]=G,this.float32[Be+8]=oe,this.uint8[Ge+36]=ae,this.uint8[Ge+37]=ge,this.uint8[Ge+38]=pe,this.uint32[Be+10]=Se,this.int16[Oe+22]=Re,s},i}(Or);Ba.prototype.bytesPerElement=48,_t("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Ba);var lc=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,h,m,y,_,A,C,I,R,L,j,G,oe,ae,ge,pe,Se,Re,Oe,Be,Ge,Je,tt,Et,lt,Tt,ht,Yt){var Nt=this.length;return this.resize(Nt+1),this.emplace(Nt,s,h,m,y,_,A,C,I,R,L,j,G,oe,ae,ge,pe,Se,Re,Oe,Be,Ge,Je,tt,Et,lt,Tt,ht,Yt)},i.prototype.emplace=function(s,h,m,y,_,A,C,I,R,L,j,G,oe,ae,ge,pe,Se,Re,Oe,Be,Ge,Je,tt,Et,lt,Tt,ht,Yt,Nt){var wt=34*s,ar=17*s;return this.int16[wt+0]=h,this.int16[wt+1]=m,this.int16[wt+2]=y,this.int16[wt+3]=_,this.int16[wt+4]=A,this.int16[wt+5]=C,this.int16[wt+6]=I,this.int16[wt+7]=R,this.uint16[wt+8]=L,this.uint16[wt+9]=j,this.uint16[wt+10]=G,this.uint16[wt+11]=oe,this.uint16[wt+12]=ae,this.uint16[wt+13]=ge,this.uint16[wt+14]=pe,this.uint16[wt+15]=Se,this.uint16[wt+16]=Re,this.uint16[wt+17]=Oe,this.uint16[wt+18]=Be,this.uint16[wt+19]=Ge,this.uint16[wt+20]=Je,this.uint16[wt+21]=tt,this.uint16[wt+22]=Et,this.uint32[ar+12]=lt,this.float32[ar+13]=Tt,this.float32[ar+14]=ht,this.float32[ar+15]=Yt,this.float32[ar+16]=Nt,s},i}(Or);lc.prototype.bytesPerElement=68,_t("StructArrayLayout8i15ui1ul4f68",lc);var Na=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s){var h=this.length;return this.resize(h+1),this.emplace(h,s)},i.prototype.emplace=function(s,h){return this.float32[1*s+0]=h,s},i}(Or);Na.prototype.bytesPerElement=4,_t("StructArrayLayout1f4",Na);var mo=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,h,m){var y=this.length;return this.resize(y+1),this.emplace(y,s,h,m)},i.prototype.emplace=function(s,h,m,y){var _=3*s;return this.int16[_+0]=h,this.int16[_+1]=m,this.int16[_+2]=y,s},i}(Or);mo.prototype.bytesPerElement=6,_t("StructArrayLayout3i6",mo);var ch=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,h,m){var y=this.length;return this.resize(y+1),this.emplace(y,s,h,m)},i.prototype.emplace=function(s,h,m,y){var _=4*s;return this.uint32[2*s+0]=h,this.uint16[_+2]=m,this.uint16[_+3]=y,s},i}(Or);ch.prototype.bytesPerElement=8,_t("StructArrayLayout1ul2ui8",ch);var iu=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,h){var m=this.length;return this.resize(m+1),this.emplace(m,s,h)},i.prototype.emplace=function(s,h,m){var y=2*s;return this.uint16[y+0]=h,this.uint16[y+1]=m,s},i}(Or);iu.prototype.bytesPerElement=4,_t("StructArrayLayout2ui4",iu);var ph=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s){var h=this.length;return this.resize(h+1),this.emplace(h,s)},i.prototype.emplace=function(s,h){return this.uint16[1*s+0]=h,s},i}(Or);ph.prototype.bytesPerElement=2,_t("StructArrayLayout1ui2",ph);var uc=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,h,m,y){var _=this.length;return this.resize(_+1),this.emplace(_,s,h,m,y)},i.prototype.emplace=function(s,h,m,y,_){var A=4*s;return this.float32[A+0]=h,this.float32[A+1]=m,this.float32[A+2]=y,this.float32[A+3]=_,s},i}(Or);uc.prototype.bytesPerElement=16,_t("StructArrayLayout4f16",uc);var l=function(r){function i(){r.apply(this,arguments)}r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i;var s={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return s.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},s.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},s.x1.get=function(){return this._structArray.int16[this._pos2+2]},s.y1.get=function(){return this._structArray.int16[this._pos2+3]},s.x2.get=function(){return this._structArray.int16[this._pos2+4]},s.y2.get=function(){return this._structArray.int16[this._pos2+5]},s.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},s.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},s.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},s.anchorPoint.get=function(){return new k(this.anchorPointX,this.anchorPointY)},Object.defineProperties(i.prototype,s),i}(ac);l.prototype.size=20;var p=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.get=function(s){return new l(this,s)},i}(lh);_t("CollisionBoxArray",p);var u=function(r){function i(){r.apply(this,arguments)}r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i;var s={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return s.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},s.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},s.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},s.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},s.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},s.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},s.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},s.segment.get=function(){return this._structArray.uint16[this._pos2+10]},s.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},s.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},s.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},s.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},s.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},s.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},s.placedOrientation.set=function(h){this._structArray.uint8[this._pos1+37]=h},s.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},s.hidden.set=function(h){this._structArray.uint8[this._pos1+38]=h},s.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},s.crossTileID.set=function(h){this._structArray.uint32[this._pos4+10]=h},s.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(i.prototype,s),i}(ac);u.prototype.size=48;var f=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.get=function(s){return new u(this,s)},i}(Ba);_t("PlacedSymbolArray",f);var g=function(r){function i(){r.apply(this,arguments)}r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i;var s={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return s.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},s.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},s.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},s.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},s.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},s.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},s.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},s.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},s.key.get=function(){return this._structArray.uint16[this._pos2+8]},s.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},s.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},s.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},s.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},s.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},s.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},s.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},s.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},s.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},s.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},s.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},s.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},s.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},s.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},s.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},s.crossTileID.set=function(h){this._structArray.uint32[this._pos4+12]=h},s.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},s.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},s.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},s.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(i.prototype,s),i}(ac);g.prototype.size=68;var b=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.get=function(s){return new g(this,s)},i}(lc);_t("SymbolInstanceArray",b);var w=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.getoffsetX=function(s){return this.float32[1*s+0]},i}(Na);_t("GlyphOffsetArray",w);var S=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.getx=function(s){return this.int16[3*s+0]},i.prototype.gety=function(s){return this.int16[3*s+1]},i.prototype.gettileUnitDistanceFromAnchor=function(s){return this.int16[3*s+2]},i}(mo);_t("SymbolLineVertexArray",S);var M=function(r){function i(){r.apply(this,arguments)}r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i;var s={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return s.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},s.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},s.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(i.prototype,s),i}(ac);M.prototype.size=8;var B=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.get=function(s){return new M(this,s)},i}(ch);_t("FeatureIndexArray",B);var K=ei([{name:"a_pos",components:2,type:"Int16"}],4).members,Q=function(r){r===void 0&&(r=[]),this.segments=r};function J(r,i){return 256*(r=D(Math.floor(r),0,255))+D(Math.floor(i),0,255)}Q.prototype.prepareSegment=function(r,i,s,h){var m=this.segments[this.segments.length-1];return r>Q.MAX_VERTEX_ARRAY_LENGTH&&he("Max vertices per segment is "+Q.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+r),(!m||m.vertexLength+r>Q.MAX_VERTEX_ARRAY_LENGTH||m.sortKey!==h)&&(m={vertexOffset:i.length,primitiveOffset:s.length,vertexLength:0,primitiveLength:0},h!==void 0&&(m.sortKey=h),this.segments.push(m)),m},Q.prototype.get=function(){return this.segments},Q.prototype.destroy=function(){for(var r=0,i=this.segments;r<i.length;r+=1){var s=i[r];for(var h in s.vaos)s.vaos[h].destroy()}},Q.simpleSegment=function(r,i,s,h){return new Q([{vertexOffset:r,primitiveOffset:i,vertexLength:s,primitiveLength:h,vaos:{},sortKey:0}])},Q.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,_t("SegmentVector",Q);var le=ei([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),se=v(function(r){r.exports=function(i,s){var h,m,y,_,A,C,I,R;for(m=i.length-(h=3&i.length),y=s,A=3432918353,C=461845907,R=0;R<m;)I=255&i.charCodeAt(R)|(255&i.charCodeAt(++R))<<8|(255&i.charCodeAt(++R))<<16|(255&i.charCodeAt(++R))<<24,++R,y=27492+(65535&(_=5*(65535&(y=(y^=I=(65535&(I=(I=(65535&I)*A+(((I>>>16)*A&65535)<<16)&4294967295)<<15|I>>>17))*C+(((I>>>16)*C&65535)<<16)&4294967295)<<13|y>>>19))+((5*(y>>>16)&65535)<<16)&4294967295))+((58964+(_>>>16)&65535)<<16);switch(I=0,h){case 3:I^=(255&i.charCodeAt(R+2))<<16;case 2:I^=(255&i.charCodeAt(R+1))<<8;case 1:y^=I=(65535&(I=(I=(65535&(I^=255&i.charCodeAt(R)))*A+(((I>>>16)*A&65535)<<16)&4294967295)<<15|I>>>17))*C+(((I>>>16)*C&65535)<<16)&4294967295}return y^=i.length,y=2246822507*(65535&(y^=y>>>16))+((2246822507*(y>>>16)&65535)<<16)&4294967295,y=3266489909*(65535&(y^=y>>>13))+((3266489909*(y>>>16)&65535)<<16)&4294967295,(y^=y>>>16)>>>0}}),ye=v(function(r){r.exports=function(i,s){for(var h,m=i.length,y=s^m,_=0;m>=4;)h=1540483477*(65535&(h=255&i.charCodeAt(_)|(255&i.charCodeAt(++_))<<8|(255&i.charCodeAt(++_))<<16|(255&i.charCodeAt(++_))<<24))+((1540483477*(h>>>16)&65535)<<16),y=1540483477*(65535&y)+((1540483477*(y>>>16)&65535)<<16)^(h=1540483477*(65535&(h^=h>>>24))+((1540483477*(h>>>16)&65535)<<16)),m-=4,++_;switch(m){case 3:y^=(255&i.charCodeAt(_+2))<<16;case 2:y^=(255&i.charCodeAt(_+1))<<8;case 1:y=1540483477*(65535&(y^=255&i.charCodeAt(_)))+((1540483477*(y>>>16)&65535)<<16)}return y=1540483477*(65535&(y^=y>>>13))+((1540483477*(y>>>16)&65535)<<16),(y^=y>>>15)>>>0}}),ie=se,me=ye;ie.murmur3=se,ie.murmur2=me;var _e=function(){this.ids=[],this.positions=[],this.indexed=!1};_e.prototype.add=function(r,i,s,h){this.ids.push(Fe(r)),this.positions.push(i,s,h)},_e.prototype.getPositions=function(r){for(var i=Fe(r),s=0,h=this.ids.length-1;s<h;){var m=s+h>>1;this.ids[m]>=i?h=m:s=m+1}for(var y=[];this.ids[s]===i;)y.push({index:this.positions[3*s],start:this.positions[3*s+1],end:this.positions[3*s+2]}),s++;return y},_e.serialize=function(r,i){var s=new Float64Array(r.ids),h=new Uint32Array(r.positions);return function m(y,_,A,C){for(;A<C;){for(var I=y[A+C>>1],R=A-1,L=C+1;;){do R++;while(y[R]<I);do L--;while(y[L]>I);if(R>=L)break;De(y,R,L),De(_,3*R,3*L),De(_,3*R+1,3*L+1),De(_,3*R+2,3*L+2)}L-A<C-L?(m(y,_,A,L),A=L+1):(m(y,_,L+1,C),C=L)}}(s,h,0,s.length-1),i&&i.push(s.buffer,h.buffer),{ids:s,positions:h}},_e.deserialize=function(r){var i=new _e;return i.ids=r.ids,i.positions=r.positions,i.indexed=!0,i};var Pe=Math.pow(2,53)-1;function Fe(r){var i=+r;return!isNaN(i)&&i<=Pe?i:ie(String(r))}function De(r,i,s){var h=r[i];r[i]=r[s],r[s]=h}_t("FeaturePositionMap",_e);var Ue=function(r,i){this.gl=r.gl,this.location=i},He=function(r){function i(s,h){r.call(this,s,h),this.current=0}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.set=function(s){this.current!==s&&(this.current=s,this.gl.uniform1i(this.location,s))},i}(Ue),et=function(r){function i(s,h){r.call(this,s,h),this.current=0}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.set=function(s){this.current!==s&&(this.current=s,this.gl.uniform1f(this.location,s))},i}(Ue),Ye=function(r){function i(s,h){r.call(this,s,h),this.current=[0,0]}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.set=function(s){s[0]===this.current[0]&&s[1]===this.current[1]||(this.current=s,this.gl.uniform2f(this.location,s[0],s[1]))},i}(Ue),dt=function(r){function i(s,h){r.call(this,s,h),this.current=[0,0,0]}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.set=function(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]||(this.current=s,this.gl.uniform3f(this.location,s[0],s[1],s[2]))},i}(Ue),kt=function(r){function i(s,h){r.call(this,s,h),this.current=[0,0,0,0]}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.set=function(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]&&s[3]===this.current[3]||(this.current=s,this.gl.uniform4f(this.location,s[0],s[1],s[2],s[3]))},i}(Ue),Rt=function(r){function i(s,h){r.call(this,s,h),this.current=Mr.transparent}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.set=function(s){s.r===this.current.r&&s.g===this.current.g&&s.b===this.current.b&&s.a===this.current.a||(this.current=s,this.gl.uniform4f(this.location,s.r,s.g,s.b,s.a))},i}(Ue),Pt=new Float32Array(16),br=function(r){function i(s,h){r.call(this,s,h),this.current=Pt}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.set=function(s){if(s[12]!==this.current[12]||s[0]!==this.current[0])return this.current=s,void this.gl.uniformMatrix4fv(this.location,!1,s);for(var h=1;h<16;h++)if(s[h]!==this.current[h]){this.current=s,this.gl.uniformMatrix4fv(this.location,!1,s);break}},i}(Ue);function yt(r){return[J(255*r.r,255*r.g),J(255*r.b,255*r.a)]}var qt=function(r,i,s){this.value=r,this.uniformNames=i.map(function(h){return"u_"+h}),this.type=s};qt.prototype.setUniform=function(r,i,s){r.set(s.constantOr(this.value))},qt.prototype.getBinding=function(r,i,s){return this.type==="color"?new Rt(r,i):new et(r,i)};var Jt=function(r,i){this.uniformNames=i.map(function(s){return"u_"+s}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Jt.prototype.setConstantPatternPositions=function(r,i){this.pixelRatioFrom=i.pixelRatio,this.pixelRatioTo=r.pixelRatio,this.patternFrom=i.tlbr,this.patternTo=r.tlbr},Jt.prototype.setUniform=function(r,i,s,h){var m=h==="u_pattern_to"?this.patternTo:h==="u_pattern_from"?this.patternFrom:h==="u_pixel_ratio_to"?this.pixelRatioTo:h==="u_pixel_ratio_from"?this.pixelRatioFrom:null;m&&r.set(m)},Jt.prototype.getBinding=function(r,i,s){return s.substr(0,9)==="u_pattern"?new kt(r,i):new et(r,i)};var Vt=function(r,i,s,h){this.expression=r,this.type=s,this.maxValue=0,this.paintVertexAttributes=i.map(function(m){return{name:"a_"+m,type:"Float32",components:s==="color"?2:1,offset:0}}),this.paintVertexArray=new h};Vt.prototype.populatePaintArray=function(r,i,s,h,m){var y=this.paintVertexArray.length,_=this.expression.evaluate(new ur(0),i,{},h,[],m);this.paintVertexArray.resize(r),this._setPaintValue(y,r,_)},Vt.prototype.updatePaintArray=function(r,i,s,h){var m=this.expression.evaluate({zoom:0},s,h);this._setPaintValue(r,i,m)},Vt.prototype._setPaintValue=function(r,i,s){if(this.type==="color")for(var h=yt(s),m=r;m<i;m++)this.paintVertexArray.emplace(m,h[0],h[1]);else{for(var y=r;y<i;y++)this.paintVertexArray.emplace(y,s);this.maxValue=Math.max(this.maxValue,Math.abs(s))}},Vt.prototype.upload=function(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Vt.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Ut=function(r,i,s,h,m,y){this.expression=r,this.uniformNames=i.map(function(_){return"u_"+_+"_t"}),this.type=s,this.useIntegerZoom=h,this.zoom=m,this.maxValue=0,this.paintVertexAttributes=i.map(function(_){return{name:"a_"+_,type:"Float32",components:s==="color"?4:2,offset:0}}),this.paintVertexArray=new y};Ut.prototype.populatePaintArray=function(r,i,s,h,m){var y=this.expression.evaluate(new ur(this.zoom),i,{},h,[],m),_=this.expression.evaluate(new ur(this.zoom+1),i,{},h,[],m),A=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValue(A,r,y,_)},Ut.prototype.updatePaintArray=function(r,i,s,h){var m=this.expression.evaluate({zoom:this.zoom},s,h),y=this.expression.evaluate({zoom:this.zoom+1},s,h);this._setPaintValue(r,i,m,y)},Ut.prototype._setPaintValue=function(r,i,s,h){if(this.type==="color")for(var m=yt(s),y=yt(h),_=r;_<i;_++)this.paintVertexArray.emplace(_,m[0],m[1],y[0],y[1]);else{for(var A=r;A<i;A++)this.paintVertexArray.emplace(A,s,h);this.maxValue=Math.max(this.maxValue,Math.abs(s),Math.abs(h))}},Ut.prototype.upload=function(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ut.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Ut.prototype.setUniform=function(r,i){var s=this.useIntegerZoom?Math.floor(i.zoom):i.zoom,h=D(this.expression.interpolationFactor(s,this.zoom,this.zoom+1),0,1);r.set(h)},Ut.prototype.getBinding=function(r,i,s){return new et(r,i)};var Xt=function(r,i,s,h,m,y){this.expression=r,this.type=i,this.useIntegerZoom=s,this.zoom=h,this.layerId=y,this.zoomInPaintVertexArray=new m,this.zoomOutPaintVertexArray=new m};Xt.prototype.populatePaintArray=function(r,i,s){var h=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(r),this.zoomOutPaintVertexArray.resize(r),this._setPaintValues(h,r,i.patterns&&i.patterns[this.layerId],s)},Xt.prototype.updatePaintArray=function(r,i,s,h,m){this._setPaintValues(r,i,s.patterns&&s.patterns[this.layerId],m)},Xt.prototype._setPaintValues=function(r,i,s,h){if(h&&s){var m=h[s.min],y=h[s.mid],_=h[s.max];if(m&&y&&_)for(var A=r;A<i;A++)this.zoomInPaintVertexArray.emplace(A,y.tl[0],y.tl[1],y.br[0],y.br[1],m.tl[0],m.tl[1],m.br[0],m.br[1],y.pixelRatio,m.pixelRatio),this.zoomOutPaintVertexArray.emplace(A,y.tl[0],y.tl[1],y.br[0],y.br[1],_.tl[0],_.tl[1],_.br[0],_.br[1],y.pixelRatio,_.pixelRatio)}},Xt.prototype.upload=function(r){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=r.createVertexBuffer(this.zoomInPaintVertexArray,le.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=r.createVertexBuffer(this.zoomOutPaintVertexArray,le.members,this.expression.isStateDependent))},Xt.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Ft=function(r,i,s){this.binders={},this._buffers=[];var h=[];for(var m in r.paint._values)if(s(m)){var y=r.paint.get(m);if(y instanceof _i&&vs(y.property.specification)){var _=Vn(m,r.type),A=y.value,C=y.property.specification.type,I=y.property.useIntegerZoom,R=y.property.specification["property-type"],L=R==="cross-faded"||R==="cross-faded-data-driven";if(A.kind==="constant")this.binders[m]=L?new Jt(A.value,_):new qt(A.value,_,C),h.push("/u_"+m);else if(A.kind==="source"||L){var j=mn(m,C,"source");this.binders[m]=L?new Xt(A,C,I,i,j,r.id):new Vt(A,_,C,j),h.push("/a_"+m)}else{var G=mn(m,C,"composite");this.binders[m]=new Ut(A,_,C,I,i,G),h.push("/z_"+m)}}}this.cacheKey=h.sort().join("")};Ft.prototype.getMaxValue=function(r){var i=this.binders[r];return i instanceof Vt||i instanceof Ut?i.maxValue:0},Ft.prototype.populatePaintArrays=function(r,i,s,h,m){for(var y in this.binders){var _=this.binders[y];(_ instanceof Vt||_ instanceof Ut||_ instanceof Xt)&&_.populatePaintArray(r,i,s,h,m)}},Ft.prototype.setConstantPatternPositions=function(r,i){for(var s in this.binders){var h=this.binders[s];h instanceof Jt&&h.setConstantPatternPositions(r,i)}},Ft.prototype.updatePaintArrays=function(r,i,s,h,m){var y=!1;for(var _ in r)for(var A=0,C=i.getPositions(_);A<C.length;A+=1){var I=C[A],R=s.feature(I.index);for(var L in this.binders){var j=this.binders[L];if((j instanceof Vt||j instanceof Ut||j instanceof Xt)&&j.expression.isStateDependent===!0){var G=h.paint.get(L);j.expression=G.value,j.updatePaintArray(I.start,I.end,R,r[_],m),y=!0}}}return y},Ft.prototype.defines=function(){var r=[];for(var i in this.binders){var s=this.binders[i];(s instanceof qt||s instanceof Jt)&&r.push.apply(r,s.uniformNames.map(function(h){return"#define HAS_UNIFORM_"+h}))}return r},Ft.prototype.getBinderAttributes=function(){var r=[];for(var i in this.binders){var s=this.binders[i];if(s instanceof Vt||s instanceof Ut)for(var h=0;h<s.paintVertexAttributes.length;h++)r.push(s.paintVertexAttributes[h].name);else if(s instanceof Xt)for(var m=0;m<le.members.length;m++)r.push(le.members[m].name)}return r},Ft.prototype.getBinderUniforms=function(){var r=[];for(var i in this.binders){var s=this.binders[i];if(s instanceof qt||s instanceof Jt||s instanceof Ut)for(var h=0,m=s.uniformNames;h<m.length;h+=1)r.push(m[h])}return r},Ft.prototype.getPaintVertexBuffers=function(){return this._buffers},Ft.prototype.getUniforms=function(r,i){var s=[];for(var h in this.binders){var m=this.binders[h];if(m instanceof qt||m instanceof Jt||m instanceof Ut)for(var y=0,_=m.uniformNames;y<_.length;y+=1){var A=_[y];if(i[A]){var C=m.getBinding(r,i[A],A);s.push({name:A,property:h,binding:C})}}}return s},Ft.prototype.setUniforms=function(r,i,s,h){for(var m=0,y=i;m<y.length;m+=1){var _=y[m],A=_.name,C=_.property;this.binders[C].setUniform(_.binding,h,s.get(C),A)}},Ft.prototype.updatePaintBuffers=function(r){for(var i in this._buffers=[],this.binders){var s=this.binders[i];if(r&&s instanceof Xt){var h=r.fromScale===2?s.zoomInPaintVertexBuffer:s.zoomOutPaintVertexBuffer;h&&this._buffers.push(h)}else(s instanceof Vt||s instanceof Ut)&&s.paintVertexBuffer&&this._buffers.push(s.paintVertexBuffer)}},Ft.prototype.upload=function(r){for(var i in this.binders){var s=this.binders[i];(s instanceof Vt||s instanceof Ut||s instanceof Xt)&&s.upload(r)}this.updatePaintBuffers()},Ft.prototype.destroy=function(){for(var r in this.binders){var i=this.binders[r];(i instanceof Vt||i instanceof Ut||i instanceof Xt)&&i.destroy()}};var Ot=function(r,i,s){s===void 0&&(s=function(){return!0}),this.programConfigurations={};for(var h=0,m=r;h<m.length;h+=1){var y=m[h];this.programConfigurations[y.id]=new Ft(y,i,s)}this.needsUpload=!1,this._featureMap=new _e,this._bufferOffset=0};function Vn(r,i){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[r]||[r.replace(i+"-","").replace(/-/g,"_")]}function mn(r,i,s){var h={color:{source:rl,composite:uc},number:{source:Na,composite:rl}},m=function(y){return{"line-pattern":{source:Ko,composite:Ko},"fill-pattern":{source:Ko,composite:Ko},"fill-extrusion-pattern":{source:Ko,composite:Ko}}[y]}(r);return m&&m[s]||h[i][s]}Ot.prototype.populatePaintArrays=function(r,i,s,h,m,y){for(var _ in this.programConfigurations)this.programConfigurations[_].populatePaintArrays(r,i,h,m,y);i.id!==void 0&&this._featureMap.add(i.id,s,this._bufferOffset,r),this._bufferOffset=r,this.needsUpload=!0},Ot.prototype.updatePaintArrays=function(r,i,s,h){for(var m=0,y=s;m<y.length;m+=1){var _=y[m];this.needsUpload=this.programConfigurations[_.id].updatePaintArrays(r,this._featureMap,i,_,h)||this.needsUpload}},Ot.prototype.get=function(r){return this.programConfigurations[r]},Ot.prototype.upload=function(r){if(this.needsUpload){for(var i in this.programConfigurations)this.programConfigurations[i].upload(r);this.needsUpload=!1}},Ot.prototype.destroy=function(){for(var r in this.programConfigurations)this.programConfigurations[r].destroy()},_t("ConstantBinder",qt),_t("CrossFadedConstantBinder",Jt),_t("SourceExpressionBinder",Vt),_t("CrossFadedCompositeBinder",Xt),_t("CompositeExpressionBinder",Ut),_t("ProgramConfiguration",Ft,{omit:["_buffers"]}),_t("ProgramConfigurationSet",Ot);var hi=Math.pow(2,14)-1,ti=-hi-1;function pn(r){for(var i=8192/r.extent,s=r.loadGeometry(),h=0;h<s.length;h++)for(var m=s[h],y=0;y<m.length;y++){var _=m[y],A=Math.round(_.x*i),C=Math.round(_.y*i);_.x=D(A,ti,hi),_.y=D(C,ti,hi),(A<_.x||A>_.x+1||C<_.y||C>_.y+1)&&he("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return s}function An(r,i){return{type:r.type,id:r.id,properties:r.properties,geometry:i?pn(r):[]}}function Gi(r,i,s,h,m){r.emplaceBack(2*i+(h+1)/2,2*s+(m+1)/2)}var bi=function(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(function(i){return i.id}),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new As,this.indexArray=new Da,this.segments=new Q,this.programConfigurations=new Ot(r.layers,r.zoom),this.stateDependentLayerIds=this.layers.filter(function(i){return i.isStateDependent()}).map(function(i){return i.id})};function Fa(r,i){for(var s=0;s<r.length;s++)if(Xo(i,r[s]))return!0;for(var h=0;h<i.length;h++)if(Xo(r,i[h]))return!0;return!!ou(r,i)}function Pi(r,i,s){return!!Xo(r,i)||!!Ua(i,r,s)}function Bo(r,i){if(r.length===1)return au(i,r[0]);for(var s=0;s<i.length;s++)for(var h=i[s],m=0;m<h.length;m++)if(Xo(r,h[m]))return!0;for(var y=0;y<r.length;y++)if(au(i,r[y]))return!0;for(var _=0;_<i.length;_++)if(ou(r,i[_]))return!0;return!1}function yo(r,i,s){if(r.length>1){if(ou(r,i))return!0;for(var h=0;h<i.length;h++)if(Ua(i[h],r,s))return!0}for(var m=0;m<r.length;m++)if(Ua(r[m],i,s))return!0;return!1}function ou(r,i){if(r.length===0||i.length===0)return!1;for(var s=0;s<r.length-1;s++)for(var h=r[s],m=r[s+1],y=0;y<i.length-1;y++)if(ol(h,m,i[y],i[y+1]))return!0;return!1}function ol(r,i,s,h){return Ne(r,s,h)!==Ne(i,s,h)&&Ne(r,i,s)!==Ne(r,i,h)}function Ua(r,i,s){var h=s*s;if(i.length===1)return r.distSqr(i[0])<h;for(var m=1;m<i.length;m++)if(al(r,i[m-1],i[m])<h)return!0;return!1}function al(r,i,s){var h=i.distSqr(s);if(h===0)return r.distSqr(i);var m=((r.x-i.x)*(s.x-i.x)+(r.y-i.y)*(s.y-i.y))/h;return r.distSqr(m<0?i:m>1?s:s.sub(i)._mult(m)._add(i))}function au(r,i){for(var s,h,m,y=!1,_=0;_<r.length;_++)for(var A=0,C=(s=r[_]).length-1;A<s.length;C=A++)(h=s[A]).y>i.y!=(m=s[C]).y>i.y&&i.x<(m.x-h.x)*(i.y-h.y)/(m.y-h.y)+h.x&&(y=!y);return y}function Xo(r,i){for(var s=!1,h=0,m=r.length-1;h<r.length;m=h++){var y=r[h],_=r[m];y.y>i.y!=_.y>i.y&&i.x<(_.x-y.x)*(i.y-y.y)/(_.y-y.y)+y.x&&(s=!s)}return s}function su(r,i,s){var h=s[0],m=s[2];if(r.x<h.x&&i.x<h.x||r.x>m.x&&i.x>m.x||r.y<h.y&&i.y<h.y||r.y>m.y&&i.y>m.y)return!1;var y=Ne(r,i,s[0]);return y!==Ne(r,i,s[1])||y!==Ne(r,i,s[2])||y!==Ne(r,i,s[3])}function Qo(r,i,s){var h=i.paint.get(r).value;return h.kind==="constant"?h.value:s.programConfigurations.get(i.id).getMaxValue(r)}function $n(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function fa(r,i,s,h,m){if(!i[0]&&!i[1])return r;var y=k.convert(i)._mult(m);s==="viewport"&&y._rotate(-h);for(var _=[],A=0;A<r.length;A++)_.push(r[A].sub(y));return _}bi.prototype.populate=function(r,i,s){var h=this.layers[0],m=[],y=null;h.type==="circle"&&(y=h.layout.get("circle-sort-key"));for(var _=0,A=r;_<A.length;_+=1){var C=A[_],I=C.feature,R=C.id,L=C.index,j=C.sourceLayerIndex,G=this.layers[0]._featureFilter.needGeometry,oe=An(I,G);if(this.layers[0]._featureFilter.filter(new ur(this.zoom),oe,s)){var ae=y?y.evaluate(oe,{},s):void 0,ge={id:R,properties:I.properties,type:I.type,sourceLayerIndex:j,index:L,geometry:G?oe.geometry:pn(I),patterns:{},sortKey:ae};m.push(ge)}}y&&m.sort(function(tt,Et){return tt.sortKey-Et.sortKey});for(var pe=0,Se=m;pe<Se.length;pe+=1){var Re=Se[pe],Oe=Re.geometry,Be=Re.index,Ge=Re.sourceLayerIndex,Je=r[Be].feature;this.addFeature(Re,Oe,Be,s),i.featureIndex.insert(Je,Oe,Be,Ge,this.index)}},bi.prototype.update=function(r,i,s){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,i,this.stateDependentLayers,s)},bi.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},bi.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},bi.prototype.upload=function(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,K),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0},bi.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},bi.prototype.addFeature=function(r,i,s,h){for(var m=0,y=i;m<y.length;m+=1)for(var _=0,A=y[m];_<A.length;_+=1){var C=A[_],I=C.x,R=C.y;if(!(I<0||I>=8192||R<0||R>=8192)){var L=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,r.sortKey),j=L.vertexLength;Gi(this.layoutVertexArray,I,R,-1,-1),Gi(this.layoutVertexArray,I,R,1,-1),Gi(this.layoutVertexArray,I,R,1,1),Gi(this.layoutVertexArray,I,R,-1,1),this.indexArray.emplaceBack(j,j+1,j+2),this.indexArray.emplaceBack(j,j+3,j+2),L.vertexLength+=4,L.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,s,{},h)},_t("CircleBucket",bi,{omit:["layers"]});var ja=new ci({"circle-sort-key":new bt(Z.layout_circle["circle-sort-key"])}),Ss={paint:new ci({"circle-radius":new bt(Z.paint_circle["circle-radius"]),"circle-color":new bt(Z.paint_circle["circle-color"]),"circle-blur":new bt(Z.paint_circle["circle-blur"]),"circle-opacity":new bt(Z.paint_circle["circle-opacity"]),"circle-translate":new Ct(Z.paint_circle["circle-translate"]),"circle-translate-anchor":new Ct(Z.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ct(Z.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ct(Z.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new bt(Z.paint_circle["circle-stroke-width"]),"circle-stroke-color":new bt(Z.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new bt(Z.paint_circle["circle-stroke-opacity"])}),layout:ja},Rr=typeof Float32Array<"u"?Float32Array:Array;function oo(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function Mi(r,i,s){var h=i[0],m=i[1],y=i[2],_=i[3],A=i[4],C=i[5],I=i[6],R=i[7],L=i[8],j=i[9],G=i[10],oe=i[11],ae=i[12],ge=i[13],pe=i[14],Se=i[15],Re=s[0],Oe=s[1],Be=s[2],Ge=s[3];return r[0]=Re*h+Oe*A+Be*L+Ge*ae,r[1]=Re*m+Oe*C+Be*j+Ge*ge,r[2]=Re*y+Oe*I+Be*G+Ge*pe,r[3]=Re*_+Oe*R+Be*oe+Ge*Se,r[4]=(Re=s[4])*h+(Oe=s[5])*A+(Be=s[6])*L+(Ge=s[7])*ae,r[5]=Re*m+Oe*C+Be*j+Ge*ge,r[6]=Re*y+Oe*I+Be*G+Ge*pe,r[7]=Re*_+Oe*R+Be*oe+Ge*Se,r[8]=(Re=s[8])*h+(Oe=s[9])*A+(Be=s[10])*L+(Ge=s[11])*ae,r[9]=Re*m+Oe*C+Be*j+Ge*ge,r[10]=Re*y+Oe*I+Be*G+Ge*pe,r[11]=Re*_+Oe*R+Be*oe+Ge*Se,r[12]=(Re=s[12])*h+(Oe=s[13])*A+(Be=s[14])*L+(Ge=s[15])*ae,r[13]=Re*m+Oe*C+Be*j+Ge*ge,r[14]=Re*y+Oe*I+Be*G+Ge*pe,r[15]=Re*_+Oe*R+Be*oe+Ge*Se,r}Math.hypot||(Math.hypot=function(){for(var r=arguments,i=0,s=arguments.length;s--;)i+=r[s]*r[s];return Math.sqrt(i)});var Cs,Dv=Mi;function cc(r,i,s){var h=i[0],m=i[1],y=i[2],_=i[3];return r[0]=s[0]*h+s[4]*m+s[8]*y+s[12]*_,r[1]=s[1]*h+s[5]*m+s[9]*y+s[13]*_,r[2]=s[2]*h+s[6]*m+s[10]*y+s[14]*_,r[3]=s[3]*h+s[7]*m+s[11]*y+s[15]*_,r}Cs=new Rr(3),Rr!=Float32Array&&(Cs[0]=0,Cs[1]=0,Cs[2]=0),function(){var r=new Rr(4);Rr!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0,r[3]=0)}();var Bv=(function(){var r=new Rr(2);Rr!=Float32Array&&(r[0]=0,r[1]=0)}(),function(r){function i(s){r.call(this,s,Ss)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.createBucket=function(s){return new bi(s)},i.prototype.queryRadius=function(s){var h=s;return Qo("circle-radius",this,h)+Qo("circle-stroke-width",this,h)+$n(this.paint.get("circle-translate"))},i.prototype.queryIntersectsFeature=function(s,h,m,y,_,A,C,I){for(var R=fa(s,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),A.angle,C),L=this.paint.get("circle-radius").evaluate(h,m)+this.paint.get("circle-stroke-width").evaluate(h,m),j=this.paint.get("circle-pitch-alignment")==="map",G=j?R:function(Je,tt){return Je.map(function(Et){return lu(Et,tt)})}(R,I),oe=j?L*C:L,ae=0,ge=y;ae<ge.length;ae+=1)for(var pe=0,Se=ge[ae];pe<Se.length;pe+=1){var Re=Se[pe],Oe=j?Re:lu(Re,I),Be=oe,Ge=cc([],[Re.x,Re.y,0,1],I);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Be*=Ge[3]/A.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Be*=A.cameraToCenterDistance/Ge[3]),Pi(G,Oe,Be))return!0}return!1},i}(Zo));function lu(r,i){var s=cc([],[r.x,r.y,0,1],i);return new k(s[0]/s[3],s[1]/s[3])}var Hd=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i}(bi);function sl(r,i,s,h){var m=i.width,y=i.height;if(h){if(h instanceof Uint8ClampedArray)h=new Uint8Array(h.buffer);else if(h.length!==m*y*s)throw new RangeError("mismatched image size")}else h=new Uint8Array(m*y*s);return r.width=m,r.height=y,r.data=h,r}function pc(r,i,s){var h=i.width,m=i.height;if(h!==r.width||m!==r.height){var y=sl({},{width:h,height:m},s);Nv(r,y,{x:0,y:0},{x:0,y:0},{width:Math.min(r.width,h),height:Math.min(r.height,m)},s),r.width=h,r.height=m,r.data=y.data}}function Nv(r,i,s,h,m,y){if(m.width===0||m.height===0)return i;if(m.width>r.width||m.height>r.height||s.x>r.width-m.width||s.y>r.height-m.height)throw new RangeError("out of range source coordinates for image copy");if(m.width>i.width||m.height>i.height||h.x>i.width-m.width||h.y>i.height-m.height)throw new RangeError("out of range destination coordinates for image copy");for(var _=r.data,A=i.data,C=0;C<m.height;C++)for(var I=((s.y+C)*r.width+s.x)*y,R=((h.y+C)*i.width+h.x)*y,L=0;L<m.width*y;L++)A[R+L]=_[I+L];return i}_t("HeatmapBucket",Hd,{omit:["layers"]});var uu=function(r,i){sl(this,r,1,i)};uu.prototype.resize=function(r){pc(this,r,1)},uu.prototype.clone=function(){return new uu({width:this.width,height:this.height},new Uint8Array(this.data))},uu.copy=function(r,i,s,h,m){Nv(r,i,s,h,m,1)};var Hi=function(r,i){sl(this,r,4,i)};Hi.prototype.resize=function(r){pc(this,r,4)},Hi.prototype.replace=function(r,i){i?this.data.set(r):this.data=r instanceof Uint8ClampedArray?new Uint8Array(r.buffer):r},Hi.prototype.clone=function(){return new Hi({width:this.width,height:this.height},new Uint8Array(this.data))},Hi.copy=function(r,i,s,h,m){Nv(r,i,s,h,m,4)},_t("AlphaImage",uu),_t("RGBAImage",Hi);var lP={paint:new ci({"heatmap-radius":new bt(Z.paint_heatmap["heatmap-radius"]),"heatmap-weight":new bt(Z.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ct(Z.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Do(Z.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ct(Z.paint_heatmap["heatmap-opacity"])})};function Pb(r){var i={},s=r.resolution||256,h=r.clips?r.clips.length:1,m=r.image||new Hi({width:s,height:h}),y=function(oe,ae,ge){i[r.evaluationKey]=ge;var pe=r.expression.evaluate(i);m.data[oe+ae+0]=Math.floor(255*pe.r/pe.a),m.data[oe+ae+1]=Math.floor(255*pe.g/pe.a),m.data[oe+ae+2]=Math.floor(255*pe.b/pe.a),m.data[oe+ae+3]=Math.floor(255*pe.a)};if(r.clips)for(var _=0,A=0;_<h;++_,A+=4*s)for(var C=0,I=0;C<s;C++,I+=4){var R=C/(s-1),L=r.clips[_];y(A,I,L.start*(1-R)+L.end*R)}else for(var j=0,G=0;j<s;j++,G+=4)y(0,G,j/(s-1));return m}var uP=function(r){function i(s){r.call(this,s,lP),this._updateColorRamp()}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.createBucket=function(s){return new Hd(s)},i.prototype._handleSpecialPaintPropertyUpdate=function(s){s==="heatmap-color"&&this._updateColorRamp()},i.prototype._updateColorRamp=function(){this.colorRamp=Pb({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},i.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},i.prototype.queryRadius=function(){return 0},i.prototype.queryIntersectsFeature=function(){return!1},i.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},i}(Zo),cP={paint:new ci({"hillshade-illumination-direction":new Ct(Z.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ct(Z.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ct(Z.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ct(Z.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ct(Z.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ct(Z.paint_hillshade["hillshade-accent-color"])})},pP=function(r){function i(s){r.call(this,s,cP)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},i}(Zo),hP=ei([{name:"a_pos",components:2,type:"Int16"}],4).members,Fv=Zd,fP=Zd;function Zd(r,i,s){s=s||2;var h,m,y,_,A,C,I,R=i&&i.length,L=R?i[0]*s:r.length,j=Mb(r,0,L,s,!0),G=[];if(!j||j.next===j.prev)return G;if(R&&(j=function(ae,ge,pe,Se){var Re,Oe,Be,Ge=[];for(Re=0,Oe=ge.length;Re<Oe;Re++)(Be=Mb(ae,ge[Re]*Se,Re<Oe-1?ge[Re+1]*Se:ae.length,Se,!1))===Be.next&&(Be.steiner=!0),Ge.push(bP(Be));for(Ge.sort(vP),Re=0;Re<Ge.length;Re++)_P(Ge[Re],pe),pe=ll(pe,pe.next);return pe}(r,i,j,s)),r.length>80*s){h=y=r[0],m=_=r[1];for(var oe=s;oe<L;oe+=s)(A=r[oe])<h&&(h=A),(C=r[oe+1])<m&&(m=C),A>y&&(y=A),C>_&&(_=C);I=(I=Math.max(y-h,_-m))!==0?1/I:0}return hh(j,G,s,h,m,I),G}function Mb(r,i,s,h,m){var y,_;if(m===Vv(r,i,s,h)>0)for(y=i;y<s;y+=h)_=Lb(y,r[y],r[y+1],_);else for(y=s-h;y>=i;y-=h)_=Lb(y,r[y],r[y+1],_);return _&&Kd(_,_.next)&&(dh(_),_=_.next),_}function ll(r,i){if(!r)return r;i||(i=r);var s,h=r;do if(s=!1,h.steiner||!Kd(h,h.next)&&Bn(h.prev,h,h.next)!==0)h=h.next;else{if(dh(h),(h=i=h.prev)===h.next)break;s=!0}while(s||h!==i);return i}function hh(r,i,s,h,m,y,_){if(r){!_&&y&&function(R,L,j,G){var oe=R;do oe.z===null&&(oe.z=Uv(oe.x,oe.y,L,j,G)),oe.prevZ=oe.prev,oe.nextZ=oe.next,oe=oe.next;while(oe!==R);oe.prevZ.nextZ=null,oe.prevZ=null,function(ae){var ge,pe,Se,Re,Oe,Be,Ge,Je,tt=1;do{for(pe=ae,ae=null,Oe=null,Be=0;pe;){for(Be++,Se=pe,Ge=0,ge=0;ge<tt&&(Ge++,Se=Se.nextZ);ge++);for(Je=tt;Ge>0||Je>0&&Se;)Ge!==0&&(Je===0||!Se||pe.z<=Se.z)?(Re=pe,pe=pe.nextZ,Ge--):(Re=Se,Se=Se.nextZ,Je--),Oe?Oe.nextZ=Re:ae=Re,Re.prevZ=Oe,Oe=Re;pe=Se}Oe.nextZ=null,tt*=2}while(Be>1)}(oe)}(r,h,m,y);for(var A,C,I=r;r.prev!==r.next;)if(A=r.prev,C=r.next,y?mP(r,h,m,y):dP(r))i.push(A.i/s),i.push(r.i/s),i.push(C.i/s),dh(r),r=C.next,I=C.next;else if((r=C)===I){_?_===1?hh(r=yP(ll(r),i,s),i,s,h,m,y,2):_===2&&gP(r,i,s,h,m,y):hh(ll(r),i,s,h,m,y,1);break}}}function dP(r){var i=r.prev,s=r,h=r.next;if(Bn(i,s,h)>=0)return!1;for(var m=r.next.next;m!==r.prev;){if(hc(i.x,i.y,s.x,s.y,h.x,h.y,m.x,m.y)&&Bn(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function mP(r,i,s,h){var m=r.prev,y=r,_=r.next;if(Bn(m,y,_)>=0)return!1;for(var A=m.x>y.x?m.x>_.x?m.x:_.x:y.x>_.x?y.x:_.x,C=m.y>y.y?m.y>_.y?m.y:_.y:y.y>_.y?y.y:_.y,I=Uv(m.x<y.x?m.x<_.x?m.x:_.x:y.x<_.x?y.x:_.x,m.y<y.y?m.y<_.y?m.y:_.y:y.y<_.y?y.y:_.y,i,s,h),R=Uv(A,C,i,s,h),L=r.prevZ,j=r.nextZ;L&&L.z>=I&&j&&j.z<=R;){if(L!==r.prev&&L!==r.next&&hc(m.x,m.y,y.x,y.y,_.x,_.y,L.x,L.y)&&Bn(L.prev,L,L.next)>=0||(L=L.prevZ,j!==r.prev&&j!==r.next&&hc(m.x,m.y,y.x,y.y,_.x,_.y,j.x,j.y)&&Bn(j.prev,j,j.next)>=0))return!1;j=j.nextZ}for(;L&&L.z>=I;){if(L!==r.prev&&L!==r.next&&hc(m.x,m.y,y.x,y.y,_.x,_.y,L.x,L.y)&&Bn(L.prev,L,L.next)>=0)return!1;L=L.prevZ}for(;j&&j.z<=R;){if(j!==r.prev&&j!==r.next&&hc(m.x,m.y,y.x,y.y,_.x,_.y,j.x,j.y)&&Bn(j.prev,j,j.next)>=0)return!1;j=j.nextZ}return!0}function yP(r,i,s){var h=r;do{var m=h.prev,y=h.next.next;!Kd(m,y)&&Rb(m,h,h.next,y)&&fh(m,y)&&fh(y,m)&&(i.push(m.i/s),i.push(h.i/s),i.push(y.i/s),dh(h),dh(h.next),h=r=y),h=h.next}while(h!==r);return ll(h)}function gP(r,i,s,h,m,y){var _=r;do{for(var A=_.next.next;A!==_.prev;){if(_.i!==A.i&&wP(_,A)){var C=zb(_,A);return _=ll(_,_.next),C=ll(C,C.next),hh(_,i,s,h,m,y),void hh(C,i,s,h,m,y)}A=A.next}_=_.next}while(_!==r)}function vP(r,i){return r.x-i.x}function _P(r,i){if(i=function(h,m){var y,_=m,A=h.x,C=h.y,I=-1/0;do{if(C<=_.y&&C>=_.next.y&&_.next.y!==_.y){var R=_.x+(C-_.y)*(_.next.x-_.x)/(_.next.y-_.y);if(R<=A&&R>I){if(I=R,R===A){if(C===_.y)return _;if(C===_.next.y)return _.next}y=_.x<_.next.x?_:_.next}}_=_.next}while(_!==m);if(!y)return null;if(A===I)return y;var L,j=y,G=y.x,oe=y.y,ae=1/0;_=y;do A>=_.x&&_.x>=G&&A!==_.x&&hc(C<oe?A:I,C,G,oe,C<oe?I:A,C,_.x,_.y)&&(L=Math.abs(C-_.y)/(A-_.x),fh(_,h)&&(L<ae||L===ae&&(_.x>y.x||_.x===y.x&&xP(y,_)))&&(y=_,ae=L)),_=_.next;while(_!==j);return y}(r,i)){var s=zb(i,r);ll(i,i.next),ll(s,s.next)}}function xP(r,i){return Bn(r.prev,r,i.prev)<0&&Bn(i.next,r,r.next)<0}function Uv(r,i,s,h,m){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=32767*(r-s)*m)|r<<8))|r<<4))|r<<2))|r<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=32767*(i-h)*m)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function bP(r){var i=r,s=r;do(i.x<s.x||i.x===s.x&&i.y<s.y)&&(s=i),i=i.next;while(i!==r);return s}function hc(r,i,s,h,m,y,_,A){return(m-_)*(i-A)-(r-_)*(y-A)>=0&&(r-_)*(h-A)-(s-_)*(i-A)>=0&&(s-_)*(y-A)-(m-_)*(h-A)>=0}function wP(r,i){return r.next.i!==i.i&&r.prev.i!==i.i&&!function(s,h){var m=s;do{if(m.i!==s.i&&m.next.i!==s.i&&m.i!==h.i&&m.next.i!==h.i&&Rb(m,m.next,s,h))return!0;m=m.next}while(m!==s);return!1}(r,i)&&(fh(r,i)&&fh(i,r)&&function(s,h){var m=s,y=!1,_=(s.x+h.x)/2,A=(s.y+h.y)/2;do m.y>A!=m.next.y>A&&m.next.y!==m.y&&_<(m.next.x-m.x)*(A-m.y)/(m.next.y-m.y)+m.x&&(y=!y),m=m.next;while(m!==s);return y}(r,i)&&(Bn(r.prev,r,i.prev)||Bn(r,i.prev,i))||Kd(r,i)&&Bn(r.prev,r,r.next)>0&&Bn(i.prev,i,i.next)>0)}function Bn(r,i,s){return(i.y-r.y)*(s.x-i.x)-(i.x-r.x)*(s.y-i.y)}function Kd(r,i){return r.x===i.x&&r.y===i.y}function Rb(r,i,s,h){var m=Qd(Bn(r,i,s)),y=Qd(Bn(r,i,h)),_=Qd(Bn(s,h,r)),A=Qd(Bn(s,h,i));return m!==y&&_!==A||!(m!==0||!Xd(r,s,i))||!(y!==0||!Xd(r,h,i))||!(_!==0||!Xd(s,r,h))||!(A!==0||!Xd(s,i,h))}function Xd(r,i,s){return i.x<=Math.max(r.x,s.x)&&i.x>=Math.min(r.x,s.x)&&i.y<=Math.max(r.y,s.y)&&i.y>=Math.min(r.y,s.y)}function Qd(r){return r>0?1:r<0?-1:0}function fh(r,i){return Bn(r.prev,r,r.next)<0?Bn(r,i,r.next)>=0&&Bn(r,r.prev,i)>=0:Bn(r,i,r.prev)<0||Bn(r,r.next,i)<0}function zb(r,i){var s=new jv(r.i,r.x,r.y),h=new jv(i.i,i.x,i.y),m=r.next,y=i.prev;return r.next=i,i.prev=r,s.next=m,m.prev=s,h.next=s,s.prev=h,y.next=h,h.prev=y,h}function Lb(r,i,s,h){var m=new jv(r,i,s);return h?(m.next=h.next,m.prev=h,h.next.prev=m,h.next=m):(m.prev=m,m.next=m),m}function dh(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function jv(r,i,s){this.i=r,this.x=i,this.y=s,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Vv(r,i,s,h){for(var m=0,y=i,_=s-h;y<s;y+=h)m+=(r[_]-r[y])*(r[y+1]+r[_+1]),_=y;return m}function AP(r,i,s,h,m){(function y(_,A,C,I,R){for(;I>C;){if(I-C>600){var L=I-C+1,j=A-C+1,G=Math.log(L),oe=.5*Math.exp(2*G/3),ae=.5*Math.sqrt(G*oe*(L-oe)/L)*(j-L/2<0?-1:1);y(_,A,Math.max(C,Math.floor(A-j*oe/L+ae)),Math.min(I,Math.floor(A+(L-j)*oe/L+ae)),R)}var ge=_[A],pe=C,Se=I;for(mh(_,C,A),R(_[I],ge)>0&&mh(_,C,I);pe<Se;){for(mh(_,pe,Se),pe++,Se--;R(_[pe],ge)<0;)pe++;for(;R(_[Se],ge)>0;)Se--}R(_[C],ge)===0?mh(_,C,Se):mh(_,++Se,I),Se<=A&&(C=Se+1),A<=Se&&(I=Se-1)}})(r,i,s||0,h||r.length-1,m||EP)}function mh(r,i,s){var h=r[i];r[i]=r[s],r[s]=h}function EP(r,i){return r<i?-1:r>i?1:0}function $v(r,i){var s=r.length;if(s<=1)return[r];for(var h,m,y=[],_=0;_<s;_++){var A=We(r[_]);A!==0&&(r[_].area=Math.abs(A),m===void 0&&(m=A<0),m===A<0?(h&&y.push(h),h=[r[_]]):h.push(r[_]))}if(h&&y.push(h),i>1)for(var C=0;C<y.length;C++)y[C].length<=i||(AP(y[C],i,1,y[C].length-1,SP),y[C]=y[C].slice(0,i));return y}function SP(r,i){return i.area-r.area}function qv(r,i,s){for(var h=s.patternDependencies,m=!1,y=0,_=i;y<_.length;y+=1){var A=_[y].paint.get(r+"-pattern");A.isConstant()||(m=!0);var C=A.constantOr(null);C&&(m=!0,h[C.to]=!0,h[C.from]=!0)}return m}function Wv(r,i,s,h,m){for(var y=m.patternDependencies,_=0,A=i;_<A.length;_+=1){var C=A[_],I=C.paint.get(r+"-pattern").value;if(I.kind!=="constant"){var R=I.evaluate({zoom:h-1},s,{},m.availableImages),L=I.evaluate({zoom:h},s,{},m.availableImages),j=I.evaluate({zoom:h+1},s,{},m.availableImages);L=L&&L.name?L.name:L,j=j&&j.name?j.name:j,y[R=R&&R.name?R.name:R]=!0,y[L]=!0,y[j]=!0,s.patterns[C.id]={min:R,mid:L,max:j}}}return s}Zd.deviation=function(r,i,s,h){var m=i&&i.length,y=Math.abs(Vv(r,0,m?i[0]*s:r.length,s));if(m)for(var _=0,A=i.length;_<A;_++)y-=Math.abs(Vv(r,i[_]*s,_<A-1?i[_+1]*s:r.length,s));var C=0;for(_=0;_<h.length;_+=3){var I=h[_]*s,R=h[_+1]*s,L=h[_+2]*s;C+=Math.abs((r[I]-r[L])*(r[R+1]-r[I+1])-(r[I]-r[R])*(r[L+1]-r[I+1]))}return y===0&&C===0?0:Math.abs((C-y)/y)},Zd.flatten=function(r){for(var i=r[0][0].length,s={vertices:[],holes:[],dimensions:i},h=0,m=0;m<r.length;m++){for(var y=0;y<r[m].length;y++)for(var _=0;_<i;_++)s.vertices.push(r[m][y][_]);m>0&&s.holes.push(h+=r[m-1].length)}return s},Fv.default=fP;var da=function(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(function(i){return i.id}),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new As,this.indexArray=new Da,this.indexArray2=new iu,this.programConfigurations=new Ot(r.layers,r.zoom),this.segments=new Q,this.segments2=new Q,this.stateDependentLayerIds=this.layers.filter(function(i){return i.isStateDependent()}).map(function(i){return i.id})};da.prototype.populate=function(r,i,s){this.hasPattern=qv("fill",this.layers,i);for(var h=this.layers[0].layout.get("fill-sort-key"),m=[],y=0,_=r;y<_.length;y+=1){var A=_[y],C=A.feature,I=A.id,R=A.index,L=A.sourceLayerIndex,j=this.layers[0]._featureFilter.needGeometry,G=An(C,j);if(this.layers[0]._featureFilter.filter(new ur(this.zoom),G,s)){var oe=h?h.evaluate(G,{},s,i.availableImages):void 0,ae={id:I,properties:C.properties,type:C.type,sourceLayerIndex:L,index:R,geometry:j?G.geometry:pn(C),patterns:{},sortKey:oe};m.push(ae)}}h&&m.sort(function(Je,tt){return Je.sortKey-tt.sortKey});for(var ge=0,pe=m;ge<pe.length;ge+=1){var Se=pe[ge],Re=Se.geometry,Oe=Se.index,Be=Se.sourceLayerIndex;if(this.hasPattern){var Ge=Wv("fill",this.layers,Se,this.zoom,i);this.patternFeatures.push(Ge)}else this.addFeature(Se,Re,Oe,s,{});i.featureIndex.insert(r[Oe].feature,Re,Oe,Be,this.index)}},da.prototype.update=function(r,i,s){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,i,this.stateDependentLayers,s)},da.prototype.addFeatures=function(r,i,s){for(var h=0,m=this.patternFeatures;h<m.length;h+=1){var y=m[h];this.addFeature(y,y.geometry,y.index,i,s)}},da.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},da.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},da.prototype.upload=function(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,hP),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.indexBuffer2=r.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(r),this.uploaded=!0},da.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},da.prototype.addFeature=function(r,i,s,h,m){for(var y=0,_=$v(i,500);y<_.length;y+=1){for(var A=_[y],C=0,I=0,R=A;I<R.length;I+=1)C+=R[I].length;for(var L=this.segments.prepareSegment(C,this.layoutVertexArray,this.indexArray),j=L.vertexLength,G=[],oe=[],ae=0,ge=A;ae<ge.length;ae+=1){var pe=ge[ae];if(pe.length!==0){pe!==A[0]&&oe.push(G.length/2);var Se=this.segments2.prepareSegment(pe.length,this.layoutVertexArray,this.indexArray2),Re=Se.vertexLength;this.layoutVertexArray.emplaceBack(pe[0].x,pe[0].y),this.indexArray2.emplaceBack(Re+pe.length-1,Re),G.push(pe[0].x),G.push(pe[0].y);for(var Oe=1;Oe<pe.length;Oe++)this.layoutVertexArray.emplaceBack(pe[Oe].x,pe[Oe].y),this.indexArray2.emplaceBack(Re+Oe-1,Re+Oe),G.push(pe[Oe].x),G.push(pe[Oe].y);Se.vertexLength+=pe.length,Se.primitiveLength+=pe.length}}for(var Be=Fv(G,oe),Ge=0;Ge<Be.length;Ge+=3)this.indexArray.emplaceBack(j+Be[Ge],j+Be[Ge+1],j+Be[Ge+2]);L.vertexLength+=C,L.primitiveLength+=Be.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,s,m,h)},_t("FillBucket",da,{omit:["layers","patternFeatures"]});var CP=new ci({"fill-sort-key":new bt(Z.layout_fill["fill-sort-key"])}),kP={paint:new ci({"fill-antialias":new Ct(Z.paint_fill["fill-antialias"]),"fill-opacity":new bt(Z.paint_fill["fill-opacity"]),"fill-color":new bt(Z.paint_fill["fill-color"]),"fill-outline-color":new bt(Z.paint_fill["fill-outline-color"]),"fill-translate":new Ct(Z.paint_fill["fill-translate"]),"fill-translate-anchor":new Ct(Z.paint_fill["fill-translate-anchor"]),"fill-pattern":new oc(Z.paint_fill["fill-pattern"])}),layout:CP},TP=function(r){function i(s){r.call(this,s,kP)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.recalculate=function(s,h){r.prototype.recalculate.call(this,s,h);var m=this.paint._values["fill-outline-color"];m.value.kind==="constant"&&m.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},i.prototype.createBucket=function(s){return new da(s)},i.prototype.queryRadius=function(){return $n(this.paint.get("fill-translate"))},i.prototype.queryIntersectsFeature=function(s,h,m,y,_,A,C){return Bo(fa(s,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),A.angle,C),y)},i.prototype.isTileClipped=function(){return!0},i}(Zo),IP=ei([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Ob=fc;function fc(r,i,s,h,m){this.properties={},this.extent=s,this.type=0,this._pbf=r,this._geometry=-1,this._keys=h,this._values=m,r.readFields(PP,this,i)}function PP(r,i,s){r==1?i.id=s.readVarint():r==2?function(h,m){for(var y=h.readVarint()+h.pos;h.pos<y;){var _=m._keys[h.readVarint()],A=m._values[h.readVarint()];m.properties[_]=A}}(s,i):r==3?i.type=s.readVarint():r==4&&(i._geometry=s.pos)}function MP(r){for(var i,s,h=0,m=0,y=r.length,_=y-1;m<y;_=m++)h+=((s=r[_]).x-(i=r[m]).x)*(i.y+s.y);return h}fc.types=["Unknown","Point","LineString","Polygon"],fc.prototype.loadGeometry=function(){var r=this._pbf;r.pos=this._geometry;for(var i,s=r.readVarint()+r.pos,h=1,m=0,y=0,_=0,A=[];r.pos<s;){if(m<=0){var C=r.readVarint();h=7&C,m=C>>3}if(m--,h===1||h===2)y+=r.readSVarint(),_+=r.readSVarint(),h===1&&(i&&A.push(i),i=[]),i.push(new k(y,_));else{if(h!==7)throw new Error("unknown command "+h);i&&i.push(i[0].clone())}}return i&&A.push(i),A},fc.prototype.bbox=function(){var r=this._pbf;r.pos=this._geometry;for(var i=r.readVarint()+r.pos,s=1,h=0,m=0,y=0,_=1/0,A=-1/0,C=1/0,I=-1/0;r.pos<i;){if(h<=0){var R=r.readVarint();s=7&R,h=R>>3}if(h--,s===1||s===2)(m+=r.readSVarint())<_&&(_=m),m>A&&(A=m),(y+=r.readSVarint())<C&&(C=y),y>I&&(I=y);else if(s!==7)throw new Error("unknown command "+s)}return[_,C,A,I]},fc.prototype.toGeoJSON=function(r,i,s){var h,m,y=this.extent*Math.pow(2,s),_=this.extent*r,A=this.extent*i,C=this.loadGeometry(),I=fc.types[this.type];function R(G){for(var oe=0;oe<G.length;oe++){var ae=G[oe];G[oe]=[360*(ae.x+_)/y-180,360/Math.PI*Math.atan(Math.exp((180-360*(ae.y+A)/y)*Math.PI/180))-90]}}switch(this.type){case 1:var L=[];for(h=0;h<C.length;h++)L[h]=C[h][0];R(C=L);break;case 2:for(h=0;h<C.length;h++)R(C[h]);break;case 3:for(C=function(G){var oe=G.length;if(oe<=1)return[G];for(var ae,ge,pe=[],Se=0;Se<oe;Se++){var Re=MP(G[Se]);Re!==0&&(ge===void 0&&(ge=Re<0),ge===Re<0?(ae&&pe.push(ae),ae=[G[Se]]):ae.push(G[Se]))}return ae&&pe.push(ae),pe}(C),h=0;h<C.length;h++)for(m=0;m<C[h].length;m++)R(C[h][m])}C.length===1?C=C[0]:I="Multi"+I;var j={type:"Feature",geometry:{type:I,coordinates:C},properties:this.properties};return"id"in this&&(j.id=this.id),j};var Db=Bb;function Bb(r,i){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=r,this._keys=[],this._values=[],this._features=[],r.readFields(RP,this,i),this.length=this._features.length}function RP(r,i,s){r===15?i.version=s.readVarint():r===1?i.name=s.readString():r===5?i.extent=s.readVarint():r===2?i._features.push(s.pos):r===3?i._keys.push(s.readString()):r===4&&i._values.push(function(h){for(var m=null,y=h.readVarint()+h.pos;h.pos<y;){var _=h.readVarint()>>3;m=_===1?h.readString():_===2?h.readFloat():_===3?h.readDouble():_===4?h.readVarint64():_===5?h.readVarint():_===6?h.readSVarint():_===7?h.readBoolean():null}return m}(s))}function zP(r,i,s){if(r===3){var h=new Db(s,s.readVarint()+s.pos);h.length&&(i[h.name]=h)}}Bb.prototype.feature=function(r){if(r<0||r>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[r];var i=this._pbf.readVarint()+this._pbf.pos;return new Ob(this._pbf,i,this.extent,this._keys,this._values)};var dc={VectorTile:function(r,i){this.layers=r.readFields(zP,{},i)},VectorTileFeature:Ob,VectorTileLayer:Db},LP=dc.VectorTileFeature.types,Gv=Math.pow(2,13);function yh(r,i,s,h,m,y,_,A){r.emplaceBack(i,s,2*Math.floor(h*Gv)+_,m*Gv*2,y*Gv*2,Math.round(A))}var ma=function(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(function(i){return i.id}),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new ha,this.indexArray=new Da,this.programConfigurations=new Ot(r.layers,r.zoom),this.segments=new Q,this.stateDependentLayerIds=this.layers.filter(function(i){return i.isStateDependent()}).map(function(i){return i.id})};function OP(r,i){return r.x===i.x&&(r.x<0||r.x>8192)||r.y===i.y&&(r.y<0||r.y>8192)}ma.prototype.populate=function(r,i,s){this.features=[],this.hasPattern=qv("fill-extrusion",this.layers,i);for(var h=0,m=r;h<m.length;h+=1){var y=m[h],_=y.feature,A=y.id,C=y.index,I=y.sourceLayerIndex,R=this.layers[0]._featureFilter.needGeometry,L=An(_,R);if(this.layers[0]._featureFilter.filter(new ur(this.zoom),L,s)){var j={id:A,sourceLayerIndex:I,index:C,geometry:R?L.geometry:pn(_),properties:_.properties,type:_.type,patterns:{}};this.hasPattern?this.features.push(Wv("fill-extrusion",this.layers,j,this.zoom,i)):this.addFeature(j,j.geometry,C,s,{}),i.featureIndex.insert(_,j.geometry,C,I,this.index,!0)}}},ma.prototype.addFeatures=function(r,i,s){for(var h=0,m=this.features;h<m.length;h+=1){var y=m[h];this.addFeature(y,y.geometry,y.index,i,s)}},ma.prototype.update=function(r,i,s){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,i,this.stateDependentLayers,s)},ma.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},ma.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ma.prototype.upload=function(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,IP),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0},ma.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ma.prototype.addFeature=function(r,i,s,h,m){for(var y=0,_=$v(i,500);y<_.length;y+=1){for(var A=_[y],C=0,I=0,R=A;I<R.length;I+=1)C+=R[I].length;for(var L=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),j=0,G=A;j<G.length;j+=1){var oe=G[j];if(oe.length!==0&&!((ar=oe).every(function(Kt){return Kt.x<0})||ar.every(function(Kt){return Kt.x>8192})||ar.every(function(Kt){return Kt.y<0})||ar.every(function(Kt){return Kt.y>8192})))for(var ae=0,ge=0;ge<oe.length;ge++){var pe=oe[ge];if(ge>=1){var Se=oe[ge-1];if(!OP(pe,Se)){L.vertexLength+4>Q.MAX_VERTEX_ARRAY_LENGTH&&(L=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Re=pe.sub(Se)._perp()._unit(),Oe=Se.dist(pe);ae+Oe>32768&&(ae=0),yh(this.layoutVertexArray,pe.x,pe.y,Re.x,Re.y,0,0,ae),yh(this.layoutVertexArray,pe.x,pe.y,Re.x,Re.y,0,1,ae),yh(this.layoutVertexArray,Se.x,Se.y,Re.x,Re.y,0,0,ae+=Oe),yh(this.layoutVertexArray,Se.x,Se.y,Re.x,Re.y,0,1,ae);var Be=L.vertexLength;this.indexArray.emplaceBack(Be,Be+2,Be+1),this.indexArray.emplaceBack(Be+1,Be+2,Be+3),L.vertexLength+=4,L.primitiveLength+=2}}}}if(L.vertexLength+C>Q.MAX_VERTEX_ARRAY_LENGTH&&(L=this.segments.prepareSegment(C,this.layoutVertexArray,this.indexArray)),LP[r.type]==="Polygon"){for(var Ge=[],Je=[],tt=L.vertexLength,Et=0,lt=A;Et<lt.length;Et+=1){var Tt=lt[Et];if(Tt.length!==0){Tt!==A[0]&&Je.push(Ge.length/2);for(var ht=0;ht<Tt.length;ht++){var Yt=Tt[ht];yh(this.layoutVertexArray,Yt.x,Yt.y,0,0,1,1,0),Ge.push(Yt.x),Ge.push(Yt.y)}}}for(var Nt=Fv(Ge,Je),wt=0;wt<Nt.length;wt+=3)this.indexArray.emplaceBack(tt+Nt[wt],tt+Nt[wt+2],tt+Nt[wt+1]);L.primitiveLength+=Nt.length/3,L.vertexLength+=C}}var ar;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,s,m,h)},_t("FillExtrusionBucket",ma,{omit:["layers","features"]});var DP={paint:new ci({"fill-extrusion-opacity":new Ct(Z["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new bt(Z["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ct(Z["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ct(Z["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new oc(Z["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new bt(Z["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new bt(Z["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Ct(Z["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},BP=function(r){function i(s){r.call(this,s,DP)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.createBucket=function(s){return new ma(s)},i.prototype.queryRadius=function(){return $n(this.paint.get("fill-extrusion-translate"))},i.prototype.is3D=function(){return!0},i.prototype.queryIntersectsFeature=function(s,h,m,y,_,A,C,I){var R=fa(s,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),A.angle,C),L=this.paint.get("fill-extrusion-height").evaluate(h,m),j=this.paint.get("fill-extrusion-base").evaluate(h,m),G=function(ae,ge,pe,Se){for(var Re=[],Oe=0,Be=ae;Oe<Be.length;Oe+=1){var Ge=Be[Oe],Je=[Ge.x,Ge.y,0,1];cc(Je,Je,ge),Re.push(new k(Je[0]/Je[3],Je[1]/Je[3]))}return Re}(R,I),oe=function(ae,ge,pe,Se){for(var Re=[],Oe=[],Be=Se[8]*ge,Ge=Se[9]*ge,Je=Se[10]*ge,tt=Se[11]*ge,Et=Se[8]*pe,lt=Se[9]*pe,Tt=Se[10]*pe,ht=Se[11]*pe,Yt=0,Nt=ae;Yt<Nt.length;Yt+=1){for(var wt=[],ar=[],Kt=0,xr=Nt[Yt];Kt<xr.length;Kt+=1){var It=xr[Kt],Cr=It.x,on=It.y,yn=Se[0]*Cr+Se[4]*on+Se[12],hn=Se[1]*Cr+Se[5]*on+Se[13],an=Se[2]*Cr+Se[6]*on+Se[14],gn=Se[3]*Cr+Se[7]*on+Se[15],qn=an+Je,Wn=gn+tt,Ai=yn+Et,ni=hn+lt,Ei=an+Tt,En=gn+ht,ii=new k((yn+Be)/Wn,(hn+Ge)/Wn);ii.z=qn/Wn,wt.push(ii);var hr=new k(Ai/En,ni/En);hr.z=Ei/En,ar.push(hr)}Re.push(wt),Oe.push(ar)}return[Re,Oe]}(y,j,L,I);return function(ae,ge,pe){var Se=1/0;Bo(pe,ge)&&(Se=Nb(pe,ge[0]));for(var Re=0;Re<ge.length;Re++)for(var Oe=ge[Re],Be=ae[Re],Ge=0;Ge<Oe.length-1;Ge++){var Je=Oe[Ge],tt=[Je,Oe[Ge+1],Be[Ge+1],Be[Ge],Je];Fa(pe,tt)&&(Se=Math.min(Se,Nb(pe,tt)))}return Se!==1/0&&Se}(oe[0],oe[1],G)},i}(Zo);function gh(r,i){return r.x*i.x+r.y*i.y}function Nb(r,i){if(r.length===1){for(var s,h=0,m=i[h++];!s||m.equals(s);)if(!(s=i[h++]))return 1/0;for(;h<i.length;h++){var y=i[h],_=r[0],A=s.sub(m),C=y.sub(m),I=_.sub(m),R=gh(A,A),L=gh(A,C),j=gh(C,C),G=gh(I,A),oe=gh(I,C),ae=R*j-L*L,ge=(j*G-L*oe)/ae,pe=(R*oe-L*G)/ae,Se=m.z*(1-ge-pe)+s.z*ge+y.z*pe;if(isFinite(Se))return Se}return 1/0}for(var Re=1/0,Oe=0,Be=i;Oe<Be.length;Oe+=1)Re=Math.min(Re,Be[Oe].z);return Re}var NP=ei([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,FP=ei([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,UP=dc.VectorTileFeature.types,jP=Math.cos(Math.PI/180*37.5),Fb=Math.pow(2,14)/.5,Ri=function(r){var i=this;this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(function(s){return s.id}),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(s){i.gradients[s.id]={}}),this.layoutVertexArray=new Wi,this.layoutVertexArray2=new rl,this.indexArray=new Da,this.programConfigurations=new Ot(r.layers,r.zoom),this.segments=new Q,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(s){return s.isStateDependent()}).map(function(s){return s.id})};Ri.prototype.populate=function(r,i,s){this.hasPattern=qv("line",this.layers,i);for(var h=this.layers[0].layout.get("line-sort-key"),m=[],y=0,_=r;y<_.length;y+=1){var A=_[y],C=A.feature,I=A.id,R=A.index,L=A.sourceLayerIndex,j=this.layers[0]._featureFilter.needGeometry,G=An(C,j);if(this.layers[0]._featureFilter.filter(new ur(this.zoom),G,s)){var oe=h?h.evaluate(G,{},s):void 0,ae={id:I,properties:C.properties,type:C.type,sourceLayerIndex:L,index:R,geometry:j?G.geometry:pn(C),patterns:{},sortKey:oe};m.push(ae)}}h&&m.sort(function(Je,tt){return Je.sortKey-tt.sortKey});for(var ge=0,pe=m;ge<pe.length;ge+=1){var Se=pe[ge],Re=Se.geometry,Oe=Se.index,Be=Se.sourceLayerIndex;if(this.hasPattern){var Ge=Wv("line",this.layers,Se,this.zoom,i);this.patternFeatures.push(Ge)}else this.addFeature(Se,Re,Oe,s,{});i.featureIndex.insert(r[Oe].feature,Re,Oe,Be,this.index)}},Ri.prototype.update=function(r,i,s){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,i,this.stateDependentLayers,s)},Ri.prototype.addFeatures=function(r,i,s){for(var h=0,m=this.patternFeatures;h<m.length;h+=1){var y=m[h];this.addFeature(y,y.geometry,y.index,i,s)}},Ri.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Ri.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ri.prototype.upload=function(r){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=r.createVertexBuffer(this.layoutVertexArray2,FP)),this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,NP),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0},Ri.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ri.prototype.lineFeatureClips=function(r){if(r.properties&&r.properties.hasOwnProperty("mapbox_clip_start")&&r.properties.hasOwnProperty("mapbox_clip_end"))return{start:+r.properties.mapbox_clip_start,end:+r.properties.mapbox_clip_end}},Ri.prototype.addFeature=function(r,i,s,h,m){var y=this.layers[0].layout,_=y.get("line-join").evaluate(r,{}),A=y.get("line-cap"),C=y.get("line-miter-limit"),I=y.get("line-round-limit");this.lineClips=this.lineFeatureClips(r);for(var R=0,L=i;R<L.length;R+=1)this.addLine(L[R],r,_,A,C,I);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,s,m,h)},Ri.prototype.addLine=function(r,i,s,h,m,y){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var _=0;_<r.length-1;_++)this.totalDistance+=r[_].dist(r[_+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var A=UP[i.type]==="Polygon",C=r.length;C>=2&&r[C-1].equals(r[C-2]);)C--;for(var I=0;I<C-1&&r[I].equals(r[I+1]);)I++;if(!(C<(A?3:2))){s==="bevel"&&(m=1.05);var R,L=this.overscaling<=16?122880/(512*this.overscaling):0,j=this.segments.prepareSegment(10*C,this.layoutVertexArray,this.indexArray),G=void 0,oe=void 0,ae=void 0,ge=void 0;this.e1=this.e2=-1,A&&(ge=r[I].sub(R=r[C-2])._unit()._perp());for(var pe=I;pe<C;pe++)if(!(oe=pe===C-1?A?r[I+1]:void 0:r[pe+1])||!r[pe].equals(oe)){ge&&(ae=ge),R&&(G=R),R=r[pe],ge=oe?oe.sub(R)._unit()._perp():ae;var Se=(ae=ae||ge).add(ge);Se.x===0&&Se.y===0||Se._unit();var Re=ae.x*ge.x+ae.y*ge.y,Oe=Se.x*ge.x+Se.y*ge.y,Be=Oe!==0?1/Oe:1/0,Ge=2*Math.sqrt(2-2*Oe),Je=Oe<jP&&G&&oe,tt=ae.x*ge.y-ae.y*ge.x>0;if(Je&&pe>I){var Et=R.dist(G);if(Et>2*L){var lt=R.sub(R.sub(G)._mult(L/Et)._round());this.updateDistance(G,lt),this.addCurrentVertex(lt,ae,0,0,j),G=lt}}var Tt=G&&oe,ht=Tt?s:A?"butt":h;if(Tt&&ht==="round"&&(Be<y?ht="miter":Be<=2&&(ht="fakeround")),ht==="miter"&&Be>m&&(ht="bevel"),ht==="bevel"&&(Be>2&&(ht="flipbevel"),Be<m&&(ht="miter")),G&&this.updateDistance(G,R),ht==="miter")Se._mult(Be),this.addCurrentVertex(R,Se,0,0,j);else if(ht==="flipbevel"){if(Be>100)Se=ge.mult(-1);else{var Yt=Be*ae.add(ge).mag()/ae.sub(ge).mag();Se._perp()._mult(Yt*(tt?-1:1))}this.addCurrentVertex(R,Se,0,0,j),this.addCurrentVertex(R,Se.mult(-1),0,0,j)}else if(ht==="bevel"||ht==="fakeround"){var Nt=-Math.sqrt(Be*Be-1),wt=tt?Nt:0,ar=tt?0:Nt;if(G&&this.addCurrentVertex(R,ae,wt,ar,j),ht==="fakeround")for(var Kt=Math.round(180*Ge/Math.PI/20),xr=1;xr<Kt;xr++){var It=xr/Kt;if(It!==.5){var Cr=It-.5;It+=It*Cr*(It-1)*((1.0904+Re*(Re*(3.55645-1.43519*Re)-3.2452))*Cr*Cr+(.848013+Re*(.215638*Re-1.06021)))}var on=ge.sub(ae)._mult(It)._add(ae)._unit()._mult(tt?-1:1);this.addHalfVertex(R,on.x,on.y,!1,tt,0,j)}oe&&this.addCurrentVertex(R,ge,-wt,-ar,j)}else if(ht==="butt")this.addCurrentVertex(R,Se,0,0,j);else if(ht==="square"){var yn=G?1:-1;this.addCurrentVertex(R,Se,yn,yn,j)}else ht==="round"&&(G&&(this.addCurrentVertex(R,ae,0,0,j),this.addCurrentVertex(R,ae,1,1,j,!0)),oe&&(this.addCurrentVertex(R,ge,-1,-1,j,!0),this.addCurrentVertex(R,ge,0,0,j)));if(Je&&pe<C-1){var hn=R.dist(oe);if(hn>2*L){var an=R.add(oe.sub(R)._mult(L/hn)._round());this.updateDistance(R,an),this.addCurrentVertex(an,ge,0,0,j),R=an}}}}},Ri.prototype.addCurrentVertex=function(r,i,s,h,m,y){y===void 0&&(y=!1);var _=i.y*h-i.x,A=-i.y-i.x*h;this.addHalfVertex(r,i.x+i.y*s,i.y-i.x*s,y,!1,s,m),this.addHalfVertex(r,_,A,y,!0,-h,m),this.distance>Fb/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(r,i,s,h,m,y))},Ri.prototype.addHalfVertex=function(r,i,s,h,m,y,_){var A=.5*(this.lineClips?this.scaledDistance*(Fb-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((r.x<<1)+(h?1:0),(r.y<<1)+(m?1:0),Math.round(63*i)+128,Math.round(63*s)+128,1+(y===0?0:y<0?-1:1)|(63&A)<<2,A>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var C=_.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,C),_.primitiveLength++),m?this.e2=C:this.e1=C},Ri.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},Ri.prototype.updateDistance=function(r,i){this.distance+=r.dist(i),this.updateScaledDistance()},_t("LineBucket",Ri,{omit:["layers","patternFeatures"]});var VP=new ci({"line-cap":new Ct(Z.layout_line["line-cap"]),"line-join":new bt(Z.layout_line["line-join"]),"line-miter-limit":new Ct(Z.layout_line["line-miter-limit"]),"line-round-limit":new Ct(Z.layout_line["line-round-limit"]),"line-sort-key":new bt(Z.layout_line["line-sort-key"])}),Ub={paint:new ci({"line-opacity":new bt(Z.paint_line["line-opacity"]),"line-color":new bt(Z.paint_line["line-color"]),"line-translate":new Ct(Z.paint_line["line-translate"]),"line-translate-anchor":new Ct(Z.paint_line["line-translate-anchor"]),"line-width":new bt(Z.paint_line["line-width"]),"line-gap-width":new bt(Z.paint_line["line-gap-width"]),"line-offset":new bt(Z.paint_line["line-offset"]),"line-blur":new bt(Z.paint_line["line-blur"]),"line-dasharray":new xi(Z.paint_line["line-dasharray"]),"line-pattern":new oc(Z.paint_line["line-pattern"]),"line-gradient":new Do(Z.paint_line["line-gradient"])}),layout:VP},jb=new(function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.possiblyEvaluate=function(s,h){return h=new ur(Math.floor(h.zoom),{now:h.now,fadeDuration:h.fadeDuration,zoomHistory:h.zoomHistory,transition:h.transition}),r.prototype.possiblyEvaluate.call(this,s,h)},i.prototype.evaluate=function(s,h,m,y){return h=q({},h,{zoom:Math.floor(h.zoom)}),r.prototype.evaluate.call(this,s,h,m,y)},i}(bt))(Ub.paint.properties["line-width"].specification);jb.useIntegerZoom=!0;var $P=function(r){function i(s){r.call(this,s,Ub),this.gradientVersion=0}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._handleSpecialPaintPropertyUpdate=function(s){s==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Ui,this.gradientVersion=(this.gradientVersion+1)%W)},i.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},i.prototype.recalculate=function(s,h){r.prototype.recalculate.call(this,s,h),this.paint._values["line-floorwidth"]=jb.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,s)},i.prototype.createBucket=function(s){return new Ri(s)},i.prototype.queryRadius=function(s){var h=s,m=Vb(Qo("line-width",this,h),Qo("line-gap-width",this,h)),y=Qo("line-offset",this,h);return m/2+Math.abs(y)+$n(this.paint.get("line-translate"))},i.prototype.queryIntersectsFeature=function(s,h,m,y,_,A,C){var I=fa(s,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),A.angle,C),R=C/2*Vb(this.paint.get("line-width").evaluate(h,m),this.paint.get("line-gap-width").evaluate(h,m)),L=this.paint.get("line-offset").evaluate(h,m);return L&&(y=function(j,G){for(var oe=[],ae=new k(0,0),ge=0;ge<j.length;ge++){for(var pe=j[ge],Se=[],Re=0;Re<pe.length;Re++){var Oe=pe[Re],Be=pe[Re+1],Ge=Re===0?ae:Oe.sub(pe[Re-1])._unit()._perp(),Je=Re===pe.length-1?ae:Be.sub(Oe)._unit()._perp(),tt=Ge._add(Je)._unit();tt._mult(1/(tt.x*Je.x+tt.y*Je.y)),Se.push(tt._mult(G)._add(Oe))}oe.push(Se)}return oe}(y,L*C)),function(j,G,oe){for(var ae=0;ae<G.length;ae++){var ge=G[ae];if(j.length>=3){for(var pe=0;pe<ge.length;pe++)if(Xo(j,ge[pe]))return!0}if(yo(j,ge,oe))return!0}return!1}(I,y,R)},i.prototype.isTileClipped=function(){return!0},i}(Zo);function Vb(r,i){return i>0?i+2*r:r}var qP=ei([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),WP=ei([{name:"a_projected_pos",components:3,type:"Float32"}],4),GP=(ei([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),ei([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),$b=(ei([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),ei([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),HP=ei([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function ZP(r,i,s){return r.sections.forEach(function(h){h.text=function(m,y,_){var A=y.layout.get("text-transform").evaluate(_,{});return A==="uppercase"?m=m.toLocaleUpperCase():A==="lowercase"&&(m=m.toLocaleLowerCase()),io.applyArabicShaping&&(m=io.applyArabicShaping(m)),m}(h.text,i,s)}),r}ei([{name:"triangle",components:3,type:"Uint16"}]),ei([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),ei([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),ei([{type:"Float32",name:"offsetX"}]),ei([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var vh={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"},qb=function(r,i,s,h,m){var y,_,A=8*m-h-1,C=(1<<A)-1,I=C>>1,R=-7,L=s?m-1:0,j=s?-1:1,G=r[i+L];for(L+=j,y=G&(1<<-R)-1,G>>=-R,R+=A;R>0;y=256*y+r[i+L],L+=j,R-=8);for(_=y&(1<<-R)-1,y>>=-R,R+=h;R>0;_=256*_+r[i+L],L+=j,R-=8);if(y===0)y=1-I;else{if(y===C)return _?NaN:1/0*(G?-1:1);_+=Math.pow(2,h),y-=I}return(G?-1:1)*_*Math.pow(2,y-h)},Wb=function(r,i,s,h,m,y){var _,A,C,I=8*y-m-1,R=(1<<I)-1,L=R>>1,j=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,G=h?0:y-1,oe=h?1:-1,ae=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(A=isNaN(i)?1:0,_=R):(_=Math.floor(Math.log(i)/Math.LN2),i*(C=Math.pow(2,-_))<1&&(_--,C*=2),(i+=_+L>=1?j/C:j*Math.pow(2,1-L))*C>=2&&(_++,C/=2),_+L>=R?(A=0,_=R):_+L>=1?(A=(i*C-1)*Math.pow(2,m),_+=L):(A=i*Math.pow(2,L-1)*Math.pow(2,m),_=0));m>=8;r[s+G]=255&A,G+=oe,A/=256,m-=8);for(_=_<<m|A,I+=m;I>0;r[s+G]=255&_,G+=oe,_/=256,I-=8);r[s+G-oe]|=128*ae},Jd=Xr;function Xr(r){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(r)?r:new Uint8Array(r||0),this.pos=0,this.type=0,this.length=this.buf.length}Xr.Varint=0,Xr.Fixed64=1,Xr.Bytes=2,Xr.Fixed32=5;var Gb=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function ks(r){return r.type===Xr.Bytes?r.readVarint()+r.pos:r.pos+1}function mc(r,i,s){return s?4294967296*i+(r>>>0):4294967296*(i>>>0)+(r>>>0)}function Hb(r,i,s){var h=i<=16383?1:i<=2097151?2:i<=268435455?3:Math.floor(Math.log(i)/(7*Math.LN2));s.realloc(h);for(var m=s.pos-1;m>=r;m--)s.buf[m+h]=s.buf[m]}function KP(r,i){for(var s=0;s<r.length;s++)i.writeVarint(r[s])}function XP(r,i){for(var s=0;s<r.length;s++)i.writeSVarint(r[s])}function QP(r,i){for(var s=0;s<r.length;s++)i.writeFloat(r[s])}function JP(r,i){for(var s=0;s<r.length;s++)i.writeDouble(r[s])}function YP(r,i){for(var s=0;s<r.length;s++)i.writeBoolean(r[s])}function eM(r,i){for(var s=0;s<r.length;s++)i.writeFixed32(r[s])}function tM(r,i){for(var s=0;s<r.length;s++)i.writeSFixed32(r[s])}function rM(r,i){for(var s=0;s<r.length;s++)i.writeFixed64(r[s])}function nM(r,i){for(var s=0;s<r.length;s++)i.writeSFixed64(r[s])}function Yd(r,i){return(r[i]|r[i+1]<<8|r[i+2]<<16)+16777216*r[i+3]}function yc(r,i,s){r[s]=i,r[s+1]=i>>>8,r[s+2]=i>>>16,r[s+3]=i>>>24}function Zb(r,i){return(r[i]|r[i+1]<<8|r[i+2]<<16)+(r[i+3]<<24)}function iM(r,i,s){r===1&&s.readMessage(oM,i)}function oM(r,i,s){if(r===3){var h=s.readMessage(aM,{}),m=h.width,y=h.height,_=h.left,A=h.top,C=h.advance;i.push({id:h.id,bitmap:new uu({width:m+6,height:y+6},h.bitmap),metrics:{width:m,height:y,left:_,top:A,advance:C}})}}function aM(r,i,s){r===1?i.id=s.readVarint():r===2?i.bitmap=s.readBytes():r===3?i.width=s.readVarint():r===4?i.height=s.readVarint():r===5?i.left=s.readSVarint():r===6?i.top=s.readSVarint():r===7&&(i.advance=s.readVarint())}function Kb(r){for(var i=0,s=0,h=0,m=r;h<m.length;h+=1){var y=m[h];i+=y.w*y.h,s=Math.max(s,y.w)}r.sort(function(ae,ge){return ge.h-ae.h});for(var _=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(i/.95)),s),h:1/0}],A=0,C=0,I=0,R=r;I<R.length;I+=1)for(var L=R[I],j=_.length-1;j>=0;j--){var G=_[j];if(!(L.w>G.w||L.h>G.h)){if(L.x=G.x,L.y=G.y,C=Math.max(C,L.y+L.h),A=Math.max(A,L.x+L.w),L.w===G.w&&L.h===G.h){var oe=_.pop();j<_.length&&(_[j]=oe)}else L.h===G.h?(G.x+=L.w,G.w-=L.w):L.w===G.w?(G.y+=L.h,G.h-=L.h):(_.push({x:G.x+L.w,y:G.y,w:G.w-L.w,h:L.h}),G.y+=L.h,G.h-=L.h);break}}return{w:A,h:C,fill:i/(A*C)||0}}Xr.prototype={destroy:function(){this.buf=null},readFields:function(r,i,s){for(s=s||this.length;this.pos<s;){var h=this.readVarint(),m=h>>3,y=this.pos;this.type=7&h,r(m,i,this),this.pos===y&&this.skip(h)}return i},readMessage:function(r,i){return this.readFields(r,i,this.readVarint()+this.pos)},readFixed32:function(){var r=Yd(this.buf,this.pos);return this.pos+=4,r},readSFixed32:function(){var r=Zb(this.buf,this.pos);return this.pos+=4,r},readFixed64:function(){var r=Yd(this.buf,this.pos)+4294967296*Yd(this.buf,this.pos+4);return this.pos+=8,r},readSFixed64:function(){var r=Yd(this.buf,this.pos)+4294967296*Zb(this.buf,this.pos+4);return this.pos+=8,r},readFloat:function(){var r=qb(this.buf,this.pos,!0,23,4);return this.pos+=4,r},readDouble:function(){var r=qb(this.buf,this.pos,!0,52,8);return this.pos+=8,r},readVarint:function(r){var i,s,h=this.buf;return i=127&(s=h[this.pos++]),s<128?i:(i|=(127&(s=h[this.pos++]))<<7,s<128?i:(i|=(127&(s=h[this.pos++]))<<14,s<128?i:(i|=(127&(s=h[this.pos++]))<<21,s<128?i:function(m,y,_){var A,C,I=_.buf;if(A=(112&(C=I[_.pos++]))>>4,C<128||(A|=(127&(C=I[_.pos++]))<<3,C<128)||(A|=(127&(C=I[_.pos++]))<<10,C<128)||(A|=(127&(C=I[_.pos++]))<<17,C<128)||(A|=(127&(C=I[_.pos++]))<<24,C<128)||(A|=(1&(C=I[_.pos++]))<<31,C<128))return mc(m,A,y);throw new Error("Expected varint not more than 10 bytes")}(i|=(15&(s=h[this.pos]))<<28,r,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var r=this.readVarint();return r%2==1?(r+1)/-2:r/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var r=this.readVarint()+this.pos,i=this.pos;return this.pos=r,r-i>=12&&Gb?function(s,h,m){return Gb.decode(s.subarray(h,m))}(this.buf,i,r):function(s,h,m){for(var y="",_=h;_<m;){var A,C,I,R=s[_],L=null,j=R>239?4:R>223?3:R>191?2:1;if(_+j>m)break;j===1?R<128&&(L=R):j===2?(192&(A=s[_+1]))==128&&(L=(31&R)<<6|63&A)<=127&&(L=null):j===3?(C=s[_+2],(192&(A=s[_+1]))==128&&(192&C)==128&&((L=(15&R)<<12|(63&A)<<6|63&C)<=2047||L>=55296&&L<=57343)&&(L=null)):j===4&&(C=s[_+2],I=s[_+3],(192&(A=s[_+1]))==128&&(192&C)==128&&(192&I)==128&&((L=(15&R)<<18|(63&A)<<12|(63&C)<<6|63&I)<=65535||L>=1114112)&&(L=null)),L===null?(L=65533,j=1):L>65535&&(L-=65536,y+=String.fromCharCode(L>>>10&1023|55296),L=56320|1023&L),y+=String.fromCharCode(L),_+=j}return y}(this.buf,i,r)},readBytes:function(){var r=this.readVarint()+this.pos,i=this.buf.subarray(this.pos,r);return this.pos=r,i},readPackedVarint:function(r,i){if(this.type!==Xr.Bytes)return r.push(this.readVarint(i));var s=ks(this);for(r=r||[];this.pos<s;)r.push(this.readVarint(i));return r},readPackedSVarint:function(r){if(this.type!==Xr.Bytes)return r.push(this.readSVarint());var i=ks(this);for(r=r||[];this.pos<i;)r.push(this.readSVarint());return r},readPackedBoolean:function(r){if(this.type!==Xr.Bytes)return r.push(this.readBoolean());var i=ks(this);for(r=r||[];this.pos<i;)r.push(this.readBoolean());return r},readPackedFloat:function(r){if(this.type!==Xr.Bytes)return r.push(this.readFloat());var i=ks(this);for(r=r||[];this.pos<i;)r.push(this.readFloat());return r},readPackedDouble:function(r){if(this.type!==Xr.Bytes)return r.push(this.readDouble());var i=ks(this);for(r=r||[];this.pos<i;)r.push(this.readDouble());return r},readPackedFixed32:function(r){if(this.type!==Xr.Bytes)return r.push(this.readFixed32());var i=ks(this);for(r=r||[];this.pos<i;)r.push(this.readFixed32());return r},readPackedSFixed32:function(r){if(this.type!==Xr.Bytes)return r.push(this.readSFixed32());var i=ks(this);for(r=r||[];this.pos<i;)r.push(this.readSFixed32());return r},readPackedFixed64:function(r){if(this.type!==Xr.Bytes)return r.push(this.readFixed64());var i=ks(this);for(r=r||[];this.pos<i;)r.push(this.readFixed64());return r},readPackedSFixed64:function(r){if(this.type!==Xr.Bytes)return r.push(this.readSFixed64());var i=ks(this);for(r=r||[];this.pos<i;)r.push(this.readSFixed64());return r},skip:function(r){var i=7&r;if(i===Xr.Varint)for(;this.buf[this.pos++]>127;);else if(i===Xr.Bytes)this.pos=this.readVarint()+this.pos;else if(i===Xr.Fixed32)this.pos+=4;else{if(i!==Xr.Fixed64)throw new Error("Unimplemented type: "+i);this.pos+=8}},writeTag:function(r,i){this.writeVarint(r<<3|i)},realloc:function(r){for(var i=this.length||16;i<this.pos+r;)i*=2;if(i!==this.length){var s=new Uint8Array(i);s.set(this.buf),this.buf=s,this.length=i}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(r){this.realloc(4),yc(this.buf,r,this.pos),this.pos+=4},writeSFixed32:function(r){this.realloc(4),yc(this.buf,r,this.pos),this.pos+=4},writeFixed64:function(r){this.realloc(8),yc(this.buf,-1&r,this.pos),yc(this.buf,Math.floor(r*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(r){this.realloc(8),yc(this.buf,-1&r,this.pos),yc(this.buf,Math.floor(r*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(r){(r=+r||0)>268435455||r<0?function(i,s){var h,m;if(i>=0?(h=i%4294967296|0,m=i/4294967296|0):(m=~(-i/4294967296),4294967295^(h=~(-i%4294967296))?h=h+1|0:(h=0,m=m+1|0)),i>=18446744073709552e3||i<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");s.realloc(10),function(y,_,A){A.buf[A.pos++]=127&y|128,y>>>=7,A.buf[A.pos++]=127&y|128,y>>>=7,A.buf[A.pos++]=127&y|128,y>>>=7,A.buf[A.pos++]=127&y|128,A.buf[A.pos]=127&(y>>>=7)}(h,0,s),function(y,_){var A=(7&y)<<4;_.buf[_.pos++]|=A|((y>>>=3)?128:0),y&&(_.buf[_.pos++]=127&y|((y>>>=7)?128:0),y&&(_.buf[_.pos++]=127&y|((y>>>=7)?128:0),y&&(_.buf[_.pos++]=127&y|((y>>>=7)?128:0),y&&(_.buf[_.pos++]=127&y|((y>>>=7)?128:0),y&&(_.buf[_.pos++]=127&y)))))}(m,s)}(r,this):(this.realloc(4),this.buf[this.pos++]=127&r|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=r>>>7&127))))},writeSVarint:function(r){this.writeVarint(r<0?2*-r-1:2*r)},writeBoolean:function(r){this.writeVarint(!!r)},writeString:function(r){r=String(r),this.realloc(4*r.length),this.pos++;var i=this.pos;this.pos=function(h,m,y){for(var _,A,C=0;C<m.length;C++){if((_=m.charCodeAt(C))>55295&&_<57344){if(!A){_>56319||C+1===m.length?(h[y++]=239,h[y++]=191,h[y++]=189):A=_;continue}if(_<56320){h[y++]=239,h[y++]=191,h[y++]=189,A=_;continue}_=A-55296<<10|_-56320|65536,A=null}else A&&(h[y++]=239,h[y++]=191,h[y++]=189,A=null);_<128?h[y++]=_:(_<2048?h[y++]=_>>6|192:(_<65536?h[y++]=_>>12|224:(h[y++]=_>>18|240,h[y++]=_>>12&63|128),h[y++]=_>>6&63|128),h[y++]=63&_|128)}return y}(this.buf,r,this.pos);var s=this.pos-i;s>=128&&Hb(i,s,this),this.pos=i-1,this.writeVarint(s),this.pos+=s},writeFloat:function(r){this.realloc(4),Wb(this.buf,r,this.pos,!0,23,4),this.pos+=4},writeDouble:function(r){this.realloc(8),Wb(this.buf,r,this.pos,!0,52,8),this.pos+=8},writeBytes:function(r){var i=r.length;this.writeVarint(i),this.realloc(i);for(var s=0;s<i;s++)this.buf[this.pos++]=r[s]},writeRawMessage:function(r,i){this.pos++;var s=this.pos;r(i,this);var h=this.pos-s;h>=128&&Hb(s,h,this),this.pos=s-1,this.writeVarint(h),this.pos+=h},writeMessage:function(r,i,s){this.writeTag(r,Xr.Bytes),this.writeRawMessage(i,s)},writePackedVarint:function(r,i){i.length&&this.writeMessage(r,KP,i)},writePackedSVarint:function(r,i){i.length&&this.writeMessage(r,XP,i)},writePackedBoolean:function(r,i){i.length&&this.writeMessage(r,YP,i)},writePackedFloat:function(r,i){i.length&&this.writeMessage(r,QP,i)},writePackedDouble:function(r,i){i.length&&this.writeMessage(r,JP,i)},writePackedFixed32:function(r,i){i.length&&this.writeMessage(r,eM,i)},writePackedSFixed32:function(r,i){i.length&&this.writeMessage(r,tM,i)},writePackedFixed64:function(r,i){i.length&&this.writeMessage(r,rM,i)},writePackedSFixed64:function(r,i){i.length&&this.writeMessage(r,nM,i)},writeBytesField:function(r,i){this.writeTag(r,Xr.Bytes),this.writeBytes(i)},writeFixed32Field:function(r,i){this.writeTag(r,Xr.Fixed32),this.writeFixed32(i)},writeSFixed32Field:function(r,i){this.writeTag(r,Xr.Fixed32),this.writeSFixed32(i)},writeFixed64Field:function(r,i){this.writeTag(r,Xr.Fixed64),this.writeFixed64(i)},writeSFixed64Field:function(r,i){this.writeTag(r,Xr.Fixed64),this.writeSFixed64(i)},writeVarintField:function(r,i){this.writeTag(r,Xr.Varint),this.writeVarint(i)},writeSVarintField:function(r,i){this.writeTag(r,Xr.Varint),this.writeSVarint(i)},writeStringField:function(r,i){this.writeTag(r,Xr.Bytes),this.writeString(i)},writeFloatField:function(r,i){this.writeTag(r,Xr.Fixed32),this.writeFloat(i)},writeDoubleField:function(r,i){this.writeTag(r,Xr.Fixed64),this.writeDouble(i)},writeBooleanField:function(r,i){this.writeVarintField(r,!!i)}};var em=function(r,i){var s=i.pixelRatio,h=i.version,m=i.stretchX,y=i.stretchY,_=i.content;this.paddedRect=r,this.pixelRatio=s,this.stretchX=m,this.stretchY=y,this.content=_,this.version=h},_h={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};_h.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},_h.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},_h.tlbr.get=function(){return this.tl.concat(this.br)},_h.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(em.prototype,_h);var xh=function(r,i){var s={},h={};this.haveRenderCallbacks=[];var m=[];this.addImages(r,s,m),this.addImages(i,h,m);var y=Kb(m),_=new Hi({width:y.w||1,height:y.h||1});for(var A in r){var C=r[A],I=s[A].paddedRect;Hi.copy(C.data,_,{x:0,y:0},{x:I.x+1,y:I.y+1},C.data)}for(var R in i){var L=i[R],j=h[R].paddedRect,G=j.x+1,oe=j.y+1,ae=L.data.width,ge=L.data.height;Hi.copy(L.data,_,{x:0,y:0},{x:G,y:oe},L.data),Hi.copy(L.data,_,{x:0,y:ge-1},{x:G,y:oe-1},{width:ae,height:1}),Hi.copy(L.data,_,{x:0,y:0},{x:G,y:oe+ge},{width:ae,height:1}),Hi.copy(L.data,_,{x:ae-1,y:0},{x:G-1,y:oe},{width:1,height:ge}),Hi.copy(L.data,_,{x:0,y:0},{x:G+ae,y:oe},{width:1,height:ge})}this.image=_,this.iconPositions=s,this.patternPositions=h};xh.prototype.addImages=function(r,i,s){for(var h in r){var m=r[h],y={x:0,y:0,w:m.data.width+2,h:m.data.height+2};s.push(y),i[h]=new em(y,m),m.hasRenderCallback&&this.haveRenderCallbacks.push(h)}},xh.prototype.patchUpdatedImages=function(r,i){for(var s in r.dispatchRenderCallbacks(this.haveRenderCallbacks),r.updatedImages)this.patchUpdatedImage(this.iconPositions[s],r.getImage(s),i),this.patchUpdatedImage(this.patternPositions[s],r.getImage(s),i)},xh.prototype.patchUpdatedImage=function(r,i,s){if(r&&i&&r.version!==i.version){r.version=i.version;var h=r.tl;s.update(i.data,void 0,{x:h[0],y:h[1]})}},_t("ImagePosition",em),_t("ImageAtlas",xh);var go={horizontal:1,vertical:2,horizontalOnly:3},gc=function(){this.scale=1,this.fontStack="",this.imageName=null};gc.forText=function(r,i){var s=new gc;return s.scale=r||1,s.fontStack=i,s},gc.forImage=function(r){var i=new gc;return i.imageName=r,i};var wi=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function tm(r,i,s,h,m,y,_,A,C,I,R,L,j,G,oe,ae){var ge,pe=wi.fromFeature(r,m);L===go.vertical&&pe.verticalizePunctuation();var Se=io.processBidirectionalText,Re=io.processStyledBidirectionalText;if(Se&&pe.sections.length===1){ge=[];for(var Oe=0,Be=Se(pe.toString(),Hv(pe,I,y,i,h,G,oe));Oe<Be.length;Oe+=1){var Ge=Be[Oe],Je=new wi;Je.text=Ge,Je.sections=pe.sections;for(var tt=0;tt<Ge.length;tt++)Je.sectionIndex.push(0);ge.push(Je)}}else if(Re){ge=[];for(var Et=0,lt=Re(pe.text,pe.sectionIndex,Hv(pe,I,y,i,h,G,oe));Et<lt.length;Et+=1){var Tt=lt[Et],ht=new wi;ht.text=Tt[0],ht.sectionIndex=Tt[1],ht.sections=pe.sections,ge.push(ht)}}else ge=function(wt,ar){for(var Kt=[],xr=wt.text,It=0,Cr=0,on=ar;Cr<on.length;Cr+=1){var yn=on[Cr];Kt.push(wt.substring(It,yn)),It=yn}return It<xr.length&&Kt.push(wt.substring(It,xr.length)),Kt}(pe,Hv(pe,I,y,i,h,G,oe));var Yt=[],Nt={positionedLines:Yt,text:pe.toString(),top:R[1],bottom:R[1],left:R[0],right:R[0],writingMode:L,iconsInText:!1,verticalizable:!1};return function(wt,ar,Kt,xr,It,Cr,on,yn,hn,an,gn,qn){for(var Wn=0,Ai=-17,ni=0,Ei=0,En=yn==="right"?1:yn==="left"?0:.5,ii=0,hr=0,Wr=It;hr<Wr.length;hr+=1){var Br=Wr[hr];Br.trim();var wr=Br.getMaxScale(),zi=24*(wr-1),fi={positionedGlyphs:[],lineOffset:0};wt.positionedLines[ii]=fi;var Yr=fi.positionedGlyphs,Mn=0;if(Br.length()){for(var di=0;di<Br.length();di++){var kr=Br.getSection(di),Va=Br.getSectionIndex(di),vo=Br.getCharCode(di),$a=0,Sn=null,qa=null,Jo=null,Sc=24,fu=!(hn===go.horizontal||!gn&&!rc(vo)||gn&&(rm[vo]||(Ms=vo,ot.Arabic(Ms)||ot["Arabic Supplement"](Ms)||ot["Arabic Extended-A"](Ms)||ot["Arabic Presentation Forms-A"](Ms)||ot["Arabic Presentation Forms-B"](Ms))));if(kr.imageName){var Cc=xr[kr.imageName];if(!Cc)continue;Jo=kr.imageName,wt.iconsInText=wt.iconsInText||!0,qa=Cc.paddedRect;var Ps=Cc.displaySize;kr.scale=24*kr.scale/qn,$a=zi+(24-Ps[1]*kr.scale),Sc=(Sn={width:Ps[0],height:Ps[1],left:1,top:-3,advance:fu?Ps[1]:Ps[0]}).advance;var kc=fu?Ps[0]*kr.scale-24*wr:Ps[1]*kr.scale-24*wr;kc>0&&kc>Mn&&(Mn=kc)}else{var pm=Kt[kr.fontStack],Tc=pm&&pm[vo];if(Tc&&Tc.rect)qa=Tc.rect,Sn=Tc.metrics;else{var Ah=ar[kr.fontStack],hm=Ah&&Ah[vo];if(!hm)continue;Sn=hm.metrics}$a=24*(wr-kr.scale)}fu?(wt.verticalizable=!0,Yr.push({glyph:vo,imageName:Jo,x:Wn,y:Ai+$a,vertical:fu,scale:kr.scale,fontStack:kr.fontStack,sectionIndex:Va,metrics:Sn,rect:qa}),Wn+=Sc*kr.scale+an):(Yr.push({glyph:vo,imageName:Jo,x:Wn,y:Ai+$a,vertical:fu,scale:kr.scale,fontStack:kr.fontStack,sectionIndex:Va,metrics:Sn,rect:qa}),Wn+=Sn.advance*kr.scale+an)}Yr.length!==0&&(ni=Math.max(Wn-an,ni),lM(Yr,0,Yr.length-1,En,Mn)),Wn=0;var fm=Cr*wr+Mn;fi.lineOffset=Math.max(Mn,zi),Ai+=fm,Ei=Math.max(fm,Ei),++ii}else Ai+=Cr,++ii}var Ms,Eh=Ai- -17,Ic=Zv(on),cl=Ic.horizontalAlign,Pc=Ic.verticalAlign;(function(dm,mm,Sh,Ch,ym,kh,Th,Ih,gm){var Mc,vm=(mm-Sh)*ym;Mc=kh!==Th?-Ih*Ch- -17:(-Ch*gm+.5)*Th;for(var Rc=0,Ph=dm;Rc<Ph.length;Rc+=1)for(var du=0,Mh=Ph[Rc].positionedGlyphs;du<Mh.length;du+=1){var zc=Mh[du];zc.x+=vm,zc.y+=Mc}})(wt.positionedLines,En,cl,Pc,ni,Ei,Cr,Eh,It.length),wt.top+=-Pc*Eh,wt.bottom=wt.top+Eh,wt.left+=-cl*ni,wt.right=wt.left+ni}(Nt,i,s,h,ge,_,A,C,L,I,j,ae),!function(wt){for(var ar=0,Kt=wt;ar<Kt.length;ar+=1)if(Kt[ar].positionedGlyphs.length!==0)return!1;return!0}(Yt)&&Nt}wi.fromFeature=function(r,i){for(var s=new wi,h=0;h<r.sections.length;h++){var m=r.sections[h];m.image?s.addImageSection(m):s.addTextSection(m,i)}return s},wi.prototype.length=function(){return this.text.length},wi.prototype.getSection=function(r){return this.sections[this.sectionIndex[r]]},wi.prototype.getSectionIndex=function(r){return this.sectionIndex[r]},wi.prototype.getCharCode=function(r){return this.text.charCodeAt(r)},wi.prototype.verticalizePunctuation=function(){this.text=function(r){for(var i="",s=0;s<r.length;s++){var h=r.charCodeAt(s+1)||null,m=r.charCodeAt(s-1)||null;i+=h&&nh(h)&&!vh[r[s+1]]||m&&nh(m)&&!vh[r[s-1]]||!vh[r[s]]?r[s]:vh[r[s]]}return i}(this.text)},wi.prototype.trim=function(){for(var r=0,i=0;i<this.text.length&&rm[this.text.charCodeAt(i)];i++)r++;for(var s=this.text.length,h=this.text.length-1;h>=0&&h>=r&&rm[this.text.charCodeAt(h)];h--)s--;this.text=this.text.substring(r,s),this.sectionIndex=this.sectionIndex.slice(r,s)},wi.prototype.substring=function(r,i){var s=new wi;return s.text=this.text.substring(r,i),s.sectionIndex=this.sectionIndex.slice(r,i),s.sections=this.sections,s},wi.prototype.toString=function(){return this.text},wi.prototype.getMaxScale=function(){var r=this;return this.sectionIndex.reduce(function(i,s){return Math.max(i,r.sections[s].scale)},0)},wi.prototype.addTextSection=function(r,i){this.text+=r.text,this.sections.push(gc.forText(r.scale,r.fontStack||i));for(var s=this.sections.length-1,h=0;h<r.text.length;++h)this.sectionIndex.push(s)},wi.prototype.addImageSection=function(r){var i=r.image?r.image.name:"";if(i.length!==0){var s=this.getNextImageSectionCharCode();s?(this.text+=String.fromCharCode(s),this.sections.push(gc.forImage(i)),this.sectionIndex.push(this.sections.length-1)):he("Reached maximum number of images 6401")}else he("Can't add FormattedSection with an empty image.")},wi.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var rm={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},ao={};function Xb(r,i,s,h,m,y){if(i.imageName){var _=h[i.imageName];return _?_.displaySize[0]*i.scale*24/y+m:0}var A=s[i.fontStack],C=A&&A[r];return C?C.metrics.advance*i.scale+m:0}function Qb(r,i,s,h){var m=Math.pow(r-i,2);return h?r<i?m/2:2*m:m+Math.abs(s)*s}function sM(r,i,s){var h=0;return r===10&&(h-=1e4),s&&(h+=150),r!==40&&r!==65288||(h+=50),i!==41&&i!==65289||(h+=50),h}function Jb(r,i,s,h,m,y){for(var _=null,A=Qb(i,s,m,y),C=0,I=h;C<I.length;C+=1){var R=I[C],L=Qb(i-R.x,s,m,y)+R.badness;L<=A&&(_=R,A=L)}return{index:r,x:i,priorBreak:_,badness:A}}function Hv(r,i,s,h,m,y,_){if(y!=="point")return[];if(!r)return[];for(var A,C=[],I=function(ge,pe,Se,Re,Oe,Be){for(var Ge=0,Je=0;Je<ge.length();Je++){var tt=ge.getSection(Je);Ge+=Xb(ge.getCharCode(Je),tt,Re,Oe,pe,Be)}return Ge/Math.max(1,Math.ceil(Ge/Se))}(r,i,s,h,m,_),R=r.text.indexOf("​")>=0,L=0,j=0;j<r.length();j++){var G=r.getSection(j),oe=r.getCharCode(j);if(rm[oe]||(L+=Xb(oe,G,h,m,i,_)),j<r.length()-1){var ae=!((A=oe)<11904||!(ot["Bopomofo Extended"](A)||ot.Bopomofo(A)||ot["CJK Compatibility Forms"](A)||ot["CJK Compatibility Ideographs"](A)||ot["CJK Compatibility"](A)||ot["CJK Radicals Supplement"](A)||ot["CJK Strokes"](A)||ot["CJK Symbols and Punctuation"](A)||ot["CJK Unified Ideographs Extension A"](A)||ot["CJK Unified Ideographs"](A)||ot["Enclosed CJK Letters and Months"](A)||ot["Halfwidth and Fullwidth Forms"](A)||ot.Hiragana(A)||ot["Ideographic Description Characters"](A)||ot["Kangxi Radicals"](A)||ot["Katakana Phonetic Extensions"](A)||ot.Katakana(A)||ot["Vertical Forms"](A)||ot["Yi Radicals"](A)||ot["Yi Syllables"](A)));(ao[oe]||ae||G.imageName)&&C.push(Jb(j+1,L,I,C,sM(oe,r.getCharCode(j+1),ae&&R),!1))}}return function ge(pe){return pe?ge(pe.priorBreak).concat(pe.index):[]}(Jb(r.length(),L,I,C,0,!0))}function Zv(r){var i=.5,s=.5;switch(r){case"right":case"top-right":case"bottom-right":i=1;break;case"left":case"top-left":case"bottom-left":i=0}switch(r){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:i,verticalAlign:s}}function lM(r,i,s,h,m){if(h||m)for(var y=r[s],_=(r[s].x+y.metrics.advance*y.scale)*h,A=i;A<=s;A++)r[A].x-=_,r[A].y+=m}function Yb(r,i,s,h,m,y){var _,A=r.image;if(A.content){var C=A.content,I=A.pixelRatio||1;_=[C[0]/I,C[1]/I,A.displaySize[0]-C[2]/I,A.displaySize[1]-C[3]/I]}var R,L,j,G,oe=i.left*y,ae=i.right*y;s==="width"||s==="both"?(G=m[0]+oe-h[3],L=m[0]+ae+h[1]):L=(G=m[0]+(oe+ae-A.displaySize[0])/2)+A.displaySize[0];var ge=i.top*y,pe=i.bottom*y;return s==="height"||s==="both"?(R=m[1]+ge-h[0],j=m[1]+pe+h[2]):j=(R=m[1]+(ge+pe-A.displaySize[1])/2)+A.displaySize[1],{image:A,top:R,right:L,bottom:j,left:G,collisionPadding:_}}ao[10]=!0,ao[32]=!0,ao[38]=!0,ao[40]=!0,ao[41]=!0,ao[43]=!0,ao[45]=!0,ao[47]=!0,ao[173]=!0,ao[183]=!0,ao[8203]=!0,ao[8208]=!0,ao[8211]=!0,ao[8231]=!0;var vc=function(r){function i(s,h,m,y){r.call(this,s,h),this.angle=m,y!==void 0&&(this.segment=y)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.clone=function(){return new i(this.x,this.y,this.angle,this.segment)},i}(k);function Kv(r,i){var s=i.expression;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new ur(r+1))};if(s.kind==="source")return{kind:"source"};for(var h=s.zoomStops,m=s.interpolationType,y=0;y<h.length&&h[y]<=r;)y++;for(var _=y=Math.max(0,y-1);_<h.length&&h[_]<r+1;)_++;_=Math.min(h.length-1,_);var A=h[y],C=h[_];return s.kind==="composite"?{kind:"composite",minZoom:A,maxZoom:C,interpolationType:m}:{kind:"camera",minZoom:A,maxZoom:C,minSize:s.evaluate(new ur(A)),maxSize:s.evaluate(new ur(C)),interpolationType:m}}function ew(r,i,s){var h=i.uSize,m=s.lowerSize;return r.kind==="source"?m/128:r.kind==="composite"?In(m/128,s.upperSize/128,i.uSizeT):h}function tw(r,i){var s=0,h=0;if(r.kind==="constant")h=r.layoutSize;else if(r.kind!=="source"){var m=r.interpolationType,y=m?D(li.interpolationFactor(m,i,r.minZoom,r.maxZoom),0,1):0;r.kind==="camera"?h=In(r.minSize,r.maxSize,y):s=y}return{uSizeT:s,uSize:h}}_t("Anchor",vc);var uM=Object.freeze({__proto__:null,getSizeData:Kv,evaluateSizeForFeature:ew,evaluateSizeForZoom:tw,SIZE_PACK_FACTOR:128});function rw(r,i,s,h,m){if(i.segment===void 0)return!0;for(var y=i,_=i.segment+1,A=0;A>-s/2;){if(--_<0)return!1;A-=r[_].dist(y),y=r[_]}A+=r[_].dist(r[_+1]),_++;for(var C=[],I=0;A<s/2;){var R=r[_],L=r[_+1];if(!L)return!1;var j=r[_-1].angleTo(R)-R.angleTo(L);for(j=Math.abs((j+3*Math.PI)%(2*Math.PI)-Math.PI),C.push({distance:A,angleDelta:j}),I+=j;A-C[0].distance>h;)I-=C.shift().angleDelta;if(I>m)return!1;_++,A+=R.dist(L)}return!0}function nw(r){for(var i=0,s=0;s<r.length-1;s++)i+=r[s].dist(r[s+1]);return i}function iw(r,i,s){return r?.6*i*s:0}function ow(r,i){return Math.max(r?r.right-r.left:0,i?i.right-i.left:0)}function cM(r,i,s,h,m,y){for(var _=iw(s,m,y),A=ow(s,h)*y,C=0,I=nw(r)/2,R=0;R<r.length-1;R++){var L=r[R],j=r[R+1],G=L.dist(j);if(C+G>I){var oe=(I-C)/G,ae=In(L.x,j.x,oe),ge=In(L.y,j.y,oe),pe=new vc(ae,ge,j.angleTo(L),R);return pe._round(),!_||rw(r,pe,A,_,i)?pe:void 0}C+=G}}function pM(r,i,s,h,m,y,_,A,C){var I=iw(h,y,_),R=ow(h,m),L=R*_,j=r[0].x===0||r[0].x===C||r[0].y===0||r[0].y===C;return i-L<i/4&&(i=L+i/4),function G(oe,ae,ge,pe,Se,Re,Oe,Be,Ge){for(var Je=Re/2,tt=nw(oe),Et=0,lt=ae-ge,Tt=[],ht=0;ht<oe.length-1;ht++){for(var Yt=oe[ht],Nt=oe[ht+1],wt=Yt.dist(Nt),ar=Nt.angleTo(Yt);lt+ge<Et+wt;){var Kt=((lt+=ge)-Et)/wt,xr=In(Yt.x,Nt.x,Kt),It=In(Yt.y,Nt.y,Kt);if(xr>=0&&xr<Ge&&It>=0&&It<Ge&&lt-Je>=0&&lt+Je<=tt){var Cr=new vc(xr,It,ar,ht);Cr._round(),pe&&!rw(oe,Cr,Re,pe,Se)||Tt.push(Cr)}}Et+=wt}return Be||Tt.length||Oe||(Tt=G(oe,Et/2,ge,pe,Se,Re,Oe,!0,Ge)),Tt}(r,j?i/2*A%i:(R/2+2*y)*_*A%i,i,I,s,L,j,!1,C)}function aw(r,i,s,h,m){for(var y=[],_=0;_<r.length;_++)for(var A=r[_],C=void 0,I=0;I<A.length-1;I++){var R=A[I],L=A[I+1];R.x<i&&L.x<i||(R.x<i?R=new k(i,R.y+(i-R.x)/(L.x-R.x)*(L.y-R.y))._round():L.x<i&&(L=new k(i,R.y+(i-R.x)/(L.x-R.x)*(L.y-R.y))._round()),R.y<s&&L.y<s||(R.y<s?R=new k(R.x+(s-R.y)/(L.y-R.y)*(L.x-R.x),s)._round():L.y<s&&(L=new k(R.x+(s-R.y)/(L.y-R.y)*(L.x-R.x),s)._round()),R.x>=h&&L.x>=h||(R.x>=h?R=new k(h,R.y+(h-R.x)/(L.x-R.x)*(L.y-R.y))._round():L.x>=h&&(L=new k(h,R.y+(h-R.x)/(L.x-R.x)*(L.y-R.y))._round()),R.y>=m&&L.y>=m||(R.y>=m?R=new k(R.x+(m-R.y)/(L.y-R.y)*(L.x-R.x),m)._round():L.y>=m&&(L=new k(R.x+(m-R.y)/(L.y-R.y)*(L.x-R.x),m)._round()),C&&R.equals(C[C.length-1])||y.push(C=[R]),C.push(L)))))}return y}function sw(r,i,s,h){var m=[],y=r.image,_=y.pixelRatio,A=y.paddedRect.w-2,C=y.paddedRect.h-2,I=r.right-r.left,R=r.bottom-r.top,L=y.stretchX||[[0,A]],j=y.stretchY||[[0,C]],G=function(xr,It){return xr+It[1]-It[0]},oe=L.reduce(G,0),ae=j.reduce(G,0),ge=A-oe,pe=C-ae,Se=0,Re=oe,Oe=0,Be=ae,Ge=0,Je=ge,tt=0,Et=pe;if(y.content&&h){var lt=y.content;Se=nm(L,0,lt[0]),Oe=nm(j,0,lt[1]),Re=nm(L,lt[0],lt[2]),Be=nm(j,lt[1],lt[3]),Ge=lt[0]-Se,tt=lt[1]-Oe,Je=lt[2]-lt[0]-Re,Et=lt[3]-lt[1]-Be}var Tt=function(xr,It,Cr,on){var yn=im(xr.stretch-Se,Re,I,r.left),hn=om(xr.fixed-Ge,Je,xr.stretch,oe),an=im(It.stretch-Oe,Be,R,r.top),gn=om(It.fixed-tt,Et,It.stretch,ae),qn=im(Cr.stretch-Se,Re,I,r.left),Wn=om(Cr.fixed-Ge,Je,Cr.stretch,oe),Ai=im(on.stretch-Oe,Be,R,r.top),ni=om(on.fixed-tt,Et,on.stretch,ae),Ei=new k(yn,an),En=new k(qn,an),ii=new k(qn,Ai),hr=new k(yn,Ai),Wr=new k(hn/_,gn/_),Br=new k(Wn/_,ni/_),wr=i*Math.PI/180;if(wr){var zi=Math.sin(wr),fi=Math.cos(wr),Yr=[fi,-zi,zi,fi];Ei._matMult(Yr),En._matMult(Yr),hr._matMult(Yr),ii._matMult(Yr)}var Mn=xr.stretch+xr.fixed,di=It.stretch+It.fixed;return{tl:Ei,tr:En,bl:hr,br:ii,tex:{x:y.paddedRect.x+1+Mn,y:y.paddedRect.y+1+di,w:Cr.stretch+Cr.fixed-Mn,h:on.stretch+on.fixed-di},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Wr,pixelOffsetBR:Br,minFontScaleX:Je/_/I,minFontScaleY:Et/_/R,isSDF:s}};if(h&&(y.stretchX||y.stretchY))for(var ht=lw(L,ge,oe),Yt=lw(j,pe,ae),Nt=0;Nt<ht.length-1;Nt++)for(var wt=ht[Nt],ar=ht[Nt+1],Kt=0;Kt<Yt.length-1;Kt++)m.push(Tt(wt,Yt[Kt],ar,Yt[Kt+1]));else m.push(Tt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:A+1},{fixed:0,stretch:C+1}));return m}function nm(r,i,s){for(var h=0,m=0,y=r;m<y.length;m+=1){var _=y[m];h+=Math.max(i,Math.min(s,_[1]))-Math.max(i,Math.min(s,_[0]))}return h}function lw(r,i,s){for(var h=[{fixed:-1,stretch:0}],m=0,y=r;m<y.length;m+=1){var _=y[m],A=_[0],C=_[1],I=h[h.length-1];h.push({fixed:A-I.stretch,stretch:I.stretch}),h.push({fixed:A-I.stretch,stretch:I.stretch+(C-A)})}return h.push({fixed:i+1,stretch:s}),h}function im(r,i,s,h){return r/i*s+h}function om(r,i,s,h){return r-i*s/h}var am=function(r,i,s,h,m,y,_,A,C,I){if(this.boxStartIndex=r.length,C){var R=y.top,L=y.bottom,j=y.collisionPadding;j&&(R-=j[1],L+=j[3]);var G=L-R;G>0&&(G=Math.max(10,G),this.circleDiameter=G)}else{var oe=y.top*_-A,ae=y.bottom*_+A,ge=y.left*_-A,pe=y.right*_+A,Se=y.collisionPadding;if(Se&&(ge-=Se[0]*_,oe-=Se[1]*_,pe+=Se[2]*_,ae+=Se[3]*_),I){var Re=new k(ge,oe),Oe=new k(pe,oe),Be=new k(ge,ae),Ge=new k(pe,ae),Je=I*Math.PI/180;Re._rotate(Je),Oe._rotate(Je),Be._rotate(Je),Ge._rotate(Je),ge=Math.min(Re.x,Oe.x,Be.x,Ge.x),pe=Math.max(Re.x,Oe.x,Be.x,Ge.x),oe=Math.min(Re.y,Oe.y,Be.y,Ge.y),ae=Math.max(Re.y,Oe.y,Be.y,Ge.y)}r.emplaceBack(i.x,i.y,ge,oe,pe,ae,s,h,m)}this.boxEndIndex=r.length},_c=function(r,i){if(r===void 0&&(r=[]),i===void 0&&(i=hM),this.data=r,this.length=this.data.length,this.compare=i,this.length>0)for(var s=(this.length>>1)-1;s>=0;s--)this._down(s)};function hM(r,i){return r<i?-1:r>i?1:0}function fM(r,i,s){i===void 0&&(i=1),s===void 0&&(s=!1);for(var h=1/0,m=1/0,y=-1/0,_=-1/0,A=r[0],C=0;C<A.length;C++){var I=A[C];(!C||I.x<h)&&(h=I.x),(!C||I.y<m)&&(m=I.y),(!C||I.x>y)&&(y=I.x),(!C||I.y>_)&&(_=I.y)}var R=Math.min(y-h,_-m),L=R/2,j=new _c([],dM);if(R===0)return new k(h,m);for(var G=h;G<y;G+=R)for(var oe=m;oe<_;oe+=R)j.push(new xc(G+L,oe+L,L,r));for(var ae=function(Se){for(var Re=0,Oe=0,Be=0,Ge=Se[0],Je=0,tt=Ge.length,Et=tt-1;Je<tt;Et=Je++){var lt=Ge[Je],Tt=Ge[Et],ht=lt.x*Tt.y-Tt.x*lt.y;Oe+=(lt.x+Tt.x)*ht,Be+=(lt.y+Tt.y)*ht,Re+=3*ht}return new xc(Oe/Re,Be/Re,0,Se)}(r),ge=j.length;j.length;){var pe=j.pop();(pe.d>ae.d||!ae.d)&&(ae=pe,s&&console.log("found best %d after %d probes",Math.round(1e4*pe.d)/1e4,ge)),pe.max-ae.d<=i||(j.push(new xc(pe.p.x-(L=pe.h/2),pe.p.y-L,L,r)),j.push(new xc(pe.p.x+L,pe.p.y-L,L,r)),j.push(new xc(pe.p.x-L,pe.p.y+L,L,r)),j.push(new xc(pe.p.x+L,pe.p.y+L,L,r)),ge+=4)}return s&&(console.log("num probes: "+ge),console.log("best distance: "+ae.d)),ae.p}function dM(r,i){return i.max-r.max}function xc(r,i,s,h){this.p=new k(r,i),this.h=s,this.d=function(m,y){for(var _=!1,A=1/0,C=0;C<y.length;C++)for(var I=y[C],R=0,L=I.length,j=L-1;R<L;j=R++){var G=I[R],oe=I[j];G.y>m.y!=oe.y>m.y&&m.x<(oe.x-G.x)*(m.y-G.y)/(oe.y-G.y)+G.x&&(_=!_),A=Math.min(A,al(m,G,oe))}return(_?1:-1)*Math.sqrt(A)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}_c.prototype.push=function(r){this.data.push(r),this.length++,this._up(this.length-1)},_c.prototype.pop=function(){if(this.length!==0){var r=this.data[0],i=this.data.pop();return this.length--,this.length>0&&(this.data[0]=i,this._down(0)),r}},_c.prototype.peek=function(){return this.data[0]},_c.prototype._up=function(r){for(var i=this.data,s=this.compare,h=i[r];r>0;){var m=r-1>>1,y=i[m];if(s(h,y)>=0)break;i[r]=y,r=m}i[r]=h},_c.prototype._down=function(r){for(var i=this.data,s=this.compare,h=this.length>>1,m=i[r];r<h;){var y=1+(r<<1),_=i[y],A=y+1;if(A<this.length&&s(i[A],_)<0&&(y=A,_=i[A]),s(_,m)>=0)break;i[r]=_,r=y}i[r]=m};var Xv=Number.POSITIVE_INFINITY;function uw(r,i){return i[1]!==Xv?function(s,h,m){var y=0,_=0;switch(h=Math.abs(h),m=Math.abs(m),s){case"top-right":case"top-left":case"top":_=m-7;break;case"bottom-right":case"bottom-left":case"bottom":_=7-m}switch(s){case"top-right":case"bottom-right":case"right":y=-h;break;case"top-left":case"bottom-left":case"left":y=h}return[y,_]}(r,i[0],i[1]):function(s,h){var m=0,y=0;h<0&&(h=0);var _=h/Math.sqrt(2);switch(s){case"top-right":case"top-left":y=_-7;break;case"bottom-right":case"bottom-left":y=7-_;break;case"bottom":y=7-h;break;case"top":y=h-7}switch(s){case"top-right":case"bottom-right":m=-_;break;case"top-left":case"bottom-left":m=_;break;case"left":m=h;break;case"right":m=-h}return[m,y]}(r,i[0])}function Qv(r){switch(r){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function cw(r,i,s,h,m,y,_,A,C,I,R,L,j,G,oe){var ae=function(Oe,Be,Ge,Je,tt,Et,lt,Tt){for(var ht=Je.layout.get("text-rotate").evaluate(Et,{})*Math.PI/180,Yt=[],Nt=0,wt=Be.positionedLines;Nt<wt.length;Nt+=1)for(var ar=wt[Nt],Kt=0,xr=ar.positionedGlyphs;Kt<xr.length;Kt+=1){var It=xr[Kt];if(It.rect){var Cr=It.rect||{},on=4,yn=!0,hn=1,an=0,gn=(tt||Tt)&&It.vertical,qn=It.metrics.advance*It.scale/2;if(Tt&&Be.verticalizable&&(an=ar.lineOffset/2-(It.imageName?-(24-It.metrics.width*It.scale)/2:24*(It.scale-1))),It.imageName){var Wn=lt[It.imageName];yn=Wn.sdf,on=1/(hn=Wn.pixelRatio)}var Ai=tt?[It.x+qn,It.y]:[0,0],ni=tt?[0,0]:[It.x+qn+Ge[0],It.y+Ge[1]-an],Ei=[0,0];gn&&(Ei=ni,ni=[0,0]);var En=(It.metrics.left-on)*It.scale-qn+ni[0],ii=(-It.metrics.top-on)*It.scale+ni[1],hr=En+Cr.w*It.scale/hn,Wr=ii+Cr.h*It.scale/hn,Br=new k(En,ii),wr=new k(hr,ii),zi=new k(En,Wr),fi=new k(hr,Wr);if(gn){var Yr=new k(-qn,qn- -17),Mn=-Math.PI/2,di=12-qn,kr=new k(22-di,-(It.imageName?di:0)),Va=new(Function.prototype.bind.apply(k,[null].concat(Ei)));Br._rotateAround(Mn,Yr)._add(kr)._add(Va),wr._rotateAround(Mn,Yr)._add(kr)._add(Va),zi._rotateAround(Mn,Yr)._add(kr)._add(Va),fi._rotateAround(Mn,Yr)._add(kr)._add(Va)}if(ht){var vo=Math.sin(ht),$a=Math.cos(ht),Sn=[$a,-vo,vo,$a];Br._matMult(Sn),wr._matMult(Sn),zi._matMult(Sn),fi._matMult(Sn)}var qa=new k(0,0),Jo=new k(0,0);Yt.push({tl:Br,tr:wr,bl:zi,br:fi,tex:Cr,writingMode:Be.writingMode,glyphOffset:Ai,sectionIndex:It.sectionIndex,isSDF:yn,pixelOffsetTL:qa,pixelOffsetBR:Jo,minFontScaleX:0,minFontScaleY:0})}}return Yt}(0,s,A,m,y,_,h,r.allowVerticalPlacement),ge=r.textSizeData,pe=null;ge.kind==="source"?(pe=[128*m.layout.get("text-size").evaluate(_,{})])[0]>32640&&he(r.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):ge.kind==="composite"&&((pe=[128*G.compositeTextSizes[0].evaluate(_,{},oe),128*G.compositeTextSizes[1].evaluate(_,{},oe)])[0]>32640||pe[1]>32640)&&he(r.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),r.addSymbols(r.text,ae,pe,A,y,_,I,i,C.lineStartIndex,C.lineLength,j,oe);for(var Se=0,Re=R;Se<Re.length;Se+=1)L[Re[Se]]=r.text.placedSymbolArray.length-1;return 4*ae.length}function pw(r){for(var i in r)return r[i];return null}function mM(r,i,s,h){var m=r.compareText;if(i in m){for(var y=m[i],_=y.length-1;_>=0;_--)if(h.dist(y[_])<s)return!0}else m[i]=[];return m[i].push(h),!1}var yM=dc.VectorTileFeature.types,gM=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function sm(r,i,s,h,m,y,_,A,C,I,R,L,j){var G=A?Math.min(32640,Math.round(A[0])):0,oe=A?Math.min(32640,Math.round(A[1])):0;r.emplaceBack(i,s,Math.round(32*h),Math.round(32*m),y,_,(G<<1)+(C?1:0),oe,16*I,16*R,256*L,256*j)}function Jv(r,i,s){r.emplaceBack(i.x,i.y,s),r.emplaceBack(i.x,i.y,s),r.emplaceBack(i.x,i.y,s),r.emplaceBack(i.x,i.y,s)}function vM(r){for(var i=0,s=r.sections;i<s.length;i+=1)if(nc(s[i].text))return!0;return!1}var bc=function(r){this.layoutVertexArray=new sc,this.indexArray=new Da,this.programConfigurations=r,this.segments=new Q,this.dynamicLayoutVertexArray=new nl,this.opacityVertexArray=new nu,this.placedSymbolArray=new f};bc.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},bc.prototype.upload=function(r,i,s,h){this.isEmpty()||(s&&(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,qP.members),this.indexBuffer=r.createIndexBuffer(this.indexArray,i),this.dynamicLayoutVertexBuffer=r.createVertexBuffer(this.dynamicLayoutVertexArray,WP.members,!0),this.opacityVertexBuffer=r.createVertexBuffer(this.opacityVertexArray,gM,!0),this.opacityVertexBuffer.itemSize=1),(s||h)&&this.programConfigurations.upload(r))},bc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},_t("SymbolBuffers",bc);var bh=function(r,i,s){this.layoutVertexArray=new r,this.layoutAttributes=i,this.indexArray=new s,this.segments=new Q,this.collisionVertexArray=new uh};bh.prototype.upload=function(r){this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=r.createVertexBuffer(this.collisionVertexArray,GP.members,!0)},bh.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},_t("CollisionBuffers",bh);var Vr=function(r){this.collisionBoxArray=r.collisionBoxArray,this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(function(y){return y.id}),this.index=r.index,this.pixelRatio=r.pixelRatio,this.sourceLayerIndex=r.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=oo([]),this.placementViewportMatrix=oo([]);var i=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Kv(this.zoom,i["text-size"]),this.iconSizeData=Kv(this.zoom,i["icon-size"]);var s=this.layers[0].layout,h=s.get("symbol-sort-key"),m=s.get("symbol-z-order");this.canOverlap=s.get("text-allow-overlap")||s.get("icon-allow-overlap")||s.get("text-ignore-placement")||s.get("icon-ignore-placement"),this.sortFeaturesByKey=m!=="viewport-y"&&h.constantOr(1)!==void 0,this.sortFeaturesByY=(m==="viewport-y"||m==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,s.get("symbol-placement")==="point"&&(this.writingModes=s.get("text-writing-mode").map(function(y){return go[y]})),this.stateDependentLayerIds=this.layers.filter(function(y){return y.isStateDependent()}).map(function(y){return y.id}),this.sourceID=r.sourceID};Vr.prototype.createArrays=function(){this.text=new bc(new Ot(this.layers,this.zoom,function(r){return/^text/.test(r)})),this.icon=new bc(new Ot(this.layers,this.zoom,function(r){return/^icon/.test(r)})),this.glyphOffsetArray=new w,this.lineVertexArray=new S,this.symbolInstances=new b},Vr.prototype.calculateGlyphDependencies=function(r,i,s,h,m){for(var y=0;y<r.length;y++)if(i[r.charCodeAt(y)]=!0,(s||h)&&m){var _=vh[r.charAt(y)];_&&(i[_.charCodeAt(0)]=!0)}},Vr.prototype.populate=function(r,i,s){var h=this.layers[0],m=h.layout,y=m.get("text-font"),_=m.get("text-field"),A=m.get("icon-image"),C=(_.value.kind!=="constant"||_.value.value instanceof Jn&&!_.value.value.isEmpty()||_.value.value.toString().length>0)&&(y.value.kind!=="constant"||y.value.value.length>0),I=A.value.kind!=="constant"||!!A.value.value||Object.keys(A.parameters).length>0,R=m.get("symbol-sort-key");if(this.features=[],C||I){for(var L=i.iconDependencies,j=i.glyphDependencies,G=i.availableImages,oe=new ur(this.zoom),ae=0,ge=r;ae<ge.length;ae+=1){var pe=ge[ae],Se=pe.feature,Re=pe.id,Oe=pe.index,Be=pe.sourceLayerIndex,Ge=h._featureFilter.needGeometry,Je=An(Se,Ge);if(h._featureFilter.filter(oe,Je,s)){Ge||(Je.geometry=pn(Se));var tt=void 0;if(C){var Et=h.getValueAndResolveTokens("text-field",Je,s,G),lt=Jn.factory(Et);vM(lt)&&(this.hasRTLText=!0),(!this.hasRTLText||oh()==="unavailable"||this.hasRTLText&&io.isParsed())&&(tt=ZP(lt,h,Je))}var Tt=void 0;if(I){var ht=h.getValueAndResolveTokens("icon-image",Je,s,G);Tt=ht instanceof Ii?ht:Ii.fromString(ht)}if(tt||Tt){var Yt=this.sortFeaturesByKey?R.evaluate(Je,{},s):void 0;if(this.features.push({id:Re,text:tt,icon:Tt,index:Oe,sourceLayerIndex:Be,geometry:Je.geometry,properties:Se.properties,type:yM[Se.type],sortKey:Yt}),Tt&&(L[Tt.name]=!0),tt){var Nt=y.evaluate(Je,{},s).join(","),wt=m.get("text-rotation-alignment")==="map"&&m.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(go.vertical)>=0;for(var ar=0,Kt=tt.sections;ar<Kt.length;ar+=1){var xr=Kt[ar];if(xr.image)L[xr.image.name]=!0;else{var It=rh(tt.toString()),Cr=xr.fontStack||Nt,on=j[Cr]=j[Cr]||{};this.calculateGlyphDependencies(xr.text,on,wt,this.allowVerticalPlacement,It)}}}}}}m.get("symbol-placement")==="line"&&(this.features=function(yn){var hn={},an={},gn=[],qn=0;function Wn(Yr){gn.push(yn[Yr]),qn++}function Ai(Yr,Mn,di){var kr=an[Yr];return delete an[Yr],an[Mn]=kr,gn[kr].geometry[0].pop(),gn[kr].geometry[0]=gn[kr].geometry[0].concat(di[0]),kr}function ni(Yr,Mn,di){var kr=hn[Mn];return delete hn[Mn],hn[Yr]=kr,gn[kr].geometry[0].shift(),gn[kr].geometry[0]=di[0].concat(gn[kr].geometry[0]),kr}function Ei(Yr,Mn,di){var kr=di?Mn[0][Mn[0].length-1]:Mn[0][0];return Yr+":"+kr.x+":"+kr.y}for(var En=0;En<yn.length;En++){var ii=yn[En],hr=ii.geometry,Wr=ii.text?ii.text.toString():null;if(Wr){var Br=Ei(Wr,hr),wr=Ei(Wr,hr,!0);if(Br in an&&wr in hn&&an[Br]!==hn[wr]){var zi=ni(Br,wr,hr),fi=Ai(Br,wr,gn[zi].geometry);delete hn[Br],delete an[wr],an[Ei(Wr,gn[fi].geometry,!0)]=fi,gn[zi].geometry=null}else Br in an?Ai(Br,wr,hr):wr in hn?ni(Br,wr,hr):(Wn(En),hn[Br]=qn-1,an[wr]=qn-1)}else Wn(En)}return gn.filter(function(Yr){return Yr.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(yn,hn){return yn.sortKey-hn.sortKey})}},Vr.prototype.update=function(r,i,s){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(r,i,this.layers,s),this.icon.programConfigurations.updatePaintArrays(r,i,this.layers,s))},Vr.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},Vr.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Vr.prototype.upload=function(r){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(r),this.iconCollisionBox.upload(r)),this.text.upload(r,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(r,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Vr.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Vr.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Vr.prototype.addToLineVertexArray=function(r,i){var s=this.lineVertexArray.length;if(r.segment!==void 0){for(var h=r.dist(i[r.segment+1]),m=r.dist(i[r.segment]),y={},_=r.segment+1;_<i.length;_++)y[_]={x:i[_].x,y:i[_].y,tileUnitDistanceFromAnchor:h},_<i.length-1&&(h+=i[_+1].dist(i[_]));for(var A=r.segment||0;A>=0;A--)y[A]={x:i[A].x,y:i[A].y,tileUnitDistanceFromAnchor:m},A>0&&(m+=i[A-1].dist(i[A]));for(var C=0;C<i.length;C++){var I=y[C];this.lineVertexArray.emplaceBack(I.x,I.y,I.tileUnitDistanceFromAnchor)}}return{lineStartIndex:s,lineLength:this.lineVertexArray.length-s}},Vr.prototype.addSymbols=function(r,i,s,h,m,y,_,A,C,I,R,L){for(var j=r.indexArray,G=r.layoutVertexArray,oe=r.segments.prepareSegment(4*i.length,G,j,this.canOverlap?y.sortKey:void 0),ae=this.glyphOffsetArray.length,ge=oe.vertexLength,pe=this.allowVerticalPlacement&&_===go.vertical?Math.PI/2:0,Se=y.text&&y.text.sections,Re=0;Re<i.length;Re++){var Oe=i[Re],Be=Oe.tl,Ge=Oe.tr,Je=Oe.bl,tt=Oe.br,Et=Oe.tex,lt=Oe.pixelOffsetTL,Tt=Oe.pixelOffsetBR,ht=Oe.minFontScaleX,Yt=Oe.minFontScaleY,Nt=Oe.glyphOffset,wt=Oe.isSDF,ar=Oe.sectionIndex,Kt=oe.vertexLength,xr=Nt[1];sm(G,A.x,A.y,Be.x,xr+Be.y,Et.x,Et.y,s,wt,lt.x,lt.y,ht,Yt),sm(G,A.x,A.y,Ge.x,xr+Ge.y,Et.x+Et.w,Et.y,s,wt,Tt.x,lt.y,ht,Yt),sm(G,A.x,A.y,Je.x,xr+Je.y,Et.x,Et.y+Et.h,s,wt,lt.x,Tt.y,ht,Yt),sm(G,A.x,A.y,tt.x,xr+tt.y,Et.x+Et.w,Et.y+Et.h,s,wt,Tt.x,Tt.y,ht,Yt),Jv(r.dynamicLayoutVertexArray,A,pe),j.emplaceBack(Kt,Kt+1,Kt+2),j.emplaceBack(Kt+1,Kt+2,Kt+3),oe.vertexLength+=4,oe.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Nt[0]),Re!==i.length-1&&ar===i[Re+1].sectionIndex||r.programConfigurations.populatePaintArrays(G.length,y,y.index,{},L,Se&&Se[ar])}r.placedSymbolArray.emplaceBack(A.x,A.y,ae,this.glyphOffsetArray.length-ae,ge,C,I,A.segment,s?s[0]:0,s?s[1]:0,h[0],h[1],_,0,!1,0,R)},Vr.prototype._addCollisionDebugVertex=function(r,i,s,h,m,y){return i.emplaceBack(0,0),r.emplaceBack(s.x,s.y,h,m,Math.round(y.x),Math.round(y.y))},Vr.prototype.addCollisionDebugVertices=function(r,i,s,h,m,y,_){var A=m.segments.prepareSegment(4,m.layoutVertexArray,m.indexArray),C=A.vertexLength,I=m.layoutVertexArray,R=m.collisionVertexArray,L=_.anchorX,j=_.anchorY;this._addCollisionDebugVertex(I,R,y,L,j,new k(r,i)),this._addCollisionDebugVertex(I,R,y,L,j,new k(s,i)),this._addCollisionDebugVertex(I,R,y,L,j,new k(s,h)),this._addCollisionDebugVertex(I,R,y,L,j,new k(r,h)),A.vertexLength+=4;var G=m.indexArray;G.emplaceBack(C,C+1),G.emplaceBack(C+1,C+2),G.emplaceBack(C+2,C+3),G.emplaceBack(C+3,C),A.primitiveLength+=4},Vr.prototype.addDebugCollisionBoxes=function(r,i,s,h){for(var m=r;m<i;m++){var y=this.collisionBoxArray.get(m);this.addCollisionDebugVertices(y.x1,y.y1,y.x2,y.y2,h?this.textCollisionBox:this.iconCollisionBox,y.anchorPoint,s)}},Vr.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new bh(il,$b.members,iu),this.iconCollisionBox=new bh(il,$b.members,iu);for(var r=0;r<this.symbolInstances.length;r++){var i=this.symbolInstances.get(r);this.addDebugCollisionBoxes(i.textBoxStartIndex,i.textBoxEndIndex,i,!0),this.addDebugCollisionBoxes(i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i,!0),this.addDebugCollisionBoxes(i.iconBoxStartIndex,i.iconBoxEndIndex,i,!1),this.addDebugCollisionBoxes(i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex,i,!1)}},Vr.prototype._deserializeCollisionBoxesForSymbol=function(r,i,s,h,m,y,_,A,C){for(var I={},R=i;R<s;R++){var L=r.get(R);I.textBox={x1:L.x1,y1:L.y1,x2:L.x2,y2:L.y2,anchorPointX:L.anchorPointX,anchorPointY:L.anchorPointY},I.textFeatureIndex=L.featureIndex;break}for(var j=h;j<m;j++){var G=r.get(j);I.verticalTextBox={x1:G.x1,y1:G.y1,x2:G.x2,y2:G.y2,anchorPointX:G.anchorPointX,anchorPointY:G.anchorPointY},I.verticalTextFeatureIndex=G.featureIndex;break}for(var oe=y;oe<_;oe++){var ae=r.get(oe);I.iconBox={x1:ae.x1,y1:ae.y1,x2:ae.x2,y2:ae.y2,anchorPointX:ae.anchorPointX,anchorPointY:ae.anchorPointY},I.iconFeatureIndex=ae.featureIndex;break}for(var ge=A;ge<C;ge++){var pe=r.get(ge);I.verticalIconBox={x1:pe.x1,y1:pe.y1,x2:pe.x2,y2:pe.y2,anchorPointX:pe.anchorPointX,anchorPointY:pe.anchorPointY},I.verticalIconFeatureIndex=pe.featureIndex;break}return I},Vr.prototype.deserializeCollisionBoxes=function(r){this.collisionArrays=[];for(var i=0;i<this.symbolInstances.length;i++){var s=this.symbolInstances.get(i);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(r,s.textBoxStartIndex,s.textBoxEndIndex,s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s.iconBoxStartIndex,s.iconBoxEndIndex,s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex))}},Vr.prototype.hasTextData=function(){return this.text.segments.get().length>0},Vr.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Vr.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Vr.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Vr.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Vr.prototype.addIndicesForPlacedSymbol=function(r,i){for(var s=r.placedSymbolArray.get(i),h=s.vertexStartIndex+4*s.numGlyphs,m=s.vertexStartIndex;m<h;m+=4)r.indexArray.emplaceBack(m,m+1,m+2),r.indexArray.emplaceBack(m+1,m+2,m+3)},Vr.prototype.getSortedSymbolIndexes=function(r){if(this.sortedAngle===r&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var i=Math.sin(r),s=Math.cos(r),h=[],m=[],y=[],_=0;_<this.symbolInstances.length;++_){y.push(_);var A=this.symbolInstances.get(_);h.push(0|Math.round(i*A.anchorX+s*A.anchorY)),m.push(A.featureIndex)}return y.sort(function(C,I){return h[C]-h[I]||m[I]-m[C]}),y},Vr.prototype.addToSortKeyRanges=function(r,i){var s=this.sortKeyRanges[this.sortKeyRanges.length-1];s&&s.sortKey===i?s.symbolInstanceEnd=r+1:this.sortKeyRanges.push({sortKey:i,symbolInstanceStart:r,symbolInstanceEnd:r+1})},Vr.prototype.sortFeatures=function(r){var i=this;if(this.sortFeaturesByY&&this.sortedAngle!==r&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(r),this.sortedAngle=r,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var s=0,h=this.symbolInstanceIndexes;s<h.length;s+=1){var m=this.symbolInstances.get(h[s]);this.featureSortOrder.push(m.featureIndex),[m.rightJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.leftJustifiedTextSymbolIndex].forEach(function(y,_,A){y>=0&&A.indexOf(y)===_&&i.addIndicesForPlacedSymbol(i.text,y)}),m.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,m.verticalPlacedTextSymbolIndex),m.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.placedIconSymbolIndex),m.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},_t("SymbolBucket",Vr,{omit:["layers","collisionBoxArray","features","compareText"]}),Vr.MAX_GLYPHS=65535,Vr.addDynamicAttributes=Jv;var _M=new ci({"symbol-placement":new Ct(Z.layout_symbol["symbol-placement"]),"symbol-spacing":new Ct(Z.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ct(Z.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new bt(Z.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ct(Z.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Ct(Z.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Ct(Z.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ct(Z.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ct(Z.layout_symbol["icon-rotation-alignment"]),"icon-size":new bt(Z.layout_symbol["icon-size"]),"icon-text-fit":new Ct(Z.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ct(Z.layout_symbol["icon-text-fit-padding"]),"icon-image":new bt(Z.layout_symbol["icon-image"]),"icon-rotate":new bt(Z.layout_symbol["icon-rotate"]),"icon-padding":new Ct(Z.layout_symbol["icon-padding"]),"icon-keep-upright":new Ct(Z.layout_symbol["icon-keep-upright"]),"icon-offset":new bt(Z.layout_symbol["icon-offset"]),"icon-anchor":new bt(Z.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ct(Z.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ct(Z.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ct(Z.layout_symbol["text-rotation-alignment"]),"text-field":new bt(Z.layout_symbol["text-field"]),"text-font":new bt(Z.layout_symbol["text-font"]),"text-size":new bt(Z.layout_symbol["text-size"]),"text-max-width":new bt(Z.layout_symbol["text-max-width"]),"text-line-height":new Ct(Z.layout_symbol["text-line-height"]),"text-letter-spacing":new bt(Z.layout_symbol["text-letter-spacing"]),"text-justify":new bt(Z.layout_symbol["text-justify"]),"text-radial-offset":new bt(Z.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ct(Z.layout_symbol["text-variable-anchor"]),"text-anchor":new bt(Z.layout_symbol["text-anchor"]),"text-max-angle":new Ct(Z.layout_symbol["text-max-angle"]),"text-writing-mode":new Ct(Z.layout_symbol["text-writing-mode"]),"text-rotate":new bt(Z.layout_symbol["text-rotate"]),"text-padding":new Ct(Z.layout_symbol["text-padding"]),"text-keep-upright":new Ct(Z.layout_symbol["text-keep-upright"]),"text-transform":new bt(Z.layout_symbol["text-transform"]),"text-offset":new bt(Z.layout_symbol["text-offset"]),"text-allow-overlap":new Ct(Z.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Ct(Z.layout_symbol["text-ignore-placement"]),"text-optional":new Ct(Z.layout_symbol["text-optional"])}),Yv={paint:new ci({"icon-opacity":new bt(Z.paint_symbol["icon-opacity"]),"icon-color":new bt(Z.paint_symbol["icon-color"]),"icon-halo-color":new bt(Z.paint_symbol["icon-halo-color"]),"icon-halo-width":new bt(Z.paint_symbol["icon-halo-width"]),"icon-halo-blur":new bt(Z.paint_symbol["icon-halo-blur"]),"icon-translate":new Ct(Z.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ct(Z.paint_symbol["icon-translate-anchor"]),"text-opacity":new bt(Z.paint_symbol["text-opacity"]),"text-color":new bt(Z.paint_symbol["text-color"],{runtimeType:at,getOverride:function(r){return r.textColor},hasOverride:function(r){return!!r.textColor}}),"text-halo-color":new bt(Z.paint_symbol["text-halo-color"]),"text-halo-width":new bt(Z.paint_symbol["text-halo-width"]),"text-halo-blur":new bt(Z.paint_symbol["text-halo-blur"]),"text-translate":new Ct(Z.paint_symbol["text-translate"]),"text-translate-anchor":new Ct(Z.paint_symbol["text-translate-anchor"])}),layout:_M},wc=function(r){this.type=r.property.overrides?r.property.overrides.runtimeType:vt,this.defaultValue=r};wc.prototype.evaluate=function(r){if(r.formattedSection){var i=this.defaultValue.property.overrides;if(i&&i.hasOverride(r.formattedSection))return i.getOverride(r.formattedSection)}return r.feature&&r.featureState?this.defaultValue.evaluate(r.feature,r.featureState):this.defaultValue.property.specification.default},wc.prototype.eachChild=function(r){this.defaultValue.isConstant()||r(this.defaultValue.value._styleExpression.expression)},wc.prototype.outputDefined=function(){return!1},wc.prototype.serialize=function(){return null},_t("FormatSectionOverride",wc,{omit:["defaultValue"]});var xM=function(r){function i(s){r.call(this,s,Yv)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.recalculate=function(s,h){if(r.prototype.recalculate.call(this,s,h),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var m=this.layout.get("text-writing-mode");if(m){for(var y=[],_=0,A=m;_<A.length;_+=1){var C=A[_];y.indexOf(C)<0&&y.push(C)}this.layout._values["text-writing-mode"]=y}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},i.prototype.getValueAndResolveTokens=function(s,h,m,y){var _=this.layout.get(s).evaluate(h,{},m,y),A=this._unevaluatedLayout._values[s];return A.isDataDriven()||Gl(A.value)||!_?_:function(C,I){return I.replace(/{([^{}]+)}/g,function(R,L){return L in C?String(C[L]):""})}(h.properties,_)},i.prototype.createBucket=function(s){return new Vr(s)},i.prototype.queryRadius=function(){return 0},i.prototype.queryIntersectsFeature=function(){return!1},i.prototype._setPaintOverrides=function(){for(var s=0,h=Yv.paint.overridableProperties;s<h.length;s+=1){var m=h[s];if(i.hasPaintOverride(this.layout,m)){var y,_=this.paint.get(m),A=new wc(_),C=new Qs(A,_.property.specification);y=_.value.kind==="constant"||_.value.kind==="source"?new Hl("source",C):new Js("composite",C,_.value.zoomStops,_.value._interpolationType),this.paint._values[m]=new _i(_.property,y,_.parameters)}}},i.prototype._handleOverridablePaintPropertyUpdate=function(s,h,m){return!(!this.layout||h.isDataDriven()||m.isDataDriven())&&i.hasPaintOverride(this.layout,s)},i.hasPaintOverride=function(s,h){var m=s.get("text-field"),y=Yv.paint.properties[h],_=!1,A=function(R){for(var L=0,j=R;L<j.length;L+=1)if(y.overrides&&y.overrides.hasOverride(j[L]))return void(_=!0)};if(m.value.kind==="constant"&&m.value.value instanceof Jn)A(m.value.value.sections);else if(m.value.kind==="source"){var C=function(R){_||(R instanceof gi&&wn(R.value)===$r?A(R.value.sections):R instanceof Mo?A(R.sections):R.eachChild(C))},I=m.value;I._styleExpression&&C(I._styleExpression.expression)}return _},i}(Zo),bM={paint:new ci({"background-color":new Ct(Z.paint_background["background-color"]),"background-pattern":new xi(Z.paint_background["background-pattern"]),"background-opacity":new Ct(Z.paint_background["background-opacity"])})},wM=function(r){function i(s){r.call(this,s,bM)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i}(Zo),AM={paint:new ci({"raster-opacity":new Ct(Z.paint_raster["raster-opacity"]),"raster-hue-rotate":new Ct(Z.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ct(Z.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ct(Z.paint_raster["raster-brightness-max"]),"raster-saturation":new Ct(Z.paint_raster["raster-saturation"]),"raster-contrast":new Ct(Z.paint_raster["raster-contrast"]),"raster-resampling":new Ct(Z.paint_raster["raster-resampling"]),"raster-fade-duration":new Ct(Z.paint_raster["raster-fade-duration"])})},EM=function(r){function i(s){r.call(this,s,AM)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i}(Zo),SM=function(r){function i(s){r.call(this,s,{}),this.implementation=s}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},i.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},i.prototype.recalculate=function(){},i.prototype.updateTransitions=function(){},i.prototype.hasTransition=function(){},i.prototype.serialize=function(){},i.prototype.onAdd=function(s){this.implementation.onAdd&&this.implementation.onAdd(s,s.painter.context.gl)},i.prototype.onRemove=function(s){this.implementation.onRemove&&this.implementation.onRemove(s,s.painter.context.gl)},i}(Zo),CM={circle:Bv,heatmap:uP,hillshade:pP,fill:TP,"fill-extrusion":BP,line:$P,symbol:xM,background:wM,raster:EM},hw=T.HTMLImageElement,fw=T.HTMLCanvasElement,dw=T.HTMLVideoElement,mw=T.ImageData,lm=T.ImageBitmap,cu=function(r,i,s,h){this.context=r,this.format=s,this.texture=r.gl.createTexture(),this.update(i,h)};cu.prototype.update=function(r,i,s){var h=r.width,m=r.height,y=!(this.size&&this.size[0]===h&&this.size[1]===m||s),_=this.context,A=_.gl;if(this.useMipmap=!!(i&&i.useMipmap),A.bindTexture(A.TEXTURE_2D,this.texture),_.pixelStoreUnpackFlipY.set(!1),_.pixelStoreUnpack.set(1),_.pixelStoreUnpackPremultiplyAlpha.set(this.format===A.RGBA&&(!i||i.premultiply!==!1)),y)this.size=[h,m],r instanceof hw||r instanceof fw||r instanceof dw||r instanceof mw||lm&&r instanceof lm?A.texImage2D(A.TEXTURE_2D,0,this.format,this.format,A.UNSIGNED_BYTE,r):A.texImage2D(A.TEXTURE_2D,0,this.format,h,m,0,this.format,A.UNSIGNED_BYTE,r.data);else{var C=s||{x:0,y:0},I=C.x,R=C.y;r instanceof hw||r instanceof fw||r instanceof dw||r instanceof mw||lm&&r instanceof lm?A.texSubImage2D(A.TEXTURE_2D,0,I,R,A.RGBA,A.UNSIGNED_BYTE,r):A.texSubImage2D(A.TEXTURE_2D,0,I,R,h,m,A.RGBA,A.UNSIGNED_BYTE,r.data)}this.useMipmap&&this.isSizePowerOfTwo()&&A.generateMipmap(A.TEXTURE_2D)},cu.prototype.bind=function(r,i,s){var h=this.context.gl;h.bindTexture(h.TEXTURE_2D,this.texture),s!==h.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(s=h.LINEAR),r!==this.filter&&(h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,r),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,s||r),this.filter=r),i!==this.wrap&&(h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,i),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,i),this.wrap=i)},cu.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},cu.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var e0=function(r){var i=this;this._callback=r,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){i._triggered=!1,i._callback()})};e0.prototype.trigger=function(){var r=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){r._triggered=!1,r._callback()},0))},e0.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Ac=function(r,i,s){this.target=r,this.parent=i,this.mapId=s,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},fe(["receive","process"],this),this.invoker=new e0(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=we()?r:T};function yw(r,i,s){var h=2*Math.PI*6378137/256/Math.pow(2,s);return[r*h-2*Math.PI*6378137/2,i*h-2*Math.PI*6378137/2]}Ac.prototype.send=function(r,i,s,h,m){var y=this;m===void 0&&(m=!1);var _=Math.round(1e18*Math.random()).toString(36).substring(0,10);s&&(this.callbacks[_]=s);var A=Le(this.globalScope)?void 0:[];return this.target.postMessage({id:_,type:r,hasCallback:!!s,targetMapId:h,mustQueue:m,sourceMapId:this.mapId,data:zo(i,A)},A),{cancel:function(){s&&delete y.callbacks[_],y.target.postMessage({id:_,type:"<cancel>",targetMapId:h,sourceMapId:y.mapId})}}},Ac.prototype.receive=function(r){var i=r.data,s=i.id;if(s&&(!i.targetMapId||this.mapId===i.targetMapId))if(i.type==="<cancel>"){delete this.tasks[s];var h=this.cancelCallbacks[s];delete this.cancelCallbacks[s],h&&h()}else we()||i.mustQueue?(this.tasks[s]=i,this.taskQueue.push(s),this.invoker.trigger()):this.processTask(s,i)},Ac.prototype.process=function(){if(this.taskQueue.length){var r=this.taskQueue.shift(),i=this.tasks[r];delete this.tasks[r],this.taskQueue.length&&this.invoker.trigger(),i&&this.processTask(r,i)}},Ac.prototype.processTask=function(r,i){var s=this;if(i.type==="<response>"){var h=this.callbacks[r];delete this.callbacks[r],h&&(i.error?h(Vi(i.error)):h(null,Vi(i.data)))}else{var m=!1,y=Le(this.globalScope)?void 0:[],_=i.hasCallback?function(R,L){m=!0,delete s.cancelCallbacks[r],s.target.postMessage({id:r,type:"<response>",sourceMapId:s.mapId,error:R?zo(R):null,data:zo(L,y)},y)}:function(R){m=!0},A=null,C=Vi(i.data);if(this.parent[i.type])A=this.parent[i.type](i.sourceMapId,C,_);else if(this.parent.getWorkerSource){var I=i.type.split(".");A=this.parent.getWorkerSource(i.sourceMapId,I[0],C.source)[I[1]](C,_)}else _(new Error("Could not find function "+i.type));!m&&A&&A.cancel&&(this.cancelCallbacks[r]=A.cancel)}},Ac.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Nn=function(r,i){r&&(i?this.setSouthWest(r).setNorthEast(i):r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1]))};Nn.prototype.setNorthEast=function(r){return this._ne=r instanceof nn?new nn(r.lng,r.lat):nn.convert(r),this},Nn.prototype.setSouthWest=function(r){return this._sw=r instanceof nn?new nn(r.lng,r.lat):nn.convert(r),this},Nn.prototype.extend=function(r){var i,s,h=this._sw,m=this._ne;if(r instanceof nn)i=r,s=r;else{if(!(r instanceof Nn))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(Nn.convert(r)):this.extend(nn.convert(r)):this;if(s=r._ne,!(i=r._sw)||!s)return this}return h||m?(h.lng=Math.min(i.lng,h.lng),h.lat=Math.min(i.lat,h.lat),m.lng=Math.max(s.lng,m.lng),m.lat=Math.max(s.lat,m.lat)):(this._sw=new nn(i.lng,i.lat),this._ne=new nn(s.lng,s.lat)),this},Nn.prototype.getCenter=function(){return new nn((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Nn.prototype.getSouthWest=function(){return this._sw},Nn.prototype.getNorthEast=function(){return this._ne},Nn.prototype.getNorthWest=function(){return new nn(this.getWest(),this.getNorth())},Nn.prototype.getSouthEast=function(){return new nn(this.getEast(),this.getSouth())},Nn.prototype.getWest=function(){return this._sw.lng},Nn.prototype.getSouth=function(){return this._sw.lat},Nn.prototype.getEast=function(){return this._ne.lng},Nn.prototype.getNorth=function(){return this._ne.lat},Nn.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Nn.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Nn.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Nn.prototype.contains=function(r){var i=nn.convert(r),s=i.lng,h=i.lat,m=this._sw.lng<=s&&s<=this._ne.lng;return this._sw.lng>this._ne.lng&&(m=this._sw.lng>=s&&s>=this._ne.lng),this._sw.lat<=h&&h<=this._ne.lat&&m},Nn.convert=function(r){return!r||r instanceof Nn?r:new Nn(r)};var nn=function(r,i){if(isNaN(r)||isNaN(i))throw new Error("Invalid LngLat object: ("+r+", "+i+")");if(this.lng=+r,this.lat=+i,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};nn.prototype.wrap=function(){return new nn(U(this.lng,-180,180),this.lat)},nn.prototype.toArray=function(){return[this.lng,this.lat]},nn.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},nn.prototype.distanceTo=function(r){var i=Math.PI/180,s=this.lat*i,h=r.lat*i,m=Math.sin(s)*Math.sin(h)+Math.cos(s)*Math.cos(h)*Math.cos((r.lng-this.lng)*i);return 63710088e-1*Math.acos(Math.min(m,1))},nn.prototype.toBounds=function(r){r===void 0&&(r=0);var i=360*r/40075017,s=i/Math.cos(Math.PI/180*this.lat);return new Nn(new nn(this.lng-s,this.lat-i),new nn(this.lng+s,this.lat+i))},nn.convert=function(r){if(r instanceof nn)return r;if(Array.isArray(r)&&(r.length===2||r.length===3))return new nn(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&typeof r=="object"&&r!==null)return new nn(Number("lng"in r?r.lng:r.lon),Number(r.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var gw=2*Math.PI*63710088e-1;function vw(r){return gw*Math.cos(r*Math.PI/180)}function _w(r){return(180+r)/360}function xw(r){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r*Math.PI/360)))/360}function bw(r,i){return r/vw(i)}function t0(r){return 360/Math.PI*Math.atan(Math.exp((180-360*r)*Math.PI/180))-90}var pu=function(r,i,s){s===void 0&&(s=0),this.x=+r,this.y=+i,this.z=+s};pu.fromLngLat=function(r,i){i===void 0&&(i=0);var s=nn.convert(r);return new pu(_w(s.lng),xw(s.lat),bw(i,s.lat))},pu.prototype.toLngLat=function(){return new nn(360*this.x-180,t0(this.y))},pu.prototype.toAltitude=function(){return this.z*vw(t0(this.y))},pu.prototype.meterInMercatorCoordinateUnits=function(){return 1/gw*(r=t0(this.y),1/Math.cos(r*Math.PI/180));var r};var hu=function(r,i,s){this.z=r,this.x=i,this.y=s,this.key=wh(0,r,r,i,s)};hu.prototype.equals=function(r){return this.z===r.z&&this.x===r.x&&this.y===r.y},hu.prototype.url=function(r,i){var s,h,m,y,_,A=(h=this.y,m=this.z,y=yw(256*(s=this.x),256*(h=Math.pow(2,m)-h-1),m),_=yw(256*(s+1),256*(h+1),m),y[0]+","+y[1]+","+_[0]+","+_[1]),C=function(I,R,L){for(var j,G="",oe=I;oe>0;oe--)G+=(R&(j=1<<oe-1)?1:0)+(L&j?2:0);return G}(this.z,this.x,this.y);return r[(this.x+this.y)%r.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(i==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",C).replace("{bbox-epsg-3857}",A)},hu.prototype.getTilePoint=function(r){var i=Math.pow(2,this.z);return new k(8192*(r.x*i-this.x),8192*(r.y*i-this.y))},hu.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var ww=function(r,i){this.wrap=r,this.canonical=i,this.key=wh(r,i.z,i.z,i.x,i.y)},Fn=function(r,i,s,h,m){this.overscaledZ=r,this.wrap=i,this.canonical=new hu(s,+h,+m),this.key=wh(i,r,s,h,m)};function wh(r,i,s,h,m){(r*=2)<0&&(r=-1*r-1);var y=1<<s;return(y*y*r+y*m+h).toString(36)+s.toString(36)+i.toString(36)}Fn.prototype.equals=function(r){return this.overscaledZ===r.overscaledZ&&this.wrap===r.wrap&&this.canonical.equals(r.canonical)},Fn.prototype.scaledTo=function(r){var i=this.canonical.z-r;return r>this.canonical.z?new Fn(r,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Fn(r,this.wrap,r,this.canonical.x>>i,this.canonical.y>>i)},Fn.prototype.calculateScaledKey=function(r,i){var s=this.canonical.z-r;return r>this.canonical.z?wh(this.wrap*+i,r,this.canonical.z,this.canonical.x,this.canonical.y):wh(this.wrap*+i,r,r,this.canonical.x>>s,this.canonical.y>>s)},Fn.prototype.isChildOf=function(r){if(r.wrap!==this.wrap)return!1;var i=this.canonical.z-r.canonical.z;return r.overscaledZ===0||r.overscaledZ<this.overscaledZ&&r.canonical.x===this.canonical.x>>i&&r.canonical.y===this.canonical.y>>i},Fn.prototype.children=function(r){if(this.overscaledZ>=r)return[new Fn(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var i=this.canonical.z+1,s=2*this.canonical.x,h=2*this.canonical.y;return[new Fn(i,this.wrap,i,s,h),new Fn(i,this.wrap,i,s+1,h),new Fn(i,this.wrap,i,s,h+1),new Fn(i,this.wrap,i,s+1,h+1)]},Fn.prototype.isLessThan=function(r){return this.wrap<r.wrap||!(this.wrap>r.wrap)&&(this.overscaledZ<r.overscaledZ||!(this.overscaledZ>r.overscaledZ)&&(this.canonical.x<r.canonical.x||!(this.canonical.x>r.canonical.x)&&this.canonical.y<r.canonical.y))},Fn.prototype.wrapped=function(){return new Fn(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Fn.prototype.unwrapTo=function(r){return new Fn(this.overscaledZ,r,this.canonical.z,this.canonical.x,this.canonical.y)},Fn.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Fn.prototype.toUnwrapped=function(){return new ww(this.wrap,this.canonical)},Fn.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Fn.prototype.getTilePoint=function(r){return this.canonical.getTilePoint(new pu(r.x-this.wrap,r.y))},_t("CanonicalTileID",hu),_t("OverscaledTileID",Fn,{omit:["posMatrix"]});var Ts=function(r,i,s){if(this.uid=r,i.height!==i.width)throw new RangeError("DEM tiles must be square");if(s&&s!=="mapbox"&&s!=="terrarium")return he('"'+s+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=i.height;var h=this.dim=i.height-2;this.data=new Uint32Array(i.data.buffer),this.encoding=s||"mapbox";for(var m=0;m<h;m++)this.data[this._idx(-1,m)]=this.data[this._idx(0,m)],this.data[this._idx(h,m)]=this.data[this._idx(h-1,m)],this.data[this._idx(m,-1)]=this.data[this._idx(m,0)],this.data[this._idx(m,h)]=this.data[this._idx(m,h-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(h,-1)]=this.data[this._idx(h-1,0)],this.data[this._idx(-1,h)]=this.data[this._idx(0,h-1)],this.data[this._idx(h,h)]=this.data[this._idx(h-1,h-1)]};Ts.prototype.get=function(r,i){var s=new Uint8Array(this.data.buffer),h=4*this._idx(r,i);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(s[h],s[h+1],s[h+2])},Ts.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Ts.prototype._idx=function(r,i){if(r<-1||r>=this.dim+1||i<-1||i>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(i+1)*this.stride+(r+1)},Ts.prototype._unpackMapbox=function(r,i,s){return(256*r*256+256*i+s)/10-1e4},Ts.prototype._unpackTerrarium=function(r,i,s){return 256*r+i+s/256-32768},Ts.prototype.getPixels=function(){return new Hi({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Ts.prototype.backfillBorder=function(r,i,s){if(this.dim!==r.dim)throw new Error("dem dimension mismatch");var h=i*this.dim,m=i*this.dim+this.dim,y=s*this.dim,_=s*this.dim+this.dim;switch(i){case-1:h=m-1;break;case 1:m=h+1}switch(s){case-1:y=_-1;break;case 1:_=y+1}for(var A=-i*this.dim,C=-s*this.dim,I=y;I<_;I++)for(var R=h;R<m;R++)this.data[this._idx(R,I)]=r.data[this._idx(R+A,I+C)]},_t("DEMData",Ts);var um=function(r){this._stringToNumber={},this._numberToString=[];for(var i=0;i<r.length;i++){var s=r[i];this._stringToNumber[s]=i,this._numberToString[i]=s}};um.prototype.encode=function(r){return this._stringToNumber[r]},um.prototype.decode=function(r){return this._numberToString[r]};var cm=function(r,i,s,h,m){this.type="Feature",this._vectorTileFeature=r,r._z=i,r._x=s,r._y=h,this.properties=r.properties,this.id=m},r0={geometry:{configurable:!0}};r0.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},r0.geometry.set=function(r){this._geometry=r},cm.prototype.toJSON=function(){var r={geometry:this.geometry};for(var i in this)i!=="_geometry"&&i!=="_vectorTileFeature"&&(r[i]=this[i]);return r},Object.defineProperties(cm.prototype,r0);var Ec=function(){this.state={},this.stateChanges={},this.deletedStates={}};Ec.prototype.updateState=function(r,i,s){var h=String(i);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][h]=this.stateChanges[r][h]||{},q(this.stateChanges[r][h],s),this.deletedStates[r]===null)for(var m in this.deletedStates[r]={},this.state[r])m!==h&&(this.deletedStates[r][m]=null);else if(this.deletedStates[r]&&this.deletedStates[r][h]===null)for(var y in this.deletedStates[r][h]={},this.state[r][h])s[y]||(this.deletedStates[r][h][y]=null);else for(var _ in s)this.deletedStates[r]&&this.deletedStates[r][h]&&this.deletedStates[r][h][_]===null&&delete this.deletedStates[r][h][_]},Ec.prototype.removeFeatureState=function(r,i,s){if(this.deletedStates[r]!==null){var h=String(i);if(this.deletedStates[r]=this.deletedStates[r]||{},s&&i!==void 0)this.deletedStates[r][h]!==null&&(this.deletedStates[r][h]=this.deletedStates[r][h]||{},this.deletedStates[r][h][s]=null);else if(i!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][h])for(s in this.deletedStates[r][h]={},this.stateChanges[r][h])this.deletedStates[r][h][s]=null;else this.deletedStates[r][h]=null;else this.deletedStates[r]=null}},Ec.prototype.getState=function(r,i){var s=String(i),h=q({},(this.state[r]||{})[s],(this.stateChanges[r]||{})[s]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){var m=this.deletedStates[r][i];if(m===null)return{};for(var y in m)delete h[y]}return h},Ec.prototype.initializeTileState=function(r,i){r.setFeatureState(this.state,i)},Ec.prototype.coalesceChanges=function(r,i){var s={};for(var h in this.stateChanges){this.state[h]=this.state[h]||{};var m={};for(var y in this.stateChanges[h])this.state[h][y]||(this.state[h][y]={}),q(this.state[h][y],this.stateChanges[h][y]),m[y]=this.state[h][y];s[h]=m}for(var _ in this.deletedStates){this.state[_]=this.state[_]||{};var A={};if(this.deletedStates[_]===null)for(var C in this.state[_])A[C]={},this.state[_][C]={};else for(var I in this.deletedStates[_]){if(this.deletedStates[_][I]===null)this.state[_][I]={};else for(var R=0,L=Object.keys(this.deletedStates[_][I]);R<L.length;R+=1)delete this.state[_][I][L[R]];A[I]=this.state[_][I]}s[_]=s[_]||{},q(s[_],A)}if(this.stateChanges={},this.deletedStates={},Object.keys(s).length!==0)for(var j in r)r[j].setFeatureState(s,i)};var Is=function(r,i){this.tileID=r,this.x=r.canonical.x,this.y=r.canonical.y,this.z=r.canonical.z,this.grid=new ca(8192,16,0),this.grid3D=new ca(8192,16,0),this.featureIndexArray=new B,this.promoteId=i};function Aw(r,i,s,h,m){return Te(r,function(y,_){var A=i instanceof ru?i.get(_):null;return A&&A.evaluate?A.evaluate(s,h,m):A})}function Ew(r){for(var i=1/0,s=1/0,h=-1/0,m=-1/0,y=0,_=r;y<_.length;y+=1){var A=_[y];i=Math.min(i,A.x),s=Math.min(s,A.y),h=Math.max(h,A.x),m=Math.max(m,A.y)}return{minX:i,minY:s,maxX:h,maxY:m}}function kM(r,i){return i-r}Is.prototype.insert=function(r,i,s,h,m,y){var _=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(s,h,m);for(var A=y?this.grid3D:this.grid,C=0;C<i.length;C++){for(var I=i[C],R=[1/0,1/0,-1/0,-1/0],L=0;L<I.length;L++){var j=I[L];R[0]=Math.min(R[0],j.x),R[1]=Math.min(R[1],j.y),R[2]=Math.max(R[2],j.x),R[3]=Math.max(R[3],j.y)}R[0]<8192&&R[1]<8192&&R[2]>=0&&R[3]>=0&&A.insert(_,R[0],R[1],R[2],R[3])}},Is.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new dc.VectorTile(new Jd(this.rawTileData)).layers,this.sourceLayerCoder=new um(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Is.prototype.query=function(r,i,s,h){var m=this;this.loadVTLayers();for(var y=r.params||{},_=8192/r.tileSize/r.scale,A=Qu(y.filter),C=r.queryGeometry,I=r.queryPadding*_,R=Ew(C),L=this.grid.query(R.minX-I,R.minY-I,R.maxX+I,R.maxY+I),j=Ew(r.cameraQueryGeometry),G=this.grid3D.query(j.minX-I,j.minY-I,j.maxX+I,j.maxY+I,function(Oe,Be,Ge,Je){return function(tt,Et,lt,Tt,ht){for(var Yt=0,Nt=tt;Yt<Nt.length;Yt+=1){var wt=Nt[Yt];if(Et<=wt.x&&lt<=wt.y&&Tt>=wt.x&&ht>=wt.y)return!0}var ar=[new k(Et,lt),new k(Et,ht),new k(Tt,ht),new k(Tt,lt)];if(tt.length>2){for(var Kt=0,xr=ar;Kt<xr.length;Kt+=1)if(Xo(tt,xr[Kt]))return!0}for(var It=0;It<tt.length-1;It++)if(su(tt[It],tt[It+1],ar))return!0;return!1}(r.cameraQueryGeometry,Oe-I,Be-I,Ge+I,Je+I)}),oe=0,ae=G;oe<ae.length;oe+=1)L.push(ae[oe]);L.sort(kM);for(var ge,pe={},Se=function(Oe){var Be=L[Oe];if(Be!==ge){ge=Be;var Ge=m.featureIndexArray.get(Be),Je=null;m.loadMatchingFeature(pe,Ge.bucketIndex,Ge.sourceLayerIndex,Ge.featureIndex,A,y.layers,y.availableImages,i,s,h,function(tt,Et,lt){return Je||(Je=pn(tt)),Et.queryIntersectsFeature(C,tt,lt,Je,m.z,r.transform,_,r.pixelPosMatrix)})}},Re=0;Re<L.length;Re++)Se(Re);return pe},Is.prototype.loadMatchingFeature=function(r,i,s,h,m,y,_,A,C,I,R){var L=this.bucketLayerIDs[i];if(!y||function(tt,Et){for(var lt=0;lt<tt.length;lt++)if(Et.indexOf(tt[lt])>=0)return!0;return!1}(y,L)){var j=this.sourceLayerCoder.decode(s),G=this.vtLayers[j].feature(h);if(m.needGeometry){var oe=An(G,!0);if(!m.filter(new ur(this.tileID.overscaledZ),oe,this.tileID.canonical))return}else if(!m.filter(new ur(this.tileID.overscaledZ),G))return;for(var ae=this.getId(G,j),ge=0;ge<L.length;ge++){var pe=L[ge];if(!(y&&y.indexOf(pe)<0)){var Se=A[pe];if(Se){var Re={};ae!==void 0&&I&&(Re=I.getState(Se.sourceLayer||"_geojsonTileLayer",ae));var Oe=q({},C[pe]);Oe.paint=Aw(Oe.paint,Se.paint,G,Re,_),Oe.layout=Aw(Oe.layout,Se.layout,G,Re,_);var Be=!R||R(G,Se,Re);if(Be){var Ge=new cm(G,this.z,this.x,this.y,ae);Ge.layer=Oe;var Je=r[pe];Je===void 0&&(Je=r[pe]=[]),Je.push({featureIndex:h,feature:Ge,intersectionZ:Be})}}}}}},Is.prototype.lookupSymbolFeatures=function(r,i,s,h,m,y,_,A){var C={};this.loadVTLayers();for(var I=Qu(m),R=0,L=r;R<L.length;R+=1)this.loadMatchingFeature(C,s,h,L[R],I,y,_,A,i);return C},Is.prototype.hasLayer=function(r){for(var i=0,s=this.bucketLayerIDs;i<s.length;i+=1)for(var h=0,m=s[i];h<m.length;h+=1)if(r===m[h])return!0;return!1},Is.prototype.getId=function(r,i){var s=r.id;return this.promoteId&&typeof(s=r.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[i]])=="boolean"&&(s=Number(s)),s},_t("FeatureIndex",Is,{omit:["rawTileData","sourceLayerCoder"]});var ri=function(r,i){this.tileID=r,this.uid=O(),this.uses=0,this.tileSize=i,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};ri.prototype.registerFadeDuration=function(r){var i=r+this.timeAdded;i<Ht.now()||this.fadeEndTime&&i<this.fadeEndTime||(this.fadeEndTime=i)},ri.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},ri.prototype.loadVectorData=function(r,i,s){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){for(var h in r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(I,R){var L={};if(!R)return L;for(var j=function(){var ae=oe[G],ge=ae.layerIds.map(function(Re){return R.getLayer(Re)}).filter(Boolean);if(ge.length!==0){ae.layers=ge,ae.stateDependentLayerIds&&(ae.stateDependentLayers=ae.stateDependentLayerIds.map(function(Re){return ge.filter(function(Oe){return Oe.id===Re})[0]}));for(var pe=0,Se=ge;pe<Se.length;pe+=1)L[Se[pe].id]=ae}},G=0,oe=I;G<oe.length;G+=1)j();return L}(r.buckets,i.style),this.hasSymbolBuckets=!1,this.buckets){var m=this.buckets[h];if(m instanceof Vr){if(this.hasSymbolBuckets=!0,!s)break;m.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var y in this.buckets){var _=this.buckets[y];if(_ instanceof Vr&&_.hasRTLText){this.hasRTLText=!0,io.isLoading()||io.isLoaded()||oh()!=="deferred"||Lo();break}}for(var A in this.queryPadding=0,this.buckets){var C=this.buckets[A];this.queryPadding=Math.max(this.queryPadding,i.style.getLayer(A).queryRadius(C))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage)}else this.collisionBoxArray=new p},ri.prototype.unloadVectorData=function(){for(var r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},ri.prototype.getBucket=function(r){return this.buckets[r.id]},ri.prototype.upload=function(r){for(var i in this.buckets){var s=this.buckets[i];s.uploadPending()&&s.upload(r)}var h=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new cu(r,this.imageAtlas.image,h.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new cu(r,this.glyphAtlasImage,h.ALPHA),this.glyphAtlasImage=null)},ri.prototype.prepare=function(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)},ri.prototype.queryRenderedFeatures=function(r,i,s,h,m,y,_,A,C,I){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:h,cameraQueryGeometry:m,scale:y,tileSize:this.tileSize,pixelPosMatrix:I,transform:A,params:_,queryPadding:this.queryPadding*C},r,i,s):{}},ri.prototype.querySourceFeatures=function(r,i){var s=this.latestFeatureIndex;if(s&&s.rawTileData){var h=s.loadVTLayers(),m=i?i.sourceLayer:"",y=h._geojsonTileLayer||h[m];if(y)for(var _=Qu(i&&i.filter),A=this.tileID.canonical,C=A.z,I=A.x,R=A.y,L={z:C,x:I,y:R},j=0;j<y.length;j++){var G=y.feature(j);if(_.needGeometry){var oe=An(G,!0);if(!_.filter(new ur(this.tileID.overscaledZ),oe,this.tileID.canonical))continue}else if(!_.filter(new ur(this.tileID.overscaledZ),G))continue;var ae=s.getId(G,m),ge=new cm(G,C,I,R,ae);ge.tile=L,r.push(ge)}}},ri.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},ri.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},ri.prototype.setExpiryData=function(r){var i=this.expirationTime;if(r.cacheControl){var s=be(r.cacheControl);s["max-age"]&&(this.expirationTime=Date.now()+1e3*s["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){var h=Date.now(),m=!1;if(this.expirationTime>h)m=!1;else if(i)if(this.expirationTime<i)m=!0;else{var y=this.expirationTime-i;y?this.expirationTime=h+Math.max(y,3e4):m=!0}else m=!0;m?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},ri.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},ri.prototype.setFeatureState=function(r,i){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(r).length!==0){var s=this.latestFeatureIndex.loadVTLayers();for(var h in this.buckets)if(i.style.hasLayer(h)){var m=this.buckets[h],y=m.layers[0].sourceLayer||"_geojsonTileLayer",_=s[y],A=r[y];if(_&&A&&Object.keys(A).length!==0){m.update(A,_,this.imageAtlas&&this.imageAtlas.patternPositions||{});var C=i&&i.style&&i.style.getLayer(h);C&&(this.queryPadding=Math.max(this.queryPadding,C.queryRadius(m)))}}}},ri.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},ri.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Ht.now()},ri.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},ri.prototype.setHoldDuration=function(r){this.symbolFadeHoldUntil=Ht.now()+r},ri.prototype.setDependencies=function(r,i){for(var s={},h=0,m=i;h<m.length;h+=1)s[m[h]]=!0;this.dependencies[r]=s},ri.prototype.hasDependency=function(r,i){for(var s=0,h=r;s<h.length;s+=1){var m=this.dependencies[h[s]];if(m){for(var y=0,_=i;y<_.length;y+=1)if(m[_[y]])return!0}}return!1};var ul=T.performance,Sw=function(r){this._marks={start:[r.url,"start"].join("#"),end:[r.url,"end"].join("#"),measure:r.url.toString()},ul.mark(this._marks.start)};Sw.prototype.finish=function(){ul.mark(this._marks.end);var r=ul.getEntriesByName(this._marks.measure);return r.length===0&&(ul.measure(this._marks.measure,this._marks.start,this._marks.end),r=ul.getEntriesByName(this._marks.measure),ul.clearMarks(this._marks.start),ul.clearMarks(this._marks.end),ul.clearMeasures(this._marks.measure)),r},o.Actor=Ac,o.AlphaImage=uu,o.CanonicalTileID=hu,o.CollisionBoxArray=p,o.Color=Mr,o.DEMData=Ts,o.DataConstantProperty=Ct,o.DictionaryCoder=um,o.EXTENT=8192,o.ErrorEvent=ce,o.EvaluationParameters=ur,o.Event=re,o.Evented=de,o.FeatureIndex=Is,o.FillBucket=da,o.FillExtrusionBucket=ma,o.ImageAtlas=xh,o.ImagePosition=em,o.LineBucket=Ri,o.LngLat=nn,o.LngLatBounds=Nn,o.MercatorCoordinate=pu,o.ONE_EM=24,o.OverscaledTileID=Fn,o.Point=k,o.Point$1=k,o.Properties=ci,o.Protobuf=Jd,o.RGBAImage=Hi,o.RequestManager=or,o.RequestPerformance=Sw,o.ResourceType=Ke,o.SegmentVector=Q,o.SourceFeatureState=Ec,o.StructArrayLayout1ui2=ph,o.StructArrayLayout2f1f2i16=Es,o.StructArrayLayout2i4=As,o.StructArrayLayout3ui6=Da,o.StructArrayLayout4i8=sh,o.SymbolBucket=Vr,o.Texture=cu,o.Tile=ri,o.Transitionable=ui,o.Uniform1f=et,o.Uniform1i=He,o.Uniform2f=Ye,o.Uniform3f=dt,o.Uniform4f=kt,o.UniformColor=Rt,o.UniformMatrix4f=br,o.UnwrappedTileID=ww,o.ValidationError=ue,o.WritingMode=go,o.ZoomHistory=th,o.add=function(r,i,s){return r[0]=i[0]+s[0],r[1]=i[1]+s[1],r[2]=i[2]+s[2],r},o.addDynamicAttributes=Jv,o.asyncAll=function(r,i,s){if(!r.length)return s(null,[]);var h=r.length,m=new Array(r.length),y=null;r.forEach(function(_,A){i(_,function(C,I){C&&(y=C),m[A]=I,--h==0&&s(y,m)})})},o.bezier=$,o.bindAll=fe,o.browser=Ht,o.cacheEntryPossiblyAdded=function(r){++Mt>Fi&&(r.getActor().send("enforceCacheSizeLimit",Qn),Mt=0)},o.clamp=D,o.clearTileCache=function(r){var i=T.caches.delete("mapbox-tiles");r&&i.catch(r).then(function(){return r()})},o.clipLine=aw,o.clone=function(r){var i=new Rr(16);return i[0]=r[0],i[1]=r[1],i[2]=r[2],i[3]=r[3],i[4]=r[4],i[5]=r[5],i[6]=r[6],i[7]=r[7],i[8]=r[8],i[9]=r[9],i[10]=r[10],i[11]=r[11],i[12]=r[12],i[13]=r[13],i[14]=r[14],i[15]=r[15],i},o.clone$1=Ee,o.clone$2=function(r){var i=new Rr(3);return i[0]=r[0],i[1]=r[1],i[2]=r[2],i},o.collisionCircleLayout=HP,o.config=At,o.create=function(){var r=new Rr(16);return Rr!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r},o.create$1=function(){var r=new Rr(9);return Rr!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r},o.create$2=function(){var r=new Rr(4);return Rr!=Float32Array&&(r[1]=0,r[2]=0),r[0]=1,r[3]=1,r},o.createCommonjsModule=v,o.createExpression=Ku,o.createLayout=ei,o.createStyleLayer=function(r){return r.type==="custom"?new SM(r):new CM[r.type](r)},o.cross=function(r,i,s){var h=i[0],m=i[1],y=i[2],_=s[0],A=s[1],C=s[2];return r[0]=m*C-y*A,r[1]=y*_-h*C,r[2]=h*A-m*_,r},o.deepEqual=function r(i,s){if(Array.isArray(i)){if(!Array.isArray(s)||i.length!==s.length)return!1;for(var h=0;h<i.length;h++)if(!r(i[h],s[h]))return!1;return!0}if(typeof i=="object"&&i!==null&&s!==null){if(typeof s!="object"||Object.keys(i).length!==Object.keys(s).length)return!1;for(var m in i)if(!r(i[m],s[m]))return!1;return!0}return i===s},o.dot=function(r,i){return r[0]*i[0]+r[1]*i[1]+r[2]*i[2]},o.dot$1=function(r,i){return r[0]*i[0]+r[1]*i[1]+r[2]*i[2]+r[3]*i[3]},o.ease=H,o.emitValidationErrors=Yl,o.endsWith=xe,o.enforceCacheSizeLimit=function(r){Bt(),mr&&mr.then(function(i){i.keys().then(function(s){for(var h=0;h<s.length-r;h++)i.delete(s[h])})})},o.evaluateSizeForFeature=ew,o.evaluateSizeForZoom=tw,o.evaluateVariableOffset=uw,o.evented=ih,o.extend=q,o.featureFilter=Qu,o.filterObject=ve,o.fromRotation=function(r,i){var s=Math.sin(i),h=Math.cos(i);return r[0]=h,r[1]=s,r[2]=0,r[3]=-s,r[4]=h,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r},o.getAnchorAlignment=Zv,o.getAnchorJustification=Qv,o.getArrayBuffer=Sr,o.getImage=F,o.getJSON=function(r,i){return yr(q(r,{type:"json"}),i)},o.getRTLTextPluginStatus=oh,o.getReferrer=jt,o.getVideo=function(r,i){var s,h,m=T.document.createElement("video");m.muted=!0,m.onloadstart=function(){i(null,m)};for(var y=0;y<r.length;y++){var _=T.document.createElement("source");s=r[y],h=void 0,(h=T.document.createElement("a")).href=s,(h.protocol!==T.document.location.protocol||h.host!==T.document.location.host)&&(m.crossOrigin="Anonymous"),_.src=r[y],m.appendChild(_)}return{cancel:function(){}}},o.identity=oo,o.invert=function(r,i){var s=i[0],h=i[1],m=i[2],y=i[3],_=i[4],A=i[5],C=i[6],I=i[7],R=i[8],L=i[9],j=i[10],G=i[11],oe=i[12],ae=i[13],ge=i[14],pe=i[15],Se=s*A-h*_,Re=s*C-m*_,Oe=s*I-y*_,Be=h*C-m*A,Ge=h*I-y*A,Je=m*I-y*C,tt=R*ae-L*oe,Et=R*ge-j*oe,lt=R*pe-G*oe,Tt=L*ge-j*ae,ht=L*pe-G*ae,Yt=j*pe-G*ge,Nt=Se*Yt-Re*ht+Oe*Tt+Be*lt-Ge*Et+Je*tt;return Nt?(r[0]=(A*Yt-C*ht+I*Tt)*(Nt=1/Nt),r[1]=(m*ht-h*Yt-y*Tt)*Nt,r[2]=(ae*Je-ge*Ge+pe*Be)*Nt,r[3]=(j*Ge-L*Je-G*Be)*Nt,r[4]=(C*lt-_*Yt-I*Et)*Nt,r[5]=(s*Yt-m*lt+y*Et)*Nt,r[6]=(ge*Oe-oe*Je-pe*Re)*Nt,r[7]=(R*Je-j*Oe+G*Re)*Nt,r[8]=(_*ht-A*lt+I*tt)*Nt,r[9]=(h*lt-s*ht-y*tt)*Nt,r[10]=(oe*Ge-ae*Oe+pe*Se)*Nt,r[11]=(L*Oe-R*Ge-G*Se)*Nt,r[12]=(A*Et-_*Tt-C*tt)*Nt,r[13]=(s*Tt-h*Et+m*tt)*Nt,r[14]=(ae*Re-oe*Be-ge*Se)*Nt,r[15]=(R*Be-L*Re+j*Se)*Nt,r):null},o.isChar=ot,o.isMapboxURL=zr,o.keysDifference=function(r,i){var s=[];for(var h in r)h in i||s.push(h);return s},o.makeRequest=yr,o.mapObject=Te,o.mercatorXfromLng=_w,o.mercatorYfromLat=xw,o.mercatorZfromAltitude=bw,o.mul=Dv,o.multiply=Mi,o.mvt=dc,o.nextPowerOfTwo=function(r){return r<=1?1:Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))},o.normalize=function(r,i){var s=i[0],h=i[1],m=i[2],y=s*s+h*h+m*m;return y>0&&(y=1/Math.sqrt(y)),r[0]=i[0]*y,r[1]=i[1]*y,r[2]=i[2]*y,r},o.number=In,o.offscreenCanvasSupported=ke,o.ortho=function(r,i,s,h,m,y,_){var A=1/(i-s),C=1/(h-m),I=1/(y-_);return r[0]=-2*A,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*C,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*I,r[11]=0,r[12]=(i+s)*A,r[13]=(m+h)*C,r[14]=(_+y)*I,r[15]=1,r},o.parseGlyphPBF=function(r){return new Jd(r).readFields(iM,[])},o.pbf=Jd,o.performSymbolLayout=function(r,i,s,h,m,y,_){r.createArrays(),r.tilePixelRatio=8192/(512*r.overscaling),r.compareText={},r.iconsNeedLinear=!1;var A=r.layers[0].layout,C=r.layers[0]._unevaluatedLayout._values,I={};if(r.textSizeData.kind==="composite"){var R=r.textSizeData,L=R.maxZoom;I.compositeTextSizes=[C["text-size"].possiblyEvaluate(new ur(R.minZoom),_),C["text-size"].possiblyEvaluate(new ur(L),_)]}if(r.iconSizeData.kind==="composite"){var j=r.iconSizeData,G=j.maxZoom;I.compositeIconSizes=[C["icon-size"].possiblyEvaluate(new ur(j.minZoom),_),C["icon-size"].possiblyEvaluate(new ur(G),_)]}I.layoutTextSize=C["text-size"].possiblyEvaluate(new ur(r.zoom+1),_),I.layoutIconSize=C["icon-size"].possiblyEvaluate(new ur(r.zoom+1),_),I.textMaxSize=C["text-size"].possiblyEvaluate(new ur(18));for(var oe=24*A.get("text-line-height"),ae=A.get("text-rotation-alignment")==="map"&&A.get("symbol-placement")!=="point",ge=A.get("text-keep-upright"),pe=A.get("text-size"),Se=function(){var Be=Oe[Re],Ge=A.get("text-font").evaluate(Be,{},_).join(","),Je=pe.evaluate(Be,{},_),tt=I.layoutTextSize.evaluate(Be,{},_),Et=I.layoutIconSize.evaluate(Be,{},_),lt={horizontal:{},vertical:void 0},Tt=Be.text,ht=[0,0];if(Tt){var Yt=Tt.toString(),Nt=24*A.get("text-letter-spacing").evaluate(Be,{},_),wt=function(hr){for(var Wr=0,Br=hr;Wr<Br.length;Wr+=1)if(wr=Br[Wr].charCodeAt(0),ot.Arabic(wr)||ot["Arabic Supplement"](wr)||ot["Arabic Extended-A"](wr)||ot["Arabic Presentation Forms-A"](wr)||ot["Arabic Presentation Forms-B"](wr))return!1;var wr;return!0}(Yt)?Nt:0,ar=A.get("text-anchor").evaluate(Be,{},_),Kt=A.get("text-variable-anchor");if(!Kt){var xr=A.get("text-radial-offset").evaluate(Be,{},_);ht=xr?uw(ar,[24*xr,Xv]):A.get("text-offset").evaluate(Be,{},_).map(function(hr){return 24*hr})}var It=ae?"center":A.get("text-justify").evaluate(Be,{},_),Cr=A.get("symbol-placement"),on=Cr==="point"?24*A.get("text-max-width").evaluate(Be,{},_):0,yn=function(){r.allowVerticalPlacement&&rh(Yt)&&(lt.vertical=tm(Tt,i,s,m,Ge,on,oe,ar,"left",wt,ht,go.vertical,!0,Cr,tt,Je))};if(!ae&&Kt){for(var hn=It==="auto"?Kt.map(function(hr){return Qv(hr)}):[It],an=!1,gn=0;gn<hn.length;gn++){var qn=hn[gn];if(!lt.horizontal[qn])if(an)lt.horizontal[qn]=lt.horizontal[0];else{var Wn=tm(Tt,i,s,m,Ge,on,oe,"center",qn,wt,ht,go.horizontal,!1,Cr,tt,Je);Wn&&(lt.horizontal[qn]=Wn,an=Wn.positionedLines.length===1)}}yn()}else{It==="auto"&&(It=Qv(ar));var Ai=tm(Tt,i,s,m,Ge,on,oe,ar,It,wt,ht,go.horizontal,!1,Cr,tt,Je);Ai&&(lt.horizontal[It]=Ai),yn(),rh(Yt)&&ae&&ge&&(lt.vertical=tm(Tt,i,s,m,Ge,on,oe,ar,It,wt,ht,go.vertical,!1,Cr,tt,Je))}}var ni=void 0,Ei=!1;if(Be.icon&&Be.icon.name){var En=h[Be.icon.name];En&&(ni=function(hr,Wr,Br){var wr=Zv(Br),zi=Wr[0]-hr.displaySize[0]*wr.horizontalAlign,fi=Wr[1]-hr.displaySize[1]*wr.verticalAlign;return{image:hr,top:fi,bottom:fi+hr.displaySize[1],left:zi,right:zi+hr.displaySize[0]}}(m[Be.icon.name],A.get("icon-offset").evaluate(Be,{},_),A.get("icon-anchor").evaluate(Be,{},_)),Ei=En.sdf,r.sdfIcons===void 0?r.sdfIcons=En.sdf:r.sdfIcons!==En.sdf&&he("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(En.pixelRatio!==r.pixelRatio||A.get("icon-rotate").constantOr(1)!==0)&&(r.iconsNeedLinear=!0))}var ii=pw(lt.horizontal)||lt.vertical;r.iconsInText=!!ii&&ii.iconsInText,(ii||ni)&&function(hr,Wr,Br,wr,zi,fi,Yr,Mn,di,kr,Va){var vo=fi.textMaxSize.evaluate(Wr,{});vo===void 0&&(vo=Yr);var $a,Sn=hr.layers[0].layout,qa=Sn.get("icon-offset").evaluate(Wr,{},Va),Jo=pw(Br.horizontal),Sc=Yr/24,fu=hr.tilePixelRatio*Sc,Cc=hr.tilePixelRatio*vo/24,Ps=hr.tilePixelRatio*Mn,kc=hr.tilePixelRatio*Sn.get("symbol-spacing"),pm=Sn.get("text-padding")*hr.tilePixelRatio,Tc=Sn.get("icon-padding")*hr.tilePixelRatio,Ah=Sn.get("text-max-angle")/180*Math.PI,hm=Sn.get("text-rotation-alignment")==="map"&&Sn.get("symbol-placement")!=="point",fm=Sn.get("icon-rotation-alignment")==="map"&&Sn.get("symbol-placement")!=="point",Ms=Sn.get("symbol-placement"),Eh=kc/2,Ic=Sn.get("icon-text-fit");wr&&Ic!=="none"&&(hr.allowVerticalPlacement&&Br.vertical&&($a=Yb(wr,Br.vertical,Ic,Sn.get("icon-text-fit-padding"),qa,Sc)),Jo&&(wr=Yb(wr,Jo,Ic,Sn.get("icon-text-fit-padding"),qa,Sc)));var cl=function(TM,Rh){Rh.x<0||Rh.x>=8192||Rh.y<0||Rh.y>=8192||function(Cn,ya,IM,pl,a0,Tw,_m,Wa,xm,zh,bm,wm,s0,Iw,Lh,Pw,Mw,Rw,zw,Lw,_o,Am,Ow,Ga,PM){var Dw,mu,Lc,Oc,Dc,Bc=Cn.addToLineVertexArray(ya,IM),Bw=0,Nw=0,Fw=0,Uw=0,l0=-1,u0=-1,Rs={},jw=ie(""),c0=0,p0=0;if(Wa._unevaluatedLayout.getValue("text-radial-offset")===void 0?(c0=(Dw=Wa.layout.get("text-offset").evaluate(_o,{},Ga).map(function(Dh){return 24*Dh}))[0],p0=Dw[1]):(c0=24*Wa.layout.get("text-radial-offset").evaluate(_o,{},Ga),p0=Xv),Cn.allowVerticalPlacement&&pl.vertical){var Vw=Wa.layout.get("text-rotate").evaluate(_o,{},Ga)+90;Oc=new am(xm,ya,zh,bm,wm,pl.vertical,s0,Iw,Lh,Vw),_m&&(Dc=new am(xm,ya,zh,bm,wm,_m,Mw,Rw,Lh,Vw))}if(a0){var h0=Wa.layout.get("icon-rotate").evaluate(_o,{}),$w=Wa.layout.get("icon-text-fit")!=="none",qw=sw(a0,h0,Ow,$w),f0=_m?sw(_m,h0,Ow,$w):void 0;Lc=new am(xm,ya,zh,bm,wm,a0,Mw,Rw,!1,h0),Bw=4*qw.length;var Ww=Cn.iconSizeData,Oh=null;Ww.kind==="source"?(Oh=[128*Wa.layout.get("icon-size").evaluate(_o,{})])[0]>32640&&he(Cn.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):Ww.kind==="composite"&&((Oh=[128*Am.compositeIconSizes[0].evaluate(_o,{},Ga),128*Am.compositeIconSizes[1].evaluate(_o,{},Ga)])[0]>32640||Oh[1]>32640)&&he(Cn.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),Cn.addSymbols(Cn.icon,qw,Oh,Lw,zw,_o,!1,ya,Bc.lineStartIndex,Bc.lineLength,-1,Ga),l0=Cn.icon.placedSymbolArray.length-1,f0&&(Nw=4*f0.length,Cn.addSymbols(Cn.icon,f0,Oh,Lw,zw,_o,go.vertical,ya,Bc.lineStartIndex,Bc.lineLength,-1,Ga),u0=Cn.icon.placedSymbolArray.length-1)}for(var Gw in pl.horizontal){var Em=pl.horizontal[Gw];if(!mu){jw=ie(Em.text);var MM=Wa.layout.get("text-rotate").evaluate(_o,{},Ga);mu=new am(xm,ya,zh,bm,wm,Em,s0,Iw,Lh,MM)}var Hw=Em.positionedLines.length===1;if(Fw+=cw(Cn,ya,Em,Tw,Wa,Lh,_o,Pw,Bc,pl.vertical?go.horizontal:go.horizontalOnly,Hw?Object.keys(pl.horizontal):[Gw],Rs,l0,Am,Ga),Hw)break}pl.vertical&&(Uw+=cw(Cn,ya,pl.vertical,Tw,Wa,Lh,_o,Pw,Bc,go.vertical,["vertical"],Rs,u0,Am,Ga));var RM=mu?mu.boxStartIndex:Cn.collisionBoxArray.length,zM=mu?mu.boxEndIndex:Cn.collisionBoxArray.length,LM=Oc?Oc.boxStartIndex:Cn.collisionBoxArray.length,OM=Oc?Oc.boxEndIndex:Cn.collisionBoxArray.length,DM=Lc?Lc.boxStartIndex:Cn.collisionBoxArray.length,BM=Lc?Lc.boxEndIndex:Cn.collisionBoxArray.length,NM=Dc?Dc.boxStartIndex:Cn.collisionBoxArray.length,FM=Dc?Dc.boxEndIndex:Cn.collisionBoxArray.length,Ha=-1,Sm=function(Dh,Kw){return Dh&&Dh.circleDiameter?Math.max(Dh.circleDiameter,Kw):Kw};Ha=Sm(mu,Ha),Ha=Sm(Oc,Ha),Ha=Sm(Lc,Ha);var Zw=(Ha=Sm(Dc,Ha))>-1?1:0;Zw&&(Ha*=PM/24),Cn.glyphOffsetArray.length>=Vr.MAX_GLYPHS&&he("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),_o.sortKey!==void 0&&Cn.addToSortKeyRanges(Cn.symbolInstances.length,_o.sortKey),Cn.symbolInstances.emplaceBack(ya.x,ya.y,Rs.right>=0?Rs.right:-1,Rs.center>=0?Rs.center:-1,Rs.left>=0?Rs.left:-1,Rs.vertical||-1,l0,u0,jw,RM,zM,LM,OM,DM,BM,NM,FM,zh,Fw,Uw,Bw,Nw,Zw,0,s0,c0,p0,Ha)}(hr,Rh,TM,Br,wr,zi,$a,hr.layers[0],hr.collisionBoxArray,Wr.index,Wr.sourceLayerIndex,hr.index,fu,pm,hm,di,Ps,Tc,fm,qa,Wr,fi,kr,Va,Yr)};if(Ms==="line")for(var Pc=0,dm=aw(Wr.geometry,0,0,8192,8192);Pc<dm.length;Pc+=1)for(var mm=dm[Pc],Sh=0,Ch=pM(mm,kc,Ah,Br.vertical||Jo,wr,24,Cc,hr.overscaling,8192);Sh<Ch.length;Sh+=1){var ym=Ch[Sh];Jo&&mM(hr,Jo.text,Eh,ym)||cl(mm,ym)}else if(Ms==="line-center")for(var kh=0,Th=Wr.geometry;kh<Th.length;kh+=1){var Ih=Th[kh];if(Ih.length>1){var gm=cM(Ih,Ah,Br.vertical||Jo,wr,24,Cc);gm&&cl(Ih,gm)}}else if(Wr.type==="Polygon")for(var Mc=0,vm=$v(Wr.geometry,0);Mc<vm.length;Mc+=1){var Rc=vm[Mc],Ph=fM(Rc,16);cl(Rc[0],new vc(Ph.x,Ph.y,0))}else if(Wr.type==="LineString")for(var du=0,Mh=Wr.geometry;du<Mh.length;du+=1){var zc=Mh[du];cl(zc,new vc(zc[0].x,zc[0].y,0))}else if(Wr.type==="Point")for(var n0=0,Cw=Wr.geometry;n0<Cw.length;n0+=1)for(var i0=0,kw=Cw[n0];i0<kw.length;i0+=1){var o0=kw[i0];cl([o0],new vc(o0.x,o0.y,0))}}(r,Be,lt,ni,h,I,tt,Et,ht,Ei,_)},Re=0,Oe=r.features;Re<Oe.length;Re+=1)Se();y&&r.generateCollisionDebugBuffers()},o.perspective=function(r,i,s,h,m){var y,_=1/Math.tan(i/2);return r[0]=_/s,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=_,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,m!=null&&m!==1/0?(r[10]=(m+h)*(y=1/(h-m)),r[14]=2*m*h*y):(r[10]=-1,r[14]=-2*h),r},o.pick=function(r,i){for(var s={},h=0;h<i.length;h++){var m=i[h];m in r&&(s[m]=r[m])}return s},o.plugin=io,o.polygonIntersectsPolygon=Fa,o.postMapLoadEvent=On,o.postTurnstileEvent=Ir,o.potpack=Kb,o.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],o.register=_t,o.registerForPluginStateChange=function(r){return r({pluginStatus:qi,pluginURL:pa}),ih.on("pluginStateChange",r),r},o.renderColorRamp=Pb,o.rotate=function(r,i,s){var h=i[0],m=i[1],y=i[2],_=i[3],A=Math.sin(s),C=Math.cos(s);return r[0]=h*C+y*A,r[1]=m*C+_*A,r[2]=h*-A+y*C,r[3]=m*-A+_*C,r},o.rotateX=function(r,i,s){var h=Math.sin(s),m=Math.cos(s),y=i[4],_=i[5],A=i[6],C=i[7],I=i[8],R=i[9],L=i[10],j=i[11];return i!==r&&(r[0]=i[0],r[1]=i[1],r[2]=i[2],r[3]=i[3],r[12]=i[12],r[13]=i[13],r[14]=i[14],r[15]=i[15]),r[4]=y*m+I*h,r[5]=_*m+R*h,r[6]=A*m+L*h,r[7]=C*m+j*h,r[8]=I*m-y*h,r[9]=R*m-_*h,r[10]=L*m-A*h,r[11]=j*m-C*h,r},o.rotateZ=function(r,i,s){var h=Math.sin(s),m=Math.cos(s),y=i[0],_=i[1],A=i[2],C=i[3],I=i[4],R=i[5],L=i[6],j=i[7];return i!==r&&(r[8]=i[8],r[9]=i[9],r[10]=i[10],r[11]=i[11],r[12]=i[12],r[13]=i[13],r[14]=i[14],r[15]=i[15]),r[0]=y*m+I*h,r[1]=_*m+R*h,r[2]=A*m+L*h,r[3]=C*m+j*h,r[4]=I*m-y*h,r[5]=R*m-_*h,r[6]=L*m-A*h,r[7]=j*m-C*h,r},o.scale=function(r,i,s){var h=s[0],m=s[1],y=s[2];return r[0]=i[0]*h,r[1]=i[1]*h,r[2]=i[2]*h,r[3]=i[3]*h,r[4]=i[4]*m,r[5]=i[5]*m,r[6]=i[6]*m,r[7]=i[7]*m,r[8]=i[8]*y,r[9]=i[9]*y,r[10]=i[10]*y,r[11]=i[11]*y,r[12]=i[12],r[13]=i[13],r[14]=i[14],r[15]=i[15],r},o.scale$1=function(r,i,s){return r[0]=i[0]*s,r[1]=i[1]*s,r[2]=i[2]*s,r[3]=i[3]*s,r},o.scale$2=function(r,i,s){return r[0]=i[0]*s,r[1]=i[1]*s,r[2]=i[2]*s,r},o.setCacheLimits=function(r,i){Qn=r,Fi=i},o.setRTLTextPlugin=function(r,i,s){if(s===void 0&&(s=!1),qi==="deferred"||qi==="loading"||qi==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");pa=Ht.resolveURL(r),qi="deferred",ic=i,tu(),s||Lo()},o.sphericalToCartesian=function(r){var i=r[0],s=r[1],h=r[2];return s+=90,s*=Math.PI/180,h*=Math.PI/180,{x:i*Math.cos(s)*Math.sin(h),y:i*Math.sin(s)*Math.sin(h),z:i*Math.cos(h)}},o.sqrLen=function(r){var i=r[0],s=r[1];return i*i+s*s},o.styleSpec=Z,o.sub=function(r,i,s){return r[0]=i[0]-s[0],r[1]=i[1]-s[1],r[2]=i[2]-s[2],r},o.symbolSize=uM,o.transformMat3=function(r,i,s){var h=i[0],m=i[1],y=i[2];return r[0]=h*s[0]+m*s[3]+y*s[6],r[1]=h*s[1]+m*s[4]+y*s[7],r[2]=h*s[2]+m*s[5]+y*s[8],r},o.transformMat4=cc,o.translate=function(r,i,s){var h,m,y,_,A,C,I,R,L,j,G,oe,ae=s[0],ge=s[1],pe=s[2];return i===r?(r[12]=i[0]*ae+i[4]*ge+i[8]*pe+i[12],r[13]=i[1]*ae+i[5]*ge+i[9]*pe+i[13],r[14]=i[2]*ae+i[6]*ge+i[10]*pe+i[14],r[15]=i[3]*ae+i[7]*ge+i[11]*pe+i[15]):(m=i[1],y=i[2],_=i[3],A=i[4],C=i[5],I=i[6],R=i[7],L=i[8],j=i[9],G=i[10],oe=i[11],r[0]=h=i[0],r[1]=m,r[2]=y,r[3]=_,r[4]=A,r[5]=C,r[6]=I,r[7]=R,r[8]=L,r[9]=j,r[10]=G,r[11]=oe,r[12]=h*ae+A*ge+L*pe+i[12],r[13]=m*ae+C*ge+j*pe+i[13],r[14]=y*ae+I*ge+G*pe+i[14],r[15]=_*ae+R*ge+oe*pe+i[15]),r},o.triggerPluginCompletionEvent=Wd,o.uniqueId=O,o.validateCustomStyleLayer=function(r){var i=[],s=r.id;return s===void 0&&i.push({message:"layers."+s+': missing required property "id"'}),r.render===void 0&&i.push({message:"layers."+s+': missing required method "render"'}),r.renderingMode&&r.renderingMode!=="2d"&&r.renderingMode!=="3d"&&i.push({message:"layers."+s+': property "renderingMode" must be either "2d" or "3d"'}),i},o.validateLight=Lv,o.validateStyle=Ql,o.values=function(r){var i=[];for(var s in r)i.push(r[s]);return i},o.vectorTile=dc,o.version="1.13.3",o.warnOnce=he,o.webpSupported=er,o.window=T,o.wrap=U}),d(["./shared"],function(o){function v(z){var F=typeof z;if(F==="number"||F==="boolean"||F==="string"||z==null)return JSON.stringify(z);if(Array.isArray(z)){for(var V="[",X=0,re=z;X<re.length;X+=1)V+=v(re[X])+",";return V+"]"}for(var ce=Object.keys(z).sort(),de="{",Z=0;Z<ce.length;Z++)de+=JSON.stringify(ce[Z])+":"+v(z[ce[Z]])+",";return de+"}"}function x(z){for(var F="",V=0,X=o.refProperties;V<X.length;V+=1)F+="/"+v(z[X[V]]);return F}var E=function(z){this.keyCache={},z&&this.replace(z)};E.prototype.replace=function(z){this._layerConfigs={},this._layers={},this.update(z,[])},E.prototype.update=function(z,F){for(var V=this,X=0,re=z;X<re.length;X+=1){var ce=re[X];this._layerConfigs[ce.id]=ce;var de=this._layers[ce.id]=o.createStyleLayer(ce);de._featureFilter=o.featureFilter(de.filter),this.keyCache[ce.id]&&delete this.keyCache[ce.id]}for(var Z=0,ue=F;Z<ue.length;Z+=1){var Me=ue[Z];delete this.keyCache[Me],delete this._layerConfigs[Me],delete this._layers[Me]}this.familiesBySource={};for(var Ze=0,Qe=function(it,at){for(var rr={},pt=0;pt<it.length;pt++){var gr=at&&at[it[pt].id]||x(it[pt]);at&&(at[it[pt].id]=gr);var $r=rr[gr];$r||($r=rr[gr]=[]),$r.push(it[pt])}var lr=[];for(var Pr in rr)lr.push(rr[Pr]);return lr}(o.values(this._layerConfigs),this.keyCache);Ze<Qe.length;Ze+=1){var je=Qe[Ze].map(function(it){return V._layers[it.id]}),Xe=je[0];if(Xe.visibility!=="none"){var xt=Xe.source||"",vt=this.familiesBySource[xt];vt||(vt=this.familiesBySource[xt]={});var Ve=Xe.sourceLayer||"_geojsonTileLayer",ft=vt[Ve];ft||(ft=vt[Ve]=[]),ft.push(je)}}};var k=function(z){var F={},V=[];for(var X in z){var re=z[X],ce=F[X]={};for(var de in re){var Z=re[+de];if(Z&&Z.bitmap.width!==0&&Z.bitmap.height!==0){var ue={x:0,y:0,w:Z.bitmap.width+2,h:Z.bitmap.height+2};V.push(ue),ce[de]={rect:ue,metrics:Z.metrics}}}}var Me=o.potpack(V),Ze=new o.AlphaImage({width:Me.w||1,height:Me.h||1});for(var Qe in z){var je=z[Qe];for(var Xe in je){var xt=je[+Xe];if(xt&&xt.bitmap.width!==0&&xt.bitmap.height!==0){var vt=F[Qe][Xe].rect;o.AlphaImage.copy(xt.bitmap,Ze,{x:0,y:0},{x:vt.x+1,y:vt.y+1},xt.bitmap)}}}this.image=Ze,this.positions=F};o.register("GlyphAtlas",k);var P=function(z){this.tileID=new o.OverscaledTileID(z.tileID.overscaledZ,z.tileID.wrap,z.tileID.canonical.z,z.tileID.canonical.x,z.tileID.canonical.y),this.uid=z.uid,this.zoom=z.zoom,this.pixelRatio=z.pixelRatio,this.tileSize=z.tileSize,this.source=z.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=z.showCollisionBoxes,this.collectResourceTiming=!!z.collectResourceTiming,this.returnDependencies=!!z.returnDependencies,this.promoteId=z.promoteId};function T(z,F,V){for(var X=new o.EvaluationParameters(F),re=0,ce=z;re<ce.length;re+=1)ce[re].recalculate(X,V)}function W(z,F){var V=o.getArrayBuffer(z.request,function(X,re,ce,de){X?F(X):re&&F(null,{vectorTile:new o.vectorTile.VectorTile(new o.pbf(re)),rawData:re,cacheControl:ce,expires:de})});return function(){V.cancel(),F()}}P.prototype.parse=function(z,F,V,X,re){var ce=this;this.status="parsing",this.data=z,this.collisionBoxArray=new o.CollisionBoxArray;var de=new o.DictionaryCoder(Object.keys(z.layers).sort()),Z=new o.FeatureIndex(this.tileID,this.promoteId);Z.bucketLayerIDs=[];var ue,Me,Ze,Qe,je={},Xe={featureIndex:Z,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:V},xt=F.familiesBySource[this.source];for(var vt in xt){var Ve=z.layers[vt];if(Ve){Ve.version===1&&o.warnOnce('Vector tile source "'+this.source+'" layer "'+vt+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var ft=de.encode(vt),it=[],at=0;at<Ve.length;at++){var rr=Ve.feature(at),pt=Z.getId(rr,vt);it.push({feature:rr,id:pt,index:at,sourceLayerIndex:ft})}for(var gr=0,$r=xt[vt];gr<$r.length;gr+=1){var lr=$r[gr],Pr=lr[0];Pr.minzoom&&this.zoom<Math.floor(Pr.minzoom)||Pr.maxzoom&&this.zoom>=Pr.maxzoom||Pr.visibility!=="none"&&(T(lr,this.zoom,V),(je[Pr.id]=Pr.createBucket({index:Z.bucketLayerIDs.length,layers:lr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:ft,sourceID:this.source})).populate(it,Xe,this.tileID.canonical),Z.bucketLayerIDs.push(lr.map(function(jr){return jr.id})))}}}var _r=o.mapObject(Xe.glyphDependencies,function(jr){return Object.keys(jr).map(Number)});Object.keys(_r).length?X.send("getGlyphs",{uid:this.uid,stacks:_r},function(jr,dr){ue||(ue=jr,Me=dr,bn.call(ce))}):Me={};var yi=Object.keys(Xe.iconDependencies);yi.length?X.send("getImages",{icons:yi,source:this.source,tileID:this.tileID,type:"icons"},function(jr,dr){ue||(ue=jr,Ze=dr,bn.call(ce))}):Ze={};var Lr=Object.keys(Xe.patternDependencies);function bn(){if(ue)return re(ue);if(Me&&Ze&&Qe){var jr=new k(Me),dr=new o.ImageAtlas(Ze,Qe);for(var Mr in je){var Ti=je[Mr];Ti instanceof o.SymbolBucket?(T(Ti.layers,this.zoom,V),o.performSymbolLayout(Ti,Me,jr.positions,Ze,dr.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Ti.hasPattern&&(Ti instanceof o.LineBucket||Ti instanceof o.FillBucket||Ti instanceof o.FillExtrusionBucket)&&(T(Ti.layers,this.zoom,V),Ti.addFeatures(Xe,this.tileID.canonical,dr.patternPositions))}this.status="done",re(null,{buckets:o.values(je).filter(function(Fl){return!Fl.isEmpty()}),featureIndex:Z,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:jr.image,imageAtlas:dr,glyphMap:this.returnDependencies?Me:null,iconMap:this.returnDependencies?Ze:null,glyphPositions:this.returnDependencies?jr.positions:null})}}Lr.length?X.send("getImages",{icons:Lr,source:this.source,tileID:this.tileID,type:"patterns"},function(jr,dr){ue||(ue=jr,Qe=dr,bn.call(ce))}):Qe={},bn.call(this)};var $=function(z,F,V,X){this.actor=z,this.layerIndex=F,this.availableImages=V,this.loadVectorData=X||W,this.loading={},this.loaded={}};$.prototype.loadTile=function(z,F){var V=this,X=z.uid;this.loading||(this.loading={});var re=!!(z&&z.request&&z.request.collectResourceTiming)&&new o.RequestPerformance(z.request),ce=this.loading[X]=new P(z);ce.abort=this.loadVectorData(z,function(de,Z){if(delete V.loading[X],de||!Z)return ce.status="done",V.loaded[X]=ce,F(de);var ue=Z.rawData,Me={};Z.expires&&(Me.expires=Z.expires),Z.cacheControl&&(Me.cacheControl=Z.cacheControl);var Ze={};if(re){var Qe=re.finish();Qe&&(Ze.resourceTiming=JSON.parse(JSON.stringify(Qe)))}ce.vectorTile=Z.vectorTile,ce.parse(Z.vectorTile,V.layerIndex,V.availableImages,V.actor,function(je,Xe){if(je||!Xe)return F(je);F(null,o.extend({rawTileData:ue.slice(0)},Xe,Me,Ze))}),V.loaded=V.loaded||{},V.loaded[X]=ce})},$.prototype.reloadTile=function(z,F){var V=this,X=this.loaded,re=z.uid,ce=this;if(X&&X[re]){var de=X[re];de.showCollisionBoxes=z.showCollisionBoxes;var Z=function(ue,Me){var Ze=de.reloadCallback;Ze&&(delete de.reloadCallback,de.parse(de.vectorTile,ce.layerIndex,V.availableImages,ce.actor,Ze)),F(ue,Me)};de.status==="parsing"?de.reloadCallback=Z:de.status==="done"&&(de.vectorTile?de.parse(de.vectorTile,this.layerIndex,this.availableImages,this.actor,Z):Z())}},$.prototype.abortTile=function(z,F){var V=this.loading,X=z.uid;V&&V[X]&&V[X].abort&&(V[X].abort(),delete V[X]),F()},$.prototype.removeTile=function(z,F){var V=this.loaded,X=z.uid;V&&V[X]&&delete V[X],F()};var H=o.window.ImageBitmap,D=function(){this.loaded={}};function U(z,F){if(z.length!==0){q(z[0],F);for(var V=1;V<z.length;V++)q(z[V],!F)}}function q(z,F){for(var V=0,X=0,re=0,ce=z.length,de=ce-1;re<ce;de=re++){var Z=(z[re][0]-z[de][0])*(z[de][1]+z[re][1]),ue=V+Z;X+=Math.abs(V)>=Math.abs(Z)?V-ue+Z:Z-ue+V,V=ue}V+X>=0!=!!F&&z.reverse()}D.prototype.loadTile=function(z,F){var V=z.uid,X=z.encoding,re=z.rawImageData,ce=H&&re instanceof H?this.getImageData(re):re,de=new o.DEMData(V,ce,X);this.loaded=this.loaded||{},this.loaded[V]=de,F(null,de)},D.prototype.getImageData=function(z){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(z.width,z.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=z.width,this.offscreenCanvas.height=z.height,this.offscreenCanvasContext.drawImage(z,0,0,z.width,z.height);var F=this.offscreenCanvasContext.getImageData(-1,-1,z.width+2,z.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new o.RGBAImage({width:F.width,height:F.height},F.data)},D.prototype.removeTile=function(z){var F=this.loaded,V=z.uid;F&&F[V]&&delete F[V]};var N=o.vectorTile.VectorTileFeature.prototype.toGeoJSON,O=function(z){this._feature=z,this.extent=o.EXTENT,this.type=z.type,this.properties=z.tags,"id"in z&&!isNaN(z.id)&&(this.id=parseInt(z.id,10))};O.prototype.loadGeometry=function(){if(this._feature.type===1){for(var z=[],F=0,V=this._feature.geometry;F<V.length;F+=1){var X=V[F];z.push([new o.Point$1(X[0],X[1])])}return z}for(var re=[],ce=0,de=this._feature.geometry;ce<de.length;ce+=1){for(var Z=[],ue=0,Me=de[ce];ue<Me.length;ue+=1){var Ze=Me[ue];Z.push(new o.Point$1(Ze[0],Ze[1]))}re.push(Z)}return re},O.prototype.toGeoJSON=function(z,F,V){return N.call(this,z,F,V)};var te=function(z){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o.EXTENT,this.length=z.length,this._features=z};te.prototype.feature=function(z){return new O(this._features[z])};var ne=o.vectorTile.VectorTileFeature,fe=xe;function xe(z,F){this.options=F||{},this.features=z,this.length=z.length}function Te(z,F){this.id=typeof z.id=="number"?z.id:void 0,this.type=z.type,this.rawGeometry=z.type===1?[z.geometry]:z.geometry,this.properties=z.tags,this.extent=F||4096}xe.prototype.feature=function(z){return new Te(this.features[z],this.options.extent)},Te.prototype.loadGeometry=function(){var z=this.rawGeometry;this.geometry=[];for(var F=0;F<z.length;F++){for(var V=z[F],X=[],re=0;re<V.length;re++)X.push(new o.Point$1(V[re][0],V[re][1]));this.geometry.push(X)}return this.geometry},Te.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var z=this.geometry,F=1/0,V=-1/0,X=1/0,re=-1/0,ce=0;ce<z.length;ce++)for(var de=z[ce],Z=0;Z<de.length;Z++){var ue=de[Z];F=Math.min(F,ue.x),V=Math.max(V,ue.x),X=Math.min(X,ue.y),re=Math.max(re,ue.y)}return[F,X,V,re]},Te.prototype.toGeoJSON=ne.prototype.toGeoJSON;var ve=Y,Ee=fe;function Y(z){var F=new o.pbf;return function(V,X){for(var re in V.layers)X.writeMessage(3,he,V.layers[re])}(z,F),F.finish()}function he(z,F){var V;F.writeVarintField(15,z.version||1),F.writeStringField(1,z.name||""),F.writeVarintField(5,z.extent||4096);var X={keys:[],values:[],keycache:{},valuecache:{}};for(V=0;V<z.length;V++)X.feature=z.feature(V),F.writeMessage(2,Ne,X);var re=X.keys;for(V=0;V<re.length;V++)F.writeStringField(3,re[V]);var ce=X.values;for(V=0;V<ce.length;V++)F.writeMessage(4,Le,ce[V])}function Ne(z,F){var V=z.feature;V.id!==void 0&&F.writeVarintField(1,V.id),F.writeMessage(2,We,z),F.writeVarintField(3,V.type),F.writeMessage(4,$e,V)}function We(z,F){var V=z.feature,X=z.keys,re=z.values,ce=z.keycache,de=z.valuecache;for(var Z in V.properties){var ue=ce[Z];ue===void 0&&(X.push(Z),ce[Z]=ue=X.length-1),F.writeVarint(ue);var Me=V.properties[Z],Ze=typeof Me;Ze!=="string"&&Ze!=="boolean"&&Ze!=="number"&&(Me=JSON.stringify(Me));var Qe=Ze+":"+Me,je=de[Qe];je===void 0&&(re.push(Me),de[Qe]=je=re.length-1),F.writeVarint(je)}}function we(z,F){return(F<<3)+(7&z)}function be(z){return z<<1^z>>31}function $e(z,F){for(var V=z.loadGeometry(),X=z.type,re=0,ce=0,de=V.length,Z=0;Z<de;Z++){var ue=V[Z],Me=1;X===1&&(Me=ue.length),F.writeVarint(we(1,Me));for(var Ze=X===3?ue.length-1:ue.length,Qe=0;Qe<Ze;Qe++){Qe===1&&X!==1&&F.writeVarint(we(2,Ze-1));var je=ue[Qe].x-re,Xe=ue[Qe].y-ce;F.writeVarint(be(je)),F.writeVarint(be(Xe)),re+=je,ce+=Xe}X===3&&F.writeVarint(we(7,1))}}function Le(z,F){var V=typeof z;V==="string"?F.writeStringField(1,z):V==="boolean"?F.writeBooleanField(7,z):V==="number"&&(z%1!=0?F.writeDoubleField(3,z):z<0?F.writeSVarintField(6,z):F.writeVarintField(5,z))}function St(z,F,V,X){Ce(z,V,X),Ce(F,2*V,2*X),Ce(F,2*V+1,2*X+1)}function Ce(z,F,V){var X=z[F];z[F]=z[V],z[V]=X}function qe(z,F,V,X){var re=z-V,ce=F-X;return re*re+ce*ce}ve.fromVectorTileJs=Y,ve.fromGeojsonVt=function(z,F){F=F||{};var V={};for(var X in z)V[X]=new fe(z[X].features,F),V[X].name=X,V[X].version=F.version,V[X].extent=F.extent;return Y({layers:V})},ve.GeoJSONWrapper=Ee;var gt=function(z){return z[0]},ze=function(z){return z[1]},st=function(z,F,V,X,re){F===void 0&&(F=gt),V===void 0&&(V=ze),X===void 0&&(X=64),re===void 0&&(re=Float64Array),this.nodeSize=X,this.points=z;for(var ce=z.length<65536?Uint16Array:Uint32Array,de=this.ids=new ce(z.length),Z=this.coords=new re(2*z.length),ue=0;ue<z.length;ue++)de[ue]=ue,Z[2*ue]=F(z[ue]),Z[2*ue+1]=V(z[ue]);(function Me(Ze,Qe,je,Xe,xt,vt){if(!(xt-Xe<=je)){var Ve=Xe+xt>>1;(function ft(it,at,rr,pt,gr,$r){for(;gr>pt;){if(gr-pt>600){var lr=gr-pt+1,Pr=rr-pt+1,_r=Math.log(lr),yi=.5*Math.exp(2*_r/3),Lr=.5*Math.sqrt(_r*yi*(lr-yi)/lr)*(Pr-lr/2<0?-1:1);ft(it,at,rr,Math.max(pt,Math.floor(rr-Pr*yi/lr+Lr)),Math.min(gr,Math.floor(rr+(lr-Pr)*yi/lr+Lr)),$r)}var bn=at[2*rr+$r],jr=pt,dr=gr;for(St(it,at,pt,rr),at[2*gr+$r]>bn&&St(it,at,pt,gr);jr<dr;){for(St(it,at,jr,dr),jr++,dr--;at[2*jr+$r]<bn;)jr++;for(;at[2*dr+$r]>bn;)dr--}at[2*pt+$r]===bn?St(it,at,pt,dr):St(it,at,++dr,gr),dr<=rr&&(pt=dr+1),rr<=dr&&(gr=dr-1)}})(Ze,Qe,Ve,Xe,xt,vt%2),Me(Ze,Qe,je,Xe,Ve-1,vt+1),Me(Ze,Qe,je,Ve+1,xt,vt+1)}})(de,Z,X,0,de.length-1,0)};st.prototype.range=function(z,F,V,X){return function(re,ce,de,Z,ue,Me,Ze){for(var Qe,je,Xe=[0,re.length-1,0],xt=[];Xe.length;){var vt=Xe.pop(),Ve=Xe.pop(),ft=Xe.pop();if(Ve-ft<=Ze)for(var it=ft;it<=Ve;it++)je=ce[2*it+1],(Qe=ce[2*it])>=de&&Qe<=ue&&je>=Z&&je<=Me&&xt.push(re[it]);else{var at=Math.floor((ft+Ve)/2);je=ce[2*at+1],(Qe=ce[2*at])>=de&&Qe<=ue&&je>=Z&&je<=Me&&xt.push(re[at]);var rr=(vt+1)%2;(vt===0?de<=Qe:Z<=je)&&(Xe.push(ft),Xe.push(at-1),Xe.push(rr)),(vt===0?ue>=Qe:Me>=je)&&(Xe.push(at+1),Xe.push(Ve),Xe.push(rr))}}return xt}(this.ids,this.coords,z,F,V,X,this.nodeSize)},st.prototype.within=function(z,F,V){return function(X,re,ce,de,Z,ue){for(var Me=[0,X.length-1,0],Ze=[],Qe=Z*Z;Me.length;){var je=Me.pop(),Xe=Me.pop(),xt=Me.pop();if(Xe-xt<=ue)for(var vt=xt;vt<=Xe;vt++)qe(re[2*vt],re[2*vt+1],ce,de)<=Qe&&Ze.push(X[vt]);else{var Ve=Math.floor((xt+Xe)/2),ft=re[2*Ve],it=re[2*Ve+1];qe(ft,it,ce,de)<=Qe&&Ze.push(X[Ve]);var at=(je+1)%2;(je===0?ce-Z<=ft:de-Z<=it)&&(Me.push(xt),Me.push(Ve-1),Me.push(at)),(je===0?ce+Z>=ft:de+Z>=it)&&(Me.push(Ve+1),Me.push(Xe),Me.push(at))}}return Ze}(this.ids,this.coords,z,F,V,this.nodeSize)};var Wt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(z){return z}},Dt=function(z){this.options=Gt(Object.create(Wt),z),this.trees=new Array(this.options.maxZoom+1)};function Ht(z,F,V,X,re){return{x:z,y:F,zoom:1/0,id:V,parentId:-1,numPoints:X,properties:re}}function At(z,F){var V=z.geometry.coordinates,X=V[1];return{x:Zt(V[0]),y:nt(X),zoom:1/0,index:F,parentId:-1}}function er(z){return{type:"Feature",id:z.id,properties:$t(z),geometry:{type:"Point",coordinates:[(X=z.x,360*(X-.5)),(F=z.y,V=(180-360*F)*Math.PI/180,360*Math.atan(Math.exp(V))/Math.PI-90)]}};var F,V,X}function $t(z){var F=z.numPoints,V=F>=1e4?Math.round(F/1e3)+"k":F>=1e3?Math.round(F/100)/10+"k":F;return Gt(Gt({},z.properties),{cluster:!0,cluster_id:z.id,point_count:F,point_count_abbreviated:V})}function Zt(z){return z/360+.5}function nt(z){var F=Math.sin(z*Math.PI/180),V=.5-.25*Math.log((1+F)/(1-F))/Math.PI;return V<0?0:V>1?1:V}function Gt(z,F){for(var V in F)z[V]=F[V];return z}function or(z){return z.x}function zr(z){return z.y}function Dr(z,F,V,X,re,ce){var de=re-V,Z=ce-X;if(de!==0||Z!==0){var ue=((z-V)*de+(F-X)*Z)/(de*de+Z*Z);ue>1?(V=re,X=ce):ue>0&&(V+=de*ue,X+=Z*ue)}return(de=z-V)*de+(Z=F-X)*Z}function sr(z,F,V,X){var re={id:z===void 0?null:z,type:F,geometry:V,tags:X,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ce){var de=ce.geometry,Z=ce.type;if(Z==="Point"||Z==="MultiPoint"||Z==="LineString")Tr(ce,de);else if(Z==="Polygon"||Z==="MultiLineString")for(var ue=0;ue<de.length;ue++)Tr(ce,de[ue]);else if(Z==="MultiPolygon")for(ue=0;ue<de.length;ue++)for(var Me=0;Me<de[ue].length;Me++)Tr(ce,de[ue][Me])}(re),re}function Tr(z,F){for(var V=0;V<F.length;V+=3)z.minX=Math.min(z.minX,F[V]),z.minY=Math.min(z.minY,F[V+1]),z.maxX=Math.max(z.maxX,F[V]),z.maxY=Math.max(z.maxY,F[V+1])}function Fr(z,F,V,X){if(F.geometry){var re=F.geometry.coordinates,ce=F.geometry.type,de=Math.pow(V.tolerance/((1<<V.maxZoom)*V.extent),2),Z=[],ue=F.id;if(V.promoteId?ue=F.properties[V.promoteId]:V.generateId&&(ue=X||0),ce==="Point")Ar(re,Z);else if(ce==="MultiPoint")for(var Me=0;Me<re.length;Me++)Ar(re[Me],Z);else if(ce==="LineString")en(re,Z,de,!1);else if(ce==="MultiLineString"){if(V.lineMetrics){for(Me=0;Me<re.length;Me++)en(re[Me],Z=[],de,!1),z.push(sr(ue,"LineString",Z,F.properties));return}Ur(re,Z,de,!1)}else if(ce==="Polygon")Ur(re,Z,de,!0);else{if(ce!=="MultiPolygon"){if(ce==="GeometryCollection"){for(Me=0;Me<F.geometry.geometries.length;Me++)Fr(z,{id:ue,geometry:F.geometry.geometries[Me],properties:F.properties},V,X);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Me=0;Me<re.length;Me++){var Ze=[];Ur(re[Me],Ze,de,!0),Z.push(Ze)}}z.push(sr(ue,ce,Z,F.properties))}}function Ar(z,F){F.push(mr(z[0])),F.push(dn(z[1])),F.push(0)}function en(z,F,V,X){for(var re,ce,de=0,Z=0;Z<z.length;Z++){var ue=mr(z[Z][0]),Me=dn(z[Z][1]);F.push(ue),F.push(Me),F.push(0),Z>0&&(de+=X?(re*Me-ue*ce)/2:Math.sqrt(Math.pow(ue-re,2)+Math.pow(Me-ce,2))),re=ue,ce=Me}var Ze=F.length-3;F[2]=1,function Qe(je,Xe,xt,vt){for(var Ve,ft=vt,it=xt-Xe>>1,at=xt-Xe,rr=je[Xe],pt=je[Xe+1],gr=je[xt],$r=je[xt+1],lr=Xe+3;lr<xt;lr+=3){var Pr=Dr(je[lr],je[lr+1],rr,pt,gr,$r);if(Pr>ft)Ve=lr,ft=Pr;else if(Pr===ft){var _r=Math.abs(lr-it);_r<at&&(Ve=lr,at=_r)}}ft>vt&&(Ve-Xe>3&&Qe(je,Xe,Ve,vt),je[Ve+2]=ft,xt-Ve>3&&Qe(je,Ve,xt,vt))}(F,0,Ze,V),F[Ze+2]=1,F.size=Math.abs(de),F.start=0,F.end=F.size}function Ur(z,F,V,X){for(var re=0;re<z.length;re++){var ce=[];en(z[re],ce,V,X),F.push(ce)}}function mr(z){return z/360+.5}function dn(z){var F=Math.sin(z*Math.PI/180),V=.5-.25*Math.log((1+F)/(1-F))/Math.PI;return V<0?0:V>1?1:V}function xn(z,F,V,X,re,ce,de,Z){if(X/=F,ce>=(V/=F)&&de<X)return z;if(de<V||ce>=X)return null;for(var ue=[],Me=0;Me<z.length;Me++){var Ze=z[Me],Qe=Ze.geometry,je=Ze.type,Xe=re===0?Ze.minX:Ze.minY,xt=re===0?Ze.maxX:Ze.maxY;if(Xe>=V&&xt<X)ue.push(Ze);else if(!(xt<V||Xe>=X)){var vt=[];if(je==="Point"||je==="MultiPoint")Xn(Qe,vt,V,X,re);else if(je==="LineString")Ir(Qe,vt,V,X,re,!1,Z.lineMetrics);else if(je==="MultiLineString")On(Qe,vt,V,X,re,!1);else if(je==="Polygon")On(Qe,vt,V,X,re,!0);else if(je==="MultiPolygon")for(var Ve=0;Ve<Qe.length;Ve++){var ft=[];On(Qe[Ve],ft,V,X,re,!0),ft.length&&vt.push(ft)}if(vt.length){if(Z.lineMetrics&&je==="LineString"){for(Ve=0;Ve<vt.length;Ve++)ue.push(sr(Ze.id,je,vt[Ve],Ze.tags));continue}je!=="LineString"&&je!=="MultiLineString"||(vt.length===1?(je="LineString",vt=vt[0]):je="MultiLineString"),je!=="Point"&&je!=="MultiPoint"||(je=vt.length===3?"Point":"MultiPoint"),ue.push(sr(Ze.id,je,vt,Ze.tags))}}}return ue.length?ue:null}function Xn(z,F,V,X,re){for(var ce=0;ce<z.length;ce+=3){var de=z[ce+re];de>=V&&de<=X&&(F.push(z[ce]),F.push(z[ce+1]),F.push(z[ce+2]))}}function Ir(z,F,V,X,re,ce,de){for(var Z,ue,Me=Lt(z),Ze=re===0?Fi:Bt,Qe=z.start,je=0;je<z.length-3;je+=3){var Xe=z[je],xt=z[je+1],vt=z[je+2],Ve=z[je+3],ft=z[je+4],it=re===0?Xe:xt,at=re===0?Ve:ft,rr=!1;de&&(Z=Math.sqrt(Math.pow(Xe-Ve,2)+Math.pow(xt-ft,2))),it<V?at>V&&(ue=Ze(Me,Xe,xt,Ve,ft,V),de&&(Me.start=Qe+Z*ue)):it>X?at<X&&(ue=Ze(Me,Xe,xt,Ve,ft,X),de&&(Me.start=Qe+Z*ue)):Qn(Me,Xe,xt,vt),at<V&&it>=V&&(ue=Ze(Me,Xe,xt,Ve,ft,V),rr=!0),at>X&&it<=X&&(ue=Ze(Me,Xe,xt,Ve,ft,X),rr=!0),!ce&&rr&&(de&&(Me.end=Qe+Z*ue),F.push(Me),Me=Lt(z)),de&&(Qe+=Z)}var pt=z.length-3;Xe=z[pt],xt=z[pt+1],vt=z[pt+2],(it=re===0?Xe:xt)>=V&&it<=X&&Qn(Me,Xe,xt,vt),pt=Me.length-3,ce&&pt>=3&&(Me[pt]!==Me[0]||Me[pt+1]!==Me[1])&&Qn(Me,Me[0],Me[1],Me[2]),Me.length&&F.push(Me)}function Lt(z){var F=[];return F.size=z.size,F.start=z.start,F.end=z.end,F}function On(z,F,V,X,re,ce){for(var de=0;de<z.length;de++)Ir(z[de],F,V,X,re,ce,!1)}function Qn(z,F,V,X){z.push(F),z.push(V),z.push(X)}function Fi(z,F,V,X,re,ce){var de=(ce-F)/(X-F);return z.push(ce),z.push(V+(re-V)*de),z.push(1),de}function Bt(z,F,V,X,re,ce){var de=(ce-V)/(re-V);return z.push(F+(X-F)*de),z.push(ce),z.push(1),de}function Er(z,F){for(var V=[],X=0;X<z.length;X++){var re,ce=z[X],de=ce.type;if(de==="Point"||de==="MultiPoint"||de==="LineString")re=ut(ce.geometry,F);else if(de==="MultiLineString"||de==="Polygon"){re=[];for(var Z=0;Z<ce.geometry.length;Z++)re.push(ut(ce.geometry[Z],F))}else if(de==="MultiPolygon")for(re=[],Z=0;Z<ce.geometry.length;Z++){for(var ue=[],Me=0;Me<ce.geometry[Z].length;Me++)ue.push(ut(ce.geometry[Z][Me],F));re.push(ue)}V.push(sr(ce.id,de,re,ce.tags))}return V}function ut(z,F){var V=[];V.size=z.size,z.start!==void 0&&(V.start=z.start,V.end=z.end);for(var X=0;X<z.length;X+=3)V.push(z[X]+F,z[X+1],z[X+2]);return V}function Mt(z,F){if(z.transformed)return z;var V,X,re,ce=1<<z.z,de=z.x,Z=z.y;for(V=0;V<z.features.length;V++){var ue=z.features[V],Me=ue.geometry,Ze=ue.type;if(ue.geometry=[],Ze===1)for(X=0;X<Me.length;X+=2)ue.geometry.push(ke(Me[X],Me[X+1],F,ce,de,Z));else for(X=0;X<Me.length;X++){var Qe=[];for(re=0;re<Me[X].length;re+=2)Qe.push(ke(Me[X][re],Me[X][re+1],F,ce,de,Z));ue.geometry.push(Qe)}}return z.transformed=!0,z}function ke(z,F,V,X,re,ce){return[Math.round(V*(z*X-re)),Math.round(V*(F*X-ce))]}function Ke(z,F,V,X,re){for(var ce=F===re.maxZoom?0:re.tolerance/((1<<F)*re.extent),de={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:V,y:X,z:F,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Z=0;Z<z.length;Z++){de.numFeatures++,ct(de,z[Z],ce,re);var ue=z[Z].minX,Me=z[Z].minY,Ze=z[Z].maxX,Qe=z[Z].maxY;ue<de.minX&&(de.minX=ue),Me<de.minY&&(de.minY=Me),Ze>de.maxX&&(de.maxX=Ze),Qe>de.maxY&&(de.maxY=Qe)}return de}function ct(z,F,V,X){var re=F.geometry,ce=F.type,de=[];if(ce==="Point"||ce==="MultiPoint")for(var Z=0;Z<re.length;Z+=3)de.push(re[Z]),de.push(re[Z+1]),z.numPoints++,z.numSimplified++;else if(ce==="LineString")jt(de,re,z,V,!1,!1);else if(ce==="MultiLineString"||ce==="Polygon")for(Z=0;Z<re.length;Z++)jt(de,re[Z],z,V,ce==="Polygon",Z===0);else if(ce==="MultiPolygon")for(var ue=0;ue<re.length;ue++){var Me=re[ue];for(Z=0;Z<Me.length;Z++)jt(de,Me[Z],z,V,!0,Z===0)}if(de.length){var Ze=F.tags||null;if(ce==="LineString"&&X.lineMetrics){for(var Qe in Ze={},F.tags)Ze[Qe]=F.tags[Qe];Ze.mapbox_clip_start=re.start/re.size,Ze.mapbox_clip_end=re.end/re.size}var je={geometry:de,type:ce==="Polygon"||ce==="MultiPolygon"?3:ce==="LineString"||ce==="MultiLineString"?2:1,tags:Ze};F.id!==null&&(je.id=F.id),z.features.push(je)}}function jt(z,F,V,X,re,ce){var de=X*X;if(X>0&&F.size<(re?de:X))V.numPoints+=F.length/3;else{for(var Z=[],ue=0;ue<F.length;ue+=3)(X===0||F[ue+2]>de)&&(V.numSimplified++,Z.push(F[ue]),Z.push(F[ue+1])),V.numPoints++;re&&function(Me,Ze){for(var Qe=0,je=0,Xe=Me.length,xt=Xe-2;je<Xe;xt=je,je+=2)Qe+=(Me[je]-Me[xt])*(Me[je+1]+Me[xt+1]);if(Qe>0===Ze)for(je=0,Xe=Me.length;je<Xe/2;je+=2){var vt=Me[je],Ve=Me[je+1];Me[je]=Me[Xe-2-je],Me[je+1]=Me[Xe-1-je],Me[Xe-2-je]=vt,Me[Xe-1-je]=Ve}}(Z,ce),z.push(Z)}}function tr(z,F){var V=(F=this.options=function(re,ce){for(var de in ce)re[de]=ce[de];return re}(Object.create(this.options),F)).debug;if(V&&console.time("preprocess data"),F.maxZoom<0||F.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(F.promoteId&&F.generateId)throw new Error("promoteId and generateId cannot be used together.");var X=function(re,ce){var de=[];if(re.type==="FeatureCollection")for(var Z=0;Z<re.features.length;Z++)Fr(de,re.features[Z],ce,Z);else Fr(de,re.type==="Feature"?re:{geometry:re},ce);return de}(z,F);this.tiles={},this.tileCoords=[],V&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",F.indexMaxZoom,F.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(X=function(re,ce){var de=ce.buffer/ce.extent,Z=re,ue=xn(re,1,-1-de,de,0,-1,2,ce),Me=xn(re,1,1-de,2+de,0,-1,2,ce);return(ue||Me)&&(Z=xn(re,1,-de,1+de,0,-1,2,ce)||[],ue&&(Z=Er(ue,1).concat(Z)),Me&&(Z=Z.concat(Er(Me,-1)))),Z}(X,F)).length&&this.splitTile(X,0,0,0),V&&(X.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Qt(z,F,V){return 32*((1<<z)*V+F)+z}function yr(z,F){var V=z.tileID.canonical;if(!this._geoJSONIndex)return F(null,null);var X=this._geoJSONIndex.getTile(V.z,V.x,V.y);if(!X)return F(null,null);var re=new te(X.features),ce=ve(re);ce.byteOffset===0&&ce.byteLength===ce.buffer.byteLength||(ce=new Uint8Array(ce)),F(null,{vectorTile:re,rawData:ce.buffer})}Dt.prototype.load=function(z){var F=this.options,V=F.log,X=F.minZoom,re=F.maxZoom,ce=F.nodeSize;V&&console.time("total time");var de="prepare "+z.length+" points";V&&console.time(de),this.points=z;for(var Z=[],ue=0;ue<z.length;ue++)z[ue].geometry&&Z.push(At(z[ue],ue));this.trees[re+1]=new st(Z,or,zr,ce,Float32Array),V&&console.timeEnd(de);for(var Me=re;Me>=X;Me--){var Ze=+Date.now();Z=this._cluster(Z,Me),this.trees[Me]=new st(Z,or,zr,ce,Float32Array),V&&console.log("z%d: %d clusters in %dms",Me,Z.length,+Date.now()-Ze)}return V&&console.timeEnd("total time"),this},Dt.prototype.getClusters=function(z,F){var V=((z[0]+180)%360+360)%360-180,X=Math.max(-90,Math.min(90,z[1])),re=z[2]===180?180:((z[2]+180)%360+360)%360-180,ce=Math.max(-90,Math.min(90,z[3]));if(z[2]-z[0]>=360)V=-180,re=180;else if(V>re){var de=this.getClusters([V,X,180,ce],F),Z=this.getClusters([-180,X,re,ce],F);return de.concat(Z)}for(var ue=this.trees[this._limitZoom(F)],Me=[],Ze=0,Qe=ue.range(Zt(V),nt(ce),Zt(re),nt(X));Ze<Qe.length;Ze+=1){var je=ue.points[Qe[Ze]];Me.push(je.numPoints?er(je):this.points[je.index])}return Me},Dt.prototype.getChildren=function(z){var F=this._getOriginId(z),V=this._getOriginZoom(z),X="No cluster with the specified id.",re=this.trees[V];if(!re)throw new Error(X);var ce=re.points[F];if(!ce)throw new Error(X);for(var de=this.options.radius/(this.options.extent*Math.pow(2,V-1)),Z=[],ue=0,Me=re.within(ce.x,ce.y,de);ue<Me.length;ue+=1){var Ze=re.points[Me[ue]];Ze.parentId===z&&Z.push(Ze.numPoints?er(Ze):this.points[Ze.index])}if(Z.length===0)throw new Error(X);return Z},Dt.prototype.getLeaves=function(z,F,V){var X=[];return this._appendLeaves(X,z,F=F||10,V=V||0,0),X},Dt.prototype.getTile=function(z,F,V){var X=this.trees[this._limitZoom(z)],re=Math.pow(2,z),ce=this.options,de=ce.radius/ce.extent,Z=(V-de)/re,ue=(V+1+de)/re,Me={features:[]};return this._addTileFeatures(X.range((F-de)/re,Z,(F+1+de)/re,ue),X.points,F,V,re,Me),F===0&&this._addTileFeatures(X.range(1-de/re,Z,1,ue),X.points,re,V,re,Me),F===re-1&&this._addTileFeatures(X.range(0,Z,de/re,ue),X.points,-1,V,re,Me),Me.features.length?Me:null},Dt.prototype.getClusterExpansionZoom=function(z){for(var F=this._getOriginZoom(z)-1;F<=this.options.maxZoom;){var V=this.getChildren(z);if(F++,V.length!==1)break;z=V[0].properties.cluster_id}return F},Dt.prototype._appendLeaves=function(z,F,V,X,re){for(var ce=0,de=this.getChildren(F);ce<de.length;ce+=1){var Z=de[ce],ue=Z.properties;if(ue&&ue.cluster?re+ue.point_count<=X?re+=ue.point_count:re=this._appendLeaves(z,ue.cluster_id,V,X,re):re<X?re++:z.push(Z),z.length===V)break}return re},Dt.prototype._addTileFeatures=function(z,F,V,X,re,ce){for(var de=0,Z=z;de<Z.length;de+=1){var ue=F[Z[de]],Me=ue.numPoints,Ze={type:1,geometry:[[Math.round(this.options.extent*(ue.x*re-V)),Math.round(this.options.extent*(ue.y*re-X))]],tags:Me?$t(ue):this.points[ue.index].properties},Qe=void 0;Me?Qe=ue.id:this.options.generateId?Qe=ue.index:this.points[ue.index].id&&(Qe=this.points[ue.index].id),Qe!==void 0&&(Ze.id=Qe),ce.features.push(Ze)}},Dt.prototype._limitZoom=function(z){return Math.max(this.options.minZoom,Math.min(+z,this.options.maxZoom+1))},Dt.prototype._cluster=function(z,F){for(var V=[],X=this.options,re=X.reduce,ce=X.minPoints,de=X.radius/(X.extent*Math.pow(2,F)),Z=0;Z<z.length;Z++){var ue=z[Z];if(!(ue.zoom<=F)){ue.zoom=F;for(var Me=this.trees[F+1],Ze=Me.within(ue.x,ue.y,de),Qe=ue.numPoints||1,je=Qe,Xe=0,xt=Ze;Xe<xt.length;Xe+=1){var vt=Me.points[xt[Xe]];vt.zoom>F&&(je+=vt.numPoints||1)}if(je>=ce){for(var Ve=ue.x*Qe,ft=ue.y*Qe,it=re&&Qe>1?this._map(ue,!0):null,at=(Z<<5)+(F+1)+this.points.length,rr=0,pt=Ze;rr<pt.length;rr+=1){var gr=Me.points[pt[rr]];if(!(gr.zoom<=F)){gr.zoom=F;var $r=gr.numPoints||1;Ve+=gr.x*$r,ft+=gr.y*$r,gr.parentId=at,re&&(it||(it=this._map(ue,!0)),re(it,this._map(gr)))}}ue.parentId=at,V.push(Ht(Ve/je,ft/je,at,je,it))}else if(V.push(ue),je>1)for(var lr=0,Pr=Ze;lr<Pr.length;lr+=1){var _r=Me.points[Pr[lr]];_r.zoom<=F||(_r.zoom=F,V.push(_r))}}}return V},Dt.prototype._getOriginId=function(z){return z-this.points.length>>5},Dt.prototype._getOriginZoom=function(z){return(z-this.points.length)%32},Dt.prototype._map=function(z,F){if(z.numPoints)return F?Gt({},z.properties):z.properties;var V=this.points[z.index].properties,X=this.options.map(V);return F&&X===V?Gt({},X):X},tr.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},tr.prototype.splitTile=function(z,F,V,X,re,ce,de){for(var Z=[z,F,V,X],ue=this.options,Me=ue.debug;Z.length;){X=Z.pop(),V=Z.pop(),F=Z.pop(),z=Z.pop();var Ze=1<<F,Qe=Qt(F,V,X),je=this.tiles[Qe];if(!je&&(Me>1&&console.time("creation"),je=this.tiles[Qe]=Ke(z,F,V,X,ue),this.tileCoords.push({z:F,x:V,y:X}),Me)){Me>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",F,V,X,je.numFeatures,je.numPoints,je.numSimplified),console.timeEnd("creation"));var Xe="z"+F;this.stats[Xe]=(this.stats[Xe]||0)+1,this.total++}if(je.source=z,re){if(F===ue.maxZoom||F===re)continue;var xt=1<<re-F;if(V!==Math.floor(ce/xt)||X!==Math.floor(de/xt))continue}else if(F===ue.indexMaxZoom||je.numPoints<=ue.indexMaxPoints)continue;if(je.source=null,z.length!==0){Me>1&&console.time("clipping");var vt,Ve,ft,it,at,rr,pt=.5*ue.buffer/ue.extent,gr=.5-pt,$r=.5+pt,lr=1+pt;vt=Ve=ft=it=null,at=xn(z,Ze,V-pt,V+$r,0,je.minX,je.maxX,ue),rr=xn(z,Ze,V+gr,V+lr,0,je.minX,je.maxX,ue),z=null,at&&(vt=xn(at,Ze,X-pt,X+$r,1,je.minY,je.maxY,ue),Ve=xn(at,Ze,X+gr,X+lr,1,je.minY,je.maxY,ue),at=null),rr&&(ft=xn(rr,Ze,X-pt,X+$r,1,je.minY,je.maxY,ue),it=xn(rr,Ze,X+gr,X+lr,1,je.minY,je.maxY,ue),rr=null),Me>1&&console.timeEnd("clipping"),Z.push(vt||[],F+1,2*V,2*X),Z.push(Ve||[],F+1,2*V,2*X+1),Z.push(ft||[],F+1,2*V+1,2*X),Z.push(it||[],F+1,2*V+1,2*X+1)}}},tr.prototype.getTile=function(z,F,V){var X=this.options,re=X.extent,ce=X.debug;if(z<0||z>24)return null;var de=1<<z,Z=Qt(z,F=(F%de+de)%de,V);if(this.tiles[Z])return Mt(this.tiles[Z],re);ce>1&&console.log("drilling down to z%d-%d-%d",z,F,V);for(var ue,Me=z,Ze=F,Qe=V;!ue&&Me>0;)Me--,Ze=Math.floor(Ze/2),Qe=Math.floor(Qe/2),ue=this.tiles[Qt(Me,Ze,Qe)];return ue&&ue.source?(ce>1&&console.log("found parent tile z%d-%d-%d",Me,Ze,Qe),ce>1&&console.time("drilling down"),this.splitTile(ue.source,Me,Ze,Qe,z,F,V),ce>1&&console.timeEnd("drilling down"),this.tiles[Z]?Mt(this.tiles[Z],re):null):null};var Sr=function(z){function F(V,X,re,ce){z.call(this,V,X,re,yr),ce&&(this.loadGeoJSON=ce)}return z&&(F.__proto__=z),(F.prototype=Object.create(z&&z.prototype)).constructor=F,F.prototype.loadData=function(V,X){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=X,this._pendingLoadDataParams=V,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},F.prototype._loadData=function(){var V=this;if(this._pendingCallback&&this._pendingLoadDataParams){var X=this._pendingCallback,re=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var ce=!!(re&&re.request&&re.request.collectResourceTiming)&&new o.RequestPerformance(re.request);this.loadGeoJSON(re,function(de,Z){if(de||!Z)return X(de);if(typeof Z!="object")return X(new Error("Input data given to '"+re.source+"' is not a valid GeoJSON object."));(function je(Xe,xt){var vt,Ve=Xe&&Xe.type;if(Ve==="FeatureCollection")for(vt=0;vt<Xe.features.length;vt++)je(Xe.features[vt],xt);else if(Ve==="GeometryCollection")for(vt=0;vt<Xe.geometries.length;vt++)je(Xe.geometries[vt],xt);else if(Ve==="Feature")je(Xe.geometry,xt);else if(Ve==="Polygon")U(Xe.coordinates,xt);else if(Ve==="MultiPolygon")for(vt=0;vt<Xe.coordinates.length;vt++)U(Xe.coordinates[vt],xt);return Xe})(Z,!0);try{if(re.filter){var ue=o.createExpression(re.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ue.result==="error")throw new Error(ue.value.map(function(je){return je.key+": "+je.message}).join(", "));var Me=Z.features.filter(function(je){return ue.value.evaluate({zoom:0},je)});Z={type:"FeatureCollection",features:Me}}V._geoJSONIndex=re.cluster?new Dt(function(je){var Xe=je.superclusterOptions,xt=je.clusterProperties;if(!xt||!Xe)return Xe;for(var vt={},Ve={},ft={accumulated:null,zoom:0},it={properties:null},at=Object.keys(xt),rr=0,pt=at;rr<pt.length;rr+=1){var gr=pt[rr],$r=xt[gr],lr=$r[0],Pr=o.createExpression($r[1]),_r=o.createExpression(typeof lr=="string"?[lr,["accumulated"],["get",gr]]:lr);vt[gr]=Pr.value,Ve[gr]=_r.value}return Xe.map=function(yi){it.properties=yi;for(var Lr={},bn=0,jr=at;bn<jr.length;bn+=1){var dr=jr[bn];Lr[dr]=vt[dr].evaluate(ft,it)}return Lr},Xe.reduce=function(yi,Lr){it.properties=Lr;for(var bn=0,jr=at;bn<jr.length;bn+=1){var dr=jr[bn];ft.accumulated=yi[dr],yi[dr]=Ve[dr].evaluate(ft,it)}},Xe}(re)).load(Z.features):function(je,Xe){return new tr(je,Xe)}(Z,re.geojsonVtOptions)}catch(je){return X(je)}V.loaded={};var Ze={};if(ce){var Qe=ce.finish();Qe&&(Ze.resourceTiming={},Ze.resourceTiming[re.source]=JSON.parse(JSON.stringify(Qe)))}X(null,Ze)})}},F.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},F.prototype.reloadTile=function(V,X){var re=this.loaded;return re&&re[V.uid]?z.prototype.reloadTile.call(this,V,X):this.loadTile(V,X)},F.prototype.loadGeoJSON=function(V,X){if(V.request)o.getJSON(V.request,X);else{if(typeof V.data!="string")return X(new Error("Input data given to '"+V.source+"' is not a valid GeoJSON object."));try{return X(null,JSON.parse(V.data))}catch{return X(new Error("Input data given to '"+V.source+"' is not a valid GeoJSON object."))}}},F.prototype.removeSource=function(V,X){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),X()},F.prototype.getClusterExpansionZoom=function(V,X){try{X(null,this._geoJSONIndex.getClusterExpansionZoom(V.clusterId))}catch(re){X(re)}},F.prototype.getClusterChildren=function(V,X){try{X(null,this._geoJSONIndex.getChildren(V.clusterId))}catch(re){X(re)}},F.prototype.getClusterLeaves=function(V,X){try{X(null,this._geoJSONIndex.getLeaves(V.clusterId,V.limit,V.offset))}catch(re){X(re)}},F}($),pr=function(z){var F=this;this.self=z,this.actor=new o.Actor(z,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:$,geojson:Sr},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(V,X){if(F.workerSourceTypes[V])throw new Error('Worker source with name "'+V+'" already registered.');F.workerSourceTypes[V]=X},this.self.registerRTLTextPlugin=function(V){if(o.plugin.isParsed())throw new Error("RTL text plugin already registered.");o.plugin.applyArabicShaping=V.applyArabicShaping,o.plugin.processBidirectionalText=V.processBidirectionalText,o.plugin.processStyledBidirectionalText=V.processStyledBidirectionalText}};return pr.prototype.setReferrer=function(z,F){this.referrer=F},pr.prototype.setImages=function(z,F,V){for(var X in this.availableImages[z]=F,this.workerSources[z]){var re=this.workerSources[z][X];for(var ce in re)re[ce].availableImages=F}V()},pr.prototype.setLayers=function(z,F,V){this.getLayerIndex(z).replace(F),V()},pr.prototype.updateLayers=function(z,F,V){this.getLayerIndex(z).update(F.layers,F.removedIds),V()},pr.prototype.loadTile=function(z,F,V){this.getWorkerSource(z,F.type,F.source).loadTile(F,V)},pr.prototype.loadDEMTile=function(z,F,V){this.getDEMWorkerSource(z,F.source).loadTile(F,V)},pr.prototype.reloadTile=function(z,F,V){this.getWorkerSource(z,F.type,F.source).reloadTile(F,V)},pr.prototype.abortTile=function(z,F,V){this.getWorkerSource(z,F.type,F.source).abortTile(F,V)},pr.prototype.removeTile=function(z,F,V){this.getWorkerSource(z,F.type,F.source).removeTile(F,V)},pr.prototype.removeDEMTile=function(z,F){this.getDEMWorkerSource(z,F.source).removeTile(F)},pr.prototype.removeSource=function(z,F,V){if(this.workerSources[z]&&this.workerSources[z][F.type]&&this.workerSources[z][F.type][F.source]){var X=this.workerSources[z][F.type][F.source];delete this.workerSources[z][F.type][F.source],X.removeSource!==void 0?X.removeSource(F,V):V()}},pr.prototype.loadWorkerSource=function(z,F,V){try{this.self.importScripts(F.url),V()}catch(X){V(X.toString())}},pr.prototype.syncRTLPluginState=function(z,F,V){try{o.plugin.setState(F);var X=o.plugin.getPluginURL();if(o.plugin.isLoaded()&&!o.plugin.isParsed()&&X!=null){this.self.importScripts(X);var re=o.plugin.isParsed();V(re?void 0:new Error("RTL Text Plugin failed to import scripts from "+X),re)}}catch(ce){V(ce.toString())}},pr.prototype.getAvailableImages=function(z){var F=this.availableImages[z];return F||(F=[]),F},pr.prototype.getLayerIndex=function(z){var F=this.layerIndexes[z];return F||(F=this.layerIndexes[z]=new E),F},pr.prototype.getWorkerSource=function(z,F,V){var X=this;return this.workerSources[z]||(this.workerSources[z]={}),this.workerSources[z][F]||(this.workerSources[z][F]={}),this.workerSources[z][F][V]||(this.workerSources[z][F][V]=new this.workerSourceTypes[F]({send:function(re,ce,de){X.actor.send(re,ce,de,z)}},this.getLayerIndex(z),this.getAvailableImages(z))),this.workerSources[z][F][V]},pr.prototype.getDEMWorkerSource=function(z,F){return this.demWorkerSources[z]||(this.demWorkerSources[z]={}),this.demWorkerSources[z][F]||(this.demWorkerSources[z][F]=new D),this.demWorkerSources[z][F]},pr.prototype.enforceCacheSizeLimit=function(z,F){o.enforceCacheSizeLimit(F)},typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new pr(self)),pr}),d(["./shared"],function(o){var v=o.createCommonjsModule(function(l){function p(g){return!u(g)}function u(g){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var w,S,M=new Blob([""],{type:"text/javascript"}),B=URL.createObjectURL(M);try{S=new Worker(B),w=!0}catch{w=!1}return S&&S.terminate(),URL.revokeObjectURL(B),w}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var w=document.createElement("canvas");w.width=w.height=1;var S=w.getContext("2d");if(!S)return!1;var M=S.getImageData(0,0,1,1);return M&&M.width===w.width}()?(f[b=g&&g.failIfMajorPerformanceCaveat]===void 0&&(f[b]=function(w){var S=function(B){var K=document.createElement("canvas"),Q=Object.create(p.webGLContextAttributes);return Q.failIfMajorPerformanceCaveat=B,K.probablySupportsContext?K.probablySupportsContext("webgl",Q)||K.probablySupportsContext("experimental-webgl",Q):K.supportsContext?K.supportsContext("webgl",Q)||K.supportsContext("experimental-webgl",Q):K.getContext("webgl",Q)||K.getContext("experimental-webgl",Q)}(w);if(!S)return!1;var M=S.createShader(S.VERTEX_SHADER);return!(!M||S.isContextLost())&&(S.shaderSource(M,"void main() {}"),S.compileShader(M),S.getShaderParameter(M,S.COMPILE_STATUS)===!0)}(b)),f[b]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var b}l.exports?l.exports=p:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=p,window.mapboxgl.notSupportedReason=u);var f={};p.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),x={create:function(l,p,u){var f=o.window.document.createElement(l);return p!==void 0&&(f.className=p),u&&u.appendChild(f),f},createNS:function(l,p){return o.window.document.createElementNS(l,p)}},E=o.window.document&&o.window.document.documentElement.style;function k(l){if(!E)return l[0];for(var p=0;p<l.length;p++)if(l[p]in E)return l[p];return l[0]}var P,T=k(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);x.disableDrag=function(){E&&T&&(P=E[T],E[T]="none")},x.enableDrag=function(){E&&T&&(E[T]=P)};var W=k(["transform","WebkitTransform"]);x.setTransform=function(l,p){l.style[W]=p};var $=!1;try{var H=Object.defineProperty({},"passive",{get:function(){$=!0}});o.window.addEventListener("test",H,H),o.window.removeEventListener("test",H,H)}catch{$=!1}x.addEventListener=function(l,p,u,f){f===void 0&&(f={}),l.addEventListener(p,u,"passive"in f&&$?f:f.capture)},x.removeEventListener=function(l,p,u,f){f===void 0&&(f={}),l.removeEventListener(p,u,"passive"in f&&$?f:f.capture)};var D=function(l){l.preventDefault(),l.stopPropagation(),o.window.removeEventListener("click",D,!0)};function U(l){var p=l.userImage;return!!(p&&p.render&&p.render())&&(l.data.replace(new Uint8Array(p.data.buffer)),!0)}x.suppressClick=function(){o.window.addEventListener("click",D,!0),o.window.setTimeout(function(){o.window.removeEventListener("click",D,!0)},0)},x.mousePos=function(l,p){var u=l.getBoundingClientRect();return new o.Point(p.clientX-u.left-l.clientLeft,p.clientY-u.top-l.clientTop)},x.touchPos=function(l,p){for(var u=l.getBoundingClientRect(),f=[],g=0;g<p.length;g++)f.push(new o.Point(p[g].clientX-u.left-l.clientLeft,p[g].clientY-u.top-l.clientTop));return f},x.mouseButton=function(l){return o.window.InstallTrigger!==void 0&&l.button===2&&l.ctrlKey&&o.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:l.button},x.remove=function(l){l.parentNode&&l.parentNode.removeChild(l)};var q=function(l){function p(){l.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.RGBAImage({width:1,height:1}),this.dirty=!0}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.isLoaded=function(){return this.loaded},p.prototype.setLoaded=function(u){if(this.loaded!==u&&(this.loaded=u,u)){for(var f=0,g=this.requestors;f<g.length;f+=1){var b=g[f];this._notify(b.ids,b.callback)}this.requestors=[]}},p.prototype.getImage=function(u){return this.images[u]},p.prototype.addImage=function(u,f){this._validate(u,f)&&(this.images[u]=f)},p.prototype._validate=function(u,f){var g=!0;return this._validateStretch(f.stretchX,f.data&&f.data.width)||(this.fire(new o.ErrorEvent(new Error('Image "'+u+'" has invalid "stretchX" value'))),g=!1),this._validateStretch(f.stretchY,f.data&&f.data.height)||(this.fire(new o.ErrorEvent(new Error('Image "'+u+'" has invalid "stretchY" value'))),g=!1),this._validateContent(f.content,f)||(this.fire(new o.ErrorEvent(new Error('Image "'+u+'" has invalid "content" value'))),g=!1),g},p.prototype._validateStretch=function(u,f){if(!u)return!0;for(var g=0,b=0,w=u;b<w.length;b+=1){var S=w[b];if(S[0]<g||S[1]<S[0]||f<S[1])return!1;g=S[1]}return!0},p.prototype._validateContent=function(u,f){return!(u&&(u.length!==4||u[0]<0||f.data.width<u[0]||u[1]<0||f.data.height<u[1]||u[2]<0||f.data.width<u[2]||u[3]<0||f.data.height<u[3]||u[2]<u[0]||u[3]<u[1]))},p.prototype.updateImage=function(u,f){f.version=this.images[u].version+1,this.images[u]=f,this.updatedImages[u]=!0},p.prototype.removeImage=function(u){var f=this.images[u];delete this.images[u],delete this.patterns[u],f.userImage&&f.userImage.onRemove&&f.userImage.onRemove()},p.prototype.listImages=function(){return Object.keys(this.images)},p.prototype.getImages=function(u,f){var g=!0;if(!this.isLoaded())for(var b=0,w=u;b<w.length;b+=1)this.images[w[b]]||(g=!1);this.isLoaded()||g?this._notify(u,f):this.requestors.push({ids:u,callback:f})},p.prototype._notify=function(u,f){for(var g={},b=0,w=u;b<w.length;b+=1){var S=w[b];this.images[S]||this.fire(new o.Event("styleimagemissing",{id:S}));var M=this.images[S];M?g[S]={data:M.data.clone(),pixelRatio:M.pixelRatio,sdf:M.sdf,version:M.version,stretchX:M.stretchX,stretchY:M.stretchY,content:M.content,hasRenderCallback:!!(M.userImage&&M.userImage.render)}:o.warnOnce('Image "'+S+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}f(null,g)},p.prototype.getPixelSize=function(){var u=this.atlasImage;return{width:u.width,height:u.height}},p.prototype.getPattern=function(u){var f=this.patterns[u],g=this.getImage(u);if(!g)return null;if(f&&f.position.version===g.version)return f.position;if(f)f.position.version=g.version;else{var b={w:g.data.width+2,h:g.data.height+2,x:0,y:0},w=new o.ImagePosition(b,g);this.patterns[u]={bin:b,position:w}}return this._updatePatternAtlas(),this.patterns[u].position},p.prototype.bind=function(u){var f=u.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new o.Texture(u,this.atlasImage,f.RGBA),this.atlasTexture.bind(f.LINEAR,f.CLAMP_TO_EDGE)},p.prototype._updatePatternAtlas=function(){var u=[];for(var f in this.patterns)u.push(this.patterns[f].bin);var g=o.potpack(u),b=g.w,w=g.h,S=this.atlasImage;for(var M in S.resize({width:b||1,height:w||1}),this.patterns){var B=this.patterns[M].bin,K=B.x+1,Q=B.y+1,J=this.images[M].data,le=J.width,se=J.height;o.RGBAImage.copy(J,S,{x:0,y:0},{x:K,y:Q},{width:le,height:se}),o.RGBAImage.copy(J,S,{x:0,y:se-1},{x:K,y:Q-1},{width:le,height:1}),o.RGBAImage.copy(J,S,{x:0,y:0},{x:K,y:Q+se},{width:le,height:1}),o.RGBAImage.copy(J,S,{x:le-1,y:0},{x:K-1,y:Q},{width:1,height:se}),o.RGBAImage.copy(J,S,{x:0,y:0},{x:K+le,y:Q},{width:1,height:se})}this.dirty=!0},p.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},p.prototype.dispatchRenderCallbacks=function(u){for(var f=0,g=u;f<g.length;f+=1){var b=g[f];if(!this.callbackDispatchedThisFrame[b]){this.callbackDispatchedThisFrame[b]=!0;var w=this.images[b];U(w)&&this.updateImage(b,w)}}},p}(o.Evented),N=ne,O=ne,te=1e20;function ne(l,p,u,f,g,b){this.fontSize=l||24,this.buffer=p===void 0?3:p,this.cutoff=f||.25,this.fontFamily=g||"sans-serif",this.fontWeight=b||"normal",this.radius=u||8;var w=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=w,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(w*w),this.gridInner=new Float64Array(w*w),this.f=new Float64Array(w),this.d=new Float64Array(w),this.z=new Float64Array(w+1),this.v=new Int16Array(w),this.middle=Math.round(w/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function fe(l,p,u,f,g,b,w){for(var S=0;S<p;S++){for(var M=0;M<u;M++)f[M]=l[M*p+S];for(xe(f,g,b,w,u),M=0;M<u;M++)l[M*p+S]=g[M]}for(M=0;M<u;M++){for(S=0;S<p;S++)f[S]=l[M*p+S];for(xe(f,g,b,w,p),S=0;S<p;S++)l[M*p+S]=Math.sqrt(g[S])}}function xe(l,p,u,f,g){u[0]=0,f[0]=-te,f[1]=+te;for(var b=1,w=0;b<g;b++){for(var S=(l[b]+b*b-(l[u[w]]+u[w]*u[w]))/(2*b-2*u[w]);S<=f[w];)w--,S=(l[b]+b*b-(l[u[w]]+u[w]*u[w]))/(2*b-2*u[w]);u[++w]=b,f[w]=S,f[w+1]=+te}for(b=0,w=0;b<g;b++){for(;f[w+1]<b;)w++;p[b]=(b-u[w])*(b-u[w])+l[u[w]]}}ne.prototype.draw=function(l){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(l,this.buffer,this.middle);for(var p=this.ctx.getImageData(0,0,this.size,this.size),u=new Uint8ClampedArray(this.size*this.size),f=0;f<this.size*this.size;f++){var g=p.data[4*f+3]/255;this.gridOuter[f]=g===1?0:g===0?te:Math.pow(Math.max(0,.5-g),2),this.gridInner[f]=g===1?te:g===0?0:Math.pow(Math.max(0,g-.5),2)}for(fe(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),fe(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),f=0;f<this.size*this.size;f++)u[f]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[f]-this.gridInner[f])/this.radius+this.cutoff))));return u},N.default=O;var Te=function(l,p){this.requestManager=l,this.localIdeographFontFamily=p,this.entries={}};Te.prototype.setURL=function(l){this.url=l},Te.prototype.getGlyphs=function(l,p){var u=this,f=[];for(var g in l)for(var b=0,w=l[g];b<w.length;b+=1)f.push({stack:g,id:w[b]});o.asyncAll(f,function(S,M){var B=S.stack,K=S.id,Q=u.entries[B];Q||(Q=u.entries[B]={glyphs:{},requests:{},ranges:{}});var J=Q.glyphs[K];if(J===void 0){if(J=u._tinySDF(Q,B,K))return Q.glyphs[K]=J,void M(null,{stack:B,id:K,glyph:J});var le=Math.floor(K/256);if(256*le>65535)M(new Error("glyphs > 65535 not supported"));else if(Q.ranges[le])M(null,{stack:B,id:K,glyph:J});else{var se=Q.requests[le];se||(se=Q.requests[le]=[],Te.loadGlyphRange(B,le,u.url,u.requestManager,function(ye,ie){if(ie){for(var me in ie)u._doesCharSupportLocalGlyph(+me)||(Q.glyphs[+me]=ie[+me]);Q.ranges[le]=!0}for(var _e=0,Pe=se;_e<Pe.length;_e+=1)(0,Pe[_e])(ye,ie);delete Q.requests[le]})),se.push(function(ye,ie){ye?M(ye):ie&&M(null,{stack:B,id:K,glyph:ie[K]||null})})}}else M(null,{stack:B,id:K,glyph:J})},function(S,M){if(S)p(S);else if(M){for(var B={},K=0,Q=M;K<Q.length;K+=1){var J=Q[K],le=J.stack,se=J.id,ye=J.glyph;(B[le]||(B[le]={}))[se]=ye&&{id:ye.id,bitmap:ye.bitmap.clone(),metrics:ye.metrics}}p(null,B)}})},Te.prototype._doesCharSupportLocalGlyph=function(l){return!!this.localIdeographFontFamily&&(o.isChar["CJK Unified Ideographs"](l)||o.isChar["Hangul Syllables"](l)||o.isChar.Hiragana(l)||o.isChar.Katakana(l))},Te.prototype._tinySDF=function(l,p,u){var f=this.localIdeographFontFamily;if(f&&this._doesCharSupportLocalGlyph(u)){var g=l.tinySDF;if(!g){var b="400";/bold/i.test(p)?b="900":/medium/i.test(p)?b="500":/light/i.test(p)&&(b="200"),g=l.tinySDF=new Te.TinySDF(24,3,8,.25,f,b)}return{id:u,bitmap:new o.AlphaImage({width:30,height:30},g.draw(String.fromCharCode(u))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},Te.loadGlyphRange=function(l,p,u,f,g){var b=256*p,w=b+255,S=f.transformRequest(f.normalizeGlyphsURL(u).replace("{fontstack}",l).replace("{range}",b+"-"+w),o.ResourceType.Glyphs);o.getArrayBuffer(S,function(M,B){if(M)g(M);else if(B){for(var K={},Q=0,J=o.parseGlyphPBF(B);Q<J.length;Q+=1){var le=J[Q];K[le.id]=le}g(null,K)}})},Te.TinySDF=N;var ve=function(){this.specification=o.styleSpec.light.position};ve.prototype.possiblyEvaluate=function(l,p){return o.sphericalToCartesian(l.expression.evaluate(p))},ve.prototype.interpolate=function(l,p,u){return{x:o.number(l.x,p.x,u),y:o.number(l.y,p.y,u),z:o.number(l.z,p.z,u)}};var Ee=new o.Properties({anchor:new o.DataConstantProperty(o.styleSpec.light.anchor),position:new ve,color:new o.DataConstantProperty(o.styleSpec.light.color),intensity:new o.DataConstantProperty(o.styleSpec.light.intensity)}),Y=function(l){function p(u){l.call(this),this._transitionable=new o.Transitionable(Ee),this.setLight(u),this._transitioning=this._transitionable.untransitioned()}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getLight=function(){return this._transitionable.serialize()},p.prototype.setLight=function(u,f){if(f===void 0&&(f={}),!this._validate(o.validateLight,u,f))for(var g in u){var b=u[g];o.endsWith(g,"-transition")?this._transitionable.setTransition(g.slice(0,-11),b):this._transitionable.setValue(g,b)}},p.prototype.updateTransitions=function(u){this._transitioning=this._transitionable.transitioned(u,this._transitioning)},p.prototype.hasTransition=function(){return this._transitioning.hasTransition()},p.prototype.recalculate=function(u){this.properties=this._transitioning.possiblyEvaluate(u)},p.prototype._validate=function(u,f,g){return(!g||g.validate!==!1)&&o.emitValidationErrors(this,u.call(o.validateStyle,o.extend({value:f,style:{glyphs:!0,sprite:!0},styleSpec:o.styleSpec})))},p}(o.Evented),he=function(l,p){this.width=l,this.height=p,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};he.prototype.getDash=function(l,p){var u=l.join(",")+String(p);return this.dashEntry[u]||(this.dashEntry[u]=this.addDash(l,p)),this.dashEntry[u]},he.prototype.getDashRanges=function(l,p,u){var f=[],g=l.length%2==1?-l[l.length-1]*u:0,b=l[0]*u,w=!0;f.push({left:g,right:b,isDash:w,zeroLength:l[0]===0});for(var S=l[0],M=1;M<l.length;M++){var B=l[M];f.push({left:g=S*u,right:b=(S+=B)*u,isDash:w=!w,zeroLength:B===0})}return f},he.prototype.addRoundDash=function(l,p,u){for(var f=p/2,g=-u;g<=u;g++)for(var b=this.width*(this.nextRow+u+g),w=0,S=l[w],M=0;M<this.width;M++){M/S.right>1&&(S=l[++w]);var B=Math.abs(M-S.left),K=Math.abs(M-S.right),Q=Math.min(B,K),J=void 0,le=g/u*(f+1);if(S.isDash){var se=f-Math.abs(le);J=Math.sqrt(Q*Q+se*se)}else J=f-Math.sqrt(Q*Q+le*le);this.data[b+M]=Math.max(0,Math.min(255,J+128))}},he.prototype.addRegularDash=function(l){for(var p=l.length-1;p>=0;--p){var u=l[p],f=l[p+1];u.zeroLength?l.splice(p,1):f&&f.isDash===u.isDash&&(f.left=u.left,l.splice(p,1))}var g=l[0],b=l[l.length-1];g.isDash===b.isDash&&(g.left=b.left-this.width,b.right=g.right+this.width);for(var w=this.width*this.nextRow,S=0,M=l[S],B=0;B<this.width;B++){B/M.right>1&&(M=l[++S]);var K=Math.abs(B-M.left),Q=Math.abs(B-M.right),J=Math.min(K,Q);this.data[w+B]=Math.max(0,Math.min(255,(M.isDash?J:-J)+128))}},he.prototype.addDash=function(l,p){var u=p?7:0,f=2*u+1;if(this.nextRow+f>this.height)return o.warnOnce("LineAtlas out of space"),null;for(var g=0,b=0;b<l.length;b++)g+=l[b];if(g!==0){var w=this.width/g,S=this.getDashRanges(l,this.width,w);p?this.addRoundDash(S,w,u):this.addRegularDash(S)}var M={y:(this.nextRow+u+.5)/this.height,height:2*u/this.height,width:g};return this.nextRow+=f,this.dirty=!0,M},he.prototype.bind=function(l){var p=l.gl;this.texture?(p.bindTexture(p.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,p.texSubImage2D(p.TEXTURE_2D,0,0,0,this.width,this.height,p.ALPHA,p.UNSIGNED_BYTE,this.data))):(this.texture=p.createTexture(),p.bindTexture(p.TEXTURE_2D,this.texture),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.REPEAT),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.REPEAT),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.LINEAR),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.LINEAR),p.texImage2D(p.TEXTURE_2D,0,p.ALPHA,this.width,this.height,0,p.ALPHA,p.UNSIGNED_BYTE,this.data))};var Ne=function l(p,u){this.workerPool=p,this.actors=[],this.currentActor=0,this.id=o.uniqueId();for(var f=this.workerPool.acquire(this.id),g=0;g<f.length;g++){var b=new l.Actor(f[g],u,this.id);b.name="Worker "+g,this.actors.push(b)}};function We(l,p,u){var f=function(g,b){if(g)return u(g);if(b){var w=o.pick(o.extend(b,l),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);b.vector_layers&&(w.vectorLayers=b.vector_layers,w.vectorLayerIds=w.vectorLayers.map(function(S){return S.id})),w.tiles=p.canonicalizeTileset(w,l.url),u(null,w)}};return l.url?o.getJSON(p.transformRequest(p.normalizeSourceURL(l.url),o.ResourceType.Source),f):o.browser.frame(function(){return f(null,l)})}Ne.prototype.broadcast=function(l,p,u){o.asyncAll(this.actors,function(f,g){f.send(l,p,g)},u=u||function(){})},Ne.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},Ne.prototype.remove=function(){this.actors.forEach(function(l){l.remove()}),this.actors=[],this.workerPool.release(this.id)},Ne.Actor=o.Actor;var we=function(l,p,u){this.bounds=o.LngLatBounds.convert(this.validateBounds(l)),this.minzoom=p||0,this.maxzoom=u||24};we.prototype.validateBounds=function(l){return Array.isArray(l)&&l.length===4?[Math.max(-180,l[0]),Math.max(-90,l[1]),Math.min(180,l[2]),Math.min(90,l[3])]:[-180,-90,180,90]},we.prototype.contains=function(l){var p=Math.pow(2,l.z),u=Math.floor(o.mercatorXfromLng(this.bounds.getWest())*p),f=Math.floor(o.mercatorYfromLat(this.bounds.getNorth())*p),g=Math.ceil(o.mercatorXfromLng(this.bounds.getEast())*p),b=Math.ceil(o.mercatorYfromLat(this.bounds.getSouth())*p);return l.x>=u&&l.x<g&&l.y>=f&&l.y<b};var be=function(l){function p(u,f,g,b){if(l.call(this),this.id=u,this.dispatcher=g,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.extend(this,o.pick(f,["url","scheme","tileSize","promoteId"])),this._options=o.extend({type:"vector"},f),this._collectResourceTiming=f.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(b)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.load=function(){var u=this;this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=We(this._options,this.map._requestManager,function(f,g){u._tileJSONRequest=null,u._loaded=!0,f?u.fire(new o.ErrorEvent(f)):g&&(o.extend(u,g),g.bounds&&(u.tileBounds=new we(g.bounds,u.minzoom,u.maxzoom)),o.postTurnstileEvent(g.tiles,u.map._requestManager._customAccessToken),o.postMapLoadEvent(g.tiles,u.map._getMapId(),u.map._requestManager._skuToken,u.map._requestManager._customAccessToken),u.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),u.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})))})},p.prototype.loaded=function(){return this._loaded},p.prototype.hasTile=function(u){return!this.tileBounds||this.tileBounds.contains(u.canonical)},p.prototype.onAdd=function(u){this.map=u,this.load()},p.prototype.setSourceProperty=function(u){this._tileJSONRequest&&this._tileJSONRequest.cancel(),u(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},p.prototype.setTiles=function(u){var f=this;return this.setSourceProperty(function(){f._options.tiles=u}),this},p.prototype.setUrl=function(u){var f=this;return this.setSourceProperty(function(){f.url=u,f._options.url=u}),this},p.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},p.prototype.serialize=function(){return o.extend({},this._options)},p.prototype.loadTile=function(u,f){var g=this.map._requestManager.normalizeTileURL(u.tileID.canonical.url(this.tiles,this.scheme)),b={request:this.map._requestManager.transformRequest(g,o.ResourceType.Tile),uid:u.uid,tileID:u.tileID,zoom:u.tileID.overscaledZ,tileSize:this.tileSize*u.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:o.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function w(S,M){return delete u.request,u.aborted?f(null):S&&S.status!==404?f(S):(M&&M.resourceTiming&&(u.resourceTiming=M.resourceTiming),this.map._refreshExpiredTiles&&M&&u.setExpiryData(M),u.loadVectorData(M,this.map.painter),o.cacheEntryPossiblyAdded(this.dispatcher),f(null),void(u.reloadCallback&&(this.loadTile(u,u.reloadCallback),u.reloadCallback=null)))}b.request.collectResourceTiming=this._collectResourceTiming,u.actor&&u.state!=="expired"?u.state==="loading"?u.reloadCallback=f:u.request=u.actor.send("reloadTile",b,w.bind(this)):(u.actor=this.dispatcher.getActor(),u.request=u.actor.send("loadTile",b,w.bind(this)))},p.prototype.abortTile=function(u){u.request&&(u.request.cancel(),delete u.request),u.actor&&u.actor.send("abortTile",{uid:u.uid,type:this.type,source:this.id},void 0)},p.prototype.unloadTile=function(u){u.unloadVectorData(),u.actor&&u.actor.send("removeTile",{uid:u.uid,type:this.type,source:this.id},void 0)},p.prototype.hasTransition=function(){return!1},p}(o.Evented),$e=function(l){function p(u,f,g,b){l.call(this),this.id=u,this.dispatcher=g,this.setEventedParent(b),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.extend({type:"raster"},f),o.extend(this,o.pick(f,["url","scheme","tileSize"]))}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.load=function(){var u=this;this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=We(this._options,this.map._requestManager,function(f,g){u._tileJSONRequest=null,u._loaded=!0,f?u.fire(new o.ErrorEvent(f)):g&&(o.extend(u,g),g.bounds&&(u.tileBounds=new we(g.bounds,u.minzoom,u.maxzoom)),o.postTurnstileEvent(g.tiles),o.postMapLoadEvent(g.tiles,u.map._getMapId(),u.map._requestManager._skuToken),u.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),u.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})))})},p.prototype.loaded=function(){return this._loaded},p.prototype.onAdd=function(u){this.map=u,this.load()},p.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},p.prototype.serialize=function(){return o.extend({},this._options)},p.prototype.hasTile=function(u){return!this.tileBounds||this.tileBounds.contains(u.canonical)},p.prototype.loadTile=function(u,f){var g=this,b=this.map._requestManager.normalizeTileURL(u.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);u.request=o.getImage(this.map._requestManager.transformRequest(b,o.ResourceType.Tile),function(w,S){if(delete u.request,u.aborted)u.state="unloaded",f(null);else if(w)u.state="errored",f(w);else if(S){g.map._refreshExpiredTiles&&u.setExpiryData(S),delete S.cacheControl,delete S.expires;var M=g.map.painter.context,B=M.gl;u.texture=g.map.painter.getTileTexture(S.width),u.texture?u.texture.update(S,{useMipmap:!0}):(u.texture=new o.Texture(M,S,B.RGBA,{useMipmap:!0}),u.texture.bind(B.LINEAR,B.CLAMP_TO_EDGE,B.LINEAR_MIPMAP_NEAREST),M.extTextureFilterAnisotropic&&B.texParameterf(B.TEXTURE_2D,M.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,M.extTextureFilterAnisotropicMax)),u.state="loaded",o.cacheEntryPossiblyAdded(g.dispatcher),f(null)}})},p.prototype.abortTile=function(u,f){u.request&&(u.request.cancel(),delete u.request),f()},p.prototype.unloadTile=function(u,f){u.texture&&this.map.painter.saveTileTexture(u.texture),f()},p.prototype.hasTransition=function(){return!1},p}(o.Evented),Le=function(l){function p(u,f,g,b){l.call(this,u,f,g,b),this.type="raster-dem",this.maxzoom=22,this._options=o.extend({type:"raster-dem"},f),this.encoding=f.encoding||"mapbox"}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},p.prototype.loadTile=function(u,f){var g=this.map._requestManager.normalizeTileURL(u.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function b(w,S){w&&(u.state="errored",f(w)),S&&(u.dem=S,u.needsHillshadePrepare=!0,u.state="loaded",f(null))}u.request=o.getImage(this.map._requestManager.transformRequest(g,o.ResourceType.Tile),function(w,S){if(delete u.request,u.aborted)u.state="unloaded",f(null);else if(w)u.state="errored",f(w);else if(S){this.map._refreshExpiredTiles&&u.setExpiryData(S),delete S.cacheControl,delete S.expires;var M=o.window.ImageBitmap&&S instanceof o.window.ImageBitmap&&o.offscreenCanvasSupported()?S:o.browser.getImageData(S,1),B={uid:u.uid,coord:u.tileID,source:this.id,rawImageData:M,encoding:this.encoding};u.actor&&u.state!=="expired"||(u.actor=this.dispatcher.getActor(),u.actor.send("loadDEMTile",B,b.bind(this)))}}.bind(this)),u.neighboringTiles=this._getNeighboringTiles(u.tileID)},p.prototype._getNeighboringTiles=function(u){var f=u.canonical,g=Math.pow(2,f.z),b=(f.x-1+g)%g,w=f.x===0?u.wrap-1:u.wrap,S=(f.x+1+g)%g,M=f.x+1===g?u.wrap+1:u.wrap,B={};return B[new o.OverscaledTileID(u.overscaledZ,w,f.z,b,f.y).key]={backfilled:!1},B[new o.OverscaledTileID(u.overscaledZ,M,f.z,S,f.y).key]={backfilled:!1},f.y>0&&(B[new o.OverscaledTileID(u.overscaledZ,w,f.z,b,f.y-1).key]={backfilled:!1},B[new o.OverscaledTileID(u.overscaledZ,u.wrap,f.z,f.x,f.y-1).key]={backfilled:!1},B[new o.OverscaledTileID(u.overscaledZ,M,f.z,S,f.y-1).key]={backfilled:!1}),f.y+1<g&&(B[new o.OverscaledTileID(u.overscaledZ,w,f.z,b,f.y+1).key]={backfilled:!1},B[new o.OverscaledTileID(u.overscaledZ,u.wrap,f.z,f.x,f.y+1).key]={backfilled:!1},B[new o.OverscaledTileID(u.overscaledZ,M,f.z,S,f.y+1).key]={backfilled:!1}),B},p.prototype.unloadTile=function(u){u.demTexture&&this.map.painter.saveTileTexture(u.demTexture),u.fbo&&(u.fbo.destroy(),delete u.fbo),u.dem&&delete u.dem,delete u.neighboringTiles,u.state="unloaded",u.actor&&u.actor.send("removeDEMTile",{uid:u.uid,source:this.id})},p}($e),St=function(l){function p(u,f,g,b){l.call(this),this.id=u,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=g.getActor(),this.setEventedParent(b),this._data=f.data,this._options=o.extend({},f),this._collectResourceTiming=f.collectResourceTiming,this._resourceTiming=[],f.maxzoom!==void 0&&(this.maxzoom=f.maxzoom),f.type&&(this.type=f.type),f.attribution&&(this.attribution=f.attribution),this.promoteId=f.promoteId;var w=o.EXTENT/this.tileSize;this.workerOptions=o.extend({source:this.id,cluster:f.cluster||!1,geojsonVtOptions:{buffer:(f.buffer!==void 0?f.buffer:128)*w,tolerance:(f.tolerance!==void 0?f.tolerance:.375)*w,extent:o.EXTENT,maxZoom:this.maxzoom,lineMetrics:f.lineMetrics||!1,generateId:f.generateId||!1},superclusterOptions:{maxZoom:f.clusterMaxZoom!==void 0?Math.min(f.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,f.clusterMinPoints||2),extent:o.EXTENT,radius:(f.clusterRadius||50)*w,log:!1,generateId:f.generateId||!1},clusterProperties:f.clusterProperties,filter:f.filter},f.workerOptions)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.load=function(){var u=this;this.fire(new o.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(f){if(f)u.fire(new o.ErrorEvent(f));else{var g={dataType:"source",sourceDataType:"metadata"};u._collectResourceTiming&&u._resourceTiming&&u._resourceTiming.length>0&&(g.resourceTiming=u._resourceTiming,u._resourceTiming=[]),u.fire(new o.Event("data",g))}})},p.prototype.onAdd=function(u){this.map=u,this.load()},p.prototype.setData=function(u){var f=this;return this._data=u,this.fire(new o.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(g){if(g)f.fire(new o.ErrorEvent(g));else{var b={dataType:"source",sourceDataType:"content"};f._collectResourceTiming&&f._resourceTiming&&f._resourceTiming.length>0&&(b.resourceTiming=f._resourceTiming,f._resourceTiming=[]),f.fire(new o.Event("data",b))}}),this},p.prototype.getClusterExpansionZoom=function(u,f){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:u,source:this.id},f),this},p.prototype.getClusterChildren=function(u,f){return this.actor.send("geojson.getClusterChildren",{clusterId:u,source:this.id},f),this},p.prototype.getClusterLeaves=function(u,f,g,b){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:u,limit:f,offset:g},b),this},p.prototype._updateWorkerData=function(u){var f=this;this._loaded=!1;var g=o.extend({},this.workerOptions),b=this._data;typeof b=="string"?(g.request=this.map._requestManager.transformRequest(o.browser.resolveURL(b),o.ResourceType.Source),g.request.collectResourceTiming=this._collectResourceTiming):g.data=JSON.stringify(b),this.actor.send(this.type+".loadData",g,function(w,S){f._removed||S&&S.abandoned||(f._loaded=!0,S&&S.resourceTiming&&S.resourceTiming[f.id]&&(f._resourceTiming=S.resourceTiming[f.id].slice(0)),f.actor.send(f.type+".coalesce",{source:g.source},null),u(w))})},p.prototype.loaded=function(){return this._loaded},p.prototype.loadTile=function(u,f){var g=this,b=u.actor?"reloadTile":"loadTile";u.actor=this.actor,u.request=this.actor.send(b,{type:this.type,uid:u.uid,tileID:u.tileID,zoom:u.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:o.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(w,S){return delete u.request,u.unloadVectorData(),u.aborted?f(null):w?f(w):(u.loadVectorData(S,g.map.painter,b==="reloadTile"),f(null))})},p.prototype.abortTile=function(u){u.request&&(u.request.cancel(),delete u.request),u.aborted=!0},p.prototype.unloadTile=function(u){u.unloadVectorData(),this.actor.send("removeTile",{uid:u.uid,type:this.type,source:this.id})},p.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},p.prototype.serialize=function(){return o.extend({},this._options,{type:this.type,data:this._data})},p.prototype.hasTransition=function(){return!1},p}(o.Evented),Ce=o.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),qe=function(l){function p(u,f,g,b){l.call(this),this.id=u,this.dispatcher=g,this.coordinates=f.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(b),this.options=f}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.load=function(u,f){var g=this;this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this.url=this.options.url,o.getImage(this.map._requestManager.transformRequest(this.url,o.ResourceType.Image),function(b,w){g._loaded=!0,b?g.fire(new o.ErrorEvent(b)):w&&(g.image=w,u&&(g.coordinates=u),f&&f(),g._finishLoading())})},p.prototype.loaded=function(){return this._loaded},p.prototype.updateImage=function(u){var f=this;return this.image&&u.url?(this.options.url=u.url,this.load(u.coordinates,function(){f.texture=null}),this):this},p.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})))},p.prototype.onAdd=function(u){this.map=u,this.load()},p.prototype.setCoordinates=function(u){var f=this;this.coordinates=u;var g=u.map(o.MercatorCoordinate.fromLngLat);this.tileID=function(w){for(var S=1/0,M=1/0,B=-1/0,K=-1/0,Q=0,J=w;Q<J.length;Q+=1){var le=J[Q];S=Math.min(S,le.x),M=Math.min(M,le.y),B=Math.max(B,le.x),K=Math.max(K,le.y)}var se=Math.max(B-S,K-M),ye=Math.max(0,Math.floor(-Math.log(se)/Math.LN2)),ie=Math.pow(2,ye);return new o.CanonicalTileID(ye,Math.floor((S+B)/2*ie),Math.floor((M+K)/2*ie))}(g),this.minzoom=this.maxzoom=this.tileID.z;var b=g.map(function(w){return f.tileID.getTilePoint(w)._round()});return this._boundsArray=new o.StructArrayLayout4i8,this._boundsArray.emplaceBack(b[0].x,b[0].y,0,0),this._boundsArray.emplaceBack(b[1].x,b[1].y,o.EXTENT,0),this._boundsArray.emplaceBack(b[3].x,b[3].y,0,o.EXTENT),this._boundsArray.emplaceBack(b[2].x,b[2].y,o.EXTENT,o.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})),this},p.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var u=this.map.painter.context,f=u.gl;for(var g in this.boundsBuffer||(this.boundsBuffer=u.createVertexBuffer(this._boundsArray,Ce.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new o.Texture(u,this.image,f.RGBA),this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE)),this.tiles){var b=this.tiles[g];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture)}}},p.prototype.loadTile=function(u,f){this.tileID&&this.tileID.equals(u.tileID.canonical)?(this.tiles[String(u.tileID.wrap)]=u,u.buckets={},f(null)):(u.state="errored",f(null))},p.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},p.prototype.hasTransition=function(){return!1},p}(o.Evented),gt=function(l){function p(u,f,g,b){l.call(this,u,f,g,b),this.roundZoom=!0,this.type="video",this.options=f}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.load=function(){var u=this;this._loaded=!1;var f=this.options;this.urls=[];for(var g=0,b=f.urls;g<b.length;g+=1)this.urls.push(this.map._requestManager.transformRequest(b[g],o.ResourceType.Source).url);o.getVideo(this.urls,function(w,S){u._loaded=!0,w?u.fire(new o.ErrorEvent(w)):S&&(u.video=S,u.video.loop=!0,u.video.setAttribute("playsinline",""),u.video.addEventListener("playing",function(){u.map.triggerRepaint()}),u.map&&u.video.play(),u._finishLoading())})},p.prototype.pause=function(){this.video&&this.video.pause()},p.prototype.play=function(){this.video&&this.video.play()},p.prototype.seek=function(u){if(this.video){var f=this.video.seekable;u<f.start(0)||u>f.end(0)?this.fire(new o.ErrorEvent(new o.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+f.start(0)+" and "+f.end(0)+"-second mark."))):this.video.currentTime=u}},p.prototype.getVideo=function(){return this.video},p.prototype.onAdd=function(u){this.map||(this.map=u,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},p.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var u=this.map.painter.context,f=u.gl;for(var g in this.boundsBuffer||(this.boundsBuffer=u.createVertexBuffer(this._boundsArray,Ce.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE),f.texSubImage2D(f.TEXTURE_2D,0,0,0,f.RGBA,f.UNSIGNED_BYTE,this.video)):(this.texture=new o.Texture(u,this.video,f.RGBA),this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE)),this.tiles){var b=this.tiles[g];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture)}}},p.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},p.prototype.hasTransition=function(){return this.video&&!this.video.paused},p}(qe),ze=function(l){function p(u,f,g,b){l.call(this,u,f,g,b),f.coordinates?Array.isArray(f.coordinates)&&f.coordinates.length===4&&!f.coordinates.some(function(w){return!Array.isArray(w)||w.length!==2||w.some(function(S){return typeof S!="number"})})||this.fire(new o.ErrorEvent(new o.ValidationError("sources."+u,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.ErrorEvent(new o.ValidationError("sources."+u,null,'missing required property "coordinates"'))),f.animate&&typeof f.animate!="boolean"&&this.fire(new o.ErrorEvent(new o.ValidationError("sources."+u,null,'optional "animate" property must be a boolean value'))),f.canvas?typeof f.canvas=="string"||f.canvas instanceof o.window.HTMLCanvasElement||this.fire(new o.ErrorEvent(new o.ValidationError("sources."+u,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.ErrorEvent(new o.ValidationError("sources."+u,null,'missing required property "canvas"'))),this.options=f,this.animate=f.animate===void 0||f.animate}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof o.window.HTMLCanvasElement?this.options.canvas:o.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},p.prototype.getCanvas=function(){return this.canvas},p.prototype.onAdd=function(u){this.map=u,this.load(),this.canvas&&this.animate&&this.play()},p.prototype.onRemove=function(){this.pause()},p.prototype.prepare=function(){var u=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,u=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,u=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var f=this.map.painter.context,g=f.gl;for(var b in this.boundsBuffer||(this.boundsBuffer=f.createVertexBuffer(this._boundsArray,Ce.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(u||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new o.Texture(f,this.canvas,g.RGBA,{premultiply:!0}),this.tiles){var w=this.tiles[b];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture)}}},p.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},p.prototype.hasTransition=function(){return this._playing},p.prototype._hasInvalidDimensions=function(){for(var u=0,f=[this.canvas.width,this.canvas.height];u<f.length;u+=1){var g=f[u];if(isNaN(g)||g<=0)return!0}return!1},p}(qe),st={vector:be,raster:$e,"raster-dem":Le,geojson:St,video:gt,image:qe,canvas:ze};function Wt(l,p){var u=o.identity([]);return o.translate(u,u,[1,1,0]),o.scale(u,u,[.5*l.width,.5*l.height,1]),o.multiply(u,u,l.calculatePosMatrix(p.toUnwrapped()))}function Dt(l,p,u,f,g,b){var w=function(ye,ie,me){if(ye)for(var _e=0,Pe=ye;_e<Pe.length;_e+=1){var Fe=ie[Pe[_e]];if(Fe&&Fe.source===me&&Fe.type==="fill-extrusion")return!0}else for(var De in ie){var Ue=ie[De];if(Ue.source===me&&Ue.type==="fill-extrusion")return!0}return!1}(g&&g.layers,p,l.id),S=b.maxPitchScaleFactor(),M=l.tilesIn(f,S,w);M.sort(Ht);for(var B=[],K=0,Q=M;K<Q.length;K+=1){var J=Q[K];B.push({wrappedTileID:J.tileID.wrapped().key,queryResults:J.tile.queryRenderedFeatures(p,u,l._state,J.queryGeometry,J.cameraQueryGeometry,J.scale,g,b,S,Wt(l.transform,J.tileID))})}var le=function(ye){for(var ie={},me={},_e=0,Pe=ye;_e<Pe.length;_e+=1){var Fe=Pe[_e],De=Fe.queryResults,Ue=Fe.wrappedTileID,He=me[Ue]=me[Ue]||{};for(var et in De)for(var Ye=De[et],dt=He[et]=He[et]||{},kt=ie[et]=ie[et]||[],Rt=0,Pt=Ye;Rt<Pt.length;Rt+=1){var br=Pt[Rt];dt[br.featureIndex]||(dt[br.featureIndex]=!0,kt.push(br))}}return ie}(B);for(var se in le)le[se].forEach(function(ye){var ie=ye.feature,me=l.getFeatureState(ie.layer["source-layer"],ie.id);ie.source=ie.layer.source,ie.layer["source-layer"]&&(ie.sourceLayer=ie.layer["source-layer"]),ie.state=me});return le}function Ht(l,p){var u=l.tileID,f=p.tileID;return u.overscaledZ-f.overscaledZ||u.canonical.y-f.canonical.y||u.wrap-f.wrap||u.canonical.x-f.canonical.x}var At=function(l,p){this.max=l,this.onRemove=p,this.reset()};At.prototype.reset=function(){for(var l in this.data)for(var p=0,u=this.data[l];p<u.length;p+=1){var f=u[p];f.timeout&&clearTimeout(f.timeout),this.onRemove(f.value)}return this.data={},this.order=[],this},At.prototype.add=function(l,p,u){var f=this,g=l.wrapped().key;this.data[g]===void 0&&(this.data[g]=[]);var b={value:p,timeout:void 0};if(u!==void 0&&(b.timeout=setTimeout(function(){f.remove(l,b)},u)),this.data[g].push(b),this.order.push(g),this.order.length>this.max){var w=this._getAndRemoveByKey(this.order[0]);w&&this.onRemove(w)}return this},At.prototype.has=function(l){return l.wrapped().key in this.data},At.prototype.getAndRemove=function(l){return this.has(l)?this._getAndRemoveByKey(l.wrapped().key):null},At.prototype._getAndRemoveByKey=function(l){var p=this.data[l].shift();return p.timeout&&clearTimeout(p.timeout),this.data[l].length===0&&delete this.data[l],this.order.splice(this.order.indexOf(l),1),p.value},At.prototype.getByKey=function(l){var p=this.data[l];return p?p[0].value:null},At.prototype.get=function(l){return this.has(l)?this.data[l.wrapped().key][0].value:null},At.prototype.remove=function(l,p){if(!this.has(l))return this;var u=l.wrapped().key,f=p===void 0?0:this.data[u].indexOf(p),g=this.data[u][f];return this.data[u].splice(f,1),g.timeout&&clearTimeout(g.timeout),this.data[u].length===0&&delete this.data[u],this.onRemove(g.value),this.order.splice(this.order.indexOf(u),1),this},At.prototype.setMaxSize=function(l){for(this.max=l;this.order.length>this.max;){var p=this._getAndRemoveByKey(this.order[0]);p&&this.onRemove(p)}return this},At.prototype.filter=function(l){var p=[];for(var u in this.data)for(var f=0,g=this.data[u];f<g.length;f+=1){var b=g[f];l(b.value)||p.push(b)}for(var w=0,S=p;w<S.length;w+=1){var M=S[w];this.remove(M.value.tileID,M)}};var er=function(l,p,u){this.context=l;var f=l.gl;this.buffer=f.createBuffer(),this.dynamicDraw=!!u,this.context.unbindVAO(),l.bindElementBuffer.set(this.buffer),f.bufferData(f.ELEMENT_ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?f.DYNAMIC_DRAW:f.STATIC_DRAW),this.dynamicDraw||delete p.arrayBuffer};er.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},er.prototype.updateData=function(l){var p=this.context.gl;this.context.unbindVAO(),this.bind(),p.bufferSubData(p.ELEMENT_ARRAY_BUFFER,0,l.arrayBuffer)},er.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var $t={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Zt=function(l,p,u,f){this.length=p.length,this.attributes=u,this.itemSize=p.bytesPerElement,this.dynamicDraw=f,this.context=l;var g=l.gl;this.buffer=g.createBuffer(),l.bindVertexBuffer.set(this.buffer),g.bufferData(g.ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||delete p.arrayBuffer};Zt.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},Zt.prototype.updateData=function(l){var p=this.context.gl;this.bind(),p.bufferSubData(p.ARRAY_BUFFER,0,l.arrayBuffer)},Zt.prototype.enableAttributes=function(l,p){for(var u=0;u<this.attributes.length;u++){var f=p.attributes[this.attributes[u].name];f!==void 0&&l.enableVertexAttribArray(f)}},Zt.prototype.setVertexAttribPointers=function(l,p,u){for(var f=0;f<this.attributes.length;f++){var g=this.attributes[f],b=p.attributes[g.name];b!==void 0&&l.vertexAttribPointer(b,g.components,l[$t[g.type]],!1,this.itemSize,g.offset+this.itemSize*(u||0))}},Zt.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var nt=function(l){this.gl=l.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};nt.prototype.get=function(){return this.current},nt.prototype.set=function(l){},nt.prototype.getDefault=function(){return this.default},nt.prototype.setDefault=function(){this.set(this.default)};var Gt=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return o.Color.transparent},p.prototype.set=function(u){var f=this.current;(u.r!==f.r||u.g!==f.g||u.b!==f.b||u.a!==f.a||this.dirty)&&(this.gl.clearColor(u.r,u.g,u.b,u.a),this.current=u,this.dirty=!1)},p}(nt),or=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return 1},p.prototype.set=function(u){(u!==this.current||this.dirty)&&(this.gl.clearDepth(u),this.current=u,this.dirty=!1)},p}(nt),zr=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return 0},p.prototype.set=function(u){(u!==this.current||this.dirty)&&(this.gl.clearStencil(u),this.current=u,this.dirty=!1)},p}(nt),Dr=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return[!0,!0,!0,!0]},p.prototype.set=function(u){var f=this.current;(u[0]!==f[0]||u[1]!==f[1]||u[2]!==f[2]||u[3]!==f[3]||this.dirty)&&(this.gl.colorMask(u[0],u[1],u[2],u[3]),this.current=u,this.dirty=!1)},p}(nt),sr=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return!0},p.prototype.set=function(u){(u!==this.current||this.dirty)&&(this.gl.depthMask(u),this.current=u,this.dirty=!1)},p}(nt),Tr=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return 255},p.prototype.set=function(u){(u!==this.current||this.dirty)&&(this.gl.stencilMask(u),this.current=u,this.dirty=!1)},p}(nt),Fr=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},p.prototype.set=function(u){var f=this.current;(u.func!==f.func||u.ref!==f.ref||u.mask!==f.mask||this.dirty)&&(this.gl.stencilFunc(u.func,u.ref,u.mask),this.current=u,this.dirty=!1)},p}(nt),Ar=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){var u=this.gl;return[u.KEEP,u.KEEP,u.KEEP]},p.prototype.set=function(u){var f=this.current;(u[0]!==f[0]||u[1]!==f[1]||u[2]!==f[2]||this.dirty)&&(this.gl.stencilOp(u[0],u[1],u[2]),this.current=u,this.dirty=!1)},p}(nt),en=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return!1},p.prototype.set=function(u){if(u!==this.current||this.dirty){var f=this.gl;u?f.enable(f.STENCIL_TEST):f.disable(f.STENCIL_TEST),this.current=u,this.dirty=!1}},p}(nt),Ur=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return[0,1]},p.prototype.set=function(u){var f=this.current;(u[0]!==f[0]||u[1]!==f[1]||this.dirty)&&(this.gl.depthRange(u[0],u[1]),this.current=u,this.dirty=!1)},p}(nt),mr=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return!1},p.prototype.set=function(u){if(u!==this.current||this.dirty){var f=this.gl;u?f.enable(f.DEPTH_TEST):f.disable(f.DEPTH_TEST),this.current=u,this.dirty=!1}},p}(nt),dn=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return this.gl.LESS},p.prototype.set=function(u){(u!==this.current||this.dirty)&&(this.gl.depthFunc(u),this.current=u,this.dirty=!1)},p}(nt),xn=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return!1},p.prototype.set=function(u){if(u!==this.current||this.dirty){var f=this.gl;u?f.enable(f.BLEND):f.disable(f.BLEND),this.current=u,this.dirty=!1}},p}(nt),Xn=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){var u=this.gl;return[u.ONE,u.ZERO]},p.prototype.set=function(u){var f=this.current;(u[0]!==f[0]||u[1]!==f[1]||this.dirty)&&(this.gl.blendFunc(u[0],u[1]),this.current=u,this.dirty=!1)},p}(nt),Ir=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return o.Color.transparent},p.prototype.set=function(u){var f=this.current;(u.r!==f.r||u.g!==f.g||u.b!==f.b||u.a!==f.a||this.dirty)&&(this.gl.blendColor(u.r,u.g,u.b,u.a),this.current=u,this.dirty=!1)},p}(nt),Lt=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return this.gl.FUNC_ADD},p.prototype.set=function(u){(u!==this.current||this.dirty)&&(this.gl.blendEquation(u),this.current=u,this.dirty=!1)},p}(nt),On=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return!1},p.prototype.set=function(u){if(u!==this.current||this.dirty){var f=this.gl;u?f.enable(f.CULL_FACE):f.disable(f.CULL_FACE),this.current=u,this.dirty=!1}},p}(nt),Qn=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return this.gl.BACK},p.prototype.set=function(u){(u!==this.current||this.dirty)&&(this.gl.cullFace(u),this.current=u,this.dirty=!1)},p}(nt),Fi=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return this.gl.CCW},p.prototype.set=function(u){(u!==this.current||this.dirty)&&(this.gl.frontFace(u),this.current=u,this.dirty=!1)},p}(nt),Bt=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p.prototype.set=function(u){(u!==this.current||this.dirty)&&(this.gl.useProgram(u),this.current=u,this.dirty=!1)},p}(nt),Er=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return this.gl.TEXTURE0},p.prototype.set=function(u){(u!==this.current||this.dirty)&&(this.gl.activeTexture(u),this.current=u,this.dirty=!1)},p}(nt),ut=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){var u=this.gl;return[0,0,u.drawingBufferWidth,u.drawingBufferHeight]},p.prototype.set=function(u){var f=this.current;(u[0]!==f[0]||u[1]!==f[1]||u[2]!==f[2]||u[3]!==f[3]||this.dirty)&&(this.gl.viewport(u[0],u[1],u[2],u[3]),this.current=u,this.dirty=!1)},p}(nt),Mt=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p.prototype.set=function(u){if(u!==this.current||this.dirty){var f=this.gl;f.bindFramebuffer(f.FRAMEBUFFER,u),this.current=u,this.dirty=!1}},p}(nt),ke=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p.prototype.set=function(u){if(u!==this.current||this.dirty){var f=this.gl;f.bindRenderbuffer(f.RENDERBUFFER,u),this.current=u,this.dirty=!1}},p}(nt),Ke=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p.prototype.set=function(u){if(u!==this.current||this.dirty){var f=this.gl;f.bindTexture(f.TEXTURE_2D,u),this.current=u,this.dirty=!1}},p}(nt),ct=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p.prototype.set=function(u){if(u!==this.current||this.dirty){var f=this.gl;f.bindBuffer(f.ARRAY_BUFFER,u),this.current=u,this.dirty=!1}},p}(nt),jt=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p.prototype.set=function(u){var f=this.gl;f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,u),this.current=u,this.dirty=!1},p}(nt),tr=function(l){function p(u){l.call(this,u),this.vao=u.extVertexArrayObject}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p.prototype.set=function(u){this.vao&&(u!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(u),this.current=u,this.dirty=!1)},p}(nt),Qt=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return 4},p.prototype.set=function(u){if(u!==this.current||this.dirty){var f=this.gl;f.pixelStorei(f.UNPACK_ALIGNMENT,u),this.current=u,this.dirty=!1}},p}(nt),yr=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return!1},p.prototype.set=function(u){if(u!==this.current||this.dirty){var f=this.gl;f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,u),this.current=u,this.dirty=!1}},p}(nt),Sr=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return!1},p.prototype.set=function(u){if(u!==this.current||this.dirty){var f=this.gl;f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,u),this.current=u,this.dirty=!1}},p}(nt),pr=function(l){function p(u,f){l.call(this,u),this.context=u,this.parent=f}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p}(nt),z=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.setDirty=function(){this.dirty=!0},p.prototype.set=function(u){if(u!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var f=this.gl;f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,u,0),this.current=u,this.dirty=!1}},p}(pr),F=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.set=function(u){if(u!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var f=this.gl;f.framebufferRenderbuffer(f.FRAMEBUFFER,f.DEPTH_ATTACHMENT,f.RENDERBUFFER,u),this.current=u,this.dirty=!1}},p}(pr),V=function(l,p,u,f){this.context=l,this.width=p,this.height=u;var g=this.framebuffer=l.gl.createFramebuffer();this.colorAttachment=new z(l,g),f&&(this.depthAttachment=new F(l,g))};V.prototype.destroy=function(){var l=this.context.gl,p=this.colorAttachment.get();if(p&&l.deleteTexture(p),this.depthAttachment){var u=this.depthAttachment.get();u&&l.deleteRenderbuffer(u)}l.deleteFramebuffer(this.framebuffer)};var X=function(l,p,u){this.func=l,this.mask=p,this.range=u};X.ReadOnly=!1,X.ReadWrite=!0,X.disabled=new X(519,X.ReadOnly,[0,1]);var re=function(l,p,u,f,g,b){this.test=l,this.ref=p,this.mask=u,this.fail=f,this.depthFail=g,this.pass=b};re.disabled=new re({func:519,mask:0},0,0,7680,7680,7680);var ce=function(l,p,u){this.blendFunction=l,this.blendColor=p,this.mask=u};ce.disabled=new ce(ce.Replace=[1,0],o.Color.transparent,[!1,!1,!1,!1]),ce.unblended=new ce(ce.Replace,o.Color.transparent,[!0,!0,!0,!0]),ce.alphaBlended=new ce([1,771],o.Color.transparent,[!0,!0,!0,!0]);var de=function(l,p,u){this.enable=l,this.mode=p,this.frontFace=u};de.disabled=new de(!1,1029,2305),de.backCCW=new de(!0,1029,2305);var Z=function(l){this.gl=l,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Gt(this),this.clearDepth=new or(this),this.clearStencil=new zr(this),this.colorMask=new Dr(this),this.depthMask=new sr(this),this.stencilMask=new Tr(this),this.stencilFunc=new Fr(this),this.stencilOp=new Ar(this),this.stencilTest=new en(this),this.depthRange=new Ur(this),this.depthTest=new mr(this),this.depthFunc=new dn(this),this.blend=new xn(this),this.blendFunc=new Xn(this),this.blendColor=new Ir(this),this.blendEquation=new Lt(this),this.cullFace=new On(this),this.cullFaceSide=new Qn(this),this.frontFace=new Fi(this),this.program=new Bt(this),this.activeTexture=new Er(this),this.viewport=new ut(this),this.bindFramebuffer=new Mt(this),this.bindRenderbuffer=new ke(this),this.bindTexture=new Ke(this),this.bindVertexBuffer=new ct(this),this.bindElementBuffer=new jt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new tr(this),this.pixelStoreUnpack=new Qt(this),this.pixelStoreUnpackPremultiplyAlpha=new yr(this),this.pixelStoreUnpackFlipY=new Sr(this),this.extTextureFilterAnisotropic=l.getExtension("EXT_texture_filter_anisotropic")||l.getExtension("MOZ_EXT_texture_filter_anisotropic")||l.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=l.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=l.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(l.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=l.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=l.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE)};Z.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Z.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Z.prototype.createIndexBuffer=function(l,p){return new er(this,l,p)},Z.prototype.createVertexBuffer=function(l,p,u){return new Zt(this,l,p,u)},Z.prototype.createRenderbuffer=function(l,p,u){var f=this.gl,g=f.createRenderbuffer();return this.bindRenderbuffer.set(g),f.renderbufferStorage(f.RENDERBUFFER,l,p,u),this.bindRenderbuffer.set(null),g},Z.prototype.createFramebuffer=function(l,p,u){return new V(this,l,p,u)},Z.prototype.clear=function(l){var p=l.color,u=l.depth,f=this.gl,g=0;p&&(g|=f.COLOR_BUFFER_BIT,this.clearColor.set(p),this.colorMask.set([!0,!0,!0,!0])),u!==void 0&&(g|=f.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),f.clear(g)},Z.prototype.setCullFace=function(l){l.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(l.mode),this.frontFace.set(l.frontFace))},Z.prototype.setDepthMode=function(l){l.func!==this.gl.ALWAYS||l.mask?(this.depthTest.set(!0),this.depthFunc.set(l.func),this.depthMask.set(l.mask),this.depthRange.set(l.range)):this.depthTest.set(!1)},Z.prototype.setStencilMode=function(l){l.test.func!==this.gl.ALWAYS||l.mask?(this.stencilTest.set(!0),this.stencilMask.set(l.mask),this.stencilOp.set([l.fail,l.depthFail,l.pass]),this.stencilFunc.set({func:l.test.func,ref:l.ref,mask:l.test.mask})):this.stencilTest.set(!1)},Z.prototype.setColorMode=function(l){o.deepEqual(l.blendFunction,ce.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(l.blendFunction),this.blendColor.set(l.blendColor)),this.colorMask.set(l.mask)},Z.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var ue=function(l){function p(u,f,g){var b=this;l.call(this),this.id=u,this.dispatcher=g,this.on("data",function(w){w.dataType==="source"&&w.sourceDataType==="metadata"&&(b._sourceLoaded=!0),b._sourceLoaded&&!b._paused&&w.dataType==="source"&&w.sourceDataType==="content"&&(b.reload(),b.transform&&b.update(b.transform))}),this.on("error",function(){b._sourceErrored=!0}),this._source=function(w,S,M,B){var K=new st[S.type](w,S,M,B);if(K.id!==w)throw new Error("Expected Source id to be "+w+" instead of "+K.id);return o.bindAll(["load","abort","unload","serialize","prepare"],K),K}(u,f,g,this),this._tiles={},this._cache=new At(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new o.SourceFeatureState}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.onAdd=function(u){this.map=u,this._maxTileCacheSize=u?u._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(u)},p.prototype.onRemove=function(u){this._source&&this._source.onRemove&&this._source.onRemove(u)},p.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var u in this._tiles){var f=this._tiles[u];if(f.state!=="loaded"&&f.state!=="errored")return!1}return!0},p.prototype.getSource=function(){return this._source},p.prototype.pause=function(){this._paused=!0},p.prototype.resume=function(){if(this._paused){var u=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,u&&this.reload(),this.transform&&this.update(this.transform)}},p.prototype._loadTile=function(u,f){return this._source.loadTile(u,f)},p.prototype._unloadTile=function(u){if(this._source.unloadTile)return this._source.unloadTile(u,function(){})},p.prototype._abortTile=function(u){if(this._source.abortTile)return this._source.abortTile(u,function(){})},p.prototype.serialize=function(){return this._source.serialize()},p.prototype.prepare=function(u){for(var f in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var g=this._tiles[f];g.upload(u),g.prepare(this.map.style.imageManager)}},p.prototype.getIds=function(){return o.values(this._tiles).map(function(u){return u.tileID}).sort(Me).map(function(u){return u.key})},p.prototype.getRenderableIds=function(u){var f=this,g=[];for(var b in this._tiles)this._isIdRenderable(b,u)&&g.push(this._tiles[b]);return u?g.sort(function(w,S){var M=w.tileID,B=S.tileID,K=new o.Point(M.canonical.x,M.canonical.y)._rotate(f.transform.angle),Q=new o.Point(B.canonical.x,B.canonical.y)._rotate(f.transform.angle);return M.overscaledZ-B.overscaledZ||Q.y-K.y||Q.x-K.x}).map(function(w){return w.tileID.key}):g.map(function(w){return w.tileID}).sort(Me).map(function(w){return w.key})},p.prototype.hasRenderableParent=function(u){var f=this.findLoadedParent(u,0);return!!f&&this._isIdRenderable(f.tileID.key)},p.prototype._isIdRenderable=function(u,f){return this._tiles[u]&&this._tiles[u].hasData()&&!this._coveredTiles[u]&&(f||!this._tiles[u].holdingForFade())},p.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var u in this._cache.reset(),this._tiles)this._tiles[u].state!=="errored"&&this._reloadTile(u,"reloading")},p.prototype._reloadTile=function(u,f){var g=this._tiles[u];g&&(g.state!=="loading"&&(g.state=f),this._loadTile(g,this._tileLoaded.bind(this,g,u,f)))},p.prototype._tileLoaded=function(u,f,g,b){if(b)return u.state="errored",void(b.status!==404?this._source.fire(new o.ErrorEvent(b,{tile:u})):this.update(this.transform));u.timeAdded=o.browser.now(),g==="expired"&&(u.refreshedUponExpiration=!0),this._setTileReloadTimer(f,u),this.getSource().type==="raster-dem"&&u.dem&&this._backfillDEM(u),this._state.initializeTileState(u,this.map?this.map.painter:null),this._source.fire(new o.Event("data",{dataType:"source",tile:u,coord:u.tileID}))},p.prototype._backfillDEM=function(u){for(var f=this.getRenderableIds(),g=0;g<f.length;g++){var b=f[g];if(u.neighboringTiles&&u.neighboringTiles[b]){var w=this.getTileByID(b);S(u,w),S(w,u)}}function S(M,B){M.needsHillshadePrepare=!0;var K=B.tileID.canonical.x-M.tileID.canonical.x,Q=B.tileID.canonical.y-M.tileID.canonical.y,J=Math.pow(2,M.tileID.canonical.z),le=B.tileID.key;K===0&&Q===0||Math.abs(Q)>1||(Math.abs(K)>1&&(Math.abs(K+J)===1?K+=J:Math.abs(K-J)===1&&(K-=J)),B.dem&&M.dem&&(M.dem.backfillBorder(B.dem,K,Q),M.neighboringTiles&&M.neighboringTiles[le]&&(M.neighboringTiles[le].backfilled=!0)))}},p.prototype.getTile=function(u){return this.getTileByID(u.key)},p.prototype.getTileByID=function(u){return this._tiles[u]},p.prototype._retainLoadedChildren=function(u,f,g,b){for(var w in this._tiles){var S=this._tiles[w];if(!(b[w]||!S.hasData()||S.tileID.overscaledZ<=f||S.tileID.overscaledZ>g)){for(var M=S.tileID;S&&S.tileID.overscaledZ>f+1;){var B=S.tileID.scaledTo(S.tileID.overscaledZ-1);(S=this._tiles[B.key])&&S.hasData()&&(M=B)}for(var K=M;K.overscaledZ>f;)if(u[(K=K.scaledTo(K.overscaledZ-1)).key]){b[M.key]=M;break}}}},p.prototype.findLoadedParent=function(u,f){if(u.key in this._loadedParentTiles){var g=this._loadedParentTiles[u.key];return g&&g.tileID.overscaledZ>=f?g:null}for(var b=u.overscaledZ-1;b>=f;b--){var w=u.scaledTo(b),S=this._getLoadedTile(w);if(S)return S}},p.prototype._getLoadedTile=function(u){var f=this._tiles[u.key];return f&&f.hasData()?f:this._cache.getByKey(u.wrapped().key)},p.prototype.updateCacheSize=function(u){var f=Math.ceil(u.width/this._source.tileSize)+1,g=Math.ceil(u.height/this._source.tileSize)+1,b=Math.floor(f*g*5),w=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,b):b;this._cache.setMaxSize(w)},p.prototype.handleWrapJump=function(u){var f=Math.round((u-(this._prevLng===void 0?u:this._prevLng))/360);if(this._prevLng=u,f){var g={};for(var b in this._tiles){var w=this._tiles[b];w.tileID=w.tileID.unwrapTo(w.tileID.wrap+f),g[w.tileID.key]=w}for(var S in this._tiles=g,this._timers)clearTimeout(this._timers[S]),delete this._timers[S];for(var M in this._tiles)this._setTileReloadTimer(M,this._tiles[M])}},p.prototype.update=function(u){var f=this;if(this.transform=u,this._sourceLoaded&&!this._paused){var g;this.updateCacheSize(u),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?g=u.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(He){return new o.OverscaledTileID(He.canonical.z,He.wrap,He.canonical.z,He.canonical.x,He.canonical.y)}):(g=u.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(g=g.filter(function(He){return f._source.hasTile(He)}))):g=[];var b=u.coveringZoomLevel(this._source),w=Math.max(b-p.maxOverzooming,this._source.minzoom),S=Math.max(b+p.maxUnderzooming,this._source.minzoom),M=this._updateRetainedTiles(g,b);if(Ze(this._source.type)){for(var B={},K={},Q=0,J=Object.keys(M);Q<J.length;Q+=1){var le=J[Q],se=M[le],ye=this._tiles[le];if(ye&&!(ye.fadeEndTime&&ye.fadeEndTime<=o.browser.now())){var ie=this.findLoadedParent(se,w);ie&&(this._addTile(ie.tileID),B[ie.tileID.key]=ie.tileID),K[le]=se}}for(var me in this._retainLoadedChildren(K,b,S,M),B)M[me]||(this._coveredTiles[me]=!0,M[me]=B[me])}for(var _e in M)this._tiles[_e].clearFadeHold();for(var Pe=0,Fe=o.keysDifference(this._tiles,M);Pe<Fe.length;Pe+=1){var De=Fe[Pe],Ue=this._tiles[De];Ue.hasSymbolBuckets&&!Ue.holdingForFade()?Ue.setHoldDuration(this.map._fadeDuration):Ue.hasSymbolBuckets&&!Ue.symbolFadeFinished()||this._removeTile(De)}this._updateLoadedParentTileCache()}},p.prototype.releaseSymbolFadeTiles=function(){for(var u in this._tiles)this._tiles[u].holdingForFade()&&this._removeTile(u)},p.prototype._updateRetainedTiles=function(u,f){for(var g={},b={},w=Math.max(f-p.maxOverzooming,this._source.minzoom),S=Math.max(f+p.maxUnderzooming,this._source.minzoom),M={},B=0,K=u;B<K.length;B+=1){var Q=K[B],J=this._addTile(Q);g[Q.key]=Q,J.hasData()||f<this._source.maxzoom&&(M[Q.key]=Q)}this._retainLoadedChildren(M,f,S,g);for(var le=0,se=u;le<se.length;le+=1){var ye=se[le],ie=this._tiles[ye.key];if(!ie.hasData()){if(f+1>this._source.maxzoom){var me=ye.children(this._source.maxzoom)[0],_e=this.getTile(me);if(_e&&_e.hasData()){g[me.key]=me;continue}}else{var Pe=ye.children(this._source.maxzoom);if(g[Pe[0].key]&&g[Pe[1].key]&&g[Pe[2].key]&&g[Pe[3].key])continue}for(var Fe=ie.wasRequested(),De=ye.overscaledZ-1;De>=w;--De){var Ue=ye.scaledTo(De);if(b[Ue.key]||(b[Ue.key]=!0,!(ie=this.getTile(Ue))&&Fe&&(ie=this._addTile(Ue)),ie&&(g[Ue.key]=Ue,Fe=ie.wasRequested(),ie.hasData())))break}}}return g},p.prototype._updateLoadedParentTileCache=function(){for(var u in this._loadedParentTiles={},this._tiles){for(var f=[],g=void 0,b=this._tiles[u].tileID;b.overscaledZ>0;){if(b.key in this._loadedParentTiles){g=this._loadedParentTiles[b.key];break}f.push(b.key);var w=b.scaledTo(b.overscaledZ-1);if(g=this._getLoadedTile(w))break;b=w}for(var S=0,M=f;S<M.length;S+=1)this._loadedParentTiles[M[S]]=g}},p.prototype._addTile=function(u){var f=this._tiles[u.key];if(f)return f;(f=this._cache.getAndRemove(u))&&(this._setTileReloadTimer(u.key,f),f.tileID=u,this._state.initializeTileState(f,this.map?this.map.painter:null),this._cacheTimers[u.key]&&(clearTimeout(this._cacheTimers[u.key]),delete this._cacheTimers[u.key],this._setTileReloadTimer(u.key,f)));var g=!!f;return g||(f=new o.Tile(u,this._source.tileSize*u.overscaleFactor()),this._loadTile(f,this._tileLoaded.bind(this,f,u.key,f.state))),f?(f.uses++,this._tiles[u.key]=f,g||this._source.fire(new o.Event("dataloading",{tile:f,coord:f.tileID,dataType:"source"})),f):null},p.prototype._setTileReloadTimer=function(u,f){var g=this;u in this._timers&&(clearTimeout(this._timers[u]),delete this._timers[u]);var b=f.getExpiryTimeout();b&&(this._timers[u]=setTimeout(function(){g._reloadTile(u,"expired"),delete g._timers[u]},b))},p.prototype._removeTile=function(u){var f=this._tiles[u];f&&(f.uses--,delete this._tiles[u],this._timers[u]&&(clearTimeout(this._timers[u]),delete this._timers[u]),f.uses>0||(f.hasData()&&f.state!=="reloading"?this._cache.add(f.tileID,f,f.getExpiryTimeout()):(f.aborted=!0,this._abortTile(f),this._unloadTile(f))))},p.prototype.clearTiles=function(){for(var u in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(u);this._cache.reset()},p.prototype.tilesIn=function(u,f,g){var b=this,w=[],S=this.transform;if(!S)return w;for(var M=g?S.getCameraQueryGeometry(u):u,B=u.map(function(De){return S.pointCoordinate(De)}),K=M.map(function(De){return S.pointCoordinate(De)}),Q=this.getIds(),J=1/0,le=1/0,se=-1/0,ye=-1/0,ie=0,me=K;ie<me.length;ie+=1){var _e=me[ie];J=Math.min(J,_e.x),le=Math.min(le,_e.y),se=Math.max(se,_e.x),ye=Math.max(ye,_e.y)}for(var Pe=function(De){var Ue=b._tiles[Q[De]];if(!Ue.holdingForFade()){var He=Ue.tileID,et=Math.pow(2,S.zoom-Ue.tileID.overscaledZ),Ye=f*Ue.queryPadding*o.EXTENT/Ue.tileSize/et,dt=[He.getTilePoint(new o.MercatorCoordinate(J,le)),He.getTilePoint(new o.MercatorCoordinate(se,ye))];if(dt[0].x-Ye<o.EXTENT&&dt[0].y-Ye<o.EXTENT&&dt[1].x+Ye>=0&&dt[1].y+Ye>=0){var kt=B.map(function(Pt){return He.getTilePoint(Pt)}),Rt=K.map(function(Pt){return He.getTilePoint(Pt)});w.push({tile:Ue,tileID:He,queryGeometry:kt,cameraQueryGeometry:Rt,scale:et})}}},Fe=0;Fe<Q.length;Fe++)Pe(Fe);return w},p.prototype.getVisibleCoordinates=function(u){for(var f=this,g=this.getRenderableIds(u).map(function(M){return f._tiles[M].tileID}),b=0,w=g;b<w.length;b+=1){var S=w[b];S.posMatrix=this.transform.calculatePosMatrix(S.toUnwrapped())}return g},p.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Ze(this._source.type))for(var u in this._tiles){var f=this._tiles[u];if(f.fadeEndTime!==void 0&&f.fadeEndTime>=o.browser.now())return!0}return!1},p.prototype.setFeatureState=function(u,f,g){this._state.updateState(u=u||"_geojsonTileLayer",f,g)},p.prototype.removeFeatureState=function(u,f,g){this._state.removeFeatureState(u=u||"_geojsonTileLayer",f,g)},p.prototype.getFeatureState=function(u,f){return this._state.getState(u=u||"_geojsonTileLayer",f)},p.prototype.setDependencies=function(u,f,g){var b=this._tiles[u];b&&b.setDependencies(f,g)},p.prototype.reloadTilesForDependencies=function(u,f){for(var g in this._tiles)this._tiles[g].hasDependency(u,f)&&this._reloadTile(g,"reloading");this._cache.filter(function(b){return!b.hasDependency(u,f)})},p}(o.Evented);function Me(l,p){var u=Math.abs(2*l.wrap)-+(l.wrap<0),f=Math.abs(2*p.wrap)-+(p.wrap<0);return l.overscaledZ-p.overscaledZ||f-u||p.canonical.y-l.canonical.y||p.canonical.x-l.canonical.x}function Ze(l){return l==="raster"||l==="image"||l==="video"}function Qe(){return new o.window.Worker(uc.workerUrl)}ue.maxOverzooming=10,ue.maxUnderzooming=3;var je="mapboxgl_preloaded_worker_pool",Xe=function(){this.active={}};Xe.prototype.acquire=function(l){if(!this.workers)for(this.workers=[];this.workers.length<Xe.workerCount;)this.workers.push(new Qe);return this.active[l]=!0,this.workers.slice()},Xe.prototype.release=function(l){delete this.active[l],this.numActive()===0&&(this.workers.forEach(function(p){p.terminate()}),this.workers=null)},Xe.prototype.isPreloaded=function(){return!!this.active[je]},Xe.prototype.numActive=function(){return Object.keys(this.active).length};var xt,vt=Math.floor(o.browser.hardwareConcurrency/2);function Ve(){return xt||(xt=new Xe),xt}function ft(l,p){var u={};for(var f in l)f!=="ref"&&(u[f]=l[f]);return o.refProperties.forEach(function(g){g in p&&(u[g]=p[g])}),u}function it(l){l=l.slice();for(var p=Object.create(null),u=0;u<l.length;u++)p[l[u].id]=l[u];for(var f=0;f<l.length;f++)"ref"in l[f]&&(l[f]=ft(l[f],p[l[f].ref]));return l}Xe.workerCount=Math.max(Math.min(vt,6),1);var at={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function rr(l,p,u){u.push({command:at.addSource,args:[l,p[l]]})}function pt(l,p,u){p.push({command:at.removeSource,args:[l]}),u[l]=!0}function gr(l,p,u,f){pt(l,u,f),rr(l,p,u)}function $r(l,p,u){var f;for(f in l[u])if(l[u].hasOwnProperty(f)&&f!=="data"&&!o.deepEqual(l[u][f],p[u][f]))return!1;for(f in p[u])if(p[u].hasOwnProperty(f)&&f!=="data"&&!o.deepEqual(l[u][f],p[u][f]))return!1;return!0}function lr(l,p,u,f,g,b){var w;for(w in p=p||{},l=l||{})l.hasOwnProperty(w)&&(o.deepEqual(l[w],p[w])||u.push({command:b,args:[f,w,p[w],g]}));for(w in p)p.hasOwnProperty(w)&&!l.hasOwnProperty(w)&&(o.deepEqual(l[w],p[w])||u.push({command:b,args:[f,w,p[w],g]}))}function Pr(l){return l.id}function _r(l,p){return l[p.id]=p,l}var yi=function(l,p){this.reset(l,p)};yi.prototype.reset=function(l,p){this.points=l||[],this._distances=[0];for(var u=1;u<this.points.length;u++)this._distances[u]=this._distances[u-1]+this.points[u].dist(this.points[u-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(p||0,.5*this.length),this.paddedLength=this.length-2*this.padding},yi.prototype.lerp=function(l){if(this.points.length===1)return this.points[0];l=o.clamp(l,0,1);for(var p=1,u=this._distances[p],f=l*this.paddedLength+this.padding;u<f&&p<this._distances.length;)u=this._distances[++p];var g=p-1,b=this._distances[g],w=u-b,S=w>0?(f-b)/w:0;return this.points[g].mult(1-S).add(this.points[p].mult(S))};var Lr=function(l,p,u){var f=this.boxCells=[],g=this.circleCells=[];this.xCellCount=Math.ceil(l/u),this.yCellCount=Math.ceil(p/u);for(var b=0;b<this.xCellCount*this.yCellCount;b++)f.push([]),g.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=l,this.height=p,this.xScale=this.xCellCount/l,this.yScale=this.yCellCount/p,this.boxUid=0,this.circleUid=0};function bn(l,p,u,f,g){var b=o.create();return p?(o.scale(b,b,[1/g,1/g,1]),u||o.rotateZ(b,b,f.angle)):o.multiply(b,f.labelPlaneMatrix,l),b}function jr(l,p,u,f,g){if(p){var b=o.clone(l);return o.scale(b,b,[g,g,1]),u||o.rotateZ(b,b,-f.angle),b}return f.glCoordMatrix}function dr(l,p){var u=[l.x,l.y,0,1];Yn(u,u,p);var f=u[3];return{point:new o.Point(u[0]/f,u[1]/f),signedDistanceFromCamera:f}}function Mr(l,p){return .5+l/p*.5}function Ti(l,p){var u=l[0]/l[3],f=l[1]/l[3];return u>=-p[0]&&u<=p[0]&&f>=-p[1]&&f<=p[1]}function Fl(l,p,u,f,g,b,w,S){var M=f?l.textSizeData:l.iconSizeData,B=o.evaluateSizeForZoom(M,u.transform.zoom),K=[256/u.width*2+1,256/u.height*2+1],Q=f?l.text.dynamicLayoutVertexArray:l.icon.dynamicLayoutVertexArray;Q.clear();for(var J=l.lineVertexArray,le=f?l.text.placedSymbolArray:l.icon.placedSymbolArray,se=u.transform.width/u.transform.height,ye=!1,ie=0;ie<le.length;ie++){var me=le.get(ie);if(me.hidden||me.writingMode===o.WritingMode.vertical&&!ye)gi(me.numGlyphs,Q);else{ye=!1;var _e=[me.anchorX,me.anchorY,0,1];if(o.transformMat4(_e,_e,p),Ti(_e,K)){var Pe=Mr(u.transform.cameraToCenterDistance,_e[3]),Fe=o.evaluateSizeForFeature(M,B,me),De=w?Fe/Pe:Fe*Pe,Ue=new o.Point(me.anchorX,me.anchorY),He=dr(Ue,g).point,et={},Ye=jp(me,De,!1,S,p,g,b,l.glyphOffsetArray,J,Q,He,Ue,et,se);ye=Ye.useVertical,(Ye.notEnoughRoom||ye||Ye.needsFlipping&&jp(me,De,!0,S,p,g,b,l.glyphOffsetArray,J,Q,He,Ue,et,se).notEnoughRoom)&&gi(me.numGlyphs,Q)}else gi(me.numGlyphs,Q)}}f?l.text.dynamicLayoutVertexBuffer.updateData(Q):l.icon.dynamicLayoutVertexBuffer.updateData(Q)}function Jn(l,p,u,f,g,b,w,S,M,B,K){var Q=S.glyphStartIndex+S.numGlyphs,J=S.lineStartIndex,le=S.lineStartIndex+S.lineLength,se=p.getoffsetX(S.glyphStartIndex),ye=p.getoffsetX(Q-1),ie=wn(l*se,u,f,g,b,w,S.segment,J,le,M,B,K);if(!ie)return null;var me=wn(l*ye,u,f,g,b,w,S.segment,J,le,M,B,K);return me?{first:ie,last:me}:null}function Ii(l,p,u,f){return l===o.WritingMode.horizontal&&Math.abs(u.y-p.y)>Math.abs(u.x-p.x)*f?{useVertical:!0}:(l===o.WritingMode.vertical?p.y<u.y:p.x>u.x)?{needsFlipping:!0}:null}function jp(l,p,u,f,g,b,w,S,M,B,K,Q,J,le){var se,ye=p/24,ie=l.lineOffsetX*ye,me=l.lineOffsetY*ye;if(l.numGlyphs>1){var _e=l.glyphStartIndex+l.numGlyphs,Pe=l.lineStartIndex,Fe=l.lineStartIndex+l.lineLength,De=Jn(ye,S,ie,me,u,K,Q,l,M,b,J);if(!De)return{notEnoughRoom:!0};var Ue=dr(De.first.point,w).point,He=dr(De.last.point,w).point;if(f&&!u){var et=Ii(l.writingMode,Ue,He,le);if(et)return et}se=[De.first];for(var Ye=l.glyphStartIndex+1;Ye<_e-1;Ye++)se.push(wn(ye*S.getoffsetX(Ye),ie,me,u,K,Q,l.segment,Pe,Fe,M,b,J));se.push(De.last)}else{if(f&&!u){var dt=dr(Q,g).point,kt=l.lineStartIndex+l.segment+1,Rt=new o.Point(M.getx(kt),M.gety(kt)),Pt=dr(Rt,g),br=Pt.signedDistanceFromCamera>0?Pt.point:Ul(Q,Rt,dt,1,g),yt=Ii(l.writingMode,dt,br,le);if(yt)return yt}var qt=wn(ye*S.getoffsetX(l.glyphStartIndex),ie,me,u,K,Q,l.segment,l.lineStartIndex,l.lineStartIndex+l.lineLength,M,b,J);if(!qt)return{notEnoughRoom:!0};se=[qt]}for(var Jt=0,Vt=se;Jt<Vt.length;Jt+=1){var Ut=Vt[Jt];o.addDynamicAttributes(B,Ut.point,Ut.angle)}return{}}function Ul(l,p,u,f,g){var b=dr(l.add(l.sub(p)._unit()),g).point,w=u.sub(b);return u.add(w._mult(f/w.mag()))}function wn(l,p,u,f,g,b,w,S,M,B,K,Q){var J=f?l-p:l+p,le=J>0?1:-1,se=0;f&&(le*=-1,se=Math.PI),le<0&&(se+=Math.PI);for(var ye=le>0?S+w:S+w+1,ie=g,me=g,_e=0,Pe=0,Fe=Math.abs(J),De=[];_e+Pe<=Fe;){if((ye+=le)<S||ye>=M)return null;if(me=ie,De.push(ie),(ie=Q[ye])===void 0){var Ue=new o.Point(B.getx(ye),B.gety(ye)),He=dr(Ue,K);if(He.signedDistanceFromCamera>0)ie=Q[ye]=He.point;else{var et=ye-le;ie=Ul(_e===0?b:new o.Point(B.getx(et),B.gety(et)),Ue,me,Fe-_e+1,K)}}_e+=Pe,Pe=me.dist(ie)}var Ye=(Fe-_e)/Pe,dt=ie.sub(me),kt=dt.mult(Ye)._add(me);kt._add(dt._unit()._perp()._mult(u*le));var Rt=se+Math.atan2(ie.y-me.y,ie.x-me.x);return De.push(kt),{point:kt,angle:Rt,path:De}}Lr.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Lr.prototype.insert=function(l,p,u,f,g){this._forEachCell(p,u,f,g,this._insertBoxCell,this.boxUid++),this.boxKeys.push(l),this.bboxes.push(p),this.bboxes.push(u),this.bboxes.push(f),this.bboxes.push(g)},Lr.prototype.insertCircle=function(l,p,u,f){this._forEachCell(p-f,u-f,p+f,u+f,this._insertCircleCell,this.circleUid++),this.circleKeys.push(l),this.circles.push(p),this.circles.push(u),this.circles.push(f)},Lr.prototype._insertBoxCell=function(l,p,u,f,g,b){this.boxCells[g].push(b)},Lr.prototype._insertCircleCell=function(l,p,u,f,g,b){this.circleCells[g].push(b)},Lr.prototype._query=function(l,p,u,f,g,b){if(u<0||l>this.width||f<0||p>this.height)return!g&&[];var w=[];if(l<=0&&p<=0&&this.width<=u&&this.height<=f){if(g)return!0;for(var S=0;S<this.boxKeys.length;S++)w.push({key:this.boxKeys[S],x1:this.bboxes[4*S],y1:this.bboxes[4*S+1],x2:this.bboxes[4*S+2],y2:this.bboxes[4*S+3]});for(var M=0;M<this.circleKeys.length;M++){var B=this.circles[3*M],K=this.circles[3*M+1],Q=this.circles[3*M+2];w.push({key:this.circleKeys[M],x1:B-Q,y1:K-Q,x2:B+Q,y2:K+Q})}return b?w.filter(b):w}return this._forEachCell(l,p,u,f,this._queryCell,w,{hitTest:g,seenUids:{box:{},circle:{}}},b),g?w.length>0:w},Lr.prototype._queryCircle=function(l,p,u,f,g){var b=l-u,w=l+u,S=p-u,M=p+u;if(w<0||b>this.width||M<0||S>this.height)return!f&&[];var B=[];return this._forEachCell(b,S,w,M,this._queryCellCircle,B,{hitTest:f,circle:{x:l,y:p,radius:u},seenUids:{box:{},circle:{}}},g),f?B.length>0:B},Lr.prototype.query=function(l,p,u,f,g){return this._query(l,p,u,f,!1,g)},Lr.prototype.hitTest=function(l,p,u,f,g){return this._query(l,p,u,f,!0,g)},Lr.prototype.hitTestCircle=function(l,p,u,f){return this._queryCircle(l,p,u,!0,f)},Lr.prototype._queryCell=function(l,p,u,f,g,b,w,S){var M=w.seenUids,B=this.boxCells[g];if(B!==null)for(var K=this.bboxes,Q=0,J=B;Q<J.length;Q+=1){var le=J[Q];if(!M.box[le]){M.box[le]=!0;var se=4*le;if(l<=K[se+2]&&p<=K[se+3]&&u>=K[se+0]&&f>=K[se+1]&&(!S||S(this.boxKeys[le]))){if(w.hitTest)return b.push(!0),!0;b.push({key:this.boxKeys[le],x1:K[se],y1:K[se+1],x2:K[se+2],y2:K[se+3]})}}}var ye=this.circleCells[g];if(ye!==null)for(var ie=this.circles,me=0,_e=ye;me<_e.length;me+=1){var Pe=_e[me];if(!M.circle[Pe]){M.circle[Pe]=!0;var Fe=3*Pe;if(this._circleAndRectCollide(ie[Fe],ie[Fe+1],ie[Fe+2],l,p,u,f)&&(!S||S(this.circleKeys[Pe]))){if(w.hitTest)return b.push(!0),!0;var De=ie[Fe],Ue=ie[Fe+1],He=ie[Fe+2];b.push({key:this.circleKeys[Pe],x1:De-He,y1:Ue-He,x2:De+He,y2:Ue+He})}}}},Lr.prototype._queryCellCircle=function(l,p,u,f,g,b,w,S){var M=w.circle,B=w.seenUids,K=this.boxCells[g];if(K!==null)for(var Q=this.bboxes,J=0,le=K;J<le.length;J+=1){var se=le[J];if(!B.box[se]){B.box[se]=!0;var ye=4*se;if(this._circleAndRectCollide(M.x,M.y,M.radius,Q[ye+0],Q[ye+1],Q[ye+2],Q[ye+3])&&(!S||S(this.boxKeys[se])))return b.push(!0),!0}}var ie=this.circleCells[g];if(ie!==null)for(var me=this.circles,_e=0,Pe=ie;_e<Pe.length;_e+=1){var Fe=Pe[_e];if(!B.circle[Fe]){B.circle[Fe]=!0;var De=3*Fe;if(this._circlesCollide(me[De],me[De+1],me[De+2],M.x,M.y,M.radius)&&(!S||S(this.circleKeys[Fe])))return b.push(!0),!0}}},Lr.prototype._forEachCell=function(l,p,u,f,g,b,w,S){for(var M=this._convertToXCellCoord(l),B=this._convertToYCellCoord(p),K=this._convertToXCellCoord(u),Q=this._convertToYCellCoord(f),J=M;J<=K;J++)for(var le=B;le<=Q;le++)if(g.call(this,l,p,u,f,this.xCellCount*le+J,b,w,S))return},Lr.prototype._convertToXCellCoord=function(l){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(l*this.xScale)))},Lr.prototype._convertToYCellCoord=function(l){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(l*this.yScale)))},Lr.prototype._circlesCollide=function(l,p,u,f,g,b){var w=f-l,S=g-p,M=u+b;return M*M>w*w+S*S},Lr.prototype._circleAndRectCollide=function(l,p,u,f,g,b,w){var S=(b-f)/2,M=Math.abs(l-(f+S));if(M>S+u)return!1;var B=(w-g)/2,K=Math.abs(p-(g+B));if(K>B+u)return!1;if(M<=S||K<=B)return!0;var Q=M-S,J=K-B;return Q*Q+J*J<=u*u};var jl=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function gi(l,p){for(var u=0;u<l;u++){var f=p.length;p.resize(f+4),p.float32.set(jl,3*f)}}function Yn(l,p,u){var f=p[0],g=p[1];return l[0]=u[0]*f+u[4]*g+u[12],l[1]=u[1]*f+u[5]*g+u[13],l[3]=u[3]*f+u[7]*g+u[15],l}var uo=function(l,p,u){p===void 0&&(p=new Lr(l.width+200,l.height+200,25)),u===void 0&&(u=new Lr(l.width+200,l.height+200,25)),this.transform=l,this.grid=p,this.ignoredGrid=u,this.pitchfactor=Math.cos(l._pitch)*l.cameraToCenterDistance,this.screenRightBoundary=l.width+100,this.screenBottomBoundary=l.height+100,this.gridRightBoundary=l.width+200,this.gridBottomBoundary=l.height+200};function tn(l,p,u){return p*(o.EXTENT/(l.tileSize*Math.pow(2,u-l.tileID.overscaledZ)))}uo.prototype.placeCollisionBox=function(l,p,u,f,g){var b=this.projectAndGetPerspectiveRatio(f,l.anchorPointX,l.anchorPointY),w=u*b.perspectiveRatio,S=l.x1*w+b.point.x,M=l.y1*w+b.point.y,B=l.x2*w+b.point.x,K=l.y2*w+b.point.y;return!this.isInsideGrid(S,M,B,K)||!p&&this.grid.hitTest(S,M,B,K,g)?{box:[],offscreen:!1}:{box:[S,M,B,K],offscreen:this.isOffscreen(S,M,B,K)}},uo.prototype.placeCollisionCircles=function(l,p,u,f,g,b,w,S,M,B,K,Q,J){var le=[],se=new o.Point(p.anchorX,p.anchorY),ye=dr(se,b),ie=Mr(this.transform.cameraToCenterDistance,ye.signedDistanceFromCamera),me=(B?g/ie:g*ie)/o.ONE_EM,_e=dr(se,w).point,Pe=Jn(me,f,p.lineOffsetX*me,p.lineOffsetY*me,!1,_e,se,p,u,w,{}),Fe=!1,De=!1,Ue=!0;if(Pe){for(var He=.5*Q*ie+J,et=new o.Point(-100,-100),Ye=new o.Point(this.screenRightBoundary,this.screenBottomBoundary),dt=new yi,kt=Pe.first,Rt=Pe.last,Pt=[],br=kt.path.length-1;br>=1;br--)Pt.push(kt.path[br]);for(var yt=1;yt<Rt.path.length;yt++)Pt.push(Rt.path[yt]);var qt=2.5*He;if(S){var Jt=Pt.map(function(yo){return dr(yo,S)});Pt=Jt.some(function(yo){return yo.signedDistanceFromCamera<=0})?[]:Jt.map(function(yo){return yo.point})}var Vt=[];if(Pt.length>0){for(var Ut=Pt[0].clone(),Xt=Pt[0].clone(),Ft=1;Ft<Pt.length;Ft++)Ut.x=Math.min(Ut.x,Pt[Ft].x),Ut.y=Math.min(Ut.y,Pt[Ft].y),Xt.x=Math.max(Xt.x,Pt[Ft].x),Xt.y=Math.max(Xt.y,Pt[Ft].y);Vt=Ut.x>=et.x&&Xt.x<=Ye.x&&Ut.y>=et.y&&Xt.y<=Ye.y?[Pt]:Xt.x<et.x||Ut.x>Ye.x||Xt.y<et.y||Ut.y>Ye.y?[]:o.clipLine([Pt],et.x,et.y,Ye.x,Ye.y)}for(var Ot=0,Vn=Vt;Ot<Vn.length;Ot+=1){var mn;dt.reset(Vn[Ot],.25*He),mn=dt.length<=.5*He?1:Math.ceil(dt.paddedLength/qt)+1;for(var hi=0;hi<mn;hi++){var ti=hi/Math.max(mn-1,1),pn=dt.lerp(ti),An=pn.x+100,Gi=pn.y+100;le.push(An,Gi,He,0);var bi=An-He,Fa=Gi-He,Pi=An+He,Bo=Gi+He;if(Ue=Ue&&this.isOffscreen(bi,Fa,Pi,Bo),De=De||this.isInsideGrid(bi,Fa,Pi,Bo),!l&&this.grid.hitTestCircle(An,Gi,He,K)&&(Fe=!0,!M))return{circles:[],offscreen:!1,collisionDetected:Fe}}}}return{circles:!M&&Fe||!De?[]:le,offscreen:Ue,collisionDetected:Fe}},uo.prototype.queryRenderedSymbols=function(l){if(l.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var p=[],u=1/0,f=1/0,g=-1/0,b=-1/0,w=0,S=l;w<S.length;w+=1){var M=S[w],B=new o.Point(M.x+100,M.y+100);u=Math.min(u,B.x),f=Math.min(f,B.y),g=Math.max(g,B.x),b=Math.max(b,B.y),p.push(B)}for(var K={},Q={},J=0,le=this.grid.query(u,f,g,b).concat(this.ignoredGrid.query(u,f,g,b));J<le.length;J+=1){var se=le[J],ye=se.key;if(K[ye.bucketInstanceId]===void 0&&(K[ye.bucketInstanceId]={}),!K[ye.bucketInstanceId][ye.featureIndex]){var ie=[new o.Point(se.x1,se.y1),new o.Point(se.x2,se.y1),new o.Point(se.x2,se.y2),new o.Point(se.x1,se.y2)];o.polygonIntersectsPolygon(p,ie)&&(K[ye.bucketInstanceId][ye.featureIndex]=!0,Q[ye.bucketInstanceId]===void 0&&(Q[ye.bucketInstanceId]=[]),Q[ye.bucketInstanceId].push(ye.featureIndex))}}return Q},uo.prototype.insertCollisionBox=function(l,p,u,f,g){(p?this.ignoredGrid:this.grid).insert({bucketInstanceId:u,featureIndex:f,collisionGroupID:g},l[0],l[1],l[2],l[3])},uo.prototype.insertCollisionCircles=function(l,p,u,f,g){for(var b=p?this.ignoredGrid:this.grid,w={bucketInstanceId:u,featureIndex:f,collisionGroupID:g},S=0;S<l.length;S+=4)b.insertCircle(w,l[S],l[S+1],l[S+2])},uo.prototype.projectAndGetPerspectiveRatio=function(l,p,u){var f=[p,u,0,1];return Yn(f,f,l),{point:new o.Point((f[0]/f[3]+1)/2*this.transform.width+100,(-f[1]/f[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/f[3]*.5}},uo.prototype.isOffscreen=function(l,p,u,f){return u<100||l>=this.screenRightBoundary||f<100||p>this.screenBottomBoundary},uo.prototype.isInsideGrid=function(l,p,u,f){return u>=0&&l<this.gridRightBoundary&&f>=0&&p<this.gridBottomBoundary},uo.prototype.getViewportMatrix=function(){var l=o.identity([]);return o.translate(l,l,[-100,-100,0]),l};var Mo=function(l,p,u,f){this.opacity=l?Math.max(0,Math.min(1,l.opacity+(l.placed?p:-p))):f&&u?1:0,this.placed=u};Mo.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var ro=function(l,p,u,f,g){this.text=new Mo(l?l.text:null,p,u,g),this.icon=new Mo(l?l.icon:null,p,f,g)};ro.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var yd=function(l,p,u){this.text=l,this.icon=p,this.skipFade=u},co=function(){this.invProjMatrix=o.create(),this.viewportMatrix=o.create(),this.circles=[]},wv=function(l,p,u,f,g){this.bucketInstanceId=l,this.featureIndex=p,this.sourceLayerIndex=u,this.bucketIndex=f,this.tileID=g},ua=function(l){this.crossSourceCollisions=l,this.maxGroupID=0,this.collisionGroups={}};function si(l,p,u,f,g){var b=o.getAnchorAlignment(l),w=-(b.horizontalAlign-.5)*p,S=-(b.verticalAlign-.5)*u,M=o.evaluateVariableOffset(l,f);return new o.Point(w+M[0]*g,S+M[1]*g)}function Go(l,p,u,f,g,b){var w=l.x1,S=l.x2,M=l.y1,B=l.y2,K=l.anchorPointX,Q=l.anchorPointY,J=new o.Point(p,u);return f&&J._rotate(g?b:-b),{x1:w+J.x,y1:M+J.y,x2:S+J.x,y2:B+J.y,anchorPointX:K,anchorPointY:Q}}ua.prototype.get=function(l){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[l]){var p=++this.maxGroupID;this.collisionGroups[l]={ID:p,predicate:function(u){return u.collisionGroupID===p}}}return this.collisionGroups[l]};var vi=function(l,p,u,f){this.transform=l.clone(),this.collisionIndex=new uo(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=p,this.retainedQueryData={},this.collisionGroups=new ua(u),this.collisionCircleArrays={},this.prevPlacement=f,f&&(f.prevPlacement=void 0),this.placedOrientations={}};function ls(l,p,u,f,g){l.emplaceBack(p?1:0,u?1:0,f||0,g||0),l.emplaceBack(p?1:0,u?1:0,f||0,g||0),l.emplaceBack(p?1:0,u?1:0,f||0,g||0),l.emplaceBack(p?1:0,u?1:0,f||0,g||0)}vi.prototype.getBucketParts=function(l,p,u,f){var g=u.getBucket(p),b=u.latestFeatureIndex;if(g&&b&&p.id===g.layerIds[0]){var w=u.collisionBoxArray,S=g.layers[0].layout,M=Math.pow(2,this.transform.zoom-u.tileID.overscaledZ),B=u.tileSize/o.EXTENT,K=this.transform.calculatePosMatrix(u.tileID.toUnwrapped()),Q=S.get("text-pitch-alignment")==="map",J=S.get("text-rotation-alignment")==="map",le=tn(u,1,this.transform.zoom),se=bn(K,Q,J,this.transform,le),ye=null;if(Q){var ie=jr(K,Q,J,this.transform,le);ye=o.multiply([],this.transform.labelPlaneMatrix,ie)}this.retainedQueryData[g.bucketInstanceId]=new wv(g.bucketInstanceId,b,g.sourceLayerIndex,g.index,u.tileID);var me={bucket:g,layout:S,posMatrix:K,textLabelPlaneMatrix:se,labelToScreenMatrix:ye,scale:M,textPixelRatio:B,holdingForFade:u.holdingForFade(),collisionBoxArray:w,partiallyEvaluatedTextSize:o.evaluateSizeForZoom(g.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(g.sourceID)};if(f)for(var _e=0,Pe=g.sortKeyRanges;_e<Pe.length;_e+=1){var Fe=Pe[_e];l.push({sortKey:Fe.sortKey,symbolInstanceStart:Fe.symbolInstanceStart,symbolInstanceEnd:Fe.symbolInstanceEnd,parameters:me})}else l.push({symbolInstanceStart:0,symbolInstanceEnd:g.symbolInstances.length,parameters:me})}},vi.prototype.attemptAnchorPlacement=function(l,p,u,f,g,b,w,S,M,B,K,Q,J,le,se){var ye,ie=[Q.textOffset0,Q.textOffset1],me=si(l,u,f,ie,g),_e=this.collisionIndex.placeCollisionBox(Go(p,me.x,me.y,b,w,this.transform.angle),K,S,M,B.predicate);if(!se||this.collisionIndex.placeCollisionBox(Go(se,me.x,me.y,b,w,this.transform.angle),K,S,M,B.predicate).box.length!==0)return _e.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[Q.crossTileID]&&this.prevPlacement.placements[Q.crossTileID]&&this.prevPlacement.placements[Q.crossTileID].text&&(ye=this.prevPlacement.variableOffsets[Q.crossTileID].anchor),this.variableOffsets[Q.crossTileID]={textOffset:ie,width:u,height:f,anchor:l,textBoxScale:g,prevAnchor:ye},this.markUsedJustification(J,l,Q,le),J.allowVerticalPlacement&&(this.markUsedOrientation(J,le,Q),this.placedOrientations[Q.crossTileID]=le),{shift:me,placedGlyphBoxes:_e}):void 0},vi.prototype.placeLayerBucketPart=function(l,p,u){var f=this,g=l.parameters,b=g.bucket,w=g.layout,S=g.posMatrix,M=g.textLabelPlaneMatrix,B=g.labelToScreenMatrix,K=g.textPixelRatio,Q=g.holdingForFade,J=g.collisionBoxArray,le=g.partiallyEvaluatedTextSize,se=g.collisionGroup,ye=w.get("text-optional"),ie=w.get("icon-optional"),me=w.get("text-allow-overlap"),_e=w.get("icon-allow-overlap"),Pe=w.get("text-rotation-alignment")==="map",Fe=w.get("text-pitch-alignment")==="map",De=w.get("icon-text-fit")!=="none",Ue=w.get("symbol-z-order")==="viewport-y",He=me&&(_e||!b.hasIconData()||ie),et=_e&&(me||!b.hasTextData()||ye);!b.collisionArrays&&J&&b.deserializeCollisionBoxes(J);var Ye=function(yt,qt){if(!p[yt.crossTileID])if(Q)f.placements[yt.crossTileID]=new yd(!1,!1,!1);else{var Jt,Vt=!1,Ut=!1,Xt=!0,Ft=null,Ot={box:null,offscreen:null},Vn={box:null,offscreen:null},mn=null,hi=null,ti=0,pn=0,An=0;qt.textFeatureIndex?ti=qt.textFeatureIndex:yt.useRuntimeCollisionCircles&&(ti=yt.featureIndex),qt.verticalTextFeatureIndex&&(pn=qt.verticalTextFeatureIndex);var Gi=qt.textBox;if(Gi){var bi=function(Rr){var oo=o.WritingMode.horizontal;if(b.allowVerticalPlacement&&!Rr&&f.prevPlacement){var Mi=f.prevPlacement.placedOrientations[yt.crossTileID];Mi&&(f.placedOrientations[yt.crossTileID]=Mi,f.markUsedOrientation(b,oo=Mi,yt))}return oo},Fa=function(Rr,oo){if(b.allowVerticalPlacement&&yt.numVerticalGlyphVertices>0&&qt.verticalTextBox)for(var Mi=0,Cs=b.writingModes;Mi<Cs.length&&(Cs[Mi]===o.WritingMode.vertical?(Ot=oo(),Vn=Ot):Ot=Rr(),!(Ot&&Ot.box&&Ot.box.length));Mi+=1);else Ot=Rr()};if(w.get("text-variable-anchor")){var Pi=w.get("text-variable-anchor");if(f.prevPlacement&&f.prevPlacement.variableOffsets[yt.crossTileID]){var Bo=f.prevPlacement.variableOffsets[yt.crossTileID];Pi.indexOf(Bo.anchor)>0&&(Pi=Pi.filter(function(Rr){return Rr!==Bo.anchor})).unshift(Bo.anchor)}var yo=function(Rr,oo,Mi){for(var Cs=Rr.x2-Rr.x1,Dv=Rr.y2-Rr.y1,cc=yt.textBoxScale,Bv=De&&!_e?oo:null,lu={box:[],offscreen:!1},Hd=me?2*Pi.length:Pi.length,sl=0;sl<Hd;++sl){var pc=f.attemptAnchorPlacement(Pi[sl%Pi.length],Rr,Cs,Dv,cc,Pe,Fe,K,S,se,sl>=Pi.length,yt,b,Mi,Bv);if(pc&&(lu=pc.placedGlyphBoxes)&&lu.box&&lu.box.length){Vt=!0,Ft=pc.shift;break}}return lu};Fa(function(){return yo(Gi,qt.iconBox,o.WritingMode.horizontal)},function(){var Rr=qt.verticalTextBox;return b.allowVerticalPlacement&&!(Ot&&Ot.box&&Ot.box.length)&&yt.numVerticalGlyphVertices>0&&Rr?yo(Rr,qt.verticalIconBox,o.WritingMode.vertical):{box:null,offscreen:null}}),Ot&&(Vt=Ot.box,Xt=Ot.offscreen);var ou=bi(Ot&&Ot.box);if(!Vt&&f.prevPlacement){var ol=f.prevPlacement.variableOffsets[yt.crossTileID];ol&&(f.variableOffsets[yt.crossTileID]=ol,f.markUsedJustification(b,ol.anchor,yt,ou))}}else{var Ua=function(Rr,oo){var Mi=f.collisionIndex.placeCollisionBox(Rr,me,K,S,se.predicate);return Mi&&Mi.box&&Mi.box.length&&(f.markUsedOrientation(b,oo,yt),f.placedOrientations[yt.crossTileID]=oo),Mi};Fa(function(){return Ua(Gi,o.WritingMode.horizontal)},function(){var Rr=qt.verticalTextBox;return b.allowVerticalPlacement&&yt.numVerticalGlyphVertices>0&&Rr?Ua(Rr,o.WritingMode.vertical):{box:null,offscreen:null}}),bi(Ot&&Ot.box&&Ot.box.length)}}if(Vt=(Jt=Ot)&&Jt.box&&Jt.box.length>0,Xt=Jt&&Jt.offscreen,yt.useRuntimeCollisionCircles){var al=b.text.placedSymbolArray.get(yt.centerJustifiedTextSymbolIndex),au=o.evaluateSizeForFeature(b.textSizeData,le,al),Xo=w.get("text-padding");mn=f.collisionIndex.placeCollisionCircles(me,al,b.lineVertexArray,b.glyphOffsetArray,au,S,M,B,u,Fe,se.predicate,yt.collisionCircleDiameter,Xo),Vt=me||mn.circles.length>0&&!mn.collisionDetected,Xt=Xt&&mn.offscreen}if(qt.iconFeatureIndex&&(An=qt.iconFeatureIndex),qt.iconBox){var su=function(Rr){var oo=De&&Ft?Go(Rr,Ft.x,Ft.y,Pe,Fe,f.transform.angle):Rr;return f.collisionIndex.placeCollisionBox(oo,_e,K,S,se.predicate)};Ut=Vn&&Vn.box&&Vn.box.length&&qt.verticalIconBox?(hi=su(qt.verticalIconBox)).box.length>0:(hi=su(qt.iconBox)).box.length>0,Xt=Xt&&hi.offscreen}var Qo=ye||yt.numHorizontalGlyphVertices===0&&yt.numVerticalGlyphVertices===0,$n=ie||yt.numIconVertices===0;if(Qo||$n?$n?Qo||(Ut=Ut&&Vt):Vt=Ut&&Vt:Ut=Vt=Ut&&Vt,Vt&&Jt&&Jt.box&&f.collisionIndex.insertCollisionBox(Jt.box,w.get("text-ignore-placement"),b.bucketInstanceId,Vn&&Vn.box&&pn?pn:ti,se.ID),Ut&&hi&&f.collisionIndex.insertCollisionBox(hi.box,w.get("icon-ignore-placement"),b.bucketInstanceId,An,se.ID),mn&&(Vt&&f.collisionIndex.insertCollisionCircles(mn.circles,w.get("text-ignore-placement"),b.bucketInstanceId,ti,se.ID),u)){var fa=b.bucketInstanceId,ja=f.collisionCircleArrays[fa];ja===void 0&&(ja=f.collisionCircleArrays[fa]=new co);for(var Ss=0;Ss<mn.circles.length;Ss+=4)ja.circles.push(mn.circles[Ss+0]),ja.circles.push(mn.circles[Ss+1]),ja.circles.push(mn.circles[Ss+2]),ja.circles.push(mn.collisionDetected?1:0)}f.placements[yt.crossTileID]=new yd(Vt||He,Ut||et,Xt||b.justReloaded),p[yt.crossTileID]=!0}};if(Ue)for(var dt=b.getSortedSymbolIndexes(this.transform.angle),kt=dt.length-1;kt>=0;--kt){var Rt=dt[kt];Ye(b.symbolInstances.get(Rt),b.collisionArrays[Rt])}else for(var Pt=l.symbolInstanceStart;Pt<l.symbolInstanceEnd;Pt++)Ye(b.symbolInstances.get(Pt),b.collisionArrays[Pt]);if(u&&b.bucketInstanceId in this.collisionCircleArrays){var br=this.collisionCircleArrays[b.bucketInstanceId];o.invert(br.invProjMatrix,S),br.viewportMatrix=this.collisionIndex.getViewportMatrix()}b.justReloaded=!1},vi.prototype.markUsedJustification=function(l,p,u,f){var g;g=f===o.WritingMode.vertical?u.verticalPlacedTextSymbolIndex:{left:u.leftJustifiedTextSymbolIndex,center:u.centerJustifiedTextSymbolIndex,right:u.rightJustifiedTextSymbolIndex}[o.getAnchorJustification(p)];for(var b=0,w=[u.leftJustifiedTextSymbolIndex,u.centerJustifiedTextSymbolIndex,u.rightJustifiedTextSymbolIndex,u.verticalPlacedTextSymbolIndex];b<w.length;b+=1){var S=w[b];S>=0&&(l.text.placedSymbolArray.get(S).crossTileID=g>=0&&S!==g?0:u.crossTileID)}},vi.prototype.markUsedOrientation=function(l,p,u){for(var f=p===o.WritingMode.horizontal||p===o.WritingMode.horizontalOnly?p:0,g=p===o.WritingMode.vertical?p:0,b=0,w=[u.leftJustifiedTextSymbolIndex,u.centerJustifiedTextSymbolIndex,u.rightJustifiedTextSymbolIndex];b<w.length;b+=1)l.text.placedSymbolArray.get(w[b]).placedOrientation=f;u.verticalPlacedTextSymbolIndex&&(l.text.placedSymbolArray.get(u.verticalPlacedTextSymbolIndex).placedOrientation=g)},vi.prototype.commit=function(l){this.commitTime=l,this.zoomAtLastRecencyCheck=this.transform.zoom;var p=this.prevPlacement,u=!1;this.prevZoomAdjustment=p?p.zoomAdjustment(this.transform.zoom):0;var f=p?p.symbolFadeChange(l):1,g=p?p.opacities:{},b=p?p.variableOffsets:{},w=p?p.placedOrientations:{};for(var S in this.placements){var M=this.placements[S],B=g[S];B?(this.opacities[S]=new ro(B,f,M.text,M.icon),u=u||M.text!==B.text.placed||M.icon!==B.icon.placed):(this.opacities[S]=new ro(null,f,M.text,M.icon,M.skipFade),u=u||M.text||M.icon)}for(var K in g){var Q=g[K];if(!this.opacities[K]){var J=new ro(Q,f,!1,!1);J.isHidden()||(this.opacities[K]=J,u=u||Q.text.placed||Q.icon.placed)}}for(var le in b)this.variableOffsets[le]||!this.opacities[le]||this.opacities[le].isHidden()||(this.variableOffsets[le]=b[le]);for(var se in w)this.placedOrientations[se]||!this.opacities[se]||this.opacities[se].isHidden()||(this.placedOrientations[se]=w[se]);u?this.lastPlacementChangeTime=l:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=p?p.lastPlacementChangeTime:l)},vi.prototype.updateLayerOpacities=function(l,p){for(var u={},f=0,g=p;f<g.length;f+=1){var b=g[f],w=b.getBucket(l);w&&b.latestFeatureIndex&&l.id===w.layerIds[0]&&this.updateBucketOpacities(w,u,b.collisionBoxArray)}},vi.prototype.updateBucketOpacities=function(l,p,u){var f=this;l.hasTextData()&&l.text.opacityVertexArray.clear(),l.hasIconData()&&l.icon.opacityVertexArray.clear(),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexArray.clear(),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexArray.clear();var g=l.layers[0].layout,b=new ro(null,0,!1,!1,!0),w=g.get("text-allow-overlap"),S=g.get("icon-allow-overlap"),M=g.get("text-variable-anchor"),B=g.get("text-rotation-alignment")==="map",K=g.get("text-pitch-alignment")==="map",Q=g.get("icon-text-fit")!=="none",J=new ro(null,0,w&&(S||!l.hasIconData()||g.get("icon-optional")),S&&(w||!l.hasTextData()||g.get("text-optional")),!0);!l.collisionArrays&&u&&(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData())&&l.deserializeCollisionBoxes(u);for(var le=function(me,_e,Pe){for(var Fe=0;Fe<_e/4;Fe++)me.opacityVertexArray.emplaceBack(Pe)},se=function(me){var _e=l.symbolInstances.get(me),Pe=_e.numHorizontalGlyphVertices,Fe=_e.numVerticalGlyphVertices,De=_e.crossTileID,Ue=f.opacities[De];p[De]?Ue=b:Ue||(f.opacities[De]=Ue=J),p[De]=!0;var He=_e.numIconVertices>0,et=f.placedOrientations[_e.crossTileID],Ye=et===o.WritingMode.vertical,dt=et===o.WritingMode.horizontal||et===o.WritingMode.horizontalOnly;if(Pe>0||Fe>0){var kt=_d(Ue.text);le(l.text,Pe,Ye?Zs:kt),le(l.text,Fe,dt?Zs:kt);var Rt=Ue.text.isHidden();[_e.rightJustifiedTextSymbolIndex,_e.centerJustifiedTextSymbolIndex,_e.leftJustifiedTextSymbolIndex].forEach(function(Ot){Ot>=0&&(l.text.placedSymbolArray.get(Ot).hidden=Rt||Ye?1:0)}),_e.verticalPlacedTextSymbolIndex>=0&&(l.text.placedSymbolArray.get(_e.verticalPlacedTextSymbolIndex).hidden=Rt||dt?1:0);var Pt=f.variableOffsets[_e.crossTileID];Pt&&f.markUsedJustification(l,Pt.anchor,_e,et);var br=f.placedOrientations[_e.crossTileID];br&&(f.markUsedJustification(l,"left",_e,br),f.markUsedOrientation(l,br,_e))}if(He){var yt=_d(Ue.icon),qt=!(Q&&_e.verticalPlacedIconSymbolIndex&&Ye);_e.placedIconSymbolIndex>=0&&(le(l.icon,_e.numIconVertices,qt?yt:Zs),l.icon.placedSymbolArray.get(_e.placedIconSymbolIndex).hidden=Ue.icon.isHidden()),_e.verticalPlacedIconSymbolIndex>=0&&(le(l.icon,_e.numVerticalIconVertices,qt?Zs:yt),l.icon.placedSymbolArray.get(_e.verticalPlacedIconSymbolIndex).hidden=Ue.icon.isHidden())}if(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData()){var Jt=l.collisionArrays[me];if(Jt){var Vt=new o.Point(0,0);if(Jt.textBox||Jt.verticalTextBox){var Ut=!0;if(M){var Xt=f.variableOffsets[De];Xt?(Vt=si(Xt.anchor,Xt.width,Xt.height,Xt.textOffset,Xt.textBoxScale),B&&Vt._rotate(K?f.transform.angle:-f.transform.angle)):Ut=!1}Jt.textBox&&ls(l.textCollisionBox.collisionVertexArray,Ue.text.placed,!Ut||Ye,Vt.x,Vt.y),Jt.verticalTextBox&&ls(l.textCollisionBox.collisionVertexArray,Ue.text.placed,!Ut||dt,Vt.x,Vt.y)}var Ft=!!(!dt&&Jt.verticalIconBox);Jt.iconBox&&ls(l.iconCollisionBox.collisionVertexArray,Ue.icon.placed,Ft,Q?Vt.x:0,Q?Vt.y:0),Jt.verticalIconBox&&ls(l.iconCollisionBox.collisionVertexArray,Ue.icon.placed,!Ft,Q?Vt.x:0,Q?Vt.y:0)}}},ye=0;ye<l.symbolInstances.length;ye++)se(ye);if(l.sortFeatures(this.transform.angle),this.retainedQueryData[l.bucketInstanceId]&&(this.retainedQueryData[l.bucketInstanceId].featureSortOrder=l.featureSortOrder),l.hasTextData()&&l.text.opacityVertexBuffer&&l.text.opacityVertexBuffer.updateData(l.text.opacityVertexArray),l.hasIconData()&&l.icon.opacityVertexBuffer&&l.icon.opacityVertexBuffer.updateData(l.icon.opacityVertexArray),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexBuffer&&l.iconCollisionBox.collisionVertexBuffer.updateData(l.iconCollisionBox.collisionVertexArray),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexBuffer&&l.textCollisionBox.collisionVertexBuffer.updateData(l.textCollisionBox.collisionVertexArray),l.bucketInstanceId in this.collisionCircleArrays){var ie=this.collisionCircleArrays[l.bucketInstanceId];l.placementInvProjMatrix=ie.invProjMatrix,l.placementViewportMatrix=ie.viewportMatrix,l.collisionCircleArray=ie.circles,delete this.collisionCircleArrays[l.bucketInstanceId]}},vi.prototype.symbolFadeChange=function(l){return this.fadeDuration===0?1:(l-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},vi.prototype.zoomAdjustment=function(l){return Math.max(0,(this.transform.zoom-l)/1.5)},vi.prototype.hasTransitions=function(l){return this.stale||l-this.lastPlacementChangeTime<this.fadeDuration},vi.prototype.stillRecent=function(l,p){var u=this.zoomAtLastRecencyCheck===p?1-this.zoomAdjustment(p):1;return this.zoomAtLastRecencyCheck=p,this.commitTime+this.fadeDuration*u>l},vi.prototype.setStale=function(){this.stale=!0};var Av=Math.pow(2,25),Ev=Math.pow(2,24),Vp=Math.pow(2,17),Sv=Math.pow(2,16),gd=Math.pow(2,9),Cv=Math.pow(2,8),vd=Math.pow(2,1);function _d(l){if(l.opacity===0&&!l.placed)return 0;if(l.opacity===1&&l.placed)return 4294967295;var p=l.placed?1:0,u=Math.floor(127*l.opacity);return u*Av+p*Ev+u*Vp+p*Sv+u*gd+p*Cv+u*vd+p}var Zs=0,$p=function(l){this._sortAcrossTiles=l.layout.get("symbol-z-order")!=="viewport-y"&&l.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};$p.prototype.continuePlacement=function(l,p,u,f,g){for(var b=this._bucketParts;this._currentTileIndex<l.length;)if(p.getBucketParts(b,f,l[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,g())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,b.sort(function(w,S){return w.sortKey-S.sortKey}));this._currentPartIndex<b.length;)if(p.placeLayerBucketPart(b[this._currentPartIndex],this._seenCrossTileIDs,u),this._currentPartIndex++,g())return!0;return!1};var Vl=function(l,p,u,f,g,b,w){this.placement=new vi(l,g,b,w),this._currentPlacementIndex=p.length-1,this._forceFullPlacement=u,this._showCollisionBoxes=f,this._done=!1};Vl.prototype.isDone=function(){return this._done},Vl.prototype.continuePlacement=function(l,p,u){for(var f=this,g=o.browser.now(),b=function(){var M=o.browser.now()-g;return!f._forceFullPlacement&&M>2};this._currentPlacementIndex>=0;){var w=p[l[this._currentPlacementIndex]],S=this.placement.collisionIndex.transform.zoom;if(w.type==="symbol"&&(!w.minzoom||w.minzoom<=S)&&(!w.maxzoom||w.maxzoom>S)){if(this._inProgressLayer||(this._inProgressLayer=new $p(w)),this._inProgressLayer.continuePlacement(u[w.source],this.placement,this._showCollisionBoxes,w,b))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Vl.prototype.commit=function(l){return this.placement.commit(l),this.placement};var xd=512/o.EXTENT/2,qu=function(l,p,u){this.tileID=l,this.indexedSymbolInstances={},this.bucketInstanceId=u;for(var f=0;f<p.length;f++){var g=p.get(f),b=g.key;this.indexedSymbolInstances[b]||(this.indexedSymbolInstances[b]=[]),this.indexedSymbolInstances[b].push({crossTileID:g.crossTileID,coord:this.getScaledCoordinates(g,l)})}};qu.prototype.getScaledCoordinates=function(l,p){var u=xd/Math.pow(2,p.canonical.z-this.tileID.canonical.z);return{x:Math.floor((p.canonical.x*o.EXTENT+l.anchorX)*u),y:Math.floor((p.canonical.y*o.EXTENT+l.anchorY)*u)}},qu.prototype.findMatches=function(l,p,u){for(var f=this.tileID.canonical.z<p.canonical.z?1:Math.pow(2,this.tileID.canonical.z-p.canonical.z),g=0;g<l.length;g++){var b=l.get(g);if(!b.crossTileID){var w=this.indexedSymbolInstances[b.key];if(w)for(var S=this.getScaledCoordinates(b,p),M=0,B=w;M<B.length;M+=1){var K=B[M];if(Math.abs(K.coord.x-S.x)<=f&&Math.abs(K.coord.y-S.y)<=f&&!u[K.crossTileID]){u[K.crossTileID]=!0,b.crossTileID=K.crossTileID;break}}}}};var po=function(){this.maxCrossTileID=0};po.prototype.generate=function(){return++this.maxCrossTileID};var Sa=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Sa.prototype.handleWrapJump=function(l){var p=Math.round((l-this.lng)/360);if(p!==0)for(var u in this.indexes){var f=this.indexes[u],g={};for(var b in f){var w=f[b];w.tileID=w.tileID.unwrapTo(w.tileID.wrap+p),g[w.tileID.key]=w}this.indexes[u]=g}this.lng=l},Sa.prototype.addBucket=function(l,p,u){if(this.indexes[l.overscaledZ]&&this.indexes[l.overscaledZ][l.key]){if(this.indexes[l.overscaledZ][l.key].bucketInstanceId===p.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(l.overscaledZ,this.indexes[l.overscaledZ][l.key])}for(var f=0;f<p.symbolInstances.length;f++)p.symbolInstances.get(f).crossTileID=0;this.usedCrossTileIDs[l.overscaledZ]||(this.usedCrossTileIDs[l.overscaledZ]={});var g=this.usedCrossTileIDs[l.overscaledZ];for(var b in this.indexes){var w=this.indexes[b];if(Number(b)>l.overscaledZ)for(var S in w){var M=w[S];M.tileID.isChildOf(l)&&M.findMatches(p.symbolInstances,l,g)}else{var B=w[l.scaledTo(Number(b)).key];B&&B.findMatches(p.symbolInstances,l,g)}}for(var K=0;K<p.symbolInstances.length;K++){var Q=p.symbolInstances.get(K);Q.crossTileID||(Q.crossTileID=u.generate(),g[Q.crossTileID]=!0)}return this.indexes[l.overscaledZ]===void 0&&(this.indexes[l.overscaledZ]={}),this.indexes[l.overscaledZ][l.key]=new qu(l,p.symbolInstances,p.bucketInstanceId),!0},Sa.prototype.removeBucketCrossTileIDs=function(l,p){for(var u in p.indexedSymbolInstances)for(var f=0,g=p.indexedSymbolInstances[u];f<g.length;f+=1)delete this.usedCrossTileIDs[l][g[f].crossTileID]},Sa.prototype.removeStaleBuckets=function(l){var p=!1;for(var u in this.indexes){var f=this.indexes[u];for(var g in f)l[f[g].bucketInstanceId]||(this.removeBucketCrossTileIDs(u,f[g]),delete f[g],p=!0)}return p};var Ca=function(){this.layerIndexes={},this.crossTileIDs=new po,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Ca.prototype.addLayer=function(l,p,u){var f=this.layerIndexes[l.id];f===void 0&&(f=this.layerIndexes[l.id]=new Sa);var g=!1,b={};f.handleWrapJump(u);for(var w=0,S=p;w<S.length;w+=1){var M=S[w],B=M.getBucket(l);B&&l.id===B.layerIds[0]&&(B.bucketInstanceId||(B.bucketInstanceId=++this.maxBucketInstanceId),f.addBucket(M.tileID,B,this.crossTileIDs)&&(g=!0),b[B.bucketInstanceId]=!0)}return f.removeStaleBuckets(b)&&(g=!0),g},Ca.prototype.pruneUnusedLayers=function(l){var p={};for(var u in l.forEach(function(f){p[f]=!0}),this.layerIndexes)p[u]||delete this.layerIndexes[u]};var us=function(l,p){return o.emitValidationErrors(l,p&&p.filter(function(u){return u.identifier!=="source.canvas"}))},ka=o.pick(at,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Ta=o.pick(at,["setCenter","setZoom","setBearing","setPitch"]),Wu=function(){var l={},p=o.styleSpec.$version;for(var u in o.styleSpec.$root){var f,g=o.styleSpec.$root[u];g.required&&(f=u==="version"?p:g.type==="array"?[]:{})!=null&&(l[u]=f)}return l}(),Ui=function(l){function p(u,f){var g=this;f===void 0&&(f={}),l.call(this),this.map=u,this.dispatcher=new Ne(Ve(),this),this.imageManager=new q,this.imageManager.setEventedParent(this),this.glyphManager=new Te(u._requestManager,f.localIdeographFontFamily),this.lineAtlas=new he(256,512),this.crossTileSymbolIndex=new Ca,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new o.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",o.getReferrer());var b=this;this._rtlTextPluginCallback=p.registerForPluginStateChange(function(w){b.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:w.pluginStatus,pluginURL:w.pluginURL},function(S,M){if(o.triggerPluginCompletionEvent(S),M&&M.every(function(K){return K}))for(var B in b.sourceCaches)b.sourceCaches[B].reload()})}),this.on("data",function(w){if(w.dataType==="source"&&w.sourceDataType==="metadata"){var S=g.sourceCaches[w.sourceId];if(S){var M=S.getSource();if(M&&M.vectorLayerIds)for(var B in g._layers){var K=g._layers[B];K.source===M.id&&g._validateLayer(K)}}}})}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.loadURL=function(u,f){var g=this;f===void 0&&(f={}),this.fire(new o.Event("dataloading",{dataType:"style"}));var b=typeof f.validate=="boolean"?f.validate:!o.isMapboxURL(u);u=this.map._requestManager.normalizeStyleURL(u,f.accessToken);var w=this.map._requestManager.transformRequest(u,o.ResourceType.Style);this._request=o.getJSON(w,function(S,M){g._request=null,S?g.fire(new o.ErrorEvent(S)):M&&g._load(M,b)})},p.prototype.loadJSON=function(u,f){var g=this;f===void 0&&(f={}),this.fire(new o.Event("dataloading",{dataType:"style"})),this._request=o.browser.frame(function(){g._request=null,g._load(u,f.validate!==!1)})},p.prototype.loadEmpty=function(){this.fire(new o.Event("dataloading",{dataType:"style"})),this._load(Wu,!1)},p.prototype._load=function(u,f){if(!f||!us(this,o.validateStyle(u))){for(var g in this._loaded=!0,this.stylesheet=u,u.sources)this.addSource(g,u.sources[g],{validate:!1});u.sprite?this._loadSprite(u.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(u.glyphs);var b=it(this.stylesheet.layers);this._order=b.map(function(B){return B.id}),this._layers={},this._serializedLayers={};for(var w=0,S=b;w<S.length;w+=1){var M=S[w];(M=o.createStyleLayer(M)).setEventedParent(this,{layer:{id:M.id}}),this._layers[M.id]=M,this._serializedLayers[M.id]=M.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Y(this.stylesheet.light),this.fire(new o.Event("data",{dataType:"style"})),this.fire(new o.Event("style.load"))}},p.prototype._loadSprite=function(u){var f=this;this._spriteRequest=function(g,b,w){var S,M,B,K=o.browser.devicePixelRatio>1?"@2x":"",Q=o.getJSON(b.transformRequest(b.normalizeSpriteURL(g,K,".json"),o.ResourceType.SpriteJSON),function(se,ye){Q=null,B||(B=se,S=ye,le())}),J=o.getImage(b.transformRequest(b.normalizeSpriteURL(g,K,".png"),o.ResourceType.SpriteImage),function(se,ye){J=null,B||(B=se,M=ye,le())});function le(){if(B)w(B);else if(S&&M){var se=o.browser.getImageData(M),ye={};for(var ie in S){var me=S[ie],_e=me.width,Pe=me.height,Fe=me.x,De=me.y,Ue=me.sdf,He=me.pixelRatio,et=me.stretchX,Ye=me.stretchY,dt=me.content,kt=new o.RGBAImage({width:_e,height:Pe});o.RGBAImage.copy(se,kt,{x:Fe,y:De},{x:0,y:0},{width:_e,height:Pe}),ye[ie]={data:kt,pixelRatio:He,sdf:Ue,stretchX:et,stretchY:Ye,content:dt}}w(null,ye)}}return{cancel:function(){Q&&(Q.cancel(),Q=null),J&&(J.cancel(),J=null)}}}(u,this.map._requestManager,function(g,b){if(f._spriteRequest=null,g)f.fire(new o.ErrorEvent(g));else if(b)for(var w in b)f.imageManager.addImage(w,b[w]);f.imageManager.setLoaded(!0),f._availableImages=f.imageManager.listImages(),f.dispatcher.broadcast("setImages",f._availableImages),f.fire(new o.Event("data",{dataType:"style"}))})},p.prototype._validateLayer=function(u){var f=this.sourceCaches[u.source];if(f){var g=u.sourceLayer;if(g){var b=f.getSource();(b.type==="geojson"||b.vectorLayerIds&&b.vectorLayerIds.indexOf(g)===-1)&&this.fire(new o.ErrorEvent(new Error('Source layer "'+g+'" does not exist on source "'+b.id+'" as specified by style layer "'+u.id+'"')))}}},p.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var u in this.sourceCaches)if(!this.sourceCaches[u].loaded())return!1;return!!this.imageManager.isLoaded()},p.prototype._serializeLayers=function(u){for(var f=[],g=0,b=u;g<b.length;g+=1){var w=this._layers[b[g]];w.type!=="custom"&&f.push(w.serialize())}return f},p.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var u in this.sourceCaches)if(this.sourceCaches[u].hasTransition())return!0;for(var f in this._layers)if(this._layers[f].hasTransition())return!0;return!1},p.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},p.prototype.update=function(u){if(this._loaded){var f=this._changed;if(this._changed){var g=Object.keys(this._updatedLayers),b=Object.keys(this._removedLayers);for(var w in(g.length||b.length)&&this._updateWorkerLayers(g,b),this._updatedSources){var S=this._updatedSources[w];S==="reload"?this._reloadSource(w):S==="clear"&&this._clearSource(w)}for(var M in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[M].updateTransitions(u);this.light.updateTransitions(u),this._resetUpdates()}var B={};for(var K in this.sourceCaches){var Q=this.sourceCaches[K];B[K]=Q.used,Q.used=!1}for(var J=0,le=this._order;J<le.length;J+=1){var se=this._layers[le[J]];se.recalculate(u,this._availableImages),!se.isHidden(u.zoom)&&se.source&&(this.sourceCaches[se.source].used=!0)}for(var ye in B){var ie=this.sourceCaches[ye];B[ye]!==ie.used&&ie.fire(new o.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:ye}))}this.light.recalculate(u),this.z=u.zoom,f&&this.fire(new o.Event("data",{dataType:"style"}))}},p.prototype._updateTilesForChangedImages=function(){var u=Object.keys(this._changedImages);if(u.length){for(var f in this.sourceCaches)this.sourceCaches[f].reloadTilesForDependencies(["icons","patterns"],u);this._changedImages={}}},p.prototype._updateWorkerLayers=function(u,f){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(u),removedIds:f})},p.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},p.prototype.setState=function(u){var f=this;if(this._checkLoaded(),us(this,o.validateStyle(u)))return!1;(u=o.clone$1(u)).layers=it(u.layers);var g=function(w,S){if(!w)return[{command:at.setStyle,args:[S]}];var M=[];try{if(!o.deepEqual(w.version,S.version))return[{command:at.setStyle,args:[S]}];o.deepEqual(w.center,S.center)||M.push({command:at.setCenter,args:[S.center]}),o.deepEqual(w.zoom,S.zoom)||M.push({command:at.setZoom,args:[S.zoom]}),o.deepEqual(w.bearing,S.bearing)||M.push({command:at.setBearing,args:[S.bearing]}),o.deepEqual(w.pitch,S.pitch)||M.push({command:at.setPitch,args:[S.pitch]}),o.deepEqual(w.sprite,S.sprite)||M.push({command:at.setSprite,args:[S.sprite]}),o.deepEqual(w.glyphs,S.glyphs)||M.push({command:at.setGlyphs,args:[S.glyphs]}),o.deepEqual(w.transition,S.transition)||M.push({command:at.setTransition,args:[S.transition]}),o.deepEqual(w.light,S.light)||M.push({command:at.setLight,args:[S.light]});var B={},K=[];(function(J,le,se,ye){var ie;for(ie in le=le||{},J=J||{})J.hasOwnProperty(ie)&&(le.hasOwnProperty(ie)||pt(ie,se,ye));for(ie in le)le.hasOwnProperty(ie)&&(J.hasOwnProperty(ie)?o.deepEqual(J[ie],le[ie])||(J[ie].type==="geojson"&&le[ie].type==="geojson"&&$r(J,le,ie)?se.push({command:at.setGeoJSONSourceData,args:[ie,le[ie].data]}):gr(ie,le,se,ye)):rr(ie,le,se))})(w.sources,S.sources,K,B);var Q=[];w.layers&&w.layers.forEach(function(J){B[J.source]?M.push({command:at.removeLayer,args:[J.id]}):Q.push(J)}),M=M.concat(K),function(J,le,se){le=le||[];var ye,ie,me,_e,Pe,Fe,De,Ue=(J=J||[]).map(Pr),He=le.map(Pr),et=J.reduce(_r,{}),Ye=le.reduce(_r,{}),dt=Ue.slice(),kt=Object.create(null);for(ye=0,ie=0;ye<Ue.length;ye++)Ye.hasOwnProperty(me=Ue[ye])?ie++:(se.push({command:at.removeLayer,args:[me]}),dt.splice(dt.indexOf(me,ie),1));for(ye=0,ie=0;ye<He.length;ye++)dt[dt.length-1-ye]!==(me=He[He.length-1-ye])&&(et.hasOwnProperty(me)?(se.push({command:at.removeLayer,args:[me]}),dt.splice(dt.lastIndexOf(me,dt.length-ie),1)):ie++,se.push({command:at.addLayer,args:[Ye[me],Fe=dt[dt.length-ye]]}),dt.splice(dt.length-ye,0,me),kt[me]=!0);for(ye=0;ye<He.length;ye++)if(_e=et[me=He[ye]],Pe=Ye[me],!kt[me]&&!o.deepEqual(_e,Pe))if(o.deepEqual(_e.source,Pe.source)&&o.deepEqual(_e["source-layer"],Pe["source-layer"])&&o.deepEqual(_e.type,Pe.type)){for(De in lr(_e.layout,Pe.layout,se,me,null,at.setLayoutProperty),lr(_e.paint,Pe.paint,se,me,null,at.setPaintProperty),o.deepEqual(_e.filter,Pe.filter)||se.push({command:at.setFilter,args:[me,Pe.filter]}),o.deepEqual(_e.minzoom,Pe.minzoom)&&o.deepEqual(_e.maxzoom,Pe.maxzoom)||se.push({command:at.setLayerZoomRange,args:[me,Pe.minzoom,Pe.maxzoom]}),_e)_e.hasOwnProperty(De)&&De!=="layout"&&De!=="paint"&&De!=="filter"&&De!=="metadata"&&De!=="minzoom"&&De!=="maxzoom"&&(De.indexOf("paint.")===0?lr(_e[De],Pe[De],se,me,De.slice(6),at.setPaintProperty):o.deepEqual(_e[De],Pe[De])||se.push({command:at.setLayerProperty,args:[me,De,Pe[De]]}));for(De in Pe)Pe.hasOwnProperty(De)&&!_e.hasOwnProperty(De)&&De!=="layout"&&De!=="paint"&&De!=="filter"&&De!=="metadata"&&De!=="minzoom"&&De!=="maxzoom"&&(De.indexOf("paint.")===0?lr(_e[De],Pe[De],se,me,De.slice(6),at.setPaintProperty):o.deepEqual(_e[De],Pe[De])||se.push({command:at.setLayerProperty,args:[me,De,Pe[De]]}))}else se.push({command:at.removeLayer,args:[me]}),Fe=dt[dt.lastIndexOf(me)+1],se.push({command:at.addLayer,args:[Pe,Fe]})}(Q,S.layers,M)}catch(J){console.warn("Unable to compute style diff:",J),M=[{command:at.setStyle,args:[S]}]}return M}(this.serialize(),u).filter(function(w){return!(w.command in Ta)});if(g.length===0)return!1;var b=g.filter(function(w){return!(w.command in ka)});if(b.length>0)throw new Error("Unimplemented: "+b.map(function(w){return w.command}).join(", ")+".");return g.forEach(function(w){w.command!=="setTransition"&&f[w.command].apply(f,w.args)}),this.stylesheet=u,!0},p.prototype.addImage=function(u,f){if(this.getImage(u))return this.fire(new o.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(u,f),this._afterImageUpdated(u)},p.prototype.updateImage=function(u,f){this.imageManager.updateImage(u,f)},p.prototype.getImage=function(u){return this.imageManager.getImage(u)},p.prototype.removeImage=function(u){if(!this.getImage(u))return this.fire(new o.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(u),this._afterImageUpdated(u)},p.prototype._afterImageUpdated=function(u){this._availableImages=this.imageManager.listImages(),this._changedImages[u]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new o.Event("data",{dataType:"style"}))},p.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},p.prototype.addSource=function(u,f,g){var b=this;if(g===void 0&&(g={}),this._checkLoaded(),this.sourceCaches[u]!==void 0)throw new Error("There is already a source with this ID");if(!f.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(f).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(f.type)>=0&&this._validate(o.validateStyle.source,"sources."+u,f,null,g))){this.map&&this.map._collectResourceTiming&&(f.collectResourceTiming=!0);var w=this.sourceCaches[u]=new ue(u,f,this.dispatcher);w.style=this,w.setEventedParent(this,function(){return{isSourceLoaded:b.loaded(),source:w.serialize(),sourceId:u}}),w.onAdd(this.map),this._changed=!0}},p.prototype.removeSource=function(u){if(this._checkLoaded(),this.sourceCaches[u]===void 0)throw new Error("There is no source with this ID");for(var f in this._layers)if(this._layers[f].source===u)return this.fire(new o.ErrorEvent(new Error('Source "'+u+'" cannot be removed while layer "'+f+'" is using it.')));var g=this.sourceCaches[u];delete this.sourceCaches[u],delete this._updatedSources[u],g.fire(new o.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:u})),g.setEventedParent(null),g.clearTiles(),g.onRemove&&g.onRemove(this.map),this._changed=!0},p.prototype.setGeoJSONSourceData=function(u,f){this._checkLoaded(),this.sourceCaches[u].getSource().setData(f),this._changed=!0},p.prototype.getSource=function(u){return this.sourceCaches[u]&&this.sourceCaches[u].getSource()},p.prototype.addLayer=function(u,f,g){g===void 0&&(g={}),this._checkLoaded();var b=u.id;if(this.getLayer(b))this.fire(new o.ErrorEvent(new Error('Layer with id "'+b+'" already exists on this map')));else{var w;if(u.type==="custom"){if(us(this,o.validateCustomStyleLayer(u)))return;w=o.createStyleLayer(u)}else{if(typeof u.source=="object"&&(this.addSource(b,u.source),u=o.clone$1(u),u=o.extend(u,{source:b})),this._validate(o.validateStyle.layer,"layers."+b,u,{arrayIndex:-1},g))return;w=o.createStyleLayer(u),this._validateLayer(w),w.setEventedParent(this,{layer:{id:b}}),this._serializedLayers[w.id]=w.serialize()}var S=f?this._order.indexOf(f):this._order.length;if(f&&S===-1)this.fire(new o.ErrorEvent(new Error('Layer with id "'+f+'" does not exist on this map.')));else{if(this._order.splice(S,0,b),this._layerOrderChanged=!0,this._layers[b]=w,this._removedLayers[b]&&w.source&&w.type!=="custom"){var M=this._removedLayers[b];delete this._removedLayers[b],M.type!==w.type?this._updatedSources[w.source]="clear":(this._updatedSources[w.source]="reload",this.sourceCaches[w.source].pause())}this._updateLayer(w),w.onAdd&&w.onAdd(this.map)}}},p.prototype.moveLayer=function(u,f){if(this._checkLoaded(),this._changed=!0,this._layers[u]){if(u!==f){var g=this._order.indexOf(u);this._order.splice(g,1);var b=f?this._order.indexOf(f):this._order.length;f&&b===-1?this.fire(new o.ErrorEvent(new Error('Layer with id "'+f+'" does not exist on this map.'))):(this._order.splice(b,0,u),this._layerOrderChanged=!0)}}else this.fire(new o.ErrorEvent(new Error("The layer '"+u+"' does not exist in the map's style and cannot be moved.")))},p.prototype.removeLayer=function(u){this._checkLoaded();var f=this._layers[u];if(f){f.setEventedParent(null);var g=this._order.indexOf(u);this._order.splice(g,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[u]=f,delete this._layers[u],delete this._serializedLayers[u],delete this._updatedLayers[u],delete this._updatedPaintProps[u],f.onRemove&&f.onRemove(this.map)}else this.fire(new o.ErrorEvent(new Error("The layer '"+u+"' does not exist in the map's style and cannot be removed.")))},p.prototype.getLayer=function(u){return this._layers[u]},p.prototype.hasLayer=function(u){return u in this._layers},p.prototype.setLayerZoomRange=function(u,f,g){this._checkLoaded();var b=this.getLayer(u);b?b.minzoom===f&&b.maxzoom===g||(f!=null&&(b.minzoom=f),g!=null&&(b.maxzoom=g),this._updateLayer(b)):this.fire(new o.ErrorEvent(new Error("The layer '"+u+"' does not exist in the map's style and cannot have zoom extent.")))},p.prototype.setFilter=function(u,f,g){g===void 0&&(g={}),this._checkLoaded();var b=this.getLayer(u);if(b){if(!o.deepEqual(b.filter,f))return f==null?(b.filter=void 0,void this._updateLayer(b)):void(this._validate(o.validateStyle.filter,"layers."+b.id+".filter",f,null,g)||(b.filter=o.clone$1(f),this._updateLayer(b)))}else this.fire(new o.ErrorEvent(new Error("The layer '"+u+"' does not exist in the map's style and cannot be filtered.")))},p.prototype.getFilter=function(u){return o.clone$1(this.getLayer(u).filter)},p.prototype.setLayoutProperty=function(u,f,g,b){b===void 0&&(b={}),this._checkLoaded();var w=this.getLayer(u);w?o.deepEqual(w.getLayoutProperty(f),g)||(w.setLayoutProperty(f,g,b),this._updateLayer(w)):this.fire(new o.ErrorEvent(new Error("The layer '"+u+"' does not exist in the map's style and cannot be styled.")))},p.prototype.getLayoutProperty=function(u,f){var g=this.getLayer(u);if(g)return g.getLayoutProperty(f);this.fire(new o.ErrorEvent(new Error("The layer '"+u+"' does not exist in the map's style.")))},p.prototype.setPaintProperty=function(u,f,g,b){b===void 0&&(b={}),this._checkLoaded();var w=this.getLayer(u);w?o.deepEqual(w.getPaintProperty(f),g)||(w.setPaintProperty(f,g,b)&&this._updateLayer(w),this._changed=!0,this._updatedPaintProps[u]=!0):this.fire(new o.ErrorEvent(new Error("The layer '"+u+"' does not exist in the map's style and cannot be styled.")))},p.prototype.getPaintProperty=function(u,f){return this.getLayer(u).getPaintProperty(f)},p.prototype.setFeatureState=function(u,f){this._checkLoaded();var g=u.source,b=u.sourceLayer,w=this.sourceCaches[g];if(w!==void 0){var S=w.getSource().type;S==="geojson"&&b?this.fire(new o.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):S!=="vector"||b?(u.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided."))),w.setFeatureState(b,u.id,f)):this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error("The source '"+g+"' does not exist in the map's style.")))},p.prototype.removeFeatureState=function(u,f){this._checkLoaded();var g=u.source,b=this.sourceCaches[g];if(b!==void 0){var w=b.getSource().type,S=w==="vector"?u.sourceLayer:void 0;w!=="vector"||S?f&&typeof u.id!="string"&&typeof u.id!="number"?this.fire(new o.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):b.removeFeatureState(S,u.id,f):this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error("The source '"+g+"' does not exist in the map's style.")))},p.prototype.getFeatureState=function(u){this._checkLoaded();var f=u.source,g=u.sourceLayer,b=this.sourceCaches[f];if(b!==void 0){if(b.getSource().type!=="vector"||g)return u.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided."))),b.getFeatureState(g,u.id);this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error("The source '"+f+"' does not exist in the map's style.")))},p.prototype.getTransition=function(){return o.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},p.prototype.serialize=function(){return o.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:o.mapObject(this.sourceCaches,function(u){return u.serialize()}),layers:this._serializeLayers(this._order)},function(u){return u!==void 0})},p.prototype._updateLayer=function(u){this._updatedLayers[u.id]=!0,u.source&&!this._updatedSources[u.source]&&this.sourceCaches[u.source].getSource().type!=="raster"&&(this._updatedSources[u.source]="reload",this.sourceCaches[u.source].pause()),this._changed=!0},p.prototype._flattenAndSortRenderedFeatures=function(u){for(var f=this,g=function(et){return f._layers[et].type==="fill-extrusion"},b={},w=[],S=this._order.length-1;S>=0;S--){var M=this._order[S];if(g(M)){b[M]=S;for(var B=0,K=u;B<K.length;B+=1){var Q=K[B][M];if(Q)for(var J=0,le=Q;J<le.length;J+=1)w.push(le[J])}}}w.sort(function(et,Ye){return Ye.intersectionZ-et.intersectionZ});for(var se=[],ye=this._order.length-1;ye>=0;ye--){var ie=this._order[ye];if(g(ie))for(var me=w.length-1;me>=0;me--){var _e=w[me].feature;if(b[_e.layer.id]<ye)break;se.push(_e),w.pop()}else for(var Pe=0,Fe=u;Pe<Fe.length;Pe+=1){var De=Fe[Pe][ie];if(De)for(var Ue=0,He=De;Ue<He.length;Ue+=1)se.push(He[Ue].feature)}}return se},p.prototype.queryRenderedFeatures=function(u,f,g){f&&f.filter&&this._validate(o.validateStyle.filter,"queryRenderedFeatures.filter",f.filter,null,f);var b={};if(f&&f.layers){if(!Array.isArray(f.layers))return this.fire(new o.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var w=0,S=f.layers;w<S.length;w+=1){var M=S[w],B=this._layers[M];if(!B)return this.fire(new o.ErrorEvent(new Error("The layer '"+M+"' does not exist in the map's style and cannot be queried for features."))),[];b[B.source]=!0}}var K=[];for(var Q in f.availableImages=this._availableImages,this.sourceCaches)f.layers&&!b[Q]||K.push(Dt(this.sourceCaches[Q],this._layers,this._serializedLayers,u,f,g));return this.placement&&K.push(function(J,le,se,ye,ie,me,_e){for(var Pe={},Fe=me.queryRenderedSymbols(ye),De=[],Ue=0,He=Object.keys(Fe).map(Number);Ue<He.length;Ue+=1)De.push(_e[He[Ue]]);De.sort(Ht);for(var et=function(){var Pt=dt[Ye],br=Pt.featureIndex.lookupSymbolFeatures(Fe[Pt.bucketInstanceId],le,Pt.bucketIndex,Pt.sourceLayerIndex,ie.filter,ie.layers,ie.availableImages,J);for(var yt in br){var qt=Pe[yt]=Pe[yt]||[],Jt=br[yt];Jt.sort(function(Xt,Ft){var Ot=Pt.featureSortOrder;if(Ot){var Vn=Ot.indexOf(Xt.featureIndex);return Ot.indexOf(Ft.featureIndex)-Vn}return Ft.featureIndex-Xt.featureIndex});for(var Vt=0,Ut=Jt;Vt<Ut.length;Vt+=1)qt.push(Ut[Vt])}},Ye=0,dt=De;Ye<dt.length;Ye+=1)et();var kt=function(Pt){Pe[Pt].forEach(function(br){var yt=br.feature,qt=se[J[Pt].source].getFeatureState(yt.layer["source-layer"],yt.id);yt.source=yt.layer.source,yt.layer["source-layer"]&&(yt.sourceLayer=yt.layer["source-layer"]),yt.state=qt})};for(var Rt in Pe)kt(Rt);return Pe}(this._layers,this._serializedLayers,this.sourceCaches,u,f,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(K)},p.prototype.querySourceFeatures=function(u,f){f&&f.filter&&this._validate(o.validateStyle.filter,"querySourceFeatures.filter",f.filter,null,f);var g=this.sourceCaches[u];return g?function(b,w){for(var S=b.getRenderableIds().map(function(le){return b.getTileByID(le)}),M=[],B={},K=0;K<S.length;K++){var Q=S[K],J=Q.tileID.canonical.key;B[J]||(B[J]=!0,Q.querySourceFeatures(M,w))}return M}(g,f):[]},p.prototype.addSourceType=function(u,f,g){return p.getSourceType(u)?g(new Error('A source type called "'+u+'" already exists.')):(p.setSourceType(u,f),f.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:u,url:f.workerSourceURL},g):g(null,null))},p.prototype.getLight=function(){return this.light.getLight()},p.prototype.setLight=function(u,f){f===void 0&&(f={}),this._checkLoaded();var g=this.light.getLight(),b=!1;for(var w in u)if(!o.deepEqual(u[w],g[w])){b=!0;break}if(b){var S={now:o.browser.now(),transition:o.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(u,f),this.light.updateTransitions(S)}},p.prototype._validate=function(u,f,g,b,w){return w===void 0&&(w={}),(!w||w.validate!==!1)&&us(this,u.call(o.validateStyle,o.extend({key:f,style:this.serialize(),value:g,styleSpec:o.styleSpec},b)))},p.prototype._remove=function(){for(var u in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),o.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[u].setEventedParent(null);for(var f in this.sourceCaches)this.sourceCaches[f].clearTiles(),this.sourceCaches[f].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},p.prototype._clearSource=function(u){this.sourceCaches[u].clearTiles()},p.prototype._reloadSource=function(u){this.sourceCaches[u].resume(),this.sourceCaches[u].reload()},p.prototype._updateSources=function(u){for(var f in this.sourceCaches)this.sourceCaches[f].update(u)},p.prototype._generateCollisionBoxes=function(){for(var u in this.sourceCaches)this._reloadSource(u)},p.prototype._updatePlacement=function(u,f,g,b,w){w===void 0&&(w=!1);for(var S=!1,M=!1,B={},K=0,Q=this._order;K<Q.length;K+=1){var J=this._layers[Q[K]];if(J.type==="symbol"){if(!B[J.source]){var le=this.sourceCaches[J.source];B[J.source]=le.getRenderableIds(!0).map(function(_e){return le.getTileByID(_e)}).sort(function(_e,Pe){return Pe.tileID.overscaledZ-_e.tileID.overscaledZ||(_e.tileID.isLessThan(Pe.tileID)?-1:1)})}var se=this.crossTileSymbolIndex.addLayer(J,B[J.source],u.center.lng);S=S||se}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((w=w||this._layerOrderChanged||g===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(o.browser.now(),u.zoom))&&(this.pauseablePlacement=new Vl(u,this._order,w,f,g,b,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,B),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(o.browser.now()),M=!0),S&&this.pauseablePlacement.placement.setStale()),M||S)for(var ye=0,ie=this._order;ye<ie.length;ye+=1){var me=this._layers[ie[ye]];me.type==="symbol"&&this.placement.updateLayerOpacities(me,B[me.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(o.browser.now())},p.prototype._releaseSymbolFadeTiles=function(){for(var u in this.sourceCaches)this.sourceCaches[u].releaseSymbolFadeTiles()},p.prototype.getImages=function(u,f,g){this.imageManager.getImages(f.icons,g),this._updateTilesForChangedImages();var b=this.sourceCaches[f.source];b&&b.setDependencies(f.tileID.key,f.type,f.icons)},p.prototype.getGlyphs=function(u,f,g){this.glyphManager.getGlyphs(f.stacks,g)},p.prototype.getResource=function(u,f,g){return o.makeRequest(f,g)},p}(o.Evented);Ui.getSourceType=function(l){return st[l]},Ui.setSourceType=function(l,p){st[l]=p},Ui.registerForPluginStateChange=o.registerForPluginStateChange;var In=o.createLayout([{name:"a_pos",type:"Int16",components:2}]),Ks=qr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),bd=qr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),kv=qr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Tv=qr(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),qp=qr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Wp=qr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),Gp=qr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Hp=qr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),wd=qr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),Ad=qr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),Iv=qr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),$l=qr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),ql=qr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Ed=qr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),li=qr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),Zp=qr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),Ia=qr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Pa=qr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),cs=qr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),ps=qr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Ma=qr(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),hs=qr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),fs=qr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),Ra=qr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),Sd=qr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),Cd=qr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function qr(l,p){var u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,f=p.match(/attribute ([\w]+) ([\w]+)/g),g=l.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),b=p.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),w=b?b.concat(g):g,S={};return{fragmentSource:l=l.replace(u,function(M,B,K,Q,J){return S[J]=!0,B==="define"?`
#ifndef HAS_UNIFORM_u_`+J+`
varying `+K+" "+Q+" "+J+`;
#else
uniform `+K+" "+Q+" u_"+J+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+J+`
    `+K+" "+Q+" "+J+" = u_"+J+`;
#endif
`}),vertexSource:p=p.replace(u,function(M,B,K,Q,J){var le=Q==="float"?"vec2":"vec4",se=J.match(/color/)?"color":le;return S[J]?B==="define"?`
#ifndef HAS_UNIFORM_u_`+J+`
uniform lowp float u_`+J+`_t;
attribute `+K+" "+le+" a_"+J+`;
varying `+K+" "+Q+" "+J+`;
#else
uniform `+K+" "+Q+" u_"+J+`;
#endif
`:se==="vec4"?`
#ifndef HAS_UNIFORM_u_`+J+`
    `+J+" = a_"+J+`;
#else
    `+K+" "+Q+" "+J+" = u_"+J+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+J+`
    `+J+" = unpack_mix_"+se+"(a_"+J+", u_"+J+`_t);
#else
    `+K+" "+Q+" "+J+" = u_"+J+`;
#endif
`:B==="define"?`
#ifndef HAS_UNIFORM_u_`+J+`
uniform lowp float u_`+J+`_t;
attribute `+K+" "+le+" a_"+J+`;
#else
uniform `+K+" "+Q+" u_"+J+`;
#endif
`:se==="vec4"?`
#ifndef HAS_UNIFORM_u_`+J+`
    `+K+" "+Q+" "+J+" = a_"+J+`;
#else
    `+K+" "+Q+" "+J+" = u_"+J+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+J+`
    `+K+" "+Q+" "+J+" = unpack_mix_"+se+"(a_"+J+", u_"+J+`_t);
#else
    `+K+" "+Q+" "+J+" = u_"+J+`;
#endif
`}),staticAttributes:f,staticUniforms:w}}var Pv=Object.freeze({__proto__:null,prelude:Ks,background:bd,backgroundPattern:kv,circle:Tv,clippingMask:qp,heatmap:Wp,heatmapTexture:Gp,collisionBox:Hp,collisionCircle:wd,debug:Ad,fill:Iv,fillOutline:$l,fillOutlinePattern:ql,fillPattern:Ed,fillExtrusion:li,fillExtrusionPattern:Zp,hillshadePrepare:Ia,hillshade:Pa,line:cs,lineGradient:ps,linePattern:Ma,lineSDF:hs,raster:fs,symbolIcon:Ra,symbolSDF:Sd,symbolTextAndIcon:Cd}),Gu=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function kd(l){for(var p=[],u=0;u<l.length;u++)if(l[u]!==null){var f=l[u].split(" ");p.push(f.pop())}return p}Gu.prototype.bind=function(l,p,u,f,g,b,w,S){this.context=l;for(var M=this.boundPaintVertexBuffers.length!==f.length,B=0;!M&&B<f.length;B++)this.boundPaintVertexBuffers[B]!==f[B]&&(M=!0);l.extVertexArrayObject&&this.vao&&this.boundProgram===p&&this.boundLayoutVertexBuffer===u&&!M&&this.boundIndexBuffer===g&&this.boundVertexOffset===b&&this.boundDynamicVertexBuffer===w&&this.boundDynamicVertexBuffer2===S?(l.bindVertexArrayOES.set(this.vao),w&&w.bind(),g&&g.dynamicDraw&&g.bind(),S&&S.bind()):this.freshBind(p,u,f,g,b,w,S)},Gu.prototype.freshBind=function(l,p,u,f,g,b,w){var S,M=l.numAttributes,B=this.context,K=B.gl;if(B.extVertexArrayObject)this.vao&&this.destroy(),this.vao=B.extVertexArrayObject.createVertexArrayOES(),B.bindVertexArrayOES.set(this.vao),S=0,this.boundProgram=l,this.boundLayoutVertexBuffer=p,this.boundPaintVertexBuffers=u,this.boundIndexBuffer=f,this.boundVertexOffset=g,this.boundDynamicVertexBuffer=b,this.boundDynamicVertexBuffer2=w;else{S=B.currentNumAttributes||0;for(var Q=M;Q<S;Q++)K.disableVertexAttribArray(Q)}p.enableAttributes(K,l);for(var J=0,le=u;J<le.length;J+=1)le[J].enableAttributes(K,l);b&&b.enableAttributes(K,l),w&&w.enableAttributes(K,l),p.bind(),p.setVertexAttribPointers(K,l,g);for(var se=0,ye=u;se<ye.length;se+=1){var ie=ye[se];ie.bind(),ie.setVertexAttribPointers(K,l,g)}b&&(b.bind(),b.setVertexAttribPointers(K,l,g)),f&&f.bind(),w&&(w.bind(),w.setVertexAttribPointers(K,l,g)),B.currentNumAttributes=M},Gu.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Td=function(l,p,u,f,g,b){var w=l.gl;this.program=w.createProgram();for(var S=kd(u.staticAttributes),M=f?f.getBinderAttributes():[],B=S.concat(M),K=u.staticUniforms?kd(u.staticUniforms):[],Q=f?f.getBinderUniforms():[],J=[],le=0,se=K.concat(Q);le<se.length;le+=1){var ye=se[le];J.indexOf(ye)<0&&J.push(ye)}var ie=f?f.defines():[];b&&ie.push("#define OVERDRAW_INSPECTOR;");var me=ie.concat(Ks.fragmentSource,u.fragmentSource).join(`
`),_e=ie.concat(Ks.vertexSource,u.vertexSource).join(`
`),Pe=w.createShader(w.FRAGMENT_SHADER);if(w.isContextLost())this.failedToCreate=!0;else{w.shaderSource(Pe,me),w.compileShader(Pe),w.attachShader(this.program,Pe);var Fe=w.createShader(w.VERTEX_SHADER);if(w.isContextLost())this.failedToCreate=!0;else{w.shaderSource(Fe,_e),w.compileShader(Fe),w.attachShader(this.program,Fe),this.attributes={};var De={};this.numAttributes=B.length;for(var Ue=0;Ue<this.numAttributes;Ue++)B[Ue]&&(w.bindAttribLocation(this.program,Ue,B[Ue]),this.attributes[B[Ue]]=Ue);w.linkProgram(this.program),w.deleteShader(Fe),w.deleteShader(Pe);for(var He=0;He<J.length;He++){var et=J[He];if(et&&!De[et]){var Ye=w.getUniformLocation(this.program,et);Ye&&(De[et]=Ye)}}this.fixedUniforms=g(l,De),this.binderUniforms=f?f.getUniforms(l,De):[]}}};function Id(l,p,u){var f=1/tn(u,1,p.transform.tileZoom),g=Math.pow(2,u.tileID.overscaledZ),b=u.tileSize*Math.pow(2,p.transform.tileZoom)/g,w=b*(u.tileID.canonical.x+u.tileID.wrap*g),S=b*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_scale:[f,l.fromScale,l.toScale],u_fade:l.t,u_pixel_coord_upper:[w>>16,S>>16],u_pixel_coord_lower:[65535&w,65535&S]}}Td.prototype.draw=function(l,p,u,f,g,b,w,S,M,B,K,Q,J,le,se,ye){var ie,me=l.gl;if(!this.failedToCreate){for(var _e in l.program.set(this.program),l.setDepthMode(u),l.setStencilMode(f),l.setColorMode(g),l.setCullFace(b),this.fixedUniforms)this.fixedUniforms[_e].set(w[_e]);le&&le.setUniforms(l,this.binderUniforms,Q,{zoom:J});for(var Pe=(ie={},ie[me.LINES]=2,ie[me.TRIANGLES]=3,ie[me.LINE_STRIP]=1,ie)[p],Fe=0,De=K.get();Fe<De.length;Fe+=1){var Ue=De[Fe],He=Ue.vaos||(Ue.vaos={});(He[S]||(He[S]=new Gu)).bind(l,this,M,le?le.getPaintVertexBuffers():[],B,Ue.vertexOffset,se,ye),me.drawElements(p,Ue.primitiveLength*Pe,me.UNSIGNED_SHORT,Ue.primitiveOffset*Pe*2)}}};var Pd=function(l,p,u,f){var g=p.style.light,b=g.properties.get("position"),w=[b.x,b.y,b.z],S=o.create$1();g.properties.get("anchor")==="viewport"&&o.fromRotation(S,-p.transform.angle),o.transformMat3(w,w,S);var M=g.properties.get("color");return{u_matrix:l,u_lightpos:w,u_lightintensity:g.properties.get("intensity"),u_lightcolor:[M.r,M.g,M.b],u_vertical_gradient:+u,u_opacity:f}},ds=function(l,p,u,f,g,b,w){return o.extend(Pd(l,p,u,f),Id(b,p,w),{u_height_factor:-Math.pow(2,g.overscaledZ)/w.tileSize/8})},za=function(l){return{u_matrix:l}},ms=function(l,p,u,f){return o.extend(za(l),Id(u,p,f))},Md=function(l,p){return{u_matrix:l,u_world:p}},Rd=function(l,p,u,f,g){return o.extend(ms(l,p,u,f),{u_world:g})},Kp=function(l,p,u,f){var g,b,w=l.transform;if(f.paint.get("circle-pitch-alignment")==="map"){var S=tn(u,1,w.zoom);g=!0,b=[S,S]}else g=!1,b=w.pixelsToGLUnits;return{u_camera_to_center_distance:w.cameraToCenterDistance,u_scale_with_map:+(f.paint.get("circle-pitch-scale")==="map"),u_matrix:l.translatePosMatrix(p.posMatrix,u,f.paint.get("circle-translate"),f.paint.get("circle-translate-anchor")),u_pitch_with_map:+g,u_device_pixel_ratio:o.browser.devicePixelRatio,u_extrude_scale:b}},ys=function(l,p,u){var f=tn(u,1,p.zoom),g=Math.pow(2,p.zoom-u.tileID.overscaledZ),b=u.tileID.overscaleFactor();return{u_matrix:l,u_camera_to_center_distance:p.cameraToCenterDistance,u_pixels_to_tile_units:f,u_extrude_scale:[p.pixelsToGLUnits[0]/(f*g),p.pixelsToGLUnits[1]/(f*g)],u_overscale_factor:b}},zd=function(l,p,u){return{u_matrix:l,u_inv_matrix:p,u_camera_to_center_distance:u.cameraToCenterDistance,u_viewport_size:[u.width,u.height]}},gs=function(l,p,u){return u===void 0&&(u=1),{u_matrix:l,u_color:p,u_overlay:0,u_overlay_scale:u}},vs=function(l){return{u_matrix:l}},Ld=function(l,p,u,f){return{u_matrix:l,u_extrude_scale:tn(p,1,u),u_intensity:f}},Wl=function(l,p,u){var f=l.transform;return{u_matrix:Od(l,p,u),u_ratio:1/tn(p,1,f.zoom),u_device_pixel_ratio:o.browser.devicePixelRatio,u_units_to_pixels:[1/f.pixelsToGLUnits[0],1/f.pixelsToGLUnits[1]]}},Zr=function(l,p,u,f){return o.extend(Wl(l,p,u),{u_image:0,u_image_height:f})},Hu=function(l,p,u,f){var g=l.transform,b=Xs(p,g);return{u_matrix:Od(l,p,u),u_texsize:p.imageAtlasTexture.size,u_ratio:1/tn(p,1,g.zoom),u_device_pixel_ratio:o.browser.devicePixelRatio,u_image:0,u_scale:[b,f.fromScale,f.toScale],u_fade:f.t,u_units_to_pixels:[1/g.pixelsToGLUnits[0],1/g.pixelsToGLUnits[1]]}},Mv=function(l,p,u,f,g){var b=l.lineAtlas,w=Xs(p,l.transform),S=u.layout.get("line-cap")==="round",M=b.getDash(f.from,S),B=b.getDash(f.to,S),K=M.width*g.fromScale,Q=B.width*g.toScale;return o.extend(Wl(l,p,u),{u_patternscale_a:[w/K,-M.height/2],u_patternscale_b:[w/Q,-B.height/2],u_sdfgamma:b.width/(256*Math.min(K,Q)*o.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:M.y,u_tex_y_b:B.y,u_mix:g.t})};function Xs(l,p){return 1/tn(l,1,p.tileZoom)}function Od(l,p,u){return l.translatePosMatrix(p.tileID.posMatrix,p,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}var Rv=function(l,p,u,f,g){return{u_matrix:l,u_tl_parent:p,u_scale_parent:u,u_buffer_scale:1,u_fade_t:f.mix,u_opacity:f.opacity*g.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:g.paint.get("raster-brightness-min"),u_brightness_high:g.paint.get("raster-brightness-max"),u_saturation_factor:(w=g.paint.get("raster-saturation"),w>0?1-1/(1.001-w):-w),u_contrast_factor:(b=g.paint.get("raster-contrast"),b>0?1/(1-b):1+b),u_spin_weights:Dd(g.paint.get("raster-hue-rotate"))};var b,w};function Dd(l){l*=Math.PI/180;var p=Math.sin(l),u=Math.cos(l);return[(2*u+1)/3,(-Math.sqrt(3)*p-u+1)/3,(Math.sqrt(3)*p-u+1)/3]}var Zu,Qs=function(l,p,u,f,g,b,w,S,M,B){var K=g.transform;return{u_is_size_zoom_constant:+(l==="constant"||l==="source"),u_is_size_feature_constant:+(l==="constant"||l==="camera"),u_size_t:p?p.uSizeT:0,u_size:p?p.uSize:0,u_camera_to_center_distance:K.cameraToCenterDistance,u_pitch:K.pitch/360*2*Math.PI,u_rotate_symbol:+u,u_aspect_ratio:K.width/K.height,u_fade_change:g.options.fadeDuration?g.symbolFadeChange:1,u_matrix:b,u_label_plane_matrix:w,u_coord_matrix:S,u_is_text:+M,u_pitch_with_map:+f,u_texsize:B,u_texture:0}},Gl=function(l,p,u,f,g,b,w,S,M,B,K){var Q=g.transform;return o.extend(Qs(l,p,u,f,g,b,w,S,M,B),{u_gamma_scale:f?Math.cos(Q._pitch)*Q.cameraToCenterDistance:1,u_device_pixel_ratio:o.browser.devicePixelRatio,u_is_halo:+K})},Ku=function(l,p,u,f,g,b,w,S,M,B){return o.extend(Gl(l,p,u,f,g,b,w,S,!0,M,!0),{u_texsize_icon:B,u_texture_icon:1})},Hl=function(l,p,u){return{u_matrix:l,u_opacity:p,u_color:u}},Js=function(l,p,u,f,g,b){return o.extend(function(w,S,M,B){var K=M.imageManager.getPattern(w.from.toString()),Q=M.imageManager.getPattern(w.to.toString()),J=M.imageManager.getPixelSize(),le=J.width,se=J.height,ye=Math.pow(2,B.tileID.overscaledZ),ie=B.tileSize*Math.pow(2,M.transform.tileZoom)/ye,me=ie*(B.tileID.canonical.x+B.tileID.wrap*ye),_e=ie*B.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:K.tl,u_pattern_br_a:K.br,u_pattern_tl_b:Q.tl,u_pattern_br_b:Q.br,u_texsize:[le,se],u_mix:S.t,u_pattern_size_a:K.displaySize,u_pattern_size_b:Q.displaySize,u_scale_a:S.fromScale,u_scale_b:S.toScale,u_tile_units_to_pixels:1/tn(B,1,M.transform.tileZoom),u_pixel_coord_upper:[me>>16,_e>>16],u_pixel_coord_lower:[65535&me,65535&_e]}}(f,b,u,g),{u_matrix:l,u_opacity:p})},Bd={fillExtrusion:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_lightpos:new o.Uniform3f(l,p.u_lightpos),u_lightintensity:new o.Uniform1f(l,p.u_lightintensity),u_lightcolor:new o.Uniform3f(l,p.u_lightcolor),u_vertical_gradient:new o.Uniform1f(l,p.u_vertical_gradient),u_opacity:new o.Uniform1f(l,p.u_opacity)}},fillExtrusionPattern:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_lightpos:new o.Uniform3f(l,p.u_lightpos),u_lightintensity:new o.Uniform1f(l,p.u_lightintensity),u_lightcolor:new o.Uniform3f(l,p.u_lightcolor),u_vertical_gradient:new o.Uniform1f(l,p.u_vertical_gradient),u_height_factor:new o.Uniform1f(l,p.u_height_factor),u_image:new o.Uniform1i(l,p.u_image),u_texsize:new o.Uniform2f(l,p.u_texsize),u_pixel_coord_upper:new o.Uniform2f(l,p.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(l,p.u_pixel_coord_lower),u_scale:new o.Uniform3f(l,p.u_scale),u_fade:new o.Uniform1f(l,p.u_fade),u_opacity:new o.Uniform1f(l,p.u_opacity)}},fill:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix)}},fillPattern:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_image:new o.Uniform1i(l,p.u_image),u_texsize:new o.Uniform2f(l,p.u_texsize),u_pixel_coord_upper:new o.Uniform2f(l,p.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(l,p.u_pixel_coord_lower),u_scale:new o.Uniform3f(l,p.u_scale),u_fade:new o.Uniform1f(l,p.u_fade)}},fillOutline:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_world:new o.Uniform2f(l,p.u_world)}},fillOutlinePattern:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_world:new o.Uniform2f(l,p.u_world),u_image:new o.Uniform1i(l,p.u_image),u_texsize:new o.Uniform2f(l,p.u_texsize),u_pixel_coord_upper:new o.Uniform2f(l,p.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(l,p.u_pixel_coord_lower),u_scale:new o.Uniform3f(l,p.u_scale),u_fade:new o.Uniform1f(l,p.u_fade)}},circle:function(l,p){return{u_camera_to_center_distance:new o.Uniform1f(l,p.u_camera_to_center_distance),u_scale_with_map:new o.Uniform1i(l,p.u_scale_with_map),u_pitch_with_map:new o.Uniform1i(l,p.u_pitch_with_map),u_extrude_scale:new o.Uniform2f(l,p.u_extrude_scale),u_device_pixel_ratio:new o.Uniform1f(l,p.u_device_pixel_ratio),u_matrix:new o.UniformMatrix4f(l,p.u_matrix)}},collisionBox:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_camera_to_center_distance:new o.Uniform1f(l,p.u_camera_to_center_distance),u_pixels_to_tile_units:new o.Uniform1f(l,p.u_pixels_to_tile_units),u_extrude_scale:new o.Uniform2f(l,p.u_extrude_scale),u_overscale_factor:new o.Uniform1f(l,p.u_overscale_factor)}},collisionCircle:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_inv_matrix:new o.UniformMatrix4f(l,p.u_inv_matrix),u_camera_to_center_distance:new o.Uniform1f(l,p.u_camera_to_center_distance),u_viewport_size:new o.Uniform2f(l,p.u_viewport_size)}},debug:function(l,p){return{u_color:new o.UniformColor(l,p.u_color),u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_overlay:new o.Uniform1i(l,p.u_overlay),u_overlay_scale:new o.Uniform1f(l,p.u_overlay_scale)}},clippingMask:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix)}},heatmap:function(l,p){return{u_extrude_scale:new o.Uniform1f(l,p.u_extrude_scale),u_intensity:new o.Uniform1f(l,p.u_intensity),u_matrix:new o.UniformMatrix4f(l,p.u_matrix)}},heatmapTexture:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_world:new o.Uniform2f(l,p.u_world),u_image:new o.Uniform1i(l,p.u_image),u_color_ramp:new o.Uniform1i(l,p.u_color_ramp),u_opacity:new o.Uniform1f(l,p.u_opacity)}},hillshade:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_image:new o.Uniform1i(l,p.u_image),u_latrange:new o.Uniform2f(l,p.u_latrange),u_light:new o.Uniform2f(l,p.u_light),u_shadow:new o.UniformColor(l,p.u_shadow),u_highlight:new o.UniformColor(l,p.u_highlight),u_accent:new o.UniformColor(l,p.u_accent)}},hillshadePrepare:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_image:new o.Uniform1i(l,p.u_image),u_dimension:new o.Uniform2f(l,p.u_dimension),u_zoom:new o.Uniform1f(l,p.u_zoom),u_unpack:new o.Uniform4f(l,p.u_unpack)}},line:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_ratio:new o.Uniform1f(l,p.u_ratio),u_device_pixel_ratio:new o.Uniform1f(l,p.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(l,p.u_units_to_pixels)}},lineGradient:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_ratio:new o.Uniform1f(l,p.u_ratio),u_device_pixel_ratio:new o.Uniform1f(l,p.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(l,p.u_units_to_pixels),u_image:new o.Uniform1i(l,p.u_image),u_image_height:new o.Uniform1f(l,p.u_image_height)}},linePattern:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_texsize:new o.Uniform2f(l,p.u_texsize),u_ratio:new o.Uniform1f(l,p.u_ratio),u_device_pixel_ratio:new o.Uniform1f(l,p.u_device_pixel_ratio),u_image:new o.Uniform1i(l,p.u_image),u_units_to_pixels:new o.Uniform2f(l,p.u_units_to_pixels),u_scale:new o.Uniform3f(l,p.u_scale),u_fade:new o.Uniform1f(l,p.u_fade)}},lineSDF:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_ratio:new o.Uniform1f(l,p.u_ratio),u_device_pixel_ratio:new o.Uniform1f(l,p.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(l,p.u_units_to_pixels),u_patternscale_a:new o.Uniform2f(l,p.u_patternscale_a),u_patternscale_b:new o.Uniform2f(l,p.u_patternscale_b),u_sdfgamma:new o.Uniform1f(l,p.u_sdfgamma),u_image:new o.Uniform1i(l,p.u_image),u_tex_y_a:new o.Uniform1f(l,p.u_tex_y_a),u_tex_y_b:new o.Uniform1f(l,p.u_tex_y_b),u_mix:new o.Uniform1f(l,p.u_mix)}},raster:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_tl_parent:new o.Uniform2f(l,p.u_tl_parent),u_scale_parent:new o.Uniform1f(l,p.u_scale_parent),u_buffer_scale:new o.Uniform1f(l,p.u_buffer_scale),u_fade_t:new o.Uniform1f(l,p.u_fade_t),u_opacity:new o.Uniform1f(l,p.u_opacity),u_image0:new o.Uniform1i(l,p.u_image0),u_image1:new o.Uniform1i(l,p.u_image1),u_brightness_low:new o.Uniform1f(l,p.u_brightness_low),u_brightness_high:new o.Uniform1f(l,p.u_brightness_high),u_saturation_factor:new o.Uniform1f(l,p.u_saturation_factor),u_contrast_factor:new o.Uniform1f(l,p.u_contrast_factor),u_spin_weights:new o.Uniform3f(l,p.u_spin_weights)}},symbolIcon:function(l,p){return{u_is_size_zoom_constant:new o.Uniform1i(l,p.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(l,p.u_is_size_feature_constant),u_size_t:new o.Uniform1f(l,p.u_size_t),u_size:new o.Uniform1f(l,p.u_size),u_camera_to_center_distance:new o.Uniform1f(l,p.u_camera_to_center_distance),u_pitch:new o.Uniform1f(l,p.u_pitch),u_rotate_symbol:new o.Uniform1i(l,p.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(l,p.u_aspect_ratio),u_fade_change:new o.Uniform1f(l,p.u_fade_change),u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(l,p.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(l,p.u_coord_matrix),u_is_text:new o.Uniform1i(l,p.u_is_text),u_pitch_with_map:new o.Uniform1i(l,p.u_pitch_with_map),u_texsize:new o.Uniform2f(l,p.u_texsize),u_texture:new o.Uniform1i(l,p.u_texture)}},symbolSDF:function(l,p){return{u_is_size_zoom_constant:new o.Uniform1i(l,p.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(l,p.u_is_size_feature_constant),u_size_t:new o.Uniform1f(l,p.u_size_t),u_size:new o.Uniform1f(l,p.u_size),u_camera_to_center_distance:new o.Uniform1f(l,p.u_camera_to_center_distance),u_pitch:new o.Uniform1f(l,p.u_pitch),u_rotate_symbol:new o.Uniform1i(l,p.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(l,p.u_aspect_ratio),u_fade_change:new o.Uniform1f(l,p.u_fade_change),u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(l,p.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(l,p.u_coord_matrix),u_is_text:new o.Uniform1i(l,p.u_is_text),u_pitch_with_map:new o.Uniform1i(l,p.u_pitch_with_map),u_texsize:new o.Uniform2f(l,p.u_texsize),u_texture:new o.Uniform1i(l,p.u_texture),u_gamma_scale:new o.Uniform1f(l,p.u_gamma_scale),u_device_pixel_ratio:new o.Uniform1f(l,p.u_device_pixel_ratio),u_is_halo:new o.Uniform1i(l,p.u_is_halo)}},symbolTextAndIcon:function(l,p){return{u_is_size_zoom_constant:new o.Uniform1i(l,p.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(l,p.u_is_size_feature_constant),u_size_t:new o.Uniform1f(l,p.u_size_t),u_size:new o.Uniform1f(l,p.u_size),u_camera_to_center_distance:new o.Uniform1f(l,p.u_camera_to_center_distance),u_pitch:new o.Uniform1f(l,p.u_pitch),u_rotate_symbol:new o.Uniform1i(l,p.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(l,p.u_aspect_ratio),u_fade_change:new o.Uniform1f(l,p.u_fade_change),u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(l,p.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(l,p.u_coord_matrix),u_is_text:new o.Uniform1i(l,p.u_is_text),u_pitch_with_map:new o.Uniform1i(l,p.u_pitch_with_map),u_texsize:new o.Uniform2f(l,p.u_texsize),u_texsize_icon:new o.Uniform2f(l,p.u_texsize_icon),u_texture:new o.Uniform1i(l,p.u_texture),u_texture_icon:new o.Uniform1i(l,p.u_texture_icon),u_gamma_scale:new o.Uniform1f(l,p.u_gamma_scale),u_device_pixel_ratio:new o.Uniform1f(l,p.u_device_pixel_ratio),u_is_halo:new o.Uniform1i(l,p.u_is_halo)}},background:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_opacity:new o.Uniform1f(l,p.u_opacity),u_color:new o.UniformColor(l,p.u_color)}},backgroundPattern:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_opacity:new o.Uniform1f(l,p.u_opacity),u_image:new o.Uniform1i(l,p.u_image),u_pattern_tl_a:new o.Uniform2f(l,p.u_pattern_tl_a),u_pattern_br_a:new o.Uniform2f(l,p.u_pattern_br_a),u_pattern_tl_b:new o.Uniform2f(l,p.u_pattern_tl_b),u_pattern_br_b:new o.Uniform2f(l,p.u_pattern_br_b),u_texsize:new o.Uniform2f(l,p.u_texsize),u_mix:new o.Uniform1f(l,p.u_mix),u_pattern_size_a:new o.Uniform2f(l,p.u_pattern_size_a),u_pattern_size_b:new o.Uniform2f(l,p.u_pattern_size_b),u_scale_a:new o.Uniform1f(l,p.u_scale_a),u_scale_b:new o.Uniform1f(l,p.u_scale_b),u_pixel_coord_upper:new o.Uniform2f(l,p.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(l,p.u_pixel_coord_lower),u_tile_units_to_pixels:new o.Uniform1f(l,p.u_tile_units_to_pixels)}}};function Ys(l,p,u,f,g,b,w){for(var S=l.context,M=S.gl,B=l.useProgram("collisionBox"),K=[],Q=0,J=0,le=0;le<f.length;le++){var se=f[le],ye=p.getTile(se),ie=ye.getBucket(u);if(ie){var me=se.posMatrix;g[0]===0&&g[1]===0||(me=l.translatePosMatrix(se.posMatrix,ye,g,b));var _e=w?ie.textCollisionBox:ie.iconCollisionBox,Pe=ie.collisionCircleArray;if(Pe.length>0){var Fe=o.create(),De=me;o.mul(Fe,ie.placementInvProjMatrix,l.transform.glCoordMatrix),o.mul(Fe,Fe,ie.placementViewportMatrix),K.push({circleArray:Pe,circleOffset:J,transform:De,invTransform:Fe}),J=Q+=Pe.length/4}_e&&B.draw(S,M.LINES,X.disabled,re.disabled,l.colorModeForRenderPass(),de.disabled,ys(me,l.transform,ye),u.id,_e.layoutVertexBuffer,_e.indexBuffer,_e.segments,null,l.transform.zoom,null,null,_e.collisionVertexBuffer)}}if(w&&K.length){var Ue=l.useProgram("collisionCircle"),He=new o.StructArrayLayout2f1f2i16;He.resize(4*Q),He._trim();for(var et=0,Ye=0,dt=K;Ye<dt.length;Ye+=1)for(var kt=dt[Ye],Rt=0;Rt<kt.circleArray.length/4;Rt++){var Pt=4*Rt,br=kt.circleArray[Pt+0],yt=kt.circleArray[Pt+1],qt=kt.circleArray[Pt+2],Jt=kt.circleArray[Pt+3];He.emplace(et++,br,yt,qt,Jt,0),He.emplace(et++,br,yt,qt,Jt,1),He.emplace(et++,br,yt,qt,Jt,2),He.emplace(et++,br,yt,qt,Jt,3)}(!Zu||Zu.length<2*Q)&&(Zu=function(mn){var hi=2*mn,ti=new o.StructArrayLayout3ui6;ti.resize(hi),ti._trim();for(var pn=0;pn<hi;pn++){var An=6*pn;ti.uint16[An+0]=4*pn+0,ti.uint16[An+1]=4*pn+1,ti.uint16[An+2]=4*pn+2,ti.uint16[An+3]=4*pn+2,ti.uint16[An+4]=4*pn+3,ti.uint16[An+5]=4*pn+0}return ti}(Q));for(var Vt=S.createIndexBuffer(Zu,!0),Ut=S.createVertexBuffer(He,o.collisionCircleLayout.members,!0),Xt=0,Ft=K;Xt<Ft.length;Xt+=1){var Ot=Ft[Xt],Vn=zd(Ot.transform,Ot.invTransform,l.transform);Ue.draw(S,M.TRIANGLES,X.disabled,re.disabled,l.colorModeForRenderPass(),de.disabled,Vn,u.id,Ut,Vt,o.SegmentVector.simpleSegment(0,2*Ot.circleOffset,Ot.circleArray.length,Ot.circleArray.length/2),null,l.transform.zoom,null,null,null)}Ut.destroy(),Vt.destroy()}}var Ro=o.identity(new Float32Array(16));function Nd(l,p,u,f,g,b){var w=o.getAnchorAlignment(l),S=-(w.horizontalAlign-.5)*p,M=-(w.verticalAlign-.5)*u,B=o.evaluateVariableOffset(l,f);return new o.Point((S/g+B[0])*b,(M/g+B[1])*b)}function Fd(l,p,u,f,g,b,w,S,M,B,K){var Q=l.text.placedSymbolArray,J=l.text.dynamicLayoutVertexArray,le=l.icon.dynamicLayoutVertexArray,se={};J.clear();for(var ye=0;ye<Q.length;ye++){var ie=Q.get(ye),me=ie.hidden||!ie.crossTileID||l.allowVerticalPlacement&&!ie.placedOrientation?null:f[ie.crossTileID];if(me){var _e=new o.Point(ie.anchorX,ie.anchorY),Pe=dr(_e,u?S:w),Fe=Mr(b.cameraToCenterDistance,Pe.signedDistanceFromCamera),De=g.evaluateSizeForFeature(l.textSizeData,B,ie)*Fe/o.ONE_EM;u&&(De*=l.tilePixelRatio/M);for(var Ue=Nd(me.anchor,me.width,me.height,me.textOffset,me.textBoxScale,De),He=u?dr(_e.add(Ue),w).point:Pe.point.add(p?Ue.rotate(-b.angle):Ue),et=l.allowVerticalPlacement&&ie.placedOrientation===o.WritingMode.vertical?Math.PI/2:0,Ye=0;Ye<ie.numGlyphs;Ye++)o.addDynamicAttributes(J,He,et);K&&ie.associatedIconIndex>=0&&(se[ie.associatedIconIndex]={shiftedAnchor:He,angle:et})}else gi(ie.numGlyphs,J)}if(K){le.clear();for(var dt=l.icon.placedSymbolArray,kt=0;kt<dt.length;kt++){var Rt=dt.get(kt);if(Rt.hidden)gi(Rt.numGlyphs,le);else{var Pt=se[kt];if(Pt)for(var br=0;br<Rt.numGlyphs;br++)o.addDynamicAttributes(le,Pt.shiftedAnchor,Pt.angle);else gi(Rt.numGlyphs,le)}}l.icon.dynamicLayoutVertexBuffer.updateData(le)}l.text.dynamicLayoutVertexBuffer.updateData(J)}function Ud(l,p,u){return u.iconsInText&&p?"symbolTextAndIcon":l?"symbolSDF":"symbolIcon"}function _s(l,p,u,f,g,b,w,S,M,B,K,Q){for(var J=l.context,le=J.gl,se=l.transform,ye=S==="map",ie=M==="map",me=ye&&u.layout.get("symbol-placement")!=="point",_e=ye&&!ie&&!me,Pe=u.layout.get("symbol-sort-key").constantOr(1)!==void 0,Fe=!1,De=l.depthModeForSublayer(0,X.ReadOnly),Ue=u.layout.get("text-variable-anchor"),He=[],et=0,Ye=f;et<Ye.length;et+=1){var dt=Ye[et],kt=p.getTile(dt),Rt=kt.getBucket(u);if(Rt){var Pt=g?Rt.text:Rt.icon;if(Pt&&Pt.segments.get().length){var br=Pt.programConfigurations.get(u.id),yt=g||Rt.sdfIcons,qt=g?Rt.textSizeData:Rt.iconSizeData,Jt=ie||se.pitch!==0,Vt=l.useProgram(Ud(yt,g,Rt),br),Ut=o.evaluateSizeForZoom(qt,se.zoom),Xt=void 0,Ft=[0,0],Ot=void 0,Vn=void 0,mn=null,hi=void 0;if(g)Ot=kt.glyphAtlasTexture,Vn=le.LINEAR,Xt=kt.glyphAtlasTexture.size,Rt.iconsInText&&(Ft=kt.imageAtlasTexture.size,mn=kt.imageAtlasTexture,hi=Jt||l.options.rotating||l.options.zooming||qt.kind==="composite"||qt.kind==="camera"?le.LINEAR:le.NEAREST);else{var ti=u.layout.get("icon-size").constantOr(0)!==1||Rt.iconsNeedLinear;Ot=kt.imageAtlasTexture,Vn=yt||l.options.rotating||l.options.zooming||ti||Jt?le.LINEAR:le.NEAREST,Xt=kt.imageAtlasTexture.size}var pn=tn(kt,1,l.transform.zoom),An=bn(dt.posMatrix,ie,ye,l.transform,pn),Gi=jr(dt.posMatrix,ie,ye,l.transform,pn),bi=Ue&&Rt.hasTextData(),Fa=u.layout.get("icon-text-fit")!=="none"&&bi&&Rt.hasIconData();me&&Fl(Rt,dt.posMatrix,l,g,An,Gi,ie,B);var Pi=l.translatePosMatrix(dt.posMatrix,kt,b,w),Bo=me||g&&Ue||Fa?Ro:An,yo=l.translatePosMatrix(Gi,kt,b,w,!0),ou=yt&&u.paint.get(g?"text-halo-width":"icon-halo-width").constantOr(1)!==0,ol={program:Vt,buffers:Pt,uniformValues:yt?Rt.iconsInText?Ku(qt.kind,Ut,_e,ie,l,Pi,Bo,yo,Xt,Ft):Gl(qt.kind,Ut,_e,ie,l,Pi,Bo,yo,g,Xt,!0):Qs(qt.kind,Ut,_e,ie,l,Pi,Bo,yo,g,Xt),atlasTexture:Ot,atlasTextureIcon:mn,atlasInterpolation:Vn,atlasInterpolationIcon:hi,isSDF:yt,hasHalo:ou};if(Pe&&Rt.canOverlap){Fe=!0;for(var Ua=0,al=Pt.segments.get();Ua<al.length;Ua+=1){var au=al[Ua];He.push({segments:new o.SegmentVector([au]),sortKey:au.sortKey,state:ol})}}else He.push({segments:Pt.segments,sortKey:0,state:ol})}}}Fe&&He.sort(function(ja,Ss){return ja.sortKey-Ss.sortKey});for(var Xo=0,su=He;Xo<su.length;Xo+=1){var Qo=su[Xo],$n=Qo.state;if(J.activeTexture.set(le.TEXTURE0),$n.atlasTexture.bind($n.atlasInterpolation,le.CLAMP_TO_EDGE),$n.atlasTextureIcon&&(J.activeTexture.set(le.TEXTURE1),$n.atlasTextureIcon&&$n.atlasTextureIcon.bind($n.atlasInterpolationIcon,le.CLAMP_TO_EDGE)),$n.isSDF){var fa=$n.uniformValues;$n.hasHalo&&(fa.u_is_halo=1,Zl($n.buffers,Qo.segments,u,l,$n.program,De,K,Q,fa)),fa.u_is_halo=0}Zl($n.buffers,Qo.segments,u,l,$n.program,De,K,Q,$n.uniformValues)}}function Zl(l,p,u,f,g,b,w,S,M){var B=f.context;g.draw(B,B.gl.TRIANGLES,b,w,S,de.disabled,M,u.id,l.layoutVertexBuffer,l.indexBuffer,p,u.paint,f.transform.zoom,l.programConfigurations.get(u.id),l.dynamicLayoutVertexBuffer,l.opacityVertexBuffer)}function Xu(l,p,u,f,g,b,w){var S,M,B,K,Q,J=l.context.gl,le=u.paint.get("fill-pattern"),se=le&&le.constantOr(1),ye=u.getCrossfadeParameters();w?(M=se&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",S=J.LINES):(M=se?"fillPattern":"fill",S=J.TRIANGLES);for(var ie=0,me=f;ie<me.length;ie+=1){var _e=me[ie],Pe=p.getTile(_e);if(!se||Pe.patternsLoaded()){var Fe=Pe.getBucket(u);if(Fe){var De=Fe.programConfigurations.get(u.id),Ue=l.useProgram(M,De);se&&(l.context.activeTexture.set(J.TEXTURE0),Pe.imageAtlasTexture.bind(J.LINEAR,J.CLAMP_TO_EDGE),De.updatePaintBuffers(ye));var He=le.constantOr(null);if(He&&Pe.imageAtlas){var et=Pe.imageAtlas,Ye=et.patternPositions[He.to.toString()],dt=et.patternPositions[He.from.toString()];Ye&&dt&&De.setConstantPatternPositions(Ye,dt)}var kt=l.translatePosMatrix(_e.posMatrix,Pe,u.paint.get("fill-translate"),u.paint.get("fill-translate-anchor"));if(w){K=Fe.indexBuffer2,Q=Fe.segments2;var Rt=[J.drawingBufferWidth,J.drawingBufferHeight];B=M==="fillOutlinePattern"&&se?Rd(kt,l,ye,Pe,Rt):Md(kt,Rt)}else K=Fe.indexBuffer,Q=Fe.segments,B=se?ms(kt,l,ye,Pe):za(kt);Ue.draw(l.context,S,g,l.stencilModeForClipping(_e),b,de.disabled,B,u.id,Fe.layoutVertexBuffer,K,Q,u.paint,l.transform.zoom,De)}}}}function Xp(l,p,u,f,g,b,w){for(var S=l.context,M=S.gl,B=u.paint.get("fill-extrusion-pattern"),K=B.constantOr(1),Q=u.getCrossfadeParameters(),J=u.paint.get("fill-extrusion-opacity"),le=0,se=f;le<se.length;le+=1){var ye=se[le],ie=p.getTile(ye),me=ie.getBucket(u);if(me){var _e=me.programConfigurations.get(u.id),Pe=l.useProgram(K?"fillExtrusionPattern":"fillExtrusion",_e);K&&(l.context.activeTexture.set(M.TEXTURE0),ie.imageAtlasTexture.bind(M.LINEAR,M.CLAMP_TO_EDGE),_e.updatePaintBuffers(Q));var Fe=B.constantOr(null);if(Fe&&ie.imageAtlas){var De=ie.imageAtlas,Ue=De.patternPositions[Fe.to.toString()],He=De.patternPositions[Fe.from.toString()];Ue&&He&&_e.setConstantPatternPositions(Ue,He)}var et=l.translatePosMatrix(ye.posMatrix,ie,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),Ye=u.paint.get("fill-extrusion-vertical-gradient"),dt=K?ds(et,l,Ye,J,ye,Q,ie):Pd(et,l,Ye,J);Pe.draw(S,S.gl.TRIANGLES,g,b,w,de.backCCW,dt,u.id,me.layoutVertexBuffer,me.indexBuffer,me.segments,u.paint,l.transform.zoom,_e)}}}function Qu(l,p,u,f,g,b){var w=l.context,S=w.gl,M=p.fbo;if(M){var B=l.useProgram("hillshade");w.activeTexture.set(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,M.colorAttachment.get());var K=function(Q,J,le){var se=le.paint.get("hillshade-shadow-color"),ye=le.paint.get("hillshade-highlight-color"),ie=le.paint.get("hillshade-accent-color"),me=le.paint.get("hillshade-illumination-direction")*(Math.PI/180);le.paint.get("hillshade-illumination-anchor")==="viewport"&&(me-=Q.transform.angle);var _e,Pe,Fe,De=!Q.options.moving;return{u_matrix:Q.transform.calculatePosMatrix(J.tileID.toUnwrapped(),De),u_image:0,u_latrange:(_e=J.tileID,Pe=Math.pow(2,_e.canonical.z),Fe=_e.canonical.y,[new o.MercatorCoordinate(0,Fe/Pe).toLngLat().lat,new o.MercatorCoordinate(0,(Fe+1)/Pe).toLngLat().lat]),u_light:[le.paint.get("hillshade-exaggeration"),me],u_shadow:se,u_highlight:ye,u_accent:ie}}(l,p,u);B.draw(w,S.TRIANGLES,f,g,b,de.disabled,K,u.id,l.rasterBoundsBuffer,l.quadTriangleIndexBuffer,l.rasterBoundsSegments)}}function zv(l,p,u,f,g,b){var w=l.context,S=w.gl,M=p.dem;if(M&&M.data){var B=M.dim,K=M.stride,Q=M.getPixels();if(w.activeTexture.set(S.TEXTURE1),w.pixelStoreUnpackPremultiplyAlpha.set(!1),p.demTexture=p.demTexture||l.getTileTexture(K),p.demTexture){var J=p.demTexture;J.update(Q,{premultiply:!1}),J.bind(S.NEAREST,S.CLAMP_TO_EDGE)}else p.demTexture=new o.Texture(w,Q,S.RGBA,{premultiply:!1}),p.demTexture.bind(S.NEAREST,S.CLAMP_TO_EDGE);w.activeTexture.set(S.TEXTURE0);var le=p.fbo;if(!le){var se=new o.Texture(w,{width:B,height:B,data:null},S.RGBA);se.bind(S.LINEAR,S.CLAMP_TO_EDGE),(le=p.fbo=w.createFramebuffer(B,B,!0)).colorAttachment.set(se.texture)}w.bindFramebuffer.set(le.framebuffer),w.viewport.set([0,0,B,B]),l.useProgram("hillshadePrepare").draw(w,S.TRIANGLES,f,g,b,de.disabled,function(ye,ie){var me=ie.stride,_e=o.create();return o.ortho(_e,0,o.EXTENT,-o.EXTENT,0,0,1),o.translate(_e,_e,[0,-o.EXTENT,0]),{u_matrix:_e,u_image:1,u_dimension:[me,me],u_zoom:ye.overscaledZ,u_unpack:ie.getUnpackVector()}}(p.tileID,M),u.id,l.rasterBoundsBuffer,l.quadTriangleIndexBuffer,l.rasterBoundsSegments),p.needsHillshadePrepare=!1}}function Ju(l,p,u,f,g){var b=f.paint.get("raster-fade-duration");if(b>0){var w=o.browser.now(),S=(w-l.timeAdded)/b,M=p?(w-p.timeAdded)/b:-1,B=u.getSource(),K=g.coveringZoomLevel({tileSize:B.tileSize,roundZoom:B.roundZoom}),Q=!p||Math.abs(p.tileID.overscaledZ-K)>Math.abs(l.tileID.overscaledZ-K),J=Q&&l.refreshedUponExpiration?1:o.clamp(Q?S:1-M,0,1);return l.refreshedUponExpiration&&S>=1&&(l.refreshedUponExpiration=!1),p?{opacity:1,mix:1-J}:{opacity:J,mix:0}}return{opacity:1,mix:0}}var Qp=new o.Color(1,0,0,1),jd=new o.Color(0,1,0,1),Vd=new o.Color(0,0,1,1),Yu=new o.Color(1,0,1,1),Jp=new o.Color(0,1,1,1);function Yp(l,p,u,f){Kl(l,0,p+u/2,l.transform.width,u,f)}function eh(l,p,u,f){Kl(l,p-u/2,0,u,l.transform.height,f)}function Kl(l,p,u,f,g,b){var w=l.context,S=w.gl;S.enable(S.SCISSOR_TEST),S.scissor(p*o.browser.devicePixelRatio,u*o.browser.devicePixelRatio,f*o.browser.devicePixelRatio,g*o.browser.devicePixelRatio),w.clear({color:b}),S.disable(S.SCISSOR_TEST)}function $d(l,p,u){var f=l.context,g=f.gl,b=u.posMatrix,w=l.useProgram("debug"),S=X.disabled,M=re.disabled,B=l.colorModeForRenderPass();f.activeTexture.set(g.TEXTURE0),l.emptyTexture.bind(g.LINEAR,g.CLAMP_TO_EDGE),w.draw(f,g.LINE_STRIP,S,M,B,de.disabled,gs(b,o.Color.red),"$debug",l.debugBuffer,l.tileBorderIndexBuffer,l.debugSegments);var K=p.getTileByID(u.key).latestRawTileData,Q=Math.floor((K&&K.byteLength||0)/1024),J=p.getTile(u).tileSize,le=512/Math.min(J,512)*(u.overscaledZ/l.transform.zoom)*.5,se=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(se+=" => "+u.overscaledZ),function(ye,ie){ye.initDebugOverlayCanvas();var me=ye.debugOverlayCanvas,_e=ye.context.gl,Pe=ye.debugOverlayCanvas.getContext("2d");Pe.clearRect(0,0,me.width,me.height),Pe.shadowColor="white",Pe.shadowBlur=2,Pe.lineWidth=1.5,Pe.strokeStyle="white",Pe.textBaseline="top",Pe.font="bold 36px Open Sans, sans-serif",Pe.fillText(ie,5,5),Pe.strokeText(ie,5,5),ye.debugOverlayTexture.update(me),ye.debugOverlayTexture.bind(_e.LINEAR,_e.CLAMP_TO_EDGE)}(l,se+" "+Q+"kb"),w.draw(f,g.TRIANGLES,S,M,ce.alphaBlended,de.disabled,gs(b,o.Color.transparent,le),"$debug",l.debugBuffer,l.quadTriangleIndexBuffer,l.debugSegments)}var xs={symbol:function(l,p,u,f,g){if(l.renderPass==="translucent"){var b=re.disabled,w=l.colorModeForRenderPass();u.layout.get("text-variable-anchor")&&function(S,M,B,K,Q,J,le){for(var se=M.transform,ye=Q==="map",ie=J==="map",me=0,_e=S;me<_e.length;me+=1){var Pe=_e[me],Fe=K.getTile(Pe),De=Fe.getBucket(B);if(De&&De.text&&De.text.segments.get().length){var Ue=o.evaluateSizeForZoom(De.textSizeData,se.zoom),He=tn(Fe,1,M.transform.zoom),et=bn(Pe.posMatrix,ie,ye,M.transform,He),Ye=B.layout.get("icon-text-fit")!=="none"&&De.hasIconData();if(Ue){var dt=Math.pow(2,se.zoom-Fe.tileID.overscaledZ);Fd(De,ye,ie,le,o.symbolSize,se,et,Pe.posMatrix,dt,Ue,Ye)}}}}(f,l,u,p,u.layout.get("text-rotation-alignment"),u.layout.get("text-pitch-alignment"),g),u.paint.get("icon-opacity").constantOr(1)!==0&&_s(l,p,u,f,!1,u.paint.get("icon-translate"),u.paint.get("icon-translate-anchor"),u.layout.get("icon-rotation-alignment"),u.layout.get("icon-pitch-alignment"),u.layout.get("icon-keep-upright"),b,w),u.paint.get("text-opacity").constantOr(1)!==0&&_s(l,p,u,f,!0,u.paint.get("text-translate"),u.paint.get("text-translate-anchor"),u.layout.get("text-rotation-alignment"),u.layout.get("text-pitch-alignment"),u.layout.get("text-keep-upright"),b,w),p.map.showCollisionBoxes&&(Ys(l,p,u,f,u.paint.get("text-translate"),u.paint.get("text-translate-anchor"),!0),Ys(l,p,u,f,u.paint.get("icon-translate"),u.paint.get("icon-translate-anchor"),!1))}},circle:function(l,p,u,f){if(l.renderPass==="translucent"){var g=u.paint.get("circle-opacity"),b=u.paint.get("circle-stroke-width"),w=u.paint.get("circle-stroke-opacity"),S=u.layout.get("circle-sort-key").constantOr(1)!==void 0;if(g.constantOr(1)!==0||b.constantOr(1)!==0&&w.constantOr(1)!==0){for(var M=l.context,B=M.gl,K=l.depthModeForSublayer(0,X.ReadOnly),Q=re.disabled,J=l.colorModeForRenderPass(),le=[],se=0;se<f.length;se++){var ye=f[se],ie=p.getTile(ye),me=ie.getBucket(u);if(me){var _e=me.programConfigurations.get(u.id),Pe={programConfiguration:_e,program:l.useProgram("circle",_e),layoutVertexBuffer:me.layoutVertexBuffer,indexBuffer:me.indexBuffer,uniformValues:Kp(l,ye,ie,u)};if(S)for(var Fe=0,De=me.segments.get();Fe<De.length;Fe+=1){var Ue=De[Fe];le.push({segments:new o.SegmentVector([Ue]),sortKey:Ue.sortKey,state:Pe})}else le.push({segments:me.segments,sortKey:0,state:Pe})}}S&&le.sort(function(kt,Rt){return kt.sortKey-Rt.sortKey});for(var He=0,et=le;He<et.length;He+=1){var Ye=et[He],dt=Ye.state;dt.program.draw(M,B.TRIANGLES,K,Q,J,de.disabled,dt.uniformValues,u.id,dt.layoutVertexBuffer,dt.indexBuffer,Ye.segments,u.paint,l.transform.zoom,dt.programConfiguration)}}}},heatmap:function(l,p,u,f){if(u.paint.get("heatmap-opacity")!==0)if(l.renderPass==="offscreen"){var g=l.context,b=g.gl,w=re.disabled,S=new ce([b.ONE,b.ONE],o.Color.transparent,[!0,!0,!0,!0]);(function(le,se,ye){var ie=le.gl;le.activeTexture.set(ie.TEXTURE1),le.viewport.set([0,0,se.width/4,se.height/4]);var me=ye.heatmapFbo;if(me)ie.bindTexture(ie.TEXTURE_2D,me.colorAttachment.get()),le.bindFramebuffer.set(me.framebuffer);else{var _e=ie.createTexture();ie.bindTexture(ie.TEXTURE_2D,_e),ie.texParameteri(ie.TEXTURE_2D,ie.TEXTURE_WRAP_S,ie.CLAMP_TO_EDGE),ie.texParameteri(ie.TEXTURE_2D,ie.TEXTURE_WRAP_T,ie.CLAMP_TO_EDGE),ie.texParameteri(ie.TEXTURE_2D,ie.TEXTURE_MIN_FILTER,ie.LINEAR),ie.texParameteri(ie.TEXTURE_2D,ie.TEXTURE_MAG_FILTER,ie.LINEAR),me=ye.heatmapFbo=le.createFramebuffer(se.width/4,se.height/4,!1),function(Pe,Fe,De,Ue){var He=Pe.gl;He.texImage2D(He.TEXTURE_2D,0,He.RGBA,Fe.width/4,Fe.height/4,0,He.RGBA,Pe.extRenderToTextureHalfFloat?Pe.extTextureHalfFloat.HALF_FLOAT_OES:He.UNSIGNED_BYTE,null),Ue.colorAttachment.set(De)}(le,se,_e,me)}})(g,l,u),g.clear({color:o.Color.transparent});for(var M=0;M<f.length;M++){var B=f[M];if(!p.hasRenderableParent(B)){var K=p.getTile(B),Q=K.getBucket(u);if(Q){var J=Q.programConfigurations.get(u.id);l.useProgram("heatmap",J).draw(g,b.TRIANGLES,X.disabled,w,S,de.disabled,Ld(B.posMatrix,K,l.transform.zoom,u.paint.get("heatmap-intensity")),u.id,Q.layoutVertexBuffer,Q.indexBuffer,Q.segments,u.paint,l.transform.zoom,J)}}}g.viewport.set([0,0,l.width,l.height])}else l.renderPass==="translucent"&&(l.context.setColorMode(l.colorModeForRenderPass()),function(le,se){var ye=le.context,ie=ye.gl,me=se.heatmapFbo;if(me){ye.activeTexture.set(ie.TEXTURE0),ie.bindTexture(ie.TEXTURE_2D,me.colorAttachment.get()),ye.activeTexture.set(ie.TEXTURE1);var _e=se.colorRampTexture;_e||(_e=se.colorRampTexture=new o.Texture(ye,se.colorRamp,ie.RGBA)),_e.bind(ie.LINEAR,ie.CLAMP_TO_EDGE),le.useProgram("heatmapTexture").draw(ye,ie.TRIANGLES,X.disabled,re.disabled,le.colorModeForRenderPass(),de.disabled,function(Pe,Fe,De,Ue){var He=o.create();o.ortho(He,0,Pe.width,Pe.height,0,0,1);var et=Pe.context.gl;return{u_matrix:He,u_world:[et.drawingBufferWidth,et.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Fe.paint.get("heatmap-opacity")}}(le,se),se.id,le.viewportBuffer,le.quadTriangleIndexBuffer,le.viewportSegments,se.paint,le.transform.zoom)}}(l,u))},line:function(l,p,u,f){if(l.renderPass==="translucent"){var g=u.paint.get("line-opacity"),b=u.paint.get("line-width");if(g.constantOr(1)!==0&&b.constantOr(1)!==0)for(var w=l.depthModeForSublayer(0,X.ReadOnly),S=l.colorModeForRenderPass(),M=u.paint.get("line-dasharray"),B=u.paint.get("line-pattern"),K=B.constantOr(1),Q=u.paint.get("line-gradient"),J=u.getCrossfadeParameters(),le=K?"linePattern":M?"lineSDF":Q?"lineGradient":"line",se=l.context,ye=se.gl,ie=!0,me=0,_e=f;me<_e.length;me+=1){var Pe=_e[me],Fe=p.getTile(Pe);if(!K||Fe.patternsLoaded()){var De=Fe.getBucket(u);if(De){var Ue=De.programConfigurations.get(u.id),He=l.context.program.get(),et=l.useProgram(le,Ue),Ye=ie||et.program!==He,dt=B.constantOr(null);if(dt&&Fe.imageAtlas){var kt=Fe.imageAtlas,Rt=kt.patternPositions[dt.to.toString()],Pt=kt.patternPositions[dt.from.toString()];Rt&&Pt&&Ue.setConstantPatternPositions(Rt,Pt)}var br=K?Hu(l,Fe,u,J):M?Mv(l,Fe,u,M,J):Q?Zr(l,Fe,u,De.lineClipsArray.length):Wl(l,Fe,u);if(K)se.activeTexture.set(ye.TEXTURE0),Fe.imageAtlasTexture.bind(ye.LINEAR,ye.CLAMP_TO_EDGE),Ue.updatePaintBuffers(J);else if(M&&(Ye||l.lineAtlas.dirty))se.activeTexture.set(ye.TEXTURE0),l.lineAtlas.bind(se);else if(Q){var yt=De.gradients[u.id],qt=yt.texture;if(u.gradientVersion!==yt.version){var Jt=256;if(u.stepInterpolant){var Vt=p.getSource().maxzoom,Ut=Pe.canonical.z===Vt?Math.ceil(1<<l.transform.maxZoom-Pe.canonical.z):1;Jt=o.clamp(o.nextPowerOfTwo(De.maxLineLength/o.EXTENT*1024*Ut),256,se.maxTextureSize)}yt.gradient=o.renderColorRamp({expression:u.gradientExpression(),evaluationKey:"lineProgress",resolution:Jt,image:yt.gradient||void 0,clips:De.lineClipsArray}),yt.texture?yt.texture.update(yt.gradient):yt.texture=new o.Texture(se,yt.gradient,ye.RGBA),yt.version=u.gradientVersion,qt=yt.texture}se.activeTexture.set(ye.TEXTURE0),qt.bind(u.stepInterpolant?ye.NEAREST:ye.LINEAR,ye.CLAMP_TO_EDGE)}et.draw(se,ye.TRIANGLES,w,l.stencilModeForClipping(Pe),S,de.disabled,br,u.id,De.layoutVertexBuffer,De.indexBuffer,De.segments,u.paint,l.transform.zoom,Ue,De.layoutVertexBuffer2),ie=!1}}}}},fill:function(l,p,u,f){var g=u.paint.get("fill-color"),b=u.paint.get("fill-opacity");if(b.constantOr(1)!==0){var w=l.colorModeForRenderPass(),S=u.paint.get("fill-pattern"),M=l.opaquePassEnabledForLayer()&&!S.constantOr(1)&&g.constantOr(o.Color.transparent).a===1&&b.constantOr(0)===1?"opaque":"translucent";if(l.renderPass===M){var B=l.depthModeForSublayer(1,l.renderPass==="opaque"?X.ReadWrite:X.ReadOnly);Xu(l,p,u,f,B,w,!1)}if(l.renderPass==="translucent"&&u.paint.get("fill-antialias")){var K=l.depthModeForSublayer(u.getPaintProperty("fill-outline-color")?2:0,X.ReadOnly);Xu(l,p,u,f,K,w,!0)}}},"fill-extrusion":function(l,p,u,f){var g=u.paint.get("fill-extrusion-opacity");if(g!==0&&l.renderPass==="translucent"){var b=new X(l.context.gl.LEQUAL,X.ReadWrite,l.depthRangeFor3D);if(g!==1||u.paint.get("fill-extrusion-pattern").constantOr(1))Xp(l,p,u,f,b,re.disabled,ce.disabled),Xp(l,p,u,f,b,l.stencilModeFor3D(),l.colorModeForRenderPass());else{var w=l.colorModeForRenderPass();Xp(l,p,u,f,b,re.disabled,w)}}},hillshade:function(l,p,u,f){if(l.renderPass==="offscreen"||l.renderPass==="translucent"){for(var g=l.context,b=l.depthModeForSublayer(0,X.ReadOnly),w=l.colorModeForRenderPass(),S=l.renderPass==="translucent"?l.stencilConfigForOverlap(f):[{},f],M=S[0],B=0,K=S[1];B<K.length;B+=1){var Q=K[B],J=p.getTile(Q);J.needsHillshadePrepare&&l.renderPass==="offscreen"?zv(l,J,u,b,re.disabled,w):l.renderPass==="translucent"&&Qu(l,J,u,b,M[Q.overscaledZ],w)}g.viewport.set([0,0,l.width,l.height])}},raster:function(l,p,u,f){if(l.renderPass==="translucent"&&u.paint.get("raster-opacity")!==0&&f.length)for(var g=l.context,b=g.gl,w=p.getSource(),S=l.useProgram("raster"),M=l.colorModeForRenderPass(),B=w instanceof qe?[{},f]:l.stencilConfigForOverlap(f),K=B[0],Q=B[1],J=Q[Q.length-1].overscaledZ,le=!l.options.moving,se=0,ye=Q;se<ye.length;se+=1){var ie=ye[se],me=l.depthModeForSublayer(ie.overscaledZ-J,u.paint.get("raster-opacity")===1?X.ReadWrite:X.ReadOnly,b.LESS),_e=p.getTile(ie),Pe=l.transform.calculatePosMatrix(ie.toUnwrapped(),le);_e.registerFadeDuration(u.paint.get("raster-fade-duration"));var Fe=p.findLoadedParent(ie,0),De=Ju(_e,Fe,p,u,l.transform),Ue=void 0,He=void 0,et=u.paint.get("raster-resampling")==="nearest"?b.NEAREST:b.LINEAR;g.activeTexture.set(b.TEXTURE0),_e.texture.bind(et,b.CLAMP_TO_EDGE,b.LINEAR_MIPMAP_NEAREST),g.activeTexture.set(b.TEXTURE1),Fe?(Fe.texture.bind(et,b.CLAMP_TO_EDGE,b.LINEAR_MIPMAP_NEAREST),Ue=Math.pow(2,Fe.tileID.overscaledZ-_e.tileID.overscaledZ),He=[_e.tileID.canonical.x*Ue%1,_e.tileID.canonical.y*Ue%1]):_e.texture.bind(et,b.CLAMP_TO_EDGE,b.LINEAR_MIPMAP_NEAREST);var Ye=Rv(Pe,He||[0,0],Ue||1,De,u);w instanceof qe?S.draw(g,b.TRIANGLES,me,re.disabled,M,de.disabled,Ye,u.id,w.boundsBuffer,l.quadTriangleIndexBuffer,w.boundsSegments):S.draw(g,b.TRIANGLES,me,K[ie.overscaledZ],M,de.disabled,Ye,u.id,l.rasterBoundsBuffer,l.quadTriangleIndexBuffer,l.rasterBoundsSegments)}},background:function(l,p,u){var f=u.paint.get("background-color"),g=u.paint.get("background-opacity");if(g!==0){var b=l.context,w=b.gl,S=l.transform,M=S.tileSize,B=u.paint.get("background-pattern");if(!l.isPatternMissing(B)){var K=!B&&f.a===1&&g===1&&l.opaquePassEnabledForLayer()?"opaque":"translucent";if(l.renderPass===K){var Q=re.disabled,J=l.depthModeForSublayer(0,K==="opaque"?X.ReadWrite:X.ReadOnly),le=l.colorModeForRenderPass(),se=l.useProgram(B?"backgroundPattern":"background"),ye=S.coveringTiles({tileSize:M});B&&(b.activeTexture.set(w.TEXTURE0),l.imageManager.bind(l.context));for(var ie=u.getCrossfadeParameters(),me=0,_e=ye;me<_e.length;me+=1){var Pe=_e[me],Fe=l.transform.calculatePosMatrix(Pe.toUnwrapped()),De=B?Js(Fe,g,l,B,{tileID:Pe,tileSize:M},ie):Hl(Fe,g,f);se.draw(b,w.TRIANGLES,J,Q,le,de.disabled,De,u.id,l.tileExtentBuffer,l.quadTriangleIndexBuffer,l.tileExtentSegments)}}}}},debug:function(l,p,u){for(var f=0;f<u.length;f++)$d(l,p,u[f])},custom:function(l,p,u){var f=l.context,g=u.implementation;if(l.renderPass==="offscreen"){var b=g.prerender;b&&(l.setCustomLayerDefaults(),f.setColorMode(l.colorModeForRenderPass()),b.call(g,f.gl,l.transform.customLayerMatrix()),f.setDirty(),l.setBaseState())}else if(l.renderPass==="translucent"){l.setCustomLayerDefaults(),f.setColorMode(l.colorModeForRenderPass()),f.setStencilMode(re.disabled);var w=g.renderingMode==="3d"?new X(l.context.gl.LEQUAL,X.ReadWrite,l.depthRangeFor3D):l.depthModeForSublayer(0,X.ReadOnly);f.setDepthMode(w),g.render(f.gl,l.transform.customLayerMatrix()),f.setDirty(),l.setBaseState(),f.bindFramebuffer.set(null)}}},rn=function(l,p){this.context=new Z(l),this.transform=p,this._tileTextures={},this.setup(),this.numSublayers=ue.maxUnderzooming+ue.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Ca,this.gpuTimers={}};rn.prototype.resize=function(l,p){if(this.width=l*o.browser.devicePixelRatio,this.height=p*o.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var u=0,f=this.style._order;u<f.length;u+=1)this.style._layers[f[u]].resize()},rn.prototype.setup=function(){var l=this.context,p=new o.StructArrayLayout2i4;p.emplaceBack(0,0),p.emplaceBack(o.EXTENT,0),p.emplaceBack(0,o.EXTENT),p.emplaceBack(o.EXTENT,o.EXTENT),this.tileExtentBuffer=l.createVertexBuffer(p,In.members),this.tileExtentSegments=o.SegmentVector.simpleSegment(0,0,4,2);var u=new o.StructArrayLayout2i4;u.emplaceBack(0,0),u.emplaceBack(o.EXTENT,0),u.emplaceBack(0,o.EXTENT),u.emplaceBack(o.EXTENT,o.EXTENT),this.debugBuffer=l.createVertexBuffer(u,In.members),this.debugSegments=o.SegmentVector.simpleSegment(0,0,4,5);var f=new o.StructArrayLayout4i8;f.emplaceBack(0,0,0,0),f.emplaceBack(o.EXTENT,0,o.EXTENT,0),f.emplaceBack(0,o.EXTENT,0,o.EXTENT),f.emplaceBack(o.EXTENT,o.EXTENT,o.EXTENT,o.EXTENT),this.rasterBoundsBuffer=l.createVertexBuffer(f,Ce.members),this.rasterBoundsSegments=o.SegmentVector.simpleSegment(0,0,4,2);var g=new o.StructArrayLayout2i4;g.emplaceBack(0,0),g.emplaceBack(1,0),g.emplaceBack(0,1),g.emplaceBack(1,1),this.viewportBuffer=l.createVertexBuffer(g,In.members),this.viewportSegments=o.SegmentVector.simpleSegment(0,0,4,2);var b=new o.StructArrayLayout1ui2;b.emplaceBack(0),b.emplaceBack(1),b.emplaceBack(3),b.emplaceBack(2),b.emplaceBack(0),this.tileBorderIndexBuffer=l.createIndexBuffer(b);var w=new o.StructArrayLayout3ui6;w.emplaceBack(0,1,2),w.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=l.createIndexBuffer(w),this.emptyTexture=new o.Texture(l,{width:1,height:1,data:new Uint8Array([0,0,0,0])},l.gl.RGBA);var S=this.context.gl;this.stencilClearMode=new re({func:S.ALWAYS,mask:0},0,255,S.ZERO,S.ZERO,S.ZERO)},rn.prototype.clearStencil=function(){var l=this.context,p=l.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var u=o.create();o.ortho(u,0,this.width,this.height,0,0,1),o.scale(u,u,[p.drawingBufferWidth,p.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(l,p.TRIANGLES,X.disabled,this.stencilClearMode,ce.disabled,de.disabled,vs(u),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},rn.prototype._renderTileClippingMasks=function(l,p){if(this.currentStencilSource!==l.source&&l.isTileClipped()&&p&&p.length){this.currentStencilSource=l.source;var u=this.context,f=u.gl;this.nextStencilID+p.length>256&&this.clearStencil(),u.setColorMode(ce.disabled),u.setDepthMode(X.disabled);var g=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var b=0,w=p;b<w.length;b+=1){var S=w[b],M=this._tileClippingMaskIDs[S.key]=this.nextStencilID++;g.draw(u,f.TRIANGLES,X.disabled,new re({func:f.ALWAYS,mask:0},M,255,f.KEEP,f.KEEP,f.REPLACE),ce.disabled,de.disabled,vs(S.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},rn.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var l=this.nextStencilID++,p=this.context.gl;return new re({func:p.NOTEQUAL,mask:255},l,255,p.KEEP,p.KEEP,p.REPLACE)},rn.prototype.stencilModeForClipping=function(l){var p=this.context.gl;return new re({func:p.EQUAL,mask:255},this._tileClippingMaskIDs[l.key],0,p.KEEP,p.KEEP,p.REPLACE)},rn.prototype.stencilConfigForOverlap=function(l){var p,u=this.context.gl,f=l.sort(function(M,B){return B.overscaledZ-M.overscaledZ}),g=f[f.length-1].overscaledZ,b=f[0].overscaledZ-g+1;if(b>1){this.currentStencilSource=void 0,this.nextStencilID+b>256&&this.clearStencil();for(var w={},S=0;S<b;S++)w[S+g]=new re({func:u.GEQUAL,mask:255},S+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=b,[w,f]}return[(p={},p[g]=re.disabled,p),f]},rn.prototype.colorModeForRenderPass=function(){var l=this.context.gl;return this._showOverdrawInspector?new ce([l.CONSTANT_COLOR,l.ONE],new o.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?ce.unblended:ce.alphaBlended},rn.prototype.depthModeForSublayer=function(l,p,u){if(!this.opaquePassEnabledForLayer())return X.disabled;var f=1-((1+this.currentLayer)*this.numSublayers+l)*this.depthEpsilon;return new X(u||this.context.gl.LEQUAL,p,[f,f])},rn.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},rn.prototype.render=function(l,p){var u=this;this.style=l,this.options=p,this.lineAtlas=l.lineAtlas,this.imageManager=l.imageManager,this.glyphManager=l.glyphManager,this.symbolFadeChange=l.placement.symbolFadeChange(o.browser.now()),this.imageManager.beginFrame();var f=this.style._order,g=this.style.sourceCaches;for(var b in g){var w=g[b];w.used&&w.prepare(this.context)}var S,M,B={},K={},Q={};for(var J in g){var le=g[J];B[J]=le.getVisibleCoordinates(),K[J]=B[J].slice().reverse(),Q[J]=le.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var se=0;se<f.length;se++)if(this.style._layers[f[se]].is3D()){this.opaquePassCutoff=se;break}this.renderPass="offscreen";for(var ye=0,ie=f;ye<ie.length;ye+=1){var me=this.style._layers[ie[ye]];if(me.hasOffscreenPass()&&!me.isHidden(this.transform.zoom)){var _e=K[me.source];(me.type==="custom"||_e.length)&&this.renderLayer(this,g[me.source],me,_e)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:p.showOverdrawInspector?o.Color.black:o.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=p.showOverdrawInspector,this.depthRangeFor3D=[0,1-(l._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=f.length-1;this.currentLayer>=0;this.currentLayer--){var Pe=this.style._layers[f[this.currentLayer]],Fe=g[Pe.source],De=B[Pe.source];this._renderTileClippingMasks(Pe,De),this.renderLayer(this,Fe,Pe,De)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<f.length;this.currentLayer++){var Ue=this.style._layers[f[this.currentLayer]],He=g[Ue.source],et=(Ue.type==="symbol"?Q:K)[Ue.source];this._renderTileClippingMasks(Ue,B[Ue.source]),this.renderLayer(this,He,Ue,et)}this.options.showTileBoundaries&&(o.values(this.style._layers).forEach(function(Ye){Ye.source&&!Ye.isHidden(u.transform.zoom)&&(Ye.source!==(M&&M.id)&&(M=u.style.sourceCaches[Ye.source]),(!S||S.getSource().maxzoom<M.getSource().maxzoom)&&(S=M))}),S&&xs.debug(this,S,S.getVisibleCoordinates())),this.options.showPadding&&function(Ye){var dt=Ye.transform.padding;Yp(Ye,Ye.transform.height-(dt.top||0),3,Qp),Yp(Ye,dt.bottom||0,3,jd),eh(Ye,dt.left||0,3,Vd),eh(Ye,Ye.transform.width-(dt.right||0),3,Yu);var kt=Ye.transform.centerPoint;(function(Rt,Pt,br,yt){Kl(Rt,Pt-1,br-10,2,20,yt),Kl(Rt,Pt-10,br-1,20,2,yt)})(Ye,kt.x,Ye.transform.height-kt.y,Jp)}(this),this.context.setDefault()},rn.prototype.renderLayer=function(l,p,u,f){u.isHidden(this.transform.zoom)||(u.type==="background"||u.type==="custom"||f.length)&&(this.id=u.id,this.gpuTimingStart(u),xs[u.type](l,p,u,f,this.style.placement.variableOffsets),this.gpuTimingEnd())},rn.prototype.gpuTimingStart=function(l){if(this.options.gpuTiming){var p=this.context.extTimerQuery,u=this.gpuTimers[l.id];u||(u=this.gpuTimers[l.id]={calls:0,cpuTime:0,query:p.createQueryEXT()}),u.calls++,p.beginQueryEXT(p.TIME_ELAPSED_EXT,u.query)}},rn.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var l=this.context.extTimerQuery;l.endQueryEXT(l.TIME_ELAPSED_EXT)}},rn.prototype.collectGpuTimers=function(){var l=this.gpuTimers;return this.gpuTimers={},l},rn.prototype.queryGpuTimers=function(l){var p={};for(var u in l){var f=l[u],g=this.context.extTimerQuery,b=g.getQueryObjectEXT(f.query,g.QUERY_RESULT_EXT)/1e6;g.deleteQueryEXT(f.query),p[u]=b}return p},rn.prototype.translatePosMatrix=function(l,p,u,f,g){if(!u[0]&&!u[1])return l;var b=g?f==="map"?this.transform.angle:0:f==="viewport"?-this.transform.angle:0;if(b){var w=Math.sin(b),S=Math.cos(b);u=[u[0]*S-u[1]*w,u[0]*w+u[1]*S]}var M=[g?u[0]:tn(p,u[0],this.transform.zoom),g?u[1]:tn(p,u[1],this.transform.zoom),0],B=new Float32Array(16);return o.translate(B,l,M),B},rn.prototype.saveTileTexture=function(l){var p=this._tileTextures[l.size[0]];p?p.push(l):this._tileTextures[l.size[0]]=[l]},rn.prototype.getTileTexture=function(l){var p=this._tileTextures[l];return p&&p.length>0?p.pop():null},rn.prototype.isPatternMissing=function(l){if(!l)return!1;if(!l.from||!l.to)return!0;var p=this.imageManager.getPattern(l.from.toString()),u=this.imageManager.getPattern(l.to.toString());return!p||!u},rn.prototype.useProgram=function(l,p){this.cache=this.cache||{};var u=""+l+(p?p.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[u]||(this.cache[u]=new Td(this.context,l,Pv[l],p,Bd[l],this._showOverdrawInspector)),this.cache[u]},rn.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},rn.prototype.setBaseState=function(){var l=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(l.FUNC_ADD)},rn.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=o.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new o.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},rn.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var ec=function(l,p){this.points=l,this.planes=p};ec.fromInvProjectionMatrix=function(l,p,u){var f=Math.pow(2,u),g=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(w){return o.transformMat4([],w,l)}).map(function(w){return o.scale$1([],w,1/w[3]/p*f)}),b=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(w){var S=o.sub([],g[w[0]],g[w[1]]),M=o.sub([],g[w[2]],g[w[1]]),B=o.normalize([],o.cross([],S,M)),K=-o.dot(B,g[w[1]]);return B.concat(K)});return new ec(g,b)};var bs=function(l,p){this.min=l,this.max=p,this.center=o.scale$2([],o.add([],this.min,this.max),.5)};bs.prototype.quadrant=function(l){for(var p=[l%2==0,l<2],u=o.clone$2(this.min),f=o.clone$2(this.max),g=0;g<p.length;g++)u[g]=p[g]?this.min[g]:this.center[g],f[g]=p[g]?this.center[g]:this.max[g];return f[2]=this.max[2],new bs(u,f)},bs.prototype.distanceX=function(l){return Math.max(Math.min(this.max[0],l[0]),this.min[0])-l[0]},bs.prototype.distanceY=function(l){return Math.max(Math.min(this.max[1],l[1]),this.min[1])-l[1]},bs.prototype.intersects=function(l){for(var p=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],u=!0,f=0;f<l.planes.length;f++){for(var g=l.planes[f],b=0,w=0;w<p.length;w++)b+=o.dot$1(g,p[w])>=0;if(b===0)return 0;b!==p.length&&(u=!1)}if(u)return 2;for(var S=0;S<3;S++){for(var M=Number.MAX_VALUE,B=-Number.MAX_VALUE,K=0;K<l.points.length;K++){var Q=l.points[K][S]-this.min[S];M=Math.min(M,Q),B=Math.max(B,Q)}if(B<0||M>this.max[S]-this.min[S])return 0}return 1};var La=function(l,p,u,f){if(l===void 0&&(l=0),p===void 0&&(p=0),u===void 0&&(u=0),f===void 0&&(f=0),isNaN(l)||l<0||isNaN(p)||p<0||isNaN(u)||u<0||isNaN(f)||f<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=l,this.bottom=p,this.left=u,this.right=f};La.prototype.interpolate=function(l,p,u){return p.top!=null&&l.top!=null&&(this.top=o.number(l.top,p.top,u)),p.bottom!=null&&l.bottom!=null&&(this.bottom=o.number(l.bottom,p.bottom,u)),p.left!=null&&l.left!=null&&(this.left=o.number(l.left,p.left,u)),p.right!=null&&l.right!=null&&(this.right=o.number(l.right,p.right,u)),this},La.prototype.getCenter=function(l,p){var u=o.clamp((this.left+l-this.right)/2,0,l),f=o.clamp((this.top+p-this.bottom)/2,0,p);return new o.Point(u,f)},La.prototype.equals=function(l){return this.top===l.top&&this.bottom===l.bottom&&this.left===l.left&&this.right===l.right},La.prototype.clone=function(){return new La(this.top,this.bottom,this.left,this.right)},La.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var vr=function(l,p,u,f,g){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=g===void 0||g,this._minZoom=l||0,this._maxZoom=p||22,this._minPitch=u??0,this._maxPitch=f??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new o.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new La,this._posMatrixCache={},this._alignedPosMatrixCache={}},Kr={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};vr.prototype.clone=function(){var l=new vr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return l.tileSize=this.tileSize,l.latRange=this.latRange,l.width=this.width,l.height=this.height,l._center=this._center,l.zoom=this.zoom,l.angle=this.angle,l._fov=this._fov,l._pitch=this._pitch,l._unmodified=this._unmodified,l._edgeInsets=this._edgeInsets.clone(),l._calcMatrices(),l},Kr.minZoom.get=function(){return this._minZoom},Kr.minZoom.set=function(l){this._minZoom!==l&&(this._minZoom=l,this.zoom=Math.max(this.zoom,l))},Kr.maxZoom.get=function(){return this._maxZoom},Kr.maxZoom.set=function(l){this._maxZoom!==l&&(this._maxZoom=l,this.zoom=Math.min(this.zoom,l))},Kr.minPitch.get=function(){return this._minPitch},Kr.minPitch.set=function(l){this._minPitch!==l&&(this._minPitch=l,this.pitch=Math.max(this.pitch,l))},Kr.maxPitch.get=function(){return this._maxPitch},Kr.maxPitch.set=function(l){this._maxPitch!==l&&(this._maxPitch=l,this.pitch=Math.min(this.pitch,l))},Kr.renderWorldCopies.get=function(){return this._renderWorldCopies},Kr.renderWorldCopies.set=function(l){l===void 0?l=!0:l===null&&(l=!1),this._renderWorldCopies=l},Kr.worldSize.get=function(){return this.tileSize*this.scale},Kr.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Kr.size.get=function(){return new o.Point(this.width,this.height)},Kr.bearing.get=function(){return-this.angle/Math.PI*180},Kr.bearing.set=function(l){var p=-o.wrap(l,-180,180)*Math.PI/180;this.angle!==p&&(this._unmodified=!1,this.angle=p,this._calcMatrices(),this.rotationMatrix=o.create$2(),o.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Kr.pitch.get=function(){return this._pitch/Math.PI*180},Kr.pitch.set=function(l){var p=o.clamp(l,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==p&&(this._unmodified=!1,this._pitch=p,this._calcMatrices())},Kr.fov.get=function(){return this._fov/Math.PI*180},Kr.fov.set=function(l){l=Math.max(.01,Math.min(60,l)),this._fov!==l&&(this._unmodified=!1,this._fov=l/180*Math.PI,this._calcMatrices())},Kr.zoom.get=function(){return this._zoom},Kr.zoom.set=function(l){var p=Math.min(Math.max(l,this.minZoom),this.maxZoom);this._zoom!==p&&(this._unmodified=!1,this._zoom=p,this.scale=this.zoomScale(p),this.tileZoom=Math.floor(p),this.zoomFraction=p-this.tileZoom,this._constrain(),this._calcMatrices())},Kr.center.get=function(){return this._center},Kr.center.set=function(l){l.lat===this._center.lat&&l.lng===this._center.lng||(this._unmodified=!1,this._center=l,this._constrain(),this._calcMatrices())},Kr.padding.get=function(){return this._edgeInsets.toJSON()},Kr.padding.set=function(l){this._edgeInsets.equals(l)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,l,1),this._calcMatrices())},Kr.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},vr.prototype.isPaddingEqual=function(l){return this._edgeInsets.equals(l)},vr.prototype.interpolatePadding=function(l,p,u){this._unmodified=!1,this._edgeInsets.interpolate(l,p,u),this._constrain(),this._calcMatrices()},vr.prototype.coveringZoomLevel=function(l){var p=(l.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/l.tileSize));return Math.max(0,p)},vr.prototype.getVisibleUnwrappedCoordinates=function(l){var p=[new o.UnwrappedTileID(0,l)];if(this._renderWorldCopies)for(var u=this.pointCoordinate(new o.Point(0,0)),f=this.pointCoordinate(new o.Point(this.width,0)),g=this.pointCoordinate(new o.Point(this.width,this.height)),b=this.pointCoordinate(new o.Point(0,this.height)),w=Math.floor(Math.min(u.x,f.x,g.x,b.x)),S=Math.floor(Math.max(u.x,f.x,g.x,b.x)),M=w-1;M<=S+1;M++)M!==0&&p.push(new o.UnwrappedTileID(M,l));return p},vr.prototype.coveringTiles=function(l){var p=this.coveringZoomLevel(l),u=p;if(l.minzoom!==void 0&&p<l.minzoom)return[];l.maxzoom!==void 0&&p>l.maxzoom&&(p=l.maxzoom);var f=o.MercatorCoordinate.fromLngLat(this.center),g=Math.pow(2,p),b=[g*f.x,g*f.y,0],w=ec.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,p),S=l.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(S=p);var M=function(Ye){return{aabb:new bs([Ye*g,0,0],[(Ye+1)*g,g,0]),zoom:0,x:0,y:0,wrap:Ye,fullyVisible:!1}},B=[],K=[],Q=p,J=l.reparseOverscaled?u:p;if(this._renderWorldCopies)for(var le=1;le<=3;le++)B.push(M(-le)),B.push(M(le));for(B.push(M(0));B.length>0;){var se=B.pop(),ye=se.x,ie=se.y,me=se.fullyVisible;if(!me){var _e=se.aabb.intersects(w);if(_e===0)continue;me=_e===2}var Pe=se.aabb.distanceX(b),Fe=se.aabb.distanceY(b),De=Math.max(Math.abs(Pe),Math.abs(Fe));if(se.zoom===Q||De>3+(1<<Q-se.zoom)-2&&se.zoom>=S)K.push({tileID:new o.OverscaledTileID(se.zoom===Q?J:se.zoom,se.wrap,se.zoom,ye,ie),distanceSq:o.sqrLen([b[0]-.5-ye,b[1]-.5-ie])});else for(var Ue=0;Ue<4;Ue++){var He=(ye<<1)+Ue%2,et=(ie<<1)+(Ue>>1);B.push({aabb:se.aabb.quadrant(Ue),zoom:se.zoom+1,x:He,y:et,wrap:se.wrap,fullyVisible:me})}}return K.sort(function(Ye,dt){return Ye.distanceSq-dt.distanceSq}).map(function(Ye){return Ye.tileID})},vr.prototype.resize=function(l,p){this.width=l,this.height=p,this.pixelsToGLUnits=[2/l,-2/p],this._constrain(),this._calcMatrices()},Kr.unmodified.get=function(){return this._unmodified},vr.prototype.zoomScale=function(l){return Math.pow(2,l)},vr.prototype.scaleZoom=function(l){return Math.log(l)/Math.LN2},vr.prototype.project=function(l){var p=o.clamp(l.lat,-this.maxValidLatitude,this.maxValidLatitude);return new o.Point(o.mercatorXfromLng(l.lng)*this.worldSize,o.mercatorYfromLat(p)*this.worldSize)},vr.prototype.unproject=function(l){return new o.MercatorCoordinate(l.x/this.worldSize,l.y/this.worldSize).toLngLat()},Kr.point.get=function(){return this.project(this.center)},vr.prototype.setLocationAtPoint=function(l,p){var u=this.pointCoordinate(p),f=this.pointCoordinate(this.centerPoint),g=this.locationCoordinate(l),b=new o.MercatorCoordinate(g.x-(u.x-f.x),g.y-(u.y-f.y));this.center=this.coordinateLocation(b),this._renderWorldCopies&&(this.center=this.center.wrap())},vr.prototype.locationPoint=function(l){return this.coordinatePoint(this.locationCoordinate(l))},vr.prototype.pointLocation=function(l){return this.coordinateLocation(this.pointCoordinate(l))},vr.prototype.locationCoordinate=function(l){return o.MercatorCoordinate.fromLngLat(l)},vr.prototype.coordinateLocation=function(l){return l.toLngLat()},vr.prototype.pointCoordinate=function(l){var p=[l.x,l.y,0,1],u=[l.x,l.y,1,1];o.transformMat4(p,p,this.pixelMatrixInverse),o.transformMat4(u,u,this.pixelMatrixInverse);var f=p[3],g=u[3],b=p[1]/f,w=u[1]/g,S=p[2]/f,M=u[2]/g,B=S===M?0:(0-S)/(M-S);return new o.MercatorCoordinate(o.number(p[0]/f,u[0]/g,B)/this.worldSize,o.number(b,w,B)/this.worldSize)},vr.prototype.coordinatePoint=function(l){var p=[l.x*this.worldSize,l.y*this.worldSize,0,1];return o.transformMat4(p,p,this.pixelMatrix),new o.Point(p[0]/p[3],p[1]/p[3])},vr.prototype.getBounds=function(){return new o.LngLatBounds().extend(this.pointLocation(new o.Point(0,0))).extend(this.pointLocation(new o.Point(this.width,0))).extend(this.pointLocation(new o.Point(this.width,this.height))).extend(this.pointLocation(new o.Point(0,this.height)))},vr.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new o.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},vr.prototype.setMaxBounds=function(l){l?(this.lngRange=[l.getWest(),l.getEast()],this.latRange=[l.getSouth(),l.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},vr.prototype.calculatePosMatrix=function(l,p){p===void 0&&(p=!1);var u=l.key,f=p?this._alignedPosMatrixCache:this._posMatrixCache;if(f[u])return f[u];var g=l.canonical,b=this.worldSize/this.zoomScale(g.z),w=g.x+Math.pow(2,g.z)*l.wrap,S=o.identity(new Float64Array(16));return o.translate(S,S,[w*b,g.y*b,0]),o.scale(S,S,[b/o.EXTENT,b/o.EXTENT,1]),o.multiply(S,p?this.alignedProjMatrix:this.projMatrix,S),f[u]=new Float32Array(S),f[u]},vr.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},vr.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var l,p,u,f,g=-90,b=90,w=-180,S=180,M=this.size,B=this._unmodified;if(this.latRange){var K=this.latRange;g=o.mercatorYfromLat(K[1])*this.worldSize,l=(b=o.mercatorYfromLat(K[0])*this.worldSize)-g<M.y?M.y/(b-g):0}if(this.lngRange){var Q=this.lngRange;w=o.mercatorXfromLng(Q[0])*this.worldSize,p=(S=o.mercatorXfromLng(Q[1])*this.worldSize)-w<M.x?M.x/(S-w):0}var J=this.point,le=Math.max(p||0,l||0);if(le)return this.center=this.unproject(new o.Point(p?(S+w)/2:J.x,l?(b+g)/2:J.y)),this.zoom+=this.scaleZoom(le),this._unmodified=B,void(this._constraining=!1);if(this.latRange){var se=J.y,ye=M.y/2;se-ye<g&&(f=g+ye),se+ye>b&&(f=b-ye)}if(this.lngRange){var ie=J.x,me=M.x/2;ie-me<w&&(u=w+me),ie+me>S&&(u=S-me)}u===void 0&&f===void 0||(this.center=this.unproject(new o.Point(u!==void 0?u:J.x,f!==void 0?f:J.y))),this._unmodified=B,this._constraining=!1}},vr.prototype._calcMatrices=function(){if(this.height){var l=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var p=Math.PI/2+this._pitch,u=this._fov*(.5+l.y/this.height),f=Math.sin(u)*this.cameraToCenterDistance/Math.sin(o.clamp(Math.PI-p-u,.01,Math.PI-.01)),g=this.point,b=g.x,w=g.y,S=1.01*(Math.cos(Math.PI/2-this._pitch)*f+this.cameraToCenterDistance),M=this.height/50,B=new Float64Array(16);o.perspective(B,this._fov,this.width/this.height,M,S),B[8]=2*-l.x/this.width,B[9]=2*l.y/this.height,o.scale(B,B,[1,-1,1]),o.translate(B,B,[0,0,-this.cameraToCenterDistance]),o.rotateX(B,B,this._pitch),o.rotateZ(B,B,this.angle),o.translate(B,B,[-b,-w,0]),this.mercatorMatrix=o.scale([],B,[this.worldSize,this.worldSize,this.worldSize]),o.scale(B,B,[1,1,o.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=B,this.invProjMatrix=o.invert([],this.projMatrix);var K=this.width%2/2,Q=this.height%2/2,J=Math.cos(this.angle),le=Math.sin(this.angle),se=b-Math.round(b)+J*K+le*Q,ye=w-Math.round(w)+J*Q+le*K,ie=new Float64Array(B);if(o.translate(ie,ie,[se>.5?se-1:se,ye>.5?ye-1:ye,0]),this.alignedProjMatrix=ie,B=o.create(),o.scale(B,B,[this.width/2,-this.height/2,1]),o.translate(B,B,[1,-1,0]),this.labelPlaneMatrix=B,B=o.create(),o.scale(B,B,[1,-1,1]),o.translate(B,B,[-1,-1,0]),o.scale(B,B,[2/this.width,2/this.height,1]),this.glCoordMatrix=B,this.pixelMatrix=o.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(B=o.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=B,this._posMatrixCache={},this._alignedPosMatrixCache={}}},vr.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var l=this.pointCoordinate(new o.Point(0,0)),p=[l.x*this.worldSize,l.y*this.worldSize,0,1];return o.transformMat4(p,p,this.pixelMatrix)[3]/this.cameraToCenterDistance},vr.prototype.getCameraPoint=function(){var l=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.Point(0,l))},vr.prototype.getCameraQueryGeometry=function(l){var p=this.getCameraPoint();if(l.length===1)return[l[0],p];for(var u=p.x,f=p.y,g=p.x,b=p.y,w=0,S=l;w<S.length;w+=1){var M=S[w];u=Math.min(u,M.x),f=Math.min(f,M.y),g=Math.max(g,M.x),b=Math.max(b,M.y)}return[new o.Point(u,f),new o.Point(g,f),new o.Point(g,b),new o.Point(u,b),new o.Point(u,f)]},Object.defineProperties(vr.prototype,Kr);var no=function(l){var p,u,f,g;this._hashName=l&&encodeURIComponent(l),o.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(p=this._updateHashUnthrottled.bind(this),u=!1,f=null,g=function(){f=null,u&&(p(),f=setTimeout(g,300),u=!1)},function(){return u=!0,f||g(),f})};no.prototype.addTo=function(l){return this._map=l,o.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},no.prototype.remove=function(){return o.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},no.prototype.getHashString=function(l){var p=this._map.getCenter(),u=Math.round(100*this._map.getZoom())/100,f=Math.ceil((u*Math.LN2+Math.log(512/360/.5))/Math.LN10),g=Math.pow(10,f),b=Math.round(p.lng*g)/g,w=Math.round(p.lat*g)/g,S=this._map.getBearing(),M=this._map.getPitch(),B="";if(B+=l?"/"+b+"/"+w+"/"+u:u+"/"+w+"/"+b,(S||M)&&(B+="/"+Math.round(10*S)/10),M&&(B+="/"+Math.round(M)),this._hashName){var K=this._hashName,Q=!1,J=o.window.location.hash.slice(1).split("&").map(function(le){var se=le.split("=")[0];return se===K?(Q=!0,se+"="+B):le}).filter(function(le){return le});return Q||J.push(K+"="+B),"#"+J.join("&")}return"#"+B},no.prototype._getCurrentHash=function(){var l,p=this,u=o.window.location.hash.replace("#","");return this._hashName?(u.split("&").map(function(f){return f.split("=")}).forEach(function(f){f[0]===p._hashName&&(l=f)}),(l&&l[1]||"").split("/")):u.split("/")},no.prototype._onHashChange=function(){var l=this._getCurrentHash();if(l.length>=3&&!l.some(function(u){return isNaN(u)})){var p=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(l[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+l[2],+l[1]],zoom:+l[0],bearing:p,pitch:+(l[4]||0)}),!0}return!1},no.prototype._updateHashUnthrottled=function(){var l=o.window.location.href.replace(/(#.+)?$/,this.getHashString());try{o.window.history.replaceState(o.window.history.state,null,l)}catch{}};var Xl={linearity:.3,easing:o.bezier(0,0,.3,1)},el=o.extend({deceleration:2500,maxSpeed:1400},Xl),Ql=o.extend({deceleration:20,maxSpeed:1400},Xl),Lv=o.extend({deceleration:1e3,maxSpeed:360},Xl),Ov=o.extend({deceleration:1e3,maxSpeed:90},Xl),Jl=function(l){this._map=l,this.clear()};function Yl(l,p){(!l.duration||l.duration<p.duration)&&(l.duration=p.duration,l.easing=p.easing)}function ca(l,p,u){var f=u.maxSpeed,g=u.linearity,b=u.deceleration,w=o.clamp(l*g/(p/1e3),-f,f),S=Math.abs(w)/(b*g);return{easing:u.easing,duration:1e3*S,amount:w*(S/2)}}Jl.prototype.clear=function(){this._inertiaBuffer=[]},Jl.prototype.record=function(l){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:o.browser.now(),settings:l})},Jl.prototype._drainInertiaBuffer=function(){for(var l=this._inertiaBuffer,p=o.browser.now();l.length>0&&p-l[0].time>160;)l.shift()},Jl.prototype._onMoveEnd=function(l){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var p={zoom:0,bearing:0,pitch:0,pan:new o.Point(0,0),pinchAround:void 0,around:void 0},u=0,f=this._inertiaBuffer;u<f.length;u+=1){var g=f[u].settings;p.zoom+=g.zoomDelta||0,p.bearing+=g.bearingDelta||0,p.pitch+=g.pitchDelta||0,g.panDelta&&p.pan._add(g.panDelta),g.around&&(p.around=g.around),g.pinchAround&&(p.pinchAround=g.pinchAround)}var b=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,w={};if(p.pan.mag()){var S=ca(p.pan.mag(),b,o.extend({},el,l||{}));w.offset=p.pan.mult(S.amount/p.pan.mag()),w.center=this._map.transform.center,Yl(w,S)}if(p.zoom){var M=ca(p.zoom,b,Ql);w.zoom=this._map.transform.zoom+M.amount,Yl(w,M)}if(p.bearing){var B=ca(p.bearing,b,Lv);w.bearing=this._map.transform.bearing+o.clamp(B.amount,-179,179),Yl(w,B)}if(p.pitch){var K=ca(p.pitch,b,Ov);w.pitch=this._map.transform.pitch+K.amount,Yl(w,K)}if(w.zoom||w.bearing){var Q=p.pinchAround===void 0?p.around:p.pinchAround;w.around=Q?this._map.unproject(Q):this._map.getCenter()}return this.clear(),o.extend(w,{noMoveStart:!0})}};var Dn=function(l){function p(f,g,b,w){w===void 0&&(w={});var S=x.mousePos(g.getCanvasContainer(),b),M=g.unproject(S);l.call(this,f,o.extend({point:S,lngLat:M,originalEvent:b},w)),this._defaultPrevented=!1,this.target=g}l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p;var u={defaultPrevented:{configurable:!0}};return p.prototype.preventDefault=function(){this._defaultPrevented=!0},u.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(p.prototype,u),p}(o.Event),eu=function(l){function p(f,g,b){var w=f==="touchend"?b.changedTouches:b.touches,S=x.touchPos(g.getCanvasContainer(),w),M=S.map(function(Q){return g.unproject(Q)}),B=S.reduce(function(Q,J,le,se){return Q.add(J.div(se.length))},new o.Point(0,0)),K=g.unproject(B);l.call(this,f,{points:S,point:B,lngLats:M,lngLat:K,originalEvent:b}),this._defaultPrevented=!1}l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p;var u={defaultPrevented:{configurable:!0}};return p.prototype.preventDefault=function(){this._defaultPrevented=!0},u.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(p.prototype,u),p}(o.Event),qd=function(l){function p(f,g,b){l.call(this,f,{originalEvent:b}),this._defaultPrevented=!1}l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p;var u={defaultPrevented:{configurable:!0}};return p.prototype.preventDefault=function(){this._defaultPrevented=!0},u.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(p.prototype,u),p}(o.Event),Pn=function(l,p){this._map=l,this._clickTolerance=p.clickTolerance};Pn.prototype.reset=function(){delete this._mousedownPos},Pn.prototype.wheel=function(l){return this._firePreventable(new qd(l.type,this._map,l))},Pn.prototype.mousedown=function(l,p){return this._mousedownPos=p,this._firePreventable(new Dn(l.type,this._map,l))},Pn.prototype.mouseup=function(l){this._map.fire(new Dn(l.type,this._map,l))},Pn.prototype.click=function(l,p){this._mousedownPos&&this._mousedownPos.dist(p)>=this._clickTolerance||this._map.fire(new Dn(l.type,this._map,l))},Pn.prototype.dblclick=function(l){return this._firePreventable(new Dn(l.type,this._map,l))},Pn.prototype.mouseover=function(l){this._map.fire(new Dn(l.type,this._map,l))},Pn.prototype.mouseout=function(l){this._map.fire(new Dn(l.type,this._map,l))},Pn.prototype.touchstart=function(l){return this._firePreventable(new eu(l.type,this._map,l))},Pn.prototype.touchmove=function(l){this._map.fire(new eu(l.type,this._map,l))},Pn.prototype.touchend=function(l){this._map.fire(new eu(l.type,this._map,l))},Pn.prototype.touchcancel=function(l){this._map.fire(new eu(l.type,this._map,l))},Pn.prototype._firePreventable=function(l){if(this._map.fire(l),l.defaultPrevented)return{}},Pn.prototype.isEnabled=function(){return!0},Pn.prototype.isActive=function(){return!1},Pn.prototype.enable=function(){},Pn.prototype.disable=function(){};var _t=function(l){this._map=l};_t.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},_t.prototype.mousemove=function(l){this._map.fire(new Dn(l.type,this._map,l))},_t.prototype.mousedown=function(){this._delayContextMenu=!0},_t.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Dn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},_t.prototype.contextmenu=function(l){this._delayContextMenu?this._contextMenuEvent=l:this._map.fire(new Dn(l.type,this._map,l)),this._map.listens("contextmenu")&&l.preventDefault()},_t.prototype.isEnabled=function(){return!0},_t.prototype.isActive=function(){return!1},_t.prototype.enable=function(){},_t.prototype.disable=function(){};var ji=function(l,p){this._map=l,this._el=l.getCanvasContainer(),this._container=l.getContainer(),this._clickTolerance=p.clickTolerance||1};function tc(l,p){for(var u={},f=0;f<l.length;f++)u[l[f].identifier]=p[f];return u}ji.prototype.isEnabled=function(){return!!this._enabled},ji.prototype.isActive=function(){return!!this._active},ji.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},ji.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},ji.prototype.mousedown=function(l,p){this.isEnabled()&&l.shiftKey&&l.button===0&&(x.disableDrag(),this._startPos=this._lastPos=p,this._active=!0)},ji.prototype.mousemoveWindow=function(l,p){if(this._active){var u=p;if(!(this._lastPos.equals(u)||!this._box&&u.dist(this._startPos)<this._clickTolerance)){var f=this._startPos;this._lastPos=u,this._box||(this._box=x.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",l));var g=Math.min(f.x,u.x),b=Math.max(f.x,u.x),w=Math.min(f.y,u.y),S=Math.max(f.y,u.y);x.setTransform(this._box,"translate("+g+"px,"+w+"px)"),this._box.style.width=b-g+"px",this._box.style.height=S-w+"px"}}},ji.prototype.mouseupWindow=function(l,p){var u=this;if(this._active&&l.button===0){var f=this._startPos,g=p;if(this.reset(),x.suppressClick(),f.x!==g.x||f.y!==g.y)return this._map.fire(new o.Event("boxzoomend",{originalEvent:l})),{cameraAnimation:function(b){return b.fitScreenCoordinates(f,g,u._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",l)}},ji.prototype.keydown=function(l){this._active&&l.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",l))},ji.prototype.blur=function(){this.reset()},ji.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(x.remove(this._box),this._box=null),x.enableDrag(),delete this._startPos,delete this._lastPos},ji.prototype._fireEvent=function(l,p){return this._map.fire(new o.Event(l,{originalEvent:p}))};var tl=function(l){this.reset(),this.numTouches=l.numTouches};tl.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},tl.prototype.touchstart=function(l,p,u){(this.centroid||u.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=l.timeStamp),u.length===this.numTouches&&(this.centroid=function(f){for(var g=new o.Point(0,0),b=0,w=f;b<w.length;b+=1)g._add(w[b]);return g.div(f.length)}(p),this.touches=tc(u,p)))},tl.prototype.touchmove=function(l,p,u){if(!this.aborted&&this.centroid){var f=tc(u,p);for(var g in this.touches){var b=f[g];(!b||b.dist(this.touches[g])>30)&&(this.aborted=!0)}}},tl.prototype.touchend=function(l,p,u){if((!this.centroid||l.timeStamp-this.startTime>500)&&(this.aborted=!0),u.length===0){var f=!this.aborted&&this.centroid;if(this.reset(),f)return f}};var zo=function(l){this.singleTap=new tl(l),this.numTaps=l.numTaps,this.reset()};zo.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},zo.prototype.touchstart=function(l,p,u){this.singleTap.touchstart(l,p,u)},zo.prototype.touchmove=function(l,p,u){this.singleTap.touchmove(l,p,u)},zo.prototype.touchend=function(l,p,u){var f=this.singleTap.touchend(l,p,u);if(f){var g=l.timeStamp-this.lastTime<500,b=!this.lastTap||this.lastTap.dist(f)<30;if(g&&b||this.reset(),this.count++,this.lastTime=l.timeStamp,this.lastTap=f,this.count===this.numTaps)return this.reset(),f}};var Vi=function(){this._zoomIn=new zo({numTouches:1,numTaps:2}),this._zoomOut=new zo({numTouches:2,numTaps:1}),this.reset()};Vi.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Vi.prototype.touchstart=function(l,p,u){this._zoomIn.touchstart(l,p,u),this._zoomOut.touchstart(l,p,u)},Vi.prototype.touchmove=function(l,p,u){this._zoomIn.touchmove(l,p,u),this._zoomOut.touchmove(l,p,u)},Vi.prototype.touchend=function(l,p,u){var f=this,g=this._zoomIn.touchend(l,p,u),b=this._zoomOut.touchend(l,p,u);return g?(this._active=!0,l.preventDefault(),setTimeout(function(){return f.reset()},0),{cameraAnimation:function(w){return w.easeTo({duration:300,zoom:w.getZoom()+1,around:w.unproject(g)},{originalEvent:l})}}):b?(this._active=!0,l.preventDefault(),setTimeout(function(){return f.reset()},0),{cameraAnimation:function(w){return w.easeTo({duration:300,zoom:w.getZoom()-1,around:w.unproject(b)},{originalEvent:l})}}):void 0},Vi.prototype.touchcancel=function(){this.reset()},Vi.prototype.enable=function(){this._enabled=!0},Vi.prototype.disable=function(){this._enabled=!1,this.reset()},Vi.prototype.isEnabled=function(){return this._enabled},Vi.prototype.isActive=function(){return this._active};var th={0:1,2:2},ot=function(l){this.reset(),this._clickTolerance=l.clickTolerance||1};ot.prototype.blur=function(){this.reset()},ot.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},ot.prototype._correctButton=function(l,p){return!1},ot.prototype._move=function(l,p){return{}},ot.prototype.mousedown=function(l,p){if(!this._lastPoint){var u=x.mouseButton(l);this._correctButton(l,u)&&(this._lastPoint=p,this._eventButton=u)}},ot.prototype.mousemoveWindow=function(l,p){var u=this._lastPoint;if(u){if(l.preventDefault(),function(f,g){var b=th[g];return f.buttons===void 0||(f.buttons&b)!==b}(l,this._eventButton))this.reset();else if(this._moved||!(p.dist(u)<this._clickTolerance))return this._moved=!0,this._lastPoint=p,this._move(u,p)}},ot.prototype.mouseupWindow=function(l){this._lastPoint&&x.mouseButton(l)===this._eventButton&&(this._moved&&x.suppressClick(),this.reset())},ot.prototype.enable=function(){this._enabled=!0},ot.prototype.disable=function(){this._enabled=!1,this.reset()},ot.prototype.isEnabled=function(){return this._enabled},ot.prototype.isActive=function(){return this._active};var rh=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.mousedown=function(u,f){l.prototype.mousedown.call(this,u,f),this._lastPoint&&(this._active=!0)},p.prototype._correctButton=function(u,f){return f===0&&!u.ctrlKey},p.prototype._move=function(u,f){return{around:f,panDelta:f.sub(u)}},p}(ot),rc=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype._correctButton=function(u,f){return f===0&&u.ctrlKey||f===2},p.prototype._move=function(u,f){var g=.8*(f.x-u.x);if(g)return this._active=!0,{bearingDelta:g}},p.prototype.contextmenu=function(u){u.preventDefault()},p}(ot),nh=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype._correctButton=function(u,f){return f===0&&u.ctrlKey||f===2},p.prototype._move=function(u,f){var g=-.5*(f.y-u.y);if(g)return this._active=!0,{pitchDelta:g}},p.prototype.contextmenu=function(u){u.preventDefault()},p}(ot),ho=function(l){this._minTouches=1,this._clickTolerance=l.clickTolerance||1,this.reset()};ho.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new o.Point(0,0)},ho.prototype.touchstart=function(l,p,u){return this._calculateTransform(l,p,u)},ho.prototype.touchmove=function(l,p,u){if(this._active&&!(u.length<this._minTouches))return l.preventDefault(),this._calculateTransform(l,p,u)},ho.prototype.touchend=function(l,p,u){this._calculateTransform(l,p,u),this._active&&u.length<this._minTouches&&this.reset()},ho.prototype.touchcancel=function(){this.reset()},ho.prototype._calculateTransform=function(l,p,u){u.length>0&&(this._active=!0);var f=tc(u,p),g=new o.Point(0,0),b=new o.Point(0,0),w=0;for(var S in f){var M=f[S],B=this._touches[S];B&&(g._add(M),b._add(M.sub(B)),w++,f[S]=M)}if(this._touches=f,!(w<this._minTouches)&&b.mag()){var K=b.div(w);if(this._sum._add(K),!(this._sum.mag()<this._clickTolerance))return{around:g.div(w),panDelta:K}}},ho.prototype.enable=function(){this._enabled=!0},ho.prototype.disable=function(){this._enabled=!1,this.reset()},ho.prototype.isEnabled=function(){return this._enabled},ho.prototype.isActive=function(){return this._active};var $i=function(){this.reset()};function nc(l,p,u){for(var f=0;f<l.length;f++)if(l[f].identifier===u)return p[f]}function ic(l,p){return Math.log(l/p)/Math.LN2}$i.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},$i.prototype._start=function(l){},$i.prototype._move=function(l,p,u){return{}},$i.prototype.touchstart=function(l,p,u){this._firstTwoTouches||u.length<2||(this._firstTwoTouches=[u[0].identifier,u[1].identifier],this._start([p[0],p[1]]))},$i.prototype.touchmove=function(l,p,u){if(this._firstTwoTouches){l.preventDefault();var f=this._firstTwoTouches,g=f[1],b=nc(u,p,f[0]),w=nc(u,p,g);if(b&&w){var S=this._aroundCenter?null:b.add(w).div(2);return this._move([b,w],S,l)}}},$i.prototype.touchend=function(l,p,u){if(this._firstTwoTouches){var f=this._firstTwoTouches,g=f[1],b=nc(u,p,f[0]),w=nc(u,p,g);b&&w||(this._active&&x.suppressClick(),this.reset())}},$i.prototype.touchcancel=function(){this.reset()},$i.prototype.enable=function(l){this._enabled=!0,this._aroundCenter=!!l&&l.around==="center"},$i.prototype.disable=function(){this._enabled=!1,this.reset()},$i.prototype.isEnabled=function(){return this._enabled},$i.prototype.isActive=function(){return this._active};var qi=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.reset=function(){l.prototype.reset.call(this),delete this._distance,delete this._startDistance},p.prototype._start=function(u){this._startDistance=this._distance=u[0].dist(u[1])},p.prototype._move=function(u,f){var g=this._distance;if(this._distance=u[0].dist(u[1]),this._active||!(Math.abs(ic(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:ic(this._distance,g),pinchAround:f}},p}($i);function pa(l,p){return 180*l.angleWith(p)/Math.PI}var Wd=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.reset=function(){l.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},p.prototype._start=function(u){this._startVector=this._vector=u[0].sub(u[1]),this._minDiameter=u[0].dist(u[1])},p.prototype._move=function(u,f){var g=this._vector;if(this._vector=u[0].sub(u[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:pa(this._vector,g),pinchAround:f}},p.prototype._isBelowThreshold=function(u){this._minDiameter=Math.min(this._minDiameter,u.mag());var f=25/(Math.PI*this._minDiameter)*360,g=pa(u,this._startVector);return Math.abs(g)<f},p}($i);function tu(l){return Math.abs(l.y)>Math.abs(l.x)}var ih=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.reset=function(){l.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},p.prototype._start=function(u){this._lastPoints=u,tu(u[0].sub(u[1]))&&(this._valid=!1)},p.prototype._move=function(u,f,g){var b=u[0].sub(this._lastPoints[0]),w=u[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(b,w,g.timeStamp),this._valid)return this._lastPoints=u,this._active=!0,{pitchDelta:(b.y+w.y)/2*-.5}},p.prototype.gestureBeginsVertically=function(u,f,g){if(this._valid!==void 0)return this._valid;var b=u.mag()>=2,w=f.mag()>=2;if(b||w){if(!b||!w)return this._firstMove===void 0&&(this._firstMove=g),g-this._firstMove<100&&void 0;var S=u.y>0==f.y>0;return tu(u)&&tu(f)&&S}},p}($i),oh={panStep:100,bearingStep:15,pitchStep:10},Lo=function(){var l=oh;this._panStep=l.panStep,this._bearingStep=l.bearingStep,this._pitchStep=l.pitchStep,this._rotationDisabled=!1};function io(l){return l*(2-l)}Lo.prototype.blur=function(){this.reset()},Lo.prototype.reset=function(){this._active=!1},Lo.prototype.keydown=function(l){var p=this;if(!(l.altKey||l.ctrlKey||l.metaKey)){var u=0,f=0,g=0,b=0,w=0;switch(l.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:l.shiftKey?f=-1:(l.preventDefault(),b=-1);break;case 39:l.shiftKey?f=1:(l.preventDefault(),b=1);break;case 38:l.shiftKey?g=1:(l.preventDefault(),w=-1);break;case 40:l.shiftKey?g=-1:(l.preventDefault(),w=1);break;default:return}return this._rotationDisabled&&(f=0,g=0),{cameraAnimation:function(S){var M=S.getZoom();S.easeTo({duration:300,easeId:"keyboardHandler",easing:io,zoom:u?Math.round(M)+u*(l.shiftKey?2:1):M,bearing:S.getBearing()+f*p._bearingStep,pitch:S.getPitch()+g*p._pitchStep,offset:[-b*p._panStep,-w*p._panStep],center:S.getCenter()},{originalEvent:l})}}}},Lo.prototype.enable=function(){this._enabled=!0},Lo.prototype.disable=function(){this._enabled=!1,this.reset()},Lo.prototype.isEnabled=function(){return this._enabled},Lo.prototype.isActive=function(){return this._active},Lo.prototype.disableRotation=function(){this._rotationDisabled=!0},Lo.prototype.enableRotation=function(){this._rotationDisabled=!1};var ur=function(l,p){this._map=l,this._el=l.getCanvasContainer(),this._handler=p,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,o.bindAll(["_onTimeout"],this)};ur.prototype.setZoomRate=function(l){this._defaultZoomRate=l},ur.prototype.setWheelZoomRate=function(l){this._wheelZoomRate=l},ur.prototype.isEnabled=function(){return!!this._enabled},ur.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},ur.prototype.isZooming=function(){return!!this._zooming},ur.prototype.enable=function(l){this.isEnabled()||(this._enabled=!0,this._aroundCenter=l&&l.around==="center")},ur.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},ur.prototype.wheel=function(l){if(this.isEnabled()){var p=l.deltaMode===o.window.WheelEvent.DOM_DELTA_LINE?40*l.deltaY:l.deltaY,u=o.browser.now(),f=u-(this._lastWheelEventTime||0);this._lastWheelEventTime=u,p!==0&&p%4.000244140625==0?this._type="wheel":p!==0&&Math.abs(p)<4?this._type="trackpad":f>400?(this._type=null,this._lastValue=p,this._timeout=setTimeout(this._onTimeout,40,l)):this._type||(this._type=Math.abs(f*p)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,p+=this._lastValue)),l.shiftKey&&p&&(p/=4),this._type&&(this._lastWheelEvent=l,this._delta-=p,this._active||this._start(l)),l.preventDefault()}},ur.prototype._onTimeout=function(l){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(l)},ur.prototype._start=function(l){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var p=x.mousePos(this._el,l);this._around=o.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(p)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},ur.prototype.renderFrame=function(){var l=this;if(this._frameId&&(this._frameId=null,this.isActive())){var p=this._map.transform;if(this._delta!==0){var u=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,f=2/(1+Math.exp(-Math.abs(this._delta*u)));this._delta<0&&f!==0&&(f=1/f);var g=typeof this._targetZoom=="number"?p.zoomScale(this._targetZoom):p.scale;this._targetZoom=Math.min(p.maxZoom,Math.max(p.minZoom,p.scaleZoom(g*f))),this._type==="wheel"&&(this._startZoom=p.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var b,w=typeof this._targetZoom=="number"?this._targetZoom:p.zoom,S=this._startZoom,M=this._easing,B=!1;if(this._type==="wheel"&&S&&M){var K=Math.min((o.browser.now()-this._lastWheelEventTime)/200,1),Q=M(K);b=o.number(S,w,Q),K<1?this._frameId||(this._frameId=!0):B=!0}else b=w,B=!0;return this._active=!0,B&&(this._active=!1,this._finishTimeout=setTimeout(function(){l._zooming=!1,l._handler._triggerRenderFrame(),delete l._targetZoom,delete l._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!B,zoomDelta:b-p.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},ur.prototype._smoothOutEasing=function(l){var p=o.ease;if(this._prevEase){var u=this._prevEase,f=(o.browser.now()-u.start)/u.duration,g=u.easing(f+.01)-u.easing(f),b=.27/Math.sqrt(g*g+1e-4)*.01,w=Math.sqrt(.0729-b*b);p=o.bezier(b,w,.25,1)}return this._prevEase={start:o.browser.now(),duration:l,easing:p},p},ur.prototype.blur=function(){this.reset()},ur.prototype.reset=function(){this._active=!1};var Ho=function(l,p){this._clickZoom=l,this._tapZoom=p};Ho.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Ho.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Ho.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Ho.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var fo=function(){this.reset()};fo.prototype.reset=function(){this._active=!1},fo.prototype.blur=function(){this.reset()},fo.prototype.dblclick=function(l,p){return l.preventDefault(),{cameraAnimation:function(u){u.easeTo({duration:300,zoom:u.getZoom()+(l.shiftKey?-1:1),around:u.unproject(p)},{originalEvent:l})}}},fo.prototype.enable=function(){this._enabled=!0},fo.prototype.disable=function(){this._enabled=!1,this.reset()},fo.prototype.isEnabled=function(){return this._enabled},fo.prototype.isActive=function(){return this._active};var ui=function(){this._tap=new zo({numTouches:1,numTaps:1}),this.reset()};ui.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},ui.prototype.touchstart=function(l,p,u){this._swipePoint||(this._tapTime&&l.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?u.length>0&&(this._swipePoint=p[0],this._swipeTouch=u[0].identifier):this._tap.touchstart(l,p,u))},ui.prototype.touchmove=function(l,p,u){if(this._tapTime){if(this._swipePoint){if(u[0].identifier!==this._swipeTouch)return;var f=p[0],g=f.y-this._swipePoint.y;return this._swipePoint=f,l.preventDefault(),this._active=!0,{zoomDelta:g/128}}}else this._tap.touchmove(l,p,u)},ui.prototype.touchend=function(l,p,u){this._tapTime?this._swipePoint&&u.length===0&&this.reset():this._tap.touchend(l,p,u)&&(this._tapTime=l.timeStamp)},ui.prototype.touchcancel=function(){this.reset()},ui.prototype.enable=function(){this._enabled=!0},ui.prototype.disable=function(){this._enabled=!1,this.reset()},ui.prototype.isEnabled=function(){return this._enabled},ui.prototype.isActive=function(){return this._active};var ws=function(l,p,u){this._el=l,this._mousePan=p,this._touchPan=u};ws.prototype.enable=function(l){this._inertiaOptions=l||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},ws.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},ws.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},ws.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Oa=function(l,p,u){this._pitchWithRotate=l.pitchWithRotate,this._mouseRotate=p,this._mousePitch=u};Oa.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Oa.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Oa.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Oa.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Oo=function(l,p,u,f){this._el=l,this._touchZoom=p,this._touchRotate=u,this._tapDragZoom=f,this._rotationDisabled=!1,this._enabled=!0};Oo.prototype.enable=function(l){this._touchZoom.enable(l),this._rotationDisabled||this._touchRotate.enable(l),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},Oo.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},Oo.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Oo.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Oo.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Oo.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var _i=function(l){return l.zoom||l.drag||l.pitch||l.rotate},ru=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p}(o.Event);function Ct(l){return l.panDelta&&l.panDelta.mag()||l.zoomDelta||l.bearingDelta||l.pitchDelta}var bt=function(l,p){this._map=l,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Jl(l),this._bearingSnap=p.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(p),o.bindAll(["handleEvent","handleWindowEvent"],this);var u=this._el;this._listeners=[[u,"touchstart",{passive:!0}],[u,"touchmove",{passive:!1}],[u,"touchend",void 0],[u,"touchcancel",void 0],[u,"mousedown",void 0],[u,"mousemove",void 0],[u,"mouseup",void 0],[o.window.document,"mousemove",{capture:!0}],[o.window.document,"mouseup",void 0],[u,"mouseover",void 0],[u,"mouseout",void 0],[u,"dblclick",void 0],[u,"click",void 0],[u,"keydown",{capture:!1}],[u,"keyup",void 0],[u,"wheel",{passive:!1}],[u,"contextmenu",void 0],[o.window,"blur",void 0]];for(var f=0,g=this._listeners;f<g.length;f+=1){var b=g[f],w=b[0];x.addEventListener(w,b[1],w===o.window.document?this.handleWindowEvent:this.handleEvent,b[2])}};bt.prototype.destroy=function(){for(var l=0,p=this._listeners;l<p.length;l+=1){var u=p[l],f=u[0];x.removeEventListener(f,u[1],f===o.window.document?this.handleWindowEvent:this.handleEvent,u[2])}},bt.prototype._addDefaultHandlers=function(l){var p=this._map,u=p.getCanvasContainer();this._add("mapEvent",new Pn(p,l));var f=p.boxZoom=new ji(p,l);this._add("boxZoom",f);var g=new Vi,b=new fo;p.doubleClickZoom=new Ho(b,g),this._add("tapZoom",g),this._add("clickZoom",b);var w=new ui;this._add("tapDragZoom",w);var S=p.touchPitch=new ih;this._add("touchPitch",S);var M=new rc(l),B=new nh(l);p.dragRotate=new Oa(l,M,B),this._add("mouseRotate",M,["mousePitch"]),this._add("mousePitch",B,["mouseRotate"]);var K=new rh(l),Q=new ho(l);p.dragPan=new ws(u,K,Q),this._add("mousePan",K),this._add("touchPan",Q,["touchZoom","touchRotate"]);var J=new Wd,le=new qi;p.touchZoomRotate=new Oo(u,le,J,w),this._add("touchRotate",J,["touchPan","touchZoom"]),this._add("touchZoom",le,["touchPan","touchRotate"]);var se=p.scrollZoom=new ur(p,this);this._add("scrollZoom",se,["mousePan"]);var ye=p.keyboard=new Lo;this._add("keyboard",ye),this._add("blockableMapEvent",new _t(p));for(var ie=0,me=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];ie<me.length;ie+=1){var _e=me[ie];l.interactive&&l[_e]&&p[_e].enable(l[_e])}},bt.prototype._add=function(l,p,u){this._handlers.push({handlerName:l,handler:p,allowed:u}),this._handlersById[l]=p},bt.prototype.stop=function(l){if(!this._updatingCamera){for(var p=0,u=this._handlers;p<u.length;p+=1)u[p].handler.reset();this._inertia.clear(),this._fireEvents({},{},l),this._changes=[]}},bt.prototype.isActive=function(){for(var l=0,p=this._handlers;l<p.length;l+=1)if(p[l].handler.isActive())return!0;return!1},bt.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},bt.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},bt.prototype.isMoving=function(){return!!_i(this._eventsInProgress)||this.isZooming()},bt.prototype._blockedByActive=function(l,p,u){for(var f in l)if(f!==u&&(!p||p.indexOf(f)<0))return!0;return!1},bt.prototype.handleWindowEvent=function(l){this.handleEvent(l,l.type+"Window")},bt.prototype._getMapTouches=function(l){for(var p=[],u=0,f=l;u<f.length;u+=1){var g=f[u];this._el.contains(g.target)&&p.push(g)}return p},bt.prototype.handleEvent=function(l,p){this._updatingCamera=!0;for(var u=l.type==="renderFrame"?void 0:l,f={needsRenderFrame:!1},g={},b={},w=l.touches?this._getMapTouches(l.touches):void 0,S=w?x.touchPos(this._el,w):x.mousePos(this._el,l),M=0,B=this._handlers;M<B.length;M+=1){var K=B[M],Q=K.handlerName,J=K.handler,le=K.allowed;if(J.isEnabled()){var se=void 0;this._blockedByActive(b,le,Q)?J.reset():J[p||l.type]&&(se=J[p||l.type](l,S,w),this.mergeHandlerResult(f,g,se,Q,u),se&&se.needsRenderFrame&&this._triggerRenderFrame()),(se||J.isActive())&&(b[Q]=J)}}var ye={};for(var ie in this._previousActiveHandlers)b[ie]||(ye[ie]=u);this._previousActiveHandlers=b,(Object.keys(ye).length||Ct(f))&&(this._changes.push([f,g,ye]),this._triggerRenderFrame()),(Object.keys(b).length||Ct(f))&&this._map._stop(!0),this._updatingCamera=!1;var me=f.cameraAnimation;me&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],me(this._map))},bt.prototype.mergeHandlerResult=function(l,p,u,f,g){if(u){o.extend(l,u);var b={handlerName:f,originalEvent:u.originalEvent||g};u.zoomDelta!==void 0&&(p.zoom=b),u.panDelta!==void 0&&(p.drag=b),u.pitchDelta!==void 0&&(p.pitch=b),u.bearingDelta!==void 0&&(p.rotate=b)}},bt.prototype._applyChanges=function(){for(var l={},p={},u={},f=0,g=this._changes;f<g.length;f+=1){var b=g[f],w=b[0],S=b[1],M=b[2];w.panDelta&&(l.panDelta=(l.panDelta||new o.Point(0,0))._add(w.panDelta)),w.zoomDelta&&(l.zoomDelta=(l.zoomDelta||0)+w.zoomDelta),w.bearingDelta&&(l.bearingDelta=(l.bearingDelta||0)+w.bearingDelta),w.pitchDelta&&(l.pitchDelta=(l.pitchDelta||0)+w.pitchDelta),w.around!==void 0&&(l.around=w.around),w.pinchAround!==void 0&&(l.pinchAround=w.pinchAround),w.noInertia&&(l.noInertia=w.noInertia),o.extend(p,S),o.extend(u,M)}this._updateMapTransform(l,p,u),this._changes=[]},bt.prototype._updateMapTransform=function(l,p,u){var f=this._map,g=f.transform;if(!Ct(l))return this._fireEvents(p,u,!0);var b=l.panDelta,w=l.zoomDelta,S=l.bearingDelta,M=l.pitchDelta,B=l.around,K=l.pinchAround;K!==void 0&&(B=K),f._stop(!0),B=B||f.transform.centerPoint;var Q=g.pointLocation(b?B.sub(b):B);S&&(g.bearing+=S),M&&(g.pitch+=M),w&&(g.zoom+=w),g.setLocationAtPoint(Q,B),this._map._update(),l.noInertia||this._inertia.record(l),this._fireEvents(p,u,!0)},bt.prototype._fireEvents=function(l,p,u){var f=this,g=_i(this._eventsInProgress),b=_i(l),w={};for(var S in l)this._eventsInProgress[S]||(w[S+"start"]=l[S].originalEvent),this._eventsInProgress[S]=l[S];for(var M in!g&&b&&this._fireEvent("movestart",b.originalEvent),w)this._fireEvent(M,w[M]);for(var B in b&&this._fireEvent("move",b.originalEvent),l)this._fireEvent(B,l[B].originalEvent);var K,Q={};for(var J in this._eventsInProgress){var le=this._eventsInProgress[J],se=le.handlerName,ye=le.originalEvent;this._handlersById[se].isActive()||(delete this._eventsInProgress[J],Q[J+"end"]=K=p[se]||ye)}for(var ie in Q)this._fireEvent(ie,Q[ie]);var me=_i(this._eventsInProgress);if(u&&(g||b)&&!me){this._updatingCamera=!0;var _e=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Pe=function(Fe){return Fe!==0&&-f._bearingSnap<Fe&&Fe<f._bearingSnap};_e?(Pe(_e.bearing||this._map.getBearing())&&(_e.bearing=0),this._map.easeTo(_e,{originalEvent:K})):(this._map.fire(new o.Event("moveend",{originalEvent:K})),Pe(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},bt.prototype._fireEvent=function(l,p){this._map.fire(new o.Event(l,p?{originalEvent:p}:{}))},bt.prototype._requestFrame=function(){var l=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(p){delete l._frameId,l.handleEvent(new ru("renderFrame",{timeStamp:p})),l._applyChanges()})},bt.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var oc=function(l){function p(u,f){l.call(this),this._moving=!1,this._zooming=!1,this.transform=u,this._bearingSnap=f.bearingSnap,o.bindAll(["_renderFrameCallback"],this)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getCenter=function(){return new o.LngLat(this.transform.center.lng,this.transform.center.lat)},p.prototype.setCenter=function(u,f){return this.jumpTo({center:u},f)},p.prototype.panBy=function(u,f,g){return u=o.Point.convert(u).mult(-1),this.panTo(this.transform.center,o.extend({offset:u},f),g)},p.prototype.panTo=function(u,f,g){return this.easeTo(o.extend({center:u},f),g)},p.prototype.getZoom=function(){return this.transform.zoom},p.prototype.setZoom=function(u,f){return this.jumpTo({zoom:u},f),this},p.prototype.zoomTo=function(u,f,g){return this.easeTo(o.extend({zoom:u},f),g)},p.prototype.zoomIn=function(u,f){return this.zoomTo(this.getZoom()+1,u,f),this},p.prototype.zoomOut=function(u,f){return this.zoomTo(this.getZoom()-1,u,f),this},p.prototype.getBearing=function(){return this.transform.bearing},p.prototype.setBearing=function(u,f){return this.jumpTo({bearing:u},f),this},p.prototype.getPadding=function(){return this.transform.padding},p.prototype.setPadding=function(u,f){return this.jumpTo({padding:u},f),this},p.prototype.rotateTo=function(u,f,g){return this.easeTo(o.extend({bearing:u},f),g)},p.prototype.resetNorth=function(u,f){return this.rotateTo(0,o.extend({duration:1e3},u),f),this},p.prototype.resetNorthPitch=function(u,f){return this.easeTo(o.extend({bearing:0,pitch:0,duration:1e3},u),f),this},p.prototype.snapToNorth=function(u,f){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(u,f):this},p.prototype.getPitch=function(){return this.transform.pitch},p.prototype.setPitch=function(u,f){return this.jumpTo({pitch:u},f),this},p.prototype.cameraForBounds=function(u,f){u=o.LngLatBounds.convert(u);var g=f&&f.bearing||0;return this._cameraForBoxAndBearing(u.getNorthWest(),u.getSouthEast(),g,f)},p.prototype._cameraForBoxAndBearing=function(u,f,g,b){var w={top:0,bottom:0,right:0,left:0};if(typeof(b=o.extend({padding:w,offset:[0,0],maxZoom:this.transform.maxZoom},b)).padding=="number"){var S=b.padding;b.padding={top:S,bottom:S,right:S,left:S}}b.padding=o.extend(w,b.padding);var M=this.transform,B=M.padding,K=M.project(o.LngLat.convert(u)),Q=M.project(o.LngLat.convert(f)),J=K.rotate(-g*Math.PI/180),le=Q.rotate(-g*Math.PI/180),se=new o.Point(Math.max(J.x,le.x),Math.max(J.y,le.y)),ye=new o.Point(Math.min(J.x,le.x),Math.min(J.y,le.y)),ie=se.sub(ye),me=(M.width-(B.left+B.right+b.padding.left+b.padding.right))/ie.x,_e=(M.height-(B.top+B.bottom+b.padding.top+b.padding.bottom))/ie.y;if(!(_e<0||me<0)){var Pe=Math.min(M.scaleZoom(M.scale*Math.min(me,_e)),b.maxZoom),Fe=typeof b.offset.x=="number"?new o.Point(b.offset.x,b.offset.y):o.Point.convert(b.offset),De=new o.Point((b.padding.left-b.padding.right)/2,(b.padding.top-b.padding.bottom)/2).rotate(g*Math.PI/180),Ue=Fe.add(De).mult(M.scale/M.zoomScale(Pe));return{center:M.unproject(K.add(Q).div(2).sub(Ue)),zoom:Pe,bearing:g}}o.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},p.prototype.fitBounds=function(u,f,g){return this._fitInternal(this.cameraForBounds(u,f),f,g)},p.prototype.fitScreenCoordinates=function(u,f,g,b,w){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(o.Point.convert(u)),this.transform.pointLocation(o.Point.convert(f)),g,b),b,w)},p.prototype._fitInternal=function(u,f,g){return u?(delete(f=o.extend(u,f)).padding,f.linear?this.easeTo(f,g):this.flyTo(f,g)):this},p.prototype.jumpTo=function(u,f){this.stop();var g=this.transform,b=!1,w=!1,S=!1;return"zoom"in u&&g.zoom!==+u.zoom&&(b=!0,g.zoom=+u.zoom),u.center!==void 0&&(g.center=o.LngLat.convert(u.center)),"bearing"in u&&g.bearing!==+u.bearing&&(w=!0,g.bearing=+u.bearing),"pitch"in u&&g.pitch!==+u.pitch&&(S=!0,g.pitch=+u.pitch),u.padding==null||g.isPaddingEqual(u.padding)||(g.padding=u.padding),this.fire(new o.Event("movestart",f)).fire(new o.Event("move",f)),b&&this.fire(new o.Event("zoomstart",f)).fire(new o.Event("zoom",f)).fire(new o.Event("zoomend",f)),w&&this.fire(new o.Event("rotatestart",f)).fire(new o.Event("rotate",f)).fire(new o.Event("rotateend",f)),S&&this.fire(new o.Event("pitchstart",f)).fire(new o.Event("pitch",f)).fire(new o.Event("pitchend",f)),this.fire(new o.Event("moveend",f))},p.prototype.easeTo=function(u,f){var g=this;this._stop(!1,u.easeId),((u=o.extend({offset:[0,0],duration:500,easing:o.ease},u)).animate===!1||!u.essential&&o.browser.prefersReducedMotion)&&(u.duration=0);var b=this.transform,w=this.getZoom(),S=this.getBearing(),M=this.getPitch(),B=this.getPadding(),K="zoom"in u?+u.zoom:w,Q="bearing"in u?this._normalizeBearing(u.bearing,S):S,J="pitch"in u?+u.pitch:M,le="padding"in u?u.padding:b.padding,se=o.Point.convert(u.offset),ye=b.centerPoint.add(se),ie=b.pointLocation(ye),me=o.LngLat.convert(u.center||ie);this._normalizeCenter(me);var _e,Pe,Fe=b.project(ie),De=b.project(me).sub(Fe),Ue=b.zoomScale(K-w);u.around&&(_e=o.LngLat.convert(u.around),Pe=b.locationPoint(_e));var He={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||K!==w,this._rotating=this._rotating||S!==Q,this._pitching=this._pitching||J!==M,this._padding=!b.isPaddingEqual(le),this._easeId=u.easeId,this._prepareEase(f,u.noMoveStart,He),this._ease(function(et){if(g._zooming&&(b.zoom=o.number(w,K,et)),g._rotating&&(b.bearing=o.number(S,Q,et)),g._pitching&&(b.pitch=o.number(M,J,et)),g._padding&&(b.interpolatePadding(B,le,et),ye=b.centerPoint.add(se)),_e)b.setLocationAtPoint(_e,Pe);else{var Ye=b.zoomScale(b.zoom-w),dt=K>w?Math.min(2,Ue):Math.max(.5,Ue),kt=Math.pow(dt,1-et),Rt=b.unproject(Fe.add(De.mult(et*kt)).mult(Ye));b.setLocationAtPoint(b.renderWorldCopies?Rt.wrap():Rt,ye)}g._fireMoveEvents(f)},function(et){g._afterEase(f,et)},u),this},p.prototype._prepareEase=function(u,f,g){g===void 0&&(g={}),this._moving=!0,f||g.moving||this.fire(new o.Event("movestart",u)),this._zooming&&!g.zooming&&this.fire(new o.Event("zoomstart",u)),this._rotating&&!g.rotating&&this.fire(new o.Event("rotatestart",u)),this._pitching&&!g.pitching&&this.fire(new o.Event("pitchstart",u))},p.prototype._fireMoveEvents=function(u){this.fire(new o.Event("move",u)),this._zooming&&this.fire(new o.Event("zoom",u)),this._rotating&&this.fire(new o.Event("rotate",u)),this._pitching&&this.fire(new o.Event("pitch",u))},p.prototype._afterEase=function(u,f){if(!this._easeId||!f||this._easeId!==f){delete this._easeId;var g=this._zooming,b=this._rotating,w=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,g&&this.fire(new o.Event("zoomend",u)),b&&this.fire(new o.Event("rotateend",u)),w&&this.fire(new o.Event("pitchend",u)),this.fire(new o.Event("moveend",u))}},p.prototype.flyTo=function(u,f){var g=this;if(!u.essential&&o.browser.prefersReducedMotion){var b=o.pick(u,["center","zoom","bearing","pitch","around"]);return this.jumpTo(b,f)}this.stop(),u=o.extend({offset:[0,0],speed:1.2,curve:1.42,easing:o.ease},u);var w=this.transform,S=this.getZoom(),M=this.getBearing(),B=this.getPitch(),K=this.getPadding(),Q="zoom"in u?o.clamp(+u.zoom,w.minZoom,w.maxZoom):S,J="bearing"in u?this._normalizeBearing(u.bearing,M):M,le="pitch"in u?+u.pitch:B,se="padding"in u?u.padding:w.padding,ye=w.zoomScale(Q-S),ie=o.Point.convert(u.offset),me=w.centerPoint.add(ie),_e=w.pointLocation(me),Pe=o.LngLat.convert(u.center||_e);this._normalizeCenter(Pe);var Fe=w.project(_e),De=w.project(Pe).sub(Fe),Ue=u.curve,He=Math.max(w.width,w.height),et=He/ye,Ye=De.mag();if("minZoom"in u){var dt=o.clamp(Math.min(u.minZoom,S,Q),w.minZoom,w.maxZoom),kt=He/w.zoomScale(dt-S);Ue=Math.sqrt(kt/Ye*2)}var Rt=Ue*Ue;function Pt(Ft){var Ot=(et*et-He*He+(Ft?-1:1)*Rt*Rt*Ye*Ye)/(2*(Ft?et:He)*Rt*Ye);return Math.log(Math.sqrt(Ot*Ot+1)-Ot)}function br(Ft){return(Math.exp(Ft)-Math.exp(-Ft))/2}function yt(Ft){return(Math.exp(Ft)+Math.exp(-Ft))/2}var qt=Pt(0),Jt=function(Ft){return yt(qt)/yt(qt+Ue*Ft)},Vt=function(Ft){return He*((yt(qt)*(br(Ot=qt+Ue*Ft)/yt(Ot))-br(qt))/Rt)/Ye;var Ot},Ut=(Pt(1)-qt)/Ue;if(Math.abs(Ye)<1e-6||!isFinite(Ut)){if(Math.abs(He-et)<1e-6)return this.easeTo(u,f);var Xt=et<He?-1:1;Ut=Math.abs(Math.log(et/He))/Ue,Vt=function(){return 0},Jt=function(Ft){return Math.exp(Xt*Ue*Ft)}}return u.duration="duration"in u?+u.duration:1e3*Ut/("screenSpeed"in u?+u.screenSpeed/Ue:+u.speed),u.maxDuration&&u.duration>u.maxDuration&&(u.duration=0),this._zooming=!0,this._rotating=M!==J,this._pitching=le!==B,this._padding=!w.isPaddingEqual(se),this._prepareEase(f,!1),this._ease(function(Ft){var Ot=Ft*Ut,Vn=1/Jt(Ot);w.zoom=Ft===1?Q:S+w.scaleZoom(Vn),g._rotating&&(w.bearing=o.number(M,J,Ft)),g._pitching&&(w.pitch=o.number(B,le,Ft)),g._padding&&(w.interpolatePadding(K,se,Ft),me=w.centerPoint.add(ie));var mn=Ft===1?Pe:w.unproject(Fe.add(De.mult(Vt(Ot))).mult(Vn));w.setLocationAtPoint(w.renderWorldCopies?mn.wrap():mn,me),g._fireMoveEvents(f)},function(){return g._afterEase(f)},u),this},p.prototype.isEasing=function(){return!!this._easeFrameId},p.prototype.stop=function(){return this._stop()},p.prototype._stop=function(u,f){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var g=this._onEaseEnd;delete this._onEaseEnd,g.call(this,f)}if(!u){var b=this.handlers;b&&b.stop(!1)}return this},p.prototype._ease=function(u,f,g){g.animate===!1||g.duration===0?(u(1),f()):(this._easeStart=o.browser.now(),this._easeOptions=g,this._onEaseFrame=u,this._onEaseEnd=f,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},p.prototype._renderFrameCallback=function(){var u=Math.min((o.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(u)),u<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},p.prototype._normalizeBearing=function(u,f){u=o.wrap(u,-180,180);var g=Math.abs(u-f);return Math.abs(u-360-f)<g&&(u-=360),Math.abs(u+360-f)<g&&(u+=360),u},p.prototype._normalizeCenter=function(u){var f=this.transform;if(f.renderWorldCopies&&!f.lngRange){var g=u.lng-f.center.lng;u.lng+=g>180?-360:g<-180?360:0}},p}(o.Evented),xi=function(l){l===void 0&&(l={}),this.options=l,o.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};xi.prototype.getDefaultPosition=function(){return"bottom-right"},xi.prototype.onAdd=function(l){var p=this.options&&this.options.compact;return this._map=l,this._container=x.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=x.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=x.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),p&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),p===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},xi.prototype.onRemove=function(){x.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},xi.prototype._setElementTitle=function(l,p){var u=this._map._getUIString("AttributionControl."+p);l.title=u,l.setAttribute("aria-label",u)},xi.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},xi.prototype._updateEditLink=function(){var l=this._editLink;l||(l=this._editLink=this._container.querySelector(".mapbox-improve-map"));var p=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||o.config.ACCESS_TOKEN}];if(l){var u=p.reduce(function(f,g,b){return g.value&&(f+=g.key+"="+g.value+(b<p.length-1?"&":"")),f},"?");l.href=o.config.FEEDBACK_URL+"/"+u+(this._map._hash?this._map._hash.getHashString(!0):""),l.rel="noopener nofollow",this._setElementTitle(l,"MapFeedback")}},xi.prototype._updateData=function(l){!l||l.sourceDataType!=="metadata"&&l.sourceDataType!=="visibility"&&l.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},xi.prototype._updateAttributions=function(){if(this._map.style){var l=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?l=l.concat(this.options.customAttribution.map(function(S){return typeof S!="string"?"":S})):typeof this.options.customAttribution=="string"&&l.push(this.options.customAttribution)),this._map.style.stylesheet){var p=this._map.style.stylesheet;this.styleOwner=p.owner,this.styleId=p.id}var u=this._map.style.sourceCaches;for(var f in u){var g=u[f];if(g.used){var b=g.getSource();b.attribution&&l.indexOf(b.attribution)<0&&l.push(b.attribution)}}l.sort(function(S,M){return S.length-M.length});var w=(l=l.filter(function(S,M){for(var B=M+1;B<l.length;B++)if(l[B].indexOf(S)>=0)return!1;return!0})).join(" | ");w!==this._attribHTML&&(this._attribHTML=w,l.length?(this._innerContainer.innerHTML=w,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},xi.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var Do=function(){o.bindAll(["_updateLogo"],this),o.bindAll(["_updateCompact"],this)};Do.prototype.onAdd=function(l){this._map=l,this._container=x.create("div","mapboxgl-ctrl");var p=x.create("a","mapboxgl-ctrl-logo");return p.target="_blank",p.rel="noopener nofollow",p.href="https://www.mapbox.com/",p.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),p.setAttribute("rel","noopener nofollow"),this._container.appendChild(p),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Do.prototype.onRemove=function(){x.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Do.prototype.getDefaultPosition=function(){return"bottom-left"},Do.prototype._updateLogo=function(l){l&&l.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},Do.prototype._logoRequired=function(){if(this._map.style){var l=this._map.style.sourceCaches;for(var p in l)if(l[p].getSource().mapbox_logo)return!0;return!1}},Do.prototype._updateCompact=function(){var l=this._container.children;if(l.length){var p=l[0];this._map.getCanvasContainer().offsetWidth<250?p.classList.add("mapboxgl-compact"):p.classList.remove("mapboxgl-compact")}};var ci=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};ci.prototype.add=function(l){var p=++this._id;return this._queue.push({callback:l,id:p,cancelled:!1}),p},ci.prototype.remove=function(l){for(var p=this._currentlyRunning,u=0,f=p?this._queue.concat(p):this._queue;u<f.length;u+=1){var g=f[u];if(g.id===l)return void(g.cancelled=!0)}},ci.prototype.run=function(l){l===void 0&&(l=0);var p=this._currentlyRunning=this._queue;this._queue=[];for(var u=0,f=p;u<f.length;u+=1){var g=f[u];if(!g.cancelled&&(g.callback(l),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},ci.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Zo={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},ah=o.window.HTMLImageElement,ac=o.window.HTMLElement,Or=o.window.ImageBitmap,ei={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Gd=function(l){function p(f){var g=this;if((f=o.extend({},ei,f)).minZoom!=null&&f.maxZoom!=null&&f.minZoom>f.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(f.minPitch!=null&&f.maxPitch!=null&&f.minPitch>f.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(f.minPitch!=null&&f.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(f.maxPitch!=null&&f.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var b=new vr(f.minZoom,f.maxZoom,f.minPitch,f.maxPitch,f.renderWorldCopies);if(l.call(this,b,f),this._interactive=f.interactive,this._maxTileCacheSize=f.maxTileCacheSize,this._failIfMajorPerformanceCaveat=f.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=f.preserveDrawingBuffer,this._antialias=f.antialias,this._trackResize=f.trackResize,this._bearingSnap=f.bearingSnap,this._refreshExpiredTiles=f.refreshExpiredTiles,this._fadeDuration=f.fadeDuration,this._crossSourceCollisions=f.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=f.collectResourceTiming,this._renderTaskQueue=new ci,this._controls=[],this._mapId=o.uniqueId(),this._locale=o.extend({},Zo,f.locale),this._clickTolerance=f.clickTolerance,this._requestManager=new o.RequestManager(f.transformRequest,f.accessToken),typeof f.container=="string"){if(this._container=o.window.document.getElementById(f.container),!this._container)throw new Error("Container '"+f.container+"' not found.")}else{if(!(f.container instanceof ac))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=f.container}if(f.maxBounds&&this.setMaxBounds(f.maxBounds),o.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return g._update(!1)}),this.on("moveend",function(){return g._update(!1)}),this.on("zoom",function(){return g._update(!0)}),o.window!==void 0&&(o.window.addEventListener("online",this._onWindowOnline,!1),o.window.addEventListener("resize",this._onWindowResize,!1),o.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new bt(this,f),this._hash=f.hash&&new no(typeof f.hash=="string"&&f.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:f.center,zoom:f.zoom,bearing:f.bearing,pitch:f.pitch}),f.bounds&&(this.resize(),this.fitBounds(f.bounds,o.extend({},f.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=f.localIdeographFontFamily,f.style&&this.setStyle(f.style,{localIdeographFontFamily:f.localIdeographFontFamily}),f.attributionControl&&this.addControl(new xi({customAttribution:f.customAttribution})),this.addControl(new Do,f.logoPosition),this.on("style.load",function(){g.transform.unmodified&&g.jumpTo(g.style.stylesheet)}),this.on("data",function(w){g._update(w.dataType==="style"),g.fire(new o.Event(w.dataType+"data",w))}),this.on("dataloading",function(w){g.fire(new o.Event(w.dataType+"dataloading",w))})}l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p;var u={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return p.prototype._getMapId=function(){return this._mapId},p.prototype.addControl=function(f,g){if(g===void 0&&(g=f.getDefaultPosition?f.getDefaultPosition():"top-right"),!f||!f.onAdd)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var b=f.onAdd(this);this._controls.push(f);var w=this._controlPositions[g];return g.indexOf("bottom")!==-1?w.insertBefore(b,w.firstChild):w.appendChild(b),this},p.prototype.removeControl=function(f){if(!f||!f.onRemove)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var g=this._controls.indexOf(f);return g>-1&&this._controls.splice(g,1),f.onRemove(this),this},p.prototype.hasControl=function(f){return this._controls.indexOf(f)>-1},p.prototype.resize=function(f){var g=this._containerDimensions(),b=g[0],w=g[1];if(b===this.transform.width&&w===this.transform.height)return this;this._resizeCanvas(b,w),this.transform.resize(b,w),this.painter.resize(b,w);var S=!this._moving;return S&&this.fire(new o.Event("movestart",f)).fire(new o.Event("move",f)),this.fire(new o.Event("resize",f)),S&&this.fire(new o.Event("moveend",f)),this},p.prototype.getBounds=function(){return this.transform.getBounds()},p.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},p.prototype.setMaxBounds=function(f){return this.transform.setMaxBounds(o.LngLatBounds.convert(f)),this._update()},p.prototype.setMinZoom=function(f){if((f=f??-2)>=-2&&f<=this.transform.maxZoom)return this.transform.minZoom=f,this._update(),this.getZoom()<f&&this.setZoom(f),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},p.prototype.getMinZoom=function(){return this.transform.minZoom},p.prototype.setMaxZoom=function(f){if((f=f??22)>=this.transform.minZoom)return this.transform.maxZoom=f,this._update(),this.getZoom()>f&&this.setZoom(f),this;throw new Error("maxZoom must be greater than the current minZoom")},p.prototype.getMaxZoom=function(){return this.transform.maxZoom},p.prototype.setMinPitch=function(f){if((f=f??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(f>=0&&f<=this.transform.maxPitch)return this.transform.minPitch=f,this._update(),this.getPitch()<f&&this.setPitch(f),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},p.prototype.getMinPitch=function(){return this.transform.minPitch},p.prototype.setMaxPitch=function(f){if((f=f??60)>60)throw new Error("maxPitch must be less than or equal to 60");if(f>=this.transform.minPitch)return this.transform.maxPitch=f,this._update(),this.getPitch()>f&&this.setPitch(f),this;throw new Error("maxPitch must be greater than the current minPitch")},p.prototype.getMaxPitch=function(){return this.transform.maxPitch},p.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},p.prototype.setRenderWorldCopies=function(f){return this.transform.renderWorldCopies=f,this._update()},p.prototype.project=function(f){return this.transform.locationPoint(o.LngLat.convert(f))},p.prototype.unproject=function(f){return this.transform.pointLocation(o.Point.convert(f))},p.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},p.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},p.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},p.prototype._createDelegatedListener=function(f,g,b){var w,S=this;if(f==="mouseenter"||f==="mouseover"){var M=!1;return{layer:g,listener:b,delegates:{mousemove:function(K){var Q=S.getLayer(g)?S.queryRenderedFeatures(K.point,{layers:[g]}):[];Q.length?M||(M=!0,b.call(S,new Dn(f,S,K.originalEvent,{features:Q}))):M=!1},mouseout:function(){M=!1}}}}if(f==="mouseleave"||f==="mouseout"){var B=!1;return{layer:g,listener:b,delegates:{mousemove:function(K){(S.getLayer(g)?S.queryRenderedFeatures(K.point,{layers:[g]}):[]).length?B=!0:B&&(B=!1,b.call(S,new Dn(f,S,K.originalEvent)))},mouseout:function(K){B&&(B=!1,b.call(S,new Dn(f,S,K.originalEvent)))}}}}return{layer:g,listener:b,delegates:(w={},w[f]=function(K){var Q=S.getLayer(g)?S.queryRenderedFeatures(K.point,{layers:[g]}):[];Q.length&&(K.features=Q,b.call(S,K),delete K.features)},w)}},p.prototype.on=function(f,g,b){if(b===void 0)return l.prototype.on.call(this,f,g);var w=this._createDelegatedListener(f,g,b);for(var S in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[f]=this._delegatedListeners[f]||[],this._delegatedListeners[f].push(w),w.delegates)this.on(S,w.delegates[S]);return this},p.prototype.once=function(f,g,b){if(b===void 0)return l.prototype.once.call(this,f,g);var w=this._createDelegatedListener(f,g,b);for(var S in w.delegates)this.once(S,w.delegates[S]);return this},p.prototype.off=function(f,g,b){var w=this;return b===void 0?l.prototype.off.call(this,f,g):(this._delegatedListeners&&this._delegatedListeners[f]&&function(S){for(var M=S[f],B=0;B<M.length;B++){var K=M[B];if(K.layer===g&&K.listener===b){for(var Q in K.delegates)w.off(Q,K.delegates[Q]);return M.splice(B,1),w}}}(this._delegatedListeners),this)},p.prototype.queryRenderedFeatures=function(f,g){if(!this.style)return[];var b;if(g!==void 0||f===void 0||f instanceof o.Point||Array.isArray(f)||(g=f,f=void 0),g=g||{},(f=f||[[0,0],[this.transform.width,this.transform.height]])instanceof o.Point||typeof f[0]=="number")b=[o.Point.convert(f)];else{var w=o.Point.convert(f[0]),S=o.Point.convert(f[1]);b=[w,new o.Point(S.x,w.y),S,new o.Point(w.x,S.y),w]}return this.style.queryRenderedFeatures(b,g,this.transform)},p.prototype.querySourceFeatures=function(f,g){return this.style.querySourceFeatures(f,g)},p.prototype.setStyle=function(f,g){return(g=o.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},g)).diff!==!1&&g.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&f?(this._diffStyle(f,g),this):(this._localIdeographFontFamily=g.localIdeographFontFamily,this._updateStyle(f,g))},p.prototype._getUIString=function(f){var g=this._locale[f];if(g==null)throw new Error("Missing UI string '"+f+"'");return g},p.prototype._updateStyle=function(f,g){return this.style&&(this.style.setEventedParent(null),this.style._remove()),f?(this.style=new Ui(this,g||{}),this.style.setEventedParent(this,{style:this.style}),typeof f=="string"?this.style.loadURL(f):this.style.loadJSON(f),this):(delete this.style,this)},p.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Ui(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},p.prototype._diffStyle=function(f,g){var b=this;if(typeof f=="string"){var w=this._requestManager.normalizeStyleURL(f),S=this._requestManager.transformRequest(w,o.ResourceType.Style);o.getJSON(S,function(M,B){M?b.fire(new o.ErrorEvent(M)):B&&b._updateDiff(B,g)})}else typeof f=="object"&&this._updateDiff(f,g)},p.prototype._updateDiff=function(f,g){try{this.style.setState(f)&&this._update(!0)}catch(b){o.warnOnce("Unable to perform style diff: "+(b.message||b.error||b)+".  Rebuilding the style from scratch."),this._updateStyle(f,g)}},p.prototype.getStyle=function(){if(this.style)return this.style.serialize()},p.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():o.warnOnce("There is no style added to the map.")},p.prototype.addSource=function(f,g){return this._lazyInitEmptyStyle(),this.style.addSource(f,g),this._update(!0)},p.prototype.isSourceLoaded=function(f){var g=this.style&&this.style.sourceCaches[f];if(g!==void 0)return g.loaded();this.fire(new o.ErrorEvent(new Error("There is no source with ID '"+f+"'")))},p.prototype.areTilesLoaded=function(){var f=this.style&&this.style.sourceCaches;for(var g in f){var b=f[g]._tiles;for(var w in b){var S=b[w];if(S.state!=="loaded"&&S.state!=="errored")return!1}}return!0},p.prototype.addSourceType=function(f,g,b){return this._lazyInitEmptyStyle(),this.style.addSourceType(f,g,b)},p.prototype.removeSource=function(f){return this.style.removeSource(f),this._update(!0)},p.prototype.getSource=function(f){return this.style.getSource(f)},p.prototype.addImage=function(f,g,b){b===void 0&&(b={});var w=b.pixelRatio;w===void 0&&(w=1);var S=b.sdf;S===void 0&&(S=!1);var M=b.stretchX,B=b.stretchY,K=b.content;if(this._lazyInitEmptyStyle(),g instanceof ah||Or&&g instanceof Or){var Q=o.browser.getImageData(g);this.style.addImage(f,{data:new o.RGBAImage({width:Q.width,height:Q.height},Q.data),pixelRatio:w,stretchX:M,stretchY:B,content:K,sdf:S,version:0})}else{if(g.width===void 0||g.height===void 0)return this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var J=g;this.style.addImage(f,{data:new o.RGBAImage({width:g.width,height:g.height},new Uint8Array(g.data)),pixelRatio:w,stretchX:M,stretchY:B,content:K,sdf:S,version:0,userImage:J}),J.onAdd&&J.onAdd(this,f)}},p.prototype.updateImage=function(f,g){var b=this.style.getImage(f);if(!b)return this.fire(new o.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var w=g instanceof ah||Or&&g instanceof Or?o.browser.getImageData(g):g,S=w.width,M=w.height,B=w.data;return S===void 0||M===void 0?this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):S!==b.data.width||M!==b.data.height?this.fire(new o.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(b.data.replace(B,!(g instanceof ah||Or&&g instanceof Or)),void this.style.updateImage(f,b))},p.prototype.hasImage=function(f){return f?!!this.style.getImage(f):(this.fire(new o.ErrorEvent(new Error("Missing required image id"))),!1)},p.prototype.removeImage=function(f){this.style.removeImage(f)},p.prototype.loadImage=function(f,g){o.getImage(this._requestManager.transformRequest(f,o.ResourceType.Image),g)},p.prototype.listImages=function(){return this.style.listImages()},p.prototype.addLayer=function(f,g){return this._lazyInitEmptyStyle(),this.style.addLayer(f,g),this._update(!0)},p.prototype.moveLayer=function(f,g){return this.style.moveLayer(f,g),this._update(!0)},p.prototype.removeLayer=function(f){return this.style.removeLayer(f),this._update(!0)},p.prototype.getLayer=function(f){return this.style.getLayer(f)},p.prototype.setLayerZoomRange=function(f,g,b){return this.style.setLayerZoomRange(f,g,b),this._update(!0)},p.prototype.setFilter=function(f,g,b){return b===void 0&&(b={}),this.style.setFilter(f,g,b),this._update(!0)},p.prototype.getFilter=function(f){return this.style.getFilter(f)},p.prototype.setPaintProperty=function(f,g,b,w){return w===void 0&&(w={}),this.style.setPaintProperty(f,g,b,w),this._update(!0)},p.prototype.getPaintProperty=function(f,g){return this.style.getPaintProperty(f,g)},p.prototype.setLayoutProperty=function(f,g,b,w){return w===void 0&&(w={}),this.style.setLayoutProperty(f,g,b,w),this._update(!0)},p.prototype.getLayoutProperty=function(f,g){return this.style.getLayoutProperty(f,g)},p.prototype.setLight=function(f,g){return g===void 0&&(g={}),this._lazyInitEmptyStyle(),this.style.setLight(f,g),this._update(!0)},p.prototype.getLight=function(){return this.style.getLight()},p.prototype.setFeatureState=function(f,g){return this.style.setFeatureState(f,g),this._update()},p.prototype.removeFeatureState=function(f,g){return this.style.removeFeatureState(f,g),this._update()},p.prototype.getFeatureState=function(f){return this.style.getFeatureState(f)},p.prototype.getContainer=function(){return this._container},p.prototype.getCanvasContainer=function(){return this._canvasContainer},p.prototype.getCanvas=function(){return this._canvas},p.prototype._containerDimensions=function(){var f=0,g=0;return this._container&&(f=this._container.clientWidth||400,g=this._container.clientHeight||300),[f,g]},p.prototype._detectMissingCSS=function(){o.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&o.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},p.prototype._setupContainer=function(){var f=this._container;f.classList.add("mapboxgl-map"),(this._missingCSSCanary=x.create("div","mapboxgl-canary",f)).style.visibility="hidden",this._detectMissingCSS();var g=this._canvasContainer=x.create("div","mapboxgl-canvas-container",f);this._interactive&&g.classList.add("mapboxgl-interactive"),this._canvas=x.create("canvas","mapboxgl-canvas",g),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var b=this._containerDimensions();this._resizeCanvas(b[0],b[1]);var w=this._controlContainer=x.create("div","mapboxgl-control-container",f),S=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(M){S[M]=x.create("div","mapboxgl-ctrl-"+M,w)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},p.prototype._resizeCanvas=function(f,g){var b=o.browser.devicePixelRatio||1;this._canvas.width=b*f,this._canvas.height=b*g,this._canvas.style.width=f+"px",this._canvas.style.height=g+"px"},p.prototype._setupPainter=function(){var f=o.extend({},v.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),g=this._canvas.getContext("webgl",f)||this._canvas.getContext("experimental-webgl",f);g?(this.painter=new rn(g,this.transform),o.webpSupported.testSupport(g)):this.fire(new o.ErrorEvent(new Error("Failed to initialize WebGL")))},p.prototype._contextLost=function(f){f.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new o.Event("webglcontextlost",{originalEvent:f}))},p.prototype._contextRestored=function(f){this._setupPainter(),this.resize(),this._update(),this.fire(new o.Event("webglcontextrestored",{originalEvent:f}))},p.prototype._onMapScroll=function(f){if(f.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},p.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},p.prototype._update=function(f){return this.style?(this._styleDirty=this._styleDirty||f,this._sourcesDirty=!0,this.triggerRepaint(),this):this},p.prototype._requestRenderFrame=function(f){return this._update(),this._renderTaskQueue.add(f)},p.prototype._cancelRenderFrame=function(f){this._renderTaskQueue.remove(f)},p.prototype._render=function(f){var g,b=this,w=0,S=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(g=S.createQueryEXT(),S.beginQueryEXT(S.TIME_ELAPSED_EXT,g),w=o.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(f),!this._removed){var M=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var B=this.transform.zoom,K=o.browser.now();this.style.zoomHistory.update(B,K);var Q=new o.EvaluationParameters(B,{now:K,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),J=Q.crossFadingFactor();J===1&&J===this._crossFadingFactor||(M=!0,this._crossFadingFactor=J),this.style.update(Q)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new o.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new o.Event("load"))),this.style&&(this.style.hasTransitions()||M)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var le=o.browser.now()-w;S.endQueryEXT(S.TIME_ELAPSED_EXT,g),setTimeout(function(){var ie=S.getQueryObjectEXT(g,S.QUERY_RESULT_EXT)/1e6;S.deleteQueryEXT(g),b.fire(new o.Event("gpu-timing-frame",{cpuTime:le,gpuTime:ie}))},50)}if(this.listens("gpu-timing-layer")){var se=this.painter.collectGpuTimers();setTimeout(function(){var ie=b.painter.queryGpuTimers(se);b.fire(new o.Event("gpu-timing-layer",{layerTimes:ie}))},50)}var ye=this._sourcesDirty||this._styleDirty||this._placementDirty;return ye||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.Event("idle")),!this._loaded||this._fullyLoaded||ye||(this._fullyLoaded=!0),this}},p.prototype.remove=function(){this._hash&&this._hash.remove();for(var f=0,g=this._controls;f<g.length;f+=1)g[f].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),o.window!==void 0&&(o.window.removeEventListener("resize",this._onWindowResize,!1),o.window.removeEventListener("orientationchange",this._onWindowResize,!1),o.window.removeEventListener("online",this._onWindowOnline,!1));var b=this.painter.context.gl.getExtension("WEBGL_lose_context");b&&b.loseContext(),As(this._canvasContainer),As(this._controlContainer),As(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new o.Event("remove"))},p.prototype.triggerRepaint=function(){var f=this;this.style&&!this._frame&&(this._frame=o.browser.frame(function(g){f._frame=null,f._render(g)}))},p.prototype._onWindowOnline=function(){this._update()},p.prototype._onWindowResize=function(f){this._trackResize&&this.resize({originalEvent:f})._update()},u.showTileBoundaries.get=function(){return!!this._showTileBoundaries},u.showTileBoundaries.set=function(f){this._showTileBoundaries!==f&&(this._showTileBoundaries=f,this._update())},u.showPadding.get=function(){return!!this._showPadding},u.showPadding.set=function(f){this._showPadding!==f&&(this._showPadding=f,this._update())},u.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},u.showCollisionBoxes.set=function(f){this._showCollisionBoxes!==f&&(this._showCollisionBoxes=f,f?this.style._generateCollisionBoxes():this._update())},u.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},u.showOverdrawInspector.set=function(f){this._showOverdrawInspector!==f&&(this._showOverdrawInspector=f,this._update())},u.repaint.get=function(){return!!this._repaint},u.repaint.set=function(f){this._repaint!==f&&(this._repaint=f,this.triggerRepaint())},u.vertices.get=function(){return!!this._vertices},u.vertices.set=function(f){this._vertices=f,this._update()},p.prototype._setCacheLimits=function(f,g){o.setCacheLimits(f,g)},u.version.get=function(){return o.version},Object.defineProperties(p.prototype,u),p}(oc);function As(l){l.parentNode&&l.parentNode.removeChild(l)}var sh={showCompass:!0,showZoom:!0,visualizePitch:!1},ha=function(l){var p=this;this.options=o.extend({},sh,l),this._container=x.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(u){return u.preventDefault()}),this.options.showZoom&&(o.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(u){return p._map.zoomIn({},{originalEvent:u})}),x.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(u){return p._map.zoomOut({},{originalEvent:u})}),x.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(o.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(u){p.options.visualizePitch?p._map.resetNorthPitch({},{originalEvent:u}):p._map.resetNorth({},{originalEvent:u})}),this._compassIcon=x.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};ha.prototype._updateZoomButtons=function(){var l=this._map.getZoom(),p=l===this._map.getMaxZoom(),u=l===this._map.getMinZoom();this._zoomInButton.disabled=p,this._zoomOutButton.disabled=u,this._zoomInButton.setAttribute("aria-disabled",p.toString()),this._zoomOutButton.setAttribute("aria-disabled",u.toString())},ha.prototype._rotateCompassArrow=function(){var l=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=l},ha.prototype.onAdd=function(l){return this._map=l,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Wi(this._map,this._compass,this.options.visualizePitch)),this._container},ha.prototype.onRemove=function(){x.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},ha.prototype._createButton=function(l,p){var u=x.create("button",l,this._container);return u.type="button",u.addEventListener("click",p),u},ha.prototype._setButtonTitle=function(l,p){var u=this._map._getUIString("NavigationControl."+p);l.title=u,l.setAttribute("aria-label",u)};var Wi=function(l,p,u){u===void 0&&(u=!1),this._clickTolerance=10,this.element=p,this.mouseRotate=new rc({clickTolerance:l.dragRotate._mouseRotate._clickTolerance}),this.map=l,u&&(this.mousePitch=new nh({clickTolerance:l.dragRotate._mousePitch._clickTolerance})),o.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),x.addEventListener(p,"mousedown",this.mousedown),x.addEventListener(p,"touchstart",this.touchstart,{passive:!1}),x.addEventListener(p,"touchmove",this.touchmove),x.addEventListener(p,"touchend",this.touchend),x.addEventListener(p,"touchcancel",this.reset)};function rl(l,p,u){if(l=new o.LngLat(l.lng,l.lat),p){var f=new o.LngLat(l.lng-360,l.lat),g=new o.LngLat(l.lng+360,l.lat),b=u.locationPoint(l).distSqr(p);u.locationPoint(f).distSqr(p)<b?l=f:u.locationPoint(g).distSqr(p)<b&&(l=g)}for(;Math.abs(l.lng-u.center.lng)>180;){var w=u.locationPoint(l);if(w.x>=0&&w.y>=0&&w.x<=u.width&&w.y<=u.height)break;l.lng>u.center.lng?l.lng-=360:l.lng+=360}return l}Wi.prototype.down=function(l,p){this.mouseRotate.mousedown(l,p),this.mousePitch&&this.mousePitch.mousedown(l,p),x.disableDrag()},Wi.prototype.move=function(l,p){var u=this.map,f=this.mouseRotate.mousemoveWindow(l,p);if(f&&f.bearingDelta&&u.setBearing(u.getBearing()+f.bearingDelta),this.mousePitch){var g=this.mousePitch.mousemoveWindow(l,p);g&&g.pitchDelta&&u.setPitch(u.getPitch()+g.pitchDelta)}},Wi.prototype.off=function(){var l=this.element;x.removeEventListener(l,"mousedown",this.mousedown),x.removeEventListener(l,"touchstart",this.touchstart,{passive:!1}),x.removeEventListener(l,"touchmove",this.touchmove),x.removeEventListener(l,"touchend",this.touchend),x.removeEventListener(l,"touchcancel",this.reset),this.offTemp()},Wi.prototype.offTemp=function(){x.enableDrag(),x.removeEventListener(o.window,"mousemove",this.mousemove),x.removeEventListener(o.window,"mouseup",this.mouseup)},Wi.prototype.mousedown=function(l){this.down(o.extend({},l,{ctrlKey:!0,preventDefault:function(){return l.preventDefault()}}),x.mousePos(this.element,l)),x.addEventListener(o.window,"mousemove",this.mousemove),x.addEventListener(o.window,"mouseup",this.mouseup)},Wi.prototype.mousemove=function(l){this.move(l,x.mousePos(this.element,l))},Wi.prototype.mouseup=function(l){this.mouseRotate.mouseupWindow(l),this.mousePitch&&this.mousePitch.mouseupWindow(l),this.offTemp()},Wi.prototype.touchstart=function(l){l.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=x.touchPos(this.element,l.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return l.preventDefault()}},this._startPos))},Wi.prototype.touchmove=function(l){l.targetTouches.length!==1?this.reset():(this._lastPos=x.touchPos(this.element,l.targetTouches)[0],this.move({preventDefault:function(){return l.preventDefault()}},this._lastPos))},Wi.prototype.touchend=function(l){l.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Wi.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Ko={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function sc(l,p,u){var f=l.classList;for(var g in Ko)f.remove("mapboxgl-"+u+"-anchor-"+g);f.add("mapboxgl-"+u+"-anchor-"+p)}var nl,nu=function(l){function p(u,f){if(l.call(this),(u instanceof o.window.HTMLElement||f)&&(u=o.extend({element:u},f)),o.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=u&&u.anchor||"center",this._color=u&&u.color||"#3FB1CE",this._scale=u&&u.scale||1,this._draggable=u&&u.draggable||!1,this._clickTolerance=u&&u.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=u&&u.rotation||0,this._rotationAlignment=u&&u.rotationAlignment||"auto",this._pitchAlignment=u&&u.pitchAlignment&&u.pitchAlignment!=="auto"?u.pitchAlignment:this._rotationAlignment,u&&u.element)this._element=u.element,this._offset=o.Point.convert(u&&u.offset||[0,0]);else{this._defaultMarker=!0,this._element=x.create("div"),this._element.setAttribute("aria-label","Map marker");var g=x.createNS("http://www.w3.org/2000/svg","svg");g.setAttributeNS(null,"display","block"),g.setAttributeNS(null,"height","41px"),g.setAttributeNS(null,"width","27px"),g.setAttributeNS(null,"viewBox","0 0 27 41");var b=x.createNS("http://www.w3.org/2000/svg","g");b.setAttributeNS(null,"stroke","none"),b.setAttributeNS(null,"stroke-width","1"),b.setAttributeNS(null,"fill","none"),b.setAttributeNS(null,"fill-rule","evenodd");var w=x.createNS("http://www.w3.org/2000/svg","g");w.setAttributeNS(null,"fill-rule","nonzero");var S=x.createNS("http://www.w3.org/2000/svg","g");S.setAttributeNS(null,"transform","translate(3.0, 29.0)"),S.setAttributeNS(null,"fill","#000000");for(var M=0,B=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];M<B.length;M+=1){var K=B[M],Q=x.createNS("http://www.w3.org/2000/svg","ellipse");Q.setAttributeNS(null,"opacity","0.04"),Q.setAttributeNS(null,"cx","10.5"),Q.setAttributeNS(null,"cy","5.80029008"),Q.setAttributeNS(null,"rx",K.rx),Q.setAttributeNS(null,"ry",K.ry),S.appendChild(Q)}var J=x.createNS("http://www.w3.org/2000/svg","g");J.setAttributeNS(null,"fill",this._color);var le=x.createNS("http://www.w3.org/2000/svg","path");le.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),J.appendChild(le);var se=x.createNS("http://www.w3.org/2000/svg","g");se.setAttributeNS(null,"opacity","0.25"),se.setAttributeNS(null,"fill","#000000");var ye=x.createNS("http://www.w3.org/2000/svg","path");ye.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),se.appendChild(ye);var ie=x.createNS("http://www.w3.org/2000/svg","g");ie.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ie.setAttributeNS(null,"fill","#FFFFFF");var me=x.createNS("http://www.w3.org/2000/svg","g");me.setAttributeNS(null,"transform","translate(8.0, 8.0)");var _e=x.createNS("http://www.w3.org/2000/svg","circle");_e.setAttributeNS(null,"fill","#000000"),_e.setAttributeNS(null,"opacity","0.25"),_e.setAttributeNS(null,"cx","5.5"),_e.setAttributeNS(null,"cy","5.5"),_e.setAttributeNS(null,"r","5.4999962");var Pe=x.createNS("http://www.w3.org/2000/svg","circle");Pe.setAttributeNS(null,"fill","#FFFFFF"),Pe.setAttributeNS(null,"cx","5.5"),Pe.setAttributeNS(null,"cy","5.5"),Pe.setAttributeNS(null,"r","5.4999962"),me.appendChild(_e),me.appendChild(Pe),w.appendChild(S),w.appendChild(J),w.appendChild(se),w.appendChild(ie),w.appendChild(me),g.appendChild(w),g.setAttributeNS(null,"height",41*this._scale+"px"),g.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(g),this._offset=o.Point.convert(u&&u.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Fe){Fe.preventDefault()}),this._element.addEventListener("mousedown",function(Fe){Fe.preventDefault()}),sc(this._element,this._anchor,"marker"),this._popup=null}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.addTo=function(u){return this.remove(),this._map=u,u.getCanvasContainer().appendChild(this._element),u.on("move",this._update),u.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},p.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),x.remove(this._element),this._popup&&this._popup.remove(),this},p.prototype.getLngLat=function(){return this._lngLat},p.prototype.setLngLat=function(u){return this._lngLat=o.LngLat.convert(u),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},p.prototype.getElement=function(){return this._element},p.prototype.setPopup=function(u){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),u){if(!("offset"in u.options)){var f=Math.sqrt(Math.pow(13.5,2)/2);u.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[f,-1*(24.6+f)],"bottom-right":[-f,-1*(24.6+f)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=u,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},p.prototype._onKeyPress=function(u){var f=u.code,g=u.charCode||u.keyCode;f!=="Space"&&f!=="Enter"&&g!==32&&g!==13||this.togglePopup()},p.prototype._onMapClick=function(u){var f=u.originalEvent.target,g=this._element;this._popup&&(f===g||g.contains(f))&&this.togglePopup()},p.prototype.getPopup=function(){return this._popup},p.prototype.togglePopup=function(){var u=this._popup;return u?(u.isOpen()?u.remove():u.addTo(this._map),this):this},p.prototype._update=function(u){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=rl(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var f="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?f="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(f="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var g="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?g="rotateX(0deg)":this._pitchAlignment==="map"&&(g="rotateX("+this._map.getPitch()+"deg)"),u&&u.type!=="moveend"||(this._pos=this._pos.round()),x.setTransform(this._element,Ko[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+g+" "+f)}},p.prototype.getOffset=function(){return this._offset},p.prototype.setOffset=function(u){return this._offset=o.Point.convert(u),this._update(),this},p.prototype._onMove=function(u){if(!this._isDragging){var f=this._clickTolerance||this._map._clickTolerance;this._isDragging=u.point.dist(this._pointerdownPos)>=f}this._isDragging&&(this._pos=u.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.Event("dragstart"))),this.fire(new o.Event("drag")))},p.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.Event("dragend")),this._state="inactive"},p.prototype._addDragHandler=function(u){this._element.contains(u.originalEvent.target)&&(u.preventDefault(),this._positionDelta=u.point.sub(this._pos).add(this._offset),this._pointerdownPos=u.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},p.prototype.setDraggable=function(u){return this._draggable=!!u,this._map&&(u?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},p.prototype.isDraggable=function(){return this._draggable},p.prototype.setRotation=function(u){return this._rotation=u||0,this._update(),this},p.prototype.getRotation=function(){return this._rotation},p.prototype.setRotationAlignment=function(u){return this._rotationAlignment=u||"auto",this._update(),this},p.prototype.getRotationAlignment=function(){return this._rotationAlignment},p.prototype.setPitchAlignment=function(u){return this._pitchAlignment=u&&u!=="auto"?u:this._rotationAlignment,this._update(),this},p.prototype.getPitchAlignment=function(){return this._pitchAlignment},p}(o.Evented),lh={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},il=0,Es=!1,uh=function(l){function p(u){l.call(this),this.options=o.extend({},lh,u),o.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.onAdd=function(u){var f;return this._map=u,this._container=x.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),f=this._setupUI,nl!==void 0?f(nl):o.window.navigator.permissions!==void 0?o.window.navigator.permissions.query({name:"geolocation"}).then(function(g){f(nl=g.state!=="denied")}):f(nl=!!o.window.navigator.geolocation),this._container},p.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(o.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),x.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,il=0,Es=!1},p.prototype._isOutOfMapMaxBounds=function(u){var f=this._map.getMaxBounds(),g=u.coords;return f&&(g.longitude<f.getWest()||g.longitude>f.getEast()||g.latitude<f.getSouth()||g.latitude>f.getNorth())},p.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},p.prototype._onSuccess=function(u){if(this._map){if(this._isOutOfMapMaxBounds(u))return this._setErrorState(),this.fire(new o.Event("outofmaxbounds",u)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=u,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(u),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(u),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("geolocate",u)),this._finish()}},p.prototype._updateCamera=function(u){var f=new o.LngLat(u.coords.longitude,u.coords.latitude),g=u.coords.accuracy,b=this._map.getBearing(),w=o.extend({bearing:b},this.options.fitBoundsOptions);this._map.fitBounds(f.toBounds(g),w,{geolocateSource:!0})},p.prototype._updateMarker=function(u){if(u){var f=new o.LngLat(u.coords.longitude,u.coords.latitude);this._accuracyCircleMarker.setLngLat(f).addTo(this._map),this._userLocationDotMarker.setLngLat(f).addTo(this._map),this._accuracy=u.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},p.prototype._updateCircleRadius=function(){var u=this._map._container.clientHeight/2,f=this._map.unproject([0,u]),g=this._map.unproject([1,u]),b=f.distanceTo(g),w=Math.ceil(2*this._accuracy/b);this._circleElement.style.width=w+"px",this._circleElement.style.height=w+"px"},p.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},p.prototype._onError=function(u){if(this._map){if(this.options.trackUserLocation)if(u.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var f=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=f,this._geolocateButton.setAttribute("aria-label",f),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(u.code===3&&Es)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("error",u)),this._finish()}},p.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},p.prototype._setupUI=function(u){var f=this;if(this._container.addEventListener("contextmenu",function(w){return w.preventDefault()}),this._geolocateButton=x.create("button","mapboxgl-ctrl-geolocate",this._container),x.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",u===!1){o.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var g=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=g,this._geolocateButton.setAttribute("aria-label",g)}else{var b=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=b,this._geolocateButton.setAttribute("aria-label",b)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=x.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new nu(this._dotElement),this._circleElement=x.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new nu({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(w){w.geolocateSource||f._watchState!=="ACTIVE_LOCK"||w.originalEvent&&w.originalEvent.type==="resize"||(f._watchState="BACKGROUND",f._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),f._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),f.fire(new o.Event("trackuserlocationend")))})},p.prototype.trigger=function(){if(!this._setup)return o.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":il--,Es=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new o.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var u;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++il>1?(u={maximumAge:6e5,timeout:0},Es=!0):(u=this.options.positionOptions,Es=!1),this._geolocationWatchID=o.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,u)}}else o.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},p.prototype._clearWatch=function(){o.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},p}(o.Evented),Da={maxWidth:100,unit:"metric"},Ba=function(l){this.options=o.extend({},Da,l),o.bindAll(["_onMove","setUnit"],this)};function lc(l,p,u){var f=u&&u.maxWidth||100,g=l._container.clientHeight/2,b=l.unproject([0,g]),w=l.unproject([f,g]),S=b.distanceTo(w);if(u&&u.unit==="imperial"){var M=3.2808*S;M>5280?Na(p,f,M/5280,l._getUIString("ScaleControl.Miles")):Na(p,f,M,l._getUIString("ScaleControl.Feet"))}else u&&u.unit==="nautical"?Na(p,f,S/1852,l._getUIString("ScaleControl.NauticalMiles")):S>=1e3?Na(p,f,S/1e3,l._getUIString("ScaleControl.Kilometers")):Na(p,f,S,l._getUIString("ScaleControl.Meters"))}function Na(l,p,u,f){var g,b,w,S=(g=u,(b=Math.pow(10,(""+Math.floor(g)).length-1))*(w=(w=g/b)>=10?10:w>=5?5:w>=3?3:w>=2?2:w>=1?1:function(M){var B=Math.pow(10,Math.ceil(-Math.log(M)/Math.LN10));return Math.round(M*B)/B}(w)));l.style.width=p*(S/u)+"px",l.innerHTML=S+"&nbsp;"+f}Ba.prototype.getDefaultPosition=function(){return"bottom-left"},Ba.prototype._onMove=function(){lc(this._map,this._container,this.options)},Ba.prototype.onAdd=function(l){return this._map=l,this._container=x.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",l.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Ba.prototype.onRemove=function(){x.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Ba.prototype.setUnit=function(l){this.options.unit=l,lc(this._map,this._container,this.options)};var mo=function(l){this._fullscreen=!1,l&&l.container&&(l.container instanceof o.window.HTMLElement?this._container=l.container:o.warnOnce("Full screen control 'container' must be a DOM element.")),o.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in o.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in o.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in o.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in o.window.document&&(this._fullscreenchange="MSFullscreenChange")};mo.prototype.onAdd=function(l){return this._map=l,this._container||(this._container=this._map.getContainer()),this._controlContainer=x.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",o.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},mo.prototype.onRemove=function(){x.remove(this._controlContainer),this._map=null,o.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},mo.prototype._checkFullscreenSupport=function(){return!!(o.window.document.fullscreenEnabled||o.window.document.mozFullScreenEnabled||o.window.document.msFullscreenEnabled||o.window.document.webkitFullscreenEnabled)},mo.prototype._setupUI=function(){var l=this._fullscreenButton=x.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);x.create("span","mapboxgl-ctrl-icon",l).setAttribute("aria-hidden",!0),l.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),o.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},mo.prototype._updateTitle=function(){var l=this._getTitle();this._fullscreenButton.setAttribute("aria-label",l),this._fullscreenButton.title=l},mo.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},mo.prototype._isFullscreen=function(){return this._fullscreen},mo.prototype._changeIcon=function(){(o.window.document.fullscreenElement||o.window.document.mozFullScreenElement||o.window.document.webkitFullscreenElement||o.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},mo.prototype._onClickFullscreen=function(){this._isFullscreen()?o.window.document.exitFullscreen?o.window.document.exitFullscreen():o.window.document.mozCancelFullScreen?o.window.document.mozCancelFullScreen():o.window.document.msExitFullscreen?o.window.document.msExitFullscreen():o.window.document.webkitCancelFullScreen&&o.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var ch={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},iu=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),ph=function(l){function p(u){l.call(this),this.options=o.extend(Object.create(ch),u),o.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.addTo=function(u){return this._map&&this.remove(),this._map=u,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new o.Event("open")),this},p.prototype.isOpen=function(){return!!this._map},p.prototype.remove=function(){return this._content&&x.remove(this._content),this._container&&(x.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new o.Event("close")),this},p.prototype.getLngLat=function(){return this._lngLat},p.prototype.setLngLat=function(u){return this._lngLat=o.LngLat.convert(u),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},p.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},p.prototype.getElement=function(){return this._container},p.prototype.setText=function(u){return this.setDOMContent(o.window.document.createTextNode(u))},p.prototype.setHTML=function(u){var f,g=o.window.document.createDocumentFragment(),b=o.window.document.createElement("body");for(b.innerHTML=u;f=b.firstChild;)g.appendChild(f);return this.setDOMContent(g)},p.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},p.prototype.setMaxWidth=function(u){return this.options.maxWidth=u,this._update(),this},p.prototype.setDOMContent=function(u){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=x.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(u),this._createCloseButton(),this._update(),this._focusFirstElement(),this},p.prototype.addClassName=function(u){this._container&&this._container.classList.add(u)},p.prototype.removeClassName=function(u){this._container&&this._container.classList.remove(u)},p.prototype.setOffset=function(u){return this.options.offset=u,this._update(),this},p.prototype.toggleClassName=function(u){if(this._container)return this._container.classList.toggle(u)},p.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=x.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},p.prototype._onMouseUp=function(u){this._update(u.point)},p.prototype._onMouseMove=function(u){this._update(u.point)},p.prototype._onDrag=function(u){this._update(u.point)},p.prototype._update=function(u){var f=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=x.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=x.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Q){return f._container.classList.add(Q)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=rl(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||u)){var g=this._pos=this._trackPointer&&u?u:this._map.project(this._lngLat),b=this.options.anchor,w=function Q(J){if(J){if(typeof J=="number"){var le=Math.round(Math.sqrt(.5*Math.pow(J,2)));return{center:new o.Point(0,0),top:new o.Point(0,J),"top-left":new o.Point(le,le),"top-right":new o.Point(-le,le),bottom:new o.Point(0,-J),"bottom-left":new o.Point(le,-le),"bottom-right":new o.Point(-le,-le),left:new o.Point(J,0),right:new o.Point(-J,0)}}if(J instanceof o.Point||Array.isArray(J)){var se=o.Point.convert(J);return{center:se,top:se,"top-left":se,"top-right":se,bottom:se,"bottom-left":se,"bottom-right":se,left:se,right:se}}return{center:o.Point.convert(J.center||[0,0]),top:o.Point.convert(J.top||[0,0]),"top-left":o.Point.convert(J["top-left"]||[0,0]),"top-right":o.Point.convert(J["top-right"]||[0,0]),bottom:o.Point.convert(J.bottom||[0,0]),"bottom-left":o.Point.convert(J["bottom-left"]||[0,0]),"bottom-right":o.Point.convert(J["bottom-right"]||[0,0]),left:o.Point.convert(J.left||[0,0]),right:o.Point.convert(J.right||[0,0])}}return Q(new o.Point(0,0))}(this.options.offset);if(!b){var S,M=this._container.offsetWidth,B=this._container.offsetHeight;S=g.y+w.bottom.y<B?["top"]:g.y>this._map.transform.height-B?["bottom"]:[],g.x<M/2?S.push("left"):g.x>this._map.transform.width-M/2&&S.push("right"),b=S.length===0?"bottom":S.join("-")}var K=g.add(w[b]).round();x.setTransform(this._container,Ko[b]+" translate("+K.x+"px,"+K.y+"px)"),sc(this._container,b,"popup")}},p.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var u=this._container.querySelector(iu);u&&u.focus()}},p.prototype._onClose=function(){this.remove()},p}(o.Evented),uc={version:o.version,supported:v,setRTLTextPlugin:o.setRTLTextPlugin,getRTLTextPluginStatus:o.getRTLTextPluginStatus,Map:Gd,NavigationControl:ha,GeolocateControl:uh,AttributionControl:xi,ScaleControl:Ba,FullscreenControl:mo,Popup:ph,Marker:nu,Style:Ui,LngLat:o.LngLat,LngLatBounds:o.LngLatBounds,Point:o.Point,MercatorCoordinate:o.MercatorCoordinate,Evented:o.Evented,config:o.config,prewarm:function(){Ve().acquire(je)},clearPrewarmedResources:function(){var l=xt;l&&(l.isPreloaded()&&l.numActive()===1?(l.release(je),xt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return o.config.ACCESS_TOKEN},set accessToken(l){o.config.ACCESS_TOKEN=l},get baseApiUrl(){return o.config.API_URL},set baseApiUrl(l){o.config.API_URL=l},get workerCount(){return Xe.workerCount},set workerCount(l){Xe.workerCount=l},get maxParallelImageRequests(){return o.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(l){o.config.MAX_PARALLEL_IMAGE_REQUESTS=l},clearStorage:function(l){o.clearTileCache(l)},workerUrl:""};return uc}),c})})(Ek);var GR=Ek.exports;const Ls=Qf(GR);var Fp=ZR,HR=Object.prototype.hasOwnProperty;function ZR(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var a in n)HR.call(n,a)&&(e[a]=n[a])}return e}var Sk={exports:{}};(function(e,t){(function(){var n={};e.exports=n,n.simpleFilter=function(a,c){return c.filter(function(d){return n.test(a,d)})},n.test=function(a,c){return n.match(a,c)!==null},n.match=function(a,c,d){d=d||{};var o=0,v=[],x=c.length,E=0,k=0,P=d.pre||"",T=d.post||"",W=d.caseSensitive&&c||c.toLowerCase(),$;a=d.caseSensitive&&a||a.toLowerCase();for(var H=0;H<x;H++)$=c[H],W[H]===a[o]?($=P+$+T,o+=1,k+=1+k):k=0,E+=k,v[v.length]=$;return o===a.length?(E=W===a?1/0:E,{rendered:v.join(""),score:E}):null},n.filter=function(a,c,d){return!c||c.length===0?[]:typeof a!="string"?c:(d=d||{},c.reduce(function(o,v,x,E){var k=v;d.extract&&(k=d.extract(v));var P=n.match(a,k,d);return P!=null&&(o[o.length]={string:P.rendered,score:P.score,index:x,original:v}),o},[]).sort(function(o,v){var x=v.score-o.score;return x||o.index-v.index}))}})()})(Sk);var KR=Sk.exports,Io=function(e){return this.component=e,this.items=[],this.active=0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,e.el.parentNode.insertBefore(this.wrapper,e.el.nextSibling),this};Io.prototype.show=function(){this.element.style.display="block"};Io.prototype.hide=function(){this.element.style.display="none"};Io.prototype.add=function(e){this.items.push(e)};Io.prototype.clear=function(){this.items=[],this.active=0};Io.prototype.isEmpty=function(){return!this.items.length};Io.prototype.isVisible=function(){return this.element.style.display==="block"};Io.prototype.draw=function(){if(this.element.innerHTML="",this.items.length===0){this.hide();return}for(var e=0;e<this.items.length;e++)this.drawItem(this.items[e],this.active===e);this.show()};Io.prototype.drawItem=function(e,t){var n=document.createElement("li"),a=document.createElement("a");t&&(n.className+=" active"),a.innerHTML=e.string,n.appendChild(a),this.element.appendChild(n),n.addEventListener("mousedown",function(){this.selectingListItem=!0}.bind(this)),n.addEventListener("mouseup",function(){this.handleMouseUp.call(this,e)}.bind(this))};Io.prototype.handleMouseUp=function(e){this.selectingListItem=!1,this.component.value(e.original),this.clear(),this.draw()};Io.prototype.move=function(e){this.active=e,this.draw()};Io.prototype.previous=function(){this.move(this.active===0?this.items.length-1:this.active-1)};Io.prototype.next=function(){this.move(this.active===this.items.length-1?0:this.active+1)};Io.prototype.drawError=function(e){var t=document.createElement("li");t.innerHTML=e,this.element.appendChild(t),this.show()};var XR=Io,QR=Fp,JR=KR,YR=XR,to=function(e,t,n){return n=n||{},this.options=QR({minLength:2,limit:5,filter:!0,hideOnBlur:!0},n),this.el=e,this.data=t||[],this.list=new YR(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",function(a){this.handleKeyUp(a.keyCode)}.bind(this),!1),this.el.addEventListener("keydown",function(a){this.handleKeyDown(a)}.bind(this)),this.el.addEventListener("focus",function(){this.handleFocus()}.bind(this)),this.el.addEventListener("blur",function(){this.handleBlur()}.bind(this)),this.el.addEventListener("paste",function(a){this.handlePaste(a)}.bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};to.prototype.handleKeyUp=function(e){e===40||e===38||e===27||e===13||e===9||this.handleInputChange(this.el.value)};to.prototype.handleKeyDown=function(e){switch(e.keyCode){case 13:case 9:this.list.isEmpty()||(this.list.isVisible()&&e.preventDefault(),this.value(this.list.items[this.list.active].original),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next();break}};to.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()};to.prototype.handlePaste=function(e){if(e.clipboardData)this.handleInputChange(e.clipboardData.getData("Text"));else{var t=this;setTimeout(function(){t.handleInputChange(e.target.value)},100)}};to.prototype.handleInputChange=function(e){if(this.query=this.normalize(e),this.list.clear(),this.query.length<this.options.minLength){this.list.draw();return}this.getCandidates(function(t){for(var n=0;n<t.length&&(this.list.add(t[n]),n!==this.options.limit-1);n++);this.list.draw()}.bind(this))};to.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1};to.prototype.update=function(e){this.data=e,this.handleKeyUp()};to.prototype.clear=function(){this.data=[],this.list.clear()};to.prototype.normalize=function(e){return e=e.toLowerCase(),e};to.prototype.match=function(e,t){return e.indexOf(t)>-1};to.prototype.value=function(e){if(this.selected=e,this.el.value=this.getItemValue(e),document.createEvent){var t=document.createEvent("HTMLEvents");t.initEvent("change",!0,!1),this.el.dispatchEvent(t)}else this.el.fireEvent("onchange")};to.prototype.getCandidates=function(e){var t={pre:"<strong>",post:"</strong>",extract:function(a){return this.getItemValue(a)}.bind(this)},n;this.options.filter?(n=JR.filter(this.query,this.data,t),n=n.map(function(a){return{original:a.original,string:this.render(a.original,a.string)}}.bind(this))):n=this.data.map(function(a){var c=this.render(a);return{original:a,string:c}}.bind(this)),e(n)};to.prototype.getItemValue=function(e){return e};to.prototype.render=function(e,t){if(t)return t;for(var n=e.original?this.getItemValue(e.original):this.getItemValue(e),a=this.normalize(n),c=a.lastIndexOf(this.query);c>-1;){var d=c+this.query.length;n=n.slice(0,c)+"<strong>"+n.slice(c,d)+"</strong>"+n.slice(d),c=a.slice(0,c).lastIndexOf(this.query)}return n};to.prototype.renderError=function(e){this.list.drawError(e)};var ez=to,Ck=ez,tz=Ck;typeof window<"u"&&(window.Suggestions=Ck);var rz="Expected a function",fA=0/0,nz="[object Symbol]",iz=/^\s+|\s+$/g,oz=/^[-+]0x[0-9a-f]+$/i,az=/^0b[01]+$/i,sz=/^0o[0-7]+$/i,lz=parseInt,uz=typeof ba=="object"&&ba&&ba.Object===Object&&ba,cz=typeof self=="object"&&self&&self.Object===Object&&self,pz=uz||cz||Function("return this")(),hz=Object.prototype,fz=hz.toString,dz=Math.max,mz=Math.min,N0=function(){return pz.Date.now()};function yz(e,t,n){var a,c,d,o,v,x,E=0,k=!1,P=!1,T=!0;if(typeof e!="function")throw new TypeError(rz);t=dA(t)||0,fx(n)&&(k=!!n.leading,P="maxWait"in n,d=P?dz(dA(n.maxWait)||0,t):d,T="trailing"in n?!!n.trailing:T);function W(ne){var fe=a,xe=c;return a=c=void 0,E=ne,o=e.apply(xe,fe),o}function $(ne){return E=ne,v=setTimeout(U,t),k?W(ne):o}function H(ne){var fe=ne-x,xe=ne-E,Te=t-fe;return P?mz(Te,d-xe):Te}function D(ne){var fe=ne-x,xe=ne-E;return x===void 0||fe>=t||fe<0||P&&xe>=d}function U(){var ne=N0();if(D(ne))return q(ne);v=setTimeout(U,H(ne))}function q(ne){return v=void 0,T&&a?W(ne):(a=c=void 0,o)}function N(){v!==void 0&&clearTimeout(v),E=0,a=x=c=v=void 0}function O(){return v===void 0?o:q(N0())}function te(){var ne=N0(),fe=D(ne);if(a=arguments,c=this,x=ne,fe){if(v===void 0)return $(x);if(P)return v=setTimeout(U,t),W(x)}return v===void 0&&(v=setTimeout(U,t)),o}return te.cancel=N,te.flush=O,te}function fx(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function gz(e){return!!e&&typeof e=="object"}function vz(e){return typeof e=="symbol"||gz(e)&&fz.call(e)==nz}function dA(e){if(typeof e=="number")return e;if(vz(e))return fA;if(fx(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=fx(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(iz,"");var n=az.test(e);return n||sz.test(e)?lz(e.slice(2),n?2:8):oz.test(e)?fA:+e}var _z=yz,z1={exports:{}},mp=typeof Reflect=="object"?Reflect:null,mA=mp&&typeof mp.apply=="function"?mp.apply:function(t,n,a){return Function.prototype.apply.call(t,n,a)},ly;mp&&typeof mp.ownKeys=="function"?ly=mp.ownKeys:Object.getOwnPropertySymbols?ly=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:ly=function(t){return Object.getOwnPropertyNames(t)};function xz(e){console&&console.warn&&console.warn(e)}var kk=Number.isNaN||function(t){return t!==t};function un(){un.init.call(this)}z1.exports=un;z1.exports.once=Ez;un.EventEmitter=un;un.prototype._events=void 0;un.prototype._eventsCount=0;un.prototype._maxListeners=void 0;var yA=10;function Eg(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(un,"defaultMaxListeners",{enumerable:!0,get:function(){return yA},set:function(e){if(typeof e!="number"||e<0||kk(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");yA=e}});un.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};un.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||kk(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function Tk(e){return e._maxListeners===void 0?un.defaultMaxListeners:e._maxListeners}un.prototype.getMaxListeners=function(){return Tk(this)};un.prototype.emit=function(t){for(var n=[],a=1;a<arguments.length;a++)n.push(arguments[a]);var c=t==="error",d=this._events;if(d!==void 0)c=c&&d.error===void 0;else if(!c)return!1;if(c){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var v=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw v.context=o,v}var x=d[t];if(x===void 0)return!1;if(typeof x=="function")mA(x,this,n);else for(var E=x.length,k=zk(x,E),a=0;a<E;++a)mA(k[a],this,n);return!0};function Ik(e,t,n,a){var c,d,o;if(Eg(n),d=e._events,d===void 0?(d=e._events=Object.create(null),e._eventsCount=0):(d.newListener!==void 0&&(e.emit("newListener",t,n.listener?n.listener:n),d=e._events),o=d[t]),o===void 0)o=d[t]=n,++e._eventsCount;else if(typeof o=="function"?o=d[t]=a?[n,o]:[o,n]:a?o.unshift(n):o.push(n),c=Tk(e),c>0&&o.length>c&&!o.warned){o.warned=!0;var v=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");v.name="MaxListenersExceededWarning",v.emitter=e,v.type=t,v.count=o.length,xz(v)}return e}un.prototype.addListener=function(t,n){return Ik(this,t,n,!1)};un.prototype.on=un.prototype.addListener;un.prototype.prependListener=function(t,n){return Ik(this,t,n,!0)};function bz(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Pk(e,t,n){var a={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},c=bz.bind(a);return c.listener=n,a.wrapFn=c,c}un.prototype.once=function(t,n){return Eg(n),this.on(t,Pk(this,t,n)),this};un.prototype.prependOnceListener=function(t,n){return Eg(n),this.prependListener(t,Pk(this,t,n)),this};un.prototype.removeListener=function(t,n){var a,c,d,o,v;if(Eg(n),c=this._events,c===void 0)return this;if(a=c[t],a===void 0)return this;if(a===n||a.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete c[t],c.removeListener&&this.emit("removeListener",t,a.listener||n));else if(typeof a!="function"){for(d=-1,o=a.length-1;o>=0;o--)if(a[o]===n||a[o].listener===n){v=a[o].listener,d=o;break}if(d<0)return this;d===0?a.shift():wz(a,d),a.length===1&&(c[t]=a[0]),c.removeListener!==void 0&&this.emit("removeListener",t,v||n)}return this};un.prototype.off=un.prototype.removeListener;un.prototype.removeAllListeners=function(t){var n,a,c;if(a=this._events,a===void 0)return this;if(a.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):a[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete a[t]),this;if(arguments.length===0){var d=Object.keys(a),o;for(c=0;c<d.length;++c)o=d[c],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=a[t],typeof n=="function")this.removeListener(t,n);else if(n!==void 0)for(c=n.length-1;c>=0;c--)this.removeListener(t,n[c]);return this};function Mk(e,t,n){var a=e._events;if(a===void 0)return[];var c=a[t];return c===void 0?[]:typeof c=="function"?n?[c.listener||c]:[c]:n?Az(c):zk(c,c.length)}un.prototype.listeners=function(t){return Mk(this,t,!0)};un.prototype.rawListeners=function(t){return Mk(this,t,!1)};un.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):Rk.call(e,t)};un.prototype.listenerCount=Rk;function Rk(e){var t=this._events;if(t!==void 0){var n=t[e];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}un.prototype.eventNames=function(){return this._eventsCount>0?ly(this._events):[]};function zk(e,t){for(var n=new Array(t),a=0;a<t;++a)n[a]=e[a];return n}function wz(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function Az(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function Ez(e,t){return new Promise(function(n,a){function c(o){e.removeListener(t,d),a(o)}function d(){typeof e.removeListener=="function"&&e.removeListener("error",c),n([].slice.call(arguments))}Lk(e,t,d,{once:!0}),t!=="error"&&Sz(e,c,{once:!0})})}function Sz(e,t,n){typeof e.on=="function"&&Lk(e,"error",t,n)}function Lk(e,t,n,a){if(typeof e.on=="function")a.once?e.once(t,n):e.on(t,n);else if(typeof e.addEventListener=="function")e.addEventListener(t,function c(d){a.once&&e.removeEventListener(t,c),n(d)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var Cz=z1.exports,kz={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}};function Tz(e){var t=e.match(/\s*(.+)\s*=\s*"?([^"]+)"?/);return t?{key:t[1],value:t[2]}:null}function Iz(e){var t=e.match(/<?([^>]*)>(.*)/);if(!t)return null;var n=t[1],a=t[2].split(";"),c=null,d=a.reduce(function(o,v){var x=Tz(v);return x?x.key==="rel"?(c||(c=x.value),o):(o[x.key]=x.value,o):o},{});return c?{url:n,rel:c,params:d}:null}function Pz(e){return e?e.split(/,\s*</).reduce(function(t,n){var a=Iz(n);if(!a)return t;var c=a.rel.split(/\s+/);return c.forEach(function(d){t[d]||(t[d]={url:a.url,params:a.params})}),t},{}):{}}var Mz=Pz,Rz=Mz;function L1(e,t){this.request=e,this.headers=t.headers,this.rawBody=t.body,this.statusCode=t.statusCode;try{this.body=JSON.parse(t.body||"{}")}catch{this.body=t.body}this.links=Rz(this.headers.link)}L1.prototype.hasNextPage=function(){return!!this.links.next};L1.prototype.nextPage=function(){return this.hasNextPage()?this.request._extend({path:this.links.next.url}):null};var zz=L1,Sg={API_ORIGIN:"https://api.mapbox.com",EVENT_PROGRESS_DOWNLOAD:"downloadProgress",EVENT_PROGRESS_UPLOAD:"uploadProgress",EVENT_ERROR:"error",EVENT_RESPONSE:"response",ERROR_HTTP:"HttpError",ERROR_REQUEST_ABORTED:"RequestAbortedError"},gA=Sg;function Lz(e){var t=e.type||gA.ERROR_HTTP,n;if(e.body)try{n=JSON.parse(e.body)}catch{n=e.body}else n=null;var a=e.message||null;a||(typeof n=="string"?a=n:n&&typeof n.message=="string"?a=n.message:t===gA.ERROR_REQUEST_ABORTED&&(a="Request aborted")),this.message=a,this.type=t,this.statusCode=e.statusCode||null,this.request=e.request,this.body=n}var Oz=Lz;function Dz(e){var t=e.indexOf(":"),n=e.substring(0,t).trim().toLowerCase(),a=e.substring(t+1).trim();return{name:n,value:a}}function Bz(e){var t={};return e&&e.trim().split(/[\r|\n]+/).forEach(function(n){var a=Dz(n);t[a.name]=a.value}),t}var Nz=Bz,Fz=zz,vA=Oz,F0=Sg,Uz=Nz,$y={};function jz(e){var t=$y[e.id];t&&(t.abort(),delete $y[e.id])}function Vz(e,t){return new Fz(e,{body:t.response,headers:Uz(t.getAllResponseHeaders()),statusCode:t.status})}function _A(e){var t=e.total,n=e.loaded,a=100*n/t;return{total:t,transferred:n,percent:a}}function Ok(e,t){return new Promise(function(n,a){t.onprogress=function(o){e.emitter.emit(F0.EVENT_PROGRESS_DOWNLOAD,_A(o))};var c=e.file;c&&(t.upload.onprogress=function(o){e.emitter.emit(F0.EVENT_PROGRESS_UPLOAD,_A(o))}),t.onerror=function(o){a(o)},t.onabort=function(){var o=new vA({request:e,type:F0.ERROR_REQUEST_ABORTED});a(o)},t.onload=function(){if(delete $y[e.id],t.status<200||t.status>=400){var o=new vA({request:e,body:t.response,statusCode:t.status});a(o);return}n(t)};var d=e.body;typeof d=="string"?t.send(d):d?t.send(JSON.stringify(d)):c?t.send(c):t.send(),$y[e.id]=t}).then(function(n){return Vz(e,n)})}function Dk(e,t){var n=e.url(t),a=new window.XMLHttpRequest;return a.open(e.method,n),Object.keys(e.headers).forEach(function(c){a.setRequestHeader(c,e.headers[c])}),a}function $z(e){return Promise.resolve().then(function(){var t=Dk(e,e.client.accessToken);return Ok(e,t)})}var qz={browserAbort:jz,sendRequestXhr:Ok,browserSend:$z,createRequestXhr:Dk},qy={exports:{}};/*! http://mths.be/base64 v0.1.0 by @mathias | MIT license */qy.exports;(function(e,t){(function(n){var a=t,c=e&&e.exports==a&&e,d=typeof ba=="object"&&ba;(d.global===d||d.window===d)&&(n=d);var o=function($){this.message=$};o.prototype=new Error,o.prototype.name="InvalidCharacterError";var v=function($){throw new o($)},x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",E=/[\t\n\f\r ]/g,k=function($){$=String($).replace(E,"");var H=$.length;H%4==0&&($=$.replace(/==?$/,""),H=$.length),(H%4==1||/[^+a-zA-Z0-9/]/.test($))&&v("Invalid character: the string to be decoded is not correctly encoded.");for(var D=0,U,q,N="",O=-1;++O<H;)q=x.indexOf($.charAt(O)),U=D%4?U*64+q:q,D++%4&&(N+=String.fromCharCode(255&U>>(-2*D&6)));return N},P=function($){$=String($),/[^\0-\xFF]/.test($)&&v("The string to be encoded contains characters outside of the Latin1 range.");for(var H=$.length%3,D="",U=-1,q,N,O,te,ne=$.length-H;++U<ne;)q=$.charCodeAt(U)<<16,N=$.charCodeAt(++U)<<8,O=$.charCodeAt(++U),te=q+N+O,D+=x.charAt(te>>18&63)+x.charAt(te>>12&63)+x.charAt(te>>6&63)+x.charAt(te&63);return H==2?(q=$.charCodeAt(U)<<8,N=$.charCodeAt(++U),te=q+N,D+=x.charAt(te>>10)+x.charAt(te>>4&63)+x.charAt(te<<2&63)+"="):H==1&&(te=$.charCodeAt(U),D+=x.charAt(te>>2)+x.charAt(te<<4&63)+"=="),D},T={encode:P,decode:k,version:"0.1.0"};if(a&&!a.nodeType)if(c)c.exports=T;else for(var W in T)T.hasOwnProperty(W)&&(a[W]=T[W]);else n.base64=T})(ba)})(qy,qy.exports);var Wz=qy.exports,Gz=Wz,U0={};function Hz(e){if(U0[e])return U0[e];var t=e.split("."),n=t[0],a=t[1];if(!a)throw new Error("Invalid token");var c=Zz(a),d={usage:n,user:c.u};return yu(c,"a")&&(d.authorization=c.a),yu(c,"exp")&&(d.expires=c.exp*1e3),yu(c,"iat")&&(d.created=c.iat*1e3),yu(c,"scopes")&&(d.scopes=c.scopes),yu(c,"client")&&(d.client=c.client),yu(c,"ll")&&(d.lastLogin=c.ll),yu(c,"iu")&&(d.impersonator=c.iu),U0[e]=d,d}function Zz(e){try{return JSON.parse(Gz.decode(e))}catch{throw new Error("Invalid token")}}function yu(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var Bk=Hz,Nk={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(n=!1));function c(x,E,k){this.fn=x,this.context=E,this.once=k||!1}function d(x,E,k,P,T){if(typeof k!="function")throw new TypeError("The listener must be a function");var W=new c(k,P||x,T),$=n?n+E:E;return x._events[$]?x._events[$].fn?x._events[$]=[x._events[$],W]:x._events[$].push(W):(x._events[$]=W,x._eventsCount++),x}function o(x,E){--x._eventsCount===0?x._events=new a:delete x._events[E]}function v(){this._events=new a,this._eventsCount=0}v.prototype.eventNames=function(){var E=[],k,P;if(this._eventsCount===0)return E;for(P in k=this._events)t.call(k,P)&&E.push(n?P.slice(1):P);return Object.getOwnPropertySymbols?E.concat(Object.getOwnPropertySymbols(k)):E},v.prototype.listeners=function(E){var k=n?n+E:E,P=this._events[k];if(!P)return[];if(P.fn)return[P.fn];for(var T=0,W=P.length,$=new Array(W);T<W;T++)$[T]=P[T].fn;return $},v.prototype.listenerCount=function(E){var k=n?n+E:E,P=this._events[k];return P?P.fn?1:P.length:0},v.prototype.emit=function(E,k,P,T,W,$){var H=n?n+E:E;if(!this._events[H])return!1;var D=this._events[H],U=arguments.length,q,N;if(D.fn){switch(D.once&&this.removeListener(E,D.fn,void 0,!0),U){case 1:return D.fn.call(D.context),!0;case 2:return D.fn.call(D.context,k),!0;case 3:return D.fn.call(D.context,k,P),!0;case 4:return D.fn.call(D.context,k,P,T),!0;case 5:return D.fn.call(D.context,k,P,T,W),!0;case 6:return D.fn.call(D.context,k,P,T,W,$),!0}for(N=1,q=new Array(U-1);N<U;N++)q[N-1]=arguments[N];D.fn.apply(D.context,q)}else{var O=D.length,te;for(N=0;N<O;N++)switch(D[N].once&&this.removeListener(E,D[N].fn,void 0,!0),U){case 1:D[N].fn.call(D[N].context);break;case 2:D[N].fn.call(D[N].context,k);break;case 3:D[N].fn.call(D[N].context,k,P);break;case 4:D[N].fn.call(D[N].context,k,P,T);break;default:if(!q)for(te=1,q=new Array(U-1);te<U;te++)q[te-1]=arguments[te];D[N].fn.apply(D[N].context,q)}}return!0},v.prototype.on=function(E,k,P){return d(this,E,k,P,!1)},v.prototype.once=function(E,k,P){return d(this,E,k,P,!0)},v.prototype.removeListener=function(E,k,P,T){var W=n?n+E:E;if(!this._events[W])return this;if(!k)return o(this,W),this;var $=this._events[W];if($.fn)$.fn===k&&(!T||$.once)&&(!P||$.context===P)&&o(this,W);else{for(var H=0,D=[],U=$.length;H<U;H++)($[H].fn!==k||T&&!$[H].once||P&&$[H].context!==P)&&D.push($[H]);D.length?this._events[W]=D.length===1?D[0]:D:o(this,W)}return this},v.prototype.removeAllListeners=function(E){var k;return E?(k=n?n+E:E,this._events[k]&&o(this,k)):(this._events=new a,this._eventsCount=0),this},v.prototype.off=v.prototype.removeListener,v.prototype.addListener=v.prototype.on,v.prefixed=n,v.EventEmitter=v,e.exports=v})(Nk);var Kz=Nk.exports;function Xz(e){return e.map(encodeURIComponent).join(",")}function Fk(e){return Array.isArray(e)?Xz(e):encodeURIComponent(String(e))}function Uk(e,t,n){if(n===!1||n===null)return e;var a=/\?/.test(e)?"&":"?",c=encodeURIComponent(t);return n!==void 0&&n!==""&&n!==!0&&(c+="="+Fk(n)),""+e+a+c}function Qz(e,t){if(!t)return e;var n=e;return Object.keys(t).forEach(function(a){var c=t[a];c!==void 0&&(Array.isArray(c)&&(c=c.filter(function(d){return d!=null}).join(",")),n=Uk(n,a,c))}),n}function Jz(e,t){if(!t||e.slice(0,4)==="http")return e;var n=e[0]==="/"?"":"/";return""+t.replace(/\/$/,"")+n+e}function Yz(e,t){return t?e.replace(/\/:([a-zA-Z0-9]+)/g,function(n,a){var c=t[a];if(c===void 0)throw new Error("Unspecified route parameter "+a);var d=Fk(c);return"/"+d}):e}var eL={appendQueryObject:Qz,appendQueryParam:Uk,prependOrigin:Jz,interpolateRouteParams:Yz},tL=Bk,O1=Fp,rL=Kz,Nm=eL,xA=Sg,nL=1;function zl(e,t){if(!e)throw new Error("MapiRequest requires a client");if(!t||!t.path||!t.method)throw new Error("MapiRequest requires an options object with path and method properties");var n={};t.body&&(n["content-type"]="application/json");var a=O1(n,t.headers),c=Object.keys(a).reduce(function(d,o){return d[o.toLowerCase()]=a[o],d},{});this.id=nL++,this._options=t,this.emitter=new rL,this.client=e,this.response=null,this.error=null,this.sent=!1,this.aborted=!1,this.path=t.path,this.method=t.method,this.origin=t.origin||e.origin,this.query=t.query||{},this.params=t.params||{},this.body=t.body||null,this.file=t.file||null,this.encoding=t.encoding||"utf8",this.sendFileAs=t.sendFileAs||null,this.headers=c}zl.prototype.url=function(t){var n=Nm.prependOrigin(this.path,this.origin);n=Nm.appendQueryObject(n,this.query);var a=this.params,c=t??this.client.accessToken;if(c){n=Nm.appendQueryParam(n,"access_token",c);var d=tL(c).user;a=O1({ownerId:d},a)}return n=Nm.interpolateRouteParams(n,a),n};zl.prototype.send=function(){var t=this;if(t.sent)throw new Error("This request has already been sent. Check the response and error properties. Create a new request with clone().");return t.sent=!0,t.client.sendRequest(t).then(function(n){return t.response=n,t.emitter.emit(xA.EVENT_RESPONSE,n),n},function(n){throw t.error=n,t.emitter.emit(xA.EVENT_ERROR,n),n})};zl.prototype.abort=function(){this._nextPageRequest&&(this._nextPageRequest.abort(),delete this._nextPageRequest),!(this.response||this.error||this.aborted)&&(this.aborted=!0,this.client.abortRequest(this))};zl.prototype.eachPage=function(t){var n=this;function a(o){function v(){delete n._nextPageRequest;var x=o.nextPage();x&&(n._nextPageRequest=x,d(x))}t(null,o,v)}function c(o){t(o,null,function(){})}function d(o){o.send().then(a,c)}d(this)};zl.prototype.clone=function(){return this._extend()};zl.prototype._extend=function(t){var n=O1(this._options,t);return new zl(this.client,n)};var iL=zl,oL=Bk,aL=iL,sL=Sg;function jk(e){if(!e||!e.accessToken)throw new Error("Cannot create a client without an access token");oL(e.accessToken),this.accessToken=e.accessToken,this.origin=e.origin||sL.API_ORIGIN}jk.prototype.createRequest=function(t){return new aL(this,t)};var Vk=jk,$k=qz,qk=Vk;function Ep(e){qk.call(this,e)}Ep.prototype=Object.create(qk.prototype);Ep.prototype.constructor=Ep;Ep.prototype.sendRequest=$k.browserSend;Ep.prototype.abortRequest=$k.browserAbort;function lL(e){return new Ep(e)}var Wk=lL,uL=Wk,cL=uL,pL=Object.prototype.toString,hL=function(e){var t;return pL.call(e)==="[object Object]"&&(t=Object.getPrototypeOf(e),t===null||t===Object.getPrototypeOf({}))},fL=hL,dL=Fp,Gk="value",j0=`
  `,_n={};_n.assert=function(e,t){return t=t||{},function(n){var a=Ll(e,n);if(a){var c=D1(a,t);throw t.apiName&&(c=t.apiName+": "+c),new Error(c)}}};_n.shape=function(t){var n=vL(t);return function(c){var d=Ll(_n.plainObject,c);if(d)return d;for(var o,v,x=[],E=0;E<n.length;E++)o=n[E].key,v=n[E].value,d=Ll(v,c[o]),d&&x.push([o].concat(d));return x.length<2?x[0]:function(k){x=x.map(function(W){var $=W[0],H=D1(W,k).split(`
`).join(j0);return"- "+$+": "+H});var P=k.path.join("."),T=P===Gk?"":" of "+P;return"The following properties"+T+" have invalid values:"+j0+x.join(j0)}}};_n.strictShape=function(t){var n=_n.shape(t);return function(c){var d=n(c);if(d)return d;var o=Object.keys(c).reduce(function(v,x){return t[x]===void 0&&v.push(x),v},[]);if(o.length!==0)return function(){return"The following keys are invalid: "+o.join(", ")}}};_n.arrayOf=function(t){return Hk(t)};_n.tuple=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return Hk(t)};function Hk(e){var t=Array.isArray(e),n=function(a){return t?e[a]:e};return function(c){var d=Ll(_n.plainArray,c);if(d)return d;if(t&&c.length!==e.length)return"an array with "+e.length+" items";for(var o=0;o<c.length;o++)if(d=Ll(n(o),c[o]),d)return[o].concat(d)}}_n.required=function(t){function n(a){return a==null?function(c){return Zk(c,Kk(c.path)?"cannot be undefined/null.":"is required.")}:t.apply(this,arguments)}return n.__required=!0,n};_n.oneOfType=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return function(a){var c=t.map(function(d){return Ll(d,a)}).filter(Boolean);if(c.length===t.length)return c.every(function(d){return d.length===1&&typeof d[0]=="string"})?mL(c.map(function(d){return d[0]})):c.reduce(function(d,o){return o.length>d.length?o:d})}};_n.equal=function(t){return function(a){if(a!==t)return JSON.stringify(t)}};_n.oneOf=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments),n=t.map(function(a){return _n.equal(a)});return _n.oneOfType.apply(this,n)};_n.range=function(t){var n=t[0],a=t[1];return function(d){var o=Ll(_n.number,d);if(o||d<n||d>a)return"number between "+n+" & "+a+" (inclusive)"}};_n.any=function(){};_n.boolean=function(t){if(typeof t!="boolean")return"boolean"};_n.number=function(t){if(typeof t!="number")return"number"};_n.plainArray=function(t){if(!Array.isArray(t))return"array"};_n.plainObject=function(t){if(!fL(t))return"object"};_n.string=function(t){if(typeof t!="string")return"string"};_n.func=function(t){if(typeof t!="function")return"function"};function Ll(e,t){if(!(t==null&&!e.hasOwnProperty("__required"))){var n=e(t);if(n)return Array.isArray(n)?n:[n]}}function D1(e,t){var n=e.length,a=e[n-1],c=e.slice(0,n-1);return c.length===0&&(c=[Gk]),t=dL(t,{path:c}),typeof a=="function"?a(t):Zk(t,yL(a))}function mL(e){return e.length<2?e[0]:e.length===2?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e.slice(-1)}function yL(e){return"must be "+gL(e)+"."}function gL(e){return/^an? /.test(e)?e:/^[aeiou]/i.test(e)?"an "+e:/^[a-z]/i.test(e)?"a "+e:e}function Zk(e,t){var n=Kk(e.path),a=e.path.join(".")+" "+t,c=n?"Item at position ":"";return c+a}function Kk(e){return typeof e[e.length-1]=="number"||typeof e[0]=="number"}function vL(e){return Object.keys(e||{}).map(function(t){return{key:t,value:e[t]}})}_n.validate=Ll;_n.processMessage=D1;var _L=_n,xL=Fp,yp=_L;function bL(e){if(typeof window<"u")return e instanceof ba.Blob||e instanceof ba.ArrayBuffer?void 0:"Blob or ArrayBuffer";if(!(typeof e=="string"||e.pipe!==void 0))return"Filename or Readable stream"}function wL(e,t){return yp.assert(yp.strictShape(e),t)}function AL(e){var t="date";if(typeof e=="boolean")return t;try{var n=new Date(e);if(n.getTime&&isNaN(n.getTime()))return t}catch{return t}}function EL(e){return yp.tuple(yp.number,yp.number)(e)}var SL=xL(yp,{file:bL,date:AL,coordinates:EL,assertShape:wL});function CL(e,t){var n=function(a,c){return t.indexOf(a)!==-1&&c!==void 0};return typeof t=="function"&&(n=t),Object.keys(e).filter(function(a){return n(a,e[a])}).reduce(function(a,c){return a[c]=e[c],a},{})}var kL=CL;function TL(e,t){return Object.keys(e).reduce(function(n,a){return n[a]=t(a,e[a]),n},{})}var IL=TL,PL=IL;function ML(e){return PL(e,function(t,n){return typeof n=="boolean"?JSON.stringify(n):n})}var RL=ML,zL=Vk,LL=Wk;function OL(e){return function(t){var n;zL.prototype.isPrototypeOf(t)?n=t:n=LL(t);var a=Object.create(e);return a.client=n,a}}var DL=OL,Xk=Fp,Nr=SL,Wy=kL,Qk=RL,BL=DL,B1={},Jk=["country","region","postcode","district","place","locality","neighborhood","address","poi","poi.landmark"];B1.forwardGeocode=function(e){Nr.assertShape({query:Nr.required(Nr.string),mode:Nr.oneOf("mapbox.places","mapbox.places-permanent"),countries:Nr.arrayOf(Nr.string),proximity:Nr.oneOf(Nr.coordinates,"ip"),types:Nr.arrayOf(Nr.oneOf(Jk)),autocomplete:Nr.boolean,bbox:Nr.arrayOf(Nr.number),limit:Nr.number,language:Nr.arrayOf(Nr.string),routing:Nr.boolean,fuzzyMatch:Nr.boolean,worldview:Nr.string})(e),e.mode=e.mode||"mapbox.places";var t=Qk(Xk({country:e.countries},Wy(e,["proximity","types","autocomplete","bbox","limit","language","routing","fuzzyMatch","worldview"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:Wy(e,["mode","query"]),query:t})};B1.reverseGeocode=function(e){Nr.assertShape({query:Nr.required(Nr.coordinates),mode:Nr.oneOf("mapbox.places","mapbox.places-permanent"),countries:Nr.arrayOf(Nr.string),types:Nr.arrayOf(Nr.oneOf(Jk)),bbox:Nr.arrayOf(Nr.number),limit:Nr.number,language:Nr.arrayOf(Nr.string),reverseMode:Nr.oneOf("distance","score"),routing:Nr.boolean,worldview:Nr.string})(e),e.mode=e.mode||"mapbox.places";var t=Qk(Xk({country:e.countries},Wy(e,["country","types","bbox","limit","language","reverseMode","routing","worldview"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:Wy(e,["mode","query"]),query:t})};var NL=BL(B1);let FL="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",Yk=e=>crypto.getRandomValues(new Uint8Array(e)),eT=(e,t,n)=>{let a=(2<<Math.log(e.length-1)/Math.LN2)-1,c=-~(1.6*a*t/e.length);return(d=t)=>{let o="";for(;;){let v=n(c),x=c;for(;x--;)if(o+=e[v[x]&a]||"",o.length===d)return o}}},UL=(e,t=21)=>eT(e,t,Yk),jL=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"");const VL=Object.freeze(Object.defineProperty({__proto__:null,customAlphabet:UL,customRandom:eT,nanoid:jL,random:Yk,urlAlphabet:FL},Symbol.toStringTag,{value:"Module"})),$L=MS(VL);var qL=$L.nanoid;function tT(e){this.origin=e.origin||"https://api.mapbox.com",this.endpoint="events/v2",this.access_token=e.accessToken,this.version="0.2.0",this.sessionID=this.generateSessionID(),this.userAgent=this.getUserAgent(),this.options=e,this.send=this.send.bind(this),this.countries=e.countries?e.countries.split(","):null,this.types=e.types?e.types.split(","):null,this.bbox=e.bbox?e.bbox:null,this.language=e.language?e.language.split(","):null,this.limit=e.limit?+e.limit:null,this.locale=navigator.language||null,this.enableEventLogging=this.shouldEnableLogging(e),this.eventQueue=new Array,this.flushInterval=e.flushInterval||1e3,this.maxQueueSize=e.maxQueueSize||100,this.timer=this.flushInterval?setTimeout(this.flush.bind(this),this.flushInterval):null,this.lastSentInput="",this.lastSentIndex=0}tT.prototype={select:function(e,t){var n=this.getSelectedIndex(e,t),a=this.getEventPayload("search.select",t);if(a.resultIndex=n,a.resultPlaceName=e.place_name,a.resultId=e.id,!(n===this.lastSentIndex&&a.queryString===this.lastSentInput||n==-1)&&(this.lastSentIndex=n,this.lastSentInput=a.queryString,!!a.queryString))return this.push(a)},start:function(e){var t=this.getEventPayload("search.start",e);if(t.queryString)return this.push(t)},keyevent:function(e,t){if(e.key&&!(e.metaKey||[9,27,37,39,13,38,40].indexOf(e.keyCode)!==-1)){var n=this.getEventPayload("search.keystroke",t);if(n.lastAction=e.key,!!n.queryString)return this.push(n)}},send:function(e,t){if(!this.enableEventLogging)return t?t():void 0;var n=this.getRequestOptions(e);this.request(n,function(a){if(a)return this.handleError(a,t);if(t)return t()}.bind(this))},getRequestOptions:function(e){Array.isArray(e)||(e=[e]);var t={method:"POST",host:this.origin,path:this.endpoint+"?access_token="+this.access_token,headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return t},getEventPayload:function(e,t){var n;t.options.proximity?typeof t.options.proximity=="object"?n=[t.options.proximity.longitude,t.options.proximity.latitude]:t.options.proximity==="ip"?n=[999,999]:n=t.options.proximity:n=null;var a=t._map?t._map.getZoom():void 0,c={event:e,created:+new Date,sessionIdentifier:this.sessionID,country:this.countries,userAgent:this.userAgent,language:this.language,bbox:this.bbox,types:this.types,endpoint:"mapbox.places",autocomplete:t.options.autocomplete,fuzzyMatch:t.options.fuzzyMatch,proximity:n,limit:t.options.limit,routing:t.options.routing,worldview:t.options.worldview,mapZoom:a,keyboardLocale:this.locale};return e==="search.select"?c.queryString=t.inputString:e!="search.select"&&t._inputEl?c.queryString=t._inputEl.value:c.queryString=t.inputString,c},request:function(e,t){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(this.readyState==4)return this.status==204?t(null):t(this.statusText)},n.open(e.method,e.host+"/"+e.path,!0);for(var a in e.headers){var c=e.headers[a];n.setRequestHeader(a,c)}n.send(e.body)},handleError:function(e,t){if(t)return t(e)},generateSessionID:function(){return qL()},getUserAgent:function(){return"mapbox-gl-geocoder."+this.version+"."+navigator.userAgent},getSelectedIndex:function(e,t){if(t._typeahead){var n=t._typeahead.data,a=e.id,c=n.map(function(o){return o.id}),d=c.indexOf(a);return d}},shouldEnableLogging:function(e){return!(e.enableEventLogging===!1||e.origin&&e.origin!=="https://api.mapbox.com"||e.localGeocoder||e.filter)},flush:function(){this.eventQueue.length>0&&(this.send(this.eventQueue),this.eventQueue=new Array),this.timer&&clearTimeout(this.timer),this.flushInterval&&(this.timer=setTimeout(this.flush.bind(this),this.flushInterval))},push:function(e,t){this.eventQueue.push(e),(this.eventQueue.length>=this.maxQueueSize||t)&&this.flush()},remove:function(){this.flush()}};var WL=tT,GL={de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"לחפש",ja:"サーチ",lv:"Meklēt",pt:"Procurar",sr:"Претрага",zh:"搜索",cs:"Vyhledávání",hu:"Keresés",ka:"ძიება",nb:"Søke",sk:"Vyhľadávanie",th:"ค้นหา",fi:"Hae",is:"Leita",ko:"수색",pl:"Szukaj",sl:"Iskanje",fa:"جستجو",ru:"Поиск"},HL={placeholder:GL},rT={exports:{}};(function(e){(function(t,n,a){e.exports?e.exports=a():t[n]=a()})(ba,"subtag",function(){var t="",n=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function a(x){return x.match(n)||[]}function c(x){return a(x).filter(function(E,k){return E&&k})}function d(x){return x=a(x),{language:x[1]||t,extlang:x[2]||t,script:x[3]||t,region:x[4]||t}}function o(x,E,k){Object.defineProperty(x,E,{value:k,enumerable:!0})}function v(x,E,k){function P(T){return a(T)[x]||t}o(P,"pattern",E),o(d,k,P)}return v(1,/^[a-zA-Z]{2,3}$/,"language"),v(2,/^[a-zA-Z]{3}$/,"extlang"),v(3,/^[a-zA-Z]{4}$/,"script"),v(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),o(d,"split",c),d})})(rT);var ZL=rT.exports;function nT(){}nT.prototype={isSupport:function(){return!!window.navigator.geolocation},getCurrentPosition:function(){const e={enableHighAccuracy:!0};return new Promise(function(t,n){window.navigator.geolocation.getCurrentPosition(t,n,e)})}};var KL=nT;function XL(e,t){const n=iT(e),a=["address","street","place","country"];var c;if(typeof t=="function")return t(n);const d=a.indexOf(t);return d===-1?c=a:c=a.slice(d),c.reduce(function(o,v){return n[v]?(o!==""&&(o=o+", "),o+n[v]):o},"")}function iT(e){const t=e.address||"",n=e.text||"",a=e.place_name||"",d={address:a.split(",")[0],houseNumber:t,street:n,placeName:a};return e.context.forEach(function(o){const v=o.id.split(".")[0];d[v]=o.text}),d}const QL=/^[ ]*(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)[ ]*$/;var JL={transformFeatureToGeolocationText:XL,getAddressInfo:iT,REVERSE_GEOCODE_COORD_RGX:QL},YL=tz,e5=_z,bu=Fp,t5=Cz.EventEmitter,bA=kz,V0=cL,$0=NL,r5=WL,n5=HL,i5=ZL,o5=KL,wA=JL;const hl={FORWARD:0,LOCAL:1,REVERSE:2};function a5(){var e=document.createElement("div");return e.className="mapboxgl-ctrl-geocoder--powered-by",e.innerHTML='<a href="https://www.mapbox.com/search-service" target="_blank">Powered by Mapbox</a>',e}function oT(e){this._eventEmitter=new t5,this.options=bu({},this.options,e),this.inputString="",this.fresh=!0,this.lastSelected=null,this.geolocation=new o5}oT.prototype={options:{zoom:16,flyTo:!0,trackProximity:!0,minLength:2,reverseGeocode:!1,flipCoordinates:!1,limit:5,origin:"https://api.mapbox.com",enableEventLogging:!0,marker:!0,mapboxgl:null,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,enableGeolocation:!1,addressAccuracy:"street",getItemValue:function(e){return e.place_name},render:function(e){var t=e.place_name.split(",");return'<div class="mapboxgl-ctrl-geocoder--suggestion"><div class="mapboxgl-ctrl-geocoder--suggestion-title">'+t[0]+'</div><div class="mapboxgl-ctrl-geocoder--suggestion-address">'+t.splice(1,t.length).join(",")+"</div></div>"}},addTo:function(e){function t(n,a){if(!document.body.contains(a))throw new Error("Element provided to #addTo() exists, but is not in the DOM");const c=n.onAdd();a.appendChild(c)}if(e._controlContainer)e.addControl(this);else if(e instanceof HTMLElement)t(this,e);else if(typeof e=="string"){const n=document.querySelectorAll(e);if(n.length===0)throw new Error("Element ",e,"not found.");if(n.length>1)throw new Error("Geocoder can only be added to a single html element");t(this,n[0])}else throw new Error("Error: addTo must be a mapbox-gl-js map, an html element, or a CSS selector query for a single html element")},onAdd:function(e){if(e&&typeof e!="string"&&(this._map=e),this.setLanguage(),this.options.localGeocoderOnly||(this.geocoderService=$0(V0({accessToken:this.options.accessToken,origin:this.options.origin}))),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this.eventManager=new r5(this.options),this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this),this._geolocateUser=this._geolocateUser.bind(this);var t=this.container=document.createElement("div");t.className="mapboxgl-ctrl-geocoder mapboxgl-ctrl";var n=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.className="mapboxgl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",e5(this._onKeyDown,200)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton),this._inputEl.addEventListener("keyup",function(E){this.eventManager.keyevent(E,this)}.bind(this));var a=document.createElement("div");a.classList.add("mapboxgl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="mapboxgl-ctrl-geocoder--button";var c=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');if(this._clearEl.appendChild(c),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),a.appendChild(this._clearEl),a.appendChild(this._loadingEl),t.appendChild(n),t.appendChild(this._inputEl),t.appendChild(a),this.options.enableGeolocation&&this.geolocation.isSupport()){this._geolocateEl=document.createElement("button"),this._geolocateEl.setAttribute("aria-label","Geolocate"),this._geolocateEl.addEventListener("click",this._geolocateUser),this._geolocateEl.className="mapboxgl-ctrl-geocoder--button";var d=this.createIcon("geolocate",'<path d="M12.999 3.677L2.042 8.269c-.962.403-.747 1.823.29 1.912l5.032.431.431 5.033c.089 1.037 1.509 1.252 1.912.29l4.592-10.957c.345-.822-.477-1.644-1.299-1.299z" fill="#4264fb"/>');this._geolocateEl.appendChild(d),a.appendChild(this._geolocateEl),this._showGeolocateButton()}var o=this._typeahead=new YL(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit});this.setRenderFunction(this.options.render),o.getItemValue=this.options.getItemValue;var v=o.list.draw,x=this._footerNode=a5();return o.list.draw=function(){v.call(this),x.addEventListener("mousedown",function(){this.selectingListItem=!0}.bind(this)),x.addEventListener("mouseup",function(){this.selectingListItem=!1}.bind(this)),this.element.appendChild(x)},this.mapMarker=null,this._handleMarker=this._handleMarker.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._mapboxgl=this.options.mapboxgl,!this._mapboxgl&&this.options.marker&&(console.error("No mapboxgl detected in options. Map markers are disabled. Please set options.mapboxgl."),this.options.marker=!1)),t},_geolocateUser:function(){this._hideGeolocateButton(),this._showLoadingIcon(),this.geolocation.getCurrentPosition().then(function(e){this._hideLoadingIcon();const t={geometry:{type:"Point",coordinates:[e.coords.longitude,e.coords.latitude]}};this._handleMarker(t),this._fly(t),this._typeahead.clear(),this._typeahead.selected=!0,this.lastSelected=JSON.stringify(t),this._showClearButton(),this.fresh=!1;const n={limit:1,language:[this.options.language],query:t.geometry.coordinates,types:["address"]};if(this.options.localGeocoderOnly){const a=t.geometry.coordinates[0]+","+t.geometry.coordinates[1];this._setInputValue(a),this._eventEmitter.emit("result",{result:t})}else this.geocoderService.reverseGeocode(n).send().then(function(a){const c=a.body.features[0];if(c){const d=wA.transformFeatureToGeolocationText(c,this.options.addressAccuracy);this._setInputValue(d),c.user_coordinates=t.geometry.coordinates,this._eventEmitter.emit("result",{result:c})}else this._eventEmitter.emit("result",{result:{user_coordinates:t.geometry.coordinates}})}.bind(this))}.bind(this)).catch(function(e){e.code===1?this._renderUserDeniedGeolocationError():this._renderLocationError(),this._hideLoadingIcon(),this._showGeolocateButton(),this._hideAttribution()}.bind(this))},createIcon:function(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");return n.setAttribute("class","mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-"+e),n.setAttribute("viewBox","0 0 18 18"),n.setAttribute("xml:space","preserve"),n.setAttribute("width",18),n.setAttribute("height",18),n.innerHTML=t,n},onRemove:function(){return this.container.parentNode.removeChild(this.container),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this},_setInputValue:function(e){this._inputEl.value=e,setTimeout(function(){this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0)}.bind(this),1)},_onPaste:function(e){var t=(e.clipboardData||window.clipboardData).getData("text");t.length>=this.options.minLength&&this._geocode(t)},_onKeyDown:function(e){var t=27,n=9;if(e.keyCode===t&&this.options.clearAndBlurOnEsc)return this._clear(e),this._inputEl.blur();var a=e.target&&e.target.shadowRoot?e.target.shadowRoot.activeElement:e.target,c=a?a.value:"";if(!c)return this.fresh=!0,e.keyCode!==n&&this.clear(e),this._showGeolocateButton(),this._hideClearButton();this._hideGeolocateButton(),!(e.metaKey||[n,t,37,39,13,38,40].indexOf(e.keyCode)!==-1)&&a.value.length>=this.options.minLength&&this._geocode(a.value)},_showButton:function(){this._typeahead.selected&&this._showClearButton()},_hideButton:function(){this._typeahead.selected&&this._hideClearButton()},_showClearButton:function(){this._clearEl.style.display="block"},_hideClearButton:function(){this._clearEl.style.display="none"},_showGeolocateButton:function(){this._geolocateEl&&this.geolocation.isSupport()&&(this._geolocateEl.style.display="block")},_hideGeolocateButton:function(){this._geolocateEl&&(this._geolocateEl.style.display="none")},_showLoadingIcon:function(){this._loadingEl.style.display="block"},_hideLoadingIcon:function(){this._loadingEl.style.display="none"},_showAttribution:function(){this._footerNode.style.display="block"},_hideAttribution:function(){this._footerNode.style.display="none"},_onBlur:function(e){this.options.clearOnBlur&&this._clearOnBlur(e),this.options.collapsed&&this._collapse()},_onChange:function(){var e=this._typeahead.selected;e&&JSON.stringify(e)!==this.lastSelected&&(this._hideClearButton(),this.options.flyTo&&this._fly(e),this.options.marker&&this._mapboxgl&&this._handleMarker(e),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(e),this._eventEmitter.emit("result",{result:e}),this.eventManager.select(e,this))},_fly:function(e){var t;if(e.properties&&bA[e.properties.short_code])t=bu({},this.options.flyTo),this._map&&this._map.fitBounds(bA[e.properties.short_code].bbox,t);else if(e.bbox){var n=e.bbox;t=bu({},this.options.flyTo),this._map&&this._map.fitBounds([[n[0],n[1]],[n[2],n[3]]],t)}else{var a={zoom:this.options.zoom};t=bu({},a,this.options.flyTo),e.center?t.center=e.center:e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&(t.center=e.geometry.coordinates),this._map&&this._map.flyTo(t)}},_requestType:function(e,t){var n;return e.localGeocoderOnly?n=hl.LOCAL:e.reverseGeocode&&wA.REVERSE_GEOCODE_COORD_RGX.test(t)?n=hl.REVERSE:n=hl.FORWARD,n},_setupConfig:function(e,t){const n=["bbox","limit","proximity","countries","types","language","reverseMode","mode","autocomplete","fuzzyMatch","routing","worldview"],a=/[\s,]+/;var c=this,d=n.reduce(function(v,x){if(c.options[x]===void 0||c.options[x]===null)return v;["countries","types","language"].indexOf(x)>-1?v[x]=c.options[x].split(a):v[x]=c.options[x];const E=typeof c.options[x].longitude=="number"&&typeof c.options[x].latitude=="number";if(x==="proximity"&&E){const k=c.options[x].longitude,P=c.options[x].latitude;v[x]=[k,P]}return v},{});switch(e){case hl.REVERSE:{var o=t.split(a).map(function(v){return parseFloat(v,10)});c.options.flipCoordinates||o.reverse(),d.types&&d.types[0],d=bu(d,{query:o,limit:1}),["proximity","autocomplete","fuzzyMatch","bbox"].forEach(function(v){v in d&&delete d[v]})}break;case hl.FORWARD:{const v=t.trim();/^(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)?$/.test(v)&&(t=t.replace(/,/g," ")),d=bu(d,{query:t})}break}return d},_geocode:function(e){this.inputString=e,this._showLoadingIcon(),this._eventEmitter.emit("loading",{query:e});const t=this._requestType(this.options,e),n=this._setupConfig(t,e);var a;switch(t){case hl.LOCAL:a=Promise.resolve();break;case hl.FORWARD:a=this.geocoderService.forwardGeocode(n).send();break;case hl.REVERSE:a=this.geocoderService.reverseGeocode(n).send();break}var c=this.options.localGeocoder?this.options.localGeocoder(e)||[]:[],d=[],o=null;return a.catch(function(v){o=v}.bind(this)).then(function(v){this._hideLoadingIcon();var x={};return v?v.statusCode=="200"&&(x=v.body,x.request=v.request,x.headers=v.headers):x={type:"FeatureCollection",features:[]},x.config=n,this.fresh&&(this.eventManager.start(this),this.fresh=!1),x.features=x.features?c.concat(x.features):c,this.options.externalGeocoder?(d=this.options.externalGeocoder(e,x.features)||Promise.resolve([]),d.then(function(E){return x.features=x.features?E.concat(x.features):E,x},function(){return x})):x}.bind(this)).then(function(v){if(o)throw o;this.options.filter&&v.features.length&&(v.features=v.features.filter(this.options.filter)),v.features.length?(this._showClearButton(),this._hideGeolocateButton(),this._showAttribution(),this._eventEmitter.emit("results",v),this._typeahead.update(v.features)):(this._hideClearButton(),this._hideAttribution(),this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",v))}.bind(this)).catch(function(v){this._hideLoadingIcon(),this._hideAttribution(),c.length&&this.options.localGeocoder||d.length&&this.options.externalGeocoder?(this._showClearButton(),this._hideGeolocateButton(),this._typeahead.update(c)):(this._hideClearButton(),this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:c}),this._eventEmitter.emit("error",{error:v})}.bind(this)),a},_clear:function(e){e&&e.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._hideClearButton(),this._showGeolocateButton(),this._removeMarker(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0},clear:function(e){this._clear(e),this._inputEl.focus()},_clearOnBlur:function(e){var t=this;e.relatedTarget&&t._clear(e)},_onQueryResult:function(e){var t=e.body;if(t.features.length){var n=t.features[0];this._typeahead.selected=n,this._inputEl.value=n.place_name,this._onChange()}},_updateProximity:function(){if(!(!this._map||!this.options.trackProximity))if(this._map.getZoom()>9){var e=this._map.getCenter().wrap();this.setProximity({longitude:e.lng,latitude:e.lat},!1)}else this.setProximity(null,!1)},_collapse:function(){!this._inputEl.value&&this._inputEl!==document.activeElement&&this.container.classList.add("mapboxgl-ctrl-geocoder--collapsed")},_unCollapse:function(){this.container.classList.remove("mapboxgl-ctrl-geocoder--collapsed")},query:function(e){return this._geocode(e).then(this._onQueryResult),this},_renderError:function(){var e="<div class='mapbox-gl-geocoder--error'>There was an error reaching the server</div>";this._renderMessage(e)},_renderLocationError:function(){var e="<div class='mapbox-gl-geocoder--error'>A location error has occurred</div>";this._renderMessage(e)},_renderNoResults:function(){var e="<div class='mapbox-gl-geocoder--error mapbox-gl-geocoder--no-results'>No results found</div>";this._renderMessage(e)},_renderUserDeniedGeolocationError:function(){var e="<div class='mapbox-gl-geocoder--error'>Geolocation permission denied</div>";this._renderMessage(e)},_renderMessage:function(e){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(e)},_getPlaceholderText:function(){if(this.options.placeholder)return this.options.placeholder;if(this.options.language){var e=this.options.language.split(",")[0],t=i5.language(e),n=n5.placeholder[t];if(n)return n}return"Search"},setInput:function(e){return this._inputEl.value=e,this._typeahead.selected=null,this._typeahead.clear(),e.length>=this.options.minLength&&this._geocode(e),this},setProximity:function(e,t=!0){return this.options.proximity=e,t&&(this.options.trackProximity=!1),this},getProximity:function(){return this.options.proximity},setRenderFunction:function(e){return e&&typeof e=="function"&&(this._typeahead.render=e),this},getRenderFunction:function(){return this._typeahead.render},setLanguage:function(e){var t=navigator.language||navigator.userLanguage||navigator.browserLanguage;return this.options.language=e||this.options.language||t,this},getLanguage:function(){return this.options.language},getZoom:function(){return this.options.zoom},setZoom:function(e){return this.options.zoom=e,this},getFlyTo:function(){return this.options.flyTo},setFlyTo:function(e){return this.options.flyTo=e,this},getPlaceholder:function(){return this.options.placeholder},setPlaceholder:function(e){return this.placeholder=e||this._getPlaceholderText(),this._inputEl.placeholder=this.placeholder,this._inputEl.setAttribute("aria-label",this.placeholder),this},getBbox:function(){return this.options.bbox},setBbox:function(e){return this.options.bbox=e,this},getCountries:function(){return this.options.countries},setCountries:function(e){return this.options.countries=e,this},getTypes:function(){return this.options.types},setTypes:function(e){return this.options.types=e,this},getMinLength:function(){return this.options.minLength},setMinLength:function(e){return this.options.minLength=e,this._typeahead&&(this._typeahead.options.minLength=e),this},getLimit:function(){return this.options.limit},setLimit:function(e){return this.options.limit=e,this._typeahead&&(this._typeahead.options.limit=e),this},getFilter:function(){return this.options.filter},setFilter:function(e){return this.options.filter=e,this},setOrigin:function(e){return this.options.origin=e,this.geocoderService=$0(V0({accessToken:this.options.accessToken,origin:this.options.origin})),this},getOrigin:function(){return this.options.origin},setAccessToken:function(e){return this.options.accessToken=e,this.geocoderService=$0(V0({accessToken:this.options.accessToken,origin:this.options.origin})),this},setAutocomplete:function(e){return this.options.autocomplete=e,this},getAutocomplete:function(){return this.options.autocomplete},setFuzzyMatch:function(e){return this.options.fuzzyMatch=e,this},getFuzzyMatch:function(){return this.options.fuzzyMatch},setRouting:function(e){return this.options.routing=e,this},getRouting:function(){return this.options.routing},setWorldview:function(e){return this.options.worldview=e,this},getWorldview:function(){return this.options.worldview},_handleMarker:function(e){if(this._map){this._removeMarker();var t={color:"#4668F2"},n=bu({},t,this.options.marker);return this.mapMarker=new this._mapboxgl.Marker(n),e.center?this.mapMarker.setLngLat(e.center).addTo(this._map):e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&this.mapMarker.setLngLat(e.geometry.coordinates).addTo(this._map),this}},_removeMarker:function(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)},on:function(e,t){return this._eventEmitter.on(e,t),this},off:function(e,t){return this._eventEmitter.removeListener(e,t),this.eventManager.remove(),this}};var s5=oT;const l5=Qf(s5);var N1={exports:{}},F1={exports:{}},U1={exports:{}},aT=function(t,n){return function(){for(var c=new Array(arguments.length),d=0;d<c.length;d++)c[d]=arguments[d];return t.apply(n,c)}},u5=aT,Nl=Object.prototype.toString;function j1(e){return Array.isArray(e)}function dx(e){return typeof e>"u"}function c5(e){return e!==null&&!dx(e)&&e.constructor!==null&&!dx(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function sT(e){return Nl.call(e)==="[object ArrayBuffer]"}function p5(e){return Nl.call(e)==="[object FormData]"}function h5(e){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&sT(e.buffer),t}function f5(e){return typeof e=="string"}function d5(e){return typeof e=="number"}function lT(e){return e!==null&&typeof e=="object"}function uy(e){if(Nl.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function m5(e){return Nl.call(e)==="[object Date]"}function y5(e){return Nl.call(e)==="[object File]"}function g5(e){return Nl.call(e)==="[object Blob]"}function uT(e){return Nl.call(e)==="[object Function]"}function v5(e){return lT(e)&&uT(e.pipe)}function _5(e){return Nl.call(e)==="[object URLSearchParams]"}function x5(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function b5(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function V1(e,t){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),j1(e))for(var n=0,a=e.length;n<a;n++)t.call(null,e[n],n,e);else for(var c in e)Object.prototype.hasOwnProperty.call(e,c)&&t.call(null,e[c],c,e)}function mx(){var e={};function t(c,d){uy(e[d])&&uy(c)?e[d]=mx(e[d],c):uy(c)?e[d]=mx({},c):j1(c)?e[d]=c.slice():e[d]=c}for(var n=0,a=arguments.length;n<a;n++)V1(arguments[n],t);return e}function w5(e,t,n){return V1(t,function(c,d){n&&typeof c=="function"?e[d]=u5(c,n):e[d]=c}),e}function A5(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}var Po={isArray:j1,isArrayBuffer:sT,isBuffer:c5,isFormData:p5,isArrayBufferView:h5,isString:f5,isNumber:d5,isObject:lT,isPlainObject:uy,isUndefined:dx,isDate:m5,isFile:y5,isBlob:g5,isFunction:uT,isStream:v5,isURLSearchParams:_5,isStandardBrowserEnv:b5,forEach:V1,merge:mx,extend:w5,trim:x5,stripBOM:A5},Fc=Po;function AA(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var cT=function(t,n,a){if(!n)return t;var c;if(a)c=a(n);else if(Fc.isURLSearchParams(n))c=n.toString();else{var d=[];Fc.forEach(n,function(x,E){x===null||typeof x>"u"||(Fc.isArray(x)?E=E+"[]":x=[x],Fc.forEach(x,function(P){Fc.isDate(P)?P=P.toISOString():Fc.isObject(P)&&(P=JSON.stringify(P)),d.push(AA(E)+"="+AA(P))}))}),c=d.join("&")}if(c){var o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+c}return t},E5=Po;function Cg(){this.handlers=[]}Cg.prototype.use=function(t,n,a){return this.handlers.push({fulfilled:t,rejected:n,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1};Cg.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};Cg.prototype.forEach=function(t){E5.forEach(this.handlers,function(a){a!==null&&t(a)})};var S5=Cg,C5=Po,k5=function(t,n){C5.forEach(t,function(c,d){d!==n&&d.toUpperCase()===n.toUpperCase()&&(t[n]=c,delete t[d])})},pT=function(t,n,a,c,d){return t.config=n,a&&(t.code=a),t.request=c,t.response=d,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},t},hT={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},q0,EA;function fT(){if(EA)return q0;EA=1;var e=pT;return q0=function(n,a,c,d,o){var v=new Error(n);return e(v,a,c,d,o)},q0}var W0,SA;function T5(){if(SA)return W0;SA=1;var e=fT();return W0=function(n,a,c){var d=c.config.validateStatus;!c.status||!d||d(c.status)?n(c):a(e("Request failed with status code "+c.status,c.config,null,c.request,c))},W0}var G0,CA;function I5(){if(CA)return G0;CA=1;var e=Po;return G0=e.isStandardBrowserEnv()?function(){return{write:function(a,c,d,o,v,x){var E=[];E.push(a+"="+encodeURIComponent(c)),e.isNumber(d)&&E.push("expires="+new Date(d).toGMTString()),e.isString(o)&&E.push("path="+o),e.isString(v)&&E.push("domain="+v),x===!0&&E.push("secure"),document.cookie=E.join("; ")},read:function(a){var c=document.cookie.match(new RegExp("(^|;\\s*)("+a+")=([^;]*)"));return c?decodeURIComponent(c[3]):null},remove:function(a){this.write(a,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),G0}var H0,kA;function P5(){return kA||(kA=1,H0=function(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}),H0}var Z0,TA;function M5(){return TA||(TA=1,Z0=function(t,n){return n?t.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):t}),Z0}var K0,IA;function R5(){if(IA)return K0;IA=1;var e=P5(),t=M5();return K0=function(a,c){return a&&!e(c)?t(a,c):c},K0}var X0,PA;function z5(){if(PA)return X0;PA=1;var e=Po,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return X0=function(a){var c={},d,o,v;return a&&e.forEach(a.split(`
`),function(E){if(v=E.indexOf(":"),d=e.trim(E.substr(0,v)).toLowerCase(),o=e.trim(E.substr(v+1)),d){if(c[d]&&t.indexOf(d)>=0)return;d==="set-cookie"?c[d]=(c[d]?c[d]:[]).concat([o]):c[d]=c[d]?c[d]+", "+o:o}}),c},X0}var Q0,MA;function L5(){if(MA)return Q0;MA=1;var e=Po;return Q0=e.isStandardBrowserEnv()?function(){var n=/(msie|trident)/i.test(navigator.userAgent),a=document.createElement("a"),c;function d(o){var v=o;return n&&(a.setAttribute("href",v),v=a.href),a.setAttribute("href",v),{href:a.href,protocol:a.protocol?a.protocol.replace(/:$/,""):"",host:a.host,search:a.search?a.search.replace(/^\?/,""):"",hash:a.hash?a.hash.replace(/^#/,""):"",hostname:a.hostname,port:a.port,pathname:a.pathname.charAt(0)==="/"?a.pathname:"/"+a.pathname}}return c=d(window.location.href),function(v){var x=e.isString(v)?d(v):v;return x.protocol===c.protocol&&x.host===c.host}}():function(){return function(){return!0}}(),Q0}var J0,RA;function kg(){if(RA)return J0;RA=1;function e(t){this.message=t}return e.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},e.prototype.__CANCEL__=!0,J0=e,J0}var Y0,zA;function LA(){if(zA)return Y0;zA=1;var e=Po,t=T5(),n=I5(),a=cT,c=R5(),d=z5(),o=L5(),v=fT(),x=hT,E=kg();return Y0=function(P){return new Promise(function(W,$){var H=P.data,D=P.headers,U=P.responseType,q;function N(){P.cancelToken&&P.cancelToken.unsubscribe(q),P.signal&&P.signal.removeEventListener("abort",q)}e.isFormData(H)&&delete D["Content-Type"];var O=new XMLHttpRequest;if(P.auth){var te=P.auth.username||"",ne=P.auth.password?unescape(encodeURIComponent(P.auth.password)):"";D.Authorization="Basic "+btoa(te+":"+ne)}var fe=c(P.baseURL,P.url);O.open(P.method.toUpperCase(),a(fe,P.params,P.paramsSerializer),!0),O.timeout=P.timeout;function xe(){if(O){var ve="getAllResponseHeaders"in O?d(O.getAllResponseHeaders()):null,Ee=!U||U==="text"||U==="json"?O.responseText:O.response,Y={data:Ee,status:O.status,statusText:O.statusText,headers:ve,config:P,request:O};t(function(Ne){W(Ne),N()},function(Ne){$(Ne),N()},Y),O=null}}if("onloadend"in O?O.onloadend=xe:O.onreadystatechange=function(){!O||O.readyState!==4||O.status===0&&!(O.responseURL&&O.responseURL.indexOf("file:")===0)||setTimeout(xe)},O.onabort=function(){O&&($(v("Request aborted",P,"ECONNABORTED",O)),O=null)},O.onerror=function(){$(v("Network Error",P,null,O)),O=null},O.ontimeout=function(){var Ee=P.timeout?"timeout of "+P.timeout+"ms exceeded":"timeout exceeded",Y=P.transitional||x;P.timeoutErrorMessage&&(Ee=P.timeoutErrorMessage),$(v(Ee,P,Y.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",O)),O=null},e.isStandardBrowserEnv()){var Te=(P.withCredentials||o(fe))&&P.xsrfCookieName?n.read(P.xsrfCookieName):void 0;Te&&(D[P.xsrfHeaderName]=Te)}"setRequestHeader"in O&&e.forEach(D,function(Ee,Y){typeof H>"u"&&Y.toLowerCase()==="content-type"?delete D[Y]:O.setRequestHeader(Y,Ee)}),e.isUndefined(P.withCredentials)||(O.withCredentials=!!P.withCredentials),U&&U!=="json"&&(O.responseType=P.responseType),typeof P.onDownloadProgress=="function"&&O.addEventListener("progress",P.onDownloadProgress),typeof P.onUploadProgress=="function"&&O.upload&&O.upload.addEventListener("progress",P.onUploadProgress),(P.cancelToken||P.signal)&&(q=function(ve){O&&($(!ve||ve&&ve.type?new E("canceled"):ve),O.abort(),O=null)},P.cancelToken&&P.cancelToken.subscribe(q),P.signal&&(P.signal.aborted?q():P.signal.addEventListener("abort",q))),H||(H=null),O.send(H)})},Y0}var Li=Po,OA=k5,O5=pT,D5=hT,B5={"Content-Type":"application/x-www-form-urlencoded"};function DA(e,t){!Li.isUndefined(e)&&Li.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function N5(){var e;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(e=LA()),e}function F5(e,t,n){if(Li.isString(e))try{return(t||JSON.parse)(e),Li.trim(e)}catch(a){if(a.name!=="SyntaxError")throw a}return(n||JSON.stringify)(e)}var Tg={transitional:D5,adapter:N5(),transformRequest:[function(t,n){return OA(n,"Accept"),OA(n,"Content-Type"),Li.isFormData(t)||Li.isArrayBuffer(t)||Li.isBuffer(t)||Li.isStream(t)||Li.isFile(t)||Li.isBlob(t)?t:Li.isArrayBufferView(t)?t.buffer:Li.isURLSearchParams(t)?(DA(n,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):Li.isObject(t)||n&&n["Content-Type"]==="application/json"?(DA(n,"application/json"),F5(t)):t}],transformResponse:[function(t){var n=this.transitional||Tg.transitional,a=n&&n.silentJSONParsing,c=n&&n.forcedJSONParsing,d=!a&&this.responseType==="json";if(d||c&&Li.isString(t)&&t.length)try{return JSON.parse(t)}catch(o){if(d)throw o.name==="SyntaxError"?O5(o,this,"E_JSON_PARSE"):o}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Li.forEach(["delete","get","head"],function(t){Tg.headers[t]={}});Li.forEach(["post","put","patch"],function(t){Tg.headers[t]=Li.merge(B5)});var $1=Tg,U5=Po,j5=$1,V5=function(t,n,a){var c=this||j5;return U5.forEach(a,function(o){t=o.call(c,t,n)}),t},e_,BA;function dT(){return BA||(BA=1,e_=function(t){return!!(t&&t.__CANCEL__)}),e_}var NA=Po,t_=V5,$5=dT(),q5=$1,W5=kg();function r_(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new W5("canceled")}var G5=function(t){r_(t),t.headers=t.headers||{},t.data=t_.call(t,t.data,t.headers,t.transformRequest),t.headers=NA.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),NA.forEach(["delete","get","head","post","put","patch","common"],function(c){delete t.headers[c]});var n=t.adapter||q5.adapter;return n(t).then(function(c){return r_(t),c.data=t_.call(t,c.data,c.headers,t.transformResponse),c},function(c){return $5(c)||(r_(t),c&&c.response&&(c.response.data=t_.call(t,c.response.data,c.response.headers,t.transformResponse))),Promise.reject(c)})},No=Po,mT=function(t,n){n=n||{};var a={};function c(k,P){return No.isPlainObject(k)&&No.isPlainObject(P)?No.merge(k,P):No.isPlainObject(P)?No.merge({},P):No.isArray(P)?P.slice():P}function d(k){if(No.isUndefined(n[k])){if(!No.isUndefined(t[k]))return c(void 0,t[k])}else return c(t[k],n[k])}function o(k){if(!No.isUndefined(n[k]))return c(void 0,n[k])}function v(k){if(No.isUndefined(n[k])){if(!No.isUndefined(t[k]))return c(void 0,t[k])}else return c(void 0,n[k])}function x(k){if(k in n)return c(t[k],n[k]);if(k in t)return c(void 0,t[k])}var E={url:o,method:o,data:o,baseURL:v,transformRequest:v,transformResponse:v,paramsSerializer:v,timeout:v,timeoutMessage:v,withCredentials:v,adapter:v,responseType:v,xsrfCookieName:v,xsrfHeaderName:v,onUploadProgress:v,onDownloadProgress:v,decompress:v,maxContentLength:v,maxBodyLength:v,transport:v,httpAgent:v,httpsAgent:v,cancelToken:v,socketPath:v,responseEncoding:v,validateStatus:x};return No.forEach(Object.keys(t).concat(Object.keys(n)),function(P){var T=E[P]||d,W=T(P);No.isUndefined(W)&&T!==x||(a[P]=W)}),a},n_,FA;function yT(){return FA||(FA=1,n_={version:"0.26.1"}),n_}var H5=yT().version,q1={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){q1[e]=function(a){return typeof a===e||"a"+(t<1?"n ":" ")+e}});var UA={};q1.transitional=function(t,n,a){function c(d,o){return"[Axios v"+H5+"] Transitional option '"+d+"'"+o+(a?". "+a:"")}return function(d,o,v){if(t===!1)throw new Error(c(o," has been removed"+(n?" in "+n:"")));return n&&!UA[o]&&(UA[o]=!0,console.warn(c(o," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(d,o,v):!0}};function Z5(e,t,n){if(typeof e!="object")throw new TypeError("options must be an object");for(var a=Object.keys(e),c=a.length;c-- >0;){var d=a[c],o=t[d];if(o){var v=e[d],x=v===void 0||o(v,d,e);if(x!==!0)throw new TypeError("option "+d+" must be "+x);continue}if(n!==!0)throw Error("Unknown option "+d)}}var K5={assertOptions:Z5,validators:q1},gT=Po,X5=cT,jA=S5,VA=G5,Ig=mT,vT=K5,Uc=vT.validators;function id(e){this.defaults=e,this.interceptors={request:new jA,response:new jA}}id.prototype.request=function(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Ig(this.defaults,n),n.method?n.method=n.method.toLowerCase():this.defaults.method?n.method=this.defaults.method.toLowerCase():n.method="get";var a=n.transitional;a!==void 0&&vT.assertOptions(a,{silentJSONParsing:Uc.transitional(Uc.boolean),forcedJSONParsing:Uc.transitional(Uc.boolean),clarifyTimeoutError:Uc.transitional(Uc.boolean)},!1);var c=[],d=!0;this.interceptors.request.forEach(function(W){typeof W.runWhen=="function"&&W.runWhen(n)===!1||(d=d&&W.synchronous,c.unshift(W.fulfilled,W.rejected))});var o=[];this.interceptors.response.forEach(function(W){o.push(W.fulfilled,W.rejected)});var v;if(!d){var x=[VA,void 0];for(Array.prototype.unshift.apply(x,c),x=x.concat(o),v=Promise.resolve(n);x.length;)v=v.then(x.shift(),x.shift());return v}for(var E=n;c.length;){var k=c.shift(),P=c.shift();try{E=k(E)}catch(T){P(T);break}}try{v=VA(E)}catch(T){return Promise.reject(T)}for(;o.length;)v=v.then(o.shift(),o.shift());return v};id.prototype.getUri=function(t){return t=Ig(this.defaults,t),X5(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};gT.forEach(["delete","get","head","options"],function(t){id.prototype[t]=function(n,a){return this.request(Ig(a||{},{method:t,url:n,data:(a||{}).data}))}});gT.forEach(["post","put","patch"],function(t){id.prototype[t]=function(n,a,c){return this.request(Ig(c||{},{method:t,url:n,data:a}))}});var Q5=id,i_,$A;function J5(){if($A)return i_;$A=1;var e=kg();function t(n){if(typeof n!="function")throw new TypeError("executor must be a function.");var a;this.promise=new Promise(function(o){a=o});var c=this;this.promise.then(function(d){if(c._listeners){var o,v=c._listeners.length;for(o=0;o<v;o++)c._listeners[o](d);c._listeners=null}}),this.promise.then=function(d){var o,v=new Promise(function(x){c.subscribe(x),o=x}).then(d);return v.cancel=function(){c.unsubscribe(o)},v},n(function(o){c.reason||(c.reason=new e(o),a(c.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.prototype.subscribe=function(a){if(this.reason){a(this.reason);return}this._listeners?this._listeners.push(a):this._listeners=[a]},t.prototype.unsubscribe=function(a){if(this._listeners){var c=this._listeners.indexOf(a);c!==-1&&this._listeners.splice(c,1)}},t.source=function(){var a,c=new t(function(o){a=o});return{token:c,cancel:a}},i_=t,i_}var o_,qA;function Y5(){return qA||(qA=1,o_=function(t){return function(a){return t.apply(null,a)}}),o_}var a_,WA;function eO(){if(WA)return a_;WA=1;var e=Po;return a_=function(n){return e.isObject(n)&&n.isAxiosError===!0},a_}var GA=Po,tO=aT,cy=Q5,rO=mT,nO=$1;function _T(e){var t=new cy(e),n=tO(cy.prototype.request,t);return GA.extend(n,cy.prototype,t),GA.extend(n,t),n.create=function(c){return _T(rO(e,c))},n}var as=_T(nO);as.Axios=cy;as.Cancel=kg();as.CancelToken=J5();as.isCancel=dT();as.VERSION=yT().version;as.all=function(t){return Promise.all(t)};as.spread=Y5();as.isAxiosError=eO();U1.exports=as;U1.exports.default=as;var iO=U1.exports,oO=iO;const aO="@sendgrid/client",sO="Twilio SendGrid NodeJS API client",lO="7.7.0",uO="Twilio SendGrid <help@twilio.com> (sendgrid.com)",cO=["Kyle Partridge <kyle.partridge@sendgrid.com>","David Tomberlin <david.tomberlin@sendgrid.com>","Swift <swift@sendgrid.com>","Brandon West <brandon.west@sendgrid.com>","Scott Motte <scott.motte@sendgrid.com>","Robert Acosta <robert.acosta@sendgrid.com>","Elmer Thomas <ethomas@twilio.com>","Adam Reis <adam@reis.nz>"],pO="MIT",hO="https://sendgrid.com",fO={type:"git",url:"git://github.com/sendgrid/sendgrid-nodejs.git"},dO={access:"public"},mO="index.js",yO={node:"6.* || 8.* || >=10.*"},gO={"@sendgrid/helpers":"^7.7.0",axios:"^0.26.0"},vO={chai:"4.2.0",nock:"^10.0.6"},_O={chai:"4.2.0"},xO=["http","rest","api","mail","sendgrid"],bO="30eebb16a51b51e6a2df1b3596044db6f5fdbe92",wO={name:aO,description:sO,version:lO,author:uO,contributors:cO,license:pO,homepage:hO,repository:fO,publishConfig:dO,main:mO,engines:yO,dependencies:gO,devDependencies:vO,resolutions:_O,tags:xO,gitHead:bO};var W1=function e(t,n,a){if(typeof t!="object"||t===null)throw new Error("Non object passed to convertKeys: "+t);if(Array.isArray(t))return t;Array.isArray(a)||(a=[]);for(const c in t)if(t.hasOwnProperty(c)){const d=n(c);typeof t[c]=="object"&&t[c]!==null&&!a.includes(c)&&!a.includes(d)&&(t[c]=e(t[c],n,a)),d!==c&&(t[d]=t[c],delete t[c])}return t},AO=function(t){if(typeof t!="string")throw new Error("String expected for conversion to snake case");return t.trim().replace(/_+|\-+/g," ").replace(/(?:^\w|[A-Z]|\b\w|\s+)/g,function(n,a){return Number(n)===0?"":a===0?n.toLowerCase():n.toUpperCase()})};const EO=W1,SO=AO;var od=function(t,n){return EO(t,SO,n)},CO=function(t){if(typeof t!="string")throw new Error("String expected for conversion to snake case");return t.trim().replace(/(\s*\-*\b\w|[A-Z])/g,function(n){return n=n.trim().toLowerCase().replace("-",""),(n[0]==="_"?"":"_")+n}).slice(1)};const kO=W1,TO=CO;var Pg=function(t,n){return kO(t,TO,n)},ad=function(t){return JSON.parse(JSON.stringify(t))};const IO={},PO=Object.freeze(Object.defineProperty({__proto__:null,default:IO},Symbol.toStringTag,{value:"Module"})),xT=MS(PO),MO=od,RO=Pg,zO=ad,LO=xT,OO=xT;let DO=class{constructor(t){t&&this.fromData(t)}fromData(t){if(typeof t!="object")throw new Error("Expecting object for Mail data");t=zO(t),t=MO(t);const{content:n,filename:a,type:c,disposition:d,contentId:o,filePath:v}=t;if(typeof n<"u"&&typeof v<"u")throw new Error("The props 'content' and 'filePath' cannot be used together.");this.setFilename(a),this.setType(c),this.setDisposition(d),this.setContentId(o),this.setContent(v?this.readFile(v):n)}readFile(t){return LO.readFileSync(OO.resolve(t))}setContent(t){if(typeof t=="string"){this.content=t;return}else if(t instanceof Buffer&&t.toString!==void 0){this.content=t.toString(),this.disposition==="attachment"&&(this.content=t.toString("base64"));return}throw new Error("`content` expected to be either Buffer or string")}setFileContent(t){if(t instanceof Buffer&&t.toString!==void 0){this.content=t.toString("base64");return}throw new Error("`content` expected to be Buffer")}setFilename(t){if(!(typeof t>"u")){if(t&&typeof t!="string")throw new Error("String expected for `filename`");this.filename=t}}setType(t){if(!(typeof t>"u")){if(typeof t!="string")throw new Error("String expected for `type`");this.type=t}}setDisposition(t){if(!(typeof t>"u")){if(typeof t!="string")throw new Error("String expected for `disposition`");this.disposition=t}}setContentId(t){if(!(typeof t>"u")){if(typeof t!="string")throw new Error("String expected for `contentId`");this.contentId=t}}toJSON(){const{content:t,filename:n,type:a,disposition:c,contentId:d}=this,o={content:t,filename:n};return typeof a<"u"&&(o.type=a),typeof c<"u"&&(o.disposition=c),typeof d<"u"&&(o.contentId=d),RO(o)}};var BO=DO,bT=function(t){if(t.indexOf("<")===-1)return["",t];let[n,a]=t.split("<");return n=n.trim(),a=a.replace(">","").trim(),[n,a]};const NO=bT;let FO=class yx{constructor(t){t&&this.fromData(t)}fromData(t){if(typeof t=="string"){const[c,d]=NO(t);t={name:c,email:d}}if(typeof t!="object")throw new Error("Expecting object or string for EmailAddress data");const{name:n,email:a}=t;this.setEmail(a),this.setName(n)}setName(t){if(!(typeof t>"u")){if(typeof t!="string")throw new Error("String expected for `name`");this.name=t}}setEmail(t){if(typeof t>"u")throw new Error("Must provide `email`");if(typeof t!="string")throw new Error("String expected for `email`");this.email=t}toJSON(){const{email:t,name:n}=this,a={email:t};return n!==""&&(a.name=n),a}static create(t){return Array.isArray(t)?t.filter(n=>!!n).map(n=>this.create(n)):t instanceof yx?t:new yx(t)}};var G1=FO,UO=function(t){return jO(t)&&!VO(t)};function jO(e){return!!e&&typeof e=="object"}function VO(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"||WO(e)}var $O=typeof Symbol=="function"&&Symbol.for,qO=$O?Symbol.for("react.element"):60103;function WO(e){return e.$$typeof===qO}function GO(e){return Array.isArray(e)?[]:{}}function $f(e,t){return t.clone!==!1&&t.isMergeableObject(e)?Sp(GO(e),e,t):e}function HO(e,t,n){return e.concat(t).map(function(a){return $f(a,n)})}function ZO(e,t){if(!t.customMerge)return Sp;var n=t.customMerge(e);return typeof n=="function"?n:Sp}function KO(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return Object.propertyIsEnumerable.call(e,t)}):[]}function HA(e){return Object.keys(e).concat(KO(e))}function wT(e,t){try{return t in e}catch{return!1}}function XO(e,t){return wT(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))}function QO(e,t,n){var a={};return n.isMergeableObject(e)&&HA(e).forEach(function(c){a[c]=$f(e[c],n)}),HA(t).forEach(function(c){XO(e,c)||(wT(e,c)&&n.isMergeableObject(t[c])?a[c]=ZO(c,n)(e[c],t[c],n):a[c]=$f(t[c],n))}),a}function Sp(e,t,n){n=n||{},n.arrayMerge=n.arrayMerge||HO,n.isMergeableObject=n.isMergeableObject||UO,n.cloneUnlessOtherwiseSpecified=$f;var a=Array.isArray(t),c=Array.isArray(e),d=a===c;return d?a?n.arrayMerge(e,t,n):QO(e,t,n):$f(t,n)}Sp.all=function(t,n){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(a,c){return Sp(a,c,n)},{})};var JO=Sp,YO=JO,AT=function e(t,n="{{",a="}}"){if(Array.isArray(t))return t.map(d=>e(d,n,a));const c={};for(const d in t)t.hasOwnProperty(d)&&(c[n+d+a]=String(t[d]));return c};const gu=G1,e4=od,t4=Pg,r4=ad,n4=YO,i4=AT;let o4=class{constructor(t){this.to=[],this.cc=[],this.bcc=[],this.headers={},this.customArgs={},this.substitutions={},this.substitutionWrappers=["{{","}}"],this.dynamicTemplateData={},t&&this.fromData(t)}fromData(t){if(typeof t!="object")throw new Error("Expecting object for Mail data");t=r4(t),t=e4(t,["substitutions","dynamicTemplateData","customArgs","headers"]);const{to:n,from:a,cc:c,bcc:d,subject:o,headers:v,customArgs:x,sendAt:E,substitutions:k,substitutionWrappers:P,dynamicTemplateData:T}=t;this.setTo(n),this.setFrom(a),this.setCc(c),this.setBcc(d),this.setSubject(o),this.setHeaders(v),this.setSubstitutions(k),this.setSubstitutionWrappers(P),this.setCustomArgs(x),this.setDynamicTemplateData(T),this.setSendAt(E)}setSubject(t){if(!(typeof t>"u")){if(typeof t!="string")throw new Error("String expected for `subject`");this.subject=t}}setSendAt(t){if(!(typeof t>"u")){if(!Number.isInteger(t))throw new Error("Integer expected for `sendAt`");this.sendAt=t}}setTo(t){typeof t>"u"||(Array.isArray(t)||(t=[t]),this.to=gu.create(t))}setFrom(t){typeof t>"u"||(this.from=gu.create(t))}addTo(t){typeof t>"u"||this.to.push(gu.create(t))}setCc(t){typeof t>"u"||(Array.isArray(t)||(t=[t]),this.cc=gu.create(t))}addCc(t){typeof t>"u"||this.cc.push(gu.create(t))}setBcc(t){typeof t>"u"||(Array.isArray(t)||(t=[t]),this.bcc=gu.create(t))}addBcc(t){typeof t>"u"||this.bcc.push(gu.create(t))}setHeaders(t){if(!(typeof t>"u")){if(typeof t!="object"||t===null)throw new Error("Object expected for `headers`");this.headers=t}}addHeader(t,n){if(typeof t!="string")throw new Error("String expected for header key");if(typeof n!="string")throw new Error("String expected for header value");this.headers[t]=n}setCustomArgs(t){if(!(typeof t>"u")){if(typeof t!="object"||t===null)throw new Error("Object expected for `customArgs`");this.customArgs=t}}addCustomArg(t,n){if(typeof t!="string")throw new Error("String expected for custom arg key");if(typeof n!="string")throw new Error("String expected for custom arg value");this.customArgs[t]=n}setSubstitutions(t){if(!(typeof t>"u")){if(typeof t!="object")throw new Error("Object expected for `substitutions`");this.substitutions=t}}addSubstitution(t,n){if(typeof t!="string")throw new Error("String expected for substitution key");if(typeof n!="string"&&typeof n!="number")throw new Error("String or Number expected for substitution value");this.substitutions[t]=n}reverseMergeSubstitutions(t){if(!(typeof t>"u"||t===null)){if(typeof t!="object")throw new Error("Object expected for `substitutions` in reverseMergeSubstitutions");this.substitutions=Object.assign({},t,this.substitutions)}}setSubstitutionWrappers(t){if(!(typeof t>"u"||t===null)){if(!Array.isArray(t)||t.length!==2)throw new Error("Array expected with two elements for `substitutionWrappers`");this.substitutionWrappers=t}}deepMergeDynamicTemplateData(t){if(!(typeof t>"u"||t===null)){if(typeof t!="object")throw new Error("Object expected for `dynamicTemplateData` in deepMergeDynamicTemplateData");this.dynamicTemplateData=n4(t,this.dynamicTemplateData)}}setDynamicTemplateData(t){if(!(typeof t>"u")){if(typeof t!="object")throw new Error("Object expected for `dynamicTemplateData`");this.dynamicTemplateData=t}}toJSON(){const{to:t,from:n,cc:a,bcc:c,subject:d,headers:o,customArgs:v,sendAt:x,substitutions:E,substitutionWrappers:k,dynamicTemplateData:P}=this,T={to:t};if(Array.isArray(a)&&a.length>0&&(T.cc=a),Array.isArray(c)&&c.length>0&&(T.bcc=c),Object.keys(o).length>0&&(T.headers=o),E&&Object.keys(E).length>0){const[W,$]=k;T.substitutions=i4(E,W,$)}return Object.keys(v).length>0&&(T.customArgs=v),P&&Object.keys(P).length>0&&(T.dynamicTemplateData=P),typeof d<"u"&&(T.subject=d),typeof x<"u"&&(T.sendAt=x),typeof n<"u"&&(T.from=n),t4(T,["substitutions","dynamicTemplateData","customArgs","headers"])}};var ET=o4,ST=function(t){return t.map(n=>typeof n=="object"&&n!==null&&typeof n.toJSON=="function"?n.toJSON():n)};const a4=`
Content with characters ', " or & may need to be escaped with three brackets
{{{ content }}}
See https://sendgrid.com/docs/for-developers/sending-email/using-handlebars/ for more information.`;var s4={DYNAMIC_TEMPLATE_CHAR_WARNING:a4};const fn=(e,t,n,a)=>{if(!(typeof e>"u"||typeof e[n]>"u")&&typeof e[n]!==a)throw new Error(`${a} expected for \`${t}.${n}\``)};var l4={validateMailSettings(e){if(typeof e!="object")throw new Error("Object expected for `mailSettings`");const{bcc:t,bypassListManagement:n,bypassSpamManagement:a,bypassBounceManagement:c,bypassUnsubscribeManagement:d,footer:o,sandboxMode:v,spamCheck:x}=e;fn(t,"bcc","enable","boolean"),fn(t,"bcc","email","string"),fn(n,"bypassListManagement","enable","boolean"),fn(a,"bypassSpamManagement","enable","boolean"),fn(c,"bypassBounceManagement","enable","boolean"),fn(d,"bypassUnsubscribeManagement","enable","boolean"),fn(o,"footer","enable","boolean"),fn(o,"footer","text","string"),fn(o,"footer","html","string"),fn(v,"sandboxMode","enable","boolean"),fn(x,"spamCheck","enable","boolean"),fn(x,"spamCheck","threshold","number"),fn(x,"spamCheck","postToUrl","string")},validateTrackingSettings(e){if(typeof e!="object")throw new Error("Object expected for `trackingSettings`");const{clickTracking:t,openTracking:n,subscriptionTracking:a,ganalytics:c}=e;fn(t,"clickTracking","enable","boolean"),fn(t,"clickTracking","enableText","boolean"),fn(n,"openTracking","enable","boolean"),fn(n,"openTracking","substitutionTag","string"),fn(a,"subscriptionTracking","enable","boolean"),fn(a,"subscriptionTracking","text","string"),fn(a,"subscriptionTracking","html","string"),fn(a,"subscriptionTracking","substitutionTag","string"),fn(c,"ganalytics","enable","boolean"),fn(c,"ganalytics","utm_source","string"),fn(c,"ganalytics","utm_medium","string"),fn(c,"ganalytics","utm_term","string"),fn(c,"ganalytics","utm_content","string"),fn(c,"ganalytics","utm_campaign","string")}};const ZA=G1,Kh=ET,u4=od,c4=Pg,p4=ad,s_=ST,{DYNAMIC_TEMPLATE_CHAR_WARNING:h4}=s4,{validateMailSettings:f4,validateTrackingSettings:d4}=l4;let m4=class gx{constructor(t){this.isDynamic=!1,this.hideWarnings=!1,this.personalizations=[],this.attachments=[],this.content=[],this.categories=[],this.headers={},this.sections={},this.customArgs={},this.trackingSettings={},this.mailSettings={},this.asm={},this.substitutions=null,this.substitutionWrappers=null,this.dynamicTemplateData=null,t&&this.fromData(t)}fromData(t){if(typeof t!="object")throw new Error("Expecting object for Mail data");t=p4(t),t=u4(t,["substitutions","dynamicTemplateData","customArgs","headers","sections"]);const{to:n,from:a,replyTo:c,cc:d,bcc:o,sendAt:v,subject:x,text:E,html:k,content:P,templateId:T,personalizations:W,attachments:$,ipPoolName:H,batchId:D,sections:U,headers:q,categories:N,category:O,customArgs:te,asm:ne,mailSettings:fe,trackingSettings:xe,substitutions:Te,substitutionWrappers:ve,dynamicTemplateData:Ee,isMultiple:Y,hideWarnings:he,replyToList:Ne}=t;this.setFrom(a),this.setReplyTo(c),this.setSubject(x),this.setSendAt(v),this.setTemplateId(T),this.setBatchId(D),this.setIpPoolName(H),this.setAttachments($),this.setContent(P),this.setSections(U),this.setHeaders(q),this.setCategories(O),this.setCategories(N),this.setCustomArgs(te),this.setAsm(ne),this.setMailSettings(fe),this.setTrackingSettings(xe),this.setHideWarnings(he),this.setReplyToList(Ne),this.isDynamic?this.setDynamicTemplateData(Ee):(this.setSubstitutions(Te),this.setSubstitutionWrappers(ve)),this.addTextContent(E),this.addHtmlContent(k),W?this.setPersonalizations(W):Y&&Array.isArray(n)?n.forEach(We=>this.addTo(We,d,o)):this.addTo(n,d,o)}setFrom(t){if(this._checkProperty("from",t,[this._checkUndefined])){if(typeof t!="string"&&typeof t.email!="string")throw new Error("String or address object expected for `from`");this.from=ZA.create(t)}}setReplyTo(t){if(this._checkProperty("replyTo",t,[this._checkUndefined])){if(typeof t!="string"&&typeof t.email!="string")throw new Error("String or address object expected for `replyTo`");this.replyTo=ZA.create(t)}}setSubject(t){this._setProperty("subject",t,"string")}setSendAt(t){this._checkProperty("sendAt",t,[this._checkUndefined,this._createCheckThatThrows(Number.isInteger,"Integer expected for `sendAt`")])&&(this.sendAt=t)}setTemplateId(t){this._setProperty("templateId",t,"string")&&t.indexOf("d-")===0&&(this.isDynamic=!0)}setBatchId(t){this._setProperty("batchId",t,"string")}setIpPoolName(t){this._setProperty("ipPoolName",t,"string")}setAsm(t){if(this._checkProperty("asm",t,[this._checkUndefined,this._createTypeCheck("object")])){if(typeof t.groupId!="number")throw new Error("Expected `asm` to include an integer in its `groupId` field");if(t.groupsToDisplay&&(!Array.isArray(t.groupsToDisplay)||!t.groupsToDisplay.every(n=>typeof n=="number")))throw new Error("Array of integers expected for `asm.groupsToDisplay`");this.asm=t}}setPersonalizations(t){if(this._doArrayCheck("personalizations",t)){if(!t.every(n=>typeof n=="object"))throw new Error("Array of objects expected for `personalizations`");this.personalizations=[],t.forEach(n=>this.addPersonalization(n))}}addPersonalization(t){this.isDynamic&&t.substitutions?delete t.substitutions:!this.isDynamic&&t.dynamicTemplateData&&delete t.dynamicTemplateData,t instanceof Kh||(t=new Kh(t)),this.isDynamic?this.applyDynamicTemplateData(t):this.applySubstitutions(t),this.personalizations.push(t)}addTo(t,n,a){if(typeof t>"u"&&typeof n>"u"&&typeof a>"u")throw new Error("Provide at least one of to, cc or bcc");this.addPersonalization(new Kh({to:t,cc:n,bcc:a}))}setSubstitutions(t){this._setProperty("substitutions",t,"object")}setSubstitutionWrappers(t){let n=(a,c)=>{if(!Array.isArray(c)||c.length!==2)throw new Error("Array expected with two elements for `"+a+"`")};this._checkProperty("substitutionWrappers",t,[this._checkUndefined,n])&&(this.substitutionWrappers=t)}applySubstitutions(t){t instanceof Kh&&(t.reverseMergeSubstitutions(this.substitutions),t.setSubstitutionWrappers(this.substitutionWrappers))}applyDynamicTemplateData(t){t instanceof Kh&&t.deepMergeDynamicTemplateData(this.dynamicTemplateData)}setDynamicTemplateData(t){if(!(typeof t>"u")){if(typeof t!="object")throw new Error("Object expected for `dynamicTemplateData`");this.hideWarnings||Object.values(t).forEach(n=>{/['"&]/.test(n)&&console.warn(h4)}),this.dynamicTemplateData=t}}setContent(t){if(this._doArrayCheck("content",t)){if(!t.every(n=>typeof n=="object"))throw new Error("Expected each entry in `content` to be an object");if(!t.every(n=>typeof n.type=="string"))throw new Error("Expected each `content` entry to contain a `type` string");if(!t.every(n=>typeof n.value=="string"))throw new Error("Expected each `content` entry to contain a `value` string");this.content=t}}addContent(t){this._checkProperty("content",t,[this._createTypeCheck("object")])&&this.content.push(t)}addTextContent(t){this._checkProperty("text",t,[this._checkUndefined,this._createTypeCheck("string")])&&this.addContent({value:t,type:"text/plain"})}addHtmlContent(t){this._checkProperty("html",t,[this._checkUndefined,this._createTypeCheck("string")])&&this.addContent({value:t,type:"text/html"})}setAttachments(t){if(this._doArrayCheck("attachments",t)){if(!t.every(n=>typeof n.content=="string"))throw new Error("Expected each attachment to contain a `content` string");if(!t.every(n=>typeof n.filename=="string"))throw new Error("Expected each attachment to contain a `filename` string");if(!t.every(n=>!n.type||typeof n.type=="string"))throw new Error("Expected the attachment's `type` field to be a string");if(!t.every(n=>!n.disposition||typeof n.disposition=="string"))throw new Error("Expected the attachment's `disposition` field to be a string");this.attachments=t}}addAttachment(t){this._checkProperty("attachment",t,[this._checkUndefined,this._createTypeCheck("object")])&&this.attachments.push(t)}setCategories(t){let n=(a,c)=>{if(!Array.isArray(c)||!c.every(d=>typeof d=="string"))throw new Error("Array of strings expected for `"+a+"`")};typeof t=="string"&&(t=[t]),this._checkProperty("categories",t,[this._checkUndefined,n])&&(this.categories=t)}addCategory(t){this._checkProperty("category",t,[this._createTypeCheck("string")])&&this.categories.push(t)}setHeaders(t){this._setProperty("headers",t,"object")}addHeader(t,n){this._checkProperty("key",t,[this._createTypeCheck("string")])&&this._checkProperty("value",n,[this._createTypeCheck("string")])&&(this.headers[t]=n)}setSections(t){this._setProperty("sections",t,"object")}setCustomArgs(t){this._setProperty("customArgs",t,"object")}setTrackingSettings(t){typeof t>"u"||(d4(t),this.trackingSettings=t)}setMailSettings(t){typeof t>"u"||(f4(t),this.mailSettings=t)}setHideWarnings(t){if(!(typeof t>"u")){if(typeof t!="boolean")throw new Error("Boolean expected for `hideWarnings`");this.hideWarnings=t}}toJSON(){const{from:t,replyTo:n,sendAt:a,subject:c,content:d,templateId:o,personalizations:v,attachments:x,ipPoolName:E,batchId:k,asm:P,sections:T,headers:W,categories:$,customArgs:H,mailSettings:D,trackingSettings:U,replyToList:q}=this,N={from:t,subject:c,personalizations:s_(v)};return Array.isArray(x)&&x.length>0&&(N.attachments=s_(x)),Array.isArray($)&&$.length>0&&(N.categories=$.filter(O=>O!=="")),Array.isArray(d)&&d.length>0&&(N.content=s_(d)),Object.keys(W).length>0&&(N.headers=W),Object.keys(D).length>0&&(N.mailSettings=D),Object.keys(U).length>0&&(N.trackingSettings=U),Object.keys(H).length>0&&(N.customArgs=H),Object.keys(T).length>0&&(N.sections=T),Object.keys(P).length>0&&(N.asm=P),typeof n<"u"&&(N.replyTo=n),typeof a<"u"&&(N.sendAt=a),typeof k<"u"&&(N.batchId=k),typeof o<"u"&&(N.templateId=o),typeof E<"u"&&(N.ipPoolName=E),typeof q<"u"&&(N.replyToList=q),c4(N,["substitutions","dynamicTemplateData","customArgs","headers","sections"])}static create(t){return Array.isArray(t)?t.filter(n=>!!n).map(n=>this.create(n)):t instanceof gx?t:new gx(t)}_checkProperty(t,n,a){return!a.some(c=>c(t,n))}_setProperty(t,n,a){let c=this._checkProperty(t,n,[this._checkUndefined,this._createTypeCheck(a)]);return c&&(this[t]=n),c}_checkUndefined(t,n){return typeof n>"u"}_createTypeCheck(t){return(n,a)=>{if(typeof a!==t)throw new Error(t+" expected for `"+n+"`")}}_createCheckThatThrows(t,n){return(a,c)=>{if(!t(c))throw new Error(n)}}_setArrayProperty(t,n){this._doArrayCheck(t,n)&&(this[t]=n)}_doArrayCheck(t,n){return this._checkProperty(t,n,[this._checkUndefined,this._createCheckThatThrows(Array.isArray,"Array expected for`"+t+"`")])}setReplyToList(t){if(this._doArrayCheck("replyToList",t)&&t.length){if(!t.every(n=>n&&typeof n.email=="string"))throw new Error("Expected each replyTo to contain an `email` string");this.replyToList=t}}};var y4=m4;let g4=class{constructor(t,n,a){this.statusCode=t,this.body=n,this.headers=a}toString(){return"HTTP "+this.statusCode+" "+this.body}};var v4=g4;let _4=class extends Error{constructor(t){super();const{headers:n,status:a,statusText:c,data:d}=t;this.code=a,this.message=c,this.response={headers:n,body:d},this.stack||Error.captureStackTrace(this,this.constructor);const o=new RegExp(process.cwd()+"/","gi");this.stack=this.stack.replace(o,"")}toString(){const{body:t}=this.response;let n=`${this.message} (${this.code})`;return t&&Array.isArray(t.errors)&&t.errors.forEach(a=>{const c=a.message,d=a.field,o=a.help;n+=`
  ${c}
    ${d}
    ${o}`}),n}toJSON(){const{message:t,code:n,response:a}=this;return{message:t,code:n,response:a}}};var x4=_4;const b4=od,w4=ad,A4=["day","week","month"],E4=["us","ca"],Fm=["desc","asc"];let S4=class{constructor(t){this.startDate=null,this.endDate=null,this.aggregatedBy=null,t&&this.fromData(t)}fromData(t){if(typeof t!="object")throw new Error("Expecting object for Statistics data");t=w4(t),t=b4(t,["substitutions","customArgs"]);const{startDate:n,endDate:a,aggregatedBy:c}=t;this.setStartDate(n),this.setEndDate(a),this.setAggregatedBy(c)}setStartDate(t){if(typeof t>"u")throw new Error("Date expected for `startDate`");if(new Date(t)==="Invalid Date"||isNaN(new Date(t)))throw new Error("Date expected for `startDate`");console.log(t),this.startDate=new Date(t).toISOString().slice(0,10)}setEndDate(t){if(typeof t>"u"){this.endDate=new Date().toISOString().slice(0,10);return}if(new Date(t)==="Invalid Date"||isNaN(new Date(t)))throw new Error("Date expected for `endDate`");this.endDate=new Date(t).toISOString().slice(0,10)}setAggregatedBy(t){if(!(typeof t>"u"))if(typeof t=="string"&&A4.includes(t.toLowerCase()))this.aggregatedBy=t;else throw new Error("Incorrect value for `aggregatedBy`")}getGlobal(){const{startDate:t,endDate:n,aggregatedBy:a}=this;return{startDate:t,endDate:n,aggregatedBy:a}}getAdvanced(t){const n=this.getGlobal();return typeof t>"u"||typeof t=="string"&&E4.includes(t.toLowerCase())&&(n.country=t),n}getAdvancedMailboxProviders(t){const n=this.getGlobal();if(typeof t>"u")return n;if(Array.isArray(t)&&t.some(a=>typeof a!="string"))throw new Error("Array of strings expected for `mailboxProviders`");return n.mailBoxProviders=t,n}getAdvancedBrowsers(t){const n=this.getGlobal();if(typeof t>"u")return n;if(Array.isArray(t)&&t.some(a=>typeof a!="string"))throw new Error("Array of strings expected for `browsers`");return n.browsers=t,n}getCategories(t){if(typeof t>"u")throw new Error("Array of strings expected for `categories`");if(!this._isValidArrayOfStrings(t))throw new Error("Array of strings expected for `categories`");const n=this.getGlobal();return n.categories=t,n}getSubuser(t){if(typeof t>"u")throw new Error("Array of strings expected for `subusers`");if(!this._isValidArrayOfStrings(t))throw new Error("Array of strings expected for `subusers`");const n=this.getGlobal();return n.subusers=t,n}getSubuserSum(t="delivered",n=Fm[0],a=5,c=0){if(typeof t!="string")throw new Error("string expected for `sortByMetric`");if(!Fm.includes(n.toLowerCase()))throw new Error("desc or asc expected for `sortByDirection`");if(typeof a!="number")throw new Error("number expected for `limit`");if(typeof c!="number")throw new Error("number expected for `offset`");const d=this.getGlobal();return d.sortByMetric=t,d.sortByDirection=n,d.limit=a,d.offset=c,d}getSubuserMonthly(t="delivered",n=Fm[0],a=5,c=0){if(typeof t!="string")throw new Error("string expected for `sortByMetric`");if(!Fm.includes(n.toLowerCase()))throw new Error("desc or asc expected for `sortByDirection`");if(typeof a!="number")throw new Error("number expected for `limit`");if(typeof c!="number")throw new Error("number expected for `offset`");const d=this.getGlobal();return d.sortByMetric=t,d.sortByDirection=n,d.limit=a,d.offset=c,d}_isValidArrayOfStrings(t){return!(!Array.isArray(t)||t.length<1||t.some(n=>typeof n!="string"))}};var C4=S4;const k4=BO,T4=G1,I4=y4,P4=ET,M4=v4,R4=x4,z4=C4;var L4={Attachment:k4,EmailAddress:T4,Mail:I4,Personalization:P4,Response:M4,ResponseError:R4,Statistics:z4},O4=function(t,n){if(typeof t!="object"||t===null)throw new Error("Not an object provided for base");if(typeof n!="object"||n===null)throw new Error("Not an object provided for data");const a=Object.assign({},t);for(const c in n)n.hasOwnProperty(c)&&(n[c]&&Array.isArray(n[c])?a[c]=n[c]:n[c]&&typeof n[c]=="object"?a[c]=Object.assign({},n[c]):n[c]&&(a[c]=n[c]));return a};const D4=ST,B4=W1,N4=ad,F4=O4,U4=bT,j4=od,V4=Pg,$4=AT;var q4={arrayToJSON:D4,convertKeys:B4,deepClone:N4,mergeData:F4,splitNameEmail:U4,toCamelCase:j4,toSnakeCase:V4,wrapSubstitutions:$4};const W4=L4,G4=q4;var CT={classes:W4,helpers:G4};const H4=oO,Z4=wO,{helpers:{mergeData:KA},classes:{Response:K4,ResponseError:X4}}=CT,XA="SG.",QA="https://api.sendgrid.com/",Q4="https://email.twilio.com/";let J4=class{constructor(){this.auth="",this.impersonateSubuser="",this.defaultHeaders={Accept:"application/json","Content-Type":"application/json","User-Agent":"sendgrid/"+Z4.version+";nodejs"},this.defaultRequest={baseUrl:QA,url:"",method:"GET",headers:{},maxContentLength:1/0,maxBodyLength:1/0}}setApiKey(t){this.auth="Bearer "+t,this.setDefaultRequest("baseUrl",QA),this.isValidApiKey(t)||console.warn(`API key does not start with "${XA}".`)}setTwilioEmailAuth(t,n){const a=Buffer.from(t+":"+n).toString("base64");this.auth="Basic "+a,this.setDefaultRequest("baseUrl",Q4),this.isValidTwilioAuth(t,n)||console.warn("Twilio Email credentials must be non-empty strings.")}isValidApiKey(t){return this.isString(t)&&t.trim().startsWith(XA)}isValidTwilioAuth(t,n){return this.isString(t)&&t&&this.isString(n)&&n}isString(t){return typeof t=="string"||t instanceof String}setImpersonateSubuser(t){this.impersonateSubuser=t}setDefaultHeader(t,n){return t!==null&&typeof t=="object"?(Object.assign(this.defaultHeaders,t),this):(this.defaultHeaders[t]=n,this)}setDefaultRequest(t,n){return t!==null&&typeof t=="object"?(Object.assign(this.defaultRequest,t),this):(this.defaultRequest[t]=n,this)}createHeaders(t){const n=KA(this.defaultHeaders,t);return typeof n.Authorization>"u"&&this.auth&&(n.Authorization=this.auth),this.impersonateSubuser&&(n["On-Behalf-Of"]=this.impersonateSubuser),n}createRequest(t){let n={url:t.uri||t.url,baseUrl:t.baseUrl,method:t.method,data:t.body,params:t.qs,headers:t.headers};return n=KA(this.defaultRequest,n),n.headers=this.createHeaders(n.headers),n.baseURL=n.baseUrl,delete n.baseUrl,n}request(t,n){t=this.createRequest(t);const a=new Promise((c,d)=>{H4(t).then(o=>c([new K4(o.status,o.data,o.headers),o.data])).catch(o=>o.response&&o.response.status>=400?d(new X4(o.response)):d(o))});if(n&&typeof n!="function")throw new Error("Callback passed is not a function.");return n?a.then(c=>n(null,c)).catch(c=>n(c,null)):a}};var kT=J4;const Y4=kT;var eD=new Y4;const tD=eD,rD=kT;F1.exports=tD;F1.exports.Client=rD;var nD=F1.exports;const{Client:iD}=nD,{classes:{Mail:oD}}=CT;let aD=class{constructor(){this.setClient(new iD),this.setSubstitutionWrappers("{{","}}"),this.secretRules=[]}setClient(t){return this.client=t,this}setApiKey(t){return this.client.setApiKey(t),this}setTwilioEmailAuth(t,n){this.client.setTwilioEmailAuth(t,n)}setTimeout(t){typeof t>"u"||this.client.setDefaultRequest("timeout",t)}setSubstitutionWrappers(t,n){if(typeof t>"u"||typeof n>"u")throw new Error("Must provide both left and right side wrappers");return Array.isArray(this.substitutionWrappers)||(this.substitutionWrappers=[]),this.substitutionWrappers[0]=t,this.substitutionWrappers[1]=n,this}setSecretRules(t){t instanceof Array||(t=[t]);const n=t.map(function(a){const c=typeof a;if(c==="string")return{pattern:new RegExp(a)};if(c==="object"){a instanceof RegExp?a={pattern:a}:a.hasOwnProperty("pattern")&&typeof a.pattern=="string"&&(a.pattern=new RegExp(a.pattern));try{return a.pattern.test(""),a}catch{}}});this.secretRules=n.filter(function(a){return a})}filterSecrets(t){if(typeof t=="object"&&!t.hasOwnProperty("content"))return;const n=this;t.content.forEach(function(a){n.secretRules.forEach(function(c){if(c.hasOwnProperty("pattern")&&!c.pattern.test(a.value))return;let d=`The pattern '${c.pattern}'`;throw c.name&&(d+=`identified by '${c.name}'`),d+=" was found in the Mail content!",new Error(d)})})}send(t,n=!1,a){if(typeof n=="function"&&(a=n,n=!1),Array.isArray(t)){const c=Promise.all(t.map(d=>this.send(d,n)));return a&&c.then(d=>a(null,d)).catch(d=>a(d,null)),c}try{typeof t.isMultiple>"u"&&(t.isMultiple=n),typeof t.substitutionWrappers>"u"&&(t.substitutionWrappers=this.substitutionWrappers);const c=oD.create(t),d=c.toJSON();this.filterSecrets(d);const o={method:"POST",url:"/v3/mail/send",headers:c.headers,body:d};return this.client.request(o,a)}catch(c){return a&&a(c,null),Promise.reject(c)}}sendMultiple(t,n){return this.send(t,!0,n)}};var TT=aD;const sD=TT;var lD=new sD;const uD=lD,cD=TT;N1.exports=uD;N1.exports.MailService=cD;var pD=N1.exports;const hD=Qf(pD);function Ae(){return Ae=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ae.apply(this,arguments)}function Bs(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function IT(e){if(!Bs(e))return e;const t={};return Object.keys(e).forEach(n=>{t[n]=IT(e[n])}),t}function Co(e,t,n={clone:!0}){const a=n.clone?Ae({},e):e;return Bs(e)&&Bs(t)&&Object.keys(t).forEach(c=>{c!=="__proto__"&&(Bs(t[c])&&c in e&&Bs(e[c])?a[c]=Co(e[c],t[c],n):n.clone?a[c]=Bs(t[c])?IT(t[c]):t[c]:a[c]=t[c])}),a}function Ol(e){let t="https://mui.com/production-error/?code="+e;for(let n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}function Hr(e){if(typeof e!="string")throw new Error(Ol(7));return e.charAt(0).toUpperCase()+e.slice(1)}function JA(...e){return e.reduce((t,n)=>n==null?t:function(...c){t.apply(this,c),n.apply(this,c)},()=>{})}function Mg(e,t=166){let n;function a(...c){const d=()=>{e.apply(this,c)};clearTimeout(n),n=setTimeout(d,t)}return a.clear=()=>{clearTimeout(n)},a}function py(e,t){var n,a;return ee.isValidElement(e)&&t.indexOf((n=e.type.muiName)!=null?n:(a=e.type)==null||(a=a._payload)==null||(a=a.value)==null?void 0:a.muiName)!==-1}function ko(e){return e&&e.ownerDocument||document}function $s(e){return ko(e).defaultView||window}function vx(e,t){typeof e=="function"?e(t):e&&(e.current=t)}const fD=typeof window<"u"?ee.useLayoutEffect:ee.useEffect,ns=fD;let YA=0;function dD(e){const[t,n]=ee.useState(e),a=e||t;return ee.useEffect(()=>{t==null&&(YA+=1,n(`mui-${YA}`))},[t]),a}const eE=C_["useId".toString()];function mD(e){if(eE!==void 0){const t=eE();return e??t}return dD(e)}function tE({controlled:e,default:t,name:n,state:a="value"}){const{current:c}=ee.useRef(e!==void 0),[d,o]=ee.useState(t),v=c?e:d,x=ee.useCallback(E=>{c||o(E)},[]);return[v,x]}function Us(e){const t=ee.useRef(e);return ns(()=>{t.current=e}),ee.useRef((...n)=>(0,t.current)(...n)).current}function eo(...e){return ee.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(n=>{vx(n,t)})},e)}const rE={};function yD(e,t){const n=ee.useRef(rE);return n.current===rE&&(n.current=e(t)),n}const gD=[];function vD(e){ee.useEffect(e,gD)}class Rg{constructor(){this.currentId=0,this.clear=()=>{this.currentId!==0&&(clearTimeout(this.currentId),this.currentId=0)},this.disposeEffect=()=>this.clear}static create(){return new Rg}start(t,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=0,n()},t)}}function PT(){const e=yD(Rg.create).current;return vD(e.disposeEffect),e}let zg=!0,_x=!1;const _D=new Rg,xD={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function bD(e){const{type:t,tagName:n}=e;return!!(n==="INPUT"&&xD[t]&&!e.readOnly||n==="TEXTAREA"&&!e.readOnly||e.isContentEditable)}function wD(e){e.metaKey||e.altKey||e.ctrlKey||(zg=!0)}function l_(){zg=!1}function AD(){this.visibilityState==="hidden"&&_x&&(zg=!0)}function ED(e){e.addEventListener("keydown",wD,!0),e.addEventListener("mousedown",l_,!0),e.addEventListener("pointerdown",l_,!0),e.addEventListener("touchstart",l_,!0),e.addEventListener("visibilitychange",AD,!0)}function SD(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch{}return zg||bD(t)}function CD(){const e=ee.useCallback(c=>{c!=null&&ED(c.ownerDocument)},[]),t=ee.useRef(!1);function n(){return t.current?(_x=!0,_D.start(100,()=>{_x=!1}),t.current=!1,!0):!1}function a(c){return SD(c)?(t.current=!0,!0):!1}return{isFocusVisibleRef:t,onFocus:a,onBlur:n,ref:e}}function MT(e){const t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}let jc;function RT(){if(jc)return jc;const e=document.createElement("div"),t=document.createElement("div");return t.style.width="10px",t.style.height="1px",e.appendChild(t),e.dir="rtl",e.style.fontSize="14px",e.style.width="4px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.overflow="scroll",document.body.appendChild(e),jc="reverse",e.scrollLeft>0?jc="default":(e.scrollLeft=1,e.scrollLeft===0&&(jc="negative")),document.body.removeChild(e),jc}function kD(e,t){const n=e.scrollLeft;if(t!=="rtl")return n;switch(RT()){case"negative":return e.scrollWidth-e.clientWidth+n;case"reverse":return e.scrollWidth-e.clientWidth-n;default:return n}}function H1(e,t){const n=Ae({},t);return Object.keys(e).forEach(a=>{if(a.toString().match(/^(components|slots)$/))n[a]=Ae({},e[a],n[a]);else if(a.toString().match(/^(componentsProps|slotProps)$/)){const c=e[a]||{},d=t[a];n[a]={},!d||!Object.keys(d)?n[a]=c:!c||!Object.keys(c)?n[a]=d:(n[a]=Ae({},d),Object.keys(c).forEach(o=>{n[a][o]=H1(c[o],d[o])}))}else n[a]===void 0&&(n[a]=e[a])}),n}function Un(e,t,n=void 0){const a={};return Object.keys(e).forEach(c=>{a[c]=e[c].reduce((d,o)=>{if(o){const v=t(o);v!==""&&d.push(v),n&&n[o]&&d.push(n[o])}return d},[]).join(" ")}),a}const nE=e=>e,TD=()=>{let e=nE;return{configure(t){e=t},generate(t){return e(t)},reset(){e=nE}}},ID=TD(),zT=ID,PD={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Ln(e,t,n="Mui"){const a=PD[t];return a?`${n}-${a}`:`${zT.generate(e)}-${t}`}function sn(e,t,n="Mui"){const a={};return t.forEach(c=>{a[c]=Ln(e,c,n)}),a}function MD(e,t=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,n))}function Cp(e){return typeof e=="string"}function RD(e,t,n){return e===void 0||Cp(e)?t:Ae({},t,{ownerState:Ae({},t.ownerState,n)})}var LT={exports:{}},sd={};/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zD=ee,OT=60103;sd.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var iE=Symbol.for;OT=iE("react.element"),sd.Fragment=iE("react.fragment")}var LD=zD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,OD=Object.prototype.hasOwnProperty,DD={key:!0,ref:!0,__self:!0,__source:!0};function DT(e,t,n){var a,c={},d=null,o=null;n!==void 0&&(d=""+n),t.key!==void 0&&(d=""+t.key),t.ref!==void 0&&(o=t.ref);for(a in t)OD.call(t,a)&&!DD.hasOwnProperty(a)&&(c[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps,t)c[a]===void 0&&(c[a]=t[a]);return{$$typeof:OT,type:e,key:d,ref:o,props:c,_owner:LD.current}}sd.jsx=DT;sd.jsxs=DT;LT.exports=sd;var rt=LT.exports;function BT(e,t=[]){if(e===void 0)return{};const n={};return Object.keys(e).filter(a=>a.match(/^on[A-Z]/)&&typeof e[a]=="function"&&!t.includes(a)).forEach(a=>{n[a]=e[a]}),n}function BD(e,t,n){return typeof e=="function"?e(t,n):e}function nr(e,t){if(e==null)return{};var n={},a=Object.keys(e),c,d;for(d=0;d<a.length;d++)c=a[d],!(t.indexOf(c)>=0)&&(n[c]=e[c]);return n}function NT(e){var t,n,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var c=e.length;for(t=0;t<c;t++)e[t]&&(n=NT(e[t]))&&(a&&(a+=" "),a+=n)}else for(n in e)e[n]&&(a&&(a+=" "),a+=n);return a}function fr(){for(var e,t,n=0,a="",c=arguments.length;n<c;n++)(e=arguments[n])&&(t=NT(e))&&(a&&(a+=" "),a+=t);return a}function oE(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(n=>!(n.match(/^on[A-Z]/)&&typeof e[n]=="function")).forEach(n=>{t[n]=e[n]}),t}function ND(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:a,externalForwardedProps:c,className:d}=e;if(!t){const W=fr(n==null?void 0:n.className,d,c==null?void 0:c.className,a==null?void 0:a.className),$=Ae({},n==null?void 0:n.style,c==null?void 0:c.style,a==null?void 0:a.style),H=Ae({},n,c,a);return W.length>0&&(H.className=W),Object.keys($).length>0&&(H.style=$),{props:H,internalRef:void 0}}const o=BT(Ae({},c,a)),v=oE(a),x=oE(c),E=t(o),k=fr(E==null?void 0:E.className,n==null?void 0:n.className,d,c==null?void 0:c.className,a==null?void 0:a.className),P=Ae({},E==null?void 0:E.style,n==null?void 0:n.style,c==null?void 0:c.style,a==null?void 0:a.style),T=Ae({},E,n,x,v);return k.length>0&&(T.className=k),Object.keys(P).length>0&&(T.style=P),{props:T,internalRef:E.ref}}const FD=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function is(e){var t;const{elementType:n,externalSlotProps:a,ownerState:c,skipResolvingSlotProps:d=!1}=e,o=nr(e,FD),v=d?{}:BD(a,c),{props:x,internalRef:E}=ND(Ae({},o,{externalSlotProps:v})),k=eo(E,v==null?void 0:v.ref,(t=e.additionalProps)==null?void 0:t.ref);return RD(n,Ae({},x,{ref:k}),c)}function UD(e){const t=ko(e);return t.body===e?$s(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function Cf(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function aE(e){return parseInt($s(e).getComputedStyle(e).paddingRight,10)||0}function jD(e){const n=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(e.tagName)!==-1,a=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return n||a}function sE(e,t,n,a,c){const d=[t,n,...a];[].forEach.call(e.children,o=>{const v=d.indexOf(o)===-1,x=!jD(o);v&&x&&Cf(o,c)})}function u_(e,t){let n=-1;return e.some((a,c)=>t(a)?(n=c,!0):!1),n}function VD(e,t){const n=[],a=e.container;if(!t.disableScrollLock){if(UD(a)){const o=MT(ko(a));n.push({value:a.style.paddingRight,property:"padding-right",el:a}),a.style.paddingRight=`${aE(a)+o}px`;const v=ko(a).querySelectorAll(".mui-fixed");[].forEach.call(v,x=>{n.push({value:x.style.paddingRight,property:"padding-right",el:x}),x.style.paddingRight=`${aE(x)+o}px`})}let d;if(a.parentNode instanceof DocumentFragment)d=ko(a).body;else{const o=a.parentElement,v=$s(a);d=(o==null?void 0:o.nodeName)==="HTML"&&v.getComputedStyle(o).overflowY==="scroll"?o:a}n.push({value:d.style.overflow,property:"overflow",el:d},{value:d.style.overflowX,property:"overflow-x",el:d},{value:d.style.overflowY,property:"overflow-y",el:d}),d.style.overflow="hidden"}return()=>{n.forEach(({value:d,el:o,property:v})=>{d?o.style.setProperty(v,d):o.style.removeProperty(v)})}}function $D(e){const t=[];return[].forEach.call(e.children,n=>{n.getAttribute("aria-hidden")==="true"&&t.push(n)}),t}class qD{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(t,n){let a=this.modals.indexOf(t);if(a!==-1)return a;a=this.modals.length,this.modals.push(t),t.modalRef&&Cf(t.modalRef,!1);const c=$D(n);sE(n,t.mount,t.modalRef,c,!0);const d=u_(this.containers,o=>o.container===n);return d!==-1?(this.containers[d].modals.push(t),a):(this.containers.push({modals:[t],container:n,restore:null,hiddenSiblings:c}),a)}mount(t,n){const a=u_(this.containers,d=>d.modals.indexOf(t)!==-1),c=this.containers[a];c.restore||(c.restore=VD(c,n))}remove(t,n=!0){const a=this.modals.indexOf(t);if(a===-1)return a;const c=u_(this.containers,o=>o.modals.indexOf(t)!==-1),d=this.containers[c];if(d.modals.splice(d.modals.indexOf(t),1),this.modals.splice(a,1),d.modals.length===0)d.restore&&d.restore(),t.modalRef&&Cf(t.modalRef,n),sE(d.container,t.mount,t.modalRef,d.hiddenSiblings,!1),this.containers.splice(c,1);else{const o=d.modals[d.modals.length-1];o.modalRef&&Cf(o.modalRef,!1)}return a}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}function WD(e){return typeof e=="function"?e():e}function GD(e){return e?e.props.hasOwnProperty("in"):!1}const HD=new qD;function ZD(e){const{container:t,disableEscapeKeyDown:n=!1,disableScrollLock:a=!1,manager:c=HD,closeAfterTransition:d=!1,onTransitionEnter:o,onTransitionExited:v,children:x,onClose:E,open:k,rootRef:P}=e,T=ee.useRef({}),W=ee.useRef(null),$=ee.useRef(null),H=eo($,P),[D,U]=ee.useState(!k),q=GD(x);let N=!0;(e["aria-hidden"]==="false"||e["aria-hidden"]===!1)&&(N=!1);const O=()=>ko(W.current),te=()=>(T.current.modalRef=$.current,T.current.mount=W.current,T.current),ne=()=>{c.mount(te(),{disableScrollLock:a}),$.current&&($.current.scrollTop=0)},fe=Us(()=>{const we=WD(t)||O().body;c.add(te(),we),$.current&&ne()}),xe=ee.useCallback(()=>c.isTopModal(te()),[c]),Te=Us(we=>{W.current=we,we&&(k&&xe()?ne():$.current&&Cf($.current,N))}),ve=ee.useCallback(()=>{c.remove(te(),N)},[N,c]);ee.useEffect(()=>()=>{ve()},[ve]),ee.useEffect(()=>{k?fe():(!q||!d)&&ve()},[k,ve,q,d,fe]);const Ee=we=>be=>{var $e;($e=we.onKeyDown)==null||$e.call(we,be),!(be.key!=="Escape"||be.which===229||!xe())&&(n||(be.stopPropagation(),E&&E(be,"escapeKeyDown")))},Y=we=>be=>{var $e;($e=we.onClick)==null||$e.call(we,be),be.target===be.currentTarget&&E&&E(be,"backdropClick")};return{getRootProps:(we={})=>{const be=BT(e);delete be.onTransitionEnter,delete be.onTransitionExited;const $e=Ae({},be,we);return Ae({role:"presentation"},$e,{onKeyDown:Ee($e),ref:H})},getBackdropProps:(we={})=>{const be=we;return Ae({"aria-hidden":!0},be,{onClick:Y(be),open:k})},getTransitionProps:()=>{const we=()=>{U(!1),o&&o()},be=()=>{U(!0),v&&v(),d&&ve()};return{onEnter:JA(we,x==null?void 0:x.props.onEnter),onExited:JA(be,x==null?void 0:x.props.onExited)}},rootRef:H,portalRef:Te,isTopModal:xe,exited:D,hasTransition:q}}const KD=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function XD(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?e.contentEditable==="true"||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:t}function QD(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;const t=a=>e.ownerDocument.querySelector(`input[type="radio"]${a}`);let n=t(`[name="${e.name}"]:checked`);return n||(n=t(`[name="${e.name}"]`)),n!==e}function JD(e){return!(e.disabled||e.tagName==="INPUT"&&e.type==="hidden"||QD(e))}function YD(e){const t=[],n=[];return Array.from(e.querySelectorAll(KD)).forEach((a,c)=>{const d=XD(a);d===-1||!JD(a)||(d===0?t.push(a):n.push({documentOrder:c,tabIndex:d,node:a}))}),n.sort((a,c)=>a.tabIndex===c.tabIndex?a.documentOrder-c.documentOrder:a.tabIndex-c.tabIndex).map(a=>a.node).concat(t)}function eB(){return!0}function tB(e){const{children:t,disableAutoFocus:n=!1,disableEnforceFocus:a=!1,disableRestoreFocus:c=!1,getTabbable:d=YD,isEnabled:o=eB,open:v}=e,x=ee.useRef(!1),E=ee.useRef(null),k=ee.useRef(null),P=ee.useRef(null),T=ee.useRef(null),W=ee.useRef(!1),$=ee.useRef(null),H=eo(t.ref,$),D=ee.useRef(null);ee.useEffect(()=>{!v||!$.current||(W.current=!n)},[n,v]),ee.useEffect(()=>{if(!v||!$.current)return;const N=ko($.current);return $.current.contains(N.activeElement)||($.current.hasAttribute("tabIndex")||$.current.setAttribute("tabIndex","-1"),W.current&&$.current.focus()),()=>{c||(P.current&&P.current.focus&&(x.current=!0,P.current.focus()),P.current=null)}},[v]),ee.useEffect(()=>{if(!v||!$.current)return;const N=ko($.current),O=fe=>{D.current=fe,!(a||!o()||fe.key!=="Tab")&&N.activeElement===$.current&&fe.shiftKey&&(x.current=!0,k.current&&k.current.focus())},te=()=>{const fe=$.current;if(fe===null)return;if(!N.hasFocus()||!o()||x.current){x.current=!1;return}if(fe.contains(N.activeElement)||a&&N.activeElement!==E.current&&N.activeElement!==k.current)return;if(N.activeElement!==T.current)T.current=null;else if(T.current!==null)return;if(!W.current)return;let xe=[];if((N.activeElement===E.current||N.activeElement===k.current)&&(xe=d($.current)),xe.length>0){var Te,ve;const Ee=!!((Te=D.current)!=null&&Te.shiftKey&&((ve=D.current)==null?void 0:ve.key)==="Tab"),Y=xe[0],he=xe[xe.length-1];typeof Y!="string"&&typeof he!="string"&&(Ee?he.focus():Y.focus())}else fe.focus()};N.addEventListener("focusin",te),N.addEventListener("keydown",O,!0);const ne=setInterval(()=>{N.activeElement&&N.activeElement.tagName==="BODY"&&te()},50);return()=>{clearInterval(ne),N.removeEventListener("focusin",te),N.removeEventListener("keydown",O,!0)}},[n,a,c,o,v,d]);const U=N=>{P.current===null&&(P.current=N.relatedTarget),W.current=!0,T.current=N.target;const O=t.props.onFocus;O&&O(N)},q=N=>{P.current===null&&(P.current=N.relatedTarget),W.current=!0};return rt.jsxs(ee.Fragment,{children:[rt.jsx("div",{tabIndex:v?0:-1,onFocus:q,ref:E,"data-testid":"sentinelStart"}),ee.cloneElement(t,{ref:H,onFocus:U}),rt.jsx("div",{tabIndex:v?0:-1,onFocus:q,ref:k,"data-testid":"sentinelEnd"})]})}function rB(e){return typeof e=="function"?e():e}const nB=ee.forwardRef(function(t,n){const{children:a,container:c,disablePortal:d=!1}=t,[o,v]=ee.useState(null),x=eo(ee.isValidElement(a)?a.ref:null,n);if(ns(()=>{d||v(rB(c)||document.body)},[c,d]),ns(()=>{if(o&&!d)return vx(n,o),()=>{vx(n,null)}},[n,o,d]),d){if(ee.isValidElement(a)){const E={ref:x};return ee.cloneElement(a,E)}return rt.jsx(ee.Fragment,{children:a})}return rt.jsx(ee.Fragment,{children:o&&R1.createPortal(a,o)})}),iB=["onChange","maxRows","minRows","style","value"];function Um(e){return parseInt(e,10)||0}const oB={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function lE(e){return e==null||Object.keys(e).length===0||e.outerHeightStyle===0&&!e.overflow}const aB=ee.forwardRef(function(t,n){const{onChange:a,maxRows:c,minRows:d=1,style:o,value:v}=t,x=nr(t,iB),{current:E}=ee.useRef(v!=null),k=ee.useRef(null),P=eo(n,k),T=ee.useRef(null),W=ee.useRef(0),[$,H]=ee.useState({outerHeightStyle:0}),D=ee.useCallback(()=>{const O=k.current,ne=$s(O).getComputedStyle(O);if(ne.width==="0px")return{outerHeightStyle:0};const fe=T.current;fe.style.width=ne.width,fe.value=O.value||t.placeholder||"x",fe.value.slice(-1)===`
`&&(fe.value+=" ");const xe=ne.boxSizing,Te=Um(ne.paddingBottom)+Um(ne.paddingTop),ve=Um(ne.borderBottomWidth)+Um(ne.borderTopWidth),Ee=fe.scrollHeight;fe.value="x";const Y=fe.scrollHeight;let he=Ee;d&&(he=Math.max(Number(d)*Y,he)),c&&(he=Math.min(Number(c)*Y,he)),he=Math.max(he,Y);const Ne=he+(xe==="border-box"?Te+ve:0),We=Math.abs(he-Ee)<=1;return{outerHeightStyle:Ne,overflow:We}},[c,d,t.placeholder]),U=(O,te)=>{const{outerHeightStyle:ne,overflow:fe}=te;return W.current<20&&(ne>0&&Math.abs((O.outerHeightStyle||0)-ne)>1||O.overflow!==fe)?(W.current+=1,{overflow:fe,outerHeightStyle:ne}):O},q=ee.useCallback(()=>{const O=D();lE(O)||H(te=>U(te,O))},[D]);ns(()=>{const O=()=>{const Ee=D();lE(Ee)||R1.flushSync(()=>{H(Y=>U(Y,Ee))})},te=()=>{W.current=0,O()};let ne;const fe=Mg(te),xe=k.current,Te=$s(xe);Te.addEventListener("resize",fe);let ve;return typeof ResizeObserver<"u"&&(ve=new ResizeObserver(te),ve.observe(xe)),()=>{fe.clear(),cancelAnimationFrame(ne),Te.removeEventListener("resize",fe),ve&&ve.disconnect()}},[D]),ns(()=>{q()}),ee.useEffect(()=>{W.current=0},[v]);const N=O=>{W.current=0,E||q(),a&&a(O)};return rt.jsxs(ee.Fragment,{children:[rt.jsx("textarea",Ae({value:v,onChange:N,ref:P,rows:d,style:Ae({height:$.outerHeightStyle,overflow:$.overflow?"hidden":void 0},o)},x)),rt.jsx("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:T,tabIndex:-1,style:Ae({},oB.shadow,o,{paddingTop:0,paddingBottom:0})})]})});function FT(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var sB=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,lB=FT(function(e){return sB.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91});function uB(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function cB(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var pB=function(){function e(n){var a=this;this._insertTag=function(c){var d;a.tags.length===0?a.insertionPoint?d=a.insertionPoint.nextSibling:a.prepend?d=a.container.firstChild:d=a.before:d=a.tags[a.tags.length-1].nextSibling,a.container.insertBefore(c,d),a.tags.push(c)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(a){a.forEach(this._insertTag)},t.insert=function(a){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(cB(this));var c=this.tags[this.tags.length-1];if(this.isSpeedy){var d=uB(c);try{d.insertRule(a,d.cssRules.length)}catch{}}else c.appendChild(document.createTextNode(a));this.ctr++},t.flush=function(){this.tags.forEach(function(a){return a.parentNode&&a.parentNode.removeChild(a)}),this.tags=[],this.ctr=0},e}(),Zi="-ms-",Gy="-moz-",Qr="-webkit-",UT="comm",Z1="rule",K1="decl",hB="@import",jT="@keyframes",fB="@layer",dB=Math.abs,Lg=String.fromCharCode,mB=Object.assign;function yB(e,t){return Di(e,0)^45?(((t<<2^Di(e,0))<<2^Di(e,1))<<2^Di(e,2))<<2^Di(e,3):0}function VT(e){return e.trim()}function gB(e,t){return(e=t.exec(e))?e[0]:e}function Jr(e,t,n){return e.replace(t,n)}function xx(e,t){return e.indexOf(t)}function Di(e,t){return e.charCodeAt(t)|0}function qf(e,t,n){return e.slice(t,n)}function Za(e){return e.length}function X1(e){return e.length}function jm(e,t){return t.push(e),e}function vB(e,t){return e.map(t).join("")}var Og=1,kp=1,$T=0,To=0,pi=0,Up="";function Dg(e,t,n,a,c,d,o){return{value:e,root:t,parent:n,type:a,props:c,children:d,line:Og,column:kp,length:o,return:""}}function Xh(e,t){return mB(Dg("",null,null,"",null,null,0),e,{length:-e.length},t)}function _B(){return pi}function xB(){return pi=To>0?Di(Up,--To):0,kp--,pi===10&&(kp=1,Og--),pi}function Vo(){return pi=To<$T?Di(Up,To++):0,kp++,pi===10&&(kp=1,Og++),pi}function ts(){return Di(Up,To)}function hy(){return To}function ld(e,t){return qf(Up,e,t)}function Wf(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function qT(e){return Og=kp=1,$T=Za(Up=e),To=0,[]}function WT(e){return Up="",e}function fy(e){return VT(ld(To-1,bx(e===91?e+2:e===40?e+1:e)))}function bB(e){for(;(pi=ts())&&pi<33;)Vo();return Wf(e)>2||Wf(pi)>3?"":" "}function wB(e,t){for(;--t&&Vo()&&!(pi<48||pi>102||pi>57&&pi<65||pi>70&&pi<97););return ld(e,hy()+(t<6&&ts()==32&&Vo()==32))}function bx(e){for(;Vo();)switch(pi){case e:return To;case 34:case 39:e!==34&&e!==39&&bx(pi);break;case 40:e===41&&bx(e);break;case 92:Vo();break}return To}function AB(e,t){for(;Vo()&&e+pi!==47+10;)if(e+pi===42+42&&ts()===47)break;return"/*"+ld(t,To-1)+"*"+Lg(e===47?e:Vo())}function EB(e){for(;!Wf(ts());)Vo();return ld(e,To)}function SB(e){return WT(dy("",null,null,null,[""],e=qT(e),0,[0],e))}function dy(e,t,n,a,c,d,o,v,x){for(var E=0,k=0,P=o,T=0,W=0,$=0,H=1,D=1,U=1,q=0,N="",O=c,te=d,ne=a,fe=N;D;)switch($=q,q=Vo()){case 40:if($!=108&&Di(fe,P-1)==58){xx(fe+=Jr(fy(q),"&","&\f"),"&\f")!=-1&&(U=-1);break}case 34:case 39:case 91:fe+=fy(q);break;case 9:case 10:case 13:case 32:fe+=bB($);break;case 92:fe+=wB(hy()-1,7);continue;case 47:switch(ts()){case 42:case 47:jm(CB(AB(Vo(),hy()),t,n),x);break;default:fe+="/"}break;case 123*H:v[E++]=Za(fe)*U;case 125*H:case 59:case 0:switch(q){case 0:case 125:D=0;case 59+k:U==-1&&(fe=Jr(fe,/\f/g,"")),W>0&&Za(fe)-P&&jm(W>32?cE(fe+";",a,n,P-1):cE(Jr(fe," ","")+";",a,n,P-2),x);break;case 59:fe+=";";default:if(jm(ne=uE(fe,t,n,E,k,c,v,N,O=[],te=[],P),d),q===123)if(k===0)dy(fe,t,ne,ne,O,d,P,v,te);else switch(T===99&&Di(fe,3)===110?100:T){case 100:case 108:case 109:case 115:dy(e,ne,ne,a&&jm(uE(e,ne,ne,0,0,c,v,N,c,O=[],P),te),c,te,P,v,a?O:te);break;default:dy(fe,ne,ne,ne,[""],te,0,v,te)}}E=k=W=0,H=U=1,N=fe="",P=o;break;case 58:P=1+Za(fe),W=$;default:if(H<1){if(q==123)--H;else if(q==125&&H++==0&&xB()==125)continue}switch(fe+=Lg(q),q*H){case 38:U=k>0?1:(fe+="\f",-1);break;case 44:v[E++]=(Za(fe)-1)*U,U=1;break;case 64:ts()===45&&(fe+=fy(Vo())),T=ts(),k=P=Za(N=fe+=EB(hy())),q++;break;case 45:$===45&&Za(fe)==2&&(H=0)}}return d}function uE(e,t,n,a,c,d,o,v,x,E,k){for(var P=c-1,T=c===0?d:[""],W=X1(T),$=0,H=0,D=0;$<a;++$)for(var U=0,q=qf(e,P+1,P=dB(H=o[$])),N=e;U<W;++U)(N=VT(H>0?T[U]+" "+q:Jr(q,/&\f/g,T[U])))&&(x[D++]=N);return Dg(e,t,n,c===0?Z1:v,x,E,k)}function CB(e,t,n){return Dg(e,t,n,UT,Lg(_B()),qf(e,2,-2),0)}function cE(e,t,n,a){return Dg(e,t,n,K1,qf(e,0,a),qf(e,a+1,-1),a)}function gp(e,t){for(var n="",a=X1(e),c=0;c<a;c++)n+=t(e[c],c,e,t)||"";return n}function kB(e,t,n,a){switch(e.type){case fB:if(e.children.length)break;case hB:case K1:return e.return=e.return||e.value;case UT:return"";case jT:return e.return=e.value+"{"+gp(e.children,a)+"}";case Z1:e.value=e.props.join(",")}return Za(n=gp(e.children,a))?e.return=e.value+"{"+n+"}":""}function TB(e){var t=X1(e);return function(n,a,c,d){for(var o="",v=0;v<t;v++)o+=e[v](n,a,c,d)||"";return o}}function IB(e){return function(t){t.root||(t=t.return)&&e(t)}}var PB=function(t,n,a){for(var c=0,d=0;c=d,d=ts(),c===38&&d===12&&(n[a]=1),!Wf(d);)Vo();return ld(t,To)},MB=function(t,n){var a=-1,c=44;do switch(Wf(c)){case 0:c===38&&ts()===12&&(n[a]=1),t[a]+=PB(To-1,n,a);break;case 2:t[a]+=fy(c);break;case 4:if(c===44){t[++a]=ts()===58?"&\f":"",n[a]=t[a].length;break}default:t[a]+=Lg(c)}while(c=Vo());return t},RB=function(t,n){return WT(MB(qT(t),n))},pE=new WeakMap,zB=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,a=t.parent,c=t.column===a.column&&t.line===a.line;a.type!=="rule";)if(a=a.parent,!a)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!pE.get(a))&&!c){pE.set(t,!0);for(var d=[],o=RB(n,d),v=a.props,x=0,E=0;x<o.length;x++)for(var k=0;k<v.length;k++,E++)t.props[E]=d[x]?o[x].replace(/&\f/g,v[k]):v[k]+" "+o[x]}}},LB=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function GT(e,t){switch(yB(e,t)){case 5103:return Qr+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Qr+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Qr+e+Gy+e+Zi+e+e;case 6828:case 4268:return Qr+e+Zi+e+e;case 6165:return Qr+e+Zi+"flex-"+e+e;case 5187:return Qr+e+Jr(e,/(\w+).+(:[^]+)/,Qr+"box-$1$2"+Zi+"flex-$1$2")+e;case 5443:return Qr+e+Zi+"flex-item-"+Jr(e,/flex-|-self/,"")+e;case 4675:return Qr+e+Zi+"flex-line-pack"+Jr(e,/align-content|flex-|-self/,"")+e;case 5548:return Qr+e+Zi+Jr(e,"shrink","negative")+e;case 5292:return Qr+e+Zi+Jr(e,"basis","preferred-size")+e;case 6060:return Qr+"box-"+Jr(e,"-grow","")+Qr+e+Zi+Jr(e,"grow","positive")+e;case 4554:return Qr+Jr(e,/([^-])(transform)/g,"$1"+Qr+"$2")+e;case 6187:return Jr(Jr(Jr(e,/(zoom-|grab)/,Qr+"$1"),/(image-set)/,Qr+"$1"),e,"")+e;case 5495:case 3959:return Jr(e,/(image-set\([^]*)/,Qr+"$1$`$1");case 4968:return Jr(Jr(e,/(.+:)(flex-)?(.*)/,Qr+"box-pack:$3"+Zi+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Qr+e+e;case 4095:case 3583:case 4068:case 2532:return Jr(e,/(.+)-inline(.+)/,Qr+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Za(e)-1-t>6)switch(Di(e,t+1)){case 109:if(Di(e,t+4)!==45)break;case 102:return Jr(e,/(.+:)(.+)-([^]+)/,"$1"+Qr+"$2-$3$1"+Gy+(Di(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~xx(e,"stretch")?GT(Jr(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Di(e,t+1)!==115)break;case 6444:switch(Di(e,Za(e)-3-(~xx(e,"!important")&&10))){case 107:return Jr(e,":",":"+Qr)+e;case 101:return Jr(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Qr+(Di(e,14)===45?"inline-":"")+"box$3$1"+Qr+"$2$3$1"+Zi+"$2box$3")+e}break;case 5936:switch(Di(e,t+11)){case 114:return Qr+e+Zi+Jr(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Qr+e+Zi+Jr(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Qr+e+Zi+Jr(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Qr+e+Zi+e+e}return e}var OB=function(t,n,a,c){if(t.length>-1&&!t.return)switch(t.type){case K1:t.return=GT(t.value,t.length);break;case jT:return gp([Xh(t,{value:Jr(t.value,"@","@"+Qr)})],c);case Z1:if(t.length)return vB(t.props,function(d){switch(gB(d,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return gp([Xh(t,{props:[Jr(d,/:(read-\w+)/,":"+Gy+"$1")]})],c);case"::placeholder":return gp([Xh(t,{props:[Jr(d,/:(plac\w+)/,":"+Qr+"input-$1")]}),Xh(t,{props:[Jr(d,/:(plac\w+)/,":"+Gy+"$1")]}),Xh(t,{props:[Jr(d,/:(plac\w+)/,Zi+"input-$1")]})],c)}return""})}},DB=[OB],BB=function(t){var n=t.key;if(n==="css"){var a=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(a,function(H){var D=H.getAttribute("data-emotion");D.indexOf(" ")!==-1&&(document.head.appendChild(H),H.setAttribute("data-s",""))})}var c=t.stylisPlugins||DB,d={},o,v=[];o=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(H){for(var D=H.getAttribute("data-emotion").split(" "),U=1;U<D.length;U++)d[D[U]]=!0;v.push(H)});var x,E=[zB,LB];{var k,P=[kB,IB(function(H){k.insert(H)})],T=TB(E.concat(c,P)),W=function(D){return gp(SB(D),T)};x=function(D,U,q,N){k=q,W(D?D+"{"+U.styles+"}":U.styles),N&&($.inserted[U.name]=!0)}}var $={key:n,sheet:new pB({key:n,container:o,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:d,registered:{},insert:x};return $.sheet.hydrate(v),$},HT={exports:{}},ln={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ki=typeof Symbol=="function"&&Symbol.for,Q1=ki?Symbol.for("react.element"):60103,J1=ki?Symbol.for("react.portal"):60106,Bg=ki?Symbol.for("react.fragment"):60107,Ng=ki?Symbol.for("react.strict_mode"):60108,Fg=ki?Symbol.for("react.profiler"):60114,Ug=ki?Symbol.for("react.provider"):60109,jg=ki?Symbol.for("react.context"):60110,Y1=ki?Symbol.for("react.async_mode"):60111,Vg=ki?Symbol.for("react.concurrent_mode"):60111,$g=ki?Symbol.for("react.forward_ref"):60112,qg=ki?Symbol.for("react.suspense"):60113,NB=ki?Symbol.for("react.suspense_list"):60120,Wg=ki?Symbol.for("react.memo"):60115,Gg=ki?Symbol.for("react.lazy"):60116,FB=ki?Symbol.for("react.block"):60121,UB=ki?Symbol.for("react.fundamental"):60117,jB=ki?Symbol.for("react.responder"):60118,VB=ki?Symbol.for("react.scope"):60119;function Wo(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Q1:switch(e=e.type,e){case Y1:case Vg:case Bg:case Fg:case Ng:case qg:return e;default:switch(e=e&&e.$$typeof,e){case jg:case $g:case Gg:case Wg:case Ug:return e;default:return t}}case J1:return t}}}function ZT(e){return Wo(e)===Vg}ln.AsyncMode=Y1;ln.ConcurrentMode=Vg;ln.ContextConsumer=jg;ln.ContextProvider=Ug;ln.Element=Q1;ln.ForwardRef=$g;ln.Fragment=Bg;ln.Lazy=Gg;ln.Memo=Wg;ln.Portal=J1;ln.Profiler=Fg;ln.StrictMode=Ng;ln.Suspense=qg;ln.isAsyncMode=function(e){return ZT(e)||Wo(e)===Y1};ln.isConcurrentMode=ZT;ln.isContextConsumer=function(e){return Wo(e)===jg};ln.isContextProvider=function(e){return Wo(e)===Ug};ln.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Q1};ln.isForwardRef=function(e){return Wo(e)===$g};ln.isFragment=function(e){return Wo(e)===Bg};ln.isLazy=function(e){return Wo(e)===Gg};ln.isMemo=function(e){return Wo(e)===Wg};ln.isPortal=function(e){return Wo(e)===J1};ln.isProfiler=function(e){return Wo(e)===Fg};ln.isStrictMode=function(e){return Wo(e)===Ng};ln.isSuspense=function(e){return Wo(e)===qg};ln.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Bg||e===Vg||e===Fg||e===Ng||e===qg||e===NB||typeof e=="object"&&e!==null&&(e.$$typeof===Gg||e.$$typeof===Wg||e.$$typeof===Ug||e.$$typeof===jg||e.$$typeof===$g||e.$$typeof===UB||e.$$typeof===jB||e.$$typeof===VB||e.$$typeof===FB)};ln.typeOf=Wo;HT.exports=ln;var $B=HT.exports,KT=$B,qB={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},WB={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},XT={};XT[KT.ForwardRef]=qB;XT[KT.Memo]=WB;var GB=!0;function HB(e,t,n){var a="";return n.split(" ").forEach(function(c){e[c]!==void 0?t.push(e[c]+";"):a+=c+" "}),a}var QT=function(t,n,a){var c=t.key+"-"+n.name;(a===!1||GB===!1)&&t.registered[c]===void 0&&(t.registered[c]=n.styles)},JT=function(t,n,a){QT(t,n,a);var c=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var d=n;do t.insert(n===d?"."+c:"",d,t.sheet,!0),d=d.next;while(d!==void 0)}};function ZB(e){for(var t=0,n,a=0,c=e.length;c>=4;++a,c-=4)n=e.charCodeAt(a)&255|(e.charCodeAt(++a)&255)<<8|(e.charCodeAt(++a)&255)<<16|(e.charCodeAt(++a)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(c){case 3:t^=(e.charCodeAt(a+2)&255)<<16;case 2:t^=(e.charCodeAt(a+1)&255)<<8;case 1:t^=e.charCodeAt(a)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var KB={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},XB=/[A-Z]|^ms/g,QB=/_EMO_([^_]+?)_([^]*?)_EMO_/g,YT=function(t){return t.charCodeAt(1)===45},hE=function(t){return t!=null&&typeof t!="boolean"},c_=FT(function(e){return YT(e)?e:e.replace(XB,"-$&").toLowerCase()}),fE=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(QB,function(a,c,d){return Ka={name:c,styles:d,next:Ka},c})}return KB[t]!==1&&!YT(t)&&typeof n=="number"&&n!==0?n+"px":n};function Gf(e,t,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return Ka={name:n.name,styles:n.styles,next:Ka},n.name;if(n.styles!==void 0){var a=n.next;if(a!==void 0)for(;a!==void 0;)Ka={name:a.name,styles:a.styles,next:Ka},a=a.next;var c=n.styles+";";return c}return JB(e,t,n)}case"function":{if(e!==void 0){var d=Ka,o=n(e);return Ka=d,Gf(e,t,o)}break}}if(t==null)return n;var v=t[n];return v!==void 0?v:n}function JB(e,t,n){var a="";if(Array.isArray(n))for(var c=0;c<n.length;c++)a+=Gf(e,t,n[c])+";";else for(var d in n){var o=n[d];if(typeof o!="object")t!=null&&t[o]!==void 0?a+=d+"{"+t[o]+"}":hE(o)&&(a+=c_(d)+":"+fE(d,o)+";");else if(Array.isArray(o)&&typeof o[0]=="string"&&(t==null||t[o[0]]===void 0))for(var v=0;v<o.length;v++)hE(o[v])&&(a+=c_(d)+":"+fE(d,o[v])+";");else{var x=Gf(e,t,o);switch(d){case"animation":case"animationName":{a+=c_(d)+":"+x+";";break}default:a+=d+"{"+x+"}"}}}return a}var dE=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Ka,eb=function(t,n,a){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var c=!0,d="";Ka=void 0;var o=t[0];o==null||o.raw===void 0?(c=!1,d+=Gf(a,n,o)):d+=o[0];for(var v=1;v<t.length;v++)d+=Gf(a,n,t[v]),c&&(d+=o[v]);dE.lastIndex=0;for(var x="",E;(E=dE.exec(d))!==null;)x+="-"+E[1];var k=ZB(d)+x;return{name:k,styles:d,next:Ka}},YB=function(t){return t()},eI=C_["useInsertionEffect"]?C_["useInsertionEffect"]:!1,eN=eI||YB,mE=eI||ee.useLayoutEffect,tI=ee.createContext(typeof HTMLElement<"u"?BB({key:"css"}):null);tI.Provider;var rI=function(t){return ee.forwardRef(function(n,a){var c=ee.useContext(tI);return t(n,c,a)})},tb=ee.createContext({}),tN=rI(function(e,t){var n=e.styles,a=eb([n],void 0,ee.useContext(tb)),c=ee.useRef();return mE(function(){var d=t.key+"-global",o=new t.sheet.constructor({key:d,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),v=!1,x=document.querySelector('style[data-emotion="'+d+" "+a.name+'"]');return t.sheet.tags.length&&(o.before=t.sheet.tags[0]),x!==null&&(v=!0,x.setAttribute("data-emotion",d),o.hydrate([x])),c.current=[o,v],function(){o.flush()}},[t]),mE(function(){var d=c.current,o=d[0],v=d[1];if(v){d[1]=!1;return}if(a.next!==void 0&&JT(t,a.next,!0),o.tags.length){var x=o.tags[o.tags.length-1].nextElementSibling;o.before=x,o.flush()}t.insert("",a,o,!1)},[t,a.name]),null});function rN(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return eb(t)}var rb=function(){var t=rN.apply(void 0,arguments),n="animation-"+t.name;return{name:n,styles:"@keyframes "+n+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},nN=lB,iN=function(t){return t!=="theme"},yE=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?nN:iN},gE=function(t,n,a){var c;if(n){var d=n.shouldForwardProp;c=t.__emotion_forwardProp&&d?function(o){return t.__emotion_forwardProp(o)&&d(o)}:d}return typeof c!="function"&&a&&(c=t.__emotion_forwardProp),c},oN=function(t){var n=t.cache,a=t.serialized,c=t.isStringTag;return QT(n,a,c),eN(function(){return JT(n,a,c)}),null},aN=function e(t,n){var a=t.__emotion_real===t,c=a&&t.__emotion_base||t,d,o;n!==void 0&&(d=n.label,o=n.target);var v=gE(t,n,a),x=v||yE(c),E=!x("as");return function(){var k=arguments,P=a&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(d!==void 0&&P.push("label:"+d+";"),k[0]==null||k[0].raw===void 0)P.push.apply(P,k);else{P.push(k[0][0]);for(var T=k.length,W=1;W<T;W++)P.push(k[W],k[0][W])}var $=rI(function(H,D,U){var q=E&&H.as||c,N="",O=[],te=H;if(H.theme==null){te={};for(var ne in H)te[ne]=H[ne];te.theme=ee.useContext(tb)}typeof H.className=="string"?N=HB(D.registered,O,H.className):H.className!=null&&(N=H.className+" ");var fe=eb(P.concat(O),D.registered,te);N+=D.key+"-"+fe.name,o!==void 0&&(N+=" "+o);var xe=E&&v===void 0?yE(q):x,Te={};for(var ve in H)E&&ve==="as"||xe(ve)&&(Te[ve]=H[ve]);return Te.className=N,Te.ref=U,ee.createElement(ee.Fragment,null,ee.createElement(oN,{cache:D,serialized:fe,isStringTag:typeof q=="string"}),ee.createElement(q,Te))});return $.displayName=d!==void 0?d:"Styled("+(typeof c=="string"?c:c.displayName||c.name||"Component")+")",$.defaultProps=t.defaultProps,$.__emotion_real=$,$.__emotion_base=c,$.__emotion_styles=P,$.__emotion_forwardProp=v,Object.defineProperty($,"toString",{value:function(){return"."+o}}),$.withComponent=function(H,D){return e(H,Ae({},n,D,{shouldForwardProp:gE($,D,!0)})).apply(void 0,P)},$}},sN=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],wx=aN.bind();sN.forEach(function(e){wx[e]=wx(e)});function lN(e){return e==null||Object.keys(e).length===0}function uN(e){const{styles:t,defaultTheme:n={}}=e,a=typeof t=="function"?c=>t(lN(c)?n:c):t;return rt.jsx(tN,{styles:a})}/**
 * @mui/styled-engine v5.15.7
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function nI(e,t){return wx(e,t)}const cN=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))},pN=["values","unit","step"],hN=e=>{const t=Object.keys(e).map(n=>({key:n,val:e[n]}))||[];return t.sort((n,a)=>n.val-a.val),t.reduce((n,a)=>Ae({},n,{[a.key]:a.val}),{})};function fN(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:a=5}=e,c=nr(e,pN),d=hN(t),o=Object.keys(d);function v(T){return`@media (min-width:${typeof t[T]=="number"?t[T]:T}${n})`}function x(T){return`@media (max-width:${(typeof t[T]=="number"?t[T]:T)-a/100}${n})`}function E(T,W){const $=o.indexOf(W);return`@media (min-width:${typeof t[T]=="number"?t[T]:T}${n}) and (max-width:${($!==-1&&typeof t[o[$]]=="number"?t[o[$]]:W)-a/100}${n})`}function k(T){return o.indexOf(T)+1<o.length?E(T,o[o.indexOf(T)+1]):v(T)}function P(T){const W=o.indexOf(T);return W===0?v(o[1]):W===o.length-1?x(o[W]):E(T,o[o.indexOf(T)+1]).replace("@media","@media not all and")}return Ae({keys:o,values:d,up:v,down:x,between:E,only:k,not:P,unit:n},c)}const dN={borderRadius:4},mN=dN;function kf(e,t){return t?Co(e,t,{clone:!1}):e}const nb={xs:0,sm:600,md:900,lg:1200,xl:1536},vE={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${nb[e]}px)`};function qs(e,t,n){const a=e.theme||{};if(Array.isArray(t)){const d=a.breakpoints||vE;return t.reduce((o,v,x)=>(o[d.up(d.keys[x])]=n(t[x]),o),{})}if(typeof t=="object"){const d=a.breakpoints||vE;return Object.keys(t).reduce((o,v)=>{if(Object.keys(d.values||nb).indexOf(v)!==-1){const x=d.up(v);o[x]=n(t[v],v)}else{const x=v;o[x]=t[x]}return o},{})}return n(t)}function yN(e={}){var t;return((t=e.keys)==null?void 0:t.reduce((a,c)=>{const d=e.up(c);return a[d]={},a},{}))||{}}function gN(e,t){return e.reduce((n,a)=>{const c=n[a];return(!c||Object.keys(c).length===0)&&delete n[a],n},t)}function Hg(e,t,n=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&n){const a=`vars.${t}`.split(".").reduce((c,d)=>c&&c[d]?c[d]:null,e);if(a!=null)return a}return t.split(".").reduce((a,c)=>a&&a[c]!=null?a[c]:null,e)}function Hy(e,t,n,a=n){let c;return typeof e=="function"?c=e(n):Array.isArray(e)?c=e[n]||a:c=Hg(e,n)||a,t&&(c=t(c,a,e)),c}function ai(e){const{prop:t,cssProperty:n=e.prop,themeKey:a,transform:c}=e,d=o=>{if(o[t]==null)return null;const v=o[t],x=o.theme,E=Hg(x,a)||{};return qs(o,v,P=>{let T=Hy(E,c,P);return P===T&&typeof P=="string"&&(T=Hy(E,c,`${t}${P==="default"?"":Hr(P)}`,P)),n===!1?T:{[n]:T}})};return d.propTypes={},d.filterProps=[t],d}function vN(e){const t={};return n=>(t[n]===void 0&&(t[n]=e(n)),t[n])}const _N={m:"margin",p:"padding"},xN={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},_E={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},bN=vN(e=>{if(e.length>2)if(_E[e])e=_E[e];else return[e];const[t,n]=e.split(""),a=_N[t],c=xN[n]||"";return Array.isArray(c)?c.map(d=>a+d):[a+c]}),ib=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],ob=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...ib,...ob];function ud(e,t,n,a){var c;const d=(c=Hg(e,t,!1))!=null?c:n;return typeof d=="number"?o=>typeof o=="string"?o:d*o:Array.isArray(d)?o=>typeof o=="string"?o:d[o]:typeof d=="function"?d:()=>{}}function iI(e){return ud(e,"spacing",8)}function cd(e,t){if(typeof t=="string"||t==null)return t;const n=Math.abs(t),a=e(n);return t>=0?a:typeof a=="number"?-a:`-${a}`}function wN(e,t){return n=>e.reduce((a,c)=>(a[c]=cd(t,n),a),{})}function AN(e,t,n,a){if(t.indexOf(n)===-1)return null;const c=bN(n),d=wN(c,a),o=e[n];return qs(e,o,d)}function oI(e,t){const n=iI(e.theme);return Object.keys(e).map(a=>AN(e,t,a,n)).reduce(kf,{})}function Gn(e){return oI(e,ib)}Gn.propTypes={};Gn.filterProps=ib;function Hn(e){return oI(e,ob)}Hn.propTypes={};Hn.filterProps=ob;function EN(e=8){if(e.mui)return e;const t=iI({spacing:e}),n=(...a)=>(a.length===0?[1]:a).map(d=>{const o=t(d);return typeof o=="number"?`${o}px`:o}).join(" ");return n.mui=!0,n}function Zg(...e){const t=e.reduce((a,c)=>(c.filterProps.forEach(d=>{a[d]=c}),a),{}),n=a=>Object.keys(a).reduce((c,d)=>t[d]?kf(c,t[d](a)):c,{});return n.propTypes={},n.filterProps=e.reduce((a,c)=>a.concat(c.filterProps),[]),n}function ea(e){return typeof e!="number"?e:`${e}px solid`}function sa(e,t){return ai({prop:e,themeKey:"borders",transform:t})}const SN=sa("border",ea),CN=sa("borderTop",ea),kN=sa("borderRight",ea),TN=sa("borderBottom",ea),IN=sa("borderLeft",ea),PN=sa("borderColor"),MN=sa("borderTopColor"),RN=sa("borderRightColor"),zN=sa("borderBottomColor"),LN=sa("borderLeftColor"),ON=sa("outline",ea),DN=sa("outlineColor"),Kg=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=ud(e.theme,"shape.borderRadius",4),n=a=>({borderRadius:cd(t,a)});return qs(e,e.borderRadius,n)}return null};Kg.propTypes={};Kg.filterProps=["borderRadius"];Zg(SN,CN,kN,TN,IN,PN,MN,RN,zN,LN,Kg,ON,DN);const Xg=e=>{if(e.gap!==void 0&&e.gap!==null){const t=ud(e.theme,"spacing",8),n=a=>({gap:cd(t,a)});return qs(e,e.gap,n)}return null};Xg.propTypes={};Xg.filterProps=["gap"];const Qg=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=ud(e.theme,"spacing",8),n=a=>({columnGap:cd(t,a)});return qs(e,e.columnGap,n)}return null};Qg.propTypes={};Qg.filterProps=["columnGap"];const Jg=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=ud(e.theme,"spacing",8),n=a=>({rowGap:cd(t,a)});return qs(e,e.rowGap,n)}return null};Jg.propTypes={};Jg.filterProps=["rowGap"];const BN=ai({prop:"gridColumn"}),NN=ai({prop:"gridRow"}),FN=ai({prop:"gridAutoFlow"}),UN=ai({prop:"gridAutoColumns"}),jN=ai({prop:"gridAutoRows"}),VN=ai({prop:"gridTemplateColumns"}),$N=ai({prop:"gridTemplateRows"}),qN=ai({prop:"gridTemplateAreas"}),WN=ai({prop:"gridArea"});Zg(Xg,Qg,Jg,BN,NN,FN,UN,jN,VN,$N,qN,WN);function vp(e,t){return t==="grey"?t:e}const GN=ai({prop:"color",themeKey:"palette",transform:vp}),HN=ai({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:vp}),ZN=ai({prop:"backgroundColor",themeKey:"palette",transform:vp});Zg(GN,HN,ZN);function Uo(e){return e<=1&&e!==0?`${e*100}%`:e}const KN=ai({prop:"width",transform:Uo}),ab=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=n=>{var a,c;const d=((a=e.theme)==null||(a=a.breakpoints)==null||(a=a.values)==null?void 0:a[n])||nb[n];return d?((c=e.theme)==null||(c=c.breakpoints)==null?void 0:c.unit)!=="px"?{maxWidth:`${d}${e.theme.breakpoints.unit}`}:{maxWidth:d}:{maxWidth:Uo(n)}};return qs(e,e.maxWidth,t)}return null};ab.filterProps=["maxWidth"];const XN=ai({prop:"minWidth",transform:Uo}),QN=ai({prop:"height",transform:Uo}),JN=ai({prop:"maxHeight",transform:Uo}),YN=ai({prop:"minHeight",transform:Uo});ai({prop:"size",cssProperty:"width",transform:Uo});ai({prop:"size",cssProperty:"height",transform:Uo});const e6=ai({prop:"boxSizing"});Zg(KN,ab,XN,QN,JN,YN,e6);const t6={border:{themeKey:"borders",transform:ea},borderTop:{themeKey:"borders",transform:ea},borderRight:{themeKey:"borders",transform:ea},borderBottom:{themeKey:"borders",transform:ea},borderLeft:{themeKey:"borders",transform:ea},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:ea},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Kg},color:{themeKey:"palette",transform:vp},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:vp},backgroundColor:{themeKey:"palette",transform:vp},p:{style:Hn},pt:{style:Hn},pr:{style:Hn},pb:{style:Hn},pl:{style:Hn},px:{style:Hn},py:{style:Hn},padding:{style:Hn},paddingTop:{style:Hn},paddingRight:{style:Hn},paddingBottom:{style:Hn},paddingLeft:{style:Hn},paddingX:{style:Hn},paddingY:{style:Hn},paddingInline:{style:Hn},paddingInlineStart:{style:Hn},paddingInlineEnd:{style:Hn},paddingBlock:{style:Hn},paddingBlockStart:{style:Hn},paddingBlockEnd:{style:Hn},m:{style:Gn},mt:{style:Gn},mr:{style:Gn},mb:{style:Gn},ml:{style:Gn},mx:{style:Gn},my:{style:Gn},margin:{style:Gn},marginTop:{style:Gn},marginRight:{style:Gn},marginBottom:{style:Gn},marginLeft:{style:Gn},marginX:{style:Gn},marginY:{style:Gn},marginInline:{style:Gn},marginInlineStart:{style:Gn},marginInlineEnd:{style:Gn},marginBlock:{style:Gn},marginBlockStart:{style:Gn},marginBlockEnd:{style:Gn},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Xg},rowGap:{style:Jg},columnGap:{style:Qg},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Uo},maxWidth:{style:ab},minWidth:{transform:Uo},height:{transform:Uo},maxHeight:{transform:Uo},minHeight:{transform:Uo},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},Yg=t6;function r6(...e){const t=e.reduce((a,c)=>a.concat(Object.keys(c)),[]),n=new Set(t);return e.every(a=>n.size===Object.keys(a).length)}function n6(e,t){return typeof e=="function"?e(t):e}function i6(){function e(n,a,c,d){const o={[n]:a,theme:c},v=d[n];if(!v)return{[n]:a};const{cssProperty:x=n,themeKey:E,transform:k,style:P}=v;if(a==null)return null;if(E==="typography"&&a==="inherit")return{[n]:a};const T=Hg(c,E)||{};return P?P(o):qs(o,a,$=>{let H=Hy(T,k,$);return $===H&&typeof $=="string"&&(H=Hy(T,k,`${n}${$==="default"?"":Hr($)}`,$)),x===!1?H:{[x]:H}})}function t(n){var a;const{sx:c,theme:d={}}=n||{};if(!c)return null;const o=(a=d.unstable_sxConfig)!=null?a:Yg;function v(x){let E=x;if(typeof x=="function")E=x(d);else if(typeof x!="object")return x;if(!E)return null;const k=yN(d.breakpoints),P=Object.keys(k);let T=k;return Object.keys(E).forEach(W=>{const $=n6(E[W],d);if($!=null)if(typeof $=="object")if(o[W])T=kf(T,e(W,$,d,o));else{const H=qs({theme:d},$,D=>({[W]:D}));r6(H,$)?T[W]=t({sx:$,theme:d}):T=kf(T,H)}else T=kf(T,e(W,$,d,o))}),gN(P,T)}return Array.isArray(c)?c.map(v):v(c)}return t}const aI=i6();aI.filterProps=["sx"];const ev=aI;function o6(e,t){const n=this;return n.vars&&typeof n.getColorSchemeSelector=="function"?{[n.getColorSchemeSelector(e).replace(/(\[[^\]]+\])/,"*:where($1)")]:t}:n.palette.mode===e?t:{}}const a6=["breakpoints","palette","spacing","shape"];function sb(e={},...t){const{breakpoints:n={},palette:a={},spacing:c,shape:d={}}=e,o=nr(e,a6),v=fN(n),x=EN(c);let E=Co({breakpoints:v,direction:"ltr",components:{},palette:Ae({mode:"light"},a),spacing:x,shape:Ae({},mN,d)},o);return E.applyStyles=o6,E=t.reduce((k,P)=>Co(k,P),E),E.unstable_sxConfig=Ae({},Yg,o==null?void 0:o.unstable_sxConfig),E.unstable_sx=function(P){return ev({sx:P,theme:this})},E}function s6(e){return Object.keys(e).length===0}function l6(e=null){const t=ee.useContext(tb);return!t||s6(t)?e:t}const u6=sb();function tv(e=u6){return l6(e)}function c6({styles:e,themeId:t,defaultTheme:n={}}){const a=tv(n),c=typeof e=="function"?e(t&&a[t]||a):e;return rt.jsx(uN,{styles:c})}const p6=["sx"],h6=e=>{var t,n;const a={systemProps:{},otherProps:{}},c=(t=e==null||(n=e.theme)==null?void 0:n.unstable_sxConfig)!=null?t:Yg;return Object.keys(e).forEach(d=>{c[d]?a.systemProps[d]=e[d]:a.otherProps[d]=e[d]}),a};function sI(e){const{sx:t}=e,n=nr(e,p6),{systemProps:a,otherProps:c}=h6(n);let d;return Array.isArray(t)?d=[a,...t]:typeof t=="function"?d=(...o)=>{const v=t(...o);return Bs(v)?Ae({},a,v):a}:d=Ae({},a,t),Ae({},c,{sx:d})}const f6=["className","component"];function d6(e={}){const{themeId:t,defaultTheme:n,defaultClassName:a="MuiBox-root",generateClassName:c}=e,d=nI("div",{shouldForwardProp:v=>v!=="theme"&&v!=="sx"&&v!=="as"})(ev);return ee.forwardRef(function(x,E){const k=tv(n),P=sI(x),{className:T,component:W="div"}=P,$=nr(P,f6);return rt.jsx(d,Ae({as:W,ref:E,className:fr(T,c?c(a):a),theme:t&&k[t]||k},$))})}const m6=["variant"];function xE(e){return e.length===0}function lI(e){const{variant:t}=e,n=nr(e,m6);let a=t||"";return Object.keys(n).sort().forEach(c=>{c==="color"?a+=xE(a)?e[c]:Hr(e[c]):a+=`${xE(a)?c:Hr(c)}${Hr(e[c].toString())}`}),a}const y6=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function g6(e){return Object.keys(e).length===0}function v6(e){return typeof e=="string"&&e.charCodeAt(0)>96}const _6=(e,t)=>t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null,Zy=e=>{let t=0;const n={};return e&&e.forEach(a=>{let c="";typeof a.props=="function"?(c=`callback${t}`,t+=1):c=lI(a.props),n[c]=a.style}),n},x6=(e,t)=>{let n=[];return t&&t.components&&t.components[e]&&t.components[e].variants&&(n=t.components[e].variants),Zy(n)},Ky=(e,t,n)=>{const{ownerState:a={}}=e,c=[];let d=0;return n&&n.forEach(o=>{let v=!0;if(typeof o.props=="function"){const x=Ae({},e,a);v=o.props(x)}else Object.keys(o.props).forEach(x=>{a[x]!==o.props[x]&&e[x]!==o.props[x]&&(v=!1)});v&&(typeof o.props=="function"?c.push(t[`callback${d}`]):c.push(t[lI(o.props)])),typeof o.props=="function"&&(d+=1)}),c},b6=(e,t,n,a)=>{var c;const d=n==null||(c=n.components)==null||(c=c[a])==null?void 0:c.variants;return Ky(e,t,d)};function Tf(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const w6=sb(),A6=e=>e&&e.charAt(0).toLowerCase()+e.slice(1);function my({defaultTheme:e,theme:t,themeId:n}){return g6(t)?e:t[n]||t}function E6(e){return e?(t,n)=>n[e]:null}const bE=({styledArg:e,props:t,defaultTheme:n,themeId:a})=>{const c=e(Ae({},t,{theme:my(Ae({},t,{defaultTheme:n,themeId:a}))}));let d;if(c&&c.variants&&(d=c.variants,delete c.variants),d){const o=Ky(t,Zy(d),d);return[c,...o]}return c};function S6(e={}){const{themeId:t,defaultTheme:n=w6,rootShouldForwardProp:a=Tf,slotShouldForwardProp:c=Tf}=e,d=o=>ev(Ae({},o,{theme:my(Ae({},o,{defaultTheme:n,themeId:t}))}));return d.__mui_systemSx=!0,(o,v={})=>{cN(o,O=>O.filter(te=>!(te!=null&&te.__mui_systemSx)));const{name:x,slot:E,skipVariantsResolver:k,skipSx:P,overridesResolver:T=E6(A6(E))}=v,W=nr(v,y6),$=k!==void 0?k:E&&E!=="Root"&&E!=="root"||!1,H=P||!1;let D,U=Tf;E==="Root"||E==="root"?U=a:E?U=c:v6(o)&&(U=void 0);const q=nI(o,Ae({shouldForwardProp:U,label:D},W)),N=(O,...te)=>{const ne=te?te.map(ve=>{if(typeof ve=="function"&&ve.__emotion_real!==ve)return Ee=>bE({styledArg:ve,props:Ee,defaultTheme:n,themeId:t});if(Bs(ve)){let Ee=ve,Y;return ve&&ve.variants&&(Y=ve.variants,delete Ee.variants,Ee=he=>{let Ne=ve;return Ky(he,Zy(Y),Y).forEach(we=>{Ne=Co(Ne,we)}),Ne}),Ee}return ve}):[];let fe=O;if(Bs(O)){let ve;O&&O.variants&&(ve=O.variants,delete fe.variants,fe=Ee=>{let Y=O;return Ky(Ee,Zy(ve),ve).forEach(Ne=>{Y=Co(Y,Ne)}),Y})}else typeof O=="function"&&O.__emotion_real!==O&&(fe=ve=>bE({styledArg:O,props:ve,defaultTheme:n,themeId:t}));x&&T&&ne.push(ve=>{const Ee=my(Ae({},ve,{defaultTheme:n,themeId:t})),Y=_6(x,Ee);if(Y){const he={};return Object.entries(Y).forEach(([Ne,We])=>{he[Ne]=typeof We=="function"?We(Ae({},ve,{theme:Ee})):We}),T(ve,he)}return null}),x&&!$&&ne.push(ve=>{const Ee=my(Ae({},ve,{defaultTheme:n,themeId:t}));return b6(ve,x6(x,Ee),Ee,x)}),H||ne.push(d);const xe=ne.length-te.length;if(Array.isArray(O)&&xe>0){const ve=new Array(xe).fill("");fe=[...O,...ve],fe.raw=[...O.raw,...ve]}const Te=q(fe,...ne);return o.muiName&&(Te.muiName=o.muiName),Te};return q.withConfig&&(N.withConfig=q.withConfig),N}}function C6(e){const{theme:t,name:n,props:a}=e;return!t||!t.components||!t.components[n]||!t.components[n].defaultProps?a:H1(t.components[n].defaultProps,a)}function k6({props:e,name:t,defaultTheme:n,themeId:a}){let c=tv(n);return a&&(c=c[a]||c),C6({theme:c,name:t,props:e})}function lb(e,t=0,n=1){return MD(e,t,n)}function T6(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&n[0].length===1&&(n=n.map(a=>a+a)),n?`rgb${n.length===4?"a":""}(${n.map((a,c)=>c<3?parseInt(a,16):Math.round(parseInt(a,16)/255*1e3)/1e3).join(", ")})`:""}function Bu(e){if(e.type)return e;if(e.charAt(0)==="#")return Bu(T6(e));const t=e.indexOf("("),n=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(n)===-1)throw new Error(Ol(9,e));let a=e.substring(t+1,e.length-1),c;if(n==="color"){if(a=a.split(" "),c=a.shift(),a.length===4&&a[3].charAt(0)==="/"&&(a[3]=a[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(c)===-1)throw new Error(Ol(10,c))}else a=a.split(",");return a=a.map(d=>parseFloat(d)),{type:n,values:a,colorSpace:c}}function rv(e){const{type:t,colorSpace:n}=e;let{values:a}=e;return t.indexOf("rgb")!==-1?a=a.map((c,d)=>d<3?parseInt(c,10):c):t.indexOf("hsl")!==-1&&(a[1]=`${a[1]}%`,a[2]=`${a[2]}%`),t.indexOf("color")!==-1?a=`${n} ${a.join(" ")}`:a=`${a.join(", ")}`,`${t}(${a})`}function I6(e){e=Bu(e);const{values:t}=e,n=t[0],a=t[1]/100,c=t[2]/100,d=a*Math.min(c,1-c),o=(E,k=(E+n/30)%12)=>c-d*Math.max(Math.min(k-3,9-k,1),-1);let v="rgb";const x=[Math.round(o(0)*255),Math.round(o(8)*255),Math.round(o(4)*255)];return e.type==="hsla"&&(v+="a",x.push(t[3])),rv({type:v,values:x})}function wE(e){e=Bu(e);let t=e.type==="hsl"||e.type==="hsla"?Bu(I6(e)).values:e.values;return t=t.map(n=>(e.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function P6(e,t){const n=wE(e),a=wE(t);return(Math.max(n,a)+.05)/(Math.min(n,a)+.05)}function wo(e,t){return e=Bu(e),t=lb(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,rv(e)}function M6(e,t){if(e=Bu(e),t=lb(t),e.type.indexOf("hsl")!==-1)e.values[2]*=1-t;else if(e.type.indexOf("rgb")!==-1||e.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)e.values[n]*=1-t;return rv(e)}function R6(e,t){if(e=Bu(e),t=lb(t),e.type.indexOf("hsl")!==-1)e.values[2]+=(100-e.values[2])*t;else if(e.type.indexOf("rgb")!==-1)for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(e.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return rv(e)}function z6(e,t){return Ae({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}const L6={black:"#000",white:"#fff"},Hf=L6,O6={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},D6=O6,B6={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},Vc=B6,N6={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},$c=N6,F6={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},Qh=F6,U6={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},qc=U6,j6={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},Wc=j6,V6={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},Gc=V6,$6=["mode","contrastThreshold","tonalOffset"],AE={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Hf.white,default:Hf.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},p_={text:{primary:Hf.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Hf.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function EE(e,t,n,a){const c=a.light||a,d=a.dark||a*1.5;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:t==="light"?e.light=R6(e.main,c):t==="dark"&&(e.dark=M6(e.main,d)))}function q6(e="light"){return e==="dark"?{main:qc[200],light:qc[50],dark:qc[400]}:{main:qc[700],light:qc[400],dark:qc[800]}}function W6(e="light"){return e==="dark"?{main:Vc[200],light:Vc[50],dark:Vc[400]}:{main:Vc[500],light:Vc[300],dark:Vc[700]}}function G6(e="light"){return e==="dark"?{main:$c[500],light:$c[300],dark:$c[700]}:{main:$c[700],light:$c[400],dark:$c[800]}}function H6(e="light"){return e==="dark"?{main:Wc[400],light:Wc[300],dark:Wc[700]}:{main:Wc[700],light:Wc[500],dark:Wc[900]}}function Z6(e="light"){return e==="dark"?{main:Gc[400],light:Gc[300],dark:Gc[700]}:{main:Gc[800],light:Gc[500],dark:Gc[900]}}function K6(e="light"){return e==="dark"?{main:Qh[400],light:Qh[300],dark:Qh[700]}:{main:"#ed6c02",light:Qh[500],dark:Qh[900]}}function X6(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:a=.2}=e,c=nr(e,$6),d=e.primary||q6(t),o=e.secondary||W6(t),v=e.error||G6(t),x=e.info||H6(t),E=e.success||Z6(t),k=e.warning||K6(t);function P(H){return P6(H,p_.text.primary)>=n?p_.text.primary:AE.text.primary}const T=({color:H,name:D,mainShade:U=500,lightShade:q=300,darkShade:N=700})=>{if(H=Ae({},H),!H.main&&H[U]&&(H.main=H[U]),!H.hasOwnProperty("main"))throw new Error(Ol(11,D?` (${D})`:"",U));if(typeof H.main!="string")throw new Error(Ol(12,D?` (${D})`:"",JSON.stringify(H.main)));return EE(H,"light",q,a),EE(H,"dark",N,a),H.contrastText||(H.contrastText=P(H.main)),H},W={dark:p_,light:AE};return Co(Ae({common:Ae({},Hf),mode:t,primary:T({color:d,name:"primary"}),secondary:T({color:o,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:T({color:v,name:"error"}),warning:T({color:k,name:"warning"}),info:T({color:x,name:"info"}),success:T({color:E,name:"success"}),grey:D6,contrastThreshold:n,getContrastText:P,augmentColor:T,tonalOffset:a},W[t]),c)}const Q6=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function J6(e){return Math.round(e*1e5)/1e5}const SE={textTransform:"uppercase"},CE='"Roboto", "Helvetica", "Arial", sans-serif';function Y6(e,t){const n=typeof t=="function"?t(e):t,{fontFamily:a=CE,fontSize:c=14,fontWeightLight:d=300,fontWeightRegular:o=400,fontWeightMedium:v=500,fontWeightBold:x=700,htmlFontSize:E=16,allVariants:k,pxToRem:P}=n,T=nr(n,Q6),W=c/14,$=P||(U=>`${U/E*W}rem`),H=(U,q,N,O,te)=>Ae({fontFamily:a,fontWeight:U,fontSize:$(q),lineHeight:N},a===CE?{letterSpacing:`${J6(O/q)}em`}:{},te,k),D={h1:H(d,96,1.167,-1.5),h2:H(d,60,1.2,-.5),h3:H(o,48,1.167,0),h4:H(o,34,1.235,.25),h5:H(o,24,1.334,0),h6:H(v,20,1.6,.15),subtitle1:H(o,16,1.75,.15),subtitle2:H(v,14,1.57,.1),body1:H(o,16,1.5,.15),body2:H(o,14,1.43,.15),button:H(v,14,1.75,.4,SE),caption:H(o,12,1.66,.4),overline:H(o,12,2.66,1,SE),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Co(Ae({htmlFontSize:E,pxToRem:$,fontFamily:a,fontSize:c,fontWeightLight:d,fontWeightRegular:o,fontWeightMedium:v,fontWeightBold:x},D),T,{clone:!1})}const eF=.2,tF=.14,rF=.12;function Rn(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${eF})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${tF})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${rF})`].join(",")}const nF=["none",Rn(0,2,1,-1,0,1,1,0,0,1,3,0),Rn(0,3,1,-2,0,2,2,0,0,1,5,0),Rn(0,3,3,-2,0,3,4,0,0,1,8,0),Rn(0,2,4,-1,0,4,5,0,0,1,10,0),Rn(0,3,5,-1,0,5,8,0,0,1,14,0),Rn(0,3,5,-1,0,6,10,0,0,1,18,0),Rn(0,4,5,-2,0,7,10,1,0,2,16,1),Rn(0,5,5,-3,0,8,10,1,0,3,14,2),Rn(0,5,6,-3,0,9,12,1,0,3,16,2),Rn(0,6,6,-3,0,10,14,1,0,4,18,3),Rn(0,6,7,-4,0,11,15,1,0,4,20,3),Rn(0,7,8,-4,0,12,17,2,0,5,22,4),Rn(0,7,8,-4,0,13,19,2,0,5,24,4),Rn(0,7,9,-4,0,14,21,2,0,5,26,4),Rn(0,8,9,-5,0,15,22,2,0,6,28,5),Rn(0,8,10,-5,0,16,24,2,0,6,30,5),Rn(0,8,11,-5,0,17,26,2,0,6,32,5),Rn(0,9,11,-5,0,18,28,2,0,7,34,6),Rn(0,9,12,-6,0,19,29,2,0,7,36,6),Rn(0,10,13,-6,0,20,31,3,0,8,38,7),Rn(0,10,13,-6,0,21,33,3,0,8,40,7),Rn(0,10,14,-6,0,22,35,3,0,8,42,7),Rn(0,11,14,-7,0,23,36,3,0,9,44,8),Rn(0,11,15,-7,0,24,38,3,0,9,46,8)],iF=nF,oF=["duration","easing","delay"],aF={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},sF={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function kE(e){return`${Math.round(e)}ms`}function lF(e){if(!e)return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function uF(e){const t=Ae({},aF,e.easing),n=Ae({},sF,e.duration);return Ae({getAutoHeightDuration:lF,create:(c=["all"],d={})=>{const{duration:o=n.standard,easing:v=t.easeInOut,delay:x=0}=d;return nr(d,oF),(Array.isArray(c)?c:[c]).map(E=>`${E} ${typeof o=="string"?o:kE(o)} ${v} ${typeof x=="string"?x:kE(x)}`).join(",")}},e,{easing:t,duration:n})}const cF={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},pF=cF,hF=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function uI(e={},...t){const{mixins:n={},palette:a={},transitions:c={},typography:d={}}=e,o=nr(e,hF);if(e.vars)throw new Error(Ol(18));const v=X6(a),x=sb(e);let E=Co(x,{mixins:z6(x.breakpoints,n),palette:v,shadows:iF.slice(),typography:Y6(v,d),transitions:uF(c),zIndex:Ae({},pF)});return E=Co(E,o),E=t.reduce((k,P)=>Co(k,P),E),E.unstable_sxConfig=Ae({},Yg,o==null?void 0:o.unstable_sxConfig),E.unstable_sx=function(P){return ev({sx:P,theme:this})},E}const fF=uI(),nv=fF,pd="$$material",Aa=e=>Tf(e)&&e!=="classes",dF=Tf,mF=S6({themeId:pd,defaultTheme:nv,rootShouldForwardProp:Aa}),ir=mF;function jn({props:e,name:t}){return k6({props:e,name:t,defaultTheme:nv,themeId:pd})}function Ax(e,t){return Ax=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,c){return a.__proto__=c,a},Ax(e,t)}function cI(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Ax(e,t)}const TE={disabled:!1},Xy=Ie.createContext(null);var yF=function(t){return t.scrollTop},cf="unmounted",wu="exited",Au="entering",Xc="entered",Ex="exiting",Hs=function(e){cI(t,e);function t(a,c){var d;d=e.call(this,a,c)||this;var o=c,v=o&&!o.isMounting?a.enter:a.appear,x;return d.appearStatus=null,a.in?v?(x=wu,d.appearStatus=Au):x=Xc:a.unmountOnExit||a.mountOnEnter?x=cf:x=wu,d.state={status:x},d.nextCallback=null,d}t.getDerivedStateFromProps=function(c,d){var o=c.in;return o&&d.status===cf?{status:wu}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(c){var d=null;if(c!==this.props){var o=this.state.status;this.props.in?o!==Au&&o!==Xc&&(d=Au):(o===Au||o===Xc)&&(d=Ex)}this.updateStatus(!1,d)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var c=this.props.timeout,d,o,v;return d=o=v=c,c!=null&&typeof c!="number"&&(d=c.exit,o=c.enter,v=c.appear!==void 0?c.appear:o),{exit:d,enter:o,appear:v}},n.updateStatus=function(c,d){if(c===void 0&&(c=!1),d!==null)if(this.cancelNextCallback(),d===Au){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:uf.findDOMNode(this);o&&yF(o)}this.performEnter(c)}else this.performExit();else this.props.unmountOnExit&&this.state.status===wu&&this.setState({status:cf})},n.performEnter=function(c){var d=this,o=this.props.enter,v=this.context?this.context.isMounting:c,x=this.props.nodeRef?[v]:[uf.findDOMNode(this),v],E=x[0],k=x[1],P=this.getTimeouts(),T=v?P.appear:P.enter;if(!c&&!o||TE.disabled){this.safeSetState({status:Xc},function(){d.props.onEntered(E)});return}this.props.onEnter(E,k),this.safeSetState({status:Au},function(){d.props.onEntering(E,k),d.onTransitionEnd(T,function(){d.safeSetState({status:Xc},function(){d.props.onEntered(E,k)})})})},n.performExit=function(){var c=this,d=this.props.exit,o=this.getTimeouts(),v=this.props.nodeRef?void 0:uf.findDOMNode(this);if(!d||TE.disabled){this.safeSetState({status:wu},function(){c.props.onExited(v)});return}this.props.onExit(v),this.safeSetState({status:Ex},function(){c.props.onExiting(v),c.onTransitionEnd(o.exit,function(){c.safeSetState({status:wu},function(){c.props.onExited(v)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(c,d){d=this.setNextCallback(d),this.setState(c,d)},n.setNextCallback=function(c){var d=this,o=!0;return this.nextCallback=function(v){o&&(o=!1,d.nextCallback=null,c(v))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(c,d){this.setNextCallback(d);var o=this.props.nodeRef?this.props.nodeRef.current:uf.findDOMNode(this),v=c==null&&!this.props.addEndListener;if(!o||v){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var x=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],E=x[0],k=x[1];this.props.addEndListener(E,k)}c!=null&&setTimeout(this.nextCallback,c)},n.render=function(){var c=this.state.status;if(c===cf)return null;var d=this.props,o=d.children;d.in,d.mountOnEnter,d.unmountOnExit,d.appear,d.enter,d.exit,d.timeout,d.addEndListener,d.onEnter,d.onEntering,d.onEntered,d.onExit,d.onExiting,d.onExited,d.nodeRef;var v=nr(d,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Ie.createElement(Xy.Provider,{value:null},typeof o=="function"?o(c,v):Ie.cloneElement(Ie.Children.only(o),v))},t}(Ie.Component);Hs.contextType=Xy;Hs.propTypes={};function Hc(){}Hs.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Hc,onEntering:Hc,onEntered:Hc,onExit:Hc,onExiting:Hc,onExited:Hc};Hs.UNMOUNTED=cf;Hs.EXITED=wu;Hs.ENTERING=Au;Hs.ENTERED=Xc;Hs.EXITING=Ex;const pI=Hs;function gF(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ub(e,t){var n=function(d){return t&&ee.isValidElement(d)?t(d):d},a=Object.create(null);return e&&ee.Children.map(e,function(c){return c}).forEach(function(c){a[c.key]=n(c)}),a}function vF(e,t){e=e||{},t=t||{};function n(k){return k in t?t[k]:e[k]}var a=Object.create(null),c=[];for(var d in e)d in t?c.length&&(a[d]=c,c=[]):c.push(d);var o,v={};for(var x in t){if(a[x])for(o=0;o<a[x].length;o++){var E=a[x][o];v[a[x][o]]=n(E)}v[x]=n(x)}for(o=0;o<c.length;o++)v[c[o]]=n(c[o]);return v}function Iu(e,t,n){return n[t]!=null?n[t]:e.props[t]}function _F(e,t){return ub(e.children,function(n){return ee.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:Iu(n,"appear",e),enter:Iu(n,"enter",e),exit:Iu(n,"exit",e)})})}function xF(e,t,n){var a=ub(e.children),c=vF(t,a);return Object.keys(c).forEach(function(d){var o=c[d];if(ee.isValidElement(o)){var v=d in t,x=d in a,E=t[d],k=ee.isValidElement(E)&&!E.props.in;x&&(!v||k)?c[d]=ee.cloneElement(o,{onExited:n.bind(null,o),in:!0,exit:Iu(o,"exit",e),enter:Iu(o,"enter",e)}):!x&&v&&!k?c[d]=ee.cloneElement(o,{in:!1}):x&&v&&ee.isValidElement(E)&&(c[d]=ee.cloneElement(o,{onExited:n.bind(null,o),in:E.props.in,exit:Iu(o,"exit",e),enter:Iu(o,"enter",e)}))}}),c}var bF=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},wF={component:"div",childFactory:function(t){return t}},cb=function(e){cI(t,e);function t(a,c){var d;d=e.call(this,a,c)||this;var o=d.handleExited.bind(gF(d));return d.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},d}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(c,d){var o=d.children,v=d.handleExited,x=d.firstRender;return{children:x?_F(c,v):xF(c,o,v),firstRender:!1}},n.handleExited=function(c,d){var o=ub(this.props.children);c.key in o||(c.props.onExited&&c.props.onExited(d),this.mounted&&this.setState(function(v){var x=Ae({},v.children);return delete x[c.key],{children:x}}))},n.render=function(){var c=this.props,d=c.component,o=c.childFactory,v=nr(c,["component","childFactory"]),x=this.state.contextValue,E=bF(this.state.children).map(o);return delete v.appear,delete v.enter,delete v.exit,d===null?Ie.createElement(Xy.Provider,{value:x},E):Ie.createElement(Xy.Provider,{value:x},Ie.createElement(d,v,E))},t}(Ie.Component);cb.propTypes={};cb.defaultProps=wF;const AF=cb;function hd(){const e=tv(nv);return e[pd]||e}const hI=e=>e.scrollTop;function Qy(e,t){var n,a;const{timeout:c,easing:d,style:o={}}=e;return{duration:(n=o.transitionDuration)!=null?n:typeof c=="number"?c:c[t.mode]||0,easing:(a=o.transitionTimingFunction)!=null?a:typeof d=="object"?d[t.mode]:d,delay:o.transitionDelay}}const EF=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],SF={entering:{opacity:1},entered:{opacity:1}},CF=ee.forwardRef(function(t,n){const a=hd(),c={enter:a.transitions.duration.enteringScreen,exit:a.transitions.duration.leavingScreen},{addEndListener:d,appear:o=!0,children:v,easing:x,in:E,onEnter:k,onEntered:P,onEntering:T,onExit:W,onExited:$,onExiting:H,style:D,timeout:U=c,TransitionComponent:q=pI}=t,N=nr(t,EF),O=ee.useRef(null),te=eo(O,v.ref,n),ne=Ne=>We=>{if(Ne){const we=O.current;We===void 0?Ne(we):Ne(we,We)}},fe=ne(T),xe=ne((Ne,We)=>{hI(Ne);const we=Qy({style:D,timeout:U,easing:x},{mode:"enter"});Ne.style.webkitTransition=a.transitions.create("opacity",we),Ne.style.transition=a.transitions.create("opacity",we),k&&k(Ne,We)}),Te=ne(P),ve=ne(H),Ee=ne(Ne=>{const We=Qy({style:D,timeout:U,easing:x},{mode:"exit"});Ne.style.webkitTransition=a.transitions.create("opacity",We),Ne.style.transition=a.transitions.create("opacity",We),W&&W(Ne)}),Y=ne($),he=Ne=>{d&&d(O.current,Ne)};return rt.jsx(q,Ae({appear:o,in:E,nodeRef:O,onEnter:xe,onEntered:Te,onEntering:fe,onExit:Ee,onExited:Y,onExiting:ve,addEndListener:he,timeout:U},N,{children:(Ne,We)=>ee.cloneElement(v,Ae({style:Ae({opacity:0,visibility:Ne==="exited"&&!E?"hidden":void 0},SF[Ne],D,v.props.style),ref:te},We))}))}),kF=CF;function TF(e){return Ln("MuiBackdrop",e)}sn("MuiBackdrop",["root","invisible"]);const IF=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],PF=e=>{const{classes:t,invisible:n}=e;return Un({root:["root",n&&"invisible"]},TF,t)},MF=ir("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.invisible&&t.invisible]}})(({ownerState:e})=>Ae({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},e.invisible&&{backgroundColor:"transparent"})),RF=ee.forwardRef(function(t,n){var a,c,d;const o=jn({props:t,name:"MuiBackdrop"}),{children:v,className:x,component:E="div",components:k={},componentsProps:P={},invisible:T=!1,open:W,slotProps:$={},slots:H={},TransitionComponent:D=kF,transitionDuration:U}=o,q=nr(o,IF),N=Ae({},o,{component:E,invisible:T}),O=PF(N),te=(a=$.root)!=null?a:P.root;return rt.jsx(D,Ae({in:W,timeout:U},q,{children:rt.jsx(MF,Ae({"aria-hidden":!0},te,{as:(c=(d=H.root)!=null?d:k.Root)!=null?c:E,className:fr(O.root,x,te==null?void 0:te.className),ownerState:Ae({},N,te==null?void 0:te.ownerState),classes:O,ref:n,children:v}))}))}),fI=RF;function zF(e){return Ln("MuiModal",e)}sn("MuiModal",["root","hidden","backdrop"]);const LF=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","onTransitionEnter","onTransitionExited","open","slotProps","slots","theme"],OF=e=>{const{open:t,exited:n,classes:a}=e;return Un({root:["root",!t&&n&&"hidden"],backdrop:["backdrop"]},zF,a)},DF=ir("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.open&&n.exited&&t.hidden]}})(({theme:e,ownerState:t})=>Ae({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0},!t.open&&t.exited&&{visibility:"hidden"})),BF=ir(fI,{name:"MuiModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({zIndex:-1}),NF=ee.forwardRef(function(t,n){var a,c,d,o,v,x;const E=jn({name:"MuiModal",props:t}),{BackdropComponent:k=BF,BackdropProps:P,className:T,closeAfterTransition:W=!1,children:$,container:H,component:D,components:U={},componentsProps:q={},disableAutoFocus:N=!1,disableEnforceFocus:O=!1,disableEscapeKeyDown:te=!1,disablePortal:ne=!1,disableRestoreFocus:fe=!1,disableScrollLock:xe=!1,hideBackdrop:Te=!1,keepMounted:ve=!1,onBackdropClick:Ee,open:Y,slotProps:he,slots:Ne}=E,We=nr(E,LF),we=Ae({},E,{closeAfterTransition:W,disableAutoFocus:N,disableEnforceFocus:O,disableEscapeKeyDown:te,disablePortal:ne,disableRestoreFocus:fe,disableScrollLock:xe,hideBackdrop:Te,keepMounted:ve}),{getRootProps:be,getBackdropProps:$e,getTransitionProps:Le,portalRef:St,isTopModal:Ce,exited:qe,hasTransition:gt}=ZD(Ae({},we,{rootRef:n})),ze=Ae({},we,{exited:qe}),st=OF(ze),Wt={};if($.props.tabIndex===void 0&&(Wt.tabIndex="-1"),gt){const{onEnter:nt,onExited:Gt}=Le();Wt.onEnter=nt,Wt.onExited=Gt}const Dt=(a=(c=Ne==null?void 0:Ne.root)!=null?c:U.Root)!=null?a:DF,Ht=(d=(o=Ne==null?void 0:Ne.backdrop)!=null?o:U.Backdrop)!=null?d:k,At=(v=he==null?void 0:he.root)!=null?v:q.root,er=(x=he==null?void 0:he.backdrop)!=null?x:q.backdrop,$t=is({elementType:Dt,externalSlotProps:At,externalForwardedProps:We,getSlotProps:be,additionalProps:{ref:n,as:D},ownerState:ze,className:fr(T,At==null?void 0:At.className,st==null?void 0:st.root,!ze.open&&ze.exited&&(st==null?void 0:st.hidden))}),Zt=is({elementType:Ht,externalSlotProps:er,additionalProps:P,getSlotProps:nt=>$e(Ae({},nt,{onClick:Gt=>{Ee&&Ee(Gt),nt!=null&&nt.onClick&&nt.onClick(Gt)}})),className:fr(er==null?void 0:er.className,P==null?void 0:P.className,st==null?void 0:st.backdrop),ownerState:ze});return!ve&&!Y&&(!gt||qe)?null:rt.jsx(nB,{ref:St,container:H,disablePortal:ne,children:rt.jsxs(Dt,Ae({},$t,{children:[!Te&&k?rt.jsx(Ht,Ae({},Zt)):null,rt.jsx(tB,{disableEnforceFocus:O,disableAutoFocus:N,disableRestoreFocus:fe,isEnabled:Ce,open:Y,children:ee.cloneElement($,Wt)})]}))})}),dI=NF,FF=e=>{let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,(t/100).toFixed(2)},IE=FF,UF=sn("MuiBox",["root"]),jF=UF,VF=uI(),$F=d6({themeId:pd,defaultTheme:VF,defaultClassName:jF.root,generateClassName:zT.generate}),Qi=$F;function yy(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function qF(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function mI(e){let t,n,a;e.length!==2?(t=yy,n=(v,x)=>yy(e(v),x),a=(v,x)=>e(v)-x):(t=e===yy||e===qF?e:WF,n=e,a=e);function c(v,x,E=0,k=v.length){if(E<k){if(t(x,x)!==0)return k;do{const P=E+k>>>1;n(v[P],x)<0?E=P+1:k=P}while(E<k)}return E}function d(v,x,E=0,k=v.length){if(E<k){if(t(x,x)!==0)return k;do{const P=E+k>>>1;n(v[P],x)<=0?E=P+1:k=P}while(E<k)}return E}function o(v,x,E=0,k=v.length){const P=c(v,x,E,k-1);return P>E&&a(v[P-1],x)>-a(v[P],x)?P-1:P}return{left:c,center:o,right:d}}function WF(){return 0}function GF(e){return e===null?NaN:+e}const HF=mI(yy),ZF=HF.right;mI(GF).center;const KF=ZF;class PE extends Map{constructor(t,n=JF){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[a,c]of t)this.set(a,c)}get(t){return super.get(ME(this,t))}has(t){return super.has(ME(this,t))}set(t,n){return super.set(XF(this,t),n)}delete(t){return super.delete(QF(this,t))}}function ME({_intern:e,_key:t},n){const a=t(n);return e.has(a)?e.get(a):n}function XF({_intern:e,_key:t},n){const a=t(n);return e.has(a)?e.get(a):(e.set(a,n),n)}function QF({_intern:e,_key:t},n){const a=t(n);return e.has(a)&&(n=e.get(a),e.delete(a)),n}function JF(e){return e!==null&&typeof e=="object"?e.valueOf():e}const YF=Math.sqrt(50),e8=Math.sqrt(10),t8=Math.sqrt(2);function Jy(e,t,n){const a=(t-e)/Math.max(0,n),c=Math.floor(Math.log10(a)),d=a/Math.pow(10,c),o=d>=YF?10:d>=e8?5:d>=t8?2:1;let v,x,E;return c<0?(E=Math.pow(10,-c)/o,v=Math.round(e*E),x=Math.round(t*E),v/E<e&&++v,x/E>t&&--x,E=-E):(E=Math.pow(10,c)*o,v=Math.round(e/E),x=Math.round(t/E),v*E<e&&++v,x*E>t&&--x),x<v&&.5<=n&&n<2?Jy(e,t,n*2):[v,x,E]}function r8(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const a=t<e,[c,d,o]=a?Jy(t,e,n):Jy(e,t,n);if(!(d>=c))return[];const v=d-c+1,x=new Array(v);if(a)if(o<0)for(let E=0;E<v;++E)x[E]=(d-E)/-o;else for(let E=0;E<v;++E)x[E]=(d-E)*o;else if(o<0)for(let E=0;E<v;++E)x[E]=(c+E)/-o;else for(let E=0;E<v;++E)x[E]=(c+E)*o;return x}function Sx(e,t,n){return t=+t,e=+e,n=+n,Jy(e,t,n)[2]}function n8(e,t,n){t=+t,e=+e,n=+n;const a=t<e,c=a?Sx(t,e,n):Sx(e,t,n);return(a?-1:1)*(c<0?1/-c:c)}function i8(e,t){let n=0;if(t===void 0)for(let a of e)(a=+a)&&(n+=a);else{let a=-1;for(let c of e)(c=+t(c,++a,e))&&(n+=c)}return n}var o8={value:()=>{}};function yI(){for(var e=0,t=arguments.length,n={},a;e<t;++e){if(!(a=arguments[e]+"")||a in n||/[\s.]/.test(a))throw new Error("illegal type: "+a);n[a]=[]}return new gy(n)}function gy(e){this._=e}function a8(e,t){return e.trim().split(/^|\s+/).map(function(n){var a="",c=n.indexOf(".");if(c>=0&&(a=n.slice(c+1),n=n.slice(0,c)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:a}})}gy.prototype=yI.prototype={constructor:gy,on:function(e,t){var n=this._,a=a8(e+"",n),c,d=-1,o=a.length;if(arguments.length<2){for(;++d<o;)if((c=(e=a[d]).type)&&(c=s8(n[c],e.name)))return c;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++d<o;)if(c=(e=a[d]).type)n[c]=RE(n[c],e.name,t);else if(t==null)for(c in n)n[c]=RE(n[c],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new gy(e)},call:function(e,t){if((c=arguments.length-2)>0)for(var n=new Array(c),a=0,c,d;a<c;++a)n[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(d=this._[e],a=0,c=d.length;a<c;++a)d[a].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var a=this._[e],c=0,d=a.length;c<d;++c)a[c].value.apply(t,n)}};function s8(e,t){for(var n=0,a=e.length,c;n<a;++n)if((c=e[n]).name===t)return c.value}function RE(e,t,n){for(var a=0,c=e.length;a<c;++a)if(e[a].name===t){e[a]=o8,e=e.slice(0,a).concat(e.slice(a+1));break}return n!=null&&e.push({name:t,value:n}),e}var Cx="http://www.w3.org/1999/xhtml";const zE={svg:"http://www.w3.org/2000/svg",xhtml:Cx,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function iv(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),zE.hasOwnProperty(t)?{space:zE[t],local:e}:e}function l8(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Cx&&t.documentElement.namespaceURI===Cx?t.createElement(e):t.createElementNS(n,e)}}function u8(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function gI(e){var t=iv(e);return(t.local?u8:l8)(t)}function c8(){}function pb(e){return e==null?c8:function(){return this.querySelector(e)}}function p8(e){typeof e!="function"&&(e=pb(e));for(var t=this._groups,n=t.length,a=new Array(n),c=0;c<n;++c)for(var d=t[c],o=d.length,v=a[c]=new Array(o),x,E,k=0;k<o;++k)(x=d[k])&&(E=e.call(x,x.__data__,k,d))&&("__data__"in x&&(E.__data__=x.__data__),v[k]=E);return new $o(a,this._parents)}function h8(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function f8(){return[]}function vI(e){return e==null?f8:function(){return this.querySelectorAll(e)}}function d8(e){return function(){return h8(e.apply(this,arguments))}}function m8(e){typeof e=="function"?e=d8(e):e=vI(e);for(var t=this._groups,n=t.length,a=[],c=[],d=0;d<n;++d)for(var o=t[d],v=o.length,x,E=0;E<v;++E)(x=o[E])&&(a.push(e.call(x,x.__data__,E,o)),c.push(x));return new $o(a,c)}function _I(e){return function(){return this.matches(e)}}function xI(e){return function(t){return t.matches(e)}}var y8=Array.prototype.find;function g8(e){return function(){return y8.call(this.children,e)}}function v8(){return this.firstElementChild}function _8(e){return this.select(e==null?v8:g8(typeof e=="function"?e:xI(e)))}var x8=Array.prototype.filter;function b8(){return Array.from(this.children)}function w8(e){return function(){return x8.call(this.children,e)}}function A8(e){return this.selectAll(e==null?b8:w8(typeof e=="function"?e:xI(e)))}function E8(e){typeof e!="function"&&(e=_I(e));for(var t=this._groups,n=t.length,a=new Array(n),c=0;c<n;++c)for(var d=t[c],o=d.length,v=a[c]=[],x,E=0;E<o;++E)(x=d[E])&&e.call(x,x.__data__,E,d)&&v.push(x);return new $o(a,this._parents)}function bI(e){return new Array(e.length)}function S8(){return new $o(this._enter||this._groups.map(bI),this._parents)}function Yy(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Yy.prototype={constructor:Yy,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function C8(e){return function(){return e}}function k8(e,t,n,a,c,d){for(var o=0,v,x=t.length,E=d.length;o<E;++o)(v=t[o])?(v.__data__=d[o],a[o]=v):n[o]=new Yy(e,d[o]);for(;o<x;++o)(v=t[o])&&(c[o]=v)}function T8(e,t,n,a,c,d,o){var v,x,E=new Map,k=t.length,P=d.length,T=new Array(k),W;for(v=0;v<k;++v)(x=t[v])&&(T[v]=W=o.call(x,x.__data__,v,t)+"",E.has(W)?c[v]=x:E.set(W,x));for(v=0;v<P;++v)W=o.call(e,d[v],v,d)+"",(x=E.get(W))?(a[v]=x,x.__data__=d[v],E.delete(W)):n[v]=new Yy(e,d[v]);for(v=0;v<k;++v)(x=t[v])&&E.get(T[v])===x&&(c[v]=x)}function I8(e){return e.__data__}function P8(e,t){if(!arguments.length)return Array.from(this,I8);var n=t?T8:k8,a=this._parents,c=this._groups;typeof e!="function"&&(e=C8(e));for(var d=c.length,o=new Array(d),v=new Array(d),x=new Array(d),E=0;E<d;++E){var k=a[E],P=c[E],T=P.length,W=M8(e.call(k,k&&k.__data__,E,a)),$=W.length,H=v[E]=new Array($),D=o[E]=new Array($),U=x[E]=new Array(T);n(k,P,H,D,U,W,t);for(var q=0,N=0,O,te;q<$;++q)if(O=H[q]){for(q>=N&&(N=q+1);!(te=D[N])&&++N<$;);O._next=te||null}}return o=new $o(o,a),o._enter=v,o._exit=x,o}function M8(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function R8(){return new $o(this._exit||this._groups.map(bI),this._parents)}function z8(e,t,n){var a=this.enter(),c=this,d=this.exit();return typeof e=="function"?(a=e(a),a&&(a=a.selection())):a=a.append(e+""),t!=null&&(c=t(c),c&&(c=c.selection())),n==null?d.remove():n(d),a&&c?a.merge(c).order():c}function L8(e){for(var t=e.selection?e.selection():e,n=this._groups,a=t._groups,c=n.length,d=a.length,o=Math.min(c,d),v=new Array(c),x=0;x<o;++x)for(var E=n[x],k=a[x],P=E.length,T=v[x]=new Array(P),W,$=0;$<P;++$)(W=E[$]||k[$])&&(T[$]=W);for(;x<c;++x)v[x]=n[x];return new $o(v,this._parents)}function O8(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var a=e[t],c=a.length-1,d=a[c],o;--c>=0;)(o=a[c])&&(d&&o.compareDocumentPosition(d)^4&&d.parentNode.insertBefore(o,d),d=o);return this}function D8(e){e||(e=B8);function t(P,T){return P&&T?e(P.__data__,T.__data__):!P-!T}for(var n=this._groups,a=n.length,c=new Array(a),d=0;d<a;++d){for(var o=n[d],v=o.length,x=c[d]=new Array(v),E,k=0;k<v;++k)(E=o[k])&&(x[k]=E);x.sort(t)}return new $o(c,this._parents).order()}function B8(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function N8(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function F8(){return Array.from(this)}function U8(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var a=e[t],c=0,d=a.length;c<d;++c){var o=a[c];if(o)return o}return null}function j8(){let e=0;for(const t of this)++e;return e}function V8(){return!this.node()}function $8(e){for(var t=this._groups,n=0,a=t.length;n<a;++n)for(var c=t[n],d=0,o=c.length,v;d<o;++d)(v=c[d])&&e.call(v,v.__data__,d,c);return this}function q8(e){return function(){this.removeAttribute(e)}}function W8(e){return function(){this.removeAttributeNS(e.space,e.local)}}function G8(e,t){return function(){this.setAttribute(e,t)}}function H8(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Z8(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function K8(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function X8(e,t){var n=iv(e);if(arguments.length<2){var a=this.node();return n.local?a.getAttributeNS(n.space,n.local):a.getAttribute(n)}return this.each((t==null?n.local?W8:q8:typeof t=="function"?n.local?K8:Z8:n.local?H8:G8)(n,t))}function wI(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Q8(e){return function(){this.style.removeProperty(e)}}function J8(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Y8(e,t,n){return function(){var a=t.apply(this,arguments);a==null?this.style.removeProperty(e):this.style.setProperty(e,a,n)}}function eU(e,t,n){return arguments.length>1?this.each((t==null?Q8:typeof t=="function"?Y8:J8)(e,t,n??"")):Tp(this.node(),e)}function Tp(e,t){return e.style.getPropertyValue(t)||wI(e).getComputedStyle(e,null).getPropertyValue(t)}function tU(e){return function(){delete this[e]}}function rU(e,t){return function(){this[e]=t}}function nU(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function iU(e,t){return arguments.length>1?this.each((t==null?tU:typeof t=="function"?nU:rU)(e,t)):this.node()[e]}function AI(e){return e.trim().split(/^|\s+/)}function hb(e){return e.classList||new EI(e)}function EI(e){this._node=e,this._names=AI(e.getAttribute("class")||"")}EI.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function SI(e,t){for(var n=hb(e),a=-1,c=t.length;++a<c;)n.add(t[a])}function CI(e,t){for(var n=hb(e),a=-1,c=t.length;++a<c;)n.remove(t[a])}function oU(e){return function(){SI(this,e)}}function aU(e){return function(){CI(this,e)}}function sU(e,t){return function(){(t.apply(this,arguments)?SI:CI)(this,e)}}function lU(e,t){var n=AI(e+"");if(arguments.length<2){for(var a=hb(this.node()),c=-1,d=n.length;++c<d;)if(!a.contains(n[c]))return!1;return!0}return this.each((typeof t=="function"?sU:t?oU:aU)(n,t))}function uU(){this.textContent=""}function cU(e){return function(){this.textContent=e}}function pU(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function hU(e){return arguments.length?this.each(e==null?uU:(typeof e=="function"?pU:cU)(e)):this.node().textContent}function fU(){this.innerHTML=""}function dU(e){return function(){this.innerHTML=e}}function mU(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function yU(e){return arguments.length?this.each(e==null?fU:(typeof e=="function"?mU:dU)(e)):this.node().innerHTML}function gU(){this.nextSibling&&this.parentNode.appendChild(this)}function vU(){return this.each(gU)}function _U(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function xU(){return this.each(_U)}function bU(e){var t=typeof e=="function"?e:gI(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function wU(){return null}function AU(e,t){var n=typeof e=="function"?e:gI(e),a=t==null?wU:typeof t=="function"?t:pb(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),a.apply(this,arguments)||null)})}function EU(){var e=this.parentNode;e&&e.removeChild(this)}function SU(){return this.each(EU)}function CU(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function kU(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function TU(e){return this.select(e?kU:CU)}function IU(e){return arguments.length?this.property("__data__",e):this.node().__data__}function PU(e){return function(t){e.call(this,t,this.__data__)}}function MU(e){return e.trim().split(/^|\s+/).map(function(t){var n="",a=t.indexOf(".");return a>=0&&(n=t.slice(a+1),t=t.slice(0,a)),{type:t,name:n}})}function RU(e){return function(){var t=this.__on;if(t){for(var n=0,a=-1,c=t.length,d;n<c;++n)d=t[n],(!e.type||d.type===e.type)&&d.name===e.name?this.removeEventListener(d.type,d.listener,d.options):t[++a]=d;++a?t.length=a:delete this.__on}}}function zU(e,t,n){return function(){var a=this.__on,c,d=PU(t);if(a){for(var o=0,v=a.length;o<v;++o)if((c=a[o]).type===e.type&&c.name===e.name){this.removeEventListener(c.type,c.listener,c.options),this.addEventListener(c.type,c.listener=d,c.options=n),c.value=t;return}}this.addEventListener(e.type,d,n),c={type:e.type,name:e.name,value:t,listener:d,options:n},a?a.push(c):this.__on=[c]}}function LU(e,t,n){var a=MU(e+""),c,d=a.length,o;if(arguments.length<2){var v=this.node().__on;if(v){for(var x=0,E=v.length,k;x<E;++x)for(c=0,k=v[x];c<d;++c)if((o=a[c]).type===k.type&&o.name===k.name)return k.value}return}for(v=t?zU:RU,c=0;c<d;++c)this.each(v(a[c],t,n));return this}function kI(e,t,n){var a=wI(e),c=a.CustomEvent;typeof c=="function"?c=new c(t,n):(c=a.document.createEvent("Event"),n?(c.initEvent(t,n.bubbles,n.cancelable),c.detail=n.detail):c.initEvent(t,!1,!1)),e.dispatchEvent(c)}function OU(e,t){return function(){return kI(this,e,t)}}function DU(e,t){return function(){return kI(this,e,t.apply(this,arguments))}}function BU(e,t){return this.each((typeof t=="function"?DU:OU)(e,t))}function*NU(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var a=e[t],c=0,d=a.length,o;c<d;++c)(o=a[c])&&(yield o)}var TI=[null];function $o(e,t){this._groups=e,this._parents=t}function fd(){return new $o([[document.documentElement]],TI)}function FU(){return this}$o.prototype=fd.prototype={constructor:$o,select:p8,selectAll:m8,selectChild:_8,selectChildren:A8,filter:E8,data:P8,enter:S8,exit:R8,join:z8,merge:L8,selection:FU,order:O8,sort:D8,call:N8,nodes:F8,node:U8,size:j8,empty:V8,each:$8,attr:X8,style:eU,property:iU,classed:lU,text:hU,html:yU,raise:vU,lower:xU,append:bU,insert:AU,remove:SU,clone:TU,datum:IU,on:LU,dispatch:BU,[Symbol.iterator]:NU};function eg(e){return typeof e=="string"?new $o([[document.querySelector(e)]],[document.documentElement]):new $o([[e]],TI)}function fb(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function II(e,t){var n=Object.create(e.prototype);for(var a in t)n[a]=t[a];return n}function dd(){}var Zf=.7,tg=1/Zf,_p="\\s*([+-]?\\d+)\\s*",Kf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",rs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",UU=/^#([0-9a-f]{3,8})$/,jU=new RegExp(`^rgb\\(${_p},${_p},${_p}\\)$`),VU=new RegExp(`^rgb\\(${rs},${rs},${rs}\\)$`),$U=new RegExp(`^rgba\\(${_p},${_p},${_p},${Kf}\\)$`),qU=new RegExp(`^rgba\\(${rs},${rs},${rs},${Kf}\\)$`),WU=new RegExp(`^hsl\\(${Kf},${rs},${rs}\\)$`),GU=new RegExp(`^hsla\\(${Kf},${rs},${rs},${Kf}\\)$`),LE={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};fb(dd,Nu,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:OE,formatHex:OE,formatHex8:HU,formatHsl:ZU,formatRgb:DE,toString:DE});function OE(){return this.rgb().formatHex()}function HU(){return this.rgb().formatHex8()}function ZU(){return PI(this).formatHsl()}function DE(){return this.rgb().formatRgb()}function Nu(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=UU.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?BE(t):n===3?new Ao(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Vm(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Vm(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=jU.exec(e))?new Ao(t[1],t[2],t[3],1):(t=VU.exec(e))?new Ao(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=$U.exec(e))?Vm(t[1],t[2],t[3],t[4]):(t=qU.exec(e))?Vm(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=WU.exec(e))?UE(t[1],t[2]/100,t[3]/100,1):(t=GU.exec(e))?UE(t[1],t[2]/100,t[3]/100,t[4]):LE.hasOwnProperty(e)?BE(LE[e]):e==="transparent"?new Ao(NaN,NaN,NaN,0):null}function BE(e){return new Ao(e>>16&255,e>>8&255,e&255,1)}function Vm(e,t,n,a){return a<=0&&(e=t=n=NaN),new Ao(e,t,n,a)}function KU(e){return e instanceof dd||(e=Nu(e)),e?(e=e.rgb(),new Ao(e.r,e.g,e.b,e.opacity)):new Ao}function kx(e,t,n,a){return arguments.length===1?KU(e):new Ao(e,t,n,a??1)}function Ao(e,t,n,a){this.r=+e,this.g=+t,this.b=+n,this.opacity=+a}fb(Ao,kx,II(dd,{brighter(e){return e=e==null?tg:Math.pow(tg,e),new Ao(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Zf:Math.pow(Zf,e),new Ao(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ao(Ru(this.r),Ru(this.g),Ru(this.b),rg(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:NE,formatHex:NE,formatHex8:XU,formatRgb:FE,toString:FE}));function NE(){return`#${Pu(this.r)}${Pu(this.g)}${Pu(this.b)}`}function XU(){return`#${Pu(this.r)}${Pu(this.g)}${Pu(this.b)}${Pu((isNaN(this.opacity)?1:this.opacity)*255)}`}function FE(){const e=rg(this.opacity);return`${e===1?"rgb(":"rgba("}${Ru(this.r)}, ${Ru(this.g)}, ${Ru(this.b)}${e===1?")":`, ${e})`}`}function rg(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ru(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Pu(e){return e=Ru(e),(e<16?"0":"")+e.toString(16)}function UE(e,t,n,a){return a<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new xa(e,t,n,a)}function PI(e){if(e instanceof xa)return new xa(e.h,e.s,e.l,e.opacity);if(e instanceof dd||(e=Nu(e)),!e)return new xa;if(e instanceof xa)return e;e=e.rgb();var t=e.r/255,n=e.g/255,a=e.b/255,c=Math.min(t,n,a),d=Math.max(t,n,a),o=NaN,v=d-c,x=(d+c)/2;return v?(t===d?o=(n-a)/v+(n<a)*6:n===d?o=(a-t)/v+2:o=(t-n)/v+4,v/=x<.5?d+c:2-d-c,o*=60):v=x>0&&x<1?0:o,new xa(o,v,x,e.opacity)}function QU(e,t,n,a){return arguments.length===1?PI(e):new xa(e,t,n,a??1)}function xa(e,t,n,a){this.h=+e,this.s=+t,this.l=+n,this.opacity=+a}fb(xa,QU,II(dd,{brighter(e){return e=e==null?tg:Math.pow(tg,e),new xa(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Zf:Math.pow(Zf,e),new xa(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,a=n+(n<.5?n:1-n)*t,c=2*n-a;return new Ao(h_(e>=240?e-240:e+120,c,a),h_(e,c,a),h_(e<120?e+240:e-120,c,a),this.opacity)},clamp(){return new xa(jE(this.h),$m(this.s),$m(this.l),rg(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=rg(this.opacity);return`${e===1?"hsl(":"hsla("}${jE(this.h)}, ${$m(this.s)*100}%, ${$m(this.l)*100}%${e===1?")":`, ${e})`}`}}));function jE(e){return e=(e||0)%360,e<0?e+360:e}function $m(e){return Math.max(0,Math.min(1,e||0))}function h_(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const db=e=>()=>e;function JU(e,t){return function(n){return e+n*t}}function YU(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(a){return Math.pow(e+a*t,n)}}function ej(e){return(e=+e)==1?MI:function(t,n){return n-t?YU(t,n,e):db(isNaN(t)?n:t)}}function MI(e,t){var n=t-e;return n?JU(e,n):db(isNaN(e)?t:e)}const ng=function e(t){var n=ej(t);function a(c,d){var o=n((c=kx(c)).r,(d=kx(d)).r),v=n(c.g,d.g),x=n(c.b,d.b),E=MI(c.opacity,d.opacity);return function(k){return c.r=o(k),c.g=v(k),c.b=x(k),c.opacity=E(k),c+""}}return a.gamma=e,a}(1);function tj(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,a=t.slice(),c;return function(d){for(c=0;c<n;++c)a[c]=e[c]*(1-d)+t[c]*d;return a}}function rj(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function nj(e,t){var n=t?t.length:0,a=e?Math.min(n,e.length):0,c=new Array(a),d=new Array(n),o;for(o=0;o<a;++o)c[o]=mb(e[o],t[o]);for(;o<n;++o)d[o]=t[o];return function(v){for(o=0;o<a;++o)d[o]=c[o](v);return d}}function ij(e,t){var n=new Date;return e=+e,t=+t,function(a){return n.setTime(e*(1-a)+t*a),n}}function _a(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function oj(e,t){var n={},a={},c;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(c in t)c in e?n[c]=mb(e[c],t[c]):a[c]=t[c];return function(d){for(c in n)a[c]=n[c](d);return a}}var Tx=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,f_=new RegExp(Tx.source,"g");function aj(e){return function(){return e}}function sj(e){return function(t){return e(t)+""}}function RI(e,t){var n=Tx.lastIndex=f_.lastIndex=0,a,c,d,o=-1,v=[],x=[];for(e=e+"",t=t+"";(a=Tx.exec(e))&&(c=f_.exec(t));)(d=c.index)>n&&(d=t.slice(n,d),v[o]?v[o]+=d:v[++o]=d),(a=a[0])===(c=c[0])?v[o]?v[o]+=c:v[++o]=c:(v[++o]=null,x.push({i:o,x:_a(a,c)})),n=f_.lastIndex;return n<t.length&&(d=t.slice(n),v[o]?v[o]+=d:v[++o]=d),v.length<2?x[0]?sj(x[0].x):aj(t):(t=x.length,function(E){for(var k=0,P;k<t;++k)v[(P=x[k]).i]=P.x(E);return v.join("")})}function mb(e,t){var n=typeof t,a;return t==null||n==="boolean"?db(t):(n==="number"?_a:n==="string"?(a=Nu(t))?(t=a,ng):RI:t instanceof Nu?ng:t instanceof Date?ij:rj(t)?tj:Array.isArray(t)?nj:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?oj:_a)(e,t)}function lj(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var VE=180/Math.PI,Ix={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function zI(e,t,n,a,c,d){var o,v,x;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(x=e*n+t*a)&&(n-=e*x,a-=t*x),(v=Math.sqrt(n*n+a*a))&&(n/=v,a/=v,x/=v),e*a<t*n&&(e=-e,t=-t,x=-x,o=-o),{translateX:c,translateY:d,rotate:Math.atan2(t,e)*VE,skewX:Math.atan(x)*VE,scaleX:o,scaleY:v}}var qm;function uj(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Ix:zI(t.a,t.b,t.c,t.d,t.e,t.f)}function cj(e){return e==null||(qm||(qm=document.createElementNS("http://www.w3.org/2000/svg","g")),qm.setAttribute("transform",e),!(e=qm.transform.baseVal.consolidate()))?Ix:(e=e.matrix,zI(e.a,e.b,e.c,e.d,e.e,e.f))}function LI(e,t,n,a){function c(E){return E.length?E.pop()+" ":""}function d(E,k,P,T,W,$){if(E!==P||k!==T){var H=W.push("translate(",null,t,null,n);$.push({i:H-4,x:_a(E,P)},{i:H-2,x:_a(k,T)})}else(P||T)&&W.push("translate("+P+t+T+n)}function o(E,k,P,T){E!==k?(E-k>180?k+=360:k-E>180&&(E+=360),T.push({i:P.push(c(P)+"rotate(",null,a)-2,x:_a(E,k)})):k&&P.push(c(P)+"rotate("+k+a)}function v(E,k,P,T){E!==k?T.push({i:P.push(c(P)+"skewX(",null,a)-2,x:_a(E,k)}):k&&P.push(c(P)+"skewX("+k+a)}function x(E,k,P,T,W,$){if(E!==P||k!==T){var H=W.push(c(W)+"scale(",null,",",null,")");$.push({i:H-4,x:_a(E,P)},{i:H-2,x:_a(k,T)})}else(P!==1||T!==1)&&W.push(c(W)+"scale("+P+","+T+")")}return function(E,k){var P=[],T=[];return E=e(E),k=e(k),d(E.translateX,E.translateY,k.translateX,k.translateY,P,T),o(E.rotate,k.rotate,P,T),v(E.skewX,k.skewX,P,T),x(E.scaleX,E.scaleY,k.scaleX,k.scaleY,P,T),E=k=null,function(W){for(var $=-1,H=T.length,D;++$<H;)P[(D=T[$]).i]=D.x(W);return P.join("")}}}var pj=LI(uj,"px, ","px)","deg)"),hj=LI(cj,", ",")",")"),Ip=0,pf=0,Jh=0,OI=1e3,ig,hf,og=0,Fu=0,ov=0,Xf=typeof performance=="object"&&performance.now?performance:Date,DI=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function yb(){return Fu||(DI(fj),Fu=Xf.now()+ov)}function fj(){Fu=0}function ag(){this._call=this._time=this._next=null}ag.prototype=BI.prototype={constructor:ag,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?yb():+n)+(t==null?0:+t),!this._next&&hf!==this&&(hf?hf._next=this:ig=this,hf=this),this._call=e,this._time=n,Px()},stop:function(){this._call&&(this._call=null,this._time=1/0,Px())}};function BI(e,t,n){var a=new ag;return a.restart(e,t,n),a}function dj(){yb(),++Ip;for(var e=ig,t;e;)(t=Fu-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Ip}function $E(){Fu=(og=Xf.now())+ov,Ip=pf=0;try{dj()}finally{Ip=0,yj(),Fu=0}}function mj(){var e=Xf.now(),t=e-og;t>OI&&(ov-=t,og=e)}function yj(){for(var e,t=ig,n,a=1/0;t;)t._call?(a>t._time&&(a=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:ig=n);hf=e,Px(a)}function Px(e){if(!Ip){pf&&(pf=clearTimeout(pf));var t=e-Fu;t>24?(e<1/0&&(pf=setTimeout($E,e-Xf.now()-ov)),Jh&&(Jh=clearInterval(Jh))):(Jh||(og=Xf.now(),Jh=setInterval(mj,OI)),Ip=1,DI($E))}}function qE(e,t,n){var a=new ag;return t=t==null?0:+t,a.restart(c=>{a.stop(),e(c+t)},t,n),a}var gj=yI("start","end","cancel","interrupt"),vj=[],NI=0,WE=1,Mx=2,vy=3,GE=4,Rx=5,_y=6;function av(e,t,n,a,c,d){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;_j(e,n,{name:t,index:a,group:c,on:gj,tween:vj,time:d.time,delay:d.delay,duration:d.duration,ease:d.ease,timer:null,state:NI})}function gb(e,t){var n=Ea(e,t);if(n.state>NI)throw new Error("too late; already scheduled");return n}function ss(e,t){var n=Ea(e,t);if(n.state>vy)throw new Error("too late; already running");return n}function Ea(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function _j(e,t,n){var a=e.__transition,c;a[t]=n,n.timer=BI(d,0,n.time);function d(E){n.state=WE,n.timer.restart(o,n.delay,n.time),n.delay<=E&&o(E-n.delay)}function o(E){var k,P,T,W;if(n.state!==WE)return x();for(k in a)if(W=a[k],W.name===n.name){if(W.state===vy)return qE(o);W.state===GE?(W.state=_y,W.timer.stop(),W.on.call("interrupt",e,e.__data__,W.index,W.group),delete a[k]):+k<t&&(W.state=_y,W.timer.stop(),W.on.call("cancel",e,e.__data__,W.index,W.group),delete a[k])}if(qE(function(){n.state===vy&&(n.state=GE,n.timer.restart(v,n.delay,n.time),v(E))}),n.state=Mx,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Mx){for(n.state=vy,c=new Array(T=n.tween.length),k=0,P=-1;k<T;++k)(W=n.tween[k].value.call(e,e.__data__,n.index,n.group))&&(c[++P]=W);c.length=P+1}}function v(E){for(var k=E<n.duration?n.ease.call(null,E/n.duration):(n.timer.restart(x),n.state=Rx,1),P=-1,T=c.length;++P<T;)c[P].call(e,k);n.state===Rx&&(n.on.call("end",e,e.__data__,n.index,n.group),x())}function x(){n.state=_y,n.timer.stop(),delete a[t];for(var E in a)return;delete e.__transition}}function xj(e,t){var n=e.__transition,a,c,d=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((a=n[o]).name!==t){d=!1;continue}c=a.state>Mx&&a.state<Rx,a.state=_y,a.timer.stop(),a.on.call(c?"interrupt":"cancel",e,e.__data__,a.index,a.group),delete n[o]}d&&delete e.__transition}}function bj(e){return this.each(function(){xj(this,e)})}function wj(e,t){var n,a;return function(){var c=ss(this,e),d=c.tween;if(d!==n){a=n=d;for(var o=0,v=a.length;o<v;++o)if(a[o].name===t){a=a.slice(),a.splice(o,1);break}}c.tween=a}}function Aj(e,t,n){var a,c;if(typeof n!="function")throw new Error;return function(){var d=ss(this,e),o=d.tween;if(o!==a){c=(a=o).slice();for(var v={name:t,value:n},x=0,E=c.length;x<E;++x)if(c[x].name===t){c[x]=v;break}x===E&&c.push(v)}d.tween=c}}function Ej(e,t){var n=this._id;if(e+="",arguments.length<2){for(var a=Ea(this.node(),n).tween,c=0,d=a.length,o;c<d;++c)if((o=a[c]).name===e)return o.value;return null}return this.each((t==null?wj:Aj)(n,e,t))}function vb(e,t,n){var a=e._id;return e.each(function(){var c=ss(this,a);(c.value||(c.value={}))[t]=n.apply(this,arguments)}),function(c){return Ea(c,a).value[t]}}function FI(e,t){var n;return(typeof t=="number"?_a:t instanceof Nu?ng:(n=Nu(t))?(t=n,ng):RI)(e,t)}function Sj(e){return function(){this.removeAttribute(e)}}function Cj(e){return function(){this.removeAttributeNS(e.space,e.local)}}function kj(e,t,n){var a,c=n+"",d;return function(){var o=this.getAttribute(e);return o===c?null:o===a?d:d=t(a=o,n)}}function Tj(e,t,n){var a,c=n+"",d;return function(){var o=this.getAttributeNS(e.space,e.local);return o===c?null:o===a?d:d=t(a=o,n)}}function Ij(e,t,n){var a,c,d;return function(){var o,v=n(this),x;return v==null?void this.removeAttribute(e):(o=this.getAttribute(e),x=v+"",o===x?null:o===a&&x===c?d:(c=x,d=t(a=o,v)))}}function Pj(e,t,n){var a,c,d;return function(){var o,v=n(this),x;return v==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),x=v+"",o===x?null:o===a&&x===c?d:(c=x,d=t(a=o,v)))}}function Mj(e,t){var n=iv(e),a=n==="transform"?hj:FI;return this.attrTween(e,typeof t=="function"?(n.local?Pj:Ij)(n,a,vb(this,"attr."+e,t)):t==null?(n.local?Cj:Sj)(n):(n.local?Tj:kj)(n,a,t))}function Rj(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function zj(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Lj(e,t){var n,a;function c(){var d=t.apply(this,arguments);return d!==a&&(n=(a=d)&&zj(e,d)),n}return c._value=t,c}function Oj(e,t){var n,a;function c(){var d=t.apply(this,arguments);return d!==a&&(n=(a=d)&&Rj(e,d)),n}return c._value=t,c}function Dj(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var a=iv(e);return this.tween(n,(a.local?Lj:Oj)(a,t))}function Bj(e,t){return function(){gb(this,e).delay=+t.apply(this,arguments)}}function Nj(e,t){return t=+t,function(){gb(this,e).delay=t}}function Fj(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Bj:Nj)(t,e)):Ea(this.node(),t).delay}function Uj(e,t){return function(){ss(this,e).duration=+t.apply(this,arguments)}}function jj(e,t){return t=+t,function(){ss(this,e).duration=t}}function Vj(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Uj:jj)(t,e)):Ea(this.node(),t).duration}function $j(e,t){if(typeof t!="function")throw new Error;return function(){ss(this,e).ease=t}}function qj(e){var t=this._id;return arguments.length?this.each($j(t,e)):Ea(this.node(),t).ease}function Wj(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;ss(this,e).ease=n}}function Gj(e){if(typeof e!="function")throw new Error;return this.each(Wj(this._id,e))}function Hj(e){typeof e!="function"&&(e=_I(e));for(var t=this._groups,n=t.length,a=new Array(n),c=0;c<n;++c)for(var d=t[c],o=d.length,v=a[c]=[],x,E=0;E<o;++E)(x=d[E])&&e.call(x,x.__data__,E,d)&&v.push(x);return new Ws(a,this._parents,this._name,this._id)}function Zj(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,a=t.length,c=n.length,d=Math.min(a,c),o=new Array(a),v=0;v<d;++v)for(var x=t[v],E=n[v],k=x.length,P=o[v]=new Array(k),T,W=0;W<k;++W)(T=x[W]||E[W])&&(P[W]=T);for(;v<a;++v)o[v]=t[v];return new Ws(o,this._parents,this._name,this._id)}function Kj(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Xj(e,t,n){var a,c,d=Kj(t)?gb:ss;return function(){var o=d(this,e),v=o.on;v!==a&&(c=(a=v).copy()).on(t,n),o.on=c}}function Qj(e,t){var n=this._id;return arguments.length<2?Ea(this.node(),n).on.on(e):this.each(Xj(n,e,t))}function Jj(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Yj(){return this.on("end.remove",Jj(this._id))}function eV(e){var t=this._name,n=this._id;typeof e!="function"&&(e=pb(e));for(var a=this._groups,c=a.length,d=new Array(c),o=0;o<c;++o)for(var v=a[o],x=v.length,E=d[o]=new Array(x),k,P,T=0;T<x;++T)(k=v[T])&&(P=e.call(k,k.__data__,T,v))&&("__data__"in k&&(P.__data__=k.__data__),E[T]=P,av(E[T],t,n,T,E,Ea(k,n)));return new Ws(d,this._parents,t,n)}function tV(e){var t=this._name,n=this._id;typeof e!="function"&&(e=vI(e));for(var a=this._groups,c=a.length,d=[],o=[],v=0;v<c;++v)for(var x=a[v],E=x.length,k,P=0;P<E;++P)if(k=x[P]){for(var T=e.call(k,k.__data__,P,x),W,$=Ea(k,n),H=0,D=T.length;H<D;++H)(W=T[H])&&av(W,t,n,H,T,$);d.push(T),o.push(k)}return new Ws(d,o,t,n)}var rV=fd.prototype.constructor;function nV(){return new rV(this._groups,this._parents)}function iV(e,t){var n,a,c;return function(){var d=Tp(this,e),o=(this.style.removeProperty(e),Tp(this,e));return d===o?null:d===n&&o===a?c:c=t(n=d,a=o)}}function UI(e){return function(){this.style.removeProperty(e)}}function oV(e,t,n){var a,c=n+"",d;return function(){var o=Tp(this,e);return o===c?null:o===a?d:d=t(a=o,n)}}function aV(e,t,n){var a,c,d;return function(){var o=Tp(this,e),v=n(this),x=v+"";return v==null&&(x=v=(this.style.removeProperty(e),Tp(this,e))),o===x?null:o===a&&x===c?d:(c=x,d=t(a=o,v))}}function sV(e,t){var n,a,c,d="style."+t,o="end."+d,v;return function(){var x=ss(this,e),E=x.on,k=x.value[d]==null?v||(v=UI(t)):void 0;(E!==n||c!==k)&&(a=(n=E).copy()).on(o,c=k),x.on=a}}function lV(e,t,n){var a=(e+="")=="transform"?pj:FI;return t==null?this.styleTween(e,iV(e,a)).on("end.style."+e,UI(e)):typeof t=="function"?this.styleTween(e,aV(e,a,vb(this,"style."+e,t))).each(sV(this._id,e)):this.styleTween(e,oV(e,a,t),n).on("end.style."+e,null)}function uV(e,t,n){return function(a){this.style.setProperty(e,t.call(this,a),n)}}function cV(e,t,n){var a,c;function d(){var o=t.apply(this,arguments);return o!==c&&(a=(c=o)&&uV(e,o,n)),a}return d._value=t,d}function pV(e,t,n){var a="style."+(e+="");if(arguments.length<2)return(a=this.tween(a))&&a._value;if(t==null)return this.tween(a,null);if(typeof t!="function")throw new Error;return this.tween(a,cV(e,t,n??""))}function hV(e){return function(){this.textContent=e}}function fV(e){return function(){var t=e(this);this.textContent=t??""}}function dV(e){return this.tween("text",typeof e=="function"?fV(vb(this,"text",e)):hV(e==null?"":e+""))}function mV(e){return function(t){this.textContent=e.call(this,t)}}function yV(e){var t,n;function a(){var c=e.apply(this,arguments);return c!==n&&(t=(n=c)&&mV(c)),t}return a._value=e,a}function gV(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,yV(e))}function vV(){for(var e=this._name,t=this._id,n=jI(),a=this._groups,c=a.length,d=0;d<c;++d)for(var o=a[d],v=o.length,x,E=0;E<v;++E)if(x=o[E]){var k=Ea(x,t);av(x,e,n,E,o,{time:k.time+k.delay+k.duration,delay:0,duration:k.duration,ease:k.ease})}return new Ws(a,this._parents,e,n)}function _V(){var e,t,n=this,a=n._id,c=n.size();return new Promise(function(d,o){var v={value:o},x={value:function(){--c===0&&d()}};n.each(function(){var E=ss(this,a),k=E.on;k!==e&&(t=(e=k).copy(),t._.cancel.push(v),t._.interrupt.push(v),t._.end.push(x)),E.on=t}),c===0&&d()})}var xV=0;function Ws(e,t,n,a){this._groups=e,this._parents=t,this._name=n,this._id=a}function jI(){return++xV}var zs=fd.prototype;Ws.prototype={constructor:Ws,select:eV,selectAll:tV,selectChild:zs.selectChild,selectChildren:zs.selectChildren,filter:Hj,merge:Zj,selection:nV,transition:vV,call:zs.call,nodes:zs.nodes,node:zs.node,size:zs.size,empty:zs.empty,each:zs.each,on:Qj,attr:Mj,attrTween:Dj,style:lV,styleTween:pV,text:dV,textTween:gV,remove:Yj,tween:Ej,delay:Fj,duration:Vj,ease:qj,easeVarying:Gj,end:_V,[Symbol.iterator]:zs[Symbol.iterator]};function bV(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var wV={time:null,delay:0,duration:250,ease:bV};function AV(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function EV(e){var t,n;e instanceof Ws?(t=e._id,e=e._name):(t=jI(),(n=wV).time=yb(),e=e==null?null:e+"");for(var a=this._groups,c=a.length,d=0;d<c;++d)for(var o=a[d],v=o.length,x,E=0;E<v;++E)(x=o[E])&&av(x,e,t,E,o,n||AV(x,t));return new Ws(a,this._parents,e,t)}fd.prototype.interrupt=bj;fd.prototype.transition=EV;function SV(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function sg(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,a=e.slice(0,n);return[a.length>1?a[0]+a.slice(2):a,+e.slice(n+1)]}function Pp(e){return e=sg(Math.abs(e)),e?e[1]:NaN}function CV(e,t){return function(n,a){for(var c=n.length,d=[],o=0,v=e[0],x=0;c>0&&v>0&&(x+v+1>a&&(v=Math.max(1,a-x)),d.push(n.substring(c-=v,c+v)),!((x+=v+1)>a));)v=e[o=(o+1)%e.length];return d.reverse().join(t)}}function kV(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var TV=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function lg(e){if(!(t=TV.exec(e)))throw new Error("invalid format: "+e);var t;return new _b({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}lg.prototype=_b.prototype;function _b(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}_b.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function IV(e){e:for(var t=e.length,n=1,a=-1,c;n<t;++n)switch(e[n]){case".":a=c=n;break;case"0":a===0&&(a=n),c=n;break;default:if(!+e[n])break e;a>0&&(a=0);break}return a>0?e.slice(0,a)+e.slice(c+1):e}var VI;function PV(e,t){var n=sg(e,t);if(!n)return e+"";var a=n[0],c=n[1],d=c-(VI=Math.max(-8,Math.min(8,Math.floor(c/3)))*3)+1,o=a.length;return d===o?a:d>o?a+new Array(d-o+1).join("0"):d>0?a.slice(0,d)+"."+a.slice(d):"0."+new Array(1-d).join("0")+sg(e,Math.max(0,t+d-1))[0]}function HE(e,t){var n=sg(e,t);if(!n)return e+"";var a=n[0],c=n[1];return c<0?"0."+new Array(-c).join("0")+a:a.length>c+1?a.slice(0,c+1)+"."+a.slice(c+1):a+new Array(c-a.length+2).join("0")}const ZE={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:SV,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>HE(e*100,t),r:HE,s:PV,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function KE(e){return e}var XE=Array.prototype.map,QE=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function MV(e){var t=e.grouping===void 0||e.thousands===void 0?KE:CV(XE.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",a=e.currency===void 0?"":e.currency[1]+"",c=e.decimal===void 0?".":e.decimal+"",d=e.numerals===void 0?KE:kV(XE.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",v=e.minus===void 0?"−":e.minus+"",x=e.nan===void 0?"NaN":e.nan+"";function E(P){P=lg(P);var T=P.fill,W=P.align,$=P.sign,H=P.symbol,D=P.zero,U=P.width,q=P.comma,N=P.precision,O=P.trim,te=P.type;te==="n"?(q=!0,te="g"):ZE[te]||(N===void 0&&(N=12),O=!0,te="g"),(D||T==="0"&&W==="=")&&(D=!0,T="0",W="=");var ne=H==="$"?n:H==="#"&&/[boxX]/.test(te)?"0"+te.toLowerCase():"",fe=H==="$"?a:/[%p]/.test(te)?o:"",xe=ZE[te],Te=/[defgprs%]/.test(te);N=N===void 0?6:/[gprs]/.test(te)?Math.max(1,Math.min(21,N)):Math.max(0,Math.min(20,N));function ve(Ee){var Y=ne,he=fe,Ne,We,we;if(te==="c")he=xe(Ee)+he,Ee="";else{Ee=+Ee;var be=Ee<0||1/Ee<0;if(Ee=isNaN(Ee)?x:xe(Math.abs(Ee),N),O&&(Ee=IV(Ee)),be&&+Ee==0&&$!=="+"&&(be=!1),Y=(be?$==="("?$:v:$==="-"||$==="("?"":$)+Y,he=(te==="s"?QE[8+VI/3]:"")+he+(be&&$==="("?")":""),Te){for(Ne=-1,We=Ee.length;++Ne<We;)if(we=Ee.charCodeAt(Ne),48>we||we>57){he=(we===46?c+Ee.slice(Ne+1):Ee.slice(Ne))+he,Ee=Ee.slice(0,Ne);break}}}q&&!D&&(Ee=t(Ee,1/0));var $e=Y.length+Ee.length+he.length,Le=$e<U?new Array(U-$e+1).join(T):"";switch(q&&D&&(Ee=t(Le+Ee,Le.length?U-he.length:1/0),Le=""),W){case"<":Ee=Y+Ee+he+Le;break;case"=":Ee=Y+Le+Ee+he;break;case"^":Ee=Le.slice(0,$e=Le.length>>1)+Y+Ee+he+Le.slice($e);break;default:Ee=Le+Y+Ee+he;break}return d(Ee)}return ve.toString=function(){return P+""},ve}function k(P,T){var W=E((P=lg(P),P.type="f",P)),$=Math.max(-8,Math.min(8,Math.floor(Pp(T)/3)))*3,H=Math.pow(10,-$),D=QE[8+$/3];return function(U){return W(H*U)+D}}return{format:E,formatPrefix:k}}var Wm,$I,qI;RV({thousands:",",grouping:[3],currency:["$",""]});function RV(e){return Wm=MV(e),$I=Wm.format,qI=Wm.formatPrefix,Wm}function zV(e){return Math.max(0,-Pp(Math.abs(e)))}function LV(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Pp(t)/3)))*3-Pp(Math.abs(e)))}function OV(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Pp(t)-Pp(e))+1}function WI(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const JE=Symbol("implicit");function GI(){var e=new PE,t=[],n=[],a=JE;function c(d){let o=e.get(d);if(o===void 0){if(a!==JE)return a;e.set(d,o=t.push(d)-1)}return n[o%n.length]}return c.domain=function(d){if(!arguments.length)return t.slice();t=[],e=new PE;for(const o of d)e.has(o)||e.set(o,t.push(o)-1);return c},c.range=function(d){return arguments.length?(n=Array.from(d),c):n.slice()},c.unknown=function(d){return arguments.length?(a=d,c):a},c.copy=function(){return GI(t,n).unknown(a)},WI.apply(c,arguments),c}function DV(e){return function(){return e}}function BV(e){return+e}var YE=[0,1];function ip(e){return e}function zx(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:DV(isNaN(t)?NaN:.5)}function NV(e,t){var n;return e>t&&(n=e,e=t,t=n),function(a){return Math.max(e,Math.min(t,a))}}function FV(e,t,n){var a=e[0],c=e[1],d=t[0],o=t[1];return c<a?(a=zx(c,a),d=n(o,d)):(a=zx(a,c),d=n(d,o)),function(v){return d(a(v))}}function UV(e,t,n){var a=Math.min(e.length,t.length)-1,c=new Array(a),d=new Array(a),o=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<a;)c[o]=zx(e[o],e[o+1]),d[o]=n(t[o],t[o+1]);return function(v){var x=KF(e,v,1,a)-1;return d[x](c[x](v))}}function jV(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function VV(){var e=YE,t=YE,n=mb,a,c,d,o=ip,v,x,E;function k(){var T=Math.min(e.length,t.length);return o!==ip&&(o=NV(e[0],e[T-1])),v=T>2?UV:FV,x=E=null,P}function P(T){return T==null||isNaN(T=+T)?d:(x||(x=v(e.map(a),t,n)))(a(o(T)))}return P.invert=function(T){return o(c((E||(E=v(t,e.map(a),_a)))(T)))},P.domain=function(T){return arguments.length?(e=Array.from(T,BV),k()):e.slice()},P.range=function(T){return arguments.length?(t=Array.from(T),k()):t.slice()},P.rangeRound=function(T){return t=Array.from(T),n=lj,k()},P.clamp=function(T){return arguments.length?(o=T?!0:ip,k()):o!==ip},P.interpolate=function(T){return arguments.length?(n=T,k()):n},P.unknown=function(T){return arguments.length?(d=T,P):d},function(T,W){return a=T,c=W,k()}}function $V(){return VV()(ip,ip)}function qV(e,t,n,a){var c=n8(e,t,n),d;switch(a=lg(a??",f"),a.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return a.precision==null&&!isNaN(d=LV(c,o))&&(a.precision=d),qI(a,o)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(d=OV(c,Math.max(Math.abs(e),Math.abs(t))))&&(a.precision=d-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(d=zV(c))&&(a.precision=d-(a.type==="%")*2);break}}return $I(a)}function WV(e){var t=e.domain;return e.ticks=function(n){var a=t();return r8(a[0],a[a.length-1],n??10)},e.tickFormat=function(n,a){var c=t();return qV(c[0],c[c.length-1],n??10,a)},e.nice=function(n){n==null&&(n=10);var a=t(),c=0,d=a.length-1,o=a[c],v=a[d],x,E,k=10;for(v<o&&(E=o,o=v,v=E,E=c,c=d,d=E);k-- >0;){if(E=Sx(o,v,n),E===x)return a[c]=o,a[d]=v,t(a);if(E>0)o=Math.floor(o/E)*E,v=Math.ceil(v/E)*E;else if(E<0)o=Math.ceil(o*E)/E,v=Math.floor(v*E)/E;else break;x=E}return e},e}function HI(){var e=$V();return e.copy=function(){return jV(e,HI())},WI.apply(e,arguments),WV(e)}function ff(e,t,n){this.k=e,this.x=t,this.y=n}ff.prototype={constructor:ff,scale:function(e){return e===1?this:new ff(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new ff(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};ff.prototype;const Fo=(e,t)=>{(t===null||isNaN(t)||t<9)&&(t=9);const n=10,a=t/n,c=["interpolate",["linear"],["to-number",["get",e]],0,"rgba(65, 182, 196, 0.85)"],d=[];for(let o=1;o<=n;o++){if(o===1){const v=o*a;d.push({stop:v,color:"rgba(127, 205, 187, .99)"})}if(o===2){const v=o*a;d.push({stop:v,color:"rgba(199, 233, 180, .99)"})}if(o===3){const v=o*a;d.push({stop:v,color:"rgba(220, 230, 177, 0.99)"})}if(o===4){const v=o*a;d.push({stop:v,color:"rgba(247, 237, 195,0.99)"})}if(o===5){const v=o*a;d.push({stop:v,color:"rgba(250, 240, 160, 0.99)"})}if(o===6){const v=o*a;d.push({stop:v,color:"rgba(255, 200, 118, 0.99)"})}if(o===7){const v=o*a;d.push({stop:v,color:"rgba(254, 178, 76, .99)"})}if(o===8){const v=o*a;d.push({stop:v,color:"rgba(253, 141, 60, .99)"})}if(o===9){const v=o*a;d.push({stop:v,color:"rgba(252, 78, 42, .99)"})}if(o===10){const v=o*a;d.push({stop:v,color:"rgba(227, 26, 28, .99)"})}}for(const o of d){const v=o.stop,x=o.color;c.push(v,x)}return c},GV=e=>e>11e3?Math.round(e/1e3)*1e3:e>1e3?Math.round(e/100)*100:e>100?Math.round(e/10)*10:e>10?Math.round(e/5)*5:e.toFixed(0),Gm=(e,t)=>{t.current=new Set;const n=e.current;n&&["mobility-Street-Detailed-highlighted","mobility-Block-Detailed-highlighted","mobility-Street-Detailed-other","energy-Building-highlighted","energy-Feeder-highlighted"].forEach(c=>{n.setFilter(c,["in","object_id",""]),n.setFilter(c,["in","ID_ESL",""])})},d_=(e,t)=>{const n=t.current;if(!n)return;const a=d3.select("#graph-container-mobility-summary");a.html("");const c=[];n.queryRenderedFeatures({layers:["mobility-Street-Detailed","mobility-Block-Detailed"]}).forEach(N=>{const O=N.properties.object_id;e.current.has(O)&&c.push({type:"Feature",geometry:N.geometry,properties:N.properties})});let o=[{timePeriod:"Morning",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Breakfast",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Lunch",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Afternoon",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Dinner",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Night",walk:0,bike:0,car:0,publicTransit:0}],v=[{timePeriod:"Morning",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Breakfast",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Lunch",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Afternoon",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Dinner",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Night",walk:0,bike:0,car:0,publicTransit:0}];const x=[{timePeriod:"Early Morning",walk:225.31,bike:44.53,car:1766.11,publicTransit:1508.7},{timePeriod:"Morning",walk:3207.24,bike:378.92,car:20038.77,publicTransit:6659.61},{timePeriod:"Lunch",walk:2306.27,bike:316.9,car:13787.66,publicTransit:7026.34},{timePeriod:"Afternoon",walk:1359.1,bike:186.25,car:9242.15,publicTransit:6118.57},{timePeriod:"Evening",walk:1685.12,bike:331.32,car:12511.29,publicTransit:10306.86},{timePeriod:"Night",walk:263.57,bike:51.43,car:2276.55,publicTransit:2076.8}];e.current.size===0&&(o=[...x]),c.length>0&&c.forEach(N=>{Object.keys(N.properties).forEach(O=>{const[te,ne,fe,xe,Te,ve]=O.split("_");fe==="0"&&ne==="1"&&Te==="-1"&&ve==="-1"?xe==="-1"?o[0].walk+=Number(N.properties[O]):xe==="1"?o[1].walk+=Number(N.properties[O]):xe==="2"?o[2].walk+=Number(N.properties[O]):xe==="3"?o[3].walk+=Number(N.properties[O]):xe==="4"?o[4].walk+=Number(N.properties[O]):xe==="5"&&(o[5].walk+=Number(N.properties[O])):fe==="1"&&ne==="1"&&Te==="-1"&&ve==="-1"?xe==="0"?o[0].bike+=Number(N.properties[O]):xe==="1"?o[1].bike+=Number(N.properties[O]):xe==="2"?o[2].bike+=Number(N.properties[O]):xe==="3"?o[3].bike+=Number(N.properties[O]):xe==="4"?o[4].bike+=Number(N.properties[O]):xe==="5"&&(o[5].bike+=Number(N.properties[O])):fe==="2"&&ne==="1"&&Te==="-1"&&ve==="-1"?xe==="0"?o[0].car+=Number(N.properties[O]):xe==="1"?o[1].car+=Number(N.properties[O]):xe==="2"?o[2].car+=Number(N.properties[O]):xe==="3"?o[3].car+=Number(N.properties[O]):xe==="4"?o[4].car+=Number(N.properties[O]):xe==="5"&&(o[5].car+=Number(N.properties[O])):fe==="3"&&ne==="1"&&Te==="-1"&&ve==="-1"&&(xe==="0"?o[0].publicTransit+=Number(N.properties[O]):xe==="1"?o[1].publicTransit+=Number(N.properties[O]):xe==="2"?o[2].publicTransit+=Number(N.properties[O]):xe==="3"?o[3].publicTransit+=Number(N.properties[O]):xe==="4"?o[4].publicTransit+=Number(N.properties[O]):xe==="5"&&(o[5].publicTransit+=Number(N.properties[O])))})}),c.length>0&&c.forEach(N=>{Object.keys(N.properties).forEach(O=>{const[te,ne,fe,xe,Te,ve]=O.split("_");fe==="0"&&ne==="0"&&Te==="-1"&&ve==="-1"?xe==="-1"?v[0].walk+=Number(N.properties[O]):xe==="1"?v[1].walk+=Number(N.properties[O]):xe==="2"?v[2].walk+=Number(N.properties[O]):xe==="3"?v[3].walk+=Number(N.properties[O]):xe==="4"?v[4].walk+=Number(N.properties[O]):xe==="5"&&(v[5].walk+=Number(N.properties[O])):fe==="1"&&ne==="0"&&Te==="-1"&&ve==="-1"?xe==="0"?v[0].bike+=Number(N.properties[O]):xe==="1"?v[1].bike+=Number(N.properties[O]):xe==="2"?v[2].bike+=Number(N.properties[O]):xe==="3"?v[3].bike+=Number(N.properties[O]):xe==="4"?v[4].bike+=Number(N.properties[O]):xe==="5"&&(v[5].bike+=Number(N.properties[O])):fe==="2"&&ne==="0"&&Te==="-1"&&ve==="-1"?xe==="0"?v[0].car+=Number(N.properties[O]):xe==="1"?v[1].car+=Number(N.properties[O]):xe==="2"?v[2].car+=Number(N.properties[O]):xe==="3"?v[3].car+=Number(N.properties[O]):xe==="4"?v[4].car+=Number(N.properties[O]):xe==="5"&&(v[5].car+=Number(N.properties[O])):fe==="3"&&ne==="0"&&Te==="-1"&&ve==="-1"&&(xe==="0"?v[0].publicTransit+=Number(N.properties[O]):xe==="1"?v[1].publicTransit+=Number(N.properties[O]):xe==="2"?v[2].publicTransit+=Number(N.properties[O]):xe==="3"?v[3].publicTransit+=Number(N.properties[O]):xe==="4"?v[4].publicTransit+=Number(N.properties[O]):xe==="5"&&(v[5].publicTransit+=Number(N.properties[O])))})});const E=parseInt(o.reduce((N,O)=>N+O.walk,0))+parseInt(v.reduce((N,O)=>N+O.walk,0)),k=parseInt(o.reduce((N,O)=>N+O.bike,0))+parseInt(v.reduce((N,O)=>N+O.bike,0)),P=parseInt(o.reduce((N,O)=>N+O.car,0))+parseInt(v.reduce((N,O)=>N+O.car,0)),T=parseInt(o.reduce((N,O)=>N+O.publicTransit,0))+parseInt(v.reduce((N,O)=>N+O.publicTransit,0)),W=["walk","bike","car","publicTransit"];d3.stack().keys(W)(o);const H=340,D=70,U={top:130,right:40,bottom:40,left:80},q=a.append("svg").attr("width",H).attr("height",D);q.append("rect").attr("x",H/10).attr("y",U.top-90).attr("width",55).attr("height",25).attr("fill","#f24726").attr("rx",5).attr("ry",5),q.append("text").attr("x",H/10+26).attr("y",U.top-73).attr("text-anchor","middle").attr("font-size","12px").attr("fill","white").text(`${E.toLocaleString()}`),q.append("rect").attr("x",H/10+80).attr("y",U.top-90).attr("width",55).attr("height",25).attr("fill","#fac710").attr("rx",5).attr("ry",5),q.append("text").attr("x",H/10+106).attr("y",U.top-73).attr("text-anchor","middle").attr("font-size","12px").attr("fill","white").text(`${k.toLocaleString()}`),q.append("rect").attr("x",H/10+160).attr("y",U.top-90).attr("width",55).attr("height",25).attr("fill","#2d9bf0").attr("rx",5).attr("ry",5),q.append("text").attr("x",H/10+186).attr("y",U.top-73).attr("text-anchor","middle").attr("font-size","12px").attr("fill","white").text(`${P.toLocaleString()}`),q.append("rect").attr("x",H/10+240).attr("y",U.top-90).attr("width",55).attr("height",25).attr("fill","#0263b9").attr("rx",5).attr("ry",5),q.append("text").attr("x",H/10+266).attr("y",U.top-73).attr("text-anchor","middle").attr("font-size","12px").attr("fill","white").text(`${T.toLocaleString()}`)},m_=(e,t)=>{const n=t.current;if(!n)return;const a=d3.select("#graph-container-mobility-senario");if(!a.node()){console.error("Container element not found.");return}a.html("");const c=[];n.queryRenderedFeatures({layers:["mobility-Street-Detailed","mobility-Block-Detailed"]}).forEach(te=>{const ne=te.properties.object_id;e.current.has(ne)&&c.push({type:"Feature",geometry:te.geometry,properties:te.properties})});let o=[{timePeriod:"Base Case",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Senario 1",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Senario 2",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Senario 3",walk:0,bike:0,car:0,publicTransit:0}];const v=[{timePeriod:"Base Case",walk:196.42,bike:44.66,car:1591.73,publicTransit:1473.78},{timePeriod:"Senario 1",walk:3069.64,bike:394.12,car:20284.15,publicTransit:6109.5},{timePeriod:"Senario 2",walk:3000.93,bike:416.66,car:13787.66,publicTransit:9402.27},{timePeriod:"Senario 3",walk:1331.69,bike:196.68,car:19540.22,publicTransit:6137.72}];e.current.size===0&&(o=[...v]),c.length>0&&c.forEach(te=>{Object.keys(te.properties).forEach(ne=>{const[fe,xe,Te,ve,Ee,Y]=ne.split("_");Te==="0"&&xe==="0"&&Ee==="-1"&&Y==="-1"?ve==="-1"?o[0].walk+=Number(te.properties[ne]):ve==="1"?o[1].walk+=Number(te.properties[ne]):ve==="2"?o[2].walk+=Number(te.properties[ne]):ve==="3"&&(o[3].walk+=Number(te.properties[ne])):Te==="1"&&xe==="0"&&Ee==="-1"&&Y==="-1"?ve==="0"?o[0].bike+=Number(te.properties[ne]):ve==="1"?o[1].bike+=Number(te.properties[ne]):ve==="2"?o[2].bike+=Number(te.properties[ne]):ve==="3"&&(o[3].bike+=Number(te.properties[ne])):Te==="2"&&xe==="0"&&Ee==="-1"&&Y==="-1"?ve==="0"?o[0].car+=Number(te.properties[ne]):ve==="1"?o[1].car+=Number(te.properties[ne]):ve==="2"?o[2].car+=Number(te.properties[ne]):ve==="3"&&(o[3].car+=Number(te.properties[ne])):Te==="3"&&xe==="0"&&Ee==="-1"&&Y==="-1"&&(ve==="0"?o[0].publicTransit+=Number(te.properties[ne]):ve==="1"?o[1].publicTransit+=Number(te.properties[ne]):ve==="2"?o[2].publicTransit+=Number(te.properties[ne]):ve==="3"&&(o[3].publicTransit+=Number(te.properties[ne])))})});const x=["walk","bike","car","publicTransit"],k=d3.stack().keys(x)(o),P={top:10,right:40,bottom:40,left:70},T=240,W=100,$=180,H=a.append("svg").attr("width",T+P.left+P.right).attr("height",W+P.top+P.bottom).append("g").attr("transform",`translate(${P.left},${P.top})`),D=d3.scaleBand().domain(o.map(te=>te.timePeriod)).range([0,T]).padding(.1),U=d3.scaleLinear().domain([0,d3.max(k[k.length-1],te=>te[1])]).nice().range([W,0]),q=d3.scaleOrdinal().domain(x).range(["#f24726","#fac710","#2d9bf0","#0263b9"]);H.append("g").selectAll("g").data(k).join("g").attr("fill",te=>q(te.key)).selectAll("rect").data(te=>te).join("rect").attr("x",(te,ne)=>D(o[ne].timePeriod)).attr("y",te=>U(te[1])).attr("height",te=>U(te[0])-U(te[1])).attr("width",D.bandwidth()),H.append("g").attr("transform",`translate(0,${W})`).call(d3.axisBottom(D)),H.append("g").call(d3.axisLeft(U).ticks(null,"s"));const O=H.append("g").attr("class","legend").attr("transform",`translate(${P.left}, ${$-P.bottom+30})`).selectAll(".legend-item").data(x).enter().append("g").attr("class","legend-item").attr("transform",(te,ne)=>`translate(${ne*60}, 0)`).attr("stroke","none");O.append("rect").attr("x",-80).attr("y",-20).attr("width",10).attr("height",10).style("fill",te=>q(te)),O.append("text").attr("x",-65).attr("y",-10).text(te=>te).attr("font-size","10px")},y_=(e,t)=>{const n=t.current;if(!n)return;const a=d3.select("#graph-container-weekday");a.html("");const c=[];n.queryRenderedFeatures({layers:["mobility-Street-Detailed","mobility-Block-Detailed"]}).forEach(Y=>{const he=Y.properties.object_id;e.current.has(he)&&c.push({type:"Feature",geometry:Y.geometry,properties:Y.properties})});let o=[{timePeriod:"Morning",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Breakfast",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Lunch",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Afternoon",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Dinner",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Night",walk:0,bike:0,car:0,publicTransit:0}],v=[{timePeriod:"Morning",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Breakfast",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Lunch",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Afternoon",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Dinner",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Night",walk:0,bike:0,car:0,publicTransit:0}];const x=[{timePeriod:"Early Morning",walk:225.31,bike:44.53,car:1766.11,publicTransit:1508.7},{timePeriod:"Morning",walk:3207.24,bike:378.92,car:20038.77,publicTransit:6659.61},{timePeriod:"Lunch",walk:2306.27,bike:316.9,car:13787.66,publicTransit:7026.34},{timePeriod:"Afternoon",walk:1359.1,bike:186.25,car:9242.15,publicTransit:6118.57},{timePeriod:"Evening",walk:1685.12,bike:331.32,car:12511.29,publicTransit:10306.86},{timePeriod:"Night",walk:263.57,bike:51.43,car:2276.55,publicTransit:2076.8}];e.current.size===0&&(o=[...x]),c.length>0&&c.forEach(Y=>{Object.keys(Y.properties).forEach(he=>{const[Ne,We,we,be,$e,Le]=he.split("_");we==="0"&&We==="1"&&$e==="-1"&&Le==="-1"?be==="-1"?o[0].walk+=Number(Y.properties[he]):be==="1"?o[1].walk+=Number(Y.properties[he]):be==="2"?o[2].walk+=Number(Y.properties[he]):be==="3"?o[3].walk+=Number(Y.properties[he]):be==="4"?o[4].walk+=Number(Y.properties[he]):be==="5"&&(o[5].walk+=Number(Y.properties[he])):we==="1"&&We==="1"&&$e==="-1"&&Le==="-1"?be==="0"?o[0].bike+=Number(Y.properties[he]):be==="1"?o[1].bike+=Number(Y.properties[he]):be==="2"?o[2].bike+=Number(Y.properties[he]):be==="3"?o[3].bike+=Number(Y.properties[he]):be==="4"?o[4].bike+=Number(Y.properties[he]):be==="5"&&(o[5].bike+=Number(Y.properties[he])):we==="2"&&We==="1"&&$e==="-1"&&Le==="-1"?be==="0"?o[0].car+=Number(Y.properties[he]):be==="1"?o[1].car+=Number(Y.properties[he]):be==="2"?o[2].car+=Number(Y.properties[he]):be==="3"?o[3].car+=Number(Y.properties[he]):be==="4"?o[4].car+=Number(Y.properties[he]):be==="5"&&(o[5].car+=Number(Y.properties[he])):we==="3"&&We==="1"&&$e==="-1"&&Le==="-1"&&(be==="0"?o[0].publicTransit+=Number(Y.properties[he]):be==="1"?o[1].publicTransit+=Number(Y.properties[he]):be==="2"?o[2].publicTransit+=Number(Y.properties[he]):be==="3"?o[3].publicTransit+=Number(Y.properties[he]):be==="4"?o[4].publicTransit+=Number(Y.properties[he]):be==="5"&&(o[5].publicTransit+=Number(Y.properties[he])))})}),c.length>0&&c.forEach(Y=>{Object.keys(Y.properties).forEach(he=>{const[Ne,We,we,be,$e,Le]=he.split("_");we==="0"&&We==="0"&&$e==="-1"&&Le==="-1"?be==="-1"?v[0].walk+=Number(Y.properties[he]):be==="1"?v[1].walk+=Number(Y.properties[he]):be==="2"?v[2].walk+=Number(Y.properties[he]):be==="3"?v[3].walk+=Number(Y.properties[he]):be==="4"?v[4].walk+=Number(Y.properties[he]):be==="5"&&(v[5].walk+=Number(Y.properties[he])):we==="1"&&We==="0"&&$e==="-1"&&Le==="-1"?be==="0"?v[0].bike+=Number(Y.properties[he]):be==="1"?v[1].bike+=Number(Y.properties[he]):be==="2"?v[2].bike+=Number(Y.properties[he]):be==="3"?v[3].bike+=Number(Y.properties[he]):be==="4"?v[4].bike+=Number(Y.properties[he]):be==="5"&&(v[5].bike+=Number(Y.properties[he])):we==="2"&&We==="0"&&$e==="-1"&&Le==="-1"?be==="0"?v[0].car+=Number(Y.properties[he]):be==="1"?v[1].car+=Number(Y.properties[he]):be==="2"?v[2].car+=Number(Y.properties[he]):be==="3"?v[3].car+=Number(Y.properties[he]):be==="4"?v[4].car+=Number(Y.properties[he]):be==="5"&&(v[5].car+=Number(Y.properties[he])):we==="3"&&We==="0"&&$e==="-1"&&Le==="-1"&&(be==="0"?v[0].publicTransit+=Number(Y.properties[he]):be==="1"?v[1].publicTransit+=Number(Y.properties[he]):be==="2"?v[2].publicTransit+=Number(Y.properties[he]):be==="3"?v[3].publicTransit+=Number(Y.properties[he]):be==="4"?v[4].publicTransit+=Number(Y.properties[he]):be==="5"&&(v[5].publicTransit+=Number(Y.properties[he])))})}),parseInt(o.reduce((Y,he)=>Y+he.walk,0))+parseInt(v.reduce((Y,he)=>Y+he.walk,0)),parseInt(o.reduce((Y,he)=>Y+he.bike,0))+parseInt(v.reduce((Y,he)=>Y+he.bike,0)),parseInt(o.reduce((Y,he)=>Y+he.car,0))+parseInt(v.reduce((Y,he)=>Y+he.car,0)),parseInt(o.reduce((Y,he)=>Y+he.publicTransit,0))+parseInt(v.reduce((Y,he)=>Y+he.publicTransit,0));const E=["walk","bike","car","publicTransit"],P=d3.stack().keys(E)(o),T=340,W=225,$={top:40,right:40,bottom:50,left:70},H=T-$.left-$.right,D=W-$.top-$.bottom,U=a.append("svg").attr("width",T).attr("height",W);U.append("text").attr("class","graph-title").attr("x",T/2).attr("y",$.top-25).attr("font-size","14px").attr("text-anchor","middle").text("Weekday Trip Volume and Mode Split"),U.append("text").attr("class","graph-title").attr("x",30).attr("y",$.top,0).attr("font-size","9px").attr("text-anchor","middle").text("Time Periods"),U.append("text").attr("class","graph-title").attr("x",H+90).attr("y",D+70).attr("font-size","9px").attr("text-anchor","middle").text("Number of Trips");const q=U.append("g").attr("transform",`translate(${$.left}, ${$.top})`),N=d3.scaleLinear().domain([0,d3.max(P,Y=>d3.max(Y,he=>he[1]))]).range([0,H]),O=d3.scaleBand().domain(o.map(Y=>Y.timePeriod)).range([0,D]).padding(.3),te=d3.scaleOrdinal().domain(E).range(["#f24726","#fac710","#2d9bf0","#0263b9"]);q.selectAll("g").data(P).enter().append("g").attr("fill",Y=>te(Y.key)).selectAll("rect").data(Y=>Y).enter().append("rect").attr("y",Y=>O(Y.data.timePeriod)).attr("x",Y=>N(Y[0])).attr("height",O.bandwidth()).attr("width",Y=>N(Y[1])-N(Y[0]));const fe=d3.axisLeft(O);q.append("g").call(fe);const xe=5,Te=d3.axisBottom(N).ticks(xe);q.append("g").attr("transform",`translate(0, ${D})`).call(Te),U.append("text").attr("x",T/2).attr("y",W).attr("text-anchor","middle"),U.append("text").attr("transform","rotate(-90)").attr("x",-(W/2)).attr("y",10).attr("text-anchor","middle");const Ee=U.append("g").attr("class","legend").attr("transform",`translate(${$.left}, ${W-$.bottom+30})`).selectAll(".legend-item").data(E).enter().append("g").attr("class","legend-item").attr("transform",(Y,he)=>`translate(${he*60}, 0)`).attr("stroke","none");Ee.append("rect").attr("x",0).attr("y",10).attr("width",10).attr("height",10).style("fill",Y=>te(Y)),Ee.append("text").attr("x",15).attr("y",20).text(Y=>Y).attr("font-size","10px")},g_=(e,t)=>{const n=t.current;if(!n)return;const a=d3.select("#graph-container-weekend");a.html("");const c=[];n.queryRenderedFeatures({layers:["mobility-Street-Detailed","mobility-Block-Detailed"]}).forEach(Ee=>{const Y=Ee.properties.object_id;e.current.has(Y)&&c.push({type:"Feature",geometry:Ee.geometry,properties:Ee.properties})});let o=[{timePeriod:"Morning",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Breakfast",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Lunch",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Afternoon",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Dinner",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Night",walk:0,bike:0,car:0,publicTransit:0}];const v=[{timePeriod:"Early Morning",walk:196.42,bike:44.66,car:1591.73,publicTransit:1473.78},{timePeriod:"Morning",walk:3069.64,bike:394.12,car:20284.15,publicTransit:6109.5},{timePeriod:"Lunch",walk:3000.93,bike:416.66,car:13787.66,publicTransit:9402.27},{timePeriod:"Afternoon",walk:1331.69,bike:196.68,car:19540.22,publicTransit:6137.72},{timePeriod:"Evening",walk:1916.97,bike:373.59,car:15200.76,publicTransit:11944.84},{timePeriod:"Night",walk:498.61,bike:109.18,car:4576.76,publicTransit:3883.33}];e.current.size===0&&(o=[...v]),c.length>0&&c.forEach(Ee=>{Object.keys(Ee.properties).forEach(Y=>{const[he,Ne,We,we,be,$e]=Y.split("_");We==="0"&&Ne==="0"&&be==="-1"&&$e==="-1"?we==="-1"?o[0].walk+=Number(Ee.properties[Y]):we==="1"?o[1].walk+=Number(Ee.properties[Y]):we==="2"?o[2].walk+=Number(Ee.properties[Y]):we==="3"?o[3].walk+=Number(Ee.properties[Y]):we==="4"?o[4].walk+=Number(Ee.properties[Y]):we==="5"&&(o[5].walk+=Number(Ee.properties[Y])):We==="1"&&Ne==="0"&&be==="-1"&&$e==="-1"?we==="0"?o[0].bike+=Number(Ee.properties[Y]):we==="1"?o[1].bike+=Number(Ee.properties[Y]):we==="2"?o[2].bike+=Number(Ee.properties[Y]):we==="3"?o[3].bike+=Number(Ee.properties[Y]):we==="4"?o[4].bike+=Number(Ee.properties[Y]):we==="5"&&(o[5].bike+=Number(Ee.properties[Y])):We==="2"&&Ne==="0"&&be==="-1"&&$e==="-1"?we==="0"?o[0].car+=Number(Ee.properties[Y]):we==="1"?o[1].car+=Number(Ee.properties[Y]):we==="2"?o[2].car+=Number(Ee.properties[Y]):we==="3"?o[3].car+=Number(Ee.properties[Y]):we==="4"?o[4].car+=Number(Ee.properties[Y]):we==="5"&&(o[5].car+=Number(Ee.properties[Y])):We==="3"&&Ne==="0"&&be==="-1"&&$e==="-1"&&(we==="0"?o[0].publicTransit+=Number(Ee.properties[Y]):we==="1"?o[1].publicTransit+=Number(Ee.properties[Y]):we==="2"?o[2].publicTransit+=Number(Ee.properties[Y]):we==="3"?o[3].publicTransit+=Number(Ee.properties[Y]):we==="4"?o[4].publicTransit+=Number(Ee.properties[Y]):we==="5"&&(o[5].publicTransit+=Number(Ee.properties[Y])))})});const x=["walk","bike","car","publicTransit"],k=d3.stack().keys(x)(o),P=340,T=225,W={top:40,right:40,bottom:50,left:70},$=P-W.left-W.right,H=T-W.top-W.bottom,D=a.append("svg").attr("width",P).attr("height",T);D.append("text").attr("class","graph-title").attr("x",P/2).attr("y",W.top-22).attr("font-size","14px").attr("text-anchor","middle").text("Weekend Trip Volume and Mode Split"),D.append("text").attr("class","graph-title").attr("x",30).attr("y",W.top,10).attr("font-size","9px").attr("text-anchor","middle").text("Time Periods"),D.append("text").attr("class","graph-title").attr("x",$+90).attr("y",H+70).attr("font-size","9px").attr("text-anchor","middle").text("Number of Trips");const U=D.append("g").attr("transform",`translate(${W.left}, ${W.top})`),q=d3.scaleLinear().domain([0,d3.max(k,Ee=>d3.max(Ee,Y=>Y[1]))]).range([0,$]),N=d3.scaleBand().domain(o.map(Ee=>Ee.timePeriod)).range([0,H]).padding(.3),O=d3.scaleOrdinal().domain(x).range(["#f24726","#fac710","#2d9bf0","#0263b9"]);U.selectAll("g").data(k).enter().append("g").attr("fill",Ee=>O(Ee.key)).selectAll("rect").data(Ee=>Ee).enter().append("rect").attr("y",Ee=>N(Ee.data.timePeriod)).attr("x",Ee=>q(Ee[0])).attr("height",N.bandwidth()).attr("width",Ee=>q(Ee[1])-q(Ee[0]));const ne=d3.axisLeft(N);U.append("g").call(ne);const fe=5,xe=d3.axisBottom(q).ticks(fe);U.append("g").attr("class","x-axis").attr("transform",`translate(0, ${H})`).call(xe),D.append("text").attr("x",P/2).attr("y",T).attr("text-anchor","middle"),D.append("text").attr("transform","rotate(-90)").attr("x",-(T/2)).attr("y",20).attr("text-anchor","middle");const ve=D.append("g").attr("class","legend").attr("transform",`translate(${W.left}, ${T-W.bottom+30})`).selectAll(".legend-item").data(x).enter().append("g").attr("class","legend-item").attr("transform",(Ee,Y)=>`translate(${Y*60}, 0)`).attr("stroke","none");ve.append("rect").attr("x",0).attr("y",10).attr("width",10).attr("height",10).style("fill",Ee=>O(Ee)),ve.append("text").attr("x",15).attr("y",20).text(Ee=>Ee).attr("font-size","10px")},HV=(e,t,n)=>{const a=t.current;a&&d3.json(n).then(c=>{const d=d3.select("#graph-container-energybuildingsenario");d.html("");let o=0,v=Array.from({length:12},($e,Le)=>({Month:Le+1,equipment:0,lighting:0,hotWater:0,pv:0,heating:0,cooling:0}));const x=c.features[0].properties["Gas[kWh][Mth]"];c.features[0].properties["Electricity[kWh][Mth]"];const E=c.features[0].properties["Heating[KWh][Mth]"],k=c.features[0].properties["Cooling[KWh][Mth]"],P=c.features[0].properties["Equipment[KWh][Mth]"],T=c.features[0].properties["PV[KWh][Mth]"],W=c.features[0].properties["Lighting[KWh][Mth]"],$=c.features[0].properties["HotWater[KWh][Mth]"],H=x.map(($e,Le)=>({Month:Le+1,heating:E[Le],cooling:k[Le],equipment:P[Le],lighting:W[Le],hotWater:$[Le],pv:T[Le]})),D=H.reduce(($e,Le)=>({heating:$e.heating+Le.heating,cooling:$e.cooling+Le.cooling,equipment:$e.equipment+Le.equipment,lighting:$e.lighting+Le.lighting,hotWater:$e.hotWater+Le.hotWater,pv:$e.pv+Le.pv}),{heating:0,cooling:0,equipment:0,lighting:0,hotWater:0,pv:0});if(Object.values(D).reduce(($e,Le)=>$e+Le,0),e.current.size===0)parseInt(c.features[0].properties.Area_SQM_ESL),parseInt(c.features[0].properties["Cost[$][Yr]"]),o=parseInt(c.features[0].properties["CO2[kg][Yr]"]),v=[...H];else{const $e=Array.from(e.current),Le=[];a.queryRenderedFeatures({layers:["energy-Building"]}).forEach(Ce=>{const qe=Ce.properties.ID_ESL;$e.includes(qe)&&Le.push({type:"Feature",geometry:Ce.geometry,properties:Ce.properties})}),Le.forEach(Ce=>{const qe=JSON.parse(Ce.properties["Heating[KWh][Mth]"]),gt=JSON.parse(Ce.properties["Cooling[KWh][Mth]"]),ze=JSON.parse(Ce.properties["Equipment[KWh][Mth]"]),st=JSON.parse(Ce.properties["Lighting[KWh][Mth]"]),Wt=JSON.parse(Ce.properties["HotWater[KWh][Mth]"]),Dt=JSON.parse(Ce.properties["PV[KWh][Mth]"]),Ht=JSON.parse(Ce.properties["CO2[kg][Yr]"]);JSON.parse(Ce.properties["Cost[$][Yr]"]),JSON.parse(Ce.properties.Area_SQM_ESL),console.log("co2Data:",Ht),qe.forEach((At,er)=>{const $t=er;v[$t].heating+=parseFloat(At),v[$t].cooling+=parseFloat(gt[er]),v[$t].equipment+=parseFloat(ze[er]),v[$t].lighting+=parseFloat(st[er]),v[$t].hotWater+=parseFloat(Wt[er]),v[$t].pv+=parseFloat(Dt[er])}),o+=parseInt(Ht),console.log("totalCo2:",o)})}const U=v.reduce(($e,Le)=>({heating:$e.heating+Le.heating,cooling:$e.cooling+Le.cooling,equipment:$e.equipment+Le.equipment,lighting:$e.lighting+Le.lighting,hotWater:$e.hotWater+Le.hotWater,pv:$e.pv+Le.pv}),{heating:0,cooling:0,equipment:0,lighting:0,hotWater:0,pv:0});Object.values(U).reduce(($e,Le)=>$e+Le,0);const N=d3.stack().keys(["equipment","lighting","hotWater","PV","cooling","heating"]).order(d3.stackOrderNone).offset(d3.stackOffsetNone)(v),O=360,te=240,ne={top:30,right:20,bottom:70,left:70},fe=O-ne.left-ne.right,xe=te-ne.top-ne.bottom,Te=d.append("svg").attr("width",O).attr("height",te),ve=Te.append("g").attr("transform",`translate(${ne.left}, ${ne.top})`),Ee=d3.max(v,$e=>d3.sum(Object.values($e).slice(1))),Y=d3.scaleBand().domain(v.map($e=>$e.Month)).rangeRound([0,fe]).padding(.1),he=d3.scaleLinear().domain([0,Ee]).range([xe,0]),Ne=d3.scaleOrdinal().domain(["equipment","lighting","hotWater","PV","cooling","heating"]).range(["#959595","#f2e75c","#eec176","#9C27B0","#6faadd","#cf5867"]);ve.selectAll(".stack").data(N).enter().append("g").attr("class","stack").attr("fill",$e=>Ne($e.key)).selectAll("rect").data($e=>$e).enter().append("rect").attr("x",$e=>Y($e.data.Month)).attr("y",$e=>he($e[1])).attr("height",$e=>he($e[0])-he($e[1])).attr("width",Y.bandwidth());const we=Te.append("g").attr("class","legend").attr("transform",`translate(${ne.left}, ${te-ne.bottom+20})`),be=100;Ne.domain().forEach(($e,Le)=>{const St=we.append("g").attr("transform",`translate(${Le%3*be}, ${Math.floor(Le/3)*20})`);St.append("rect").attr("x",0).attr("y",20).attr("width",10).attr("height",10).attr("fill",Ne($e)),St.append("text").attr("x",15).attr("y",25).attr("dy","0.35em").style("font-size","10px").text($e)})})},ZV=(e,t,n)=>{const a=t.current;a&&d3.json(n).then(c=>{const d=d3.select("#graph-container-energysummaryuse");d.html("");let o=0,v=0,x=0,E=Array.from({length:12},(ze,st)=>({Month:st+1,equipment:0,lighting:0,hotWater:0,pv:0,heating:0,cooling:0}));const k=c.features[0].properties["Gas[kWh][Mth]"];c.features[0].properties["Electricity[kWh][Mth]"];const P=c.features[0].properties["Heating[KWh][Mth]"],T=c.features[0].properties["Cooling[KWh][Mth]"],W=c.features[0].properties["Equipment[KWh][Mth]"],$=c.features[0].properties["PV[KWh][Mth]"],H=c.features[0].properties["Lighting[KWh][Mth]"],D=c.features[0].properties["HotWater[KWh][Mth]"],U=k.map((ze,st)=>({Month:st+1,heating:P[st],cooling:T[st],equipment:W[st],lighting:H[st],hotWater:D[st],pv:$[st]})),q=U.reduce((ze,st)=>({heating:ze.heating+st.heating,cooling:ze.cooling+st.cooling,equipment:ze.equipment+st.equipment,lighting:ze.lighting+st.lighting,hotWater:ze.hotWater+st.hotWater,pv:ze.pv+st.pv}),{heating:0,cooling:0,equipment:0,lighting:0,hotWater:0,pv:0}),N=Object.values(q).reduce((ze,st)=>ze+st,0);if(e.current.size===0)x=parseInt(c.features[0].properties.Area_SQM_ESL),v=parseInt(c.features[0].properties["Cost[$][Yr]"]),o=parseInt(c.features[0].properties["CO2[kg][Yr]"]),E=[...U];else{const ze=Array.from(e.current),st=[];a.queryRenderedFeatures({layers:["energy-Building"]}).forEach(Dt=>{const Ht=Dt.properties.ID_ESL;ze.includes(Ht)&&st.push({type:"Feature",geometry:Dt.geometry,properties:Dt.properties})}),st.forEach(Dt=>{const Ht=JSON.parse(Dt.properties["Heating[KWh][Mth]"]),At=JSON.parse(Dt.properties["Cooling[KWh][Mth]"]),er=JSON.parse(Dt.properties["Equipment[KWh][Mth]"]),$t=JSON.parse(Dt.properties["Lighting[KWh][Mth]"]),Zt=JSON.parse(Dt.properties["HotWater[KWh][Mth]"]),nt=JSON.parse(Dt.properties["PV[KWh][Mth]"]),Gt=JSON.parse(Dt.properties["CO2[kg][Yr]"]),or=JSON.parse(Dt.properties["Cost[$][Yr]"]),zr=JSON.parse(Dt.properties.Area_SQM_ESL);console.log("co2Data:",Gt),Ht.forEach((Dr,sr)=>{const Tr=sr;E[Tr].heating+=parseFloat(Dr),E[Tr].cooling+=parseFloat(At[sr]),E[Tr].equipment+=parseFloat(er[sr]),E[Tr].lighting+=parseFloat($t[sr]),E[Tr].hotWater+=parseFloat(Zt[sr]),E[Tr].pv+=parseFloat(nt[sr])}),o+=parseInt(Gt),v+=parseInt(or),x+=zr,console.log("totalCo2:",o)})}const O=E.reduce((ze,st)=>({heating:ze.heating+st.heating,cooling:ze.cooling+st.cooling,equipment:ze.equipment+st.equipment,lighting:ze.lighting+st.lighting,hotWater:ze.hotWater+st.hotWater,pv:ze.pv+st.pv}),{heating:0,cooling:0,equipment:0,lighting:0,hotWater:0,pv:0}),te=Object.values(O).reduce((ze,st)=>ze+st,0);d3.stack().keys(["equipment","lighting","hotWater","PV","cooling","heating"]).order(d3.stackOrderNone).offset(d3.stackOffsetNone)(E);const fe=380,xe=200,Te={top:170,right:50,bottom:100,left:10},ve=fe-Te.left-Te.right,Y=d.append("svg").attr("width",fe).attr("height",xe).append("g").attr("transform",`translate(${Te.left}, ${Te.top})`);var he=Te.top-300,Ne=100,We=30,we=5,be=5,$e=[{x:0,y:he,width:Ne,height:We,fill:"#89c8a6",rx:we,ry:be,value:v.toLocaleString(),title:"Cost",unit:"[$/Yr]"},{x:110,y:he,width:Ne,height:We,fill:"#d0df5a",rx:we,ry:be,value:te.toLocaleString(),title:"Total Energy",unit:"[kWh/Yr]"},{x:220,y:he,width:Ne,height:We,fill:"#f2e75c",rx:we,ry:be,value:o.toLocaleString(),title:"CO2",unit:"[kg/Yr]"}],Le=[{x:0,y:he+We+50,width:Ne,height:We,fill:"#D8E0BB",rx:we,ry:be,value:x.toLocaleString(),title:"Area",unit:"[SQM]"},{x:110,y:he+We+50,width:Ne,height:We,fill:"#B6CEC7",rx:we,ry:be,value:parseInt(te/x).toLocaleString(),title:"Normalized Energy",unit:"[kWh/SQM/Yr]"},{x:220,y:he+We+50,width:Ne,height:We,fill:"#86A3C3",rx:we,ry:be,value:(te/N).toFixed(4),title:"Percentage",unit:"[%]"}],St=Y.selectAll(".rectangle").data($e),Ce=Y.selectAll(".rectangle").data(Le),qe=St.enter().append("g").attr("class","rectangle"),gt=Ce.enter().append("g").attr("class","rectangle");qe.append("text").attr("class","graph-title").attr("x",ve/2).attr("y",Te.top/2-240).attr("font-size","14px").attr("text-anchor","middle").attr("font-family","Open Sans","sans-serif").text("Energy Use Summary"),qe.append("rect").attr("x",ze=>ze.x).attr("y",ze=>ze.y).attr("width",ze=>ze.width).attr("height",ze=>ze.height).attr("fill",ze=>ze.fill).attr("rx",ze=>ze.rx).attr("ry",ze=>ze.ry),qe.append("text").attr("x",ze=>ze.x+ze.width/2).attr("y",ze=>ze.y+ze.height/2).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("font-size","12px").style("font-weight","bold").text(ze=>ze.value),qe.append("text").attr("x",ze=>ze.x).attr("y",ze=>ze.y+ze.height+12).attr("text-anchor","left").attr("dominant-baseline","middle").attr("font-size","11px").style("font-weight","normal").text(ze=>ze.title),qe.append("text").attr("x",ze=>ze.x).attr("y",ze=>ze.y+ze.height+24).attr("text-anchor","left").attr("dominant-baseline","middle").attr("font-size","8px").style("font-weight","light").attr("fill","gray").text(ze=>ze.unit),gt.append("rect").attr("x",ze=>ze.x).attr("y",ze=>ze.y).attr("width",ze=>ze.width).attr("height",ze=>ze.height).attr("fill",ze=>ze.fill).attr("rx",ze=>ze.rx).attr("ry",ze=>ze.ry),gt.append("text").attr("x",ze=>ze.x+ze.width/2).attr("y",ze=>ze.y+ze.height/2).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("font-size","12px").style("font-weight","bold").text(ze=>ze.value),gt.append("text").attr("x",ze=>ze.x).attr("y",ze=>ze.y+ze.height+12).attr("text-anchor","left").attr("dominant-baseline","middle").attr("font-size","11px").style("font-weight","normal").text(ze=>ze.title),gt.append("text").attr("x",ze=>ze.x).attr("y",ze=>ze.y+ze.height+24).attr("text-anchor","left").attr("dominant-baseline","middle").attr("font-size","8px").style("font-weight","light").attr("fill","gray").text(ze=>ze.unit)})},eS=(e,t,n)=>{const a=t.current;a&&d3.json(n).then(c=>{const d=d3.select("#graph-container-energyenduse");d.html("");let o=0,v=Array.from({length:12},(Ce,qe)=>({Month:qe+1,equipment:0,lighting:0,hotWater:0,pv:0,heating:0,cooling:0}));const x=c.features[0].properties["Gas[kWh][Mth]"];c.features[0].properties["Electricity[kWh][Mth]"];const E=c.features[0].properties["Heating[KWh][Mth]"],k=c.features[0].properties["Cooling[KWh][Mth]"],P=c.features[0].properties["Equipment[KWh][Mth]"],T=c.features[0].properties["PV[KWh][Mth]"],W=c.features[0].properties["Lighting[KWh][Mth]"],$=c.features[0].properties["HotWater[KWh][Mth]"],H=x.map((Ce,qe)=>({Month:qe+1,heating:E[qe],cooling:k[qe],equipment:P[qe],lighting:W[qe],hotWater:$[qe],pv:T[qe]})),D=H.reduce((Ce,qe)=>({heating:Ce.heating+qe.heating,cooling:Ce.cooling+qe.cooling,equipment:Ce.equipment+qe.equipment,lighting:Ce.lighting+qe.lighting,hotWater:Ce.hotWater+qe.hotWater,pv:Ce.pv+qe.pv}),{heating:0,cooling:0,equipment:0,lighting:0,hotWater:0,pv:0});if(Object.values(D).reduce((Ce,qe)=>Ce+qe,0),e.current.size===0)parseInt(c.features[0].properties.Area_SQM_ESL),parseInt(c.features[0].properties["Cost[$][Yr]"]),o=parseInt(c.features[0].properties["CO2[kg][Yr]"]),v=[...H];else{const Ce=Array.from(e.current),qe=[];a.queryRenderedFeatures({layers:["energy-Building"]}).forEach(ze=>{const st=ze.properties.ID_ESL;Ce.includes(st)&&qe.push({type:"Feature",geometry:ze.geometry,properties:ze.properties})}),qe.forEach(ze=>{const st=JSON.parse(ze.properties["Heating[KWh][Mth]"]),Wt=JSON.parse(ze.properties["Cooling[KWh][Mth]"]),Dt=JSON.parse(ze.properties["Equipment[KWh][Mth]"]),Ht=JSON.parse(ze.properties["Lighting[KWh][Mth]"]),At=JSON.parse(ze.properties["HotWater[KWh][Mth]"]),er=JSON.parse(ze.properties["PV[KWh][Mth]"]),$t=JSON.parse(ze.properties["CO2[kg][Yr]"]);JSON.parse(ze.properties["Cost[$][Yr]"]),JSON.parse(ze.properties.Area_SQM_ESL),console.log("co2Data:",$t),st.forEach((Zt,nt)=>{const Gt=nt;v[Gt].heating+=parseFloat(Zt),v[Gt].cooling+=parseFloat(Wt[nt]),v[Gt].equipment+=parseFloat(Dt[nt]),v[Gt].lighting+=parseFloat(Ht[nt]),v[Gt].hotWater+=parseFloat(At[nt]),v[Gt].pv+=parseFloat(er[nt])}),o+=parseInt($t),console.log("totalCo2:",o)})}const U=v.reduce((Ce,qe)=>({heating:Ce.heating+qe.heating,cooling:Ce.cooling+qe.cooling,equipment:Ce.equipment+qe.equipment,lighting:Ce.lighting+qe.lighting,hotWater:Ce.hotWater+qe.hotWater,pv:Ce.pv+qe.pv}),{heating:0,cooling:0,equipment:0,lighting:0,hotWater:0,pv:0});Object.values(U).reduce((Ce,qe)=>Ce+qe,0);const N=d3.stack().keys(["equipment","lighting","hotWater","PV","cooling","heating"]).order(d3.stackOrderNone).offset(d3.stackOffsetNone)(v),O=340,te=225,ne={top:30,right:20,bottom:80,left:40},fe=O-ne.left-ne.right,xe=te-ne.top-ne.bottom,Te=d.append("svg").attr("width",O).attr("height",te),ve=Te.append("g").attr("transform",`translate(${ne.left}, ${ne.top})`);ve.append("text").attr("class","graph-title").attr("x",fe/2).attr("y",ne.top/2-30).attr("font-size","14px").attr("text-anchor","middle").text("Energy Use by End Use"),ve.append("text").attr("class","graph-title").attr("x",fe+1).attr("y",xe+30).attr("font-size","10px").attr("text-anchor","middle").text("Month"),ve.append("text").attr("class","graph-title").attr("x",-15).attr("y",ne.top-40).attr("font-size","10px").attr("text-anchor","middle").text("kWh");const Ee=d3.max(v,Ce=>d3.sum(Object.values(Ce).slice(1))),Y=d3.scaleLinear().domain([1,12]).range([0,fe]),he=d3.scaleLinear().domain([0,Ee]).range([xe,0]),Ne=d3.scaleOrdinal().domain(["equipment","lighting","hotWater","PV","cooling","heating"]).range(["#959595","#f2e75c","#eec176","#9C27B0","#6faadd","#cf5867"]);ve.append("g").attr("class","y-axis").call(d3.axisLeft(he).ticks(8).tickFormat(Ce=>{let qe=1,gt="";return Ce>=1e9?(qe=1e9,gt="G"):Ce>=1e6?(qe=1e6,gt="M"):Ce>=1e3&&(qe=1e3,gt="K"),Ce/qe+gt})),ve.selectAll(".stack").data(N).enter().append("g").attr("class","stack").attr("fill",Ce=>Ne(Ce.key)).selectAll("rect").data(Ce=>Ce).enter().append("rect").attr("x",Ce=>Y(Ce.data.Month)).attr("y",Ce=>he(Ce[1])).attr("height",Ce=>he(Ce[0])-he(Ce[1])).attr("width",Y(1)-Y(0)-5),ve.append("g").attr("class","x-axis").attr("transform",`translate(0, ${xe})`).call(d3.axisBottom(Y).ticks(12).tickFormat(d3.format("d")));const we=ve.append("g").attr("class","reference-lines");ve.selectAll(".y-axis .tick").data().map(Ce=>+Ce).forEach(Ce=>{we.append("line").attr("x1",0).attr("x2",fe+25).attr("y1",he(Ce)).attr("y2",he(Ce)).attr("class","reference-line").style("stroke","grey").attr("stroke-width",.3).style("stroke-dasharray","4 4")});const Le=Te.append("g").attr("class","legend").attr("transform",`translate(${ne.left}, ${te-ne.bottom+20})`),St=100;Ne.domain().forEach((Ce,qe)=>{const gt=Le.append("g").attr("transform",`translate(${qe%3*St}, ${Math.floor(qe/3)*20})`);gt.append("rect").attr("x",0).attr("y",20).attr("width",10).attr("height",10).attr("fill",Ne(Ce)),gt.append("text").attr("x",15).attr("y",25).attr("dy","0.35em").style("font-size","10px").text(Ce)})})},KV=(e,t)=>{const n=t.current;if(!n)return;const a=d3.select("#graph-container-energyfueluse");a.html("");let c=[{month:1,gas:0,electricity:0},{month:2,gas:0,electricity:0},{month:3,gas:0,electricity:0},{month:4,gas:0,electricity:0},{month:5,gas:0,electricity:0},{month:6,gas:0,electricity:0},{month:7,gas:0,electricity:0},{month:8,gas:0,electricity:0},{month:9,gas:0,electricity:0},{month:10,gas:0,electricity:0},{month:11,gas:0,electricity:0},{month:12,gas:0,electricity:0}];const d=[{month:1,gas:292456832,electricity:37756},{month:2,gas:243212032,electricity:33694},{month:3,gas:214523040,electricity:36607},{month:4,gas:113816456,electricity:32627},{month:5,gas:40872760,electricity:36890},{month:6,gas:13437732,electricity:38806},{month:7,gas:5359225,electricity:43566},{month:8,gas:9691384,electricity:42551},{month:9,gas:28674048,electricity:35716},{month:10,gas:80831360,electricity:34014},{month:11,gas:158096176,electricity:34262},{month:12,gas:238814736,electricity:35995}];if(e.current.size===0)c=[...d];else{const ve=[];n.queryRenderedFeatures({layers:["energy-Building"]}).forEach(Y=>{const he=Y.properties.ID_ESL;e.current.has(he)&&ve.push({type:"Feature",geometry:Y.geometry,properties:Y.properties})}),c=ve.reduce((Y,he)=>{const Ne=JSON.parse(he.properties["Gas[kWh][Mth]"]),We=JSON.parse(he.properties["Electricity[kWh][Mth]"]);return Ne.forEach((we,be)=>{Y[be]||(Y[be]={month:be+1,gas:0,electricity:0}),Y[be].gas+=Math.round(parseFloat(we)),Y[be].electricity+=Math.round(parseFloat(We[be]))}),Y},[])}const o=340,v=225,x={top:30,right:20,bottom:40,left:40},E=o-x.left-x.right,k=v-x.top-x.bottom,P=a.append("svg").attr("width",o).attr("height",v),T=P.append("g").attr("transform",`translate(${x.left}, ${x.top})`),W=d3.max(c,ve=>ve.gas),$=d3.max(c,ve=>ve.electricity),H=Math.max(W,$),D=d3.scaleLinear().domain([1,12]).range([0,E]),U=d3.scaleLinear().domain([0,H]).range([k,0]),q=d3.line().x(ve=>D(ve.month)).y(ve=>U(ve.gas)),N=d3.line().x(ve=>D(ve.month)).y(ve=>U(ve.electricity));T.append("g").attr("transform",`translate(0, ${k})`).call(d3.axisBottom(D)),T.append("g").attr("class","y-axis").call(d3.axisLeft(U).ticks(8).tickFormat(ve=>{let Ee=1,Y="";return ve>=1e9?(Ee=1e9,Y="G"):ve>=1e6?(Ee=1e6,Y="M"):ve>=1e3&&(Ee=1e3,Y="K"),ve/Ee+Y})),T.append("text").attr("class","graph-title").attr("x",E/2).attr("y",x.top-40).attr("font-size","14px").attr("text-anchor","middle").text("Energy Use by Fuel Use"),T.append("text").attr("class","graph-title").attr("x",E+1).attr("y",k+30).attr("font-size","10px").attr("text-anchor","middle").text("Month"),T.append("text").attr("class","graph-title").attr("x",-20).attr("y",x.top-40).attr("font-size","10px").attr("text-anchor","middle").text("kWh"),T.append("path").datum(c).attr("fill","none").attr("stroke","#FFB100").attr("stroke-width",2).attr("d",q),T.append("path").datum(c).attr("fill","none").attr("stroke","#1569C7").attr("stroke-width",2).attr("d",N);const O=T.append("g").attr("class","reference-lines");T.selectAll(".y-axis .tick").data().map(ve=>+ve).forEach(ve=>{O.append("line").attr("x1",0).attr("x2",E).attr("y1",U(ve)).attr("y2",U(ve)).attr("class","reference-line").style("stroke","grey").attr("stroke-width",.3).style("stroke-dasharray","4 4")});const fe=P.append("g").attr("class","legend").attr("transform",`translate(${x.left}, ${v-x.bottom})`),xe=100,Te=35;fe.append("line").attr("x1",0).attr("y1",Te).attr("x2",30).attr("y2",Te).attr("stroke","#FFB100").attr("stroke-width",2),fe.append("text").attr("x",35).attr("y",Te).attr("dy","0.35em").style("font-size","10px").style("fill","black").text("Gas"),fe.append("line").attr("x1",xe).attr("y1",Te).attr("x2",xe+30).attr("y2",Te).attr("stroke","#1569C7").attr("stroke-width",2),fe.append("text").attr("x",xe+35).attr("y",Te).attr("dy","0.35em").style("font-size","10px").style("fill","black").text("Electricity")},tS=(e,t)=>{const n=t.current;if(!n)return;const a=d3.select("#graph-container-energyone");a.html("");const c=[];n.queryRenderedFeatures({layers:["energy-Feeder"]}).forEach(we=>{const be=we.properties.ID_ESL;e.current.has(be)&&c.push({type:"Feature",geometry:we.geometry,properties:we.properties})});const o=c.reduce((we,be)=>{const $e=JSON.parse(be.properties.GasDemand_KWh),Le=JSON.parse(be.properties.ElectricityDemand_KWh);return console.log("gasData:",$e),$e.forEach((St,Ce)=>{we[Ce]||(we[Ce]={hour:Ce+1,gas:0,electricity:0}),we[Ce].gas+=Math.round(St),we[Ce].electricity+=Math.round(Le[Ce])}),we},[]),v=1,x=168,E=o.filter((we,be)=>be>=v&&be<=x),k=340,P=220,T={top:50,right:20,bottom:40,left:60},W=k-T.left-T.right,$=P-T.top-T.bottom,H=a.append("svg").attr("width",k).attr("height",P),D=H.append("g").attr("transform",`translate(${T.left}, ${T.top})`),U=d3.max(E,we=>we.gas),q=d3.max(E,we=>we.electricity),N=Math.max(U,q),O=d3.scaleLinear().domain([1,168]).range([0,W]),te=d3.scaleLinear().domain([0,N]).range([$,0]),ne=d3.line().x(we=>O(we.hour)).y(we=>te(we.gas)),fe=d3.line().x(we=>O(we.hour)).y(we=>te(we.electricity)),xe=[24,48,72,96,120,144],Te=d3.axisBottom(O).tickValues(xe);D.append("g").attr("class","x-axis").attr("transform","translate(0,"+$+")").call(Te),D.append("g").attr("class","y-axis").call(d3.axisLeft(te)),D.append("text").attr("class","graph-title").attr("x",W/2).attr("y",T.top-70).attr("font-size","13px").attr("text-anchor","middle").text("Energy Load of Winter Week").append("tspan").attr("font-size","10px").text(" (1.1-1.7)"),D.append("text").attr("class","graph-title").attr("x",-20).attr("y",T.top-60).attr("font-size","10px").attr("text-anchor","middle").text("kWh"),D.append("text").attr("class","graph-title").attr("x",W+8).attr("y",$+15).attr("font-size","10px").attr("text-anchor","middle").text("Hr");const ve=[24,48,72,96,120,144,168];D.selectAll(".vertical-line").data(ve).enter().append("line").attr("class","vertical-line").attr("x1",we=>O(we)).attr("x2",we=>O(we)).attr("y1",0).attr("y2",$).attr("stroke-width",1).style("stroke","black").style("stroke-dasharray","2");const Ee=D.append("g").attr("class","reference-lines");D.selectAll(".y-axis .tick").data().map(we=>+we).forEach(we=>{Ee.append("line").attr("x1",0).attr("x2",W).attr("y1",te(we)).attr("y2",te(we)).attr("class","reference-line").style("stroke","grey").attr("stroke-width",.3).style("stroke-dasharray","4 4")}),D.append("path").datum(E).attr("fill","none").attr("stroke","#FFB100").attr("stroke-width",2).attr("d",ne),D.append("path").datum(E).attr("fill","none").attr("stroke","#1569C7").attr("stroke-width",2).attr("d",fe);const Ne=H.append("g").attr("class","legend").attr("transform",`translate(${T.left}, ${P-T.bottom})`),We=100;Ne.append("line").attr("x1",0).attr("y1",30).attr("x2",30).attr("y2",30).attr("stroke","#FFBF00").attr("stroke-width",2),Ne.append("text").attr("x",35).attr("y",30).attr("dy","0.35em").style("font-size","10px").style("fill","black").text("Gas"),Ne.append("line").attr("x1",We).attr("y1",30).attr("x2",We+30).attr("y2",30).attr("stroke","#1569C7").attr("stroke-width",2),Ne.append("text").attr("x",We+35).attr("y",30).attr("dy","0.35em").style("font-size","10px").style("fill","black").text("Electricity")},rS=(e,t)=>{const n=t.current;if(!n)return;const a=d3.select("#graph-container-energytwo");a.html("");const c=[];n.queryRenderedFeatures({layers:["energy-Feeder"]}).forEach(we=>{const be=we.properties.ID_ESL;e.current.has(be)&&c.push({type:"Feature",geometry:we.geometry,properties:we.properties})});const o=c.reduce((we,be)=>{const $e=JSON.parse(be.properties.GasDemand_KWh),Le=JSON.parse(be.properties.ElectricityDemand_KWh);return $e.forEach((St,Ce)=>{we[Ce]||(we[Ce]={hour:Ce+1,gas:0,electricity:0}),we[Ce].gas+=Math.round(St),we[Ce].electricity+=Math.round(Le[Ce])}),we},[]),v=5285,x=5453,E=o.filter((we,be)=>be>=v&&be<=x),k=340,P=220,T={top:50,right:20,bottom:40,left:60},W=k-T.left-T.right,$=P-T.top-T.bottom,H=a.append("svg").attr("width",k).attr("height",P),D=H.append("g").attr("transform",`translate(${T.left}, ${T.top})`),U=d3.max(E,we=>we.gas),q=d3.max(E,we=>we.electricity),N=Math.max(U,q),O=d3.scaleLinear().domain([5285,5453]).range([0,W]),te=d3.scaleLinear().domain([0,N]).range([$,0]),ne=d3.line().x(we=>O(we.hour)).y(we=>te(we.gas)),fe=d3.line().x(we=>O(we.hour)).y(we=>te(we.electricity)),xe=[5309,5333,5357,5381,5405,5429],Te=d3.axisBottom(O).tickValues(xe);D.append("g").attr("class","x-axis").attr("transform","translate(0,"+$+")").call(Te),D.append("g").attr("class","y-axis").call(d3.axisLeft(te)),D.append("text").attr("class","graph-title").attr("x",W/2).attr("y",T.top-70).attr("font-size","13px").attr("text-anchor","middle").text("Energy Load of Summer Week").append("tspan").attr("font-size","10px").text(" (7.1-7.7)"),D.append("text").attr("class","graph-title").attr("x",-20).attr("y",T.top-60).attr("font-size","10px").attr("text-anchor","middle").text("kWh"),D.append("text").attr("class","graph-title").attr("x",W+8).attr("y",$+15).attr("font-size","10px").attr("text-anchor","middle").text("Hr");const ve=[5309,5333,5357,5381,5405,5429,5453];D.selectAll(".vertical-line").data(ve).enter().append("line").attr("class","vertical-line").attr("x1",we=>O(we)).attr("x2",we=>O(we)).attr("y1",0).attr("y2",$).attr("stroke-width",1).style("stroke","black").style("stroke-dasharray","2"),D.append("path").datum(E).attr("fill","none").attr("stroke","#FFB100").attr("stroke-width",2).attr("d",ne),D.append("path").datum(E).attr("fill","none").attr("stroke","#1569C7").attr("stroke-width",2).attr("d",fe);const Ee=D.append("g").attr("class","reference-lines");D.selectAll(".y-axis .tick").data().map(we=>+we).forEach(we=>{Ee.append("line").attr("x1",0).attr("x2",W).attr("y1",te(we)).attr("y2",te(we)).attr("class","reference-line").style("stroke","grey").attr("stroke-width",.3).style("stroke-dasharray","4 4")});const Ne=H.append("g").attr("class","legend").attr("transform",`translate(${T.left}, ${P-T.bottom})`),We=100;Ne.append("line").attr("x1",0).attr("y1",30).attr("x2",30).attr("y2",30).attr("stroke","#FFB100").attr("stroke-width",2),Ne.append("text").attr("x",35).attr("y",30).attr("dy","0.35em").style("font-size","10px").style("fill","black").text("Gas"),Ne.append("line").attr("x1",We).attr("y1",30).attr("x2",We+30).attr("y2",30).attr("stroke","#1569C7").attr("stroke-width",2),Ne.append("text").attr("x",We+35).attr("y",30).attr("dy","0.35em").style("font-size","10px").style("fill","black").text("Electricity")},nS=(e,t)=>{const n=t.current;if(!n)return;const a=d3.select("#graph-container-energythree");a.html("");const c=[];n.queryRenderedFeatures({layers:["energy-Feeder"]}).forEach(Y=>{const he=Y.properties.ID_ESL;e.current.has(he)&&c.push({type:"Feature",geometry:Y.geometry,properties:Y.properties})});const o=c.reduce((Y,he)=>{const Ne=JSON.parse(he.properties.GasDemand_KWh),We=JSON.parse(he.properties.ElectricityDemand_KWh);return Ne.forEach((we,be)=>{Y[be]||(Y[be]={hour:be+1,gas:0,electricity:0}),Y[be].gas+=Math.round(we),Y[be].electricity+=Math.round(We[be])}),Y},[]),v=o.map(Y=>({hour:Y.hour,gas:Y.gas,electricity:0})),x=o.map(Y=>({hour:Y.hour,gas:0,electricity:Y.electricity}));v.sort((Y,he)=>he.gas-Y.gas),x.sort((Y,he)=>he.electricity-Y.electricity),o.forEach((Y,he)=>{Y.gas=v[he].gas,Y.electricity=x[he].electricity});const E=340,k=220,P={top:60,right:20,bottom:40,left:60},T=E-P.left-P.right,W=k-P.top-P.bottom,$=a.append("svg").attr("width",E).attr("height",k),H=$.append("g").attr("transform",`translate(${P.left}, ${P.top})`),D=d3.max(o,Y=>Y.gas),U=d3.max(o,Y=>Y.electricity),q=Math.max(D,U),N=d3.scaleLinear().domain([1,8765]).range([0,T]),O=d3.scaleLinear().domain([0,q]).range([W,0]),te=d3.line().x(Y=>N(Y.hour)).y(Y=>O(Y.gas)),ne=d3.line().x(Y=>N(Y.hour)).y(Y=>O(Y.electricity));H.append("g").attr("transform",`translate(0, ${W})`).call(d3.axisBottom(N)),H.append("g").attr("class","y-axis").call(d3.axisLeft(O)),H.append("text").attr("class","graph-title").attr("x",T/2).attr("y",P.top-70).attr("font-size","14px").attr("text-anchor","middle").text("Load Duration Curve"),H.append("text").attr("class","graph-title").attr("x",-20).attr("y",P.top-70).attr("font-size","10px").attr("text-anchor","middle").text("kWh"),H.append("text").attr("class","graph-title").attr("x",T+8).attr("y",W+15).attr("font-size","10px").attr("text-anchor","middle").text("Hr"),H.append("path").datum(o).attr("fill","none").attr("stroke","#FFB100").attr("stroke-width",2).attr("d",te),H.append("path").datum(o).attr("fill","none").attr("stroke","#1569C7").attr("stroke-width",2).attr("d",ne);const fe=H.append("g").attr("class","reference-lines");H.selectAll(".y-axis .tick").data().map(Y=>+Y).forEach(Y=>{fe.append("line").attr("x1",0).attr("x2",T).attr("y1",O(Y)).attr("y2",O(Y)).attr("class","reference-line").style("stroke","grey").attr("stroke-width",.3).style("stroke-dasharray","4 4")});const ve=$.append("g").attr("class","legend").attr("transform",`translate(${P.left}, ${k-P.bottom})`),Ee=100;ve.append("line").attr("x1",0).attr("y1",30).attr("x2",30).attr("y2",30).attr("stroke","#FFB100").attr("stroke-width",2),ve.append("text").attr("x",35).attr("y",30).attr("dy","0.35em").style("font-size","10px").style("fill","black").text("Gas"),ve.append("line").attr("x1",Ee).attr("y1",30).attr("x2",Ee+30).attr("y2",30).attr("stroke","#1569C7").attr("stroke-width",2),ve.append("text").attr("x",Ee+35).attr("y",30).attr("dy","0.35em").style("font-size","10px").style("fill","black").text("Electricity")},v_=[{id:"energy-Building",label:"Building Energy"},{id:"energy-Feeder",label:"Grid Energy"},{id:"mobility-Street-Detailed",label:"Street Mobility"},{id:"mobility-Block-Detailed",label:"Block Mobility"}],__=e=>e?`${e}-highlighted`:null,x_=e=>e?`${e}-other`:null,XV=({handleDigitalTwinClick:e})=>Ie.createElement("div",{className:"home-page"},Ie.createElement("p",{className:"second-title"},"Digital Twin APIs"),Ie.createElement("img",{className:"general-image",src:"../Image/digitalTwin_withIcon.png",onClick:e}),Ie.createElement("img",{className:"general-image",src:"../Image/digitalTwinAdd.png"}),Ie.createElement("img",{className:"general-image",src:"../Image/digitalTwinBlank.png"}),Ie.createElement("img",{className:"general-image",src:"../Image/digitalTwinBlank.png"}),Ie.createElement("img",{className:"general-image",src:"../Image/digitalTwinBlank.png"}),Ie.createElement("p",{className:"second-title"},"Our Partners"),Ie.createElement("img",{className:"general-image",src:"../Image/partners.png"}),Ie.createElement("p",{className:"second-title"},"Disclaimer"),Ie.createElement("p",{className:"main-text"},'The data and the associated metadata are provided "as-is," without express or implied warranty of completeness, accuracy, or fitness for a particular purpose.')),QV="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAAA3NCSVQICAjb4U/gAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAANmElEQVR4Xu3dvaudVRrG4WRALOLIDNMMijiNNmKlhTba2Ng4lZUwndNZWKiJoEm0SND/wdJ+LLQTtFEQ7KxEEERBdBxhiIhfmefx3YKEdSY5yTn7XXvf1wU3+7U7kLNWfmbv5Jw8wa66vfZY7cHNc++2Wvui9vnm9f3aG7XPagDX4o5a3y8P1PpeGd0vvfdqfb/0M3CMbqk9V/ug9kvt8iH2Ye352q01gCv13dB3RN8VozvkoPVd1HdS3019RwFH6KbaU7Uva6MDeJh9XXu6dnMNoO+CvhP6bhjdGYdZ31F9V/WdBdyg+2qf1EaH7Ub2aa3/eA/I1XdA3wWjO+JG1ndW313AdXq89l1tdMCOYt/XnqgBefrs9x0wuhuOYn139R0GHFK/F3fY9/mvd+drQI4+86O74KjXd1jfZcA1erI2OkzHuX7fDth/fdZHd8Bxru804Coeqv1QGx2i49xPtUdqwP7qM95nfXQHHOf6Tuu7DThA/z3br2qjA7SNfVO7swbsnz7bfcZHZ38b67vtt39LALjCa7XRwdnmXq8B+6fP9ujMb3N9xwFXuLf2c210aLa5/tDO/TVgf/SZ3taHiv/f+o7ruw74nTdrowOzxt6uAfujz/TorK+xvuuAjX5vbnRQ1tzdNWD39VkenfE157NGE/jD5pV19Q/dmM3fN6/AbpvxLM9458URAHOY8YAKANgP7heG/Djg9Z2q/ac22w/P6A8M/aX27a//BeyiP9X+XZvtf/Z+rP25dunX/2IV/gRgff1zt2f8yVn9vfG35RHYUX2GZ7zn+87ru48VCYD13b55ndHMXxtwde4XDiQA1ueAAsfF/cKBfAZgfc/UXlkep/Ni7eXlkUk8XHt0eZzOW7V3lkcm8ULtpeVxOs/WXl0eIdPp2ujvyc6wczXmMvP3S39tzKXP8OjXaob5flmZtwAAIJAAAIBAAgAAAgkAAAgkAAAgkAAAgEACAAACCQAACCQAACCQAACAQAIAAAIJAAAIJAAAIJAAAIBAAgAAAgkAAAgkAAAgkAAAgEACAAACCQAACCQAACCQAACAQAIAAAIJAAAIJAAAIJAAAIBAAgAAAgkAAAgkAAAgkAAAgEACAAACCQAACCQAACCQAACAQAIAAAIJAAAIJAAAIJAAAIBAAgAAAgkAAAgkAAAgkAAAgEACAAACCQAACCQAACCQAACAQAIAAAIJAAAIJAAAIJAAAIBAAgAAAgkAAAgkAAAgkAAAgEACAAACCQAACCQAACCQAACAQAIAAAIJAAAIJAAAIJAAAIBAAgAAAgkAAAgkAAAgkAAAgEACAAACCQAACCQAACCQAACAQAIAAAIJAAAIJAAAIJAAAIBAAgAAAgkAAAgkAAAgkAAAgEACAAACCQAACCQAACCQAACAQAIAAAIJAAAIJAAAIJAAAIBAAgAAAgkAAAgkAAAgkAAAgEACAAACCQAACCQAACDQyc0r6zldu7A8Tud87dzyyCRO1f64PE7nv7VLyyOT6PN7dnmczpnaxeURMnUAXJ50fvOH3dZneHS2Z1jffazIWwAAEEgAAEAgAQAAgQQAAAQSAAAQSAAAQCABAACBBAAABBIAABBIAABAIAEAAIEEAAAEEgAAEEgAAEAgAQAAgQQAAAQSAAAQSAAAQCABAACBBAAABBIAABBIAABAIAEAAIEEAAAEEgAAEEgAAEAgAQAAgQQAAAQSAAAQSAAAQCABAACBBAAABBIAABBIAABAIAEAAIEEAAAEEgAAEEgAAEAgAQAAgQQAAAQSAAAQSAAAQCABAACBBAAABBIAABBIAABAIAEAAIEEAAAEEgAAEEgAAEAgAQAAgQQAAAQSAAAQSAAAQCABAACBBAAABBIAABBIAABAIAEAAIEEAAAEEgAAEEgAAEAgAQAAgQQAAAQSAAAQSAAAQCABAACBBAAABBIAABBIAABAIAEAAIEEAAAEEgAAEEgAAEAgAQAAgQQAAAQSAAAQSAAAQCABAACBBAAABBIAABBIAABAIAEAAIEEAAAEEgAAEEgAAEAgAQAAgQQAAAQSAAAQSAAAQCABAACBBAAABDq5eWU9p2sXlsfpnK+dWx6ZxF21e5bH6XxU+3h5ZBJ9fs8uj9M5U7u4PEKmDoDLk85v/vOZ+fulvzbm0md49Gs1w3y/rMxbAAAQSAAAQCABAACBBAAABBIAABBIAABAIAEAAIEEAAAEEgAAEEgAAEAgAQAAgQQAAAQSAAAQSAAAQCABAACBBAAABBIAABBIAABAIAEAAIEEAAAEEgAAEEgAAEAgAQAAgQQAAAQSAAAQSAAAQCABAACBBAAABBIAABBIAABAIAEAAIEEAAAEEgAAEEgAAEAgAQAAgQQAAAQSAAAQSAAAQCABAACBBAAABBIAABBIAABAIAEAAIEEAAAEEgAAEEgAAEAgAQAAgQQAAAQSAAAQSAAAQCABAACBBAAABBIAABBIAABAIAEAAIEEAAAEEgAAEEgAAEAgAQAAgQQAAAQSAAAQSAAAQCABAACBBAAABBIAABBIAABAIAEAAIEEAAAEEgAAEEgAAEAgAQAAgQQAAAQSAAAQSAAAQCABAACBBAAABBIAABBIAABAIAEAAIEEAAAEEgAAEEgAAEAgAQAAgQQAAAQSAAAQSAAAQCABAACBBAAABBIAABBIAABAIAEAAIEEAAAEEgAAEOjk5pX1nK5dWB6nc752bnlkEnfV7lkep/NR7ePlkUn0+T27PE7nTO3i8giZOgAuTzq/+cNu6zM8OtszrO8+VuQtAAAIJAAAIJAAAIBAAgAAAgkAAAgkAAAgkAAAgEACAAACCQAACCQAACCQAACAQAIAAAIJAAAIJAAAIJAAAIBAAgAAAgkAAAgkAAAgkAAAgEACAAACCQAACCQAACCQAACAQAIAAAIJAAAIJAAAIJAAAIBAAgAAAgkAAAgkAAAgkAAAgEACAAACCQAACCQAACCQAACAQAIAAAIJAAAIJAAAIJAAAIBAAgAAAgkAAAgkAAAgkAAAgEACAAACCQAACCQAACCQAACAQAIAAAIJAAAIJAAAIJAAAIBAAgAAAgkAAAgkAAAgkAAAgEACAAACCQAACCQAACCQAACAQAIAAAIJAAAIJAAAIJAAAIBAAgAAAgkAAAgkAAAgkAAAgEACAAACCQAACCQAACCQAACAQAIAAAIJAAAIJAAAIJAAAIBAAgAAAgkAAAgkAAAgkAAAgEACAAACCQAACCQAACCQAACAQAIAAAIJAAAIJAAAIJAAAIBAAgAAAgkAAAgkAAAgkAAAgEACAAACCQDYLadqf510/bUBcI1O1y5PunM15jLz90t/bcylz/Do12qG+X5ZmT8BAIBAAgAAAgkAAAgkAAAgkAAAgEACAAACCQAACCQAACCQAACAQAIAAAIJAAAIJAAAIJAAAIBAAgAAAgkAAAgkAAAgkAAAgEACAAACCQAACCQAACCQAACAQAIAAAIJAAAIJAAAIJAAAIBAAgAAAgkAAAgkAAAgkAAAgEACAAACCQAACCQAACCQAACAQAIAAAIJAAAIJAAAIJAAAIBAAgAAAgkAAAgkAAAgkAAAgEACAAACCQAACCQAACCQAACAQAIAAAIJAAAIJAAAIJAAAIBAAgAAAgkAAAgkAAAgkAAAgEACAAACCQAACCQAACCQAACAQAIAAAIJAAAIJAAAIJAAAIBAAgAAAgkAAAgkAAAgkAAAgEACAAACCQAACCQAACCQAACAQAIAAAIJAAAIJAAAIJAAAIBAAgAAAgkAAAgkAAAgkAAAgEACAAACCQAACCQAACCQAACAQAIAAAIJAAAIJAAAIJAAAIBAAgAAAgkAAAgkAAAgkAAAgEACAAACCQAACCQAACCQAACAQCc3r6znmdory+N0Xqy9vDwyiYdrjy6P03mr9s7yyCReqL20PE7n2dqryyNk+kft8qT7Zw3YXX2GR2d7hvXdx4q8BbC+zzevM5r5awOuzv3CgQTA+hxQ4Li4XziQAFjfZ7Ufl8ep/FL7dHkEdlSf4T7Ls+k7r+8+ViQA1nep9u7yOJX3at8uj8CO6jPcZ3k2fef13ceKBMAc/rV5ncmMXxNweO4XmNidtdGnZNfc3TVg9/VZHp3xNdd3HrDxZm10UNbY2zVgf/SZHp31NdZ3HfA799Z+ro0OzDbXHxi6vwbsjz7TfbZHZ36b6zuu7zrgCq/VRodmm3u9BuyfPtujM7/N9R0HDNxW+6o2Ojjb2Dc1783Bfuqz3Wd8dPa3sb7b+o4DDvBQ7Yfa6AAd536qPVID9lef8T7rozvgONd3Wt9twFU8WRsdouPcUzVg//VZH90Bx7m+04Br9HxtWx/aOV8DcvSZH90FR72+w/ouAw7p8dp3tdHBOop9X3uiBuTps993wOhuOIr13dV3GHCd7qt9UhsdsBtZ/xvhD9SAXH0H9F0wuiNuZH1n9d0F3KCbav2+3Ze10WE7zL6uPV27uQbQd0HfCX03jO6Mw6zvqL6r+s4CjtAttedqH9QO+/mAD2v9XtytNYAr9d3Qd0TfFaM75KD1XdR3Ut9NfUexI05uXtk9t9ceqz24ee799ndsv6j1z9ru1/drb9T86E3gWt1R6/ul3yLoe2V0v/T6Jw32/eJn+++cEyf+B7lj6Bznie3VAAAAAElFTkSuQmCC",JV="/assets/house-b167ac88.png",YV="/assets/building-48039102.png",e9="/assets/lightning-24aa984d.png",t9=({toggleableLayers:e,displayingLayers:t,handleLayerToggle:n})=>{const a={"mobility-Street-Detailed":QV,"mobility-Block-Detailed":JV,"energy-Building":YV,"energy-Feeder":e9};return Ie.createElement("div",{className:"dashboard-selector"},Ie.createElement("div",{className:"hr-container"},Ie.createElement("span",{class:"third-title"},"Map Dashboard Selector"),Ie.createElement("hr",{class:"sidebar-divider"})),Ie.createElement("div",{className:"dashboard-button-menu"},e.map(c=>Ie.createElement("button",{key:c.id,className:`dashboard-button ${t.includes(c.id)?"active":""}`,onClick:()=>n(c.id)},Ie.createElement("img",{src:a[c.id],alt:"Icon",className:"icon-image",style:{verticalAlign:"middle"}}),Ie.createElement("span",{className:`dashboard-${t.includes(c.id)?"label-selected":"label-unselected"}`},c.label)))))},r9=({buildingLayerCode:e,setBuildingLayerCode:t})=>Ie.createElement("select",{className:"energy-dropdown",value:e,onChange:n=>t(n.target.value)},Ie.createElement("option",{value:"Gas[kWh_m2][Yr]"},"Gas Demand"),Ie.createElement("option",{value:"Electricity[kWh_m2][Yr]"},"Electricity Demand"),Ie.createElement("option",{value:"Heating[KWh_m2][Yr]"},"Heating Demand"),Ie.createElement("option",{value:"Cooling[KWh_m2][Yr]"},"Cooling Demand"),Ie.createElement("option",{value:"Equipment[KWh_m2][Yr]"},"Equipment Demand"),Ie.createElement("option",{value:"Lighting[KWh_m2][Yr]"},"Lighting Demand"),Ie.createElement("option",{value:"HotWater[KWh_m2][Yr]"},"Hotwater Demand"),Ie.createElement("option",{value:"PV[KWh_m2][Yr]"},"Electricity Produced"));function n9(e){return Ln("MuiSvgIcon",e)}sn("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const i9=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],o9=e=>{const{color:t,fontSize:n,classes:a}=e,c={root:["root",t!=="inherit"&&`color${Hr(t)}`,`fontSize${Hr(n)}`]};return Un(c,n9,a)},a9=ir("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="inherit"&&t[`color${Hr(n.color)}`],t[`fontSize${Hr(n.fontSize)}`]]}})(({theme:e,ownerState:t})=>{var n,a,c,d,o,v,x,E,k,P,T,W,$;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:t.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(n=e.transitions)==null||(a=n.create)==null?void 0:a.call(n,"fill",{duration:(c=e.transitions)==null||(c=c.duration)==null?void 0:c.shorter}),fontSize:{inherit:"inherit",small:((d=e.typography)==null||(o=d.pxToRem)==null?void 0:o.call(d,20))||"1.25rem",medium:((v=e.typography)==null||(x=v.pxToRem)==null?void 0:x.call(v,24))||"1.5rem",large:((E=e.typography)==null||(k=E.pxToRem)==null?void 0:k.call(E,35))||"2.1875rem"}[t.fontSize],color:(P=(T=(e.vars||e).palette)==null||(T=T[t.color])==null?void 0:T.main)!=null?P:{action:(W=(e.vars||e).palette)==null||(W=W.action)==null?void 0:W.active,disabled:($=(e.vars||e).palette)==null||($=$.action)==null?void 0:$.disabled,inherit:void 0}[t.color]}}),ZI=ee.forwardRef(function(t,n){const a=jn({props:t,name:"MuiSvgIcon"}),{children:c,className:d,color:o="inherit",component:v="svg",fontSize:x="medium",htmlColor:E,inheritViewBox:k=!1,titleAccess:P,viewBox:T="0 0 24 24"}=a,W=nr(a,i9),$=ee.isValidElement(c)&&c.type==="svg",H=Ae({},a,{color:o,component:v,fontSize:x,instanceFontSize:t.fontSize,inheritViewBox:k,viewBox:T,hasSvgAsChild:$}),D={};k||(D.viewBox=T);const U=o9(H);return rt.jsxs(a9,Ae({as:v,className:fr(U.root,d),focusable:"false",color:E,"aria-hidden":P?void 0:!0,role:P?"img":void 0,ref:n},D,W,$&&c.props,{ownerState:H,children:[$?c.props.children:c,P?rt.jsx("title",{children:P}):null]}))});ZI.muiName="SvgIcon";const iS=ZI;function xb(e,t){function n(a,c){return rt.jsx(iS,Ae({"data-testid":`${t}Icon`,ref:c},a,{children:e}))}return n.muiName=iS.muiName,ee.memo(ee.forwardRef(n))}var cn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bb=Symbol.for("react.element"),wb=Symbol.for("react.portal"),sv=Symbol.for("react.fragment"),lv=Symbol.for("react.strict_mode"),uv=Symbol.for("react.profiler"),cv=Symbol.for("react.provider"),pv=Symbol.for("react.context"),s9=Symbol.for("react.server_context"),hv=Symbol.for("react.forward_ref"),fv=Symbol.for("react.suspense"),dv=Symbol.for("react.suspense_list"),mv=Symbol.for("react.memo"),yv=Symbol.for("react.lazy"),l9=Symbol.for("react.offscreen"),KI;KI=Symbol.for("react.module.reference");function la(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case bb:switch(e=e.type,e){case sv:case uv:case lv:case fv:case dv:return e;default:switch(e=e&&e.$$typeof,e){case s9:case pv:case hv:case yv:case mv:case cv:return e;default:return t}}case wb:return t}}}cn.ContextConsumer=pv;cn.ContextProvider=cv;cn.Element=bb;cn.ForwardRef=hv;cn.Fragment=sv;cn.Lazy=yv;cn.Memo=mv;cn.Portal=wb;cn.Profiler=uv;cn.StrictMode=lv;cn.Suspense=fv;cn.SuspenseList=dv;cn.isAsyncMode=function(){return!1};cn.isConcurrentMode=function(){return!1};cn.isContextConsumer=function(e){return la(e)===pv};cn.isContextProvider=function(e){return la(e)===cv};cn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===bb};cn.isForwardRef=function(e){return la(e)===hv};cn.isFragment=function(e){return la(e)===sv};cn.isLazy=function(e){return la(e)===yv};cn.isMemo=function(e){return la(e)===mv};cn.isPortal=function(e){return la(e)===wb};cn.isProfiler=function(e){return la(e)===uv};cn.isStrictMode=function(e){return la(e)===lv};cn.isSuspense=function(e){return la(e)===fv};cn.isSuspenseList=function(e){return la(e)===dv};cn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===sv||e===uv||e===lv||e===fv||e===dv||e===l9||typeof e=="object"&&e!==null&&(e.$$typeof===yv||e.$$typeof===mv||e.$$typeof===cv||e.$$typeof===pv||e.$$typeof===hv||e.$$typeof===KI||e.getModuleId!==void 0)};cn.typeOf=la;function u9(e){return Ln("MuiPaper",e)}sn("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const c9=["className","component","elevation","square","variant"],p9=e=>{const{square:t,elevation:n,variant:a,classes:c}=e,d={root:["root",a,!t&&"rounded",a==="elevation"&&`elevation${n}`]};return Un(d,u9,c)},h9=ir("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!n.square&&t.rounded,n.variant==="elevation"&&t[`elevation${n.elevation}`]]}})(({theme:e,ownerState:t})=>{var n;return Ae({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow")},!t.square&&{borderRadius:e.shape.borderRadius},t.variant==="outlined"&&{border:`1px solid ${(e.vars||e).palette.divider}`},t.variant==="elevation"&&Ae({boxShadow:(e.vars||e).shadows[t.elevation]},!e.vars&&e.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${wo("#fff",IE(t.elevation))}, ${wo("#fff",IE(t.elevation))})`},e.vars&&{backgroundImage:(n=e.vars.overlays)==null?void 0:n[t.elevation]}))}),f9=ee.forwardRef(function(t,n){const a=jn({props:t,name:"MuiPaper"}),{className:c,component:d="div",elevation:o=1,square:v=!1,variant:x="elevation"}=a,E=nr(a,c9),k=Ae({},a,{component:d,elevation:o,square:v,variant:x}),P=p9(k);return rt.jsx(h9,Ae({as:d,ownerState:k,className:fr(P.root,c),ref:n},E))}),d9=f9;function m9(e){const{className:t,classes:n,pulsate:a=!1,rippleX:c,rippleY:d,rippleSize:o,in:v,onExited:x,timeout:E}=e,[k,P]=ee.useState(!1),T=fr(t,n.ripple,n.rippleVisible,a&&n.ripplePulsate),W={width:o,height:o,top:-(o/2)+d,left:-(o/2)+c},$=fr(n.child,k&&n.childLeaving,a&&n.childPulsate);return!v&&!k&&P(!0),ee.useEffect(()=>{if(!v&&x!=null){const H=setTimeout(x,E);return()=>{clearTimeout(H)}}},[x,v,E]),rt.jsx("span",{className:T,style:W,children:rt.jsx("span",{className:$})})}const y9=sn("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),Yo=y9,g9=["center","classes","className"];let gv=e=>e,oS,aS,sS,lS;const Lx=550,v9=80,_9=rb(oS||(oS=gv`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),x9=rb(aS||(aS=gv`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),b9=rb(sS||(sS=gv`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),w9=ir("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),A9=ir(m9,{name:"MuiTouchRipple",slot:"Ripple"})(lS||(lS=gv`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),Yo.rippleVisible,_9,Lx,({theme:e})=>e.transitions.easing.easeInOut,Yo.ripplePulsate,({theme:e})=>e.transitions.duration.shorter,Yo.child,Yo.childLeaving,x9,Lx,({theme:e})=>e.transitions.easing.easeInOut,Yo.childPulsate,b9,({theme:e})=>e.transitions.easing.easeInOut),E9=ee.forwardRef(function(t,n){const a=jn({props:t,name:"MuiTouchRipple"}),{center:c=!1,classes:d={},className:o}=a,v=nr(a,g9),[x,E]=ee.useState([]),k=ee.useRef(0),P=ee.useRef(null);ee.useEffect(()=>{P.current&&(P.current(),P.current=null)},[x]);const T=ee.useRef(!1),W=PT(),$=ee.useRef(null),H=ee.useRef(null),D=ee.useCallback(O=>{const{pulsate:te,rippleX:ne,rippleY:fe,rippleSize:xe,cb:Te}=O;E(ve=>[...ve,rt.jsx(A9,{classes:{ripple:fr(d.ripple,Yo.ripple),rippleVisible:fr(d.rippleVisible,Yo.rippleVisible),ripplePulsate:fr(d.ripplePulsate,Yo.ripplePulsate),child:fr(d.child,Yo.child),childLeaving:fr(d.childLeaving,Yo.childLeaving),childPulsate:fr(d.childPulsate,Yo.childPulsate)},timeout:Lx,pulsate:te,rippleX:ne,rippleY:fe,rippleSize:xe},k.current)]),k.current+=1,P.current=Te},[d]),U=ee.useCallback((O={},te={},ne=()=>{})=>{const{pulsate:fe=!1,center:xe=c||te.pulsate,fakeElement:Te=!1}=te;if((O==null?void 0:O.type)==="mousedown"&&T.current){T.current=!1;return}(O==null?void 0:O.type)==="touchstart"&&(T.current=!0);const ve=Te?null:H.current,Ee=ve?ve.getBoundingClientRect():{width:0,height:0,left:0,top:0};let Y,he,Ne;if(xe||O===void 0||O.clientX===0&&O.clientY===0||!O.clientX&&!O.touches)Y=Math.round(Ee.width/2),he=Math.round(Ee.height/2);else{const{clientX:We,clientY:we}=O.touches&&O.touches.length>0?O.touches[0]:O;Y=Math.round(We-Ee.left),he=Math.round(we-Ee.top)}if(xe)Ne=Math.sqrt((2*Ee.width**2+Ee.height**2)/3),Ne%2===0&&(Ne+=1);else{const We=Math.max(Math.abs((ve?ve.clientWidth:0)-Y),Y)*2+2,we=Math.max(Math.abs((ve?ve.clientHeight:0)-he),he)*2+2;Ne=Math.sqrt(We**2+we**2)}O!=null&&O.touches?$.current===null&&($.current=()=>{D({pulsate:fe,rippleX:Y,rippleY:he,rippleSize:Ne,cb:ne})},W.start(v9,()=>{$.current&&($.current(),$.current=null)})):D({pulsate:fe,rippleX:Y,rippleY:he,rippleSize:Ne,cb:ne})},[c,D,W]),q=ee.useCallback(()=>{U({},{pulsate:!0})},[U]),N=ee.useCallback((O,te)=>{if(W.clear(),(O==null?void 0:O.type)==="touchend"&&$.current){$.current(),$.current=null,W.start(0,()=>{N(O,te)});return}$.current=null,E(ne=>ne.length>0?ne.slice(1):ne),P.current=te},[W]);return ee.useImperativeHandle(n,()=>({pulsate:q,start:U,stop:N}),[q,U,N]),rt.jsx(w9,Ae({className:fr(Yo.root,d.root,o),ref:H},v,{children:rt.jsx(AF,{component:null,exit:!0,children:x})}))}),S9=E9;function C9(e){return Ln("MuiButtonBase",e)}const k9=sn("MuiButtonBase",["root","disabled","focusVisible"]),T9=k9,I9=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],P9=e=>{const{disabled:t,focusVisible:n,focusVisibleClassName:a,classes:c}=e,o=Un({root:["root",t&&"disabled",n&&"focusVisible"]},C9,c);return n&&a&&(o.root+=` ${a}`),o},M9=ir("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${T9.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),R9=ee.forwardRef(function(t,n){const a=jn({props:t,name:"MuiButtonBase"}),{action:c,centerRipple:d=!1,children:o,className:v,component:x="button",disabled:E=!1,disableRipple:k=!1,disableTouchRipple:P=!1,focusRipple:T=!1,LinkComponent:W="a",onBlur:$,onClick:H,onContextMenu:D,onDragLeave:U,onFocus:q,onFocusVisible:N,onKeyDown:O,onKeyUp:te,onMouseDown:ne,onMouseLeave:fe,onMouseUp:xe,onTouchEnd:Te,onTouchMove:ve,onTouchStart:Ee,tabIndex:Y=0,TouchRippleProps:he,touchRippleRef:Ne,type:We}=a,we=nr(a,I9),be=ee.useRef(null),$e=ee.useRef(null),Le=eo($e,Ne),{isFocusVisibleRef:St,onFocus:Ce,onBlur:qe,ref:gt}=CD(),[ze,st]=ee.useState(!1);E&&ze&&st(!1),ee.useImperativeHandle(c,()=>({focusVisible:()=>{st(!0),be.current.focus()}}),[]);const[Wt,Dt]=ee.useState(!1);ee.useEffect(()=>{Dt(!0)},[]);const Ht=Wt&&!k&&!E;ee.useEffect(()=>{ze&&T&&!k&&Wt&&$e.current.pulsate()},[k,T,ze,Wt]);function At(Lt,On,Qn=P){return Us(Fi=>(On&&On(Fi),!Qn&&$e.current&&$e.current[Lt](Fi),!0))}const er=At("start",ne),$t=At("stop",D),Zt=At("stop",U),nt=At("stop",xe),Gt=At("stop",Lt=>{ze&&Lt.preventDefault(),fe&&fe(Lt)}),or=At("start",Ee),zr=At("stop",Te),Dr=At("stop",ve),sr=At("stop",Lt=>{qe(Lt),St.current===!1&&st(!1),$&&$(Lt)},!1),Tr=Us(Lt=>{be.current||(be.current=Lt.currentTarget),Ce(Lt),St.current===!0&&(st(!0),N&&N(Lt)),q&&q(Lt)}),Fr=()=>{const Lt=be.current;return x&&x!=="button"&&!(Lt.tagName==="A"&&Lt.href)},Ar=ee.useRef(!1),en=Us(Lt=>{T&&!Ar.current&&ze&&$e.current&&Lt.key===" "&&(Ar.current=!0,$e.current.stop(Lt,()=>{$e.current.start(Lt)})),Lt.target===Lt.currentTarget&&Fr()&&Lt.key===" "&&Lt.preventDefault(),O&&O(Lt),Lt.target===Lt.currentTarget&&Fr()&&Lt.key==="Enter"&&!E&&(Lt.preventDefault(),H&&H(Lt))}),Ur=Us(Lt=>{T&&Lt.key===" "&&$e.current&&ze&&!Lt.defaultPrevented&&(Ar.current=!1,$e.current.stop(Lt,()=>{$e.current.pulsate(Lt)})),te&&te(Lt),H&&Lt.target===Lt.currentTarget&&Fr()&&Lt.key===" "&&!Lt.defaultPrevented&&H(Lt)});let mr=x;mr==="button"&&(we.href||we.to)&&(mr=W);const dn={};mr==="button"?(dn.type=We===void 0?"button":We,dn.disabled=E):(!we.href&&!we.to&&(dn.role="button"),E&&(dn["aria-disabled"]=E));const xn=eo(n,gt,be),Xn=Ae({},a,{centerRipple:d,component:x,disabled:E,disableRipple:k,disableTouchRipple:P,focusRipple:T,tabIndex:Y,focusVisible:ze}),Ir=P9(Xn);return rt.jsxs(M9,Ae({as:mr,className:fr(Ir.root,v),ownerState:Xn,onBlur:sr,onClick:H,onContextMenu:$t,onFocus:Tr,onKeyDown:en,onKeyUp:Ur,onMouseDown:er,onMouseLeave:Gt,onMouseUp:nt,onDragLeave:Zt,onTouchEnd:zr,onTouchMove:Dr,onTouchStart:or,ref:xn,tabIndex:E?-1:Y,type:We},dn,we,{children:[o,Ht?rt.jsx(S9,Ae({ref:Le,center:d},he)):null]}))}),md=R9;function z9(e){return Ln("MuiTypography",e)}sn("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const L9=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],O9=e=>{const{align:t,gutterBottom:n,noWrap:a,paragraph:c,variant:d,classes:o}=e,v={root:["root",d,e.align!=="inherit"&&`align${Hr(t)}`,n&&"gutterBottom",a&&"noWrap",c&&"paragraph"]};return Un(v,z9,o)},D9=ir("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.variant&&t[n.variant],n.align!=="inherit"&&t[`align${Hr(n.align)}`],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})(({theme:e,ownerState:t})=>Ae({margin:0},t.variant==="inherit"&&{font:"inherit"},t.variant!=="inherit"&&e.typography[t.variant],t.align!=="inherit"&&{textAlign:t.align},t.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t.gutterBottom&&{marginBottom:"0.35em"},t.paragraph&&{marginBottom:16})),uS={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},B9={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},N9=e=>B9[e]||e,F9=ee.forwardRef(function(t,n){const a=jn({props:t,name:"MuiTypography"}),c=N9(a.color),d=sI(Ae({},a,{color:c})),{align:o="inherit",className:v,component:x,gutterBottom:E=!1,noWrap:k=!1,paragraph:P=!1,variant:T="body1",variantMapping:W=uS}=d,$=nr(d,L9),H=Ae({},d,{align:o,color:c,className:v,component:x,gutterBottom:E,noWrap:k,paragraph:P,variant:T,variantMapping:W}),D=x||(P?"p":W[T]||uS[T])||"span",U=O9(H);return rt.jsx(D9,Ae({as:D,ref:n,ownerState:H,className:fr(U.root,v)},$))}),U9=F9;function Ab({props:e,states:t,muiFormControl:n}){return t.reduce((a,c)=>(a[c]=e[c],n&&typeof e[c]>"u"&&(a[c]=n[c]),a),{})}const j9=ee.createContext(void 0),Eb=j9;function Sb(){return ee.useContext(Eb)}function V9(e){return rt.jsx(c6,Ae({},e,{defaultTheme:nv,themeId:pd}))}function cS(e){return e!=null&&!(Array.isArray(e)&&e.length===0)}function ug(e,t=!1){return e&&(cS(e.value)&&e.value!==""||t&&cS(e.defaultValue)&&e.defaultValue!=="")}function $9(e){return e.startAdornment}function q9(e){return Ln("MuiInputBase",e)}const W9=sn("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),Mp=W9,G9=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],vv=(e,t)=>{const{ownerState:n}=e;return[t.root,n.formControl&&t.formControl,n.startAdornment&&t.adornedStart,n.endAdornment&&t.adornedEnd,n.error&&t.error,n.size==="small"&&t.sizeSmall,n.multiline&&t.multiline,n.color&&t[`color${Hr(n.color)}`],n.fullWidth&&t.fullWidth,n.hiddenLabel&&t.hiddenLabel]},_v=(e,t)=>{const{ownerState:n}=e;return[t.input,n.size==="small"&&t.inputSizeSmall,n.multiline&&t.inputMultiline,n.type==="search"&&t.inputTypeSearch,n.startAdornment&&t.inputAdornedStart,n.endAdornment&&t.inputAdornedEnd,n.hiddenLabel&&t.inputHiddenLabel]},H9=e=>{const{classes:t,color:n,disabled:a,error:c,endAdornment:d,focused:o,formControl:v,fullWidth:x,hiddenLabel:E,multiline:k,readOnly:P,size:T,startAdornment:W,type:$}=e,H={root:["root",`color${Hr(n)}`,a&&"disabled",c&&"error",x&&"fullWidth",o&&"focused",v&&"formControl",T&&T!=="medium"&&`size${Hr(T)}`,k&&"multiline",W&&"adornedStart",d&&"adornedEnd",E&&"hiddenLabel",P&&"readOnly"],input:["input",a&&"disabled",$==="search"&&"inputTypeSearch",k&&"inputMultiline",T==="small"&&"inputSizeSmall",E&&"inputHiddenLabel",W&&"inputAdornedStart",d&&"inputAdornedEnd",P&&"readOnly"]};return Un(H,q9,t)},xv=ir("div",{name:"MuiInputBase",slot:"Root",overridesResolver:vv})(({theme:e,ownerState:t})=>Ae({},e.typography.body1,{color:(e.vars||e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${Mp.disabled}`]:{color:(e.vars||e).palette.text.disabled,cursor:"default"}},t.multiline&&Ae({padding:"4px 0 5px"},t.size==="small"&&{paddingTop:1}),t.fullWidth&&{width:"100%"})),bv=ir("input",{name:"MuiInputBase",slot:"Input",overridesResolver:_v})(({theme:e,ownerState:t})=>{const n=e.palette.mode==="light",a=Ae({color:"currentColor"},e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5},{transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})}),c={opacity:"0 !important"},d=e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5};return Ae({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":a,"&::-moz-placeholder":a,"&:-ms-input-placeholder":a,"&::-ms-input-placeholder":a,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${Mp.formControl} &`]:{"&::-webkit-input-placeholder":c,"&::-moz-placeholder":c,"&:-ms-input-placeholder":c,"&::-ms-input-placeholder":c,"&:focus::-webkit-input-placeholder":d,"&:focus::-moz-placeholder":d,"&:focus:-ms-input-placeholder":d,"&:focus::-ms-input-placeholder":d},[`&.${Mp.disabled}`]:{opacity:1,WebkitTextFillColor:(e.vars||e).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},t.size==="small"&&{paddingTop:1},t.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},t.type==="search"&&{MozAppearance:"textfield"})}),Z9=rt.jsx(V9,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),K9=ee.forwardRef(function(t,n){var a;const c=jn({props:t,name:"MuiInputBase"}),{"aria-describedby":d,autoComplete:o,autoFocus:v,className:x,components:E={},componentsProps:k={},defaultValue:P,disabled:T,disableInjectingGlobalStyles:W,endAdornment:$,fullWidth:H=!1,id:D,inputComponent:U="input",inputProps:q={},inputRef:N,maxRows:O,minRows:te,multiline:ne=!1,name:fe,onBlur:xe,onChange:Te,onClick:ve,onFocus:Ee,onKeyDown:Y,onKeyUp:he,placeholder:Ne,readOnly:We,renderSuffix:we,rows:be,slotProps:$e={},slots:Le={},startAdornment:St,type:Ce="text",value:qe}=c,gt=nr(c,G9),ze=q.value!=null?q.value:qe,{current:st}=ee.useRef(ze!=null),Wt=ee.useRef(),Dt=ee.useCallback(Ir=>{},[]),Ht=eo(Wt,N,q.ref,Dt),[At,er]=ee.useState(!1),$t=Sb(),Zt=Ab({props:c,muiFormControl:$t,states:["color","disabled","error","hiddenLabel","size","required","filled"]});Zt.focused=$t?$t.focused:At,ee.useEffect(()=>{!$t&&T&&At&&(er(!1),xe&&xe())},[$t,T,At,xe]);const nt=$t&&$t.onFilled,Gt=$t&&$t.onEmpty,or=ee.useCallback(Ir=>{ug(Ir)?nt&&nt():Gt&&Gt()},[nt,Gt]);ns(()=>{st&&or({value:ze})},[ze,or,st]);const zr=Ir=>{if(Zt.disabled){Ir.stopPropagation();return}Ee&&Ee(Ir),q.onFocus&&q.onFocus(Ir),$t&&$t.onFocus?$t.onFocus(Ir):er(!0)},Dr=Ir=>{xe&&xe(Ir),q.onBlur&&q.onBlur(Ir),$t&&$t.onBlur?$t.onBlur(Ir):er(!1)},sr=(Ir,...Lt)=>{if(!st){const On=Ir.target||Wt.current;if(On==null)throw new Error(Ol(1));or({value:On.value})}q.onChange&&q.onChange(Ir,...Lt),Te&&Te(Ir,...Lt)};ee.useEffect(()=>{or(Wt.current)},[]);const Tr=Ir=>{Wt.current&&Ir.currentTarget===Ir.target&&Wt.current.focus(),ve&&ve(Ir)};let Fr=U,Ar=q;ne&&Fr==="input"&&(be?Ar=Ae({type:void 0,minRows:be,maxRows:be},Ar):Ar=Ae({type:void 0,maxRows:O,minRows:te},Ar),Fr=aB);const en=Ir=>{or(Ir.animationName==="mui-auto-fill-cancel"?Wt.current:{value:"x"})};ee.useEffect(()=>{$t&&$t.setAdornedStart(!!St)},[$t,St]);const Ur=Ae({},c,{color:Zt.color||"primary",disabled:Zt.disabled,endAdornment:$,error:Zt.error,focused:Zt.focused,formControl:$t,fullWidth:H,hiddenLabel:Zt.hiddenLabel,multiline:ne,size:Zt.size,startAdornment:St,type:Ce}),mr=H9(Ur),dn=Le.root||E.Root||xv,xn=$e.root||k.root||{},Xn=Le.input||E.Input||bv;return Ar=Ae({},Ar,(a=$e.input)!=null?a:k.input),rt.jsxs(ee.Fragment,{children:[!W&&Z9,rt.jsxs(dn,Ae({},xn,!Cp(dn)&&{ownerState:Ae({},Ur,xn.ownerState)},{ref:n,onClick:Tr},gt,{className:fr(mr.root,xn.className,x,We&&"MuiInputBase-readOnly"),children:[St,rt.jsx(Eb.Provider,{value:null,children:rt.jsx(Xn,Ae({ownerState:Ur,"aria-invalid":Zt.error,"aria-describedby":d,autoComplete:o,autoFocus:v,defaultValue:P,disabled:Zt.disabled,id:D,onAnimationStart:en,name:fe,placeholder:Ne,readOnly:We,required:Zt.required,rows:be,value:ze,onKeyDown:Y,onKeyUp:he,type:Ce},Ar,!Cp(Xn)&&{as:Fr,ownerState:Ae({},Ur,Ar.ownerState)},{ref:Ht,className:fr(mr.input,Ar.className,We&&"MuiInputBase-readOnly"),onBlur:Dr,onChange:sr,onFocus:zr}))}),$,we?we(Ae({},Zt,{startAdornment:St})):null]}))]})}),Cb=K9;function X9(e){return Ln("MuiInput",e)}const Q9=Ae({},Mp,sn("MuiInput",["root","underline","input"])),Yh=Q9;function J9(e){return Ln("MuiOutlinedInput",e)}const Y9=Ae({},Mp,sn("MuiOutlinedInput",["root","notchedOutline","input"])),fl=Y9;function e$(e){return Ln("MuiFilledInput",e)}const t$=Ae({},Mp,sn("MuiFilledInput",["root","underline","input"])),vu=t$,r$=xb(rt.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown");function n$(e){return Ln("MuiButton",e)}const i$=sn("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),Hm=i$,o$=ee.createContext({}),a$=o$,s$=ee.createContext(void 0),l$=s$,u$=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],c$=e=>{const{color:t,disableElevation:n,fullWidth:a,size:c,variant:d,classes:o}=e,v={root:["root",d,`${d}${Hr(t)}`,`size${Hr(c)}`,`${d}Size${Hr(c)}`,t==="inherit"&&"colorInherit",n&&"disableElevation",a&&"fullWidth"],label:["label"],startIcon:["startIcon",`iconSize${Hr(c)}`],endIcon:["endIcon",`iconSize${Hr(c)}`]},x=Un(v,n$,o);return Ae({},o,x)},XI=e=>Ae({},e.size==="small"&&{"& > *:nth-of-type(1)":{fontSize:18}},e.size==="medium"&&{"& > *:nth-of-type(1)":{fontSize:20}},e.size==="large"&&{"& > *:nth-of-type(1)":{fontSize:22}}),p$=ir(md,{shouldForwardProp:e=>Aa(e)||e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`${n.variant}${Hr(n.color)}`],t[`size${Hr(n.size)}`],t[`${n.variant}Size${Hr(n.size)}`],n.color==="inherit"&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth]}})(({theme:e,ownerState:t})=>{var n,a;const c=e.palette.mode==="light"?e.palette.grey[300]:e.palette.grey[800],d=e.palette.mode==="light"?e.palette.grey.A100:e.palette.grey[700];return Ae({},e.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":Ae({textDecoration:"none",backgroundColor:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:wo(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="text"&&t.color!=="inherit"&&{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:wo(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="outlined"&&t.color!=="inherit"&&{border:`1px solid ${(e.vars||e).palette[t.color].main}`,backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:wo(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="contained"&&{backgroundColor:e.vars?e.vars.palette.Button.inheritContainedHoverBg:d,boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2],backgroundColor:(e.vars||e).palette.grey[300]}},t.variant==="contained"&&t.color!=="inherit"&&{backgroundColor:(e.vars||e).palette[t.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t.color].main}}),"&:active":Ae({},t.variant==="contained"&&{boxShadow:(e.vars||e).shadows[8]}),[`&.${Hm.focusVisible}`]:Ae({},t.variant==="contained"&&{boxShadow:(e.vars||e).shadows[6]}),[`&.${Hm.disabled}`]:Ae({color:(e.vars||e).palette.action.disabled},t.variant==="outlined"&&{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`},t.variant==="contained"&&{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground})},t.variant==="text"&&{padding:"6px 8px"},t.variant==="text"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].main},t.variant==="outlined"&&{padding:"5px 15px",border:"1px solid currentColor"},t.variant==="outlined"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].main,border:e.vars?`1px solid rgba(${e.vars.palette[t.color].mainChannel} / 0.5)`:`1px solid ${wo(e.palette[t.color].main,.5)}`},t.variant==="contained"&&{color:e.vars?e.vars.palette.text.primary:(n=(a=e.palette).getContrastText)==null?void 0:n.call(a,e.palette.grey[300]),backgroundColor:e.vars?e.vars.palette.Button.inheritContainedBg:c,boxShadow:(e.vars||e).shadows[2]},t.variant==="contained"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].contrastText,backgroundColor:(e.vars||e).palette[t.color].main},t.color==="inherit"&&{color:"inherit",borderColor:"currentColor"},t.size==="small"&&t.variant==="text"&&{padding:"4px 5px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="text"&&{padding:"8px 11px",fontSize:e.typography.pxToRem(15)},t.size==="small"&&t.variant==="outlined"&&{padding:"3px 9px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="outlined"&&{padding:"7px 21px",fontSize:e.typography.pxToRem(15)},t.size==="small"&&t.variant==="contained"&&{padding:"4px 10px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="contained"&&{padding:"8px 22px",fontSize:e.typography.pxToRem(15)},t.fullWidth&&{width:"100%"})},({ownerState:e})=>e.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${Hm.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${Hm.disabled}`]:{boxShadow:"none"}}),h$=ir("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.startIcon,t[`iconSize${Hr(n.size)}`]]}})(({ownerState:e})=>Ae({display:"inherit",marginRight:8,marginLeft:-4},e.size==="small"&&{marginLeft:-2},XI(e))),f$=ir("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.endIcon,t[`iconSize${Hr(n.size)}`]]}})(({ownerState:e})=>Ae({display:"inherit",marginRight:-4,marginLeft:8},e.size==="small"&&{marginRight:-2},XI(e))),d$=ee.forwardRef(function(t,n){const a=ee.useContext(a$),c=ee.useContext(l$),d=H1(a,t),o=jn({props:d,name:"MuiButton"}),{children:v,color:x="primary",component:E="button",className:k,disabled:P=!1,disableElevation:T=!1,disableFocusRipple:W=!1,endIcon:$,focusVisibleClassName:H,fullWidth:D=!1,size:U="medium",startIcon:q,type:N,variant:O="text"}=o,te=nr(o,u$),ne=Ae({},o,{color:x,component:E,disabled:P,disableElevation:T,disableFocusRipple:W,fullWidth:D,size:U,type:N,variant:O}),fe=c$(ne),xe=q&&rt.jsx(h$,{className:fe.startIcon,ownerState:ne,children:q}),Te=$&&rt.jsx(f$,{className:fe.endIcon,ownerState:ne,children:$}),ve=c||"";return rt.jsxs(p$,Ae({ownerState:ne,className:fr(a.className,fe.root,k,ve),component:E,disabled:P,focusRipple:!W,focusVisibleClassName:fr(fe.focusVisible,H),ref:n,type:N},te,{classes:fe,children:[xe,v,Te]}))}),m$=d$,y$=sn("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),pS=y$,g$=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],v$=e=>{const{classes:t,disableUnderline:n}=e,c=Un({root:["root",!n&&"underline"],input:["input"]},e$,t);return Ae({},t,c)},_$=ir(xv,{shouldForwardProp:e=>Aa(e)||e==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...vv(e,t),!n.disableUnderline&&t.underline]}})(({theme:e,ownerState:t})=>{var n;const a=e.palette.mode==="light",c=a?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",d=a?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",o=a?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",v=a?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return Ae({position:"relative",backgroundColor:e.vars?e.vars.palette.FilledInput.bg:d,borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:e.vars?e.vars.palette.FilledInput.hoverBg:o,"@media (hover: none)":{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:d}},[`&.${vu.focused}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:d},[`&.${vu.disabled}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.disabledBg:v}},!t.disableUnderline&&{"&::after":{borderBottom:`2px solid ${(n=(e.vars||e).palette[t.color||"primary"])==null?void 0:n.main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${vu.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${vu.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`:c}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${vu.disabled}, .${vu.error}):before`]:{borderBottom:`1px solid ${(e.vars||e).palette.text.primary}`},[`&.${vu.disabled}:before`]:{borderBottomStyle:"dotted"}},t.startAdornment&&{paddingLeft:12},t.endAdornment&&{paddingRight:12},t.multiline&&Ae({padding:"25px 12px 8px"},t.size==="small"&&{paddingTop:21,paddingBottom:4},t.hiddenLabel&&{paddingTop:16,paddingBottom:17},t.hiddenLabel&&t.size==="small"&&{paddingTop:8,paddingBottom:9}))}),x$=ir(bv,{name:"MuiFilledInput",slot:"Input",overridesResolver:_v})(({theme:e,ownerState:t})=>Ae({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},e.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},t.size==="small"&&{paddingTop:21,paddingBottom:4},t.hiddenLabel&&{paddingTop:16,paddingBottom:17},t.startAdornment&&{paddingLeft:0},t.endAdornment&&{paddingRight:0},t.hiddenLabel&&t.size==="small"&&{paddingTop:8,paddingBottom:9},t.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0})),QI=ee.forwardRef(function(t,n){var a,c,d,o;const v=jn({props:t,name:"MuiFilledInput"}),{components:x={},componentsProps:E,fullWidth:k=!1,inputComponent:P="input",multiline:T=!1,slotProps:W,slots:$={},type:H="text"}=v,D=nr(v,g$),U=Ae({},v,{fullWidth:k,inputComponent:P,multiline:T,type:H}),q=v$(v),N={root:{ownerState:U},input:{ownerState:U}},O=W??E?Co(N,W??E):N,te=(a=(c=$.root)!=null?c:x.Root)!=null?a:_$,ne=(d=(o=$.input)!=null?o:x.Input)!=null?d:x$;return rt.jsx(Cb,Ae({slots:{root:te,input:ne},componentsProps:O,fullWidth:k,inputComponent:P,multiline:T,ref:n,type:H},D,{classes:q}))});QI.muiName="Input";const b$=QI;function w$(e){return Ln("MuiFormControl",e)}sn("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const A$=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],E$=e=>{const{classes:t,margin:n,fullWidth:a}=e,c={root:["root",n!=="none"&&`margin${Hr(n)}`,a&&"fullWidth"]};return Un(c,w$,t)},S$=ir("div",{name:"MuiFormControl",slot:"Root",overridesResolver:({ownerState:e},t)=>Ae({},t.root,t[`margin${Hr(e.margin)}`],e.fullWidth&&t.fullWidth)})(({ownerState:e})=>Ae({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},e.margin==="normal"&&{marginTop:16,marginBottom:8},e.margin==="dense"&&{marginTop:8,marginBottom:4},e.fullWidth&&{width:"100%"})),C$=ee.forwardRef(function(t,n){const a=jn({props:t,name:"MuiFormControl"}),{children:c,className:d,color:o="primary",component:v="div",disabled:x=!1,error:E=!1,focused:k,fullWidth:P=!1,hiddenLabel:T=!1,margin:W="none",required:$=!1,size:H="medium",variant:D="outlined"}=a,U=nr(a,A$),q=Ae({},a,{color:o,component:v,disabled:x,error:E,fullWidth:P,hiddenLabel:T,margin:W,required:$,size:H,variant:D}),N=E$(q),[O,te]=ee.useState(()=>{let he=!1;return c&&ee.Children.forEach(c,Ne=>{if(!py(Ne,["Input","Select"]))return;const We=py(Ne,["Select"])?Ne.props.input:Ne;We&&$9(We.props)&&(he=!0)}),he}),[ne,fe]=ee.useState(()=>{let he=!1;return c&&ee.Children.forEach(c,Ne=>{py(Ne,["Input","Select"])&&(ug(Ne.props,!0)||ug(Ne.props.inputProps,!0))&&(he=!0)}),he}),[xe,Te]=ee.useState(!1);x&&xe&&Te(!1);const ve=k!==void 0&&!x?k:xe;let Ee;const Y=ee.useMemo(()=>({adornedStart:O,setAdornedStart:te,color:o,disabled:x,error:E,filled:ne,focused:ve,fullWidth:P,hiddenLabel:T,size:H,onBlur:()=>{Te(!1)},onEmpty:()=>{fe(!1)},onFilled:()=>{fe(!0)},onFocus:()=>{Te(!0)},registerEffect:Ee,required:$,variant:D}),[O,o,x,E,ne,ve,P,T,Ee,$,H,D]);return rt.jsx(Eb.Provider,{value:Y,children:rt.jsx(S$,Ae({as:v,ownerState:q,className:fr(N.root,d),ref:n},U,{children:c}))})}),k$=C$,T$=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function Ox(e){return`scale(${e}, ${e**2})`}const I$={entering:{opacity:1,transform:Ox(1)},entered:{opacity:1,transform:"none"}},b_=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),JI=ee.forwardRef(function(t,n){const{addEndListener:a,appear:c=!0,children:d,easing:o,in:v,onEnter:x,onEntered:E,onEntering:k,onExit:P,onExited:T,onExiting:W,style:$,timeout:H="auto",TransitionComponent:D=pI}=t,U=nr(t,T$),q=PT(),N=ee.useRef(),O=hd(),te=ee.useRef(null),ne=eo(te,d.ref,n),fe=We=>we=>{if(We){const be=te.current;we===void 0?We(be):We(be,we)}},xe=fe(k),Te=fe((We,we)=>{hI(We);const{duration:be,delay:$e,easing:Le}=Qy({style:$,timeout:H,easing:o},{mode:"enter"});let St;H==="auto"?(St=O.transitions.getAutoHeightDuration(We.clientHeight),N.current=St):St=be,We.style.transition=[O.transitions.create("opacity",{duration:St,delay:$e}),O.transitions.create("transform",{duration:b_?St:St*.666,delay:$e,easing:Le})].join(","),x&&x(We,we)}),ve=fe(E),Ee=fe(W),Y=fe(We=>{const{duration:we,delay:be,easing:$e}=Qy({style:$,timeout:H,easing:o},{mode:"exit"});let Le;H==="auto"?(Le=O.transitions.getAutoHeightDuration(We.clientHeight),N.current=Le):Le=we,We.style.transition=[O.transitions.create("opacity",{duration:Le,delay:be}),O.transitions.create("transform",{duration:b_?Le:Le*.666,delay:b_?be:be||Le*.333,easing:$e})].join(","),We.style.opacity=0,We.style.transform=Ox(.75),P&&P(We)}),he=fe(T),Ne=We=>{H==="auto"&&q.start(N.current||0,We),a&&a(te.current,We)};return rt.jsx(D,Ae({appear:c,in:v,nodeRef:te,onEnter:Te,onEntered:ve,onEntering:xe,onExit:Y,onExited:he,onExiting:Ee,addEndListener:Ne,timeout:H==="auto"?null:H},U,{children:(We,we)=>ee.cloneElement(d,Ae({style:Ae({opacity:0,transform:Ox(.75),visibility:We==="exited"&&!v?"hidden":void 0},I$[We],$,d.props.style),ref:ne},we))}))});JI.muiSupportAuto=!0;const P$=JI,M$=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],R$=e=>{const{classes:t,disableUnderline:n}=e,c=Un({root:["root",!n&&"underline"],input:["input"]},X9,t);return Ae({},t,c)},z$=ir(xv,{shouldForwardProp:e=>Aa(e)||e==="classes",name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...vv(e,t),!n.disableUnderline&&t.underline]}})(({theme:e,ownerState:t})=>{let a=e.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return e.vars&&(a=`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`),Ae({position:"relative"},t.formControl&&{"label + &":{marginTop:16}},!t.disableUnderline&&{"&::after":{borderBottom:`2px solid ${(e.vars||e).palette[t.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Yh.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Yh.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${a}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Yh.disabled}, .${Yh.error}):before`]:{borderBottom:`2px solid ${(e.vars||e).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${a}`}},[`&.${Yh.disabled}:before`]:{borderBottomStyle:"dotted"}})}),L$=ir(bv,{name:"MuiInput",slot:"Input",overridesResolver:_v})({}),YI=ee.forwardRef(function(t,n){var a,c,d,o;const v=jn({props:t,name:"MuiInput"}),{disableUnderline:x,components:E={},componentsProps:k,fullWidth:P=!1,inputComponent:T="input",multiline:W=!1,slotProps:$,slots:H={},type:D="text"}=v,U=nr(v,M$),q=R$(v),O={root:{ownerState:{disableUnderline:x}}},te=$??k?Co($??k,O):O,ne=(a=(c=H.root)!=null?c:E.Root)!=null?a:z$,fe=(d=(o=H.input)!=null?o:E.Input)!=null?d:L$;return rt.jsx(Cb,Ae({slots:{root:ne,input:fe},slotProps:te,fullWidth:P,inputComponent:T,multiline:W,ref:n,type:D},U,{classes:q}))});YI.muiName="Input";const O$=YI,D$=ee.createContext({}),zu=D$;function B$(e){return Ln("MuiList",e)}sn("MuiList",["root","padding","dense","subheader"]);const N$=["children","className","component","dense","disablePadding","subheader"],F$=e=>{const{classes:t,disablePadding:n,dense:a,subheader:c}=e;return Un({root:["root",!n&&"padding",a&&"dense",c&&"subheader"]},B$,t)},U$=ir("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disablePadding&&t.padding,n.dense&&t.dense,n.subheader&&t.subheader]}})(({ownerState:e})=>Ae({listStyle:"none",margin:0,padding:0,position:"relative"},!e.disablePadding&&{paddingTop:8,paddingBottom:8},e.subheader&&{paddingTop:0})),j$=ee.forwardRef(function(t,n){const a=jn({props:t,name:"MuiList"}),{children:c,className:d,component:o="ul",dense:v=!1,disablePadding:x=!1,subheader:E}=a,k=nr(a,N$),P=ee.useMemo(()=>({dense:v}),[v]),T=Ae({},a,{component:o,dense:v,disablePadding:x}),W=F$(T);return rt.jsx(zu.Provider,{value:P,children:rt.jsxs(U$,Ae({as:o,className:fr(W.root,d),ref:n,ownerState:T},k,{children:[E,c]}))})}),eP=j$;function V$(e){return Ln("MuiListItem",e)}const $$=sn("MuiListItem",["root","container","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","padding","button","secondaryAction","selected"]),Qc=$$,q$=sn("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]),W$=q$;function G$(e){return Ln("MuiListItemSecondaryAction",e)}sn("MuiListItemSecondaryAction",["root","disableGutters"]);const H$=["className"],Z$=e=>{const{disableGutters:t,classes:n}=e;return Un({root:["root",t&&"disableGutters"]},G$,n)},K$=ir("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.disableGutters&&t.disableGutters]}})(({ownerState:e})=>Ae({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"},e.disableGutters&&{right:0})),tP=ee.forwardRef(function(t,n){const a=jn({props:t,name:"MuiListItemSecondaryAction"}),{className:c}=a,d=nr(a,H$),o=ee.useContext(zu),v=Ae({},a,{disableGutters:o.disableGutters}),x=Z$(v);return rt.jsx(K$,Ae({className:fr(x.root,c),ownerState:v,ref:n},d))});tP.muiName="ListItemSecondaryAction";const X$=tP,Q$=["className"],J$=["alignItems","autoFocus","button","children","className","component","components","componentsProps","ContainerComponent","ContainerProps","dense","disabled","disableGutters","disablePadding","divider","focusVisibleClassName","secondaryAction","selected","slotProps","slots"],Y$=(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.alignItems==="flex-start"&&t.alignItemsFlexStart,n.divider&&t.divider,!n.disableGutters&&t.gutters,!n.disablePadding&&t.padding,n.button&&t.button,n.hasSecondaryAction&&t.secondaryAction]},e7=e=>{const{alignItems:t,button:n,classes:a,dense:c,disabled:d,disableGutters:o,disablePadding:v,divider:x,hasSecondaryAction:E,selected:k}=e;return Un({root:["root",c&&"dense",!o&&"gutters",!v&&"padding",x&&"divider",d&&"disabled",n&&"button",t==="flex-start"&&"alignItemsFlexStart",E&&"secondaryAction",k&&"selected"],container:["container"]},V$,a)},t7=ir("div",{name:"MuiListItem",slot:"Root",overridesResolver:Y$})(({theme:e,ownerState:t})=>Ae({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left"},!t.disablePadding&&Ae({paddingTop:8,paddingBottom:8},t.dense&&{paddingTop:4,paddingBottom:4},!t.disableGutters&&{paddingLeft:16,paddingRight:16},!!t.secondaryAction&&{paddingRight:48}),!!t.secondaryAction&&{[`& > .${W$.root}`]:{paddingRight:48}},{[`&.${Qc.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${Qc.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:wo(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${Qc.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:wo(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${Qc.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},t.alignItems==="flex-start"&&{alignItems:"flex-start"},t.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},t.button&&{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Qc.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:wo(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:wo(e.palette.primary.main,e.palette.action.selectedOpacity)}}},t.hasSecondaryAction&&{paddingRight:48})),r7=ir("li",{name:"MuiListItem",slot:"Container",overridesResolver:(e,t)=>t.container})({position:"relative"}),n7=ee.forwardRef(function(t,n){const a=jn({props:t,name:"MuiListItem"}),{alignItems:c="center",autoFocus:d=!1,button:o=!1,children:v,className:x,component:E,components:k={},componentsProps:P={},ContainerComponent:T="li",ContainerProps:{className:W}={},dense:$=!1,disabled:H=!1,disableGutters:D=!1,disablePadding:U=!1,divider:q=!1,focusVisibleClassName:N,secondaryAction:O,selected:te=!1,slotProps:ne={},slots:fe={}}=a,xe=nr(a.ContainerProps,Q$),Te=nr(a,J$),ve=ee.useContext(zu),Ee=ee.useMemo(()=>({dense:$||ve.dense||!1,alignItems:c,disableGutters:D}),[c,ve.dense,$,D]),Y=ee.useRef(null);ns(()=>{d&&Y.current&&Y.current.focus()},[d]);const he=ee.Children.toArray(v),Ne=he.length&&py(he[he.length-1],["ListItemSecondaryAction"]),We=Ae({},a,{alignItems:c,autoFocus:d,button:o,dense:Ee.dense,disabled:H,disableGutters:D,disablePadding:U,divider:q,hasSecondaryAction:Ne,selected:te}),we=e7(We),be=eo(Y,n),$e=fe.root||k.Root||t7,Le=ne.root||P.root||{},St=Ae({className:fr(we.root,Le.className,x),disabled:H},Te);let Ce=E||"li";return o&&(St.component=E||"div",St.focusVisibleClassName=fr(Qc.focusVisible,N),Ce=md),Ne?(Ce=!St.component&&!E?"div":Ce,T==="li"&&(Ce==="li"?Ce="div":St.component==="li"&&(St.component="div")),rt.jsx(zu.Provider,{value:Ee,children:rt.jsxs(r7,Ae({as:T,className:fr(we.container,W),ref:be,ownerState:We},xe,{children:[rt.jsx($e,Ae({},Le,!Cp($e)&&{as:Ce,ownerState:Ae({},We,Le.ownerState)},St,{children:he})),he.pop()]}))})):rt.jsx(zu.Provider,{value:Ee,children:rt.jsxs($e,Ae({},Le,{as:Ce,ref:be},!Cp($e)&&{ownerState:Ae({},We,Le.ownerState)},St,{children:[he,O&&rt.jsx(X$,{children:O})]}))})}),i7=n7,o7=sn("MuiListItemIcon",["root","alignItemsFlexStart"]),hS=o7,a7=sn("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),fS=a7,s7=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function w_(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function dS(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function rP(e,t){if(t===void 0)return!0;let n=e.innerText;return n===void 0&&(n=e.textContent),n=n.trim().toLowerCase(),n.length===0?!1:t.repeating?n[0]===t.keys[0]:n.indexOf(t.keys.join(""))===0}function ef(e,t,n,a,c,d){let o=!1,v=c(e,t,t?n:!1);for(;v;){if(v===e.firstChild){if(o)return!1;o=!0}const x=a?!1:v.disabled||v.getAttribute("aria-disabled")==="true";if(!v.hasAttribute("tabindex")||!rP(v,d)||x)v=c(e,v,n);else return v.focus(),!0}return!1}const l7=ee.forwardRef(function(t,n){const{actions:a,autoFocus:c=!1,autoFocusItem:d=!1,children:o,className:v,disabledItemsFocusable:x=!1,disableListWrap:E=!1,onKeyDown:k,variant:P="selectedMenu"}=t,T=nr(t,s7),W=ee.useRef(null),$=ee.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});ns(()=>{c&&W.current.focus()},[c]),ee.useImperativeHandle(a,()=>({adjustStyleForScrollbar:(N,O)=>{const te=!W.current.style.width;if(N.clientHeight<W.current.clientHeight&&te){const ne=`${MT(ko(N))}px`;W.current.style[O.direction==="rtl"?"paddingLeft":"paddingRight"]=ne,W.current.style.width=`calc(100% + ${ne})`}return W.current}}),[]);const H=N=>{const O=W.current,te=N.key,ne=ko(O).activeElement;if(te==="ArrowDown")N.preventDefault(),ef(O,ne,E,x,w_);else if(te==="ArrowUp")N.preventDefault(),ef(O,ne,E,x,dS);else if(te==="Home")N.preventDefault(),ef(O,null,E,x,w_);else if(te==="End")N.preventDefault(),ef(O,null,E,x,dS);else if(te.length===1){const fe=$.current,xe=te.toLowerCase(),Te=performance.now();fe.keys.length>0&&(Te-fe.lastTime>500?(fe.keys=[],fe.repeating=!0,fe.previousKeyMatched=!0):fe.repeating&&xe!==fe.keys[0]&&(fe.repeating=!1)),fe.lastTime=Te,fe.keys.push(xe);const ve=ne&&!fe.repeating&&rP(ne,fe);fe.previousKeyMatched&&(ve||ef(O,ne,!1,x,w_,fe))?N.preventDefault():fe.previousKeyMatched=!1}k&&k(N)},D=eo(W,n);let U=-1;ee.Children.forEach(o,(N,O)=>{if(!ee.isValidElement(N)){U===O&&(U+=1,U>=o.length&&(U=-1));return}N.props.disabled||(P==="selectedMenu"&&N.props.selected||U===-1)&&(U=O),U===O&&(N.props.disabled||N.props.muiSkipListHighlight||N.type.muiSkipListHighlight)&&(U+=1,U>=o.length&&(U=-1))});const q=ee.Children.map(o,(N,O)=>{if(O===U){const te={};return d&&(te.autoFocus=!0),N.props.tabIndex===void 0&&P==="selectedMenu"&&(te.tabIndex=0),ee.cloneElement(N,te)}return N});return rt.jsx(eP,Ae({role:"menu",ref:D,className:v,onKeyDown:H,tabIndex:c?0:-1},T,{children:q}))}),u7=l7;function c7(e){return Ln("MuiPopover",e)}sn("MuiPopover",["root","paper"]);const p7=["onEntering"],h7=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],f7=["slotProps"];function mS(e,t){let n=0;return typeof t=="number"?n=t:t==="center"?n=e.height/2:t==="bottom"&&(n=e.height),n}function yS(e,t){let n=0;return typeof t=="number"?n=t:t==="center"?n=e.width/2:t==="right"&&(n=e.width),n}function gS(e){return[e.horizontal,e.vertical].map(t=>typeof t=="number"?`${t}px`:t).join(" ")}function A_(e){return typeof e=="function"?e():e}const d7=e=>{const{classes:t}=e;return Un({root:["root"],paper:["paper"]},c7,t)},m7=ir(dI,{name:"MuiPopover",slot:"Root",overridesResolver:(e,t)=>t.root})({}),nP=ir(d9,{name:"MuiPopover",slot:"Paper",overridesResolver:(e,t)=>t.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),y7=ee.forwardRef(function(t,n){var a,c,d;const o=jn({props:t,name:"MuiPopover"}),{action:v,anchorEl:x,anchorOrigin:E={vertical:"top",horizontal:"left"},anchorPosition:k,anchorReference:P="anchorEl",children:T,className:W,container:$,elevation:H=8,marginThreshold:D=16,open:U,PaperProps:q={},slots:N,slotProps:O,transformOrigin:te={vertical:"top",horizontal:"left"},TransitionComponent:ne=P$,transitionDuration:fe="auto",TransitionProps:{onEntering:xe}={},disableScrollLock:Te=!1}=o,ve=nr(o.TransitionProps,p7),Ee=nr(o,h7),Y=(a=O==null?void 0:O.paper)!=null?a:q,he=ee.useRef(),Ne=eo(he,Y.ref),We=Ae({},o,{anchorOrigin:E,anchorReference:P,elevation:H,marginThreshold:D,externalPaperSlotProps:Y,transformOrigin:te,TransitionComponent:ne,transitionDuration:fe,TransitionProps:ve}),we=d7(We),be=ee.useCallback(()=>{if(P==="anchorPosition")return k;const nt=A_(x),or=(nt&&nt.nodeType===1?nt:ko(he.current).body).getBoundingClientRect();return{top:or.top+mS(or,E.vertical),left:or.left+yS(or,E.horizontal)}},[x,E.horizontal,E.vertical,k,P]),$e=ee.useCallback(nt=>({vertical:mS(nt,te.vertical),horizontal:yS(nt,te.horizontal)}),[te.horizontal,te.vertical]),Le=ee.useCallback(nt=>{const Gt={width:nt.offsetWidth,height:nt.offsetHeight},or=$e(Gt);if(P==="none")return{top:null,left:null,transformOrigin:gS(or)};const zr=be();let Dr=zr.top-or.vertical,sr=zr.left-or.horizontal;const Tr=Dr+Gt.height,Fr=sr+Gt.width,Ar=$s(A_(x)),en=Ar.innerHeight-D,Ur=Ar.innerWidth-D;if(D!==null&&Dr<D){const mr=Dr-D;Dr-=mr,or.vertical+=mr}else if(D!==null&&Tr>en){const mr=Tr-en;Dr-=mr,or.vertical+=mr}if(D!==null&&sr<D){const mr=sr-D;sr-=mr,or.horizontal+=mr}else if(Fr>Ur){const mr=Fr-Ur;sr-=mr,or.horizontal+=mr}return{top:`${Math.round(Dr)}px`,left:`${Math.round(sr)}px`,transformOrigin:gS(or)}},[x,P,be,$e,D]),[St,Ce]=ee.useState(U),qe=ee.useCallback(()=>{const nt=he.current;if(!nt)return;const Gt=Le(nt);Gt.top!==null&&(nt.style.top=Gt.top),Gt.left!==null&&(nt.style.left=Gt.left),nt.style.transformOrigin=Gt.transformOrigin,Ce(!0)},[Le]);ee.useEffect(()=>(Te&&window.addEventListener("scroll",qe),()=>window.removeEventListener("scroll",qe)),[x,Te,qe]);const gt=(nt,Gt)=>{xe&&xe(nt,Gt),qe()},ze=()=>{Ce(!1)};ee.useEffect(()=>{U&&qe()}),ee.useImperativeHandle(v,()=>U?{updatePosition:()=>{qe()}}:null,[U,qe]),ee.useEffect(()=>{if(!U)return;const nt=Mg(()=>{qe()}),Gt=$s(x);return Gt.addEventListener("resize",nt),()=>{nt.clear(),Gt.removeEventListener("resize",nt)}},[x,U,qe]);let st=fe;fe==="auto"&&!ne.muiSupportAuto&&(st=void 0);const Wt=$||(x?ko(A_(x)).body:void 0),Dt=(c=N==null?void 0:N.root)!=null?c:m7,Ht=(d=N==null?void 0:N.paper)!=null?d:nP,At=is({elementType:Ht,externalSlotProps:Ae({},Y,{style:St?Y.style:Ae({},Y.style,{opacity:0})}),additionalProps:{elevation:H,ref:Ne},ownerState:We,className:fr(we.paper,Y==null?void 0:Y.className)}),er=is({elementType:Dt,externalSlotProps:(O==null?void 0:O.root)||{},externalForwardedProps:Ee,additionalProps:{ref:n,slotProps:{backdrop:{invisible:!0}},container:Wt,open:U},ownerState:We,className:fr(we.root,W)}),{slotProps:$t}=er,Zt=nr(er,f7);return rt.jsx(Dt,Ae({},Zt,!Cp(Dt)&&{slotProps:$t,disableScrollLock:Te},{children:rt.jsx(ne,Ae({appear:!0,in:U,onEntering:gt,onExited:ze,timeout:st},ve,{children:rt.jsx(Ht,Ae({},At,{children:T}))}))}))}),g7=y7;function v7(e){return Ln("MuiMenu",e)}sn("MuiMenu",["root","paper","list"]);const _7=["onEntering"],x7=["autoFocus","children","className","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant","slots","slotProps"],b7={vertical:"top",horizontal:"right"},w7={vertical:"top",horizontal:"left"},A7=e=>{const{classes:t}=e;return Un({root:["root"],paper:["paper"],list:["list"]},v7,t)},E7=ir(g7,{shouldForwardProp:e=>Aa(e)||e==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(e,t)=>t.root})({}),S7=ir(nP,{name:"MuiMenu",slot:"Paper",overridesResolver:(e,t)=>t.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),C7=ir(u7,{name:"MuiMenu",slot:"List",overridesResolver:(e,t)=>t.list})({outline:0}),k7=ee.forwardRef(function(t,n){var a,c;const d=jn({props:t,name:"MuiMenu"}),{autoFocus:o=!0,children:v,className:x,disableAutoFocusItem:E=!1,MenuListProps:k={},onClose:P,open:T,PaperProps:W={},PopoverClasses:$,transitionDuration:H="auto",TransitionProps:{onEntering:D}={},variant:U="selectedMenu",slots:q={},slotProps:N={}}=d,O=nr(d.TransitionProps,_7),te=nr(d,x7),ne=hd(),fe=ne.direction==="rtl",xe=Ae({},d,{autoFocus:o,disableAutoFocusItem:E,MenuListProps:k,onEntering:D,PaperProps:W,transitionDuration:H,TransitionProps:O,variant:U}),Te=A7(xe),ve=o&&!E&&T,Ee=ee.useRef(null),Y=(Le,St)=>{Ee.current&&Ee.current.adjustStyleForScrollbar(Le,ne),D&&D(Le,St)},he=Le=>{Le.key==="Tab"&&(Le.preventDefault(),P&&P(Le,"tabKeyDown"))};let Ne=-1;ee.Children.map(v,(Le,St)=>{ee.isValidElement(Le)&&(Le.props.disabled||(U==="selectedMenu"&&Le.props.selected||Ne===-1)&&(Ne=St))});const We=(a=q.paper)!=null?a:S7,we=(c=N.paper)!=null?c:W,be=is({elementType:q.root,externalSlotProps:N.root,ownerState:xe,className:[Te.root,x]}),$e=is({elementType:We,externalSlotProps:we,ownerState:xe,className:Te.paper});return rt.jsx(E7,Ae({onClose:P,anchorOrigin:{vertical:"bottom",horizontal:fe?"right":"left"},transformOrigin:fe?b7:w7,slots:{paper:We,root:q.root},slotProps:{root:be,paper:$e},open:T,ref:n,transitionDuration:H,TransitionProps:Ae({onEntering:Y},O),ownerState:xe},te,{classes:$,children:rt.jsx(C7,Ae({onKeyDown:he,actions:Ee,autoFocus:o&&(Ne===-1||E),autoFocusItem:ve,variant:U},k,{className:fr(Te.list,k.className),children:v}))}))}),T7=k7;function I7(e){return Ln("MuiMenuItem",e)}const P7=sn("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),tf=P7,M7=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],R7=(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.divider&&t.divider,!n.disableGutters&&t.gutters]},z7=e=>{const{disabled:t,dense:n,divider:a,disableGutters:c,selected:d,classes:o}=e,x=Un({root:["root",n&&"dense",t&&"disabled",!c&&"gutters",a&&"divider",d&&"selected"]},I7,o);return Ae({},o,x)},L7=ir(md,{shouldForwardProp:e=>Aa(e)||e==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:R7})(({theme:e,ownerState:t})=>Ae({},e.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${tf.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:wo(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${tf.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:wo(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${tf.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:wo(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:wo(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${tf.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${tf.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${pS.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${pS.inset}`]:{marginLeft:52},[`& .${fS.root}`]:{marginTop:0,marginBottom:0},[`& .${fS.inset}`]:{paddingLeft:36},[`& .${hS.root}`]:{minWidth:36}},!t.dense&&{[e.breakpoints.up("sm")]:{minHeight:"auto"}},t.dense&&Ae({minHeight:32,paddingTop:4,paddingBottom:4},e.typography.body2,{[`& .${hS.root} svg`]:{fontSize:"1.25rem"}}))),O7=ee.forwardRef(function(t,n){const a=jn({props:t,name:"MuiMenuItem"}),{autoFocus:c=!1,component:d="li",dense:o=!1,divider:v=!1,disableGutters:x=!1,focusVisibleClassName:E,role:k="menuitem",tabIndex:P,className:T}=a,W=nr(a,M7),$=ee.useContext(zu),H=ee.useMemo(()=>({dense:o||$.dense||!1,disableGutters:x}),[$.dense,o,x]),D=ee.useRef(null);ns(()=>{c&&D.current&&D.current.focus()},[c]);const U=Ae({},a,{dense:H.dense,divider:v,disableGutters:x}),q=z7(a),N=eo(D,n);let O;return a.disabled||(O=P!==void 0?P:-1),rt.jsx(zu.Provider,{value:H,children:rt.jsx(L7,Ae({ref:N,role:k,tabIndex:O,component:d,focusVisibleClassName:fr(q.focusVisible,E),className:fr(q.root,T)},W,{ownerState:U,classes:q}))})}),vS=O7;function D7(e){return Ln("MuiNativeSelect",e)}const B7=sn("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),kb=B7,N7=["className","disabled","error","IconComponent","inputRef","variant"],F7=e=>{const{classes:t,variant:n,disabled:a,multiple:c,open:d,error:o}=e,v={select:["select",n,a&&"disabled",c&&"multiple",o&&"error"],icon:["icon",`icon${Hr(n)}`,d&&"iconOpen",a&&"disabled"]};return Un(v,D7,t)},iP=({ownerState:e,theme:t})=>Ae({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":Ae({},t.vars?{backgroundColor:`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.05)`}:{backgroundColor:t.palette.mode==="light"?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},[`&.${kb.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(t.vars||t).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},e.variant==="filled"&&{"&&&":{paddingRight:32}},e.variant==="outlined"&&{borderRadius:(t.vars||t).shape.borderRadius,"&:focus":{borderRadius:(t.vars||t).shape.borderRadius},"&&&":{paddingRight:32}}),U7=ir("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:Aa,overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.select,t[n.variant],n.error&&t.error,{[`&.${kb.multiple}`]:t.multiple}]}})(iP),oP=({ownerState:e,theme:t})=>Ae({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(t.vars||t).palette.action.active,[`&.${kb.disabled}`]:{color:(t.vars||t).palette.action.disabled}},e.open&&{transform:"rotate(180deg)"},e.variant==="filled"&&{right:7},e.variant==="outlined"&&{right:7}),j7=ir("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${Hr(n.variant)}`],n.open&&t.iconOpen]}})(oP),V7=ee.forwardRef(function(t,n){const{className:a,disabled:c,error:d,IconComponent:o,inputRef:v,variant:x="standard"}=t,E=nr(t,N7),k=Ae({},t,{disabled:c,variant:x,error:d}),P=F7(k);return rt.jsxs(ee.Fragment,{children:[rt.jsx(U7,Ae({ownerState:k,className:fr(P.select,a),disabled:c,ref:v||n},E)),t.multiple?null:rt.jsx(j7,{as:o,ownerState:k,className:P.icon})]})}),$7=V7;var _S;const q7=["children","classes","className","label","notched"],W7=ir("fieldset",{shouldForwardProp:Aa})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),G7=ir("legend",{shouldForwardProp:Aa})(({ownerState:e,theme:t})=>Ae({float:"unset",width:"auto",overflow:"hidden"},!e.withLabel&&{padding:0,lineHeight:"11px",transition:t.transitions.create("width",{duration:150,easing:t.transitions.easing.easeOut})},e.withLabel&&Ae({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:t.transitions.create("max-width",{duration:50,easing:t.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},e.notched&&{maxWidth:"100%",transition:t.transitions.create("max-width",{duration:100,easing:t.transitions.easing.easeOut,delay:50})})));function H7(e){const{className:t,label:n,notched:a}=e,c=nr(e,q7),d=n!=null&&n!=="",o=Ae({},e,{notched:a,withLabel:d});return rt.jsx(W7,Ae({"aria-hidden":!0,className:t,ownerState:o},c,{children:rt.jsx(G7,{ownerState:o,children:d?rt.jsx("span",{children:n}):_S||(_S=rt.jsx("span",{className:"notranslate",children:"​"}))})}))}const Z7=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],K7=e=>{const{classes:t}=e,a=Un({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},J9,t);return Ae({},t,a)},X7=ir(xv,{shouldForwardProp:e=>Aa(e)||e==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:vv})(({theme:e,ownerState:t})=>{const n=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return Ae({position:"relative",borderRadius:(e.vars||e).shape.borderRadius,[`&:hover .${fl.notchedOutline}`]:{borderColor:(e.vars||e).palette.text.primary},"@media (hover: none)":{[`&:hover .${fl.notchedOutline}`]:{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:n}},[`&.${fl.focused} .${fl.notchedOutline}`]:{borderColor:(e.vars||e).palette[t.color].main,borderWidth:2},[`&.${fl.error} .${fl.notchedOutline}`]:{borderColor:(e.vars||e).palette.error.main},[`&.${fl.disabled} .${fl.notchedOutline}`]:{borderColor:(e.vars||e).palette.action.disabled}},t.startAdornment&&{paddingLeft:14},t.endAdornment&&{paddingRight:14},t.multiline&&Ae({padding:"16.5px 14px"},t.size==="small"&&{padding:"8.5px 14px"}))}),Q7=ir(H7,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(e,t)=>t.notchedOutline})(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:t}}),J7=ir(bv,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:_v})(({theme:e,ownerState:t})=>Ae({padding:"16.5px 14px"},!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},e.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},t.size==="small"&&{padding:"8.5px 14px"},t.multiline&&{padding:0},t.startAdornment&&{paddingLeft:0},t.endAdornment&&{paddingRight:0})),aP=ee.forwardRef(function(t,n){var a,c,d,o,v;const x=jn({props:t,name:"MuiOutlinedInput"}),{components:E={},fullWidth:k=!1,inputComponent:P="input",label:T,multiline:W=!1,notched:$,slots:H={},type:D="text"}=x,U=nr(x,Z7),q=K7(x),N=Sb(),O=Ab({props:x,muiFormControl:N,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),te=Ae({},x,{color:O.color||"primary",disabled:O.disabled,error:O.error,focused:O.focused,formControl:N,fullWidth:k,hiddenLabel:O.hiddenLabel,multiline:W,size:O.size,type:D}),ne=(a=(c=H.root)!=null?c:E.Root)!=null?a:X7,fe=(d=(o=H.input)!=null?o:E.Input)!=null?d:J7;return rt.jsx(Cb,Ae({slots:{root:ne,input:fe},renderSuffix:xe=>rt.jsx(Q7,{ownerState:te,className:q.notchedOutline,label:T!=null&&T!==""&&O.required?v||(v=rt.jsxs(ee.Fragment,{children:[T," ","*"]})):T,notched:typeof $<"u"?$:!!(xe.startAdornment||xe.filled||xe.focused)}),fullWidth:k,inputComponent:P,multiline:W,ref:n,type:D},U,{classes:Ae({},q,{notchedOutline:null})}))});aP.muiName="Input";const Y7=aP;function eq(e){return Ln("MuiSelect",e)}const tq=sn("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),rf=tq;var xS;const rq=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],nq=ir("div",{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`&.${rf.select}`]:t.select},{[`&.${rf.select}`]:t[n.variant]},{[`&.${rf.error}`]:t.error},{[`&.${rf.multiple}`]:t.multiple}]}})(iP,{[`&.${rf.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),iq=ir("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${Hr(n.variant)}`],n.open&&t.iconOpen]}})(oP),oq=ir("input",{shouldForwardProp:e=>dF(e)&&e!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(e,t)=>t.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function bS(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}function aq(e){return e==null||typeof e=="string"&&!e.trim()}const sq=e=>{const{classes:t,variant:n,disabled:a,multiple:c,open:d,error:o}=e,v={select:["select",n,a&&"disabled",c&&"multiple",o&&"error"],icon:["icon",`icon${Hr(n)}`,d&&"iconOpen",a&&"disabled"],nativeInput:["nativeInput"]};return Un(v,eq,t)},lq=ee.forwardRef(function(t,n){var a;const{"aria-describedby":c,"aria-label":d,autoFocus:o,autoWidth:v,children:x,className:E,defaultOpen:k,defaultValue:P,disabled:T,displayEmpty:W,error:$=!1,IconComponent:H,inputRef:D,labelId:U,MenuProps:q={},multiple:N,name:O,onBlur:te,onChange:ne,onClose:fe,onFocus:xe,onOpen:Te,open:ve,readOnly:Ee,renderValue:Y,SelectDisplayProps:he={},tabIndex:Ne,value:We,variant:we="standard"}=t,be=nr(t,rq),[$e,Le]=tE({controlled:We,default:P,name:"Select"}),[St,Ce]=tE({controlled:ve,default:k,name:"Select"}),qe=ee.useRef(null),gt=ee.useRef(null),[ze,st]=ee.useState(null),{current:Wt}=ee.useRef(ve!=null),[Dt,Ht]=ee.useState(),At=eo(n,D),er=ee.useCallback(Bt=>{gt.current=Bt,Bt&&st(Bt)},[]),$t=ze==null?void 0:ze.parentNode;ee.useImperativeHandle(At,()=>({focus:()=>{gt.current.focus()},node:qe.current,value:$e}),[$e]),ee.useEffect(()=>{k&&St&&ze&&!Wt&&(Ht(v?null:$t.clientWidth),gt.current.focus())},[ze,v]),ee.useEffect(()=>{o&&gt.current.focus()},[o]),ee.useEffect(()=>{if(!U)return;const Bt=ko(gt.current).getElementById(U);if(Bt){const Er=()=>{getSelection().isCollapsed&&gt.current.focus()};return Bt.addEventListener("click",Er),()=>{Bt.removeEventListener("click",Er)}}},[U]);const Zt=(Bt,Er)=>{Bt?Te&&Te(Er):fe&&fe(Er),Wt||(Ht(v?null:$t.clientWidth),Ce(Bt))},nt=Bt=>{Bt.button===0&&(Bt.preventDefault(),gt.current.focus(),Zt(!0,Bt))},Gt=Bt=>{Zt(!1,Bt)},or=ee.Children.toArray(x),zr=Bt=>{const Er=or.find(ut=>ut.props.value===Bt.target.value);Er!==void 0&&(Le(Er.props.value),ne&&ne(Bt,Er))},Dr=Bt=>Er=>{let ut;if(Er.currentTarget.hasAttribute("tabindex")){if(N){ut=Array.isArray($e)?$e.slice():[];const Mt=$e.indexOf(Bt.props.value);Mt===-1?ut.push(Bt.props.value):ut.splice(Mt,1)}else ut=Bt.props.value;if(Bt.props.onClick&&Bt.props.onClick(Er),$e!==ut&&(Le(ut),ne)){const Mt=Er.nativeEvent||Er,ke=new Mt.constructor(Mt.type,Mt);Object.defineProperty(ke,"target",{writable:!0,value:{value:ut,name:O}}),ne(ke,Bt)}N||Zt(!1,Er)}},sr=Bt=>{Ee||[" ","ArrowUp","ArrowDown","Enter"].indexOf(Bt.key)!==-1&&(Bt.preventDefault(),Zt(!0,Bt))},Tr=ze!==null&&St,Fr=Bt=>{!Tr&&te&&(Object.defineProperty(Bt,"target",{writable:!0,value:{value:$e,name:O}}),te(Bt))};delete be["aria-invalid"];let Ar,en;const Ur=[];let mr=!1;(ug({value:$e})||W)&&(Y?Ar=Y($e):mr=!0);const dn=or.map(Bt=>{if(!ee.isValidElement(Bt))return null;let Er;if(N){if(!Array.isArray($e))throw new Error(Ol(2));Er=$e.some(ut=>bS(ut,Bt.props.value)),Er&&mr&&Ur.push(Bt.props.children)}else Er=bS($e,Bt.props.value),Er&&mr&&(en=Bt.props.children);return ee.cloneElement(Bt,{"aria-selected":Er?"true":"false",onClick:Dr(Bt),onKeyUp:ut=>{ut.key===" "&&ut.preventDefault(),Bt.props.onKeyUp&&Bt.props.onKeyUp(ut)},role:"option",selected:Er,value:void 0,"data-value":Bt.props.value})});mr&&(N?Ur.length===0?Ar=null:Ar=Ur.reduce((Bt,Er,ut)=>(Bt.push(Er),ut<Ur.length-1&&Bt.push(", "),Bt),[]):Ar=en);let xn=Dt;!v&&Wt&&ze&&(xn=$t.clientWidth);let Xn;typeof Ne<"u"?Xn=Ne:Xn=T?null:0;const Ir=he.id||(O?`mui-component-select-${O}`:void 0),Lt=Ae({},t,{variant:we,value:$e,open:Tr,error:$}),On=sq(Lt),Qn=Ae({},q.PaperProps,(a=q.slotProps)==null?void 0:a.paper),Fi=mD();return rt.jsxs(ee.Fragment,{children:[rt.jsx(nq,Ae({ref:er,tabIndex:Xn,role:"combobox","aria-controls":Fi,"aria-disabled":T?"true":void 0,"aria-expanded":Tr?"true":"false","aria-haspopup":"listbox","aria-label":d,"aria-labelledby":[U,Ir].filter(Boolean).join(" ")||void 0,"aria-describedby":c,onKeyDown:sr,onMouseDown:T||Ee?null:nt,onBlur:Fr,onFocus:xe},he,{ownerState:Lt,className:fr(he.className,On.select,E),id:Ir,children:aq(Ar)?xS||(xS=rt.jsx("span",{className:"notranslate",children:"​"})):Ar})),rt.jsx(oq,Ae({"aria-invalid":$,value:Array.isArray($e)?$e.join(","):$e,name:O,ref:qe,"aria-hidden":!0,onChange:zr,tabIndex:-1,disabled:T,className:On.nativeInput,autoFocus:o,ownerState:Lt},be)),rt.jsx(iq,{as:H,className:On.icon,ownerState:Lt}),rt.jsx(T7,Ae({id:`menu-${O||""}`,anchorEl:$t,open:Tr,onClose:Gt,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},q,{MenuListProps:Ae({"aria-labelledby":U,role:"listbox","aria-multiselectable":N?"true":void 0,disableListWrap:!0,id:Fi},q.MenuListProps),slotProps:Ae({},q.slotProps,{paper:Ae({},Qn,{style:Ae({minWidth:xn},Qn!=null?Qn.style:null)})}),children:dn}))]})}),uq=lq,cq=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],pq=["root"],hq=e=>{const{classes:t}=e;return t},Tb={name:"MuiSelect",overridesResolver:(e,t)=>t.root,shouldForwardProp:e=>Aa(e)&&e!=="variant",slot:"Root"},fq=ir(O$,Tb)(""),dq=ir(Y7,Tb)(""),mq=ir(b$,Tb)(""),sP=ee.forwardRef(function(t,n){const a=jn({name:"MuiSelect",props:t}),{autoWidth:c=!1,children:d,classes:o={},className:v,defaultOpen:x=!1,displayEmpty:E=!1,IconComponent:k=r$,id:P,input:T,inputProps:W,label:$,labelId:H,MenuProps:D,multiple:U=!1,native:q=!1,onClose:N,onOpen:O,open:te,renderValue:ne,SelectDisplayProps:fe,variant:xe="outlined"}=a,Te=nr(a,cq),ve=q?$7:uq,Ee=Sb(),Y=Ab({props:a,muiFormControl:Ee,states:["variant","error"]}),he=Y.variant||xe,Ne=Ae({},a,{variant:he,classes:o}),We=hq(Ne),we=nr(We,pq),be=T||{standard:rt.jsx(fq,{ownerState:Ne}),outlined:rt.jsx(dq,{label:$,ownerState:Ne}),filled:rt.jsx(mq,{ownerState:Ne})}[he],$e=eo(n,be.ref);return rt.jsx(ee.Fragment,{children:ee.cloneElement(be,Ae({inputComponent:ve,inputProps:Ae({children:d,error:Y.error,IconComponent:k,variant:he,type:void 0,multiple:U},q?{id:P}:{autoWidth:c,defaultOpen:x,displayEmpty:E,labelId:H,MenuProps:D,onClose:N,onOpen:O,open:te,renderValue:ne,SelectDisplayProps:Ae({id:P},fe)},W,{classes:W?Co(we,W.classes):we},T?T.props.inputProps:{})},(U&&q||E)&&he==="outlined"?{notched:!0}:{},{ref:$e,className:fr(be.props.className,v,We.root)},!T&&{variant:he},Te))})});sP.muiName="Select";const yq=sP;function gq(e){return Ln("MuiTab",e)}const vq=sn("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper"]),_u=vq,_q=["className","disabled","disableFocusRipple","fullWidth","icon","iconPosition","indicator","label","onChange","onClick","onFocus","selected","selectionFollowsFocus","textColor","value","wrapped"],xq=e=>{const{classes:t,textColor:n,fullWidth:a,wrapped:c,icon:d,label:o,selected:v,disabled:x}=e,E={root:["root",d&&o&&"labelIcon",`textColor${Hr(n)}`,a&&"fullWidth",c&&"wrapped",v&&"selected",x&&"disabled"],iconWrapper:["iconWrapper"]};return Un(E,gq,t)},bq=ir(md,{name:"MuiTab",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.label&&n.icon&&t.labelIcon,t[`textColor${Hr(n.textColor)}`],n.fullWidth&&t.fullWidth,n.wrapped&&t.wrapped]}})(({theme:e,ownerState:t})=>Ae({},e.typography.button,{maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center"},t.label&&{flexDirection:t.iconPosition==="top"||t.iconPosition==="bottom"?"column":"row"},{lineHeight:1.25},t.icon&&t.label&&{minHeight:72,paddingTop:9,paddingBottom:9,[`& > .${_u.iconWrapper}`]:Ae({},t.iconPosition==="top"&&{marginBottom:6},t.iconPosition==="bottom"&&{marginTop:6},t.iconPosition==="start"&&{marginRight:e.spacing(1)},t.iconPosition==="end"&&{marginLeft:e.spacing(1)})},t.textColor==="inherit"&&{color:"inherit",opacity:.6,[`&.${_u.selected}`]:{opacity:1},[`&.${_u.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},t.textColor==="primary"&&{color:(e.vars||e).palette.text.secondary,[`&.${_u.selected}`]:{color:(e.vars||e).palette.primary.main},[`&.${_u.disabled}`]:{color:(e.vars||e).palette.text.disabled}},t.textColor==="secondary"&&{color:(e.vars||e).palette.text.secondary,[`&.${_u.selected}`]:{color:(e.vars||e).palette.secondary.main},[`&.${_u.disabled}`]:{color:(e.vars||e).palette.text.disabled}},t.fullWidth&&{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"},t.wrapped&&{fontSize:e.typography.pxToRem(12)})),wq=ee.forwardRef(function(t,n){const a=jn({props:t,name:"MuiTab"}),{className:c,disabled:d=!1,disableFocusRipple:o=!1,fullWidth:v,icon:x,iconPosition:E="top",indicator:k,label:P,onChange:T,onClick:W,onFocus:$,selected:H,selectionFollowsFocus:D,textColor:U="inherit",value:q,wrapped:N=!1}=a,O=nr(a,_q),te=Ae({},a,{disabled:d,disableFocusRipple:o,selected:H,icon:!!x,iconPosition:E,label:!!P,fullWidth:v,textColor:U,wrapped:N}),ne=xq(te),fe=x&&P&&ee.isValidElement(x)?ee.cloneElement(x,{className:fr(ne.iconWrapper,x.props.className)}):x,xe=ve=>{!H&&T&&T(ve,q),W&&W(ve)},Te=ve=>{D&&!H&&T&&T(ve,q),$&&$(ve)};return rt.jsxs(bq,Ae({focusRipple:!o,className:fr(ne.root,c),ref:n,role:"tab","aria-selected":H,disabled:d,onClick:xe,onFocus:Te,ownerState:te,tabIndex:H?0:-1},O,{children:[E==="top"||E==="start"?rt.jsxs(ee.Fragment,{children:[fe,P]}):rt.jsxs(ee.Fragment,{children:[P,fe]}),k]}))}),kl=wq,Aq=xb(rt.jsx("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft"),Eq=xb(rt.jsx("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight");function Sq(e){return(1+Math.sin(Math.PI*e-Math.PI/2))/2}function Cq(e,t,n,a={},c=()=>{}){const{ease:d=Sq,duration:o=300}=a;let v=null;const x=t[e];let E=!1;const k=()=>{E=!0},P=T=>{if(E){c(new Error("Animation cancelled"));return}v===null&&(v=T);const W=Math.min(1,(T-v)/o);if(t[e]=d(W)*(n-x)+x,W>=1){requestAnimationFrame(()=>{c(null)});return}requestAnimationFrame(P)};return x===n?(c(new Error("Element already at target position")),k):(requestAnimationFrame(P),k)}const kq=["onChange"],Tq={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};function Iq(e){const{onChange:t}=e,n=nr(e,kq),a=ee.useRef(),c=ee.useRef(null),d=()=>{a.current=c.current.offsetHeight-c.current.clientHeight};return ns(()=>{const o=Mg(()=>{const x=a.current;d(),x!==a.current&&t(a.current)}),v=$s(c.current);return v.addEventListener("resize",o),()=>{o.clear(),v.removeEventListener("resize",o)}},[t]),ee.useEffect(()=>{d(),t(a.current)},[t]),rt.jsx("div",Ae({style:Tq,ref:c},n))}function Pq(e){return Ln("MuiTabScrollButton",e)}const Mq=sn("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),Rq=Mq,zq=["className","slots","slotProps","direction","orientation","disabled"],Lq=e=>{const{classes:t,orientation:n,disabled:a}=e;return Un({root:["root",n,a&&"disabled"]},Pq,t)},Oq=ir(md,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.orientation&&t[n.orientation]]}})(({ownerState:e})=>Ae({width:40,flexShrink:0,opacity:.8,[`&.${Rq.disabled}`]:{opacity:0}},e.orientation==="vertical"&&{width:"100%",height:40,"& svg":{transform:`rotate(${e.isRtl?-90:90}deg)`}})),Dq=ee.forwardRef(function(t,n){var a,c;const d=jn({props:t,name:"MuiTabScrollButton"}),{className:o,slots:v={},slotProps:x={},direction:E}=d,k=nr(d,zq),T=hd().direction==="rtl",W=Ae({isRtl:T},d),$=Lq(W),H=(a=v.StartScrollButtonIcon)!=null?a:Aq,D=(c=v.EndScrollButtonIcon)!=null?c:Eq,U=is({elementType:H,externalSlotProps:x.startScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:W}),q=is({elementType:D,externalSlotProps:x.endScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:W});return rt.jsx(Oq,Ae({component:"div",className:fr($.root,o),ref:n,role:null,ownerState:W,tabIndex:null},k,{children:E==="left"?rt.jsx(H,Ae({},U)):rt.jsx(D,Ae({},q))}))}),Bq=Dq;function Nq(e){return Ln("MuiTabs",e)}const Fq=sn("MuiTabs",["root","vertical","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),E_=Fq,Uq=["aria-label","aria-labelledby","action","centered","children","className","component","allowScrollButtonsMobile","indicatorColor","onChange","orientation","ScrollButtonComponent","scrollButtons","selectionFollowsFocus","slots","slotProps","TabIndicatorProps","TabScrollButtonProps","textColor","value","variant","visibleScrollbar"],wS=(e,t)=>e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:e.firstChild,AS=(e,t)=>e===t?e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:e.lastChild,Zm=(e,t,n)=>{let a=!1,c=n(e,t);for(;c;){if(c===e.firstChild){if(a)return;a=!0}const d=c.disabled||c.getAttribute("aria-disabled")==="true";if(!c.hasAttribute("tabindex")||d)c=n(e,c);else{c.focus();return}}},jq=e=>{const{vertical:t,fixed:n,hideScrollbar:a,scrollableX:c,scrollableY:d,centered:o,scrollButtonsHideMobile:v,classes:x}=e;return Un({root:["root",t&&"vertical"],scroller:["scroller",n&&"fixed",a&&"hideScrollbar",c&&"scrollableX",d&&"scrollableY"],flexContainer:["flexContainer",t&&"flexContainerVertical",o&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",v&&"scrollButtonsHideMobile"],scrollableX:[c&&"scrollableX"],hideScrollbar:[a&&"hideScrollbar"]},Nq,x)},Vq=ir("div",{name:"MuiTabs",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${E_.scrollButtons}`]:t.scrollButtons},{[`& .${E_.scrollButtons}`]:n.scrollButtonsHideMobile&&t.scrollButtonsHideMobile},t.root,n.vertical&&t.vertical]}})(({ownerState:e,theme:t})=>Ae({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex"},e.vertical&&{flexDirection:"column"},e.scrollButtonsHideMobile&&{[`& .${E_.scrollButtons}`]:{[t.breakpoints.down("sm")]:{display:"none"}}})),$q=ir("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.scroller,n.fixed&&t.fixed,n.hideScrollbar&&t.hideScrollbar,n.scrollableX&&t.scrollableX,n.scrollableY&&t.scrollableY]}})(({ownerState:e})=>Ae({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap"},e.fixed&&{overflowX:"hidden",width:"100%"},e.hideScrollbar&&{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},e.scrollableX&&{overflowX:"auto",overflowY:"hidden"},e.scrollableY&&{overflowY:"auto",overflowX:"hidden"})),qq=ir("div",{name:"MuiTabs",slot:"FlexContainer",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.flexContainer,n.vertical&&t.flexContainerVertical,n.centered&&t.centered]}})(({ownerState:e})=>Ae({display:"flex"},e.vertical&&{flexDirection:"column"},e.centered&&{justifyContent:"center"})),Wq=ir("span",{name:"MuiTabs",slot:"Indicator",overridesResolver:(e,t)=>t.indicator})(({ownerState:e,theme:t})=>Ae({position:"absolute",height:2,bottom:0,width:"100%",transition:t.transitions.create()},e.indicatorColor==="primary"&&{backgroundColor:(t.vars||t).palette.primary.main},e.indicatorColor==="secondary"&&{backgroundColor:(t.vars||t).palette.secondary.main},e.vertical&&{height:"100%",width:2,right:0})),Gq=ir(Iq)({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),ES={},Hq=ee.forwardRef(function(t,n){const a=jn({props:t,name:"MuiTabs"}),c=hd(),d=c.direction==="rtl",{"aria-label":o,"aria-labelledby":v,action:x,centered:E=!1,children:k,className:P,component:T="div",allowScrollButtonsMobile:W=!1,indicatorColor:$="primary",onChange:H,orientation:D="horizontal",ScrollButtonComponent:U=Bq,scrollButtons:q="auto",selectionFollowsFocus:N,slots:O={},slotProps:te={},TabIndicatorProps:ne={},TabScrollButtonProps:fe={},textColor:xe="primary",value:Te,variant:ve="standard",visibleScrollbar:Ee=!1}=a,Y=nr(a,Uq),he=ve==="scrollable",Ne=D==="vertical",We=Ne?"scrollTop":"scrollLeft",we=Ne?"top":"left",be=Ne?"bottom":"right",$e=Ne?"clientHeight":"clientWidth",Le=Ne?"height":"width",St=Ae({},a,{component:T,allowScrollButtonsMobile:W,indicatorColor:$,orientation:D,vertical:Ne,scrollButtons:q,textColor:xe,variant:ve,visibleScrollbar:Ee,fixed:!he,hideScrollbar:he&&!Ee,scrollableX:he&&!Ne,scrollableY:he&&Ne,centered:E&&!he,scrollButtonsHideMobile:!W}),Ce=jq(St),qe=is({elementType:O.StartScrollButtonIcon,externalSlotProps:te.startScrollButtonIcon,ownerState:St}),gt=is({elementType:O.EndScrollButtonIcon,externalSlotProps:te.endScrollButtonIcon,ownerState:St}),[ze,st]=ee.useState(!1),[Wt,Dt]=ee.useState(ES),[Ht,At]=ee.useState(!1),[er,$t]=ee.useState(!1),[Zt,nt]=ee.useState(!1),[Gt,or]=ee.useState({overflow:"hidden",scrollbarWidth:0}),zr=new Map,Dr=ee.useRef(null),sr=ee.useRef(null),Tr=()=>{const ut=Dr.current;let Mt;if(ut){const Ke=ut.getBoundingClientRect();Mt={clientWidth:ut.clientWidth,scrollLeft:ut.scrollLeft,scrollTop:ut.scrollTop,scrollLeftNormalized:kD(ut,c.direction),scrollWidth:ut.scrollWidth,top:Ke.top,bottom:Ke.bottom,left:Ke.left,right:Ke.right}}let ke;if(ut&&Te!==!1){const Ke=sr.current.children;if(Ke.length>0){const ct=Ke[zr.get(Te)];ke=ct?ct.getBoundingClientRect():null}}return{tabsMeta:Mt,tabMeta:ke}},Fr=Us(()=>{const{tabsMeta:ut,tabMeta:Mt}=Tr();let ke=0,Ke;if(Ne)Ke="top",Mt&&ut&&(ke=Mt.top-ut.top+ut.scrollTop);else if(Ke=d?"right":"left",Mt&&ut){const jt=d?ut.scrollLeftNormalized+ut.clientWidth-ut.scrollWidth:ut.scrollLeft;ke=(d?-1:1)*(Mt[Ke]-ut[Ke]+jt)}const ct={[Ke]:ke,[Le]:Mt?Mt[Le]:0};if(isNaN(Wt[Ke])||isNaN(Wt[Le]))Dt(ct);else{const jt=Math.abs(Wt[Ke]-ct[Ke]),tr=Math.abs(Wt[Le]-ct[Le]);(jt>=1||tr>=1)&&Dt(ct)}}),Ar=(ut,{animation:Mt=!0}={})=>{Mt?Cq(We,Dr.current,ut,{duration:c.transitions.duration.standard}):Dr.current[We]=ut},en=ut=>{let Mt=Dr.current[We];Ne?Mt+=ut:(Mt+=ut*(d?-1:1),Mt*=d&&RT()==="reverse"?-1:1),Ar(Mt)},Ur=()=>{const ut=Dr.current[$e];let Mt=0;const ke=Array.from(sr.current.children);for(let Ke=0;Ke<ke.length;Ke+=1){const ct=ke[Ke];if(Mt+ct[$e]>ut){Ke===0&&(Mt=ut);break}Mt+=ct[$e]}return Mt},mr=()=>{en(-1*Ur())},dn=()=>{en(Ur())},xn=ee.useCallback(ut=>{or({overflow:null,scrollbarWidth:ut})},[]),Xn=()=>{const ut={};ut.scrollbarSizeListener=he?rt.jsx(Gq,{onChange:xn,className:fr(Ce.scrollableX,Ce.hideScrollbar)}):null;const ke=he&&(q==="auto"&&(Ht||er)||q===!0);return ut.scrollButtonStart=ke?rt.jsx(U,Ae({slots:{StartScrollButtonIcon:O.StartScrollButtonIcon},slotProps:{startScrollButtonIcon:qe},orientation:D,direction:d?"right":"left",onClick:mr,disabled:!Ht},fe,{className:fr(Ce.scrollButtons,fe.className)})):null,ut.scrollButtonEnd=ke?rt.jsx(U,Ae({slots:{EndScrollButtonIcon:O.EndScrollButtonIcon},slotProps:{endScrollButtonIcon:gt},orientation:D,direction:d?"left":"right",onClick:dn,disabled:!er},fe,{className:fr(Ce.scrollButtons,fe.className)})):null,ut},Ir=Us(ut=>{const{tabsMeta:Mt,tabMeta:ke}=Tr();if(!(!ke||!Mt)){if(ke[we]<Mt[we]){const Ke=Mt[We]+(ke[we]-Mt[we]);Ar(Ke,{animation:ut})}else if(ke[be]>Mt[be]){const Ke=Mt[We]+(ke[be]-Mt[be]);Ar(Ke,{animation:ut})}}}),Lt=Us(()=>{he&&q!==!1&&nt(!Zt)});ee.useEffect(()=>{const ut=Mg(()=>{Dr.current&&Fr()});let Mt;const ke=jt=>{jt.forEach(tr=>{tr.removedNodes.forEach(Qt=>{var yr;(yr=Mt)==null||yr.unobserve(Qt)}),tr.addedNodes.forEach(Qt=>{var yr;(yr=Mt)==null||yr.observe(Qt)})}),ut(),Lt()},Ke=$s(Dr.current);Ke.addEventListener("resize",ut);let ct;return typeof ResizeObserver<"u"&&(Mt=new ResizeObserver(ut),Array.from(sr.current.children).forEach(jt=>{Mt.observe(jt)})),typeof MutationObserver<"u"&&(ct=new MutationObserver(ke),ct.observe(sr.current,{childList:!0})),()=>{var jt,tr;ut.clear(),Ke.removeEventListener("resize",ut),(jt=ct)==null||jt.disconnect(),(tr=Mt)==null||tr.disconnect()}},[Fr,Lt]),ee.useEffect(()=>{const ut=Array.from(sr.current.children),Mt=ut.length;if(typeof IntersectionObserver<"u"&&Mt>0&&he&&q!==!1){const ke=ut[0],Ke=ut[Mt-1],ct={root:Dr.current,threshold:.99},jt=Sr=>{At(!Sr[0].isIntersecting)},tr=new IntersectionObserver(jt,ct);tr.observe(ke);const Qt=Sr=>{$t(!Sr[0].isIntersecting)},yr=new IntersectionObserver(Qt,ct);return yr.observe(Ke),()=>{tr.disconnect(),yr.disconnect()}}},[he,q,Zt,k==null?void 0:k.length]),ee.useEffect(()=>{st(!0)},[]),ee.useEffect(()=>{Fr()}),ee.useEffect(()=>{Ir(ES!==Wt)},[Ir,Wt]),ee.useImperativeHandle(x,()=>({updateIndicator:Fr,updateScrollButtons:Lt}),[Fr,Lt]);const On=rt.jsx(Wq,Ae({},ne,{className:fr(Ce.indicator,ne.className),ownerState:St,style:Ae({},Wt,ne.style)}));let Qn=0;const Fi=ee.Children.map(k,ut=>{if(!ee.isValidElement(ut))return null;const Mt=ut.props.value===void 0?Qn:ut.props.value;zr.set(Mt,Qn);const ke=Mt===Te;return Qn+=1,ee.cloneElement(ut,Ae({fullWidth:ve==="fullWidth",indicator:ke&&!ze&&On,selected:ke,selectionFollowsFocus:N,onChange:H,textColor:xe,value:Mt},Qn===1&&Te===!1&&!ut.props.tabIndex?{tabIndex:0}:{}))}),Bt=ut=>{const Mt=sr.current,ke=ko(Mt).activeElement;if(ke.getAttribute("role")!=="tab")return;let ct=D==="horizontal"?"ArrowLeft":"ArrowUp",jt=D==="horizontal"?"ArrowRight":"ArrowDown";switch(D==="horizontal"&&d&&(ct="ArrowRight",jt="ArrowLeft"),ut.key){case ct:ut.preventDefault(),Zm(Mt,ke,AS);break;case jt:ut.preventDefault(),Zm(Mt,ke,wS);break;case"Home":ut.preventDefault(),Zm(Mt,null,wS);break;case"End":ut.preventDefault(),Zm(Mt,null,AS);break}},Er=Xn();return rt.jsxs(Vq,Ae({className:fr(Ce.root,P),ownerState:St,ref:n,as:T},Y,{children:[Er.scrollButtonStart,Er.scrollbarSizeListener,rt.jsxs($q,{className:Ce.scroller,ownerState:St,style:{overflow:Gt.overflow,[Ne?`margin${d?"Left":"Right"}`:"marginBottom"]:Ee?void 0:-Gt.scrollbarWidth},ref:Dr,children:[rt.jsx(qq,{"aria-label":o,"aria-labelledby":v,"aria-orientation":D==="vertical"?"vertical":null,className:Ce.flexContainer,ownerState:St,onKeyDown:Bt,ref:sr,role:"tablist",children:Fi}),ze&&On]}),Er.scrollButtonEnd]}))}),Ib=Hq,Zq=({feederLayerCode:e,setFeederLayerCode:t})=>{const n=a=>{t(a.target.value)};return Ie.createElement(k$,{variant:"outlined",className:"custom-feeder-selection"},Ie.createElement(yq,{id:"feeder-selection",value:e,onChange:n,style:{width:"100%",height:"40px",fontSize:"12px",marginRight:"20px"}},Ie.createElement(vS,{value:"PeakHourGasDemand_KW"},"Peak Hour Gas Demand"),Ie.createElement(vS,{value:"PeakHourElectricityDemand_KW"},"Peak Hour Electricity Demand")))},Kq=({propertiesNumber:e,handlePropertyChange:t,blockContainerVisible:n,mobilityContainerVisible:a})=>Ie.createElement("div",null,Ie.createElement("div",{className:"mobility-dropdown-container"},Ie.createElement("select",{className:"mobility-dropdown",value:e.mode,onChange:c=>t("mode",c.target.value)},Ie.createElement("option",{value:"-1"},"All Trip Modes"),Ie.createElement("option",{value:"0"},"Walk"),Ie.createElement("option",{value:"1"},"Bike"),Ie.createElement("option",{value:"2"},"Car"),n&&Ie.createElement("option",{value:"3"},"Public Transit")),Ie.createElement("select",{className:"mobility-dropdown",value:e.season,onChange:c=>t("season",c.target.value)},Ie.createElement("option",{value:"1"},"Spring")),Ie.createElement("select",{className:"mobility-dropdown",value:e.timeOfDay,onChange:c=>t("timeOfDay",c.target.value)},Ie.createElement("option",{value:"-1"},"All Time Periods"),Ie.createElement("option",{value:"0"},"Morning (12am - 6am)"),Ie.createElement("option",{value:"1"},"Breakfast (6am - 11am)"),Ie.createElement("option",{value:"2"},"Lunch (11am - 3pm)"),Ie.createElement("option",{value:"3"},"Afternoon (3pm - 5pm)"),Ie.createElement("option",{value:"4"},"Dinner (5pm - 9pm)"),Ie.createElement("option",{value:"5"},"Night (9pm - 12am)")))),Xq=({propertiesNumber:e,handlePropertyChange:t})=>Ie.createElement("div",{className:"mobility-dropdown-container"},Ie.createElement("select",{className:"mobility-dropdown",value:e.weekday,onChange:n=>t("weekday",n.target.value)},Ie.createElement("option",{value:"1"},"Weekday"),Ie.createElement("option",{value:"0"},"Weekend")),Ie.createElement("select",{className:"mobility-dropdown-activity",value:e.fromActivity,onChange:n=>t("fromActivity",n.target.value)},Ie.createElement("option",{value:"0"},"Home"),Ie.createElement("option",{value:"1"},"Work/School"),Ie.createElement("option",{value:"2"},"Leisure"),Ie.createElement("option",{value:"-1"},"All From-Activities")),Ie.createElement("select",{className:"mobility-dropdown-activity",value:e.toActivity,onChange:n=>t("toActivity",n.target.value)},Ie.createElement("option",{value:"0"},"Home"),Ie.createElement("option",{value:"1"},"Work/School"),Ie.createElement("option",{value:"2"},"Leisure"),Ie.createElement("option",{value:"-1"},"All To-Activities"))),Qq=()=>{const[e,t]=ee.useState(!1),n=()=>t(!0),a=()=>t(!1);return Ie.createElement("div",null,Ie.createElement("button",{className:"login-button",onClick:n},"Login"),Ie.createElement(dI,{open:e,onClose:a,closeAfterTransition:!0,BackdropComponent:fI,BackdropProps:{timeout:500,sx:{backdropFilter:"blur(5px)",backgroundColor:"rgba(0, 0, 0, 0.5)"}}},Ie.createElement(Qi,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,height:550,bgcolor:"background.paper",boxShadow:24,p:4}},Ie.createElement("iframe",{src:"https://urbano-frontend.onrender.com/",title:"External Content",width:"100%",height:"100%",style:{border:"none"}}))))},Jq=()=>{const[e,t]=ee.useState(0),n=(a,c)=>{t(c)};return Ie.createElement(Qi,{sx:{width:"100%"}},Ie.createElement(Ib,{value:e,onChange:n,centered:!0},Ie.createElement(kl,{label:"Weekday Trip Volume",sx:{textTransform:"none"}}),Ie.createElement(kl,{label:"Weekend Trip Volume",sx:{textTransform:"none"}})),Ie.createElement("div",{role:"tabpanel",hidden:e!==0},Ie.createElement(Qi,{sx:{p:3}},Ie.createElement("div",{id:"graph-container-weekday",className:"graph-container-weekday"}))),Ie.createElement("div",{role:"tabpanel",hidden:e!==1},Ie.createElement(Qi,{sx:{p:3}},Ie.createElement("div",{id:"graph-container-weekend",className:"graph-container-weekend"}))))},Yq=()=>{const[e,t]=ee.useState(0),n=(a,c)=>{t(c)};return Ie.createElement(Qi,{sx:{width:"100%",overflow:"hidden"}}," ",Ie.createElement(Ib,{value:e,onChange:n,centered:!0,sx:{".MuiTabs-flexContainer":{paddingLeft:"30px"},".MuiTab-root":{textTransform:"none",marginRight:"8px"}}},Ie.createElement(kl,{label:"Energy Summary"}),Ie.createElement(kl,{label:"Energy End Use"}),Ie.createElement(kl,{label:"Energy Fuel Use"})),Ie.createElement("div",{role:"tabpanel",hidden:e!==0},Ie.createElement(Qi,{sx:{p:3}},Ie.createElement("div",{id:"graph-container-energysummaryuse",className:"graph-container-energysummaryuse"}))),Ie.createElement("div",{role:"tabpanel",hidden:e!==1},Ie.createElement(Qi,{sx:{p:3}},Ie.createElement("div",{id:"graph-container-energyenduse",className:"graph-container-energyenduse"}))),Ie.createElement("div",{role:"tabpanel",hidden:e!==2},Ie.createElement(Qi,{sx:{p:3}},Ie.createElement("div",{id:"graph-container-energyfueluse",className:"graph-container-energyfueluse"}))))},eW=()=>{const[e,t]=ee.useState(0),n=(a,c)=>{t(c)};return Ie.createElement(Qi,{sx:{width:"100%"}},Ie.createElement(Ib,{value:e,onChange:n,centered:!0},Ie.createElement(kl,{label:"Winter Energy Load",sx:{textTransform:"none"}}),Ie.createElement(kl,{label:"Summer Energy Load",sx:{textTransform:"none"}}),Ie.createElement(kl,{label:"Load Duration Curve",sx:{textTransform:"none"}})),Ie.createElement("div",{role:"tabpanel",hidden:e!==0},Ie.createElement(Qi,{sx:{p:3}},Ie.createElement("div",{id:"graph-container-energyone",className:"graph-container-energyone"}))),Ie.createElement("div",{role:"tabpanel",hidden:e!==1},Ie.createElement(Qi,{sx:{p:3}},Ie.createElement("div",{id:"graph-container-energytwo",className:"graph-container-energytwo"}))),Ie.createElement("div",{role:"tabpanel",hidden:e!==2},Ie.createElement(Qi,{sx:{p:3}},Ie.createElement("div",{id:"graph-container-energythree",className:"graph-container-energythree"}))))},SS=GI().domain(["Heating","Cooling","Equipment","Lighting","HotWater","PV"]).range(["#cf5867","#6faadd","#959595","#f2e75c","#eec176","#9C27B0"]);function tW({data:e,colorScale:t,onBarDoubleClick:n}){const a=ee.useRef();return ee.useEffect(()=>{if(!a.current)return;const c=a.current;eg(c).selectAll("*").remove();const d={top:0,right:0,bottom:0,left:0},o=220-d.left-d.right,v=20-d.top-d.bottom,x=eg(c).append("svg").attr("width",o+d.left+d.right).attr("height",v+d.top+d.bottom).append("g").attr("transform",`translate(${d.left}, ${d.top})`),E=HI().domain([0,i8(e,P=>P.value)]).range([0,o]);let k=0;x.selectAll(".bar").data(e).enter().append("rect").attr("class","bar").attr("x",P=>{const T=k;return k+=E(P.value),T}).attr("y",0).attr("width",P=>E(P.value)).attr("height",v).attr("fill",P=>t(P.name)).on("dblclick",P=>n(P.name))},[e,t,n]),Ie.createElement(Qi,{ref:a})}function rW({colorScale:e}){const t=ee.useRef();return ee.useEffect(()=>{if(!t.current)return;const n=t.current;eg(n).selectAll("*").remove();const a=100,c=20,o=Math.ceil(e.domain().length/3)*c,v=eg(n).append("svg").attr("width","100%").attr("height",o).append("g");e.domain().forEach((x,E)=>{const k=Math.floor(E/3),P=E%3,T=v.append("g").attr("transform",`translate(${P*a}, ${k*c})`);T.append("rect").attr("x",40).attr("y",0).attr("width",10).attr("height",10).attr("fill",e(x)),T.append("text").attr("x",60).attr("y",10).style("font-size","10px").text(x)})},[e]),Ie.createElement(Qi,{ref:t})}function S_({mapRef:e,setBuildingDataUrl:t,setIthacaEnergyUrl:n,BUILDING_DATA_URL:a,BUILDING_DATA_URL_INITIAL:c,ITHACA_ENERGY_URL_INITIAL:d}){const[o,v]=ee.useState([{id:1,name:"Baseline",data:[{name:"Heating",value:39973},{name:"Cooling",value:4630},{name:"Equipment",value:3372},{name:"Lighting",value:1810},{name:"HotWater",value:4900},{name:"PV",value:0}]},{id:2,name:"Residential Electrified",data:[{name:"Heating",value:32973},{name:"Cooling",value:4630},{name:"Equipment",value:3372},{name:"Lighting",value:1810},{name:"HotWater",value:4900},{name:"PV",value:0}]},{id:3,name:"Commercial Electrified",data:[{name:"Heating",value:22973},{name:"Cooling",value:4630},{name:"Equipment",value:3372},{name:"Lighting",value:1810},{name:"HotWater",value:4900},{name:"PV",value:0}]},{id:4,name:"Full Electrified",data:[{name:"Heating",value:15973},{name:"Cooling",value:4630},{name:"Equipment",value:3372},{name:"Lighting",value:1810},{name:"HotWater",value:4900},{name:"PV",value:0}]}]),[x,E]=ee.useState(null),k=($,H)=>{$.dataTransfer.setData("text/plain",H)},P=($,H)=>{$.preventDefault();const D=parseInt($.dataTransfer.getData("text/plain"),10),U=o.findIndex(te=>te.id===H),q=o.findIndex(te=>te.id===D),N=[...o],[O]=N.splice(q,1);N.splice(U,0,O),v(N)},T=$=>{$.preventDefault()},W=$=>{E($);let H,D;switch(x){case"Baseline":H="./ScenarioData/Baseline_clean.geojson",D="./ScenarioData/Baseline_SiteSummary.geojson";break;case"Residential Electrified":H="./ScenarioData/ResidentialElectrified_clean.geojson",D="./ScenarioData/ResidentialElectrified_SiteSummary.geojson";break;case"Commercial Electrified":H="./ScenarioData/CommercialElectrified_clean.geojson",D="./ScenarioData/CommercialElectrified_SiteSummary.geojson";break;case"Full Electrified":H="./ScenarioData/FullElectrified_clean.geojson",D="./ScenarioData/FullElectrified_SiteSummary.geojson";break;default:H=c,D=d}H!==a&&(t(H),n(D));const U=e.current;U&&(U.getSource("ithaca-energy-Building").setData(H),U.getSource("ithaca-energy-Summary").setData(D))};return Ie.createElement(Qi,null,Ie.createElement(eP,{style:{padding:"12px",backgroundColor:"transparent",fontFamily:"Open Sans, sans-serif"}},o.map($=>Ie.createElement(i7,{key:$.id,draggable:!0,onDragStart:H=>k(H,$.id),onDragOver:T,onDrop:H=>P(H,$.id),onDoubleClick:()=>W($.name),style:{margin:"8px 0",backgroundColor:x===$.name?"#E0E0E0":"#F5F5F5",borderRadius:"4px",border:"1px solid #E0E0E0",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px",height:"35px",cursor:"pointer"},disableGutters:!0},Ie.createElement(Qi,null,$.name.split(" ").map((H,D)=>Ie.createElement(U9,{key:D,variant:"body2",style:{fontSize:"12px"}},H))),Ie.createElement(tW,{data:$.data,colorScale:SS})))),Ie.createElement(rW,{colorScale:SS}))}const nW=({onDataImport:e})=>{const t=ee.useRef(null),n=c=>{const d=c.target.files[0];if(!d)return;const o=new FileReader;o.onload=v=>{try{const x=URL.createObjectURL(d);e(x)}catch(x){console.error("Error parsing the file",x)}},o.readAsText(d)},a=()=>{t.current.click()};return Ie.createElement("div",null,Ie.createElement(m$,{variant:"contained",color:"primary",onClick:a,sx:{backgroundColor:"gray",fontSize:"0.65rem",padding:"2px 5px"}},"+ Add Data"),Ie.createElement("input",{type:"file",ref:t,onChange:n,accept:".geojson",style:{display:"none"}}))};Ls.accessToken="pk.eyJ1Ijoia3g2NCIsImEiOiJjbGkzd2E1dmsxMzNoM2twY2p2azF0bGVlIn0.t_v73kaAMUtoGBPESpw3uA";hD.setApiKey("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");const iW="./Data/ithaca_mobility_summary.geojson",oW="./Data/ithaca_mobility_summary_point.geojson",Km="./Data/ithaca_siteSummary_energy.geojson",Xm="./Data/ithaca_energy_buildingData_1107.geojson",CS="./Data/ithaca_energy_feeder.geojson",kS="./Data/ithaca_trip_volume_by_streets.geojson",TS="./Data/ithaca_trip_volume_from_blocks.geojson",IS="./Data/mobility_metric_specification.json",PS="./Data/energy_metric_specification.json",aW="https://geotile.urbano.io/Ithaca_TripVolume/{z}/{x}/{y}.mvt";function sW(){var Mt;const e=ee.useRef(null),t=ee.useRef(null),[n,a]=ee.useState([0,398]),[c,d]=ee.useState(Xm),[o,v]=ee.useState(Km),[x,E]=ee.useState(!0),k="mapbox://styles/kx64/cljdd8xr6003l01qkbxctho6q",[P,T]=ee.useState("Urbano.io"),[W,$]=ee.useState(""),[H,D]=ee.useState(!0),[U,q]=ee.useState(!1),[N,O]=ee.useState(!1),[te,ne]=ee.useState(!1),[fe,xe]=ee.useState(!1),[Te,ve]=ee.useState(!1),[Ee,Y]=ee.useState(!1),[he,Ne]=ee.useState(!1),[We,we]=ee.useState(!1);ee.useState("weekday"),ee.useState("enduse"),ee.useState("winter");const[be,$e]=ee.useState([]);ee.useState(!1);const Le=ee.useRef(new Set),[St,Ce]=ee.useState(0),[qe,gt]=ee.useState("1_1_-1_-1_-1_-1"),[ze,st]=ee.useState("Gas[kWh_m2][Yr]"),[Wt,Dt]=ee.useState("PeakHourElectricityDemand_KW"),[Ht,At]=ee.useState(12857),[er,$t]=ee.useState(1700),[Zt,nt]=ee.useState(1e3),[Gt,or]=ee.useState(0),[zr,Dr]=ee.useState(53143),[sr,Tr]=ee.useState(1),[Fr,Ar]=ee.useState(1),[en,Ur]=ee.useState({season:1,mode:-1,weekday:1,timeOfDay:-1,fromActivity:-1,toActivity:-1}),[mr,dn]=ee.useState("People/hr"),[xn,Xn]=ee.useState(be.length>0?(Mt=v_.find(ke=>ke.id===be[0]))==null?void 0:Mt.label:"Dashboard Selector"),Ir=()=>{if(t.current){const ke=t.current;be.forEach(Ke=>{ke.setLayoutProperty(Ke,"visibility","none")}),T("Urbano.io"),ve(!1),O(!1),ne(!1),xe(!1),Y(!1),q(!1),D(!0),Gm(t,Le),Ce(Le.current.size),ke.flyTo({center:[-76.5087,42.4558],zoom:8})}},Lt=()=>{if(t.current){const ke=t.current;ke.flyTo({center:[-76.5087,42.444],zoom:13}),$e(["energy-Building","energy-Building-highlighted","energy-Building-other"]),be.forEach(Ke=>{ke.setLayoutProperty(Ke,"visibility","visible")}),T("Urbano.io / Ithaca"),$("Ithaca /ˈɪθəkə/ is a city and the county seat of Tompkins County, New York, United States. Situated on the southern shore of Cayuga Lake in the Finger Lakes region of New York, Ithaca is the largest community in the Ithaca metropolitan statistical area. It is named after the Greek island of Ithaca."),D(!1),q(!0),O(!1),Gm(t,Le),Ce(Le.current.size),popup.remove()}},On=(ke,Ke)=>{Ur(ct=>({...ct,[ke]:parseInt(Ke)}))},Qn=()=>{const ke=`1_${en.weekday}_${en.mode}_${en.timeOfDay}_${en.fromActivity}_${en.toActivity}`;gt(ke),console.log("the layer Code you selected is",qe)};ee.useEffect(()=>{const ke=Ke=>{Ke.key==="Escape"&&(Gm(t,Le),Ce(Le.current.size),be.includes("energy-Building")&&(generateEndUseBarGraph(Le,t),generateFuelUseBarGraph(Le,t)),be.includes("energy-Feeder")&&(tS(Le,t),rS(Le,t),nS(Le,t)),be.includes("mobility-Block-Detailed")&&(m_(Le,t),d_(Le,t),y_(Le,t),g_(Le,t)),be.includes("mobility-Street-Detailed")&&(m_(Le,t),d_(Le,t),y_(Le,t),g_(Le,t)))};return document.addEventListener("keydown",ke),()=>{document.removeEventListener("keydown",ke)}},[]),ee.useEffect(()=>{fetch(kS).then(ke=>ke.json()).then(ke=>{const Ke=ke.features.map(F=>{var X;return((X=F.properties[qe])==null?void 0:X.replace(/,/g,""))||0});Ke.sort((F,V)=>F-V);const ct=Math.floor(Ke.length*.05),jt=Math.floor(Ke.length*.95),tr=Ke[ct],Qt=Ke[jt],yr=Qt-tr,Sr=Qt+1.5*yr,pr=Ke.filter(F=>F<=Sr),z=Math.max(...pr);At(z),be.includes("mobility-Street-Detailed")&&Tr(z)}).catch(ke=>{console.error("Error loading GeoJSON data:",ke)})},[qe]),ee.useEffect(()=>{fetch(TS).then(ke=>ke.json()).then(ke=>{const Ke=ke.features.map(F=>{var X;return parseFloat((X=F.properties[qe])==null?void 0:X.replace(/,/g,""))||0});Ke.sort((F,V)=>F-V);const ct=Math.floor(Ke.length*.05),jt=Math.floor(Ke.length*.95),tr=Ke[ct],Qt=Ke[jt],yr=Qt-tr,Sr=Qt+1.5*yr,pr=Ke.filter(F=>F<=Sr),z=Math.max(...pr);$t(z),be.includes("mobility-Block-Detailed")&&Tr(z)}).catch(ke=>{console.error("Error loading GeoJSON data:",ke)})},[qe]),ee.useEffect(()=>{fetch(c).then(ke=>ke.json()).then(ke=>{const Ke=ke.features.map(V=>V.properties[ze]||0);Ke.sort((V,X)=>V-X);const ct=Math.floor(Ke.length*.2),jt=Math.floor(Ke.length*.8),tr=Ke[ct],Qt=Ke[jt],yr=Qt-tr,Sr=Qt+1.5*yr,pr=Ke.filter(V=>V<=Sr),z=Math.max(...pr),F=Math.min(...pr);nt(z),or(F),be.includes("energy-Building")&&(Tr(z),Ar(F))}).catch(ke=>{console.error("Error loading GeoJSON data:",ke)})},[ze,c]),ee.useEffect(()=>{fetch(CS).then(ke=>ke.json()).then(ke=>{const Ke=ke.features.map(F=>parseFloat(String(F.properties[Wt]).replace(/,/g,""))||0);Ke.sort((F,V)=>F-V);const ct=Math.floor(Ke.length*.2),jt=Math.floor(Ke.length*.8),tr=Ke[ct],Qt=Ke[jt],yr=Qt-tr,Sr=Qt+1.5*yr,pr=Ke.filter(F=>F<=Sr),z=Math.max(...pr);Dr(z),be.includes("energy-Feeder")&&Tr(z)}).catch(ke=>{console.error("Error loading GeoJSON data:",ke)})},[Wt]);const Fi=ke=>{const Ke=[];let ct=9,jt=Fo(qe,ct);ke.includes("mobility-Street-Detailed")?(ct=Ht,jt=Fo(qe,ct)):ke.includes("mobility-Block-Detailed")?(ct=er,jt=Fo(qe,ct)):ke.includes("energy-Building")?(ct=Zt,jt=Fo(ze,ct)):ke.includes("energy-Feeder")&&(ct=zr,jt=Fo(Wt,ct)),Ke.push(Ie.createElement("div",{key:"legend-title",className:"legend-title"},mr)),Ke.push(Ie.createElement("div",{className:"input-container"}," ",Bt()));for(let tr=jt.length-2;tr>=2;tr-=2){const Qt=parseFloat(jt[tr]),yr=jt[tr+1];Ke.push(Ie.createElement("div",{key:Qt,className:"legend-item"},Ie.createElement("span",{className:"value-label"},GV(Qt)),Ie.createElement("div",{className:"color-swatch",style:{backgroundColor:yr}})))}return Ke},Bt=()=>{if(be.includes("mobility-Street-Detailed"))return Ie.createElement("input",{id:"user-max-value",type:"number",value:parseInt(Ht),onChange:ke=>{const Ke=parseInt(ke.target.value);At(Ke)},onBlur:ke=>{Ht<10&&At(10),ke.target.value.trim()===""&&At(sr)},placeholder:"Enter Max Value",inputMode:"numeric"});if(be.includes("mobility-Block-Detailed"))return Ie.createElement("input",{id:"user-max-value",type:"number",value:parseInt(er),onChange:ke=>{const Ke=parseInt(ke.target.value);$t(Ke)},onBlur:ke=>{er<10&&$t(10),ke.target.value.trim()===""&&$t(sr)},placeholder:"Enter Max Value",inputMode:"numeric"});if(be.includes("energy-Building"))return Ie.createElement("input",{id:"user-max-value",type:"number",value:parseInt(Zt),onChange:ke=>{const Ke=parseInt(ke.target.value);nt(Ke)},onBlur:ke=>{Zt<10&&nt(10),ke.target.value.trim()===""&&nt(sr)},placeholder:"Enter Max Value",inputMode:"numeric"});if(be.includes("energy-Feeder"))return Ie.createElement("input",{id:"user-max-value",type:"number",value:parseInt(zr),onChange:ke=>{const Ke=parseInt(ke.target.value);Dr(Ke)},onBlur:ke=>{zr<10&&Dr(10),ke.target.value.trim()===""&&Dr(sr)},placeholder:"Enter Max Value",inputMode:"numeric"})};ee.useEffect(()=>{if(!e.current)return;const ke=new Ls.Map({container:e.current,style:k,center:[-76.5087,42.4558],zoom:8.5,dragRotate:!1,accessToken:Ls.accessToken});return t.current=ke,()=>{ke&&ke.remove()}},[x]),ee.useEffect(()=>{if(t.current){const ke=t.current,Ke=new l5({accessToken:Ls.accessToken,flyTo:{bearing:0,speed:2,curve:1,easing:function(ct){return ct}},mapboxgl:Ls});ke.addControl(Ke)}},[]),ee.useEffect(()=>{t.current&&t.current.addControl(new Ls.NavigationControl)},[]),ee.useEffect(()=>{if(t.current){const ke=t.current,Ke=ke.getCanvasContainer();let ct,jt,tr;ke.on("load",function(){const Qt=ke.getStyle().layers;let yr;for(const ce of Qt)if(ce.type==="symbol"){yr=ce.id;break}ke.addSource("mobility-Street-mvt",{type:"vector",tiles:[aW]}),ke.addSource("mobility-Street-geojson",{type:"geojson",data:kS}),ke.addSource("mobility-Block-geojson",{type:"geojson",data:TS}),ke.addSource("mobility-Ithaca",{type:"geojson",data:iW}),ke.addSource("mobility-Ithaca-dot",{type:"geojson",data:oW}),ke.addLayer({id:"mobility-Block-Detailed",type:"fill",source:"mobility-Block-geojson",paint:{"fill-outline-color":"#ECECEC","fill-color":Fo(qe,er),"fill-opacity":.75},layout:{visibility:"none"}},yr),ke.addLayer({id:"mobility-Block-Detailed-other",type:"fill",source:"mobility-Block-geojson",paint:{"fill-opacity":0},layout:{visibility:"none"}},yr),ke.addLayer({id:"mobility-Block-Detailed-highlighted",type:"fill",source:"mobility-Block-geojson",paint:{"fill-outline-color":"#ffffff","fill-color":"#E8E8E8","fill-opacity":.99},filter:["in","object_id",""],layout:{visibility:"none"}},yr),ke.addLayer({id:"mobility-Street-Detailed",type:"line",source:"mobility-Street-geojson",paint:{"line-color":Fo(qe,Ht),"line-width":["interpolate",["exponential",1],["to-number",["get",qe]],0,1,parseFloat(Ht),5]},layout:{visibility:"none"}},yr),ke.addLayer({id:"mobility-Street-Detailed-other",type:"line",source:"mobility-Street-geojson",paint:{"line-color":"#f7f7f7","line-width":0},layout:{visibility:"none"}},yr),ke.addLayer({id:"mobility-Street-Detailed-highlighted",type:"line",source:"mobility-Street-geojson",paint:{"line-color":"#d8d8d8","line-width":["interpolate",["exponential",1],["to-number",["get",qe]],0,1.75,parseFloat(Ht),6]},filter:["in","object_id",""],layout:{visibility:"none"}},yr),ke.addLayer({id:"mobility-point",type:"circle",source:"mobility-Ithaca-dot",paint:{"circle-color":"rgba(254, 178, 76, 0.85)","circle-radius":40},layout:{visibility:"visible"}}),ke.addLayer({id:"mobility-point-label",type:"symbol",source:"mobility-Ithaca-dot",layout:{"text-field":["get","name"],"text-font":["Open Sans Regular"],"text-size":18}}),ke.addLayer({id:"mobility-Ithaca-boundary",type:"line",source:"mobility-Ithaca",paint:{"line-color":"#bbbbbb","line-dasharray":[10,6],"line-opacity":.6},layout:{visibility:"none"}});const Sr=new Ls.Popup({closeButton:!1,closeOnClick:!1});ke.on("mouseenter","mobility-point",ce=>{ke.getCanvas().style.cursor="pointer";const de=ce.features[0].geometry.coordinates.slice(),Z=`<div style="font-size: 20px; font-weight: bold; margin-bottom: 5px;">Ithaca, New York</div>
              <div style="font-size: 12px; font-weight: normal; margin-bottom: 10px;">Available Dashboard:</div>
       
              <div style="font-size: 10px; font-weight: light;">Building Energy </div>
              <div style="font-size: 10px; font-weight: light;">Grid Energy </div>
              <div style="font-size: 10px; font-weight: light;">Street Mobility </div>
              <div style="font-size: 10px; font-weight: light;">Block Mobility </div>`;for(;Math.abs(ce.lngLat.lng-de[0])>180;)de[0]+=ce.lngLat.lng>de[0]?360:-360;Sr.setLngLat(de).setHTML(Z).addTo(ke)}),ke.on("mouseleave","mobility-point",()=>{ke.getCanvas().style.cursor="",Sr.remove()}),ke.on("click","mobility-point",ce=>{ke.flyTo({center:ce.features[0].geometry.coordinates,zoom:13}),$e(["energy-Building","energy-Building-highlighted","energy-Building-other"]),be.forEach(de=>{ke.setLayoutProperty(de,"visibility","visible")}),T("Urbano.io / Ithaca"),$("Ithaca /ˈɪθəkə/ is a city and the county seat of Tompkins County, New York, United States. Situated on the southern shore of Cayuga Lake in the Finger Lakes region of New York, Ithaca is the largest community in the Ithaca metropolitan statistical area. It is named after the Greek island of Ithaca."),D(!1),q(!0),Sr.remove()}),ke.on("boxzoomend",ce=>{ke.dragPan.enable();const de=ce.boxZoomBounds;ke.fitBounds(de,{padding:1})}),ke.on("zoom",()=>{const ce="mobility-point",de="mobility-point-label",Z="mobility-Ithaca-boundary";ke.getZoom()<10?(ke.setLayoutProperty(ce,"visibility","visible"),ke.setLayoutProperty(de,"visibility","visible"),ke.setLayoutProperty(Z,"visibility","none")):(ke.setLayoutProperty(ce,"visibility","none"),ke.setLayoutProperty(de,"visibility","none"),ke.setLayoutProperty(Z,"visibility","visible"))}),Ke.addEventListener("mousedown",F,!0);function pr(ce){const de=Ke.getBoundingClientRect();return new Ls.Point(ce.clientX-de.left-Ke.clientLeft,ce.clientY-de.top-Ke.clientTop)}function z(){ke.setFilter("mobility-Street-Detailed-highlighted",["!in","object_id",...Le.current]),ke.setFilter("mobility-Block-Detailed-highlighted",["!in","object_id",...Le.current])}function F(ce){if(ce.button===0&&(ce.shiftKey&&ke.dragPan.disable(),document.addEventListener("mouseup",V),document.addEventListener("keydown",re),ct=pr(ce),ce.ctrlKey)){const Z=ke.queryRenderedFeatures([ct,ct],{layers:["mobility-Street-Detailed","mobility-Block-Detailed"]}).map(ue=>ue.properties.object_id);Le.current=new Set([...Le.current].filter(ue=>!Z.includes(ue))),z(),Ce(Le.current.size)}}function V(ce){ke.dragPan.enable(),jt=pr(ce);const de=ke.queryRenderedFeatures([ct,jt],{layers:["mobility-Street-Detailed","mobility-Block-Detailed"]});X(ce,de)}function X(ce,de){if(tr||(tr=document.createElement("div"),tr.classList.add("boxdraw"),Ke.appendChild(tr)),ce.shiftKey){for(const Z of de)Le.current.add(Z.properties.object_id);z()}if(ce.ctrlKey){for(const Z of de)Le.current.delete(Z.properties.object_id);z()}document.removeEventListener("keydown",re),document.removeEventListener("mouseup",V),Ce(Le.current.size)}function re(ce){ce.keyCode===27&&mobilityfinish()}})}},[]),ee.useEffect(()=>{if(t.current){const ke=t.current,Ke=ke.getCanvasContainer();let ct,jt;ke.on("load",function(){const tr=ke.getStyle().layers;let Qt;for(const X of tr)if(X.type==="symbol"){Qt=X.id;break}ke.addSource("ithaca-energy-Summary",{type:"geojson",data:o}),ke.addSource("ithaca-energy-Building",{type:"geojson",data:c}),ke.addSource("ithaca-energy-Feeder",{type:"geojson",data:CS}),ke.addLayer({id:"energy-Building",type:"fill",source:"ithaca-energy-Building",filter:["has","Equipment[KWh][Yr]"],paint:{"fill-outline-color":"#eeeeee","fill-color":Fo(ze,Zt)},layout:{visibility:"none"}},Qt),ke.addLayer({id:"energy-Building-highlighted",type:"fill",source:"ithaca-energy-Building",paint:{"fill-outline-color":"#ffffff","fill-color":"#d8d8d8","fill-opacity":.99},filter:["in","ID_ESL",""],layout:{visibility:"none"}},Qt),ke.addLayer({id:"energy-Building-other",type:"fill",source:"ithaca-energy-Building",filter:["!",["has","Gas[kWh][Mth]"]],paint:{"fill-outline-color":"#d9d9d9","fill-color":"#f1f1f1"},layout:{visibility:"none"}},Qt),ke.addLayer({id:"energy-Feeder",type:"line",source:"ithaca-energy-Feeder",filter:["has","GasDemand_KWh"],paint:{"line-color":Fo(Wt,zr),"line-width":3},layout:{visibility:"none"}},Qt),ke.addLayer({id:"energy-Feeder-other",type:"line",source:"ithaca-energy-Feeder",filter:["!",["has","GasDemand_KWh"]],paint:{"line-width":3,"line-color":"#d8d8d8"},layout:{visibility:"none"}},Qt),ke.addLayer({id:"energy-Feeder-highlighted",type:"line",source:"ithaca-energy-Feeder",filter:["has","GasDemand_KWh"],paint:{"line-color":"#d8d8d8","line-width":3},layout:{visibility:"none"}},Qt),Ke.addEventListener("mousedown",pr,!0);function yr(X){const re=Ke.getBoundingClientRect();return new Ls.Point(X.clientX-re.left-Ke.clientLeft,X.clientY-re.top-Ke.clientTop)}function Sr(){ke.setFilter("energy-Building-highlighted",["!in","ID_ESL",...Le.current]),ke.setFilter("energy-Feeder-highlighted",["!in","ID_ESL",...Le.current])}function pr(X){X.button===0&&(X.shiftKey&&ke.dragPan.disable(),document.removeEventListener("mouseup",z),document.removeEventListener("keydown",F),document.addEventListener("mouseup",z),document.addEventListener("keydown",F),ct=yr(X),X.ctrlKey&&(ke.queryRenderedFeatures([ct,ct],{layers:["energy-Building","energy-Feeder"]}).map(de=>de.properties.ID_ESL).forEach(de=>{Le.current.has(de)&&Le.current.delete(de)}),Sr()))}function z(X){ke.dragPan.enable(),jt=yr(X);const re=ke.queryRenderedFeatures([ct,jt],{layers:["energy-Building","energy-Feeder"]});V(X,re)}function F(X){X.keyCode===27&&V(X,[])}function V(X,re){document.removeEventListener("mouseup",z),document.removeEventListener("keydown",F),X.shiftKey?(re.forEach(ce=>{const de=ce.properties.ID_ESL;Le.current.has(de)||Le.current.add(de)}),Sr()):X.ctrlKey&&(re.forEach(ce=>{const de=ce.properties.ID_ESL;Le.current.has(de)&&Le.current.delete(de)}),Sr()),Ce(Le.current.size),console.log(Le.current)}ee.useEffect(()=>{eS(Le,t,o)},[c])})}},[]),ee.useEffect(()=>{const Ke=setTimeout(async()=>{if(t.current){const ct=t.current,jt="mobility-Street-Detailed",tr="mobility-Street-Detailed-highlighted",Qt="mobility-Block-Detailed",yr="energy-Building",Sr="energy-Feeder",pr=Ht,z=er,F=Zt,V=zr;ct.getLayer(jt)&&(ct.setPaintProperty(jt,"line-color",Fo(qe,pr)),ct.setPaintProperty(tr,"line-width",["interpolate",["exponential",1],["to-number",["get",qe]],0,1.75,parseFloat(Ht),6]),ct.setPaintProperty(jt,"line-width",["interpolate",["exponential",1],["to-number",["get",qe]],0,1.5,parseFloat(Ht),6])),ct.getLayer(Qt)&&ct.setPaintProperty(Qt,"fill-color",Fo(qe,z)),ct.getLayer(yr)&&ct.setPaintProperty(yr,"fill-color",Fo(ze,F)),ct.getLayer(Sr)&&ct.setPaintProperty(Sr,"line-color",Fo(Wt,V))}},700);return()=>clearTimeout(Ke)},[er,Ht,Zt,zr,qe,ze,Wt]),ee.useEffect(()=>{if(t.current){const ke=t.current,Ke=["mobility-Street-Detailed","mobility-Block-Detailed","energy-Building","energy-Feeder"];for(const ct of Ke){if(!ke.getLayer(ct))continue;const jt=be.includes(__(ct)),tr=be.includes(x_(ct)),Qt=be.includes(ct)||jt||tr;tr&&ke.setLayoutProperty(x_(ct),"visibility",Qt?"visible":"none"),jt&&ke.setLayoutProperty(__(ct),"visibility",Qt?"visible":"none"),ke.setLayoutProperty(ct,"visibility",Qt?"visible":"none")}}},[be]);const Er=ke=>{const Ke=t.current,ct=__(ke),jt=x_(ke),tr=be.includes(ct),Qt=be.includes(jt),yr=be.find(Sr=>Sr!==ct);if(Gm(t,Le),Ke.setLayoutProperty(yr,"visibility","none"),be.forEach(Sr=>{Ke.setLayoutProperty(Sr,"visibility","none")}),be.includes(ke))$e(be.filter(Sr=>Sr!==ct&&Sr!==jt&&Sr!==ke)),Xn("Map Dashboard Selector"),O(!1),xe(!1),O(!1),ve(!1),Y(!1),set;else{$e([ct,jt,ke]),Ke.setLayoutProperty(ct,"visibility",tr?"visible":"none"),Ke.setLayoutProperty(jt,"visibility",Qt?"visible":"none");const pr=v_.find(z=>z.id===ke);Xn((pr==null?void 0:pr.label)||"Map Dashboard Selector")}};ee.useEffect(()=>{be.includes("energy-Building")&&(O(!1),xe(!0),ve(!0),Y(!1),fetch(PS).then(ke=>ke.json()).then(ke=>{const Ke=ke[0].metric_description;$(Ke)}),Tr(Zt),dn("kWh/m2")),be.includes("energy-Feeder")&&(O(!1),ne(!1),xe(!0),Y(!0),ve(!1),fetch(PS).then(ke=>ke.json()).then(ke=>{const Ke=ke[1].metric_description;$(Ke)}),Tr(zr),dn("kW")),(be.includes("mobility-Street-Detailed")||be.includes("mobility-Block-Detailed"))&&(O(!0),xe(!1),ve(!1),Y(!1),be.includes("mobility-Street-Detailed")?(fetch(IS).then(ke=>ke.json()).then(ke=>{const Ke=ke[0].metric_description;$(Ke)}),Tr(Ht),ne(!1)):(fetch(IS).then(ke=>ke.json()).then(ke=>{const Ke=ke[1].metric_description;$(Ke)}),Tr(er),ne(!0)),dn("Number of Trips"))},[be,ze,Le]),ee.useEffect(()=>{const ke=parseInt(Gt),Ke=parseInt(Zt),ct=[Math.min(n[0],Ke),Math.min(n[1],Ke)];ct[0]>ct[1]&&(ct[0]=ke),a(ct)},[Zt,Gt]);const ut=()=>{we(!We)};return Ie.createElement("div",{className:"container"},(N||fe)&&Ie.createElement("div",{className:"sidebar"},Ie.createElement("div",{className:"title-container"},Ie.createElement("div",{className:"title"},Ie.createElement("p",{onClick:Ir},P)),Ie.createElement("p",{className:"version-text"}," v.2.0411"),Ie.createElement("div",null,Ie.createElement(nW,{onDataImport:d}))),H&&Ie.createElement("div",{className:"home-page"},Ie.createElement(XV,{handleDigitalTwinClick:Lt})),U&&Ie.createElement("div",null,Ie.createElement(t9,{toggleableLayers:v_,displayingLayers:be,handleLayerToggle:Er})),he&&Ie.createElement("div",{className:"city-info"},W),U&&Ie.createElement("div",{class:"hr-container"},Ie.createElement("span",{class:"third-title"},"Scenerio Selector"),Ie.createElement("hr",{class:"sidebar-divider"})),N&&Ie.createElement("div",null,Ie.createElement(S_,{mapRef:t,setBuildingDataUrl:d,setIthacaEnergyUrl:v,BUILDING_DATA_URL:c,BUILDING_DATA_URL_INITIAL:Xm,ITHACA_ENERGY_URL_INITIAL:Km})),Te&&Ie.createElement("div",null,Ie.createElement(S_,{mapRef:t,setBuildingDataUrl:d,setIthacaEnergyUrl:v,BUILDING_DATA_URL:c,BUILDING_DATA_URL_INITIAL:Xm,ITHACA_ENERGY_URL_INITIAL:Km})),Ee&&Ie.createElement("div",null,Ie.createElement(S_,{mapRef:t,setBuildingDataUrl:d,setIthacaEnergyUrl:v,BUILDING_DATA_URL:c,BUILDING_DATA_URL_INITIAL:Xm,ITHACA_ENERGY_URL_INITIAL:Km}))),(N||fe)&&Ie.createElement("div",{className:"sidebar-graph"},U&&Ie.createElement("div",null,Ie.createElement("div",{class:"hr-container"},Ie.createElement("span",{class:"summary-title"},"Summary Report")),Ie.createElement("div",{className:"selected-number"},Ie.createElement("p",null,St," Selected objects."))),N&&Ie.createElement("div",null,Ie.createElement(Jq,null)),Te&&Ie.createElement("div",null,Ie.createElement(Yq,null)),Ee&&Ie.createElement("div",null,Ie.createElement(eW,null)),(H||U)&&Ie.createElement("div",{style:{margin:"20px"}}),N&&(m_(Le,t),d_(Le,t),y_(Le,t),g_(Le,t)),fe&&(HV(Le,t,o),ZV(Le,t,o),eS(Le,t,o),KV(Le,t)),Ee&&(tS(Le,t),rS(Le,t),nS(Le,t))),Ie.createElement("div",{className:"content-container"},Ie.createElement("div",{className:"map-container",ref:e}),H&&Ie.createElement("div",{className:"homepage-title"},"Urbano.io Map"),Ie.createElement("div",{className:"login-container"},Ie.createElement(Qq,null)),(N||fe)&&Ie.createElement("div",{className:"main-legend-container"},Fi(be)),(N||fe)&&Ie.createElement("div",{className:"metric-container"},U&&Ie.createElement("div",{style:{position:"relative"}},Ie.createElement("span",{class:"click-title",onClick:ut},Ie.createElement("div",{class:"click-title",style:{display:"flex",alignItems:"center"}},Ie.createElement("img",{src:"./Image/metric.png",alt:"Metrics Icon",style:{width:"30px",marginLeft:"5px"}}),"Metrics"))),We&&Te&&Ie.createElement(r9,{buildingLayerCode:ze,setBuildingLayerCode:st}),We&&Ee&&Ie.createElement(Zq,{feederLayerCode:Wt,setFeederLayerCode:Dt}),We&&N&&Ie.createElement(Kq,{propertiesNumber:en,handlePropertyChange:On,blockContainerVisible:te}),We&&N&&Ie.createElement(Xq,{propertiesNumber:en,handlePropertyChange:On}),We&&N&&Ie.createElement("button",{className:"submit-button",onClick:Qn},"Apply"))))}function lW(e){uf.render(Ie.createElement(sW,null),e)}lW(document.getElementById("app"));
