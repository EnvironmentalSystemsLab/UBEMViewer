{"version":3,"file":"utils.js","names":["getFetchFunction","options","fetchFunction","fetch","url","fetchOptions","mergeImageServiceProps","props","_objectSpread","loadOptions"],"sources":["../../../../../src/lib/sources/utils/utils.ts"],"sourcesContent":["// loaders.gl, MIT license\n\nimport type {LoaderOptions} from '@loaders.gl/loader-utils';\n\n/**\n * Gets the current fetch function from options\n * @todo - move to loader-utils module\n * @todo - use in core module counterpart\n * @param options\n * @param context\n */\nexport function getFetchFunction(options?: LoaderOptions) {\n  const fetchFunction = options?.fetch;\n\n  // options.fetch can be a function\n  if (fetchFunction && typeof fetchFunction === 'function') {\n    return (url: string, fetchOptions?: RequestInit) => fetchFunction(url, fetchOptions);\n  }\n\n  // options.fetch can be an options object, use global fetch with those options\n  const fetchOptions = options?.fetch;\n  if (fetchOptions && typeof fetchOptions !== 'function') {\n    return (url) => fetch(url, fetchOptions);\n  }\n\n  // else return the global fetch function\n  return (url) => fetch(url);\n}\n\nexport function mergeImageServiceProps<Props extends {loadOptions?: any}>(\n  props: Props\n): Required<Props> {\n  // @ts-expect-error\n  return {\n    // Default fetch\n    ...props,\n    loadOptions: {\n      ...props.loadOptions,\n      fetch: getFetchFunction(props.loadOptions)\n    }\n  };\n}\n"],"mappings":";;;;;;;;;;;AAWO,SAASA,gBAAgBA,CAACC,OAAuB,EAAE;EACxD,IAAMC,aAAa,GAAGD,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEE,KAAK;EAGpC,IAAID,aAAa,IAAI,OAAOA,aAAa,KAAK,UAAU,EAAE;IACxD,OAAO,UAACE,GAAW,EAAEC,YAA0B;MAAA,OAAKH,aAAa,CAACE,GAAG,EAAEC,YAAY,CAAC;IAAA;EACtF;EAGA,IAAMA,YAAY,GAAGJ,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEE,KAAK;EACnC,IAAIE,YAAY,IAAI,OAAOA,YAAY,KAAK,UAAU,EAAE;IACtD,OAAO,UAACD,GAAG;MAAA,OAAKD,KAAK,CAACC,GAAG,EAAEC,YAAY,CAAC;IAAA;EAC1C;EAGA,OAAO,UAACD,GAAG;IAAA,OAAKD,KAAK,CAACC,GAAG,CAAC;EAAA;AAC5B;AAEO,SAASE,sBAAsBA,CACpCC,KAAY,EACK;EAEjB,OAAAC,aAAA,CAAAA,aAAA,KAEKD,KAAK;IACRE,WAAW,EAAAD,aAAA,CAAAA,aAAA,KACND,KAAK,CAACE,WAAW;MACpBN,KAAK,EAAEH,gBAAgB,CAACO,KAAK,CAACE,WAAW;IAAC;EAC3C;AAEL"}