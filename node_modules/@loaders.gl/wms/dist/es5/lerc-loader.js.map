{"version":3,"file":"lerc-loader.js","names":["Lerc","_interopRequireWildcard","require","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","_typeof","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","VERSION","LERCLoader","id","name","module","version","worker","extensions","mimeTypes","options","wms","parse","_parse","_asyncToGenerator2","_regenerator","mark","_callee","arrayBuffer","wrap","_callee$","_context","prev","next","abrupt","parseLERC","stop","_x","_x2","apply","arguments","exports","_x3","_x4","_parseLERC","_callee2","pixelBlock","_callee2$","_context2","load","decode","lerc","_typecheckLERCLoader"],"sources":["../../src/lerc-loader.ts"],"sourcesContent":["// loaders.gl, MIT license\n\nimport type {LoaderWithParser, LoaderOptions} from '@loaders.gl/loader-utils';\nimport type {LERCData} from './lib/parsers/lerc/lerc-types';\nimport * as Lerc from 'lerc';\n\n// __VERSION__ is injected by babel-plugin-version-inline\n// @ts-ignore TS2304: Cannot find name '__VERSION__'.\nconst VERSION = typeof __VERSION__ !== 'undefined' ? __VERSION__ : 'latest';\n\nexport type LERCLoaderOptions = LoaderOptions & {\n  lerc?: {\n    /**\tThe number of bytes to skip in the input byte stream. A valid Lerc file is expected at that position. */\n    inputOffset?: number;\n    /**\tIt is recommended to use the returned mask instead of setting this value. */\n    noDataValue?: number;\n    /**\t(ndepth LERC2 only) If true, returned depth values are pixel-interleaved. */\n    returnInterleaved?: boolean;\n  };\n};\n\n/**\n * Loader for the LERC raster format\n */\nexport const LERCLoader = {\n  id: 'lerc',\n  name: 'LERC',\n\n  module: 'wms',\n  version: VERSION,\n  worker: false,\n  extensions: ['lrc', 'lerc', 'lerc2', 'lerc1'],\n  mimeTypes: ['application/octet-stream'],\n  // test: ?,\n  options: {\n    wms: {}\n  },\n  parse: async (arrayBuffer: ArrayBuffer, options?: LERCLoaderOptions) =>\n    parseLERC(arrayBuffer, options)\n};\n\nasync function parseLERC(arrayBuffer: ArrayBuffer, options?: LERCLoaderOptions): Promise<LERCData> {\n  // Load the WASM library\n  await Lerc.load();\n  // Perform the decode\n  const pixelBlock = Lerc.decode(arrayBuffer, options?.lerc);\n  return pixelBlock;\n}\n\nexport const _typecheckLERCLoader: LoaderWithParser = LERCLoader;\n"],"mappings":";;;;;;;;;;AAIA,IAAAA,IAAA,GAAAC,uBAAA,CAAAC,OAAA;AAA6B,SAAAC,yBAAAC,WAAA,eAAAC,OAAA,kCAAAC,iBAAA,OAAAD,OAAA,QAAAE,gBAAA,OAAAF,OAAA,YAAAF,wBAAA,YAAAA,yBAAAC,WAAA,WAAAA,WAAA,GAAAG,gBAAA,GAAAD,iBAAA,KAAAF,WAAA;AAAA,SAAAH,wBAAAO,GAAA,EAAAJ,WAAA,SAAAA,WAAA,IAAAI,GAAA,IAAAA,GAAA,CAAAC,UAAA,WAAAD,GAAA,QAAAA,GAAA,aAAAE,OAAA,CAAAF,GAAA,yBAAAA,GAAA,4BAAAG,OAAA,EAAAH,GAAA,UAAAI,KAAA,GAAAT,wBAAA,CAAAC,WAAA,OAAAQ,KAAA,IAAAA,KAAA,CAAAC,GAAA,CAAAL,GAAA,YAAAI,KAAA,CAAAE,GAAA,CAAAN,GAAA,SAAAO,MAAA,WAAAC,qBAAA,GAAAC,MAAA,CAAAC,cAAA,IAAAD,MAAA,CAAAE,wBAAA,WAAAC,GAAA,IAAAZ,GAAA,QAAAY,GAAA,kBAAAH,MAAA,CAAAI,SAAA,CAAAC,cAAA,CAAAC,IAAA,CAAAf,GAAA,EAAAY,GAAA,SAAAI,IAAA,GAAAR,qBAAA,GAAAC,MAAA,CAAAE,wBAAA,CAAAX,GAAA,EAAAY,GAAA,cAAAI,IAAA,KAAAA,IAAA,CAAAV,GAAA,IAAAU,IAAA,CAAAC,GAAA,KAAAR,MAAA,CAAAC,cAAA,CAAAH,MAAA,EAAAK,GAAA,EAAAI,IAAA,YAAAT,MAAA,CAAAK,GAAA,IAAAZ,GAAA,CAAAY,GAAA,SAAAL,MAAA,CAAAJ,OAAA,GAAAH,GAAA,MAAAI,KAAA,IAAAA,KAAA,CAAAa,GAAA,CAAAjB,GAAA,EAAAO,MAAA,YAAAA,MAAA;AAI7B,IAAMW,OAAO,GAAG,cAAkB,KAAK,WAAW,aAAiB,QAAQ;AAgBpE,IAAMC,UAAU,GAAG;EACxBC,EAAE,EAAE,MAAM;EACVC,IAAI,EAAE,MAAM;EAEZC,MAAM,EAAE,KAAK;EACbC,OAAO,EAAEL,OAAO;EAChBM,MAAM,EAAE,KAAK;EACbC,UAAU,EAAE,CAAC,KAAK,EAAE,MAAM,EAAE,OAAO,EAAE,OAAO,CAAC;EAC7CC,SAAS,EAAE,CAAC,0BAA0B,CAAC;EAEvCC,OAAO,EAAE;IACPC,GAAG,EAAE,CAAC;EACR,CAAC;EACDC,KAAK;IAAA,IAAAC,MAAA,OAAAC,kBAAA,CAAA5B,OAAA,EAAA6B,YAAA,CAAA7B,OAAA,CAAA8B,IAAA,CAAE,SAAAC,QAAOC,WAAwB,EAAER,OAA2B;MAAA,OAAAK,YAAA,CAAA7B,OAAA,CAAAiC,IAAA,UAAAC,SAAAC,QAAA;QAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;UAAA;YAAA,OAAAF,QAAA,CAAAG,MAAA,WACjEC,SAAS,CAACP,WAAW,EAAER,OAAO,CAAC;UAAA;UAAA;YAAA,OAAAW,QAAA,CAAAK,IAAA;QAAA;MAAA,GAAAT,OAAA;IAAA;IAAA,SAAAL,MAAAe,EAAA,EAAAC,GAAA;MAAA,OAAAf,MAAA,CAAAgB,KAAA,OAAAC,SAAA;IAAA;IAAA,OAAAlB,KAAA;EAAA;AACnC,CAAC;AAACmB,OAAA,CAAA7B,UAAA,GAAAA,UAAA;AAAA,SAEauB,SAASA,CAAAO,GAAA,EAAAC,GAAA;EAAA,OAAAC,UAAA,CAAAL,KAAA,OAAAC,SAAA;AAAA;AAAA,SAAAI,WAAA;EAAAA,UAAA,OAAApB,kBAAA,CAAA5B,OAAA,EAAA6B,YAAA,CAAA7B,OAAA,CAAA8B,IAAA,CAAxB,SAAAmB,SAAyBjB,WAAwB,EAAER,OAA2B;IAAA,IAAA0B,UAAA;IAAA,OAAArB,YAAA,CAAA7B,OAAA,CAAAiC,IAAA,UAAAkB,UAAAC,SAAA;MAAA,kBAAAA,SAAA,CAAAhB,IAAA,GAAAgB,SAAA,CAAAf,IAAA;QAAA;UAAAe,SAAA,CAAAf,IAAA;UAAA,OAEtEhD,IAAI,CAACgE,IAAI,CAAC,CAAC;QAAA;UAEXH,UAAU,GAAG7D,IAAI,CAACiE,MAAM,CAACtB,WAAW,EAAER,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAE+B,IAAI,CAAC;UAAA,OAAAH,SAAA,CAAAd,MAAA,WACnDY,UAAU;QAAA;QAAA;UAAA,OAAAE,SAAA,CAAAZ,IAAA;MAAA;IAAA,GAAAS,QAAA;EAAA,CAClB;EAAA,OAAAD,UAAA,CAAAL,KAAA,OAAAC,SAAA;AAAA;AAEM,IAAMY,oBAAsC,GAAGxC,UAAU;AAAC6B,OAAA,CAAAW,oBAAA,GAAAA,oBAAA"}