"use strict";
// loaders.gl, MIT license
Object.defineProperty(exports, "__esModule", { value: true });
exports.parseCSWCapabilities = void 0;
const xml_1 = require("@loaders.gl/xml");
const parse_exception_report_1 = require("./parse-exception-report");
/**
 * Parses a typed data structure from raw XML for `GetCapabilities` response
 * @note Error handlings is fairly weak
 */
function parseCSWCapabilities(text, options) {
    const parsedXML = xml_1.XMLLoader.parseTextSync(text, {
        ...options,
        xml: {
            ...options?.xml,
            removeNSPrefix: true,
            uncapitalizeKeys: true
        }
    });
    (0, parse_exception_report_1.parseExceptionReport)(parsedXML);
    const xmlCapabilities = parsedXML.capabilities || parsedXML;
    return xmlCapabilities;
}
exports.parseCSWCapabilities = parseCSWCapabilities;
