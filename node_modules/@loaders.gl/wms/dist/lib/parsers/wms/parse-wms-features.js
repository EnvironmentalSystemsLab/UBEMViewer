"use strict";
// loaders.gl, MIT license
Object.defineProperty(exports, "__esModule", { value: true });
exports.parseWMSFeatureInfo = void 0;
const xml_1 = require("@loaders.gl/xml");
/**
 * Parses a typed data structure from raw XML for `GetFeatureInfo` response
 * @note Error handlings is fairly weak
 */
function parseWMSFeatureInfo(text, options) {
    const parsedXML = xml_1.XMLLoader.parseTextSync(text, options);
    const xmlFeatureInfo = parsedXML.FeatureInfoResponse?.FIELDS || [];
    const xmlFeatures = Array.isArray(xmlFeatureInfo) ? xmlFeatureInfo : [xmlFeatureInfo];
    return {
        features: xmlFeatures.map((xmlFeature) => extractFeature(xmlFeature))
    };
}
exports.parseWMSFeatureInfo = parseWMSFeatureInfo;
function extractFeature(xmlFeature) {
    const xmlFields = xmlFeature || {};
    // TODO - not correct
    return {
        attributes: xmlFields,
        type: '',
        bounds: { bottom: 0, top: 0, left: 0, right: 0 }
    };
}
