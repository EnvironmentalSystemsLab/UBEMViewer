{"version":3,"file":"feature.js","names":["createFeature","id","type","geom","tags","feature","geometry","minX","Infinity","minY","maxX","maxY","calcLineBBox","_iterator","_createForOfIteratorHelper","_step","s","n","done","line","value","err","e","f","_iterator2","_step2","polygon","i","length","Math","min","max"],"sources":["../../../../src/lib/geojson-tiler/feature.ts"],"sourcesContent":["// loaders.gl, MIT license\n// Forked from https://github.com/mapbox/geojson-vt under compatible ISC license\n\nimport {GeoJSONTileFeature} from './tile';\n\nexport function createFeature(id, type, geom, tags): GeoJSONTileFeature {\n  const feature: GeoJSONTileFeature = {\n    // eslint-disable-next-line\n    id: id == null ? null : id,\n    type,\n    geometry: geom,\n    tags,\n    minX: Infinity,\n    minY: Infinity,\n    maxX: -Infinity,\n    maxY: -Infinity\n  };\n\n  if (type === 'Point' || type === 'MultiPoint' || type === 'LineString') {\n    calcLineBBox(feature, geom);\n  } else if (type === 'Polygon') {\n    // the outer ring (ie [0]) contains all inner rings\n    calcLineBBox(feature, geom[0]);\n  } else if (type === 'MultiLineString') {\n    for (const line of geom) {\n      calcLineBBox(feature, line);\n    }\n  } else if (type === 'MultiPolygon') {\n    for (const polygon of geom) {\n      // the outer ring (ie [0]) contains all inner rings\n      calcLineBBox(feature, polygon[0]);\n    }\n  }\n\n  return feature;\n}\n\nfunction calcLineBBox(feature, geom) {\n  for (let i = 0; i < geom.length; i += 3) {\n    feature.minX = Math.min(feature.minX, geom[i]);\n    feature.minY = Math.min(feature.minY, geom[i + 1]);\n    feature.maxX = Math.max(feature.maxX, geom[i]);\n    feature.maxY = Math.max(feature.maxY, geom[i + 1]);\n  }\n}\n"],"mappings":";;;;;;;;;AAKO,SAASA,aAAaA,CAACC,EAAE,EAAEC,IAAI,EAAEC,IAAI,EAAEC,IAAI,EAAsB;EACtE,IAAMC,OAA2B,GAAG;IAElCJ,EAAE,EAAEA,EAAE,IAAI,IAAI,GAAG,IAAI,GAAGA,EAAE;IAC1BC,IAAI,EAAJA,IAAI;IACJI,QAAQ,EAAEH,IAAI;IACdC,IAAI,EAAJA,IAAI;IACJG,IAAI,EAAEC,QAAQ;IACdC,IAAI,EAAED,QAAQ;IACdE,IAAI,EAAE,CAACF,QAAQ;IACfG,IAAI,EAAE,CAACH;EACT,CAAC;EAED,IAAIN,IAAI,KAAK,OAAO,IAAIA,IAAI,KAAK,YAAY,IAAIA,IAAI,KAAK,YAAY,EAAE;IACtEU,YAAY,CAACP,OAAO,EAAEF,IAAI,CAAC;EAC7B,CAAC,MAAM,IAAID,IAAI,KAAK,SAAS,EAAE;IAE7BU,YAAY,CAACP,OAAO,EAAEF,IAAI,CAAC,CAAC,CAAC,CAAC;EAChC,CAAC,MAAM,IAAID,IAAI,KAAK,iBAAiB,EAAE;IAAA,IAAAW,SAAA,GAAAC,0BAAA,CAClBX,IAAI;MAAAY,KAAA;IAAA;MAAvB,KAAAF,SAAA,CAAAG,CAAA,MAAAD,KAAA,GAAAF,SAAA,CAAAI,CAAA,IAAAC,IAAA,GAAyB;QAAA,IAAdC,IAAI,GAAAJ,KAAA,CAAAK,KAAA;QACbR,YAAY,CAACP,OAAO,EAAEc,IAAI,CAAC;MAC7B;IAAC,SAAAE,GAAA;MAAAR,SAAA,CAAAS,CAAA,CAAAD,GAAA;IAAA;MAAAR,SAAA,CAAAU,CAAA;IAAA;EACH,CAAC,MAAM,IAAIrB,IAAI,KAAK,cAAc,EAAE;IAAA,IAAAsB,UAAA,GAAAV,0BAAA,CACZX,IAAI;MAAAsB,MAAA;IAAA;MAA1B,KAAAD,UAAA,CAAAR,CAAA,MAAAS,MAAA,GAAAD,UAAA,CAAAP,CAAA,IAAAC,IAAA,GAA4B;QAAA,IAAjBQ,OAAO,GAAAD,MAAA,CAAAL,KAAA;QAEhBR,YAAY,CAACP,OAAO,EAAEqB,OAAO,CAAC,CAAC,CAAC,CAAC;MACnC;IAAC,SAAAL,GAAA;MAAAG,UAAA,CAAAF,CAAA,CAAAD,GAAA;IAAA;MAAAG,UAAA,CAAAD,CAAA;IAAA;EACH;EAEA,OAAOlB,OAAO;AAChB;AAEA,SAASO,YAAYA,CAACP,OAAO,EAAEF,IAAI,EAAE;EACnC,KAAK,IAAIwB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGxB,IAAI,CAACyB,MAAM,EAAED,CAAC,IAAI,CAAC,EAAE;IACvCtB,OAAO,CAACE,IAAI,GAAGsB,IAAI,CAACC,GAAG,CAACzB,OAAO,CAACE,IAAI,EAAEJ,IAAI,CAACwB,CAAC,CAAC,CAAC;IAC9CtB,OAAO,CAACI,IAAI,GAAGoB,IAAI,CAACC,GAAG,CAACzB,OAAO,CAACI,IAAI,EAAEN,IAAI,CAACwB,CAAC,GAAG,CAAC,CAAC,CAAC;IAClDtB,OAAO,CAACK,IAAI,GAAGmB,IAAI,CAACE,GAAG,CAAC1B,OAAO,CAACK,IAAI,EAAEP,IAAI,CAACwB,CAAC,CAAC,CAAC;IAC9CtB,OAAO,CAACM,IAAI,GAAGkB,IAAI,CAACE,GAAG,CAAC1B,OAAO,CAACM,IAAI,EAAER,IAAI,CAACwB,CAAC,GAAG,CAAC,CAAC,CAAC;EACpD;AACF"}