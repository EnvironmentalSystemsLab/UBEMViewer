!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.quadbin=t():n.quadbin=t()}(this,(()=>(()=>{var n={701:(n,t,e)=>{var r=e(977);function o(n){return{type:"Feature",geometry:r.tileToGeoJSON(n),properties:{}}}function f(n,t){var e,o,f=n.coordinates,u=t.max_zoom,s={},h=[];if("Point"===n.type)return[r.pointToTile(f[0],f[1],u)];if("MultiPoint"===n.type)for(e=0;e<f.length;e++)s[c((o=r.pointToTile(f[e][0],f[e][1],u))[0],o[1],o[2])]=!0;else if("LineString"===n.type)a(s,f,u);else if("MultiLineString"===n.type)for(e=0;e<f.length;e++)a(s,f[e],u);else if("Polygon"===n.type)i(s,h,f,u);else{if("MultiPolygon"!==n.type)throw new Error("Geometry type not implemented");for(e=0;e<f.length;e++)i(s,h,f[e],u)}if(t.min_zoom!==u){var p=h.length;for(l(s,h),e=0;e<p;e++){var v=h[e];s[c(v[0],v[1],v[2])]=!0}return function(n,t,e){for(var r=[],o=e.max_zoom;o>e.min_zoom;o--){for(var f={},i=[],u=0;u<t.length;u++){var a=t[u];if(a[0]%2==0&&a[1]%2==0){var l=c(a[0]+1,a[1],o),s=c(a[0],a[1]+1,o),h=c(a[0]+1,a[1]+1,o);if(n[l]&&n[s]&&n[h]){n[c(a[0],a[1],a[2])]=!1,n[l]=!1,n[s]=!1,n[h]=!1;var p=[a[0]/2,a[1]/2,o-1];o-1===e.min_zoom?r.push(p):(f[c(a[0]/2,a[1]/2,o-1)]=!0,i.push(p))}}}for(u=0;u<t.length;u++)n[c((a=t[u])[0],a[1],a[2])]&&r.push(a);n=f,t=i}return r}(s,h,t)}return l(s,h),h}function i(n,t,e,r){for(var o=[],f=0;f<e.length;f++){var i=[];a(n,e[f],r,i);for(var l=0,s=i.length,h=s-1;l<s;h=l++){var p=(l+1)%s,v=i[l][1];(v>i[h][1]||v>i[p][1])&&(v<i[h][1]||v<i[p][1])&&v!==i[p][1]&&o.push(i[l])}}for(o.sort(u),f=0;f<o.length;f+=2){v=o[f][1];for(var g=o[f][0]+1;g<o[f+1][0];g++)n[c(g,v,r)]||t.push([g,v,r])}}function u(n,t){return n[1]-t[1]||n[0]-t[0]}function a(n,t,e,o){for(var f,i,u=0;u<t.length-1;u++){var a=r.pointToTileFraction(t[u][0],t[u][1],e),l=r.pointToTileFraction(t[u+1][0],t[u+1][1],e),s=a[0],h=a[1],p=l[0]-s,v=l[1]-h;if(0!==v||0!==p){var g=p>0?1:-1,x=v>0?1:-1,T=Math.floor(s),m=Math.floor(h),y=0===p?1/0:Math.abs(((p>0?1:0)+T-s)/p),d=0===v?1/0:Math.abs(((v>0?1:0)+m-h)/v),M=Math.abs(g/p),b=Math.abs(x/v);for(T===f&&m===i||(n[c(T,m,e)]=!0,o&&m!==i&&o.push([T,m]),f=T,i=m);y<1||d<1;)y<d?(y+=M,T+=g):(d+=b,m+=x),n[c(T,m,e)]=!0,o&&m!==i&&o.push([T,m]),f=T,i=m}}o&&m===o[0][1]&&o.pop()}function l(n,t){for(var e,r,o,f,i,u=Object.keys(n),a=0;a<u.length;a++)t.push((void 0,void 0,void 0,void 0,[i=(f=((e=+u[a])-(r=e%32))/32)%(o=2*(1<<r)),(f-i)/o%o,r]))}function c(n,t,e){return 32*(2*(1<<e)*t+n)+e}t.geojson=function(n,t){return{type:"FeatureCollection",features:f(n,t).map(o)}},t.tiles=f,t.indexes=function(n,t){return f(n,t).map(r.tileToQuadkey)}},977:n=>{var t=Math.PI/180,e=180/Math.PI;function r(n){var t=o(n[0]+1,n[2]);return[o(n[0],n[2]),f(n[1]+1,n[2]),t,f(n[1],n[2])]}function o(n,t){return n/Math.pow(2,t)*360-180}function f(n,t){var r=Math.PI-2*Math.PI*n/Math.pow(2,t);return e*Math.atan(.5*(Math.exp(r)-Math.exp(-r)))}function i(n,t,e){var r=h(n,t,e);return r[0]=Math.floor(r[0]),r[1]=Math.floor(r[1]),r}function u(n){return[[2*n[0],2*n[1],n[2]+1],[2*n[0]+1,2*n[1],n[2]+1],[2*n[0]+1,2*n[1]+1,n[2]+1],[2*n[0],2*n[1]+1,n[2]+1]]}function a(n){return n[0]%2==0&&n[1]%2==0?[n[0]/2,n[1]/2,n[2]-1]:n[0]%2==0&&!n[1]%2==0?[n[0]/2,(n[1]-1)/2,n[2]-1]:!n[0]%2==0&&n[1]%2==0?[(n[0]-1)/2,n[1]/2,n[2]-1]:[(n[0]-1)/2,(n[1]-1)/2,n[2]-1]}function l(n){return u(a(n))}function c(n,t){for(var e=0;e<n.length;e++)if(s(n[e],t))return!0;return!1}function s(n,t){return n[0]===t[0]&&n[1]===t[1]&&n[2]===t[2]}function h(n,e,r){var o=Math.sin(e*t),f=Math.pow(2,r);return[f*(n/360+.5),f*(.5-.25*Math.log((1+o)/(1-o))/Math.PI),r]}n.exports={tileToGeoJSON:function(n){var t=r(n);return{type:"Polygon",coordinates:[[[t[0],t[1]],[t[0],t[3]],[t[2],t[3]],[t[2],t[1]],[t[0],t[1]]]]}},tileToBBOX:r,getChildren:u,getParent:a,getSiblings:l,hasTile:c,hasSiblings:function(n,t){for(var e=l(n),r=0;r<e.length;r++)if(!c(t,e[r]))return!1;return!0},tilesEqual:s,tileToQuadkey:function(n){for(var t="",e=n[2];e>0;e--){var r=0,o=1<<e-1;0!=(n[0]&o)&&r++,0!=(n[1]&o)&&(r+=2),t+=r.toString()}return t},quadkeyToTile:function(n){for(var t=0,e=0,r=n.length,o=r;o>0;o--){var f=1<<o-1;switch(n[r-o]){case"0":break;case"1":t|=f;break;case"2":e|=f;break;case"3":t|=f,e|=f}}return[t,e,r]},pointToTile:i,bboxToTile:function(n){var t=i(n[0],n[1],32),e=i(n[2],n[3],32),r=[t[0],t[1],e[0],e[1]],o=function(n){for(var t=0;t<28;t++){var e=1<<32-(t+1);if((n[0]&e)!=(n[2]&e)||(n[1]&e)!=(n[3]&e))return t}return 28}(r);return 0===o?[0,0,0]:[r[0]>>>32-o,r[1]>>>32-o,o]},pointToTileFraction:h}}},t={};function e(r){var o=t[r];if(void 0!==o)return o.exports;var f=t[r]={exports:{}};return n[r](f,f.exports,e),f.exports}var r={};return(()=>{"use strict";var n=r;Object.defineProperty(n,"__esModule",{value:!0}),n.geometryToCells=n.cellToParent=n.getResolution=n.cellToTile=n.tileToCell=n.bigIntToHex=n.hexToBigInt=void 0;const t=e(701),o=[0x5555555555555555n,0x3333333333333333n,0x0f0f0f0f0f0f0f0fn,0x00ff00ff00ff00ffn,0x0000ffff0000ffffn,0x00000000ffffffffn],f=[0n,1n,2n,4n,8n,16n];function i(n){if(n.z<0||n.z>26)throw new Error("Wrong zoom");const t=BigInt(n.z);let e=BigInt(n.x)<<32n-t,r=BigInt(n.y)<<32n-t;for(let n=0;n<5;n++){const t=f[5-n],i=o[4-n];e=(e|e<<t)&i,r=(r|r<<t)&i}return 0x4000000000000000n|1n<<59n|t<<52n|(e|r<<1n)>>12n|0xfffffffffffffn>>2n*t}function u(n){return n>>52n&0x1fn}n.hexToBigInt=function(n){return BigInt(`0x${n}`)},n.bigIntToHex=function(n){return n.toString(16)},n.tileToCell=i,n.cellToTile=function(n){const t=n>>52n&0x1fn,e=(0xfffffffffffffn&n)<<12n;if(1n!==(n>>59n&7n)&&0n!==(n>>57n&3n))throw new Error("Wrong mode");let r=e,i=e>>1n;for(let n=0;n<6;n++){const t=f[n],e=o[n];r=(r|r>>t)&e,i=(i|i>>t)&e}return r>>=32n-t,i>>=32n-t,{z:Number(t),x:Number(r),y:Number(i)}},n.getResolution=u,n.cellToParent=function(n){const t=u(n)-1n;return n&~(0x1fn<<52n)|t<<52n|0xfffffffffffffn>>2n*t},n.geometryToCells=function(n,e){const r=Number(e);return(0,t.tiles)(n,{min_zoom:r,max_zoom:r}).map((([n,t,e])=>i({x:n,y:t,z:e})))}})(),r})()));