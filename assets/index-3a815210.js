function $z(e,t){for(var n=0;n<t.length;n++){const a=t[n];if(typeof a!="string"&&!Array.isArray(a)){for(const u in a)if(u!=="default"&&!(u in e)){const f=Object.getOwnPropertyDescriptor(a,u);f&&Object.defineProperty(e,u,f.get?f:{enumerable:!0,get:()=>a[u]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))a(u);new MutationObserver(u=>{for(const f of u)if(f.type==="childList")for(const o of f.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function n(u){const f={};return u.integrity&&(f.integrity=u.integrity),u.referrerPolicy&&(f.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?f.credentials="include":u.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function a(u){if(u.ep)return;u.ep=!0;const f=n(u);fetch(u.href,f)}})();var Da=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Rg(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function nk(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function a(){return this instanceof a?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var u=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(n,a,u.get?u:{enumerable:!0,get:function(){return e[a]}})}),n}var ik={exports:{}},Lg={},ok={exports:{}},Or={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vf=Symbol.for("react.element"),Vz=Symbol.for("react.portal"),qz=Symbol.for("react.fragment"),Wz=Symbol.for("react.strict_mode"),Gz=Symbol.for("react.profiler"),Hz=Symbol.for("react.provider"),Kz=Symbol.for("react.context"),Zz=Symbol.for("react.forward_ref"),Xz=Symbol.for("react.suspense"),Yz=Symbol.for("react.memo"),Jz=Symbol.for("react.lazy"),A2=Symbol.iterator;function Qz(e){return e===null||typeof e!="object"?null:(e=A2&&e[A2]||e["@@iterator"],typeof e=="function"?e:null)}var ak={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},sk=Object.assign,lk={};function ih(e,t,n){this.props=e,this.context=t,this.refs=lk,this.updater=n||ak}ih.prototype.isReactComponent={};ih.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ih.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function uk(){}uk.prototype=ih.prototype;function g1(e,t,n){this.props=e,this.context=t,this.refs=lk,this.updater=n||ak}var v1=g1.prototype=new uk;v1.constructor=g1;sk(v1,ih.prototype);v1.isPureReactComponent=!0;var M2=Array.isArray,ck=Object.prototype.hasOwnProperty,_1={current:null},pk={key:!0,ref:!0,__self:!0,__source:!0};function hk(e,t,n){var a,u={},f=null,o=null;if(t!=null)for(a in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(f=""+t.key),t)ck.call(t,a)&&!pk.hasOwnProperty(a)&&(u[a]=t[a]);var v=arguments.length-2;if(v===1)u.children=n;else if(1<v){for(var x=Array(v),E=0;E<v;E++)x[E]=arguments[E+2];u.children=x}if(e&&e.defaultProps)for(a in v=e.defaultProps,v)u[a]===void 0&&(u[a]=v[a]);return{$$typeof:vf,type:e,key:f,ref:o,props:u,_owner:_1.current}}function eR(e,t){return{$$typeof:vf,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function x1(e){return typeof e=="object"&&e!==null&&e.$$typeof===vf}function tR(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var z2=/\/+/g;function $0(e,t){return typeof e=="object"&&e!==null&&e.key!=null?tR(""+e.key):t.toString(36)}function gy(e,t,n,a,u){var f=typeof e;(f==="undefined"||f==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(f){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case vf:case Vz:o=!0}}if(o)return o=e,u=u(o),e=a===""?"."+$0(o,0):a,M2(u)?(n="",e!=null&&(n=e.replace(z2,"$&/")+"/"),gy(u,t,n,"",function(E){return E})):u!=null&&(x1(u)&&(u=eR(u,n+(!u.key||o&&o.key===u.key?"":(""+u.key).replace(z2,"$&/")+"/")+e)),t.push(u)),1;if(o=0,a=a===""?".":a+":",M2(e))for(var v=0;v<e.length;v++){f=e[v];var x=a+$0(f,v);o+=gy(f,t,n,x,u)}else if(x=Qz(e),typeof x=="function")for(e=x.call(e),v=0;!(f=e.next()).done;)f=f.value,x=a+$0(f,v++),o+=gy(f,t,n,x,u);else if(f==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function $m(e,t,n){if(e==null)return e;var a=[],u=0;return gy(e,a,"","",function(f){return t.call(n,f,u++)}),a}function rR(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var mo={current:null},vy={transition:null},nR={ReactCurrentDispatcher:mo,ReactCurrentBatchConfig:vy,ReactCurrentOwner:_1};Or.Children={map:$m,forEach:function(e,t,n){$m(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return $m(e,function(){t++}),t},toArray:function(e){return $m(e,function(t){return t})||[]},only:function(e){if(!x1(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Or.Component=ih;Or.Fragment=qz;Or.Profiler=Gz;Or.PureComponent=g1;Or.StrictMode=Wz;Or.Suspense=Xz;Or.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nR;Or.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=sk({},e.props),u=e.key,f=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(f=t.ref,o=_1.current),t.key!==void 0&&(u=""+t.key),e.type&&e.type.defaultProps)var v=e.type.defaultProps;for(x in t)ck.call(t,x)&&!pk.hasOwnProperty(x)&&(a[x]=t[x]===void 0&&v!==void 0?v[x]:t[x])}var x=arguments.length-2;if(x===1)a.children=n;else if(1<x){v=Array(x);for(var E=0;E<x;E++)v[E]=arguments[E+2];a.children=v}return{$$typeof:vf,type:e.type,key:u,ref:f,props:a,_owner:o}};Or.createContext=function(e){return e={$$typeof:Kz,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Hz,_context:e},e.Consumer=e};Or.createElement=hk;Or.createFactory=function(e){var t=hk.bind(null,e);return t.type=e,t};Or.createRef=function(){return{current:null}};Or.forwardRef=function(e){return{$$typeof:Zz,render:e}};Or.isValidElement=x1;Or.lazy=function(e){return{$$typeof:Jz,_payload:{_status:-1,_result:e},_init:rR}};Or.memo=function(e,t){return{$$typeof:Yz,type:e,compare:t===void 0?null:t}};Or.startTransition=function(e){var t=vy.transition;vy.transition={};try{e()}finally{vy.transition=t}};Or.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Or.useCallback=function(e,t){return mo.current.useCallback(e,t)};Or.useContext=function(e){return mo.current.useContext(e)};Or.useDebugValue=function(){};Or.useDeferredValue=function(e){return mo.current.useDeferredValue(e)};Or.useEffect=function(e,t){return mo.current.useEffect(e,t)};Or.useId=function(){return mo.current.useId()};Or.useImperativeHandle=function(e,t,n){return mo.current.useImperativeHandle(e,t,n)};Or.useInsertionEffect=function(e,t){return mo.current.useInsertionEffect(e,t)};Or.useLayoutEffect=function(e,t){return mo.current.useLayoutEffect(e,t)};Or.useMemo=function(e,t){return mo.current.useMemo(e,t)};Or.useReducer=function(e,t,n){return mo.current.useReducer(e,t,n)};Or.useRef=function(e){return mo.current.useRef(e)};Or.useState=function(e){return mo.current.useState(e)};Or.useSyncExternalStore=function(e,t,n){return mo.current.useSyncExternalStore(e,t,n)};Or.useTransition=function(){return mo.current.useTransition()};Or.version="18.2.0";ok.exports=Or;var te=ok.exports;const ms=Rg(te),tx=$z({__proto__:null,default:ms},[te]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iR=te,oR=Symbol.for("react.element"),aR=Symbol.for("react.fragment"),sR=Object.prototype.hasOwnProperty,lR=iR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,uR={key:!0,ref:!0,__self:!0,__source:!0};function dk(e,t,n){var a,u={},f=null,o=null;n!==void 0&&(f=""+n),t.key!==void 0&&(f=""+t.key),t.ref!==void 0&&(o=t.ref);for(a in t)sR.call(t,a)&&!uR.hasOwnProperty(a)&&(u[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps,t)u[a]===void 0&&(u[a]=t[a]);return{$$typeof:oR,type:e,key:f,ref:o,props:u,_owner:lR.current}}Lg.Fragment=aR;Lg.jsx=dk;Lg.jsxs=dk;ik.exports=Lg;var ee=ik.exports;var fk={exports:{}},ea={},mk={exports:{}},yk={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Te,Oe){var Je=Te.length;Te.push(Oe);e:for(;0<Je;){var $e=Je-1>>>1,et=Te[$e];if(0<u(et,Oe))Te[$e]=Oe,Te[Je]=et,Je=$e;else break e}}function n(Te){return Te.length===0?null:Te[0]}function a(Te){if(Te.length===0)return null;var Oe=Te[0],Je=Te.pop();if(Je!==Oe){Te[0]=Je;e:for(var $e=0,et=Te.length,Wt=et>>>1;$e<Wt;){var Re=2*($e+1)-1,He=Te[Re],Zt=Re+1,Pt=Te[Zt];if(0>u(He,Je))Zt<et&&0>u(Pt,He)?(Te[$e]=Pt,Te[Zt]=Je,$e=Zt):(Te[$e]=He,Te[Re]=Je,$e=Re);else if(Zt<et&&0>u(Pt,Je))Te[$e]=Pt,Te[Zt]=Je,$e=Zt;else break e}}return Oe}function u(Te,Oe){var Je=Te.sortIndex-Oe.sortIndex;return Je!==0?Je:Te.id-Oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var f=performance;e.unstable_now=function(){return f.now()}}else{var o=Date,v=o.now();e.unstable_now=function(){return o.now()-v}}var x=[],E=[],T=1,I=null,P=3,V=!1,N=!1,q=!1,J=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(Te){for(var Oe=n(E);Oe!==null;){if(Oe.callback===null)a(E);else if(Oe.startTime<=Te)a(E),Oe.sortIndex=Oe.expirationTime,t(x,Oe);else break;Oe=n(E)}}function O(Te){if(q=!1,R(Te),!N)if(n(x)!==null)N=!0,Ce(Q);else{var Oe=n(E);Oe!==null&&ke(O,Oe.startTime-Te)}}function Q(Te,Oe){N=!1,q&&(q=!1,U(_e),_e=-1),V=!0;var Je=P;try{for(R(Oe),I=n(x);I!==null&&(!(I.expirationTime>Oe)||Te&&!we());){var $e=I.callback;if(typeof $e=="function"){I.callback=null,P=I.priorityLevel;var et=$e(I.expirationTime<=Oe);Oe=e.unstable_now(),typeof et=="function"?I.callback=et:I===n(x)&&a(x),R(Oe)}else a(x);I=n(x)}if(I!==null)var Wt=!0;else{var Re=n(E);Re!==null&&ke(O,Re.startTime-Oe),Wt=!1}return Wt}finally{I=null,P=Je,V=!1}}var se=!1,pe=null,_e=-1,ze=5,he=-1;function we(){return!(e.unstable_now()-he<ze)}function ie(){if(pe!==null){var Te=e.unstable_now();he=Te;var Oe=!0;try{Oe=pe(!0,Te)}finally{Oe?ge():(se=!1,pe=null)}}else se=!1}var ge;if(typeof F=="function")ge=function(){F(ie)};else if(typeof MessageChannel<"u"){var Ne=new MessageChannel,qe=Ne.port2;Ne.port1.onmessage=ie,ge=function(){qe.postMessage(null)}}else ge=function(){J(ie,0)};function Ce(Te){pe=Te,se||(se=!0,ge())}function ke(Te,Oe){_e=J(function(){Te(e.unstable_now())},Oe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Te){Te.callback=null},e.unstable_continueExecution=function(){N||V||(N=!0,Ce(Q))},e.unstable_forceFrameRate=function(Te){0>Te||125<Te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ze=0<Te?Math.floor(1e3/Te):5},e.unstable_getCurrentPriorityLevel=function(){return P},e.unstable_getFirstCallbackNode=function(){return n(x)},e.unstable_next=function(Te){switch(P){case 1:case 2:case 3:var Oe=3;break;default:Oe=P}var Je=P;P=Oe;try{return Te()}finally{P=Je}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Te,Oe){switch(Te){case 1:case 2:case 3:case 4:case 5:break;default:Te=3}var Je=P;P=Te;try{return Oe()}finally{P=Je}},e.unstable_scheduleCallback=function(Te,Oe,Je){var $e=e.unstable_now();switch(typeof Je=="object"&&Je!==null?(Je=Je.delay,Je=typeof Je=="number"&&0<Je?$e+Je:$e):Je=$e,Te){case 1:var et=-1;break;case 2:et=250;break;case 5:et=1073741823;break;case 4:et=1e4;break;default:et=5e3}return et=Je+et,Te={id:T++,callback:Oe,priorityLevel:Te,startTime:Je,expirationTime:et,sortIndex:-1},Je>$e?(Te.sortIndex=Je,t(E,Te),n(x)===null&&Te===n(E)&&(q?(U(_e),_e=-1):q=!0,ke(O,Je-$e))):(Te.sortIndex=et,t(x,Te),N||V||(N=!0,Ce(Q))),Te},e.unstable_shouldYield=we,e.unstable_wrapCallback=function(Te){var Oe=P;return function(){var Je=P;P=Oe;try{return Te.apply(this,arguments)}finally{P=Je}}}})(yk);mk.exports=yk;var cR=mk.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gk=te,Jo=cR;function lt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var vk=new Set,Gd={};function sc(e,t){$p(e,t),$p(e+"Capture",t)}function $p(e,t){for(Gd[e]=t,e=0;e<t.length;e++)vk.add(t[e])}var il=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rx=Object.prototype.hasOwnProperty,pR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,R2={},L2={};function hR(e){return rx.call(L2,e)?!0:rx.call(R2,e)?!1:pR.test(e)?L2[e]=!0:(R2[e]=!0,!1)}function dR(e,t,n,a){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function fR(e,t,n,a){if(t===null||typeof t>"u"||dR(e,t,n,a))return!0;if(a)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function yo(e,t,n,a,u,f,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=u,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=f,this.removeEmptyString=o}var Vi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Vi[e]=new yo(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Vi[t]=new yo(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Vi[e]=new yo(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Vi[e]=new yo(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Vi[e]=new yo(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Vi[e]=new yo(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Vi[e]=new yo(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Vi[e]=new yo(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Vi[e]=new yo(e,5,!1,e.toLowerCase(),null,!1,!1)});var b1=/[\-:]([a-z])/g;function w1(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(b1,w1);Vi[t]=new yo(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(b1,w1);Vi[t]=new yo(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(b1,w1);Vi[t]=new yo(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Vi[e]=new yo(e,1,!1,e.toLowerCase(),null,!1,!1)});Vi.xlinkHref=new yo("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Vi[e]=new yo(e,1,!1,e.toLowerCase(),null,!0,!0)});function S1(e,t,n,a){var u=Vi.hasOwnProperty(t)?Vi[t]:null;(u!==null?u.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(fR(t,n,u,a)&&(n=null),a||u===null?hR(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):u.mustUseProperty?e[u.propertyName]=n===null?u.type===3?!1:"":n:(t=u.attributeName,a=u.attributeNamespace,n===null?e.removeAttribute(t):(u=u.type,n=u===3||u===4&&n===!0?"":""+n,a?e.setAttributeNS(a,t,n):e.setAttribute(t,n))))}var pl=gk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Vm=Symbol.for("react.element"),gp=Symbol.for("react.portal"),vp=Symbol.for("react.fragment"),E1=Symbol.for("react.strict_mode"),nx=Symbol.for("react.profiler"),_k=Symbol.for("react.provider"),xk=Symbol.for("react.context"),C1=Symbol.for("react.forward_ref"),ix=Symbol.for("react.suspense"),ox=Symbol.for("react.suspense_list"),k1=Symbol.for("react.memo"),Ll=Symbol.for("react.lazy"),bk=Symbol.for("react.offscreen"),D2=Symbol.iterator;function ld(e){return e===null||typeof e!="object"?null:(e=D2&&e[D2]||e["@@iterator"],typeof e=="function"?e:null)}var qn=Object.assign,V0;function Ed(e){if(V0===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);V0=t&&t[1]||""}return`
`+V0+e}var q0=!1;function W0(e,t){if(!e||q0)return"";q0=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(E){var a=E}Reflect.construct(e,[],t)}else{try{t.call()}catch(E){a=E}e.call(t.prototype)}else{try{throw Error()}catch(E){a=E}e()}}catch(E){if(E&&a&&typeof E.stack=="string"){for(var u=E.stack.split(`
`),f=a.stack.split(`
`),o=u.length-1,v=f.length-1;1<=o&&0<=v&&u[o]!==f[v];)v--;for(;1<=o&&0<=v;o--,v--)if(u[o]!==f[v]){if(o!==1||v!==1)do if(o--,v--,0>v||u[o]!==f[v]){var x=`
`+u[o].replace(" at new "," at ");return e.displayName&&x.includes("<anonymous>")&&(x=x.replace("<anonymous>",e.displayName)),x}while(1<=o&&0<=v);break}}}finally{q0=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Ed(e):""}function mR(e){switch(e.tag){case 5:return Ed(e.type);case 16:return Ed("Lazy");case 13:return Ed("Suspense");case 19:return Ed("SuspenseList");case 0:case 2:case 15:return e=W0(e.type,!1),e;case 11:return e=W0(e.type.render,!1),e;case 1:return e=W0(e.type,!0),e;default:return""}}function ax(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case vp:return"Fragment";case gp:return"Portal";case nx:return"Profiler";case E1:return"StrictMode";case ix:return"Suspense";case ox:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case xk:return(e.displayName||"Context")+".Consumer";case _k:return(e._context.displayName||"Context")+".Provider";case C1:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case k1:return t=e.displayName||null,t!==null?t:ax(e.type)||"Memo";case Ll:t=e._payload,e=e._init;try{return ax(e(t))}catch{}}return null}function yR(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ax(t);case 8:return t===E1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Xl(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function wk(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function gR(e){var t=wk(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var u=n.get,f=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return u.call(this)},set:function(o){a=""+o,f.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return a},setValue:function(o){a=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function qm(e){e._valueTracker||(e._valueTracker=gR(e))}function Sk(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),a="";return e&&(a=wk(e)?e.checked?"true":"false":e.value),e=a,e!==n?(t.setValue(e),!0):!1}function Uy(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function sx(e,t){var n=t.checked;return qn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function O2(e,t){var n=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;n=Xl(t.value!=null?t.value:n),e._wrapperState={initialChecked:a,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Ek(e,t){t=t.checked,t!=null&&S1(e,"checked",t,!1)}function lx(e,t){Ek(e,t);var n=Xl(t.value),a=t.type;if(n!=null)a==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ux(e,t.type,n):t.hasOwnProperty("defaultValue")&&ux(e,t.type,Xl(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function B2(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function ux(e,t,n){(t!=="number"||Uy(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Cd=Array.isArray;function Mp(e,t,n,a){if(e=e.options,t){t={};for(var u=0;u<n.length;u++)t["$"+n[u]]=!0;for(n=0;n<e.length;n++)u=t.hasOwnProperty("$"+e[n].value),e[n].selected!==u&&(e[n].selected=u),u&&a&&(e[n].defaultSelected=!0)}else{for(n=""+Xl(n),t=null,u=0;u<e.length;u++){if(e[u].value===n){e[u].selected=!0,a&&(e[u].defaultSelected=!0);return}t!==null||e[u].disabled||(t=e[u])}t!==null&&(t.selected=!0)}}function cx(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(lt(91));return qn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function N2(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(lt(92));if(Cd(n)){if(1<n.length)throw Error(lt(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Xl(n)}}function Ck(e,t){var n=Xl(t.value),a=Xl(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),a!=null&&(e.defaultValue=""+a)}function F2(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function kk(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function px(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?kk(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Wm,Tk=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,a,u){MSApp.execUnsafeLocalFunction(function(){return e(t,n,a,u)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Wm=Wm||document.createElement("div"),Wm.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Wm.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Hd(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Rd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vR=["Webkit","ms","Moz","O"];Object.keys(Rd).forEach(function(e){vR.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Rd[t]=Rd[e]})});function Ik(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Rd.hasOwnProperty(e)&&Rd[e]?(""+t).trim():t+"px"}function Pk(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var a=n.indexOf("--")===0,u=Ik(n,t[n],a);n==="float"&&(n="cssFloat"),a?e.setProperty(n,u):e[n]=u}}var _R=qn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hx(e,t){if(t){if(_R[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(lt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(lt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(lt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(lt(62))}}function dx(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fx=null;function T1(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var mx=null,zp=null,Rp=null;function j2(e){if(e=bf(e)){if(typeof mx!="function")throw Error(lt(280));var t=e.stateNode;t&&(t=Fg(t),mx(e.stateNode,e.type,t))}}function Ak(e){zp?Rp?Rp.push(e):Rp=[e]:zp=e}function Mk(){if(zp){var e=zp,t=Rp;if(Rp=zp=null,j2(e),t)for(e=0;e<t.length;e++)j2(t[e])}}function zk(e,t){return e(t)}function Rk(){}var G0=!1;function Lk(e,t,n){if(G0)return e(t,n);G0=!0;try{return zk(e,t,n)}finally{G0=!1,(zp!==null||Rp!==null)&&(Rk(),Mk())}}function Kd(e,t){var n=e.stateNode;if(n===null)return null;var a=Fg(n);if(a===null)return null;n=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(lt(231,t,typeof n));return n}var yx=!1;if(il)try{var ud={};Object.defineProperty(ud,"passive",{get:function(){yx=!0}}),window.addEventListener("test",ud,ud),window.removeEventListener("test",ud,ud)}catch{yx=!1}function xR(e,t,n,a,u,f,o,v,x){var E=Array.prototype.slice.call(arguments,3);try{t.apply(n,E)}catch(T){this.onError(T)}}var Ld=!1,$y=null,Vy=!1,gx=null,bR={onError:function(e){Ld=!0,$y=e}};function wR(e,t,n,a,u,f,o,v,x){Ld=!1,$y=null,xR.apply(bR,arguments)}function SR(e,t,n,a,u,f,o,v,x){if(wR.apply(this,arguments),Ld){if(Ld){var E=$y;Ld=!1,$y=null}else throw Error(lt(198));Vy||(Vy=!0,gx=E)}}function lc(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Dk(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function U2(e){if(lc(e)!==e)throw Error(lt(188))}function ER(e){var t=e.alternate;if(!t){if(t=lc(e),t===null)throw Error(lt(188));return t!==e?null:e}for(var n=e,a=t;;){var u=n.return;if(u===null)break;var f=u.alternate;if(f===null){if(a=u.return,a!==null){n=a;continue}break}if(u.child===f.child){for(f=u.child;f;){if(f===n)return U2(u),e;if(f===a)return U2(u),t;f=f.sibling}throw Error(lt(188))}if(n.return!==a.return)n=u,a=f;else{for(var o=!1,v=u.child;v;){if(v===n){o=!0,n=u,a=f;break}if(v===a){o=!0,a=u,n=f;break}v=v.sibling}if(!o){for(v=f.child;v;){if(v===n){o=!0,n=f,a=u;break}if(v===a){o=!0,a=f,n=u;break}v=v.sibling}if(!o)throw Error(lt(189))}}if(n.alternate!==a)throw Error(lt(190))}if(n.tag!==3)throw Error(lt(188));return n.stateNode.current===n?e:t}function Ok(e){return e=ER(e),e!==null?Bk(e):null}function Bk(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Bk(e);if(t!==null)return t;e=e.sibling}return null}var Nk=Jo.unstable_scheduleCallback,$2=Jo.unstable_cancelCallback,CR=Jo.unstable_shouldYield,kR=Jo.unstable_requestPaint,ai=Jo.unstable_now,TR=Jo.unstable_getCurrentPriorityLevel,I1=Jo.unstable_ImmediatePriority,Fk=Jo.unstable_UserBlockingPriority,qy=Jo.unstable_NormalPriority,IR=Jo.unstable_LowPriority,jk=Jo.unstable_IdlePriority,Dg=null,ys=null;function PR(e){if(ys&&typeof ys.onCommitFiberRoot=="function")try{ys.onCommitFiberRoot(Dg,e,void 0,(e.current.flags&128)===128)}catch{}}var Oa=Math.clz32?Math.clz32:zR,AR=Math.log,MR=Math.LN2;function zR(e){return e>>>=0,e===0?32:31-(AR(e)/MR|0)|0}var Gm=64,Hm=4194304;function kd(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Wy(e,t){var n=e.pendingLanes;if(n===0)return 0;var a=0,u=e.suspendedLanes,f=e.pingedLanes,o=n&268435455;if(o!==0){var v=o&~u;v!==0?a=kd(v):(f&=o,f!==0&&(a=kd(f)))}else o=n&~u,o!==0?a=kd(o):f!==0&&(a=kd(f));if(a===0)return 0;if(t!==0&&t!==a&&!(t&u)&&(u=a&-a,f=t&-t,u>=f||u===16&&(f&4194240)!==0))return t;if(a&4&&(a|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)n=31-Oa(t),u=1<<n,a|=e[n],t&=~u;return a}function RR(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function LR(e,t){for(var n=e.suspendedLanes,a=e.pingedLanes,u=e.expirationTimes,f=e.pendingLanes;0<f;){var o=31-Oa(f),v=1<<o,x=u[o];x===-1?(!(v&n)||v&a)&&(u[o]=RR(v,t)):x<=t&&(e.expiredLanes|=v),f&=~v}}function vx(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Uk(){var e=Gm;return Gm<<=1,!(Gm&4194240)&&(Gm=64),e}function H0(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function _f(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Oa(t),e[t]=n}function DR(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<n;){var u=31-Oa(n),f=1<<u;t[u]=0,a[u]=-1,e[u]=-1,n&=~f}}function P1(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var a=31-Oa(n),u=1<<a;u&t|e[a]&t&&(e[a]|=t),n&=~u}}var pn=0;function $k(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Vk,A1,qk,Wk,Gk,_x=!1,Km=[],Ul=null,$l=null,Vl=null,Zd=new Map,Xd=new Map,Ol=[],OR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function V2(e,t){switch(e){case"focusin":case"focusout":Ul=null;break;case"dragenter":case"dragleave":$l=null;break;case"mouseover":case"mouseout":Vl=null;break;case"pointerover":case"pointerout":Zd.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xd.delete(t.pointerId)}}function cd(e,t,n,a,u,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:n,eventSystemFlags:a,nativeEvent:f,targetContainers:[u]},t!==null&&(t=bf(t),t!==null&&A1(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,u!==null&&t.indexOf(u)===-1&&t.push(u),e)}function BR(e,t,n,a,u){switch(t){case"focusin":return Ul=cd(Ul,e,t,n,a,u),!0;case"dragenter":return $l=cd($l,e,t,n,a,u),!0;case"mouseover":return Vl=cd(Vl,e,t,n,a,u),!0;case"pointerover":var f=u.pointerId;return Zd.set(f,cd(Zd.get(f)||null,e,t,n,a,u)),!0;case"gotpointercapture":return f=u.pointerId,Xd.set(f,cd(Xd.get(f)||null,e,t,n,a,u)),!0}return!1}function Hk(e){var t=Wu(e.target);if(t!==null){var n=lc(t);if(n!==null){if(t=n.tag,t===13){if(t=Dk(n),t!==null){e.blockedOn=t,Gk(e.priority,function(){qk(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function _y(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=xx(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var a=new n.constructor(n.type,n);fx=a,n.target.dispatchEvent(a),fx=null}else return t=bf(n),t!==null&&A1(t),e.blockedOn=n,!1;t.shift()}return!0}function q2(e,t,n){_y(e)&&n.delete(t)}function NR(){_x=!1,Ul!==null&&_y(Ul)&&(Ul=null),$l!==null&&_y($l)&&($l=null),Vl!==null&&_y(Vl)&&(Vl=null),Zd.forEach(q2),Xd.forEach(q2)}function pd(e,t){e.blockedOn===t&&(e.blockedOn=null,_x||(_x=!0,Jo.unstable_scheduleCallback(Jo.unstable_NormalPriority,NR)))}function Yd(e){function t(u){return pd(u,e)}if(0<Km.length){pd(Km[0],e);for(var n=1;n<Km.length;n++){var a=Km[n];a.blockedOn===e&&(a.blockedOn=null)}}for(Ul!==null&&pd(Ul,e),$l!==null&&pd($l,e),Vl!==null&&pd(Vl,e),Zd.forEach(t),Xd.forEach(t),n=0;n<Ol.length;n++)a=Ol[n],a.blockedOn===e&&(a.blockedOn=null);for(;0<Ol.length&&(n=Ol[0],n.blockedOn===null);)Hk(n),n.blockedOn===null&&Ol.shift()}var Lp=pl.ReactCurrentBatchConfig,Gy=!0;function FR(e,t,n,a){var u=pn,f=Lp.transition;Lp.transition=null;try{pn=1,M1(e,t,n,a)}finally{pn=u,Lp.transition=f}}function jR(e,t,n,a){var u=pn,f=Lp.transition;Lp.transition=null;try{pn=4,M1(e,t,n,a)}finally{pn=u,Lp.transition=f}}function M1(e,t,n,a){if(Gy){var u=xx(e,t,n,a);if(u===null)n_(e,t,a,Hy,n),V2(e,a);else if(BR(u,e,t,n,a))a.stopPropagation();else if(V2(e,a),t&4&&-1<OR.indexOf(e)){for(;u!==null;){var f=bf(u);if(f!==null&&Vk(f),f=xx(e,t,n,a),f===null&&n_(e,t,a,Hy,n),f===u)break;u=f}u!==null&&a.stopPropagation()}else n_(e,t,a,null,n)}}var Hy=null;function xx(e,t,n,a){if(Hy=null,e=T1(a),e=Wu(e),e!==null)if(t=lc(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Dk(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Hy=e,null}function Kk(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(TR()){case I1:return 1;case Fk:return 4;case qy:case IR:return 16;case jk:return 536870912;default:return 16}default:return 16}}var Nl=null,z1=null,xy=null;function Zk(){if(xy)return xy;var e,t=z1,n=t.length,a,u="value"in Nl?Nl.value:Nl.textContent,f=u.length;for(e=0;e<n&&t[e]===u[e];e++);var o=n-e;for(a=1;a<=o&&t[n-a]===u[f-a];a++);return xy=u.slice(e,1<a?1-a:void 0)}function by(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Zm(){return!0}function W2(){return!1}function ta(e){function t(n,a,u,f,o){this._reactName=n,this._targetInst=u,this.type=a,this.nativeEvent=f,this.target=o,this.currentTarget=null;for(var v in e)e.hasOwnProperty(v)&&(n=e[v],this[v]=n?n(f):f[v]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Zm:W2,this.isPropagationStopped=W2,this}return qn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Zm)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Zm)},persist:function(){},isPersistent:Zm}),t}var oh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},R1=ta(oh),xf=qn({},oh,{view:0,detail:0}),UR=ta(xf),K0,Z0,hd,Og=qn({},xf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:L1,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==hd&&(hd&&e.type==="mousemove"?(K0=e.screenX-hd.screenX,Z0=e.screenY-hd.screenY):Z0=K0=0,hd=e),K0)},movementY:function(e){return"movementY"in e?e.movementY:Z0}}),G2=ta(Og),$R=qn({},Og,{dataTransfer:0}),VR=ta($R),qR=qn({},xf,{relatedTarget:0}),X0=ta(qR),WR=qn({},oh,{animationName:0,elapsedTime:0,pseudoElement:0}),GR=ta(WR),HR=qn({},oh,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),KR=ta(HR),ZR=qn({},oh,{data:0}),H2=ta(ZR),XR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},YR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},JR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function QR(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=JR[e])?!!t[e]:!1}function L1(){return QR}var e3=qn({},xf,{key:function(e){if(e.key){var t=XR[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=by(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?YR[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:L1,charCode:function(e){return e.type==="keypress"?by(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?by(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),t3=ta(e3),r3=qn({},Og,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),K2=ta(r3),n3=qn({},xf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:L1}),i3=ta(n3),o3=qn({},oh,{propertyName:0,elapsedTime:0,pseudoElement:0}),a3=ta(o3),s3=qn({},Og,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),l3=ta(s3),u3=[9,13,27,32],D1=il&&"CompositionEvent"in window,Dd=null;il&&"documentMode"in document&&(Dd=document.documentMode);var c3=il&&"TextEvent"in window&&!Dd,Xk=il&&(!D1||Dd&&8<Dd&&11>=Dd),Z2=String.fromCharCode(32),X2=!1;function Yk(e,t){switch(e){case"keyup":return u3.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jk(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var _p=!1;function p3(e,t){switch(e){case"compositionend":return Jk(t);case"keypress":return t.which!==32?null:(X2=!0,Z2);case"textInput":return e=t.data,e===Z2&&X2?null:e;default:return null}}function h3(e,t){if(_p)return e==="compositionend"||!D1&&Yk(e,t)?(e=Zk(),xy=z1=Nl=null,_p=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Xk&&t.locale!=="ko"?null:t.data;default:return null}}var f3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Y2(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!f3[e.type]:t==="textarea"}function Qk(e,t,n,a){Ak(a),t=Ky(t,"onChange"),0<t.length&&(n=new R1("onChange","change",null,n,a),e.push({event:n,listeners:t}))}var Od=null,Jd=null;function m3(e){cT(e,0)}function Bg(e){var t=wp(e);if(Sk(t))return e}function y3(e,t){if(e==="change")return t}var eT=!1;if(il){var Y0;if(il){var J0="oninput"in document;if(!J0){var J2=document.createElement("div");J2.setAttribute("oninput","return;"),J0=typeof J2.oninput=="function"}Y0=J0}else Y0=!1;eT=Y0&&(!document.documentMode||9<document.documentMode)}function Q2(){Od&&(Od.detachEvent("onpropertychange",tT),Jd=Od=null)}function tT(e){if(e.propertyName==="value"&&Bg(Jd)){var t=[];Qk(t,Jd,e,T1(e)),Lk(m3,t)}}function g3(e,t,n){e==="focusin"?(Q2(),Od=t,Jd=n,Od.attachEvent("onpropertychange",tT)):e==="focusout"&&Q2()}function v3(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Bg(Jd)}function _3(e,t){if(e==="click")return Bg(t)}function x3(e,t){if(e==="input"||e==="change")return Bg(t)}function b3(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Na=typeof Object.is=="function"?Object.is:b3;function Qd(e,t){if(Na(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++){var u=n[a];if(!rx.call(t,u)||!Na(e[u],t[u]))return!1}return!0}function eS(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function tS(e,t){var n=eS(e);e=0;for(var a;n;){if(n.nodeType===3){if(a=e+n.textContent.length,e<=t&&a>=t)return{node:n,offset:t-e};e=a}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=eS(n)}}function rT(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?rT(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function nT(){for(var e=window,t=Uy();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Uy(e.document)}return t}function O1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function w3(e){var t=nT(),n=e.focusedElem,a=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&rT(n.ownerDocument.documentElement,n)){if(a!==null&&O1(n)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var u=n.textContent.length,f=Math.min(a.start,u);a=a.end===void 0?f:Math.min(a.end,u),!e.extend&&f>a&&(u=a,a=f,f=u),u=tS(n,f);var o=tS(n,a);u&&o&&(e.rangeCount!==1||e.anchorNode!==u.node||e.anchorOffset!==u.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(u.node,u.offset),e.removeAllRanges(),f>a?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var S3=il&&"documentMode"in document&&11>=document.documentMode,xp=null,bx=null,Bd=null,wx=!1;function rS(e,t,n){var a=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;wx||xp==null||xp!==Uy(a)||(a=xp,"selectionStart"in a&&O1(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Bd&&Qd(Bd,a)||(Bd=a,a=Ky(bx,"onSelect"),0<a.length&&(t=new R1("onSelect","select",null,t,n),e.push({event:t,listeners:a}),t.target=xp)))}function Xm(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var bp={animationend:Xm("Animation","AnimationEnd"),animationiteration:Xm("Animation","AnimationIteration"),animationstart:Xm("Animation","AnimationStart"),transitionend:Xm("Transition","TransitionEnd")},Q0={},iT={};il&&(iT=document.createElement("div").style,"AnimationEvent"in window||(delete bp.animationend.animation,delete bp.animationiteration.animation,delete bp.animationstart.animation),"TransitionEvent"in window||delete bp.transitionend.transition);function Ng(e){if(Q0[e])return Q0[e];if(!bp[e])return e;var t=bp[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in iT)return Q0[e]=t[n];return e}var oT=Ng("animationend"),aT=Ng("animationiteration"),sT=Ng("animationstart"),lT=Ng("transitionend"),uT=new Map,nS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function tu(e,t){uT.set(e,t),sc(t,[e])}for(var e_=0;e_<nS.length;e_++){var t_=nS[e_],E3=t_.toLowerCase(),C3=t_[0].toUpperCase()+t_.slice(1);tu(E3,"on"+C3)}tu(oT,"onAnimationEnd");tu(aT,"onAnimationIteration");tu(sT,"onAnimationStart");tu("dblclick","onDoubleClick");tu("focusin","onFocus");tu("focusout","onBlur");tu(lT,"onTransitionEnd");$p("onMouseEnter",["mouseout","mouseover"]);$p("onMouseLeave",["mouseout","mouseover"]);$p("onPointerEnter",["pointerout","pointerover"]);$p("onPointerLeave",["pointerout","pointerover"]);sc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));sc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));sc("onBeforeInput",["compositionend","keypress","textInput","paste"]);sc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));sc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));sc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Td="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),k3=new Set("cancel close invalid load scroll toggle".split(" ").concat(Td));function iS(e,t,n){var a=e.type||"unknown-event";e.currentTarget=n,SR(a,t,void 0,e),e.currentTarget=null}function cT(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var a=e[n],u=a.event;a=a.listeners;e:{var f=void 0;if(t)for(var o=a.length-1;0<=o;o--){var v=a[o],x=v.instance,E=v.currentTarget;if(v=v.listener,x!==f&&u.isPropagationStopped())break e;iS(u,v,E),f=x}else for(o=0;o<a.length;o++){if(v=a[o],x=v.instance,E=v.currentTarget,v=v.listener,x!==f&&u.isPropagationStopped())break e;iS(u,v,E),f=x}}}if(Vy)throw e=gx,Vy=!1,gx=null,e}function An(e,t){var n=t[Tx];n===void 0&&(n=t[Tx]=new Set);var a=e+"__bubble";n.has(a)||(pT(t,e,2,!1),n.add(a))}function r_(e,t,n){var a=0;t&&(a|=4),pT(n,e,a,t)}var Ym="_reactListening"+Math.random().toString(36).slice(2);function ef(e){if(!e[Ym]){e[Ym]=!0,vk.forEach(function(n){n!=="selectionchange"&&(k3.has(n)||r_(n,!1,e),r_(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ym]||(t[Ym]=!0,r_("selectionchange",!1,t))}}function pT(e,t,n,a){switch(Kk(t)){case 1:var u=FR;break;case 4:u=jR;break;default:u=M1}n=u.bind(null,t,n,e),u=void 0,!yx||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(u=!0),a?u!==void 0?e.addEventListener(t,n,{capture:!0,passive:u}):e.addEventListener(t,n,!0):u!==void 0?e.addEventListener(t,n,{passive:u}):e.addEventListener(t,n,!1)}function n_(e,t,n,a,u){var f=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var o=a.tag;if(o===3||o===4){var v=a.stateNode.containerInfo;if(v===u||v.nodeType===8&&v.parentNode===u)break;if(o===4)for(o=a.return;o!==null;){var x=o.tag;if((x===3||x===4)&&(x=o.stateNode.containerInfo,x===u||x.nodeType===8&&x.parentNode===u))return;o=o.return}for(;v!==null;){if(o=Wu(v),o===null)return;if(x=o.tag,x===5||x===6){a=f=o;continue e}v=v.parentNode}}a=a.return}Lk(function(){var E=f,T=T1(n),I=[];e:{var P=uT.get(e);if(P!==void 0){var V=R1,N=e;switch(e){case"keypress":if(by(n)===0)break e;case"keydown":case"keyup":V=t3;break;case"focusin":N="focus",V=X0;break;case"focusout":N="blur",V=X0;break;case"beforeblur":case"afterblur":V=X0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":V=G2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":V=VR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":V=i3;break;case oT:case aT:case sT:V=GR;break;case lT:V=a3;break;case"scroll":V=UR;break;case"wheel":V=l3;break;case"copy":case"cut":case"paste":V=KR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":V=K2}var q=(t&4)!==0,J=!q&&e==="scroll",U=q?P!==null?P+"Capture":null:P;q=[];for(var F=E,R;F!==null;){R=F;var O=R.stateNode;if(R.tag===5&&O!==null&&(R=O,U!==null&&(O=Kd(F,U),O!=null&&q.push(tf(F,O,R)))),J)break;F=F.return}0<q.length&&(P=new V(P,N,null,n,T),I.push({event:P,listeners:q}))}}if(!(t&7)){e:{if(P=e==="mouseover"||e==="pointerover",V=e==="mouseout"||e==="pointerout",P&&n!==fx&&(N=n.relatedTarget||n.fromElement)&&(Wu(N)||N[ol]))break e;if((V||P)&&(P=T.window===T?T:(P=T.ownerDocument)?P.defaultView||P.parentWindow:window,V?(N=n.relatedTarget||n.toElement,V=E,N=N?Wu(N):null,N!==null&&(J=lc(N),N!==J||N.tag!==5&&N.tag!==6)&&(N=null)):(V=null,N=E),V!==N)){if(q=G2,O="onMouseLeave",U="onMouseEnter",F="mouse",(e==="pointerout"||e==="pointerover")&&(q=K2,O="onPointerLeave",U="onPointerEnter",F="pointer"),J=V==null?P:wp(V),R=N==null?P:wp(N),P=new q(O,F+"leave",V,n,T),P.target=J,P.relatedTarget=R,O=null,Wu(T)===E&&(q=new q(U,F+"enter",N,n,T),q.target=R,q.relatedTarget=J,O=q),J=O,V&&N)t:{for(q=V,U=N,F=0,R=q;R;R=ip(R))F++;for(R=0,O=U;O;O=ip(O))R++;for(;0<F-R;)q=ip(q),F--;for(;0<R-F;)U=ip(U),R--;for(;F--;){if(q===U||U!==null&&q===U.alternate)break t;q=ip(q),U=ip(U)}q=null}else q=null;V!==null&&oS(I,P,V,q,!1),N!==null&&J!==null&&oS(I,J,N,q,!0)}}e:{if(P=E?wp(E):window,V=P.nodeName&&P.nodeName.toLowerCase(),V==="select"||V==="input"&&P.type==="file")var Q=y3;else if(Y2(P))if(eT)Q=x3;else{Q=v3;var se=g3}else(V=P.nodeName)&&V.toLowerCase()==="input"&&(P.type==="checkbox"||P.type==="radio")&&(Q=_3);if(Q&&(Q=Q(e,E))){Qk(I,Q,n,T);break e}se&&se(e,P,E),e==="focusout"&&(se=P._wrapperState)&&se.controlled&&P.type==="number"&&ux(P,"number",P.value)}switch(se=E?wp(E):window,e){case"focusin":(Y2(se)||se.contentEditable==="true")&&(xp=se,bx=E,Bd=null);break;case"focusout":Bd=bx=xp=null;break;case"mousedown":wx=!0;break;case"contextmenu":case"mouseup":case"dragend":wx=!1,rS(I,n,T);break;case"selectionchange":if(S3)break;case"keydown":case"keyup":rS(I,n,T)}var pe;if(D1)e:{switch(e){case"compositionstart":var _e="onCompositionStart";break e;case"compositionend":_e="onCompositionEnd";break e;case"compositionupdate":_e="onCompositionUpdate";break e}_e=void 0}else _p?Yk(e,n)&&(_e="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(_e="onCompositionStart");_e&&(Xk&&n.locale!=="ko"&&(_p||_e!=="onCompositionStart"?_e==="onCompositionEnd"&&_p&&(pe=Zk()):(Nl=T,z1="value"in Nl?Nl.value:Nl.textContent,_p=!0)),se=Ky(E,_e),0<se.length&&(_e=new H2(_e,e,null,n,T),I.push({event:_e,listeners:se}),pe?_e.data=pe:(pe=Jk(n),pe!==null&&(_e.data=pe)))),(pe=c3?p3(e,n):h3(e,n))&&(E=Ky(E,"onBeforeInput"),0<E.length&&(T=new H2("onBeforeInput","beforeinput",null,n,T),I.push({event:T,listeners:E}),T.data=pe))}cT(I,t)})}function tf(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ky(e,t){for(var n=t+"Capture",a=[];e!==null;){var u=e,f=u.stateNode;u.tag===5&&f!==null&&(u=f,f=Kd(e,n),f!=null&&a.unshift(tf(e,f,u)),f=Kd(e,t),f!=null&&a.push(tf(e,f,u))),e=e.return}return a}function ip(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function oS(e,t,n,a,u){for(var f=t._reactName,o=[];n!==null&&n!==a;){var v=n,x=v.alternate,E=v.stateNode;if(x!==null&&x===a)break;v.tag===5&&E!==null&&(v=E,u?(x=Kd(n,f),x!=null&&o.unshift(tf(n,x,v))):u||(x=Kd(n,f),x!=null&&o.push(tf(n,x,v)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var T3=/\r\n?/g,I3=/\u0000|\uFFFD/g;function aS(e){return(typeof e=="string"?e:""+e).replace(T3,`
`).replace(I3,"")}function Jm(e,t,n){if(t=aS(t),aS(e)!==t&&n)throw Error(lt(425))}function Zy(){}var Sx=null,Ex=null;function Cx(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var kx=typeof setTimeout=="function"?setTimeout:void 0,P3=typeof clearTimeout=="function"?clearTimeout:void 0,sS=typeof Promise=="function"?Promise:void 0,A3=typeof queueMicrotask=="function"?queueMicrotask:typeof sS<"u"?function(e){return sS.resolve(null).then(e).catch(M3)}:kx;function M3(e){setTimeout(function(){throw e})}function i_(e,t){var n=t,a=0;do{var u=n.nextSibling;if(e.removeChild(n),u&&u.nodeType===8)if(n=u.data,n==="/$"){if(a===0){e.removeChild(u),Yd(t);return}a--}else n!=="$"&&n!=="$?"&&n!=="$!"||a++;n=u}while(n);Yd(t)}function ql(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function lS(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var ah=Math.random().toString(36).slice(2),fs="__reactFiber$"+ah,rf="__reactProps$"+ah,ol="__reactContainer$"+ah,Tx="__reactEvents$"+ah,z3="__reactListeners$"+ah,R3="__reactHandles$"+ah;function Wu(e){var t=e[fs];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ol]||n[fs]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=lS(e);e!==null;){if(n=e[fs])return n;e=lS(e)}return t}e=n,n=e.parentNode}return null}function bf(e){return e=e[fs]||e[ol],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function wp(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(lt(33))}function Fg(e){return e[rf]||null}var Ix=[],Sp=-1;function ru(e){return{current:e}}function Mn(e){0>Sp||(e.current=Ix[Sp],Ix[Sp]=null,Sp--)}function bn(e,t){Sp++,Ix[Sp]=e.current,e.current=t}var Yl={},io=ru(Yl),Ao=ru(!1),Qu=Yl;function Vp(e,t){var n=e.type.contextTypes;if(!n)return Yl;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var u={},f;for(f in n)u[f]=t[f];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=u),u}function Mo(e){return e=e.childContextTypes,e!=null}function Xy(){Mn(Ao),Mn(io)}function uS(e,t,n){if(io.current!==Yl)throw Error(lt(168));bn(io,t),bn(Ao,n)}function hT(e,t,n){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return n;a=a.getChildContext();for(var u in a)if(!(u in t))throw Error(lt(108,yR(e)||"Unknown",u));return qn({},n,a)}function Yy(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Yl,Qu=io.current,bn(io,e),bn(Ao,Ao.current),!0}function cS(e,t,n){var a=e.stateNode;if(!a)throw Error(lt(169));n?(e=hT(e,t,Qu),a.__reactInternalMemoizedMergedChildContext=e,Mn(Ao),Mn(io),bn(io,e)):Mn(Ao),bn(Ao,n)}var Js=null,jg=!1,o_=!1;function dT(e){Js===null?Js=[e]:Js.push(e)}function L3(e){jg=!0,dT(e)}function nu(){if(!o_&&Js!==null){o_=!0;var e=0,t=pn;try{var n=Js;for(pn=1;e<n.length;e++){var a=n[e];do a=a(!0);while(a!==null)}Js=null,jg=!1}catch(u){throw Js!==null&&(Js=Js.slice(e+1)),Nk(I1,nu),u}finally{pn=t,o_=!1}}return null}var Ep=[],Cp=0,Jy=null,Qy=0,ha=[],da=0,ec=null,el=1,tl="";function ju(e,t){Ep[Cp++]=Qy,Ep[Cp++]=Jy,Jy=e,Qy=t}function fT(e,t,n){ha[da++]=el,ha[da++]=tl,ha[da++]=ec,ec=e;var a=el;e=tl;var u=32-Oa(a)-1;a&=~(1<<u),n+=1;var f=32-Oa(t)+u;if(30<f){var o=u-u%5;f=(a&(1<<o)-1).toString(32),a>>=o,u-=o,el=1<<32-Oa(t)+u|n<<u|a,tl=f+e}else el=1<<f|n<<u|a,tl=e}function B1(e){e.return!==null&&(ju(e,1),fT(e,1,0))}function N1(e){for(;e===Jy;)Jy=Ep[--Cp],Ep[Cp]=null,Qy=Ep[--Cp],Ep[Cp]=null;for(;e===ec;)ec=ha[--da],ha[da]=null,tl=ha[--da],ha[da]=null,el=ha[--da],ha[da]=null}var Xo=null,Zo=null,On=!1,za=null;function mT(e,t){var n=ma(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function pS(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Xo=e,Zo=ql(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Xo=e,Zo=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=ec!==null?{id:el,overflow:tl}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=ma(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Xo=e,Zo=null,!0):!1;default:return!1}}function Px(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ax(e){if(On){var t=Zo;if(t){var n=t;if(!pS(e,t)){if(Px(e))throw Error(lt(418));t=ql(n.nextSibling);var a=Xo;t&&pS(e,t)?mT(a,n):(e.flags=e.flags&-4097|2,On=!1,Xo=e)}}else{if(Px(e))throw Error(lt(418));e.flags=e.flags&-4097|2,On=!1,Xo=e}}}function hS(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Xo=e}function Qm(e){if(e!==Xo)return!1;if(!On)return hS(e),On=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Cx(e.type,e.memoizedProps)),t&&(t=Zo)){if(Px(e))throw yT(),Error(lt(418));for(;t;)mT(e,t),t=ql(t.nextSibling)}if(hS(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(lt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Zo=ql(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Zo=null}}else Zo=Xo?ql(e.stateNode.nextSibling):null;return!0}function yT(){for(var e=Zo;e;)e=ql(e.nextSibling)}function qp(){Zo=Xo=null,On=!1}function F1(e){za===null?za=[e]:za.push(e)}var D3=pl.ReactCurrentBatchConfig;function Aa(e,t){if(e&&e.defaultProps){t=qn({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var eg=ru(null),tg=null,kp=null,j1=null;function U1(){j1=kp=tg=null}function $1(e){var t=eg.current;Mn(eg),e._currentValue=t}function Mx(e,t,n){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===n)break;e=e.return}}function Dp(e,t){tg=e,j1=kp=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Io=!0),e.firstContext=null)}function ga(e){var t=e._currentValue;if(j1!==e)if(e={context:e,memoizedValue:t,next:null},kp===null){if(tg===null)throw Error(lt(308));kp=e,tg.dependencies={lanes:0,firstContext:e}}else kp=kp.next=e;return t}var Gu=null;function V1(e){Gu===null?Gu=[e]:Gu.push(e)}function gT(e,t,n,a){var u=t.interleaved;return u===null?(n.next=n,V1(t)):(n.next=u.next,u.next=n),t.interleaved=n,al(e,a)}function al(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Dl=!1;function q1(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vT(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function nl(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Wl(e,t,n){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,Zr&2){var u=a.pending;return u===null?t.next=t:(t.next=u.next,u.next=t),a.pending=t,al(e,n)}return u=a.interleaved,u===null?(t.next=t,V1(a)):(t.next=u.next,u.next=t),a.interleaved=t,al(e,n)}function wy(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,P1(e,n)}}function dS(e,t){var n=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,n===a)){var u=null,f=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};f===null?u=f=o:f=f.next=o,n=n.next}while(n!==null);f===null?u=f=t:f=f.next=t}else u=f=t;n={baseState:a.baseState,firstBaseUpdate:u,lastBaseUpdate:f,shared:a.shared,effects:a.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function rg(e,t,n,a){var u=e.updateQueue;Dl=!1;var f=u.firstBaseUpdate,o=u.lastBaseUpdate,v=u.shared.pending;if(v!==null){u.shared.pending=null;var x=v,E=x.next;x.next=null,o===null?f=E:o.next=E,o=x;var T=e.alternate;T!==null&&(T=T.updateQueue,v=T.lastBaseUpdate,v!==o&&(v===null?T.firstBaseUpdate=E:v.next=E,T.lastBaseUpdate=x))}if(f!==null){var I=u.baseState;o=0,T=E=x=null,v=f;do{var P=v.lane,V=v.eventTime;if((a&P)===P){T!==null&&(T=T.next={eventTime:V,lane:0,tag:v.tag,payload:v.payload,callback:v.callback,next:null});e:{var N=e,q=v;switch(P=t,V=n,q.tag){case 1:if(N=q.payload,typeof N=="function"){I=N.call(V,I,P);break e}I=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=q.payload,P=typeof N=="function"?N.call(V,I,P):N,P==null)break e;I=qn({},I,P);break e;case 2:Dl=!0}}v.callback!==null&&v.lane!==0&&(e.flags|=64,P=u.effects,P===null?u.effects=[v]:P.push(v))}else V={eventTime:V,lane:P,tag:v.tag,payload:v.payload,callback:v.callback,next:null},T===null?(E=T=V,x=I):T=T.next=V,o|=P;if(v=v.next,v===null){if(v=u.shared.pending,v===null)break;P=v,v=P.next,P.next=null,u.lastBaseUpdate=P,u.shared.pending=null}}while(1);if(T===null&&(x=I),u.baseState=x,u.firstBaseUpdate=E,u.lastBaseUpdate=T,t=u.shared.interleaved,t!==null){u=t;do o|=u.lane,u=u.next;while(u!==t)}else f===null&&(u.shared.lanes=0);rc|=o,e.lanes=o,e.memoizedState=I}}function fS(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],u=a.callback;if(u!==null){if(a.callback=null,a=n,typeof u!="function")throw Error(lt(191,u));u.call(a)}}}var _T=new gk.Component().refs;function zx(e,t,n,a){t=e.memoizedState,n=n(a,t),n=n==null?t:qn({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ug={isMounted:function(e){return(e=e._reactInternals)?lc(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var a=fo(),u=Hl(e),f=nl(a,u);f.payload=t,n!=null&&(f.callback=n),t=Wl(e,f,u),t!==null&&(Ba(t,e,u,a),wy(t,e,u))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var a=fo(),u=Hl(e),f=nl(a,u);f.tag=1,f.payload=t,n!=null&&(f.callback=n),t=Wl(e,f,u),t!==null&&(Ba(t,e,u,a),wy(t,e,u))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=fo(),a=Hl(e),u=nl(n,a);u.tag=2,t!=null&&(u.callback=t),t=Wl(e,u,a),t!==null&&(Ba(t,e,a,n),wy(t,e,a))}};function mS(e,t,n,a,u,f,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,f,o):t.prototype&&t.prototype.isPureReactComponent?!Qd(n,a)||!Qd(u,f):!0}function xT(e,t,n){var a=!1,u=Yl,f=t.contextType;return typeof f=="object"&&f!==null?f=ga(f):(u=Mo(t)?Qu:io.current,a=t.contextTypes,f=(a=a!=null)?Vp(e,u):Yl),t=new t(n,f),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ug,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=u,e.__reactInternalMemoizedMaskedChildContext=f),t}function yS(e,t,n,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,a),t.state!==e&&Ug.enqueueReplaceState(t,t.state,null)}function Rx(e,t,n,a){var u=e.stateNode;u.props=n,u.state=e.memoizedState,u.refs=_T,q1(e);var f=t.contextType;typeof f=="object"&&f!==null?u.context=ga(f):(f=Mo(t)?Qu:io.current,u.context=Vp(e,f)),u.state=e.memoizedState,f=t.getDerivedStateFromProps,typeof f=="function"&&(zx(e,t,f,n),u.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(t=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),t!==u.state&&Ug.enqueueReplaceState(u,u.state,null),rg(e,n,u,a),u.state=e.memoizedState),typeof u.componentDidMount=="function"&&(e.flags|=4194308)}function dd(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(lt(309));var a=n.stateNode}if(!a)throw Error(lt(147,e));var u=a,f=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===f?t.ref:(t=function(o){var v=u.refs;v===_T&&(v=u.refs={}),o===null?delete v[f]:v[f]=o},t._stringRef=f,t)}if(typeof e!="string")throw Error(lt(284));if(!n._owner)throw Error(lt(290,e))}return e}function ey(e,t){throw e=Object.prototype.toString.call(t),Error(lt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function gS(e){var t=e._init;return t(e._payload)}function bT(e){function t(U,F){if(e){var R=U.deletions;R===null?(U.deletions=[F],U.flags|=16):R.push(F)}}function n(U,F){if(!e)return null;for(;F!==null;)t(U,F),F=F.sibling;return null}function a(U,F){for(U=new Map;F!==null;)F.key!==null?U.set(F.key,F):U.set(F.index,F),F=F.sibling;return U}function u(U,F){return U=Kl(U,F),U.index=0,U.sibling=null,U}function f(U,F,R){return U.index=R,e?(R=U.alternate,R!==null?(R=R.index,R<F?(U.flags|=2,F):R):(U.flags|=2,F)):(U.flags|=1048576,F)}function o(U){return e&&U.alternate===null&&(U.flags|=2),U}function v(U,F,R,O){return F===null||F.tag!==6?(F=h_(R,U.mode,O),F.return=U,F):(F=u(F,R),F.return=U,F)}function x(U,F,R,O){var Q=R.type;return Q===vp?T(U,F,R.props.children,O,R.key):F!==null&&(F.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===Ll&&gS(Q)===F.type)?(O=u(F,R.props),O.ref=dd(U,F,R),O.return=U,O):(O=Iy(R.type,R.key,R.props,null,U.mode,O),O.ref=dd(U,F,R),O.return=U,O)}function E(U,F,R,O){return F===null||F.tag!==4||F.stateNode.containerInfo!==R.containerInfo||F.stateNode.implementation!==R.implementation?(F=d_(R,U.mode,O),F.return=U,F):(F=u(F,R.children||[]),F.return=U,F)}function T(U,F,R,O,Q){return F===null||F.tag!==7?(F=Yu(R,U.mode,O,Q),F.return=U,F):(F=u(F,R),F.return=U,F)}function I(U,F,R){if(typeof F=="string"&&F!==""||typeof F=="number")return F=h_(""+F,U.mode,R),F.return=U,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case Vm:return R=Iy(F.type,F.key,F.props,null,U.mode,R),R.ref=dd(U,null,F),R.return=U,R;case gp:return F=d_(F,U.mode,R),F.return=U,F;case Ll:var O=F._init;return I(U,O(F._payload),R)}if(Cd(F)||ld(F))return F=Yu(F,U.mode,R,null),F.return=U,F;ey(U,F)}return null}function P(U,F,R,O){var Q=F!==null?F.key:null;if(typeof R=="string"&&R!==""||typeof R=="number")return Q!==null?null:v(U,F,""+R,O);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Vm:return R.key===Q?x(U,F,R,O):null;case gp:return R.key===Q?E(U,F,R,O):null;case Ll:return Q=R._init,P(U,F,Q(R._payload),O)}if(Cd(R)||ld(R))return Q!==null?null:T(U,F,R,O,null);ey(U,R)}return null}function V(U,F,R,O,Q){if(typeof O=="string"&&O!==""||typeof O=="number")return U=U.get(R)||null,v(F,U,""+O,Q);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case Vm:return U=U.get(O.key===null?R:O.key)||null,x(F,U,O,Q);case gp:return U=U.get(O.key===null?R:O.key)||null,E(F,U,O,Q);case Ll:var se=O._init;return V(U,F,R,se(O._payload),Q)}if(Cd(O)||ld(O))return U=U.get(R)||null,T(F,U,O,Q,null);ey(F,O)}return null}function N(U,F,R,O){for(var Q=null,se=null,pe=F,_e=F=0,ze=null;pe!==null&&_e<R.length;_e++){pe.index>_e?(ze=pe,pe=null):ze=pe.sibling;var he=P(U,pe,R[_e],O);if(he===null){pe===null&&(pe=ze);break}e&&pe&&he.alternate===null&&t(U,pe),F=f(he,F,_e),se===null?Q=he:se.sibling=he,se=he,pe=ze}if(_e===R.length)return n(U,pe),On&&ju(U,_e),Q;if(pe===null){for(;_e<R.length;_e++)pe=I(U,R[_e],O),pe!==null&&(F=f(pe,F,_e),se===null?Q=pe:se.sibling=pe,se=pe);return On&&ju(U,_e),Q}for(pe=a(U,pe);_e<R.length;_e++)ze=V(pe,U,_e,R[_e],O),ze!==null&&(e&&ze.alternate!==null&&pe.delete(ze.key===null?_e:ze.key),F=f(ze,F,_e),se===null?Q=ze:se.sibling=ze,se=ze);return e&&pe.forEach(function(we){return t(U,we)}),On&&ju(U,_e),Q}function q(U,F,R,O){var Q=ld(R);if(typeof Q!="function")throw Error(lt(150));if(R=Q.call(R),R==null)throw Error(lt(151));for(var se=Q=null,pe=F,_e=F=0,ze=null,he=R.next();pe!==null&&!he.done;_e++,he=R.next()){pe.index>_e?(ze=pe,pe=null):ze=pe.sibling;var we=P(U,pe,he.value,O);if(we===null){pe===null&&(pe=ze);break}e&&pe&&we.alternate===null&&t(U,pe),F=f(we,F,_e),se===null?Q=we:se.sibling=we,se=we,pe=ze}if(he.done)return n(U,pe),On&&ju(U,_e),Q;if(pe===null){for(;!he.done;_e++,he=R.next())he=I(U,he.value,O),he!==null&&(F=f(he,F,_e),se===null?Q=he:se.sibling=he,se=he);return On&&ju(U,_e),Q}for(pe=a(U,pe);!he.done;_e++,he=R.next())he=V(pe,U,_e,he.value,O),he!==null&&(e&&he.alternate!==null&&pe.delete(he.key===null?_e:he.key),F=f(he,F,_e),se===null?Q=he:se.sibling=he,se=he);return e&&pe.forEach(function(ie){return t(U,ie)}),On&&ju(U,_e),Q}function J(U,F,R,O){if(typeof R=="object"&&R!==null&&R.type===vp&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case Vm:e:{for(var Q=R.key,se=F;se!==null;){if(se.key===Q){if(Q=R.type,Q===vp){if(se.tag===7){n(U,se.sibling),F=u(se,R.props.children),F.return=U,U=F;break e}}else if(se.elementType===Q||typeof Q=="object"&&Q!==null&&Q.$$typeof===Ll&&gS(Q)===se.type){n(U,se.sibling),F=u(se,R.props),F.ref=dd(U,se,R),F.return=U,U=F;break e}n(U,se);break}else t(U,se);se=se.sibling}R.type===vp?(F=Yu(R.props.children,U.mode,O,R.key),F.return=U,U=F):(O=Iy(R.type,R.key,R.props,null,U.mode,O),O.ref=dd(U,F,R),O.return=U,U=O)}return o(U);case gp:e:{for(se=R.key;F!==null;){if(F.key===se)if(F.tag===4&&F.stateNode.containerInfo===R.containerInfo&&F.stateNode.implementation===R.implementation){n(U,F.sibling),F=u(F,R.children||[]),F.return=U,U=F;break e}else{n(U,F);break}else t(U,F);F=F.sibling}F=d_(R,U.mode,O),F.return=U,U=F}return o(U);case Ll:return se=R._init,J(U,F,se(R._payload),O)}if(Cd(R))return N(U,F,R,O);if(ld(R))return q(U,F,R,O);ey(U,R)}return typeof R=="string"&&R!==""||typeof R=="number"?(R=""+R,F!==null&&F.tag===6?(n(U,F.sibling),F=u(F,R),F.return=U,U=F):(n(U,F),F=h_(R,U.mode,O),F.return=U,U=F),o(U)):n(U,F)}return J}var Wp=bT(!0),wT=bT(!1),wf={},gs=ru(wf),nf=ru(wf),of=ru(wf);function Hu(e){if(e===wf)throw Error(lt(174));return e}function W1(e,t){switch(bn(of,t),bn(nf,e),bn(gs,wf),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:px(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=px(t,e)}Mn(gs),bn(gs,t)}function Gp(){Mn(gs),Mn(nf),Mn(of)}function ST(e){Hu(of.current);var t=Hu(gs.current),n=px(t,e.type);t!==n&&(bn(nf,e),bn(gs,n))}function G1(e){nf.current===e&&(Mn(gs),Mn(nf))}var $n=ru(0);function ng(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var a_=[];function H1(){for(var e=0;e<a_.length;e++)a_[e]._workInProgressVersionPrimary=null;a_.length=0}var Sy=pl.ReactCurrentDispatcher,s_=pl.ReactCurrentBatchConfig,tc=0,Vn=null,_i=null,Ai=null,ig=!1,Nd=!1,af=0,O3=0;function eo(){throw Error(lt(321))}function K1(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Na(e[n],t[n]))return!1;return!0}function Z1(e,t,n,a,u,f){if(tc=f,Vn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Sy.current=e===null||e.memoizedState===null?j3:U3,e=n(a,u),Nd){f=0;do{if(Nd=!1,af=0,25<=f)throw Error(lt(301));f+=1,Ai=_i=null,t.updateQueue=null,Sy.current=$3,e=n(a,u)}while(Nd)}if(Sy.current=og,t=_i!==null&&_i.next!==null,tc=0,Ai=_i=Vn=null,ig=!1,t)throw Error(lt(300));return e}function X1(){var e=af!==0;return af=0,e}function ps(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ai===null?Vn.memoizedState=Ai=e:Ai=Ai.next=e,Ai}function va(){if(_i===null){var e=Vn.alternate;e=e!==null?e.memoizedState:null}else e=_i.next;var t=Ai===null?Vn.memoizedState:Ai.next;if(t!==null)Ai=t,_i=e;else{if(e===null)throw Error(lt(310));_i=e,e={memoizedState:_i.memoizedState,baseState:_i.baseState,baseQueue:_i.baseQueue,queue:_i.queue,next:null},Ai===null?Vn.memoizedState=Ai=e:Ai=Ai.next=e}return Ai}function sf(e,t){return typeof t=="function"?t(e):t}function l_(e){var t=va(),n=t.queue;if(n===null)throw Error(lt(311));n.lastRenderedReducer=e;var a=_i,u=a.baseQueue,f=n.pending;if(f!==null){if(u!==null){var o=u.next;u.next=f.next,f.next=o}a.baseQueue=u=f,n.pending=null}if(u!==null){f=u.next,a=a.baseState;var v=o=null,x=null,E=f;do{var T=E.lane;if((tc&T)===T)x!==null&&(x=x.next={lane:0,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null}),a=E.hasEagerState?E.eagerState:e(a,E.action);else{var I={lane:T,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null};x===null?(v=x=I,o=a):x=x.next=I,Vn.lanes|=T,rc|=T}E=E.next}while(E!==null&&E!==f);x===null?o=a:x.next=v,Na(a,t.memoizedState)||(Io=!0),t.memoizedState=a,t.baseState=o,t.baseQueue=x,n.lastRenderedState=a}if(e=n.interleaved,e!==null){u=e;do f=u.lane,Vn.lanes|=f,rc|=f,u=u.next;while(u!==e)}else u===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function u_(e){var t=va(),n=t.queue;if(n===null)throw Error(lt(311));n.lastRenderedReducer=e;var a=n.dispatch,u=n.pending,f=t.memoizedState;if(u!==null){n.pending=null;var o=u=u.next;do f=e(f,o.action),o=o.next;while(o!==u);Na(f,t.memoizedState)||(Io=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),n.lastRenderedState=f}return[f,a]}function ET(){}function CT(e,t){var n=Vn,a=va(),u=t(),f=!Na(a.memoizedState,u);if(f&&(a.memoizedState=u,Io=!0),a=a.queue,Y1(IT.bind(null,n,a,e),[e]),a.getSnapshot!==t||f||Ai!==null&&Ai.memoizedState.tag&1){if(n.flags|=2048,lf(9,TT.bind(null,n,a,u,t),void 0,null),Mi===null)throw Error(lt(349));tc&30||kT(n,t,u)}return u}function kT(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Vn.updateQueue,t===null?(t={lastEffect:null,stores:null},Vn.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function TT(e,t,n,a){t.value=n,t.getSnapshot=a,PT(t)&&AT(e)}function IT(e,t,n){return n(function(){PT(t)&&AT(e)})}function PT(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Na(e,n)}catch{return!0}}function AT(e){var t=al(e,1);t!==null&&Ba(t,e,1,-1)}function vS(e){var t=ps();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:sf,lastRenderedState:e},t.queue=e,e=e.dispatch=F3.bind(null,Vn,e),[t.memoizedState,e]}function lf(e,t,n,a){return e={tag:e,create:t,destroy:n,deps:a,next:null},t=Vn.updateQueue,t===null?(t={lastEffect:null,stores:null},Vn.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(a=n.next,n.next=e,e.next=a,t.lastEffect=e)),e}function MT(){return va().memoizedState}function Ey(e,t,n,a){var u=ps();Vn.flags|=e,u.memoizedState=lf(1|t,n,void 0,a===void 0?null:a)}function $g(e,t,n,a){var u=va();a=a===void 0?null:a;var f=void 0;if(_i!==null){var o=_i.memoizedState;if(f=o.destroy,a!==null&&K1(a,o.deps)){u.memoizedState=lf(t,n,f,a);return}}Vn.flags|=e,u.memoizedState=lf(1|t,n,f,a)}function _S(e,t){return Ey(8390656,8,e,t)}function Y1(e,t){return $g(2048,8,e,t)}function zT(e,t){return $g(4,2,e,t)}function RT(e,t){return $g(4,4,e,t)}function LT(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function DT(e,t,n){return n=n!=null?n.concat([e]):null,$g(4,4,LT.bind(null,t,e),n)}function J1(){}function OT(e,t){var n=va();t=t===void 0?null:t;var a=n.memoizedState;return a!==null&&t!==null&&K1(t,a[1])?a[0]:(n.memoizedState=[e,t],e)}function BT(e,t){var n=va();t=t===void 0?null:t;var a=n.memoizedState;return a!==null&&t!==null&&K1(t,a[1])?a[0]:(e=e(),n.memoizedState=[e,t],e)}function NT(e,t,n){return tc&21?(Na(n,t)||(n=Uk(),Vn.lanes|=n,rc|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Io=!0),e.memoizedState=n)}function B3(e,t){var n=pn;pn=n!==0&&4>n?n:4,e(!0);var a=s_.transition;s_.transition={};try{e(!1),t()}finally{pn=n,s_.transition=a}}function FT(){return va().memoizedState}function N3(e,t,n){var a=Hl(e);if(n={lane:a,action:n,hasEagerState:!1,eagerState:null,next:null},jT(e))UT(t,n);else if(n=gT(e,t,n,a),n!==null){var u=fo();Ba(n,e,a,u),$T(n,t,a)}}function F3(e,t,n){var a=Hl(e),u={lane:a,action:n,hasEagerState:!1,eagerState:null,next:null};if(jT(e))UT(t,u);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var o=t.lastRenderedState,v=f(o,n);if(u.hasEagerState=!0,u.eagerState=v,Na(v,o)){var x=t.interleaved;x===null?(u.next=u,V1(t)):(u.next=x.next,x.next=u),t.interleaved=u;return}}catch{}finally{}n=gT(e,t,u,a),n!==null&&(u=fo(),Ba(n,e,a,u),$T(n,t,a))}}function jT(e){var t=e.alternate;return e===Vn||t!==null&&t===Vn}function UT(e,t){Nd=ig=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function $T(e,t,n){if(n&4194240){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,P1(e,n)}}var og={readContext:ga,useCallback:eo,useContext:eo,useEffect:eo,useImperativeHandle:eo,useInsertionEffect:eo,useLayoutEffect:eo,useMemo:eo,useReducer:eo,useRef:eo,useState:eo,useDebugValue:eo,useDeferredValue:eo,useTransition:eo,useMutableSource:eo,useSyncExternalStore:eo,useId:eo,unstable_isNewReconciler:!1},j3={readContext:ga,useCallback:function(e,t){return ps().memoizedState=[e,t===void 0?null:t],e},useContext:ga,useEffect:_S,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Ey(4194308,4,LT.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ey(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ey(4,2,e,t)},useMemo:function(e,t){var n=ps();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var a=ps();return t=n!==void 0?n(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=N3.bind(null,Vn,e),[a.memoizedState,e]},useRef:function(e){var t=ps();return e={current:e},t.memoizedState=e},useState:vS,useDebugValue:J1,useDeferredValue:function(e){return ps().memoizedState=e},useTransition:function(){var e=vS(!1),t=e[0];return e=B3.bind(null,e[1]),ps().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var a=Vn,u=ps();if(On){if(n===void 0)throw Error(lt(407));n=n()}else{if(n=t(),Mi===null)throw Error(lt(349));tc&30||kT(a,t,n)}u.memoizedState=n;var f={value:n,getSnapshot:t};return u.queue=f,_S(IT.bind(null,a,f,e),[e]),a.flags|=2048,lf(9,TT.bind(null,a,f,n,t),void 0,null),n},useId:function(){var e=ps(),t=Mi.identifierPrefix;if(On){var n=tl,a=el;n=(a&~(1<<32-Oa(a)-1)).toString(32)+n,t=":"+t+"R"+n,n=af++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=O3++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},U3={readContext:ga,useCallback:OT,useContext:ga,useEffect:Y1,useImperativeHandle:DT,useInsertionEffect:zT,useLayoutEffect:RT,useMemo:BT,useReducer:l_,useRef:MT,useState:function(){return l_(sf)},useDebugValue:J1,useDeferredValue:function(e){var t=va();return NT(t,_i.memoizedState,e)},useTransition:function(){var e=l_(sf)[0],t=va().memoizedState;return[e,t]},useMutableSource:ET,useSyncExternalStore:CT,useId:FT,unstable_isNewReconciler:!1},$3={readContext:ga,useCallback:OT,useContext:ga,useEffect:Y1,useImperativeHandle:DT,useInsertionEffect:zT,useLayoutEffect:RT,useMemo:BT,useReducer:u_,useRef:MT,useState:function(){return u_(sf)},useDebugValue:J1,useDeferredValue:function(e){var t=va();return _i===null?t.memoizedState=e:NT(t,_i.memoizedState,e)},useTransition:function(){var e=u_(sf)[0],t=va().memoizedState;return[e,t]},useMutableSource:ET,useSyncExternalStore:CT,useId:FT,unstable_isNewReconciler:!1};function Hp(e,t){try{var n="",a=t;do n+=mR(a),a=a.return;while(a);var u=n}catch(f){u=`
Error generating stack: `+f.message+`
`+f.stack}return{value:e,source:t,stack:u,digest:null}}function c_(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Lx(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var V3=typeof WeakMap=="function"?WeakMap:Map;function VT(e,t,n){n=nl(-1,n),n.tag=3,n.payload={element:null};var a=t.value;return n.callback=function(){sg||(sg=!0,qx=a),Lx(e,t)},n}function qT(e,t,n){n=nl(-1,n),n.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var u=t.value;n.payload=function(){return a(u)},n.callback=function(){Lx(e,t)}}var f=e.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(n.callback=function(){Lx(e,t),typeof a!="function"&&(Gl===null?Gl=new Set([this]):Gl.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function xS(e,t,n){var a=e.pingCache;if(a===null){a=e.pingCache=new V3;var u=new Set;a.set(t,u)}else u=a.get(t),u===void 0&&(u=new Set,a.set(t,u));u.has(n)||(u.add(n),e=nL.bind(null,e,t,n),t.then(e,e))}function bS(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function wS(e,t,n,a,u){return e.mode&1?(e.flags|=65536,e.lanes=u,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=nl(-1,1),t.tag=2,Wl(n,t,1))),n.lanes|=1),e)}var q3=pl.ReactCurrentOwner,Io=!1;function po(e,t,n,a){t.child=e===null?wT(t,null,n,a):Wp(t,e.child,n,a)}function SS(e,t,n,a,u){n=n.render;var f=t.ref;return Dp(t,u),a=Z1(e,t,n,a,f,u),n=X1(),e!==null&&!Io?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~u,sl(e,t,u)):(On&&n&&B1(t),t.flags|=1,po(e,t,a,u),t.child)}function ES(e,t,n,a,u){if(e===null){var f=n.type;return typeof f=="function"&&!ab(f)&&f.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=f,WT(e,t,f,a,u)):(e=Iy(n.type,null,a,t,t.mode,u),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,!(e.lanes&u)){var o=f.memoizedProps;if(n=n.compare,n=n!==null?n:Qd,n(o,a)&&e.ref===t.ref)return sl(e,t,u)}return t.flags|=1,e=Kl(f,a),e.ref=t.ref,e.return=t,t.child=e}function WT(e,t,n,a,u){if(e!==null){var f=e.memoizedProps;if(Qd(f,a)&&e.ref===t.ref)if(Io=!1,t.pendingProps=a=f,(e.lanes&u)!==0)e.flags&131072&&(Io=!0);else return t.lanes=e.lanes,sl(e,t,u)}return Dx(e,t,n,a,u)}function GT(e,t,n){var a=t.pendingProps,u=a.children,f=e!==null?e.memoizedState:null;if(a.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},bn(Ip,Ho),Ho|=n;else{if(!(n&1073741824))return e=f!==null?f.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,bn(Ip,Ho),Ho|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=f!==null?f.baseLanes:n,bn(Ip,Ho),Ho|=a}else f!==null?(a=f.baseLanes|n,t.memoizedState=null):a=n,bn(Ip,Ho),Ho|=a;return po(e,t,u,n),t.child}function HT(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Dx(e,t,n,a,u){var f=Mo(n)?Qu:io.current;return f=Vp(t,f),Dp(t,u),n=Z1(e,t,n,a,f,u),a=X1(),e!==null&&!Io?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~u,sl(e,t,u)):(On&&a&&B1(t),t.flags|=1,po(e,t,n,u),t.child)}function CS(e,t,n,a,u){if(Mo(n)){var f=!0;Yy(t)}else f=!1;if(Dp(t,u),t.stateNode===null)Cy(e,t),xT(t,n,a),Rx(t,n,a,u),a=!0;else if(e===null){var o=t.stateNode,v=t.memoizedProps;o.props=v;var x=o.context,E=n.contextType;typeof E=="object"&&E!==null?E=ga(E):(E=Mo(n)?Qu:io.current,E=Vp(t,E));var T=n.getDerivedStateFromProps,I=typeof T=="function"||typeof o.getSnapshotBeforeUpdate=="function";I||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(v!==a||x!==E)&&yS(t,o,a,E),Dl=!1;var P=t.memoizedState;o.state=P,rg(t,a,o,u),x=t.memoizedState,v!==a||P!==x||Ao.current||Dl?(typeof T=="function"&&(zx(t,n,T,a),x=t.memoizedState),(v=Dl||mS(t,n,v,a,P,x,E))?(I||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=x),o.props=a,o.state=x,o.context=E,a=v):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{o=t.stateNode,vT(e,t),v=t.memoizedProps,E=t.type===t.elementType?v:Aa(t.type,v),o.props=E,I=t.pendingProps,P=o.context,x=n.contextType,typeof x=="object"&&x!==null?x=ga(x):(x=Mo(n)?Qu:io.current,x=Vp(t,x));var V=n.getDerivedStateFromProps;(T=typeof V=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(v!==I||P!==x)&&yS(t,o,a,x),Dl=!1,P=t.memoizedState,o.state=P,rg(t,a,o,u);var N=t.memoizedState;v!==I||P!==N||Ao.current||Dl?(typeof V=="function"&&(zx(t,n,V,a),N=t.memoizedState),(E=Dl||mS(t,n,E,a,P,N,x)||!1)?(T||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(a,N,x),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(a,N,x)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||v===e.memoizedProps&&P===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&P===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=N),o.props=a,o.state=N,o.context=x,a=E):(typeof o.componentDidUpdate!="function"||v===e.memoizedProps&&P===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&P===e.memoizedState||(t.flags|=1024),a=!1)}return Ox(e,t,n,a,f,u)}function Ox(e,t,n,a,u,f){HT(e,t);var o=(t.flags&128)!==0;if(!a&&!o)return u&&cS(t,n,!1),sl(e,t,f);a=t.stateNode,q3.current=t;var v=o&&typeof n.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&o?(t.child=Wp(t,e.child,null,f),t.child=Wp(t,null,v,f)):po(e,t,v,f),t.memoizedState=a.state,u&&cS(t,n,!0),t.child}function KT(e){var t=e.stateNode;t.pendingContext?uS(e,t.pendingContext,t.pendingContext!==t.context):t.context&&uS(e,t.context,!1),W1(e,t.containerInfo)}function kS(e,t,n,a,u){return qp(),F1(u),t.flags|=256,po(e,t,n,a),t.child}var Bx={dehydrated:null,treeContext:null,retryLane:0};function Nx(e){return{baseLanes:e,cachePool:null,transitions:null}}function ZT(e,t,n){var a=t.pendingProps,u=$n.current,f=!1,o=(t.flags&128)!==0,v;if((v=o)||(v=e!==null&&e.memoizedState===null?!1:(u&2)!==0),v?(f=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(u|=1),bn($n,u&1),e===null)return Ax(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=a.children,e=a.fallback,f?(a=t.mode,f=t.child,o={mode:"hidden",children:o},!(a&1)&&f!==null?(f.childLanes=0,f.pendingProps=o):f=Wg(o,a,0,null),e=Yu(e,a,n,null),f.return=t,e.return=t,f.sibling=e,t.child=f,t.child.memoizedState=Nx(n),t.memoizedState=Bx,e):Q1(t,o));if(u=e.memoizedState,u!==null&&(v=u.dehydrated,v!==null))return W3(e,t,o,a,v,u,n);if(f){f=a.fallback,o=t.mode,u=e.child,v=u.sibling;var x={mode:"hidden",children:a.children};return!(o&1)&&t.child!==u?(a=t.child,a.childLanes=0,a.pendingProps=x,t.deletions=null):(a=Kl(u,x),a.subtreeFlags=u.subtreeFlags&14680064),v!==null?f=Kl(v,f):(f=Yu(f,o,n,null),f.flags|=2),f.return=t,a.return=t,a.sibling=f,t.child=a,a=f,f=t.child,o=e.child.memoizedState,o=o===null?Nx(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},f.memoizedState=o,f.childLanes=e.childLanes&~n,t.memoizedState=Bx,a}return f=e.child,e=f.sibling,a=Kl(f,{mode:"visible",children:a.children}),!(t.mode&1)&&(a.lanes=n),a.return=t,a.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=a,t.memoizedState=null,a}function Q1(e,t){return t=Wg({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ty(e,t,n,a){return a!==null&&F1(a),Wp(t,e.child,null,n),e=Q1(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function W3(e,t,n,a,u,f,o){if(n)return t.flags&256?(t.flags&=-257,a=c_(Error(lt(422))),ty(e,t,o,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(f=a.fallback,u=t.mode,a=Wg({mode:"visible",children:a.children},u,0,null),f=Yu(f,u,o,null),f.flags|=2,a.return=t,f.return=t,a.sibling=f,t.child=a,t.mode&1&&Wp(t,e.child,null,o),t.child.memoizedState=Nx(o),t.memoizedState=Bx,f);if(!(t.mode&1))return ty(e,t,o,null);if(u.data==="$!"){if(a=u.nextSibling&&u.nextSibling.dataset,a)var v=a.dgst;return a=v,f=Error(lt(419)),a=c_(f,a,void 0),ty(e,t,o,a)}if(v=(o&e.childLanes)!==0,Io||v){if(a=Mi,a!==null){switch(o&-o){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}u=u&(a.suspendedLanes|o)?0:u,u!==0&&u!==f.retryLane&&(f.retryLane=u,al(e,u),Ba(a,e,u,-1))}return ob(),a=c_(Error(lt(421))),ty(e,t,o,a)}return u.data==="$?"?(t.flags|=128,t.child=e.child,t=iL.bind(null,e),u._reactRetry=t,null):(e=f.treeContext,Zo=ql(u.nextSibling),Xo=t,On=!0,za=null,e!==null&&(ha[da++]=el,ha[da++]=tl,ha[da++]=ec,el=e.id,tl=e.overflow,ec=t),t=Q1(t,a.children),t.flags|=4096,t)}function TS(e,t,n){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),Mx(e.return,t,n)}function p_(e,t,n,a,u){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:u}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=a,f.tail=n,f.tailMode=u)}function XT(e,t,n){var a=t.pendingProps,u=a.revealOrder,f=a.tail;if(po(e,t,a.children,n),a=$n.current,a&2)a=a&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&TS(e,n,t);else if(e.tag===19)TS(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(bn($n,a),!(t.mode&1))t.memoizedState=null;else switch(u){case"forwards":for(n=t.child,u=null;n!==null;)e=n.alternate,e!==null&&ng(e)===null&&(u=n),n=n.sibling;n=u,n===null?(u=t.child,t.child=null):(u=n.sibling,n.sibling=null),p_(t,!1,u,n,f);break;case"backwards":for(n=null,u=t.child,t.child=null;u!==null;){if(e=u.alternate,e!==null&&ng(e)===null){t.child=u;break}e=u.sibling,u.sibling=n,n=u,u=e}p_(t,!0,n,null,f);break;case"together":p_(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Cy(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function sl(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),rc|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(lt(153));if(t.child!==null){for(e=t.child,n=Kl(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Kl(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function G3(e,t,n){switch(t.tag){case 3:KT(t),qp();break;case 5:ST(t);break;case 1:Mo(t.type)&&Yy(t);break;case 4:W1(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,u=t.memoizedProps.value;bn(eg,a._currentValue),a._currentValue=u;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(bn($n,$n.current&1),t.flags|=128,null):n&t.child.childLanes?ZT(e,t,n):(bn($n,$n.current&1),e=sl(e,t,n),e!==null?e.sibling:null);bn($n,$n.current&1);break;case 19:if(a=(n&t.childLanes)!==0,e.flags&128){if(a)return XT(e,t,n);t.flags|=128}if(u=t.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),bn($n,$n.current),a)break;return null;case 22:case 23:return t.lanes=0,GT(e,t,n)}return sl(e,t,n)}var YT,Fx,JT,QT;YT=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Fx=function(){};JT=function(e,t,n,a){var u=e.memoizedProps;if(u!==a){e=t.stateNode,Hu(gs.current);var f=null;switch(n){case"input":u=sx(e,u),a=sx(e,a),f=[];break;case"select":u=qn({},u,{value:void 0}),a=qn({},a,{value:void 0}),f=[];break;case"textarea":u=cx(e,u),a=cx(e,a),f=[];break;default:typeof u.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=Zy)}hx(n,a);var o;n=null;for(E in u)if(!a.hasOwnProperty(E)&&u.hasOwnProperty(E)&&u[E]!=null)if(E==="style"){var v=u[E];for(o in v)v.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else E!=="dangerouslySetInnerHTML"&&E!=="children"&&E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&E!=="autoFocus"&&(Gd.hasOwnProperty(E)?f||(f=[]):(f=f||[]).push(E,null));for(E in a){var x=a[E];if(v=u!=null?u[E]:void 0,a.hasOwnProperty(E)&&x!==v&&(x!=null||v!=null))if(E==="style")if(v){for(o in v)!v.hasOwnProperty(o)||x&&x.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in x)x.hasOwnProperty(o)&&v[o]!==x[o]&&(n||(n={}),n[o]=x[o])}else n||(f||(f=[]),f.push(E,n)),n=x;else E==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,v=v?v.__html:void 0,x!=null&&v!==x&&(f=f||[]).push(E,x)):E==="children"?typeof x!="string"&&typeof x!="number"||(f=f||[]).push(E,""+x):E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&(Gd.hasOwnProperty(E)?(x!=null&&E==="onScroll"&&An("scroll",e),f||v===x||(f=[])):(f=f||[]).push(E,x))}n&&(f=f||[]).push("style",n);var E=f;(t.updateQueue=E)&&(t.flags|=4)}};QT=function(e,t,n,a){n!==a&&(t.flags|=4)};function fd(e,t){if(!On)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function to(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,a=0;if(t)for(var u=e.child;u!==null;)n|=u.lanes|u.childLanes,a|=u.subtreeFlags&14680064,a|=u.flags&14680064,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)n|=u.lanes|u.childLanes,a|=u.subtreeFlags,a|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=a,e.childLanes=n,t}function H3(e,t,n){var a=t.pendingProps;switch(N1(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return to(t),null;case 1:return Mo(t.type)&&Xy(),to(t),null;case 3:return a=t.stateNode,Gp(),Mn(Ao),Mn(io),H1(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Qm(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,za!==null&&(Hx(za),za=null))),Fx(e,t),to(t),null;case 5:G1(t);var u=Hu(of.current);if(n=t.type,e!==null&&t.stateNode!=null)JT(e,t,n,a,u),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(lt(166));return to(t),null}if(e=Hu(gs.current),Qm(t)){a=t.stateNode,n=t.type;var f=t.memoizedProps;switch(a[fs]=t,a[rf]=f,e=(t.mode&1)!==0,n){case"dialog":An("cancel",a),An("close",a);break;case"iframe":case"object":case"embed":An("load",a);break;case"video":case"audio":for(u=0;u<Td.length;u++)An(Td[u],a);break;case"source":An("error",a);break;case"img":case"image":case"link":An("error",a),An("load",a);break;case"details":An("toggle",a);break;case"input":O2(a,f),An("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!f.multiple},An("invalid",a);break;case"textarea":N2(a,f),An("invalid",a)}hx(n,f),u=null;for(var o in f)if(f.hasOwnProperty(o)){var v=f[o];o==="children"?typeof v=="string"?a.textContent!==v&&(f.suppressHydrationWarning!==!0&&Jm(a.textContent,v,e),u=["children",v]):typeof v=="number"&&a.textContent!==""+v&&(f.suppressHydrationWarning!==!0&&Jm(a.textContent,v,e),u=["children",""+v]):Gd.hasOwnProperty(o)&&v!=null&&o==="onScroll"&&An("scroll",a)}switch(n){case"input":qm(a),B2(a,f,!0);break;case"textarea":qm(a),F2(a);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(a.onclick=Zy)}a=u,t.updateQueue=a,a!==null&&(t.flags|=4)}else{o=u.nodeType===9?u:u.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=kk(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=o.createElement(n,{is:a.is}):(e=o.createElement(n),n==="select"&&(o=e,a.multiple?o.multiple=!0:a.size&&(o.size=a.size))):e=o.createElementNS(e,n),e[fs]=t,e[rf]=a,YT(e,t,!1,!1),t.stateNode=e;e:{switch(o=dx(n,a),n){case"dialog":An("cancel",e),An("close",e),u=a;break;case"iframe":case"object":case"embed":An("load",e),u=a;break;case"video":case"audio":for(u=0;u<Td.length;u++)An(Td[u],e);u=a;break;case"source":An("error",e),u=a;break;case"img":case"image":case"link":An("error",e),An("load",e),u=a;break;case"details":An("toggle",e),u=a;break;case"input":O2(e,a),u=sx(e,a),An("invalid",e);break;case"option":u=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},u=qn({},a,{value:void 0}),An("invalid",e);break;case"textarea":N2(e,a),u=cx(e,a),An("invalid",e);break;default:u=a}hx(n,u),v=u;for(f in v)if(v.hasOwnProperty(f)){var x=v[f];f==="style"?Pk(e,x):f==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,x!=null&&Tk(e,x)):f==="children"?typeof x=="string"?(n!=="textarea"||x!=="")&&Hd(e,x):typeof x=="number"&&Hd(e,""+x):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Gd.hasOwnProperty(f)?x!=null&&f==="onScroll"&&An("scroll",e):x!=null&&S1(e,f,x,o))}switch(n){case"input":qm(e),B2(e,a,!1);break;case"textarea":qm(e),F2(e);break;case"option":a.value!=null&&e.setAttribute("value",""+Xl(a.value));break;case"select":e.multiple=!!a.multiple,f=a.value,f!=null?Mp(e,!!a.multiple,f,!1):a.defaultValue!=null&&Mp(e,!!a.multiple,a.defaultValue,!0);break;default:typeof u.onClick=="function"&&(e.onclick=Zy)}switch(n){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return to(t),null;case 6:if(e&&t.stateNode!=null)QT(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(lt(166));if(n=Hu(of.current),Hu(gs.current),Qm(t)){if(a=t.stateNode,n=t.memoizedProps,a[fs]=t,(f=a.nodeValue!==n)&&(e=Xo,e!==null))switch(e.tag){case 3:Jm(a.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Jm(a.nodeValue,n,(e.mode&1)!==0)}f&&(t.flags|=4)}else a=(n.nodeType===9?n:n.ownerDocument).createTextNode(a),a[fs]=t,t.stateNode=a}return to(t),null;case 13:if(Mn($n),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(On&&Zo!==null&&t.mode&1&&!(t.flags&128))yT(),qp(),t.flags|=98560,f=!1;else if(f=Qm(t),a!==null&&a.dehydrated!==null){if(e===null){if(!f)throw Error(lt(318));if(f=t.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(lt(317));f[fs]=t}else qp(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;to(t),f=!1}else za!==null&&(Hx(za),za=null),f=!0;if(!f)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,t.mode&1&&(e===null||$n.current&1?xi===0&&(xi=3):ob())),t.updateQueue!==null&&(t.flags|=4),to(t),null);case 4:return Gp(),Fx(e,t),e===null&&ef(t.stateNode.containerInfo),to(t),null;case 10:return $1(t.type._context),to(t),null;case 17:return Mo(t.type)&&Xy(),to(t),null;case 19:if(Mn($n),f=t.memoizedState,f===null)return to(t),null;if(a=(t.flags&128)!==0,o=f.rendering,o===null)if(a)fd(f,!1);else{if(xi!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=ng(e),o!==null){for(t.flags|=128,fd(f,!1),a=o.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=n,n=t.child;n!==null;)f=n,e=a,f.flags&=14680066,o=f.alternate,o===null?(f.childLanes=0,f.lanes=e,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=o.childLanes,f.lanes=o.lanes,f.child=o.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=o.memoizedProps,f.memoizedState=o.memoizedState,f.updateQueue=o.updateQueue,f.type=o.type,e=o.dependencies,f.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return bn($n,$n.current&1|2),t.child}e=e.sibling}f.tail!==null&&ai()>Kp&&(t.flags|=128,a=!0,fd(f,!1),t.lanes=4194304)}else{if(!a)if(e=ng(o),e!==null){if(t.flags|=128,a=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),fd(f,!0),f.tail===null&&f.tailMode==="hidden"&&!o.alternate&&!On)return to(t),null}else 2*ai()-f.renderingStartTime>Kp&&n!==1073741824&&(t.flags|=128,a=!0,fd(f,!1),t.lanes=4194304);f.isBackwards?(o.sibling=t.child,t.child=o):(n=f.last,n!==null?n.sibling=o:t.child=o,f.last=o)}return f.tail!==null?(t=f.tail,f.rendering=t,f.tail=t.sibling,f.renderingStartTime=ai(),t.sibling=null,n=$n.current,bn($n,a?n&1|2:n&1),t):(to(t),null);case 22:case 23:return ib(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&t.mode&1?Ho&1073741824&&(to(t),t.subtreeFlags&6&&(t.flags|=8192)):to(t),null;case 24:return null;case 25:return null}throw Error(lt(156,t.tag))}function K3(e,t){switch(N1(t),t.tag){case 1:return Mo(t.type)&&Xy(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Gp(),Mn(Ao),Mn(io),H1(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return G1(t),null;case 13:if(Mn($n),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(lt(340));qp()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Mn($n),null;case 4:return Gp(),null;case 10:return $1(t.type._context),null;case 22:case 23:return ib(),null;case 24:return null;default:return null}}var ry=!1,no=!1,Z3=typeof WeakSet=="function"?WeakSet:Set,Mt=null;function Tp(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(a){Jn(e,t,a)}else n.current=null}function jx(e,t,n){try{n()}catch(a){Jn(e,t,a)}}var IS=!1;function X3(e,t){if(Sx=Gy,e=nT(),O1(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var a=n.getSelection&&n.getSelection();if(a&&a.rangeCount!==0){n=a.anchorNode;var u=a.anchorOffset,f=a.focusNode;a=a.focusOffset;try{n.nodeType,f.nodeType}catch{n=null;break e}var o=0,v=-1,x=-1,E=0,T=0,I=e,P=null;t:for(;;){for(var V;I!==n||u!==0&&I.nodeType!==3||(v=o+u),I!==f||a!==0&&I.nodeType!==3||(x=o+a),I.nodeType===3&&(o+=I.nodeValue.length),(V=I.firstChild)!==null;)P=I,I=V;for(;;){if(I===e)break t;if(P===n&&++E===u&&(v=o),P===f&&++T===a&&(x=o),(V=I.nextSibling)!==null)break;I=P,P=I.parentNode}I=V}n=v===-1||x===-1?null:{start:v,end:x}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ex={focusedElem:e,selectionRange:n},Gy=!1,Mt=t;Mt!==null;)if(t=Mt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Mt=e;else for(;Mt!==null;){t=Mt;try{var N=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var q=N.memoizedProps,J=N.memoizedState,U=t.stateNode,F=U.getSnapshotBeforeUpdate(t.elementType===t.type?q:Aa(t.type,q),J);U.__reactInternalSnapshotBeforeUpdate=F}break;case 3:var R=t.stateNode.containerInfo;R.nodeType===1?R.textContent="":R.nodeType===9&&R.documentElement&&R.removeChild(R.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(lt(163))}}catch(O){Jn(t,t.return,O)}if(e=t.sibling,e!==null){e.return=t.return,Mt=e;break}Mt=t.return}return N=IS,IS=!1,N}function Fd(e,t,n){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var u=a=a.next;do{if((u.tag&e)===e){var f=u.destroy;u.destroy=void 0,f!==void 0&&jx(t,n,f)}u=u.next}while(u!==a)}}function Vg(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var a=n.create;n.destroy=a()}n=n.next}while(n!==t)}}function Ux(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function eI(e){var t=e.alternate;t!==null&&(e.alternate=null,eI(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[fs],delete t[rf],delete t[Tx],delete t[z3],delete t[R3])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function tI(e){return e.tag===5||e.tag===3||e.tag===4}function PS(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||tI(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function $x(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Zy));else if(a!==4&&(e=e.child,e!==null))for($x(e,t,n),e=e.sibling;e!==null;)$x(e,t,n),e=e.sibling}function Vx(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(Vx(e,t,n),e=e.sibling;e!==null;)Vx(e,t,n),e=e.sibling}var Fi=null,Ma=!1;function Ml(e,t,n){for(n=n.child;n!==null;)rI(e,t,n),n=n.sibling}function rI(e,t,n){if(ys&&typeof ys.onCommitFiberUnmount=="function")try{ys.onCommitFiberUnmount(Dg,n)}catch{}switch(n.tag){case 5:no||Tp(n,t);case 6:var a=Fi,u=Ma;Fi=null,Ml(e,t,n),Fi=a,Ma=u,Fi!==null&&(Ma?(e=Fi,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Fi.removeChild(n.stateNode));break;case 18:Fi!==null&&(Ma?(e=Fi,n=n.stateNode,e.nodeType===8?i_(e.parentNode,n):e.nodeType===1&&i_(e,n),Yd(e)):i_(Fi,n.stateNode));break;case 4:a=Fi,u=Ma,Fi=n.stateNode.containerInfo,Ma=!0,Ml(e,t,n),Fi=a,Ma=u;break;case 0:case 11:case 14:case 15:if(!no&&(a=n.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){u=a=a.next;do{var f=u,o=f.destroy;f=f.tag,o!==void 0&&(f&2||f&4)&&jx(n,t,o),u=u.next}while(u!==a)}Ml(e,t,n);break;case 1:if(!no&&(Tp(n,t),a=n.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=n.memoizedProps,a.state=n.memoizedState,a.componentWillUnmount()}catch(v){Jn(n,t,v)}Ml(e,t,n);break;case 21:Ml(e,t,n);break;case 22:n.mode&1?(no=(a=no)||n.memoizedState!==null,Ml(e,t,n),no=a):Ml(e,t,n);break;default:Ml(e,t,n)}}function AS(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Z3),t.forEach(function(a){var u=oL.bind(null,e,a);n.has(a)||(n.add(a),a.then(u,u))})}}function Pa(e,t){var n=t.deletions;if(n!==null)for(var a=0;a<n.length;a++){var u=n[a];try{var f=e,o=t,v=o;e:for(;v!==null;){switch(v.tag){case 5:Fi=v.stateNode,Ma=!1;break e;case 3:Fi=v.stateNode.containerInfo,Ma=!0;break e;case 4:Fi=v.stateNode.containerInfo,Ma=!0;break e}v=v.return}if(Fi===null)throw Error(lt(160));rI(f,o,u),Fi=null,Ma=!1;var x=u.alternate;x!==null&&(x.return=null),u.return=null}catch(E){Jn(u,t,E)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)nI(t,e),t=t.sibling}function nI(e,t){var n=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Pa(t,e),cs(e),a&4){try{Fd(3,e,e.return),Vg(3,e)}catch(q){Jn(e,e.return,q)}try{Fd(5,e,e.return)}catch(q){Jn(e,e.return,q)}}break;case 1:Pa(t,e),cs(e),a&512&&n!==null&&Tp(n,n.return);break;case 5:if(Pa(t,e),cs(e),a&512&&n!==null&&Tp(n,n.return),e.flags&32){var u=e.stateNode;try{Hd(u,"")}catch(q){Jn(e,e.return,q)}}if(a&4&&(u=e.stateNode,u!=null)){var f=e.memoizedProps,o=n!==null?n.memoizedProps:f,v=e.type,x=e.updateQueue;if(e.updateQueue=null,x!==null)try{v==="input"&&f.type==="radio"&&f.name!=null&&Ek(u,f),dx(v,o);var E=dx(v,f);for(o=0;o<x.length;o+=2){var T=x[o],I=x[o+1];T==="style"?Pk(u,I):T==="dangerouslySetInnerHTML"?Tk(u,I):T==="children"?Hd(u,I):S1(u,T,I,E)}switch(v){case"input":lx(u,f);break;case"textarea":Ck(u,f);break;case"select":var P=u._wrapperState.wasMultiple;u._wrapperState.wasMultiple=!!f.multiple;var V=f.value;V!=null?Mp(u,!!f.multiple,V,!1):P!==!!f.multiple&&(f.defaultValue!=null?Mp(u,!!f.multiple,f.defaultValue,!0):Mp(u,!!f.multiple,f.multiple?[]:"",!1))}u[rf]=f}catch(q){Jn(e,e.return,q)}}break;case 6:if(Pa(t,e),cs(e),a&4){if(e.stateNode===null)throw Error(lt(162));u=e.stateNode,f=e.memoizedProps;try{u.nodeValue=f}catch(q){Jn(e,e.return,q)}}break;case 3:if(Pa(t,e),cs(e),a&4&&n!==null&&n.memoizedState.isDehydrated)try{Yd(t.containerInfo)}catch(q){Jn(e,e.return,q)}break;case 4:Pa(t,e),cs(e);break;case 13:Pa(t,e),cs(e),u=e.child,u.flags&8192&&(f=u.memoizedState!==null,u.stateNode.isHidden=f,!f||u.alternate!==null&&u.alternate.memoizedState!==null||(rb=ai())),a&4&&AS(e);break;case 22:if(T=n!==null&&n.memoizedState!==null,e.mode&1?(no=(E=no)||T,Pa(t,e),no=E):Pa(t,e),cs(e),a&8192){if(E=e.memoizedState!==null,(e.stateNode.isHidden=E)&&!T&&e.mode&1)for(Mt=e,T=e.child;T!==null;){for(I=Mt=T;Mt!==null;){switch(P=Mt,V=P.child,P.tag){case 0:case 11:case 14:case 15:Fd(4,P,P.return);break;case 1:Tp(P,P.return);var N=P.stateNode;if(typeof N.componentWillUnmount=="function"){a=P,n=P.return;try{t=a,N.props=t.memoizedProps,N.state=t.memoizedState,N.componentWillUnmount()}catch(q){Jn(a,n,q)}}break;case 5:Tp(P,P.return);break;case 22:if(P.memoizedState!==null){zS(I);continue}}V!==null?(V.return=P,Mt=V):zS(I)}T=T.sibling}e:for(T=null,I=e;;){if(I.tag===5){if(T===null){T=I;try{u=I.stateNode,E?(f=u.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(v=I.stateNode,x=I.memoizedProps.style,o=x!=null&&x.hasOwnProperty("display")?x.display:null,v.style.display=Ik("display",o))}catch(q){Jn(e,e.return,q)}}}else if(I.tag===6){if(T===null)try{I.stateNode.nodeValue=E?"":I.memoizedProps}catch(q){Jn(e,e.return,q)}}else if((I.tag!==22&&I.tag!==23||I.memoizedState===null||I===e)&&I.child!==null){I.child.return=I,I=I.child;continue}if(I===e)break e;for(;I.sibling===null;){if(I.return===null||I.return===e)break e;T===I&&(T=null),I=I.return}T===I&&(T=null),I.sibling.return=I.return,I=I.sibling}}break;case 19:Pa(t,e),cs(e),a&4&&AS(e);break;case 21:break;default:Pa(t,e),cs(e)}}function cs(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(tI(n)){var a=n;break e}n=n.return}throw Error(lt(160))}switch(a.tag){case 5:var u=a.stateNode;a.flags&32&&(Hd(u,""),a.flags&=-33);var f=PS(e);Vx(e,f,u);break;case 3:case 4:var o=a.stateNode.containerInfo,v=PS(e);$x(e,v,o);break;default:throw Error(lt(161))}}catch(x){Jn(e,e.return,x)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Y3(e,t,n){Mt=e,iI(e)}function iI(e,t,n){for(var a=(e.mode&1)!==0;Mt!==null;){var u=Mt,f=u.child;if(u.tag===22&&a){var o=u.memoizedState!==null||ry;if(!o){var v=u.alternate,x=v!==null&&v.memoizedState!==null||no;v=ry;var E=no;if(ry=o,(no=x)&&!E)for(Mt=u;Mt!==null;)o=Mt,x=o.child,o.tag===22&&o.memoizedState!==null?RS(u):x!==null?(x.return=o,Mt=x):RS(u);for(;f!==null;)Mt=f,iI(f),f=f.sibling;Mt=u,ry=v,no=E}MS(e)}else u.subtreeFlags&8772&&f!==null?(f.return=u,Mt=f):MS(e)}}function MS(e){for(;Mt!==null;){var t=Mt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:no||Vg(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!no)if(n===null)a.componentDidMount();else{var u=t.elementType===t.type?n.memoizedProps:Aa(t.type,n.memoizedProps);a.componentDidUpdate(u,n.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var f=t.updateQueue;f!==null&&fS(t,f,a);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}fS(t,o,n)}break;case 5:var v=t.stateNode;if(n===null&&t.flags&4){n=v;var x=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":x.autoFocus&&n.focus();break;case"img":x.src&&(n.src=x.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var E=t.alternate;if(E!==null){var T=E.memoizedState;if(T!==null){var I=T.dehydrated;I!==null&&Yd(I)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(lt(163))}no||t.flags&512&&Ux(t)}catch(P){Jn(t,t.return,P)}}if(t===e){Mt=null;break}if(n=t.sibling,n!==null){n.return=t.return,Mt=n;break}Mt=t.return}}function zS(e){for(;Mt!==null;){var t=Mt;if(t===e){Mt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Mt=n;break}Mt=t.return}}function RS(e){for(;Mt!==null;){var t=Mt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Vg(4,t)}catch(x){Jn(t,n,x)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var u=t.return;try{a.componentDidMount()}catch(x){Jn(t,u,x)}}var f=t.return;try{Ux(t)}catch(x){Jn(t,f,x)}break;case 5:var o=t.return;try{Ux(t)}catch(x){Jn(t,o,x)}}}catch(x){Jn(t,t.return,x)}if(t===e){Mt=null;break}var v=t.sibling;if(v!==null){v.return=t.return,Mt=v;break}Mt=t.return}}var J3=Math.ceil,ag=pl.ReactCurrentDispatcher,eb=pl.ReactCurrentOwner,ya=pl.ReactCurrentBatchConfig,Zr=0,Mi=null,fi=null,$i=0,Ho=0,Ip=ru(0),xi=0,uf=null,rc=0,qg=0,tb=0,jd=null,To=null,rb=0,Kp=1/0,Ys=null,sg=!1,qx=null,Gl=null,ny=!1,Fl=null,lg=0,Ud=0,Wx=null,ky=-1,Ty=0;function fo(){return Zr&6?ai():ky!==-1?ky:ky=ai()}function Hl(e){return e.mode&1?Zr&2&&$i!==0?$i&-$i:D3.transition!==null?(Ty===0&&(Ty=Uk()),Ty):(e=pn,e!==0||(e=window.event,e=e===void 0?16:Kk(e.type)),e):1}function Ba(e,t,n,a){if(50<Ud)throw Ud=0,Wx=null,Error(lt(185));_f(e,n,a),(!(Zr&2)||e!==Mi)&&(e===Mi&&(!(Zr&2)&&(qg|=n),xi===4&&Bl(e,$i)),zo(e,a),n===1&&Zr===0&&!(t.mode&1)&&(Kp=ai()+500,jg&&nu()))}function zo(e,t){var n=e.callbackNode;LR(e,t);var a=Wy(e,e===Mi?$i:0);if(a===0)n!==null&&$2(n),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(n!=null&&$2(n),t===1)e.tag===0?L3(LS.bind(null,e)):dT(LS.bind(null,e)),A3(function(){!(Zr&6)&&nu()}),n=null;else{switch($k(a)){case 1:n=I1;break;case 4:n=Fk;break;case 16:n=qy;break;case 536870912:n=jk;break;default:n=qy}n=hI(n,oI.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function oI(e,t){if(ky=-1,Ty=0,Zr&6)throw Error(lt(327));var n=e.callbackNode;if(Op()&&e.callbackNode!==n)return null;var a=Wy(e,e===Mi?$i:0);if(a===0)return null;if(a&30||a&e.expiredLanes||t)t=ug(e,a);else{t=a;var u=Zr;Zr|=2;var f=sI();(Mi!==e||$i!==t)&&(Ys=null,Kp=ai()+500,Xu(e,t));do try{tL();break}catch(v){aI(e,v)}while(1);U1(),ag.current=f,Zr=u,fi!==null?t=0:(Mi=null,$i=0,t=xi)}if(t!==0){if(t===2&&(u=vx(e),u!==0&&(a=u,t=Gx(e,u))),t===1)throw n=uf,Xu(e,0),Bl(e,a),zo(e,ai()),n;if(t===6)Bl(e,a);else{if(u=e.current.alternate,!(a&30)&&!Q3(u)&&(t=ug(e,a),t===2&&(f=vx(e),f!==0&&(a=f,t=Gx(e,f))),t===1))throw n=uf,Xu(e,0),Bl(e,a),zo(e,ai()),n;switch(e.finishedWork=u,e.finishedLanes=a,t){case 0:case 1:throw Error(lt(345));case 2:Uu(e,To,Ys);break;case 3:if(Bl(e,a),(a&130023424)===a&&(t=rb+500-ai(),10<t)){if(Wy(e,0)!==0)break;if(u=e.suspendedLanes,(u&a)!==a){fo(),e.pingedLanes|=e.suspendedLanes&u;break}e.timeoutHandle=kx(Uu.bind(null,e,To,Ys),t);break}Uu(e,To,Ys);break;case 4:if(Bl(e,a),(a&4194240)===a)break;for(t=e.eventTimes,u=-1;0<a;){var o=31-Oa(a);f=1<<o,o=t[o],o>u&&(u=o),a&=~f}if(a=u,a=ai()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*J3(a/1960))-a,10<a){e.timeoutHandle=kx(Uu.bind(null,e,To,Ys),a);break}Uu(e,To,Ys);break;case 5:Uu(e,To,Ys);break;default:throw Error(lt(329))}}}return zo(e,ai()),e.callbackNode===n?oI.bind(null,e):null}function Gx(e,t){var n=jd;return e.current.memoizedState.isDehydrated&&(Xu(e,t).flags|=256),e=ug(e,t),e!==2&&(t=To,To=n,t!==null&&Hx(t)),e}function Hx(e){To===null?To=e:To.push.apply(To,e)}function Q3(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var a=0;a<n.length;a++){var u=n[a],f=u.getSnapshot;u=u.value;try{if(!Na(f(),u))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Bl(e,t){for(t&=~tb,t&=~qg,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Oa(t),a=1<<n;e[n]=-1,t&=~a}}function LS(e){if(Zr&6)throw Error(lt(327));Op();var t=Wy(e,0);if(!(t&1))return zo(e,ai()),null;var n=ug(e,t);if(e.tag!==0&&n===2){var a=vx(e);a!==0&&(t=a,n=Gx(e,a))}if(n===1)throw n=uf,Xu(e,0),Bl(e,t),zo(e,ai()),n;if(n===6)throw Error(lt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Uu(e,To,Ys),zo(e,ai()),null}function nb(e,t){var n=Zr;Zr|=1;try{return e(t)}finally{Zr=n,Zr===0&&(Kp=ai()+500,jg&&nu())}}function nc(e){Fl!==null&&Fl.tag===0&&!(Zr&6)&&Op();var t=Zr;Zr|=1;var n=ya.transition,a=pn;try{if(ya.transition=null,pn=1,e)return e()}finally{pn=a,ya.transition=n,Zr=t,!(Zr&6)&&nu()}}function ib(){Ho=Ip.current,Mn(Ip)}function Xu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,P3(n)),fi!==null)for(n=fi.return;n!==null;){var a=n;switch(N1(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&Xy();break;case 3:Gp(),Mn(Ao),Mn(io),H1();break;case 5:G1(a);break;case 4:Gp();break;case 13:Mn($n);break;case 19:Mn($n);break;case 10:$1(a.type._context);break;case 22:case 23:ib()}n=n.return}if(Mi=e,fi=e=Kl(e.current,null),$i=Ho=t,xi=0,uf=null,tb=qg=rc=0,To=jd=null,Gu!==null){for(t=0;t<Gu.length;t++)if(n=Gu[t],a=n.interleaved,a!==null){n.interleaved=null;var u=a.next,f=n.pending;if(f!==null){var o=f.next;f.next=u,a.next=o}n.pending=a}Gu=null}return e}function aI(e,t){do{var n=fi;try{if(U1(),Sy.current=og,ig){for(var a=Vn.memoizedState;a!==null;){var u=a.queue;u!==null&&(u.pending=null),a=a.next}ig=!1}if(tc=0,Ai=_i=Vn=null,Nd=!1,af=0,eb.current=null,n===null||n.return===null){xi=1,uf=t,fi=null;break}e:{var f=e,o=n.return,v=n,x=t;if(t=$i,v.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){var E=x,T=v,I=T.tag;if(!(T.mode&1)&&(I===0||I===11||I===15)){var P=T.alternate;P?(T.updateQueue=P.updateQueue,T.memoizedState=P.memoizedState,T.lanes=P.lanes):(T.updateQueue=null,T.memoizedState=null)}var V=bS(o);if(V!==null){V.flags&=-257,wS(V,o,v,f,t),V.mode&1&&xS(f,E,t),t=V,x=E;var N=t.updateQueue;if(N===null){var q=new Set;q.add(x),t.updateQueue=q}else N.add(x);break e}else{if(!(t&1)){xS(f,E,t),ob();break e}x=Error(lt(426))}}else if(On&&v.mode&1){var J=bS(o);if(J!==null){!(J.flags&65536)&&(J.flags|=256),wS(J,o,v,f,t),F1(Hp(x,v));break e}}f=x=Hp(x,v),xi!==4&&(xi=2),jd===null?jd=[f]:jd.push(f),f=o;do{switch(f.tag){case 3:f.flags|=65536,t&=-t,f.lanes|=t;var U=VT(f,x,t);dS(f,U);break e;case 1:v=x;var F=f.type,R=f.stateNode;if(!(f.flags&128)&&(typeof F.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(Gl===null||!Gl.has(R)))){f.flags|=65536,t&=-t,f.lanes|=t;var O=qT(f,v,t);dS(f,O);break e}}f=f.return}while(f!==null)}uI(n)}catch(Q){t=Q,fi===n&&n!==null&&(fi=n=n.return);continue}break}while(1)}function sI(){var e=ag.current;return ag.current=og,e===null?og:e}function ob(){(xi===0||xi===3||xi===2)&&(xi=4),Mi===null||!(rc&268435455)&&!(qg&268435455)||Bl(Mi,$i)}function ug(e,t){var n=Zr;Zr|=2;var a=sI();(Mi!==e||$i!==t)&&(Ys=null,Xu(e,t));do try{eL();break}catch(u){aI(e,u)}while(1);if(U1(),Zr=n,ag.current=a,fi!==null)throw Error(lt(261));return Mi=null,$i=0,xi}function eL(){for(;fi!==null;)lI(fi)}function tL(){for(;fi!==null&&!CR();)lI(fi)}function lI(e){var t=pI(e.alternate,e,Ho);e.memoizedProps=e.pendingProps,t===null?uI(e):fi=t,eb.current=null}function uI(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=K3(n,t),n!==null){n.flags&=32767,fi=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{xi=6,fi=null;return}}else if(n=H3(n,t,Ho),n!==null){fi=n;return}if(t=t.sibling,t!==null){fi=t;return}fi=t=e}while(t!==null);xi===0&&(xi=5)}function Uu(e,t,n){var a=pn,u=ya.transition;try{ya.transition=null,pn=1,rL(e,t,n,a)}finally{ya.transition=u,pn=a}return null}function rL(e,t,n,a){do Op();while(Fl!==null);if(Zr&6)throw Error(lt(327));n=e.finishedWork;var u=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(lt(177));e.callbackNode=null,e.callbackPriority=0;var f=n.lanes|n.childLanes;if(DR(e,f),e===Mi&&(fi=Mi=null,$i=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ny||(ny=!0,hI(qy,function(){return Op(),null})),f=(n.flags&15990)!==0,n.subtreeFlags&15990||f){f=ya.transition,ya.transition=null;var o=pn;pn=1;var v=Zr;Zr|=4,eb.current=null,X3(e,n),nI(n,e),w3(Ex),Gy=!!Sx,Ex=Sx=null,e.current=n,Y3(n),kR(),Zr=v,pn=o,ya.transition=f}else e.current=n;if(ny&&(ny=!1,Fl=e,lg=u),f=e.pendingLanes,f===0&&(Gl=null),PR(n.stateNode),zo(e,ai()),t!==null)for(a=e.onRecoverableError,n=0;n<t.length;n++)u=t[n],a(u.value,{componentStack:u.stack,digest:u.digest});if(sg)throw sg=!1,e=qx,qx=null,e;return lg&1&&e.tag!==0&&Op(),f=e.pendingLanes,f&1?e===Wx?Ud++:(Ud=0,Wx=e):Ud=0,nu(),null}function Op(){if(Fl!==null){var e=$k(lg),t=ya.transition,n=pn;try{if(ya.transition=null,pn=16>e?16:e,Fl===null)var a=!1;else{if(e=Fl,Fl=null,lg=0,Zr&6)throw Error(lt(331));var u=Zr;for(Zr|=4,Mt=e.current;Mt!==null;){var f=Mt,o=f.child;if(Mt.flags&16){var v=f.deletions;if(v!==null){for(var x=0;x<v.length;x++){var E=v[x];for(Mt=E;Mt!==null;){var T=Mt;switch(T.tag){case 0:case 11:case 15:Fd(8,T,f)}var I=T.child;if(I!==null)I.return=T,Mt=I;else for(;Mt!==null;){T=Mt;var P=T.sibling,V=T.return;if(eI(T),T===E){Mt=null;break}if(P!==null){P.return=V,Mt=P;break}Mt=V}}}var N=f.alternate;if(N!==null){var q=N.child;if(q!==null){N.child=null;do{var J=q.sibling;q.sibling=null,q=J}while(q!==null)}}Mt=f}}if(f.subtreeFlags&2064&&o!==null)o.return=f,Mt=o;else e:for(;Mt!==null;){if(f=Mt,f.flags&2048)switch(f.tag){case 0:case 11:case 15:Fd(9,f,f.return)}var U=f.sibling;if(U!==null){U.return=f.return,Mt=U;break e}Mt=f.return}}var F=e.current;for(Mt=F;Mt!==null;){o=Mt;var R=o.child;if(o.subtreeFlags&2064&&R!==null)R.return=o,Mt=R;else e:for(o=F;Mt!==null;){if(v=Mt,v.flags&2048)try{switch(v.tag){case 0:case 11:case 15:Vg(9,v)}}catch(Q){Jn(v,v.return,Q)}if(v===o){Mt=null;break e}var O=v.sibling;if(O!==null){O.return=v.return,Mt=O;break e}Mt=v.return}}if(Zr=u,nu(),ys&&typeof ys.onPostCommitFiberRoot=="function")try{ys.onPostCommitFiberRoot(Dg,e)}catch{}a=!0}return a}finally{pn=n,ya.transition=t}}return!1}function DS(e,t,n){t=Hp(n,t),t=VT(e,t,1),e=Wl(e,t,1),t=fo(),e!==null&&(_f(e,1,t),zo(e,t))}function Jn(e,t,n){if(e.tag===3)DS(e,e,n);else for(;t!==null;){if(t.tag===3){DS(t,e,n);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Gl===null||!Gl.has(a))){e=Hp(n,e),e=qT(t,e,1),t=Wl(t,e,1),e=fo(),t!==null&&(_f(t,1,e),zo(t,e));break}}t=t.return}}function nL(e,t,n){var a=e.pingCache;a!==null&&a.delete(t),t=fo(),e.pingedLanes|=e.suspendedLanes&n,Mi===e&&($i&n)===n&&(xi===4||xi===3&&($i&130023424)===$i&&500>ai()-rb?Xu(e,0):tb|=n),zo(e,t)}function cI(e,t){t===0&&(e.mode&1?(t=Hm,Hm<<=1,!(Hm&130023424)&&(Hm=4194304)):t=1);var n=fo();e=al(e,t),e!==null&&(_f(e,t,n),zo(e,n))}function iL(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),cI(e,n)}function oL(e,t){var n=0;switch(e.tag){case 13:var a=e.stateNode,u=e.memoizedState;u!==null&&(n=u.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(lt(314))}a!==null&&a.delete(t),cI(e,n)}var pI;pI=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ao.current)Io=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Io=!1,G3(e,t,n);Io=!!(e.flags&131072)}else Io=!1,On&&t.flags&1048576&&fT(t,Qy,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;Cy(e,t),e=t.pendingProps;var u=Vp(t,io.current);Dp(t,n),u=Z1(null,t,a,e,u,n);var f=X1();return t.flags|=1,typeof u=="object"&&u!==null&&typeof u.render=="function"&&u.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Mo(a)?(f=!0,Yy(t)):f=!1,t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,q1(t),u.updater=Ug,t.stateNode=u,u._reactInternals=t,Rx(t,a,e,n),t=Ox(null,t,a,!0,f,n)):(t.tag=0,On&&f&&B1(t),po(null,t,u,n),t=t.child),t;case 16:a=t.elementType;e:{switch(Cy(e,t),e=t.pendingProps,u=a._init,a=u(a._payload),t.type=a,u=t.tag=sL(a),e=Aa(a,e),u){case 0:t=Dx(null,t,a,e,n);break e;case 1:t=CS(null,t,a,e,n);break e;case 11:t=SS(null,t,a,e,n);break e;case 14:t=ES(null,t,a,Aa(a.type,e),n);break e}throw Error(lt(306,a,""))}return t;case 0:return a=t.type,u=t.pendingProps,u=t.elementType===a?u:Aa(a,u),Dx(e,t,a,u,n);case 1:return a=t.type,u=t.pendingProps,u=t.elementType===a?u:Aa(a,u),CS(e,t,a,u,n);case 3:e:{if(KT(t),e===null)throw Error(lt(387));a=t.pendingProps,f=t.memoizedState,u=f.element,vT(e,t),rg(t,a,null,n);var o=t.memoizedState;if(a=o.element,f.isDehydrated)if(f={element:a,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){u=Hp(Error(lt(423)),t),t=kS(e,t,a,n,u);break e}else if(a!==u){u=Hp(Error(lt(424)),t),t=kS(e,t,a,n,u);break e}else for(Zo=ql(t.stateNode.containerInfo.firstChild),Xo=t,On=!0,za=null,n=wT(t,null,a,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(qp(),a===u){t=sl(e,t,n);break e}po(e,t,a,n)}t=t.child}return t;case 5:return ST(t),e===null&&Ax(t),a=t.type,u=t.pendingProps,f=e!==null?e.memoizedProps:null,o=u.children,Cx(a,u)?o=null:f!==null&&Cx(a,f)&&(t.flags|=32),HT(e,t),po(e,t,o,n),t.child;case 6:return e===null&&Ax(t),null;case 13:return ZT(e,t,n);case 4:return W1(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=Wp(t,null,a,n):po(e,t,a,n),t.child;case 11:return a=t.type,u=t.pendingProps,u=t.elementType===a?u:Aa(a,u),SS(e,t,a,u,n);case 7:return po(e,t,t.pendingProps,n),t.child;case 8:return po(e,t,t.pendingProps.children,n),t.child;case 12:return po(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(a=t.type._context,u=t.pendingProps,f=t.memoizedProps,o=u.value,bn(eg,a._currentValue),a._currentValue=o,f!==null)if(Na(f.value,o)){if(f.children===u.children&&!Ao.current){t=sl(e,t,n);break e}}else for(f=t.child,f!==null&&(f.return=t);f!==null;){var v=f.dependencies;if(v!==null){o=f.child;for(var x=v.firstContext;x!==null;){if(x.context===a){if(f.tag===1){x=nl(-1,n&-n),x.tag=2;var E=f.updateQueue;if(E!==null){E=E.shared;var T=E.pending;T===null?x.next=x:(x.next=T.next,T.next=x),E.pending=x}}f.lanes|=n,x=f.alternate,x!==null&&(x.lanes|=n),Mx(f.return,n,t),v.lanes|=n;break}x=x.next}}else if(f.tag===10)o=f.type===t.type?null:f.child;else if(f.tag===18){if(o=f.return,o===null)throw Error(lt(341));o.lanes|=n,v=o.alternate,v!==null&&(v.lanes|=n),Mx(o,n,t),o=f.sibling}else o=f.child;if(o!==null)o.return=f;else for(o=f;o!==null;){if(o===t){o=null;break}if(f=o.sibling,f!==null){f.return=o.return,o=f;break}o=o.return}f=o}po(e,t,u.children,n),t=t.child}return t;case 9:return u=t.type,a=t.pendingProps.children,Dp(t,n),u=ga(u),a=a(u),t.flags|=1,po(e,t,a,n),t.child;case 14:return a=t.type,u=Aa(a,t.pendingProps),u=Aa(a.type,u),ES(e,t,a,u,n);case 15:return WT(e,t,t.type,t.pendingProps,n);case 17:return a=t.type,u=t.pendingProps,u=t.elementType===a?u:Aa(a,u),Cy(e,t),t.tag=1,Mo(a)?(e=!0,Yy(t)):e=!1,Dp(t,n),xT(t,a,u),Rx(t,a,u,n),Ox(null,t,a,!0,e,n);case 19:return XT(e,t,n);case 22:return GT(e,t,n)}throw Error(lt(156,t.tag))};function hI(e,t){return Nk(e,t)}function aL(e,t,n,a){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ma(e,t,n,a){return new aL(e,t,n,a)}function ab(e){return e=e.prototype,!(!e||!e.isReactComponent)}function sL(e){if(typeof e=="function")return ab(e)?1:0;if(e!=null){if(e=e.$$typeof,e===C1)return 11;if(e===k1)return 14}return 2}function Kl(e,t){var n=e.alternate;return n===null?(n=ma(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Iy(e,t,n,a,u,f){var o=2;if(a=e,typeof e=="function")ab(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case vp:return Yu(n.children,u,f,t);case E1:o=8,u|=8;break;case nx:return e=ma(12,n,t,u|2),e.elementType=nx,e.lanes=f,e;case ix:return e=ma(13,n,t,u),e.elementType=ix,e.lanes=f,e;case ox:return e=ma(19,n,t,u),e.elementType=ox,e.lanes=f,e;case bk:return Wg(n,u,f,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case _k:o=10;break e;case xk:o=9;break e;case C1:o=11;break e;case k1:o=14;break e;case Ll:o=16,a=null;break e}throw Error(lt(130,e==null?e:typeof e,""))}return t=ma(o,n,t,u),t.elementType=e,t.type=a,t.lanes=f,t}function Yu(e,t,n,a){return e=ma(7,e,a,t),e.lanes=n,e}function Wg(e,t,n,a){return e=ma(22,e,a,t),e.elementType=bk,e.lanes=n,e.stateNode={isHidden:!1},e}function h_(e,t,n){return e=ma(6,e,null,t),e.lanes=n,e}function d_(e,t,n){return t=ma(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function lL(e,t,n,a,u){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=H0(0),this.expirationTimes=H0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=H0(0),this.identifierPrefix=a,this.onRecoverableError=u,this.mutableSourceEagerHydrationData=null}function sb(e,t,n,a,u,f,o,v,x){return e=new lL(e,t,n,v,x),t===1?(t=1,f===!0&&(t|=8)):t=0,f=ma(3,null,null,t),e.current=f,f.stateNode=e,f.memoizedState={element:a,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},q1(f),e}function uL(e,t,n){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:gp,key:a==null?null:""+a,children:e,containerInfo:t,implementation:n}}function dI(e){if(!e)return Yl;e=e._reactInternals;e:{if(lc(e)!==e||e.tag!==1)throw Error(lt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Mo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(lt(171))}if(e.tag===1){var n=e.type;if(Mo(n))return hT(e,n,t)}return t}function fI(e,t,n,a,u,f,o,v,x){return e=sb(n,a,!0,e,u,f,o,v,x),e.context=dI(null),n=e.current,a=fo(),u=Hl(n),f=nl(a,u),f.callback=t??null,Wl(n,f,u),e.current.lanes=u,_f(e,u,a),zo(e,a),e}function Gg(e,t,n,a){var u=t.current,f=fo(),o=Hl(u);return n=dI(n),t.context===null?t.context=n:t.pendingContext=n,t=nl(f,o),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=Wl(u,t,o),e!==null&&(Ba(e,u,o,f),wy(e,u,o)),o}function cg(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function OS(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function lb(e,t){OS(e,t),(e=e.alternate)&&OS(e,t)}function cL(){return null}var mI=typeof reportError=="function"?reportError:function(e){console.error(e)};function ub(e){this._internalRoot=e}Hg.prototype.render=ub.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(lt(409));Gg(e,t,null,null)};Hg.prototype.unmount=ub.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;nc(function(){Gg(null,e,null,null)}),t[ol]=null}};function Hg(e){this._internalRoot=e}Hg.prototype.unstable_scheduleHydration=function(e){if(e){var t=Wk();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ol.length&&t!==0&&t<Ol[n].priority;n++);Ol.splice(n,0,e),n===0&&Hk(e)}};function cb(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Kg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function BS(){}function pL(e,t,n,a,u){if(u){if(typeof a=="function"){var f=a;a=function(){var E=cg(o);f.call(E)}}var o=fI(t,a,e,0,null,!1,!1,"",BS);return e._reactRootContainer=o,e[ol]=o.current,ef(e.nodeType===8?e.parentNode:e),nc(),o}for(;u=e.lastChild;)e.removeChild(u);if(typeof a=="function"){var v=a;a=function(){var E=cg(x);v.call(E)}}var x=sb(e,0,!1,null,null,!1,!1,"",BS);return e._reactRootContainer=x,e[ol]=x.current,ef(e.nodeType===8?e.parentNode:e),nc(function(){Gg(t,x,n,a)}),x}function Zg(e,t,n,a,u){var f=n._reactRootContainer;if(f){var o=f;if(typeof u=="function"){var v=u;u=function(){var x=cg(o);v.call(x)}}Gg(t,o,e,u)}else o=pL(n,t,e,u,a);return cg(o)}Vk=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=kd(t.pendingLanes);n!==0&&(P1(t,n|1),zo(t,ai()),!(Zr&6)&&(Kp=ai()+500,nu()))}break;case 13:nc(function(){var a=al(e,1);if(a!==null){var u=fo();Ba(a,e,1,u)}}),lb(e,1)}};A1=function(e){if(e.tag===13){var t=al(e,134217728);if(t!==null){var n=fo();Ba(t,e,134217728,n)}lb(e,134217728)}};qk=function(e){if(e.tag===13){var t=Hl(e),n=al(e,t);if(n!==null){var a=fo();Ba(n,e,t,a)}lb(e,t)}};Wk=function(){return pn};Gk=function(e,t){var n=pn;try{return pn=e,t()}finally{pn=n}};mx=function(e,t,n){switch(t){case"input":if(lx(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var a=n[t];if(a!==e&&a.form===e.form){var u=Fg(a);if(!u)throw Error(lt(90));Sk(a),lx(a,u)}}}break;case"textarea":Ck(e,n);break;case"select":t=n.value,t!=null&&Mp(e,!!n.multiple,t,!1)}};zk=nb;Rk=nc;var hL={usingClientEntryPoint:!1,Events:[bf,wp,Fg,Ak,Mk,nb]},md={findFiberByHostInstance:Wu,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},dL={bundleType:md.bundleType,version:md.version,rendererPackageName:md.rendererPackageName,rendererConfig:md.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:pl.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Ok(e),e===null?null:e.stateNode},findFiberByHostInstance:md.findFiberByHostInstance||cL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var iy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iy.isDisabled&&iy.supportsFiber)try{Dg=iy.inject(dL),ys=iy}catch{}}ea.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hL;ea.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!cb(t))throw Error(lt(200));return uL(e,t,null,n)};ea.createRoot=function(e,t){if(!cb(e))throw Error(lt(299));var n=!1,a="",u=mI;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(u=t.onRecoverableError)),t=sb(e,1,!1,null,null,n,!1,a,u),e[ol]=t.current,ef(e.nodeType===8?e.parentNode:e),new ub(t)};ea.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(lt(188)):(e=Object.keys(e).join(","),Error(lt(268,e)));return e=Ok(t),e=e===null?null:e.stateNode,e};ea.flushSync=function(e){return nc(e)};ea.hydrate=function(e,t,n){if(!Kg(t))throw Error(lt(200));return Zg(null,e,t,!0,n)};ea.hydrateRoot=function(e,t,n){if(!cb(e))throw Error(lt(405));var a=n!=null&&n.hydratedSources||null,u=!1,f="",o=mI;if(n!=null&&(n.unstable_strictMode===!0&&(u=!0),n.identifierPrefix!==void 0&&(f=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=fI(t,null,e,1,n??null,u,!1,f,o),e[ol]=t.current,ef(e),a)for(e=0;e<a.length;e++)n=a[e],u=n._getVersion,u=u(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,u]:t.mutableSourceEagerHydrationData.push(n,u);return new Hg(t)};ea.render=function(e,t,n){if(!Kg(t))throw Error(lt(200));return Zg(null,e,t,!1,n)};ea.unmountComponentAtNode=function(e){if(!Kg(e))throw Error(lt(40));return e._reactRootContainer?(nc(function(){Zg(null,null,e,!1,function(){e._reactRootContainer=null,e[ol]=null})}),!0):!1};ea.unstable_batchedUpdates=nb;ea.unstable_renderSubtreeIntoContainer=function(e,t,n,a){if(!Kg(n))throw Error(lt(200));if(e==null||e._reactInternals===void 0)throw Error(lt(38));return Zg(e,t,n,!1,a)};ea.version="18.2.0-next-9e3b772b8-20220608";function yI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(yI)}catch(e){console.error(e)}}yI(),fk.exports=ea;var pb=fk.exports;const Id=Rg(pb);var gI={exports:{}};(function(e,t){(function(n,a){e.exports=a()})(Da,function(){var n,a,u;function f(o,v){if(!n)n=v;else if(!a)a=v;else{var x="var sharedChunk = {}; ("+n+")(sharedChunk); ("+a+")(sharedChunk);",E={};n(E),u=v(E),typeof window<"u"&&(u.workerUrl=window.URL.createObjectURL(new Blob([x],{type:"text/javascript"})))}}return f(["exports"],function(o){function v(r,i){return r(i={exports:{}},i.exports),i.exports}var x=E;function E(r,i,s,h){this.cx=3*r,this.bx=3*(s-r)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*i,this.by=3*(h-i)-this.cy,this.ay=1-this.cy-this.by,this.p1x=r,this.p1y=h,this.p2x=s,this.p2y=h}E.prototype.sampleCurveX=function(r){return((this.ax*r+this.bx)*r+this.cx)*r},E.prototype.sampleCurveY=function(r){return((this.ay*r+this.by)*r+this.cy)*r},E.prototype.sampleCurveDerivativeX=function(r){return(3*this.ax*r+2*this.bx)*r+this.cx},E.prototype.solveCurveX=function(r,i){var s,h,m,y,_;for(i===void 0&&(i=1e-6),m=r,_=0;_<8;_++){if(y=this.sampleCurveX(m)-r,Math.abs(y)<i)return m;var S=this.sampleCurveDerivativeX(m);if(Math.abs(S)<1e-6)break;m-=y/S}if((m=r)<(s=0))return s;if(m>(h=1))return h;for(;s<h;){if(y=this.sampleCurveX(m),Math.abs(y-r)<i)return m;r>y?s=m:h=m,m=.5*(h-s)+s}return m},E.prototype.solve=function(r,i){return this.sampleCurveY(this.solveCurveX(r,i))};var T=I;function I(r,i){this.x=r,this.y=i}I.prototype={clone:function(){return new I(this.x,this.y)},add:function(r){return this.clone()._add(r)},sub:function(r){return this.clone()._sub(r)},multByPoint:function(r){return this.clone()._multByPoint(r)},divByPoint:function(r){return this.clone()._divByPoint(r)},mult:function(r){return this.clone()._mult(r)},div:function(r){return this.clone()._div(r)},rotate:function(r){return this.clone()._rotate(r)},rotateAround:function(r,i){return this.clone()._rotateAround(r,i)},matMult:function(r){return this.clone()._matMult(r)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(r){return this.x===r.x&&this.y===r.y},dist:function(r){return Math.sqrt(this.distSqr(r))},distSqr:function(r){var i=r.x-this.x,s=r.y-this.y;return i*i+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(r){return Math.atan2(this.y-r.y,this.x-r.x)},angleWith:function(r){return this.angleWithSep(r.x,r.y)},angleWithSep:function(r,i){return Math.atan2(this.x*i-this.y*r,this.x*r+this.y*i)},_matMult:function(r){var i=r[2]*this.x+r[3]*this.y;return this.x=r[0]*this.x+r[1]*this.y,this.y=i,this},_add:function(r){return this.x+=r.x,this.y+=r.y,this},_sub:function(r){return this.x-=r.x,this.y-=r.y,this},_mult:function(r){return this.x*=r,this.y*=r,this},_div:function(r){return this.x/=r,this.y/=r,this},_multByPoint:function(r){return this.x*=r.x,this.y*=r.y,this},_divByPoint:function(r){return this.x/=r.x,this.y/=r.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var r=this.y;return this.y=this.x,this.x=-r,this},_rotate:function(r){var i=Math.cos(r),s=Math.sin(r),h=s*this.x+i*this.y;return this.x=i*this.x-s*this.y,this.y=h,this},_rotateAround:function(r,i){var s=Math.cos(r),h=Math.sin(r),m=i.y+h*(this.x-i.x)+s*(this.y-i.y);return this.x=i.x+s*(this.x-i.x)-h*(this.y-i.y),this.y=m,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},I.convert=function(r){return r instanceof I?r:Array.isArray(r)?new I(r[0],r[1]):r};var P=typeof self<"u"?self:{},V=Math.pow(2,53)-1;function N(r,i,s,h){var m=new x(r,i,s,h);return function(y){return m.solve(y)}}var q=N(.25,.1,.25,1);function J(r,i,s){return Math.min(s,Math.max(i,r))}function U(r,i,s){var h=s-i,m=((r-i)%h+h)%h+i;return m===i?s:m}function F(r){for(var i=[],s=arguments.length-1;s-- >0;)i[s]=arguments[s+1];for(var h=0,m=i;h<m.length;h+=1){var y=m[h];for(var _ in y)r[_]=y[_]}return r}var R=1;function O(){return R++}function Q(){return function r(i){return i?(i^16*Math.random()>>i/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,r)}()}function se(r){return!!r&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(r)}function pe(r,i){r.forEach(function(s){i[s]&&(i[s]=i[s].bind(i))})}function _e(r,i){return r.indexOf(i,r.length-i.length)!==-1}function ze(r,i,s){var h={};for(var m in r)h[m]=i.call(s||this,r[m],m,r);return h}function he(r,i,s){var h={};for(var m in r)i.call(s||this,r[m],m,r)&&(h[m]=r[m]);return h}function we(r){return Array.isArray(r)?r.map(we):typeof r=="object"&&r?ze(r,we):r}var ie={};function ge(r){ie[r]||(typeof console<"u"&&console.warn(r),ie[r]=!0)}function Ne(r,i,s){return(s.y-r.y)*(i.x-r.x)>(i.y-r.y)*(s.x-r.x)}function qe(r){for(var i=0,s=0,h=r.length,m=h-1,y=void 0,_=void 0;s<h;m=s++)i+=((_=r[m]).x-(y=r[s]).x)*(y.y+_.y);return i}function Ce(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function ke(r){var i={};if(r.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(h,m,y,_){var S=y||_;return i[m]=!S||S.toLowerCase(),""}),i["max-age"]){var s=parseInt(i["max-age"],10);isNaN(s)?delete i["max-age"]:i["max-age"]=s}return i}var Te=null;function Oe(r){if(Te==null){var i=r.navigator?r.navigator.userAgent:null;Te=!!r.safari||!(!i||!(/\b(iPad|iPhone|iPod)\b/.test(i)||i.match("Safari")&&!i.match("Chrome")))}return Te}function Je(r){try{var i=P[r];return i.setItem("_mapbox_test_",1),i.removeItem("_mapbox_test_"),!0}catch{return!1}}var $e,et,Wt,Re,He=P.performance&&P.performance.now?P.performance.now.bind(P.performance):Date.now.bind(Date),Zt=P.requestAnimationFrame||P.mozRequestAnimationFrame||P.webkitRequestAnimationFrame||P.msRequestAnimationFrame,Pt=P.cancelAnimationFrame||P.mozCancelAnimationFrame||P.webkitCancelAnimationFrame||P.msCancelAnimationFrame,Gt={now:He,frame:function(r){var i=Zt(r);return{cancel:function(){return Pt(i)}}},getImageData:function(r,i){i===void 0&&(i=0);var s=P.document.createElement("canvas"),h=s.getContext("2d");if(!h)throw new Error("failed to create canvas 2d context");return s.width=r.width,s.height=r.height,h.drawImage(r,0,0,r.width,r.height),h.getImageData(-i,-i,r.width+2*i,r.height+2*i)},resolveURL:function(r){return $e||($e=P.document.createElement("a")),$e.href=r,$e.href},hardwareConcurrency:P.navigator&&P.navigator.hardwareConcurrency||4,get devicePixelRatio(){return P.devicePixelRatio},get prefersReducedMotion(){return!!P.matchMedia&&(et==null&&(et=P.matchMedia("(prefers-reduced-motion: reduce)")),et.matches)}},zt={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},nr={supported:!1,testSupport:function(r){!Kt&&Re&&(Yt?st(r):Wt=r)}},Kt=!1,Yt=!1;function st(r){var i=r.createTexture();r.bindTexture(r.TEXTURE_2D,i);try{if(r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,Re),r.isContextLost())return;nr.supported=!0}catch{}r.deleteTexture(i),Kt=!0}P.document&&((Re=P.document.createElement("img")).onload=function(){Wt&&st(Wt),Wt=null,Yt=!0},Re.onerror=function(){Kt=!0,Wt=null},Re.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var Lt="01",er=function(r,i){this._transformRequestFn=r,this._customAccessToken=i,this._createSkuToken()};function Mr(r){return r.indexOf("mapbox:")===0}er.prototype._createSkuToken=function(){var r=function(){for(var i="",s=0;s<10;s++)i+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Lt,i].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=r.token,this._skuTokenExpiresAt=r.tokenExpiresAt},er.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},er.prototype.transformRequest=function(r,i){return this._transformRequestFn&&this._transformRequestFn(r,i)||{url:r}},er.prototype.normalizeStyleURL=function(r,i){if(!Mr(r))return r;var s=zr(r);return s.path="/styles/v1"+s.path,this._makeAPIURL(s,this._customAccessToken||i)},er.prototype.normalizeGlyphsURL=function(r,i){if(!Mr(r))return r;var s=zr(r);return s.path="/fonts/v1"+s.path,this._makeAPIURL(s,this._customAccessToken||i)},er.prototype.normalizeSourceURL=function(r,i){if(!Mr(r))return r;var s=zr(r);return s.path="/v4/"+s.authority+".json",s.params.push("secure"),this._makeAPIURL(s,this._customAccessToken||i)},er.prototype.normalizeSpriteURL=function(r,i,s,h){var m=zr(r);return Mr(r)?(m.path="/styles/v1"+m.path+"/sprite"+i+s,this._makeAPIURL(m,this._customAccessToken||h)):(m.path+=""+i+s,Sr(m))},er.prototype.normalizeTileURL=function(r,i){if(this._isSkuTokenExpired()&&this._createSkuToken(),r&&!Mr(r))return r;var s=zr(r);s.path=s.path.replace(/(\.(png|jpg)\d*)(?=$)/,(Gt.devicePixelRatio>=2||i===512?"@2x":"")+(nr.supported?".webp":"$1")),s.path=s.path.replace(/^.+\/v4\//,"/"),s.path="/v4"+s.path;var h=this._customAccessToken||function(m){for(var y=0,_=m;y<_.length;y+=1){var S=_[y].match(/^access_token=(.*)$/);if(S)return S[1]}return null}(s.params)||zt.ACCESS_TOKEN;return zt.REQUIRE_ACCESS_TOKEN&&h&&this._skuToken&&s.params.push("sku="+this._skuToken),this._makeAPIURL(s,h)},er.prototype.canonicalizeTileURL=function(r,i){var s=zr(r);if(!s.path.match(/(^\/v4\/)/)||!s.path.match(/\.[\w]+$/))return r;var h="mapbox://tiles/";h+=s.path.replace("/v4/","");var m=s.params;return i&&(m=m.filter(function(y){return!y.match(/^access_token=/)})),m.length&&(h+="?"+m.join("&")),h},er.prototype.canonicalizeTileset=function(r,i){for(var s=!!i&&Mr(i),h=[],m=0,y=r.tiles||[];m<y.length;m+=1){var _=y[m];tr(_)?h.push(this.canonicalizeTileURL(_,s)):h.push(_)}return h},er.prototype._makeAPIURL=function(r,i){var s="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",h=zr(zt.API_URL);if(r.protocol=h.protocol,r.authority=h.authority,r.protocol==="http"){var m=r.params.indexOf("secure");m>=0&&r.params.splice(m,1)}if(h.path!=="/"&&(r.path=""+h.path+r.path),!zt.REQUIRE_ACCESS_TOKEN)return Sr(r);if(!(i=i||zt.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+s);if(i[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+s);return r.params=r.params.filter(function(y){return y.indexOf("access_token")===-1}),r.params.push("access_token="+i),Sr(r)};var Nr=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function tr(r){return Nr.test(r)}var Vr=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function zr(r){var i=r.match(Vr);if(!i)throw new Error("Unable to parse URL object");return{protocol:i[1],authority:i[2],path:i[3]||"/",params:i[4]?i[4].split("&"):[]}}function Sr(r){var i=r.params.length?"?"+r.params.join("&"):"";return r.protocol+"://"+r.authority+r.path+i}function on(r){if(!r)return null;var i=r.split(".");if(!i||i.length!==3)return null;try{return JSON.parse(decodeURIComponent(P.atob(i[1]).split("").map(function(s){return"%"+("00"+s.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch{return null}}var Ar=function(r){this.type=r,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Ar.prototype.getStorageKey=function(r){var i,s=on(zt.ACCESS_TOKEN);return i=s&&s.u?P.btoa(encodeURIComponent(s.u).replace(/%([0-9A-F]{2})/g,function(h,m){return String.fromCharCode(+("0x"+m))})):zt.ACCESS_TOKEN||"",r?"mapbox.eventData."+r+":"+i:"mapbox.eventData:"+i},Ar.prototype.fetchEventData=function(){var r=Je("localStorage"),i=this.getStorageKey(),s=this.getStorageKey("uuid");if(r)try{var h=P.localStorage.getItem(i);h&&(this.eventData=JSON.parse(h));var m=P.localStorage.getItem(s);m&&(this.anonId=m)}catch{ge("Unable to read from LocalStorage")}},Ar.prototype.saveEventData=function(){var r=Je("localStorage"),i=this.getStorageKey(),s=this.getStorageKey("uuid");if(r)try{P.localStorage.setItem(s,this.anonId),Object.keys(this.eventData).length>=1&&P.localStorage.setItem(i,JSON.stringify(this.eventData))}catch{ge("Unable to write to LocalStorage")}},Ar.prototype.processRequests=function(r){},Ar.prototype.postEvent=function(r,i,s,h){var m=this;if(zt.EVENTS_URL){var y=zr(zt.EVENTS_URL);y.params.push("access_token="+(h||zt.ACCESS_TOKEN||""));var _={event:this.type,created:new Date(r).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.3",skuId:Lt,userId:this.anonId},S=i?F(_,i):_,k={url:Sr(y),headers:{"Content-Type":"text/plain"},body:JSON.stringify([S])};this.pendingRequest=Ht(k,function(A){m.pendingRequest=null,s(A),m.saveEventData(),m.processRequests(h)})}},Ar.prototype.queueRequest=function(r,i){this.queue.push(r),this.processRequests(i)};var lr,Xr,Sn=function(r){function i(){r.call(this,"map.load"),this.success={},this.skuToken=""}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.postMapLoadEvent=function(s,h,m,y){this.skuToken=m;var _=!(!y&&!zt.ACCESS_TOKEN),S=Array.isArray(s)&&s.some(function(k){return Mr(k)||tr(k)});zt.EVENTS_URL&&_&&S&&this.queueRequest({id:h,timestamp:Date.now()},y)},i.prototype.processRequests=function(s){var h=this;if(!this.pendingRequest&&this.queue.length!==0){var m=this.queue.shift(),y=m.id,_=m.timestamp;y&&this.success[y]||(this.anonId||this.fetchEventData(),se(this.anonId)||(this.anonId=Q()),this.postEvent(_,{skuToken:this.skuToken},function(S){S||y&&(h.success[y]=!0)},s))}},i}(Ar),li=new(function(r){function i(s){r.call(this,"appUserTurnstile"),this._customAccessToken=s}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.postTurnstileEvent=function(s,h){zt.EVENTS_URL&&zt.ACCESS_TOKEN&&Array.isArray(s)&&s.some(function(m){return Mr(m)||tr(m)})&&this.queueRequest(Date.now(),h)},i.prototype.processRequests=function(s){var h=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var m=on(zt.ACCESS_TOKEN),y=m?m.u:zt.ACCESS_TOKEN,_=y!==this.eventData.tokenU;se(this.anonId)||(this.anonId=Q(),_=!0);var S=this.queue.shift();if(this.eventData.lastSuccess){var k=new Date(this.eventData.lastSuccess),A=new Date(S),z=(S-this.eventData.lastSuccess)/864e5;_=_||z>=1||z<-1||k.getDate()!==A.getDate()}else _=!0;if(!_)return this.processRequests();this.postEvent(S,{"enabled.telemetry":!1},function(D){D||(h.eventData.lastSuccess=S,h.eventData.tokenU=y)},s)}},i}(Ar)),hr=li.postTurnstileEvent.bind(li),Dt=new Sn,Wn=Dt.postMapLoadEvent.bind(Dt),Bn=500,Wi=50;function Bt(){P.caches&&!lr&&(lr=P.caches.open("mapbox-tiles"))}function br(r){var i=r.indexOf("?");return i<0?r:r.slice(0,i)}var ct,At=1/0;function yr(){return ct==null&&(ct=P.OffscreenCanvas&&new P.OffscreenCanvas(1,1).getContext("2d")&&typeof P.createImageBitmap=="function"),ct}var wr={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(wr);var rn=function(r){function i(s,h,m){h===401&&tr(m)&&(s+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),r.call(this,s),this.status=h,this.url=m,this.name=this.constructor.name,this.message=s}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},i}(Error),Me=Ce()?function(){return self.worker&&self.worker.referrer}:function(){return(P.location.protocol==="blob:"?P.parent:P).location.href},rt,bt,ar=function(r,i){if(!(/^file:/.test(s=r.url)||/^file:/.test(Me())&&!/^\w+:/.test(s))){if(P.fetch&&P.Request&&P.AbortController&&P.Request.prototype.hasOwnProperty("signal"))return function(h,m){var y,_=new P.AbortController,S=new P.Request(h.url,{method:h.method||"GET",body:h.body,credentials:h.credentials,headers:h.headers,referrer:Me(),signal:_.signal}),k=!1,A=!1,z=(y=S.url).indexOf("sku=")>0&&tr(y);h.type==="json"&&S.headers.set("Accept","application/json");var D=function(G,ae,le){if(!A){if(G&&G.message!=="SecurityError"&&ge(G),ae&&le)return $(ae);var be=Date.now();P.fetch(S).then(function(de){if(de.ok){var Ie=z?de.clone():null;return $(de,Ie,be)}return m(new rn(de.statusText,de.status,h.url))}).catch(function(de){de.code!==20&&m(new Error(de.message))})}},$=function(G,ae,le){(h.type==="arrayBuffer"?G.arrayBuffer():h.type==="json"?G.json():G.text()).then(function(be){A||(ae&&le&&function(de,Ie,Ae){if(Bt(),lr){var Le={status:Ie.status,statusText:Ie.statusText,headers:new P.Headers};Ie.headers.forEach(function(We,Ye){return Le.headers.set(Ye,We)});var Be=ke(Ie.headers.get("Cache-Control")||"");Be["no-store"]||(Be["max-age"]&&Le.headers.set("Expires",new Date(Ae+1e3*Be["max-age"]).toUTCString()),new Date(Le.headers.get("Expires")).getTime()-Ae<42e4||function(We,Ye){if(Xr===void 0)try{new Response(new ReadableStream),Xr=!0}catch{Xr=!1}Xr?Ye(We.body):We.blob().then(Ye)}(Ie,function(We){var Ye=new P.Response(We,Le);Bt(),lr&&lr.then(function(nt){return nt.put(br(de.url),Ye)}).catch(function(nt){return ge(nt.message)})}))}}(S,ae,le),k=!0,m(null,be,G.headers.get("Cache-Control"),G.headers.get("Expires")))}).catch(function(be){A||m(new Error(be.message))})};return z?function(G,ae){if(Bt(),!lr)return ae(null);var le=br(G.url);lr.then(function(be){be.match(le).then(function(de){var Ie=function(Ae){if(!Ae)return!1;var Le=new Date(Ae.headers.get("Expires")||0),Be=ke(Ae.headers.get("Cache-Control")||"");return Le>Date.now()&&!Be["no-cache"]}(de);be.delete(le),Ie&&be.put(le,de.clone()),ae(null,de,Ie)}).catch(ae)}).catch(ae)}(S,D):D(null,null),{cancel:function(){A=!0,k||_.abort()}}}(r,i);if(Ce()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",r,i,void 0,!0)}var s;return function(h,m){var y=new P.XMLHttpRequest;for(var _ in y.open(h.method||"GET",h.url,!0),h.type==="arrayBuffer"&&(y.responseType="arraybuffer"),h.headers)y.setRequestHeader(_,h.headers[_]);return h.type==="json"&&(y.responseType="text",y.setRequestHeader("Accept","application/json")),y.withCredentials=h.credentials==="include",y.onerror=function(){m(new Error(y.statusText))},y.onload=function(){if((y.status>=200&&y.status<300||y.status===0)&&y.response!==null){var S=y.response;if(h.type==="json")try{S=JSON.parse(y.response)}catch(k){return m(k)}m(null,S,y.getResponseHeader("Cache-Control"),y.getResponseHeader("Expires"))}else m(new rn(y.statusText,y.status,h.url))},y.send(h.body),{cancel:function(){return y.abort()}}}(r,i)},Rr=function(r,i){return ar(F(r,{type:"arrayBuffer"}),i)},Ht=function(r,i){return ar(F(r,{method:"POST"}),i)},L="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";rt=[],bt=0;var j=function(r,i){if(nr.supported&&(r.headers||(r.headers={}),r.headers.accept="image/webp,*/*"),bt>=zt.MAX_PARALLEL_IMAGE_REQUESTS){var s={requestParameters:r,callback:i,cancelled:!1,cancel:function(){this.cancelled=!0}};return rt.push(s),s}bt++;var h=!1,m=function(){if(!h)for(h=!0,bt--;rt.length&&bt<zt.MAX_PARALLEL_IMAGE_REQUESTS;){var _=rt.shift();_.cancelled||(_.cancel=j(_.requestParameters,_.callback).cancel)}},y=Rr(r,function(_,S,k,A){m(),_?i(_):S&&(yr()?function(z,D){var $=new P.Blob([new Uint8Array(z)],{type:"image/png"});P.createImageBitmap($).then(function(G){D(null,G)}).catch(function(G){D(new Error("Could not load image because of "+G.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(S,i):function(z,D,$,G){var ae=new P.Image,le=P.URL;ae.onload=function(){D(null,ae),le.revokeObjectURL(ae.src),ae.onload=null,P.requestAnimationFrame(function(){ae.src=L})},ae.onerror=function(){return D(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var be=new P.Blob([new Uint8Array(z)],{type:"image/png"});ae.cacheControl=$,ae.expires=G,ae.src=z.byteLength?le.createObjectURL(be):L}(S,i,k,A))});return{cancel:function(){y.cancel(),m()}}};function W(r,i,s){s[r]&&s[r].indexOf(i)!==-1||(s[r]=s[r]||[],s[r].push(i))}function X(r,i,s){if(s&&s[r]){var h=s[r].indexOf(i);h!==-1&&s[r].splice(h,1)}}var re=function(r,i){i===void 0&&(i={}),F(this,i),this.type=r},me=function(r){function i(s,h){h===void 0&&(h={}),r.call(this,"error",F({error:s},h))}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i}(re),ye=function(){};ye.prototype.on=function(r,i){return this._listeners=this._listeners||{},W(r,i,this._listeners),this},ye.prototype.off=function(r,i){return X(r,i,this._listeners),X(r,i,this._oneTimeListeners),this},ye.prototype.once=function(r,i){return this._oneTimeListeners=this._oneTimeListeners||{},W(r,i,this._oneTimeListeners),this},ye.prototype.fire=function(r,i){typeof r=="string"&&(r=new re(r,i||{}));var s=r.type;if(this.listens(s)){r.target=this;for(var h=0,m=this._listeners&&this._listeners[s]?this._listeners[s].slice():[];h<m.length;h+=1)m[h].call(this,r);for(var y=0,_=this._oneTimeListeners&&this._oneTimeListeners[s]?this._oneTimeListeners[s].slice():[];y<_.length;y+=1){var S=_[y];X(s,S,this._oneTimeListeners),S.call(this,r)}var k=this._eventedParent;k&&(F(r,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),k.fire(r))}else r instanceof me&&console.error(r.error);return this},ye.prototype.listens=function(r){return this._listeners&&this._listeners[r]&&this._listeners[r].length>0||this._oneTimeListeners&&this._oneTimeListeners[r]&&this._oneTimeListeners[r].length>0||this._eventedParent&&this._eventedParent.listens(r)},ye.prototype.setEventedParent=function(r,i){return this._eventedParent=r,this._eventedParentData=i,this};var H={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},ne=function(r,i,s,h){this.message=(r?r+": ":"")+s,h&&(this.identifier=h),i!=null&&i.__line__&&(this.line=i.__line__)};function Ee(r){var i=r.value;return i?[new ne(r.key,i,"constants have been deprecated as of v8")]:[]}function Ge(r){for(var i=[],s=arguments.length-1;s-- >0;)i[s]=arguments[s+1];for(var h=0,m=i;h<m.length;h+=1){var y=m[h];for(var _ in y)r[_]=y[_]}return r}function Ze(r){return r instanceof Number||r instanceof String||r instanceof Boolean?r.valueOf():r}function Ue(r){if(Array.isArray(r))return r.map(Ue);if(r instanceof Object&&!(r instanceof Number||r instanceof String||r instanceof Boolean)){var i={};for(var s in r)i[s]=Ue(r[s]);return i}return Ze(r)}var Xe=function(r){function i(s,h){r.call(this,h),this.message=h,this.key=s}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i}(Error),vt=function(r,i){i===void 0&&(i=[]),this.parent=r,this.bindings={};for(var s=0,h=i;s<h.length;s+=1){var m=h[s];this.bindings[m[0]]=m[1]}};vt.prototype.concat=function(r){return new vt(this,r)},vt.prototype.get=function(r){if(this.bindings[r])return this.bindings[r];if(this.parent)return this.parent.get(r);throw new Error(r+" not found in scope.")},vt.prototype.has=function(r){return!!this.bindings[r]||!!this.parent&&this.parent.has(r)};var yt={kind:"null"},Ve={kind:"number"},dt={kind:"string"},it={kind:"boolean"},at={kind:"color"},or={kind:"object"},pt={kind:"value"},fr={kind:"collator"},Gr={kind:"formatted"},ur={kind:"resolvedImage"};function Tr(r,i){return{kind:"array",itemType:r,N:i}}function gr(r){if(r.kind==="array"){var i=gr(r.itemType);return typeof r.N=="number"?"array<"+i+", "+r.N+">":r.itemType.kind==="value"?"array":"array<"+i+">"}return r.kind}var bi=[yt,Ve,dt,it,at,Gr,or,Tr(pt),ur];function Lr(r,i){if(i.kind==="error")return null;if(r.kind==="array"){if(i.kind==="array"&&(i.N===0&&i.itemType.kind==="value"||!Lr(r.itemType,i.itemType))&&(typeof r.N!="number"||r.N===i.N))return null}else{if(r.kind===i.kind)return null;if(r.kind==="value"){for(var s=0,h=bi;s<h.length;s+=1)if(!Lr(h[s],i))return null}}return"Expected "+gr(r)+" but found "+gr(i)+" instead."}function En(r,i){return i.some(function(s){return s.kind===r.kind})}function qr(r,i){return i.some(function(s){return s==="null"?r===null:s==="array"?Array.isArray(r):s==="object"?r&&!Array.isArray(r)&&typeof r=="object":s===typeof r})}var dr=v(function(r,i){var s={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function h(S){return(S=Math.round(S))<0?0:S>255?255:S}function m(S){return h(S[S.length-1]==="%"?parseFloat(S)/100*255:parseInt(S))}function y(S){return(k=S[S.length-1]==="%"?parseFloat(S)/100:parseFloat(S))<0?0:k>1?1:k;var k}function _(S,k,A){return A<0?A+=1:A>1&&(A-=1),6*A<1?S+(k-S)*A*6:2*A<1?k:3*A<2?S+(k-S)*(2/3-A)*6:S}try{i.parseCSSColor=function(S){var k,A=S.replace(/ /g,"").toLowerCase();if(A in s)return s[A].slice();if(A[0]==="#")return A.length===4?(k=parseInt(A.substr(1),16))>=0&&k<=4095?[(3840&k)>>4|(3840&k)>>8,240&k|(240&k)>>4,15&k|(15&k)<<4,1]:null:A.length===7&&(k=parseInt(A.substr(1),16))>=0&&k<=16777215?[(16711680&k)>>16,(65280&k)>>8,255&k,1]:null;var z=A.indexOf("("),D=A.indexOf(")");if(z!==-1&&D+1===A.length){var $=A.substr(0,z),G=A.substr(z+1,D-(z+1)).split(","),ae=1;switch($){case"rgba":if(G.length!==4)return null;ae=y(G.pop());case"rgb":return G.length!==3?null:[m(G[0]),m(G[1]),m(G[2]),ae];case"hsla":if(G.length!==4)return null;ae=y(G.pop());case"hsl":if(G.length!==3)return null;var le=(parseFloat(G[0])%360+360)%360/360,be=y(G[1]),de=y(G[2]),Ie=de<=.5?de*(be+1):de+be-de*be,Ae=2*de-Ie;return[h(255*_(Ae,Ie,le+1/3)),h(255*_(Ae,Ie,le)),h(255*_(Ae,Ie,le-1/3)),ae];default:return null}}return null}}catch{}}).parseCSSColor,Ir=function(r,i,s,h){h===void 0&&(h=1),this.r=r,this.g=i,this.b=s,this.a=h};Ir.parse=function(r){if(r){if(r instanceof Ir)return r;if(typeof r=="string"){var i=dr(r);if(i)return new Ir(i[0]/255*i[3],i[1]/255*i[3],i[2]/255*i[3],i[3])}}},Ir.prototype.toString=function(){var r=this.toArray(),i=r[1],s=r[2],h=r[3];return"rgba("+Math.round(r[0])+","+Math.round(i)+","+Math.round(s)+","+h+")"},Ir.prototype.toArray=function(){var r=this.a;return r===0?[0,0,0,0]:[255*this.r/r,255*this.g/r,255*this.b/r,r]},Ir.black=new Ir(0,0,0,1),Ir.white=new Ir(1,1,1,1),Ir.transparent=new Ir(0,0,0,0),Ir.red=new Ir(1,0,0,1);var Ri=function(r,i,s){this.sensitivity=r?i?"variant":"case":i?"accent":"base",this.locale=s,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Ri.prototype.compare=function(r,i){return this.collator.compare(r,i)},Ri.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var ou=function(r,i,s,h,m){this.text=r,this.image=i,this.scale=s,this.fontStack=h,this.textColor=m},Qn=function(r){this.sections=r};Qn.fromString=function(r){return new Qn([new ou(r,null,null,null,null)])},Qn.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(r){return r.text.length!==0||r.image&&r.image.name.length!==0})},Qn.factory=function(r){return r instanceof Qn?r:Qn.fromString(r)},Qn.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(r){return r.text}).join("")},Qn.prototype.serialize=function(){for(var r=["format"],i=0,s=this.sections;i<s.length;i+=1){var h=s[i];if(h.image)r.push(["image",h.image.name]);else{r.push(h.text);var m={};h.fontStack&&(m["text-font"]=["literal",h.fontStack.split(",")]),h.scale&&(m["font-scale"]=h.scale),h.textColor&&(m["text-color"]=["rgba"].concat(h.textColor.toArray())),r.push(m)}}return r};var Li=function(r){this.name=r.name,this.available=r.available};function hh(r,i,s,h){return typeof r=="number"&&r>=0&&r<=255&&typeof i=="number"&&i>=0&&i<=255&&typeof s=="number"&&s>=0&&s<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:"Invalid rgba value ["+[r,i,s,h].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof h=="number"?[r,i,s,h]:[r,i,s]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function au(r){if(r===null||typeof r=="string"||typeof r=="boolean"||typeof r=="number"||r instanceof Ir||r instanceof Ri||r instanceof Qn||r instanceof Li)return!0;if(Array.isArray(r)){for(var i=0,s=r;i<s.length;i+=1)if(!au(s[i]))return!1;return!0}if(typeof r=="object"){for(var h in r)if(!au(r[h]))return!1;return!0}return!1}function Cn(r){if(r===null)return yt;if(typeof r=="string")return dt;if(typeof r=="boolean")return it;if(typeof r=="number")return Ve;if(r instanceof Ir)return at;if(r instanceof Ri)return fr;if(r instanceof Qn)return Gr;if(r instanceof Li)return ur;if(Array.isArray(r)){for(var i,s=r.length,h=0,m=r;h<m.length;h+=1){var y=Cn(m[h]);if(i){if(i===y)continue;i=pt;break}i=y}return Tr(i||pt,s)}return or}function su(r){var i=typeof r;return r===null?"":i==="string"||i==="number"||i==="boolean"?String(r):r instanceof Ir||r instanceof Qn||r instanceof Li?r.toString():JSON.stringify(r)}Li.prototype.toString=function(){return this.name},Li.fromString=function(r){return r?new Li({name:r,available:!1}):null},Li.prototype.serialize=function(){return["image",this.name]};var wi=function(r,i){this.type=r,this.value=i};wi.parse=function(r,i){if(r.length!==2)return i.error("'literal' expression requires exactly one argument, but found "+(r.length-1)+" instead.");if(!au(r[1]))return i.error("invalid value");var s=r[1],h=Cn(s),m=i.expectedType;return h.kind!=="array"||h.N!==0||!m||m.kind!=="array"||typeof m.N=="number"&&m.N!==0||(h=m),new wi(h,s)},wi.prototype.evaluate=function(){return this.value},wi.prototype.eachChild=function(){},wi.prototype.outputDefined=function(){return!0},wi.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Ir?["rgba"].concat(this.value.toArray()):this.value instanceof Qn?this.value.serialize():this.value};var ei=function(r){this.name="ExpressionEvaluationError",this.message=r};ei.prototype.toJSON=function(){return this.message};var go={string:dt,number:Ve,boolean:it,object:or},an=function(r,i){this.type=r,this.args=i};an.parse=function(r,i){if(r.length<2)return i.error("Expected at least one argument.");var s,h=1,m=r[0];if(m==="array"){var y,_;if(r.length>2){var S=r[1];if(typeof S!="string"||!(S in go)||S==="object")return i.error('The item type argument of "array" must be one of string, number, boolean',1);y=go[S],h++}else y=pt;if(r.length>3){if(r[2]!==null&&(typeof r[2]!="number"||r[2]<0||r[2]!==Math.floor(r[2])))return i.error('The length argument to "array" must be a positive integer literal',2);_=r[2],h++}s=Tr(y,_)}else s=go[m];for(var k=[];h<r.length;h++){var A=i.parse(r[h],h,pt);if(!A)return null;k.push(A)}return new an(s,k)},an.prototype.evaluate=function(r){for(var i=0;i<this.args.length;i++){var s=this.args[i].evaluate(r);if(!Lr(this.type,Cn(s)))return s;if(i===this.args.length-1)throw new ei("Expected value to be of type "+gr(this.type)+", but found "+gr(Cn(s))+" instead.")}return null},an.prototype.eachChild=function(r){this.args.forEach(r)},an.prototype.outputDefined=function(){return this.args.every(function(r){return r.outputDefined()})},an.prototype.serialize=function(){var r=this.type,i=[r.kind];if(r.kind==="array"){var s=r.itemType;if(s.kind==="string"||s.kind==="number"||s.kind==="boolean"){i.push(s.kind);var h=r.N;(typeof h=="number"||this.args.length>1)&&i.push(h)}}return i.concat(this.args.map(function(m){return m.serialize()}))};var No=function(r){this.type=Gr,this.sections=r};No.parse=function(r,i){if(r.length<2)return i.error("Expected at least one argument.");var s=r[1];if(!Array.isArray(s)&&typeof s=="object")return i.error("First argument must be an image or text section.");for(var h=[],m=!1,y=1;y<=r.length-1;++y){var _=r[y];if(m&&typeof _=="object"&&!Array.isArray(_)){m=!1;var S=null;if(_["font-scale"]&&!(S=i.parse(_["font-scale"],1,Ve)))return null;var k=null;if(_["text-font"]&&!(k=i.parse(_["text-font"],1,Tr(dt))))return null;var A=null;if(_["text-color"]&&!(A=i.parse(_["text-color"],1,at)))return null;var z=h[h.length-1];z.scale=S,z.font=k,z.textColor=A}else{var D=i.parse(r[y],1,pt);if(!D)return null;var $=D.type.kind;if($!=="string"&&$!=="value"&&$!=="null"&&$!=="resolvedImage")return i.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");m=!0,h.push({content:D,scale:null,font:null,textColor:null})}}return new No(h)},No.prototype.evaluate=function(r){return new Qn(this.sections.map(function(i){var s=i.content.evaluate(r);return Cn(s)===ur?new ou("",s,null,null,null):new ou(su(s),null,i.scale?i.scale.evaluate(r):null,i.font?i.font.evaluate(r).join(","):null,i.textColor?i.textColor.evaluate(r):null)}))},No.prototype.eachChild=function(r){for(var i=0,s=this.sections;i<s.length;i+=1){var h=s[i];r(h.content),h.scale&&r(h.scale),h.font&&r(h.font),h.textColor&&r(h.textColor)}},No.prototype.outputDefined=function(){return!1},No.prototype.serialize=function(){for(var r=["format"],i=0,s=this.sections;i<s.length;i+=1){var h=s[i];r.push(h.content.serialize());var m={};h.scale&&(m["font-scale"]=h.scale.serialize()),h.font&&(m["text-font"]=h.font.serialize()),h.textColor&&(m["text-color"]=h.textColor.serialize()),r.push(m)}return r};var ao=function(r){this.type=ur,this.input=r};ao.parse=function(r,i){if(r.length!==2)return i.error("Expected two arguments.");var s=i.parse(r[1],1,dt);return s?new ao(s):i.error("No image name provided.")},ao.prototype.evaluate=function(r){var i=this.input.evaluate(r),s=Li.fromString(i);return s&&r.availableImages&&(s.available=r.availableImages.indexOf(i)>-1),s},ao.prototype.eachChild=function(r){r(this.input)},ao.prototype.outputDefined=function(){return!1},ao.prototype.serialize=function(){return["image",this.input.serialize()]};var zf={"to-boolean":it,"to-color":at,"to-number":Ve,"to-string":dt},vo=function(r,i){this.type=r,this.args=i};vo.parse=function(r,i){if(r.length<2)return i.error("Expected at least one argument.");var s=r[0];if((s==="to-boolean"||s==="to-string")&&r.length!==2)return i.error("Expected one argument.");for(var h=zf[s],m=[],y=1;y<r.length;y++){var _=i.parse(r[y],y,pt);if(!_)return null;m.push(_)}return new vo(h,m)},vo.prototype.evaluate=function(r){if(this.type.kind==="boolean")return!!this.args[0].evaluate(r);if(this.type.kind==="color"){for(var i,s,h=0,m=this.args;h<m.length;h+=1){if(s=null,(i=m[h].evaluate(r))instanceof Ir)return i;if(typeof i=="string"){var y=r.parseColor(i);if(y)return y}else if(Array.isArray(i)&&!(s=i.length<3||i.length>4?"Invalid rbga value "+JSON.stringify(i)+": expected an array containing either three or four numeric values.":hh(i[0],i[1],i[2],i[3])))return new Ir(i[0]/255,i[1]/255,i[2]/255,i[3])}throw new ei(s||"Could not parse color from value '"+(typeof i=="string"?i:String(JSON.stringify(i)))+"'")}if(this.type.kind==="number"){for(var _=null,S=0,k=this.args;S<k.length;S+=1){if((_=k[S].evaluate(r))===null)return 0;var A=Number(_);if(!isNaN(A))return A}throw new ei("Could not convert "+JSON.stringify(_)+" to number.")}return this.type.kind==="formatted"?Qn.fromString(su(this.args[0].evaluate(r))):this.type.kind==="resolvedImage"?Li.fromString(su(this.args[0].evaluate(r))):su(this.args[0].evaluate(r))},vo.prototype.eachChild=function(r){this.args.forEach(r)},vo.prototype.outputDefined=function(){return this.args.every(function(r){return r.outputDefined()})},vo.prototype.serialize=function(){if(this.type.kind==="formatted")return new No([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new ao(this.args[0]).serialize();var r=["to-"+this.type.kind];return this.eachChild(function(i){r.push(i.serialize())}),r};var Xv=["Unknown","Point","LineString","Polygon"],ba=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};ba.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},ba.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?Xv[this.feature.type]:this.feature.type:null},ba.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},ba.prototype.canonicalID=function(){return this.canonical},ba.prototype.properties=function(){return this.feature&&this.feature.properties||{}},ba.prototype.parseColor=function(r){var i=this._parseColorCache[r];return i||(i=this._parseColorCache[r]=Ir.parse(r)),i};var ui=function(r,i,s,h){this.name=r,this.type=i,this._evaluate=s,this.args=h};ui.prototype.evaluate=function(r){return this._evaluate(r,this.args)},ui.prototype.eachChild=function(r){this.args.forEach(r)},ui.prototype.outputDefined=function(){return!1},ui.prototype.serialize=function(){return[this.name].concat(this.args.map(function(r){return r.serialize()}))},ui.parse=function(r,i){var s,h=r[0],m=ui.definitions[h];if(!m)return i.error('Unknown expression "'+h+'". If you wanted a literal array, use ["literal", [...]].',0);for(var y=Array.isArray(m)?m[0]:m.type,_=Array.isArray(m)?[[m[1],m[2]]]:m.overloads,S=_.filter(function(Ct){var ht=Ct[0];return!Array.isArray(ht)||ht.length===r.length-1}),k=null,A=0,z=S;A<z.length;A+=1){var D=z[A],$=D[0],G=D[1];k=new qa(i.registry,i.path,null,i.scope);for(var ae=[],le=!1,be=1;be<r.length;be++){var de=r[be],Ie=Array.isArray($)?$[be-1]:$.type,Ae=k.parse(de,1+ae.length,Ie);if(!Ae){le=!0;break}ae.push(Ae)}if(!le)if(Array.isArray($)&&$.length!==ae.length)k.error("Expected "+$.length+" arguments, but found "+ae.length+" instead.");else{for(var Le=0;Le<ae.length;Le++){var Be=Array.isArray($)?$[Le]:$.type,We=ae[Le];k.concat(Le+1).checkSubtype(Be,We.type)}if(k.errors.length===0)return new ui(h,y,G,ae)}}if(S.length===1)(s=i.errors).push.apply(s,k.errors);else{for(var Ye=(S.length?S:_).map(function(Ct){var ht;return ht=Ct[0],Array.isArray(ht)?"("+ht.map(gr).join(", ")+")":"("+gr(ht.type)+"...)"}).join(" | "),nt=[],wt=1;wt<r.length;wt++){var ut=i.parse(r[wt],1+nt.length);if(!ut)return null;nt.push(gr(ut.type))}i.error("Expected arguments of type "+Ye+", but found ("+nt.join(", ")+") instead.")}return null},ui.register=function(r,i){for(var s in ui.definitions=i,i)r[s]=ui};var ia=function(r,i,s){this.type=fr,this.locale=s,this.caseSensitive=r,this.diacriticSensitive=i};function Si(r,i){r[0]=Math.min(r[0],i[0]),r[1]=Math.min(r[1],i[1]),r[2]=Math.max(r[2],i[0]),r[3]=Math.max(r[3],i[1])}function Es(r,i){return!(r[0]<=i[0]||r[2]>=i[2]||r[1]<=i[1]||r[3]>=i[3])}function Yv(r,i){var s=(180+r[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r[1]*Math.PI/360)))/360,m=Math.pow(2,i.z);return[Math.round(s*m*8192),Math.round(h*m*8192)]}function Jv(r,i,s){return i[1]>r[1]!=s[1]>r[1]&&r[0]<(s[0]-i[0])*(r[1]-i[1])/(s[1]-i[1])+i[0]}function dh(r,i){for(var s,h,m,y,_,S,k,A=!1,z=0,D=i.length;z<D;z++)for(var $=i[z],G=0,ae=$.length;G<ae-1;G++){if((y=(s=r)[0]-(h=$[G])[0])*(k=s[1]-(m=$[G+1])[1])-(S=s[0]-m[0])*(_=s[1]-h[1])==0&&y*S<=0&&_*k<=0)return!1;Jv(r,$[G],$[G+1])&&(A=!A)}return A}function Qv(r,i){for(var s=0;s<i.length;s++)if(dh(r,i[s]))return!0;return!1}function Rf(r,i,s,h){var m=h[0]-s[0],y=h[1]-s[1],_=(r[0]-s[0])*y-m*(r[1]-s[1]),S=(i[0]-s[0])*y-m*(i[1]-s[1]);return _>0&&S<0||_<0&&S>0}function e0(r,i,s){for(var h=0,m=s;h<m.length;h+=1)for(var y=m[h],_=0;_<y.length-1;++_)if((D=[(z=y[_+1])[0]-(A=y[_])[0],z[1]-A[1]])[0]*($=[(k=i)[0]-(S=r)[0],k[1]-S[1]])[1]-D[1]*$[0]!=0&&Rf(S,k,A,z)&&Rf(A,z,S,k))return!0;var S,k,A,z,D,$;return!1}function Lf(r,i){for(var s=0;s<r.length;++s)if(!dh(r[s],i))return!1;for(var h=0;h<r.length-1;++h)if(e0(r[h],r[h+1],i))return!1;return!0}function Df(r,i){for(var s=0;s<i.length;s++)if(Lf(r,i[s]))return!0;return!1}function dl(r,i,s){for(var h=[],m=0;m<r.length;m++){for(var y=[],_=0;_<r[m].length;_++){var S=Yv(r[m][_],s);Si(i,S),y.push(S)}h.push(y)}return h}function fh(r,i,s){for(var h=[],m=0;m<r.length;m++){var y=dl(r[m],i,s);h.push(y)}return h}function lu(r,i,s,h){if(r[0]<s[0]||r[0]>s[2]){var m=.5*h,y=r[0]-s[0]>m?-h:s[0]-r[0]>m?h:0;y===0&&(y=r[0]-s[2]>m?-h:s[2]-r[0]>m?h:0),r[0]+=y}Si(i,r)}function Of(r,i,s,h){for(var m=8192*Math.pow(2,h.z),y=[8192*h.x,8192*h.y],_=[],S=0,k=r;S<k.length;S+=1)for(var A=0,z=k[S];A<z.length;A+=1){var D=z[A],$=[D.x+y[0],D.y+y[1]];lu($,i,s,m),_.push($)}return _}function cc(r,i,s,h){for(var m,y=8192*Math.pow(2,h.z),_=[8192*h.x,8192*h.y],S=[],k=0,A=r;k<A.length;k+=1){for(var z=[],D=0,$=A[k];D<$.length;D+=1){var G=$[D],ae=[G.x+_[0],G.y+_[1]];Si(i,ae),z.push(ae)}S.push(z)}if(i[2]-i[0]<=y/2){(m=i)[0]=m[1]=1/0,m[2]=m[3]=-1/0;for(var le=0,be=S;le<be.length;le+=1)for(var de=0,Ie=be[le];de<Ie.length;de+=1)lu(Ie[de],i,s,y)}return S}ia.parse=function(r,i){if(r.length!==2)return i.error("Expected one argument.");var s=r[1];if(typeof s!="object"||Array.isArray(s))return i.error("Collator options argument must be an object.");var h=i.parse(s["case-sensitive"]!==void 0&&s["case-sensitive"],1,it);if(!h)return null;var m=i.parse(s["diacritic-sensitive"]!==void 0&&s["diacritic-sensitive"],1,it);if(!m)return null;var y=null;return s.locale&&!(y=i.parse(s.locale,1,dt))?null:new ia(h,m,y)},ia.prototype.evaluate=function(r){return new Ri(this.caseSensitive.evaluate(r),this.diacriticSensitive.evaluate(r),this.locale?this.locale.evaluate(r):null)},ia.prototype.eachChild=function(r){r(this.caseSensitive),r(this.diacriticSensitive),this.locale&&r(this.locale)},ia.prototype.outputDefined=function(){return!1},ia.prototype.serialize=function(){var r={};return r["case-sensitive"]=this.caseSensitive.serialize(),r["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(r.locale=this.locale.serialize()),["collator",r]};var _o=function(r,i){this.type=it,this.geojson=r,this.geometries=i};function Ua(r){if(r instanceof ui&&(r.name==="get"&&r.args.length===1||r.name==="feature-state"||r.name==="has"&&r.args.length===1||r.name==="properties"||r.name==="geometry-type"||r.name==="id"||/^filter-/.test(r.name))||r instanceof _o)return!1;var i=!0;return r.eachChild(function(s){i&&!Ua(s)&&(i=!1)}),i}function $a(r){if(r instanceof ui&&r.name==="feature-state")return!1;var i=!0;return r.eachChild(function(s){i&&!$a(s)&&(i=!1)}),i}function Cs(r,i){if(r instanceof ui&&i.indexOf(r.name)>=0)return!1;var s=!0;return r.eachChild(function(h){s&&!Cs(h,i)&&(s=!1)}),s}_o.parse=function(r,i){if(r.length!==2)return i.error("'within' expression requires exactly one argument, but found "+(r.length-1)+" instead.");if(au(r[1])){var s=r[1];if(s.type==="FeatureCollection")for(var h=0;h<s.features.length;++h){var m=s.features[h].geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new _o(s,s.features[h].geometry)}else if(s.type==="Feature"){var y=s.geometry.type;if(y==="Polygon"||y==="MultiPolygon")return new _o(s,s.geometry)}else if(s.type==="Polygon"||s.type==="MultiPolygon")return new _o(s,s)}return i.error("'within' expression requires valid geojson object that contains polygon geometry type.")},_o.prototype.evaluate=function(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(i,s){var h=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],y=i.canonicalID();if(s.type==="Polygon"){var _=dl(s.coordinates,m,y),S=Of(i.geometry(),h,m,y);if(!Es(h,m))return!1;for(var k=0,A=S;k<A.length;k+=1)if(!dh(A[k],_))return!1}if(s.type==="MultiPolygon"){var z=fh(s.coordinates,m,y),D=Of(i.geometry(),h,m,y);if(!Es(h,m))return!1;for(var $=0,G=D;$<G.length;$+=1)if(!Qv(G[$],z))return!1}return!0}(r,this.geometries);if(r.geometryType()==="LineString")return function(i,s){var h=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],y=i.canonicalID();if(s.type==="Polygon"){var _=dl(s.coordinates,m,y),S=cc(i.geometry(),h,m,y);if(!Es(h,m))return!1;for(var k=0,A=S;k<A.length;k+=1)if(!Lf(A[k],_))return!1}if(s.type==="MultiPolygon"){var z=fh(s.coordinates,m,y),D=cc(i.geometry(),h,m,y);if(!Es(h,m))return!1;for(var $=0,G=D;$<G.length;$+=1)if(!Df(G[$],z))return!1}return!0}(r,this.geometries)}return!1},_o.prototype.eachChild=function(){},_o.prototype.outputDefined=function(){return!0},_o.prototype.serialize=function(){return["within",this.geojson]};var Va=function(r,i){this.type=i.type,this.name=r,this.boundExpression=i};Va.parse=function(r,i){if(r.length!==2||typeof r[1]!="string")return i.error("'var' expression requires exactly one string literal argument.");var s=r[1];return i.scope.has(s)?new Va(s,i.scope.get(s)):i.error('Unknown variable "'+s+'". Make sure "'+s+'" has been bound in an enclosing "let" expression before using it.',1)},Va.prototype.evaluate=function(r){return this.boundExpression.evaluate(r)},Va.prototype.eachChild=function(){},Va.prototype.outputDefined=function(){return!1},Va.prototype.serialize=function(){return["var",this.name]};var qa=function(r,i,s,h,m){i===void 0&&(i=[]),h===void 0&&(h=new vt),m===void 0&&(m=[]),this.registry=r,this.path=i,this.key=i.map(function(y){return"["+y+"]"}).join(""),this.scope=h,this.errors=m,this.expectedType=s};function pc(r,i){for(var s,h=r.length-1,m=0,y=h,_=0;m<=y;)if((s=r[_=Math.floor((m+y)/2)])<=i){if(_===h||i<r[_+1])return _;m=_+1}else{if(!(s>i))throw new ei("Input is not a number.");y=_-1}return 0}qa.prototype.parse=function(r,i,s,h,m){return m===void 0&&(m={}),i?this.concat(i,s,h)._parse(r,m):this._parse(r,m)},qa.prototype._parse=function(r,i){function s(A,z,D){return D==="assert"?new an(z,[A]):D==="coerce"?new vo(z,[A]):A}if(r!==null&&typeof r!="string"&&typeof r!="boolean"&&typeof r!="number"||(r=["literal",r]),Array.isArray(r)){if(r.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var h=r[0];if(typeof h!="string")return this.error("Expression name must be a string, but found "+typeof h+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var m=this.registry[h];if(m){var y=m.parse(r,this);if(!y)return null;if(this.expectedType){var _=this.expectedType,S=y.type;if(_.kind!=="string"&&_.kind!=="number"&&_.kind!=="boolean"&&_.kind!=="object"&&_.kind!=="array"||S.kind!=="value")if(_.kind!=="color"&&_.kind!=="formatted"&&_.kind!=="resolvedImage"||S.kind!=="value"&&S.kind!=="string"){if(this.checkSubtype(_,S))return null}else y=s(y,_,i.typeAnnotation||"coerce");else y=s(y,_,i.typeAnnotation||"assert")}if(!(y instanceof wi)&&y.type.kind!=="resolvedImage"&&function A(z){if(z instanceof Va)return A(z.boundExpression);if(z instanceof ui&&z.name==="error"||z instanceof ia||z instanceof _o)return!1;var D=z instanceof vo||z instanceof an,$=!0;return z.eachChild(function(G){$=D?$&&A(G):$&&G instanceof wi}),!!$&&Ua(z)&&Cs(z,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(y)){var k=new ba;try{y=new wi(y.type,y.evaluate(k))}catch(A){return this.error(A.message),null}}return y}return this.error('Unknown expression "'+h+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(r===void 0?"'undefined' value invalid. Use null instead.":typeof r=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof r+" instead.")},qa.prototype.concat=function(r,i,s){var h=typeof r=="number"?this.path.concat(r):this.path,m=s?this.scope.concat(s):this.scope;return new qa(this.registry,h,i||null,m,this.errors)},qa.prototype.error=function(r){for(var i=[],s=arguments.length-1;s-- >0;)i[s]=arguments[s+1];var h=""+this.key+i.map(function(m){return"["+m+"]"}).join("");this.errors.push(new Xe(h,r))},qa.prototype.checkSubtype=function(r,i){var s=Lr(r,i);return s&&this.error(s),s};var Gi=function(r,i,s){this.type=r,this.input=i,this.labels=[],this.outputs=[];for(var h=0,m=s;h<m.length;h+=1){var y=m[h],_=y[1];this.labels.push(y[0]),this.outputs.push(_)}};function zn(r,i,s){return r*(1-s)+i*s}Gi.parse=function(r,i){if(r.length-1<4)return i.error("Expected at least 4 arguments, but found only "+(r.length-1)+".");if((r.length-1)%2!=0)return i.error("Expected an even number of arguments.");var s=i.parse(r[1],1,Ve);if(!s)return null;var h=[],m=null;i.expectedType&&i.expectedType.kind!=="value"&&(m=i.expectedType);for(var y=1;y<r.length;y+=2){var _=y===1?-1/0:r[y],S=r[y+1],k=y,A=y+1;if(typeof _!="number")return i.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',k);if(h.length&&h[h.length-1][0]>=_)return i.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',k);var z=i.parse(S,A,m);if(!z)return null;m=m||z.type,h.push([_,z])}return new Gi(m,s,h)},Gi.prototype.evaluate=function(r){var i=this.labels,s=this.outputs;if(i.length===1)return s[0].evaluate(r);var h=this.input.evaluate(r);if(h<=i[0])return s[0].evaluate(r);var m=i.length;return h>=i[m-1]?s[m-1].evaluate(r):s[pc(i,h)].evaluate(r)},Gi.prototype.eachChild=function(r){r(this.input);for(var i=0,s=this.outputs;i<s.length;i+=1)r(s[i])},Gi.prototype.outputDefined=function(){return this.outputs.every(function(r){return r.outputDefined()})},Gi.prototype.serialize=function(){for(var r=["step",this.input.serialize()],i=0;i<this.labels.length;i++)i>0&&r.push(this.labels[i]),r.push(this.outputs[i].serialize());return r};var fl=Object.freeze({__proto__:null,number:zn,color:function(r,i,s){return new Ir(zn(r.r,i.r,s),zn(r.g,i.g,s),zn(r.b,i.b,s),zn(r.a,i.a,s))},array:function(r,i,s){return r.map(function(h,m){return zn(h,i[m],s)})}}),Bf=6/29*3*(6/29),t0=Math.PI/180,r0=180/Math.PI;function mh(r){return r>.008856451679035631?Math.pow(r,1/3):r/Bf+4/29}function yh(r){return r>6/29?r*r*r:Bf*(r-4/29)}function gh(r){return 255*(r<=.0031308?12.92*r:1.055*Math.pow(r,1/2.4)-.055)}function vh(r){return(r/=255)<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4)}function Nf(r){var i=vh(r.r),s=vh(r.g),h=vh(r.b),m=mh((.4124564*i+.3575761*s+.1804375*h)/.95047),y=mh((.2126729*i+.7151522*s+.072175*h)/1);return{l:116*y-16,a:500*(m-y),b:200*(y-mh((.0193339*i+.119192*s+.9503041*h)/1.08883)),alpha:r.a}}function Ff(r){var i=(r.l+16)/116,s=isNaN(r.a)?i:i+r.a/500,h=isNaN(r.b)?i:i-r.b/200;return i=1*yh(i),s=.95047*yh(s),h=1.08883*yh(h),new Ir(gh(3.2404542*s-1.5371385*i-.4985314*h),gh(-.969266*s+1.8760108*i+.041556*h),gh(.0556434*s-.2040259*i+1.0572252*h),r.alpha)}function n0(r,i,s){var h=i-r;return r+s*(h>180||h<-180?h-360*Math.round(h/360):h)}var uu={forward:Nf,reverse:Ff,interpolate:function(r,i,s){return{l:zn(r.l,i.l,s),a:zn(r.a,i.a,s),b:zn(r.b,i.b,s),alpha:zn(r.alpha,i.alpha,s)}}},cu={forward:function(r){var i=Nf(r),s=i.l,h=i.a,m=i.b,y=Math.atan2(m,h)*r0;return{h:y<0?y+360:y,c:Math.sqrt(h*h+m*m),l:s,alpha:r.a}},reverse:function(r){var i=r.h*t0,s=r.c;return Ff({l:r.l,a:Math.cos(i)*s,b:Math.sin(i)*s,alpha:r.alpha})},interpolate:function(r,i,s){return{h:n0(r.h,i.h,s),c:zn(r.c,i.c,s),l:zn(r.l,i.l,s),alpha:zn(r.alpha,i.alpha,s)}}},jf=Object.freeze({__proto__:null,lab:uu,hcl:cu}),ci=function(r,i,s,h,m){this.type=r,this.operator=i,this.interpolation=s,this.input=h,this.labels=[],this.outputs=[];for(var y=0,_=m;y<_.length;y+=1){var S=_[y],k=S[1];this.labels.push(S[0]),this.outputs.push(k)}};function _h(r,i,s,h){var m=h-s,y=r-s;return m===0?0:i===1?y/m:(Math.pow(i,y)-1)/(Math.pow(i,m)-1)}ci.interpolationFactor=function(r,i,s,h){var m=0;if(r.name==="exponential")m=_h(i,r.base,s,h);else if(r.name==="linear")m=_h(i,1,s,h);else if(r.name==="cubic-bezier"){var y=r.controlPoints;m=new x(y[0],y[1],y[2],y[3]).solve(_h(i,1,s,h))}return m},ci.parse=function(r,i){var s=r[0],h=r[1],m=r[2],y=r.slice(3);if(!Array.isArray(h)||h.length===0)return i.error("Expected an interpolation type expression.",1);if(h[0]==="linear")h={name:"linear"};else if(h[0]==="exponential"){var _=h[1];if(typeof _!="number")return i.error("Exponential interpolation requires a numeric base.",1,1);h={name:"exponential",base:_}}else{if(h[0]!=="cubic-bezier")return i.error("Unknown interpolation type "+String(h[0]),1,0);var S=h.slice(1);if(S.length!==4||S.some(function(be){return typeof be!="number"||be<0||be>1}))return i.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);h={name:"cubic-bezier",controlPoints:S}}if(r.length-1<4)return i.error("Expected at least 4 arguments, but found only "+(r.length-1)+".");if((r.length-1)%2!=0)return i.error("Expected an even number of arguments.");if(!(m=i.parse(m,2,Ve)))return null;var k=[],A=null;s==="interpolate-hcl"||s==="interpolate-lab"?A=at:i.expectedType&&i.expectedType.kind!=="value"&&(A=i.expectedType);for(var z=0;z<y.length;z+=2){var D=y[z],$=y[z+1],G=z+3,ae=z+4;if(typeof D!="number")return i.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',G);if(k.length&&k[k.length-1][0]>=D)return i.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',G);var le=i.parse($,ae,A);if(!le)return null;A=A||le.type,k.push([D,le])}return A.kind==="number"||A.kind==="color"||A.kind==="array"&&A.itemType.kind==="number"&&typeof A.N=="number"?new ci(A,s,h,m,k):i.error("Type "+gr(A)+" is not interpolatable.")},ci.prototype.evaluate=function(r){var i=this.labels,s=this.outputs;if(i.length===1)return s[0].evaluate(r);var h=this.input.evaluate(r);if(h<=i[0])return s[0].evaluate(r);var m=i.length;if(h>=i[m-1])return s[m-1].evaluate(r);var y=pc(i,h),_=ci.interpolationFactor(this.interpolation,h,i[y],i[y+1]),S=s[y].evaluate(r),k=s[y+1].evaluate(r);return this.operator==="interpolate"?fl[this.type.kind.toLowerCase()](S,k,_):this.operator==="interpolate-hcl"?cu.reverse(cu.interpolate(cu.forward(S),cu.forward(k),_)):uu.reverse(uu.interpolate(uu.forward(S),uu.forward(k),_))},ci.prototype.eachChild=function(r){r(this.input);for(var i=0,s=this.outputs;i<s.length;i+=1)r(s[i])},ci.prototype.outputDefined=function(){return this.outputs.every(function(r){return r.outputDefined()})},ci.prototype.serialize=function(){var r;r=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var i=[this.operator,r,this.input.serialize()],s=0;s<this.labels.length;s++)i.push(this.labels[s],this.outputs[s].serialize());return i};var Wa=function(r,i){this.type=r,this.args=i};Wa.parse=function(r,i){if(r.length<2)return i.error("Expectected at least one argument.");var s=null,h=i.expectedType;h&&h.kind!=="value"&&(s=h);for(var m=[],y=0,_=r.slice(1);y<_.length;y+=1){var S=i.parse(_[y],1+m.length,s,void 0,{typeAnnotation:"omit"});if(!S)return null;s=s||S.type,m.push(S)}var k=h&&m.some(function(A){return Lr(h,A.type)});return new Wa(k?pt:s,m)},Wa.prototype.evaluate=function(r){for(var i,s=null,h=0,m=0,y=this.args;m<y.length&&(h++,(s=y[m].evaluate(r))&&s instanceof Li&&!s.available&&(i||(i=s.name),s=null,h===this.args.length&&(s=i)),s===null);m+=1);return s},Wa.prototype.eachChild=function(r){this.args.forEach(r)},Wa.prototype.outputDefined=function(){return this.args.every(function(r){return r.outputDefined()})},Wa.prototype.serialize=function(){var r=["coalesce"];return this.eachChild(function(i){r.push(i.serialize())}),r};var Ga=function(r,i){this.type=i.type,this.bindings=[].concat(r),this.result=i};Ga.prototype.evaluate=function(r){return this.result.evaluate(r)},Ga.prototype.eachChild=function(r){for(var i=0,s=this.bindings;i<s.length;i+=1)r(s[i][1]);r(this.result)},Ga.parse=function(r,i){if(r.length<4)return i.error("Expected at least 3 arguments, but found "+(r.length-1)+" instead.");for(var s=[],h=1;h<r.length-1;h+=2){var m=r[h];if(typeof m!="string")return i.error("Expected string, but found "+typeof m+" instead.",h);if(/[^a-zA-Z0-9_]/.test(m))return i.error("Variable names must contain only alphanumeric characters or '_'.",h);var y=i.parse(r[h+1],h+1);if(!y)return null;s.push([m,y])}var _=i.parse(r[r.length-1],r.length-1,i.expectedType,s);return _?new Ga(s,_):null},Ga.prototype.outputDefined=function(){return this.result.outputDefined()},Ga.prototype.serialize=function(){for(var r=["let"],i=0,s=this.bindings;i<s.length;i+=1){var h=s[i];r.push(h[0],h[1].serialize())}return r.push(this.result.serialize()),r};var ks=function(r,i,s){this.type=r,this.index=i,this.input=s};ks.parse=function(r,i){if(r.length!==3)return i.error("Expected 2 arguments, but found "+(r.length-1)+" instead.");var s=i.parse(r[1],1,Ve),h=i.parse(r[2],2,Tr(i.expectedType||pt));return s&&h?new ks(h.type.itemType,s,h):null},ks.prototype.evaluate=function(r){var i=this.index.evaluate(r),s=this.input.evaluate(r);if(i<0)throw new ei("Array index out of bounds: "+i+" < 0.");if(i>=s.length)throw new ei("Array index out of bounds: "+i+" > "+(s.length-1)+".");if(i!==Math.floor(i))throw new ei("Array index must be an integer, but found "+i+" instead.");return s[i]},ks.prototype.eachChild=function(r){r(this.index),r(this.input)},ks.prototype.outputDefined=function(){return!1},ks.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Ts=function(r,i){this.type=it,this.needle=r,this.haystack=i};Ts.parse=function(r,i){if(r.length!==3)return i.error("Expected 2 arguments, but found "+(r.length-1)+" instead.");var s=i.parse(r[1],1,pt),h=i.parse(r[2],2,pt);return s&&h?En(s.type,[it,dt,Ve,yt,pt])?new Ts(s,h):i.error("Expected first argument to be of type boolean, string, number or null, but found "+gr(s.type)+" instead"):null},Ts.prototype.evaluate=function(r){var i=this.needle.evaluate(r),s=this.haystack.evaluate(r);if(!s)return!1;if(!qr(i,["boolean","string","number","null"]))throw new ei("Expected first argument to be of type boolean, string, number or null, but found "+gr(Cn(i))+" instead.");if(!qr(s,["string","array"]))throw new ei("Expected second argument to be of type array or string, but found "+gr(Cn(s))+" instead.");return s.indexOf(i)>=0},Ts.prototype.eachChild=function(r){r(this.needle),r(this.haystack)},Ts.prototype.outputDefined=function(){return!0},Ts.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Ha=function(r,i,s){this.type=Ve,this.needle=r,this.haystack=i,this.fromIndex=s};Ha.parse=function(r,i){if(r.length<=2||r.length>=5)return i.error("Expected 3 or 4 arguments, but found "+(r.length-1)+" instead.");var s=i.parse(r[1],1,pt),h=i.parse(r[2],2,pt);if(!s||!h)return null;if(!En(s.type,[it,dt,Ve,yt,pt]))return i.error("Expected first argument to be of type boolean, string, number or null, but found "+gr(s.type)+" instead");if(r.length===4){var m=i.parse(r[3],3,Ve);return m?new Ha(s,h,m):null}return new Ha(s,h)},Ha.prototype.evaluate=function(r){var i=this.needle.evaluate(r),s=this.haystack.evaluate(r);if(!qr(i,["boolean","string","number","null"]))throw new ei("Expected first argument to be of type boolean, string, number or null, but found "+gr(Cn(i))+" instead.");if(!qr(s,["string","array"]))throw new ei("Expected second argument to be of type array or string, but found "+gr(Cn(s))+" instead.");if(this.fromIndex){var h=this.fromIndex.evaluate(r);return s.indexOf(i,h)}return s.indexOf(i)},Ha.prototype.eachChild=function(r){r(this.needle),r(this.haystack),this.fromIndex&&r(this.fromIndex)},Ha.prototype.outputDefined=function(){return!1},Ha.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var r=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),r]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Is=function(r,i,s,h,m,y){this.inputType=r,this.type=i,this.input=s,this.cases=h,this.outputs=m,this.otherwise=y};Is.parse=function(r,i){if(r.length<5)return i.error("Expected at least 4 arguments, but found only "+(r.length-1)+".");if(r.length%2!=1)return i.error("Expected an even number of arguments.");var s,h;i.expectedType&&i.expectedType.kind!=="value"&&(h=i.expectedType);for(var m={},y=[],_=2;_<r.length-1;_+=2){var S=r[_],k=r[_+1];Array.isArray(S)||(S=[S]);var A=i.concat(_);if(S.length===0)return A.error("Expected at least one branch label.");for(var z=0,D=S;z<D.length;z+=1){var $=D[z];if(typeof $!="number"&&typeof $!="string")return A.error("Branch labels must be numbers or strings.");if(typeof $=="number"&&Math.abs($)>Number.MAX_SAFE_INTEGER)return A.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof $=="number"&&Math.floor($)!==$)return A.error("Numeric branch labels must be integer values.");if(s){if(A.checkSubtype(s,Cn($)))return null}else s=Cn($);if(m[String($)]!==void 0)return A.error("Branch labels must be unique.");m[String($)]=y.length}var G=i.parse(k,_,h);if(!G)return null;h=h||G.type,y.push(G)}var ae=i.parse(r[1],1,pt);if(!ae)return null;var le=i.parse(r[r.length-1],r.length-1,h);return le?ae.type.kind!=="value"&&i.concat(1).checkSubtype(s,ae.type)?null:new Is(s,h,ae,m,y,le):null},Is.prototype.evaluate=function(r){var i=this.input.evaluate(r);return(Cn(i)===this.inputType&&this.outputs[this.cases[i]]||this.otherwise).evaluate(r)},Is.prototype.eachChild=function(r){r(this.input),this.outputs.forEach(r),r(this.otherwise)},Is.prototype.outputDefined=function(){return this.outputs.every(function(r){return r.outputDefined()})&&this.otherwise.outputDefined()},Is.prototype.serialize=function(){for(var r=this,i=["match",this.input.serialize()],s=[],h={},m=0,y=Object.keys(this.cases).sort();m<y.length;m+=1){var _=y[m];(D=h[this.cases[_]])===void 0?(h[this.cases[_]]=s.length,s.push([this.cases[_],[_]])):s[D][1].push(_)}for(var S=function(G){return r.inputType.kind==="number"?Number(G):G},k=0,A=s;k<A.length;k+=1){var z=A[k],D=z[0],$=z[1];i.push($.length===1?S($[0]):$.map(S)),i.push(this.outputs[outputIndex$1].serialize())}return i.push(this.otherwise.serialize()),i};var Ps=function(r,i,s){this.type=r,this.branches=i,this.otherwise=s};Ps.parse=function(r,i){if(r.length<4)return i.error("Expected at least 3 arguments, but found only "+(r.length-1)+".");if(r.length%2!=0)return i.error("Expected an odd number of arguments.");var s;i.expectedType&&i.expectedType.kind!=="value"&&(s=i.expectedType);for(var h=[],m=1;m<r.length-1;m+=2){var y=i.parse(r[m],m,it);if(!y)return null;var _=i.parse(r[m+1],m+1,s);if(!_)return null;h.push([y,_]),s=s||_.type}var S=i.parse(r[r.length-1],r.length-1,s);return S?new Ps(s,h,S):null},Ps.prototype.evaluate=function(r){for(var i=0,s=this.branches;i<s.length;i+=1){var h=s[i],m=h[1];if(h[0].evaluate(r))return m.evaluate(r)}return this.otherwise.evaluate(r)},Ps.prototype.eachChild=function(r){for(var i=0,s=this.branches;i<s.length;i+=1){var h=s[i],m=h[1];r(h[0]),r(m)}r(this.otherwise)},Ps.prototype.outputDefined=function(){return this.branches.every(function(r){return r[1].outputDefined()})&&this.otherwise.outputDefined()},Ps.prototype.serialize=function(){var r=["case"];return this.eachChild(function(i){r.push(i.serialize())}),r};var Ka=function(r,i,s,h){this.type=r,this.input=i,this.beginIndex=s,this.endIndex=h};function Uf(r,i){return r==="=="||r==="!="?i.kind==="boolean"||i.kind==="string"||i.kind==="number"||i.kind==="null"||i.kind==="value":i.kind==="string"||i.kind==="number"||i.kind==="value"}function $f(r,i,s,h){return h.compare(i,s)===0}function Hr(r,i,s){var h=r!=="=="&&r!=="!=";return function(){function m(y,_,S){this.type=it,this.lhs=y,this.rhs=_,this.collator=S,this.hasUntypedArgument=y.type.kind==="value"||_.type.kind==="value"}return m.parse=function(y,_){if(y.length!==3&&y.length!==4)return _.error("Expected two or three arguments.");var S=y[0],k=_.parse(y[1],1,pt);if(!k)return null;if(!Uf(S,k.type))return _.concat(1).error('"'+S+`" comparisons are not supported for type '`+gr(k.type)+"'.");var A=_.parse(y[2],2,pt);if(!A)return null;if(!Uf(S,A.type))return _.concat(2).error('"'+S+`" comparisons are not supported for type '`+gr(A.type)+"'.");if(k.type.kind!==A.type.kind&&k.type.kind!=="value"&&A.type.kind!=="value")return _.error("Cannot compare types '"+gr(k.type)+"' and '"+gr(A.type)+"'.");h&&(k.type.kind==="value"&&A.type.kind!=="value"?k=new an(A.type,[k]):k.type.kind!=="value"&&A.type.kind==="value"&&(A=new an(k.type,[A])));var z=null;if(y.length===4){if(k.type.kind!=="string"&&A.type.kind!=="string"&&k.type.kind!=="value"&&A.type.kind!=="value")return _.error("Cannot use collator to compare non-string types.");if(!(z=_.parse(y[3],3,fr)))return null}return new m(k,A,z)},m.prototype.evaluate=function(y){var _=this.lhs.evaluate(y),S=this.rhs.evaluate(y);if(h&&this.hasUntypedArgument){var k=Cn(_),A=Cn(S);if(k.kind!==A.kind||k.kind!=="string"&&k.kind!=="number")throw new ei('Expected arguments for "'+r+'" to be (string, string) or (number, number), but found ('+k.kind+", "+A.kind+") instead.")}if(this.collator&&!h&&this.hasUntypedArgument){var z=Cn(_),D=Cn(S);if(z.kind!=="string"||D.kind!=="string")return i(y,_,S)}return this.collator?s(y,_,S,this.collator.evaluate(y)):i(y,_,S)},m.prototype.eachChild=function(y){y(this.lhs),y(this.rhs),this.collator&&y(this.collator)},m.prototype.outputDefined=function(){return!0},m.prototype.serialize=function(){var y=[r];return this.eachChild(function(_){y.push(_.serialize())}),y},m}()}Ka.parse=function(r,i){if(r.length<=2||r.length>=5)return i.error("Expected 3 or 4 arguments, but found "+(r.length-1)+" instead.");var s=i.parse(r[1],1,pt),h=i.parse(r[2],2,Ve);if(!s||!h)return null;if(!En(s.type,[Tr(pt),dt,pt]))return i.error("Expected first argument to be of type array or string, but found "+gr(s.type)+" instead");if(r.length===4){var m=i.parse(r[3],3,Ve);return m?new Ka(s.type,s,h,m):null}return new Ka(s.type,s,h)},Ka.prototype.evaluate=function(r){var i=this.input.evaluate(r),s=this.beginIndex.evaluate(r);if(!qr(i,["string","array"]))throw new ei("Expected first argument to be of type array or string, but found "+gr(Cn(i))+" instead.");if(this.endIndex){var h=this.endIndex.evaluate(r);return i.slice(s,h)}return i.slice(s)},Ka.prototype.eachChild=function(r){r(this.input),r(this.beginIndex),this.endIndex&&r(this.endIndex)},Ka.prototype.outputDefined=function(){return!1},Ka.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var r=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),r]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var i0=Hr("==",function(r,i,s){return i===s},$f),hc=Hr("!=",function(r,i,s){return i!==s},function(r,i,s,h){return!$f(0,i,s,h)}),Vf=Hr("<",function(r,i,s){return i<s},function(r,i,s,h){return h.compare(i,s)<0}),qf=Hr(">",function(r,i,s){return i>s},function(r,i,s,h){return h.compare(i,s)>0}),Wf=Hr("<=",function(r,i,s){return i<=s},function(r,i,s,h){return h.compare(i,s)<=0}),Gf=Hr(">=",function(r,i,s){return i>=s},function(r,i,s,h){return h.compare(i,s)>=0}),As=function(r,i,s,h,m){this.type=dt,this.number=r,this.locale=i,this.currency=s,this.minFractionDigits=h,this.maxFractionDigits=m};As.parse=function(r,i){if(r.length!==3)return i.error("Expected two arguments.");var s=i.parse(r[1],1,Ve);if(!s)return null;var h=r[2];if(typeof h!="object"||Array.isArray(h))return i.error("NumberFormat options argument must be an object.");var m=null;if(h.locale&&!(m=i.parse(h.locale,1,dt)))return null;var y=null;if(h.currency&&!(y=i.parse(h.currency,1,dt)))return null;var _=null;if(h["min-fraction-digits"]&&!(_=i.parse(h["min-fraction-digits"],1,Ve)))return null;var S=null;return h["max-fraction-digits"]&&!(S=i.parse(h["max-fraction-digits"],1,Ve))?null:new As(s,m,y,_,S)},As.prototype.evaluate=function(r){return new Intl.NumberFormat(this.locale?this.locale.evaluate(r):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(r):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(r):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(r):void 0}).format(this.number.evaluate(r))},As.prototype.eachChild=function(r){r(this.number),this.locale&&r(this.locale),this.currency&&r(this.currency),this.minFractionDigits&&r(this.minFractionDigits),this.maxFractionDigits&&r(this.maxFractionDigits)},As.prototype.outputDefined=function(){return!1},As.prototype.serialize=function(){var r={};return this.locale&&(r.locale=this.locale.serialize()),this.currency&&(r.currency=this.currency.serialize()),this.minFractionDigits&&(r["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(r["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),r]};var Za=function(r){this.type=Ve,this.input=r};Za.parse=function(r,i){if(r.length!==2)return i.error("Expected 1 argument, but found "+(r.length-1)+" instead.");var s=i.parse(r[1],1);return s?s.type.kind!=="array"&&s.type.kind!=="string"&&s.type.kind!=="value"?i.error("Expected argument of type string or array, but found "+gr(s.type)+" instead."):new Za(s):null},Za.prototype.evaluate=function(r){var i=this.input.evaluate(r);if(typeof i=="string"||Array.isArray(i))return i.length;throw new ei("Expected value to be of type string or array, but found "+gr(Cn(i))+" instead.")},Za.prototype.eachChild=function(r){r(this.input)},Za.prototype.outputDefined=function(){return!1},Za.prototype.serialize=function(){var r=["length"];return this.eachChild(function(i){r.push(i.serialize())}),r};var Ms={"==":i0,"!=":hc,">":qf,"<":Vf,">=":Gf,"<=":Wf,array:an,at:ks,boolean:an,case:Ps,coalesce:Wa,collator:ia,format:No,image:ao,in:Ts,"index-of":Ha,interpolate:ci,"interpolate-hcl":ci,"interpolate-lab":ci,length:Za,let:Ga,literal:wi,match:Is,number:an,"number-format":As,object:an,slice:Ka,step:Gi,string:an,"to-boolean":vo,"to-color":vo,"to-number":vo,"to-string":vo,var:Va,within:_o};function Hf(r,i){var s=i[0],h=i[1],m=i[2],y=i[3];s=s.evaluate(r),h=h.evaluate(r),m=m.evaluate(r);var _=y?y.evaluate(r):1,S=hh(s,h,m,_);if(S)throw new ei(S);return new Ir(s/255*_,h/255*_,m/255*_,_)}function Kf(r,i){return r in i}function xh(r,i){var s=i[r];return s===void 0?null:s}function zs(r){return{type:r}}function Zf(r){return{result:"success",value:r}}function Rs(r){return{result:"error",value:r}}function Ls(r){return r["property-type"]==="data-driven"||r["property-type"]==="cross-faded-data-driven"}function Xf(r){return!!r.expression&&r.expression.parameters.indexOf("zoom")>-1}function pu(r){return!!r.expression&&r.expression.interpolated}function Yr(r){return r instanceof Number?"number":r instanceof String?"string":r instanceof Boolean?"boolean":Array.isArray(r)?"array":r===null?"null":typeof r}function dc(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)}function o0(r){return r}function ml(r,i,s){return r!==void 0?r:i!==void 0?i:s!==void 0?s:void 0}function Yf(r,i,s,h,m){return ml(typeof s===m?h[s]:void 0,r.default,i.default)}function a0(r,i,s){if(Yr(s)!=="number")return ml(r.default,i.default);var h=r.stops.length;if(h===1||s<=r.stops[0][0])return r.stops[0][1];if(s>=r.stops[h-1][0])return r.stops[h-1][1];var m=pc(r.stops.map(function(y){return y[0]}),s);return r.stops[m][1]}function Jf(r,i,s){var h=r.base!==void 0?r.base:1;if(Yr(s)!=="number")return ml(r.default,i.default);var m=r.stops.length;if(m===1||s<=r.stops[0][0])return r.stops[0][1];if(s>=r.stops[m-1][0])return r.stops[m-1][1];var y=pc(r.stops.map(function(D){return D[0]}),s),_=function(D,$,G,ae){var le=ae-G,be=D-G;return le===0?0:$===1?be/le:(Math.pow($,be)-1)/(Math.pow($,le)-1)}(s,h,r.stops[y][0],r.stops[y+1][0]),S=r.stops[y][1],k=r.stops[y+1][1],A=fl[i.type]||o0;if(r.colorSpace&&r.colorSpace!=="rgb"){var z=jf[r.colorSpace];A=function(D,$){return z.reverse(z.interpolate(z.forward(D),z.forward($),_))}}return typeof S.evaluate=="function"?{evaluate:function(){for(var D=[],$=arguments.length;$--;)D[$]=arguments[$];var G=S.evaluate.apply(void 0,D),ae=k.evaluate.apply(void 0,D);if(G!==void 0&&ae!==void 0)return A(G,ae,_)}}:A(S,k,_)}function fc(r,i,s){return i.type==="color"?s=Ir.parse(s):i.type==="formatted"?s=Qn.fromString(s.toString()):i.type==="resolvedImage"?s=Li.fromString(s.toString()):Yr(s)===i.type||i.type==="enum"&&i.values[s]||(s=void 0),ml(s,r.default,i.default)}ui.register(Ms,{error:[{kind:"error"},[dt],function(r,i){throw new ei(i[0].evaluate(r))}],typeof:[dt,[pt],function(r,i){return gr(Cn(i[0].evaluate(r)))}],"to-rgba":[Tr(Ve,4),[at],function(r,i){return i[0].evaluate(r).toArray()}],rgb:[at,[Ve,Ve,Ve],Hf],rgba:[at,[Ve,Ve,Ve,Ve],Hf],has:{type:it,overloads:[[[dt],function(r,i){return Kf(i[0].evaluate(r),r.properties())}],[[dt,or],function(r,i){var s=i[1];return Kf(i[0].evaluate(r),s.evaluate(r))}]]},get:{type:pt,overloads:[[[dt],function(r,i){return xh(i[0].evaluate(r),r.properties())}],[[dt,or],function(r,i){var s=i[1];return xh(i[0].evaluate(r),s.evaluate(r))}]]},"feature-state":[pt,[dt],function(r,i){return xh(i[0].evaluate(r),r.featureState||{})}],properties:[or,[],function(r){return r.properties()}],"geometry-type":[dt,[],function(r){return r.geometryType()}],id:[pt,[],function(r){return r.id()}],zoom:[Ve,[],function(r){return r.globals.zoom}],"heatmap-density":[Ve,[],function(r){return r.globals.heatmapDensity||0}],"line-progress":[Ve,[],function(r){return r.globals.lineProgress||0}],accumulated:[pt,[],function(r){return r.globals.accumulated===void 0?null:r.globals.accumulated}],"+":[Ve,zs(Ve),function(r,i){for(var s=0,h=0,m=i;h<m.length;h+=1)s+=m[h].evaluate(r);return s}],"*":[Ve,zs(Ve),function(r,i){for(var s=1,h=0,m=i;h<m.length;h+=1)s*=m[h].evaluate(r);return s}],"-":{type:Ve,overloads:[[[Ve,Ve],function(r,i){var s=i[1];return i[0].evaluate(r)-s.evaluate(r)}],[[Ve],function(r,i){return-i[0].evaluate(r)}]]},"/":[Ve,[Ve,Ve],function(r,i){var s=i[1];return i[0].evaluate(r)/s.evaluate(r)}],"%":[Ve,[Ve,Ve],function(r,i){var s=i[1];return i[0].evaluate(r)%s.evaluate(r)}],ln2:[Ve,[],function(){return Math.LN2}],pi:[Ve,[],function(){return Math.PI}],e:[Ve,[],function(){return Math.E}],"^":[Ve,[Ve,Ve],function(r,i){var s=i[1];return Math.pow(i[0].evaluate(r),s.evaluate(r))}],sqrt:[Ve,[Ve],function(r,i){return Math.sqrt(i[0].evaluate(r))}],log10:[Ve,[Ve],function(r,i){return Math.log(i[0].evaluate(r))/Math.LN10}],ln:[Ve,[Ve],function(r,i){return Math.log(i[0].evaluate(r))}],log2:[Ve,[Ve],function(r,i){return Math.log(i[0].evaluate(r))/Math.LN2}],sin:[Ve,[Ve],function(r,i){return Math.sin(i[0].evaluate(r))}],cos:[Ve,[Ve],function(r,i){return Math.cos(i[0].evaluate(r))}],tan:[Ve,[Ve],function(r,i){return Math.tan(i[0].evaluate(r))}],asin:[Ve,[Ve],function(r,i){return Math.asin(i[0].evaluate(r))}],acos:[Ve,[Ve],function(r,i){return Math.acos(i[0].evaluate(r))}],atan:[Ve,[Ve],function(r,i){return Math.atan(i[0].evaluate(r))}],min:[Ve,zs(Ve),function(r,i){return Math.min.apply(Math,i.map(function(s){return s.evaluate(r)}))}],max:[Ve,zs(Ve),function(r,i){return Math.max.apply(Math,i.map(function(s){return s.evaluate(r)}))}],abs:[Ve,[Ve],function(r,i){return Math.abs(i[0].evaluate(r))}],round:[Ve,[Ve],function(r,i){var s=i[0].evaluate(r);return s<0?-Math.round(-s):Math.round(s)}],floor:[Ve,[Ve],function(r,i){return Math.floor(i[0].evaluate(r))}],ceil:[Ve,[Ve],function(r,i){return Math.ceil(i[0].evaluate(r))}],"filter-==":[it,[dt,pt],function(r,i){var s=i[0],h=i[1];return r.properties()[s.value]===h.value}],"filter-id-==":[it,[pt],function(r,i){var s=i[0];return r.id()===s.value}],"filter-type-==":[it,[dt],function(r,i){var s=i[0];return r.geometryType()===s.value}],"filter-<":[it,[dt,pt],function(r,i){var s=i[0],h=i[1],m=r.properties()[s.value],y=h.value;return typeof m==typeof y&&m<y}],"filter-id-<":[it,[pt],function(r,i){var s=i[0],h=r.id(),m=s.value;return typeof h==typeof m&&h<m}],"filter->":[it,[dt,pt],function(r,i){var s=i[0],h=i[1],m=r.properties()[s.value],y=h.value;return typeof m==typeof y&&m>y}],"filter-id->":[it,[pt],function(r,i){var s=i[0],h=r.id(),m=s.value;return typeof h==typeof m&&h>m}],"filter-<=":[it,[dt,pt],function(r,i){var s=i[0],h=i[1],m=r.properties()[s.value],y=h.value;return typeof m==typeof y&&m<=y}],"filter-id-<=":[it,[pt],function(r,i){var s=i[0],h=r.id(),m=s.value;return typeof h==typeof m&&h<=m}],"filter->=":[it,[dt,pt],function(r,i){var s=i[0],h=i[1],m=r.properties()[s.value],y=h.value;return typeof m==typeof y&&m>=y}],"filter-id->=":[it,[pt],function(r,i){var s=i[0],h=r.id(),m=s.value;return typeof h==typeof m&&h>=m}],"filter-has":[it,[pt],function(r,i){return i[0].value in r.properties()}],"filter-has-id":[it,[],function(r){return r.id()!==null&&r.id()!==void 0}],"filter-type-in":[it,[Tr(dt)],function(r,i){return i[0].value.indexOf(r.geometryType())>=0}],"filter-id-in":[it,[Tr(pt)],function(r,i){return i[0].value.indexOf(r.id())>=0}],"filter-in-small":[it,[dt,Tr(pt)],function(r,i){var s=i[0];return i[1].value.indexOf(r.properties()[s.value])>=0}],"filter-in-large":[it,[dt,Tr(pt)],function(r,i){var s=i[0],h=i[1];return function(m,y,_,S){for(;_<=S;){var k=_+S>>1;if(y[k]===m)return!0;y[k]>m?S=k-1:_=k+1}return!1}(r.properties()[s.value],h.value,0,h.value.length-1)}],all:{type:it,overloads:[[[it,it],function(r,i){var s=i[1];return i[0].evaluate(r)&&s.evaluate(r)}],[zs(it),function(r,i){for(var s=0,h=i;s<h.length;s+=1)if(!h[s].evaluate(r))return!1;return!0}]]},any:{type:it,overloads:[[[it,it],function(r,i){var s=i[1];return i[0].evaluate(r)||s.evaluate(r)}],[zs(it),function(r,i){for(var s=0,h=i;s<h.length;s+=1)if(h[s].evaluate(r))return!0;return!1}]]},"!":[it,[it],function(r,i){return!i[0].evaluate(r)}],"is-supported-script":[it,[dt],function(r,i){var s=r.globals&&r.globals.isSupportedScript;return!s||s(i[0].evaluate(r))}],upcase:[dt,[dt],function(r,i){return i[0].evaluate(r).toUpperCase()}],downcase:[dt,[dt],function(r,i){return i[0].evaluate(r).toLowerCase()}],concat:[dt,zs(pt),function(r,i){return i.map(function(s){return su(s.evaluate(r))}).join("")}],"resolved-locale":[dt,[fr],function(r,i){return i[0].evaluate(r).resolvedLocale()}]});var yl=function(r,i){this.expression=r,this._warningHistory={},this._evaluator=new ba,this._defaultValue=i?function(s){return s.type==="color"&&dc(s.default)?new Ir(0,0,0,0):s.type==="color"?Ir.parse(s.default)||null:s.default===void 0?null:s.default}(i):null,this._enumValues=i&&i.type==="enum"?i.values:null};function hu(r){return Array.isArray(r)&&r.length>0&&typeof r[0]=="string"&&r[0]in Ms}function mc(r,i){var s=new qa(Ms,[],i?function(m){var y={color:at,string:dt,number:Ve,enum:dt,boolean:it,formatted:Gr,resolvedImage:ur};return m.type==="array"?Tr(y[m.value]||pt,m.length):y[m.type]}(i):void 0),h=s.parse(r,void 0,void 0,void 0,i&&i.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?Zf(new yl(h,i)):Rs(s.errors)}yl.prototype.evaluateWithoutErrorHandling=function(r,i,s,h,m,y){return this._evaluator.globals=r,this._evaluator.feature=i,this._evaluator.featureState=s,this._evaluator.canonical=h,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=y,this.expression.evaluate(this._evaluator)},yl.prototype.evaluate=function(r,i,s,h,m,y){this._evaluator.globals=r,this._evaluator.feature=i||null,this._evaluator.featureState=s||null,this._evaluator.canonical=h,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=y||null;try{var _=this.expression.evaluate(this._evaluator);if(_==null||typeof _=="number"&&_!=_)return this._defaultValue;if(this._enumValues&&!(_ in this._enumValues))throw new ei("Expected value to be one of "+Object.keys(this._enumValues).map(function(S){return JSON.stringify(S)}).join(", ")+", but found "+JSON.stringify(_)+" instead.");return _}catch(S){return this._warningHistory[S.message]||(this._warningHistory[S.message]=!0,typeof console<"u"&&console.warn(S.message)),this._defaultValue}};var du=function(r,i){this.kind=r,this._styleExpression=i,this.isStateDependent=r!=="constant"&&!$a(i.expression)};du.prototype.evaluateWithoutErrorHandling=function(r,i,s,h,m,y){return this._styleExpression.evaluateWithoutErrorHandling(r,i,s,h,m,y)},du.prototype.evaluate=function(r,i,s,h,m,y){return this._styleExpression.evaluate(r,i,s,h,m,y)};var gl=function(r,i,s,h){this.kind=r,this.zoomStops=s,this._styleExpression=i,this.isStateDependent=r!=="camera"&&!$a(i.expression),this.interpolationType=h};function Qf(r,i){if((r=mc(r,i)).result==="error")return r;var s=r.value.expression,h=Ua(s);if(!h&&!Ls(i))return Rs([new Xe("","data expressions not supported")]);var m=Cs(s,["zoom"]);if(!m&&!Xf(i))return Rs([new Xe("","zoom expressions not supported")]);var y=function _(S){var k=null;if(S instanceof Ga)k=_(S.result);else if(S instanceof Wa)for(var A=0,z=S.args;A<z.length&&!(k=_(z[A]));A+=1);else(S instanceof Gi||S instanceof ci)&&S.input instanceof ui&&S.input.name==="zoom"&&(k=S);return k instanceof Xe||S.eachChild(function(D){var $=_(D);$ instanceof Xe?k=$:!k&&$?k=new Xe("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):k&&$&&k!==$&&(k=new Xe("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),k}(s);return y||m?y instanceof Xe?Rs([y]):y instanceof ci&&!pu(i)?Rs([new Xe("",'"interpolate" expressions cannot be used with this property')]):Zf(y?new gl(h?"camera":"composite",r.value,y.labels,y instanceof ci?y.interpolation:void 0):new du(h?"constant":"source",r.value)):Rs([new Xe("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}gl.prototype.evaluateWithoutErrorHandling=function(r,i,s,h,m,y){return this._styleExpression.evaluateWithoutErrorHandling(r,i,s,h,m,y)},gl.prototype.evaluate=function(r,i,s,h,m,y){return this._styleExpression.evaluate(r,i,s,h,m,y)},gl.prototype.interpolationFactor=function(r,i,s){return this.interpolationType?ci.interpolationFactor(this.interpolationType,r,i,s):0};var vl=function(r,i){this._parameters=r,this._specification=i,Ge(this,function s(h,m){var y,_,S,k=m.type==="color",A=h.stops&&typeof h.stops[0][0]=="object",z=A||!(A||h.property!==void 0),D=h.type||(pu(m)?"exponential":"interval");if(k&&((h=Ge({},h)).stops&&(h.stops=h.stops.map(function(ut){return[ut[0],Ir.parse(ut[1])]})),h.default=Ir.parse(h.default?h.default:m.default)),h.colorSpace&&h.colorSpace!=="rgb"&&!jf[h.colorSpace])throw new Error("Unknown color space: "+h.colorSpace);if(D==="exponential")y=Jf;else if(D==="interval")y=a0;else if(D==="categorical"){y=Yf,_=Object.create(null);for(var $=0,G=h.stops;$<G.length;$+=1){var ae=G[$];_[ae[0]]=ae[1]}S=typeof h.stops[0][0]}else{if(D!=="identity")throw new Error('Unknown function type "'+D+'"');y=fc}if(A){for(var le={},be=[],de=0;de<h.stops.length;de++){var Ie=h.stops[de],Ae=Ie[0].zoom;le[Ae]===void 0&&(le[Ae]={zoom:Ae,type:h.type,property:h.property,default:h.default,stops:[]},be.push(Ae)),le[Ae].stops.push([Ie[0].value,Ie[1]])}for(var Le=[],Be=0,We=be;Be<We.length;Be+=1){var Ye=We[Be];Le.push([le[Ye].zoom,s(le[Ye],m)])}var nt={name:"linear"};return{kind:"composite",interpolationType:nt,interpolationFactor:ci.interpolationFactor.bind(void 0,nt),zoomStops:Le.map(function(ut){return ut[0]}),evaluate:function(ut,Ct){var ht=ut.zoom;return Jf({stops:Le,base:h.base},m,ht).evaluate(ht,Ct)}}}if(z){var wt=D==="exponential"?{name:"exponential",base:h.base!==void 0?h.base:1}:null;return{kind:"camera",interpolationType:wt,interpolationFactor:ci.interpolationFactor.bind(void 0,wt),zoomStops:h.stops.map(function(ut){return ut[0]}),evaluate:function(ut){return y(h,m,ut.zoom,_,S)}}}return{kind:"source",evaluate:function(ut,Ct){var ht=Ct&&Ct.properties?Ct.properties[h.property]:void 0;return ht===void 0?ml(h.default,m.default):y(h,m,ht,_,S)}}}(this._parameters,this._specification))};function Fo(r){var i=r.key,s=r.value,h=r.valueSpec||{},m=r.objectElementValidators||{},y=r.style,_=r.styleSpec,S=[],k=Yr(s);if(k!=="object")return[new ne(i,s,"object expected, "+k+" found")];for(var A in s){var z=A.split(".")[0],D=h[z]||h["*"],$=void 0;if(m[z])$=m[z];else if(h[z])$=mr;else if(m["*"])$=m["*"];else{if(!h["*"]){S.push(new ne(i,s[A],'unknown property "'+A+'"'));continue}$=mr}S=S.concat($({key:(i&&i+".")+A,value:s[A],valueSpec:D,style:y,styleSpec:_,object:s,objectKey:A},s))}for(var G in h)m[G]||h[G].required&&h[G].default===void 0&&s[G]===void 0&&S.push(new ne(i,s,'missing required property "'+G+'"'));return S}function em(r){var i=r.value,s=r.valueSpec,h=r.style,m=r.styleSpec,y=r.key,_=r.arrayElementValidator||mr;if(Yr(i)!=="array")return[new ne(y,i,"array expected, "+Yr(i)+" found")];if(s.length&&i.length!==s.length)return[new ne(y,i,"array length "+s.length+" expected, length "+i.length+" found")];if(s["min-length"]&&i.length<s["min-length"])return[new ne(y,i,"array length at least "+s["min-length"]+" expected, length "+i.length+" found")];var S={type:s.value,values:s.values};m.$version<7&&(S.function=s.function),Yr(s.value)==="object"&&(S=s.value);for(var k=[],A=0;A<i.length;A++)k=k.concat(_({array:i,arrayIndex:A,value:i[A],valueSpec:S,style:h,styleSpec:m,key:y+"["+A+"]"}));return k}function tm(r){var i=r.key,s=r.value,h=r.valueSpec,m=Yr(s);return m==="number"&&s!=s&&(m="NaN"),m!=="number"?[new ne(i,s,"number expected, "+m+" found")]:"minimum"in h&&s<h.minimum?[new ne(i,s,s+" is less than the minimum value "+h.minimum)]:"maximum"in h&&s>h.maximum?[new ne(i,s,s+" is greater than the maximum value "+h.maximum)]:[]}function rm(r){var i,s,h,m=r.valueSpec,y=Ze(r.value.type),_={},S=y!=="categorical"&&r.value.property===void 0,k=!S,A=Yr(r.value.stops)==="array"&&Yr(r.value.stops[0])==="array"&&Yr(r.value.stops[0][0])==="object",z=Fo({key:r.key,value:r.value,valueSpec:r.styleSpec.function,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{stops:function(G){if(y==="identity")return[new ne(G.key,G.value,'identity function may not have a "stops" property')];var ae=[],le=G.value;return ae=ae.concat(em({key:G.key,value:le,valueSpec:G.valueSpec,style:G.style,styleSpec:G.styleSpec,arrayElementValidator:D})),Yr(le)==="array"&&le.length===0&&ae.push(new ne(G.key,le,"array must have at least one stop")),ae},default:function(G){return mr({key:G.key,value:G.value,valueSpec:m,style:G.style,styleSpec:G.styleSpec})}}});return y==="identity"&&S&&z.push(new ne(r.key,r.value,'missing required property "property"')),y==="identity"||r.value.stops||z.push(new ne(r.key,r.value,'missing required property "stops"')),y==="exponential"&&r.valueSpec.expression&&!pu(r.valueSpec)&&z.push(new ne(r.key,r.value,"exponential functions not supported")),r.styleSpec.$version>=8&&(k&&!Ls(r.valueSpec)?z.push(new ne(r.key,r.value,"property functions not supported")):S&&!Xf(r.valueSpec)&&z.push(new ne(r.key,r.value,"zoom functions not supported"))),y!=="categorical"&&!A||r.value.property!==void 0||z.push(new ne(r.key,r.value,'"property" property is required')),z;function D(G){var ae=[],le=G.value,be=G.key;if(Yr(le)!=="array")return[new ne(be,le,"array expected, "+Yr(le)+" found")];if(le.length!==2)return[new ne(be,le,"array length 2 expected, length "+le.length+" found")];if(A){if(Yr(le[0])!=="object")return[new ne(be,le,"object expected, "+Yr(le[0])+" found")];if(le[0].zoom===void 0)return[new ne(be,le,"object stop key must have zoom")];if(le[0].value===void 0)return[new ne(be,le,"object stop key must have value")];if(h&&h>Ze(le[0].zoom))return[new ne(be,le[0].zoom,"stop zoom values must appear in ascending order")];Ze(le[0].zoom)!==h&&(h=Ze(le[0].zoom),s=void 0,_={}),ae=ae.concat(Fo({key:be+"[0]",value:le[0],valueSpec:{zoom:{}},style:G.style,styleSpec:G.styleSpec,objectElementValidators:{zoom:tm,value:$}}))}else ae=ae.concat($({key:be+"[0]",value:le[0],valueSpec:{},style:G.style,styleSpec:G.styleSpec},le));return hu(Ue(le[1]))?ae.concat([new ne(be+"[1]",le[1],"expressions are not allowed in function stops.")]):ae.concat(mr({key:be+"[1]",value:le[1],valueSpec:m,style:G.style,styleSpec:G.styleSpec}))}function $(G,ae){var le=Yr(G.value),be=Ze(G.value),de=G.value!==null?G.value:ae;if(i){if(le!==i)return[new ne(G.key,de,le+" stop domain type must match previous stop domain type "+i)]}else i=le;if(le!=="number"&&le!=="string"&&le!=="boolean")return[new ne(G.key,de,"stop domain value must be a number, string, or boolean")];if(le!=="number"&&y!=="categorical"){var Ie="number expected, "+le+" found";return Ls(m)&&y===void 0&&(Ie+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ne(G.key,de,Ie)]}return y!=="categorical"||le!=="number"||isFinite(be)&&Math.floor(be)===be?y!=="categorical"&&le==="number"&&s!==void 0&&be<s?[new ne(G.key,de,"stop domain values must appear in ascending order")]:(s=be,y==="categorical"&&be in _?[new ne(G.key,de,"stop domain values must be unique")]:(_[be]=!0,[])):[new ne(G.key,de,"integer expected, found "+be)]}}function Ds(r){var i=(r.expressionContext==="property"?Qf:mc)(Ue(r.value),r.valueSpec);if(i.result==="error")return i.value.map(function(h){return new ne(""+r.key+h.key,r.value,h.message)});var s=i.value.expression||i.value._styleExpression.expression;if(r.expressionContext==="property"&&r.propertyKey==="text-font"&&!s.outputDefined())return[new ne(r.key,r.value,'Invalid data expression for "'+r.propertyKey+'". Output values must be contained as literals within the expression.')];if(r.expressionContext==="property"&&r.propertyType==="layout"&&!$a(s))return[new ne(r.key,r.value,'"feature-state" data expressions are not supported with layout properties.')];if(r.expressionContext==="filter"&&!$a(s))return[new ne(r.key,r.value,'"feature-state" data expressions are not supported with filters.')];if(r.expressionContext&&r.expressionContext.indexOf("cluster")===0){if(!Cs(s,["zoom","feature-state"]))return[new ne(r.key,r.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(r.expressionContext==="cluster-initial"&&!Ua(s))return[new ne(r.key,r.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function fu(r){var i=r.key,s=r.value,h=r.valueSpec,m=[];return Array.isArray(h.values)?h.values.indexOf(Ze(s))===-1&&m.push(new ne(i,s,"expected one of ["+h.values.join(", ")+"], "+JSON.stringify(s)+" found")):Object.keys(h.values).indexOf(Ze(s))===-1&&m.push(new ne(i,s,"expected one of ["+Object.keys(h.values).join(", ")+"], "+JSON.stringify(s)+" found")),m}function yc(r){if(r===!0||r===!1)return!0;if(!Array.isArray(r)||r.length===0)return!1;switch(r[0]){case"has":return r.length>=2&&r[1]!=="$id"&&r[1]!=="$type";case"in":return r.length>=3&&(typeof r[1]!="string"||Array.isArray(r[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return r.length!==3||Array.isArray(r[1])||Array.isArray(r[2]);case"any":case"all":for(var i=0,s=r.slice(1);i<s.length;i+=1){var h=s[i];if(!yc(h)&&typeof h!="boolean")return!1}return!0;default:return!0}}vl.deserialize=function(r){return new vl(r._parameters,r._specification)},vl.serialize=function(r){return{_parameters:r._parameters,_specification:r._specification}};var bh={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function gc(r){if(r==null)return{filter:function(){return!0},needGeometry:!1};yc(r)||(r=vc(r));var i=mc(r,bh);if(i.result==="error")throw new Error(i.value.map(function(s){return s.key+": "+s.message}).join(", "));return{filter:function(s,h,m){return i.value.evaluate(s,h,{},m)},needGeometry:function s(h){if(!Array.isArray(h))return!1;if(h[0]==="within")return!0;for(var m=1;m<h.length;m++)if(s(h[m]))return!0;return!1}(r)}}function s0(r,i){return r<i?-1:r>i?1:0}function vc(r){if(!r)return!0;var i,s=r[0];return r.length<=1?s!=="any":s==="=="?wh(r[1],r[2],"=="):s==="!="?_c(wh(r[1],r[2],"==")):s==="<"||s===">"||s==="<="||s===">="?wh(r[1],r[2],s):s==="any"?(i=r.slice(1),["any"].concat(i.map(vc))):s==="all"?["all"].concat(r.slice(1).map(vc)):s==="none"?["all"].concat(r.slice(1).map(vc).map(_c)):s==="in"?nm(r[1],r.slice(2)):s==="!in"?_c(nm(r[1],r.slice(2))):s==="has"?im(r[1]):s==="!has"?_c(im(r[1])):s!=="within"||r}function wh(r,i,s){switch(r){case"$type":return["filter-type-"+s,i];case"$id":return["filter-id-"+s,i];default:return["filter-"+s,r,i]}}function nm(r,i){if(i.length===0)return!1;switch(r){case"$type":return["filter-type-in",["literal",i]];case"$id":return["filter-id-in",["literal",i]];default:return i.length>200&&!i.some(function(s){return typeof s!=typeof i[0]})?["filter-in-large",r,["literal",i.sort(s0)]]:["filter-in-small",r,["literal",i]]}}function im(r){switch(r){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",r]}}function _c(r){return["!",r]}function Sh(r){return yc(Ue(r.value))?Ds(Ge({},r,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function i(s){var h=s.value,m=s.key;if(Yr(h)!=="array")return[new ne(m,h,"array expected, "+Yr(h)+" found")];var y,_=s.styleSpec,S=[];if(h.length<1)return[new ne(m,h,"filter array must have at least 1 element")];switch(S=S.concat(fu({key:m+"[0]",value:h[0],valueSpec:_.filter_operator,style:s.style,styleSpec:s.styleSpec})),Ze(h[0])){case"<":case"<=":case">":case">=":h.length>=2&&Ze(h[1])==="$type"&&S.push(new ne(m,h,'"$type" cannot be use with operator "'+h[0]+'"'));case"==":case"!=":h.length!==3&&S.push(new ne(m,h,'filter array for operator "'+h[0]+'" must have 3 elements'));case"in":case"!in":h.length>=2&&(y=Yr(h[1]))!=="string"&&S.push(new ne(m+"[1]",h[1],"string expected, "+y+" found"));for(var k=2;k<h.length;k++)y=Yr(h[k]),Ze(h[1])==="$type"?S=S.concat(fu({key:m+"["+k+"]",value:h[k],valueSpec:_.geometry_type,style:s.style,styleSpec:s.styleSpec})):y!=="string"&&y!=="number"&&y!=="boolean"&&S.push(new ne(m+"["+k+"]",h[k],"string, number, or boolean expected, "+y+" found"));break;case"any":case"all":case"none":for(var A=1;A<h.length;A++)S=S.concat(i({key:m+"["+A+"]",value:h[A],style:s.style,styleSpec:s.styleSpec}));break;case"has":case"!has":y=Yr(h[1]),h.length!==2?S.push(new ne(m,h,'filter array for "'+h[0]+'" operator must have 2 elements')):y!=="string"&&S.push(new ne(m+"[1]",h[1],"string expected, "+y+" found"));break;case"within":y=Yr(h[1]),h.length!==2?S.push(new ne(m,h,'filter array for "'+h[0]+'" operator must have 2 elements')):y!=="object"&&S.push(new ne(m+"[1]",h[1],"object expected, "+y+" found"))}return S}(r)}function Eh(r,i){var s=r.key,h=r.style,m=r.styleSpec,y=r.value,_=r.objectKey,S=m[i+"_"+r.layerType];if(!S)return[];var k=_.match(/^(.*)-transition$/);if(i==="paint"&&k&&S[k[1]]&&S[k[1]].transition)return mr({key:s,value:y,valueSpec:m.transition,style:h,styleSpec:m});var A,z=r.valueSpec||S[_];if(!z)return[new ne(s,y,'unknown property "'+_+'"')];if(Yr(y)==="string"&&Ls(z)&&!z.tokens&&(A=/^{([^}]+)}$/.exec(y)))return[new ne(s,y,'"'+_+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(A[1])+" }`.")];var D=[];return r.layerType==="symbol"&&(_==="text-field"&&h&&!h.glyphs&&D.push(new ne(s,y,'use of "text-field" requires a style "glyphs" property')),_==="text-font"&&dc(Ue(y))&&Ze(y.type)==="identity"&&D.push(new ne(s,y,'"text-font" does not support identity functions'))),D.concat(mr({key:r.key,value:y,valueSpec:z,style:h,styleSpec:m,expressionContext:"property",propertyType:i,propertyKey:_}))}function Ch(r){return Eh(r,"paint")}function mu(r){return Eh(r,"layout")}function om(r){var i=[],s=r.value,h=r.key,m=r.style,y=r.styleSpec;s.type||s.ref||i.push(new ne(h,s,'either "type" or "ref" is required'));var _,S=Ze(s.type),k=Ze(s.ref);if(s.id)for(var A=Ze(s.id),z=0;z<r.arrayIndex;z++){var D=m.layers[z];Ze(D.id)===A&&i.push(new ne(h,s.id,'duplicate layer id "'+s.id+'", previously used at line '+D.id.__line__))}if("ref"in s)["type","source","source-layer","filter","layout"].forEach(function(ae){ae in s&&i.push(new ne(h,s[ae],'"'+ae+'" is prohibited for ref layers'))}),m.layers.forEach(function(ae){Ze(ae.id)===k&&(_=ae)}),_?_.ref?i.push(new ne(h,s.ref,"ref cannot reference another ref layer")):S=Ze(_.type):i.push(new ne(h,s.ref,'ref layer "'+k+'" not found'));else if(S!=="background")if(s.source){var $=m.sources&&m.sources[s.source],G=$&&Ze($.type);$?G==="vector"&&S==="raster"?i.push(new ne(h,s.source,'layer "'+s.id+'" requires a raster source')):G==="raster"&&S!=="raster"?i.push(new ne(h,s.source,'layer "'+s.id+'" requires a vector source')):G!=="vector"||s["source-layer"]?G==="raster-dem"&&S!=="hillshade"?i.push(new ne(h,s.source,"raster-dem source can only be used with layer type 'hillshade'.")):S!=="line"||!s.paint||!s.paint["line-gradient"]||G==="geojson"&&$.lineMetrics||i.push(new ne(h,s,'layer "'+s.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):i.push(new ne(h,s,'layer "'+s.id+'" must specify a "source-layer"')):i.push(new ne(h,s.source,'source "'+s.source+'" not found'))}else i.push(new ne(h,s,'missing required property "source"'));return i=i.concat(Fo({key:h,value:s,valueSpec:y.layer,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return mr({key:h+".type",value:s.type,valueSpec:y.layer.type,style:r.style,styleSpec:r.styleSpec,object:s,objectKey:"type"})},filter:Sh,layout:function(ae){return Fo({layer:s,key:ae.key,value:ae.value,style:ae.style,styleSpec:ae.styleSpec,objectElementValidators:{"*":function(le){return mu(Ge({layerType:S},le))}}})},paint:function(ae){return Fo({layer:s,key:ae.key,value:ae.value,style:ae.style,styleSpec:ae.styleSpec,objectElementValidators:{"*":function(le){return Ch(Ge({layerType:S},le))}}})}}}))}function Os(r){var i=r.value,s=r.key,h=Yr(i);return h!=="string"?[new ne(s,i,"string expected, "+h+" found")]:[]}var sn={promoteId:function(r){var i=r.key,s=r.value;if(Yr(s)==="string")return Os({key:i,value:s});var h=[];for(var m in s)h.push.apply(h,Os({key:i+"."+m,value:s[m]}));return h}};function xc(r){var i=r.value,s=r.key,h=r.styleSpec,m=r.style;if(!i.type)return[new ne(s,i,'"type" is required')];var y,_=Ze(i.type);switch(_){case"vector":case"raster":case"raster-dem":return Fo({key:s,value:i,valueSpec:h["source_"+_.replace("-","_")],style:r.style,styleSpec:h,objectElementValidators:sn});case"geojson":if(y=Fo({key:s,value:i,valueSpec:h.source_geojson,style:m,styleSpec:h,objectElementValidators:sn}),i.cluster)for(var S in i.clusterProperties){var k=i.clusterProperties[S],A=k[0],z=typeof A=="string"?[A,["accumulated"],["get",S]]:A;y.push.apply(y,Ds({key:s+"."+S+".map",value:k[1],expressionContext:"cluster-map"})),y.push.apply(y,Ds({key:s+"."+S+".reduce",value:z,expressionContext:"cluster-reduce"}))}return y;case"video":return Fo({key:s,value:i,valueSpec:h.source_video,style:m,styleSpec:h});case"image":return Fo({key:s,value:i,valueSpec:h.source_image,style:m,styleSpec:h});case"canvas":return[new ne(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return fu({key:s+".type",value:i.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:m,styleSpec:h})}}function Bs(r){var i=r.value,s=r.styleSpec,h=s.light,m=r.style,y=[],_=Yr(i);if(i===void 0)return y;if(_!=="object")return y.concat([new ne("light",i,"object expected, "+_+" found")]);for(var S in i){var k=S.match(/^(.*)-transition$/);y=y.concat(k&&h[k[1]]&&h[k[1]].transition?mr({key:S,value:i[S],valueSpec:s.transition,style:m,styleSpec:s}):h[S]?mr({key:S,value:i[S],valueSpec:h[S],style:m,styleSpec:s}):[new ne(S,i[S],'unknown property "'+S+'"')])}return y}var Xa={"*":function(){return[]},array:em,boolean:function(r){var i=r.value,s=r.key,h=Yr(i);return h!=="boolean"?[new ne(s,i,"boolean expected, "+h+" found")]:[]},number:tm,color:function(r){var i=r.key,s=r.value,h=Yr(s);return h!=="string"?[new ne(i,s,"color expected, "+h+" found")]:dr(s)===null?[new ne(i,s,'color expected, "'+s+'" found')]:[]},constants:Ee,enum:fu,filter:Sh,function:rm,layer:om,object:Fo,source:xc,light:Bs,string:Os,formatted:function(r){return Os(r).length===0?[]:Ds(r)},resolvedImage:function(r){return Os(r).length===0?[]:Ds(r)}};function mr(r){var i=r.value,s=r.valueSpec,h=r.styleSpec;return s.expression&&dc(Ze(i))?rm(r):s.expression&&hu(Ue(i))?Ds(r):s.type&&Xa[s.type]?Xa[s.type](r):Fo(Ge({},r,{valueSpec:s.type?h[s.type]:s}))}function Jr(r){var i=r.value,s=r.key,h=Os(r);return h.length||(i.indexOf("{fontstack}")===-1&&h.push(new ne(s,i,'"glyphs" url must include a "{fontstack}" token')),i.indexOf("{range}")===-1&&h.push(new ne(s,i,'"glyphs" url must include a "{range}" token'))),h}function so(r,i){i===void 0&&(i=H);var s=[];return s=s.concat(mr({key:"",value:r,valueSpec:i.$root,styleSpec:i,style:r,objectElementValidators:{glyphs:Jr,"*":function(){return[]}}})),r.constants&&(s=s.concat(Ee({key:"constants",value:r.constants,style:r,styleSpec:i}))),yu(s)}function yu(r){return[].concat(r).sort(function(i,s){return i.line-s.line})}function _l(r){return function(){for(var i=[],s=arguments.length;s--;)i[s]=arguments[s];return yu(r.apply(this,i))}}so.source=_l(xc),so.light=_l(Bs),so.layer=_l(om),so.filter=_l(Sh),so.paintProperty=_l(Ch),so.layoutProperty=_l(mu);var gu=so,l0=gu.light,u0=gu.paintProperty,vu=gu.layoutProperty;function _u(r,i){var s=!1;if(i&&i.length)for(var h=0,m=i;h<m.length;h+=1)r.fire(new me(new Error(m[h].message))),s=!0;return s}var wa=Nn;function Nn(r,i,s){var h=this.cells=[];if(r instanceof ArrayBuffer){this.arrayBuffer=r;var m=new Int32Array(this.arrayBuffer);r=m[0],this.d=(i=m[1])+2*(s=m[2]);for(var y=0;y<this.d*this.d;y++){var _=m[3+y],S=m[3+y+1];h.push(_===S?null:m.subarray(_,S))}var k=m[3+h.length+1];this.keys=m.subarray(m[3+h.length],k),this.bboxes=m.subarray(k),this.insert=this._insertReadonly}else{this.d=i+2*s;for(var A=0;A<this.d*this.d;A++)h.push([]);this.keys=[],this.bboxes=[]}this.n=i,this.extent=r,this.padding=s,this.scale=i/r,this.uid=0;var z=s/i*r;this.min=-z,this.max=r+z}Nn.prototype.insert=function(r,i,s,h,m){this._forEachCell(i,s,h,m,this._insertCell,this.uid++),this.keys.push(r),this.bboxes.push(i),this.bboxes.push(s),this.bboxes.push(h),this.bboxes.push(m)},Nn.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Nn.prototype._insertCell=function(r,i,s,h,m,y){this.cells[m].push(y)},Nn.prototype.query=function(r,i,s,h,m){var y=this.min,_=this.max;if(r<=y&&i<=y&&_<=s&&_<=h&&!m)return Array.prototype.slice.call(this.keys);var S=[];return this._forEachCell(r,i,s,h,this._queryCell,S,{},m),S},Nn.prototype._queryCell=function(r,i,s,h,m,y,_,S){var k=this.cells[m];if(k!==null)for(var A=this.keys,z=this.bboxes,D=0;D<k.length;D++){var $=k[D];if(_[$]===void 0){var G=4*$;(S?S(z[G+0],z[G+1],z[G+2],z[G+3]):r<=z[G+2]&&i<=z[G+3]&&s>=z[G+0]&&h>=z[G+1])?(_[$]=!0,y.push(A[$])):_[$]=!1}}},Nn.prototype._forEachCell=function(r,i,s,h,m,y,_,S){for(var k=this._convertToCellCoord(r),A=this._convertToCellCoord(i),z=this._convertToCellCoord(s),D=this._convertToCellCoord(h),$=k;$<=z;$++)for(var G=A;G<=D;G++){var ae=this.d*G+$;if((!S||S(this._convertFromCellCoord($),this._convertFromCellCoord(G),this._convertFromCellCoord($+1),this._convertFromCellCoord(G+1)))&&m.call(this,r,i,s,h,ae,y,_,S))return}},Nn.prototype._convertFromCellCoord=function(r){return(r-this.padding)/this.scale},Nn.prototype._convertToCellCoord=function(r){return Math.max(0,Math.min(this.d-1,Math.floor(r*this.scale)+this.padding))},Nn.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var r=this.cells,i=3+this.cells.length+1+1,s=0,h=0;h<this.cells.length;h++)s+=this.cells[h].length;var m=new Int32Array(i+s+this.keys.length+this.bboxes.length);m[0]=this.extent,m[1]=this.n,m[2]=this.padding;for(var y=i,_=0;_<r.length;_++){var S=r[_];m[3+_]=y,m.set(S,y),y+=S.length}return m[3+r.length]=y,m.set(this.keys,y),m[3+r.length+1]=y+=this.keys.length,m.set(this.bboxes,y),y+=this.bboxes.length,m.buffer};var xu=P.ImageData,am=P.ImageBitmap,Rn={};function gt(r,i,s){s===void 0&&(s={}),Object.defineProperty(i,"_classRegistryKey",{value:r,writeable:!1}),Rn[r]={klass:i,omit:s.omit||[],shallow:s.shallow||[]}}for(var Hi in gt("Object",Object),wa.serialize=function(r,i){var s=r.toArrayBuffer();return i&&i.push(s),{buffer:s}},wa.deserialize=function(r){return new wa(r.buffer)},gt("Grid",wa),gt("Color",Ir),gt("Error",Error),gt("ResolvedImage",Li),gt("StylePropertyFunction",vl),gt("StyleExpression",yl,{omit:["_evaluator"]}),gt("ZoomDependentExpression",gl),gt("ZoomConstantExpression",du),gt("CompoundExpression",ui,{omit:["_evaluate"]}),Ms)Ms[Hi]._classRegistryKey||gt("Expression_"+Hi,Ms[Hi]);function bc(r){return r&&typeof ArrayBuffer<"u"&&(r instanceof ArrayBuffer||r.constructor&&r.constructor.name==="ArrayBuffer")}function xl(r){return am&&r instanceof am}function jo(r,i){if(r==null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp)return r;if(bc(r)||xl(r))return i&&i.push(r),r;if(ArrayBuffer.isView(r)){var s=r;return i&&i.push(s.buffer),s}if(r instanceof xu)return i&&i.push(r.data.buffer),r;if(Array.isArray(r)){for(var h=[],m=0,y=r;m<y.length;m+=1)h.push(jo(y[m],i));return h}if(typeof r=="object"){var _=r.constructor,S=_._classRegistryKey;if(!S)throw new Error("can't serialize object of unregistered class");var k=_.serialize?_.serialize(r,i):{};if(!_.serialize){for(var A in r)if(r.hasOwnProperty(A)&&!(Rn[S].omit.indexOf(A)>=0)){var z=r[A];k[A]=Rn[S].shallow.indexOf(A)>=0?z:jo(z,i)}r instanceof Error&&(k.message=r.message)}if(k.$name)throw new Error("$name property is reserved for worker serialization logic.");return S!=="Object"&&(k.$name=S),k}throw new Error("can't serialize object of type "+typeof r)}function Ki(r){if(r==null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp||bc(r)||xl(r)||ArrayBuffer.isView(r)||r instanceof xu)return r;if(Array.isArray(r))return r.map(Ki);if(typeof r=="object"){var i=r.$name||"Object",s=Rn[i].klass;if(!s)throw new Error("can't deserialize unregistered class "+i);if(s.deserialize)return s.deserialize(r);for(var h=Object.create(s.prototype),m=0,y=Object.keys(r);m<y.length;m+=1){var _=y[m];if(_!=="$name"){var S=r[_];h[_]=Rn[i].shallow.indexOf(_)>=0?S:Ki(S)}}return h}throw new Error("can't deserialize object of type "+typeof r)}var kh=function(){this.first=!0};kh.prototype.update=function(r,i){var s=Math.floor(r);return this.first?(this.first=!1,this.lastIntegerZoom=s,this.lastIntegerZoomTime=0,this.lastZoom=r,this.lastFloorZoom=s,!0):(this.lastFloorZoom>s?(this.lastIntegerZoom=s+1,this.lastIntegerZoomTime=i):this.lastFloorZoom<s&&(this.lastIntegerZoom=s,this.lastIntegerZoomTime=i),r!==this.lastZoom&&(this.lastZoom=r,this.lastFloorZoom=s,!0))};var ot={"Latin-1 Supplement":function(r){return r>=128&&r<=255},Arabic:function(r){return r>=1536&&r<=1791},"Arabic Supplement":function(r){return r>=1872&&r<=1919},"Arabic Extended-A":function(r){return r>=2208&&r<=2303},"Hangul Jamo":function(r){return r>=4352&&r<=4607},"Unified Canadian Aboriginal Syllabics":function(r){return r>=5120&&r<=5759},Khmer:function(r){return r>=6016&&r<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(r){return r>=6320&&r<=6399},"General Punctuation":function(r){return r>=8192&&r<=8303},"Letterlike Symbols":function(r){return r>=8448&&r<=8527},"Number Forms":function(r){return r>=8528&&r<=8591},"Miscellaneous Technical":function(r){return r>=8960&&r<=9215},"Control Pictures":function(r){return r>=9216&&r<=9279},"Optical Character Recognition":function(r){return r>=9280&&r<=9311},"Enclosed Alphanumerics":function(r){return r>=9312&&r<=9471},"Geometric Shapes":function(r){return r>=9632&&r<=9727},"Miscellaneous Symbols":function(r){return r>=9728&&r<=9983},"Miscellaneous Symbols and Arrows":function(r){return r>=11008&&r<=11263},"CJK Radicals Supplement":function(r){return r>=11904&&r<=12031},"Kangxi Radicals":function(r){return r>=12032&&r<=12255},"Ideographic Description Characters":function(r){return r>=12272&&r<=12287},"CJK Symbols and Punctuation":function(r){return r>=12288&&r<=12351},Hiragana:function(r){return r>=12352&&r<=12447},Katakana:function(r){return r>=12448&&r<=12543},Bopomofo:function(r){return r>=12544&&r<=12591},"Hangul Compatibility Jamo":function(r){return r>=12592&&r<=12687},Kanbun:function(r){return r>=12688&&r<=12703},"Bopomofo Extended":function(r){return r>=12704&&r<=12735},"CJK Strokes":function(r){return r>=12736&&r<=12783},"Katakana Phonetic Extensions":function(r){return r>=12784&&r<=12799},"Enclosed CJK Letters and Months":function(r){return r>=12800&&r<=13055},"CJK Compatibility":function(r){return r>=13056&&r<=13311},"CJK Unified Ideographs Extension A":function(r){return r>=13312&&r<=19903},"Yijing Hexagram Symbols":function(r){return r>=19904&&r<=19967},"CJK Unified Ideographs":function(r){return r>=19968&&r<=40959},"Yi Syllables":function(r){return r>=40960&&r<=42127},"Yi Radicals":function(r){return r>=42128&&r<=42191},"Hangul Jamo Extended-A":function(r){return r>=43360&&r<=43391},"Hangul Syllables":function(r){return r>=44032&&r<=55215},"Hangul Jamo Extended-B":function(r){return r>=55216&&r<=55295},"Private Use Area":function(r){return r>=57344&&r<=63743},"CJK Compatibility Ideographs":function(r){return r>=63744&&r<=64255},"Arabic Presentation Forms-A":function(r){return r>=64336&&r<=65023},"Vertical Forms":function(r){return r>=65040&&r<=65055},"CJK Compatibility Forms":function(r){return r>=65072&&r<=65103},"Small Form Variants":function(r){return r>=65104&&r<=65135},"Arabic Presentation Forms-B":function(r){return r>=65136&&r<=65279},"Halfwidth and Fullwidth Forms":function(r){return r>=65280&&r<=65519}};function Th(r){for(var i=0,s=r;i<s.length;i+=1)if(wc(s[i].charCodeAt(0)))return!0;return!1}function wc(r){return!(r!==746&&r!==747&&(r<4352||!(ot["Bopomofo Extended"](r)||ot.Bopomofo(r)||ot["CJK Compatibility Forms"](r)&&!(r>=65097&&r<=65103)||ot["CJK Compatibility Ideographs"](r)||ot["CJK Compatibility"](r)||ot["CJK Radicals Supplement"](r)||ot["CJK Strokes"](r)||!(!ot["CJK Symbols and Punctuation"](r)||r>=12296&&r<=12305||r>=12308&&r<=12319||r===12336)||ot["CJK Unified Ideographs Extension A"](r)||ot["CJK Unified Ideographs"](r)||ot["Enclosed CJK Letters and Months"](r)||ot["Hangul Compatibility Jamo"](r)||ot["Hangul Jamo Extended-A"](r)||ot["Hangul Jamo Extended-B"](r)||ot["Hangul Jamo"](r)||ot["Hangul Syllables"](r)||ot.Hiragana(r)||ot["Ideographic Description Characters"](r)||ot.Kanbun(r)||ot["Kangxi Radicals"](r)||ot["Katakana Phonetic Extensions"](r)||ot.Katakana(r)&&r!==12540||!(!ot["Halfwidth and Fullwidth Forms"](r)||r===65288||r===65289||r===65293||r>=65306&&r<=65310||r===65339||r===65341||r===65343||r>=65371&&r<=65503||r===65507||r>=65512&&r<=65519)||!(!ot["Small Form Variants"](r)||r>=65112&&r<=65118||r>=65123&&r<=65126)||ot["Unified Canadian Aboriginal Syllabics"](r)||ot["Unified Canadian Aboriginal Syllabics Extended"](r)||ot["Vertical Forms"](r)||ot["Yijing Hexagram Symbols"](r)||ot["Yi Syllables"](r)||ot["Yi Radicals"](r))))}function Ih(r){return!(wc(r)||function(i){return!!(ot["Latin-1 Supplement"](i)&&(i===167||i===169||i===174||i===177||i===188||i===189||i===190||i===215||i===247)||ot["General Punctuation"](i)&&(i===8214||i===8224||i===8225||i===8240||i===8241||i===8251||i===8252||i===8258||i===8263||i===8264||i===8265||i===8273)||ot["Letterlike Symbols"](i)||ot["Number Forms"](i)||ot["Miscellaneous Technical"](i)&&(i>=8960&&i<=8967||i>=8972&&i<=8991||i>=8996&&i<=9e3||i===9003||i>=9085&&i<=9114||i>=9150&&i<=9165||i===9167||i>=9169&&i<=9179||i>=9186&&i<=9215)||ot["Control Pictures"](i)&&i!==9251||ot["Optical Character Recognition"](i)||ot["Enclosed Alphanumerics"](i)||ot["Geometric Shapes"](i)||ot["Miscellaneous Symbols"](i)&&!(i>=9754&&i<=9759)||ot["Miscellaneous Symbols and Arrows"](i)&&(i>=11026&&i<=11055||i>=11088&&i<=11097||i>=11192&&i<=11243)||ot["CJK Symbols and Punctuation"](i)||ot.Katakana(i)||ot["Private Use Area"](i)||ot["CJK Compatibility Forms"](i)||ot["Small Form Variants"](i)||ot["Halfwidth and Fullwidth Forms"](i)||i===8734||i===8756||i===8757||i>=9984&&i<=10087||i>=10102&&i<=10131||i===65532||i===65533)}(r))}function xo(r){return r>=1424&&r<=2303||ot["Arabic Presentation Forms-A"](r)||ot["Arabic Presentation Forms-B"](r)}function Zi(r,i){return!(!i&&xo(r)||r>=2304&&r<=3583||r>=3840&&r<=4255||ot.Khmer(r))}function Sc(r){for(var i=0,s=r;i<s.length;i+=1)if(xo(s[i].charCodeAt(0)))return!0;return!1}var Ec=null,Xi="unavailable",Sa=null,sm=function(r){r&&typeof r=="string"&&r.indexOf("NetworkError")>-1&&(Xi="error"),Ec&&Ec(r)};function bu(){Ph.fire(new re("pluginStateChange",{pluginStatus:Xi,pluginURL:Sa}))}var Ph=new ye,Ah=function(){return Xi},Uo=function(){if(Xi!=="deferred"||!Sa)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Xi="loading",bu(),Sa&&Rr({url:Sa},function(r){r?sm(r):(Xi="loaded",bu())})},lo={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Xi==="loaded"||lo.applyArabicShaping!=null},isLoading:function(){return Xi==="loading"},setState:function(r){Xi=r.pluginStatus,Sa=r.pluginURL},isParsed:function(){return lo.applyArabicShaping!=null&&lo.processBidirectionalText!=null&&lo.processStyledBidirectionalText!=null},getPluginURL:function(){return Sa}},cr=function(r,i){this.zoom=r,i?(this.now=i.now,this.fadeDuration=i.fadeDuration,this.zoomHistory=i.zoomHistory,this.transition=i.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new kh,this.transition={})};cr.prototype.isSupportedScript=function(r){return function(i,s){for(var h=0,m=i;h<m.length;h+=1)if(!Zi(m[h].charCodeAt(0),s))return!1;return!0}(r,lo.isLoaded())},cr.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},cr.prototype.getCrossfadeParameters=function(){var r=this.zoom,i=r-Math.floor(r),s=this.crossFadingFactor();return r>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:i+(1-i)*s}:{fromScale:.5,toScale:1,t:1-(1-s)*i}};var oa=function(r,i){this.property=r,this.value=i,this.expression=function(s,h){if(dc(s))return new vl(s,h);if(hu(s)){var m=Qf(s,h);if(m.result==="error")throw new Error(m.value.map(function(_){return _.key+": "+_.message}).join(", "));return m.value}var y=s;return typeof s=="string"&&h.type==="color"&&(y=Ir.parse(s)),{kind:"constant",evaluate:function(){return y}}}(i===void 0?r.specification.default:i,r.specification)};oa.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},oa.prototype.possiblyEvaluate=function(r,i,s){return this.property.possiblyEvaluate(this,r,i,s)};var bo=function(r){this.property=r,this.value=new oa(r,void 0)};bo.prototype.transitioned=function(r,i){return new Ns(this.property,this.value,i,F({},r.transition,this.transition),r.now)},bo.prototype.untransitioned=function(){return new Ns(this.property,this.value,null,{},0)};var pi=function(r){this._properties=r,this._values=Object.create(r.defaultTransitionablePropertyValues)};pi.prototype.getValue=function(r){return we(this._values[r].value.value)},pi.prototype.setValue=function(r,i){this._values.hasOwnProperty(r)||(this._values[r]=new bo(this._values[r].property)),this._values[r].value=new oa(this._values[r].property,i===null?void 0:we(i))},pi.prototype.getTransition=function(r){return we(this._values[r].transition)},pi.prototype.setTransition=function(r,i){this._values.hasOwnProperty(r)||(this._values[r]=new bo(this._values[r].property)),this._values[r].transition=we(i)||void 0},pi.prototype.serialize=function(){for(var r={},i=0,s=Object.keys(this._values);i<s.length;i+=1){var h=s[i],m=this.getValue(h);m!==void 0&&(r[h]=m);var y=this.getTransition(h);y!==void 0&&(r[h+"-transition"]=y)}return r},pi.prototype.transitioned=function(r,i){for(var s=new Ya(this._properties),h=0,m=Object.keys(this._values);h<m.length;h+=1){var y=m[h];s._values[y]=this._values[y].transitioned(r,i._values[y])}return s},pi.prototype.untransitioned=function(){for(var r=new Ya(this._properties),i=0,s=Object.keys(this._values);i<s.length;i+=1){var h=s[i];r._values[h]=this._values[h].untransitioned()}return r};var Ns=function(r,i,s,h,m){this.property=r,this.value=i,this.begin=m+h.delay||0,this.end=this.begin+h.duration||0,r.specification.transition&&(h.delay||h.duration)&&(this.prior=s)};Ns.prototype.possiblyEvaluate=function(r,i,s){var h=r.now||0,m=this.value.possiblyEvaluate(r,i,s),y=this.prior;if(y){if(h>this.end)return this.prior=null,m;if(this.value.isDataDriven())return this.prior=null,m;if(h<this.begin)return y.possiblyEvaluate(r,i,s);var _=(h-this.begin)/(this.end-this.begin);return this.property.interpolate(y.possiblyEvaluate(r,i,s),m,function(S){if(S<=0)return 0;if(S>=1)return 1;var k=S*S,A=k*S;return 4*(S<.5?A:3*(S-k)+A-.75)}(_))}return m};var Ya=function(r){this._properties=r,this._values=Object.create(r.defaultTransitioningPropertyValues)};Ya.prototype.possiblyEvaluate=function(r,i,s){for(var h=new wu(this._properties),m=0,y=Object.keys(this._values);m<y.length;m+=1){var _=y[m];h._values[_]=this._values[_].possiblyEvaluate(r,i,s)}return h},Ya.prototype.hasTransition=function(){for(var r=0,i=Object.keys(this._values);r<i.length;r+=1)if(this._values[i[r]].prior)return!0;return!1};var $o=function(r){this._properties=r,this._values=Object.create(r.defaultPropertyValues)};$o.prototype.getValue=function(r){return we(this._values[r].value)},$o.prototype.setValue=function(r,i){this._values[r]=new oa(this._values[r].property,i===null?void 0:we(i))},$o.prototype.serialize=function(){for(var r={},i=0,s=Object.keys(this._values);i<s.length;i+=1){var h=s[i],m=this.getValue(h);m!==void 0&&(r[h]=m)}return r},$o.prototype.possiblyEvaluate=function(r,i,s){for(var h=new wu(this._properties),m=0,y=Object.keys(this._values);m<y.length;m+=1){var _=y[m];h._values[_]=this._values[_].possiblyEvaluate(r,i,s)}return h};var Ei=function(r,i,s){this.property=r,this.value=i,this.parameters=s};Ei.prototype.isConstant=function(){return this.value.kind==="constant"},Ei.prototype.constantOr=function(r){return this.value.kind==="constant"?this.value.value:r},Ei.prototype.evaluate=function(r,i,s,h){return this.property.evaluate(this.value,this.parameters,r,i,s,h)};var wu=function(r){this._properties=r,this._values=Object.create(r.defaultPossiblyEvaluatedValues)};wu.prototype.get=function(r){return this._values[r]};var St=function(r){this.specification=r};St.prototype.possiblyEvaluate=function(r,i){return r.expression.evaluate(i)},St.prototype.interpolate=function(r,i,s){var h=fl[this.specification.type];return h?h(r,i,s):r};var _t=function(r,i){this.specification=r,this.overrides=i};_t.prototype.possiblyEvaluate=function(r,i,s,h){return new Ei(this,r.expression.kind==="constant"||r.expression.kind==="camera"?{kind:"constant",value:r.expression.evaluate(i,null,{},s,h)}:r.expression,i)},_t.prototype.interpolate=function(r,i,s){if(r.value.kind!=="constant"||i.value.kind!=="constant")return r;if(r.value.value===void 0||i.value.value===void 0)return new Ei(this,{kind:"constant",value:void 0},r.parameters);var h=fl[this.specification.type];return h?new Ei(this,{kind:"constant",value:h(r.value.value,i.value.value,s)},r.parameters):r},_t.prototype.evaluate=function(r,i,s,h,m,y){return r.kind==="constant"?r.value:r.evaluate(i,s,h,m,y)};var Cc=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.possiblyEvaluate=function(s,h,m,y){if(s.value===void 0)return new Ei(this,{kind:"constant",value:void 0},h);if(s.expression.kind==="constant"){var _=s.expression.evaluate(h,null,{},m,y),S=s.property.specification.type==="resolvedImage"&&typeof _!="string"?_.name:_,k=this._calculate(S,S,S,h);return new Ei(this,{kind:"constant",value:k},h)}if(s.expression.kind==="camera"){var A=this._calculate(s.expression.evaluate({zoom:h.zoom-1}),s.expression.evaluate({zoom:h.zoom}),s.expression.evaluate({zoom:h.zoom+1}),h);return new Ei(this,{kind:"constant",value:A},h)}return new Ei(this,s.expression,h)},i.prototype.evaluate=function(s,h,m,y,_,S){if(s.kind==="source"){var k=s.evaluate(h,m,y,_,S);return this._calculate(k,k,k,h)}return s.kind==="composite"?this._calculate(s.evaluate({zoom:Math.floor(h.zoom)-1},m,y),s.evaluate({zoom:Math.floor(h.zoom)},m,y),s.evaluate({zoom:Math.floor(h.zoom)+1},m,y),h):s.value},i.prototype._calculate=function(s,h,m,y){return y.zoom>y.zoomHistory.lastIntegerZoom?{from:s,to:h}:{from:m,to:h}},i.prototype.interpolate=function(s){return s},i}(_t),Ci=function(r){this.specification=r};Ci.prototype.possiblyEvaluate=function(r,i,s,h){if(r.value!==void 0){if(r.expression.kind==="constant"){var m=r.expression.evaluate(i,null,{},s,h);return this._calculate(m,m,m,i)}return this._calculate(r.expression.evaluate(new cr(Math.floor(i.zoom-1),i)),r.expression.evaluate(new cr(Math.floor(i.zoom),i)),r.expression.evaluate(new cr(Math.floor(i.zoom+1),i)),i)}},Ci.prototype._calculate=function(r,i,s,h){return h.zoom>h.zoomHistory.lastIntegerZoom?{from:r,to:i}:{from:s,to:i}},Ci.prototype.interpolate=function(r){return r};var Vo=function(r){this.specification=r};Vo.prototype.possiblyEvaluate=function(r,i,s,h){return!!r.expression.evaluate(i,null,{},s,h)},Vo.prototype.interpolate=function(){return!1};var hi=function(r){for(var i in this.properties=r,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],r){var s=r[i];s.specification.overridable&&this.overridableProperties.push(i);var h=this.defaultPropertyValues[i]=new oa(s,void 0),m=this.defaultTransitionablePropertyValues[i]=new bo(s);this.defaultTransitioningPropertyValues[i]=m.untransitioned(),this.defaultPossiblyEvaluatedValues[i]=h.possiblyEvaluate({})}};gt("DataDrivenProperty",_t),gt("DataConstantProperty",St),gt("CrossFadedDataDrivenProperty",Cc),gt("CrossFadedProperty",Ci),gt("ColorRampProperty",Vo);var aa=function(r){function i(s,h){if(r.call(this),this.id=s.id,this.type=s.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},s.type!=="custom"&&(this.metadata=(s=s).metadata,this.minzoom=s.minzoom,this.maxzoom=s.maxzoom,s.type!=="background"&&(this.source=s.source,this.sourceLayer=s["source-layer"],this.filter=s.filter),h.layout&&(this._unevaluatedLayout=new $o(h.layout)),h.paint)){for(var m in this._transitionablePaint=new pi(h.paint),s.paint)this.setPaintProperty(m,s.paint[m],{validate:!1});for(var y in s.layout)this.setLayoutProperty(y,s.layout[y],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new wu(h.paint)}}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},i.prototype.getLayoutProperty=function(s){return s==="visibility"?this.visibility:this._unevaluatedLayout.getValue(s)},i.prototype.setLayoutProperty=function(s,h,m){m===void 0&&(m={}),h!=null&&this._validate(vu,"layers."+this.id+".layout."+s,s,h,m)||(s!=="visibility"?this._unevaluatedLayout.setValue(s,h):this.visibility=h)},i.prototype.getPaintProperty=function(s){return _e(s,"-transition")?this._transitionablePaint.getTransition(s.slice(0,-11)):this._transitionablePaint.getValue(s)},i.prototype.setPaintProperty=function(s,h,m){if(m===void 0&&(m={}),h!=null&&this._validate(u0,"layers."+this.id+".paint."+s,s,h,m))return!1;if(_e(s,"-transition"))return this._transitionablePaint.setTransition(s.slice(0,-11),h||void 0),!1;var y=this._transitionablePaint._values[s],_=y.property.specification["property-type"]==="cross-faded-data-driven",S=y.value.isDataDriven(),k=y.value;this._transitionablePaint.setValue(s,h),this._handleSpecialPaintPropertyUpdate(s);var A=this._transitionablePaint._values[s].value;return A.isDataDriven()||S||_||this._handleOverridablePaintPropertyUpdate(s,k,A)},i.prototype._handleSpecialPaintPropertyUpdate=function(s){},i.prototype._handleOverridablePaintPropertyUpdate=function(s,h,m){return!1},i.prototype.isHidden=function(s){return!!(this.minzoom&&s<this.minzoom)||!!(this.maxzoom&&s>=this.maxzoom)||this.visibility==="none"},i.prototype.updateTransitions=function(s){this._transitioningPaint=this._transitionablePaint.transitioned(s,this._transitioningPaint)},i.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},i.prototype.recalculate=function(s,h){s.getCrossfadeParameters&&(this._crossfadeParameters=s.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(s,void 0,h)),this.paint=this._transitioningPaint.possiblyEvaluate(s,void 0,h)},i.prototype.serialize=function(){var s={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(s.layout=s.layout||{},s.layout.visibility=this.visibility),he(s,function(h,m){return!(h===void 0||m==="layout"&&!Object.keys(h).length||m==="paint"&&!Object.keys(h).length)})},i.prototype._validate=function(s,h,m,y,_){return _===void 0&&(_={}),(!_||_.validate!==!1)&&_u(this,s.call(gu,{key:h,layerType:this.type,objectKey:m,value:y,styleSpec:H,style:{glyphs:!0,sprite:!0}}))},i.prototype.is3D=function(){return!1},i.prototype.isTileClipped=function(){return!1},i.prototype.hasOffscreenPass=function(){return!1},i.prototype.resize=function(){},i.prototype.isStateDependent=function(){for(var s in this.paint._values){var h=this.paint.get(s);if(h instanceof Ei&&Ls(h.property.specification)&&(h.value.kind==="source"||h.value.kind==="composite")&&h.value.isStateDependent)return!0}return!1},i}(ye),Mh={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},kc=function(r,i){this._structArray=r,this._pos1=i*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Dr=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function ti(r,i){i===void 0&&(i=1);var s=0,h=0;return{members:r.map(function(m){var y=Mh[m.type].BYTES_PER_ELEMENT,_=s=lm(s,Math.max(i,y)),S=m.components||1;return h=Math.max(h,y),s+=y*S,{name:m.name,type:m.type,components:S,offset:_}}),size:lm(s,Math.max(h,i)),alignment:i}}function lm(r,i){return Math.ceil(r/i)*i}Dr.serialize=function(r,i){return r._trim(),i&&(r.isTransferred=!0,i.push(r.arrayBuffer)),{length:r.length,arrayBuffer:r.arrayBuffer}},Dr.deserialize=function(r){var i=Object.create(this.prototype);return i.arrayBuffer=r.arrayBuffer,i.length=r.length,i.capacity=r.arrayBuffer.byteLength/i.bytesPerElement,i._refreshViews(),i},Dr.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Dr.prototype.clear=function(){this.length=0},Dr.prototype.resize=function(r){this.reserve(r),this.length=r},Dr.prototype.reserve=function(r){if(r>this.capacity){this.capacity=Math.max(r,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var i=this.uint8;this._refreshViews(),i&&this.uint8.set(i)}},Dr.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Fs=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,h){var m=this.length;return this.resize(m+1),this.emplace(m,s,h)},i.prototype.emplace=function(s,h,m){var y=2*s;return this.int16[y+0]=h,this.int16[y+1]=m,s},i}(Dr);Fs.prototype.bytesPerElement=4,gt("StructArrayLayout2i4",Fs);var zh=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,h,m,y){var _=this.length;return this.resize(_+1),this.emplace(_,s,h,m,y)},i.prototype.emplace=function(s,h,m,y,_){var S=4*s;return this.int16[S+0]=h,this.int16[S+1]=m,this.int16[S+2]=y,this.int16[S+3]=_,s},i}(Dr);zh.prototype.bytesPerElement=8,gt("StructArrayLayout4i8",zh);var Ea=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,h,m,y,_,S){var k=this.length;return this.resize(k+1),this.emplace(k,s,h,m,y,_,S)},i.prototype.emplace=function(s,h,m,y,_,S,k){var A=6*s;return this.int16[A+0]=h,this.int16[A+1]=m,this.int16[A+2]=y,this.int16[A+3]=_,this.int16[A+4]=S,this.int16[A+5]=k,s},i}(Dr);Ea.prototype.bytesPerElement=12,gt("StructArrayLayout2i4i12",Ea);var Yi=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,h,m,y,_,S){var k=this.length;return this.resize(k+1),this.emplace(k,s,h,m,y,_,S)},i.prototype.emplace=function(s,h,m,y,_,S,k){var A=4*s,z=8*s;return this.int16[A+0]=h,this.int16[A+1]=m,this.uint8[z+4]=y,this.uint8[z+5]=_,this.uint8[z+6]=S,this.uint8[z+7]=k,s},i}(Dr);Yi.prototype.bytesPerElement=8,gt("StructArrayLayout2i4ub8",Yi);var bl=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,h){var m=this.length;return this.resize(m+1),this.emplace(m,s,h)},i.prototype.emplace=function(s,h,m){var y=2*s;return this.float32[y+0]=h,this.float32[y+1]=m,s},i}(Dr);bl.prototype.bytesPerElement=8,gt("StructArrayLayout2f8",bl);var sa=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,h,m,y,_,S,k,A,z,D){var $=this.length;return this.resize($+1),this.emplace($,s,h,m,y,_,S,k,A,z,D)},i.prototype.emplace=function(s,h,m,y,_,S,k,A,z,D,$){var G=10*s;return this.uint16[G+0]=h,this.uint16[G+1]=m,this.uint16[G+2]=y,this.uint16[G+3]=_,this.uint16[G+4]=S,this.uint16[G+5]=k,this.uint16[G+6]=A,this.uint16[G+7]=z,this.uint16[G+8]=D,this.uint16[G+9]=$,s},i}(Dr);sa.prototype.bytesPerElement=20,gt("StructArrayLayout10ui20",sa);var Tc=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,h,m,y,_,S,k,A,z,D,$,G){var ae=this.length;return this.resize(ae+1),this.emplace(ae,s,h,m,y,_,S,k,A,z,D,$,G)},i.prototype.emplace=function(s,h,m,y,_,S,k,A,z,D,$,G,ae){var le=12*s;return this.int16[le+0]=h,this.int16[le+1]=m,this.int16[le+2]=y,this.int16[le+3]=_,this.uint16[le+4]=S,this.uint16[le+5]=k,this.uint16[le+6]=A,this.uint16[le+7]=z,this.int16[le+8]=D,this.int16[le+9]=$,this.int16[le+10]=G,this.int16[le+11]=ae,s},i}(Dr);Tc.prototype.bytesPerElement=24,gt("StructArrayLayout4i4ui4i24",Tc);var wl=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,h,m){var y=this.length;return this.resize(y+1),this.emplace(y,s,h,m)},i.prototype.emplace=function(s,h,m,y){var _=3*s;return this.float32[_+0]=h,this.float32[_+1]=m,this.float32[_+2]=y,s},i}(Dr);wl.prototype.bytesPerElement=12,gt("StructArrayLayout3f12",wl);var Su=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s){var h=this.length;return this.resize(h+1),this.emplace(h,s)},i.prototype.emplace=function(s,h){return this.uint32[1*s+0]=h,s},i}(Dr);Su.prototype.bytesPerElement=4,gt("StructArrayLayout1ul4",Su);var Rh=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,h,m,y,_,S,k,A,z){var D=this.length;return this.resize(D+1),this.emplace(D,s,h,m,y,_,S,k,A,z)},i.prototype.emplace=function(s,h,m,y,_,S,k,A,z,D){var $=10*s,G=5*s;return this.int16[$+0]=h,this.int16[$+1]=m,this.int16[$+2]=y,this.int16[$+3]=_,this.int16[$+4]=S,this.int16[$+5]=k,this.uint32[G+3]=A,this.uint16[$+8]=z,this.uint16[$+9]=D,s},i}(Dr);Rh.prototype.bytesPerElement=20,gt("StructArrayLayout6i1ul2ui20",Rh);var Sl=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,h,m,y,_,S){var k=this.length;return this.resize(k+1),this.emplace(k,s,h,m,y,_,S)},i.prototype.emplace=function(s,h,m,y,_,S,k){var A=6*s;return this.int16[A+0]=h,this.int16[A+1]=m,this.int16[A+2]=y,this.int16[A+3]=_,this.int16[A+4]=S,this.int16[A+5]=k,s},i}(Dr);Sl.prototype.bytesPerElement=12,gt("StructArrayLayout2i2i2i12",Sl);var js=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,h,m,y,_){var S=this.length;return this.resize(S+1),this.emplace(S,s,h,m,y,_)},i.prototype.emplace=function(s,h,m,y,_,S){var k=4*s,A=8*s;return this.float32[k+0]=h,this.float32[k+1]=m,this.float32[k+2]=y,this.int16[A+6]=_,this.int16[A+7]=S,s},i}(Dr);js.prototype.bytesPerElement=16,gt("StructArrayLayout2f1f2i16",js);var Lh=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,h,m,y){var _=this.length;return this.resize(_+1),this.emplace(_,s,h,m,y)},i.prototype.emplace=function(s,h,m,y,_){var S=12*s,k=3*s;return this.uint8[S+0]=h,this.uint8[S+1]=m,this.float32[k+1]=y,this.float32[k+2]=_,s},i}(Dr);Lh.prototype.bytesPerElement=12,gt("StructArrayLayout2ub2f12",Lh);var Ja=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,h,m){var y=this.length;return this.resize(y+1),this.emplace(y,s,h,m)},i.prototype.emplace=function(s,h,m,y){var _=3*s;return this.uint16[_+0]=h,this.uint16[_+1]=m,this.uint16[_+2]=y,s},i}(Dr);Ja.prototype.bytesPerElement=6,gt("StructArrayLayout3ui6",Ja);var Qa=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,h,m,y,_,S,k,A,z,D,$,G,ae,le,be,de,Ie){var Ae=this.length;return this.resize(Ae+1),this.emplace(Ae,s,h,m,y,_,S,k,A,z,D,$,G,ae,le,be,de,Ie)},i.prototype.emplace=function(s,h,m,y,_,S,k,A,z,D,$,G,ae,le,be,de,Ie,Ae){var Le=24*s,Be=12*s,We=48*s;return this.int16[Le+0]=h,this.int16[Le+1]=m,this.uint16[Le+2]=y,this.uint16[Le+3]=_,this.uint32[Be+2]=S,this.uint32[Be+3]=k,this.uint32[Be+4]=A,this.uint16[Le+10]=z,this.uint16[Le+11]=D,this.uint16[Le+12]=$,this.float32[Be+7]=G,this.float32[Be+8]=ae,this.uint8[We+36]=le,this.uint8[We+37]=be,this.uint8[We+38]=de,this.uint32[Be+10]=Ie,this.int16[Le+22]=Ae,s},i}(Dr);Qa.prototype.bytesPerElement=48,gt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Qa);var Ic=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,h,m,y,_,S,k,A,z,D,$,G,ae,le,be,de,Ie,Ae,Le,Be,We,Ye,nt,wt,ut,Ct,ht,ir){var Nt=this.length;return this.resize(Nt+1),this.emplace(Nt,s,h,m,y,_,S,k,A,z,D,$,G,ae,le,be,de,Ie,Ae,Le,Be,We,Ye,nt,wt,ut,Ct,ht,ir)},i.prototype.emplace=function(s,h,m,y,_,S,k,A,z,D,$,G,ae,le,be,de,Ie,Ae,Le,Be,We,Ye,nt,wt,ut,Ct,ht,ir,Nt){var xt=34*s,sr=17*s;return this.int16[xt+0]=h,this.int16[xt+1]=m,this.int16[xt+2]=y,this.int16[xt+3]=_,this.int16[xt+4]=S,this.int16[xt+5]=k,this.int16[xt+6]=A,this.int16[xt+7]=z,this.uint16[xt+8]=D,this.uint16[xt+9]=$,this.uint16[xt+10]=G,this.uint16[xt+11]=ae,this.uint16[xt+12]=le,this.uint16[xt+13]=be,this.uint16[xt+14]=de,this.uint16[xt+15]=Ie,this.uint16[xt+16]=Ae,this.uint16[xt+17]=Le,this.uint16[xt+18]=Be,this.uint16[xt+19]=We,this.uint16[xt+20]=Ye,this.uint16[xt+21]=nt,this.uint16[xt+22]=wt,this.uint32[sr+12]=ut,this.float32[sr+13]=Ct,this.float32[sr+14]=ht,this.float32[sr+15]=ir,this.float32[sr+16]=Nt,s},i}(Dr);Ic.prototype.bytesPerElement=68,gt("StructArrayLayout8i15ui1ul4f68",Ic);var es=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s){var h=this.length;return this.resize(h+1),this.emplace(h,s)},i.prototype.emplace=function(s,h){return this.float32[1*s+0]=h,s},i}(Dr);es.prototype.bytesPerElement=4,gt("StructArrayLayout1f4",es);var wo=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,h,m){var y=this.length;return this.resize(y+1),this.emplace(y,s,h,m)},i.prototype.emplace=function(s,h,m,y){var _=3*s;return this.int16[_+0]=h,this.int16[_+1]=m,this.int16[_+2]=y,s},i}(Dr);wo.prototype.bytesPerElement=6,gt("StructArrayLayout3i6",wo);var Dh=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,h,m){var y=this.length;return this.resize(y+1),this.emplace(y,s,h,m)},i.prototype.emplace=function(s,h,m,y){var _=4*s;return this.uint32[2*s+0]=h,this.uint16[_+2]=m,this.uint16[_+3]=y,s},i}(Dr);Dh.prototype.bytesPerElement=8,gt("StructArrayLayout1ul2ui8",Dh);var Eu=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,h){var m=this.length;return this.resize(m+1),this.emplace(m,s,h)},i.prototype.emplace=function(s,h,m){var y=2*s;return this.uint16[y+0]=h,this.uint16[y+1]=m,s},i}(Dr);Eu.prototype.bytesPerElement=4,gt("StructArrayLayout2ui4",Eu);var Oh=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s){var h=this.length;return this.resize(h+1),this.emplace(h,s)},i.prototype.emplace=function(s,h){return this.uint16[1*s+0]=h,s},i}(Dr);Oh.prototype.bytesPerElement=2,gt("StructArrayLayout1ui2",Oh);var Pc=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,h,m,y){var _=this.length;return this.resize(_+1),this.emplace(_,s,h,m,y)},i.prototype.emplace=function(s,h,m,y,_){var S=4*s;return this.float32[S+0]=h,this.float32[S+1]=m,this.float32[S+2]=y,this.float32[S+3]=_,s},i}(Dr);Pc.prototype.bytesPerElement=16,gt("StructArrayLayout4f16",Pc);var l=function(r){function i(){r.apply(this,arguments)}r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i;var s={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return s.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},s.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},s.x1.get=function(){return this._structArray.int16[this._pos2+2]},s.y1.get=function(){return this._structArray.int16[this._pos2+3]},s.x2.get=function(){return this._structArray.int16[this._pos2+4]},s.y2.get=function(){return this._structArray.int16[this._pos2+5]},s.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},s.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},s.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},s.anchorPoint.get=function(){return new T(this.anchorPointX,this.anchorPointY)},Object.defineProperties(i.prototype,s),i}(kc);l.prototype.size=20;var p=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.get=function(s){return new l(this,s)},i}(Rh);gt("CollisionBoxArray",p);var c=function(r){function i(){r.apply(this,arguments)}r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i;var s={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return s.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},s.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},s.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},s.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},s.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},s.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},s.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},s.segment.get=function(){return this._structArray.uint16[this._pos2+10]},s.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},s.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},s.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},s.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},s.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},s.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},s.placedOrientation.set=function(h){this._structArray.uint8[this._pos1+37]=h},s.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},s.hidden.set=function(h){this._structArray.uint8[this._pos1+38]=h},s.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},s.crossTileID.set=function(h){this._structArray.uint32[this._pos4+10]=h},s.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(i.prototype,s),i}(kc);c.prototype.size=48;var d=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.get=function(s){return new c(this,s)},i}(Qa);gt("PlacedSymbolArray",d);var g=function(r){function i(){r.apply(this,arguments)}r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i;var s={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return s.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},s.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},s.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},s.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},s.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},s.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},s.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},s.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},s.key.get=function(){return this._structArray.uint16[this._pos2+8]},s.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},s.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},s.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},s.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},s.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},s.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},s.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},s.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},s.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},s.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},s.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},s.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},s.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},s.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},s.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},s.crossTileID.set=function(h){this._structArray.uint32[this._pos4+12]=h},s.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},s.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},s.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},s.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(i.prototype,s),i}(kc);g.prototype.size=68;var b=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.get=function(s){return new g(this,s)},i}(Ic);gt("SymbolInstanceArray",b);var w=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.getoffsetX=function(s){return this.float32[1*s+0]},i}(es);gt("GlyphOffsetArray",w);var C=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.getx=function(s){return this.int16[3*s+0]},i.prototype.gety=function(s){return this.int16[3*s+1]},i.prototype.gettileUnitDistanceFromAnchor=function(s){return this.int16[3*s+2]},i}(wo);gt("SymbolLineVertexArray",C);var M=function(r){function i(){r.apply(this,arguments)}r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i;var s={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return s.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},s.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},s.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(i.prototype,s),i}(kc);M.prototype.size=8;var B=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.get=function(s){return new M(this,s)},i}(Dh);gt("FeatureIndexArray",B);var K=ti([{name:"a_pos",components:2,type:"Int16"}],4).members,Z=function(r){r===void 0&&(r=[]),this.segments=r};function Y(r,i){return 256*(r=J(Math.floor(r),0,255))+J(Math.floor(i),0,255)}Z.prototype.prepareSegment=function(r,i,s,h){var m=this.segments[this.segments.length-1];return r>Z.MAX_VERTEX_ARRAY_LENGTH&&ge("Max vertices per segment is "+Z.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+r),(!m||m.vertexLength+r>Z.MAX_VERTEX_ARRAY_LENGTH||m.sortKey!==h)&&(m={vertexOffset:i.length,primitiveOffset:s.length,vertexLength:0,primitiveLength:0},h!==void 0&&(m.sortKey=h),this.segments.push(m)),m},Z.prototype.get=function(){return this.segments},Z.prototype.destroy=function(){for(var r=0,i=this.segments;r<i.length;r+=1){var s=i[r];for(var h in s.vaos)s.vaos[h].destroy()}},Z.simpleSegment=function(r,i,s,h){return new Z([{vertexOffset:r,primitiveOffset:i,vertexLength:s,primitiveLength:h,vaos:{},sortKey:0}])},Z.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,gt("SegmentVector",Z);var ce=ti([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),ue=v(function(r){r.exports=function(i,s){var h,m,y,_,S,k,A,z;for(m=i.length-(h=3&i.length),y=s,S=3432918353,k=461845907,z=0;z<m;)A=255&i.charCodeAt(z)|(255&i.charCodeAt(++z))<<8|(255&i.charCodeAt(++z))<<16|(255&i.charCodeAt(++z))<<24,++z,y=27492+(65535&(_=5*(65535&(y=(y^=A=(65535&(A=(A=(65535&A)*S+(((A>>>16)*S&65535)<<16)&4294967295)<<15|A>>>17))*k+(((A>>>16)*k&65535)<<16)&4294967295)<<13|y>>>19))+((5*(y>>>16)&65535)<<16)&4294967295))+((58964+(_>>>16)&65535)<<16);switch(A=0,h){case 3:A^=(255&i.charCodeAt(z+2))<<16;case 2:A^=(255&i.charCodeAt(z+1))<<8;case 1:y^=A=(65535&(A=(A=(65535&(A^=255&i.charCodeAt(z)))*S+(((A>>>16)*S&65535)<<16)&4294967295)<<15|A>>>17))*k+(((A>>>16)*k&65535)<<16)&4294967295}return y^=i.length,y=2246822507*(65535&(y^=y>>>16))+((2246822507*(y>>>16)&65535)<<16)&4294967295,y=3266489909*(65535&(y^=y>>>13))+((3266489909*(y>>>16)&65535)<<16)&4294967295,(y^=y>>>16)>>>0}}),xe=v(function(r){r.exports=function(i,s){for(var h,m=i.length,y=s^m,_=0;m>=4;)h=1540483477*(65535&(h=255&i.charCodeAt(_)|(255&i.charCodeAt(++_))<<8|(255&i.charCodeAt(++_))<<16|(255&i.charCodeAt(++_))<<24))+((1540483477*(h>>>16)&65535)<<16),y=1540483477*(65535&y)+((1540483477*(y>>>16)&65535)<<16)^(h=1540483477*(65535&(h^=h>>>24))+((1540483477*(h>>>16)&65535)<<16)),m-=4,++_;switch(m){case 3:y^=(255&i.charCodeAt(_+2))<<16;case 2:y^=(255&i.charCodeAt(_+1))<<8;case 1:y=1540483477*(65535&(y^=255&i.charCodeAt(_)))+((1540483477*(y>>>16)&65535)<<16)}return y=1540483477*(65535&(y^=y>>>13))+((1540483477*(y>>>16)&65535)<<16),(y^=y>>>15)>>>0}}),oe=ue,ve=xe;oe.murmur3=ue,oe.murmur2=ve;var Se=function(){this.ids=[],this.positions=[],this.indexed=!1};Se.prototype.add=function(r,i,s,h){this.ids.push(Fe(r)),this.positions.push(i,s,h)},Se.prototype.getPositions=function(r){for(var i=Fe(r),s=0,h=this.ids.length-1;s<h;){var m=s+h>>1;this.ids[m]>=i?h=m:s=m+1}for(var y=[];this.ids[s]===i;)y.push({index:this.positions[3*s],start:this.positions[3*s+1],end:this.positions[3*s+2]}),s++;return y},Se.serialize=function(r,i){var s=new Float64Array(r.ids),h=new Uint32Array(r.positions);return function m(y,_,S,k){for(;S<k;){for(var A=y[S+k>>1],z=S-1,D=k+1;;){do z++;while(y[z]<A);do D--;while(y[D]>A);if(z>=D)break;De(y,z,D),De(_,3*z,3*D),De(_,3*z+1,3*D+1),De(_,3*z+2,3*D+2)}D-S<k-D?(m(y,_,S,D),S=D+1):(m(y,_,D+1,k),k=D)}}(s,h,0,s.length-1),i&&i.push(s.buffer,h.buffer),{ids:s,positions:h}},Se.deserialize=function(r){var i=new Se;return i.ids=r.ids,i.positions=r.positions,i.indexed=!0,i};var Pe=Math.pow(2,53)-1;function Fe(r){var i=+r;return!isNaN(i)&&i<=Pe?i:oe(String(r))}function De(r,i,s){var h=r[i];r[i]=r[s],r[s]=h}gt("FeaturePositionMap",Se);var je=function(r,i){this.gl=r.gl,this.location=i},Ke=function(r){function i(s,h){r.call(this,s,h),this.current=0}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.set=function(s){this.current!==s&&(this.current=s,this.gl.uniform1i(this.location,s))},i}(je),tt=function(r){function i(s,h){r.call(this,s,h),this.current=0}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.set=function(s){this.current!==s&&(this.current=s,this.gl.uniform1f(this.location,s))},i}(je),Qe=function(r){function i(s,h){r.call(this,s,h),this.current=[0,0]}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.set=function(s){s[0]===this.current[0]&&s[1]===this.current[1]||(this.current=s,this.gl.uniform2f(this.location,s[0],s[1]))},i}(je),ft=function(r){function i(s,h){r.call(this,s,h),this.current=[0,0,0]}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.set=function(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]||(this.current=s,this.gl.uniform3f(this.location,s[0],s[1],s[2]))},i}(je),Et=function(r){function i(s,h){r.call(this,s,h),this.current=[0,0,0,0]}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.set=function(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]&&s[3]===this.current[3]||(this.current=s,this.gl.uniform4f(this.location,s[0],s[1],s[2],s[3]))},i}(je),It=function(r){function i(s,h){r.call(this,s,h),this.current=Ir.transparent}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.set=function(s){s.r===this.current.r&&s.g===this.current.g&&s.b===this.current.b&&s.a===this.current.a||(this.current=s,this.gl.uniform4f(this.location,s.r,s.g,s.b,s.a))},i}(je),Tt=new Float32Array(16),_r=function(r){function i(s,h){r.call(this,s,h),this.current=Tt}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.set=function(s){if(s[12]!==this.current[12]||s[0]!==this.current[0])return this.current=s,void this.gl.uniformMatrix4fv(this.location,!1,s);for(var h=1;h<16;h++)if(s[h]!==this.current[h]){this.current=s,this.gl.uniformMatrix4fv(this.location,!1,s);break}},i}(je);function mt(r){return[Y(255*r.r,255*r.g),Y(255*r.b,255*r.a)]}var qt=function(r,i,s){this.value=r,this.uniformNames=i.map(function(h){return"u_"+h}),this.type=s};qt.prototype.setUniform=function(r,i,s){r.set(s.constantOr(this.value))},qt.prototype.getBinding=function(r,i,s){return this.type==="color"?new It(r,i):new tt(r,i)};var rr=function(r,i){this.uniformNames=i.map(function(s){return"u_"+s}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};rr.prototype.setConstantPatternPositions=function(r,i){this.pixelRatioFrom=i.pixelRatio,this.pixelRatioTo=r.pixelRatio,this.patternFrom=i.tlbr,this.patternTo=r.tlbr},rr.prototype.setUniform=function(r,i,s,h){var m=h==="u_pattern_to"?this.patternTo:h==="u_pattern_from"?this.patternFrom:h==="u_pixel_ratio_to"?this.pixelRatioTo:h==="u_pixel_ratio_from"?this.pixelRatioFrom:null;m&&r.set(m)},rr.prototype.getBinding=function(r,i,s){return s.substr(0,9)==="u_pattern"?new Et(r,i):new tt(r,i)};var Vt=function(r,i,s,h){this.expression=r,this.type=s,this.maxValue=0,this.paintVertexAttributes=i.map(function(m){return{name:"a_"+m,type:"Float32",components:s==="color"?2:1,offset:0}}),this.paintVertexArray=new h};Vt.prototype.populatePaintArray=function(r,i,s,h,m){var y=this.paintVertexArray.length,_=this.expression.evaluate(new cr(0),i,{},h,[],m);this.paintVertexArray.resize(r),this._setPaintValue(y,r,_)},Vt.prototype.updatePaintArray=function(r,i,s,h){var m=this.expression.evaluate({zoom:0},s,h);this._setPaintValue(r,i,m)},Vt.prototype._setPaintValue=function(r,i,s){if(this.type==="color")for(var h=mt(s),m=r;m<i;m++)this.paintVertexArray.emplace(m,h[0],h[1]);else{for(var y=r;y<i;y++)this.paintVertexArray.emplace(y,s);this.maxValue=Math.max(this.maxValue,Math.abs(s))}},Vt.prototype.upload=function(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Vt.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Ut=function(r,i,s,h,m,y){this.expression=r,this.uniformNames=i.map(function(_){return"u_"+_+"_t"}),this.type=s,this.useIntegerZoom=h,this.zoom=m,this.maxValue=0,this.paintVertexAttributes=i.map(function(_){return{name:"a_"+_,type:"Float32",components:s==="color"?4:2,offset:0}}),this.paintVertexArray=new y};Ut.prototype.populatePaintArray=function(r,i,s,h,m){var y=this.expression.evaluate(new cr(this.zoom),i,{},h,[],m),_=this.expression.evaluate(new cr(this.zoom+1),i,{},h,[],m),S=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValue(S,r,y,_)},Ut.prototype.updatePaintArray=function(r,i,s,h){var m=this.expression.evaluate({zoom:this.zoom},s,h),y=this.expression.evaluate({zoom:this.zoom+1},s,h);this._setPaintValue(r,i,m,y)},Ut.prototype._setPaintValue=function(r,i,s,h){if(this.type==="color")for(var m=mt(s),y=mt(h),_=r;_<i;_++)this.paintVertexArray.emplace(_,m[0],m[1],y[0],y[1]);else{for(var S=r;S<i;S++)this.paintVertexArray.emplace(S,s,h);this.maxValue=Math.max(this.maxValue,Math.abs(s),Math.abs(h))}},Ut.prototype.upload=function(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ut.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Ut.prototype.setUniform=function(r,i){var s=this.useIntegerZoom?Math.floor(i.zoom):i.zoom,h=J(this.expression.interpolationFactor(s,this.zoom,this.zoom+1),0,1);r.set(h)},Ut.prototype.getBinding=function(r,i,s){return new tt(r,i)};var Jt=function(r,i,s,h,m,y){this.expression=r,this.type=i,this.useIntegerZoom=s,this.zoom=h,this.layerId=y,this.zoomInPaintVertexArray=new m,this.zoomOutPaintVertexArray=new m};Jt.prototype.populatePaintArray=function(r,i,s){var h=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(r),this.zoomOutPaintVertexArray.resize(r),this._setPaintValues(h,r,i.patterns&&i.patterns[this.layerId],s)},Jt.prototype.updatePaintArray=function(r,i,s,h,m){this._setPaintValues(r,i,s.patterns&&s.patterns[this.layerId],m)},Jt.prototype._setPaintValues=function(r,i,s,h){if(h&&s){var m=h[s.min],y=h[s.mid],_=h[s.max];if(m&&y&&_)for(var S=r;S<i;S++)this.zoomInPaintVertexArray.emplace(S,y.tl[0],y.tl[1],y.br[0],y.br[1],m.tl[0],m.tl[1],m.br[0],m.br[1],y.pixelRatio,m.pixelRatio),this.zoomOutPaintVertexArray.emplace(S,y.tl[0],y.tl[1],y.br[0],y.br[1],_.tl[0],_.tl[1],_.br[0],_.br[1],y.pixelRatio,_.pixelRatio)}},Jt.prototype.upload=function(r){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=r.createVertexBuffer(this.zoomInPaintVertexArray,ce.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=r.createVertexBuffer(this.zoomOutPaintVertexArray,ce.members,this.expression.isStateDependent))},Jt.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Ft=function(r,i,s){this.binders={},this._buffers=[];var h=[];for(var m in r.paint._values)if(s(m)){var y=r.paint.get(m);if(y instanceof Ei&&Ls(y.property.specification)){var _=Gn(m,r.type),S=y.value,k=y.property.specification.type,A=y.property.useIntegerZoom,z=y.property.specification["property-type"],D=z==="cross-faded"||z==="cross-faded-data-driven";if(S.kind==="constant")this.binders[m]=D?new rr(S.value,_):new qt(S.value,_,k),h.push("/u_"+m);else if(S.kind==="source"||D){var $=vn(m,k,"source");this.binders[m]=D?new Jt(S,k,A,i,$,r.id):new Vt(S,_,k,$),h.push("/a_"+m)}else{var G=vn(m,k,"composite");this.binders[m]=new Ut(S,_,k,A,i,G),h.push("/z_"+m)}}}this.cacheKey=h.sort().join("")};Ft.prototype.getMaxValue=function(r){var i=this.binders[r];return i instanceof Vt||i instanceof Ut?i.maxValue:0},Ft.prototype.populatePaintArrays=function(r,i,s,h,m){for(var y in this.binders){var _=this.binders[y];(_ instanceof Vt||_ instanceof Ut||_ instanceof Jt)&&_.populatePaintArray(r,i,s,h,m)}},Ft.prototype.setConstantPatternPositions=function(r,i){for(var s in this.binders){var h=this.binders[s];h instanceof rr&&h.setConstantPatternPositions(r,i)}},Ft.prototype.updatePaintArrays=function(r,i,s,h,m){var y=!1;for(var _ in r)for(var S=0,k=i.getPositions(_);S<k.length;S+=1){var A=k[S],z=s.feature(A.index);for(var D in this.binders){var $=this.binders[D];if(($ instanceof Vt||$ instanceof Ut||$ instanceof Jt)&&$.expression.isStateDependent===!0){var G=h.paint.get(D);$.expression=G.value,$.updatePaintArray(A.start,A.end,z,r[_],m),y=!0}}}return y},Ft.prototype.defines=function(){var r=[];for(var i in this.binders){var s=this.binders[i];(s instanceof qt||s instanceof rr)&&r.push.apply(r,s.uniformNames.map(function(h){return"#define HAS_UNIFORM_"+h}))}return r},Ft.prototype.getBinderAttributes=function(){var r=[];for(var i in this.binders){var s=this.binders[i];if(s instanceof Vt||s instanceof Ut)for(var h=0;h<s.paintVertexAttributes.length;h++)r.push(s.paintVertexAttributes[h].name);else if(s instanceof Jt)for(var m=0;m<ce.members.length;m++)r.push(ce.members[m].name)}return r},Ft.prototype.getBinderUniforms=function(){var r=[];for(var i in this.binders){var s=this.binders[i];if(s instanceof qt||s instanceof rr||s instanceof Ut)for(var h=0,m=s.uniformNames;h<m.length;h+=1)r.push(m[h])}return r},Ft.prototype.getPaintVertexBuffers=function(){return this._buffers},Ft.prototype.getUniforms=function(r,i){var s=[];for(var h in this.binders){var m=this.binders[h];if(m instanceof qt||m instanceof rr||m instanceof Ut)for(var y=0,_=m.uniformNames;y<_.length;y+=1){var S=_[y];if(i[S]){var k=m.getBinding(r,i[S],S);s.push({name:S,property:h,binding:k})}}}return s},Ft.prototype.setUniforms=function(r,i,s,h){for(var m=0,y=i;m<y.length;m+=1){var _=y[m],S=_.name,k=_.property;this.binders[k].setUniform(_.binding,h,s.get(k),S)}},Ft.prototype.updatePaintBuffers=function(r){for(var i in this._buffers=[],this.binders){var s=this.binders[i];if(r&&s instanceof Jt){var h=r.fromScale===2?s.zoomInPaintVertexBuffer:s.zoomOutPaintVertexBuffer;h&&this._buffers.push(h)}else(s instanceof Vt||s instanceof Ut)&&s.paintVertexBuffer&&this._buffers.push(s.paintVertexBuffer)}},Ft.prototype.upload=function(r){for(var i in this.binders){var s=this.binders[i];(s instanceof Vt||s instanceof Ut||s instanceof Jt)&&s.upload(r)}this.updatePaintBuffers()},Ft.prototype.destroy=function(){for(var r in this.binders){var i=this.binders[r];(i instanceof Vt||i instanceof Ut||i instanceof Jt)&&i.destroy()}};var Ot=function(r,i,s){s===void 0&&(s=function(){return!0}),this.programConfigurations={};for(var h=0,m=r;h<m.length;h+=1){var y=m[h];this.programConfigurations[y.id]=new Ft(y,i,s)}this.needsUpload=!1,this._featureMap=new Se,this._bufferOffset=0};function Gn(r,i){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[r]||[r.replace(i+"-","").replace(/-/g,"_")]}function vn(r,i,s){var h={color:{source:bl,composite:Pc},number:{source:es,composite:bl}},m=function(y){return{"line-pattern":{source:sa,composite:sa},"fill-pattern":{source:sa,composite:sa},"fill-extrusion-pattern":{source:sa,composite:sa}}[y]}(r);return m&&m[s]||h[i][s]}Ot.prototype.populatePaintArrays=function(r,i,s,h,m,y){for(var _ in this.programConfigurations)this.programConfigurations[_].populatePaintArrays(r,i,h,m,y);i.id!==void 0&&this._featureMap.add(i.id,s,this._bufferOffset,r),this._bufferOffset=r,this.needsUpload=!0},Ot.prototype.updatePaintArrays=function(r,i,s,h){for(var m=0,y=s;m<y.length;m+=1){var _=y[m];this.needsUpload=this.programConfigurations[_.id].updatePaintArrays(r,this._featureMap,i,_,h)||this.needsUpload}},Ot.prototype.get=function(r){return this.programConfigurations[r]},Ot.prototype.upload=function(r){if(this.needsUpload){for(var i in this.programConfigurations)this.programConfigurations[i].upload(r);this.needsUpload=!1}},Ot.prototype.destroy=function(){for(var r in this.programConfigurations)this.programConfigurations[r].destroy()},gt("ConstantBinder",qt),gt("CrossFadedConstantBinder",rr),gt("SourceExpressionBinder",Vt),gt("CrossFadedCompositeBinder",Jt),gt("CompositeExpressionBinder",Ut),gt("ProgramConfiguration",Ft,{omit:["_buffers"]}),gt("ProgramConfigurationSet",Ot);var yi=Math.pow(2,14)-1,ri=-yi-1;function mn(r){for(var i=8192/r.extent,s=r.loadGeometry(),h=0;h<s.length;h++)for(var m=s[h],y=0;y<m.length;y++){var _=m[y],S=Math.round(_.x*i),k=Math.round(_.y*i);_.x=J(S,ri,yi),_.y=J(k,ri,yi),(S<_.x||S>_.x+1||k<_.y||k>_.y+1)&&ge("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return s}function kn(r,i){return{type:r.type,id:r.id,properties:r.properties,geometry:i?mn(r):[]}}function Ji(r,i,s,h,m){r.emplaceBack(2*i+(h+1)/2,2*s+(m+1)/2)}var ki=function(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(function(i){return i.id}),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new Fs,this.indexArray=new Ja,this.segments=new Z,this.programConfigurations=new Ot(r.layers,r.zoom),this.stateDependentLayerIds=this.layers.filter(function(i){return i.isStateDependent()}).map(function(i){return i.id})};function ts(r,i){for(var s=0;s<r.length;s++)if(la(i,r[s]))return!0;for(var h=0;h<i.length;h++)if(la(r,i[h]))return!0;return!!Cu(r,i)}function Di(r,i,s){return!!la(r,i)||!!rs(i,r,s)}function qo(r,i){if(r.length===1)return ku(i,r[0]);for(var s=0;s<i.length;s++)for(var h=i[s],m=0;m<h.length;m++)if(la(r,h[m]))return!0;for(var y=0;y<r.length;y++)if(ku(i,r[y]))return!0;for(var _=0;_<i.length;_++)if(Cu(r,i[_]))return!0;return!1}function So(r,i,s){if(r.length>1){if(Cu(r,i))return!0;for(var h=0;h<i.length;h++)if(rs(i[h],r,s))return!0}for(var m=0;m<r.length;m++)if(rs(r[m],i,s))return!0;return!1}function Cu(r,i){if(r.length===0||i.length===0)return!1;for(var s=0;s<r.length-1;s++)for(var h=r[s],m=r[s+1],y=0;y<i.length-1;y++)if(El(h,m,i[y],i[y+1]))return!0;return!1}function El(r,i,s,h){return Ne(r,s,h)!==Ne(i,s,h)&&Ne(r,i,s)!==Ne(r,i,h)}function rs(r,i,s){var h=s*s;if(i.length===1)return r.distSqr(i[0])<h;for(var m=1;m<i.length;m++)if(Cl(r,i[m-1],i[m])<h)return!0;return!1}function Cl(r,i,s){var h=i.distSqr(s);if(h===0)return r.distSqr(i);var m=((r.x-i.x)*(s.x-i.x)+(r.y-i.y)*(s.y-i.y))/h;return r.distSqr(m<0?i:m>1?s:s.sub(i)._mult(m)._add(i))}function ku(r,i){for(var s,h,m,y=!1,_=0;_<r.length;_++)for(var S=0,k=(s=r[_]).length-1;S<s.length;k=S++)(h=s[S]).y>i.y!=(m=s[k]).y>i.y&&i.x<(m.x-h.x)*(i.y-h.y)/(m.y-h.y)+h.x&&(y=!y);return y}function la(r,i){for(var s=!1,h=0,m=r.length-1;h<r.length;m=h++){var y=r[h],_=r[m];y.y>i.y!=_.y>i.y&&i.x<(_.x-y.x)*(i.y-y.y)/(_.y-y.y)+y.x&&(s=!s)}return s}function Tu(r,i,s){var h=s[0],m=s[2];if(r.x<h.x&&i.x<h.x||r.x>m.x&&i.x>m.x||r.y<h.y&&i.y<h.y||r.y>m.y&&i.y>m.y)return!1;var y=Ne(r,i,s[0]);return y!==Ne(r,i,s[1])||y!==Ne(r,i,s[2])||y!==Ne(r,i,s[3])}function ua(r,i,s){var h=i.paint.get(r).value;return h.kind==="constant"?h.value:s.programConfigurations.get(i.id).getMaxValue(r)}function Hn(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function Ca(r,i,s,h,m){if(!i[0]&&!i[1])return r;var y=T.convert(i)._mult(m);s==="viewport"&&y._rotate(-h);for(var _=[],S=0;S<r.length;S++)_.push(r[S].sub(y));return _}ki.prototype.populate=function(r,i,s){var h=this.layers[0],m=[],y=null;h.type==="circle"&&(y=h.layout.get("circle-sort-key"));for(var _=0,S=r;_<S.length;_+=1){var k=S[_],A=k.feature,z=k.id,D=k.index,$=k.sourceLayerIndex,G=this.layers[0]._featureFilter.needGeometry,ae=kn(A,G);if(this.layers[0]._featureFilter.filter(new cr(this.zoom),ae,s)){var le=y?y.evaluate(ae,{},s):void 0,be={id:z,properties:A.properties,type:A.type,sourceLayerIndex:$,index:D,geometry:G?ae.geometry:mn(A),patterns:{},sortKey:le};m.push(be)}}y&&m.sort(function(nt,wt){return nt.sortKey-wt.sortKey});for(var de=0,Ie=m;de<Ie.length;de+=1){var Ae=Ie[de],Le=Ae.geometry,Be=Ae.index,We=Ae.sourceLayerIndex,Ye=r[Be].feature;this.addFeature(Ae,Le,Be,s),i.featureIndex.insert(Ye,Le,Be,We,this.index)}},ki.prototype.update=function(r,i,s){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,i,this.stateDependentLayers,s)},ki.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},ki.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ki.prototype.upload=function(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,K),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0},ki.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ki.prototype.addFeature=function(r,i,s,h){for(var m=0,y=i;m<y.length;m+=1)for(var _=0,S=y[m];_<S.length;_+=1){var k=S[_],A=k.x,z=k.y;if(!(A<0||A>=8192||z<0||z>=8192)){var D=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,r.sortKey),$=D.vertexLength;Ji(this.layoutVertexArray,A,z,-1,-1),Ji(this.layoutVertexArray,A,z,1,-1),Ji(this.layoutVertexArray,A,z,1,1),Ji(this.layoutVertexArray,A,z,-1,1),this.indexArray.emplaceBack($,$+1,$+2),this.indexArray.emplaceBack($,$+3,$+2),D.vertexLength+=4,D.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,s,{},h)},gt("CircleBucket",ki,{omit:["layers"]});var ns=new hi({"circle-sort-key":new _t(H.layout_circle["circle-sort-key"])}),Us={paint:new hi({"circle-radius":new _t(H.paint_circle["circle-radius"]),"circle-color":new _t(H.paint_circle["circle-color"]),"circle-blur":new _t(H.paint_circle["circle-blur"]),"circle-opacity":new _t(H.paint_circle["circle-opacity"]),"circle-translate":new St(H.paint_circle["circle-translate"]),"circle-translate-anchor":new St(H.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new St(H.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new St(H.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new _t(H.paint_circle["circle-stroke-width"]),"circle-stroke-color":new _t(H.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new _t(H.paint_circle["circle-stroke-opacity"])}),layout:ns},Pr=typeof Float32Array<"u"?Float32Array:Array;function uo(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function Oi(r,i,s){var h=i[0],m=i[1],y=i[2],_=i[3],S=i[4],k=i[5],A=i[6],z=i[7],D=i[8],$=i[9],G=i[10],ae=i[11],le=i[12],be=i[13],de=i[14],Ie=i[15],Ae=s[0],Le=s[1],Be=s[2],We=s[3];return r[0]=Ae*h+Le*S+Be*D+We*le,r[1]=Ae*m+Le*k+Be*$+We*be,r[2]=Ae*y+Le*A+Be*G+We*de,r[3]=Ae*_+Le*z+Be*ae+We*Ie,r[4]=(Ae=s[4])*h+(Le=s[5])*S+(Be=s[6])*D+(We=s[7])*le,r[5]=Ae*m+Le*k+Be*$+We*be,r[6]=Ae*y+Le*A+Be*G+We*de,r[7]=Ae*_+Le*z+Be*ae+We*Ie,r[8]=(Ae=s[8])*h+(Le=s[9])*S+(Be=s[10])*D+(We=s[11])*le,r[9]=Ae*m+Le*k+Be*$+We*be,r[10]=Ae*y+Le*A+Be*G+We*de,r[11]=Ae*_+Le*z+Be*ae+We*Ie,r[12]=(Ae=s[12])*h+(Le=s[13])*S+(Be=s[14])*D+(We=s[15])*le,r[13]=Ae*m+Le*k+Be*$+We*be,r[14]=Ae*y+Le*A+Be*G+We*de,r[15]=Ae*_+Le*z+Be*ae+We*Ie,r}Math.hypot||(Math.hypot=function(){for(var r=arguments,i=0,s=arguments.length;s--;)i+=r[s]*r[s];return Math.sqrt(i)});var $s,c0=Oi;function Ac(r,i,s){var h=i[0],m=i[1],y=i[2],_=i[3];return r[0]=s[0]*h+s[4]*m+s[8]*y+s[12]*_,r[1]=s[1]*h+s[5]*m+s[9]*y+s[13]*_,r[2]=s[2]*h+s[6]*m+s[10]*y+s[14]*_,r[3]=s[3]*h+s[7]*m+s[11]*y+s[15]*_,r}$s=new Pr(3),Pr!=Float32Array&&($s[0]=0,$s[1]=0,$s[2]=0),function(){var r=new Pr(4);Pr!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0,r[3]=0)}();var p0=(function(){var r=new Pr(2);Pr!=Float32Array&&(r[0]=0,r[1]=0)}(),function(r){function i(s){r.call(this,s,Us)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.createBucket=function(s){return new ki(s)},i.prototype.queryRadius=function(s){var h=s;return ua("circle-radius",this,h)+ua("circle-stroke-width",this,h)+Hn(this.paint.get("circle-translate"))},i.prototype.queryIntersectsFeature=function(s,h,m,y,_,S,k,A){for(var z=Ca(s,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),S.angle,k),D=this.paint.get("circle-radius").evaluate(h,m)+this.paint.get("circle-stroke-width").evaluate(h,m),$=this.paint.get("circle-pitch-alignment")==="map",G=$?z:function(Ye,nt){return Ye.map(function(wt){return Iu(wt,nt)})}(z,A),ae=$?D*k:D,le=0,be=y;le<be.length;le+=1)for(var de=0,Ie=be[le];de<Ie.length;de+=1){var Ae=Ie[de],Le=$?Ae:Iu(Ae,A),Be=ae,We=Ac([],[Ae.x,Ae.y,0,1],A);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Be*=We[3]/S.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Be*=S.cameraToCenterDistance/We[3]),Di(G,Le,Be))return!0}return!1},i}(aa));function Iu(r,i){var s=Ac([],[r.x,r.y,0,1],i);return new T(s[0]/s[3],s[1]/s[3])}var um=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i}(ki);function kl(r,i,s,h){var m=i.width,y=i.height;if(h){if(h instanceof Uint8ClampedArray)h=new Uint8Array(h.buffer);else if(h.length!==m*y*s)throw new RangeError("mismatched image size")}else h=new Uint8Array(m*y*s);return r.width=m,r.height=y,r.data=h,r}function Mc(r,i,s){var h=i.width,m=i.height;if(h!==r.width||m!==r.height){var y=kl({},{width:h,height:m},s);h0(r,y,{x:0,y:0},{x:0,y:0},{width:Math.min(r.width,h),height:Math.min(r.height,m)},s),r.width=h,r.height=m,r.data=y.data}}function h0(r,i,s,h,m,y){if(m.width===0||m.height===0)return i;if(m.width>r.width||m.height>r.height||s.x>r.width-m.width||s.y>r.height-m.height)throw new RangeError("out of range source coordinates for image copy");if(m.width>i.width||m.height>i.height||h.x>i.width-m.width||h.y>i.height-m.height)throw new RangeError("out of range destination coordinates for image copy");for(var _=r.data,S=i.data,k=0;k<m.height;k++)for(var A=((s.y+k)*r.width+s.x)*y,z=((h.y+k)*i.width+h.x)*y,D=0;D<m.width*y;D++)S[z+D]=_[A+D];return i}gt("HeatmapBucket",um,{omit:["layers"]});var Pu=function(r,i){kl(this,r,1,i)};Pu.prototype.resize=function(r){Mc(this,r,1)},Pu.prototype.clone=function(){return new Pu({width:this.width,height:this.height},new Uint8Array(this.data))},Pu.copy=function(r,i,s,h,m){h0(r,i,s,h,m,1)};var Qi=function(r,i){kl(this,r,4,i)};Qi.prototype.resize=function(r){Mc(this,r,4)},Qi.prototype.replace=function(r,i){i?this.data.set(r):this.data=r instanceof Uint8ClampedArray?new Uint8Array(r.buffer):r},Qi.prototype.clone=function(){return new Qi({width:this.width,height:this.height},new Uint8Array(this.data))},Qi.copy=function(r,i,s,h,m){h0(r,i,s,h,m,4)},gt("AlphaImage",Pu),gt("RGBAImage",Qi);var cM={paint:new hi({"heatmap-radius":new _t(H.paint_heatmap["heatmap-radius"]),"heatmap-weight":new _t(H.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new St(H.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Vo(H.paint_heatmap["heatmap-color"]),"heatmap-opacity":new St(H.paint_heatmap["heatmap-opacity"])})};function cw(r){var i={},s=r.resolution||256,h=r.clips?r.clips.length:1,m=r.image||new Qi({width:s,height:h}),y=function(ae,le,be){i[r.evaluationKey]=be;var de=r.expression.evaluate(i);m.data[ae+le+0]=Math.floor(255*de.r/de.a),m.data[ae+le+1]=Math.floor(255*de.g/de.a),m.data[ae+le+2]=Math.floor(255*de.b/de.a),m.data[ae+le+3]=Math.floor(255*de.a)};if(r.clips)for(var _=0,S=0;_<h;++_,S+=4*s)for(var k=0,A=0;k<s;k++,A+=4){var z=k/(s-1),D=r.clips[_];y(S,A,D.start*(1-z)+D.end*z)}else for(var $=0,G=0;$<s;$++,G+=4)y(0,G,$/(s-1));return m}var pM=function(r){function i(s){r.call(this,s,cM),this._updateColorRamp()}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.createBucket=function(s){return new um(s)},i.prototype._handleSpecialPaintPropertyUpdate=function(s){s==="heatmap-color"&&this._updateColorRamp()},i.prototype._updateColorRamp=function(){this.colorRamp=cw({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},i.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},i.prototype.queryRadius=function(){return 0},i.prototype.queryIntersectsFeature=function(){return!1},i.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},i}(aa),hM={paint:new hi({"hillshade-illumination-direction":new St(H.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new St(H.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new St(H.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new St(H.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new St(H.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new St(H.paint_hillshade["hillshade-accent-color"])})},dM=function(r){function i(s){r.call(this,s,hM)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},i}(aa),fM=ti([{name:"a_pos",components:2,type:"Int16"}],4).members,d0=cm,mM=cm;function cm(r,i,s){s=s||2;var h,m,y,_,S,k,A,z=i&&i.length,D=z?i[0]*s:r.length,$=pw(r,0,D,s,!0),G=[];if(!$||$.next===$.prev)return G;if(z&&($=function(le,be,de,Ie){var Ae,Le,Be,We=[];for(Ae=0,Le=be.length;Ae<Le;Ae++)(Be=pw(le,be[Ae]*Ie,Ae<Le-1?be[Ae+1]*Ie:le.length,Ie,!1))===Be.next&&(Be.steiner=!0),We.push(SM(Be));for(We.sort(xM),Ae=0;Ae<We.length;Ae++)bM(We[Ae],de),de=Tl(de,de.next);return de}(r,i,$,s)),r.length>80*s){h=y=r[0],m=_=r[1];for(var ae=s;ae<D;ae+=s)(S=r[ae])<h&&(h=S),(k=r[ae+1])<m&&(m=k),S>y&&(y=S),k>_&&(_=k);A=(A=Math.max(y-h,_-m))!==0?1/A:0}return Bh($,G,s,h,m,A),G}function pw(r,i,s,h,m){var y,_;if(m===y0(r,i,s,h)>0)for(y=i;y<s;y+=h)_=fw(y,r[y],r[y+1],_);else for(y=s-h;y>=i;y-=h)_=fw(y,r[y],r[y+1],_);return _&&pm(_,_.next)&&(Fh(_),_=_.next),_}function Tl(r,i){if(!r)return r;i||(i=r);var s,h=r;do if(s=!1,h.steiner||!pm(h,h.next)&&Fn(h.prev,h,h.next)!==0)h=h.next;else{if(Fh(h),(h=i=h.prev)===h.next)break;s=!0}while(s||h!==i);return i}function Bh(r,i,s,h,m,y,_){if(r){!_&&y&&function(z,D,$,G){var ae=z;do ae.z===null&&(ae.z=f0(ae.x,ae.y,D,$,G)),ae.prevZ=ae.prev,ae.nextZ=ae.next,ae=ae.next;while(ae!==z);ae.prevZ.nextZ=null,ae.prevZ=null,function(le){var be,de,Ie,Ae,Le,Be,We,Ye,nt=1;do{for(de=le,le=null,Le=null,Be=0;de;){for(Be++,Ie=de,We=0,be=0;be<nt&&(We++,Ie=Ie.nextZ);be++);for(Ye=nt;We>0||Ye>0&&Ie;)We!==0&&(Ye===0||!Ie||de.z<=Ie.z)?(Ae=de,de=de.nextZ,We--):(Ae=Ie,Ie=Ie.nextZ,Ye--),Le?Le.nextZ=Ae:le=Ae,Ae.prevZ=Le,Le=Ae;de=Ie}Le.nextZ=null,nt*=2}while(Be>1)}(ae)}(r,h,m,y);for(var S,k,A=r;r.prev!==r.next;)if(S=r.prev,k=r.next,y?gM(r,h,m,y):yM(r))i.push(S.i/s),i.push(r.i/s),i.push(k.i/s),Fh(r),r=k.next,A=k.next;else if((r=k)===A){_?_===1?Bh(r=vM(Tl(r),i,s),i,s,h,m,y,2):_===2&&_M(r,i,s,h,m,y):Bh(Tl(r),i,s,h,m,y,1);break}}}function yM(r){var i=r.prev,s=r,h=r.next;if(Fn(i,s,h)>=0)return!1;for(var m=r.next.next;m!==r.prev;){if(zc(i.x,i.y,s.x,s.y,h.x,h.y,m.x,m.y)&&Fn(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function gM(r,i,s,h){var m=r.prev,y=r,_=r.next;if(Fn(m,y,_)>=0)return!1;for(var S=m.x>y.x?m.x>_.x?m.x:_.x:y.x>_.x?y.x:_.x,k=m.y>y.y?m.y>_.y?m.y:_.y:y.y>_.y?y.y:_.y,A=f0(m.x<y.x?m.x<_.x?m.x:_.x:y.x<_.x?y.x:_.x,m.y<y.y?m.y<_.y?m.y:_.y:y.y<_.y?y.y:_.y,i,s,h),z=f0(S,k,i,s,h),D=r.prevZ,$=r.nextZ;D&&D.z>=A&&$&&$.z<=z;){if(D!==r.prev&&D!==r.next&&zc(m.x,m.y,y.x,y.y,_.x,_.y,D.x,D.y)&&Fn(D.prev,D,D.next)>=0||(D=D.prevZ,$!==r.prev&&$!==r.next&&zc(m.x,m.y,y.x,y.y,_.x,_.y,$.x,$.y)&&Fn($.prev,$,$.next)>=0))return!1;$=$.nextZ}for(;D&&D.z>=A;){if(D!==r.prev&&D!==r.next&&zc(m.x,m.y,y.x,y.y,_.x,_.y,D.x,D.y)&&Fn(D.prev,D,D.next)>=0)return!1;D=D.prevZ}for(;$&&$.z<=z;){if($!==r.prev&&$!==r.next&&zc(m.x,m.y,y.x,y.y,_.x,_.y,$.x,$.y)&&Fn($.prev,$,$.next)>=0)return!1;$=$.nextZ}return!0}function vM(r,i,s){var h=r;do{var m=h.prev,y=h.next.next;!pm(m,y)&&hw(m,h,h.next,y)&&Nh(m,y)&&Nh(y,m)&&(i.push(m.i/s),i.push(h.i/s),i.push(y.i/s),Fh(h),Fh(h.next),h=r=y),h=h.next}while(h!==r);return Tl(h)}function _M(r,i,s,h,m,y){var _=r;do{for(var S=_.next.next;S!==_.prev;){if(_.i!==S.i&&EM(_,S)){var k=dw(_,S);return _=Tl(_,_.next),k=Tl(k,k.next),Bh(_,i,s,h,m,y),void Bh(k,i,s,h,m,y)}S=S.next}_=_.next}while(_!==r)}function xM(r,i){return r.x-i.x}function bM(r,i){if(i=function(h,m){var y,_=m,S=h.x,k=h.y,A=-1/0;do{if(k<=_.y&&k>=_.next.y&&_.next.y!==_.y){var z=_.x+(k-_.y)*(_.next.x-_.x)/(_.next.y-_.y);if(z<=S&&z>A){if(A=z,z===S){if(k===_.y)return _;if(k===_.next.y)return _.next}y=_.x<_.next.x?_:_.next}}_=_.next}while(_!==m);if(!y)return null;if(S===A)return y;var D,$=y,G=y.x,ae=y.y,le=1/0;_=y;do S>=_.x&&_.x>=G&&S!==_.x&&zc(k<ae?S:A,k,G,ae,k<ae?A:S,k,_.x,_.y)&&(D=Math.abs(k-_.y)/(S-_.x),Nh(_,h)&&(D<le||D===le&&(_.x>y.x||_.x===y.x&&wM(y,_)))&&(y=_,le=D)),_=_.next;while(_!==$);return y}(r,i)){var s=dw(i,r);Tl(i,i.next),Tl(s,s.next)}}function wM(r,i){return Fn(r.prev,r,i.prev)<0&&Fn(i.next,r,r.next)<0}function f0(r,i,s,h,m){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=32767*(r-s)*m)|r<<8))|r<<4))|r<<2))|r<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=32767*(i-h)*m)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function SM(r){var i=r,s=r;do(i.x<s.x||i.x===s.x&&i.y<s.y)&&(s=i),i=i.next;while(i!==r);return s}function zc(r,i,s,h,m,y,_,S){return(m-_)*(i-S)-(r-_)*(y-S)>=0&&(r-_)*(h-S)-(s-_)*(i-S)>=0&&(s-_)*(y-S)-(m-_)*(h-S)>=0}function EM(r,i){return r.next.i!==i.i&&r.prev.i!==i.i&&!function(s,h){var m=s;do{if(m.i!==s.i&&m.next.i!==s.i&&m.i!==h.i&&m.next.i!==h.i&&hw(m,m.next,s,h))return!0;m=m.next}while(m!==s);return!1}(r,i)&&(Nh(r,i)&&Nh(i,r)&&function(s,h){var m=s,y=!1,_=(s.x+h.x)/2,S=(s.y+h.y)/2;do m.y>S!=m.next.y>S&&m.next.y!==m.y&&_<(m.next.x-m.x)*(S-m.y)/(m.next.y-m.y)+m.x&&(y=!y),m=m.next;while(m!==s);return y}(r,i)&&(Fn(r.prev,r,i.prev)||Fn(r,i.prev,i))||pm(r,i)&&Fn(r.prev,r,r.next)>0&&Fn(i.prev,i,i.next)>0)}function Fn(r,i,s){return(i.y-r.y)*(s.x-i.x)-(i.x-r.x)*(s.y-i.y)}function pm(r,i){return r.x===i.x&&r.y===i.y}function hw(r,i,s,h){var m=dm(Fn(r,i,s)),y=dm(Fn(r,i,h)),_=dm(Fn(s,h,r)),S=dm(Fn(s,h,i));return m!==y&&_!==S||!(m!==0||!hm(r,s,i))||!(y!==0||!hm(r,h,i))||!(_!==0||!hm(s,r,h))||!(S!==0||!hm(s,i,h))}function hm(r,i,s){return i.x<=Math.max(r.x,s.x)&&i.x>=Math.min(r.x,s.x)&&i.y<=Math.max(r.y,s.y)&&i.y>=Math.min(r.y,s.y)}function dm(r){return r>0?1:r<0?-1:0}function Nh(r,i){return Fn(r.prev,r,r.next)<0?Fn(r,i,r.next)>=0&&Fn(r,r.prev,i)>=0:Fn(r,i,r.prev)<0||Fn(r,r.next,i)<0}function dw(r,i){var s=new m0(r.i,r.x,r.y),h=new m0(i.i,i.x,i.y),m=r.next,y=i.prev;return r.next=i,i.prev=r,s.next=m,m.prev=s,h.next=s,s.prev=h,y.next=h,h.prev=y,h}function fw(r,i,s,h){var m=new m0(r,i,s);return h?(m.next=h.next,m.prev=h,h.next.prev=m,h.next=m):(m.prev=m,m.next=m),m}function Fh(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function m0(r,i,s){this.i=r,this.x=i,this.y=s,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function y0(r,i,s,h){for(var m=0,y=i,_=s-h;y<s;y+=h)m+=(r[_]-r[y])*(r[y+1]+r[_+1]),_=y;return m}function CM(r,i,s,h,m){(function y(_,S,k,A,z){for(;A>k;){if(A-k>600){var D=A-k+1,$=S-k+1,G=Math.log(D),ae=.5*Math.exp(2*G/3),le=.5*Math.sqrt(G*ae*(D-ae)/D)*($-D/2<0?-1:1);y(_,S,Math.max(k,Math.floor(S-$*ae/D+le)),Math.min(A,Math.floor(S+(D-$)*ae/D+le)),z)}var be=_[S],de=k,Ie=A;for(jh(_,k,S),z(_[A],be)>0&&jh(_,k,A);de<Ie;){for(jh(_,de,Ie),de++,Ie--;z(_[de],be)<0;)de++;for(;z(_[Ie],be)>0;)Ie--}z(_[k],be)===0?jh(_,k,Ie):jh(_,++Ie,A),Ie<=S&&(k=Ie+1),S<=Ie&&(A=Ie-1)}})(r,i,s||0,h||r.length-1,m||kM)}function jh(r,i,s){var h=r[i];r[i]=r[s],r[s]=h}function kM(r,i){return r<i?-1:r>i?1:0}function g0(r,i){var s=r.length;if(s<=1)return[r];for(var h,m,y=[],_=0;_<s;_++){var S=qe(r[_]);S!==0&&(r[_].area=Math.abs(S),m===void 0&&(m=S<0),m===S<0?(h&&y.push(h),h=[r[_]]):h.push(r[_]))}if(h&&y.push(h),i>1)for(var k=0;k<y.length;k++)y[k].length<=i||(CM(y[k],i,1,y[k].length-1,TM),y[k]=y[k].slice(0,i));return y}function TM(r,i){return i.area-r.area}function v0(r,i,s){for(var h=s.patternDependencies,m=!1,y=0,_=i;y<_.length;y+=1){var S=_[y].paint.get(r+"-pattern");S.isConstant()||(m=!0);var k=S.constantOr(null);k&&(m=!0,h[k.to]=!0,h[k.from]=!0)}return m}function _0(r,i,s,h,m){for(var y=m.patternDependencies,_=0,S=i;_<S.length;_+=1){var k=S[_],A=k.paint.get(r+"-pattern").value;if(A.kind!=="constant"){var z=A.evaluate({zoom:h-1},s,{},m.availableImages),D=A.evaluate({zoom:h},s,{},m.availableImages),$=A.evaluate({zoom:h+1},s,{},m.availableImages);D=D&&D.name?D.name:D,$=$&&$.name?$.name:$,y[z=z&&z.name?z.name:z]=!0,y[D]=!0,y[$]=!0,s.patterns[k.id]={min:z,mid:D,max:$}}}return s}cm.deviation=function(r,i,s,h){var m=i&&i.length,y=Math.abs(y0(r,0,m?i[0]*s:r.length,s));if(m)for(var _=0,S=i.length;_<S;_++)y-=Math.abs(y0(r,i[_]*s,_<S-1?i[_+1]*s:r.length,s));var k=0;for(_=0;_<h.length;_+=3){var A=h[_]*s,z=h[_+1]*s,D=h[_+2]*s;k+=Math.abs((r[A]-r[D])*(r[z+1]-r[A+1])-(r[A]-r[z])*(r[D+1]-r[A+1]))}return y===0&&k===0?0:Math.abs((k-y)/y)},cm.flatten=function(r){for(var i=r[0][0].length,s={vertices:[],holes:[],dimensions:i},h=0,m=0;m<r.length;m++){for(var y=0;y<r[m].length;y++)for(var _=0;_<i;_++)s.vertices.push(r[m][y][_]);m>0&&s.holes.push(h+=r[m-1].length)}return s},d0.default=mM;var ka=function(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(function(i){return i.id}),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Fs,this.indexArray=new Ja,this.indexArray2=new Eu,this.programConfigurations=new Ot(r.layers,r.zoom),this.segments=new Z,this.segments2=new Z,this.stateDependentLayerIds=this.layers.filter(function(i){return i.isStateDependent()}).map(function(i){return i.id})};ka.prototype.populate=function(r,i,s){this.hasPattern=v0("fill",this.layers,i);for(var h=this.layers[0].layout.get("fill-sort-key"),m=[],y=0,_=r;y<_.length;y+=1){var S=_[y],k=S.feature,A=S.id,z=S.index,D=S.sourceLayerIndex,$=this.layers[0]._featureFilter.needGeometry,G=kn(k,$);if(this.layers[0]._featureFilter.filter(new cr(this.zoom),G,s)){var ae=h?h.evaluate(G,{},s,i.availableImages):void 0,le={id:A,properties:k.properties,type:k.type,sourceLayerIndex:D,index:z,geometry:$?G.geometry:mn(k),patterns:{},sortKey:ae};m.push(le)}}h&&m.sort(function(Ye,nt){return Ye.sortKey-nt.sortKey});for(var be=0,de=m;be<de.length;be+=1){var Ie=de[be],Ae=Ie.geometry,Le=Ie.index,Be=Ie.sourceLayerIndex;if(this.hasPattern){var We=_0("fill",this.layers,Ie,this.zoom,i);this.patternFeatures.push(We)}else this.addFeature(Ie,Ae,Le,s,{});i.featureIndex.insert(r[Le].feature,Ae,Le,Be,this.index)}},ka.prototype.update=function(r,i,s){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,i,this.stateDependentLayers,s)},ka.prototype.addFeatures=function(r,i,s){for(var h=0,m=this.patternFeatures;h<m.length;h+=1){var y=m[h];this.addFeature(y,y.geometry,y.index,i,s)}},ka.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},ka.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ka.prototype.upload=function(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,fM),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.indexBuffer2=r.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(r),this.uploaded=!0},ka.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},ka.prototype.addFeature=function(r,i,s,h,m){for(var y=0,_=g0(i,500);y<_.length;y+=1){for(var S=_[y],k=0,A=0,z=S;A<z.length;A+=1)k+=z[A].length;for(var D=this.segments.prepareSegment(k,this.layoutVertexArray,this.indexArray),$=D.vertexLength,G=[],ae=[],le=0,be=S;le<be.length;le+=1){var de=be[le];if(de.length!==0){de!==S[0]&&ae.push(G.length/2);var Ie=this.segments2.prepareSegment(de.length,this.layoutVertexArray,this.indexArray2),Ae=Ie.vertexLength;this.layoutVertexArray.emplaceBack(de[0].x,de[0].y),this.indexArray2.emplaceBack(Ae+de.length-1,Ae),G.push(de[0].x),G.push(de[0].y);for(var Le=1;Le<de.length;Le++)this.layoutVertexArray.emplaceBack(de[Le].x,de[Le].y),this.indexArray2.emplaceBack(Ae+Le-1,Ae+Le),G.push(de[Le].x),G.push(de[Le].y);Ie.vertexLength+=de.length,Ie.primitiveLength+=de.length}}for(var Be=d0(G,ae),We=0;We<Be.length;We+=3)this.indexArray.emplaceBack($+Be[We],$+Be[We+1],$+Be[We+2]);D.vertexLength+=k,D.primitiveLength+=Be.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,s,m,h)},gt("FillBucket",ka,{omit:["layers","patternFeatures"]});var IM=new hi({"fill-sort-key":new _t(H.layout_fill["fill-sort-key"])}),PM={paint:new hi({"fill-antialias":new St(H.paint_fill["fill-antialias"]),"fill-opacity":new _t(H.paint_fill["fill-opacity"]),"fill-color":new _t(H.paint_fill["fill-color"]),"fill-outline-color":new _t(H.paint_fill["fill-outline-color"]),"fill-translate":new St(H.paint_fill["fill-translate"]),"fill-translate-anchor":new St(H.paint_fill["fill-translate-anchor"]),"fill-pattern":new Cc(H.paint_fill["fill-pattern"])}),layout:IM},AM=function(r){function i(s){r.call(this,s,PM)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.recalculate=function(s,h){r.prototype.recalculate.call(this,s,h);var m=this.paint._values["fill-outline-color"];m.value.kind==="constant"&&m.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},i.prototype.createBucket=function(s){return new ka(s)},i.prototype.queryRadius=function(){return Hn(this.paint.get("fill-translate"))},i.prototype.queryIntersectsFeature=function(s,h,m,y,_,S,k){return qo(Ca(s,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),S.angle,k),y)},i.prototype.isTileClipped=function(){return!0},i}(aa),MM=ti([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,mw=Rc;function Rc(r,i,s,h,m){this.properties={},this.extent=s,this.type=0,this._pbf=r,this._geometry=-1,this._keys=h,this._values=m,r.readFields(zM,this,i)}function zM(r,i,s){r==1?i.id=s.readVarint():r==2?function(h,m){for(var y=h.readVarint()+h.pos;h.pos<y;){var _=m._keys[h.readVarint()],S=m._values[h.readVarint()];m.properties[_]=S}}(s,i):r==3?i.type=s.readVarint():r==4&&(i._geometry=s.pos)}function RM(r){for(var i,s,h=0,m=0,y=r.length,_=y-1;m<y;_=m++)h+=((s=r[_]).x-(i=r[m]).x)*(i.y+s.y);return h}Rc.types=["Unknown","Point","LineString","Polygon"],Rc.prototype.loadGeometry=function(){var r=this._pbf;r.pos=this._geometry;for(var i,s=r.readVarint()+r.pos,h=1,m=0,y=0,_=0,S=[];r.pos<s;){if(m<=0){var k=r.readVarint();h=7&k,m=k>>3}if(m--,h===1||h===2)y+=r.readSVarint(),_+=r.readSVarint(),h===1&&(i&&S.push(i),i=[]),i.push(new T(y,_));else{if(h!==7)throw new Error("unknown command "+h);i&&i.push(i[0].clone())}}return i&&S.push(i),S},Rc.prototype.bbox=function(){var r=this._pbf;r.pos=this._geometry;for(var i=r.readVarint()+r.pos,s=1,h=0,m=0,y=0,_=1/0,S=-1/0,k=1/0,A=-1/0;r.pos<i;){if(h<=0){var z=r.readVarint();s=7&z,h=z>>3}if(h--,s===1||s===2)(m+=r.readSVarint())<_&&(_=m),m>S&&(S=m),(y+=r.readSVarint())<k&&(k=y),y>A&&(A=y);else if(s!==7)throw new Error("unknown command "+s)}return[_,k,S,A]},Rc.prototype.toGeoJSON=function(r,i,s){var h,m,y=this.extent*Math.pow(2,s),_=this.extent*r,S=this.extent*i,k=this.loadGeometry(),A=Rc.types[this.type];function z(G){for(var ae=0;ae<G.length;ae++){var le=G[ae];G[ae]=[360*(le.x+_)/y-180,360/Math.PI*Math.atan(Math.exp((180-360*(le.y+S)/y)*Math.PI/180))-90]}}switch(this.type){case 1:var D=[];for(h=0;h<k.length;h++)D[h]=k[h][0];z(k=D);break;case 2:for(h=0;h<k.length;h++)z(k[h]);break;case 3:for(k=function(G){var ae=G.length;if(ae<=1)return[G];for(var le,be,de=[],Ie=0;Ie<ae;Ie++){var Ae=RM(G[Ie]);Ae!==0&&(be===void 0&&(be=Ae<0),be===Ae<0?(le&&de.push(le),le=[G[Ie]]):le.push(G[Ie]))}return le&&de.push(le),de}(k),h=0;h<k.length;h++)for(m=0;m<k[h].length;m++)z(k[h][m])}k.length===1?k=k[0]:A="Multi"+A;var $={type:"Feature",geometry:{type:A,coordinates:k},properties:this.properties};return"id"in this&&($.id=this.id),$};var yw=gw;function gw(r,i){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=r,this._keys=[],this._values=[],this._features=[],r.readFields(LM,this,i),this.length=this._features.length}function LM(r,i,s){r===15?i.version=s.readVarint():r===1?i.name=s.readString():r===5?i.extent=s.readVarint():r===2?i._features.push(s.pos):r===3?i._keys.push(s.readString()):r===4&&i._values.push(function(h){for(var m=null,y=h.readVarint()+h.pos;h.pos<y;){var _=h.readVarint()>>3;m=_===1?h.readString():_===2?h.readFloat():_===3?h.readDouble():_===4?h.readVarint64():_===5?h.readVarint():_===6?h.readSVarint():_===7?h.readBoolean():null}return m}(s))}function DM(r,i,s){if(r===3){var h=new yw(s,s.readVarint()+s.pos);h.length&&(i[h.name]=h)}}gw.prototype.feature=function(r){if(r<0||r>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[r];var i=this._pbf.readVarint()+this._pbf.pos;return new mw(this._pbf,i,this.extent,this._keys,this._values)};var Lc={VectorTile:function(r,i){this.layers=r.readFields(DM,{},i)},VectorTileFeature:mw,VectorTileLayer:yw},OM=Lc.VectorTileFeature.types,x0=Math.pow(2,13);function Uh(r,i,s,h,m,y,_,S){r.emplaceBack(i,s,2*Math.floor(h*x0)+_,m*x0*2,y*x0*2,Math.round(S))}var Ta=function(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(function(i){return i.id}),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new Ea,this.indexArray=new Ja,this.programConfigurations=new Ot(r.layers,r.zoom),this.segments=new Z,this.stateDependentLayerIds=this.layers.filter(function(i){return i.isStateDependent()}).map(function(i){return i.id})};function BM(r,i){return r.x===i.x&&(r.x<0||r.x>8192)||r.y===i.y&&(r.y<0||r.y>8192)}Ta.prototype.populate=function(r,i,s){this.features=[],this.hasPattern=v0("fill-extrusion",this.layers,i);for(var h=0,m=r;h<m.length;h+=1){var y=m[h],_=y.feature,S=y.id,k=y.index,A=y.sourceLayerIndex,z=this.layers[0]._featureFilter.needGeometry,D=kn(_,z);if(this.layers[0]._featureFilter.filter(new cr(this.zoom),D,s)){var $={id:S,sourceLayerIndex:A,index:k,geometry:z?D.geometry:mn(_),properties:_.properties,type:_.type,patterns:{}};this.hasPattern?this.features.push(_0("fill-extrusion",this.layers,$,this.zoom,i)):this.addFeature($,$.geometry,k,s,{}),i.featureIndex.insert(_,$.geometry,k,A,this.index,!0)}}},Ta.prototype.addFeatures=function(r,i,s){for(var h=0,m=this.features;h<m.length;h+=1){var y=m[h];this.addFeature(y,y.geometry,y.index,i,s)}},Ta.prototype.update=function(r,i,s){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,i,this.stateDependentLayers,s)},Ta.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Ta.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ta.prototype.upload=function(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,MM),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0},Ta.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ta.prototype.addFeature=function(r,i,s,h,m){for(var y=0,_=g0(i,500);y<_.length;y+=1){for(var S=_[y],k=0,A=0,z=S;A<z.length;A+=1)k+=z[A].length;for(var D=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),$=0,G=S;$<G.length;$+=1){var ae=G[$];if(ae.length!==0&&!((sr=ae).every(function(Xt){return Xt.x<0})||sr.every(function(Xt){return Xt.x>8192})||sr.every(function(Xt){return Xt.y<0})||sr.every(function(Xt){return Xt.y>8192})))for(var le=0,be=0;be<ae.length;be++){var de=ae[be];if(be>=1){var Ie=ae[be-1];if(!BM(de,Ie)){D.vertexLength+4>Z.MAX_VERTEX_ARRAY_LENGTH&&(D=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Ae=de.sub(Ie)._perp()._unit(),Le=Ie.dist(de);le+Le>32768&&(le=0),Uh(this.layoutVertexArray,de.x,de.y,Ae.x,Ae.y,0,0,le),Uh(this.layoutVertexArray,de.x,de.y,Ae.x,Ae.y,0,1,le),Uh(this.layoutVertexArray,Ie.x,Ie.y,Ae.x,Ae.y,0,0,le+=Le),Uh(this.layoutVertexArray,Ie.x,Ie.y,Ae.x,Ae.y,0,1,le);var Be=D.vertexLength;this.indexArray.emplaceBack(Be,Be+2,Be+1),this.indexArray.emplaceBack(Be+1,Be+2,Be+3),D.vertexLength+=4,D.primitiveLength+=2}}}}if(D.vertexLength+k>Z.MAX_VERTEX_ARRAY_LENGTH&&(D=this.segments.prepareSegment(k,this.layoutVertexArray,this.indexArray)),OM[r.type]==="Polygon"){for(var We=[],Ye=[],nt=D.vertexLength,wt=0,ut=S;wt<ut.length;wt+=1){var Ct=ut[wt];if(Ct.length!==0){Ct!==S[0]&&Ye.push(We.length/2);for(var ht=0;ht<Ct.length;ht++){var ir=Ct[ht];Uh(this.layoutVertexArray,ir.x,ir.y,0,0,1,1,0),We.push(ir.x),We.push(ir.y)}}}for(var Nt=d0(We,Ye),xt=0;xt<Nt.length;xt+=3)this.indexArray.emplaceBack(nt+Nt[xt],nt+Nt[xt+2],nt+Nt[xt+1]);D.primitiveLength+=Nt.length/3,D.vertexLength+=k}}var sr;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,s,m,h)},gt("FillExtrusionBucket",Ta,{omit:["layers","features"]});var NM={paint:new hi({"fill-extrusion-opacity":new St(H["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new _t(H["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new St(H["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new St(H["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Cc(H["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new _t(H["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new _t(H["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new St(H["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},FM=function(r){function i(s){r.call(this,s,NM)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.createBucket=function(s){return new Ta(s)},i.prototype.queryRadius=function(){return Hn(this.paint.get("fill-extrusion-translate"))},i.prototype.is3D=function(){return!0},i.prototype.queryIntersectsFeature=function(s,h,m,y,_,S,k,A){var z=Ca(s,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),S.angle,k),D=this.paint.get("fill-extrusion-height").evaluate(h,m),$=this.paint.get("fill-extrusion-base").evaluate(h,m),G=function(le,be,de,Ie){for(var Ae=[],Le=0,Be=le;Le<Be.length;Le+=1){var We=Be[Le],Ye=[We.x,We.y,0,1];Ac(Ye,Ye,be),Ae.push(new T(Ye[0]/Ye[3],Ye[1]/Ye[3]))}return Ae}(z,A),ae=function(le,be,de,Ie){for(var Ae=[],Le=[],Be=Ie[8]*be,We=Ie[9]*be,Ye=Ie[10]*be,nt=Ie[11]*be,wt=Ie[8]*de,ut=Ie[9]*de,Ct=Ie[10]*de,ht=Ie[11]*de,ir=0,Nt=le;ir<Nt.length;ir+=1){for(var xt=[],sr=[],Xt=0,vr=Nt[ir];Xt<vr.length;Xt+=1){var kt=vr[Xt],Er=kt.x,un=kt.y,_n=Ie[0]*Er+Ie[4]*un+Ie[12],yn=Ie[1]*Er+Ie[5]*un+Ie[13],cn=Ie[2]*Er+Ie[6]*un+Ie[14],xn=Ie[3]*Er+Ie[7]*un+Ie[15],Kn=cn+Ye,Zn=xn+nt,Ii=_n+wt,ii=yn+ut,Pi=cn+Ct,Tn=xn+ht,oi=new T((_n+Be)/Zn,(yn+We)/Zn);oi.z=Kn/Zn,xt.push(oi);var pr=new T(Ii/Tn,ii/Tn);pr.z=Pi/Tn,sr.push(pr)}Ae.push(xt),Le.push(sr)}return[Ae,Le]}(y,$,D,A);return function(le,be,de){var Ie=1/0;qo(de,be)&&(Ie=vw(de,be[0]));for(var Ae=0;Ae<be.length;Ae++)for(var Le=be[Ae],Be=le[Ae],We=0;We<Le.length-1;We++){var Ye=Le[We],nt=[Ye,Le[We+1],Be[We+1],Be[We],Ye];ts(de,nt)&&(Ie=Math.min(Ie,vw(de,nt)))}return Ie!==1/0&&Ie}(ae[0],ae[1],G)},i}(aa);function $h(r,i){return r.x*i.x+r.y*i.y}function vw(r,i){if(r.length===1){for(var s,h=0,m=i[h++];!s||m.equals(s);)if(!(s=i[h++]))return 1/0;for(;h<i.length;h++){var y=i[h],_=r[0],S=s.sub(m),k=y.sub(m),A=_.sub(m),z=$h(S,S),D=$h(S,k),$=$h(k,k),G=$h(A,S),ae=$h(A,k),le=z*$-D*D,be=($*G-D*ae)/le,de=(z*ae-D*G)/le,Ie=m.z*(1-be-de)+s.z*be+y.z*de;if(isFinite(Ie))return Ie}return 1/0}for(var Ae=1/0,Le=0,Be=i;Le<Be.length;Le+=1)Ae=Math.min(Ae,Be[Le].z);return Ae}var jM=ti([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,UM=ti([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,$M=Lc.VectorTileFeature.types,VM=Math.cos(Math.PI/180*37.5),_w=Math.pow(2,14)/.5,Bi=function(r){var i=this;this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(function(s){return s.id}),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(s){i.gradients[s.id]={}}),this.layoutVertexArray=new Yi,this.layoutVertexArray2=new bl,this.indexArray=new Ja,this.programConfigurations=new Ot(r.layers,r.zoom),this.segments=new Z,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(s){return s.isStateDependent()}).map(function(s){return s.id})};Bi.prototype.populate=function(r,i,s){this.hasPattern=v0("line",this.layers,i);for(var h=this.layers[0].layout.get("line-sort-key"),m=[],y=0,_=r;y<_.length;y+=1){var S=_[y],k=S.feature,A=S.id,z=S.index,D=S.sourceLayerIndex,$=this.layers[0]._featureFilter.needGeometry,G=kn(k,$);if(this.layers[0]._featureFilter.filter(new cr(this.zoom),G,s)){var ae=h?h.evaluate(G,{},s):void 0,le={id:A,properties:k.properties,type:k.type,sourceLayerIndex:D,index:z,geometry:$?G.geometry:mn(k),patterns:{},sortKey:ae};m.push(le)}}h&&m.sort(function(Ye,nt){return Ye.sortKey-nt.sortKey});for(var be=0,de=m;be<de.length;be+=1){var Ie=de[be],Ae=Ie.geometry,Le=Ie.index,Be=Ie.sourceLayerIndex;if(this.hasPattern){var We=_0("line",this.layers,Ie,this.zoom,i);this.patternFeatures.push(We)}else this.addFeature(Ie,Ae,Le,s,{});i.featureIndex.insert(r[Le].feature,Ae,Le,Be,this.index)}},Bi.prototype.update=function(r,i,s){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,i,this.stateDependentLayers,s)},Bi.prototype.addFeatures=function(r,i,s){for(var h=0,m=this.patternFeatures;h<m.length;h+=1){var y=m[h];this.addFeature(y,y.geometry,y.index,i,s)}},Bi.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Bi.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Bi.prototype.upload=function(r){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=r.createVertexBuffer(this.layoutVertexArray2,UM)),this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,jM),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0},Bi.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Bi.prototype.lineFeatureClips=function(r){if(r.properties&&r.properties.hasOwnProperty("mapbox_clip_start")&&r.properties.hasOwnProperty("mapbox_clip_end"))return{start:+r.properties.mapbox_clip_start,end:+r.properties.mapbox_clip_end}},Bi.prototype.addFeature=function(r,i,s,h,m){var y=this.layers[0].layout,_=y.get("line-join").evaluate(r,{}),S=y.get("line-cap"),k=y.get("line-miter-limit"),A=y.get("line-round-limit");this.lineClips=this.lineFeatureClips(r);for(var z=0,D=i;z<D.length;z+=1)this.addLine(D[z],r,_,S,k,A);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,s,m,h)},Bi.prototype.addLine=function(r,i,s,h,m,y){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var _=0;_<r.length-1;_++)this.totalDistance+=r[_].dist(r[_+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var S=$M[i.type]==="Polygon",k=r.length;k>=2&&r[k-1].equals(r[k-2]);)k--;for(var A=0;A<k-1&&r[A].equals(r[A+1]);)A++;if(!(k<(S?3:2))){s==="bevel"&&(m=1.05);var z,D=this.overscaling<=16?122880/(512*this.overscaling):0,$=this.segments.prepareSegment(10*k,this.layoutVertexArray,this.indexArray),G=void 0,ae=void 0,le=void 0,be=void 0;this.e1=this.e2=-1,S&&(be=r[A].sub(z=r[k-2])._unit()._perp());for(var de=A;de<k;de++)if(!(ae=de===k-1?S?r[A+1]:void 0:r[de+1])||!r[de].equals(ae)){be&&(le=be),z&&(G=z),z=r[de],be=ae?ae.sub(z)._unit()._perp():le;var Ie=(le=le||be).add(be);Ie.x===0&&Ie.y===0||Ie._unit();var Ae=le.x*be.x+le.y*be.y,Le=Ie.x*be.x+Ie.y*be.y,Be=Le!==0?1/Le:1/0,We=2*Math.sqrt(2-2*Le),Ye=Le<VM&&G&&ae,nt=le.x*be.y-le.y*be.x>0;if(Ye&&de>A){var wt=z.dist(G);if(wt>2*D){var ut=z.sub(z.sub(G)._mult(D/wt)._round());this.updateDistance(G,ut),this.addCurrentVertex(ut,le,0,0,$),G=ut}}var Ct=G&&ae,ht=Ct?s:S?"butt":h;if(Ct&&ht==="round"&&(Be<y?ht="miter":Be<=2&&(ht="fakeround")),ht==="miter"&&Be>m&&(ht="bevel"),ht==="bevel"&&(Be>2&&(ht="flipbevel"),Be<m&&(ht="miter")),G&&this.updateDistance(G,z),ht==="miter")Ie._mult(Be),this.addCurrentVertex(z,Ie,0,0,$);else if(ht==="flipbevel"){if(Be>100)Ie=be.mult(-1);else{var ir=Be*le.add(be).mag()/le.sub(be).mag();Ie._perp()._mult(ir*(nt?-1:1))}this.addCurrentVertex(z,Ie,0,0,$),this.addCurrentVertex(z,Ie.mult(-1),0,0,$)}else if(ht==="bevel"||ht==="fakeround"){var Nt=-Math.sqrt(Be*Be-1),xt=nt?Nt:0,sr=nt?0:Nt;if(G&&this.addCurrentVertex(z,le,xt,sr,$),ht==="fakeround")for(var Xt=Math.round(180*We/Math.PI/20),vr=1;vr<Xt;vr++){var kt=vr/Xt;if(kt!==.5){var Er=kt-.5;kt+=kt*Er*(kt-1)*((1.0904+Ae*(Ae*(3.55645-1.43519*Ae)-3.2452))*Er*Er+(.848013+Ae*(.215638*Ae-1.06021)))}var un=be.sub(le)._mult(kt)._add(le)._unit()._mult(nt?-1:1);this.addHalfVertex(z,un.x,un.y,!1,nt,0,$)}ae&&this.addCurrentVertex(z,be,-xt,-sr,$)}else if(ht==="butt")this.addCurrentVertex(z,Ie,0,0,$);else if(ht==="square"){var _n=G?1:-1;this.addCurrentVertex(z,Ie,_n,_n,$)}else ht==="round"&&(G&&(this.addCurrentVertex(z,le,0,0,$),this.addCurrentVertex(z,le,1,1,$,!0)),ae&&(this.addCurrentVertex(z,be,-1,-1,$,!0),this.addCurrentVertex(z,be,0,0,$)));if(Ye&&de<k-1){var yn=z.dist(ae);if(yn>2*D){var cn=z.add(ae.sub(z)._mult(D/yn)._round());this.updateDistance(z,cn),this.addCurrentVertex(cn,be,0,0,$),z=cn}}}}},Bi.prototype.addCurrentVertex=function(r,i,s,h,m,y){y===void 0&&(y=!1);var _=i.y*h-i.x,S=-i.y-i.x*h;this.addHalfVertex(r,i.x+i.y*s,i.y-i.x*s,y,!1,s,m),this.addHalfVertex(r,_,S,y,!0,-h,m),this.distance>_w/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(r,i,s,h,m,y))},Bi.prototype.addHalfVertex=function(r,i,s,h,m,y,_){var S=.5*(this.lineClips?this.scaledDistance*(_w-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((r.x<<1)+(h?1:0),(r.y<<1)+(m?1:0),Math.round(63*i)+128,Math.round(63*s)+128,1+(y===0?0:y<0?-1:1)|(63&S)<<2,S>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var k=_.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,k),_.primitiveLength++),m?this.e2=k:this.e1=k},Bi.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},Bi.prototype.updateDistance=function(r,i){this.distance+=r.dist(i),this.updateScaledDistance()},gt("LineBucket",Bi,{omit:["layers","patternFeatures"]});var qM=new hi({"line-cap":new St(H.layout_line["line-cap"]),"line-join":new _t(H.layout_line["line-join"]),"line-miter-limit":new St(H.layout_line["line-miter-limit"]),"line-round-limit":new St(H.layout_line["line-round-limit"]),"line-sort-key":new _t(H.layout_line["line-sort-key"])}),xw={paint:new hi({"line-opacity":new _t(H.paint_line["line-opacity"]),"line-color":new _t(H.paint_line["line-color"]),"line-translate":new St(H.paint_line["line-translate"]),"line-translate-anchor":new St(H.paint_line["line-translate-anchor"]),"line-width":new _t(H.paint_line["line-width"]),"line-gap-width":new _t(H.paint_line["line-gap-width"]),"line-offset":new _t(H.paint_line["line-offset"]),"line-blur":new _t(H.paint_line["line-blur"]),"line-dasharray":new Ci(H.paint_line["line-dasharray"]),"line-pattern":new Cc(H.paint_line["line-pattern"]),"line-gradient":new Vo(H.paint_line["line-gradient"])}),layout:qM},bw=new(function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.possiblyEvaluate=function(s,h){return h=new cr(Math.floor(h.zoom),{now:h.now,fadeDuration:h.fadeDuration,zoomHistory:h.zoomHistory,transition:h.transition}),r.prototype.possiblyEvaluate.call(this,s,h)},i.prototype.evaluate=function(s,h,m,y){return h=F({},h,{zoom:Math.floor(h.zoom)}),r.prototype.evaluate.call(this,s,h,m,y)},i}(_t))(xw.paint.properties["line-width"].specification);bw.useIntegerZoom=!0;var WM=function(r){function i(s){r.call(this,s,xw),this.gradientVersion=0}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._handleSpecialPaintPropertyUpdate=function(s){s==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Gi,this.gradientVersion=(this.gradientVersion+1)%V)},i.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},i.prototype.recalculate=function(s,h){r.prototype.recalculate.call(this,s,h),this.paint._values["line-floorwidth"]=bw.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,s)},i.prototype.createBucket=function(s){return new Bi(s)},i.prototype.queryRadius=function(s){var h=s,m=ww(ua("line-width",this,h),ua("line-gap-width",this,h)),y=ua("line-offset",this,h);return m/2+Math.abs(y)+Hn(this.paint.get("line-translate"))},i.prototype.queryIntersectsFeature=function(s,h,m,y,_,S,k){var A=Ca(s,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),S.angle,k),z=k/2*ww(this.paint.get("line-width").evaluate(h,m),this.paint.get("line-gap-width").evaluate(h,m)),D=this.paint.get("line-offset").evaluate(h,m);return D&&(y=function($,G){for(var ae=[],le=new T(0,0),be=0;be<$.length;be++){for(var de=$[be],Ie=[],Ae=0;Ae<de.length;Ae++){var Le=de[Ae],Be=de[Ae+1],We=Ae===0?le:Le.sub(de[Ae-1])._unit()._perp(),Ye=Ae===de.length-1?le:Be.sub(Le)._unit()._perp(),nt=We._add(Ye)._unit();nt._mult(1/(nt.x*Ye.x+nt.y*Ye.y)),Ie.push(nt._mult(G)._add(Le))}ae.push(Ie)}return ae}(y,D*k)),function($,G,ae){for(var le=0;le<G.length;le++){var be=G[le];if($.length>=3){for(var de=0;de<be.length;de++)if(la($,be[de]))return!0}if(So($,be,ae))return!0}return!1}(A,y,z)},i.prototype.isTileClipped=function(){return!0},i}(aa);function ww(r,i){return i>0?i+2*r:r}var GM=ti([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),HM=ti([{name:"a_projected_pos",components:3,type:"Float32"}],4),KM=(ti([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),ti([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Sw=(ti([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),ti([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),ZM=ti([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function XM(r,i,s){return r.sections.forEach(function(h){h.text=function(m,y,_){var S=y.layout.get("text-transform").evaluate(_,{});return S==="uppercase"?m=m.toLocaleUpperCase():S==="lowercase"&&(m=m.toLocaleLowerCase()),lo.applyArabicShaping&&(m=lo.applyArabicShaping(m)),m}(h.text,i,s)}),r}ti([{name:"triangle",components:3,type:"Uint16"}]),ti([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),ti([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),ti([{type:"Float32",name:"offsetX"}]),ti([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Vh={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"},Ew=function(r,i,s,h,m){var y,_,S=8*m-h-1,k=(1<<S)-1,A=k>>1,z=-7,D=s?m-1:0,$=s?-1:1,G=r[i+D];for(D+=$,y=G&(1<<-z)-1,G>>=-z,z+=S;z>0;y=256*y+r[i+D],D+=$,z-=8);for(_=y&(1<<-z)-1,y>>=-z,z+=h;z>0;_=256*_+r[i+D],D+=$,z-=8);if(y===0)y=1-A;else{if(y===k)return _?NaN:1/0*(G?-1:1);_+=Math.pow(2,h),y-=A}return(G?-1:1)*_*Math.pow(2,y-h)},Cw=function(r,i,s,h,m,y){var _,S,k,A=8*y-m-1,z=(1<<A)-1,D=z>>1,$=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,G=h?0:y-1,ae=h?1:-1,le=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(S=isNaN(i)?1:0,_=z):(_=Math.floor(Math.log(i)/Math.LN2),i*(k=Math.pow(2,-_))<1&&(_--,k*=2),(i+=_+D>=1?$/k:$*Math.pow(2,1-D))*k>=2&&(_++,k/=2),_+D>=z?(S=0,_=z):_+D>=1?(S=(i*k-1)*Math.pow(2,m),_+=D):(S=i*Math.pow(2,D-1)*Math.pow(2,m),_=0));m>=8;r[s+G]=255&S,G+=ae,S/=256,m-=8);for(_=_<<m|S,A+=m;A>0;r[s+G]=255&_,G+=ae,_/=256,A-=8);r[s+G-ae]|=128*le},fm=Qr;function Qr(r){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(r)?r:new Uint8Array(r||0),this.pos=0,this.type=0,this.length=this.buf.length}Qr.Varint=0,Qr.Fixed64=1,Qr.Bytes=2,Qr.Fixed32=5;var kw=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Vs(r){return r.type===Qr.Bytes?r.readVarint()+r.pos:r.pos+1}function Dc(r,i,s){return s?4294967296*i+(r>>>0):4294967296*(i>>>0)+(r>>>0)}function Tw(r,i,s){var h=i<=16383?1:i<=2097151?2:i<=268435455?3:Math.floor(Math.log(i)/(7*Math.LN2));s.realloc(h);for(var m=s.pos-1;m>=r;m--)s.buf[m+h]=s.buf[m]}function YM(r,i){for(var s=0;s<r.length;s++)i.writeVarint(r[s])}function JM(r,i){for(var s=0;s<r.length;s++)i.writeSVarint(r[s])}function QM(r,i){for(var s=0;s<r.length;s++)i.writeFloat(r[s])}function ez(r,i){for(var s=0;s<r.length;s++)i.writeDouble(r[s])}function tz(r,i){for(var s=0;s<r.length;s++)i.writeBoolean(r[s])}function rz(r,i){for(var s=0;s<r.length;s++)i.writeFixed32(r[s])}function nz(r,i){for(var s=0;s<r.length;s++)i.writeSFixed32(r[s])}function iz(r,i){for(var s=0;s<r.length;s++)i.writeFixed64(r[s])}function oz(r,i){for(var s=0;s<r.length;s++)i.writeSFixed64(r[s])}function mm(r,i){return(r[i]|r[i+1]<<8|r[i+2]<<16)+16777216*r[i+3]}function Oc(r,i,s){r[s]=i,r[s+1]=i>>>8,r[s+2]=i>>>16,r[s+3]=i>>>24}function Iw(r,i){return(r[i]|r[i+1]<<8|r[i+2]<<16)+(r[i+3]<<24)}function az(r,i,s){r===1&&s.readMessage(sz,i)}function sz(r,i,s){if(r===3){var h=s.readMessage(lz,{}),m=h.width,y=h.height,_=h.left,S=h.top,k=h.advance;i.push({id:h.id,bitmap:new Pu({width:m+6,height:y+6},h.bitmap),metrics:{width:m,height:y,left:_,top:S,advance:k}})}}function lz(r,i,s){r===1?i.id=s.readVarint():r===2?i.bitmap=s.readBytes():r===3?i.width=s.readVarint():r===4?i.height=s.readVarint():r===5?i.left=s.readSVarint():r===6?i.top=s.readSVarint():r===7&&(i.advance=s.readVarint())}function Pw(r){for(var i=0,s=0,h=0,m=r;h<m.length;h+=1){var y=m[h];i+=y.w*y.h,s=Math.max(s,y.w)}r.sort(function(le,be){return be.h-le.h});for(var _=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(i/.95)),s),h:1/0}],S=0,k=0,A=0,z=r;A<z.length;A+=1)for(var D=z[A],$=_.length-1;$>=0;$--){var G=_[$];if(!(D.w>G.w||D.h>G.h)){if(D.x=G.x,D.y=G.y,k=Math.max(k,D.y+D.h),S=Math.max(S,D.x+D.w),D.w===G.w&&D.h===G.h){var ae=_.pop();$<_.length&&(_[$]=ae)}else D.h===G.h?(G.x+=D.w,G.w-=D.w):D.w===G.w?(G.y+=D.h,G.h-=D.h):(_.push({x:G.x+D.w,y:G.y,w:G.w-D.w,h:D.h}),G.y+=D.h,G.h-=D.h);break}}return{w:S,h:k,fill:i/(S*k)||0}}Qr.prototype={destroy:function(){this.buf=null},readFields:function(r,i,s){for(s=s||this.length;this.pos<s;){var h=this.readVarint(),m=h>>3,y=this.pos;this.type=7&h,r(m,i,this),this.pos===y&&this.skip(h)}return i},readMessage:function(r,i){return this.readFields(r,i,this.readVarint()+this.pos)},readFixed32:function(){var r=mm(this.buf,this.pos);return this.pos+=4,r},readSFixed32:function(){var r=Iw(this.buf,this.pos);return this.pos+=4,r},readFixed64:function(){var r=mm(this.buf,this.pos)+4294967296*mm(this.buf,this.pos+4);return this.pos+=8,r},readSFixed64:function(){var r=mm(this.buf,this.pos)+4294967296*Iw(this.buf,this.pos+4);return this.pos+=8,r},readFloat:function(){var r=Ew(this.buf,this.pos,!0,23,4);return this.pos+=4,r},readDouble:function(){var r=Ew(this.buf,this.pos,!0,52,8);return this.pos+=8,r},readVarint:function(r){var i,s,h=this.buf;return i=127&(s=h[this.pos++]),s<128?i:(i|=(127&(s=h[this.pos++]))<<7,s<128?i:(i|=(127&(s=h[this.pos++]))<<14,s<128?i:(i|=(127&(s=h[this.pos++]))<<21,s<128?i:function(m,y,_){var S,k,A=_.buf;if(S=(112&(k=A[_.pos++]))>>4,k<128||(S|=(127&(k=A[_.pos++]))<<3,k<128)||(S|=(127&(k=A[_.pos++]))<<10,k<128)||(S|=(127&(k=A[_.pos++]))<<17,k<128)||(S|=(127&(k=A[_.pos++]))<<24,k<128)||(S|=(1&(k=A[_.pos++]))<<31,k<128))return Dc(m,S,y);throw new Error("Expected varint not more than 10 bytes")}(i|=(15&(s=h[this.pos]))<<28,r,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var r=this.readVarint();return r%2==1?(r+1)/-2:r/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var r=this.readVarint()+this.pos,i=this.pos;return this.pos=r,r-i>=12&&kw?function(s,h,m){return kw.decode(s.subarray(h,m))}(this.buf,i,r):function(s,h,m){for(var y="",_=h;_<m;){var S,k,A,z=s[_],D=null,$=z>239?4:z>223?3:z>191?2:1;if(_+$>m)break;$===1?z<128&&(D=z):$===2?(192&(S=s[_+1]))==128&&(D=(31&z)<<6|63&S)<=127&&(D=null):$===3?(k=s[_+2],(192&(S=s[_+1]))==128&&(192&k)==128&&((D=(15&z)<<12|(63&S)<<6|63&k)<=2047||D>=55296&&D<=57343)&&(D=null)):$===4&&(k=s[_+2],A=s[_+3],(192&(S=s[_+1]))==128&&(192&k)==128&&(192&A)==128&&((D=(15&z)<<18|(63&S)<<12|(63&k)<<6|63&A)<=65535||D>=1114112)&&(D=null)),D===null?(D=65533,$=1):D>65535&&(D-=65536,y+=String.fromCharCode(D>>>10&1023|55296),D=56320|1023&D),y+=String.fromCharCode(D),_+=$}return y}(this.buf,i,r)},readBytes:function(){var r=this.readVarint()+this.pos,i=this.buf.subarray(this.pos,r);return this.pos=r,i},readPackedVarint:function(r,i){if(this.type!==Qr.Bytes)return r.push(this.readVarint(i));var s=Vs(this);for(r=r||[];this.pos<s;)r.push(this.readVarint(i));return r},readPackedSVarint:function(r){if(this.type!==Qr.Bytes)return r.push(this.readSVarint());var i=Vs(this);for(r=r||[];this.pos<i;)r.push(this.readSVarint());return r},readPackedBoolean:function(r){if(this.type!==Qr.Bytes)return r.push(this.readBoolean());var i=Vs(this);for(r=r||[];this.pos<i;)r.push(this.readBoolean());return r},readPackedFloat:function(r){if(this.type!==Qr.Bytes)return r.push(this.readFloat());var i=Vs(this);for(r=r||[];this.pos<i;)r.push(this.readFloat());return r},readPackedDouble:function(r){if(this.type!==Qr.Bytes)return r.push(this.readDouble());var i=Vs(this);for(r=r||[];this.pos<i;)r.push(this.readDouble());return r},readPackedFixed32:function(r){if(this.type!==Qr.Bytes)return r.push(this.readFixed32());var i=Vs(this);for(r=r||[];this.pos<i;)r.push(this.readFixed32());return r},readPackedSFixed32:function(r){if(this.type!==Qr.Bytes)return r.push(this.readSFixed32());var i=Vs(this);for(r=r||[];this.pos<i;)r.push(this.readSFixed32());return r},readPackedFixed64:function(r){if(this.type!==Qr.Bytes)return r.push(this.readFixed64());var i=Vs(this);for(r=r||[];this.pos<i;)r.push(this.readFixed64());return r},readPackedSFixed64:function(r){if(this.type!==Qr.Bytes)return r.push(this.readSFixed64());var i=Vs(this);for(r=r||[];this.pos<i;)r.push(this.readSFixed64());return r},skip:function(r){var i=7&r;if(i===Qr.Varint)for(;this.buf[this.pos++]>127;);else if(i===Qr.Bytes)this.pos=this.readVarint()+this.pos;else if(i===Qr.Fixed32)this.pos+=4;else{if(i!==Qr.Fixed64)throw new Error("Unimplemented type: "+i);this.pos+=8}},writeTag:function(r,i){this.writeVarint(r<<3|i)},realloc:function(r){for(var i=this.length||16;i<this.pos+r;)i*=2;if(i!==this.length){var s=new Uint8Array(i);s.set(this.buf),this.buf=s,this.length=i}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(r){this.realloc(4),Oc(this.buf,r,this.pos),this.pos+=4},writeSFixed32:function(r){this.realloc(4),Oc(this.buf,r,this.pos),this.pos+=4},writeFixed64:function(r){this.realloc(8),Oc(this.buf,-1&r,this.pos),Oc(this.buf,Math.floor(r*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(r){this.realloc(8),Oc(this.buf,-1&r,this.pos),Oc(this.buf,Math.floor(r*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(r){(r=+r||0)>268435455||r<0?function(i,s){var h,m;if(i>=0?(h=i%4294967296|0,m=i/4294967296|0):(m=~(-i/4294967296),4294967295^(h=~(-i%4294967296))?h=h+1|0:(h=0,m=m+1|0)),i>=18446744073709552e3||i<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");s.realloc(10),function(y,_,S){S.buf[S.pos++]=127&y|128,y>>>=7,S.buf[S.pos++]=127&y|128,y>>>=7,S.buf[S.pos++]=127&y|128,y>>>=7,S.buf[S.pos++]=127&y|128,S.buf[S.pos]=127&(y>>>=7)}(h,0,s),function(y,_){var S=(7&y)<<4;_.buf[_.pos++]|=S|((y>>>=3)?128:0),y&&(_.buf[_.pos++]=127&y|((y>>>=7)?128:0),y&&(_.buf[_.pos++]=127&y|((y>>>=7)?128:0),y&&(_.buf[_.pos++]=127&y|((y>>>=7)?128:0),y&&(_.buf[_.pos++]=127&y|((y>>>=7)?128:0),y&&(_.buf[_.pos++]=127&y)))))}(m,s)}(r,this):(this.realloc(4),this.buf[this.pos++]=127&r|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=r>>>7&127))))},writeSVarint:function(r){this.writeVarint(r<0?2*-r-1:2*r)},writeBoolean:function(r){this.writeVarint(!!r)},writeString:function(r){r=String(r),this.realloc(4*r.length),this.pos++;var i=this.pos;this.pos=function(h,m,y){for(var _,S,k=0;k<m.length;k++){if((_=m.charCodeAt(k))>55295&&_<57344){if(!S){_>56319||k+1===m.length?(h[y++]=239,h[y++]=191,h[y++]=189):S=_;continue}if(_<56320){h[y++]=239,h[y++]=191,h[y++]=189,S=_;continue}_=S-55296<<10|_-56320|65536,S=null}else S&&(h[y++]=239,h[y++]=191,h[y++]=189,S=null);_<128?h[y++]=_:(_<2048?h[y++]=_>>6|192:(_<65536?h[y++]=_>>12|224:(h[y++]=_>>18|240,h[y++]=_>>12&63|128),h[y++]=_>>6&63|128),h[y++]=63&_|128)}return y}(this.buf,r,this.pos);var s=this.pos-i;s>=128&&Tw(i,s,this),this.pos=i-1,this.writeVarint(s),this.pos+=s},writeFloat:function(r){this.realloc(4),Cw(this.buf,r,this.pos,!0,23,4),this.pos+=4},writeDouble:function(r){this.realloc(8),Cw(this.buf,r,this.pos,!0,52,8),this.pos+=8},writeBytes:function(r){var i=r.length;this.writeVarint(i),this.realloc(i);for(var s=0;s<i;s++)this.buf[this.pos++]=r[s]},writeRawMessage:function(r,i){this.pos++;var s=this.pos;r(i,this);var h=this.pos-s;h>=128&&Tw(s,h,this),this.pos=s-1,this.writeVarint(h),this.pos+=h},writeMessage:function(r,i,s){this.writeTag(r,Qr.Bytes),this.writeRawMessage(i,s)},writePackedVarint:function(r,i){i.length&&this.writeMessage(r,YM,i)},writePackedSVarint:function(r,i){i.length&&this.writeMessage(r,JM,i)},writePackedBoolean:function(r,i){i.length&&this.writeMessage(r,tz,i)},writePackedFloat:function(r,i){i.length&&this.writeMessage(r,QM,i)},writePackedDouble:function(r,i){i.length&&this.writeMessage(r,ez,i)},writePackedFixed32:function(r,i){i.length&&this.writeMessage(r,rz,i)},writePackedSFixed32:function(r,i){i.length&&this.writeMessage(r,nz,i)},writePackedFixed64:function(r,i){i.length&&this.writeMessage(r,iz,i)},writePackedSFixed64:function(r,i){i.length&&this.writeMessage(r,oz,i)},writeBytesField:function(r,i){this.writeTag(r,Qr.Bytes),this.writeBytes(i)},writeFixed32Field:function(r,i){this.writeTag(r,Qr.Fixed32),this.writeFixed32(i)},writeSFixed32Field:function(r,i){this.writeTag(r,Qr.Fixed32),this.writeSFixed32(i)},writeFixed64Field:function(r,i){this.writeTag(r,Qr.Fixed64),this.writeFixed64(i)},writeSFixed64Field:function(r,i){this.writeTag(r,Qr.Fixed64),this.writeSFixed64(i)},writeVarintField:function(r,i){this.writeTag(r,Qr.Varint),this.writeVarint(i)},writeSVarintField:function(r,i){this.writeTag(r,Qr.Varint),this.writeSVarint(i)},writeStringField:function(r,i){this.writeTag(r,Qr.Bytes),this.writeString(i)},writeFloatField:function(r,i){this.writeTag(r,Qr.Fixed32),this.writeFloat(i)},writeDoubleField:function(r,i){this.writeTag(r,Qr.Fixed64),this.writeDouble(i)},writeBooleanField:function(r,i){this.writeVarintField(r,!!i)}};var ym=function(r,i){var s=i.pixelRatio,h=i.version,m=i.stretchX,y=i.stretchY,_=i.content;this.paddedRect=r,this.pixelRatio=s,this.stretchX=m,this.stretchY=y,this.content=_,this.version=h},qh={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};qh.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},qh.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},qh.tlbr.get=function(){return this.tl.concat(this.br)},qh.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(ym.prototype,qh);var Wh=function(r,i){var s={},h={};this.haveRenderCallbacks=[];var m=[];this.addImages(r,s,m),this.addImages(i,h,m);var y=Pw(m),_=new Qi({width:y.w||1,height:y.h||1});for(var S in r){var k=r[S],A=s[S].paddedRect;Qi.copy(k.data,_,{x:0,y:0},{x:A.x+1,y:A.y+1},k.data)}for(var z in i){var D=i[z],$=h[z].paddedRect,G=$.x+1,ae=$.y+1,le=D.data.width,be=D.data.height;Qi.copy(D.data,_,{x:0,y:0},{x:G,y:ae},D.data),Qi.copy(D.data,_,{x:0,y:be-1},{x:G,y:ae-1},{width:le,height:1}),Qi.copy(D.data,_,{x:0,y:0},{x:G,y:ae+be},{width:le,height:1}),Qi.copy(D.data,_,{x:le-1,y:0},{x:G-1,y:ae},{width:1,height:be}),Qi.copy(D.data,_,{x:0,y:0},{x:G+le,y:ae},{width:1,height:be})}this.image=_,this.iconPositions=s,this.patternPositions=h};Wh.prototype.addImages=function(r,i,s){for(var h in r){var m=r[h],y={x:0,y:0,w:m.data.width+2,h:m.data.height+2};s.push(y),i[h]=new ym(y,m),m.hasRenderCallback&&this.haveRenderCallbacks.push(h)}},Wh.prototype.patchUpdatedImages=function(r,i){for(var s in r.dispatchRenderCallbacks(this.haveRenderCallbacks),r.updatedImages)this.patchUpdatedImage(this.iconPositions[s],r.getImage(s),i),this.patchUpdatedImage(this.patternPositions[s],r.getImage(s),i)},Wh.prototype.patchUpdatedImage=function(r,i,s){if(r&&i&&r.version!==i.version){r.version=i.version;var h=r.tl;s.update(i.data,void 0,{x:h[0],y:h[1]})}},gt("ImagePosition",ym),gt("ImageAtlas",Wh);var Eo={horizontal:1,vertical:2,horizontalOnly:3},Bc=function(){this.scale=1,this.fontStack="",this.imageName=null};Bc.forText=function(r,i){var s=new Bc;return s.scale=r||1,s.fontStack=i,s},Bc.forImage=function(r){var i=new Bc;return i.imageName=r,i};var Ti=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function gm(r,i,s,h,m,y,_,S,k,A,z,D,$,G,ae,le){var be,de=Ti.fromFeature(r,m);D===Eo.vertical&&de.verticalizePunctuation();var Ie=lo.processBidirectionalText,Ae=lo.processStyledBidirectionalText;if(Ie&&de.sections.length===1){be=[];for(var Le=0,Be=Ie(de.toString(),b0(de,A,y,i,h,G,ae));Le<Be.length;Le+=1){var We=Be[Le],Ye=new Ti;Ye.text=We,Ye.sections=de.sections;for(var nt=0;nt<We.length;nt++)Ye.sectionIndex.push(0);be.push(Ye)}}else if(Ae){be=[];for(var wt=0,ut=Ae(de.text,de.sectionIndex,b0(de,A,y,i,h,G,ae));wt<ut.length;wt+=1){var Ct=ut[wt],ht=new Ti;ht.text=Ct[0],ht.sectionIndex=Ct[1],ht.sections=de.sections,be.push(ht)}}else be=function(xt,sr){for(var Xt=[],vr=xt.text,kt=0,Er=0,un=sr;Er<un.length;Er+=1){var _n=un[Er];Xt.push(xt.substring(kt,_n)),kt=_n}return kt<vr.length&&Xt.push(xt.substring(kt,vr.length)),Xt}(de,b0(de,A,y,i,h,G,ae));var ir=[],Nt={positionedLines:ir,text:de.toString(),top:z[1],bottom:z[1],left:z[0],right:z[0],writingMode:D,iconsInText:!1,verticalizable:!1};return function(xt,sr,Xt,vr,kt,Er,un,_n,yn,cn,xn,Kn){for(var Zn=0,Ii=-17,ii=0,Pi=0,Tn=_n==="right"?1:_n==="left"?0:.5,oi=0,pr=0,Kr=kt;pr<Kr.length;pr+=1){var Fr=Kr[pr];Fr.trim();var xr=Fr.getMaxScale(),Ni=24*(xr-1),gi={positionedGlyphs:[],lineOffset:0};xt.positionedLines[oi]=gi;var nn=gi.positionedGlyphs,Ln=0;if(Fr.length()){for(var vi=0;vi<Fr.length();vi++){var Cr=Fr.getSection(vi),is=Fr.getSectionIndex(vi),Co=Fr.getCharCode(vi),os=0,In=null,as=null,ca=null,Wc=24,Ru=!(yn===Eo.horizontal||!xn&&!wc(Co)||xn&&(vm[Co]||(Hs=Co,ot.Arabic(Hs)||ot["Arabic Supplement"](Hs)||ot["Arabic Extended-A"](Hs)||ot["Arabic Presentation Forms-A"](Hs)||ot["Arabic Presentation Forms-B"](Hs))));if(Cr.imageName){var Gc=vr[Cr.imageName];if(!Gc)continue;ca=Cr.imageName,xt.iconsInText=xt.iconsInText||!0,as=Gc.paddedRect;var Gs=Gc.displaySize;Cr.scale=24*Cr.scale/Kn,os=Ni+(24-Gs[1]*Cr.scale),Wc=(In={width:Gs[0],height:Gs[1],left:1,top:-3,advance:Ru?Gs[1]:Gs[0]}).advance;var Hc=Ru?Gs[0]*Cr.scale-24*xr:Gs[1]*Cr.scale-24*xr;Hc>0&&Hc>Ln&&(Ln=Hc)}else{var Tm=Xt[Cr.fontStack],Kc=Tm&&Tm[Co];if(Kc&&Kc.rect)as=Kc.rect,In=Kc.metrics;else{var Kh=sr[Cr.fontStack],Im=Kh&&Kh[Co];if(!Im)continue;In=Im.metrics}os=24*(xr-Cr.scale)}Ru?(xt.verticalizable=!0,nn.push({glyph:Co,imageName:ca,x:Zn,y:Ii+os,vertical:Ru,scale:Cr.scale,fontStack:Cr.fontStack,sectionIndex:is,metrics:In,rect:as}),Zn+=Wc*Cr.scale+cn):(nn.push({glyph:Co,imageName:ca,x:Zn,y:Ii+os,vertical:Ru,scale:Cr.scale,fontStack:Cr.fontStack,sectionIndex:is,metrics:In,rect:as}),Zn+=In.advance*Cr.scale+cn)}nn.length!==0&&(ii=Math.max(Zn-cn,ii),cz(nn,0,nn.length-1,Tn,Ln)),Zn=0;var Pm=Er*xr+Ln;gi.lineOffset=Math.max(Ln,Ni),Ii+=Pm,Pi=Math.max(Pm,Pi),++oi}else Ii+=Er,++oi}var Hs,Zh=Ii- -17,Zc=w0(un),Pl=Zc.horizontalAlign,Xc=Zc.verticalAlign;(function(Am,Mm,Xh,Yh,zm,Jh,Qh,ed,Rm){var Yc,Lm=(Mm-Xh)*zm;Yc=Jh!==Qh?-ed*Yh- -17:(-Yh*Rm+.5)*Qh;for(var Jc=0,td=Am;Jc<td.length;Jc+=1)for(var Lu=0,rd=td[Jc].positionedGlyphs;Lu<rd.length;Lu+=1){var Qc=rd[Lu];Qc.x+=Lm,Qc.y+=Yc}})(xt.positionedLines,Tn,Pl,Xc,ii,Pi,Er,Zh,kt.length),xt.top+=-Xc*Zh,xt.bottom=xt.top+Zh,xt.left+=-Pl*ii,xt.right=xt.left+ii}(Nt,i,s,h,be,_,S,k,D,A,$,le),!function(xt){for(var sr=0,Xt=xt;sr<Xt.length;sr+=1)if(Xt[sr].positionedGlyphs.length!==0)return!1;return!0}(ir)&&Nt}Ti.fromFeature=function(r,i){for(var s=new Ti,h=0;h<r.sections.length;h++){var m=r.sections[h];m.image?s.addImageSection(m):s.addTextSection(m,i)}return s},Ti.prototype.length=function(){return this.text.length},Ti.prototype.getSection=function(r){return this.sections[this.sectionIndex[r]]},Ti.prototype.getSectionIndex=function(r){return this.sectionIndex[r]},Ti.prototype.getCharCode=function(r){return this.text.charCodeAt(r)},Ti.prototype.verticalizePunctuation=function(){this.text=function(r){for(var i="",s=0;s<r.length;s++){var h=r.charCodeAt(s+1)||null,m=r.charCodeAt(s-1)||null;i+=h&&Ih(h)&&!Vh[r[s+1]]||m&&Ih(m)&&!Vh[r[s-1]]||!Vh[r[s]]?r[s]:Vh[r[s]]}return i}(this.text)},Ti.prototype.trim=function(){for(var r=0,i=0;i<this.text.length&&vm[this.text.charCodeAt(i)];i++)r++;for(var s=this.text.length,h=this.text.length-1;h>=0&&h>=r&&vm[this.text.charCodeAt(h)];h--)s--;this.text=this.text.substring(r,s),this.sectionIndex=this.sectionIndex.slice(r,s)},Ti.prototype.substring=function(r,i){var s=new Ti;return s.text=this.text.substring(r,i),s.sectionIndex=this.sectionIndex.slice(r,i),s.sections=this.sections,s},Ti.prototype.toString=function(){return this.text},Ti.prototype.getMaxScale=function(){var r=this;return this.sectionIndex.reduce(function(i,s){return Math.max(i,r.sections[s].scale)},0)},Ti.prototype.addTextSection=function(r,i){this.text+=r.text,this.sections.push(Bc.forText(r.scale,r.fontStack||i));for(var s=this.sections.length-1,h=0;h<r.text.length;++h)this.sectionIndex.push(s)},Ti.prototype.addImageSection=function(r){var i=r.image?r.image.name:"";if(i.length!==0){var s=this.getNextImageSectionCharCode();s?(this.text+=String.fromCharCode(s),this.sections.push(Bc.forImage(i)),this.sectionIndex.push(this.sections.length-1)):ge("Reached maximum number of images 6401")}else ge("Can't add FormattedSection with an empty image.")},Ti.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var vm={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},co={};function Aw(r,i,s,h,m,y){if(i.imageName){var _=h[i.imageName];return _?_.displaySize[0]*i.scale*24/y+m:0}var S=s[i.fontStack],k=S&&S[r];return k?k.metrics.advance*i.scale+m:0}function Mw(r,i,s,h){var m=Math.pow(r-i,2);return h?r<i?m/2:2*m:m+Math.abs(s)*s}function uz(r,i,s){var h=0;return r===10&&(h-=1e4),s&&(h+=150),r!==40&&r!==65288||(h+=50),i!==41&&i!==65289||(h+=50),h}function zw(r,i,s,h,m,y){for(var _=null,S=Mw(i,s,m,y),k=0,A=h;k<A.length;k+=1){var z=A[k],D=Mw(i-z.x,s,m,y)+z.badness;D<=S&&(_=z,S=D)}return{index:r,x:i,priorBreak:_,badness:S}}function b0(r,i,s,h,m,y,_){if(y!=="point")return[];if(!r)return[];for(var S,k=[],A=function(be,de,Ie,Ae,Le,Be){for(var We=0,Ye=0;Ye<be.length();Ye++){var nt=be.getSection(Ye);We+=Aw(be.getCharCode(Ye),nt,Ae,Le,de,Be)}return We/Math.max(1,Math.ceil(We/Ie))}(r,i,s,h,m,_),z=r.text.indexOf("​")>=0,D=0,$=0;$<r.length();$++){var G=r.getSection($),ae=r.getCharCode($);if(vm[ae]||(D+=Aw(ae,G,h,m,i,_)),$<r.length()-1){var le=!((S=ae)<11904||!(ot["Bopomofo Extended"](S)||ot.Bopomofo(S)||ot["CJK Compatibility Forms"](S)||ot["CJK Compatibility Ideographs"](S)||ot["CJK Compatibility"](S)||ot["CJK Radicals Supplement"](S)||ot["CJK Strokes"](S)||ot["CJK Symbols and Punctuation"](S)||ot["CJK Unified Ideographs Extension A"](S)||ot["CJK Unified Ideographs"](S)||ot["Enclosed CJK Letters and Months"](S)||ot["Halfwidth and Fullwidth Forms"](S)||ot.Hiragana(S)||ot["Ideographic Description Characters"](S)||ot["Kangxi Radicals"](S)||ot["Katakana Phonetic Extensions"](S)||ot.Katakana(S)||ot["Vertical Forms"](S)||ot["Yi Radicals"](S)||ot["Yi Syllables"](S)));(co[ae]||le||G.imageName)&&k.push(zw($+1,D,A,k,uz(ae,r.getCharCode($+1),le&&z),!1))}}return function be(de){return de?be(de.priorBreak).concat(de.index):[]}(zw(r.length(),D,A,k,0,!0))}function w0(r){var i=.5,s=.5;switch(r){case"right":case"top-right":case"bottom-right":i=1;break;case"left":case"top-left":case"bottom-left":i=0}switch(r){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:i,verticalAlign:s}}function cz(r,i,s,h,m){if(h||m)for(var y=r[s],_=(r[s].x+y.metrics.advance*y.scale)*h,S=i;S<=s;S++)r[S].x-=_,r[S].y+=m}function Rw(r,i,s,h,m,y){var _,S=r.image;if(S.content){var k=S.content,A=S.pixelRatio||1;_=[k[0]/A,k[1]/A,S.displaySize[0]-k[2]/A,S.displaySize[1]-k[3]/A]}var z,D,$,G,ae=i.left*y,le=i.right*y;s==="width"||s==="both"?(G=m[0]+ae-h[3],D=m[0]+le+h[1]):D=(G=m[0]+(ae+le-S.displaySize[0])/2)+S.displaySize[0];var be=i.top*y,de=i.bottom*y;return s==="height"||s==="both"?(z=m[1]+be-h[0],$=m[1]+de+h[2]):$=(z=m[1]+(be+de-S.displaySize[1])/2)+S.displaySize[1],{image:S,top:z,right:D,bottom:$,left:G,collisionPadding:_}}co[10]=!0,co[32]=!0,co[38]=!0,co[40]=!0,co[41]=!0,co[43]=!0,co[45]=!0,co[47]=!0,co[173]=!0,co[183]=!0,co[8203]=!0,co[8208]=!0,co[8211]=!0,co[8231]=!0;var Nc=function(r){function i(s,h,m,y){r.call(this,s,h),this.angle=m,y!==void 0&&(this.segment=y)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.clone=function(){return new i(this.x,this.y,this.angle,this.segment)},i}(T);function S0(r,i){var s=i.expression;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new cr(r+1))};if(s.kind==="source")return{kind:"source"};for(var h=s.zoomStops,m=s.interpolationType,y=0;y<h.length&&h[y]<=r;)y++;for(var _=y=Math.max(0,y-1);_<h.length&&h[_]<r+1;)_++;_=Math.min(h.length-1,_);var S=h[y],k=h[_];return s.kind==="composite"?{kind:"composite",minZoom:S,maxZoom:k,interpolationType:m}:{kind:"camera",minZoom:S,maxZoom:k,minSize:s.evaluate(new cr(S)),maxSize:s.evaluate(new cr(k)),interpolationType:m}}function Lw(r,i,s){var h=i.uSize,m=s.lowerSize;return r.kind==="source"?m/128:r.kind==="composite"?zn(m/128,s.upperSize/128,i.uSizeT):h}function Dw(r,i){var s=0,h=0;if(r.kind==="constant")h=r.layoutSize;else if(r.kind!=="source"){var m=r.interpolationType,y=m?J(ci.interpolationFactor(m,i,r.minZoom,r.maxZoom),0,1):0;r.kind==="camera"?h=zn(r.minSize,r.maxSize,y):s=y}return{uSizeT:s,uSize:h}}gt("Anchor",Nc);var pz=Object.freeze({__proto__:null,getSizeData:S0,evaluateSizeForFeature:Lw,evaluateSizeForZoom:Dw,SIZE_PACK_FACTOR:128});function Ow(r,i,s,h,m){if(i.segment===void 0)return!0;for(var y=i,_=i.segment+1,S=0;S>-s/2;){if(--_<0)return!1;S-=r[_].dist(y),y=r[_]}S+=r[_].dist(r[_+1]),_++;for(var k=[],A=0;S<s/2;){var z=r[_],D=r[_+1];if(!D)return!1;var $=r[_-1].angleTo(z)-z.angleTo(D);for($=Math.abs(($+3*Math.PI)%(2*Math.PI)-Math.PI),k.push({distance:S,angleDelta:$}),A+=$;S-k[0].distance>h;)A-=k.shift().angleDelta;if(A>m)return!1;_++,S+=z.dist(D)}return!0}function Bw(r){for(var i=0,s=0;s<r.length-1;s++)i+=r[s].dist(r[s+1]);return i}function Nw(r,i,s){return r?.6*i*s:0}function Fw(r,i){return Math.max(r?r.right-r.left:0,i?i.right-i.left:0)}function hz(r,i,s,h,m,y){for(var _=Nw(s,m,y),S=Fw(s,h)*y,k=0,A=Bw(r)/2,z=0;z<r.length-1;z++){var D=r[z],$=r[z+1],G=D.dist($);if(k+G>A){var ae=(A-k)/G,le=zn(D.x,$.x,ae),be=zn(D.y,$.y,ae),de=new Nc(le,be,$.angleTo(D),z);return de._round(),!_||Ow(r,de,S,_,i)?de:void 0}k+=G}}function dz(r,i,s,h,m,y,_,S,k){var A=Nw(h,y,_),z=Fw(h,m),D=z*_,$=r[0].x===0||r[0].x===k||r[0].y===0||r[0].y===k;return i-D<i/4&&(i=D+i/4),function G(ae,le,be,de,Ie,Ae,Le,Be,We){for(var Ye=Ae/2,nt=Bw(ae),wt=0,ut=le-be,Ct=[],ht=0;ht<ae.length-1;ht++){for(var ir=ae[ht],Nt=ae[ht+1],xt=ir.dist(Nt),sr=Nt.angleTo(ir);ut+be<wt+xt;){var Xt=((ut+=be)-wt)/xt,vr=zn(ir.x,Nt.x,Xt),kt=zn(ir.y,Nt.y,Xt);if(vr>=0&&vr<We&&kt>=0&&kt<We&&ut-Ye>=0&&ut+Ye<=nt){var Er=new Nc(vr,kt,sr,ht);Er._round(),de&&!Ow(ae,Er,Ae,de,Ie)||Ct.push(Er)}}wt+=xt}return Be||Ct.length||Le||(Ct=G(ae,wt/2,be,de,Ie,Ae,Le,!0,We)),Ct}(r,$?i/2*S%i:(z/2+2*y)*_*S%i,i,A,s,D,$,!1,k)}function jw(r,i,s,h,m){for(var y=[],_=0;_<r.length;_++)for(var S=r[_],k=void 0,A=0;A<S.length-1;A++){var z=S[A],D=S[A+1];z.x<i&&D.x<i||(z.x<i?z=new T(i,z.y+(i-z.x)/(D.x-z.x)*(D.y-z.y))._round():D.x<i&&(D=new T(i,z.y+(i-z.x)/(D.x-z.x)*(D.y-z.y))._round()),z.y<s&&D.y<s||(z.y<s?z=new T(z.x+(s-z.y)/(D.y-z.y)*(D.x-z.x),s)._round():D.y<s&&(D=new T(z.x+(s-z.y)/(D.y-z.y)*(D.x-z.x),s)._round()),z.x>=h&&D.x>=h||(z.x>=h?z=new T(h,z.y+(h-z.x)/(D.x-z.x)*(D.y-z.y))._round():D.x>=h&&(D=new T(h,z.y+(h-z.x)/(D.x-z.x)*(D.y-z.y))._round()),z.y>=m&&D.y>=m||(z.y>=m?z=new T(z.x+(m-z.y)/(D.y-z.y)*(D.x-z.x),m)._round():D.y>=m&&(D=new T(z.x+(m-z.y)/(D.y-z.y)*(D.x-z.x),m)._round()),k&&z.equals(k[k.length-1])||y.push(k=[z]),k.push(D)))))}return y}function Uw(r,i,s,h){var m=[],y=r.image,_=y.pixelRatio,S=y.paddedRect.w-2,k=y.paddedRect.h-2,A=r.right-r.left,z=r.bottom-r.top,D=y.stretchX||[[0,S]],$=y.stretchY||[[0,k]],G=function(vr,kt){return vr+kt[1]-kt[0]},ae=D.reduce(G,0),le=$.reduce(G,0),be=S-ae,de=k-le,Ie=0,Ae=ae,Le=0,Be=le,We=0,Ye=be,nt=0,wt=de;if(y.content&&h){var ut=y.content;Ie=_m(D,0,ut[0]),Le=_m($,0,ut[1]),Ae=_m(D,ut[0],ut[2]),Be=_m($,ut[1],ut[3]),We=ut[0]-Ie,nt=ut[1]-Le,Ye=ut[2]-ut[0]-Ae,wt=ut[3]-ut[1]-Be}var Ct=function(vr,kt,Er,un){var _n=xm(vr.stretch-Ie,Ae,A,r.left),yn=bm(vr.fixed-We,Ye,vr.stretch,ae),cn=xm(kt.stretch-Le,Be,z,r.top),xn=bm(kt.fixed-nt,wt,kt.stretch,le),Kn=xm(Er.stretch-Ie,Ae,A,r.left),Zn=bm(Er.fixed-We,Ye,Er.stretch,ae),Ii=xm(un.stretch-Le,Be,z,r.top),ii=bm(un.fixed-nt,wt,un.stretch,le),Pi=new T(_n,cn),Tn=new T(Kn,cn),oi=new T(Kn,Ii),pr=new T(_n,Ii),Kr=new T(yn/_,xn/_),Fr=new T(Zn/_,ii/_),xr=i*Math.PI/180;if(xr){var Ni=Math.sin(xr),gi=Math.cos(xr),nn=[gi,-Ni,Ni,gi];Pi._matMult(nn),Tn._matMult(nn),pr._matMult(nn),oi._matMult(nn)}var Ln=vr.stretch+vr.fixed,vi=kt.stretch+kt.fixed;return{tl:Pi,tr:Tn,bl:pr,br:oi,tex:{x:y.paddedRect.x+1+Ln,y:y.paddedRect.y+1+vi,w:Er.stretch+Er.fixed-Ln,h:un.stretch+un.fixed-vi},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Kr,pixelOffsetBR:Fr,minFontScaleX:Ye/_/A,minFontScaleY:wt/_/z,isSDF:s}};if(h&&(y.stretchX||y.stretchY))for(var ht=$w(D,be,ae),ir=$w($,de,le),Nt=0;Nt<ht.length-1;Nt++)for(var xt=ht[Nt],sr=ht[Nt+1],Xt=0;Xt<ir.length-1;Xt++)m.push(Ct(xt,ir[Xt],sr,ir[Xt+1]));else m.push(Ct({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:S+1},{fixed:0,stretch:k+1}));return m}function _m(r,i,s){for(var h=0,m=0,y=r;m<y.length;m+=1){var _=y[m];h+=Math.max(i,Math.min(s,_[1]))-Math.max(i,Math.min(s,_[0]))}return h}function $w(r,i,s){for(var h=[{fixed:-1,stretch:0}],m=0,y=r;m<y.length;m+=1){var _=y[m],S=_[0],k=_[1],A=h[h.length-1];h.push({fixed:S-A.stretch,stretch:A.stretch}),h.push({fixed:S-A.stretch,stretch:A.stretch+(k-S)})}return h.push({fixed:i+1,stretch:s}),h}function xm(r,i,s,h){return r/i*s+h}function bm(r,i,s,h){return r-i*s/h}var wm=function(r,i,s,h,m,y,_,S,k,A){if(this.boxStartIndex=r.length,k){var z=y.top,D=y.bottom,$=y.collisionPadding;$&&(z-=$[1],D+=$[3]);var G=D-z;G>0&&(G=Math.max(10,G),this.circleDiameter=G)}else{var ae=y.top*_-S,le=y.bottom*_+S,be=y.left*_-S,de=y.right*_+S,Ie=y.collisionPadding;if(Ie&&(be-=Ie[0]*_,ae-=Ie[1]*_,de+=Ie[2]*_,le+=Ie[3]*_),A){var Ae=new T(be,ae),Le=new T(de,ae),Be=new T(be,le),We=new T(de,le),Ye=A*Math.PI/180;Ae._rotate(Ye),Le._rotate(Ye),Be._rotate(Ye),We._rotate(Ye),be=Math.min(Ae.x,Le.x,Be.x,We.x),de=Math.max(Ae.x,Le.x,Be.x,We.x),ae=Math.min(Ae.y,Le.y,Be.y,We.y),le=Math.max(Ae.y,Le.y,Be.y,We.y)}r.emplaceBack(i.x,i.y,be,ae,de,le,s,h,m)}this.boxEndIndex=r.length},Fc=function(r,i){if(r===void 0&&(r=[]),i===void 0&&(i=fz),this.data=r,this.length=this.data.length,this.compare=i,this.length>0)for(var s=(this.length>>1)-1;s>=0;s--)this._down(s)};function fz(r,i){return r<i?-1:r>i?1:0}function mz(r,i,s){i===void 0&&(i=1),s===void 0&&(s=!1);for(var h=1/0,m=1/0,y=-1/0,_=-1/0,S=r[0],k=0;k<S.length;k++){var A=S[k];(!k||A.x<h)&&(h=A.x),(!k||A.y<m)&&(m=A.y),(!k||A.x>y)&&(y=A.x),(!k||A.y>_)&&(_=A.y)}var z=Math.min(y-h,_-m),D=z/2,$=new Fc([],yz);if(z===0)return new T(h,m);for(var G=h;G<y;G+=z)for(var ae=m;ae<_;ae+=z)$.push(new jc(G+D,ae+D,D,r));for(var le=function(Ie){for(var Ae=0,Le=0,Be=0,We=Ie[0],Ye=0,nt=We.length,wt=nt-1;Ye<nt;wt=Ye++){var ut=We[Ye],Ct=We[wt],ht=ut.x*Ct.y-Ct.x*ut.y;Le+=(ut.x+Ct.x)*ht,Be+=(ut.y+Ct.y)*ht,Ae+=3*ht}return new jc(Le/Ae,Be/Ae,0,Ie)}(r),be=$.length;$.length;){var de=$.pop();(de.d>le.d||!le.d)&&(le=de,s&&console.log("found best %d after %d probes",Math.round(1e4*de.d)/1e4,be)),de.max-le.d<=i||($.push(new jc(de.p.x-(D=de.h/2),de.p.y-D,D,r)),$.push(new jc(de.p.x+D,de.p.y-D,D,r)),$.push(new jc(de.p.x-D,de.p.y+D,D,r)),$.push(new jc(de.p.x+D,de.p.y+D,D,r)),be+=4)}return s&&(console.log("num probes: "+be),console.log("best distance: "+le.d)),le.p}function yz(r,i){return i.max-r.max}function jc(r,i,s,h){this.p=new T(r,i),this.h=s,this.d=function(m,y){for(var _=!1,S=1/0,k=0;k<y.length;k++)for(var A=y[k],z=0,D=A.length,$=D-1;z<D;$=z++){var G=A[z],ae=A[$];G.y>m.y!=ae.y>m.y&&m.x<(ae.x-G.x)*(m.y-G.y)/(ae.y-G.y)+G.x&&(_=!_),S=Math.min(S,Cl(m,G,ae))}return(_?1:-1)*Math.sqrt(S)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}Fc.prototype.push=function(r){this.data.push(r),this.length++,this._up(this.length-1)},Fc.prototype.pop=function(){if(this.length!==0){var r=this.data[0],i=this.data.pop();return this.length--,this.length>0&&(this.data[0]=i,this._down(0)),r}},Fc.prototype.peek=function(){return this.data[0]},Fc.prototype._up=function(r){for(var i=this.data,s=this.compare,h=i[r];r>0;){var m=r-1>>1,y=i[m];if(s(h,y)>=0)break;i[r]=y,r=m}i[r]=h},Fc.prototype._down=function(r){for(var i=this.data,s=this.compare,h=this.length>>1,m=i[r];r<h;){var y=1+(r<<1),_=i[y],S=y+1;if(S<this.length&&s(i[S],_)<0&&(y=S,_=i[S]),s(_,m)>=0)break;i[r]=_,r=y}i[r]=m};var E0=Number.POSITIVE_INFINITY;function Vw(r,i){return i[1]!==E0?function(s,h,m){var y=0,_=0;switch(h=Math.abs(h),m=Math.abs(m),s){case"top-right":case"top-left":case"top":_=m-7;break;case"bottom-right":case"bottom-left":case"bottom":_=7-m}switch(s){case"top-right":case"bottom-right":case"right":y=-h;break;case"top-left":case"bottom-left":case"left":y=h}return[y,_]}(r,i[0],i[1]):function(s,h){var m=0,y=0;h<0&&(h=0);var _=h/Math.sqrt(2);switch(s){case"top-right":case"top-left":y=_-7;break;case"bottom-right":case"bottom-left":y=7-_;break;case"bottom":y=7-h;break;case"top":y=h-7}switch(s){case"top-right":case"bottom-right":m=-_;break;case"top-left":case"bottom-left":m=_;break;case"left":m=h;break;case"right":m=-h}return[m,y]}(r,i[0])}function C0(r){switch(r){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function qw(r,i,s,h,m,y,_,S,k,A,z,D,$,G,ae){var le=function(Le,Be,We,Ye,nt,wt,ut,Ct){for(var ht=Ye.layout.get("text-rotate").evaluate(wt,{})*Math.PI/180,ir=[],Nt=0,xt=Be.positionedLines;Nt<xt.length;Nt+=1)for(var sr=xt[Nt],Xt=0,vr=sr.positionedGlyphs;Xt<vr.length;Xt+=1){var kt=vr[Xt];if(kt.rect){var Er=kt.rect||{},un=4,_n=!0,yn=1,cn=0,xn=(nt||Ct)&&kt.vertical,Kn=kt.metrics.advance*kt.scale/2;if(Ct&&Be.verticalizable&&(cn=sr.lineOffset/2-(kt.imageName?-(24-kt.metrics.width*kt.scale)/2:24*(kt.scale-1))),kt.imageName){var Zn=ut[kt.imageName];_n=Zn.sdf,un=1/(yn=Zn.pixelRatio)}var Ii=nt?[kt.x+Kn,kt.y]:[0,0],ii=nt?[0,0]:[kt.x+Kn+We[0],kt.y+We[1]-cn],Pi=[0,0];xn&&(Pi=ii,ii=[0,0]);var Tn=(kt.metrics.left-un)*kt.scale-Kn+ii[0],oi=(-kt.metrics.top-un)*kt.scale+ii[1],pr=Tn+Er.w*kt.scale/yn,Kr=oi+Er.h*kt.scale/yn,Fr=new T(Tn,oi),xr=new T(pr,oi),Ni=new T(Tn,Kr),gi=new T(pr,Kr);if(xn){var nn=new T(-Kn,Kn- -17),Ln=-Math.PI/2,vi=12-Kn,Cr=new T(22-vi,-(kt.imageName?vi:0)),is=new(Function.prototype.bind.apply(T,[null].concat(Pi)));Fr._rotateAround(Ln,nn)._add(Cr)._add(is),xr._rotateAround(Ln,nn)._add(Cr)._add(is),Ni._rotateAround(Ln,nn)._add(Cr)._add(is),gi._rotateAround(Ln,nn)._add(Cr)._add(is)}if(ht){var Co=Math.sin(ht),os=Math.cos(ht),In=[os,-Co,Co,os];Fr._matMult(In),xr._matMult(In),Ni._matMult(In),gi._matMult(In)}var as=new T(0,0),ca=new T(0,0);ir.push({tl:Fr,tr:xr,bl:Ni,br:gi,tex:Er,writingMode:Be.writingMode,glyphOffset:Ii,sectionIndex:kt.sectionIndex,isSDF:_n,pixelOffsetTL:as,pixelOffsetBR:ca,minFontScaleX:0,minFontScaleY:0})}}return ir}(0,s,S,m,y,_,h,r.allowVerticalPlacement),be=r.textSizeData,de=null;be.kind==="source"?(de=[128*m.layout.get("text-size").evaluate(_,{})])[0]>32640&&ge(r.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):be.kind==="composite"&&((de=[128*G.compositeTextSizes[0].evaluate(_,{},ae),128*G.compositeTextSizes[1].evaluate(_,{},ae)])[0]>32640||de[1]>32640)&&ge(r.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),r.addSymbols(r.text,le,de,S,y,_,A,i,k.lineStartIndex,k.lineLength,$,ae);for(var Ie=0,Ae=z;Ie<Ae.length;Ie+=1)D[Ae[Ie]]=r.text.placedSymbolArray.length-1;return 4*le.length}function Ww(r){for(var i in r)return r[i];return null}function gz(r,i,s,h){var m=r.compareText;if(i in m){for(var y=m[i],_=y.length-1;_>=0;_--)if(h.dist(y[_])<s)return!0}else m[i]=[];return m[i].push(h),!1}var vz=Lc.VectorTileFeature.types,_z=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Sm(r,i,s,h,m,y,_,S,k,A,z,D,$){var G=S?Math.min(32640,Math.round(S[0])):0,ae=S?Math.min(32640,Math.round(S[1])):0;r.emplaceBack(i,s,Math.round(32*h),Math.round(32*m),y,_,(G<<1)+(k?1:0),ae,16*A,16*z,256*D,256*$)}function k0(r,i,s){r.emplaceBack(i.x,i.y,s),r.emplaceBack(i.x,i.y,s),r.emplaceBack(i.x,i.y,s),r.emplaceBack(i.x,i.y,s)}function xz(r){for(var i=0,s=r.sections;i<s.length;i+=1)if(Sc(s[i].text))return!0;return!1}var Uc=function(r){this.layoutVertexArray=new Tc,this.indexArray=new Ja,this.programConfigurations=r,this.segments=new Z,this.dynamicLayoutVertexArray=new wl,this.opacityVertexArray=new Su,this.placedSymbolArray=new d};Uc.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},Uc.prototype.upload=function(r,i,s,h){this.isEmpty()||(s&&(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,GM.members),this.indexBuffer=r.createIndexBuffer(this.indexArray,i),this.dynamicLayoutVertexBuffer=r.createVertexBuffer(this.dynamicLayoutVertexArray,HM.members,!0),this.opacityVertexBuffer=r.createVertexBuffer(this.opacityVertexArray,_z,!0),this.opacityVertexBuffer.itemSize=1),(s||h)&&this.programConfigurations.upload(r))},Uc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},gt("SymbolBuffers",Uc);var Gh=function(r,i,s){this.layoutVertexArray=new r,this.layoutAttributes=i,this.indexArray=new s,this.segments=new Z,this.collisionVertexArray=new Lh};Gh.prototype.upload=function(r){this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=r.createVertexBuffer(this.collisionVertexArray,KM.members,!0)},Gh.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},gt("CollisionBuffers",Gh);var Wr=function(r){this.collisionBoxArray=r.collisionBoxArray,this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(function(y){return y.id}),this.index=r.index,this.pixelRatio=r.pixelRatio,this.sourceLayerIndex=r.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=uo([]),this.placementViewportMatrix=uo([]);var i=this.layers[0]._unevaluatedLayout._values;this.textSizeData=S0(this.zoom,i["text-size"]),this.iconSizeData=S0(this.zoom,i["icon-size"]);var s=this.layers[0].layout,h=s.get("symbol-sort-key"),m=s.get("symbol-z-order");this.canOverlap=s.get("text-allow-overlap")||s.get("icon-allow-overlap")||s.get("text-ignore-placement")||s.get("icon-ignore-placement"),this.sortFeaturesByKey=m!=="viewport-y"&&h.constantOr(1)!==void 0,this.sortFeaturesByY=(m==="viewport-y"||m==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,s.get("symbol-placement")==="point"&&(this.writingModes=s.get("text-writing-mode").map(function(y){return Eo[y]})),this.stateDependentLayerIds=this.layers.filter(function(y){return y.isStateDependent()}).map(function(y){return y.id}),this.sourceID=r.sourceID};Wr.prototype.createArrays=function(){this.text=new Uc(new Ot(this.layers,this.zoom,function(r){return/^text/.test(r)})),this.icon=new Uc(new Ot(this.layers,this.zoom,function(r){return/^icon/.test(r)})),this.glyphOffsetArray=new w,this.lineVertexArray=new C,this.symbolInstances=new b},Wr.prototype.calculateGlyphDependencies=function(r,i,s,h,m){for(var y=0;y<r.length;y++)if(i[r.charCodeAt(y)]=!0,(s||h)&&m){var _=Vh[r.charAt(y)];_&&(i[_.charCodeAt(0)]=!0)}},Wr.prototype.populate=function(r,i,s){var h=this.layers[0],m=h.layout,y=m.get("text-font"),_=m.get("text-field"),S=m.get("icon-image"),k=(_.value.kind!=="constant"||_.value.value instanceof Qn&&!_.value.value.isEmpty()||_.value.value.toString().length>0)&&(y.value.kind!=="constant"||y.value.value.length>0),A=S.value.kind!=="constant"||!!S.value.value||Object.keys(S.parameters).length>0,z=m.get("symbol-sort-key");if(this.features=[],k||A){for(var D=i.iconDependencies,$=i.glyphDependencies,G=i.availableImages,ae=new cr(this.zoom),le=0,be=r;le<be.length;le+=1){var de=be[le],Ie=de.feature,Ae=de.id,Le=de.index,Be=de.sourceLayerIndex,We=h._featureFilter.needGeometry,Ye=kn(Ie,We);if(h._featureFilter.filter(ae,Ye,s)){We||(Ye.geometry=mn(Ie));var nt=void 0;if(k){var wt=h.getValueAndResolveTokens("text-field",Ye,s,G),ut=Qn.factory(wt);xz(ut)&&(this.hasRTLText=!0),(!this.hasRTLText||Ah()==="unavailable"||this.hasRTLText&&lo.isParsed())&&(nt=XM(ut,h,Ye))}var Ct=void 0;if(A){var ht=h.getValueAndResolveTokens("icon-image",Ye,s,G);Ct=ht instanceof Li?ht:Li.fromString(ht)}if(nt||Ct){var ir=this.sortFeaturesByKey?z.evaluate(Ye,{},s):void 0;if(this.features.push({id:Ae,text:nt,icon:Ct,index:Le,sourceLayerIndex:Be,geometry:Ye.geometry,properties:Ie.properties,type:vz[Ie.type],sortKey:ir}),Ct&&(D[Ct.name]=!0),nt){var Nt=y.evaluate(Ye,{},s).join(","),xt=m.get("text-rotation-alignment")==="map"&&m.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Eo.vertical)>=0;for(var sr=0,Xt=nt.sections;sr<Xt.length;sr+=1){var vr=Xt[sr];if(vr.image)D[vr.image.name]=!0;else{var kt=Th(nt.toString()),Er=vr.fontStack||Nt,un=$[Er]=$[Er]||{};this.calculateGlyphDependencies(vr.text,un,xt,this.allowVerticalPlacement,kt)}}}}}}m.get("symbol-placement")==="line"&&(this.features=function(_n){var yn={},cn={},xn=[],Kn=0;function Zn(nn){xn.push(_n[nn]),Kn++}function Ii(nn,Ln,vi){var Cr=cn[nn];return delete cn[nn],cn[Ln]=Cr,xn[Cr].geometry[0].pop(),xn[Cr].geometry[0]=xn[Cr].geometry[0].concat(vi[0]),Cr}function ii(nn,Ln,vi){var Cr=yn[Ln];return delete yn[Ln],yn[nn]=Cr,xn[Cr].geometry[0].shift(),xn[Cr].geometry[0]=vi[0].concat(xn[Cr].geometry[0]),Cr}function Pi(nn,Ln,vi){var Cr=vi?Ln[0][Ln[0].length-1]:Ln[0][0];return nn+":"+Cr.x+":"+Cr.y}for(var Tn=0;Tn<_n.length;Tn++){var oi=_n[Tn],pr=oi.geometry,Kr=oi.text?oi.text.toString():null;if(Kr){var Fr=Pi(Kr,pr),xr=Pi(Kr,pr,!0);if(Fr in cn&&xr in yn&&cn[Fr]!==yn[xr]){var Ni=ii(Fr,xr,pr),gi=Ii(Fr,xr,xn[Ni].geometry);delete yn[Fr],delete cn[xr],cn[Pi(Kr,xn[gi].geometry,!0)]=gi,xn[Ni].geometry=null}else Fr in cn?Ii(Fr,xr,pr):xr in yn?ii(Fr,xr,pr):(Zn(Tn),yn[Fr]=Kn-1,cn[xr]=Kn-1)}else Zn(Tn)}return xn.filter(function(nn){return nn.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(_n,yn){return _n.sortKey-yn.sortKey})}},Wr.prototype.update=function(r,i,s){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(r,i,this.layers,s),this.icon.programConfigurations.updatePaintArrays(r,i,this.layers,s))},Wr.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},Wr.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Wr.prototype.upload=function(r){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(r),this.iconCollisionBox.upload(r)),this.text.upload(r,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(r,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Wr.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Wr.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Wr.prototype.addToLineVertexArray=function(r,i){var s=this.lineVertexArray.length;if(r.segment!==void 0){for(var h=r.dist(i[r.segment+1]),m=r.dist(i[r.segment]),y={},_=r.segment+1;_<i.length;_++)y[_]={x:i[_].x,y:i[_].y,tileUnitDistanceFromAnchor:h},_<i.length-1&&(h+=i[_+1].dist(i[_]));for(var S=r.segment||0;S>=0;S--)y[S]={x:i[S].x,y:i[S].y,tileUnitDistanceFromAnchor:m},S>0&&(m+=i[S-1].dist(i[S]));for(var k=0;k<i.length;k++){var A=y[k];this.lineVertexArray.emplaceBack(A.x,A.y,A.tileUnitDistanceFromAnchor)}}return{lineStartIndex:s,lineLength:this.lineVertexArray.length-s}},Wr.prototype.addSymbols=function(r,i,s,h,m,y,_,S,k,A,z,D){for(var $=r.indexArray,G=r.layoutVertexArray,ae=r.segments.prepareSegment(4*i.length,G,$,this.canOverlap?y.sortKey:void 0),le=this.glyphOffsetArray.length,be=ae.vertexLength,de=this.allowVerticalPlacement&&_===Eo.vertical?Math.PI/2:0,Ie=y.text&&y.text.sections,Ae=0;Ae<i.length;Ae++){var Le=i[Ae],Be=Le.tl,We=Le.tr,Ye=Le.bl,nt=Le.br,wt=Le.tex,ut=Le.pixelOffsetTL,Ct=Le.pixelOffsetBR,ht=Le.minFontScaleX,ir=Le.minFontScaleY,Nt=Le.glyphOffset,xt=Le.isSDF,sr=Le.sectionIndex,Xt=ae.vertexLength,vr=Nt[1];Sm(G,S.x,S.y,Be.x,vr+Be.y,wt.x,wt.y,s,xt,ut.x,ut.y,ht,ir),Sm(G,S.x,S.y,We.x,vr+We.y,wt.x+wt.w,wt.y,s,xt,Ct.x,ut.y,ht,ir),Sm(G,S.x,S.y,Ye.x,vr+Ye.y,wt.x,wt.y+wt.h,s,xt,ut.x,Ct.y,ht,ir),Sm(G,S.x,S.y,nt.x,vr+nt.y,wt.x+wt.w,wt.y+wt.h,s,xt,Ct.x,Ct.y,ht,ir),k0(r.dynamicLayoutVertexArray,S,de),$.emplaceBack(Xt,Xt+1,Xt+2),$.emplaceBack(Xt+1,Xt+2,Xt+3),ae.vertexLength+=4,ae.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Nt[0]),Ae!==i.length-1&&sr===i[Ae+1].sectionIndex||r.programConfigurations.populatePaintArrays(G.length,y,y.index,{},D,Ie&&Ie[sr])}r.placedSymbolArray.emplaceBack(S.x,S.y,le,this.glyphOffsetArray.length-le,be,k,A,S.segment,s?s[0]:0,s?s[1]:0,h[0],h[1],_,0,!1,0,z)},Wr.prototype._addCollisionDebugVertex=function(r,i,s,h,m,y){return i.emplaceBack(0,0),r.emplaceBack(s.x,s.y,h,m,Math.round(y.x),Math.round(y.y))},Wr.prototype.addCollisionDebugVertices=function(r,i,s,h,m,y,_){var S=m.segments.prepareSegment(4,m.layoutVertexArray,m.indexArray),k=S.vertexLength,A=m.layoutVertexArray,z=m.collisionVertexArray,D=_.anchorX,$=_.anchorY;this._addCollisionDebugVertex(A,z,y,D,$,new T(r,i)),this._addCollisionDebugVertex(A,z,y,D,$,new T(s,i)),this._addCollisionDebugVertex(A,z,y,D,$,new T(s,h)),this._addCollisionDebugVertex(A,z,y,D,$,new T(r,h)),S.vertexLength+=4;var G=m.indexArray;G.emplaceBack(k,k+1),G.emplaceBack(k+1,k+2),G.emplaceBack(k+2,k+3),G.emplaceBack(k+3,k),S.primitiveLength+=4},Wr.prototype.addDebugCollisionBoxes=function(r,i,s,h){for(var m=r;m<i;m++){var y=this.collisionBoxArray.get(m);this.addCollisionDebugVertices(y.x1,y.y1,y.x2,y.y2,h?this.textCollisionBox:this.iconCollisionBox,y.anchorPoint,s)}},Wr.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Gh(Sl,Sw.members,Eu),this.iconCollisionBox=new Gh(Sl,Sw.members,Eu);for(var r=0;r<this.symbolInstances.length;r++){var i=this.symbolInstances.get(r);this.addDebugCollisionBoxes(i.textBoxStartIndex,i.textBoxEndIndex,i,!0),this.addDebugCollisionBoxes(i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i,!0),this.addDebugCollisionBoxes(i.iconBoxStartIndex,i.iconBoxEndIndex,i,!1),this.addDebugCollisionBoxes(i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex,i,!1)}},Wr.prototype._deserializeCollisionBoxesForSymbol=function(r,i,s,h,m,y,_,S,k){for(var A={},z=i;z<s;z++){var D=r.get(z);A.textBox={x1:D.x1,y1:D.y1,x2:D.x2,y2:D.y2,anchorPointX:D.anchorPointX,anchorPointY:D.anchorPointY},A.textFeatureIndex=D.featureIndex;break}for(var $=h;$<m;$++){var G=r.get($);A.verticalTextBox={x1:G.x1,y1:G.y1,x2:G.x2,y2:G.y2,anchorPointX:G.anchorPointX,anchorPointY:G.anchorPointY},A.verticalTextFeatureIndex=G.featureIndex;break}for(var ae=y;ae<_;ae++){var le=r.get(ae);A.iconBox={x1:le.x1,y1:le.y1,x2:le.x2,y2:le.y2,anchorPointX:le.anchorPointX,anchorPointY:le.anchorPointY},A.iconFeatureIndex=le.featureIndex;break}for(var be=S;be<k;be++){var de=r.get(be);A.verticalIconBox={x1:de.x1,y1:de.y1,x2:de.x2,y2:de.y2,anchorPointX:de.anchorPointX,anchorPointY:de.anchorPointY},A.verticalIconFeatureIndex=de.featureIndex;break}return A},Wr.prototype.deserializeCollisionBoxes=function(r){this.collisionArrays=[];for(var i=0;i<this.symbolInstances.length;i++){var s=this.symbolInstances.get(i);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(r,s.textBoxStartIndex,s.textBoxEndIndex,s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s.iconBoxStartIndex,s.iconBoxEndIndex,s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex))}},Wr.prototype.hasTextData=function(){return this.text.segments.get().length>0},Wr.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Wr.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Wr.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Wr.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Wr.prototype.addIndicesForPlacedSymbol=function(r,i){for(var s=r.placedSymbolArray.get(i),h=s.vertexStartIndex+4*s.numGlyphs,m=s.vertexStartIndex;m<h;m+=4)r.indexArray.emplaceBack(m,m+1,m+2),r.indexArray.emplaceBack(m+1,m+2,m+3)},Wr.prototype.getSortedSymbolIndexes=function(r){if(this.sortedAngle===r&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var i=Math.sin(r),s=Math.cos(r),h=[],m=[],y=[],_=0;_<this.symbolInstances.length;++_){y.push(_);var S=this.symbolInstances.get(_);h.push(0|Math.round(i*S.anchorX+s*S.anchorY)),m.push(S.featureIndex)}return y.sort(function(k,A){return h[k]-h[A]||m[A]-m[k]}),y},Wr.prototype.addToSortKeyRanges=function(r,i){var s=this.sortKeyRanges[this.sortKeyRanges.length-1];s&&s.sortKey===i?s.symbolInstanceEnd=r+1:this.sortKeyRanges.push({sortKey:i,symbolInstanceStart:r,symbolInstanceEnd:r+1})},Wr.prototype.sortFeatures=function(r){var i=this;if(this.sortFeaturesByY&&this.sortedAngle!==r&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(r),this.sortedAngle=r,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var s=0,h=this.symbolInstanceIndexes;s<h.length;s+=1){var m=this.symbolInstances.get(h[s]);this.featureSortOrder.push(m.featureIndex),[m.rightJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.leftJustifiedTextSymbolIndex].forEach(function(y,_,S){y>=0&&S.indexOf(y)===_&&i.addIndicesForPlacedSymbol(i.text,y)}),m.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,m.verticalPlacedTextSymbolIndex),m.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.placedIconSymbolIndex),m.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},gt("SymbolBucket",Wr,{omit:["layers","collisionBoxArray","features","compareText"]}),Wr.MAX_GLYPHS=65535,Wr.addDynamicAttributes=k0;var bz=new hi({"symbol-placement":new St(H.layout_symbol["symbol-placement"]),"symbol-spacing":new St(H.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new St(H.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new _t(H.layout_symbol["symbol-sort-key"]),"symbol-z-order":new St(H.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new St(H.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new St(H.layout_symbol["icon-ignore-placement"]),"icon-optional":new St(H.layout_symbol["icon-optional"]),"icon-rotation-alignment":new St(H.layout_symbol["icon-rotation-alignment"]),"icon-size":new _t(H.layout_symbol["icon-size"]),"icon-text-fit":new St(H.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new St(H.layout_symbol["icon-text-fit-padding"]),"icon-image":new _t(H.layout_symbol["icon-image"]),"icon-rotate":new _t(H.layout_symbol["icon-rotate"]),"icon-padding":new St(H.layout_symbol["icon-padding"]),"icon-keep-upright":new St(H.layout_symbol["icon-keep-upright"]),"icon-offset":new _t(H.layout_symbol["icon-offset"]),"icon-anchor":new _t(H.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new St(H.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new St(H.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new St(H.layout_symbol["text-rotation-alignment"]),"text-field":new _t(H.layout_symbol["text-field"]),"text-font":new _t(H.layout_symbol["text-font"]),"text-size":new _t(H.layout_symbol["text-size"]),"text-max-width":new _t(H.layout_symbol["text-max-width"]),"text-line-height":new St(H.layout_symbol["text-line-height"]),"text-letter-spacing":new _t(H.layout_symbol["text-letter-spacing"]),"text-justify":new _t(H.layout_symbol["text-justify"]),"text-radial-offset":new _t(H.layout_symbol["text-radial-offset"]),"text-variable-anchor":new St(H.layout_symbol["text-variable-anchor"]),"text-anchor":new _t(H.layout_symbol["text-anchor"]),"text-max-angle":new St(H.layout_symbol["text-max-angle"]),"text-writing-mode":new St(H.layout_symbol["text-writing-mode"]),"text-rotate":new _t(H.layout_symbol["text-rotate"]),"text-padding":new St(H.layout_symbol["text-padding"]),"text-keep-upright":new St(H.layout_symbol["text-keep-upright"]),"text-transform":new _t(H.layout_symbol["text-transform"]),"text-offset":new _t(H.layout_symbol["text-offset"]),"text-allow-overlap":new St(H.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new St(H.layout_symbol["text-ignore-placement"]),"text-optional":new St(H.layout_symbol["text-optional"])}),T0={paint:new hi({"icon-opacity":new _t(H.paint_symbol["icon-opacity"]),"icon-color":new _t(H.paint_symbol["icon-color"]),"icon-halo-color":new _t(H.paint_symbol["icon-halo-color"]),"icon-halo-width":new _t(H.paint_symbol["icon-halo-width"]),"icon-halo-blur":new _t(H.paint_symbol["icon-halo-blur"]),"icon-translate":new St(H.paint_symbol["icon-translate"]),"icon-translate-anchor":new St(H.paint_symbol["icon-translate-anchor"]),"text-opacity":new _t(H.paint_symbol["text-opacity"]),"text-color":new _t(H.paint_symbol["text-color"],{runtimeType:at,getOverride:function(r){return r.textColor},hasOverride:function(r){return!!r.textColor}}),"text-halo-color":new _t(H.paint_symbol["text-halo-color"]),"text-halo-width":new _t(H.paint_symbol["text-halo-width"]),"text-halo-blur":new _t(H.paint_symbol["text-halo-blur"]),"text-translate":new St(H.paint_symbol["text-translate"]),"text-translate-anchor":new St(H.paint_symbol["text-translate-anchor"])}),layout:bz},$c=function(r){this.type=r.property.overrides?r.property.overrides.runtimeType:yt,this.defaultValue=r};$c.prototype.evaluate=function(r){if(r.formattedSection){var i=this.defaultValue.property.overrides;if(i&&i.hasOverride(r.formattedSection))return i.getOverride(r.formattedSection)}return r.feature&&r.featureState?this.defaultValue.evaluate(r.feature,r.featureState):this.defaultValue.property.specification.default},$c.prototype.eachChild=function(r){this.defaultValue.isConstant()||r(this.defaultValue.value._styleExpression.expression)},$c.prototype.outputDefined=function(){return!1},$c.prototype.serialize=function(){return null},gt("FormatSectionOverride",$c,{omit:["defaultValue"]});var wz=function(r){function i(s){r.call(this,s,T0)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.recalculate=function(s,h){if(r.prototype.recalculate.call(this,s,h),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var m=this.layout.get("text-writing-mode");if(m){for(var y=[],_=0,S=m;_<S.length;_+=1){var k=S[_];y.indexOf(k)<0&&y.push(k)}this.layout._values["text-writing-mode"]=y}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},i.prototype.getValueAndResolveTokens=function(s,h,m,y){var _=this.layout.get(s).evaluate(h,{},m,y),S=this._unevaluatedLayout._values[s];return S.isDataDriven()||hu(S.value)||!_?_:function(k,A){return A.replace(/{([^{}]+)}/g,function(z,D){return D in k?String(k[D]):""})}(h.properties,_)},i.prototype.createBucket=function(s){return new Wr(s)},i.prototype.queryRadius=function(){return 0},i.prototype.queryIntersectsFeature=function(){return!1},i.prototype._setPaintOverrides=function(){for(var s=0,h=T0.paint.overridableProperties;s<h.length;s+=1){var m=h[s];if(i.hasPaintOverride(this.layout,m)){var y,_=this.paint.get(m),S=new $c(_),k=new yl(S,_.property.specification);y=_.value.kind==="constant"||_.value.kind==="source"?new du("source",k):new gl("composite",k,_.value.zoomStops,_.value._interpolationType),this.paint._values[m]=new Ei(_.property,y,_.parameters)}}},i.prototype._handleOverridablePaintPropertyUpdate=function(s,h,m){return!(!this.layout||h.isDataDriven()||m.isDataDriven())&&i.hasPaintOverride(this.layout,s)},i.hasPaintOverride=function(s,h){var m=s.get("text-field"),y=T0.paint.properties[h],_=!1,S=function(z){for(var D=0,$=z;D<$.length;D+=1)if(y.overrides&&y.overrides.hasOverride($[D]))return void(_=!0)};if(m.value.kind==="constant"&&m.value.value instanceof Qn)S(m.value.value.sections);else if(m.value.kind==="source"){var k=function(z){_||(z instanceof wi&&Cn(z.value)===Gr?S(z.value.sections):z instanceof No?S(z.sections):z.eachChild(k))},A=m.value;A._styleExpression&&k(A._styleExpression.expression)}return _},i}(aa),Sz={paint:new hi({"background-color":new St(H.paint_background["background-color"]),"background-pattern":new Ci(H.paint_background["background-pattern"]),"background-opacity":new St(H.paint_background["background-opacity"])})},Ez=function(r){function i(s){r.call(this,s,Sz)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i}(aa),Cz={paint:new hi({"raster-opacity":new St(H.paint_raster["raster-opacity"]),"raster-hue-rotate":new St(H.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new St(H.paint_raster["raster-brightness-min"]),"raster-brightness-max":new St(H.paint_raster["raster-brightness-max"]),"raster-saturation":new St(H.paint_raster["raster-saturation"]),"raster-contrast":new St(H.paint_raster["raster-contrast"]),"raster-resampling":new St(H.paint_raster["raster-resampling"]),"raster-fade-duration":new St(H.paint_raster["raster-fade-duration"])})},kz=function(r){function i(s){r.call(this,s,Cz)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i}(aa),Tz=function(r){function i(s){r.call(this,s,{}),this.implementation=s}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},i.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},i.prototype.recalculate=function(){},i.prototype.updateTransitions=function(){},i.prototype.hasTransition=function(){},i.prototype.serialize=function(){},i.prototype.onAdd=function(s){this.implementation.onAdd&&this.implementation.onAdd(s,s.painter.context.gl)},i.prototype.onRemove=function(s){this.implementation.onRemove&&this.implementation.onRemove(s,s.painter.context.gl)},i}(aa),Iz={circle:p0,heatmap:pM,hillshade:dM,fill:AM,"fill-extrusion":FM,line:WM,symbol:wz,background:Ez,raster:kz},Gw=P.HTMLImageElement,Hw=P.HTMLCanvasElement,Kw=P.HTMLVideoElement,Zw=P.ImageData,Em=P.ImageBitmap,Au=function(r,i,s,h){this.context=r,this.format=s,this.texture=r.gl.createTexture(),this.update(i,h)};Au.prototype.update=function(r,i,s){var h=r.width,m=r.height,y=!(this.size&&this.size[0]===h&&this.size[1]===m||s),_=this.context,S=_.gl;if(this.useMipmap=!!(i&&i.useMipmap),S.bindTexture(S.TEXTURE_2D,this.texture),_.pixelStoreUnpackFlipY.set(!1),_.pixelStoreUnpack.set(1),_.pixelStoreUnpackPremultiplyAlpha.set(this.format===S.RGBA&&(!i||i.premultiply!==!1)),y)this.size=[h,m],r instanceof Gw||r instanceof Hw||r instanceof Kw||r instanceof Zw||Em&&r instanceof Em?S.texImage2D(S.TEXTURE_2D,0,this.format,this.format,S.UNSIGNED_BYTE,r):S.texImage2D(S.TEXTURE_2D,0,this.format,h,m,0,this.format,S.UNSIGNED_BYTE,r.data);else{var k=s||{x:0,y:0},A=k.x,z=k.y;r instanceof Gw||r instanceof Hw||r instanceof Kw||r instanceof Zw||Em&&r instanceof Em?S.texSubImage2D(S.TEXTURE_2D,0,A,z,S.RGBA,S.UNSIGNED_BYTE,r):S.texSubImage2D(S.TEXTURE_2D,0,A,z,h,m,S.RGBA,S.UNSIGNED_BYTE,r.data)}this.useMipmap&&this.isSizePowerOfTwo()&&S.generateMipmap(S.TEXTURE_2D)},Au.prototype.bind=function(r,i,s){var h=this.context.gl;h.bindTexture(h.TEXTURE_2D,this.texture),s!==h.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(s=h.LINEAR),r!==this.filter&&(h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,r),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,s||r),this.filter=r),i!==this.wrap&&(h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,i),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,i),this.wrap=i)},Au.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Au.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var I0=function(r){var i=this;this._callback=r,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){i._triggered=!1,i._callback()})};I0.prototype.trigger=function(){var r=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){r._triggered=!1,r._callback()},0))},I0.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Vc=function(r,i,s){this.target=r,this.parent=i,this.mapId=s,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},pe(["receive","process"],this),this.invoker=new I0(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Ce()?r:P};function Xw(r,i,s){var h=2*Math.PI*6378137/256/Math.pow(2,s);return[r*h-2*Math.PI*6378137/2,i*h-2*Math.PI*6378137/2]}Vc.prototype.send=function(r,i,s,h,m){var y=this;m===void 0&&(m=!1);var _=Math.round(1e18*Math.random()).toString(36).substring(0,10);s&&(this.callbacks[_]=s);var S=Oe(this.globalScope)?void 0:[];return this.target.postMessage({id:_,type:r,hasCallback:!!s,targetMapId:h,mustQueue:m,sourceMapId:this.mapId,data:jo(i,S)},S),{cancel:function(){s&&delete y.callbacks[_],y.target.postMessage({id:_,type:"<cancel>",targetMapId:h,sourceMapId:y.mapId})}}},Vc.prototype.receive=function(r){var i=r.data,s=i.id;if(s&&(!i.targetMapId||this.mapId===i.targetMapId))if(i.type==="<cancel>"){delete this.tasks[s];var h=this.cancelCallbacks[s];delete this.cancelCallbacks[s],h&&h()}else Ce()||i.mustQueue?(this.tasks[s]=i,this.taskQueue.push(s),this.invoker.trigger()):this.processTask(s,i)},Vc.prototype.process=function(){if(this.taskQueue.length){var r=this.taskQueue.shift(),i=this.tasks[r];delete this.tasks[r],this.taskQueue.length&&this.invoker.trigger(),i&&this.processTask(r,i)}},Vc.prototype.processTask=function(r,i){var s=this;if(i.type==="<response>"){var h=this.callbacks[r];delete this.callbacks[r],h&&(i.error?h(Ki(i.error)):h(null,Ki(i.data)))}else{var m=!1,y=Oe(this.globalScope)?void 0:[],_=i.hasCallback?function(z,D){m=!0,delete s.cancelCallbacks[r],s.target.postMessage({id:r,type:"<response>",sourceMapId:s.mapId,error:z?jo(z):null,data:jo(D,y)},y)}:function(z){m=!0},S=null,k=Ki(i.data);if(this.parent[i.type])S=this.parent[i.type](i.sourceMapId,k,_);else if(this.parent.getWorkerSource){var A=i.type.split(".");S=this.parent.getWorkerSource(i.sourceMapId,A[0],k.source)[A[1]](k,_)}else _(new Error("Could not find function "+i.type));!m&&S&&S.cancel&&(this.cancelCallbacks[r]=S.cancel)}},Vc.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var jn=function(r,i){r&&(i?this.setSouthWest(r).setNorthEast(i):r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1]))};jn.prototype.setNorthEast=function(r){return this._ne=r instanceof ln?new ln(r.lng,r.lat):ln.convert(r),this},jn.prototype.setSouthWest=function(r){return this._sw=r instanceof ln?new ln(r.lng,r.lat):ln.convert(r),this},jn.prototype.extend=function(r){var i,s,h=this._sw,m=this._ne;if(r instanceof ln)i=r,s=r;else{if(!(r instanceof jn))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(jn.convert(r)):this.extend(ln.convert(r)):this;if(s=r._ne,!(i=r._sw)||!s)return this}return h||m?(h.lng=Math.min(i.lng,h.lng),h.lat=Math.min(i.lat,h.lat),m.lng=Math.max(s.lng,m.lng),m.lat=Math.max(s.lat,m.lat)):(this._sw=new ln(i.lng,i.lat),this._ne=new ln(s.lng,s.lat)),this},jn.prototype.getCenter=function(){return new ln((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},jn.prototype.getSouthWest=function(){return this._sw},jn.prototype.getNorthEast=function(){return this._ne},jn.prototype.getNorthWest=function(){return new ln(this.getWest(),this.getNorth())},jn.prototype.getSouthEast=function(){return new ln(this.getEast(),this.getSouth())},jn.prototype.getWest=function(){return this._sw.lng},jn.prototype.getSouth=function(){return this._sw.lat},jn.prototype.getEast=function(){return this._ne.lng},jn.prototype.getNorth=function(){return this._ne.lat},jn.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},jn.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},jn.prototype.isEmpty=function(){return!(this._sw&&this._ne)},jn.prototype.contains=function(r){var i=ln.convert(r),s=i.lng,h=i.lat,m=this._sw.lng<=s&&s<=this._ne.lng;return this._sw.lng>this._ne.lng&&(m=this._sw.lng>=s&&s>=this._ne.lng),this._sw.lat<=h&&h<=this._ne.lat&&m},jn.convert=function(r){return!r||r instanceof jn?r:new jn(r)};var ln=function(r,i){if(isNaN(r)||isNaN(i))throw new Error("Invalid LngLat object: ("+r+", "+i+")");if(this.lng=+r,this.lat=+i,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};ln.prototype.wrap=function(){return new ln(U(this.lng,-180,180),this.lat)},ln.prototype.toArray=function(){return[this.lng,this.lat]},ln.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},ln.prototype.distanceTo=function(r){var i=Math.PI/180,s=this.lat*i,h=r.lat*i,m=Math.sin(s)*Math.sin(h)+Math.cos(s)*Math.cos(h)*Math.cos((r.lng-this.lng)*i);return 63710088e-1*Math.acos(Math.min(m,1))},ln.prototype.toBounds=function(r){r===void 0&&(r=0);var i=360*r/40075017,s=i/Math.cos(Math.PI/180*this.lat);return new jn(new ln(this.lng-s,this.lat-i),new ln(this.lng+s,this.lat+i))},ln.convert=function(r){if(r instanceof ln)return r;if(Array.isArray(r)&&(r.length===2||r.length===3))return new ln(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&typeof r=="object"&&r!==null)return new ln(Number("lng"in r?r.lng:r.lon),Number(r.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Yw=2*Math.PI*63710088e-1;function Jw(r){return Yw*Math.cos(r*Math.PI/180)}function Qw(r){return(180+r)/360}function e2(r){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r*Math.PI/360)))/360}function t2(r,i){return r/Jw(i)}function P0(r){return 360/Math.PI*Math.atan(Math.exp((180-360*r)*Math.PI/180))-90}var Mu=function(r,i,s){s===void 0&&(s=0),this.x=+r,this.y=+i,this.z=+s};Mu.fromLngLat=function(r,i){i===void 0&&(i=0);var s=ln.convert(r);return new Mu(Qw(s.lng),e2(s.lat),t2(i,s.lat))},Mu.prototype.toLngLat=function(){return new ln(360*this.x-180,P0(this.y))},Mu.prototype.toAltitude=function(){return this.z*Jw(P0(this.y))},Mu.prototype.meterInMercatorCoordinateUnits=function(){return 1/Yw*(r=P0(this.y),1/Math.cos(r*Math.PI/180));var r};var zu=function(r,i,s){this.z=r,this.x=i,this.y=s,this.key=Hh(0,r,r,i,s)};zu.prototype.equals=function(r){return this.z===r.z&&this.x===r.x&&this.y===r.y},zu.prototype.url=function(r,i){var s,h,m,y,_,S=(h=this.y,m=this.z,y=Xw(256*(s=this.x),256*(h=Math.pow(2,m)-h-1),m),_=Xw(256*(s+1),256*(h+1),m),y[0]+","+y[1]+","+_[0]+","+_[1]),k=function(A,z,D){for(var $,G="",ae=A;ae>0;ae--)G+=(z&($=1<<ae-1)?1:0)+(D&$?2:0);return G}(this.z,this.x,this.y);return r[(this.x+this.y)%r.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(i==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",k).replace("{bbox-epsg-3857}",S)},zu.prototype.getTilePoint=function(r){var i=Math.pow(2,this.z);return new T(8192*(r.x*i-this.x),8192*(r.y*i-this.y))},zu.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var r2=function(r,i){this.wrap=r,this.canonical=i,this.key=Hh(r,i.z,i.z,i.x,i.y)},Un=function(r,i,s,h,m){this.overscaledZ=r,this.wrap=i,this.canonical=new zu(s,+h,+m),this.key=Hh(i,r,s,h,m)};function Hh(r,i,s,h,m){(r*=2)<0&&(r=-1*r-1);var y=1<<s;return(y*y*r+y*m+h).toString(36)+s.toString(36)+i.toString(36)}Un.prototype.equals=function(r){return this.overscaledZ===r.overscaledZ&&this.wrap===r.wrap&&this.canonical.equals(r.canonical)},Un.prototype.scaledTo=function(r){var i=this.canonical.z-r;return r>this.canonical.z?new Un(r,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Un(r,this.wrap,r,this.canonical.x>>i,this.canonical.y>>i)},Un.prototype.calculateScaledKey=function(r,i){var s=this.canonical.z-r;return r>this.canonical.z?Hh(this.wrap*+i,r,this.canonical.z,this.canonical.x,this.canonical.y):Hh(this.wrap*+i,r,r,this.canonical.x>>s,this.canonical.y>>s)},Un.prototype.isChildOf=function(r){if(r.wrap!==this.wrap)return!1;var i=this.canonical.z-r.canonical.z;return r.overscaledZ===0||r.overscaledZ<this.overscaledZ&&r.canonical.x===this.canonical.x>>i&&r.canonical.y===this.canonical.y>>i},Un.prototype.children=function(r){if(this.overscaledZ>=r)return[new Un(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var i=this.canonical.z+1,s=2*this.canonical.x,h=2*this.canonical.y;return[new Un(i,this.wrap,i,s,h),new Un(i,this.wrap,i,s+1,h),new Un(i,this.wrap,i,s,h+1),new Un(i,this.wrap,i,s+1,h+1)]},Un.prototype.isLessThan=function(r){return this.wrap<r.wrap||!(this.wrap>r.wrap)&&(this.overscaledZ<r.overscaledZ||!(this.overscaledZ>r.overscaledZ)&&(this.canonical.x<r.canonical.x||!(this.canonical.x>r.canonical.x)&&this.canonical.y<r.canonical.y))},Un.prototype.wrapped=function(){return new Un(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Un.prototype.unwrapTo=function(r){return new Un(this.overscaledZ,r,this.canonical.z,this.canonical.x,this.canonical.y)},Un.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Un.prototype.toUnwrapped=function(){return new r2(this.wrap,this.canonical)},Un.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Un.prototype.getTilePoint=function(r){return this.canonical.getTilePoint(new Mu(r.x-this.wrap,r.y))},gt("CanonicalTileID",zu),gt("OverscaledTileID",Un,{omit:["posMatrix"]});var qs=function(r,i,s){if(this.uid=r,i.height!==i.width)throw new RangeError("DEM tiles must be square");if(s&&s!=="mapbox"&&s!=="terrarium")return ge('"'+s+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=i.height;var h=this.dim=i.height-2;this.data=new Uint32Array(i.data.buffer),this.encoding=s||"mapbox";for(var m=0;m<h;m++)this.data[this._idx(-1,m)]=this.data[this._idx(0,m)],this.data[this._idx(h,m)]=this.data[this._idx(h-1,m)],this.data[this._idx(m,-1)]=this.data[this._idx(m,0)],this.data[this._idx(m,h)]=this.data[this._idx(m,h-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(h,-1)]=this.data[this._idx(h-1,0)],this.data[this._idx(-1,h)]=this.data[this._idx(0,h-1)],this.data[this._idx(h,h)]=this.data[this._idx(h-1,h-1)]};qs.prototype.get=function(r,i){var s=new Uint8Array(this.data.buffer),h=4*this._idx(r,i);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(s[h],s[h+1],s[h+2])},qs.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},qs.prototype._idx=function(r,i){if(r<-1||r>=this.dim+1||i<-1||i>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(i+1)*this.stride+(r+1)},qs.prototype._unpackMapbox=function(r,i,s){return(256*r*256+256*i+s)/10-1e4},qs.prototype._unpackTerrarium=function(r,i,s){return 256*r+i+s/256-32768},qs.prototype.getPixels=function(){return new Qi({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},qs.prototype.backfillBorder=function(r,i,s){if(this.dim!==r.dim)throw new Error("dem dimension mismatch");var h=i*this.dim,m=i*this.dim+this.dim,y=s*this.dim,_=s*this.dim+this.dim;switch(i){case-1:h=m-1;break;case 1:m=h+1}switch(s){case-1:y=_-1;break;case 1:_=y+1}for(var S=-i*this.dim,k=-s*this.dim,A=y;A<_;A++)for(var z=h;z<m;z++)this.data[this._idx(z,A)]=r.data[this._idx(z+S,A+k)]},gt("DEMData",qs);var Cm=function(r){this._stringToNumber={},this._numberToString=[];for(var i=0;i<r.length;i++){var s=r[i];this._stringToNumber[s]=i,this._numberToString[i]=s}};Cm.prototype.encode=function(r){return this._stringToNumber[r]},Cm.prototype.decode=function(r){return this._numberToString[r]};var km=function(r,i,s,h,m){this.type="Feature",this._vectorTileFeature=r,r._z=i,r._x=s,r._y=h,this.properties=r.properties,this.id=m},A0={geometry:{configurable:!0}};A0.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},A0.geometry.set=function(r){this._geometry=r},km.prototype.toJSON=function(){var r={geometry:this.geometry};for(var i in this)i!=="_geometry"&&i!=="_vectorTileFeature"&&(r[i]=this[i]);return r},Object.defineProperties(km.prototype,A0);var qc=function(){this.state={},this.stateChanges={},this.deletedStates={}};qc.prototype.updateState=function(r,i,s){var h=String(i);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][h]=this.stateChanges[r][h]||{},F(this.stateChanges[r][h],s),this.deletedStates[r]===null)for(var m in this.deletedStates[r]={},this.state[r])m!==h&&(this.deletedStates[r][m]=null);else if(this.deletedStates[r]&&this.deletedStates[r][h]===null)for(var y in this.deletedStates[r][h]={},this.state[r][h])s[y]||(this.deletedStates[r][h][y]=null);else for(var _ in s)this.deletedStates[r]&&this.deletedStates[r][h]&&this.deletedStates[r][h][_]===null&&delete this.deletedStates[r][h][_]},qc.prototype.removeFeatureState=function(r,i,s){if(this.deletedStates[r]!==null){var h=String(i);if(this.deletedStates[r]=this.deletedStates[r]||{},s&&i!==void 0)this.deletedStates[r][h]!==null&&(this.deletedStates[r][h]=this.deletedStates[r][h]||{},this.deletedStates[r][h][s]=null);else if(i!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][h])for(s in this.deletedStates[r][h]={},this.stateChanges[r][h])this.deletedStates[r][h][s]=null;else this.deletedStates[r][h]=null;else this.deletedStates[r]=null}},qc.prototype.getState=function(r,i){var s=String(i),h=F({},(this.state[r]||{})[s],(this.stateChanges[r]||{})[s]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){var m=this.deletedStates[r][i];if(m===null)return{};for(var y in m)delete h[y]}return h},qc.prototype.initializeTileState=function(r,i){r.setFeatureState(this.state,i)},qc.prototype.coalesceChanges=function(r,i){var s={};for(var h in this.stateChanges){this.state[h]=this.state[h]||{};var m={};for(var y in this.stateChanges[h])this.state[h][y]||(this.state[h][y]={}),F(this.state[h][y],this.stateChanges[h][y]),m[y]=this.state[h][y];s[h]=m}for(var _ in this.deletedStates){this.state[_]=this.state[_]||{};var S={};if(this.deletedStates[_]===null)for(var k in this.state[_])S[k]={},this.state[_][k]={};else for(var A in this.deletedStates[_]){if(this.deletedStates[_][A]===null)this.state[_][A]={};else for(var z=0,D=Object.keys(this.deletedStates[_][A]);z<D.length;z+=1)delete this.state[_][A][D[z]];S[A]=this.state[_][A]}s[_]=s[_]||{},F(s[_],S)}if(this.stateChanges={},this.deletedStates={},Object.keys(s).length!==0)for(var $ in r)r[$].setFeatureState(s,i)};var Ws=function(r,i){this.tileID=r,this.x=r.canonical.x,this.y=r.canonical.y,this.z=r.canonical.z,this.grid=new wa(8192,16,0),this.grid3D=new wa(8192,16,0),this.featureIndexArray=new B,this.promoteId=i};function n2(r,i,s,h,m){return ze(r,function(y,_){var S=i instanceof wu?i.get(_):null;return S&&S.evaluate?S.evaluate(s,h,m):S})}function i2(r){for(var i=1/0,s=1/0,h=-1/0,m=-1/0,y=0,_=r;y<_.length;y+=1){var S=_[y];i=Math.min(i,S.x),s=Math.min(s,S.y),h=Math.max(h,S.x),m=Math.max(m,S.y)}return{minX:i,minY:s,maxX:h,maxY:m}}function Pz(r,i){return i-r}Ws.prototype.insert=function(r,i,s,h,m,y){var _=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(s,h,m);for(var S=y?this.grid3D:this.grid,k=0;k<i.length;k++){for(var A=i[k],z=[1/0,1/0,-1/0,-1/0],D=0;D<A.length;D++){var $=A[D];z[0]=Math.min(z[0],$.x),z[1]=Math.min(z[1],$.y),z[2]=Math.max(z[2],$.x),z[3]=Math.max(z[3],$.y)}z[0]<8192&&z[1]<8192&&z[2]>=0&&z[3]>=0&&S.insert(_,z[0],z[1],z[2],z[3])}},Ws.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Lc.VectorTile(new fm(this.rawTileData)).layers,this.sourceLayerCoder=new Cm(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Ws.prototype.query=function(r,i,s,h){var m=this;this.loadVTLayers();for(var y=r.params||{},_=8192/r.tileSize/r.scale,S=gc(y.filter),k=r.queryGeometry,A=r.queryPadding*_,z=i2(k),D=this.grid.query(z.minX-A,z.minY-A,z.maxX+A,z.maxY+A),$=i2(r.cameraQueryGeometry),G=this.grid3D.query($.minX-A,$.minY-A,$.maxX+A,$.maxY+A,function(Le,Be,We,Ye){return function(nt,wt,ut,Ct,ht){for(var ir=0,Nt=nt;ir<Nt.length;ir+=1){var xt=Nt[ir];if(wt<=xt.x&&ut<=xt.y&&Ct>=xt.x&&ht>=xt.y)return!0}var sr=[new T(wt,ut),new T(wt,ht),new T(Ct,ht),new T(Ct,ut)];if(nt.length>2){for(var Xt=0,vr=sr;Xt<vr.length;Xt+=1)if(la(nt,vr[Xt]))return!0}for(var kt=0;kt<nt.length-1;kt++)if(Tu(nt[kt],nt[kt+1],sr))return!0;return!1}(r.cameraQueryGeometry,Le-A,Be-A,We+A,Ye+A)}),ae=0,le=G;ae<le.length;ae+=1)D.push(le[ae]);D.sort(Pz);for(var be,de={},Ie=function(Le){var Be=D[Le];if(Be!==be){be=Be;var We=m.featureIndexArray.get(Be),Ye=null;m.loadMatchingFeature(de,We.bucketIndex,We.sourceLayerIndex,We.featureIndex,S,y.layers,y.availableImages,i,s,h,function(nt,wt,ut){return Ye||(Ye=mn(nt)),wt.queryIntersectsFeature(k,nt,ut,Ye,m.z,r.transform,_,r.pixelPosMatrix)})}},Ae=0;Ae<D.length;Ae++)Ie(Ae);return de},Ws.prototype.loadMatchingFeature=function(r,i,s,h,m,y,_,S,k,A,z){var D=this.bucketLayerIDs[i];if(!y||function(nt,wt){for(var ut=0;ut<nt.length;ut++)if(wt.indexOf(nt[ut])>=0)return!0;return!1}(y,D)){var $=this.sourceLayerCoder.decode(s),G=this.vtLayers[$].feature(h);if(m.needGeometry){var ae=kn(G,!0);if(!m.filter(new cr(this.tileID.overscaledZ),ae,this.tileID.canonical))return}else if(!m.filter(new cr(this.tileID.overscaledZ),G))return;for(var le=this.getId(G,$),be=0;be<D.length;be++){var de=D[be];if(!(y&&y.indexOf(de)<0)){var Ie=S[de];if(Ie){var Ae={};le!==void 0&&A&&(Ae=A.getState(Ie.sourceLayer||"_geojsonTileLayer",le));var Le=F({},k[de]);Le.paint=n2(Le.paint,Ie.paint,G,Ae,_),Le.layout=n2(Le.layout,Ie.layout,G,Ae,_);var Be=!z||z(G,Ie,Ae);if(Be){var We=new km(G,this.z,this.x,this.y,le);We.layer=Le;var Ye=r[de];Ye===void 0&&(Ye=r[de]=[]),Ye.push({featureIndex:h,feature:We,intersectionZ:Be})}}}}}},Ws.prototype.lookupSymbolFeatures=function(r,i,s,h,m,y,_,S){var k={};this.loadVTLayers();for(var A=gc(m),z=0,D=r;z<D.length;z+=1)this.loadMatchingFeature(k,s,h,D[z],A,y,_,S,i);return k},Ws.prototype.hasLayer=function(r){for(var i=0,s=this.bucketLayerIDs;i<s.length;i+=1)for(var h=0,m=s[i];h<m.length;h+=1)if(r===m[h])return!0;return!1},Ws.prototype.getId=function(r,i){var s=r.id;return this.promoteId&&typeof(s=r.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[i]])=="boolean"&&(s=Number(s)),s},gt("FeatureIndex",Ws,{omit:["rawTileData","sourceLayerCoder"]});var ni=function(r,i){this.tileID=r,this.uid=O(),this.uses=0,this.tileSize=i,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};ni.prototype.registerFadeDuration=function(r){var i=r+this.timeAdded;i<Gt.now()||this.fadeEndTime&&i<this.fadeEndTime||(this.fadeEndTime=i)},ni.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},ni.prototype.loadVectorData=function(r,i,s){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){for(var h in r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(A,z){var D={};if(!z)return D;for(var $=function(){var le=ae[G],be=le.layerIds.map(function(Ae){return z.getLayer(Ae)}).filter(Boolean);if(be.length!==0){le.layers=be,le.stateDependentLayerIds&&(le.stateDependentLayers=le.stateDependentLayerIds.map(function(Ae){return be.filter(function(Le){return Le.id===Ae})[0]}));for(var de=0,Ie=be;de<Ie.length;de+=1)D[Ie[de].id]=le}},G=0,ae=A;G<ae.length;G+=1)$();return D}(r.buckets,i.style),this.hasSymbolBuckets=!1,this.buckets){var m=this.buckets[h];if(m instanceof Wr){if(this.hasSymbolBuckets=!0,!s)break;m.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var y in this.buckets){var _=this.buckets[y];if(_ instanceof Wr&&_.hasRTLText){this.hasRTLText=!0,lo.isLoading()||lo.isLoaded()||Ah()!=="deferred"||Uo();break}}for(var S in this.queryPadding=0,this.buckets){var k=this.buckets[S];this.queryPadding=Math.max(this.queryPadding,i.style.getLayer(S).queryRadius(k))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage)}else this.collisionBoxArray=new p},ni.prototype.unloadVectorData=function(){for(var r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},ni.prototype.getBucket=function(r){return this.buckets[r.id]},ni.prototype.upload=function(r){for(var i in this.buckets){var s=this.buckets[i];s.uploadPending()&&s.upload(r)}var h=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Au(r,this.imageAtlas.image,h.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Au(r,this.glyphAtlasImage,h.ALPHA),this.glyphAtlasImage=null)},ni.prototype.prepare=function(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)},ni.prototype.queryRenderedFeatures=function(r,i,s,h,m,y,_,S,k,A){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:h,cameraQueryGeometry:m,scale:y,tileSize:this.tileSize,pixelPosMatrix:A,transform:S,params:_,queryPadding:this.queryPadding*k},r,i,s):{}},ni.prototype.querySourceFeatures=function(r,i){var s=this.latestFeatureIndex;if(s&&s.rawTileData){var h=s.loadVTLayers(),m=i?i.sourceLayer:"",y=h._geojsonTileLayer||h[m];if(y)for(var _=gc(i&&i.filter),S=this.tileID.canonical,k=S.z,A=S.x,z=S.y,D={z:k,x:A,y:z},$=0;$<y.length;$++){var G=y.feature($);if(_.needGeometry){var ae=kn(G,!0);if(!_.filter(new cr(this.tileID.overscaledZ),ae,this.tileID.canonical))continue}else if(!_.filter(new cr(this.tileID.overscaledZ),G))continue;var le=s.getId(G,m),be=new km(G,k,A,z,le);be.tile=D,r.push(be)}}},ni.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},ni.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},ni.prototype.setExpiryData=function(r){var i=this.expirationTime;if(r.cacheControl){var s=ke(r.cacheControl);s["max-age"]&&(this.expirationTime=Date.now()+1e3*s["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){var h=Date.now(),m=!1;if(this.expirationTime>h)m=!1;else if(i)if(this.expirationTime<i)m=!0;else{var y=this.expirationTime-i;y?this.expirationTime=h+Math.max(y,3e4):m=!0}else m=!0;m?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},ni.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},ni.prototype.setFeatureState=function(r,i){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(r).length!==0){var s=this.latestFeatureIndex.loadVTLayers();for(var h in this.buckets)if(i.style.hasLayer(h)){var m=this.buckets[h],y=m.layers[0].sourceLayer||"_geojsonTileLayer",_=s[y],S=r[y];if(_&&S&&Object.keys(S).length!==0){m.update(S,_,this.imageAtlas&&this.imageAtlas.patternPositions||{});var k=i&&i.style&&i.style.getLayer(h);k&&(this.queryPadding=Math.max(this.queryPadding,k.queryRadius(m)))}}}},ni.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},ni.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Gt.now()},ni.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},ni.prototype.setHoldDuration=function(r){this.symbolFadeHoldUntil=Gt.now()+r},ni.prototype.setDependencies=function(r,i){for(var s={},h=0,m=i;h<m.length;h+=1)s[m[h]]=!0;this.dependencies[r]=s},ni.prototype.hasDependency=function(r,i){for(var s=0,h=r;s<h.length;s+=1){var m=this.dependencies[h[s]];if(m){for(var y=0,_=i;y<_.length;y+=1)if(m[_[y]])return!0}}return!1};var Il=P.performance,o2=function(r){this._marks={start:[r.url,"start"].join("#"),end:[r.url,"end"].join("#"),measure:r.url.toString()},Il.mark(this._marks.start)};o2.prototype.finish=function(){Il.mark(this._marks.end);var r=Il.getEntriesByName(this._marks.measure);return r.length===0&&(Il.measure(this._marks.measure,this._marks.start,this._marks.end),r=Il.getEntriesByName(this._marks.measure),Il.clearMarks(this._marks.start),Il.clearMarks(this._marks.end),Il.clearMeasures(this._marks.measure)),r},o.Actor=Vc,o.AlphaImage=Pu,o.CanonicalTileID=zu,o.CollisionBoxArray=p,o.Color=Ir,o.DEMData=qs,o.DataConstantProperty=St,o.DictionaryCoder=Cm,o.EXTENT=8192,o.ErrorEvent=me,o.EvaluationParameters=cr,o.Event=re,o.Evented=ye,o.FeatureIndex=Ws,o.FillBucket=ka,o.FillExtrusionBucket=Ta,o.ImageAtlas=Wh,o.ImagePosition=ym,o.LineBucket=Bi,o.LngLat=ln,o.LngLatBounds=jn,o.MercatorCoordinate=Mu,o.ONE_EM=24,o.OverscaledTileID=Un,o.Point=T,o.Point$1=T,o.Properties=hi,o.Protobuf=fm,o.RGBAImage=Qi,o.RequestManager=er,o.RequestPerformance=o2,o.ResourceType=wr,o.SegmentVector=Z,o.SourceFeatureState=qc,o.StructArrayLayout1ui2=Oh,o.StructArrayLayout2f1f2i16=js,o.StructArrayLayout2i4=Fs,o.StructArrayLayout3ui6=Ja,o.StructArrayLayout4i8=zh,o.SymbolBucket=Wr,o.Texture=Au,o.Tile=ni,o.Transitionable=pi,o.Uniform1f=tt,o.Uniform1i=Ke,o.Uniform2f=Qe,o.Uniform3f=ft,o.Uniform4f=Et,o.UniformColor=It,o.UniformMatrix4f=_r,o.UnwrappedTileID=r2,o.ValidationError=ne,o.WritingMode=Eo,o.ZoomHistory=kh,o.add=function(r,i,s){return r[0]=i[0]+s[0],r[1]=i[1]+s[1],r[2]=i[2]+s[2],r},o.addDynamicAttributes=k0,o.asyncAll=function(r,i,s){if(!r.length)return s(null,[]);var h=r.length,m=new Array(r.length),y=null;r.forEach(function(_,S){i(_,function(k,A){k&&(y=k),m[S]=A,--h==0&&s(y,m)})})},o.bezier=N,o.bindAll=pe,o.browser=Gt,o.cacheEntryPossiblyAdded=function(r){++At>Wi&&(r.getActor().send("enforceCacheSizeLimit",Bn),At=0)},o.clamp=J,o.clearTileCache=function(r){var i=P.caches.delete("mapbox-tiles");r&&i.catch(r).then(function(){return r()})},o.clipLine=jw,o.clone=function(r){var i=new Pr(16);return i[0]=r[0],i[1]=r[1],i[2]=r[2],i[3]=r[3],i[4]=r[4],i[5]=r[5],i[6]=r[6],i[7]=r[7],i[8]=r[8],i[9]=r[9],i[10]=r[10],i[11]=r[11],i[12]=r[12],i[13]=r[13],i[14]=r[14],i[15]=r[15],i},o.clone$1=we,o.clone$2=function(r){var i=new Pr(3);return i[0]=r[0],i[1]=r[1],i[2]=r[2],i},o.collisionCircleLayout=ZM,o.config=zt,o.create=function(){var r=new Pr(16);return Pr!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r},o.create$1=function(){var r=new Pr(9);return Pr!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r},o.create$2=function(){var r=new Pr(4);return Pr!=Float32Array&&(r[1]=0,r[2]=0),r[0]=1,r[3]=1,r},o.createCommonjsModule=v,o.createExpression=mc,o.createLayout=ti,o.createStyleLayer=function(r){return r.type==="custom"?new Tz(r):new Iz[r.type](r)},o.cross=function(r,i,s){var h=i[0],m=i[1],y=i[2],_=s[0],S=s[1],k=s[2];return r[0]=m*k-y*S,r[1]=y*_-h*k,r[2]=h*S-m*_,r},o.deepEqual=function r(i,s){if(Array.isArray(i)){if(!Array.isArray(s)||i.length!==s.length)return!1;for(var h=0;h<i.length;h++)if(!r(i[h],s[h]))return!1;return!0}if(typeof i=="object"&&i!==null&&s!==null){if(typeof s!="object"||Object.keys(i).length!==Object.keys(s).length)return!1;for(var m in i)if(!r(i[m],s[m]))return!1;return!0}return i===s},o.dot=function(r,i){return r[0]*i[0]+r[1]*i[1]+r[2]*i[2]},o.dot$1=function(r,i){return r[0]*i[0]+r[1]*i[1]+r[2]*i[2]+r[3]*i[3]},o.ease=q,o.emitValidationErrors=_u,o.endsWith=_e,o.enforceCacheSizeLimit=function(r){Bt(),lr&&lr.then(function(i){i.keys().then(function(s){for(var h=0;h<s.length-r;h++)i.delete(s[h])})})},o.evaluateSizeForFeature=Lw,o.evaluateSizeForZoom=Dw,o.evaluateVariableOffset=Vw,o.evented=Ph,o.extend=F,o.featureFilter=gc,o.filterObject=he,o.fromRotation=function(r,i){var s=Math.sin(i),h=Math.cos(i);return r[0]=h,r[1]=s,r[2]=0,r[3]=-s,r[4]=h,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r},o.getAnchorAlignment=w0,o.getAnchorJustification=C0,o.getArrayBuffer=Rr,o.getImage=j,o.getJSON=function(r,i){return ar(F(r,{type:"json"}),i)},o.getRTLTextPluginStatus=Ah,o.getReferrer=Me,o.getVideo=function(r,i){var s,h,m=P.document.createElement("video");m.muted=!0,m.onloadstart=function(){i(null,m)};for(var y=0;y<r.length;y++){var _=P.document.createElement("source");s=r[y],h=void 0,(h=P.document.createElement("a")).href=s,(h.protocol!==P.document.location.protocol||h.host!==P.document.location.host)&&(m.crossOrigin="Anonymous"),_.src=r[y],m.appendChild(_)}return{cancel:function(){}}},o.identity=uo,o.invert=function(r,i){var s=i[0],h=i[1],m=i[2],y=i[3],_=i[4],S=i[5],k=i[6],A=i[7],z=i[8],D=i[9],$=i[10],G=i[11],ae=i[12],le=i[13],be=i[14],de=i[15],Ie=s*S-h*_,Ae=s*k-m*_,Le=s*A-y*_,Be=h*k-m*S,We=h*A-y*S,Ye=m*A-y*k,nt=z*le-D*ae,wt=z*be-$*ae,ut=z*de-G*ae,Ct=D*be-$*le,ht=D*de-G*le,ir=$*de-G*be,Nt=Ie*ir-Ae*ht+Le*Ct+Be*ut-We*wt+Ye*nt;return Nt?(r[0]=(S*ir-k*ht+A*Ct)*(Nt=1/Nt),r[1]=(m*ht-h*ir-y*Ct)*Nt,r[2]=(le*Ye-be*We+de*Be)*Nt,r[3]=($*We-D*Ye-G*Be)*Nt,r[4]=(k*ut-_*ir-A*wt)*Nt,r[5]=(s*ir-m*ut+y*wt)*Nt,r[6]=(be*Le-ae*Ye-de*Ae)*Nt,r[7]=(z*Ye-$*Le+G*Ae)*Nt,r[8]=(_*ht-S*ut+A*nt)*Nt,r[9]=(h*ut-s*ht-y*nt)*Nt,r[10]=(ae*We-le*Le+de*Ie)*Nt,r[11]=(D*Le-z*We-G*Ie)*Nt,r[12]=(S*wt-_*Ct-k*nt)*Nt,r[13]=(s*Ct-h*wt+m*nt)*Nt,r[14]=(le*Ae-ae*Be-be*Ie)*Nt,r[15]=(z*Be-D*Ae+$*Ie)*Nt,r):null},o.isChar=ot,o.isMapboxURL=Mr,o.keysDifference=function(r,i){var s=[];for(var h in r)h in i||s.push(h);return s},o.makeRequest=ar,o.mapObject=ze,o.mercatorXfromLng=Qw,o.mercatorYfromLat=e2,o.mercatorZfromAltitude=t2,o.mul=c0,o.multiply=Oi,o.mvt=Lc,o.nextPowerOfTwo=function(r){return r<=1?1:Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))},o.normalize=function(r,i){var s=i[0],h=i[1],m=i[2],y=s*s+h*h+m*m;return y>0&&(y=1/Math.sqrt(y)),r[0]=i[0]*y,r[1]=i[1]*y,r[2]=i[2]*y,r},o.number=zn,o.offscreenCanvasSupported=yr,o.ortho=function(r,i,s,h,m,y,_){var S=1/(i-s),k=1/(h-m),A=1/(y-_);return r[0]=-2*S,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*k,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*A,r[11]=0,r[12]=(i+s)*S,r[13]=(m+h)*k,r[14]=(_+y)*A,r[15]=1,r},o.parseGlyphPBF=function(r){return new fm(r).readFields(az,[])},o.pbf=fm,o.performSymbolLayout=function(r,i,s,h,m,y,_){r.createArrays(),r.tilePixelRatio=8192/(512*r.overscaling),r.compareText={},r.iconsNeedLinear=!1;var S=r.layers[0].layout,k=r.layers[0]._unevaluatedLayout._values,A={};if(r.textSizeData.kind==="composite"){var z=r.textSizeData,D=z.maxZoom;A.compositeTextSizes=[k["text-size"].possiblyEvaluate(new cr(z.minZoom),_),k["text-size"].possiblyEvaluate(new cr(D),_)]}if(r.iconSizeData.kind==="composite"){var $=r.iconSizeData,G=$.maxZoom;A.compositeIconSizes=[k["icon-size"].possiblyEvaluate(new cr($.minZoom),_),k["icon-size"].possiblyEvaluate(new cr(G),_)]}A.layoutTextSize=k["text-size"].possiblyEvaluate(new cr(r.zoom+1),_),A.layoutIconSize=k["icon-size"].possiblyEvaluate(new cr(r.zoom+1),_),A.textMaxSize=k["text-size"].possiblyEvaluate(new cr(18));for(var ae=24*S.get("text-line-height"),le=S.get("text-rotation-alignment")==="map"&&S.get("symbol-placement")!=="point",be=S.get("text-keep-upright"),de=S.get("text-size"),Ie=function(){var Be=Le[Ae],We=S.get("text-font").evaluate(Be,{},_).join(","),Ye=de.evaluate(Be,{},_),nt=A.layoutTextSize.evaluate(Be,{},_),wt=A.layoutIconSize.evaluate(Be,{},_),ut={horizontal:{},vertical:void 0},Ct=Be.text,ht=[0,0];if(Ct){var ir=Ct.toString(),Nt=24*S.get("text-letter-spacing").evaluate(Be,{},_),xt=function(pr){for(var Kr=0,Fr=pr;Kr<Fr.length;Kr+=1)if(xr=Fr[Kr].charCodeAt(0),ot.Arabic(xr)||ot["Arabic Supplement"](xr)||ot["Arabic Extended-A"](xr)||ot["Arabic Presentation Forms-A"](xr)||ot["Arabic Presentation Forms-B"](xr))return!1;var xr;return!0}(ir)?Nt:0,sr=S.get("text-anchor").evaluate(Be,{},_),Xt=S.get("text-variable-anchor");if(!Xt){var vr=S.get("text-radial-offset").evaluate(Be,{},_);ht=vr?Vw(sr,[24*vr,E0]):S.get("text-offset").evaluate(Be,{},_).map(function(pr){return 24*pr})}var kt=le?"center":S.get("text-justify").evaluate(Be,{},_),Er=S.get("symbol-placement"),un=Er==="point"?24*S.get("text-max-width").evaluate(Be,{},_):0,_n=function(){r.allowVerticalPlacement&&Th(ir)&&(ut.vertical=gm(Ct,i,s,m,We,un,ae,sr,"left",xt,ht,Eo.vertical,!0,Er,nt,Ye))};if(!le&&Xt){for(var yn=kt==="auto"?Xt.map(function(pr){return C0(pr)}):[kt],cn=!1,xn=0;xn<yn.length;xn++){var Kn=yn[xn];if(!ut.horizontal[Kn])if(cn)ut.horizontal[Kn]=ut.horizontal[0];else{var Zn=gm(Ct,i,s,m,We,un,ae,"center",Kn,xt,ht,Eo.horizontal,!1,Er,nt,Ye);Zn&&(ut.horizontal[Kn]=Zn,cn=Zn.positionedLines.length===1)}}_n()}else{kt==="auto"&&(kt=C0(sr));var Ii=gm(Ct,i,s,m,We,un,ae,sr,kt,xt,ht,Eo.horizontal,!1,Er,nt,Ye);Ii&&(ut.horizontal[kt]=Ii),_n(),Th(ir)&&le&&be&&(ut.vertical=gm(Ct,i,s,m,We,un,ae,sr,kt,xt,ht,Eo.vertical,!1,Er,nt,Ye))}}var ii=void 0,Pi=!1;if(Be.icon&&Be.icon.name){var Tn=h[Be.icon.name];Tn&&(ii=function(pr,Kr,Fr){var xr=w0(Fr),Ni=Kr[0]-pr.displaySize[0]*xr.horizontalAlign,gi=Kr[1]-pr.displaySize[1]*xr.verticalAlign;return{image:pr,top:gi,bottom:gi+pr.displaySize[1],left:Ni,right:Ni+pr.displaySize[0]}}(m[Be.icon.name],S.get("icon-offset").evaluate(Be,{},_),S.get("icon-anchor").evaluate(Be,{},_)),Pi=Tn.sdf,r.sdfIcons===void 0?r.sdfIcons=Tn.sdf:r.sdfIcons!==Tn.sdf&&ge("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Tn.pixelRatio!==r.pixelRatio||S.get("icon-rotate").constantOr(1)!==0)&&(r.iconsNeedLinear=!0))}var oi=Ww(ut.horizontal)||ut.vertical;r.iconsInText=!!oi&&oi.iconsInText,(oi||ii)&&function(pr,Kr,Fr,xr,Ni,gi,nn,Ln,vi,Cr,is){var Co=gi.textMaxSize.evaluate(Kr,{});Co===void 0&&(Co=nn);var os,In=pr.layers[0].layout,as=In.get("icon-offset").evaluate(Kr,{},is),ca=Ww(Fr.horizontal),Wc=nn/24,Ru=pr.tilePixelRatio*Wc,Gc=pr.tilePixelRatio*Co/24,Gs=pr.tilePixelRatio*Ln,Hc=pr.tilePixelRatio*In.get("symbol-spacing"),Tm=In.get("text-padding")*pr.tilePixelRatio,Kc=In.get("icon-padding")*pr.tilePixelRatio,Kh=In.get("text-max-angle")/180*Math.PI,Im=In.get("text-rotation-alignment")==="map"&&In.get("symbol-placement")!=="point",Pm=In.get("icon-rotation-alignment")==="map"&&In.get("symbol-placement")!=="point",Hs=In.get("symbol-placement"),Zh=Hc/2,Zc=In.get("icon-text-fit");xr&&Zc!=="none"&&(pr.allowVerticalPlacement&&Fr.vertical&&(os=Rw(xr,Fr.vertical,Zc,In.get("icon-text-fit-padding"),as,Wc)),ca&&(xr=Rw(xr,ca,Zc,In.get("icon-text-fit-padding"),as,Wc)));var Pl=function(Az,nd){nd.x<0||nd.x>=8192||nd.y<0||nd.y>=8192||function(Pn,Ia,Mz,Al,L0,l2,Dm,ss,Om,id,Bm,Nm,D0,u2,od,c2,p2,h2,d2,f2,ko,Fm,m2,ls,zz){var y2,Du,ep,tp,rp,np=Pn.addToLineVertexArray(Ia,Mz),g2=0,v2=0,_2=0,x2=0,O0=-1,B0=-1,Ks={},b2=oe(""),N0=0,F0=0;if(ss._unevaluatedLayout.getValue("text-radial-offset")===void 0?(N0=(y2=ss.layout.get("text-offset").evaluate(ko,{},ls).map(function(sd){return 24*sd}))[0],F0=y2[1]):(N0=24*ss.layout.get("text-radial-offset").evaluate(ko,{},ls),F0=E0),Pn.allowVerticalPlacement&&Al.vertical){var w2=ss.layout.get("text-rotate").evaluate(ko,{},ls)+90;tp=new wm(Om,Ia,id,Bm,Nm,Al.vertical,D0,u2,od,w2),Dm&&(rp=new wm(Om,Ia,id,Bm,Nm,Dm,p2,h2,od,w2))}if(L0){var j0=ss.layout.get("icon-rotate").evaluate(ko,{}),S2=ss.layout.get("icon-text-fit")!=="none",E2=Uw(L0,j0,m2,S2),U0=Dm?Uw(Dm,j0,m2,S2):void 0;ep=new wm(Om,Ia,id,Bm,Nm,L0,p2,h2,!1,j0),g2=4*E2.length;var C2=Pn.iconSizeData,ad=null;C2.kind==="source"?(ad=[128*ss.layout.get("icon-size").evaluate(ko,{})])[0]>32640&&ge(Pn.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):C2.kind==="composite"&&((ad=[128*Fm.compositeIconSizes[0].evaluate(ko,{},ls),128*Fm.compositeIconSizes[1].evaluate(ko,{},ls)])[0]>32640||ad[1]>32640)&&ge(Pn.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),Pn.addSymbols(Pn.icon,E2,ad,f2,d2,ko,!1,Ia,np.lineStartIndex,np.lineLength,-1,ls),O0=Pn.icon.placedSymbolArray.length-1,U0&&(v2=4*U0.length,Pn.addSymbols(Pn.icon,U0,ad,f2,d2,ko,Eo.vertical,Ia,np.lineStartIndex,np.lineLength,-1,ls),B0=Pn.icon.placedSymbolArray.length-1)}for(var k2 in Al.horizontal){var jm=Al.horizontal[k2];if(!Du){b2=oe(jm.text);var Rz=ss.layout.get("text-rotate").evaluate(ko,{},ls);Du=new wm(Om,Ia,id,Bm,Nm,jm,D0,u2,od,Rz)}var T2=jm.positionedLines.length===1;if(_2+=qw(Pn,Ia,jm,l2,ss,od,ko,c2,np,Al.vertical?Eo.horizontal:Eo.horizontalOnly,T2?Object.keys(Al.horizontal):[k2],Ks,O0,Fm,ls),T2)break}Al.vertical&&(x2+=qw(Pn,Ia,Al.vertical,l2,ss,od,ko,c2,np,Eo.vertical,["vertical"],Ks,B0,Fm,ls));var Lz=Du?Du.boxStartIndex:Pn.collisionBoxArray.length,Dz=Du?Du.boxEndIndex:Pn.collisionBoxArray.length,Oz=tp?tp.boxStartIndex:Pn.collisionBoxArray.length,Bz=tp?tp.boxEndIndex:Pn.collisionBoxArray.length,Nz=ep?ep.boxStartIndex:Pn.collisionBoxArray.length,Fz=ep?ep.boxEndIndex:Pn.collisionBoxArray.length,jz=rp?rp.boxStartIndex:Pn.collisionBoxArray.length,Uz=rp?rp.boxEndIndex:Pn.collisionBoxArray.length,us=-1,Um=function(sd,P2){return sd&&sd.circleDiameter?Math.max(sd.circleDiameter,P2):P2};us=Um(Du,us),us=Um(tp,us),us=Um(ep,us);var I2=(us=Um(rp,us))>-1?1:0;I2&&(us*=zz/24),Pn.glyphOffsetArray.length>=Wr.MAX_GLYPHS&&ge("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),ko.sortKey!==void 0&&Pn.addToSortKeyRanges(Pn.symbolInstances.length,ko.sortKey),Pn.symbolInstances.emplaceBack(Ia.x,Ia.y,Ks.right>=0?Ks.right:-1,Ks.center>=0?Ks.center:-1,Ks.left>=0?Ks.left:-1,Ks.vertical||-1,O0,B0,b2,Lz,Dz,Oz,Bz,Nz,Fz,jz,Uz,id,_2,x2,g2,v2,I2,0,D0,N0,F0,us)}(pr,nd,Az,Fr,xr,Ni,os,pr.layers[0],pr.collisionBoxArray,Kr.index,Kr.sourceLayerIndex,pr.index,Ru,Tm,Im,vi,Gs,Kc,Pm,as,Kr,gi,Cr,is,nn)};if(Hs==="line")for(var Xc=0,Am=jw(Kr.geometry,0,0,8192,8192);Xc<Am.length;Xc+=1)for(var Mm=Am[Xc],Xh=0,Yh=dz(Mm,Hc,Kh,Fr.vertical||ca,xr,24,Gc,pr.overscaling,8192);Xh<Yh.length;Xh+=1){var zm=Yh[Xh];ca&&gz(pr,ca.text,Zh,zm)||Pl(Mm,zm)}else if(Hs==="line-center")for(var Jh=0,Qh=Kr.geometry;Jh<Qh.length;Jh+=1){var ed=Qh[Jh];if(ed.length>1){var Rm=hz(ed,Kh,Fr.vertical||ca,xr,24,Gc);Rm&&Pl(ed,Rm)}}else if(Kr.type==="Polygon")for(var Yc=0,Lm=g0(Kr.geometry,0);Yc<Lm.length;Yc+=1){var Jc=Lm[Yc],td=mz(Jc,16);Pl(Jc[0],new Nc(td.x,td.y,0))}else if(Kr.type==="LineString")for(var Lu=0,rd=Kr.geometry;Lu<rd.length;Lu+=1){var Qc=rd[Lu];Pl(Qc,new Nc(Qc[0].x,Qc[0].y,0))}else if(Kr.type==="Point")for(var M0=0,a2=Kr.geometry;M0<a2.length;M0+=1)for(var z0=0,s2=a2[M0];z0<s2.length;z0+=1){var R0=s2[z0];Pl([R0],new Nc(R0.x,R0.y,0))}}(r,Be,ut,ii,h,A,nt,wt,ht,Pi,_)},Ae=0,Le=r.features;Ae<Le.length;Ae+=1)Ie();y&&r.generateCollisionDebugBuffers()},o.perspective=function(r,i,s,h,m){var y,_=1/Math.tan(i/2);return r[0]=_/s,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=_,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,m!=null&&m!==1/0?(r[10]=(m+h)*(y=1/(h-m)),r[14]=2*m*h*y):(r[10]=-1,r[14]=-2*h),r},o.pick=function(r,i){for(var s={},h=0;h<i.length;h++){var m=i[h];m in r&&(s[m]=r[m])}return s},o.plugin=lo,o.polygonIntersectsPolygon=ts,o.postMapLoadEvent=Wn,o.postTurnstileEvent=hr,o.potpack=Pw,o.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],o.register=gt,o.registerForPluginStateChange=function(r){return r({pluginStatus:Xi,pluginURL:Sa}),Ph.on("pluginStateChange",r),r},o.renderColorRamp=cw,o.rotate=function(r,i,s){var h=i[0],m=i[1],y=i[2],_=i[3],S=Math.sin(s),k=Math.cos(s);return r[0]=h*k+y*S,r[1]=m*k+_*S,r[2]=h*-S+y*k,r[3]=m*-S+_*k,r},o.rotateX=function(r,i,s){var h=Math.sin(s),m=Math.cos(s),y=i[4],_=i[5],S=i[6],k=i[7],A=i[8],z=i[9],D=i[10],$=i[11];return i!==r&&(r[0]=i[0],r[1]=i[1],r[2]=i[2],r[3]=i[3],r[12]=i[12],r[13]=i[13],r[14]=i[14],r[15]=i[15]),r[4]=y*m+A*h,r[5]=_*m+z*h,r[6]=S*m+D*h,r[7]=k*m+$*h,r[8]=A*m-y*h,r[9]=z*m-_*h,r[10]=D*m-S*h,r[11]=$*m-k*h,r},o.rotateZ=function(r,i,s){var h=Math.sin(s),m=Math.cos(s),y=i[0],_=i[1],S=i[2],k=i[3],A=i[4],z=i[5],D=i[6],$=i[7];return i!==r&&(r[8]=i[8],r[9]=i[9],r[10]=i[10],r[11]=i[11],r[12]=i[12],r[13]=i[13],r[14]=i[14],r[15]=i[15]),r[0]=y*m+A*h,r[1]=_*m+z*h,r[2]=S*m+D*h,r[3]=k*m+$*h,r[4]=A*m-y*h,r[5]=z*m-_*h,r[6]=D*m-S*h,r[7]=$*m-k*h,r},o.scale=function(r,i,s){var h=s[0],m=s[1],y=s[2];return r[0]=i[0]*h,r[1]=i[1]*h,r[2]=i[2]*h,r[3]=i[3]*h,r[4]=i[4]*m,r[5]=i[5]*m,r[6]=i[6]*m,r[7]=i[7]*m,r[8]=i[8]*y,r[9]=i[9]*y,r[10]=i[10]*y,r[11]=i[11]*y,r[12]=i[12],r[13]=i[13],r[14]=i[14],r[15]=i[15],r},o.scale$1=function(r,i,s){return r[0]=i[0]*s,r[1]=i[1]*s,r[2]=i[2]*s,r[3]=i[3]*s,r},o.scale$2=function(r,i,s){return r[0]=i[0]*s,r[1]=i[1]*s,r[2]=i[2]*s,r},o.setCacheLimits=function(r,i){Bn=r,Wi=i},o.setRTLTextPlugin=function(r,i,s){if(s===void 0&&(s=!1),Xi==="deferred"||Xi==="loading"||Xi==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");Sa=Gt.resolveURL(r),Xi="deferred",Ec=i,bu(),s||Uo()},o.sphericalToCartesian=function(r){var i=r[0],s=r[1],h=r[2];return s+=90,s*=Math.PI/180,h*=Math.PI/180,{x:i*Math.cos(s)*Math.sin(h),y:i*Math.sin(s)*Math.sin(h),z:i*Math.cos(h)}},o.sqrLen=function(r){var i=r[0],s=r[1];return i*i+s*s},o.styleSpec=H,o.sub=function(r,i,s){return r[0]=i[0]-s[0],r[1]=i[1]-s[1],r[2]=i[2]-s[2],r},o.symbolSize=pz,o.transformMat3=function(r,i,s){var h=i[0],m=i[1],y=i[2];return r[0]=h*s[0]+m*s[3]+y*s[6],r[1]=h*s[1]+m*s[4]+y*s[7],r[2]=h*s[2]+m*s[5]+y*s[8],r},o.transformMat4=Ac,o.translate=function(r,i,s){var h,m,y,_,S,k,A,z,D,$,G,ae,le=s[0],be=s[1],de=s[2];return i===r?(r[12]=i[0]*le+i[4]*be+i[8]*de+i[12],r[13]=i[1]*le+i[5]*be+i[9]*de+i[13],r[14]=i[2]*le+i[6]*be+i[10]*de+i[14],r[15]=i[3]*le+i[7]*be+i[11]*de+i[15]):(m=i[1],y=i[2],_=i[3],S=i[4],k=i[5],A=i[6],z=i[7],D=i[8],$=i[9],G=i[10],ae=i[11],r[0]=h=i[0],r[1]=m,r[2]=y,r[3]=_,r[4]=S,r[5]=k,r[6]=A,r[7]=z,r[8]=D,r[9]=$,r[10]=G,r[11]=ae,r[12]=h*le+S*be+D*de+i[12],r[13]=m*le+k*be+$*de+i[13],r[14]=y*le+A*be+G*de+i[14],r[15]=_*le+z*be+ae*de+i[15]),r},o.triggerPluginCompletionEvent=sm,o.uniqueId=O,o.validateCustomStyleLayer=function(r){var i=[],s=r.id;return s===void 0&&i.push({message:"layers."+s+': missing required property "id"'}),r.render===void 0&&i.push({message:"layers."+s+': missing required method "render"'}),r.renderingMode&&r.renderingMode!=="2d"&&r.renderingMode!=="3d"&&i.push({message:"layers."+s+': property "renderingMode" must be either "2d" or "3d"'}),i},o.validateLight=l0,o.validateStyle=gu,o.values=function(r){var i=[];for(var s in r)i.push(r[s]);return i},o.vectorTile=Lc,o.version="1.13.3",o.warnOnce=ge,o.webpSupported=nr,o.window=P,o.wrap=U}),f(["./shared"],function(o){function v(L){var j=typeof L;if(j==="number"||j==="boolean"||j==="string"||L==null)return JSON.stringify(L);if(Array.isArray(L)){for(var W="[",X=0,re=L;X<re.length;X+=1)W+=v(re[X])+",";return W+"]"}for(var me=Object.keys(L).sort(),ye="{",H=0;H<me.length;H++)ye+=JSON.stringify(me[H])+":"+v(L[me[H]])+",";return ye+"}"}function x(L){for(var j="",W=0,X=o.refProperties;W<X.length;W+=1)j+="/"+v(L[X[W]]);return j}var E=function(L){this.keyCache={},L&&this.replace(L)};E.prototype.replace=function(L){this._layerConfigs={},this._layers={},this.update(L,[])},E.prototype.update=function(L,j){for(var W=this,X=0,re=L;X<re.length;X+=1){var me=re[X];this._layerConfigs[me.id]=me;var ye=this._layers[me.id]=o.createStyleLayer(me);ye._featureFilter=o.featureFilter(ye.filter),this.keyCache[me.id]&&delete this.keyCache[me.id]}for(var H=0,ne=j;H<ne.length;H+=1){var Ee=ne[H];delete this.keyCache[Ee],delete this._layerConfigs[Ee],delete this._layers[Ee]}this.familiesBySource={};for(var Ge=0,Ze=function(it,at){for(var or={},pt=0;pt<it.length;pt++){var fr=at&&at[it[pt].id]||x(it[pt]);at&&(at[it[pt].id]=fr);var Gr=or[fr];Gr||(Gr=or[fr]=[]),Gr.push(it[pt])}var ur=[];for(var Tr in or)ur.push(or[Tr]);return ur}(o.values(this._layerConfigs),this.keyCache);Ge<Ze.length;Ge+=1){var Ue=Ze[Ge].map(function(it){return W._layers[it.id]}),Xe=Ue[0];if(Xe.visibility!=="none"){var vt=Xe.source||"",yt=this.familiesBySource[vt];yt||(yt=this.familiesBySource[vt]={});var Ve=Xe.sourceLayer||"_geojsonTileLayer",dt=yt[Ve];dt||(dt=yt[Ve]=[]),dt.push(Ue)}}};var T=function(L){var j={},W=[];for(var X in L){var re=L[X],me=j[X]={};for(var ye in re){var H=re[+ye];if(H&&H.bitmap.width!==0&&H.bitmap.height!==0){var ne={x:0,y:0,w:H.bitmap.width+2,h:H.bitmap.height+2};W.push(ne),me[ye]={rect:ne,metrics:H.metrics}}}}var Ee=o.potpack(W),Ge=new o.AlphaImage({width:Ee.w||1,height:Ee.h||1});for(var Ze in L){var Ue=L[Ze];for(var Xe in Ue){var vt=Ue[+Xe];if(vt&&vt.bitmap.width!==0&&vt.bitmap.height!==0){var yt=j[Ze][Xe].rect;o.AlphaImage.copy(vt.bitmap,Ge,{x:0,y:0},{x:yt.x+1,y:yt.y+1},vt.bitmap)}}}this.image=Ge,this.positions=j};o.register("GlyphAtlas",T);var I=function(L){this.tileID=new o.OverscaledTileID(L.tileID.overscaledZ,L.tileID.wrap,L.tileID.canonical.z,L.tileID.canonical.x,L.tileID.canonical.y),this.uid=L.uid,this.zoom=L.zoom,this.pixelRatio=L.pixelRatio,this.tileSize=L.tileSize,this.source=L.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=L.showCollisionBoxes,this.collectResourceTiming=!!L.collectResourceTiming,this.returnDependencies=!!L.returnDependencies,this.promoteId=L.promoteId};function P(L,j,W){for(var X=new o.EvaluationParameters(j),re=0,me=L;re<me.length;re+=1)me[re].recalculate(X,W)}function V(L,j){var W=o.getArrayBuffer(L.request,function(X,re,me,ye){X?j(X):re&&j(null,{vectorTile:new o.vectorTile.VectorTile(new o.pbf(re)),rawData:re,cacheControl:me,expires:ye})});return function(){W.cancel(),j()}}I.prototype.parse=function(L,j,W,X,re){var me=this;this.status="parsing",this.data=L,this.collisionBoxArray=new o.CollisionBoxArray;var ye=new o.DictionaryCoder(Object.keys(L.layers).sort()),H=new o.FeatureIndex(this.tileID,this.promoteId);H.bucketLayerIDs=[];var ne,Ee,Ge,Ze,Ue={},Xe={featureIndex:H,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:W},vt=j.familiesBySource[this.source];for(var yt in vt){var Ve=L.layers[yt];if(Ve){Ve.version===1&&o.warnOnce('Vector tile source "'+this.source+'" layer "'+yt+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var dt=ye.encode(yt),it=[],at=0;at<Ve.length;at++){var or=Ve.feature(at),pt=H.getId(or,yt);it.push({feature:or,id:pt,index:at,sourceLayerIndex:dt})}for(var fr=0,Gr=vt[yt];fr<Gr.length;fr+=1){var ur=Gr[fr],Tr=ur[0];Tr.minzoom&&this.zoom<Math.floor(Tr.minzoom)||Tr.maxzoom&&this.zoom>=Tr.maxzoom||Tr.visibility!=="none"&&(P(ur,this.zoom,W),(Ue[Tr.id]=Tr.createBucket({index:H.bucketLayerIDs.length,layers:ur,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:dt,sourceID:this.source})).populate(it,Xe,this.tileID.canonical),H.bucketLayerIDs.push(ur.map(function(qr){return qr.id})))}}}var gr=o.mapObject(Xe.glyphDependencies,function(qr){return Object.keys(qr).map(Number)});Object.keys(gr).length?X.send("getGlyphs",{uid:this.uid,stacks:gr},function(qr,dr){ne||(ne=qr,Ee=dr,En.call(me))}):Ee={};var bi=Object.keys(Xe.iconDependencies);bi.length?X.send("getImages",{icons:bi,source:this.source,tileID:this.tileID,type:"icons"},function(qr,dr){ne||(ne=qr,Ge=dr,En.call(me))}):Ge={};var Lr=Object.keys(Xe.patternDependencies);function En(){if(ne)return re(ne);if(Ee&&Ge&&Ze){var qr=new T(Ee),dr=new o.ImageAtlas(Ge,Ze);for(var Ir in Ue){var Ri=Ue[Ir];Ri instanceof o.SymbolBucket?(P(Ri.layers,this.zoom,W),o.performSymbolLayout(Ri,Ee,qr.positions,Ge,dr.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Ri.hasPattern&&(Ri instanceof o.LineBucket||Ri instanceof o.FillBucket||Ri instanceof o.FillExtrusionBucket)&&(P(Ri.layers,this.zoom,W),Ri.addFeatures(Xe,this.tileID.canonical,dr.patternPositions))}this.status="done",re(null,{buckets:o.values(Ue).filter(function(ou){return!ou.isEmpty()}),featureIndex:H,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:qr.image,imageAtlas:dr,glyphMap:this.returnDependencies?Ee:null,iconMap:this.returnDependencies?Ge:null,glyphPositions:this.returnDependencies?qr.positions:null})}}Lr.length?X.send("getImages",{icons:Lr,source:this.source,tileID:this.tileID,type:"patterns"},function(qr,dr){ne||(ne=qr,Ze=dr,En.call(me))}):Ze={},En.call(this)};var N=function(L,j,W,X){this.actor=L,this.layerIndex=j,this.availableImages=W,this.loadVectorData=X||V,this.loading={},this.loaded={}};N.prototype.loadTile=function(L,j){var W=this,X=L.uid;this.loading||(this.loading={});var re=!!(L&&L.request&&L.request.collectResourceTiming)&&new o.RequestPerformance(L.request),me=this.loading[X]=new I(L);me.abort=this.loadVectorData(L,function(ye,H){if(delete W.loading[X],ye||!H)return me.status="done",W.loaded[X]=me,j(ye);var ne=H.rawData,Ee={};H.expires&&(Ee.expires=H.expires),H.cacheControl&&(Ee.cacheControl=H.cacheControl);var Ge={};if(re){var Ze=re.finish();Ze&&(Ge.resourceTiming=JSON.parse(JSON.stringify(Ze)))}me.vectorTile=H.vectorTile,me.parse(H.vectorTile,W.layerIndex,W.availableImages,W.actor,function(Ue,Xe){if(Ue||!Xe)return j(Ue);j(null,o.extend({rawTileData:ne.slice(0)},Xe,Ee,Ge))}),W.loaded=W.loaded||{},W.loaded[X]=me})},N.prototype.reloadTile=function(L,j){var W=this,X=this.loaded,re=L.uid,me=this;if(X&&X[re]){var ye=X[re];ye.showCollisionBoxes=L.showCollisionBoxes;var H=function(ne,Ee){var Ge=ye.reloadCallback;Ge&&(delete ye.reloadCallback,ye.parse(ye.vectorTile,me.layerIndex,W.availableImages,me.actor,Ge)),j(ne,Ee)};ye.status==="parsing"?ye.reloadCallback=H:ye.status==="done"&&(ye.vectorTile?ye.parse(ye.vectorTile,this.layerIndex,this.availableImages,this.actor,H):H())}},N.prototype.abortTile=function(L,j){var W=this.loading,X=L.uid;W&&W[X]&&W[X].abort&&(W[X].abort(),delete W[X]),j()},N.prototype.removeTile=function(L,j){var W=this.loaded,X=L.uid;W&&W[X]&&delete W[X],j()};var q=o.window.ImageBitmap,J=function(){this.loaded={}};function U(L,j){if(L.length!==0){F(L[0],j);for(var W=1;W<L.length;W++)F(L[W],!j)}}function F(L,j){for(var W=0,X=0,re=0,me=L.length,ye=me-1;re<me;ye=re++){var H=(L[re][0]-L[ye][0])*(L[ye][1]+L[re][1]),ne=W+H;X+=Math.abs(W)>=Math.abs(H)?W-ne+H:H-ne+W,W=ne}W+X>=0!=!!j&&L.reverse()}J.prototype.loadTile=function(L,j){var W=L.uid,X=L.encoding,re=L.rawImageData,me=q&&re instanceof q?this.getImageData(re):re,ye=new o.DEMData(W,me,X);this.loaded=this.loaded||{},this.loaded[W]=ye,j(null,ye)},J.prototype.getImageData=function(L){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(L.width,L.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=L.width,this.offscreenCanvas.height=L.height,this.offscreenCanvasContext.drawImage(L,0,0,L.width,L.height);var j=this.offscreenCanvasContext.getImageData(-1,-1,L.width+2,L.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new o.RGBAImage({width:j.width,height:j.height},j.data)},J.prototype.removeTile=function(L){var j=this.loaded,W=L.uid;j&&j[W]&&delete j[W]};var R=o.vectorTile.VectorTileFeature.prototype.toGeoJSON,O=function(L){this._feature=L,this.extent=o.EXTENT,this.type=L.type,this.properties=L.tags,"id"in L&&!isNaN(L.id)&&(this.id=parseInt(L.id,10))};O.prototype.loadGeometry=function(){if(this._feature.type===1){for(var L=[],j=0,W=this._feature.geometry;j<W.length;j+=1){var X=W[j];L.push([new o.Point$1(X[0],X[1])])}return L}for(var re=[],me=0,ye=this._feature.geometry;me<ye.length;me+=1){for(var H=[],ne=0,Ee=ye[me];ne<Ee.length;ne+=1){var Ge=Ee[ne];H.push(new o.Point$1(Ge[0],Ge[1]))}re.push(H)}return re},O.prototype.toGeoJSON=function(L,j,W){return R.call(this,L,j,W)};var Q=function(L){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o.EXTENT,this.length=L.length,this._features=L};Q.prototype.feature=function(L){return new O(this._features[L])};var se=o.vectorTile.VectorTileFeature,pe=_e;function _e(L,j){this.options=j||{},this.features=L,this.length=L.length}function ze(L,j){this.id=typeof L.id=="number"?L.id:void 0,this.type=L.type,this.rawGeometry=L.type===1?[L.geometry]:L.geometry,this.properties=L.tags,this.extent=j||4096}_e.prototype.feature=function(L){return new ze(this.features[L],this.options.extent)},ze.prototype.loadGeometry=function(){var L=this.rawGeometry;this.geometry=[];for(var j=0;j<L.length;j++){for(var W=L[j],X=[],re=0;re<W.length;re++)X.push(new o.Point$1(W[re][0],W[re][1]));this.geometry.push(X)}return this.geometry},ze.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var L=this.geometry,j=1/0,W=-1/0,X=1/0,re=-1/0,me=0;me<L.length;me++)for(var ye=L[me],H=0;H<ye.length;H++){var ne=ye[H];j=Math.min(j,ne.x),W=Math.max(W,ne.x),X=Math.min(X,ne.y),re=Math.max(re,ne.y)}return[j,X,W,re]},ze.prototype.toGeoJSON=se.prototype.toGeoJSON;var he=ie,we=pe;function ie(L){var j=new o.pbf;return function(W,X){for(var re in W.layers)X.writeMessage(3,ge,W.layers[re])}(L,j),j.finish()}function ge(L,j){var W;j.writeVarintField(15,L.version||1),j.writeStringField(1,L.name||""),j.writeVarintField(5,L.extent||4096);var X={keys:[],values:[],keycache:{},valuecache:{}};for(W=0;W<L.length;W++)X.feature=L.feature(W),j.writeMessage(2,Ne,X);var re=X.keys;for(W=0;W<re.length;W++)j.writeStringField(3,re[W]);var me=X.values;for(W=0;W<me.length;W++)j.writeMessage(4,Oe,me[W])}function Ne(L,j){var W=L.feature;W.id!==void 0&&j.writeVarintField(1,W.id),j.writeMessage(2,qe,L),j.writeVarintField(3,W.type),j.writeMessage(4,Te,W)}function qe(L,j){var W=L.feature,X=L.keys,re=L.values,me=L.keycache,ye=L.valuecache;for(var H in W.properties){var ne=me[H];ne===void 0&&(X.push(H),me[H]=ne=X.length-1),j.writeVarint(ne);var Ee=W.properties[H],Ge=typeof Ee;Ge!=="string"&&Ge!=="boolean"&&Ge!=="number"&&(Ee=JSON.stringify(Ee));var Ze=Ge+":"+Ee,Ue=ye[Ze];Ue===void 0&&(re.push(Ee),ye[Ze]=Ue=re.length-1),j.writeVarint(Ue)}}function Ce(L,j){return(j<<3)+(7&L)}function ke(L){return L<<1^L>>31}function Te(L,j){for(var W=L.loadGeometry(),X=L.type,re=0,me=0,ye=W.length,H=0;H<ye;H++){var ne=W[H],Ee=1;X===1&&(Ee=ne.length),j.writeVarint(Ce(1,Ee));for(var Ge=X===3?ne.length-1:ne.length,Ze=0;Ze<Ge;Ze++){Ze===1&&X!==1&&j.writeVarint(Ce(2,Ge-1));var Ue=ne[Ze].x-re,Xe=ne[Ze].y-me;j.writeVarint(ke(Ue)),j.writeVarint(ke(Xe)),re+=Ue,me+=Xe}X===3&&j.writeVarint(Ce(7,1))}}function Oe(L,j){var W=typeof L;W==="string"?j.writeStringField(1,L):W==="boolean"?j.writeBooleanField(7,L):W==="number"&&(L%1!=0?j.writeDoubleField(3,L):L<0?j.writeSVarintField(6,L):j.writeVarintField(5,L))}function Je(L,j,W,X){$e(L,W,X),$e(j,2*W,2*X),$e(j,2*W+1,2*X+1)}function $e(L,j,W){var X=L[j];L[j]=L[W],L[W]=X}function et(L,j,W,X){var re=L-W,me=j-X;return re*re+me*me}he.fromVectorTileJs=ie,he.fromGeojsonVt=function(L,j){j=j||{};var W={};for(var X in L)W[X]=new pe(L[X].features,j),W[X].name=X,W[X].version=j.version,W[X].extent=j.extent;return ie({layers:W})},he.GeoJSONWrapper=we;var Wt=function(L){return L[0]},Re=function(L){return L[1]},He=function(L,j,W,X,re){j===void 0&&(j=Wt),W===void 0&&(W=Re),X===void 0&&(X=64),re===void 0&&(re=Float64Array),this.nodeSize=X,this.points=L;for(var me=L.length<65536?Uint16Array:Uint32Array,ye=this.ids=new me(L.length),H=this.coords=new re(2*L.length),ne=0;ne<L.length;ne++)ye[ne]=ne,H[2*ne]=j(L[ne]),H[2*ne+1]=W(L[ne]);(function Ee(Ge,Ze,Ue,Xe,vt,yt){if(!(vt-Xe<=Ue)){var Ve=Xe+vt>>1;(function dt(it,at,or,pt,fr,Gr){for(;fr>pt;){if(fr-pt>600){var ur=fr-pt+1,Tr=or-pt+1,gr=Math.log(ur),bi=.5*Math.exp(2*gr/3),Lr=.5*Math.sqrt(gr*bi*(ur-bi)/ur)*(Tr-ur/2<0?-1:1);dt(it,at,or,Math.max(pt,Math.floor(or-Tr*bi/ur+Lr)),Math.min(fr,Math.floor(or+(ur-Tr)*bi/ur+Lr)),Gr)}var En=at[2*or+Gr],qr=pt,dr=fr;for(Je(it,at,pt,or),at[2*fr+Gr]>En&&Je(it,at,pt,fr);qr<dr;){for(Je(it,at,qr,dr),qr++,dr--;at[2*qr+Gr]<En;)qr++;for(;at[2*dr+Gr]>En;)dr--}at[2*pt+Gr]===En?Je(it,at,pt,dr):Je(it,at,++dr,fr),dr<=or&&(pt=dr+1),or<=dr&&(fr=dr-1)}})(Ge,Ze,Ve,Xe,vt,yt%2),Ee(Ge,Ze,Ue,Xe,Ve-1,yt+1),Ee(Ge,Ze,Ue,Ve+1,vt,yt+1)}})(ye,H,X,0,ye.length-1,0)};He.prototype.range=function(L,j,W,X){return function(re,me,ye,H,ne,Ee,Ge){for(var Ze,Ue,Xe=[0,re.length-1,0],vt=[];Xe.length;){var yt=Xe.pop(),Ve=Xe.pop(),dt=Xe.pop();if(Ve-dt<=Ge)for(var it=dt;it<=Ve;it++)Ue=me[2*it+1],(Ze=me[2*it])>=ye&&Ze<=ne&&Ue>=H&&Ue<=Ee&&vt.push(re[it]);else{var at=Math.floor((dt+Ve)/2);Ue=me[2*at+1],(Ze=me[2*at])>=ye&&Ze<=ne&&Ue>=H&&Ue<=Ee&&vt.push(re[at]);var or=(yt+1)%2;(yt===0?ye<=Ze:H<=Ue)&&(Xe.push(dt),Xe.push(at-1),Xe.push(or)),(yt===0?ne>=Ze:Ee>=Ue)&&(Xe.push(at+1),Xe.push(Ve),Xe.push(or))}}return vt}(this.ids,this.coords,L,j,W,X,this.nodeSize)},He.prototype.within=function(L,j,W){return function(X,re,me,ye,H,ne){for(var Ee=[0,X.length-1,0],Ge=[],Ze=H*H;Ee.length;){var Ue=Ee.pop(),Xe=Ee.pop(),vt=Ee.pop();if(Xe-vt<=ne)for(var yt=vt;yt<=Xe;yt++)et(re[2*yt],re[2*yt+1],me,ye)<=Ze&&Ge.push(X[yt]);else{var Ve=Math.floor((vt+Xe)/2),dt=re[2*Ve],it=re[2*Ve+1];et(dt,it,me,ye)<=Ze&&Ge.push(X[Ve]);var at=(Ue+1)%2;(Ue===0?me-H<=dt:ye-H<=it)&&(Ee.push(vt),Ee.push(Ve-1),Ee.push(at)),(Ue===0?me+H>=dt:ye+H>=it)&&(Ee.push(Ve+1),Ee.push(Xe),Ee.push(at))}}return Ge}(this.ids,this.coords,L,j,W,this.nodeSize)};var Zt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(L){return L}},Pt=function(L){this.options=Lt(Object.create(Zt),L),this.trees=new Array(this.options.maxZoom+1)};function Gt(L,j,W,X,re){return{x:L,y:j,zoom:1/0,id:W,parentId:-1,numPoints:X,properties:re}}function zt(L,j){var W=L.geometry.coordinates,X=W[1];return{x:Yt(W[0]),y:st(X),zoom:1/0,index:j,parentId:-1}}function nr(L){return{type:"Feature",id:L.id,properties:Kt(L),geometry:{type:"Point",coordinates:[(X=L.x,360*(X-.5)),(j=L.y,W=(180-360*j)*Math.PI/180,360*Math.atan(Math.exp(W))/Math.PI-90)]}};var j,W,X}function Kt(L){var j=L.numPoints,W=j>=1e4?Math.round(j/1e3)+"k":j>=1e3?Math.round(j/100)/10+"k":j;return Lt(Lt({},L.properties),{cluster:!0,cluster_id:L.id,point_count:j,point_count_abbreviated:W})}function Yt(L){return L/360+.5}function st(L){var j=Math.sin(L*Math.PI/180),W=.5-.25*Math.log((1+j)/(1-j))/Math.PI;return W<0?0:W>1?1:W}function Lt(L,j){for(var W in j)L[W]=j[W];return L}function er(L){return L.x}function Mr(L){return L.y}function Nr(L,j,W,X,re,me){var ye=re-W,H=me-X;if(ye!==0||H!==0){var ne=((L-W)*ye+(j-X)*H)/(ye*ye+H*H);ne>1?(W=re,X=me):ne>0&&(W+=ye*ne,X+=H*ne)}return(ye=L-W)*ye+(H=j-X)*H}function tr(L,j,W,X){var re={id:L===void 0?null:L,type:j,geometry:W,tags:X,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(me){var ye=me.geometry,H=me.type;if(H==="Point"||H==="MultiPoint"||H==="LineString")Vr(me,ye);else if(H==="Polygon"||H==="MultiLineString")for(var ne=0;ne<ye.length;ne++)Vr(me,ye[ne]);else if(H==="MultiPolygon")for(ne=0;ne<ye.length;ne++)for(var Ee=0;Ee<ye[ne].length;Ee++)Vr(me,ye[ne][Ee])}(re),re}function Vr(L,j){for(var W=0;W<j.length;W+=3)L.minX=Math.min(L.minX,j[W]),L.minY=Math.min(L.minY,j[W+1]),L.maxX=Math.max(L.maxX,j[W]),L.maxY=Math.max(L.maxY,j[W+1])}function zr(L,j,W,X){if(j.geometry){var re=j.geometry.coordinates,me=j.geometry.type,ye=Math.pow(W.tolerance/((1<<W.maxZoom)*W.extent),2),H=[],ne=j.id;if(W.promoteId?ne=j.properties[W.promoteId]:W.generateId&&(ne=X||0),me==="Point")Sr(re,H);else if(me==="MultiPoint")for(var Ee=0;Ee<re.length;Ee++)Sr(re[Ee],H);else if(me==="LineString")on(re,H,ye,!1);else if(me==="MultiLineString"){if(W.lineMetrics){for(Ee=0;Ee<re.length;Ee++)on(re[Ee],H=[],ye,!1),L.push(tr(ne,"LineString",H,j.properties));return}Ar(re,H,ye,!1)}else if(me==="Polygon")Ar(re,H,ye,!0);else{if(me!=="MultiPolygon"){if(me==="GeometryCollection"){for(Ee=0;Ee<j.geometry.geometries.length;Ee++)zr(L,{id:ne,geometry:j.geometry.geometries[Ee],properties:j.properties},W,X);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Ee=0;Ee<re.length;Ee++){var Ge=[];Ar(re[Ee],Ge,ye,!0),H.push(Ge)}}L.push(tr(ne,me,H,j.properties))}}function Sr(L,j){j.push(lr(L[0])),j.push(Xr(L[1])),j.push(0)}function on(L,j,W,X){for(var re,me,ye=0,H=0;H<L.length;H++){var ne=lr(L[H][0]),Ee=Xr(L[H][1]);j.push(ne),j.push(Ee),j.push(0),H>0&&(ye+=X?(re*Ee-ne*me)/2:Math.sqrt(Math.pow(ne-re,2)+Math.pow(Ee-me,2))),re=ne,me=Ee}var Ge=j.length-3;j[2]=1,function Ze(Ue,Xe,vt,yt){for(var Ve,dt=yt,it=vt-Xe>>1,at=vt-Xe,or=Ue[Xe],pt=Ue[Xe+1],fr=Ue[vt],Gr=Ue[vt+1],ur=Xe+3;ur<vt;ur+=3){var Tr=Nr(Ue[ur],Ue[ur+1],or,pt,fr,Gr);if(Tr>dt)Ve=ur,dt=Tr;else if(Tr===dt){var gr=Math.abs(ur-it);gr<at&&(Ve=ur,at=gr)}}dt>yt&&(Ve-Xe>3&&Ze(Ue,Xe,Ve,yt),Ue[Ve+2]=dt,vt-Ve>3&&Ze(Ue,Ve,vt,yt))}(j,0,Ge,W),j[Ge+2]=1,j.size=Math.abs(ye),j.start=0,j.end=j.size}function Ar(L,j,W,X){for(var re=0;re<L.length;re++){var me=[];on(L[re],me,W,X),j.push(me)}}function lr(L){return L/360+.5}function Xr(L){var j=Math.sin(L*Math.PI/180),W=.5-.25*Math.log((1+j)/(1-j))/Math.PI;return W<0?0:W>1?1:W}function Sn(L,j,W,X,re,me,ye,H){if(X/=j,me>=(W/=j)&&ye<X)return L;if(ye<W||me>=X)return null;for(var ne=[],Ee=0;Ee<L.length;Ee++){var Ge=L[Ee],Ze=Ge.geometry,Ue=Ge.type,Xe=re===0?Ge.minX:Ge.minY,vt=re===0?Ge.maxX:Ge.maxY;if(Xe>=W&&vt<X)ne.push(Ge);else if(!(vt<W||Xe>=X)){var yt=[];if(Ue==="Point"||Ue==="MultiPoint")li(Ze,yt,W,X,re);else if(Ue==="LineString")hr(Ze,yt,W,X,re,!1,H.lineMetrics);else if(Ue==="MultiLineString")Wn(Ze,yt,W,X,re,!1);else if(Ue==="Polygon")Wn(Ze,yt,W,X,re,!0);else if(Ue==="MultiPolygon")for(var Ve=0;Ve<Ze.length;Ve++){var dt=[];Wn(Ze[Ve],dt,W,X,re,!0),dt.length&&yt.push(dt)}if(yt.length){if(H.lineMetrics&&Ue==="LineString"){for(Ve=0;Ve<yt.length;Ve++)ne.push(tr(Ge.id,Ue,yt[Ve],Ge.tags));continue}Ue!=="LineString"&&Ue!=="MultiLineString"||(yt.length===1?(Ue="LineString",yt=yt[0]):Ue="MultiLineString"),Ue!=="Point"&&Ue!=="MultiPoint"||(Ue=yt.length===3?"Point":"MultiPoint"),ne.push(tr(Ge.id,Ue,yt,Ge.tags))}}}return ne.length?ne:null}function li(L,j,W,X,re){for(var me=0;me<L.length;me+=3){var ye=L[me+re];ye>=W&&ye<=X&&(j.push(L[me]),j.push(L[me+1]),j.push(L[me+2]))}}function hr(L,j,W,X,re,me,ye){for(var H,ne,Ee=Dt(L),Ge=re===0?Wi:Bt,Ze=L.start,Ue=0;Ue<L.length-3;Ue+=3){var Xe=L[Ue],vt=L[Ue+1],yt=L[Ue+2],Ve=L[Ue+3],dt=L[Ue+4],it=re===0?Xe:vt,at=re===0?Ve:dt,or=!1;ye&&(H=Math.sqrt(Math.pow(Xe-Ve,2)+Math.pow(vt-dt,2))),it<W?at>W&&(ne=Ge(Ee,Xe,vt,Ve,dt,W),ye&&(Ee.start=Ze+H*ne)):it>X?at<X&&(ne=Ge(Ee,Xe,vt,Ve,dt,X),ye&&(Ee.start=Ze+H*ne)):Bn(Ee,Xe,vt,yt),at<W&&it>=W&&(ne=Ge(Ee,Xe,vt,Ve,dt,W),or=!0),at>X&&it<=X&&(ne=Ge(Ee,Xe,vt,Ve,dt,X),or=!0),!me&&or&&(ye&&(Ee.end=Ze+H*ne),j.push(Ee),Ee=Dt(L)),ye&&(Ze+=H)}var pt=L.length-3;Xe=L[pt],vt=L[pt+1],yt=L[pt+2],(it=re===0?Xe:vt)>=W&&it<=X&&Bn(Ee,Xe,vt,yt),pt=Ee.length-3,me&&pt>=3&&(Ee[pt]!==Ee[0]||Ee[pt+1]!==Ee[1])&&Bn(Ee,Ee[0],Ee[1],Ee[2]),Ee.length&&j.push(Ee)}function Dt(L){var j=[];return j.size=L.size,j.start=L.start,j.end=L.end,j}function Wn(L,j,W,X,re,me){for(var ye=0;ye<L.length;ye++)hr(L[ye],j,W,X,re,me,!1)}function Bn(L,j,W,X){L.push(j),L.push(W),L.push(X)}function Wi(L,j,W,X,re,me){var ye=(me-j)/(X-j);return L.push(me),L.push(W+(re-W)*ye),L.push(1),ye}function Bt(L,j,W,X,re,me){var ye=(me-W)/(re-W);return L.push(j+(X-j)*ye),L.push(me),L.push(1),ye}function br(L,j){for(var W=[],X=0;X<L.length;X++){var re,me=L[X],ye=me.type;if(ye==="Point"||ye==="MultiPoint"||ye==="LineString")re=ct(me.geometry,j);else if(ye==="MultiLineString"||ye==="Polygon"){re=[];for(var H=0;H<me.geometry.length;H++)re.push(ct(me.geometry[H],j))}else if(ye==="MultiPolygon")for(re=[],H=0;H<me.geometry.length;H++){for(var ne=[],Ee=0;Ee<me.geometry[H].length;Ee++)ne.push(ct(me.geometry[H][Ee],j));re.push(ne)}W.push(tr(me.id,ye,re,me.tags))}return W}function ct(L,j){var W=[];W.size=L.size,L.start!==void 0&&(W.start=L.start,W.end=L.end);for(var X=0;X<L.length;X+=3)W.push(L[X]+j,L[X+1],L[X+2]);return W}function At(L,j){if(L.transformed)return L;var W,X,re,me=1<<L.z,ye=L.x,H=L.y;for(W=0;W<L.features.length;W++){var ne=L.features[W],Ee=ne.geometry,Ge=ne.type;if(ne.geometry=[],Ge===1)for(X=0;X<Ee.length;X+=2)ne.geometry.push(yr(Ee[X],Ee[X+1],j,me,ye,H));else for(X=0;X<Ee.length;X++){var Ze=[];for(re=0;re<Ee[X].length;re+=2)Ze.push(yr(Ee[X][re],Ee[X][re+1],j,me,ye,H));ne.geometry.push(Ze)}}return L.transformed=!0,L}function yr(L,j,W,X,re,me){return[Math.round(W*(L*X-re)),Math.round(W*(j*X-me))]}function wr(L,j,W,X,re){for(var me=j===re.maxZoom?0:re.tolerance/((1<<j)*re.extent),ye={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:W,y:X,z:j,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},H=0;H<L.length;H++){ye.numFeatures++,rn(ye,L[H],me,re);var ne=L[H].minX,Ee=L[H].minY,Ge=L[H].maxX,Ze=L[H].maxY;ne<ye.minX&&(ye.minX=ne),Ee<ye.minY&&(ye.minY=Ee),Ge>ye.maxX&&(ye.maxX=Ge),Ze>ye.maxY&&(ye.maxY=Ze)}return ye}function rn(L,j,W,X){var re=j.geometry,me=j.type,ye=[];if(me==="Point"||me==="MultiPoint")for(var H=0;H<re.length;H+=3)ye.push(re[H]),ye.push(re[H+1]),L.numPoints++,L.numSimplified++;else if(me==="LineString")Me(ye,re,L,W,!1,!1);else if(me==="MultiLineString"||me==="Polygon")for(H=0;H<re.length;H++)Me(ye,re[H],L,W,me==="Polygon",H===0);else if(me==="MultiPolygon")for(var ne=0;ne<re.length;ne++){var Ee=re[ne];for(H=0;H<Ee.length;H++)Me(ye,Ee[H],L,W,!0,H===0)}if(ye.length){var Ge=j.tags||null;if(me==="LineString"&&X.lineMetrics){for(var Ze in Ge={},j.tags)Ge[Ze]=j.tags[Ze];Ge.mapbox_clip_start=re.start/re.size,Ge.mapbox_clip_end=re.end/re.size}var Ue={geometry:ye,type:me==="Polygon"||me==="MultiPolygon"?3:me==="LineString"||me==="MultiLineString"?2:1,tags:Ge};j.id!==null&&(Ue.id=j.id),L.features.push(Ue)}}function Me(L,j,W,X,re,me){var ye=X*X;if(X>0&&j.size<(re?ye:X))W.numPoints+=j.length/3;else{for(var H=[],ne=0;ne<j.length;ne+=3)(X===0||j[ne+2]>ye)&&(W.numSimplified++,H.push(j[ne]),H.push(j[ne+1])),W.numPoints++;re&&function(Ee,Ge){for(var Ze=0,Ue=0,Xe=Ee.length,vt=Xe-2;Ue<Xe;vt=Ue,Ue+=2)Ze+=(Ee[Ue]-Ee[vt])*(Ee[Ue+1]+Ee[vt+1]);if(Ze>0===Ge)for(Ue=0,Xe=Ee.length;Ue<Xe/2;Ue+=2){var yt=Ee[Ue],Ve=Ee[Ue+1];Ee[Ue]=Ee[Xe-2-Ue],Ee[Ue+1]=Ee[Xe-1-Ue],Ee[Xe-2-Ue]=yt,Ee[Xe-1-Ue]=Ve}}(H,me),L.push(H)}}function rt(L,j){var W=(j=this.options=function(re,me){for(var ye in me)re[ye]=me[ye];return re}(Object.create(this.options),j)).debug;if(W&&console.time("preprocess data"),j.maxZoom<0||j.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(j.promoteId&&j.generateId)throw new Error("promoteId and generateId cannot be used together.");var X=function(re,me){var ye=[];if(re.type==="FeatureCollection")for(var H=0;H<re.features.length;H++)zr(ye,re.features[H],me,H);else zr(ye,re.type==="Feature"?re:{geometry:re},me);return ye}(L,j);this.tiles={},this.tileCoords=[],W&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",j.indexMaxZoom,j.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(X=function(re,me){var ye=me.buffer/me.extent,H=re,ne=Sn(re,1,-1-ye,ye,0,-1,2,me),Ee=Sn(re,1,1-ye,2+ye,0,-1,2,me);return(ne||Ee)&&(H=Sn(re,1,-ye,1+ye,0,-1,2,me)||[],ne&&(H=br(ne,1).concat(H)),Ee&&(H=H.concat(br(Ee,-1)))),H}(X,j)).length&&this.splitTile(X,0,0,0),W&&(X.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function bt(L,j,W){return 32*((1<<L)*W+j)+L}function ar(L,j){var W=L.tileID.canonical;if(!this._geoJSONIndex)return j(null,null);var X=this._geoJSONIndex.getTile(W.z,W.x,W.y);if(!X)return j(null,null);var re=new Q(X.features),me=he(re);me.byteOffset===0&&me.byteLength===me.buffer.byteLength||(me=new Uint8Array(me)),j(null,{vectorTile:re,rawData:me.buffer})}Pt.prototype.load=function(L){var j=this.options,W=j.log,X=j.minZoom,re=j.maxZoom,me=j.nodeSize;W&&console.time("total time");var ye="prepare "+L.length+" points";W&&console.time(ye),this.points=L;for(var H=[],ne=0;ne<L.length;ne++)L[ne].geometry&&H.push(zt(L[ne],ne));this.trees[re+1]=new He(H,er,Mr,me,Float32Array),W&&console.timeEnd(ye);for(var Ee=re;Ee>=X;Ee--){var Ge=+Date.now();H=this._cluster(H,Ee),this.trees[Ee]=new He(H,er,Mr,me,Float32Array),W&&console.log("z%d: %d clusters in %dms",Ee,H.length,+Date.now()-Ge)}return W&&console.timeEnd("total time"),this},Pt.prototype.getClusters=function(L,j){var W=((L[0]+180)%360+360)%360-180,X=Math.max(-90,Math.min(90,L[1])),re=L[2]===180?180:((L[2]+180)%360+360)%360-180,me=Math.max(-90,Math.min(90,L[3]));if(L[2]-L[0]>=360)W=-180,re=180;else if(W>re){var ye=this.getClusters([W,X,180,me],j),H=this.getClusters([-180,X,re,me],j);return ye.concat(H)}for(var ne=this.trees[this._limitZoom(j)],Ee=[],Ge=0,Ze=ne.range(Yt(W),st(me),Yt(re),st(X));Ge<Ze.length;Ge+=1){var Ue=ne.points[Ze[Ge]];Ee.push(Ue.numPoints?nr(Ue):this.points[Ue.index])}return Ee},Pt.prototype.getChildren=function(L){var j=this._getOriginId(L),W=this._getOriginZoom(L),X="No cluster with the specified id.",re=this.trees[W];if(!re)throw new Error(X);var me=re.points[j];if(!me)throw new Error(X);for(var ye=this.options.radius/(this.options.extent*Math.pow(2,W-1)),H=[],ne=0,Ee=re.within(me.x,me.y,ye);ne<Ee.length;ne+=1){var Ge=re.points[Ee[ne]];Ge.parentId===L&&H.push(Ge.numPoints?nr(Ge):this.points[Ge.index])}if(H.length===0)throw new Error(X);return H},Pt.prototype.getLeaves=function(L,j,W){var X=[];return this._appendLeaves(X,L,j=j||10,W=W||0,0),X},Pt.prototype.getTile=function(L,j,W){var X=this.trees[this._limitZoom(L)],re=Math.pow(2,L),me=this.options,ye=me.radius/me.extent,H=(W-ye)/re,ne=(W+1+ye)/re,Ee={features:[]};return this._addTileFeatures(X.range((j-ye)/re,H,(j+1+ye)/re,ne),X.points,j,W,re,Ee),j===0&&this._addTileFeatures(X.range(1-ye/re,H,1,ne),X.points,re,W,re,Ee),j===re-1&&this._addTileFeatures(X.range(0,H,ye/re,ne),X.points,-1,W,re,Ee),Ee.features.length?Ee:null},Pt.prototype.getClusterExpansionZoom=function(L){for(var j=this._getOriginZoom(L)-1;j<=this.options.maxZoom;){var W=this.getChildren(L);if(j++,W.length!==1)break;L=W[0].properties.cluster_id}return j},Pt.prototype._appendLeaves=function(L,j,W,X,re){for(var me=0,ye=this.getChildren(j);me<ye.length;me+=1){var H=ye[me],ne=H.properties;if(ne&&ne.cluster?re+ne.point_count<=X?re+=ne.point_count:re=this._appendLeaves(L,ne.cluster_id,W,X,re):re<X?re++:L.push(H),L.length===W)break}return re},Pt.prototype._addTileFeatures=function(L,j,W,X,re,me){for(var ye=0,H=L;ye<H.length;ye+=1){var ne=j[H[ye]],Ee=ne.numPoints,Ge={type:1,geometry:[[Math.round(this.options.extent*(ne.x*re-W)),Math.round(this.options.extent*(ne.y*re-X))]],tags:Ee?Kt(ne):this.points[ne.index].properties},Ze=void 0;Ee?Ze=ne.id:this.options.generateId?Ze=ne.index:this.points[ne.index].id&&(Ze=this.points[ne.index].id),Ze!==void 0&&(Ge.id=Ze),me.features.push(Ge)}},Pt.prototype._limitZoom=function(L){return Math.max(this.options.minZoom,Math.min(+L,this.options.maxZoom+1))},Pt.prototype._cluster=function(L,j){for(var W=[],X=this.options,re=X.reduce,me=X.minPoints,ye=X.radius/(X.extent*Math.pow(2,j)),H=0;H<L.length;H++){var ne=L[H];if(!(ne.zoom<=j)){ne.zoom=j;for(var Ee=this.trees[j+1],Ge=Ee.within(ne.x,ne.y,ye),Ze=ne.numPoints||1,Ue=Ze,Xe=0,vt=Ge;Xe<vt.length;Xe+=1){var yt=Ee.points[vt[Xe]];yt.zoom>j&&(Ue+=yt.numPoints||1)}if(Ue>=me){for(var Ve=ne.x*Ze,dt=ne.y*Ze,it=re&&Ze>1?this._map(ne,!0):null,at=(H<<5)+(j+1)+this.points.length,or=0,pt=Ge;or<pt.length;or+=1){var fr=Ee.points[pt[or]];if(!(fr.zoom<=j)){fr.zoom=j;var Gr=fr.numPoints||1;Ve+=fr.x*Gr,dt+=fr.y*Gr,fr.parentId=at,re&&(it||(it=this._map(ne,!0)),re(it,this._map(fr)))}}ne.parentId=at,W.push(Gt(Ve/Ue,dt/Ue,at,Ue,it))}else if(W.push(ne),Ue>1)for(var ur=0,Tr=Ge;ur<Tr.length;ur+=1){var gr=Ee.points[Tr[ur]];gr.zoom<=j||(gr.zoom=j,W.push(gr))}}}return W},Pt.prototype._getOriginId=function(L){return L-this.points.length>>5},Pt.prototype._getOriginZoom=function(L){return(L-this.points.length)%32},Pt.prototype._map=function(L,j){if(L.numPoints)return j?Lt({},L.properties):L.properties;var W=this.points[L.index].properties,X=this.options.map(W);return j&&X===W?Lt({},X):X},rt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},rt.prototype.splitTile=function(L,j,W,X,re,me,ye){for(var H=[L,j,W,X],ne=this.options,Ee=ne.debug;H.length;){X=H.pop(),W=H.pop(),j=H.pop(),L=H.pop();var Ge=1<<j,Ze=bt(j,W,X),Ue=this.tiles[Ze];if(!Ue&&(Ee>1&&console.time("creation"),Ue=this.tiles[Ze]=wr(L,j,W,X,ne),this.tileCoords.push({z:j,x:W,y:X}),Ee)){Ee>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",j,W,X,Ue.numFeatures,Ue.numPoints,Ue.numSimplified),console.timeEnd("creation"));var Xe="z"+j;this.stats[Xe]=(this.stats[Xe]||0)+1,this.total++}if(Ue.source=L,re){if(j===ne.maxZoom||j===re)continue;var vt=1<<re-j;if(W!==Math.floor(me/vt)||X!==Math.floor(ye/vt))continue}else if(j===ne.indexMaxZoom||Ue.numPoints<=ne.indexMaxPoints)continue;if(Ue.source=null,L.length!==0){Ee>1&&console.time("clipping");var yt,Ve,dt,it,at,or,pt=.5*ne.buffer/ne.extent,fr=.5-pt,Gr=.5+pt,ur=1+pt;yt=Ve=dt=it=null,at=Sn(L,Ge,W-pt,W+Gr,0,Ue.minX,Ue.maxX,ne),or=Sn(L,Ge,W+fr,W+ur,0,Ue.minX,Ue.maxX,ne),L=null,at&&(yt=Sn(at,Ge,X-pt,X+Gr,1,Ue.minY,Ue.maxY,ne),Ve=Sn(at,Ge,X+fr,X+ur,1,Ue.minY,Ue.maxY,ne),at=null),or&&(dt=Sn(or,Ge,X-pt,X+Gr,1,Ue.minY,Ue.maxY,ne),it=Sn(or,Ge,X+fr,X+ur,1,Ue.minY,Ue.maxY,ne),or=null),Ee>1&&console.timeEnd("clipping"),H.push(yt||[],j+1,2*W,2*X),H.push(Ve||[],j+1,2*W,2*X+1),H.push(dt||[],j+1,2*W+1,2*X),H.push(it||[],j+1,2*W+1,2*X+1)}}},rt.prototype.getTile=function(L,j,W){var X=this.options,re=X.extent,me=X.debug;if(L<0||L>24)return null;var ye=1<<L,H=bt(L,j=(j%ye+ye)%ye,W);if(this.tiles[H])return At(this.tiles[H],re);me>1&&console.log("drilling down to z%d-%d-%d",L,j,W);for(var ne,Ee=L,Ge=j,Ze=W;!ne&&Ee>0;)Ee--,Ge=Math.floor(Ge/2),Ze=Math.floor(Ze/2),ne=this.tiles[bt(Ee,Ge,Ze)];return ne&&ne.source?(me>1&&console.log("found parent tile z%d-%d-%d",Ee,Ge,Ze),me>1&&console.time("drilling down"),this.splitTile(ne.source,Ee,Ge,Ze,L,j,W),me>1&&console.timeEnd("drilling down"),this.tiles[H]?At(this.tiles[H],re):null):null};var Rr=function(L){function j(W,X,re,me){L.call(this,W,X,re,ar),me&&(this.loadGeoJSON=me)}return L&&(j.__proto__=L),(j.prototype=Object.create(L&&L.prototype)).constructor=j,j.prototype.loadData=function(W,X){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=X,this._pendingLoadDataParams=W,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},j.prototype._loadData=function(){var W=this;if(this._pendingCallback&&this._pendingLoadDataParams){var X=this._pendingCallback,re=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var me=!!(re&&re.request&&re.request.collectResourceTiming)&&new o.RequestPerformance(re.request);this.loadGeoJSON(re,function(ye,H){if(ye||!H)return X(ye);if(typeof H!="object")return X(new Error("Input data given to '"+re.source+"' is not a valid GeoJSON object."));(function Ue(Xe,vt){var yt,Ve=Xe&&Xe.type;if(Ve==="FeatureCollection")for(yt=0;yt<Xe.features.length;yt++)Ue(Xe.features[yt],vt);else if(Ve==="GeometryCollection")for(yt=0;yt<Xe.geometries.length;yt++)Ue(Xe.geometries[yt],vt);else if(Ve==="Feature")Ue(Xe.geometry,vt);else if(Ve==="Polygon")U(Xe.coordinates,vt);else if(Ve==="MultiPolygon")for(yt=0;yt<Xe.coordinates.length;yt++)U(Xe.coordinates[yt],vt);return Xe})(H,!0);try{if(re.filter){var ne=o.createExpression(re.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ne.result==="error")throw new Error(ne.value.map(function(Ue){return Ue.key+": "+Ue.message}).join(", "));var Ee=H.features.filter(function(Ue){return ne.value.evaluate({zoom:0},Ue)});H={type:"FeatureCollection",features:Ee}}W._geoJSONIndex=re.cluster?new Pt(function(Ue){var Xe=Ue.superclusterOptions,vt=Ue.clusterProperties;if(!vt||!Xe)return Xe;for(var yt={},Ve={},dt={accumulated:null,zoom:0},it={properties:null},at=Object.keys(vt),or=0,pt=at;or<pt.length;or+=1){var fr=pt[or],Gr=vt[fr],ur=Gr[0],Tr=o.createExpression(Gr[1]),gr=o.createExpression(typeof ur=="string"?[ur,["accumulated"],["get",fr]]:ur);yt[fr]=Tr.value,Ve[fr]=gr.value}return Xe.map=function(bi){it.properties=bi;for(var Lr={},En=0,qr=at;En<qr.length;En+=1){var dr=qr[En];Lr[dr]=yt[dr].evaluate(dt,it)}return Lr},Xe.reduce=function(bi,Lr){it.properties=Lr;for(var En=0,qr=at;En<qr.length;En+=1){var dr=qr[En];dt.accumulated=bi[dr],bi[dr]=Ve[dr].evaluate(dt,it)}},Xe}(re)).load(H.features):function(Ue,Xe){return new rt(Ue,Xe)}(H,re.geojsonVtOptions)}catch(Ue){return X(Ue)}W.loaded={};var Ge={};if(me){var Ze=me.finish();Ze&&(Ge.resourceTiming={},Ge.resourceTiming[re.source]=JSON.parse(JSON.stringify(Ze)))}X(null,Ge)})}},j.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},j.prototype.reloadTile=function(W,X){var re=this.loaded;return re&&re[W.uid]?L.prototype.reloadTile.call(this,W,X):this.loadTile(W,X)},j.prototype.loadGeoJSON=function(W,X){if(W.request)o.getJSON(W.request,X);else{if(typeof W.data!="string")return X(new Error("Input data given to '"+W.source+"' is not a valid GeoJSON object."));try{return X(null,JSON.parse(W.data))}catch{return X(new Error("Input data given to '"+W.source+"' is not a valid GeoJSON object."))}}},j.prototype.removeSource=function(W,X){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),X()},j.prototype.getClusterExpansionZoom=function(W,X){try{X(null,this._geoJSONIndex.getClusterExpansionZoom(W.clusterId))}catch(re){X(re)}},j.prototype.getClusterChildren=function(W,X){try{X(null,this._geoJSONIndex.getChildren(W.clusterId))}catch(re){X(re)}},j.prototype.getClusterLeaves=function(W,X){try{X(null,this._geoJSONIndex.getLeaves(W.clusterId,W.limit,W.offset))}catch(re){X(re)}},j}(N),Ht=function(L){var j=this;this.self=L,this.actor=new o.Actor(L,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:N,geojson:Rr},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(W,X){if(j.workerSourceTypes[W])throw new Error('Worker source with name "'+W+'" already registered.');j.workerSourceTypes[W]=X},this.self.registerRTLTextPlugin=function(W){if(o.plugin.isParsed())throw new Error("RTL text plugin already registered.");o.plugin.applyArabicShaping=W.applyArabicShaping,o.plugin.processBidirectionalText=W.processBidirectionalText,o.plugin.processStyledBidirectionalText=W.processStyledBidirectionalText}};return Ht.prototype.setReferrer=function(L,j){this.referrer=j},Ht.prototype.setImages=function(L,j,W){for(var X in this.availableImages[L]=j,this.workerSources[L]){var re=this.workerSources[L][X];for(var me in re)re[me].availableImages=j}W()},Ht.prototype.setLayers=function(L,j,W){this.getLayerIndex(L).replace(j),W()},Ht.prototype.updateLayers=function(L,j,W){this.getLayerIndex(L).update(j.layers,j.removedIds),W()},Ht.prototype.loadTile=function(L,j,W){this.getWorkerSource(L,j.type,j.source).loadTile(j,W)},Ht.prototype.loadDEMTile=function(L,j,W){this.getDEMWorkerSource(L,j.source).loadTile(j,W)},Ht.prototype.reloadTile=function(L,j,W){this.getWorkerSource(L,j.type,j.source).reloadTile(j,W)},Ht.prototype.abortTile=function(L,j,W){this.getWorkerSource(L,j.type,j.source).abortTile(j,W)},Ht.prototype.removeTile=function(L,j,W){this.getWorkerSource(L,j.type,j.source).removeTile(j,W)},Ht.prototype.removeDEMTile=function(L,j){this.getDEMWorkerSource(L,j.source).removeTile(j)},Ht.prototype.removeSource=function(L,j,W){if(this.workerSources[L]&&this.workerSources[L][j.type]&&this.workerSources[L][j.type][j.source]){var X=this.workerSources[L][j.type][j.source];delete this.workerSources[L][j.type][j.source],X.removeSource!==void 0?X.removeSource(j,W):W()}},Ht.prototype.loadWorkerSource=function(L,j,W){try{this.self.importScripts(j.url),W()}catch(X){W(X.toString())}},Ht.prototype.syncRTLPluginState=function(L,j,W){try{o.plugin.setState(j);var X=o.plugin.getPluginURL();if(o.plugin.isLoaded()&&!o.plugin.isParsed()&&X!=null){this.self.importScripts(X);var re=o.plugin.isParsed();W(re?void 0:new Error("RTL Text Plugin failed to import scripts from "+X),re)}}catch(me){W(me.toString())}},Ht.prototype.getAvailableImages=function(L){var j=this.availableImages[L];return j||(j=[]),j},Ht.prototype.getLayerIndex=function(L){var j=this.layerIndexes[L];return j||(j=this.layerIndexes[L]=new E),j},Ht.prototype.getWorkerSource=function(L,j,W){var X=this;return this.workerSources[L]||(this.workerSources[L]={}),this.workerSources[L][j]||(this.workerSources[L][j]={}),this.workerSources[L][j][W]||(this.workerSources[L][j][W]=new this.workerSourceTypes[j]({send:function(re,me,ye){X.actor.send(re,me,ye,L)}},this.getLayerIndex(L),this.getAvailableImages(L))),this.workerSources[L][j][W]},Ht.prototype.getDEMWorkerSource=function(L,j){return this.demWorkerSources[L]||(this.demWorkerSources[L]={}),this.demWorkerSources[L][j]||(this.demWorkerSources[L][j]=new J),this.demWorkerSources[L][j]},Ht.prototype.enforceCacheSizeLimit=function(L,j){o.enforceCacheSizeLimit(j)},typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Ht(self)),Ht}),f(["./shared"],function(o){var v=o.createCommonjsModule(function(l){function p(g){return!c(g)}function c(g){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var w,C,M=new Blob([""],{type:"text/javascript"}),B=URL.createObjectURL(M);try{C=new Worker(B),w=!0}catch{w=!1}return C&&C.terminate(),URL.revokeObjectURL(B),w}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var w=document.createElement("canvas");w.width=w.height=1;var C=w.getContext("2d");if(!C)return!1;var M=C.getImageData(0,0,1,1);return M&&M.width===w.width}()?(d[b=g&&g.failIfMajorPerformanceCaveat]===void 0&&(d[b]=function(w){var C=function(B){var K=document.createElement("canvas"),Z=Object.create(p.webGLContextAttributes);return Z.failIfMajorPerformanceCaveat=B,K.probablySupportsContext?K.probablySupportsContext("webgl",Z)||K.probablySupportsContext("experimental-webgl",Z):K.supportsContext?K.supportsContext("webgl",Z)||K.supportsContext("experimental-webgl",Z):K.getContext("webgl",Z)||K.getContext("experimental-webgl",Z)}(w);if(!C)return!1;var M=C.createShader(C.VERTEX_SHADER);return!(!M||C.isContextLost())&&(C.shaderSource(M,"void main() {}"),C.compileShader(M),C.getShaderParameter(M,C.COMPILE_STATUS)===!0)}(b)),d[b]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var b}l.exports?l.exports=p:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=p,window.mapboxgl.notSupportedReason=c);var d={};p.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),x={create:function(l,p,c){var d=o.window.document.createElement(l);return p!==void 0&&(d.className=p),c&&c.appendChild(d),d},createNS:function(l,p){return o.window.document.createElementNS(l,p)}},E=o.window.document&&o.window.document.documentElement.style;function T(l){if(!E)return l[0];for(var p=0;p<l.length;p++)if(l[p]in E)return l[p];return l[0]}var I,P=T(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);x.disableDrag=function(){E&&P&&(I=E[P],E[P]="none")},x.enableDrag=function(){E&&P&&(E[P]=I)};var V=T(["transform","WebkitTransform"]);x.setTransform=function(l,p){l.style[V]=p};var N=!1;try{var q=Object.defineProperty({},"passive",{get:function(){N=!0}});o.window.addEventListener("test",q,q),o.window.removeEventListener("test",q,q)}catch{N=!1}x.addEventListener=function(l,p,c,d){d===void 0&&(d={}),l.addEventListener(p,c,"passive"in d&&N?d:d.capture)},x.removeEventListener=function(l,p,c,d){d===void 0&&(d={}),l.removeEventListener(p,c,"passive"in d&&N?d:d.capture)};var J=function(l){l.preventDefault(),l.stopPropagation(),o.window.removeEventListener("click",J,!0)};function U(l){var p=l.userImage;return!!(p&&p.render&&p.render())&&(l.data.replace(new Uint8Array(p.data.buffer)),!0)}x.suppressClick=function(){o.window.addEventListener("click",J,!0),o.window.setTimeout(function(){o.window.removeEventListener("click",J,!0)},0)},x.mousePos=function(l,p){var c=l.getBoundingClientRect();return new o.Point(p.clientX-c.left-l.clientLeft,p.clientY-c.top-l.clientTop)},x.touchPos=function(l,p){for(var c=l.getBoundingClientRect(),d=[],g=0;g<p.length;g++)d.push(new o.Point(p[g].clientX-c.left-l.clientLeft,p[g].clientY-c.top-l.clientTop));return d},x.mouseButton=function(l){return o.window.InstallTrigger!==void 0&&l.button===2&&l.ctrlKey&&o.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:l.button},x.remove=function(l){l.parentNode&&l.parentNode.removeChild(l)};var F=function(l){function p(){l.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.RGBAImage({width:1,height:1}),this.dirty=!0}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.isLoaded=function(){return this.loaded},p.prototype.setLoaded=function(c){if(this.loaded!==c&&(this.loaded=c,c)){for(var d=0,g=this.requestors;d<g.length;d+=1){var b=g[d];this._notify(b.ids,b.callback)}this.requestors=[]}},p.prototype.getImage=function(c){return this.images[c]},p.prototype.addImage=function(c,d){this._validate(c,d)&&(this.images[c]=d)},p.prototype._validate=function(c,d){var g=!0;return this._validateStretch(d.stretchX,d.data&&d.data.width)||(this.fire(new o.ErrorEvent(new Error('Image "'+c+'" has invalid "stretchX" value'))),g=!1),this._validateStretch(d.stretchY,d.data&&d.data.height)||(this.fire(new o.ErrorEvent(new Error('Image "'+c+'" has invalid "stretchY" value'))),g=!1),this._validateContent(d.content,d)||(this.fire(new o.ErrorEvent(new Error('Image "'+c+'" has invalid "content" value'))),g=!1),g},p.prototype._validateStretch=function(c,d){if(!c)return!0;for(var g=0,b=0,w=c;b<w.length;b+=1){var C=w[b];if(C[0]<g||C[1]<C[0]||d<C[1])return!1;g=C[1]}return!0},p.prototype._validateContent=function(c,d){return!(c&&(c.length!==4||c[0]<0||d.data.width<c[0]||c[1]<0||d.data.height<c[1]||c[2]<0||d.data.width<c[2]||c[3]<0||d.data.height<c[3]||c[2]<c[0]||c[3]<c[1]))},p.prototype.updateImage=function(c,d){d.version=this.images[c].version+1,this.images[c]=d,this.updatedImages[c]=!0},p.prototype.removeImage=function(c){var d=this.images[c];delete this.images[c],delete this.patterns[c],d.userImage&&d.userImage.onRemove&&d.userImage.onRemove()},p.prototype.listImages=function(){return Object.keys(this.images)},p.prototype.getImages=function(c,d){var g=!0;if(!this.isLoaded())for(var b=0,w=c;b<w.length;b+=1)this.images[w[b]]||(g=!1);this.isLoaded()||g?this._notify(c,d):this.requestors.push({ids:c,callback:d})},p.prototype._notify=function(c,d){for(var g={},b=0,w=c;b<w.length;b+=1){var C=w[b];this.images[C]||this.fire(new o.Event("styleimagemissing",{id:C}));var M=this.images[C];M?g[C]={data:M.data.clone(),pixelRatio:M.pixelRatio,sdf:M.sdf,version:M.version,stretchX:M.stretchX,stretchY:M.stretchY,content:M.content,hasRenderCallback:!!(M.userImage&&M.userImage.render)}:o.warnOnce('Image "'+C+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}d(null,g)},p.prototype.getPixelSize=function(){var c=this.atlasImage;return{width:c.width,height:c.height}},p.prototype.getPattern=function(c){var d=this.patterns[c],g=this.getImage(c);if(!g)return null;if(d&&d.position.version===g.version)return d.position;if(d)d.position.version=g.version;else{var b={w:g.data.width+2,h:g.data.height+2,x:0,y:0},w=new o.ImagePosition(b,g);this.patterns[c]={bin:b,position:w}}return this._updatePatternAtlas(),this.patterns[c].position},p.prototype.bind=function(c){var d=c.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new o.Texture(c,this.atlasImage,d.RGBA),this.atlasTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE)},p.prototype._updatePatternAtlas=function(){var c=[];for(var d in this.patterns)c.push(this.patterns[d].bin);var g=o.potpack(c),b=g.w,w=g.h,C=this.atlasImage;for(var M in C.resize({width:b||1,height:w||1}),this.patterns){var B=this.patterns[M].bin,K=B.x+1,Z=B.y+1,Y=this.images[M].data,ce=Y.width,ue=Y.height;o.RGBAImage.copy(Y,C,{x:0,y:0},{x:K,y:Z},{width:ce,height:ue}),o.RGBAImage.copy(Y,C,{x:0,y:ue-1},{x:K,y:Z-1},{width:ce,height:1}),o.RGBAImage.copy(Y,C,{x:0,y:0},{x:K,y:Z+ue},{width:ce,height:1}),o.RGBAImage.copy(Y,C,{x:ce-1,y:0},{x:K-1,y:Z},{width:1,height:ue}),o.RGBAImage.copy(Y,C,{x:0,y:0},{x:K+ce,y:Z},{width:1,height:ue})}this.dirty=!0},p.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},p.prototype.dispatchRenderCallbacks=function(c){for(var d=0,g=c;d<g.length;d+=1){var b=g[d];if(!this.callbackDispatchedThisFrame[b]){this.callbackDispatchedThisFrame[b]=!0;var w=this.images[b];U(w)&&this.updateImage(b,w)}}},p}(o.Evented),R=se,O=se,Q=1e20;function se(l,p,c,d,g,b){this.fontSize=l||24,this.buffer=p===void 0?3:p,this.cutoff=d||.25,this.fontFamily=g||"sans-serif",this.fontWeight=b||"normal",this.radius=c||8;var w=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=w,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(w*w),this.gridInner=new Float64Array(w*w),this.f=new Float64Array(w),this.d=new Float64Array(w),this.z=new Float64Array(w+1),this.v=new Int16Array(w),this.middle=Math.round(w/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function pe(l,p,c,d,g,b,w){for(var C=0;C<p;C++){for(var M=0;M<c;M++)d[M]=l[M*p+C];for(_e(d,g,b,w,c),M=0;M<c;M++)l[M*p+C]=g[M]}for(M=0;M<c;M++){for(C=0;C<p;C++)d[C]=l[M*p+C];for(_e(d,g,b,w,p),C=0;C<p;C++)l[M*p+C]=Math.sqrt(g[C])}}function _e(l,p,c,d,g){c[0]=0,d[0]=-Q,d[1]=+Q;for(var b=1,w=0;b<g;b++){for(var C=(l[b]+b*b-(l[c[w]]+c[w]*c[w]))/(2*b-2*c[w]);C<=d[w];)w--,C=(l[b]+b*b-(l[c[w]]+c[w]*c[w]))/(2*b-2*c[w]);c[++w]=b,d[w]=C,d[w+1]=+Q}for(b=0,w=0;b<g;b++){for(;d[w+1]<b;)w++;p[b]=(b-c[w])*(b-c[w])+l[c[w]]}}se.prototype.draw=function(l){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(l,this.buffer,this.middle);for(var p=this.ctx.getImageData(0,0,this.size,this.size),c=new Uint8ClampedArray(this.size*this.size),d=0;d<this.size*this.size;d++){var g=p.data[4*d+3]/255;this.gridOuter[d]=g===1?0:g===0?Q:Math.pow(Math.max(0,.5-g),2),this.gridInner[d]=g===1?Q:g===0?0:Math.pow(Math.max(0,g-.5),2)}for(pe(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),pe(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),d=0;d<this.size*this.size;d++)c[d]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[d]-this.gridInner[d])/this.radius+this.cutoff))));return c},R.default=O;var ze=function(l,p){this.requestManager=l,this.localIdeographFontFamily=p,this.entries={}};ze.prototype.setURL=function(l){this.url=l},ze.prototype.getGlyphs=function(l,p){var c=this,d=[];for(var g in l)for(var b=0,w=l[g];b<w.length;b+=1)d.push({stack:g,id:w[b]});o.asyncAll(d,function(C,M){var B=C.stack,K=C.id,Z=c.entries[B];Z||(Z=c.entries[B]={glyphs:{},requests:{},ranges:{}});var Y=Z.glyphs[K];if(Y===void 0){if(Y=c._tinySDF(Z,B,K))return Z.glyphs[K]=Y,void M(null,{stack:B,id:K,glyph:Y});var ce=Math.floor(K/256);if(256*ce>65535)M(new Error("glyphs > 65535 not supported"));else if(Z.ranges[ce])M(null,{stack:B,id:K,glyph:Y});else{var ue=Z.requests[ce];ue||(ue=Z.requests[ce]=[],ze.loadGlyphRange(B,ce,c.url,c.requestManager,function(xe,oe){if(oe){for(var ve in oe)c._doesCharSupportLocalGlyph(+ve)||(Z.glyphs[+ve]=oe[+ve]);Z.ranges[ce]=!0}for(var Se=0,Pe=ue;Se<Pe.length;Se+=1)(0,Pe[Se])(xe,oe);delete Z.requests[ce]})),ue.push(function(xe,oe){xe?M(xe):oe&&M(null,{stack:B,id:K,glyph:oe[K]||null})})}}else M(null,{stack:B,id:K,glyph:Y})},function(C,M){if(C)p(C);else if(M){for(var B={},K=0,Z=M;K<Z.length;K+=1){var Y=Z[K],ce=Y.stack,ue=Y.id,xe=Y.glyph;(B[ce]||(B[ce]={}))[ue]=xe&&{id:xe.id,bitmap:xe.bitmap.clone(),metrics:xe.metrics}}p(null,B)}})},ze.prototype._doesCharSupportLocalGlyph=function(l){return!!this.localIdeographFontFamily&&(o.isChar["CJK Unified Ideographs"](l)||o.isChar["Hangul Syllables"](l)||o.isChar.Hiragana(l)||o.isChar.Katakana(l))},ze.prototype._tinySDF=function(l,p,c){var d=this.localIdeographFontFamily;if(d&&this._doesCharSupportLocalGlyph(c)){var g=l.tinySDF;if(!g){var b="400";/bold/i.test(p)?b="900":/medium/i.test(p)?b="500":/light/i.test(p)&&(b="200"),g=l.tinySDF=new ze.TinySDF(24,3,8,.25,d,b)}return{id:c,bitmap:new o.AlphaImage({width:30,height:30},g.draw(String.fromCharCode(c))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},ze.loadGlyphRange=function(l,p,c,d,g){var b=256*p,w=b+255,C=d.transformRequest(d.normalizeGlyphsURL(c).replace("{fontstack}",l).replace("{range}",b+"-"+w),o.ResourceType.Glyphs);o.getArrayBuffer(C,function(M,B){if(M)g(M);else if(B){for(var K={},Z=0,Y=o.parseGlyphPBF(B);Z<Y.length;Z+=1){var ce=Y[Z];K[ce.id]=ce}g(null,K)}})},ze.TinySDF=R;var he=function(){this.specification=o.styleSpec.light.position};he.prototype.possiblyEvaluate=function(l,p){return o.sphericalToCartesian(l.expression.evaluate(p))},he.prototype.interpolate=function(l,p,c){return{x:o.number(l.x,p.x,c),y:o.number(l.y,p.y,c),z:o.number(l.z,p.z,c)}};var we=new o.Properties({anchor:new o.DataConstantProperty(o.styleSpec.light.anchor),position:new he,color:new o.DataConstantProperty(o.styleSpec.light.color),intensity:new o.DataConstantProperty(o.styleSpec.light.intensity)}),ie=function(l){function p(c){l.call(this),this._transitionable=new o.Transitionable(we),this.setLight(c),this._transitioning=this._transitionable.untransitioned()}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getLight=function(){return this._transitionable.serialize()},p.prototype.setLight=function(c,d){if(d===void 0&&(d={}),!this._validate(o.validateLight,c,d))for(var g in c){var b=c[g];o.endsWith(g,"-transition")?this._transitionable.setTransition(g.slice(0,-11),b):this._transitionable.setValue(g,b)}},p.prototype.updateTransitions=function(c){this._transitioning=this._transitionable.transitioned(c,this._transitioning)},p.prototype.hasTransition=function(){return this._transitioning.hasTransition()},p.prototype.recalculate=function(c){this.properties=this._transitioning.possiblyEvaluate(c)},p.prototype._validate=function(c,d,g){return(!g||g.validate!==!1)&&o.emitValidationErrors(this,c.call(o.validateStyle,o.extend({value:d,style:{glyphs:!0,sprite:!0},styleSpec:o.styleSpec})))},p}(o.Evented),ge=function(l,p){this.width=l,this.height=p,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};ge.prototype.getDash=function(l,p){var c=l.join(",")+String(p);return this.dashEntry[c]||(this.dashEntry[c]=this.addDash(l,p)),this.dashEntry[c]},ge.prototype.getDashRanges=function(l,p,c){var d=[],g=l.length%2==1?-l[l.length-1]*c:0,b=l[0]*c,w=!0;d.push({left:g,right:b,isDash:w,zeroLength:l[0]===0});for(var C=l[0],M=1;M<l.length;M++){var B=l[M];d.push({left:g=C*c,right:b=(C+=B)*c,isDash:w=!w,zeroLength:B===0})}return d},ge.prototype.addRoundDash=function(l,p,c){for(var d=p/2,g=-c;g<=c;g++)for(var b=this.width*(this.nextRow+c+g),w=0,C=l[w],M=0;M<this.width;M++){M/C.right>1&&(C=l[++w]);var B=Math.abs(M-C.left),K=Math.abs(M-C.right),Z=Math.min(B,K),Y=void 0,ce=g/c*(d+1);if(C.isDash){var ue=d-Math.abs(ce);Y=Math.sqrt(Z*Z+ue*ue)}else Y=d-Math.sqrt(Z*Z+ce*ce);this.data[b+M]=Math.max(0,Math.min(255,Y+128))}},ge.prototype.addRegularDash=function(l){for(var p=l.length-1;p>=0;--p){var c=l[p],d=l[p+1];c.zeroLength?l.splice(p,1):d&&d.isDash===c.isDash&&(d.left=c.left,l.splice(p,1))}var g=l[0],b=l[l.length-1];g.isDash===b.isDash&&(g.left=b.left-this.width,b.right=g.right+this.width);for(var w=this.width*this.nextRow,C=0,M=l[C],B=0;B<this.width;B++){B/M.right>1&&(M=l[++C]);var K=Math.abs(B-M.left),Z=Math.abs(B-M.right),Y=Math.min(K,Z);this.data[w+B]=Math.max(0,Math.min(255,(M.isDash?Y:-Y)+128))}},ge.prototype.addDash=function(l,p){var c=p?7:0,d=2*c+1;if(this.nextRow+d>this.height)return o.warnOnce("LineAtlas out of space"),null;for(var g=0,b=0;b<l.length;b++)g+=l[b];if(g!==0){var w=this.width/g,C=this.getDashRanges(l,this.width,w);p?this.addRoundDash(C,w,c):this.addRegularDash(C)}var M={y:(this.nextRow+c+.5)/this.height,height:2*c/this.height,width:g};return this.nextRow+=d,this.dirty=!0,M},ge.prototype.bind=function(l){var p=l.gl;this.texture?(p.bindTexture(p.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,p.texSubImage2D(p.TEXTURE_2D,0,0,0,this.width,this.height,p.ALPHA,p.UNSIGNED_BYTE,this.data))):(this.texture=p.createTexture(),p.bindTexture(p.TEXTURE_2D,this.texture),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.REPEAT),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.REPEAT),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.LINEAR),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.LINEAR),p.texImage2D(p.TEXTURE_2D,0,p.ALPHA,this.width,this.height,0,p.ALPHA,p.UNSIGNED_BYTE,this.data))};var Ne=function l(p,c){this.workerPool=p,this.actors=[],this.currentActor=0,this.id=o.uniqueId();for(var d=this.workerPool.acquire(this.id),g=0;g<d.length;g++){var b=new l.Actor(d[g],c,this.id);b.name="Worker "+g,this.actors.push(b)}};function qe(l,p,c){var d=function(g,b){if(g)return c(g);if(b){var w=o.pick(o.extend(b,l),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);b.vector_layers&&(w.vectorLayers=b.vector_layers,w.vectorLayerIds=w.vectorLayers.map(function(C){return C.id})),w.tiles=p.canonicalizeTileset(w,l.url),c(null,w)}};return l.url?o.getJSON(p.transformRequest(p.normalizeSourceURL(l.url),o.ResourceType.Source),d):o.browser.frame(function(){return d(null,l)})}Ne.prototype.broadcast=function(l,p,c){o.asyncAll(this.actors,function(d,g){d.send(l,p,g)},c=c||function(){})},Ne.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},Ne.prototype.remove=function(){this.actors.forEach(function(l){l.remove()}),this.actors=[],this.workerPool.release(this.id)},Ne.Actor=o.Actor;var Ce=function(l,p,c){this.bounds=o.LngLatBounds.convert(this.validateBounds(l)),this.minzoom=p||0,this.maxzoom=c||24};Ce.prototype.validateBounds=function(l){return Array.isArray(l)&&l.length===4?[Math.max(-180,l[0]),Math.max(-90,l[1]),Math.min(180,l[2]),Math.min(90,l[3])]:[-180,-90,180,90]},Ce.prototype.contains=function(l){var p=Math.pow(2,l.z),c=Math.floor(o.mercatorXfromLng(this.bounds.getWest())*p),d=Math.floor(o.mercatorYfromLat(this.bounds.getNorth())*p),g=Math.ceil(o.mercatorXfromLng(this.bounds.getEast())*p),b=Math.ceil(o.mercatorYfromLat(this.bounds.getSouth())*p);return l.x>=c&&l.x<g&&l.y>=d&&l.y<b};var ke=function(l){function p(c,d,g,b){if(l.call(this),this.id=c,this.dispatcher=g,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.extend(this,o.pick(d,["url","scheme","tileSize","promoteId"])),this._options=o.extend({type:"vector"},d),this._collectResourceTiming=d.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(b)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.load=function(){var c=this;this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=qe(this._options,this.map._requestManager,function(d,g){c._tileJSONRequest=null,c._loaded=!0,d?c.fire(new o.ErrorEvent(d)):g&&(o.extend(c,g),g.bounds&&(c.tileBounds=new Ce(g.bounds,c.minzoom,c.maxzoom)),o.postTurnstileEvent(g.tiles,c.map._requestManager._customAccessToken),o.postMapLoadEvent(g.tiles,c.map._getMapId(),c.map._requestManager._skuToken,c.map._requestManager._customAccessToken),c.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),c.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})))})},p.prototype.loaded=function(){return this._loaded},p.prototype.hasTile=function(c){return!this.tileBounds||this.tileBounds.contains(c.canonical)},p.prototype.onAdd=function(c){this.map=c,this.load()},p.prototype.setSourceProperty=function(c){this._tileJSONRequest&&this._tileJSONRequest.cancel(),c(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},p.prototype.setTiles=function(c){var d=this;return this.setSourceProperty(function(){d._options.tiles=c}),this},p.prototype.setUrl=function(c){var d=this;return this.setSourceProperty(function(){d.url=c,d._options.url=c}),this},p.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},p.prototype.serialize=function(){return o.extend({},this._options)},p.prototype.loadTile=function(c,d){var g=this.map._requestManager.normalizeTileURL(c.tileID.canonical.url(this.tiles,this.scheme)),b={request:this.map._requestManager.transformRequest(g,o.ResourceType.Tile),uid:c.uid,tileID:c.tileID,zoom:c.tileID.overscaledZ,tileSize:this.tileSize*c.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:o.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function w(C,M){return delete c.request,c.aborted?d(null):C&&C.status!==404?d(C):(M&&M.resourceTiming&&(c.resourceTiming=M.resourceTiming),this.map._refreshExpiredTiles&&M&&c.setExpiryData(M),c.loadVectorData(M,this.map.painter),o.cacheEntryPossiblyAdded(this.dispatcher),d(null),void(c.reloadCallback&&(this.loadTile(c,c.reloadCallback),c.reloadCallback=null)))}b.request.collectResourceTiming=this._collectResourceTiming,c.actor&&c.state!=="expired"?c.state==="loading"?c.reloadCallback=d:c.request=c.actor.send("reloadTile",b,w.bind(this)):(c.actor=this.dispatcher.getActor(),c.request=c.actor.send("loadTile",b,w.bind(this)))},p.prototype.abortTile=function(c){c.request&&(c.request.cancel(),delete c.request),c.actor&&c.actor.send("abortTile",{uid:c.uid,type:this.type,source:this.id},void 0)},p.prototype.unloadTile=function(c){c.unloadVectorData(),c.actor&&c.actor.send("removeTile",{uid:c.uid,type:this.type,source:this.id},void 0)},p.prototype.hasTransition=function(){return!1},p}(o.Evented),Te=function(l){function p(c,d,g,b){l.call(this),this.id=c,this.dispatcher=g,this.setEventedParent(b),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.extend({type:"raster"},d),o.extend(this,o.pick(d,["url","scheme","tileSize"]))}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.load=function(){var c=this;this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=qe(this._options,this.map._requestManager,function(d,g){c._tileJSONRequest=null,c._loaded=!0,d?c.fire(new o.ErrorEvent(d)):g&&(o.extend(c,g),g.bounds&&(c.tileBounds=new Ce(g.bounds,c.minzoom,c.maxzoom)),o.postTurnstileEvent(g.tiles),o.postMapLoadEvent(g.tiles,c.map._getMapId(),c.map._requestManager._skuToken),c.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),c.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})))})},p.prototype.loaded=function(){return this._loaded},p.prototype.onAdd=function(c){this.map=c,this.load()},p.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},p.prototype.serialize=function(){return o.extend({},this._options)},p.prototype.hasTile=function(c){return!this.tileBounds||this.tileBounds.contains(c.canonical)},p.prototype.loadTile=function(c,d){var g=this,b=this.map._requestManager.normalizeTileURL(c.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);c.request=o.getImage(this.map._requestManager.transformRequest(b,o.ResourceType.Tile),function(w,C){if(delete c.request,c.aborted)c.state="unloaded",d(null);else if(w)c.state="errored",d(w);else if(C){g.map._refreshExpiredTiles&&c.setExpiryData(C),delete C.cacheControl,delete C.expires;var M=g.map.painter.context,B=M.gl;c.texture=g.map.painter.getTileTexture(C.width),c.texture?c.texture.update(C,{useMipmap:!0}):(c.texture=new o.Texture(M,C,B.RGBA,{useMipmap:!0}),c.texture.bind(B.LINEAR,B.CLAMP_TO_EDGE,B.LINEAR_MIPMAP_NEAREST),M.extTextureFilterAnisotropic&&B.texParameterf(B.TEXTURE_2D,M.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,M.extTextureFilterAnisotropicMax)),c.state="loaded",o.cacheEntryPossiblyAdded(g.dispatcher),d(null)}})},p.prototype.abortTile=function(c,d){c.request&&(c.request.cancel(),delete c.request),d()},p.prototype.unloadTile=function(c,d){c.texture&&this.map.painter.saveTileTexture(c.texture),d()},p.prototype.hasTransition=function(){return!1},p}(o.Evented),Oe=function(l){function p(c,d,g,b){l.call(this,c,d,g,b),this.type="raster-dem",this.maxzoom=22,this._options=o.extend({type:"raster-dem"},d),this.encoding=d.encoding||"mapbox"}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},p.prototype.loadTile=function(c,d){var g=this.map._requestManager.normalizeTileURL(c.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function b(w,C){w&&(c.state="errored",d(w)),C&&(c.dem=C,c.needsHillshadePrepare=!0,c.state="loaded",d(null))}c.request=o.getImage(this.map._requestManager.transformRequest(g,o.ResourceType.Tile),(function(w,C){if(delete c.request,c.aborted)c.state="unloaded",d(null);else if(w)c.state="errored",d(w);else if(C){this.map._refreshExpiredTiles&&c.setExpiryData(C),delete C.cacheControl,delete C.expires;var M=o.window.ImageBitmap&&C instanceof o.window.ImageBitmap&&o.offscreenCanvasSupported()?C:o.browser.getImageData(C,1),B={uid:c.uid,coord:c.tileID,source:this.id,rawImageData:M,encoding:this.encoding};c.actor&&c.state!=="expired"||(c.actor=this.dispatcher.getActor(),c.actor.send("loadDEMTile",B,b.bind(this)))}}).bind(this)),c.neighboringTiles=this._getNeighboringTiles(c.tileID)},p.prototype._getNeighboringTiles=function(c){var d=c.canonical,g=Math.pow(2,d.z),b=(d.x-1+g)%g,w=d.x===0?c.wrap-1:c.wrap,C=(d.x+1+g)%g,M=d.x+1===g?c.wrap+1:c.wrap,B={};return B[new o.OverscaledTileID(c.overscaledZ,w,d.z,b,d.y).key]={backfilled:!1},B[new o.OverscaledTileID(c.overscaledZ,M,d.z,C,d.y).key]={backfilled:!1},d.y>0&&(B[new o.OverscaledTileID(c.overscaledZ,w,d.z,b,d.y-1).key]={backfilled:!1},B[new o.OverscaledTileID(c.overscaledZ,c.wrap,d.z,d.x,d.y-1).key]={backfilled:!1},B[new o.OverscaledTileID(c.overscaledZ,M,d.z,C,d.y-1).key]={backfilled:!1}),d.y+1<g&&(B[new o.OverscaledTileID(c.overscaledZ,w,d.z,b,d.y+1).key]={backfilled:!1},B[new o.OverscaledTileID(c.overscaledZ,c.wrap,d.z,d.x,d.y+1).key]={backfilled:!1},B[new o.OverscaledTileID(c.overscaledZ,M,d.z,C,d.y+1).key]={backfilled:!1}),B},p.prototype.unloadTile=function(c){c.demTexture&&this.map.painter.saveTileTexture(c.demTexture),c.fbo&&(c.fbo.destroy(),delete c.fbo),c.dem&&delete c.dem,delete c.neighboringTiles,c.state="unloaded",c.actor&&c.actor.send("removeDEMTile",{uid:c.uid,source:this.id})},p}(Te),Je=function(l){function p(c,d,g,b){l.call(this),this.id=c,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=g.getActor(),this.setEventedParent(b),this._data=d.data,this._options=o.extend({},d),this._collectResourceTiming=d.collectResourceTiming,this._resourceTiming=[],d.maxzoom!==void 0&&(this.maxzoom=d.maxzoom),d.type&&(this.type=d.type),d.attribution&&(this.attribution=d.attribution),this.promoteId=d.promoteId;var w=o.EXTENT/this.tileSize;this.workerOptions=o.extend({source:this.id,cluster:d.cluster||!1,geojsonVtOptions:{buffer:(d.buffer!==void 0?d.buffer:128)*w,tolerance:(d.tolerance!==void 0?d.tolerance:.375)*w,extent:o.EXTENT,maxZoom:this.maxzoom,lineMetrics:d.lineMetrics||!1,generateId:d.generateId||!1},superclusterOptions:{maxZoom:d.clusterMaxZoom!==void 0?Math.min(d.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,d.clusterMinPoints||2),extent:o.EXTENT,radius:(d.clusterRadius||50)*w,log:!1,generateId:d.generateId||!1},clusterProperties:d.clusterProperties,filter:d.filter},d.workerOptions)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.load=function(){var c=this;this.fire(new o.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(d){if(d)c.fire(new o.ErrorEvent(d));else{var g={dataType:"source",sourceDataType:"metadata"};c._collectResourceTiming&&c._resourceTiming&&c._resourceTiming.length>0&&(g.resourceTiming=c._resourceTiming,c._resourceTiming=[]),c.fire(new o.Event("data",g))}})},p.prototype.onAdd=function(c){this.map=c,this.load()},p.prototype.setData=function(c){var d=this;return this._data=c,this.fire(new o.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(g){if(g)d.fire(new o.ErrorEvent(g));else{var b={dataType:"source",sourceDataType:"content"};d._collectResourceTiming&&d._resourceTiming&&d._resourceTiming.length>0&&(b.resourceTiming=d._resourceTiming,d._resourceTiming=[]),d.fire(new o.Event("data",b))}}),this},p.prototype.getClusterExpansionZoom=function(c,d){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:c,source:this.id},d),this},p.prototype.getClusterChildren=function(c,d){return this.actor.send("geojson.getClusterChildren",{clusterId:c,source:this.id},d),this},p.prototype.getClusterLeaves=function(c,d,g,b){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:c,limit:d,offset:g},b),this},p.prototype._updateWorkerData=function(c){var d=this;this._loaded=!1;var g=o.extend({},this.workerOptions),b=this._data;typeof b=="string"?(g.request=this.map._requestManager.transformRequest(o.browser.resolveURL(b),o.ResourceType.Source),g.request.collectResourceTiming=this._collectResourceTiming):g.data=JSON.stringify(b),this.actor.send(this.type+".loadData",g,function(w,C){d._removed||C&&C.abandoned||(d._loaded=!0,C&&C.resourceTiming&&C.resourceTiming[d.id]&&(d._resourceTiming=C.resourceTiming[d.id].slice(0)),d.actor.send(d.type+".coalesce",{source:g.source},null),c(w))})},p.prototype.loaded=function(){return this._loaded},p.prototype.loadTile=function(c,d){var g=this,b=c.actor?"reloadTile":"loadTile";c.actor=this.actor,c.request=this.actor.send(b,{type:this.type,uid:c.uid,tileID:c.tileID,zoom:c.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:o.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(w,C){return delete c.request,c.unloadVectorData(),c.aborted?d(null):w?d(w):(c.loadVectorData(C,g.map.painter,b==="reloadTile"),d(null))})},p.prototype.abortTile=function(c){c.request&&(c.request.cancel(),delete c.request),c.aborted=!0},p.prototype.unloadTile=function(c){c.unloadVectorData(),this.actor.send("removeTile",{uid:c.uid,type:this.type,source:this.id})},p.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},p.prototype.serialize=function(){return o.extend({},this._options,{type:this.type,data:this._data})},p.prototype.hasTransition=function(){return!1},p}(o.Evented),$e=o.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),et=function(l){function p(c,d,g,b){l.call(this),this.id=c,this.dispatcher=g,this.coordinates=d.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(b),this.options=d}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.load=function(c,d){var g=this;this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this.url=this.options.url,o.getImage(this.map._requestManager.transformRequest(this.url,o.ResourceType.Image),function(b,w){g._loaded=!0,b?g.fire(new o.ErrorEvent(b)):w&&(g.image=w,c&&(g.coordinates=c),d&&d(),g._finishLoading())})},p.prototype.loaded=function(){return this._loaded},p.prototype.updateImage=function(c){var d=this;return this.image&&c.url?(this.options.url=c.url,this.load(c.coordinates,function(){d.texture=null}),this):this},p.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})))},p.prototype.onAdd=function(c){this.map=c,this.load()},p.prototype.setCoordinates=function(c){var d=this;this.coordinates=c;var g=c.map(o.MercatorCoordinate.fromLngLat);this.tileID=function(w){for(var C=1/0,M=1/0,B=-1/0,K=-1/0,Z=0,Y=w;Z<Y.length;Z+=1){var ce=Y[Z];C=Math.min(C,ce.x),M=Math.min(M,ce.y),B=Math.max(B,ce.x),K=Math.max(K,ce.y)}var ue=Math.max(B-C,K-M),xe=Math.max(0,Math.floor(-Math.log(ue)/Math.LN2)),oe=Math.pow(2,xe);return new o.CanonicalTileID(xe,Math.floor((C+B)/2*oe),Math.floor((M+K)/2*oe))}(g),this.minzoom=this.maxzoom=this.tileID.z;var b=g.map(function(w){return d.tileID.getTilePoint(w)._round()});return this._boundsArray=new o.StructArrayLayout4i8,this._boundsArray.emplaceBack(b[0].x,b[0].y,0,0),this._boundsArray.emplaceBack(b[1].x,b[1].y,o.EXTENT,0),this._boundsArray.emplaceBack(b[3].x,b[3].y,0,o.EXTENT),this._boundsArray.emplaceBack(b[2].x,b[2].y,o.EXTENT,o.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})),this},p.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var c=this.map.painter.context,d=c.gl;for(var g in this.boundsBuffer||(this.boundsBuffer=c.createVertexBuffer(this._boundsArray,$e.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new o.Texture(c,this.image,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE)),this.tiles){var b=this.tiles[g];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture)}}},p.prototype.loadTile=function(c,d){this.tileID&&this.tileID.equals(c.tileID.canonical)?(this.tiles[String(c.tileID.wrap)]=c,c.buckets={},d(null)):(c.state="errored",d(null))},p.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},p.prototype.hasTransition=function(){return!1},p}(o.Evented),Wt=function(l){function p(c,d,g,b){l.call(this,c,d,g,b),this.roundZoom=!0,this.type="video",this.options=d}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.load=function(){var c=this;this._loaded=!1;var d=this.options;this.urls=[];for(var g=0,b=d.urls;g<b.length;g+=1)this.urls.push(this.map._requestManager.transformRequest(b[g],o.ResourceType.Source).url);o.getVideo(this.urls,function(w,C){c._loaded=!0,w?c.fire(new o.ErrorEvent(w)):C&&(c.video=C,c.video.loop=!0,c.video.setAttribute("playsinline",""),c.video.addEventListener("playing",function(){c.map.triggerRepaint()}),c.map&&c.video.play(),c._finishLoading())})},p.prototype.pause=function(){this.video&&this.video.pause()},p.prototype.play=function(){this.video&&this.video.play()},p.prototype.seek=function(c){if(this.video){var d=this.video.seekable;c<d.start(0)||c>d.end(0)?this.fire(new o.ErrorEvent(new o.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+d.start(0)+" and "+d.end(0)+"-second mark."))):this.video.currentTime=c}},p.prototype.getVideo=function(){return this.video},p.prototype.onAdd=function(c){this.map||(this.map=c,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},p.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var c=this.map.painter.context,d=c.gl;for(var g in this.boundsBuffer||(this.boundsBuffer=c.createVertexBuffer(this._boundsArray,$e.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE),d.texSubImage2D(d.TEXTURE_2D,0,0,0,d.RGBA,d.UNSIGNED_BYTE,this.video)):(this.texture=new o.Texture(c,this.video,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE)),this.tiles){var b=this.tiles[g];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture)}}},p.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},p.prototype.hasTransition=function(){return this.video&&!this.video.paused},p}(et),Re=function(l){function p(c,d,g,b){l.call(this,c,d,g,b),d.coordinates?Array.isArray(d.coordinates)&&d.coordinates.length===4&&!d.coordinates.some(function(w){return!Array.isArray(w)||w.length!==2||w.some(function(C){return typeof C!="number"})})||this.fire(new o.ErrorEvent(new o.ValidationError("sources."+c,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.ErrorEvent(new o.ValidationError("sources."+c,null,'missing required property "coordinates"'))),d.animate&&typeof d.animate!="boolean"&&this.fire(new o.ErrorEvent(new o.ValidationError("sources."+c,null,'optional "animate" property must be a boolean value'))),d.canvas?typeof d.canvas=="string"||d.canvas instanceof o.window.HTMLCanvasElement||this.fire(new o.ErrorEvent(new o.ValidationError("sources."+c,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.ErrorEvent(new o.ValidationError("sources."+c,null,'missing required property "canvas"'))),this.options=d,this.animate=d.animate===void 0||d.animate}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof o.window.HTMLCanvasElement?this.options.canvas:o.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},p.prototype.getCanvas=function(){return this.canvas},p.prototype.onAdd=function(c){this.map=c,this.load(),this.canvas&&this.animate&&this.play()},p.prototype.onRemove=function(){this.pause()},p.prototype.prepare=function(){var c=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,c=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,c=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var d=this.map.painter.context,g=d.gl;for(var b in this.boundsBuffer||(this.boundsBuffer=d.createVertexBuffer(this._boundsArray,$e.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(c||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new o.Texture(d,this.canvas,g.RGBA,{premultiply:!0}),this.tiles){var w=this.tiles[b];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture)}}},p.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},p.prototype.hasTransition=function(){return this._playing},p.prototype._hasInvalidDimensions=function(){for(var c=0,d=[this.canvas.width,this.canvas.height];c<d.length;c+=1){var g=d[c];if(isNaN(g)||g<=0)return!0}return!1},p}(et),He={vector:ke,raster:Te,"raster-dem":Oe,geojson:Je,video:Wt,image:et,canvas:Re};function Zt(l,p){var c=o.identity([]);return o.translate(c,c,[1,1,0]),o.scale(c,c,[.5*l.width,.5*l.height,1]),o.multiply(c,c,l.calculatePosMatrix(p.toUnwrapped()))}function Pt(l,p,c,d,g,b){var w=function(xe,oe,ve){if(xe)for(var Se=0,Pe=xe;Se<Pe.length;Se+=1){var Fe=oe[Pe[Se]];if(Fe&&Fe.source===ve&&Fe.type==="fill-extrusion")return!0}else for(var De in oe){var je=oe[De];if(je.source===ve&&je.type==="fill-extrusion")return!0}return!1}(g&&g.layers,p,l.id),C=b.maxPitchScaleFactor(),M=l.tilesIn(d,C,w);M.sort(Gt);for(var B=[],K=0,Z=M;K<Z.length;K+=1){var Y=Z[K];B.push({wrappedTileID:Y.tileID.wrapped().key,queryResults:Y.tile.queryRenderedFeatures(p,c,l._state,Y.queryGeometry,Y.cameraQueryGeometry,Y.scale,g,b,C,Zt(l.transform,Y.tileID))})}var ce=function(xe){for(var oe={},ve={},Se=0,Pe=xe;Se<Pe.length;Se+=1){var Fe=Pe[Se],De=Fe.queryResults,je=Fe.wrappedTileID,Ke=ve[je]=ve[je]||{};for(var tt in De)for(var Qe=De[tt],ft=Ke[tt]=Ke[tt]||{},Et=oe[tt]=oe[tt]||[],It=0,Tt=Qe;It<Tt.length;It+=1){var _r=Tt[It];ft[_r.featureIndex]||(ft[_r.featureIndex]=!0,Et.push(_r))}}return oe}(B);for(var ue in ce)ce[ue].forEach(function(xe){var oe=xe.feature,ve=l.getFeatureState(oe.layer["source-layer"],oe.id);oe.source=oe.layer.source,oe.layer["source-layer"]&&(oe.sourceLayer=oe.layer["source-layer"]),oe.state=ve});return ce}function Gt(l,p){var c=l.tileID,d=p.tileID;return c.overscaledZ-d.overscaledZ||c.canonical.y-d.canonical.y||c.wrap-d.wrap||c.canonical.x-d.canonical.x}var zt=function(l,p){this.max=l,this.onRemove=p,this.reset()};zt.prototype.reset=function(){for(var l in this.data)for(var p=0,c=this.data[l];p<c.length;p+=1){var d=c[p];d.timeout&&clearTimeout(d.timeout),this.onRemove(d.value)}return this.data={},this.order=[],this},zt.prototype.add=function(l,p,c){var d=this,g=l.wrapped().key;this.data[g]===void 0&&(this.data[g]=[]);var b={value:p,timeout:void 0};if(c!==void 0&&(b.timeout=setTimeout(function(){d.remove(l,b)},c)),this.data[g].push(b),this.order.push(g),this.order.length>this.max){var w=this._getAndRemoveByKey(this.order[0]);w&&this.onRemove(w)}return this},zt.prototype.has=function(l){return l.wrapped().key in this.data},zt.prototype.getAndRemove=function(l){return this.has(l)?this._getAndRemoveByKey(l.wrapped().key):null},zt.prototype._getAndRemoveByKey=function(l){var p=this.data[l].shift();return p.timeout&&clearTimeout(p.timeout),this.data[l].length===0&&delete this.data[l],this.order.splice(this.order.indexOf(l),1),p.value},zt.prototype.getByKey=function(l){var p=this.data[l];return p?p[0].value:null},zt.prototype.get=function(l){return this.has(l)?this.data[l.wrapped().key][0].value:null},zt.prototype.remove=function(l,p){if(!this.has(l))return this;var c=l.wrapped().key,d=p===void 0?0:this.data[c].indexOf(p),g=this.data[c][d];return this.data[c].splice(d,1),g.timeout&&clearTimeout(g.timeout),this.data[c].length===0&&delete this.data[c],this.onRemove(g.value),this.order.splice(this.order.indexOf(c),1),this},zt.prototype.setMaxSize=function(l){for(this.max=l;this.order.length>this.max;){var p=this._getAndRemoveByKey(this.order[0]);p&&this.onRemove(p)}return this},zt.prototype.filter=function(l){var p=[];for(var c in this.data)for(var d=0,g=this.data[c];d<g.length;d+=1){var b=g[d];l(b.value)||p.push(b)}for(var w=0,C=p;w<C.length;w+=1){var M=C[w];this.remove(M.value.tileID,M)}};var nr=function(l,p,c){this.context=l;var d=l.gl;this.buffer=d.createBuffer(),this.dynamicDraw=!!c,this.context.unbindVAO(),l.bindElementBuffer.set(this.buffer),d.bufferData(d.ELEMENT_ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?d.DYNAMIC_DRAW:d.STATIC_DRAW),this.dynamicDraw||delete p.arrayBuffer};nr.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},nr.prototype.updateData=function(l){var p=this.context.gl;this.context.unbindVAO(),this.bind(),p.bufferSubData(p.ELEMENT_ARRAY_BUFFER,0,l.arrayBuffer)},nr.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Kt={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Yt=function(l,p,c,d){this.length=p.length,this.attributes=c,this.itemSize=p.bytesPerElement,this.dynamicDraw=d,this.context=l;var g=l.gl;this.buffer=g.createBuffer(),l.bindVertexBuffer.set(this.buffer),g.bufferData(g.ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||delete p.arrayBuffer};Yt.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},Yt.prototype.updateData=function(l){var p=this.context.gl;this.bind(),p.bufferSubData(p.ARRAY_BUFFER,0,l.arrayBuffer)},Yt.prototype.enableAttributes=function(l,p){for(var c=0;c<this.attributes.length;c++){var d=p.attributes[this.attributes[c].name];d!==void 0&&l.enableVertexAttribArray(d)}},Yt.prototype.setVertexAttribPointers=function(l,p,c){for(var d=0;d<this.attributes.length;d++){var g=this.attributes[d],b=p.attributes[g.name];b!==void 0&&l.vertexAttribPointer(b,g.components,l[Kt[g.type]],!1,this.itemSize,g.offset+this.itemSize*(c||0))}},Yt.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var st=function(l){this.gl=l.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};st.prototype.get=function(){return this.current},st.prototype.set=function(l){},st.prototype.getDefault=function(){return this.default},st.prototype.setDefault=function(){this.set(this.default)};var Lt=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return o.Color.transparent},p.prototype.set=function(c){var d=this.current;(c.r!==d.r||c.g!==d.g||c.b!==d.b||c.a!==d.a||this.dirty)&&(this.gl.clearColor(c.r,c.g,c.b,c.a),this.current=c,this.dirty=!1)},p}(st),er=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return 1},p.prototype.set=function(c){(c!==this.current||this.dirty)&&(this.gl.clearDepth(c),this.current=c,this.dirty=!1)},p}(st),Mr=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return 0},p.prototype.set=function(c){(c!==this.current||this.dirty)&&(this.gl.clearStencil(c),this.current=c,this.dirty=!1)},p}(st),Nr=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return[!0,!0,!0,!0]},p.prototype.set=function(c){var d=this.current;(c[0]!==d[0]||c[1]!==d[1]||c[2]!==d[2]||c[3]!==d[3]||this.dirty)&&(this.gl.colorMask(c[0],c[1],c[2],c[3]),this.current=c,this.dirty=!1)},p}(st),tr=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return!0},p.prototype.set=function(c){(c!==this.current||this.dirty)&&(this.gl.depthMask(c),this.current=c,this.dirty=!1)},p}(st),Vr=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return 255},p.prototype.set=function(c){(c!==this.current||this.dirty)&&(this.gl.stencilMask(c),this.current=c,this.dirty=!1)},p}(st),zr=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},p.prototype.set=function(c){var d=this.current;(c.func!==d.func||c.ref!==d.ref||c.mask!==d.mask||this.dirty)&&(this.gl.stencilFunc(c.func,c.ref,c.mask),this.current=c,this.dirty=!1)},p}(st),Sr=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){var c=this.gl;return[c.KEEP,c.KEEP,c.KEEP]},p.prototype.set=function(c){var d=this.current;(c[0]!==d[0]||c[1]!==d[1]||c[2]!==d[2]||this.dirty)&&(this.gl.stencilOp(c[0],c[1],c[2]),this.current=c,this.dirty=!1)},p}(st),on=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return!1},p.prototype.set=function(c){if(c!==this.current||this.dirty){var d=this.gl;c?d.enable(d.STENCIL_TEST):d.disable(d.STENCIL_TEST),this.current=c,this.dirty=!1}},p}(st),Ar=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return[0,1]},p.prototype.set=function(c){var d=this.current;(c[0]!==d[0]||c[1]!==d[1]||this.dirty)&&(this.gl.depthRange(c[0],c[1]),this.current=c,this.dirty=!1)},p}(st),lr=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return!1},p.prototype.set=function(c){if(c!==this.current||this.dirty){var d=this.gl;c?d.enable(d.DEPTH_TEST):d.disable(d.DEPTH_TEST),this.current=c,this.dirty=!1}},p}(st),Xr=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return this.gl.LESS},p.prototype.set=function(c){(c!==this.current||this.dirty)&&(this.gl.depthFunc(c),this.current=c,this.dirty=!1)},p}(st),Sn=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return!1},p.prototype.set=function(c){if(c!==this.current||this.dirty){var d=this.gl;c?d.enable(d.BLEND):d.disable(d.BLEND),this.current=c,this.dirty=!1}},p}(st),li=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){var c=this.gl;return[c.ONE,c.ZERO]},p.prototype.set=function(c){var d=this.current;(c[0]!==d[0]||c[1]!==d[1]||this.dirty)&&(this.gl.blendFunc(c[0],c[1]),this.current=c,this.dirty=!1)},p}(st),hr=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return o.Color.transparent},p.prototype.set=function(c){var d=this.current;(c.r!==d.r||c.g!==d.g||c.b!==d.b||c.a!==d.a||this.dirty)&&(this.gl.blendColor(c.r,c.g,c.b,c.a),this.current=c,this.dirty=!1)},p}(st),Dt=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return this.gl.FUNC_ADD},p.prototype.set=function(c){(c!==this.current||this.dirty)&&(this.gl.blendEquation(c),this.current=c,this.dirty=!1)},p}(st),Wn=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return!1},p.prototype.set=function(c){if(c!==this.current||this.dirty){var d=this.gl;c?d.enable(d.CULL_FACE):d.disable(d.CULL_FACE),this.current=c,this.dirty=!1}},p}(st),Bn=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return this.gl.BACK},p.prototype.set=function(c){(c!==this.current||this.dirty)&&(this.gl.cullFace(c),this.current=c,this.dirty=!1)},p}(st),Wi=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return this.gl.CCW},p.prototype.set=function(c){(c!==this.current||this.dirty)&&(this.gl.frontFace(c),this.current=c,this.dirty=!1)},p}(st),Bt=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p.prototype.set=function(c){(c!==this.current||this.dirty)&&(this.gl.useProgram(c),this.current=c,this.dirty=!1)},p}(st),br=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return this.gl.TEXTURE0},p.prototype.set=function(c){(c!==this.current||this.dirty)&&(this.gl.activeTexture(c),this.current=c,this.dirty=!1)},p}(st),ct=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){var c=this.gl;return[0,0,c.drawingBufferWidth,c.drawingBufferHeight]},p.prototype.set=function(c){var d=this.current;(c[0]!==d[0]||c[1]!==d[1]||c[2]!==d[2]||c[3]!==d[3]||this.dirty)&&(this.gl.viewport(c[0],c[1],c[2],c[3]),this.current=c,this.dirty=!1)},p}(st),At=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p.prototype.set=function(c){if(c!==this.current||this.dirty){var d=this.gl;d.bindFramebuffer(d.FRAMEBUFFER,c),this.current=c,this.dirty=!1}},p}(st),yr=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p.prototype.set=function(c){if(c!==this.current||this.dirty){var d=this.gl;d.bindRenderbuffer(d.RENDERBUFFER,c),this.current=c,this.dirty=!1}},p}(st),wr=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p.prototype.set=function(c){if(c!==this.current||this.dirty){var d=this.gl;d.bindTexture(d.TEXTURE_2D,c),this.current=c,this.dirty=!1}},p}(st),rn=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p.prototype.set=function(c){if(c!==this.current||this.dirty){var d=this.gl;d.bindBuffer(d.ARRAY_BUFFER,c),this.current=c,this.dirty=!1}},p}(st),Me=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p.prototype.set=function(c){var d=this.gl;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,c),this.current=c,this.dirty=!1},p}(st),rt=function(l){function p(c){l.call(this,c),this.vao=c.extVertexArrayObject}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p.prototype.set=function(c){this.vao&&(c!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(c),this.current=c,this.dirty=!1)},p}(st),bt=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return 4},p.prototype.set=function(c){if(c!==this.current||this.dirty){var d=this.gl;d.pixelStorei(d.UNPACK_ALIGNMENT,c),this.current=c,this.dirty=!1}},p}(st),ar=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return!1},p.prototype.set=function(c){if(c!==this.current||this.dirty){var d=this.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,c),this.current=c,this.dirty=!1}},p}(st),Rr=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return!1},p.prototype.set=function(c){if(c!==this.current||this.dirty){var d=this.gl;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,c),this.current=c,this.dirty=!1}},p}(st),Ht=function(l){function p(c,d){l.call(this,c),this.context=c,this.parent=d}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p}(st),L=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.setDirty=function(){this.dirty=!0},p.prototype.set=function(c){if(c!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,c,0),this.current=c,this.dirty=!1}},p}(Ht),j=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.set=function(c){if(c!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_ATTACHMENT,d.RENDERBUFFER,c),this.current=c,this.dirty=!1}},p}(Ht),W=function(l,p,c,d){this.context=l,this.width=p,this.height=c;var g=this.framebuffer=l.gl.createFramebuffer();this.colorAttachment=new L(l,g),d&&(this.depthAttachment=new j(l,g))};W.prototype.destroy=function(){var l=this.context.gl,p=this.colorAttachment.get();if(p&&l.deleteTexture(p),this.depthAttachment){var c=this.depthAttachment.get();c&&l.deleteRenderbuffer(c)}l.deleteFramebuffer(this.framebuffer)};var X=function(l,p,c){this.func=l,this.mask=p,this.range=c};X.ReadOnly=!1,X.ReadWrite=!0,X.disabled=new X(519,X.ReadOnly,[0,1]);var re=function(l,p,c,d,g,b){this.test=l,this.ref=p,this.mask=c,this.fail=d,this.depthFail=g,this.pass=b};re.disabled=new re({func:519,mask:0},0,0,7680,7680,7680);var me=function(l,p,c){this.blendFunction=l,this.blendColor=p,this.mask=c};me.disabled=new me(me.Replace=[1,0],o.Color.transparent,[!1,!1,!1,!1]),me.unblended=new me(me.Replace,o.Color.transparent,[!0,!0,!0,!0]),me.alphaBlended=new me([1,771],o.Color.transparent,[!0,!0,!0,!0]);var ye=function(l,p,c){this.enable=l,this.mode=p,this.frontFace=c};ye.disabled=new ye(!1,1029,2305),ye.backCCW=new ye(!0,1029,2305);var H=function(l){this.gl=l,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Lt(this),this.clearDepth=new er(this),this.clearStencil=new Mr(this),this.colorMask=new Nr(this),this.depthMask=new tr(this),this.stencilMask=new Vr(this),this.stencilFunc=new zr(this),this.stencilOp=new Sr(this),this.stencilTest=new on(this),this.depthRange=new Ar(this),this.depthTest=new lr(this),this.depthFunc=new Xr(this),this.blend=new Sn(this),this.blendFunc=new li(this),this.blendColor=new hr(this),this.blendEquation=new Dt(this),this.cullFace=new Wn(this),this.cullFaceSide=new Bn(this),this.frontFace=new Wi(this),this.program=new Bt(this),this.activeTexture=new br(this),this.viewport=new ct(this),this.bindFramebuffer=new At(this),this.bindRenderbuffer=new yr(this),this.bindTexture=new wr(this),this.bindVertexBuffer=new rn(this),this.bindElementBuffer=new Me(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new rt(this),this.pixelStoreUnpack=new bt(this),this.pixelStoreUnpackPremultiplyAlpha=new ar(this),this.pixelStoreUnpackFlipY=new Rr(this),this.extTextureFilterAnisotropic=l.getExtension("EXT_texture_filter_anisotropic")||l.getExtension("MOZ_EXT_texture_filter_anisotropic")||l.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=l.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=l.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(l.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=l.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=l.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE)};H.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},H.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},H.prototype.createIndexBuffer=function(l,p){return new nr(this,l,p)},H.prototype.createVertexBuffer=function(l,p,c){return new Yt(this,l,p,c)},H.prototype.createRenderbuffer=function(l,p,c){var d=this.gl,g=d.createRenderbuffer();return this.bindRenderbuffer.set(g),d.renderbufferStorage(d.RENDERBUFFER,l,p,c),this.bindRenderbuffer.set(null),g},H.prototype.createFramebuffer=function(l,p,c){return new W(this,l,p,c)},H.prototype.clear=function(l){var p=l.color,c=l.depth,d=this.gl,g=0;p&&(g|=d.COLOR_BUFFER_BIT,this.clearColor.set(p),this.colorMask.set([!0,!0,!0,!0])),c!==void 0&&(g|=d.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),d.clear(g)},H.prototype.setCullFace=function(l){l.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(l.mode),this.frontFace.set(l.frontFace))},H.prototype.setDepthMode=function(l){l.func!==this.gl.ALWAYS||l.mask?(this.depthTest.set(!0),this.depthFunc.set(l.func),this.depthMask.set(l.mask),this.depthRange.set(l.range)):this.depthTest.set(!1)},H.prototype.setStencilMode=function(l){l.test.func!==this.gl.ALWAYS||l.mask?(this.stencilTest.set(!0),this.stencilMask.set(l.mask),this.stencilOp.set([l.fail,l.depthFail,l.pass]),this.stencilFunc.set({func:l.test.func,ref:l.ref,mask:l.test.mask})):this.stencilTest.set(!1)},H.prototype.setColorMode=function(l){o.deepEqual(l.blendFunction,me.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(l.blendFunction),this.blendColor.set(l.blendColor)),this.colorMask.set(l.mask)},H.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var ne=function(l){function p(c,d,g){var b=this;l.call(this),this.id=c,this.dispatcher=g,this.on("data",function(w){w.dataType==="source"&&w.sourceDataType==="metadata"&&(b._sourceLoaded=!0),b._sourceLoaded&&!b._paused&&w.dataType==="source"&&w.sourceDataType==="content"&&(b.reload(),b.transform&&b.update(b.transform))}),this.on("error",function(){b._sourceErrored=!0}),this._source=function(w,C,M,B){var K=new He[C.type](w,C,M,B);if(K.id!==w)throw new Error("Expected Source id to be "+w+" instead of "+K.id);return o.bindAll(["load","abort","unload","serialize","prepare"],K),K}(c,d,g,this),this._tiles={},this._cache=new zt(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new o.SourceFeatureState}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.onAdd=function(c){this.map=c,this._maxTileCacheSize=c?c._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(c)},p.prototype.onRemove=function(c){this._source&&this._source.onRemove&&this._source.onRemove(c)},p.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var c in this._tiles){var d=this._tiles[c];if(d.state!=="loaded"&&d.state!=="errored")return!1}return!0},p.prototype.getSource=function(){return this._source},p.prototype.pause=function(){this._paused=!0},p.prototype.resume=function(){if(this._paused){var c=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,c&&this.reload(),this.transform&&this.update(this.transform)}},p.prototype._loadTile=function(c,d){return this._source.loadTile(c,d)},p.prototype._unloadTile=function(c){if(this._source.unloadTile)return this._source.unloadTile(c,function(){})},p.prototype._abortTile=function(c){if(this._source.abortTile)return this._source.abortTile(c,function(){})},p.prototype.serialize=function(){return this._source.serialize()},p.prototype.prepare=function(c){for(var d in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var g=this._tiles[d];g.upload(c),g.prepare(this.map.style.imageManager)}},p.prototype.getIds=function(){return o.values(this._tiles).map(function(c){return c.tileID}).sort(Ee).map(function(c){return c.key})},p.prototype.getRenderableIds=function(c){var d=this,g=[];for(var b in this._tiles)this._isIdRenderable(b,c)&&g.push(this._tiles[b]);return c?g.sort(function(w,C){var M=w.tileID,B=C.tileID,K=new o.Point(M.canonical.x,M.canonical.y)._rotate(d.transform.angle),Z=new o.Point(B.canonical.x,B.canonical.y)._rotate(d.transform.angle);return M.overscaledZ-B.overscaledZ||Z.y-K.y||Z.x-K.x}).map(function(w){return w.tileID.key}):g.map(function(w){return w.tileID}).sort(Ee).map(function(w){return w.key})},p.prototype.hasRenderableParent=function(c){var d=this.findLoadedParent(c,0);return!!d&&this._isIdRenderable(d.tileID.key)},p.prototype._isIdRenderable=function(c,d){return this._tiles[c]&&this._tiles[c].hasData()&&!this._coveredTiles[c]&&(d||!this._tiles[c].holdingForFade())},p.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var c in this._cache.reset(),this._tiles)this._tiles[c].state!=="errored"&&this._reloadTile(c,"reloading")},p.prototype._reloadTile=function(c,d){var g=this._tiles[c];g&&(g.state!=="loading"&&(g.state=d),this._loadTile(g,this._tileLoaded.bind(this,g,c,d)))},p.prototype._tileLoaded=function(c,d,g,b){if(b)return c.state="errored",void(b.status!==404?this._source.fire(new o.ErrorEvent(b,{tile:c})):this.update(this.transform));c.timeAdded=o.browser.now(),g==="expired"&&(c.refreshedUponExpiration=!0),this._setTileReloadTimer(d,c),this.getSource().type==="raster-dem"&&c.dem&&this._backfillDEM(c),this._state.initializeTileState(c,this.map?this.map.painter:null),this._source.fire(new o.Event("data",{dataType:"source",tile:c,coord:c.tileID}))},p.prototype._backfillDEM=function(c){for(var d=this.getRenderableIds(),g=0;g<d.length;g++){var b=d[g];if(c.neighboringTiles&&c.neighboringTiles[b]){var w=this.getTileByID(b);C(c,w),C(w,c)}}function C(M,B){M.needsHillshadePrepare=!0;var K=B.tileID.canonical.x-M.tileID.canonical.x,Z=B.tileID.canonical.y-M.tileID.canonical.y,Y=Math.pow(2,M.tileID.canonical.z),ce=B.tileID.key;K===0&&Z===0||Math.abs(Z)>1||(Math.abs(K)>1&&(Math.abs(K+Y)===1?K+=Y:Math.abs(K-Y)===1&&(K-=Y)),B.dem&&M.dem&&(M.dem.backfillBorder(B.dem,K,Z),M.neighboringTiles&&M.neighboringTiles[ce]&&(M.neighboringTiles[ce].backfilled=!0)))}},p.prototype.getTile=function(c){return this.getTileByID(c.key)},p.prototype.getTileByID=function(c){return this._tiles[c]},p.prototype._retainLoadedChildren=function(c,d,g,b){for(var w in this._tiles){var C=this._tiles[w];if(!(b[w]||!C.hasData()||C.tileID.overscaledZ<=d||C.tileID.overscaledZ>g)){for(var M=C.tileID;C&&C.tileID.overscaledZ>d+1;){var B=C.tileID.scaledTo(C.tileID.overscaledZ-1);(C=this._tiles[B.key])&&C.hasData()&&(M=B)}for(var K=M;K.overscaledZ>d;)if(c[(K=K.scaledTo(K.overscaledZ-1)).key]){b[M.key]=M;break}}}},p.prototype.findLoadedParent=function(c,d){if(c.key in this._loadedParentTiles){var g=this._loadedParentTiles[c.key];return g&&g.tileID.overscaledZ>=d?g:null}for(var b=c.overscaledZ-1;b>=d;b--){var w=c.scaledTo(b),C=this._getLoadedTile(w);if(C)return C}},p.prototype._getLoadedTile=function(c){var d=this._tiles[c.key];return d&&d.hasData()?d:this._cache.getByKey(c.wrapped().key)},p.prototype.updateCacheSize=function(c){var d=Math.ceil(c.width/this._source.tileSize)+1,g=Math.ceil(c.height/this._source.tileSize)+1,b=Math.floor(d*g*5),w=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,b):b;this._cache.setMaxSize(w)},p.prototype.handleWrapJump=function(c){var d=Math.round((c-(this._prevLng===void 0?c:this._prevLng))/360);if(this._prevLng=c,d){var g={};for(var b in this._tiles){var w=this._tiles[b];w.tileID=w.tileID.unwrapTo(w.tileID.wrap+d),g[w.tileID.key]=w}for(var C in this._tiles=g,this._timers)clearTimeout(this._timers[C]),delete this._timers[C];for(var M in this._tiles)this._setTileReloadTimer(M,this._tiles[M])}},p.prototype.update=function(c){var d=this;if(this.transform=c,this._sourceLoaded&&!this._paused){var g;this.updateCacheSize(c),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?g=c.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Ke){return new o.OverscaledTileID(Ke.canonical.z,Ke.wrap,Ke.canonical.z,Ke.canonical.x,Ke.canonical.y)}):(g=c.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(g=g.filter(function(Ke){return d._source.hasTile(Ke)}))):g=[];var b=c.coveringZoomLevel(this._source),w=Math.max(b-p.maxOverzooming,this._source.minzoom),C=Math.max(b+p.maxUnderzooming,this._source.minzoom),M=this._updateRetainedTiles(g,b);if(Ge(this._source.type)){for(var B={},K={},Z=0,Y=Object.keys(M);Z<Y.length;Z+=1){var ce=Y[Z],ue=M[ce],xe=this._tiles[ce];if(xe&&!(xe.fadeEndTime&&xe.fadeEndTime<=o.browser.now())){var oe=this.findLoadedParent(ue,w);oe&&(this._addTile(oe.tileID),B[oe.tileID.key]=oe.tileID),K[ce]=ue}}for(var ve in this._retainLoadedChildren(K,b,C,M),B)M[ve]||(this._coveredTiles[ve]=!0,M[ve]=B[ve])}for(var Se in M)this._tiles[Se].clearFadeHold();for(var Pe=0,Fe=o.keysDifference(this._tiles,M);Pe<Fe.length;Pe+=1){var De=Fe[Pe],je=this._tiles[De];je.hasSymbolBuckets&&!je.holdingForFade()?je.setHoldDuration(this.map._fadeDuration):je.hasSymbolBuckets&&!je.symbolFadeFinished()||this._removeTile(De)}this._updateLoadedParentTileCache()}},p.prototype.releaseSymbolFadeTiles=function(){for(var c in this._tiles)this._tiles[c].holdingForFade()&&this._removeTile(c)},p.prototype._updateRetainedTiles=function(c,d){for(var g={},b={},w=Math.max(d-p.maxOverzooming,this._source.minzoom),C=Math.max(d+p.maxUnderzooming,this._source.minzoom),M={},B=0,K=c;B<K.length;B+=1){var Z=K[B],Y=this._addTile(Z);g[Z.key]=Z,Y.hasData()||d<this._source.maxzoom&&(M[Z.key]=Z)}this._retainLoadedChildren(M,d,C,g);for(var ce=0,ue=c;ce<ue.length;ce+=1){var xe=ue[ce],oe=this._tiles[xe.key];if(!oe.hasData()){if(d+1>this._source.maxzoom){var ve=xe.children(this._source.maxzoom)[0],Se=this.getTile(ve);if(Se&&Se.hasData()){g[ve.key]=ve;continue}}else{var Pe=xe.children(this._source.maxzoom);if(g[Pe[0].key]&&g[Pe[1].key]&&g[Pe[2].key]&&g[Pe[3].key])continue}for(var Fe=oe.wasRequested(),De=xe.overscaledZ-1;De>=w;--De){var je=xe.scaledTo(De);if(b[je.key]||(b[je.key]=!0,!(oe=this.getTile(je))&&Fe&&(oe=this._addTile(je)),oe&&(g[je.key]=je,Fe=oe.wasRequested(),oe.hasData())))break}}}return g},p.prototype._updateLoadedParentTileCache=function(){for(var c in this._loadedParentTiles={},this._tiles){for(var d=[],g=void 0,b=this._tiles[c].tileID;b.overscaledZ>0;){if(b.key in this._loadedParentTiles){g=this._loadedParentTiles[b.key];break}d.push(b.key);var w=b.scaledTo(b.overscaledZ-1);if(g=this._getLoadedTile(w))break;b=w}for(var C=0,M=d;C<M.length;C+=1)this._loadedParentTiles[M[C]]=g}},p.prototype._addTile=function(c){var d=this._tiles[c.key];if(d)return d;(d=this._cache.getAndRemove(c))&&(this._setTileReloadTimer(c.key,d),d.tileID=c,this._state.initializeTileState(d,this.map?this.map.painter:null),this._cacheTimers[c.key]&&(clearTimeout(this._cacheTimers[c.key]),delete this._cacheTimers[c.key],this._setTileReloadTimer(c.key,d)));var g=!!d;return g||(d=new o.Tile(c,this._source.tileSize*c.overscaleFactor()),this._loadTile(d,this._tileLoaded.bind(this,d,c.key,d.state))),d?(d.uses++,this._tiles[c.key]=d,g||this._source.fire(new o.Event("dataloading",{tile:d,coord:d.tileID,dataType:"source"})),d):null},p.prototype._setTileReloadTimer=function(c,d){var g=this;c in this._timers&&(clearTimeout(this._timers[c]),delete this._timers[c]);var b=d.getExpiryTimeout();b&&(this._timers[c]=setTimeout(function(){g._reloadTile(c,"expired"),delete g._timers[c]},b))},p.prototype._removeTile=function(c){var d=this._tiles[c];d&&(d.uses--,delete this._tiles[c],this._timers[c]&&(clearTimeout(this._timers[c]),delete this._timers[c]),d.uses>0||(d.hasData()&&d.state!=="reloading"?this._cache.add(d.tileID,d,d.getExpiryTimeout()):(d.aborted=!0,this._abortTile(d),this._unloadTile(d))))},p.prototype.clearTiles=function(){for(var c in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(c);this._cache.reset()},p.prototype.tilesIn=function(c,d,g){var b=this,w=[],C=this.transform;if(!C)return w;for(var M=g?C.getCameraQueryGeometry(c):c,B=c.map(function(De){return C.pointCoordinate(De)}),K=M.map(function(De){return C.pointCoordinate(De)}),Z=this.getIds(),Y=1/0,ce=1/0,ue=-1/0,xe=-1/0,oe=0,ve=K;oe<ve.length;oe+=1){var Se=ve[oe];Y=Math.min(Y,Se.x),ce=Math.min(ce,Se.y),ue=Math.max(ue,Se.x),xe=Math.max(xe,Se.y)}for(var Pe=function(De){var je=b._tiles[Z[De]];if(!je.holdingForFade()){var Ke=je.tileID,tt=Math.pow(2,C.zoom-je.tileID.overscaledZ),Qe=d*je.queryPadding*o.EXTENT/je.tileSize/tt,ft=[Ke.getTilePoint(new o.MercatorCoordinate(Y,ce)),Ke.getTilePoint(new o.MercatorCoordinate(ue,xe))];if(ft[0].x-Qe<o.EXTENT&&ft[0].y-Qe<o.EXTENT&&ft[1].x+Qe>=0&&ft[1].y+Qe>=0){var Et=B.map(function(Tt){return Ke.getTilePoint(Tt)}),It=K.map(function(Tt){return Ke.getTilePoint(Tt)});w.push({tile:je,tileID:Ke,queryGeometry:Et,cameraQueryGeometry:It,scale:tt})}}},Fe=0;Fe<Z.length;Fe++)Pe(Fe);return w},p.prototype.getVisibleCoordinates=function(c){for(var d=this,g=this.getRenderableIds(c).map(function(M){return d._tiles[M].tileID}),b=0,w=g;b<w.length;b+=1){var C=w[b];C.posMatrix=this.transform.calculatePosMatrix(C.toUnwrapped())}return g},p.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Ge(this._source.type))for(var c in this._tiles){var d=this._tiles[c];if(d.fadeEndTime!==void 0&&d.fadeEndTime>=o.browser.now())return!0}return!1},p.prototype.setFeatureState=function(c,d,g){this._state.updateState(c=c||"_geojsonTileLayer",d,g)},p.prototype.removeFeatureState=function(c,d,g){this._state.removeFeatureState(c=c||"_geojsonTileLayer",d,g)},p.prototype.getFeatureState=function(c,d){return this._state.getState(c=c||"_geojsonTileLayer",d)},p.prototype.setDependencies=function(c,d,g){var b=this._tiles[c];b&&b.setDependencies(d,g)},p.prototype.reloadTilesForDependencies=function(c,d){for(var g in this._tiles)this._tiles[g].hasDependency(c,d)&&this._reloadTile(g,"reloading");this._cache.filter(function(b){return!b.hasDependency(c,d)})},p}(o.Evented);function Ee(l,p){var c=Math.abs(2*l.wrap)-+(l.wrap<0),d=Math.abs(2*p.wrap)-+(p.wrap<0);return l.overscaledZ-p.overscaledZ||d-c||p.canonical.y-l.canonical.y||p.canonical.x-l.canonical.x}function Ge(l){return l==="raster"||l==="image"||l==="video"}function Ze(){return new o.window.Worker(Pc.workerUrl)}ne.maxOverzooming=10,ne.maxUnderzooming=3;var Ue="mapboxgl_preloaded_worker_pool",Xe=function(){this.active={}};Xe.prototype.acquire=function(l){if(!this.workers)for(this.workers=[];this.workers.length<Xe.workerCount;)this.workers.push(new Ze);return this.active[l]=!0,this.workers.slice()},Xe.prototype.release=function(l){delete this.active[l],this.numActive()===0&&(this.workers.forEach(function(p){p.terminate()}),this.workers=null)},Xe.prototype.isPreloaded=function(){return!!this.active[Ue]},Xe.prototype.numActive=function(){return Object.keys(this.active).length};var vt,yt=Math.floor(o.browser.hardwareConcurrency/2);function Ve(){return vt||(vt=new Xe),vt}function dt(l,p){var c={};for(var d in l)d!=="ref"&&(c[d]=l[d]);return o.refProperties.forEach(function(g){g in p&&(c[g]=p[g])}),c}function it(l){l=l.slice();for(var p=Object.create(null),c=0;c<l.length;c++)p[l[c].id]=l[c];for(var d=0;d<l.length;d++)"ref"in l[d]&&(l[d]=dt(l[d],p[l[d].ref]));return l}Xe.workerCount=Math.max(Math.min(yt,6),1);var at={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function or(l,p,c){c.push({command:at.addSource,args:[l,p[l]]})}function pt(l,p,c){p.push({command:at.removeSource,args:[l]}),c[l]=!0}function fr(l,p,c,d){pt(l,c,d),or(l,p,c)}function Gr(l,p,c){var d;for(d in l[c])if(l[c].hasOwnProperty(d)&&d!=="data"&&!o.deepEqual(l[c][d],p[c][d]))return!1;for(d in p[c])if(p[c].hasOwnProperty(d)&&d!=="data"&&!o.deepEqual(l[c][d],p[c][d]))return!1;return!0}function ur(l,p,c,d,g,b){var w;for(w in p=p||{},l=l||{})l.hasOwnProperty(w)&&(o.deepEqual(l[w],p[w])||c.push({command:b,args:[d,w,p[w],g]}));for(w in p)p.hasOwnProperty(w)&&!l.hasOwnProperty(w)&&(o.deepEqual(l[w],p[w])||c.push({command:b,args:[d,w,p[w],g]}))}function Tr(l){return l.id}function gr(l,p){return l[p.id]=p,l}var bi=function(l,p){this.reset(l,p)};bi.prototype.reset=function(l,p){this.points=l||[],this._distances=[0];for(var c=1;c<this.points.length;c++)this._distances[c]=this._distances[c-1]+this.points[c].dist(this.points[c-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(p||0,.5*this.length),this.paddedLength=this.length-2*this.padding},bi.prototype.lerp=function(l){if(this.points.length===1)return this.points[0];l=o.clamp(l,0,1);for(var p=1,c=this._distances[p],d=l*this.paddedLength+this.padding;c<d&&p<this._distances.length;)c=this._distances[++p];var g=p-1,b=this._distances[g],w=c-b,C=w>0?(d-b)/w:0;return this.points[g].mult(1-C).add(this.points[p].mult(C))};var Lr=function(l,p,c){var d=this.boxCells=[],g=this.circleCells=[];this.xCellCount=Math.ceil(l/c),this.yCellCount=Math.ceil(p/c);for(var b=0;b<this.xCellCount*this.yCellCount;b++)d.push([]),g.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=l,this.height=p,this.xScale=this.xCellCount/l,this.yScale=this.yCellCount/p,this.boxUid=0,this.circleUid=0};function En(l,p,c,d,g){var b=o.create();return p?(o.scale(b,b,[1/g,1/g,1]),c||o.rotateZ(b,b,d.angle)):o.multiply(b,d.labelPlaneMatrix,l),b}function qr(l,p,c,d,g){if(p){var b=o.clone(l);return o.scale(b,b,[g,g,1]),c||o.rotateZ(b,b,-d.angle),b}return d.glCoordMatrix}function dr(l,p){var c=[l.x,l.y,0,1];ei(c,c,p);var d=c[3];return{point:new o.Point(c[0]/d,c[1]/d),signedDistanceFromCamera:d}}function Ir(l,p){return .5+l/p*.5}function Ri(l,p){var c=l[0]/l[3],d=l[1]/l[3];return c>=-p[0]&&c<=p[0]&&d>=-p[1]&&d<=p[1]}function ou(l,p,c,d,g,b,w,C){var M=d?l.textSizeData:l.iconSizeData,B=o.evaluateSizeForZoom(M,c.transform.zoom),K=[256/c.width*2+1,256/c.height*2+1],Z=d?l.text.dynamicLayoutVertexArray:l.icon.dynamicLayoutVertexArray;Z.clear();for(var Y=l.lineVertexArray,ce=d?l.text.placedSymbolArray:l.icon.placedSymbolArray,ue=c.transform.width/c.transform.height,xe=!1,oe=0;oe<ce.length;oe++){var ve=ce.get(oe);if(ve.hidden||ve.writingMode===o.WritingMode.vertical&&!xe)wi(ve.numGlyphs,Z);else{xe=!1;var Se=[ve.anchorX,ve.anchorY,0,1];if(o.transformMat4(Se,Se,p),Ri(Se,K)){var Pe=Ir(c.transform.cameraToCenterDistance,Se[3]),Fe=o.evaluateSizeForFeature(M,B,ve),De=w?Fe/Pe:Fe*Pe,je=new o.Point(ve.anchorX,ve.anchorY),Ke=dr(je,g).point,tt={},Qe=hh(ve,De,!1,C,p,g,b,l.glyphOffsetArray,Y,Z,Ke,je,tt,ue);xe=Qe.useVertical,(Qe.notEnoughRoom||xe||Qe.needsFlipping&&hh(ve,De,!0,C,p,g,b,l.glyphOffsetArray,Y,Z,Ke,je,tt,ue).notEnoughRoom)&&wi(ve.numGlyphs,Z)}else wi(ve.numGlyphs,Z)}}d?l.text.dynamicLayoutVertexBuffer.updateData(Z):l.icon.dynamicLayoutVertexBuffer.updateData(Z)}function Qn(l,p,c,d,g,b,w,C,M,B,K){var Z=C.glyphStartIndex+C.numGlyphs,Y=C.lineStartIndex,ce=C.lineStartIndex+C.lineLength,ue=p.getoffsetX(C.glyphStartIndex),xe=p.getoffsetX(Z-1),oe=Cn(l*ue,c,d,g,b,w,C.segment,Y,ce,M,B,K);if(!oe)return null;var ve=Cn(l*xe,c,d,g,b,w,C.segment,Y,ce,M,B,K);return ve?{first:oe,last:ve}:null}function Li(l,p,c,d){return l===o.WritingMode.horizontal&&Math.abs(c.y-p.y)>Math.abs(c.x-p.x)*d?{useVertical:!0}:(l===o.WritingMode.vertical?p.y<c.y:p.x>c.x)?{needsFlipping:!0}:null}function hh(l,p,c,d,g,b,w,C,M,B,K,Z,Y,ce){var ue,xe=p/24,oe=l.lineOffsetX*xe,ve=l.lineOffsetY*xe;if(l.numGlyphs>1){var Se=l.glyphStartIndex+l.numGlyphs,Pe=l.lineStartIndex,Fe=l.lineStartIndex+l.lineLength,De=Qn(xe,C,oe,ve,c,K,Z,l,M,b,Y);if(!De)return{notEnoughRoom:!0};var je=dr(De.first.point,w).point,Ke=dr(De.last.point,w).point;if(d&&!c){var tt=Li(l.writingMode,je,Ke,ce);if(tt)return tt}ue=[De.first];for(var Qe=l.glyphStartIndex+1;Qe<Se-1;Qe++)ue.push(Cn(xe*C.getoffsetX(Qe),oe,ve,c,K,Z,l.segment,Pe,Fe,M,b,Y));ue.push(De.last)}else{if(d&&!c){var ft=dr(Z,g).point,Et=l.lineStartIndex+l.segment+1,It=new o.Point(M.getx(Et),M.gety(Et)),Tt=dr(It,g),_r=Tt.signedDistanceFromCamera>0?Tt.point:au(Z,It,ft,1,g),mt=Li(l.writingMode,ft,_r,ce);if(mt)return mt}var qt=Cn(xe*C.getoffsetX(l.glyphStartIndex),oe,ve,c,K,Z,l.segment,l.lineStartIndex,l.lineStartIndex+l.lineLength,M,b,Y);if(!qt)return{notEnoughRoom:!0};ue=[qt]}for(var rr=0,Vt=ue;rr<Vt.length;rr+=1){var Ut=Vt[rr];o.addDynamicAttributes(B,Ut.point,Ut.angle)}return{}}function au(l,p,c,d,g){var b=dr(l.add(l.sub(p)._unit()),g).point,w=c.sub(b);return c.add(w._mult(d/w.mag()))}function Cn(l,p,c,d,g,b,w,C,M,B,K,Z){var Y=d?l-p:l+p,ce=Y>0?1:-1,ue=0;d&&(ce*=-1,ue=Math.PI),ce<0&&(ue+=Math.PI);for(var xe=ce>0?C+w:C+w+1,oe=g,ve=g,Se=0,Pe=0,Fe=Math.abs(Y),De=[];Se+Pe<=Fe;){if((xe+=ce)<C||xe>=M)return null;if(ve=oe,De.push(oe),(oe=Z[xe])===void 0){var je=new o.Point(B.getx(xe),B.gety(xe)),Ke=dr(je,K);if(Ke.signedDistanceFromCamera>0)oe=Z[xe]=Ke.point;else{var tt=xe-ce;oe=au(Se===0?b:new o.Point(B.getx(tt),B.gety(tt)),je,ve,Fe-Se+1,K)}}Se+=Pe,Pe=ve.dist(oe)}var Qe=(Fe-Se)/Pe,ft=oe.sub(ve),Et=ft.mult(Qe)._add(ve);Et._add(ft._unit()._perp()._mult(c*ce));var It=ue+Math.atan2(oe.y-ve.y,oe.x-ve.x);return De.push(Et),{point:Et,angle:It,path:De}}Lr.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Lr.prototype.insert=function(l,p,c,d,g){this._forEachCell(p,c,d,g,this._insertBoxCell,this.boxUid++),this.boxKeys.push(l),this.bboxes.push(p),this.bboxes.push(c),this.bboxes.push(d),this.bboxes.push(g)},Lr.prototype.insertCircle=function(l,p,c,d){this._forEachCell(p-d,c-d,p+d,c+d,this._insertCircleCell,this.circleUid++),this.circleKeys.push(l),this.circles.push(p),this.circles.push(c),this.circles.push(d)},Lr.prototype._insertBoxCell=function(l,p,c,d,g,b){this.boxCells[g].push(b)},Lr.prototype._insertCircleCell=function(l,p,c,d,g,b){this.circleCells[g].push(b)},Lr.prototype._query=function(l,p,c,d,g,b){if(c<0||l>this.width||d<0||p>this.height)return!g&&[];var w=[];if(l<=0&&p<=0&&this.width<=c&&this.height<=d){if(g)return!0;for(var C=0;C<this.boxKeys.length;C++)w.push({key:this.boxKeys[C],x1:this.bboxes[4*C],y1:this.bboxes[4*C+1],x2:this.bboxes[4*C+2],y2:this.bboxes[4*C+3]});for(var M=0;M<this.circleKeys.length;M++){var B=this.circles[3*M],K=this.circles[3*M+1],Z=this.circles[3*M+2];w.push({key:this.circleKeys[M],x1:B-Z,y1:K-Z,x2:B+Z,y2:K+Z})}return b?w.filter(b):w}return this._forEachCell(l,p,c,d,this._queryCell,w,{hitTest:g,seenUids:{box:{},circle:{}}},b),g?w.length>0:w},Lr.prototype._queryCircle=function(l,p,c,d,g){var b=l-c,w=l+c,C=p-c,M=p+c;if(w<0||b>this.width||M<0||C>this.height)return!d&&[];var B=[];return this._forEachCell(b,C,w,M,this._queryCellCircle,B,{hitTest:d,circle:{x:l,y:p,radius:c},seenUids:{box:{},circle:{}}},g),d?B.length>0:B},Lr.prototype.query=function(l,p,c,d,g){return this._query(l,p,c,d,!1,g)},Lr.prototype.hitTest=function(l,p,c,d,g){return this._query(l,p,c,d,!0,g)},Lr.prototype.hitTestCircle=function(l,p,c,d){return this._queryCircle(l,p,c,!0,d)},Lr.prototype._queryCell=function(l,p,c,d,g,b,w,C){var M=w.seenUids,B=this.boxCells[g];if(B!==null)for(var K=this.bboxes,Z=0,Y=B;Z<Y.length;Z+=1){var ce=Y[Z];if(!M.box[ce]){M.box[ce]=!0;var ue=4*ce;if(l<=K[ue+2]&&p<=K[ue+3]&&c>=K[ue+0]&&d>=K[ue+1]&&(!C||C(this.boxKeys[ce]))){if(w.hitTest)return b.push(!0),!0;b.push({key:this.boxKeys[ce],x1:K[ue],y1:K[ue+1],x2:K[ue+2],y2:K[ue+3]})}}}var xe=this.circleCells[g];if(xe!==null)for(var oe=this.circles,ve=0,Se=xe;ve<Se.length;ve+=1){var Pe=Se[ve];if(!M.circle[Pe]){M.circle[Pe]=!0;var Fe=3*Pe;if(this._circleAndRectCollide(oe[Fe],oe[Fe+1],oe[Fe+2],l,p,c,d)&&(!C||C(this.circleKeys[Pe]))){if(w.hitTest)return b.push(!0),!0;var De=oe[Fe],je=oe[Fe+1],Ke=oe[Fe+2];b.push({key:this.circleKeys[Pe],x1:De-Ke,y1:je-Ke,x2:De+Ke,y2:je+Ke})}}}},Lr.prototype._queryCellCircle=function(l,p,c,d,g,b,w,C){var M=w.circle,B=w.seenUids,K=this.boxCells[g];if(K!==null)for(var Z=this.bboxes,Y=0,ce=K;Y<ce.length;Y+=1){var ue=ce[Y];if(!B.box[ue]){B.box[ue]=!0;var xe=4*ue;if(this._circleAndRectCollide(M.x,M.y,M.radius,Z[xe+0],Z[xe+1],Z[xe+2],Z[xe+3])&&(!C||C(this.boxKeys[ue])))return b.push(!0),!0}}var oe=this.circleCells[g];if(oe!==null)for(var ve=this.circles,Se=0,Pe=oe;Se<Pe.length;Se+=1){var Fe=Pe[Se];if(!B.circle[Fe]){B.circle[Fe]=!0;var De=3*Fe;if(this._circlesCollide(ve[De],ve[De+1],ve[De+2],M.x,M.y,M.radius)&&(!C||C(this.circleKeys[Fe])))return b.push(!0),!0}}},Lr.prototype._forEachCell=function(l,p,c,d,g,b,w,C){for(var M=this._convertToXCellCoord(l),B=this._convertToYCellCoord(p),K=this._convertToXCellCoord(c),Z=this._convertToYCellCoord(d),Y=M;Y<=K;Y++)for(var ce=B;ce<=Z;ce++)if(g.call(this,l,p,c,d,this.xCellCount*ce+Y,b,w,C))return},Lr.prototype._convertToXCellCoord=function(l){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(l*this.xScale)))},Lr.prototype._convertToYCellCoord=function(l){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(l*this.yScale)))},Lr.prototype._circlesCollide=function(l,p,c,d,g,b){var w=d-l,C=g-p,M=c+b;return M*M>w*w+C*C},Lr.prototype._circleAndRectCollide=function(l,p,c,d,g,b,w){var C=(b-d)/2,M=Math.abs(l-(d+C));if(M>C+c)return!1;var B=(w-g)/2,K=Math.abs(p-(g+B));if(K>B+c)return!1;if(M<=C||K<=B)return!0;var Z=M-C,Y=K-B;return Z*Z+Y*Y<=c*c};var su=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function wi(l,p){for(var c=0;c<l;c++){var d=p.length;p.resize(d+4),p.float32.set(su,3*d)}}function ei(l,p,c){var d=p[0],g=p[1];return l[0]=c[0]*d+c[4]*g+c[12],l[1]=c[1]*d+c[5]*g+c[13],l[3]=c[3]*d+c[7]*g+c[15],l}var go=function(l,p,c){p===void 0&&(p=new Lr(l.width+200,l.height+200,25)),c===void 0&&(c=new Lr(l.width+200,l.height+200,25)),this.transform=l,this.grid=p,this.ignoredGrid=c,this.pitchfactor=Math.cos(l._pitch)*l.cameraToCenterDistance,this.screenRightBoundary=l.width+100,this.screenBottomBoundary=l.height+100,this.gridRightBoundary=l.width+200,this.gridBottomBoundary=l.height+200};function an(l,p,c){return p*(o.EXTENT/(l.tileSize*Math.pow(2,c-l.tileID.overscaledZ)))}go.prototype.placeCollisionBox=function(l,p,c,d,g){var b=this.projectAndGetPerspectiveRatio(d,l.anchorPointX,l.anchorPointY),w=c*b.perspectiveRatio,C=l.x1*w+b.point.x,M=l.y1*w+b.point.y,B=l.x2*w+b.point.x,K=l.y2*w+b.point.y;return!this.isInsideGrid(C,M,B,K)||!p&&this.grid.hitTest(C,M,B,K,g)?{box:[],offscreen:!1}:{box:[C,M,B,K],offscreen:this.isOffscreen(C,M,B,K)}},go.prototype.placeCollisionCircles=function(l,p,c,d,g,b,w,C,M,B,K,Z,Y){var ce=[],ue=new o.Point(p.anchorX,p.anchorY),xe=dr(ue,b),oe=Ir(this.transform.cameraToCenterDistance,xe.signedDistanceFromCamera),ve=(B?g/oe:g*oe)/o.ONE_EM,Se=dr(ue,w).point,Pe=Qn(ve,d,p.lineOffsetX*ve,p.lineOffsetY*ve,!1,Se,ue,p,c,w,{}),Fe=!1,De=!1,je=!0;if(Pe){for(var Ke=.5*Z*oe+Y,tt=new o.Point(-100,-100),Qe=new o.Point(this.screenRightBoundary,this.screenBottomBoundary),ft=new bi,Et=Pe.first,It=Pe.last,Tt=[],_r=Et.path.length-1;_r>=1;_r--)Tt.push(Et.path[_r]);for(var mt=1;mt<It.path.length;mt++)Tt.push(It.path[mt]);var qt=2.5*Ke;if(C){var rr=Tt.map(function(So){return dr(So,C)});Tt=rr.some(function(So){return So.signedDistanceFromCamera<=0})?[]:rr.map(function(So){return So.point})}var Vt=[];if(Tt.length>0){for(var Ut=Tt[0].clone(),Jt=Tt[0].clone(),Ft=1;Ft<Tt.length;Ft++)Ut.x=Math.min(Ut.x,Tt[Ft].x),Ut.y=Math.min(Ut.y,Tt[Ft].y),Jt.x=Math.max(Jt.x,Tt[Ft].x),Jt.y=Math.max(Jt.y,Tt[Ft].y);Vt=Ut.x>=tt.x&&Jt.x<=Qe.x&&Ut.y>=tt.y&&Jt.y<=Qe.y?[Tt]:Jt.x<tt.x||Ut.x>Qe.x||Jt.y<tt.y||Ut.y>Qe.y?[]:o.clipLine([Tt],tt.x,tt.y,Qe.x,Qe.y)}for(var Ot=0,Gn=Vt;Ot<Gn.length;Ot+=1){var vn;ft.reset(Gn[Ot],.25*Ke),vn=ft.length<=.5*Ke?1:Math.ceil(ft.paddedLength/qt)+1;for(var yi=0;yi<vn;yi++){var ri=yi/Math.max(vn-1,1),mn=ft.lerp(ri),kn=mn.x+100,Ji=mn.y+100;ce.push(kn,Ji,Ke,0);var ki=kn-Ke,ts=Ji-Ke,Di=kn+Ke,qo=Ji+Ke;if(je=je&&this.isOffscreen(ki,ts,Di,qo),De=De||this.isInsideGrid(ki,ts,Di,qo),!l&&this.grid.hitTestCircle(kn,Ji,Ke,K)&&(Fe=!0,!M))return{circles:[],offscreen:!1,collisionDetected:Fe}}}}return{circles:!M&&Fe||!De?[]:ce,offscreen:je,collisionDetected:Fe}},go.prototype.queryRenderedSymbols=function(l){if(l.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var p=[],c=1/0,d=1/0,g=-1/0,b=-1/0,w=0,C=l;w<C.length;w+=1){var M=C[w],B=new o.Point(M.x+100,M.y+100);c=Math.min(c,B.x),d=Math.min(d,B.y),g=Math.max(g,B.x),b=Math.max(b,B.y),p.push(B)}for(var K={},Z={},Y=0,ce=this.grid.query(c,d,g,b).concat(this.ignoredGrid.query(c,d,g,b));Y<ce.length;Y+=1){var ue=ce[Y],xe=ue.key;if(K[xe.bucketInstanceId]===void 0&&(K[xe.bucketInstanceId]={}),!K[xe.bucketInstanceId][xe.featureIndex]){var oe=[new o.Point(ue.x1,ue.y1),new o.Point(ue.x2,ue.y1),new o.Point(ue.x2,ue.y2),new o.Point(ue.x1,ue.y2)];o.polygonIntersectsPolygon(p,oe)&&(K[xe.bucketInstanceId][xe.featureIndex]=!0,Z[xe.bucketInstanceId]===void 0&&(Z[xe.bucketInstanceId]=[]),Z[xe.bucketInstanceId].push(xe.featureIndex))}}return Z},go.prototype.insertCollisionBox=function(l,p,c,d,g){(p?this.ignoredGrid:this.grid).insert({bucketInstanceId:c,featureIndex:d,collisionGroupID:g},l[0],l[1],l[2],l[3])},go.prototype.insertCollisionCircles=function(l,p,c,d,g){for(var b=p?this.ignoredGrid:this.grid,w={bucketInstanceId:c,featureIndex:d,collisionGroupID:g},C=0;C<l.length;C+=4)b.insertCircle(w,l[C],l[C+1],l[C+2])},go.prototype.projectAndGetPerspectiveRatio=function(l,p,c){var d=[p,c,0,1];return ei(d,d,l),{point:new o.Point((d[0]/d[3]+1)/2*this.transform.width+100,(-d[1]/d[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/d[3]*.5}},go.prototype.isOffscreen=function(l,p,c,d){return c<100||l>=this.screenRightBoundary||d<100||p>this.screenBottomBoundary},go.prototype.isInsideGrid=function(l,p,c,d){return c>=0&&l<this.gridRightBoundary&&d>=0&&p<this.gridBottomBoundary},go.prototype.getViewportMatrix=function(){var l=o.identity([]);return o.translate(l,l,[-100,-100,0]),l};var No=function(l,p,c,d){this.opacity=l?Math.max(0,Math.min(1,l.opacity+(l.placed?p:-p))):d&&c?1:0,this.placed=c};No.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var ao=function(l,p,c,d,g){this.text=new No(l?l.text:null,p,c,g),this.icon=new No(l?l.icon:null,p,d,g)};ao.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var zf=function(l,p,c){this.text=l,this.icon=p,this.skipFade=c},vo=function(){this.invProjMatrix=o.create(),this.viewportMatrix=o.create(),this.circles=[]},Xv=function(l,p,c,d,g){this.bucketInstanceId=l,this.featureIndex=p,this.sourceLayerIndex=c,this.bucketIndex=d,this.tileID=g},ba=function(l){this.crossSourceCollisions=l,this.maxGroupID=0,this.collisionGroups={}};function ui(l,p,c,d,g){var b=o.getAnchorAlignment(l),w=-(b.horizontalAlign-.5)*p,C=-(b.verticalAlign-.5)*c,M=o.evaluateVariableOffset(l,d);return new o.Point(w+M[0]*g,C+M[1]*g)}function ia(l,p,c,d,g,b){var w=l.x1,C=l.x2,M=l.y1,B=l.y2,K=l.anchorPointX,Z=l.anchorPointY,Y=new o.Point(p,c);return d&&Y._rotate(g?b:-b),{x1:w+Y.x,y1:M+Y.y,x2:C+Y.x,y2:B+Y.y,anchorPointX:K,anchorPointY:Z}}ba.prototype.get=function(l){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[l]){var p=++this.maxGroupID;this.collisionGroups[l]={ID:p,predicate:function(c){return c.collisionGroupID===p}}}return this.collisionGroups[l]};var Si=function(l,p,c,d){this.transform=l.clone(),this.collisionIndex=new go(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=p,this.retainedQueryData={},this.collisionGroups=new ba(c),this.collisionCircleArrays={},this.prevPlacement=d,d&&(d.prevPlacement=void 0),this.placedOrientations={}};function Es(l,p,c,d,g){l.emplaceBack(p?1:0,c?1:0,d||0,g||0),l.emplaceBack(p?1:0,c?1:0,d||0,g||0),l.emplaceBack(p?1:0,c?1:0,d||0,g||0),l.emplaceBack(p?1:0,c?1:0,d||0,g||0)}Si.prototype.getBucketParts=function(l,p,c,d){var g=c.getBucket(p),b=c.latestFeatureIndex;if(g&&b&&p.id===g.layerIds[0]){var w=c.collisionBoxArray,C=g.layers[0].layout,M=Math.pow(2,this.transform.zoom-c.tileID.overscaledZ),B=c.tileSize/o.EXTENT,K=this.transform.calculatePosMatrix(c.tileID.toUnwrapped()),Z=C.get("text-pitch-alignment")==="map",Y=C.get("text-rotation-alignment")==="map",ce=an(c,1,this.transform.zoom),ue=En(K,Z,Y,this.transform,ce),xe=null;if(Z){var oe=qr(K,Z,Y,this.transform,ce);xe=o.multiply([],this.transform.labelPlaneMatrix,oe)}this.retainedQueryData[g.bucketInstanceId]=new Xv(g.bucketInstanceId,b,g.sourceLayerIndex,g.index,c.tileID);var ve={bucket:g,layout:C,posMatrix:K,textLabelPlaneMatrix:ue,labelToScreenMatrix:xe,scale:M,textPixelRatio:B,holdingForFade:c.holdingForFade(),collisionBoxArray:w,partiallyEvaluatedTextSize:o.evaluateSizeForZoom(g.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(g.sourceID)};if(d)for(var Se=0,Pe=g.sortKeyRanges;Se<Pe.length;Se+=1){var Fe=Pe[Se];l.push({sortKey:Fe.sortKey,symbolInstanceStart:Fe.symbolInstanceStart,symbolInstanceEnd:Fe.symbolInstanceEnd,parameters:ve})}else l.push({symbolInstanceStart:0,symbolInstanceEnd:g.symbolInstances.length,parameters:ve})}},Si.prototype.attemptAnchorPlacement=function(l,p,c,d,g,b,w,C,M,B,K,Z,Y,ce,ue){var xe,oe=[Z.textOffset0,Z.textOffset1],ve=ui(l,c,d,oe,g),Se=this.collisionIndex.placeCollisionBox(ia(p,ve.x,ve.y,b,w,this.transform.angle),K,C,M,B.predicate);if(!ue||this.collisionIndex.placeCollisionBox(ia(ue,ve.x,ve.y,b,w,this.transform.angle),K,C,M,B.predicate).box.length!==0)return Se.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[Z.crossTileID]&&this.prevPlacement.placements[Z.crossTileID]&&this.prevPlacement.placements[Z.crossTileID].text&&(xe=this.prevPlacement.variableOffsets[Z.crossTileID].anchor),this.variableOffsets[Z.crossTileID]={textOffset:oe,width:c,height:d,anchor:l,textBoxScale:g,prevAnchor:xe},this.markUsedJustification(Y,l,Z,ce),Y.allowVerticalPlacement&&(this.markUsedOrientation(Y,ce,Z),this.placedOrientations[Z.crossTileID]=ce),{shift:ve,placedGlyphBoxes:Se}):void 0},Si.prototype.placeLayerBucketPart=function(l,p,c){var d=this,g=l.parameters,b=g.bucket,w=g.layout,C=g.posMatrix,M=g.textLabelPlaneMatrix,B=g.labelToScreenMatrix,K=g.textPixelRatio,Z=g.holdingForFade,Y=g.collisionBoxArray,ce=g.partiallyEvaluatedTextSize,ue=g.collisionGroup,xe=w.get("text-optional"),oe=w.get("icon-optional"),ve=w.get("text-allow-overlap"),Se=w.get("icon-allow-overlap"),Pe=w.get("text-rotation-alignment")==="map",Fe=w.get("text-pitch-alignment")==="map",De=w.get("icon-text-fit")!=="none",je=w.get("symbol-z-order")==="viewport-y",Ke=ve&&(Se||!b.hasIconData()||oe),tt=Se&&(ve||!b.hasTextData()||xe);!b.collisionArrays&&Y&&b.deserializeCollisionBoxes(Y);var Qe=function(mt,qt){if(!p[mt.crossTileID])if(Z)d.placements[mt.crossTileID]=new zf(!1,!1,!1);else{var rr,Vt=!1,Ut=!1,Jt=!0,Ft=null,Ot={box:null,offscreen:null},Gn={box:null,offscreen:null},vn=null,yi=null,ri=0,mn=0,kn=0;qt.textFeatureIndex?ri=qt.textFeatureIndex:mt.useRuntimeCollisionCircles&&(ri=mt.featureIndex),qt.verticalTextFeatureIndex&&(mn=qt.verticalTextFeatureIndex);var Ji=qt.textBox;if(Ji){var ki=function(Pr){var uo=o.WritingMode.horizontal;if(b.allowVerticalPlacement&&!Pr&&d.prevPlacement){var Oi=d.prevPlacement.placedOrientations[mt.crossTileID];Oi&&(d.placedOrientations[mt.crossTileID]=Oi,d.markUsedOrientation(b,uo=Oi,mt))}return uo},ts=function(Pr,uo){if(b.allowVerticalPlacement&&mt.numVerticalGlyphVertices>0&&qt.verticalTextBox)for(var Oi=0,$s=b.writingModes;Oi<$s.length&&($s[Oi]===o.WritingMode.vertical?(Ot=uo(),Gn=Ot):Ot=Pr(),!(Ot&&Ot.box&&Ot.box.length));Oi+=1);else Ot=Pr()};if(w.get("text-variable-anchor")){var Di=w.get("text-variable-anchor");if(d.prevPlacement&&d.prevPlacement.variableOffsets[mt.crossTileID]){var qo=d.prevPlacement.variableOffsets[mt.crossTileID];Di.indexOf(qo.anchor)>0&&(Di=Di.filter(function(Pr){return Pr!==qo.anchor})).unshift(qo.anchor)}var So=function(Pr,uo,Oi){for(var $s=Pr.x2-Pr.x1,c0=Pr.y2-Pr.y1,Ac=mt.textBoxScale,p0=De&&!Se?uo:null,Iu={box:[],offscreen:!1},um=ve?2*Di.length:Di.length,kl=0;kl<um;++kl){var Mc=d.attemptAnchorPlacement(Di[kl%Di.length],Pr,$s,c0,Ac,Pe,Fe,K,C,ue,kl>=Di.length,mt,b,Oi,p0);if(Mc&&(Iu=Mc.placedGlyphBoxes)&&Iu.box&&Iu.box.length){Vt=!0,Ft=Mc.shift;break}}return Iu};ts(function(){return So(Ji,qt.iconBox,o.WritingMode.horizontal)},function(){var Pr=qt.verticalTextBox;return b.allowVerticalPlacement&&!(Ot&&Ot.box&&Ot.box.length)&&mt.numVerticalGlyphVertices>0&&Pr?So(Pr,qt.verticalIconBox,o.WritingMode.vertical):{box:null,offscreen:null}}),Ot&&(Vt=Ot.box,Jt=Ot.offscreen);var Cu=ki(Ot&&Ot.box);if(!Vt&&d.prevPlacement){var El=d.prevPlacement.variableOffsets[mt.crossTileID];El&&(d.variableOffsets[mt.crossTileID]=El,d.markUsedJustification(b,El.anchor,mt,Cu))}}else{var rs=function(Pr,uo){var Oi=d.collisionIndex.placeCollisionBox(Pr,ve,K,C,ue.predicate);return Oi&&Oi.box&&Oi.box.length&&(d.markUsedOrientation(b,uo,mt),d.placedOrientations[mt.crossTileID]=uo),Oi};ts(function(){return rs(Ji,o.WritingMode.horizontal)},function(){var Pr=qt.verticalTextBox;return b.allowVerticalPlacement&&mt.numVerticalGlyphVertices>0&&Pr?rs(Pr,o.WritingMode.vertical):{box:null,offscreen:null}}),ki(Ot&&Ot.box&&Ot.box.length)}}if(Vt=(rr=Ot)&&rr.box&&rr.box.length>0,Jt=rr&&rr.offscreen,mt.useRuntimeCollisionCircles){var Cl=b.text.placedSymbolArray.get(mt.centerJustifiedTextSymbolIndex),ku=o.evaluateSizeForFeature(b.textSizeData,ce,Cl),la=w.get("text-padding");vn=d.collisionIndex.placeCollisionCircles(ve,Cl,b.lineVertexArray,b.glyphOffsetArray,ku,C,M,B,c,Fe,ue.predicate,mt.collisionCircleDiameter,la),Vt=ve||vn.circles.length>0&&!vn.collisionDetected,Jt=Jt&&vn.offscreen}if(qt.iconFeatureIndex&&(kn=qt.iconFeatureIndex),qt.iconBox){var Tu=function(Pr){var uo=De&&Ft?ia(Pr,Ft.x,Ft.y,Pe,Fe,d.transform.angle):Pr;return d.collisionIndex.placeCollisionBox(uo,Se,K,C,ue.predicate)};Ut=Gn&&Gn.box&&Gn.box.length&&qt.verticalIconBox?(yi=Tu(qt.verticalIconBox)).box.length>0:(yi=Tu(qt.iconBox)).box.length>0,Jt=Jt&&yi.offscreen}var ua=xe||mt.numHorizontalGlyphVertices===0&&mt.numVerticalGlyphVertices===0,Hn=oe||mt.numIconVertices===0;if(ua||Hn?Hn?ua||(Ut=Ut&&Vt):Vt=Ut&&Vt:Ut=Vt=Ut&&Vt,Vt&&rr&&rr.box&&d.collisionIndex.insertCollisionBox(rr.box,w.get("text-ignore-placement"),b.bucketInstanceId,Gn&&Gn.box&&mn?mn:ri,ue.ID),Ut&&yi&&d.collisionIndex.insertCollisionBox(yi.box,w.get("icon-ignore-placement"),b.bucketInstanceId,kn,ue.ID),vn&&(Vt&&d.collisionIndex.insertCollisionCircles(vn.circles,w.get("text-ignore-placement"),b.bucketInstanceId,ri,ue.ID),c)){var Ca=b.bucketInstanceId,ns=d.collisionCircleArrays[Ca];ns===void 0&&(ns=d.collisionCircleArrays[Ca]=new vo);for(var Us=0;Us<vn.circles.length;Us+=4)ns.circles.push(vn.circles[Us+0]),ns.circles.push(vn.circles[Us+1]),ns.circles.push(vn.circles[Us+2]),ns.circles.push(vn.collisionDetected?1:0)}d.placements[mt.crossTileID]=new zf(Vt||Ke,Ut||tt,Jt||b.justReloaded),p[mt.crossTileID]=!0}};if(je)for(var ft=b.getSortedSymbolIndexes(this.transform.angle),Et=ft.length-1;Et>=0;--Et){var It=ft[Et];Qe(b.symbolInstances.get(It),b.collisionArrays[It])}else for(var Tt=l.symbolInstanceStart;Tt<l.symbolInstanceEnd;Tt++)Qe(b.symbolInstances.get(Tt),b.collisionArrays[Tt]);if(c&&b.bucketInstanceId in this.collisionCircleArrays){var _r=this.collisionCircleArrays[b.bucketInstanceId];o.invert(_r.invProjMatrix,C),_r.viewportMatrix=this.collisionIndex.getViewportMatrix()}b.justReloaded=!1},Si.prototype.markUsedJustification=function(l,p,c,d){var g;g=d===o.WritingMode.vertical?c.verticalPlacedTextSymbolIndex:{left:c.leftJustifiedTextSymbolIndex,center:c.centerJustifiedTextSymbolIndex,right:c.rightJustifiedTextSymbolIndex}[o.getAnchorJustification(p)];for(var b=0,w=[c.leftJustifiedTextSymbolIndex,c.centerJustifiedTextSymbolIndex,c.rightJustifiedTextSymbolIndex,c.verticalPlacedTextSymbolIndex];b<w.length;b+=1){var C=w[b];C>=0&&(l.text.placedSymbolArray.get(C).crossTileID=g>=0&&C!==g?0:c.crossTileID)}},Si.prototype.markUsedOrientation=function(l,p,c){for(var d=p===o.WritingMode.horizontal||p===o.WritingMode.horizontalOnly?p:0,g=p===o.WritingMode.vertical?p:0,b=0,w=[c.leftJustifiedTextSymbolIndex,c.centerJustifiedTextSymbolIndex,c.rightJustifiedTextSymbolIndex];b<w.length;b+=1)l.text.placedSymbolArray.get(w[b]).placedOrientation=d;c.verticalPlacedTextSymbolIndex&&(l.text.placedSymbolArray.get(c.verticalPlacedTextSymbolIndex).placedOrientation=g)},Si.prototype.commit=function(l){this.commitTime=l,this.zoomAtLastRecencyCheck=this.transform.zoom;var p=this.prevPlacement,c=!1;this.prevZoomAdjustment=p?p.zoomAdjustment(this.transform.zoom):0;var d=p?p.symbolFadeChange(l):1,g=p?p.opacities:{},b=p?p.variableOffsets:{},w=p?p.placedOrientations:{};for(var C in this.placements){var M=this.placements[C],B=g[C];B?(this.opacities[C]=new ao(B,d,M.text,M.icon),c=c||M.text!==B.text.placed||M.icon!==B.icon.placed):(this.opacities[C]=new ao(null,d,M.text,M.icon,M.skipFade),c=c||M.text||M.icon)}for(var K in g){var Z=g[K];if(!this.opacities[K]){var Y=new ao(Z,d,!1,!1);Y.isHidden()||(this.opacities[K]=Y,c=c||Z.text.placed||Z.icon.placed)}}for(var ce in b)this.variableOffsets[ce]||!this.opacities[ce]||this.opacities[ce].isHidden()||(this.variableOffsets[ce]=b[ce]);for(var ue in w)this.placedOrientations[ue]||!this.opacities[ue]||this.opacities[ue].isHidden()||(this.placedOrientations[ue]=w[ue]);c?this.lastPlacementChangeTime=l:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=p?p.lastPlacementChangeTime:l)},Si.prototype.updateLayerOpacities=function(l,p){for(var c={},d=0,g=p;d<g.length;d+=1){var b=g[d],w=b.getBucket(l);w&&b.latestFeatureIndex&&l.id===w.layerIds[0]&&this.updateBucketOpacities(w,c,b.collisionBoxArray)}},Si.prototype.updateBucketOpacities=function(l,p,c){var d=this;l.hasTextData()&&l.text.opacityVertexArray.clear(),l.hasIconData()&&l.icon.opacityVertexArray.clear(),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexArray.clear(),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexArray.clear();var g=l.layers[0].layout,b=new ao(null,0,!1,!1,!0),w=g.get("text-allow-overlap"),C=g.get("icon-allow-overlap"),M=g.get("text-variable-anchor"),B=g.get("text-rotation-alignment")==="map",K=g.get("text-pitch-alignment")==="map",Z=g.get("icon-text-fit")!=="none",Y=new ao(null,0,w&&(C||!l.hasIconData()||g.get("icon-optional")),C&&(w||!l.hasTextData()||g.get("text-optional")),!0);!l.collisionArrays&&c&&(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData())&&l.deserializeCollisionBoxes(c);for(var ce=function(ve,Se,Pe){for(var Fe=0;Fe<Se/4;Fe++)ve.opacityVertexArray.emplaceBack(Pe)},ue=function(ve){var Se=l.symbolInstances.get(ve),Pe=Se.numHorizontalGlyphVertices,Fe=Se.numVerticalGlyphVertices,De=Se.crossTileID,je=d.opacities[De];p[De]?je=b:je||(d.opacities[De]=je=Y),p[De]=!0;var Ke=Se.numIconVertices>0,tt=d.placedOrientations[Se.crossTileID],Qe=tt===o.WritingMode.vertical,ft=tt===o.WritingMode.horizontal||tt===o.WritingMode.horizontalOnly;if(Pe>0||Fe>0){var Et=Df(je.text);ce(l.text,Pe,Qe?dl:Et),ce(l.text,Fe,ft?dl:Et);var It=je.text.isHidden();[Se.rightJustifiedTextSymbolIndex,Se.centerJustifiedTextSymbolIndex,Se.leftJustifiedTextSymbolIndex].forEach(function(Ot){Ot>=0&&(l.text.placedSymbolArray.get(Ot).hidden=It||Qe?1:0)}),Se.verticalPlacedTextSymbolIndex>=0&&(l.text.placedSymbolArray.get(Se.verticalPlacedTextSymbolIndex).hidden=It||ft?1:0);var Tt=d.variableOffsets[Se.crossTileID];Tt&&d.markUsedJustification(l,Tt.anchor,Se,tt);var _r=d.placedOrientations[Se.crossTileID];_r&&(d.markUsedJustification(l,"left",Se,_r),d.markUsedOrientation(l,_r,Se))}if(Ke){var mt=Df(je.icon),qt=!(Z&&Se.verticalPlacedIconSymbolIndex&&Qe);Se.placedIconSymbolIndex>=0&&(ce(l.icon,Se.numIconVertices,qt?mt:dl),l.icon.placedSymbolArray.get(Se.placedIconSymbolIndex).hidden=je.icon.isHidden()),Se.verticalPlacedIconSymbolIndex>=0&&(ce(l.icon,Se.numVerticalIconVertices,qt?dl:mt),l.icon.placedSymbolArray.get(Se.verticalPlacedIconSymbolIndex).hidden=je.icon.isHidden())}if(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData()){var rr=l.collisionArrays[ve];if(rr){var Vt=new o.Point(0,0);if(rr.textBox||rr.verticalTextBox){var Ut=!0;if(M){var Jt=d.variableOffsets[De];Jt?(Vt=ui(Jt.anchor,Jt.width,Jt.height,Jt.textOffset,Jt.textBoxScale),B&&Vt._rotate(K?d.transform.angle:-d.transform.angle)):Ut=!1}rr.textBox&&Es(l.textCollisionBox.collisionVertexArray,je.text.placed,!Ut||Qe,Vt.x,Vt.y),rr.verticalTextBox&&Es(l.textCollisionBox.collisionVertexArray,je.text.placed,!Ut||ft,Vt.x,Vt.y)}var Ft=!!(!ft&&rr.verticalIconBox);rr.iconBox&&Es(l.iconCollisionBox.collisionVertexArray,je.icon.placed,Ft,Z?Vt.x:0,Z?Vt.y:0),rr.verticalIconBox&&Es(l.iconCollisionBox.collisionVertexArray,je.icon.placed,!Ft,Z?Vt.x:0,Z?Vt.y:0)}}},xe=0;xe<l.symbolInstances.length;xe++)ue(xe);if(l.sortFeatures(this.transform.angle),this.retainedQueryData[l.bucketInstanceId]&&(this.retainedQueryData[l.bucketInstanceId].featureSortOrder=l.featureSortOrder),l.hasTextData()&&l.text.opacityVertexBuffer&&l.text.opacityVertexBuffer.updateData(l.text.opacityVertexArray),l.hasIconData()&&l.icon.opacityVertexBuffer&&l.icon.opacityVertexBuffer.updateData(l.icon.opacityVertexArray),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexBuffer&&l.iconCollisionBox.collisionVertexBuffer.updateData(l.iconCollisionBox.collisionVertexArray),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexBuffer&&l.textCollisionBox.collisionVertexBuffer.updateData(l.textCollisionBox.collisionVertexArray),l.bucketInstanceId in this.collisionCircleArrays){var oe=this.collisionCircleArrays[l.bucketInstanceId];l.placementInvProjMatrix=oe.invProjMatrix,l.placementViewportMatrix=oe.viewportMatrix,l.collisionCircleArray=oe.circles,delete this.collisionCircleArrays[l.bucketInstanceId]}},Si.prototype.symbolFadeChange=function(l){return this.fadeDuration===0?1:(l-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Si.prototype.zoomAdjustment=function(l){return Math.max(0,(this.transform.zoom-l)/1.5)},Si.prototype.hasTransitions=function(l){return this.stale||l-this.lastPlacementChangeTime<this.fadeDuration},Si.prototype.stillRecent=function(l,p){var c=this.zoomAtLastRecencyCheck===p?1-this.zoomAdjustment(p):1;return this.zoomAtLastRecencyCheck=p,this.commitTime+this.fadeDuration*c>l},Si.prototype.setStale=function(){this.stale=!0};var Yv=Math.pow(2,25),Jv=Math.pow(2,24),dh=Math.pow(2,17),Qv=Math.pow(2,16),Rf=Math.pow(2,9),e0=Math.pow(2,8),Lf=Math.pow(2,1);function Df(l){if(l.opacity===0&&!l.placed)return 0;if(l.opacity===1&&l.placed)return 4294967295;var p=l.placed?1:0,c=Math.floor(127*l.opacity);return c*Yv+p*Jv+c*dh+p*Qv+c*Rf+p*e0+c*Lf+p}var dl=0,fh=function(l){this._sortAcrossTiles=l.layout.get("symbol-z-order")!=="viewport-y"&&l.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};fh.prototype.continuePlacement=function(l,p,c,d,g){for(var b=this._bucketParts;this._currentTileIndex<l.length;)if(p.getBucketParts(b,d,l[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,g())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,b.sort(function(w,C){return w.sortKey-C.sortKey}));this._currentPartIndex<b.length;)if(p.placeLayerBucketPart(b[this._currentPartIndex],this._seenCrossTileIDs,c),this._currentPartIndex++,g())return!0;return!1};var lu=function(l,p,c,d,g,b,w){this.placement=new Si(l,g,b,w),this._currentPlacementIndex=p.length-1,this._forceFullPlacement=c,this._showCollisionBoxes=d,this._done=!1};lu.prototype.isDone=function(){return this._done},lu.prototype.continuePlacement=function(l,p,c){for(var d=this,g=o.browser.now(),b=function(){var M=o.browser.now()-g;return!d._forceFullPlacement&&M>2};this._currentPlacementIndex>=0;){var w=p[l[this._currentPlacementIndex]],C=this.placement.collisionIndex.transform.zoom;if(w.type==="symbol"&&(!w.minzoom||w.minzoom<=C)&&(!w.maxzoom||w.maxzoom>C)){if(this._inProgressLayer||(this._inProgressLayer=new fh(w)),this._inProgressLayer.continuePlacement(c[w.source],this.placement,this._showCollisionBoxes,w,b))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},lu.prototype.commit=function(l){return this.placement.commit(l),this.placement};var Of=512/o.EXTENT/2,cc=function(l,p,c){this.tileID=l,this.indexedSymbolInstances={},this.bucketInstanceId=c;for(var d=0;d<p.length;d++){var g=p.get(d),b=g.key;this.indexedSymbolInstances[b]||(this.indexedSymbolInstances[b]=[]),this.indexedSymbolInstances[b].push({crossTileID:g.crossTileID,coord:this.getScaledCoordinates(g,l)})}};cc.prototype.getScaledCoordinates=function(l,p){var c=Of/Math.pow(2,p.canonical.z-this.tileID.canonical.z);return{x:Math.floor((p.canonical.x*o.EXTENT+l.anchorX)*c),y:Math.floor((p.canonical.y*o.EXTENT+l.anchorY)*c)}},cc.prototype.findMatches=function(l,p,c){for(var d=this.tileID.canonical.z<p.canonical.z?1:Math.pow(2,this.tileID.canonical.z-p.canonical.z),g=0;g<l.length;g++){var b=l.get(g);if(!b.crossTileID){var w=this.indexedSymbolInstances[b.key];if(w)for(var C=this.getScaledCoordinates(b,p),M=0,B=w;M<B.length;M+=1){var K=B[M];if(Math.abs(K.coord.x-C.x)<=d&&Math.abs(K.coord.y-C.y)<=d&&!c[K.crossTileID]){c[K.crossTileID]=!0,b.crossTileID=K.crossTileID;break}}}}};var _o=function(){this.maxCrossTileID=0};_o.prototype.generate=function(){return++this.maxCrossTileID};var Ua=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Ua.prototype.handleWrapJump=function(l){var p=Math.round((l-this.lng)/360);if(p!==0)for(var c in this.indexes){var d=this.indexes[c],g={};for(var b in d){var w=d[b];w.tileID=w.tileID.unwrapTo(w.tileID.wrap+p),g[w.tileID.key]=w}this.indexes[c]=g}this.lng=l},Ua.prototype.addBucket=function(l,p,c){if(this.indexes[l.overscaledZ]&&this.indexes[l.overscaledZ][l.key]){if(this.indexes[l.overscaledZ][l.key].bucketInstanceId===p.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(l.overscaledZ,this.indexes[l.overscaledZ][l.key])}for(var d=0;d<p.symbolInstances.length;d++)p.symbolInstances.get(d).crossTileID=0;this.usedCrossTileIDs[l.overscaledZ]||(this.usedCrossTileIDs[l.overscaledZ]={});var g=this.usedCrossTileIDs[l.overscaledZ];for(var b in this.indexes){var w=this.indexes[b];if(Number(b)>l.overscaledZ)for(var C in w){var M=w[C];M.tileID.isChildOf(l)&&M.findMatches(p.symbolInstances,l,g)}else{var B=w[l.scaledTo(Number(b)).key];B&&B.findMatches(p.symbolInstances,l,g)}}for(var K=0;K<p.symbolInstances.length;K++){var Z=p.symbolInstances.get(K);Z.crossTileID||(Z.crossTileID=c.generate(),g[Z.crossTileID]=!0)}return this.indexes[l.overscaledZ]===void 0&&(this.indexes[l.overscaledZ]={}),this.indexes[l.overscaledZ][l.key]=new cc(l,p.symbolInstances,p.bucketInstanceId),!0},Ua.prototype.removeBucketCrossTileIDs=function(l,p){for(var c in p.indexedSymbolInstances)for(var d=0,g=p.indexedSymbolInstances[c];d<g.length;d+=1)delete this.usedCrossTileIDs[l][g[d].crossTileID]},Ua.prototype.removeStaleBuckets=function(l){var p=!1;for(var c in this.indexes){var d=this.indexes[c];for(var g in d)l[d[g].bucketInstanceId]||(this.removeBucketCrossTileIDs(c,d[g]),delete d[g],p=!0)}return p};var $a=function(){this.layerIndexes={},this.crossTileIDs=new _o,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};$a.prototype.addLayer=function(l,p,c){var d=this.layerIndexes[l.id];d===void 0&&(d=this.layerIndexes[l.id]=new Ua);var g=!1,b={};d.handleWrapJump(c);for(var w=0,C=p;w<C.length;w+=1){var M=C[w],B=M.getBucket(l);B&&l.id===B.layerIds[0]&&(B.bucketInstanceId||(B.bucketInstanceId=++this.maxBucketInstanceId),d.addBucket(M.tileID,B,this.crossTileIDs)&&(g=!0),b[B.bucketInstanceId]=!0)}return d.removeStaleBuckets(b)&&(g=!0),g},$a.prototype.pruneUnusedLayers=function(l){var p={};for(var c in l.forEach(function(d){p[d]=!0}),this.layerIndexes)p[c]||delete this.layerIndexes[c]};var Cs=function(l,p){return o.emitValidationErrors(l,p&&p.filter(function(c){return c.identifier!=="source.canvas"}))},Va=o.pick(at,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),qa=o.pick(at,["setCenter","setZoom","setBearing","setPitch"]),pc=function(){var l={},p=o.styleSpec.$version;for(var c in o.styleSpec.$root){var d,g=o.styleSpec.$root[c];g.required&&(d=c==="version"?p:g.type==="array"?[]:{})!=null&&(l[c]=d)}return l}(),Gi=function(l){function p(c,d){var g=this;d===void 0&&(d={}),l.call(this),this.map=c,this.dispatcher=new Ne(Ve(),this),this.imageManager=new F,this.imageManager.setEventedParent(this),this.glyphManager=new ze(c._requestManager,d.localIdeographFontFamily),this.lineAtlas=new ge(256,512),this.crossTileSymbolIndex=new $a,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new o.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",o.getReferrer());var b=this;this._rtlTextPluginCallback=p.registerForPluginStateChange(function(w){b.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:w.pluginStatus,pluginURL:w.pluginURL},function(C,M){if(o.triggerPluginCompletionEvent(C),M&&M.every(function(K){return K}))for(var B in b.sourceCaches)b.sourceCaches[B].reload()})}),this.on("data",function(w){if(w.dataType==="source"&&w.sourceDataType==="metadata"){var C=g.sourceCaches[w.sourceId];if(C){var M=C.getSource();if(M&&M.vectorLayerIds)for(var B in g._layers){var K=g._layers[B];K.source===M.id&&g._validateLayer(K)}}}})}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.loadURL=function(c,d){var g=this;d===void 0&&(d={}),this.fire(new o.Event("dataloading",{dataType:"style"}));var b=typeof d.validate=="boolean"?d.validate:!o.isMapboxURL(c);c=this.map._requestManager.normalizeStyleURL(c,d.accessToken);var w=this.map._requestManager.transformRequest(c,o.ResourceType.Style);this._request=o.getJSON(w,function(C,M){g._request=null,C?g.fire(new o.ErrorEvent(C)):M&&g._load(M,b)})},p.prototype.loadJSON=function(c,d){var g=this;d===void 0&&(d={}),this.fire(new o.Event("dataloading",{dataType:"style"})),this._request=o.browser.frame(function(){g._request=null,g._load(c,d.validate!==!1)})},p.prototype.loadEmpty=function(){this.fire(new o.Event("dataloading",{dataType:"style"})),this._load(pc,!1)},p.prototype._load=function(c,d){if(!d||!Cs(this,o.validateStyle(c))){for(var g in this._loaded=!0,this.stylesheet=c,c.sources)this.addSource(g,c.sources[g],{validate:!1});c.sprite?this._loadSprite(c.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(c.glyphs);var b=it(this.stylesheet.layers);this._order=b.map(function(B){return B.id}),this._layers={},this._serializedLayers={};for(var w=0,C=b;w<C.length;w+=1){var M=C[w];(M=o.createStyleLayer(M)).setEventedParent(this,{layer:{id:M.id}}),this._layers[M.id]=M,this._serializedLayers[M.id]=M.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new ie(this.stylesheet.light),this.fire(new o.Event("data",{dataType:"style"})),this.fire(new o.Event("style.load"))}},p.prototype._loadSprite=function(c){var d=this;this._spriteRequest=function(g,b,w){var C,M,B,K=o.browser.devicePixelRatio>1?"@2x":"",Z=o.getJSON(b.transformRequest(b.normalizeSpriteURL(g,K,".json"),o.ResourceType.SpriteJSON),function(ue,xe){Z=null,B||(B=ue,C=xe,ce())}),Y=o.getImage(b.transformRequest(b.normalizeSpriteURL(g,K,".png"),o.ResourceType.SpriteImage),function(ue,xe){Y=null,B||(B=ue,M=xe,ce())});function ce(){if(B)w(B);else if(C&&M){var ue=o.browser.getImageData(M),xe={};for(var oe in C){var ve=C[oe],Se=ve.width,Pe=ve.height,Fe=ve.x,De=ve.y,je=ve.sdf,Ke=ve.pixelRatio,tt=ve.stretchX,Qe=ve.stretchY,ft=ve.content,Et=new o.RGBAImage({width:Se,height:Pe});o.RGBAImage.copy(ue,Et,{x:Fe,y:De},{x:0,y:0},{width:Se,height:Pe}),xe[oe]={data:Et,pixelRatio:Ke,sdf:je,stretchX:tt,stretchY:Qe,content:ft}}w(null,xe)}}return{cancel:function(){Z&&(Z.cancel(),Z=null),Y&&(Y.cancel(),Y=null)}}}(c,this.map._requestManager,function(g,b){if(d._spriteRequest=null,g)d.fire(new o.ErrorEvent(g));else if(b)for(var w in b)d.imageManager.addImage(w,b[w]);d.imageManager.setLoaded(!0),d._availableImages=d.imageManager.listImages(),d.dispatcher.broadcast("setImages",d._availableImages),d.fire(new o.Event("data",{dataType:"style"}))})},p.prototype._validateLayer=function(c){var d=this.sourceCaches[c.source];if(d){var g=c.sourceLayer;if(g){var b=d.getSource();(b.type==="geojson"||b.vectorLayerIds&&b.vectorLayerIds.indexOf(g)===-1)&&this.fire(new o.ErrorEvent(new Error('Source layer "'+g+'" does not exist on source "'+b.id+'" as specified by style layer "'+c.id+'"')))}}},p.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var c in this.sourceCaches)if(!this.sourceCaches[c].loaded())return!1;return!!this.imageManager.isLoaded()},p.prototype._serializeLayers=function(c){for(var d=[],g=0,b=c;g<b.length;g+=1){var w=this._layers[b[g]];w.type!=="custom"&&d.push(w.serialize())}return d},p.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var c in this.sourceCaches)if(this.sourceCaches[c].hasTransition())return!0;for(var d in this._layers)if(this._layers[d].hasTransition())return!0;return!1},p.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},p.prototype.update=function(c){if(this._loaded){var d=this._changed;if(this._changed){var g=Object.keys(this._updatedLayers),b=Object.keys(this._removedLayers);for(var w in(g.length||b.length)&&this._updateWorkerLayers(g,b),this._updatedSources){var C=this._updatedSources[w];C==="reload"?this._reloadSource(w):C==="clear"&&this._clearSource(w)}for(var M in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[M].updateTransitions(c);this.light.updateTransitions(c),this._resetUpdates()}var B={};for(var K in this.sourceCaches){var Z=this.sourceCaches[K];B[K]=Z.used,Z.used=!1}for(var Y=0,ce=this._order;Y<ce.length;Y+=1){var ue=this._layers[ce[Y]];ue.recalculate(c,this._availableImages),!ue.isHidden(c.zoom)&&ue.source&&(this.sourceCaches[ue.source].used=!0)}for(var xe in B){var oe=this.sourceCaches[xe];B[xe]!==oe.used&&oe.fire(new o.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:xe}))}this.light.recalculate(c),this.z=c.zoom,d&&this.fire(new o.Event("data",{dataType:"style"}))}},p.prototype._updateTilesForChangedImages=function(){var c=Object.keys(this._changedImages);if(c.length){for(var d in this.sourceCaches)this.sourceCaches[d].reloadTilesForDependencies(["icons","patterns"],c);this._changedImages={}}},p.prototype._updateWorkerLayers=function(c,d){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(c),removedIds:d})},p.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},p.prototype.setState=function(c){var d=this;if(this._checkLoaded(),Cs(this,o.validateStyle(c)))return!1;(c=o.clone$1(c)).layers=it(c.layers);var g=function(w,C){if(!w)return[{command:at.setStyle,args:[C]}];var M=[];try{if(!o.deepEqual(w.version,C.version))return[{command:at.setStyle,args:[C]}];o.deepEqual(w.center,C.center)||M.push({command:at.setCenter,args:[C.center]}),o.deepEqual(w.zoom,C.zoom)||M.push({command:at.setZoom,args:[C.zoom]}),o.deepEqual(w.bearing,C.bearing)||M.push({command:at.setBearing,args:[C.bearing]}),o.deepEqual(w.pitch,C.pitch)||M.push({command:at.setPitch,args:[C.pitch]}),o.deepEqual(w.sprite,C.sprite)||M.push({command:at.setSprite,args:[C.sprite]}),o.deepEqual(w.glyphs,C.glyphs)||M.push({command:at.setGlyphs,args:[C.glyphs]}),o.deepEqual(w.transition,C.transition)||M.push({command:at.setTransition,args:[C.transition]}),o.deepEqual(w.light,C.light)||M.push({command:at.setLight,args:[C.light]});var B={},K=[];(function(Y,ce,ue,xe){var oe;for(oe in ce=ce||{},Y=Y||{})Y.hasOwnProperty(oe)&&(ce.hasOwnProperty(oe)||pt(oe,ue,xe));for(oe in ce)ce.hasOwnProperty(oe)&&(Y.hasOwnProperty(oe)?o.deepEqual(Y[oe],ce[oe])||(Y[oe].type==="geojson"&&ce[oe].type==="geojson"&&Gr(Y,ce,oe)?ue.push({command:at.setGeoJSONSourceData,args:[oe,ce[oe].data]}):fr(oe,ce,ue,xe)):or(oe,ce,ue))})(w.sources,C.sources,K,B);var Z=[];w.layers&&w.layers.forEach(function(Y){B[Y.source]?M.push({command:at.removeLayer,args:[Y.id]}):Z.push(Y)}),M=M.concat(K),function(Y,ce,ue){ce=ce||[];var xe,oe,ve,Se,Pe,Fe,De,je=(Y=Y||[]).map(Tr),Ke=ce.map(Tr),tt=Y.reduce(gr,{}),Qe=ce.reduce(gr,{}),ft=je.slice(),Et=Object.create(null);for(xe=0,oe=0;xe<je.length;xe++)Qe.hasOwnProperty(ve=je[xe])?oe++:(ue.push({command:at.removeLayer,args:[ve]}),ft.splice(ft.indexOf(ve,oe),1));for(xe=0,oe=0;xe<Ke.length;xe++)ft[ft.length-1-xe]!==(ve=Ke[Ke.length-1-xe])&&(tt.hasOwnProperty(ve)?(ue.push({command:at.removeLayer,args:[ve]}),ft.splice(ft.lastIndexOf(ve,ft.length-oe),1)):oe++,ue.push({command:at.addLayer,args:[Qe[ve],Fe=ft[ft.length-xe]]}),ft.splice(ft.length-xe,0,ve),Et[ve]=!0);for(xe=0;xe<Ke.length;xe++)if(Se=tt[ve=Ke[xe]],Pe=Qe[ve],!Et[ve]&&!o.deepEqual(Se,Pe))if(o.deepEqual(Se.source,Pe.source)&&o.deepEqual(Se["source-layer"],Pe["source-layer"])&&o.deepEqual(Se.type,Pe.type)){for(De in ur(Se.layout,Pe.layout,ue,ve,null,at.setLayoutProperty),ur(Se.paint,Pe.paint,ue,ve,null,at.setPaintProperty),o.deepEqual(Se.filter,Pe.filter)||ue.push({command:at.setFilter,args:[ve,Pe.filter]}),o.deepEqual(Se.minzoom,Pe.minzoom)&&o.deepEqual(Se.maxzoom,Pe.maxzoom)||ue.push({command:at.setLayerZoomRange,args:[ve,Pe.minzoom,Pe.maxzoom]}),Se)Se.hasOwnProperty(De)&&De!=="layout"&&De!=="paint"&&De!=="filter"&&De!=="metadata"&&De!=="minzoom"&&De!=="maxzoom"&&(De.indexOf("paint.")===0?ur(Se[De],Pe[De],ue,ve,De.slice(6),at.setPaintProperty):o.deepEqual(Se[De],Pe[De])||ue.push({command:at.setLayerProperty,args:[ve,De,Pe[De]]}));for(De in Pe)Pe.hasOwnProperty(De)&&!Se.hasOwnProperty(De)&&De!=="layout"&&De!=="paint"&&De!=="filter"&&De!=="metadata"&&De!=="minzoom"&&De!=="maxzoom"&&(De.indexOf("paint.")===0?ur(Se[De],Pe[De],ue,ve,De.slice(6),at.setPaintProperty):o.deepEqual(Se[De],Pe[De])||ue.push({command:at.setLayerProperty,args:[ve,De,Pe[De]]}))}else ue.push({command:at.removeLayer,args:[ve]}),Fe=ft[ft.lastIndexOf(ve)+1],ue.push({command:at.addLayer,args:[Pe,Fe]})}(Z,C.layers,M)}catch(Y){console.warn("Unable to compute style diff:",Y),M=[{command:at.setStyle,args:[C]}]}return M}(this.serialize(),c).filter(function(w){return!(w.command in qa)});if(g.length===0)return!1;var b=g.filter(function(w){return!(w.command in Va)});if(b.length>0)throw new Error("Unimplemented: "+b.map(function(w){return w.command}).join(", ")+".");return g.forEach(function(w){w.command!=="setTransition"&&d[w.command].apply(d,w.args)}),this.stylesheet=c,!0},p.prototype.addImage=function(c,d){if(this.getImage(c))return this.fire(new o.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(c,d),this._afterImageUpdated(c)},p.prototype.updateImage=function(c,d){this.imageManager.updateImage(c,d)},p.prototype.getImage=function(c){return this.imageManager.getImage(c)},p.prototype.removeImage=function(c){if(!this.getImage(c))return this.fire(new o.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(c),this._afterImageUpdated(c)},p.prototype._afterImageUpdated=function(c){this._availableImages=this.imageManager.listImages(),this._changedImages[c]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new o.Event("data",{dataType:"style"}))},p.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},p.prototype.addSource=function(c,d,g){var b=this;if(g===void 0&&(g={}),this._checkLoaded(),this.sourceCaches[c]!==void 0)throw new Error("There is already a source with this ID");if(!d.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(d).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(d.type)>=0&&this._validate(o.validateStyle.source,"sources."+c,d,null,g))){this.map&&this.map._collectResourceTiming&&(d.collectResourceTiming=!0);var w=this.sourceCaches[c]=new ne(c,d,this.dispatcher);w.style=this,w.setEventedParent(this,function(){return{isSourceLoaded:b.loaded(),source:w.serialize(),sourceId:c}}),w.onAdd(this.map),this._changed=!0}},p.prototype.removeSource=function(c){if(this._checkLoaded(),this.sourceCaches[c]===void 0)throw new Error("There is no source with this ID");for(var d in this._layers)if(this._layers[d].source===c)return this.fire(new o.ErrorEvent(new Error('Source "'+c+'" cannot be removed while layer "'+d+'" is using it.')));var g=this.sourceCaches[c];delete this.sourceCaches[c],delete this._updatedSources[c],g.fire(new o.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:c})),g.setEventedParent(null),g.clearTiles(),g.onRemove&&g.onRemove(this.map),this._changed=!0},p.prototype.setGeoJSONSourceData=function(c,d){this._checkLoaded(),this.sourceCaches[c].getSource().setData(d),this._changed=!0},p.prototype.getSource=function(c){return this.sourceCaches[c]&&this.sourceCaches[c].getSource()},p.prototype.addLayer=function(c,d,g){g===void 0&&(g={}),this._checkLoaded();var b=c.id;if(this.getLayer(b))this.fire(new o.ErrorEvent(new Error('Layer with id "'+b+'" already exists on this map')));else{var w;if(c.type==="custom"){if(Cs(this,o.validateCustomStyleLayer(c)))return;w=o.createStyleLayer(c)}else{if(typeof c.source=="object"&&(this.addSource(b,c.source),c=o.clone$1(c),c=o.extend(c,{source:b})),this._validate(o.validateStyle.layer,"layers."+b,c,{arrayIndex:-1},g))return;w=o.createStyleLayer(c),this._validateLayer(w),w.setEventedParent(this,{layer:{id:b}}),this._serializedLayers[w.id]=w.serialize()}var C=d?this._order.indexOf(d):this._order.length;if(d&&C===-1)this.fire(new o.ErrorEvent(new Error('Layer with id "'+d+'" does not exist on this map.')));else{if(this._order.splice(C,0,b),this._layerOrderChanged=!0,this._layers[b]=w,this._removedLayers[b]&&w.source&&w.type!=="custom"){var M=this._removedLayers[b];delete this._removedLayers[b],M.type!==w.type?this._updatedSources[w.source]="clear":(this._updatedSources[w.source]="reload",this.sourceCaches[w.source].pause())}this._updateLayer(w),w.onAdd&&w.onAdd(this.map)}}},p.prototype.moveLayer=function(c,d){if(this._checkLoaded(),this._changed=!0,this._layers[c]){if(c!==d){var g=this._order.indexOf(c);this._order.splice(g,1);var b=d?this._order.indexOf(d):this._order.length;d&&b===-1?this.fire(new o.ErrorEvent(new Error('Layer with id "'+d+'" does not exist on this map.'))):(this._order.splice(b,0,c),this._layerOrderChanged=!0)}}else this.fire(new o.ErrorEvent(new Error("The layer '"+c+"' does not exist in the map's style and cannot be moved.")))},p.prototype.removeLayer=function(c){this._checkLoaded();var d=this._layers[c];if(d){d.setEventedParent(null);var g=this._order.indexOf(c);this._order.splice(g,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[c]=d,delete this._layers[c],delete this._serializedLayers[c],delete this._updatedLayers[c],delete this._updatedPaintProps[c],d.onRemove&&d.onRemove(this.map)}else this.fire(new o.ErrorEvent(new Error("The layer '"+c+"' does not exist in the map's style and cannot be removed.")))},p.prototype.getLayer=function(c){return this._layers[c]},p.prototype.hasLayer=function(c){return c in this._layers},p.prototype.setLayerZoomRange=function(c,d,g){this._checkLoaded();var b=this.getLayer(c);b?b.minzoom===d&&b.maxzoom===g||(d!=null&&(b.minzoom=d),g!=null&&(b.maxzoom=g),this._updateLayer(b)):this.fire(new o.ErrorEvent(new Error("The layer '"+c+"' does not exist in the map's style and cannot have zoom extent.")))},p.prototype.setFilter=function(c,d,g){g===void 0&&(g={}),this._checkLoaded();var b=this.getLayer(c);if(b){if(!o.deepEqual(b.filter,d))return d==null?(b.filter=void 0,void this._updateLayer(b)):void(this._validate(o.validateStyle.filter,"layers."+b.id+".filter",d,null,g)||(b.filter=o.clone$1(d),this._updateLayer(b)))}else this.fire(new o.ErrorEvent(new Error("The layer '"+c+"' does not exist in the map's style and cannot be filtered.")))},p.prototype.getFilter=function(c){return o.clone$1(this.getLayer(c).filter)},p.prototype.setLayoutProperty=function(c,d,g,b){b===void 0&&(b={}),this._checkLoaded();var w=this.getLayer(c);w?o.deepEqual(w.getLayoutProperty(d),g)||(w.setLayoutProperty(d,g,b),this._updateLayer(w)):this.fire(new o.ErrorEvent(new Error("The layer '"+c+"' does not exist in the map's style and cannot be styled.")))},p.prototype.getLayoutProperty=function(c,d){var g=this.getLayer(c);if(g)return g.getLayoutProperty(d);this.fire(new o.ErrorEvent(new Error("The layer '"+c+"' does not exist in the map's style.")))},p.prototype.setPaintProperty=function(c,d,g,b){b===void 0&&(b={}),this._checkLoaded();var w=this.getLayer(c);w?o.deepEqual(w.getPaintProperty(d),g)||(w.setPaintProperty(d,g,b)&&this._updateLayer(w),this._changed=!0,this._updatedPaintProps[c]=!0):this.fire(new o.ErrorEvent(new Error("The layer '"+c+"' does not exist in the map's style and cannot be styled.")))},p.prototype.getPaintProperty=function(c,d){return this.getLayer(c).getPaintProperty(d)},p.prototype.setFeatureState=function(c,d){this._checkLoaded();var g=c.source,b=c.sourceLayer,w=this.sourceCaches[g];if(w!==void 0){var C=w.getSource().type;C==="geojson"&&b?this.fire(new o.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):C!=="vector"||b?(c.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided."))),w.setFeatureState(b,c.id,d)):this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error("The source '"+g+"' does not exist in the map's style.")))},p.prototype.removeFeatureState=function(c,d){this._checkLoaded();var g=c.source,b=this.sourceCaches[g];if(b!==void 0){var w=b.getSource().type,C=w==="vector"?c.sourceLayer:void 0;w!=="vector"||C?d&&typeof c.id!="string"&&typeof c.id!="number"?this.fire(new o.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):b.removeFeatureState(C,c.id,d):this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error("The source '"+g+"' does not exist in the map's style.")))},p.prototype.getFeatureState=function(c){this._checkLoaded();var d=c.source,g=c.sourceLayer,b=this.sourceCaches[d];if(b!==void 0){if(b.getSource().type!=="vector"||g)return c.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided."))),b.getFeatureState(g,c.id);this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error("The source '"+d+"' does not exist in the map's style.")))},p.prototype.getTransition=function(){return o.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},p.prototype.serialize=function(){return o.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:o.mapObject(this.sourceCaches,function(c){return c.serialize()}),layers:this._serializeLayers(this._order)},function(c){return c!==void 0})},p.prototype._updateLayer=function(c){this._updatedLayers[c.id]=!0,c.source&&!this._updatedSources[c.source]&&this.sourceCaches[c.source].getSource().type!=="raster"&&(this._updatedSources[c.source]="reload",this.sourceCaches[c.source].pause()),this._changed=!0},p.prototype._flattenAndSortRenderedFeatures=function(c){for(var d=this,g=function(tt){return d._layers[tt].type==="fill-extrusion"},b={},w=[],C=this._order.length-1;C>=0;C--){var M=this._order[C];if(g(M)){b[M]=C;for(var B=0,K=c;B<K.length;B+=1){var Z=K[B][M];if(Z)for(var Y=0,ce=Z;Y<ce.length;Y+=1)w.push(ce[Y])}}}w.sort(function(tt,Qe){return Qe.intersectionZ-tt.intersectionZ});for(var ue=[],xe=this._order.length-1;xe>=0;xe--){var oe=this._order[xe];if(g(oe))for(var ve=w.length-1;ve>=0;ve--){var Se=w[ve].feature;if(b[Se.layer.id]<xe)break;ue.push(Se),w.pop()}else for(var Pe=0,Fe=c;Pe<Fe.length;Pe+=1){var De=Fe[Pe][oe];if(De)for(var je=0,Ke=De;je<Ke.length;je+=1)ue.push(Ke[je].feature)}}return ue},p.prototype.queryRenderedFeatures=function(c,d,g){d&&d.filter&&this._validate(o.validateStyle.filter,"queryRenderedFeatures.filter",d.filter,null,d);var b={};if(d&&d.layers){if(!Array.isArray(d.layers))return this.fire(new o.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var w=0,C=d.layers;w<C.length;w+=1){var M=C[w],B=this._layers[M];if(!B)return this.fire(new o.ErrorEvent(new Error("The layer '"+M+"' does not exist in the map's style and cannot be queried for features."))),[];b[B.source]=!0}}var K=[];for(var Z in d.availableImages=this._availableImages,this.sourceCaches)d.layers&&!b[Z]||K.push(Pt(this.sourceCaches[Z],this._layers,this._serializedLayers,c,d,g));return this.placement&&K.push(function(Y,ce,ue,xe,oe,ve,Se){for(var Pe={},Fe=ve.queryRenderedSymbols(xe),De=[],je=0,Ke=Object.keys(Fe).map(Number);je<Ke.length;je+=1)De.push(Se[Ke[je]]);De.sort(Gt);for(var tt=function(){var Tt=ft[Qe],_r=Tt.featureIndex.lookupSymbolFeatures(Fe[Tt.bucketInstanceId],ce,Tt.bucketIndex,Tt.sourceLayerIndex,oe.filter,oe.layers,oe.availableImages,Y);for(var mt in _r){var qt=Pe[mt]=Pe[mt]||[],rr=_r[mt];rr.sort(function(Jt,Ft){var Ot=Tt.featureSortOrder;if(Ot){var Gn=Ot.indexOf(Jt.featureIndex);return Ot.indexOf(Ft.featureIndex)-Gn}return Ft.featureIndex-Jt.featureIndex});for(var Vt=0,Ut=rr;Vt<Ut.length;Vt+=1)qt.push(Ut[Vt])}},Qe=0,ft=De;Qe<ft.length;Qe+=1)tt();var Et=function(Tt){Pe[Tt].forEach(function(_r){var mt=_r.feature,qt=ue[Y[Tt].source].getFeatureState(mt.layer["source-layer"],mt.id);mt.source=mt.layer.source,mt.layer["source-layer"]&&(mt.sourceLayer=mt.layer["source-layer"]),mt.state=qt})};for(var It in Pe)Et(It);return Pe}(this._layers,this._serializedLayers,this.sourceCaches,c,d,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(K)},p.prototype.querySourceFeatures=function(c,d){d&&d.filter&&this._validate(o.validateStyle.filter,"querySourceFeatures.filter",d.filter,null,d);var g=this.sourceCaches[c];return g?function(b,w){for(var C=b.getRenderableIds().map(function(ce){return b.getTileByID(ce)}),M=[],B={},K=0;K<C.length;K++){var Z=C[K],Y=Z.tileID.canonical.key;B[Y]||(B[Y]=!0,Z.querySourceFeatures(M,w))}return M}(g,d):[]},p.prototype.addSourceType=function(c,d,g){return p.getSourceType(c)?g(new Error('A source type called "'+c+'" already exists.')):(p.setSourceType(c,d),d.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:c,url:d.workerSourceURL},g):g(null,null))},p.prototype.getLight=function(){return this.light.getLight()},p.prototype.setLight=function(c,d){d===void 0&&(d={}),this._checkLoaded();var g=this.light.getLight(),b=!1;for(var w in c)if(!o.deepEqual(c[w],g[w])){b=!0;break}if(b){var C={now:o.browser.now(),transition:o.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(c,d),this.light.updateTransitions(C)}},p.prototype._validate=function(c,d,g,b,w){return w===void 0&&(w={}),(!w||w.validate!==!1)&&Cs(this,c.call(o.validateStyle,o.extend({key:d,style:this.serialize(),value:g,styleSpec:o.styleSpec},b)))},p.prototype._remove=function(){for(var c in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),o.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[c].setEventedParent(null);for(var d in this.sourceCaches)this.sourceCaches[d].clearTiles(),this.sourceCaches[d].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},p.prototype._clearSource=function(c){this.sourceCaches[c].clearTiles()},p.prototype._reloadSource=function(c){this.sourceCaches[c].resume(),this.sourceCaches[c].reload()},p.prototype._updateSources=function(c){for(var d in this.sourceCaches)this.sourceCaches[d].update(c)},p.prototype._generateCollisionBoxes=function(){for(var c in this.sourceCaches)this._reloadSource(c)},p.prototype._updatePlacement=function(c,d,g,b,w){w===void 0&&(w=!1);for(var C=!1,M=!1,B={},K=0,Z=this._order;K<Z.length;K+=1){var Y=this._layers[Z[K]];if(Y.type==="symbol"){if(!B[Y.source]){var ce=this.sourceCaches[Y.source];B[Y.source]=ce.getRenderableIds(!0).map(function(Se){return ce.getTileByID(Se)}).sort(function(Se,Pe){return Pe.tileID.overscaledZ-Se.tileID.overscaledZ||(Se.tileID.isLessThan(Pe.tileID)?-1:1)})}var ue=this.crossTileSymbolIndex.addLayer(Y,B[Y.source],c.center.lng);C=C||ue}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((w=w||this._layerOrderChanged||g===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(o.browser.now(),c.zoom))&&(this.pauseablePlacement=new lu(c,this._order,w,d,g,b,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,B),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(o.browser.now()),M=!0),C&&this.pauseablePlacement.placement.setStale()),M||C)for(var xe=0,oe=this._order;xe<oe.length;xe+=1){var ve=this._layers[oe[xe]];ve.type==="symbol"&&this.placement.updateLayerOpacities(ve,B[ve.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(o.browser.now())},p.prototype._releaseSymbolFadeTiles=function(){for(var c in this.sourceCaches)this.sourceCaches[c].releaseSymbolFadeTiles()},p.prototype.getImages=function(c,d,g){this.imageManager.getImages(d.icons,g),this._updateTilesForChangedImages();var b=this.sourceCaches[d.source];b&&b.setDependencies(d.tileID.key,d.type,d.icons)},p.prototype.getGlyphs=function(c,d,g){this.glyphManager.getGlyphs(d.stacks,g)},p.prototype.getResource=function(c,d,g){return o.makeRequest(d,g)},p}(o.Evented);Gi.getSourceType=function(l){return He[l]},Gi.setSourceType=function(l,p){He[l]=p},Gi.registerForPluginStateChange=o.registerForPluginStateChange;var zn=o.createLayout([{name:"a_pos",type:"Int16",components:2}]),fl=Hr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),Bf=Hr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),t0=Hr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),r0=Hr(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),mh=Hr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),yh=Hr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),gh=Hr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),vh=Hr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Nf=Hr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),Ff=Hr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),n0=Hr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),uu=Hr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),cu=Hr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),jf=Hr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),ci=Hr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),_h=Hr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),Wa=Hr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Ga=Hr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),ks=Hr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Ts=Hr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Ha=Hr(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),Is=Hr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),Ps=Hr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),Ka=Hr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),Uf=Hr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),$f=Hr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function Hr(l,p){var c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,d=p.match(/attribute ([\w]+) ([\w]+)/g),g=l.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),b=p.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),w=b?b.concat(g):g,C={};return{fragmentSource:l=l.replace(c,function(M,B,K,Z,Y){return C[Y]=!0,B==="define"?`
#ifndef HAS_UNIFORM_u_`+Y+`
varying `+K+" "+Z+" "+Y+`;
#else
uniform `+K+" "+Z+" u_"+Y+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+Y+`
    `+K+" "+Z+" "+Y+" = u_"+Y+`;
#endif
`}),vertexSource:p=p.replace(c,function(M,B,K,Z,Y){var ce=Z==="float"?"vec2":"vec4",ue=Y.match(/color/)?"color":ce;return C[Y]?B==="define"?`
#ifndef HAS_UNIFORM_u_`+Y+`
uniform lowp float u_`+Y+`_t;
attribute `+K+" "+ce+" a_"+Y+`;
varying `+K+" "+Z+" "+Y+`;
#else
uniform `+K+" "+Z+" u_"+Y+`;
#endif
`:ue==="vec4"?`
#ifndef HAS_UNIFORM_u_`+Y+`
    `+Y+" = a_"+Y+`;
#else
    `+K+" "+Z+" "+Y+" = u_"+Y+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+Y+`
    `+Y+" = unpack_mix_"+ue+"(a_"+Y+", u_"+Y+`_t);
#else
    `+K+" "+Z+" "+Y+" = u_"+Y+`;
#endif
`:B==="define"?`
#ifndef HAS_UNIFORM_u_`+Y+`
uniform lowp float u_`+Y+`_t;
attribute `+K+" "+ce+" a_"+Y+`;
#else
uniform `+K+" "+Z+" u_"+Y+`;
#endif
`:ue==="vec4"?`
#ifndef HAS_UNIFORM_u_`+Y+`
    `+K+" "+Z+" "+Y+" = a_"+Y+`;
#else
    `+K+" "+Z+" "+Y+" = u_"+Y+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+Y+`
    `+K+" "+Z+" "+Y+" = unpack_mix_"+ue+"(a_"+Y+", u_"+Y+`_t);
#else
    `+K+" "+Z+" "+Y+" = u_"+Y+`;
#endif
`}),staticAttributes:d,staticUniforms:w}}var i0=Object.freeze({__proto__:null,prelude:fl,background:Bf,backgroundPattern:t0,circle:r0,clippingMask:mh,heatmap:yh,heatmapTexture:gh,collisionBox:vh,collisionCircle:Nf,debug:Ff,fill:n0,fillOutline:uu,fillOutlinePattern:cu,fillPattern:jf,fillExtrusion:ci,fillExtrusionPattern:_h,hillshadePrepare:Wa,hillshade:Ga,line:ks,lineGradient:Ts,linePattern:Ha,lineSDF:Is,raster:Ps,symbolIcon:Ka,symbolSDF:Uf,symbolTextAndIcon:$f}),hc=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function Vf(l){for(var p=[],c=0;c<l.length;c++)if(l[c]!==null){var d=l[c].split(" ");p.push(d.pop())}return p}hc.prototype.bind=function(l,p,c,d,g,b,w,C){this.context=l;for(var M=this.boundPaintVertexBuffers.length!==d.length,B=0;!M&&B<d.length;B++)this.boundPaintVertexBuffers[B]!==d[B]&&(M=!0);l.extVertexArrayObject&&this.vao&&this.boundProgram===p&&this.boundLayoutVertexBuffer===c&&!M&&this.boundIndexBuffer===g&&this.boundVertexOffset===b&&this.boundDynamicVertexBuffer===w&&this.boundDynamicVertexBuffer2===C?(l.bindVertexArrayOES.set(this.vao),w&&w.bind(),g&&g.dynamicDraw&&g.bind(),C&&C.bind()):this.freshBind(p,c,d,g,b,w,C)},hc.prototype.freshBind=function(l,p,c,d,g,b,w){var C,M=l.numAttributes,B=this.context,K=B.gl;if(B.extVertexArrayObject)this.vao&&this.destroy(),this.vao=B.extVertexArrayObject.createVertexArrayOES(),B.bindVertexArrayOES.set(this.vao),C=0,this.boundProgram=l,this.boundLayoutVertexBuffer=p,this.boundPaintVertexBuffers=c,this.boundIndexBuffer=d,this.boundVertexOffset=g,this.boundDynamicVertexBuffer=b,this.boundDynamicVertexBuffer2=w;else{C=B.currentNumAttributes||0;for(var Z=M;Z<C;Z++)K.disableVertexAttribArray(Z)}p.enableAttributes(K,l);for(var Y=0,ce=c;Y<ce.length;Y+=1)ce[Y].enableAttributes(K,l);b&&b.enableAttributes(K,l),w&&w.enableAttributes(K,l),p.bind(),p.setVertexAttribPointers(K,l,g);for(var ue=0,xe=c;ue<xe.length;ue+=1){var oe=xe[ue];oe.bind(),oe.setVertexAttribPointers(K,l,g)}b&&(b.bind(),b.setVertexAttribPointers(K,l,g)),d&&d.bind(),w&&(w.bind(),w.setVertexAttribPointers(K,l,g)),B.currentNumAttributes=M},hc.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var qf=function(l,p,c,d,g,b){var w=l.gl;this.program=w.createProgram();for(var C=Vf(c.staticAttributes),M=d?d.getBinderAttributes():[],B=C.concat(M),K=c.staticUniforms?Vf(c.staticUniforms):[],Z=d?d.getBinderUniforms():[],Y=[],ce=0,ue=K.concat(Z);ce<ue.length;ce+=1){var xe=ue[ce];Y.indexOf(xe)<0&&Y.push(xe)}var oe=d?d.defines():[];b&&oe.push("#define OVERDRAW_INSPECTOR;");var ve=oe.concat(fl.fragmentSource,c.fragmentSource).join(`
`),Se=oe.concat(fl.vertexSource,c.vertexSource).join(`
`),Pe=w.createShader(w.FRAGMENT_SHADER);if(w.isContextLost())this.failedToCreate=!0;else{w.shaderSource(Pe,ve),w.compileShader(Pe),w.attachShader(this.program,Pe);var Fe=w.createShader(w.VERTEX_SHADER);if(w.isContextLost())this.failedToCreate=!0;else{w.shaderSource(Fe,Se),w.compileShader(Fe),w.attachShader(this.program,Fe),this.attributes={};var De={};this.numAttributes=B.length;for(var je=0;je<this.numAttributes;je++)B[je]&&(w.bindAttribLocation(this.program,je,B[je]),this.attributes[B[je]]=je);w.linkProgram(this.program),w.deleteShader(Fe),w.deleteShader(Pe);for(var Ke=0;Ke<Y.length;Ke++){var tt=Y[Ke];if(tt&&!De[tt]){var Qe=w.getUniformLocation(this.program,tt);Qe&&(De[tt]=Qe)}}this.fixedUniforms=g(l,De),this.binderUniforms=d?d.getUniforms(l,De):[]}}};function Wf(l,p,c){var d=1/an(c,1,p.transform.tileZoom),g=Math.pow(2,c.tileID.overscaledZ),b=c.tileSize*Math.pow(2,p.transform.tileZoom)/g,w=b*(c.tileID.canonical.x+c.tileID.wrap*g),C=b*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[d,l.fromScale,l.toScale],u_fade:l.t,u_pixel_coord_upper:[w>>16,C>>16],u_pixel_coord_lower:[65535&w,65535&C]}}qf.prototype.draw=function(l,p,c,d,g,b,w,C,M,B,K,Z,Y,ce,ue,xe){var oe,ve=l.gl;if(!this.failedToCreate){for(var Se in l.program.set(this.program),l.setDepthMode(c),l.setStencilMode(d),l.setColorMode(g),l.setCullFace(b),this.fixedUniforms)this.fixedUniforms[Se].set(w[Se]);ce&&ce.setUniforms(l,this.binderUniforms,Z,{zoom:Y});for(var Pe=(oe={},oe[ve.LINES]=2,oe[ve.TRIANGLES]=3,oe[ve.LINE_STRIP]=1,oe)[p],Fe=0,De=K.get();Fe<De.length;Fe+=1){var je=De[Fe],Ke=je.vaos||(je.vaos={});(Ke[C]||(Ke[C]=new hc)).bind(l,this,M,ce?ce.getPaintVertexBuffers():[],B,je.vertexOffset,ue,xe),ve.drawElements(p,je.primitiveLength*Pe,ve.UNSIGNED_SHORT,je.primitiveOffset*Pe*2)}}};var Gf=function(l,p,c,d){var g=p.style.light,b=g.properties.get("position"),w=[b.x,b.y,b.z],C=o.create$1();g.properties.get("anchor")==="viewport"&&o.fromRotation(C,-p.transform.angle),o.transformMat3(w,w,C);var M=g.properties.get("color");return{u_matrix:l,u_lightpos:w,u_lightintensity:g.properties.get("intensity"),u_lightcolor:[M.r,M.g,M.b],u_vertical_gradient:+c,u_opacity:d}},As=function(l,p,c,d,g,b,w){return o.extend(Gf(l,p,c,d),Wf(b,p,w),{u_height_factor:-Math.pow(2,g.overscaledZ)/w.tileSize/8})},Za=function(l){return{u_matrix:l}},Ms=function(l,p,c,d){return o.extend(Za(l),Wf(c,p,d))},Hf=function(l,p){return{u_matrix:l,u_world:p}},Kf=function(l,p,c,d,g){return o.extend(Ms(l,p,c,d),{u_world:g})},xh=function(l,p,c,d){var g,b,w=l.transform;if(d.paint.get("circle-pitch-alignment")==="map"){var C=an(c,1,w.zoom);g=!0,b=[C,C]}else g=!1,b=w.pixelsToGLUnits;return{u_camera_to_center_distance:w.cameraToCenterDistance,u_scale_with_map:+(d.paint.get("circle-pitch-scale")==="map"),u_matrix:l.translatePosMatrix(p.posMatrix,c,d.paint.get("circle-translate"),d.paint.get("circle-translate-anchor")),u_pitch_with_map:+g,u_device_pixel_ratio:o.browser.devicePixelRatio,u_extrude_scale:b}},zs=function(l,p,c){var d=an(c,1,p.zoom),g=Math.pow(2,p.zoom-c.tileID.overscaledZ),b=c.tileID.overscaleFactor();return{u_matrix:l,u_camera_to_center_distance:p.cameraToCenterDistance,u_pixels_to_tile_units:d,u_extrude_scale:[p.pixelsToGLUnits[0]/(d*g),p.pixelsToGLUnits[1]/(d*g)],u_overscale_factor:b}},Zf=function(l,p,c){return{u_matrix:l,u_inv_matrix:p,u_camera_to_center_distance:c.cameraToCenterDistance,u_viewport_size:[c.width,c.height]}},Rs=function(l,p,c){return c===void 0&&(c=1),{u_matrix:l,u_color:p,u_overlay:0,u_overlay_scale:c}},Ls=function(l){return{u_matrix:l}},Xf=function(l,p,c,d){return{u_matrix:l,u_extrude_scale:an(p,1,c),u_intensity:d}},pu=function(l,p,c){var d=l.transform;return{u_matrix:Yf(l,p,c),u_ratio:1/an(p,1,d.zoom),u_device_pixel_ratio:o.browser.devicePixelRatio,u_units_to_pixels:[1/d.pixelsToGLUnits[0],1/d.pixelsToGLUnits[1]]}},Yr=function(l,p,c,d){return o.extend(pu(l,p,c),{u_image:0,u_image_height:d})},dc=function(l,p,c,d){var g=l.transform,b=ml(p,g);return{u_matrix:Yf(l,p,c),u_texsize:p.imageAtlasTexture.size,u_ratio:1/an(p,1,g.zoom),u_device_pixel_ratio:o.browser.devicePixelRatio,u_image:0,u_scale:[b,d.fromScale,d.toScale],u_fade:d.t,u_units_to_pixels:[1/g.pixelsToGLUnits[0],1/g.pixelsToGLUnits[1]]}},o0=function(l,p,c,d,g){var b=l.lineAtlas,w=ml(p,l.transform),C=c.layout.get("line-cap")==="round",M=b.getDash(d.from,C),B=b.getDash(d.to,C),K=M.width*g.fromScale,Z=B.width*g.toScale;return o.extend(pu(l,p,c),{u_patternscale_a:[w/K,-M.height/2],u_patternscale_b:[w/Z,-B.height/2],u_sdfgamma:b.width/(256*Math.min(K,Z)*o.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:M.y,u_tex_y_b:B.y,u_mix:g.t})};function ml(l,p){return 1/an(l,1,p.tileZoom)}function Yf(l,p,c){return l.translatePosMatrix(p.tileID.posMatrix,p,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}var a0=function(l,p,c,d,g){return{u_matrix:l,u_tl_parent:p,u_scale_parent:c,u_buffer_scale:1,u_fade_t:d.mix,u_opacity:d.opacity*g.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:g.paint.get("raster-brightness-min"),u_brightness_high:g.paint.get("raster-brightness-max"),u_saturation_factor:(w=g.paint.get("raster-saturation"),w>0?1-1/(1.001-w):-w),u_contrast_factor:(b=g.paint.get("raster-contrast"),b>0?1/(1-b):1+b),u_spin_weights:Jf(g.paint.get("raster-hue-rotate"))};var b,w};function Jf(l){l*=Math.PI/180;var p=Math.sin(l),c=Math.cos(l);return[(2*c+1)/3,(-Math.sqrt(3)*p-c+1)/3,(Math.sqrt(3)*p-c+1)/3]}var fc,yl=function(l,p,c,d,g,b,w,C,M,B){var K=g.transform;return{u_is_size_zoom_constant:+(l==="constant"||l==="source"),u_is_size_feature_constant:+(l==="constant"||l==="camera"),u_size_t:p?p.uSizeT:0,u_size:p?p.uSize:0,u_camera_to_center_distance:K.cameraToCenterDistance,u_pitch:K.pitch/360*2*Math.PI,u_rotate_symbol:+c,u_aspect_ratio:K.width/K.height,u_fade_change:g.options.fadeDuration?g.symbolFadeChange:1,u_matrix:b,u_label_plane_matrix:w,u_coord_matrix:C,u_is_text:+M,u_pitch_with_map:+d,u_texsize:B,u_texture:0}},hu=function(l,p,c,d,g,b,w,C,M,B,K){var Z=g.transform;return o.extend(yl(l,p,c,d,g,b,w,C,M,B),{u_gamma_scale:d?Math.cos(Z._pitch)*Z.cameraToCenterDistance:1,u_device_pixel_ratio:o.browser.devicePixelRatio,u_is_halo:+K})},mc=function(l,p,c,d,g,b,w,C,M,B){return o.extend(hu(l,p,c,d,g,b,w,C,!0,M,!0),{u_texsize_icon:B,u_texture_icon:1})},du=function(l,p,c){return{u_matrix:l,u_opacity:p,u_color:c}},gl=function(l,p,c,d,g,b){return o.extend(function(w,C,M,B){var K=M.imageManager.getPattern(w.from.toString()),Z=M.imageManager.getPattern(w.to.toString()),Y=M.imageManager.getPixelSize(),ce=Y.width,ue=Y.height,xe=Math.pow(2,B.tileID.overscaledZ),oe=B.tileSize*Math.pow(2,M.transform.tileZoom)/xe,ve=oe*(B.tileID.canonical.x+B.tileID.wrap*xe),Se=oe*B.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:K.tl,u_pattern_br_a:K.br,u_pattern_tl_b:Z.tl,u_pattern_br_b:Z.br,u_texsize:[ce,ue],u_mix:C.t,u_pattern_size_a:K.displaySize,u_pattern_size_b:Z.displaySize,u_scale_a:C.fromScale,u_scale_b:C.toScale,u_tile_units_to_pixels:1/an(B,1,M.transform.tileZoom),u_pixel_coord_upper:[ve>>16,Se>>16],u_pixel_coord_lower:[65535&ve,65535&Se]}}(d,b,c,g),{u_matrix:l,u_opacity:p})},Qf={fillExtrusion:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_lightpos:new o.Uniform3f(l,p.u_lightpos),u_lightintensity:new o.Uniform1f(l,p.u_lightintensity),u_lightcolor:new o.Uniform3f(l,p.u_lightcolor),u_vertical_gradient:new o.Uniform1f(l,p.u_vertical_gradient),u_opacity:new o.Uniform1f(l,p.u_opacity)}},fillExtrusionPattern:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_lightpos:new o.Uniform3f(l,p.u_lightpos),u_lightintensity:new o.Uniform1f(l,p.u_lightintensity),u_lightcolor:new o.Uniform3f(l,p.u_lightcolor),u_vertical_gradient:new o.Uniform1f(l,p.u_vertical_gradient),u_height_factor:new o.Uniform1f(l,p.u_height_factor),u_image:new o.Uniform1i(l,p.u_image),u_texsize:new o.Uniform2f(l,p.u_texsize),u_pixel_coord_upper:new o.Uniform2f(l,p.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(l,p.u_pixel_coord_lower),u_scale:new o.Uniform3f(l,p.u_scale),u_fade:new o.Uniform1f(l,p.u_fade),u_opacity:new o.Uniform1f(l,p.u_opacity)}},fill:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix)}},fillPattern:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_image:new o.Uniform1i(l,p.u_image),u_texsize:new o.Uniform2f(l,p.u_texsize),u_pixel_coord_upper:new o.Uniform2f(l,p.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(l,p.u_pixel_coord_lower),u_scale:new o.Uniform3f(l,p.u_scale),u_fade:new o.Uniform1f(l,p.u_fade)}},fillOutline:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_world:new o.Uniform2f(l,p.u_world)}},fillOutlinePattern:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_world:new o.Uniform2f(l,p.u_world),u_image:new o.Uniform1i(l,p.u_image),u_texsize:new o.Uniform2f(l,p.u_texsize),u_pixel_coord_upper:new o.Uniform2f(l,p.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(l,p.u_pixel_coord_lower),u_scale:new o.Uniform3f(l,p.u_scale),u_fade:new o.Uniform1f(l,p.u_fade)}},circle:function(l,p){return{u_camera_to_center_distance:new o.Uniform1f(l,p.u_camera_to_center_distance),u_scale_with_map:new o.Uniform1i(l,p.u_scale_with_map),u_pitch_with_map:new o.Uniform1i(l,p.u_pitch_with_map),u_extrude_scale:new o.Uniform2f(l,p.u_extrude_scale),u_device_pixel_ratio:new o.Uniform1f(l,p.u_device_pixel_ratio),u_matrix:new o.UniformMatrix4f(l,p.u_matrix)}},collisionBox:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_camera_to_center_distance:new o.Uniform1f(l,p.u_camera_to_center_distance),u_pixels_to_tile_units:new o.Uniform1f(l,p.u_pixels_to_tile_units),u_extrude_scale:new o.Uniform2f(l,p.u_extrude_scale),u_overscale_factor:new o.Uniform1f(l,p.u_overscale_factor)}},collisionCircle:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_inv_matrix:new o.UniformMatrix4f(l,p.u_inv_matrix),u_camera_to_center_distance:new o.Uniform1f(l,p.u_camera_to_center_distance),u_viewport_size:new o.Uniform2f(l,p.u_viewport_size)}},debug:function(l,p){return{u_color:new o.UniformColor(l,p.u_color),u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_overlay:new o.Uniform1i(l,p.u_overlay),u_overlay_scale:new o.Uniform1f(l,p.u_overlay_scale)}},clippingMask:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix)}},heatmap:function(l,p){return{u_extrude_scale:new o.Uniform1f(l,p.u_extrude_scale),u_intensity:new o.Uniform1f(l,p.u_intensity),u_matrix:new o.UniformMatrix4f(l,p.u_matrix)}},heatmapTexture:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_world:new o.Uniform2f(l,p.u_world),u_image:new o.Uniform1i(l,p.u_image),u_color_ramp:new o.Uniform1i(l,p.u_color_ramp),u_opacity:new o.Uniform1f(l,p.u_opacity)}},hillshade:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_image:new o.Uniform1i(l,p.u_image),u_latrange:new o.Uniform2f(l,p.u_latrange),u_light:new o.Uniform2f(l,p.u_light),u_shadow:new o.UniformColor(l,p.u_shadow),u_highlight:new o.UniformColor(l,p.u_highlight),u_accent:new o.UniformColor(l,p.u_accent)}},hillshadePrepare:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_image:new o.Uniform1i(l,p.u_image),u_dimension:new o.Uniform2f(l,p.u_dimension),u_zoom:new o.Uniform1f(l,p.u_zoom),u_unpack:new o.Uniform4f(l,p.u_unpack)}},line:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_ratio:new o.Uniform1f(l,p.u_ratio),u_device_pixel_ratio:new o.Uniform1f(l,p.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(l,p.u_units_to_pixels)}},lineGradient:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_ratio:new o.Uniform1f(l,p.u_ratio),u_device_pixel_ratio:new o.Uniform1f(l,p.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(l,p.u_units_to_pixels),u_image:new o.Uniform1i(l,p.u_image),u_image_height:new o.Uniform1f(l,p.u_image_height)}},linePattern:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_texsize:new o.Uniform2f(l,p.u_texsize),u_ratio:new o.Uniform1f(l,p.u_ratio),u_device_pixel_ratio:new o.Uniform1f(l,p.u_device_pixel_ratio),u_image:new o.Uniform1i(l,p.u_image),u_units_to_pixels:new o.Uniform2f(l,p.u_units_to_pixels),u_scale:new o.Uniform3f(l,p.u_scale),u_fade:new o.Uniform1f(l,p.u_fade)}},lineSDF:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_ratio:new o.Uniform1f(l,p.u_ratio),u_device_pixel_ratio:new o.Uniform1f(l,p.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(l,p.u_units_to_pixels),u_patternscale_a:new o.Uniform2f(l,p.u_patternscale_a),u_patternscale_b:new o.Uniform2f(l,p.u_patternscale_b),u_sdfgamma:new o.Uniform1f(l,p.u_sdfgamma),u_image:new o.Uniform1i(l,p.u_image),u_tex_y_a:new o.Uniform1f(l,p.u_tex_y_a),u_tex_y_b:new o.Uniform1f(l,p.u_tex_y_b),u_mix:new o.Uniform1f(l,p.u_mix)}},raster:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_tl_parent:new o.Uniform2f(l,p.u_tl_parent),u_scale_parent:new o.Uniform1f(l,p.u_scale_parent),u_buffer_scale:new o.Uniform1f(l,p.u_buffer_scale),u_fade_t:new o.Uniform1f(l,p.u_fade_t),u_opacity:new o.Uniform1f(l,p.u_opacity),u_image0:new o.Uniform1i(l,p.u_image0),u_image1:new o.Uniform1i(l,p.u_image1),u_brightness_low:new o.Uniform1f(l,p.u_brightness_low),u_brightness_high:new o.Uniform1f(l,p.u_brightness_high),u_saturation_factor:new o.Uniform1f(l,p.u_saturation_factor),u_contrast_factor:new o.Uniform1f(l,p.u_contrast_factor),u_spin_weights:new o.Uniform3f(l,p.u_spin_weights)}},symbolIcon:function(l,p){return{u_is_size_zoom_constant:new o.Uniform1i(l,p.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(l,p.u_is_size_feature_constant),u_size_t:new o.Uniform1f(l,p.u_size_t),u_size:new o.Uniform1f(l,p.u_size),u_camera_to_center_distance:new o.Uniform1f(l,p.u_camera_to_center_distance),u_pitch:new o.Uniform1f(l,p.u_pitch),u_rotate_symbol:new o.Uniform1i(l,p.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(l,p.u_aspect_ratio),u_fade_change:new o.Uniform1f(l,p.u_fade_change),u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(l,p.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(l,p.u_coord_matrix),u_is_text:new o.Uniform1i(l,p.u_is_text),u_pitch_with_map:new o.Uniform1i(l,p.u_pitch_with_map),u_texsize:new o.Uniform2f(l,p.u_texsize),u_texture:new o.Uniform1i(l,p.u_texture)}},symbolSDF:function(l,p){return{u_is_size_zoom_constant:new o.Uniform1i(l,p.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(l,p.u_is_size_feature_constant),u_size_t:new o.Uniform1f(l,p.u_size_t),u_size:new o.Uniform1f(l,p.u_size),u_camera_to_center_distance:new o.Uniform1f(l,p.u_camera_to_center_distance),u_pitch:new o.Uniform1f(l,p.u_pitch),u_rotate_symbol:new o.Uniform1i(l,p.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(l,p.u_aspect_ratio),u_fade_change:new o.Uniform1f(l,p.u_fade_change),u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(l,p.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(l,p.u_coord_matrix),u_is_text:new o.Uniform1i(l,p.u_is_text),u_pitch_with_map:new o.Uniform1i(l,p.u_pitch_with_map),u_texsize:new o.Uniform2f(l,p.u_texsize),u_texture:new o.Uniform1i(l,p.u_texture),u_gamma_scale:new o.Uniform1f(l,p.u_gamma_scale),u_device_pixel_ratio:new o.Uniform1f(l,p.u_device_pixel_ratio),u_is_halo:new o.Uniform1i(l,p.u_is_halo)}},symbolTextAndIcon:function(l,p){return{u_is_size_zoom_constant:new o.Uniform1i(l,p.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(l,p.u_is_size_feature_constant),u_size_t:new o.Uniform1f(l,p.u_size_t),u_size:new o.Uniform1f(l,p.u_size),u_camera_to_center_distance:new o.Uniform1f(l,p.u_camera_to_center_distance),u_pitch:new o.Uniform1f(l,p.u_pitch),u_rotate_symbol:new o.Uniform1i(l,p.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(l,p.u_aspect_ratio),u_fade_change:new o.Uniform1f(l,p.u_fade_change),u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(l,p.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(l,p.u_coord_matrix),u_is_text:new o.Uniform1i(l,p.u_is_text),u_pitch_with_map:new o.Uniform1i(l,p.u_pitch_with_map),u_texsize:new o.Uniform2f(l,p.u_texsize),u_texsize_icon:new o.Uniform2f(l,p.u_texsize_icon),u_texture:new o.Uniform1i(l,p.u_texture),u_texture_icon:new o.Uniform1i(l,p.u_texture_icon),u_gamma_scale:new o.Uniform1f(l,p.u_gamma_scale),u_device_pixel_ratio:new o.Uniform1f(l,p.u_device_pixel_ratio),u_is_halo:new o.Uniform1i(l,p.u_is_halo)}},background:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_opacity:new o.Uniform1f(l,p.u_opacity),u_color:new o.UniformColor(l,p.u_color)}},backgroundPattern:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_opacity:new o.Uniform1f(l,p.u_opacity),u_image:new o.Uniform1i(l,p.u_image),u_pattern_tl_a:new o.Uniform2f(l,p.u_pattern_tl_a),u_pattern_br_a:new o.Uniform2f(l,p.u_pattern_br_a),u_pattern_tl_b:new o.Uniform2f(l,p.u_pattern_tl_b),u_pattern_br_b:new o.Uniform2f(l,p.u_pattern_br_b),u_texsize:new o.Uniform2f(l,p.u_texsize),u_mix:new o.Uniform1f(l,p.u_mix),u_pattern_size_a:new o.Uniform2f(l,p.u_pattern_size_a),u_pattern_size_b:new o.Uniform2f(l,p.u_pattern_size_b),u_scale_a:new o.Uniform1f(l,p.u_scale_a),u_scale_b:new o.Uniform1f(l,p.u_scale_b),u_pixel_coord_upper:new o.Uniform2f(l,p.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(l,p.u_pixel_coord_lower),u_tile_units_to_pixels:new o.Uniform1f(l,p.u_tile_units_to_pixels)}}};function vl(l,p,c,d,g,b,w){for(var C=l.context,M=C.gl,B=l.useProgram("collisionBox"),K=[],Z=0,Y=0,ce=0;ce<d.length;ce++){var ue=d[ce],xe=p.getTile(ue),oe=xe.getBucket(c);if(oe){var ve=ue.posMatrix;g[0]===0&&g[1]===0||(ve=l.translatePosMatrix(ue.posMatrix,xe,g,b));var Se=w?oe.textCollisionBox:oe.iconCollisionBox,Pe=oe.collisionCircleArray;if(Pe.length>0){var Fe=o.create(),De=ve;o.mul(Fe,oe.placementInvProjMatrix,l.transform.glCoordMatrix),o.mul(Fe,Fe,oe.placementViewportMatrix),K.push({circleArray:Pe,circleOffset:Y,transform:De,invTransform:Fe}),Y=Z+=Pe.length/4}Se&&B.draw(C,M.LINES,X.disabled,re.disabled,l.colorModeForRenderPass(),ye.disabled,zs(ve,l.transform,xe),c.id,Se.layoutVertexBuffer,Se.indexBuffer,Se.segments,null,l.transform.zoom,null,null,Se.collisionVertexBuffer)}}if(w&&K.length){var je=l.useProgram("collisionCircle"),Ke=new o.StructArrayLayout2f1f2i16;Ke.resize(4*Z),Ke._trim();for(var tt=0,Qe=0,ft=K;Qe<ft.length;Qe+=1)for(var Et=ft[Qe],It=0;It<Et.circleArray.length/4;It++){var Tt=4*It,_r=Et.circleArray[Tt+0],mt=Et.circleArray[Tt+1],qt=Et.circleArray[Tt+2],rr=Et.circleArray[Tt+3];Ke.emplace(tt++,_r,mt,qt,rr,0),Ke.emplace(tt++,_r,mt,qt,rr,1),Ke.emplace(tt++,_r,mt,qt,rr,2),Ke.emplace(tt++,_r,mt,qt,rr,3)}(!fc||fc.length<2*Z)&&(fc=function(vn){var yi=2*vn,ri=new o.StructArrayLayout3ui6;ri.resize(yi),ri._trim();for(var mn=0;mn<yi;mn++){var kn=6*mn;ri.uint16[kn+0]=4*mn+0,ri.uint16[kn+1]=4*mn+1,ri.uint16[kn+2]=4*mn+2,ri.uint16[kn+3]=4*mn+2,ri.uint16[kn+4]=4*mn+3,ri.uint16[kn+5]=4*mn+0}return ri}(Z));for(var Vt=C.createIndexBuffer(fc,!0),Ut=C.createVertexBuffer(Ke,o.collisionCircleLayout.members,!0),Jt=0,Ft=K;Jt<Ft.length;Jt+=1){var Ot=Ft[Jt],Gn=Zf(Ot.transform,Ot.invTransform,l.transform);je.draw(C,M.TRIANGLES,X.disabled,re.disabled,l.colorModeForRenderPass(),ye.disabled,Gn,c.id,Ut,Vt,o.SegmentVector.simpleSegment(0,2*Ot.circleOffset,Ot.circleArray.length,Ot.circleArray.length/2),null,l.transform.zoom,null,null,null)}Ut.destroy(),Vt.destroy()}}var Fo=o.identity(new Float32Array(16));function em(l,p,c,d,g,b){var w=o.getAnchorAlignment(l),C=-(w.horizontalAlign-.5)*p,M=-(w.verticalAlign-.5)*c,B=o.evaluateVariableOffset(l,d);return new o.Point((C/g+B[0])*b,(M/g+B[1])*b)}function tm(l,p,c,d,g,b,w,C,M,B,K){var Z=l.text.placedSymbolArray,Y=l.text.dynamicLayoutVertexArray,ce=l.icon.dynamicLayoutVertexArray,ue={};Y.clear();for(var xe=0;xe<Z.length;xe++){var oe=Z.get(xe),ve=oe.hidden||!oe.crossTileID||l.allowVerticalPlacement&&!oe.placedOrientation?null:d[oe.crossTileID];if(ve){var Se=new o.Point(oe.anchorX,oe.anchorY),Pe=dr(Se,c?C:w),Fe=Ir(b.cameraToCenterDistance,Pe.signedDistanceFromCamera),De=g.evaluateSizeForFeature(l.textSizeData,B,oe)*Fe/o.ONE_EM;c&&(De*=l.tilePixelRatio/M);for(var je=em(ve.anchor,ve.width,ve.height,ve.textOffset,ve.textBoxScale,De),Ke=c?dr(Se.add(je),w).point:Pe.point.add(p?je.rotate(-b.angle):je),tt=l.allowVerticalPlacement&&oe.placedOrientation===o.WritingMode.vertical?Math.PI/2:0,Qe=0;Qe<oe.numGlyphs;Qe++)o.addDynamicAttributes(Y,Ke,tt);K&&oe.associatedIconIndex>=0&&(ue[oe.associatedIconIndex]={shiftedAnchor:Ke,angle:tt})}else wi(oe.numGlyphs,Y)}if(K){ce.clear();for(var ft=l.icon.placedSymbolArray,Et=0;Et<ft.length;Et++){var It=ft.get(Et);if(It.hidden)wi(It.numGlyphs,ce);else{var Tt=ue[Et];if(Tt)for(var _r=0;_r<It.numGlyphs;_r++)o.addDynamicAttributes(ce,Tt.shiftedAnchor,Tt.angle);else wi(It.numGlyphs,ce)}}l.icon.dynamicLayoutVertexBuffer.updateData(ce)}l.text.dynamicLayoutVertexBuffer.updateData(Y)}function rm(l,p,c){return c.iconsInText&&p?"symbolTextAndIcon":l?"symbolSDF":"symbolIcon"}function Ds(l,p,c,d,g,b,w,C,M,B,K,Z){for(var Y=l.context,ce=Y.gl,ue=l.transform,xe=C==="map",oe=M==="map",ve=xe&&c.layout.get("symbol-placement")!=="point",Se=xe&&!oe&&!ve,Pe=c.layout.get("symbol-sort-key").constantOr(1)!==void 0,Fe=!1,De=l.depthModeForSublayer(0,X.ReadOnly),je=c.layout.get("text-variable-anchor"),Ke=[],tt=0,Qe=d;tt<Qe.length;tt+=1){var ft=Qe[tt],Et=p.getTile(ft),It=Et.getBucket(c);if(It){var Tt=g?It.text:It.icon;if(Tt&&Tt.segments.get().length){var _r=Tt.programConfigurations.get(c.id),mt=g||It.sdfIcons,qt=g?It.textSizeData:It.iconSizeData,rr=oe||ue.pitch!==0,Vt=l.useProgram(rm(mt,g,It),_r),Ut=o.evaluateSizeForZoom(qt,ue.zoom),Jt=void 0,Ft=[0,0],Ot=void 0,Gn=void 0,vn=null,yi=void 0;if(g)Ot=Et.glyphAtlasTexture,Gn=ce.LINEAR,Jt=Et.glyphAtlasTexture.size,It.iconsInText&&(Ft=Et.imageAtlasTexture.size,vn=Et.imageAtlasTexture,yi=rr||l.options.rotating||l.options.zooming||qt.kind==="composite"||qt.kind==="camera"?ce.LINEAR:ce.NEAREST);else{var ri=c.layout.get("icon-size").constantOr(0)!==1||It.iconsNeedLinear;Ot=Et.imageAtlasTexture,Gn=mt||l.options.rotating||l.options.zooming||ri||rr?ce.LINEAR:ce.NEAREST,Jt=Et.imageAtlasTexture.size}var mn=an(Et,1,l.transform.zoom),kn=En(ft.posMatrix,oe,xe,l.transform,mn),Ji=qr(ft.posMatrix,oe,xe,l.transform,mn),ki=je&&It.hasTextData(),ts=c.layout.get("icon-text-fit")!=="none"&&ki&&It.hasIconData();ve&&ou(It,ft.posMatrix,l,g,kn,Ji,oe,B);var Di=l.translatePosMatrix(ft.posMatrix,Et,b,w),qo=ve||g&&je||ts?Fo:kn,So=l.translatePosMatrix(Ji,Et,b,w,!0),Cu=mt&&c.paint.get(g?"text-halo-width":"icon-halo-width").constantOr(1)!==0,El={program:Vt,buffers:Tt,uniformValues:mt?It.iconsInText?mc(qt.kind,Ut,Se,oe,l,Di,qo,So,Jt,Ft):hu(qt.kind,Ut,Se,oe,l,Di,qo,So,g,Jt,!0):yl(qt.kind,Ut,Se,oe,l,Di,qo,So,g,Jt),atlasTexture:Ot,atlasTextureIcon:vn,atlasInterpolation:Gn,atlasInterpolationIcon:yi,isSDF:mt,hasHalo:Cu};if(Pe&&It.canOverlap){Fe=!0;for(var rs=0,Cl=Tt.segments.get();rs<Cl.length;rs+=1){var ku=Cl[rs];Ke.push({segments:new o.SegmentVector([ku]),sortKey:ku.sortKey,state:El})}}else Ke.push({segments:Tt.segments,sortKey:0,state:El})}}}Fe&&Ke.sort(function(ns,Us){return ns.sortKey-Us.sortKey});for(var la=0,Tu=Ke;la<Tu.length;la+=1){var ua=Tu[la],Hn=ua.state;if(Y.activeTexture.set(ce.TEXTURE0),Hn.atlasTexture.bind(Hn.atlasInterpolation,ce.CLAMP_TO_EDGE),Hn.atlasTextureIcon&&(Y.activeTexture.set(ce.TEXTURE1),Hn.atlasTextureIcon&&Hn.atlasTextureIcon.bind(Hn.atlasInterpolationIcon,ce.CLAMP_TO_EDGE)),Hn.isSDF){var Ca=Hn.uniformValues;Hn.hasHalo&&(Ca.u_is_halo=1,fu(Hn.buffers,ua.segments,c,l,Hn.program,De,K,Z,Ca)),Ca.u_is_halo=0}fu(Hn.buffers,ua.segments,c,l,Hn.program,De,K,Z,Hn.uniformValues)}}function fu(l,p,c,d,g,b,w,C,M){var B=d.context;g.draw(B,B.gl.TRIANGLES,b,w,C,ye.disabled,M,c.id,l.layoutVertexBuffer,l.indexBuffer,p,c.paint,d.transform.zoom,l.programConfigurations.get(c.id),l.dynamicLayoutVertexBuffer,l.opacityVertexBuffer)}function yc(l,p,c,d,g,b,w){var C,M,B,K,Z,Y=l.context.gl,ce=c.paint.get("fill-pattern"),ue=ce&&ce.constantOr(1),xe=c.getCrossfadeParameters();w?(M=ue&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",C=Y.LINES):(M=ue?"fillPattern":"fill",C=Y.TRIANGLES);for(var oe=0,ve=d;oe<ve.length;oe+=1){var Se=ve[oe],Pe=p.getTile(Se);if(!ue||Pe.patternsLoaded()){var Fe=Pe.getBucket(c);if(Fe){var De=Fe.programConfigurations.get(c.id),je=l.useProgram(M,De);ue&&(l.context.activeTexture.set(Y.TEXTURE0),Pe.imageAtlasTexture.bind(Y.LINEAR,Y.CLAMP_TO_EDGE),De.updatePaintBuffers(xe));var Ke=ce.constantOr(null);if(Ke&&Pe.imageAtlas){var tt=Pe.imageAtlas,Qe=tt.patternPositions[Ke.to.toString()],ft=tt.patternPositions[Ke.from.toString()];Qe&&ft&&De.setConstantPatternPositions(Qe,ft)}var Et=l.translatePosMatrix(Se.posMatrix,Pe,c.paint.get("fill-translate"),c.paint.get("fill-translate-anchor"));if(w){K=Fe.indexBuffer2,Z=Fe.segments2;var It=[Y.drawingBufferWidth,Y.drawingBufferHeight];B=M==="fillOutlinePattern"&&ue?Kf(Et,l,xe,Pe,It):Hf(Et,It)}else K=Fe.indexBuffer,Z=Fe.segments,B=ue?Ms(Et,l,xe,Pe):Za(Et);je.draw(l.context,C,g,l.stencilModeForClipping(Se),b,ye.disabled,B,c.id,Fe.layoutVertexBuffer,K,Z,c.paint,l.transform.zoom,De)}}}}function bh(l,p,c,d,g,b,w){for(var C=l.context,M=C.gl,B=c.paint.get("fill-extrusion-pattern"),K=B.constantOr(1),Z=c.getCrossfadeParameters(),Y=c.paint.get("fill-extrusion-opacity"),ce=0,ue=d;ce<ue.length;ce+=1){var xe=ue[ce],oe=p.getTile(xe),ve=oe.getBucket(c);if(ve){var Se=ve.programConfigurations.get(c.id),Pe=l.useProgram(K?"fillExtrusionPattern":"fillExtrusion",Se);K&&(l.context.activeTexture.set(M.TEXTURE0),oe.imageAtlasTexture.bind(M.LINEAR,M.CLAMP_TO_EDGE),Se.updatePaintBuffers(Z));var Fe=B.constantOr(null);if(Fe&&oe.imageAtlas){var De=oe.imageAtlas,je=De.patternPositions[Fe.to.toString()],Ke=De.patternPositions[Fe.from.toString()];je&&Ke&&Se.setConstantPatternPositions(je,Ke)}var tt=l.translatePosMatrix(xe.posMatrix,oe,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),Qe=c.paint.get("fill-extrusion-vertical-gradient"),ft=K?As(tt,l,Qe,Y,xe,Z,oe):Gf(tt,l,Qe,Y);Pe.draw(C,C.gl.TRIANGLES,g,b,w,ye.backCCW,ft,c.id,ve.layoutVertexBuffer,ve.indexBuffer,ve.segments,c.paint,l.transform.zoom,Se)}}}function gc(l,p,c,d,g,b){var w=l.context,C=w.gl,M=p.fbo;if(M){var B=l.useProgram("hillshade");w.activeTexture.set(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,M.colorAttachment.get());var K=function(Z,Y,ce){var ue=ce.paint.get("hillshade-shadow-color"),xe=ce.paint.get("hillshade-highlight-color"),oe=ce.paint.get("hillshade-accent-color"),ve=ce.paint.get("hillshade-illumination-direction")*(Math.PI/180);ce.paint.get("hillshade-illumination-anchor")==="viewport"&&(ve-=Z.transform.angle);var Se,Pe,Fe,De=!Z.options.moving;return{u_matrix:Z.transform.calculatePosMatrix(Y.tileID.toUnwrapped(),De),u_image:0,u_latrange:(Se=Y.tileID,Pe=Math.pow(2,Se.canonical.z),Fe=Se.canonical.y,[new o.MercatorCoordinate(0,Fe/Pe).toLngLat().lat,new o.MercatorCoordinate(0,(Fe+1)/Pe).toLngLat().lat]),u_light:[ce.paint.get("hillshade-exaggeration"),ve],u_shadow:ue,u_highlight:xe,u_accent:oe}}(l,p,c);B.draw(w,C.TRIANGLES,d,g,b,ye.disabled,K,c.id,l.rasterBoundsBuffer,l.quadTriangleIndexBuffer,l.rasterBoundsSegments)}}function s0(l,p,c,d,g,b){var w=l.context,C=w.gl,M=p.dem;if(M&&M.data){var B=M.dim,K=M.stride,Z=M.getPixels();if(w.activeTexture.set(C.TEXTURE1),w.pixelStoreUnpackPremultiplyAlpha.set(!1),p.demTexture=p.demTexture||l.getTileTexture(K),p.demTexture){var Y=p.demTexture;Y.update(Z,{premultiply:!1}),Y.bind(C.NEAREST,C.CLAMP_TO_EDGE)}else p.demTexture=new o.Texture(w,Z,C.RGBA,{premultiply:!1}),p.demTexture.bind(C.NEAREST,C.CLAMP_TO_EDGE);w.activeTexture.set(C.TEXTURE0);var ce=p.fbo;if(!ce){var ue=new o.Texture(w,{width:B,height:B,data:null},C.RGBA);ue.bind(C.LINEAR,C.CLAMP_TO_EDGE),(ce=p.fbo=w.createFramebuffer(B,B,!0)).colorAttachment.set(ue.texture)}w.bindFramebuffer.set(ce.framebuffer),w.viewport.set([0,0,B,B]),l.useProgram("hillshadePrepare").draw(w,C.TRIANGLES,d,g,b,ye.disabled,function(xe,oe){var ve=oe.stride,Se=o.create();return o.ortho(Se,0,o.EXTENT,-o.EXTENT,0,0,1),o.translate(Se,Se,[0,-o.EXTENT,0]),{u_matrix:Se,u_image:1,u_dimension:[ve,ve],u_zoom:xe.overscaledZ,u_unpack:oe.getUnpackVector()}}(p.tileID,M),c.id,l.rasterBoundsBuffer,l.quadTriangleIndexBuffer,l.rasterBoundsSegments),p.needsHillshadePrepare=!1}}function vc(l,p,c,d,g){var b=d.paint.get("raster-fade-duration");if(b>0){var w=o.browser.now(),C=(w-l.timeAdded)/b,M=p?(w-p.timeAdded)/b:-1,B=c.getSource(),K=g.coveringZoomLevel({tileSize:B.tileSize,roundZoom:B.roundZoom}),Z=!p||Math.abs(p.tileID.overscaledZ-K)>Math.abs(l.tileID.overscaledZ-K),Y=Z&&l.refreshedUponExpiration?1:o.clamp(Z?C:1-M,0,1);return l.refreshedUponExpiration&&C>=1&&(l.refreshedUponExpiration=!1),p?{opacity:1,mix:1-Y}:{opacity:Y,mix:0}}return{opacity:1,mix:0}}var wh=new o.Color(1,0,0,1),nm=new o.Color(0,1,0,1),im=new o.Color(0,0,1,1),_c=new o.Color(1,0,1,1),Sh=new o.Color(0,1,1,1);function Eh(l,p,c,d){mu(l,0,p+c/2,l.transform.width,c,d)}function Ch(l,p,c,d){mu(l,p-c/2,0,c,l.transform.height,d)}function mu(l,p,c,d,g,b){var w=l.context,C=w.gl;C.enable(C.SCISSOR_TEST),C.scissor(p*o.browser.devicePixelRatio,c*o.browser.devicePixelRatio,d*o.browser.devicePixelRatio,g*o.browser.devicePixelRatio),w.clear({color:b}),C.disable(C.SCISSOR_TEST)}function om(l,p,c){var d=l.context,g=d.gl,b=c.posMatrix,w=l.useProgram("debug"),C=X.disabled,M=re.disabled,B=l.colorModeForRenderPass();d.activeTexture.set(g.TEXTURE0),l.emptyTexture.bind(g.LINEAR,g.CLAMP_TO_EDGE),w.draw(d,g.LINE_STRIP,C,M,B,ye.disabled,Rs(b,o.Color.red),"$debug",l.debugBuffer,l.tileBorderIndexBuffer,l.debugSegments);var K=p.getTileByID(c.key).latestRawTileData,Z=Math.floor((K&&K.byteLength||0)/1024),Y=p.getTile(c).tileSize,ce=512/Math.min(Y,512)*(c.overscaledZ/l.transform.zoom)*.5,ue=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(ue+=" => "+c.overscaledZ),function(xe,oe){xe.initDebugOverlayCanvas();var ve=xe.debugOverlayCanvas,Se=xe.context.gl,Pe=xe.debugOverlayCanvas.getContext("2d");Pe.clearRect(0,0,ve.width,ve.height),Pe.shadowColor="white",Pe.shadowBlur=2,Pe.lineWidth=1.5,Pe.strokeStyle="white",Pe.textBaseline="top",Pe.font="bold 36px Open Sans, sans-serif",Pe.fillText(oe,5,5),Pe.strokeText(oe,5,5),xe.debugOverlayTexture.update(ve),xe.debugOverlayTexture.bind(Se.LINEAR,Se.CLAMP_TO_EDGE)}(l,ue+" "+Z+"kb"),w.draw(d,g.TRIANGLES,C,M,me.alphaBlended,ye.disabled,Rs(b,o.Color.transparent,ce),"$debug",l.debugBuffer,l.quadTriangleIndexBuffer,l.debugSegments)}var Os={symbol:function(l,p,c,d,g){if(l.renderPass==="translucent"){var b=re.disabled,w=l.colorModeForRenderPass();c.layout.get("text-variable-anchor")&&function(C,M,B,K,Z,Y,ce){for(var ue=M.transform,xe=Z==="map",oe=Y==="map",ve=0,Se=C;ve<Se.length;ve+=1){var Pe=Se[ve],Fe=K.getTile(Pe),De=Fe.getBucket(B);if(De&&De.text&&De.text.segments.get().length){var je=o.evaluateSizeForZoom(De.textSizeData,ue.zoom),Ke=an(Fe,1,M.transform.zoom),tt=En(Pe.posMatrix,oe,xe,M.transform,Ke),Qe=B.layout.get("icon-text-fit")!=="none"&&De.hasIconData();if(je){var ft=Math.pow(2,ue.zoom-Fe.tileID.overscaledZ);tm(De,xe,oe,ce,o.symbolSize,ue,tt,Pe.posMatrix,ft,je,Qe)}}}}(d,l,c,p,c.layout.get("text-rotation-alignment"),c.layout.get("text-pitch-alignment"),g),c.paint.get("icon-opacity").constantOr(1)!==0&&Ds(l,p,c,d,!1,c.paint.get("icon-translate"),c.paint.get("icon-translate-anchor"),c.layout.get("icon-rotation-alignment"),c.layout.get("icon-pitch-alignment"),c.layout.get("icon-keep-upright"),b,w),c.paint.get("text-opacity").constantOr(1)!==0&&Ds(l,p,c,d,!0,c.paint.get("text-translate"),c.paint.get("text-translate-anchor"),c.layout.get("text-rotation-alignment"),c.layout.get("text-pitch-alignment"),c.layout.get("text-keep-upright"),b,w),p.map.showCollisionBoxes&&(vl(l,p,c,d,c.paint.get("text-translate"),c.paint.get("text-translate-anchor"),!0),vl(l,p,c,d,c.paint.get("icon-translate"),c.paint.get("icon-translate-anchor"),!1))}},circle:function(l,p,c,d){if(l.renderPass==="translucent"){var g=c.paint.get("circle-opacity"),b=c.paint.get("circle-stroke-width"),w=c.paint.get("circle-stroke-opacity"),C=c.layout.get("circle-sort-key").constantOr(1)!==void 0;if(g.constantOr(1)!==0||b.constantOr(1)!==0&&w.constantOr(1)!==0){for(var M=l.context,B=M.gl,K=l.depthModeForSublayer(0,X.ReadOnly),Z=re.disabled,Y=l.colorModeForRenderPass(),ce=[],ue=0;ue<d.length;ue++){var xe=d[ue],oe=p.getTile(xe),ve=oe.getBucket(c);if(ve){var Se=ve.programConfigurations.get(c.id),Pe={programConfiguration:Se,program:l.useProgram("circle",Se),layoutVertexBuffer:ve.layoutVertexBuffer,indexBuffer:ve.indexBuffer,uniformValues:xh(l,xe,oe,c)};if(C)for(var Fe=0,De=ve.segments.get();Fe<De.length;Fe+=1){var je=De[Fe];ce.push({segments:new o.SegmentVector([je]),sortKey:je.sortKey,state:Pe})}else ce.push({segments:ve.segments,sortKey:0,state:Pe})}}C&&ce.sort(function(Et,It){return Et.sortKey-It.sortKey});for(var Ke=0,tt=ce;Ke<tt.length;Ke+=1){var Qe=tt[Ke],ft=Qe.state;ft.program.draw(M,B.TRIANGLES,K,Z,Y,ye.disabled,ft.uniformValues,c.id,ft.layoutVertexBuffer,ft.indexBuffer,Qe.segments,c.paint,l.transform.zoom,ft.programConfiguration)}}}},heatmap:function(l,p,c,d){if(c.paint.get("heatmap-opacity")!==0)if(l.renderPass==="offscreen"){var g=l.context,b=g.gl,w=re.disabled,C=new me([b.ONE,b.ONE],o.Color.transparent,[!0,!0,!0,!0]);(function(ce,ue,xe){var oe=ce.gl;ce.activeTexture.set(oe.TEXTURE1),ce.viewport.set([0,0,ue.width/4,ue.height/4]);var ve=xe.heatmapFbo;if(ve)oe.bindTexture(oe.TEXTURE_2D,ve.colorAttachment.get()),ce.bindFramebuffer.set(ve.framebuffer);else{var Se=oe.createTexture();oe.bindTexture(oe.TEXTURE_2D,Se),oe.texParameteri(oe.TEXTURE_2D,oe.TEXTURE_WRAP_S,oe.CLAMP_TO_EDGE),oe.texParameteri(oe.TEXTURE_2D,oe.TEXTURE_WRAP_T,oe.CLAMP_TO_EDGE),oe.texParameteri(oe.TEXTURE_2D,oe.TEXTURE_MIN_FILTER,oe.LINEAR),oe.texParameteri(oe.TEXTURE_2D,oe.TEXTURE_MAG_FILTER,oe.LINEAR),ve=xe.heatmapFbo=ce.createFramebuffer(ue.width/4,ue.height/4,!1),function(Pe,Fe,De,je){var Ke=Pe.gl;Ke.texImage2D(Ke.TEXTURE_2D,0,Ke.RGBA,Fe.width/4,Fe.height/4,0,Ke.RGBA,Pe.extRenderToTextureHalfFloat?Pe.extTextureHalfFloat.HALF_FLOAT_OES:Ke.UNSIGNED_BYTE,null),je.colorAttachment.set(De)}(ce,ue,Se,ve)}})(g,l,c),g.clear({color:o.Color.transparent});for(var M=0;M<d.length;M++){var B=d[M];if(!p.hasRenderableParent(B)){var K=p.getTile(B),Z=K.getBucket(c);if(Z){var Y=Z.programConfigurations.get(c.id);l.useProgram("heatmap",Y).draw(g,b.TRIANGLES,X.disabled,w,C,ye.disabled,Xf(B.posMatrix,K,l.transform.zoom,c.paint.get("heatmap-intensity")),c.id,Z.layoutVertexBuffer,Z.indexBuffer,Z.segments,c.paint,l.transform.zoom,Y)}}}g.viewport.set([0,0,l.width,l.height])}else l.renderPass==="translucent"&&(l.context.setColorMode(l.colorModeForRenderPass()),function(ce,ue){var xe=ce.context,oe=xe.gl,ve=ue.heatmapFbo;if(ve){xe.activeTexture.set(oe.TEXTURE0),oe.bindTexture(oe.TEXTURE_2D,ve.colorAttachment.get()),xe.activeTexture.set(oe.TEXTURE1);var Se=ue.colorRampTexture;Se||(Se=ue.colorRampTexture=new o.Texture(xe,ue.colorRamp,oe.RGBA)),Se.bind(oe.LINEAR,oe.CLAMP_TO_EDGE),ce.useProgram("heatmapTexture").draw(xe,oe.TRIANGLES,X.disabled,re.disabled,ce.colorModeForRenderPass(),ye.disabled,function(Pe,Fe,De,je){var Ke=o.create();o.ortho(Ke,0,Pe.width,Pe.height,0,0,1);var tt=Pe.context.gl;return{u_matrix:Ke,u_world:[tt.drawingBufferWidth,tt.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Fe.paint.get("heatmap-opacity")}}(ce,ue),ue.id,ce.viewportBuffer,ce.quadTriangleIndexBuffer,ce.viewportSegments,ue.paint,ce.transform.zoom)}}(l,c))},line:function(l,p,c,d){if(l.renderPass==="translucent"){var g=c.paint.get("line-opacity"),b=c.paint.get("line-width");if(g.constantOr(1)!==0&&b.constantOr(1)!==0)for(var w=l.depthModeForSublayer(0,X.ReadOnly),C=l.colorModeForRenderPass(),M=c.paint.get("line-dasharray"),B=c.paint.get("line-pattern"),K=B.constantOr(1),Z=c.paint.get("line-gradient"),Y=c.getCrossfadeParameters(),ce=K?"linePattern":M?"lineSDF":Z?"lineGradient":"line",ue=l.context,xe=ue.gl,oe=!0,ve=0,Se=d;ve<Se.length;ve+=1){var Pe=Se[ve],Fe=p.getTile(Pe);if(!K||Fe.patternsLoaded()){var De=Fe.getBucket(c);if(De){var je=De.programConfigurations.get(c.id),Ke=l.context.program.get(),tt=l.useProgram(ce,je),Qe=oe||tt.program!==Ke,ft=B.constantOr(null);if(ft&&Fe.imageAtlas){var Et=Fe.imageAtlas,It=Et.patternPositions[ft.to.toString()],Tt=Et.patternPositions[ft.from.toString()];It&&Tt&&je.setConstantPatternPositions(It,Tt)}var _r=K?dc(l,Fe,c,Y):M?o0(l,Fe,c,M,Y):Z?Yr(l,Fe,c,De.lineClipsArray.length):pu(l,Fe,c);if(K)ue.activeTexture.set(xe.TEXTURE0),Fe.imageAtlasTexture.bind(xe.LINEAR,xe.CLAMP_TO_EDGE),je.updatePaintBuffers(Y);else if(M&&(Qe||l.lineAtlas.dirty))ue.activeTexture.set(xe.TEXTURE0),l.lineAtlas.bind(ue);else if(Z){var mt=De.gradients[c.id],qt=mt.texture;if(c.gradientVersion!==mt.version){var rr=256;if(c.stepInterpolant){var Vt=p.getSource().maxzoom,Ut=Pe.canonical.z===Vt?Math.ceil(1<<l.transform.maxZoom-Pe.canonical.z):1;rr=o.clamp(o.nextPowerOfTwo(De.maxLineLength/o.EXTENT*1024*Ut),256,ue.maxTextureSize)}mt.gradient=o.renderColorRamp({expression:c.gradientExpression(),evaluationKey:"lineProgress",resolution:rr,image:mt.gradient||void 0,clips:De.lineClipsArray}),mt.texture?mt.texture.update(mt.gradient):mt.texture=new o.Texture(ue,mt.gradient,xe.RGBA),mt.version=c.gradientVersion,qt=mt.texture}ue.activeTexture.set(xe.TEXTURE0),qt.bind(c.stepInterpolant?xe.NEAREST:xe.LINEAR,xe.CLAMP_TO_EDGE)}tt.draw(ue,xe.TRIANGLES,w,l.stencilModeForClipping(Pe),C,ye.disabled,_r,c.id,De.layoutVertexBuffer,De.indexBuffer,De.segments,c.paint,l.transform.zoom,je,De.layoutVertexBuffer2),oe=!1}}}}},fill:function(l,p,c,d){var g=c.paint.get("fill-color"),b=c.paint.get("fill-opacity");if(b.constantOr(1)!==0){var w=l.colorModeForRenderPass(),C=c.paint.get("fill-pattern"),M=l.opaquePassEnabledForLayer()&&!C.constantOr(1)&&g.constantOr(o.Color.transparent).a===1&&b.constantOr(0)===1?"opaque":"translucent";if(l.renderPass===M){var B=l.depthModeForSublayer(1,l.renderPass==="opaque"?X.ReadWrite:X.ReadOnly);yc(l,p,c,d,B,w,!1)}if(l.renderPass==="translucent"&&c.paint.get("fill-antialias")){var K=l.depthModeForSublayer(c.getPaintProperty("fill-outline-color")?2:0,X.ReadOnly);yc(l,p,c,d,K,w,!0)}}},"fill-extrusion":function(l,p,c,d){var g=c.paint.get("fill-extrusion-opacity");if(g!==0&&l.renderPass==="translucent"){var b=new X(l.context.gl.LEQUAL,X.ReadWrite,l.depthRangeFor3D);if(g!==1||c.paint.get("fill-extrusion-pattern").constantOr(1))bh(l,p,c,d,b,re.disabled,me.disabled),bh(l,p,c,d,b,l.stencilModeFor3D(),l.colorModeForRenderPass());else{var w=l.colorModeForRenderPass();bh(l,p,c,d,b,re.disabled,w)}}},hillshade:function(l,p,c,d){if(l.renderPass==="offscreen"||l.renderPass==="translucent"){for(var g=l.context,b=l.depthModeForSublayer(0,X.ReadOnly),w=l.colorModeForRenderPass(),C=l.renderPass==="translucent"?l.stencilConfigForOverlap(d):[{},d],M=C[0],B=0,K=C[1];B<K.length;B+=1){var Z=K[B],Y=p.getTile(Z);Y.needsHillshadePrepare&&l.renderPass==="offscreen"?s0(l,Y,c,b,re.disabled,w):l.renderPass==="translucent"&&gc(l,Y,c,b,M[Z.overscaledZ],w)}g.viewport.set([0,0,l.width,l.height])}},raster:function(l,p,c,d){if(l.renderPass==="translucent"&&c.paint.get("raster-opacity")!==0&&d.length)for(var g=l.context,b=g.gl,w=p.getSource(),C=l.useProgram("raster"),M=l.colorModeForRenderPass(),B=w instanceof et?[{},d]:l.stencilConfigForOverlap(d),K=B[0],Z=B[1],Y=Z[Z.length-1].overscaledZ,ce=!l.options.moving,ue=0,xe=Z;ue<xe.length;ue+=1){var oe=xe[ue],ve=l.depthModeForSublayer(oe.overscaledZ-Y,c.paint.get("raster-opacity")===1?X.ReadWrite:X.ReadOnly,b.LESS),Se=p.getTile(oe),Pe=l.transform.calculatePosMatrix(oe.toUnwrapped(),ce);Se.registerFadeDuration(c.paint.get("raster-fade-duration"));var Fe=p.findLoadedParent(oe,0),De=vc(Se,Fe,p,c,l.transform),je=void 0,Ke=void 0,tt=c.paint.get("raster-resampling")==="nearest"?b.NEAREST:b.LINEAR;g.activeTexture.set(b.TEXTURE0),Se.texture.bind(tt,b.CLAMP_TO_EDGE,b.LINEAR_MIPMAP_NEAREST),g.activeTexture.set(b.TEXTURE1),Fe?(Fe.texture.bind(tt,b.CLAMP_TO_EDGE,b.LINEAR_MIPMAP_NEAREST),je=Math.pow(2,Fe.tileID.overscaledZ-Se.tileID.overscaledZ),Ke=[Se.tileID.canonical.x*je%1,Se.tileID.canonical.y*je%1]):Se.texture.bind(tt,b.CLAMP_TO_EDGE,b.LINEAR_MIPMAP_NEAREST);var Qe=a0(Pe,Ke||[0,0],je||1,De,c);w instanceof et?C.draw(g,b.TRIANGLES,ve,re.disabled,M,ye.disabled,Qe,c.id,w.boundsBuffer,l.quadTriangleIndexBuffer,w.boundsSegments):C.draw(g,b.TRIANGLES,ve,K[oe.overscaledZ],M,ye.disabled,Qe,c.id,l.rasterBoundsBuffer,l.quadTriangleIndexBuffer,l.rasterBoundsSegments)}},background:function(l,p,c){var d=c.paint.get("background-color"),g=c.paint.get("background-opacity");if(g!==0){var b=l.context,w=b.gl,C=l.transform,M=C.tileSize,B=c.paint.get("background-pattern");if(!l.isPatternMissing(B)){var K=!B&&d.a===1&&g===1&&l.opaquePassEnabledForLayer()?"opaque":"translucent";if(l.renderPass===K){var Z=re.disabled,Y=l.depthModeForSublayer(0,K==="opaque"?X.ReadWrite:X.ReadOnly),ce=l.colorModeForRenderPass(),ue=l.useProgram(B?"backgroundPattern":"background"),xe=C.coveringTiles({tileSize:M});B&&(b.activeTexture.set(w.TEXTURE0),l.imageManager.bind(l.context));for(var oe=c.getCrossfadeParameters(),ve=0,Se=xe;ve<Se.length;ve+=1){var Pe=Se[ve],Fe=l.transform.calculatePosMatrix(Pe.toUnwrapped()),De=B?gl(Fe,g,l,B,{tileID:Pe,tileSize:M},oe):du(Fe,g,d);ue.draw(b,w.TRIANGLES,Y,Z,ce,ye.disabled,De,c.id,l.tileExtentBuffer,l.quadTriangleIndexBuffer,l.tileExtentSegments)}}}}},debug:function(l,p,c){for(var d=0;d<c.length;d++)om(l,p,c[d])},custom:function(l,p,c){var d=l.context,g=c.implementation;if(l.renderPass==="offscreen"){var b=g.prerender;b&&(l.setCustomLayerDefaults(),d.setColorMode(l.colorModeForRenderPass()),b.call(g,d.gl,l.transform.customLayerMatrix()),d.setDirty(),l.setBaseState())}else if(l.renderPass==="translucent"){l.setCustomLayerDefaults(),d.setColorMode(l.colorModeForRenderPass()),d.setStencilMode(re.disabled);var w=g.renderingMode==="3d"?new X(l.context.gl.LEQUAL,X.ReadWrite,l.depthRangeFor3D):l.depthModeForSublayer(0,X.ReadOnly);d.setDepthMode(w),g.render(d.gl,l.transform.customLayerMatrix()),d.setDirty(),l.setBaseState(),d.bindFramebuffer.set(null)}}},sn=function(l,p){this.context=new H(l),this.transform=p,this._tileTextures={},this.setup(),this.numSublayers=ne.maxUnderzooming+ne.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new $a,this.gpuTimers={}};sn.prototype.resize=function(l,p){if(this.width=l*o.browser.devicePixelRatio,this.height=p*o.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var c=0,d=this.style._order;c<d.length;c+=1)this.style._layers[d[c]].resize()},sn.prototype.setup=function(){var l=this.context,p=new o.StructArrayLayout2i4;p.emplaceBack(0,0),p.emplaceBack(o.EXTENT,0),p.emplaceBack(0,o.EXTENT),p.emplaceBack(o.EXTENT,o.EXTENT),this.tileExtentBuffer=l.createVertexBuffer(p,zn.members),this.tileExtentSegments=o.SegmentVector.simpleSegment(0,0,4,2);var c=new o.StructArrayLayout2i4;c.emplaceBack(0,0),c.emplaceBack(o.EXTENT,0),c.emplaceBack(0,o.EXTENT),c.emplaceBack(o.EXTENT,o.EXTENT),this.debugBuffer=l.createVertexBuffer(c,zn.members),this.debugSegments=o.SegmentVector.simpleSegment(0,0,4,5);var d=new o.StructArrayLayout4i8;d.emplaceBack(0,0,0,0),d.emplaceBack(o.EXTENT,0,o.EXTENT,0),d.emplaceBack(0,o.EXTENT,0,o.EXTENT),d.emplaceBack(o.EXTENT,o.EXTENT,o.EXTENT,o.EXTENT),this.rasterBoundsBuffer=l.createVertexBuffer(d,$e.members),this.rasterBoundsSegments=o.SegmentVector.simpleSegment(0,0,4,2);var g=new o.StructArrayLayout2i4;g.emplaceBack(0,0),g.emplaceBack(1,0),g.emplaceBack(0,1),g.emplaceBack(1,1),this.viewportBuffer=l.createVertexBuffer(g,zn.members),this.viewportSegments=o.SegmentVector.simpleSegment(0,0,4,2);var b=new o.StructArrayLayout1ui2;b.emplaceBack(0),b.emplaceBack(1),b.emplaceBack(3),b.emplaceBack(2),b.emplaceBack(0),this.tileBorderIndexBuffer=l.createIndexBuffer(b);var w=new o.StructArrayLayout3ui6;w.emplaceBack(0,1,2),w.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=l.createIndexBuffer(w),this.emptyTexture=new o.Texture(l,{width:1,height:1,data:new Uint8Array([0,0,0,0])},l.gl.RGBA);var C=this.context.gl;this.stencilClearMode=new re({func:C.ALWAYS,mask:0},0,255,C.ZERO,C.ZERO,C.ZERO)},sn.prototype.clearStencil=function(){var l=this.context,p=l.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var c=o.create();o.ortho(c,0,this.width,this.height,0,0,1),o.scale(c,c,[p.drawingBufferWidth,p.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(l,p.TRIANGLES,X.disabled,this.stencilClearMode,me.disabled,ye.disabled,Ls(c),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},sn.prototype._renderTileClippingMasks=function(l,p){if(this.currentStencilSource!==l.source&&l.isTileClipped()&&p&&p.length){this.currentStencilSource=l.source;var c=this.context,d=c.gl;this.nextStencilID+p.length>256&&this.clearStencil(),c.setColorMode(me.disabled),c.setDepthMode(X.disabled);var g=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var b=0,w=p;b<w.length;b+=1){var C=w[b],M=this._tileClippingMaskIDs[C.key]=this.nextStencilID++;g.draw(c,d.TRIANGLES,X.disabled,new re({func:d.ALWAYS,mask:0},M,255,d.KEEP,d.KEEP,d.REPLACE),me.disabled,ye.disabled,Ls(C.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},sn.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var l=this.nextStencilID++,p=this.context.gl;return new re({func:p.NOTEQUAL,mask:255},l,255,p.KEEP,p.KEEP,p.REPLACE)},sn.prototype.stencilModeForClipping=function(l){var p=this.context.gl;return new re({func:p.EQUAL,mask:255},this._tileClippingMaskIDs[l.key],0,p.KEEP,p.KEEP,p.REPLACE)},sn.prototype.stencilConfigForOverlap=function(l){var p,c=this.context.gl,d=l.sort(function(M,B){return B.overscaledZ-M.overscaledZ}),g=d[d.length-1].overscaledZ,b=d[0].overscaledZ-g+1;if(b>1){this.currentStencilSource=void 0,this.nextStencilID+b>256&&this.clearStencil();for(var w={},C=0;C<b;C++)w[C+g]=new re({func:c.GEQUAL,mask:255},C+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=b,[w,d]}return[(p={},p[g]=re.disabled,p),d]},sn.prototype.colorModeForRenderPass=function(){var l=this.context.gl;return this._showOverdrawInspector?new me([l.CONSTANT_COLOR,l.ONE],new o.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?me.unblended:me.alphaBlended},sn.prototype.depthModeForSublayer=function(l,p,c){if(!this.opaquePassEnabledForLayer())return X.disabled;var d=1-((1+this.currentLayer)*this.numSublayers+l)*this.depthEpsilon;return new X(c||this.context.gl.LEQUAL,p,[d,d])},sn.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},sn.prototype.render=function(l,p){var c=this;this.style=l,this.options=p,this.lineAtlas=l.lineAtlas,this.imageManager=l.imageManager,this.glyphManager=l.glyphManager,this.symbolFadeChange=l.placement.symbolFadeChange(o.browser.now()),this.imageManager.beginFrame();var d=this.style._order,g=this.style.sourceCaches;for(var b in g){var w=g[b];w.used&&w.prepare(this.context)}var C,M,B={},K={},Z={};for(var Y in g){var ce=g[Y];B[Y]=ce.getVisibleCoordinates(),K[Y]=B[Y].slice().reverse(),Z[Y]=ce.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var ue=0;ue<d.length;ue++)if(this.style._layers[d[ue]].is3D()){this.opaquePassCutoff=ue;break}this.renderPass="offscreen";for(var xe=0,oe=d;xe<oe.length;xe+=1){var ve=this.style._layers[oe[xe]];if(ve.hasOffscreenPass()&&!ve.isHidden(this.transform.zoom)){var Se=K[ve.source];(ve.type==="custom"||Se.length)&&this.renderLayer(this,g[ve.source],ve,Se)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:p.showOverdrawInspector?o.Color.black:o.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=p.showOverdrawInspector,this.depthRangeFor3D=[0,1-(l._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=d.length-1;this.currentLayer>=0;this.currentLayer--){var Pe=this.style._layers[d[this.currentLayer]],Fe=g[Pe.source],De=B[Pe.source];this._renderTileClippingMasks(Pe,De),this.renderLayer(this,Fe,Pe,De)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<d.length;this.currentLayer++){var je=this.style._layers[d[this.currentLayer]],Ke=g[je.source],tt=(je.type==="symbol"?Z:K)[je.source];this._renderTileClippingMasks(je,B[je.source]),this.renderLayer(this,Ke,je,tt)}this.options.showTileBoundaries&&(o.values(this.style._layers).forEach(function(Qe){Qe.source&&!Qe.isHidden(c.transform.zoom)&&(Qe.source!==(M&&M.id)&&(M=c.style.sourceCaches[Qe.source]),(!C||C.getSource().maxzoom<M.getSource().maxzoom)&&(C=M))}),C&&Os.debug(this,C,C.getVisibleCoordinates())),this.options.showPadding&&function(Qe){var ft=Qe.transform.padding;Eh(Qe,Qe.transform.height-(ft.top||0),3,wh),Eh(Qe,ft.bottom||0,3,nm),Ch(Qe,ft.left||0,3,im),Ch(Qe,Qe.transform.width-(ft.right||0),3,_c);var Et=Qe.transform.centerPoint;(function(It,Tt,_r,mt){mu(It,Tt-1,_r-10,2,20,mt),mu(It,Tt-10,_r-1,20,2,mt)})(Qe,Et.x,Qe.transform.height-Et.y,Sh)}(this),this.context.setDefault()},sn.prototype.renderLayer=function(l,p,c,d){c.isHidden(this.transform.zoom)||(c.type==="background"||c.type==="custom"||d.length)&&(this.id=c.id,this.gpuTimingStart(c),Os[c.type](l,p,c,d,this.style.placement.variableOffsets),this.gpuTimingEnd())},sn.prototype.gpuTimingStart=function(l){if(this.options.gpuTiming){var p=this.context.extTimerQuery,c=this.gpuTimers[l.id];c||(c=this.gpuTimers[l.id]={calls:0,cpuTime:0,query:p.createQueryEXT()}),c.calls++,p.beginQueryEXT(p.TIME_ELAPSED_EXT,c.query)}},sn.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var l=this.context.extTimerQuery;l.endQueryEXT(l.TIME_ELAPSED_EXT)}},sn.prototype.collectGpuTimers=function(){var l=this.gpuTimers;return this.gpuTimers={},l},sn.prototype.queryGpuTimers=function(l){var p={};for(var c in l){var d=l[c],g=this.context.extTimerQuery,b=g.getQueryObjectEXT(d.query,g.QUERY_RESULT_EXT)/1e6;g.deleteQueryEXT(d.query),p[c]=b}return p},sn.prototype.translatePosMatrix=function(l,p,c,d,g){if(!c[0]&&!c[1])return l;var b=g?d==="map"?this.transform.angle:0:d==="viewport"?-this.transform.angle:0;if(b){var w=Math.sin(b),C=Math.cos(b);c=[c[0]*C-c[1]*w,c[0]*w+c[1]*C]}var M=[g?c[0]:an(p,c[0],this.transform.zoom),g?c[1]:an(p,c[1],this.transform.zoom),0],B=new Float32Array(16);return o.translate(B,l,M),B},sn.prototype.saveTileTexture=function(l){var p=this._tileTextures[l.size[0]];p?p.push(l):this._tileTextures[l.size[0]]=[l]},sn.prototype.getTileTexture=function(l){var p=this._tileTextures[l];return p&&p.length>0?p.pop():null},sn.prototype.isPatternMissing=function(l){if(!l)return!1;if(!l.from||!l.to)return!0;var p=this.imageManager.getPattern(l.from.toString()),c=this.imageManager.getPattern(l.to.toString());return!p||!c},sn.prototype.useProgram=function(l,p){this.cache=this.cache||{};var c=""+l+(p?p.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[c]||(this.cache[c]=new qf(this.context,l,i0[l],p,Qf[l],this._showOverdrawInspector)),this.cache[c]},sn.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},sn.prototype.setBaseState=function(){var l=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(l.FUNC_ADD)},sn.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=o.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new o.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},sn.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var xc=function(l,p){this.points=l,this.planes=p};xc.fromInvProjectionMatrix=function(l,p,c){var d=Math.pow(2,c),g=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(w){return o.transformMat4([],w,l)}).map(function(w){return o.scale$1([],w,1/w[3]/p*d)}),b=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(w){var C=o.sub([],g[w[0]],g[w[1]]),M=o.sub([],g[w[2]],g[w[1]]),B=o.normalize([],o.cross([],C,M)),K=-o.dot(B,g[w[1]]);return B.concat(K)});return new xc(g,b)};var Bs=function(l,p){this.min=l,this.max=p,this.center=o.scale$2([],o.add([],this.min,this.max),.5)};Bs.prototype.quadrant=function(l){for(var p=[l%2==0,l<2],c=o.clone$2(this.min),d=o.clone$2(this.max),g=0;g<p.length;g++)c[g]=p[g]?this.min[g]:this.center[g],d[g]=p[g]?this.center[g]:this.max[g];return d[2]=this.max[2],new Bs(c,d)},Bs.prototype.distanceX=function(l){return Math.max(Math.min(this.max[0],l[0]),this.min[0])-l[0]},Bs.prototype.distanceY=function(l){return Math.max(Math.min(this.max[1],l[1]),this.min[1])-l[1]},Bs.prototype.intersects=function(l){for(var p=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],c=!0,d=0;d<l.planes.length;d++){for(var g=l.planes[d],b=0,w=0;w<p.length;w++)b+=o.dot$1(g,p[w])>=0;if(b===0)return 0;b!==p.length&&(c=!1)}if(c)return 2;for(var C=0;C<3;C++){for(var M=Number.MAX_VALUE,B=-Number.MAX_VALUE,K=0;K<l.points.length;K++){var Z=l.points[K][C]-this.min[C];M=Math.min(M,Z),B=Math.max(B,Z)}if(B<0||M>this.max[C]-this.min[C])return 0}return 1};var Xa=function(l,p,c,d){if(l===void 0&&(l=0),p===void 0&&(p=0),c===void 0&&(c=0),d===void 0&&(d=0),isNaN(l)||l<0||isNaN(p)||p<0||isNaN(c)||c<0||isNaN(d)||d<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=l,this.bottom=p,this.left=c,this.right=d};Xa.prototype.interpolate=function(l,p,c){return p.top!=null&&l.top!=null&&(this.top=o.number(l.top,p.top,c)),p.bottom!=null&&l.bottom!=null&&(this.bottom=o.number(l.bottom,p.bottom,c)),p.left!=null&&l.left!=null&&(this.left=o.number(l.left,p.left,c)),p.right!=null&&l.right!=null&&(this.right=o.number(l.right,p.right,c)),this},Xa.prototype.getCenter=function(l,p){var c=o.clamp((this.left+l-this.right)/2,0,l),d=o.clamp((this.top+p-this.bottom)/2,0,p);return new o.Point(c,d)},Xa.prototype.equals=function(l){return this.top===l.top&&this.bottom===l.bottom&&this.left===l.left&&this.right===l.right},Xa.prototype.clone=function(){return new Xa(this.top,this.bottom,this.left,this.right)},Xa.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var mr=function(l,p,c,d,g){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=g===void 0||g,this._minZoom=l||0,this._maxZoom=p||22,this._minPitch=c??0,this._maxPitch=d??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new o.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Xa,this._posMatrixCache={},this._alignedPosMatrixCache={}},Jr={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};mr.prototype.clone=function(){var l=new mr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return l.tileSize=this.tileSize,l.latRange=this.latRange,l.width=this.width,l.height=this.height,l._center=this._center,l.zoom=this.zoom,l.angle=this.angle,l._fov=this._fov,l._pitch=this._pitch,l._unmodified=this._unmodified,l._edgeInsets=this._edgeInsets.clone(),l._calcMatrices(),l},Jr.minZoom.get=function(){return this._minZoom},Jr.minZoom.set=function(l){this._minZoom!==l&&(this._minZoom=l,this.zoom=Math.max(this.zoom,l))},Jr.maxZoom.get=function(){return this._maxZoom},Jr.maxZoom.set=function(l){this._maxZoom!==l&&(this._maxZoom=l,this.zoom=Math.min(this.zoom,l))},Jr.minPitch.get=function(){return this._minPitch},Jr.minPitch.set=function(l){this._minPitch!==l&&(this._minPitch=l,this.pitch=Math.max(this.pitch,l))},Jr.maxPitch.get=function(){return this._maxPitch},Jr.maxPitch.set=function(l){this._maxPitch!==l&&(this._maxPitch=l,this.pitch=Math.min(this.pitch,l))},Jr.renderWorldCopies.get=function(){return this._renderWorldCopies},Jr.renderWorldCopies.set=function(l){l===void 0?l=!0:l===null&&(l=!1),this._renderWorldCopies=l},Jr.worldSize.get=function(){return this.tileSize*this.scale},Jr.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Jr.size.get=function(){return new o.Point(this.width,this.height)},Jr.bearing.get=function(){return-this.angle/Math.PI*180},Jr.bearing.set=function(l){var p=-o.wrap(l,-180,180)*Math.PI/180;this.angle!==p&&(this._unmodified=!1,this.angle=p,this._calcMatrices(),this.rotationMatrix=o.create$2(),o.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Jr.pitch.get=function(){return this._pitch/Math.PI*180},Jr.pitch.set=function(l){var p=o.clamp(l,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==p&&(this._unmodified=!1,this._pitch=p,this._calcMatrices())},Jr.fov.get=function(){return this._fov/Math.PI*180},Jr.fov.set=function(l){l=Math.max(.01,Math.min(60,l)),this._fov!==l&&(this._unmodified=!1,this._fov=l/180*Math.PI,this._calcMatrices())},Jr.zoom.get=function(){return this._zoom},Jr.zoom.set=function(l){var p=Math.min(Math.max(l,this.minZoom),this.maxZoom);this._zoom!==p&&(this._unmodified=!1,this._zoom=p,this.scale=this.zoomScale(p),this.tileZoom=Math.floor(p),this.zoomFraction=p-this.tileZoom,this._constrain(),this._calcMatrices())},Jr.center.get=function(){return this._center},Jr.center.set=function(l){l.lat===this._center.lat&&l.lng===this._center.lng||(this._unmodified=!1,this._center=l,this._constrain(),this._calcMatrices())},Jr.padding.get=function(){return this._edgeInsets.toJSON()},Jr.padding.set=function(l){this._edgeInsets.equals(l)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,l,1),this._calcMatrices())},Jr.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},mr.prototype.isPaddingEqual=function(l){return this._edgeInsets.equals(l)},mr.prototype.interpolatePadding=function(l,p,c){this._unmodified=!1,this._edgeInsets.interpolate(l,p,c),this._constrain(),this._calcMatrices()},mr.prototype.coveringZoomLevel=function(l){var p=(l.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/l.tileSize));return Math.max(0,p)},mr.prototype.getVisibleUnwrappedCoordinates=function(l){var p=[new o.UnwrappedTileID(0,l)];if(this._renderWorldCopies)for(var c=this.pointCoordinate(new o.Point(0,0)),d=this.pointCoordinate(new o.Point(this.width,0)),g=this.pointCoordinate(new o.Point(this.width,this.height)),b=this.pointCoordinate(new o.Point(0,this.height)),w=Math.floor(Math.min(c.x,d.x,g.x,b.x)),C=Math.floor(Math.max(c.x,d.x,g.x,b.x)),M=w-1;M<=C+1;M++)M!==0&&p.push(new o.UnwrappedTileID(M,l));return p},mr.prototype.coveringTiles=function(l){var p=this.coveringZoomLevel(l),c=p;if(l.minzoom!==void 0&&p<l.minzoom)return[];l.maxzoom!==void 0&&p>l.maxzoom&&(p=l.maxzoom);var d=o.MercatorCoordinate.fromLngLat(this.center),g=Math.pow(2,p),b=[g*d.x,g*d.y,0],w=xc.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,p),C=l.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(C=p);var M=function(Qe){return{aabb:new Bs([Qe*g,0,0],[(Qe+1)*g,g,0]),zoom:0,x:0,y:0,wrap:Qe,fullyVisible:!1}},B=[],K=[],Z=p,Y=l.reparseOverscaled?c:p;if(this._renderWorldCopies)for(var ce=1;ce<=3;ce++)B.push(M(-ce)),B.push(M(ce));for(B.push(M(0));B.length>0;){var ue=B.pop(),xe=ue.x,oe=ue.y,ve=ue.fullyVisible;if(!ve){var Se=ue.aabb.intersects(w);if(Se===0)continue;ve=Se===2}var Pe=ue.aabb.distanceX(b),Fe=ue.aabb.distanceY(b),De=Math.max(Math.abs(Pe),Math.abs(Fe));if(ue.zoom===Z||De>3+(1<<Z-ue.zoom)-2&&ue.zoom>=C)K.push({tileID:new o.OverscaledTileID(ue.zoom===Z?Y:ue.zoom,ue.wrap,ue.zoom,xe,oe),distanceSq:o.sqrLen([b[0]-.5-xe,b[1]-.5-oe])});else for(var je=0;je<4;je++){var Ke=(xe<<1)+je%2,tt=(oe<<1)+(je>>1);B.push({aabb:ue.aabb.quadrant(je),zoom:ue.zoom+1,x:Ke,y:tt,wrap:ue.wrap,fullyVisible:ve})}}return K.sort(function(Qe,ft){return Qe.distanceSq-ft.distanceSq}).map(function(Qe){return Qe.tileID})},mr.prototype.resize=function(l,p){this.width=l,this.height=p,this.pixelsToGLUnits=[2/l,-2/p],this._constrain(),this._calcMatrices()},Jr.unmodified.get=function(){return this._unmodified},mr.prototype.zoomScale=function(l){return Math.pow(2,l)},mr.prototype.scaleZoom=function(l){return Math.log(l)/Math.LN2},mr.prototype.project=function(l){var p=o.clamp(l.lat,-this.maxValidLatitude,this.maxValidLatitude);return new o.Point(o.mercatorXfromLng(l.lng)*this.worldSize,o.mercatorYfromLat(p)*this.worldSize)},mr.prototype.unproject=function(l){return new o.MercatorCoordinate(l.x/this.worldSize,l.y/this.worldSize).toLngLat()},Jr.point.get=function(){return this.project(this.center)},mr.prototype.setLocationAtPoint=function(l,p){var c=this.pointCoordinate(p),d=this.pointCoordinate(this.centerPoint),g=this.locationCoordinate(l),b=new o.MercatorCoordinate(g.x-(c.x-d.x),g.y-(c.y-d.y));this.center=this.coordinateLocation(b),this._renderWorldCopies&&(this.center=this.center.wrap())},mr.prototype.locationPoint=function(l){return this.coordinatePoint(this.locationCoordinate(l))},mr.prototype.pointLocation=function(l){return this.coordinateLocation(this.pointCoordinate(l))},mr.prototype.locationCoordinate=function(l){return o.MercatorCoordinate.fromLngLat(l)},mr.prototype.coordinateLocation=function(l){return l.toLngLat()},mr.prototype.pointCoordinate=function(l){var p=[l.x,l.y,0,1],c=[l.x,l.y,1,1];o.transformMat4(p,p,this.pixelMatrixInverse),o.transformMat4(c,c,this.pixelMatrixInverse);var d=p[3],g=c[3],b=p[1]/d,w=c[1]/g,C=p[2]/d,M=c[2]/g,B=C===M?0:(0-C)/(M-C);return new o.MercatorCoordinate(o.number(p[0]/d,c[0]/g,B)/this.worldSize,o.number(b,w,B)/this.worldSize)},mr.prototype.coordinatePoint=function(l){var p=[l.x*this.worldSize,l.y*this.worldSize,0,1];return o.transformMat4(p,p,this.pixelMatrix),new o.Point(p[0]/p[3],p[1]/p[3])},mr.prototype.getBounds=function(){return new o.LngLatBounds().extend(this.pointLocation(new o.Point(0,0))).extend(this.pointLocation(new o.Point(this.width,0))).extend(this.pointLocation(new o.Point(this.width,this.height))).extend(this.pointLocation(new o.Point(0,this.height)))},mr.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new o.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},mr.prototype.setMaxBounds=function(l){l?(this.lngRange=[l.getWest(),l.getEast()],this.latRange=[l.getSouth(),l.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},mr.prototype.calculatePosMatrix=function(l,p){p===void 0&&(p=!1);var c=l.key,d=p?this._alignedPosMatrixCache:this._posMatrixCache;if(d[c])return d[c];var g=l.canonical,b=this.worldSize/this.zoomScale(g.z),w=g.x+Math.pow(2,g.z)*l.wrap,C=o.identity(new Float64Array(16));return o.translate(C,C,[w*b,g.y*b,0]),o.scale(C,C,[b/o.EXTENT,b/o.EXTENT,1]),o.multiply(C,p?this.alignedProjMatrix:this.projMatrix,C),d[c]=new Float32Array(C),d[c]},mr.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},mr.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var l,p,c,d,g=-90,b=90,w=-180,C=180,M=this.size,B=this._unmodified;if(this.latRange){var K=this.latRange;g=o.mercatorYfromLat(K[1])*this.worldSize,l=(b=o.mercatorYfromLat(K[0])*this.worldSize)-g<M.y?M.y/(b-g):0}if(this.lngRange){var Z=this.lngRange;w=o.mercatorXfromLng(Z[0])*this.worldSize,p=(C=o.mercatorXfromLng(Z[1])*this.worldSize)-w<M.x?M.x/(C-w):0}var Y=this.point,ce=Math.max(p||0,l||0);if(ce)return this.center=this.unproject(new o.Point(p?(C+w)/2:Y.x,l?(b+g)/2:Y.y)),this.zoom+=this.scaleZoom(ce),this._unmodified=B,void(this._constraining=!1);if(this.latRange){var ue=Y.y,xe=M.y/2;ue-xe<g&&(d=g+xe),ue+xe>b&&(d=b-xe)}if(this.lngRange){var oe=Y.x,ve=M.x/2;oe-ve<w&&(c=w+ve),oe+ve>C&&(c=C-ve)}c===void 0&&d===void 0||(this.center=this.unproject(new o.Point(c!==void 0?c:Y.x,d!==void 0?d:Y.y))),this._unmodified=B,this._constraining=!1}},mr.prototype._calcMatrices=function(){if(this.height){var l=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var p=Math.PI/2+this._pitch,c=this._fov*(.5+l.y/this.height),d=Math.sin(c)*this.cameraToCenterDistance/Math.sin(o.clamp(Math.PI-p-c,.01,Math.PI-.01)),g=this.point,b=g.x,w=g.y,C=1.01*(Math.cos(Math.PI/2-this._pitch)*d+this.cameraToCenterDistance),M=this.height/50,B=new Float64Array(16);o.perspective(B,this._fov,this.width/this.height,M,C),B[8]=2*-l.x/this.width,B[9]=2*l.y/this.height,o.scale(B,B,[1,-1,1]),o.translate(B,B,[0,0,-this.cameraToCenterDistance]),o.rotateX(B,B,this._pitch),o.rotateZ(B,B,this.angle),o.translate(B,B,[-b,-w,0]),this.mercatorMatrix=o.scale([],B,[this.worldSize,this.worldSize,this.worldSize]),o.scale(B,B,[1,1,o.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=B,this.invProjMatrix=o.invert([],this.projMatrix);var K=this.width%2/2,Z=this.height%2/2,Y=Math.cos(this.angle),ce=Math.sin(this.angle),ue=b-Math.round(b)+Y*K+ce*Z,xe=w-Math.round(w)+Y*Z+ce*K,oe=new Float64Array(B);if(o.translate(oe,oe,[ue>.5?ue-1:ue,xe>.5?xe-1:xe,0]),this.alignedProjMatrix=oe,B=o.create(),o.scale(B,B,[this.width/2,-this.height/2,1]),o.translate(B,B,[1,-1,0]),this.labelPlaneMatrix=B,B=o.create(),o.scale(B,B,[1,-1,1]),o.translate(B,B,[-1,-1,0]),o.scale(B,B,[2/this.width,2/this.height,1]),this.glCoordMatrix=B,this.pixelMatrix=o.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(B=o.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=B,this._posMatrixCache={},this._alignedPosMatrixCache={}}},mr.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var l=this.pointCoordinate(new o.Point(0,0)),p=[l.x*this.worldSize,l.y*this.worldSize,0,1];return o.transformMat4(p,p,this.pixelMatrix)[3]/this.cameraToCenterDistance},mr.prototype.getCameraPoint=function(){var l=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.Point(0,l))},mr.prototype.getCameraQueryGeometry=function(l){var p=this.getCameraPoint();if(l.length===1)return[l[0],p];for(var c=p.x,d=p.y,g=p.x,b=p.y,w=0,C=l;w<C.length;w+=1){var M=C[w];c=Math.min(c,M.x),d=Math.min(d,M.y),g=Math.max(g,M.x),b=Math.max(b,M.y)}return[new o.Point(c,d),new o.Point(g,d),new o.Point(g,b),new o.Point(c,b),new o.Point(c,d)]},Object.defineProperties(mr.prototype,Jr);var so=function(l){var p,c,d,g;this._hashName=l&&encodeURIComponent(l),o.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(p=this._updateHashUnthrottled.bind(this),c=!1,d=null,g=function(){d=null,c&&(p(),d=setTimeout(g,300),c=!1)},function(){return c=!0,d||g(),d})};so.prototype.addTo=function(l){return this._map=l,o.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},so.prototype.remove=function(){return o.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},so.prototype.getHashString=function(l){var p=this._map.getCenter(),c=Math.round(100*this._map.getZoom())/100,d=Math.ceil((c*Math.LN2+Math.log(512/360/.5))/Math.LN10),g=Math.pow(10,d),b=Math.round(p.lng*g)/g,w=Math.round(p.lat*g)/g,C=this._map.getBearing(),M=this._map.getPitch(),B="";if(B+=l?"/"+b+"/"+w+"/"+c:c+"/"+w+"/"+b,(C||M)&&(B+="/"+Math.round(10*C)/10),M&&(B+="/"+Math.round(M)),this._hashName){var K=this._hashName,Z=!1,Y=o.window.location.hash.slice(1).split("&").map(function(ce){var ue=ce.split("=")[0];return ue===K?(Z=!0,ue+"="+B):ce}).filter(function(ce){return ce});return Z||Y.push(K+"="+B),"#"+Y.join("&")}return"#"+B},so.prototype._getCurrentHash=function(){var l,p=this,c=o.window.location.hash.replace("#","");return this._hashName?(c.split("&").map(function(d){return d.split("=")}).forEach(function(d){d[0]===p._hashName&&(l=d)}),(l&&l[1]||"").split("/")):c.split("/")},so.prototype._onHashChange=function(){var l=this._getCurrentHash();if(l.length>=3&&!l.some(function(c){return isNaN(c)})){var p=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(l[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+l[2],+l[1]],zoom:+l[0],bearing:p,pitch:+(l[4]||0)}),!0}return!1},so.prototype._updateHashUnthrottled=function(){var l=o.window.location.href.replace(/(#.+)?$/,this.getHashString());try{o.window.history.replaceState(o.window.history.state,null,l)}catch{}};var yu={linearity:.3,easing:o.bezier(0,0,.3,1)},_l=o.extend({deceleration:2500,maxSpeed:1400},yu),gu=o.extend({deceleration:20,maxSpeed:1400},yu),l0=o.extend({deceleration:1e3,maxSpeed:360},yu),u0=o.extend({deceleration:1e3,maxSpeed:90},yu),vu=function(l){this._map=l,this.clear()};function _u(l,p){(!l.duration||l.duration<p.duration)&&(l.duration=p.duration,l.easing=p.easing)}function wa(l,p,c){var d=c.maxSpeed,g=c.linearity,b=c.deceleration,w=o.clamp(l*g/(p/1e3),-d,d),C=Math.abs(w)/(b*g);return{easing:c.easing,duration:1e3*C,amount:w*(C/2)}}vu.prototype.clear=function(){this._inertiaBuffer=[]},vu.prototype.record=function(l){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:o.browser.now(),settings:l})},vu.prototype._drainInertiaBuffer=function(){for(var l=this._inertiaBuffer,p=o.browser.now();l.length>0&&p-l[0].time>160;)l.shift()},vu.prototype._onMoveEnd=function(l){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var p={zoom:0,bearing:0,pitch:0,pan:new o.Point(0,0),pinchAround:void 0,around:void 0},c=0,d=this._inertiaBuffer;c<d.length;c+=1){var g=d[c].settings;p.zoom+=g.zoomDelta||0,p.bearing+=g.bearingDelta||0,p.pitch+=g.pitchDelta||0,g.panDelta&&p.pan._add(g.panDelta),g.around&&(p.around=g.around),g.pinchAround&&(p.pinchAround=g.pinchAround)}var b=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,w={};if(p.pan.mag()){var C=wa(p.pan.mag(),b,o.extend({},_l,l||{}));w.offset=p.pan.mult(C.amount/p.pan.mag()),w.center=this._map.transform.center,_u(w,C)}if(p.zoom){var M=wa(p.zoom,b,gu);w.zoom=this._map.transform.zoom+M.amount,_u(w,M)}if(p.bearing){var B=wa(p.bearing,b,l0);w.bearing=this._map.transform.bearing+o.clamp(B.amount,-179,179),_u(w,B)}if(p.pitch){var K=wa(p.pitch,b,u0);w.pitch=this._map.transform.pitch+K.amount,_u(w,K)}if(w.zoom||w.bearing){var Z=p.pinchAround===void 0?p.around:p.pinchAround;w.around=Z?this._map.unproject(Z):this._map.getCenter()}return this.clear(),o.extend(w,{noMoveStart:!0})}};var Nn=function(l){function p(d,g,b,w){w===void 0&&(w={});var C=x.mousePos(g.getCanvasContainer(),b),M=g.unproject(C);l.call(this,d,o.extend({point:C,lngLat:M,originalEvent:b},w)),this._defaultPrevented=!1,this.target=g}l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p;var c={defaultPrevented:{configurable:!0}};return p.prototype.preventDefault=function(){this._defaultPrevented=!0},c.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(p.prototype,c),p}(o.Event),xu=function(l){function p(d,g,b){var w=d==="touchend"?b.changedTouches:b.touches,C=x.touchPos(g.getCanvasContainer(),w),M=C.map(function(Z){return g.unproject(Z)}),B=C.reduce(function(Z,Y,ce,ue){return Z.add(Y.div(ue.length))},new o.Point(0,0)),K=g.unproject(B);l.call(this,d,{points:C,point:B,lngLats:M,lngLat:K,originalEvent:b}),this._defaultPrevented=!1}l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p;var c={defaultPrevented:{configurable:!0}};return p.prototype.preventDefault=function(){this._defaultPrevented=!0},c.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(p.prototype,c),p}(o.Event),am=function(l){function p(d,g,b){l.call(this,d,{originalEvent:b}),this._defaultPrevented=!1}l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p;var c={defaultPrevented:{configurable:!0}};return p.prototype.preventDefault=function(){this._defaultPrevented=!0},c.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(p.prototype,c),p}(o.Event),Rn=function(l,p){this._map=l,this._clickTolerance=p.clickTolerance};Rn.prototype.reset=function(){delete this._mousedownPos},Rn.prototype.wheel=function(l){return this._firePreventable(new am(l.type,this._map,l))},Rn.prototype.mousedown=function(l,p){return this._mousedownPos=p,this._firePreventable(new Nn(l.type,this._map,l))},Rn.prototype.mouseup=function(l){this._map.fire(new Nn(l.type,this._map,l))},Rn.prototype.click=function(l,p){this._mousedownPos&&this._mousedownPos.dist(p)>=this._clickTolerance||this._map.fire(new Nn(l.type,this._map,l))},Rn.prototype.dblclick=function(l){return this._firePreventable(new Nn(l.type,this._map,l))},Rn.prototype.mouseover=function(l){this._map.fire(new Nn(l.type,this._map,l))},Rn.prototype.mouseout=function(l){this._map.fire(new Nn(l.type,this._map,l))},Rn.prototype.touchstart=function(l){return this._firePreventable(new xu(l.type,this._map,l))},Rn.prototype.touchmove=function(l){this._map.fire(new xu(l.type,this._map,l))},Rn.prototype.touchend=function(l){this._map.fire(new xu(l.type,this._map,l))},Rn.prototype.touchcancel=function(l){this._map.fire(new xu(l.type,this._map,l))},Rn.prototype._firePreventable=function(l){if(this._map.fire(l),l.defaultPrevented)return{}},Rn.prototype.isEnabled=function(){return!0},Rn.prototype.isActive=function(){return!1},Rn.prototype.enable=function(){},Rn.prototype.disable=function(){};var gt=function(l){this._map=l};gt.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},gt.prototype.mousemove=function(l){this._map.fire(new Nn(l.type,this._map,l))},gt.prototype.mousedown=function(){this._delayContextMenu=!0},gt.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Nn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},gt.prototype.contextmenu=function(l){this._delayContextMenu?this._contextMenuEvent=l:this._map.fire(new Nn(l.type,this._map,l)),this._map.listens("contextmenu")&&l.preventDefault()},gt.prototype.isEnabled=function(){return!0},gt.prototype.isActive=function(){return!1},gt.prototype.enable=function(){},gt.prototype.disable=function(){};var Hi=function(l,p){this._map=l,this._el=l.getCanvasContainer(),this._container=l.getContainer(),this._clickTolerance=p.clickTolerance||1};function bc(l,p){for(var c={},d=0;d<l.length;d++)c[l[d].identifier]=p[d];return c}Hi.prototype.isEnabled=function(){return!!this._enabled},Hi.prototype.isActive=function(){return!!this._active},Hi.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Hi.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Hi.prototype.mousedown=function(l,p){this.isEnabled()&&l.shiftKey&&l.button===0&&(x.disableDrag(),this._startPos=this._lastPos=p,this._active=!0)},Hi.prototype.mousemoveWindow=function(l,p){if(this._active){var c=p;if(!(this._lastPos.equals(c)||!this._box&&c.dist(this._startPos)<this._clickTolerance)){var d=this._startPos;this._lastPos=c,this._box||(this._box=x.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",l));var g=Math.min(d.x,c.x),b=Math.max(d.x,c.x),w=Math.min(d.y,c.y),C=Math.max(d.y,c.y);x.setTransform(this._box,"translate("+g+"px,"+w+"px)"),this._box.style.width=b-g+"px",this._box.style.height=C-w+"px"}}},Hi.prototype.mouseupWindow=function(l,p){var c=this;if(this._active&&l.button===0){var d=this._startPos,g=p;if(this.reset(),x.suppressClick(),d.x!==g.x||d.y!==g.y)return this._map.fire(new o.Event("boxzoomend",{originalEvent:l})),{cameraAnimation:function(b){return b.fitScreenCoordinates(d,g,c._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",l)}},Hi.prototype.keydown=function(l){this._active&&l.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",l))},Hi.prototype.blur=function(){this.reset()},Hi.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(x.remove(this._box),this._box=null),x.enableDrag(),delete this._startPos,delete this._lastPos},Hi.prototype._fireEvent=function(l,p){return this._map.fire(new o.Event(l,{originalEvent:p}))};var xl=function(l){this.reset(),this.numTouches=l.numTouches};xl.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},xl.prototype.touchstart=function(l,p,c){(this.centroid||c.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=l.timeStamp),c.length===this.numTouches&&(this.centroid=function(d){for(var g=new o.Point(0,0),b=0,w=d;b<w.length;b+=1)g._add(w[b]);return g.div(d.length)}(p),this.touches=bc(c,p)))},xl.prototype.touchmove=function(l,p,c){if(!this.aborted&&this.centroid){var d=bc(c,p);for(var g in this.touches){var b=d[g];(!b||b.dist(this.touches[g])>30)&&(this.aborted=!0)}}},xl.prototype.touchend=function(l,p,c){if((!this.centroid||l.timeStamp-this.startTime>500)&&(this.aborted=!0),c.length===0){var d=!this.aborted&&this.centroid;if(this.reset(),d)return d}};var jo=function(l){this.singleTap=new xl(l),this.numTaps=l.numTaps,this.reset()};jo.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},jo.prototype.touchstart=function(l,p,c){this.singleTap.touchstart(l,p,c)},jo.prototype.touchmove=function(l,p,c){this.singleTap.touchmove(l,p,c)},jo.prototype.touchend=function(l,p,c){var d=this.singleTap.touchend(l,p,c);if(d){var g=l.timeStamp-this.lastTime<500,b=!this.lastTap||this.lastTap.dist(d)<30;if(g&&b||this.reset(),this.count++,this.lastTime=l.timeStamp,this.lastTap=d,this.count===this.numTaps)return this.reset(),d}};var Ki=function(){this._zoomIn=new jo({numTouches:1,numTaps:2}),this._zoomOut=new jo({numTouches:2,numTaps:1}),this.reset()};Ki.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Ki.prototype.touchstart=function(l,p,c){this._zoomIn.touchstart(l,p,c),this._zoomOut.touchstart(l,p,c)},Ki.prototype.touchmove=function(l,p,c){this._zoomIn.touchmove(l,p,c),this._zoomOut.touchmove(l,p,c)},Ki.prototype.touchend=function(l,p,c){var d=this,g=this._zoomIn.touchend(l,p,c),b=this._zoomOut.touchend(l,p,c);return g?(this._active=!0,l.preventDefault(),setTimeout(function(){return d.reset()},0),{cameraAnimation:function(w){return w.easeTo({duration:300,zoom:w.getZoom()+1,around:w.unproject(g)},{originalEvent:l})}}):b?(this._active=!0,l.preventDefault(),setTimeout(function(){return d.reset()},0),{cameraAnimation:function(w){return w.easeTo({duration:300,zoom:w.getZoom()-1,around:w.unproject(b)},{originalEvent:l})}}):void 0},Ki.prototype.touchcancel=function(){this.reset()},Ki.prototype.enable=function(){this._enabled=!0},Ki.prototype.disable=function(){this._enabled=!1,this.reset()},Ki.prototype.isEnabled=function(){return this._enabled},Ki.prototype.isActive=function(){return this._active};var kh={0:1,2:2},ot=function(l){this.reset(),this._clickTolerance=l.clickTolerance||1};ot.prototype.blur=function(){this.reset()},ot.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},ot.prototype._correctButton=function(l,p){return!1},ot.prototype._move=function(l,p){return{}},ot.prototype.mousedown=function(l,p){if(!this._lastPoint){var c=x.mouseButton(l);this._correctButton(l,c)&&(this._lastPoint=p,this._eventButton=c)}},ot.prototype.mousemoveWindow=function(l,p){var c=this._lastPoint;if(c){if(l.preventDefault(),function(d,g){var b=kh[g];return d.buttons===void 0||(d.buttons&b)!==b}(l,this._eventButton))this.reset();else if(this._moved||!(p.dist(c)<this._clickTolerance))return this._moved=!0,this._lastPoint=p,this._move(c,p)}},ot.prototype.mouseupWindow=function(l){this._lastPoint&&x.mouseButton(l)===this._eventButton&&(this._moved&&x.suppressClick(),this.reset())},ot.prototype.enable=function(){this._enabled=!0},ot.prototype.disable=function(){this._enabled=!1,this.reset()},ot.prototype.isEnabled=function(){return this._enabled},ot.prototype.isActive=function(){return this._active};var Th=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.mousedown=function(c,d){l.prototype.mousedown.call(this,c,d),this._lastPoint&&(this._active=!0)},p.prototype._correctButton=function(c,d){return d===0&&!c.ctrlKey},p.prototype._move=function(c,d){return{around:d,panDelta:d.sub(c)}},p}(ot),wc=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype._correctButton=function(c,d){return d===0&&c.ctrlKey||d===2},p.prototype._move=function(c,d){var g=.8*(d.x-c.x);if(g)return this._active=!0,{bearingDelta:g}},p.prototype.contextmenu=function(c){c.preventDefault()},p}(ot),Ih=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype._correctButton=function(c,d){return d===0&&c.ctrlKey||d===2},p.prototype._move=function(c,d){var g=-.5*(d.y-c.y);if(g)return this._active=!0,{pitchDelta:g}},p.prototype.contextmenu=function(c){c.preventDefault()},p}(ot),xo=function(l){this._minTouches=1,this._clickTolerance=l.clickTolerance||1,this.reset()};xo.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new o.Point(0,0)},xo.prototype.touchstart=function(l,p,c){return this._calculateTransform(l,p,c)},xo.prototype.touchmove=function(l,p,c){if(this._active&&!(c.length<this._minTouches))return l.preventDefault(),this._calculateTransform(l,p,c)},xo.prototype.touchend=function(l,p,c){this._calculateTransform(l,p,c),this._active&&c.length<this._minTouches&&this.reset()},xo.prototype.touchcancel=function(){this.reset()},xo.prototype._calculateTransform=function(l,p,c){c.length>0&&(this._active=!0);var d=bc(c,p),g=new o.Point(0,0),b=new o.Point(0,0),w=0;for(var C in d){var M=d[C],B=this._touches[C];B&&(g._add(M),b._add(M.sub(B)),w++,d[C]=M)}if(this._touches=d,!(w<this._minTouches)&&b.mag()){var K=b.div(w);if(this._sum._add(K),!(this._sum.mag()<this._clickTolerance))return{around:g.div(w),panDelta:K}}},xo.prototype.enable=function(){this._enabled=!0},xo.prototype.disable=function(){this._enabled=!1,this.reset()},xo.prototype.isEnabled=function(){return this._enabled},xo.prototype.isActive=function(){return this._active};var Zi=function(){this.reset()};function Sc(l,p,c){for(var d=0;d<l.length;d++)if(l[d].identifier===c)return p[d]}function Ec(l,p){return Math.log(l/p)/Math.LN2}Zi.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Zi.prototype._start=function(l){},Zi.prototype._move=function(l,p,c){return{}},Zi.prototype.touchstart=function(l,p,c){this._firstTwoTouches||c.length<2||(this._firstTwoTouches=[c[0].identifier,c[1].identifier],this._start([p[0],p[1]]))},Zi.prototype.touchmove=function(l,p,c){if(this._firstTwoTouches){l.preventDefault();var d=this._firstTwoTouches,g=d[1],b=Sc(c,p,d[0]),w=Sc(c,p,g);if(b&&w){var C=this._aroundCenter?null:b.add(w).div(2);return this._move([b,w],C,l)}}},Zi.prototype.touchend=function(l,p,c){if(this._firstTwoTouches){var d=this._firstTwoTouches,g=d[1],b=Sc(c,p,d[0]),w=Sc(c,p,g);b&&w||(this._active&&x.suppressClick(),this.reset())}},Zi.prototype.touchcancel=function(){this.reset()},Zi.prototype.enable=function(l){this._enabled=!0,this._aroundCenter=!!l&&l.around==="center"},Zi.prototype.disable=function(){this._enabled=!1,this.reset()},Zi.prototype.isEnabled=function(){return this._enabled},Zi.prototype.isActive=function(){return this._active};var Xi=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.reset=function(){l.prototype.reset.call(this),delete this._distance,delete this._startDistance},p.prototype._start=function(c){this._startDistance=this._distance=c[0].dist(c[1])},p.prototype._move=function(c,d){var g=this._distance;if(this._distance=c[0].dist(c[1]),this._active||!(Math.abs(Ec(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Ec(this._distance,g),pinchAround:d}},p}(Zi);function Sa(l,p){return 180*l.angleWith(p)/Math.PI}var sm=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.reset=function(){l.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},p.prototype._start=function(c){this._startVector=this._vector=c[0].sub(c[1]),this._minDiameter=c[0].dist(c[1])},p.prototype._move=function(c,d){var g=this._vector;if(this._vector=c[0].sub(c[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Sa(this._vector,g),pinchAround:d}},p.prototype._isBelowThreshold=function(c){this._minDiameter=Math.min(this._minDiameter,c.mag());var d=25/(Math.PI*this._minDiameter)*360,g=Sa(c,this._startVector);return Math.abs(g)<d},p}(Zi);function bu(l){return Math.abs(l.y)>Math.abs(l.x)}var Ph=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.reset=function(){l.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},p.prototype._start=function(c){this._lastPoints=c,bu(c[0].sub(c[1]))&&(this._valid=!1)},p.prototype._move=function(c,d,g){var b=c[0].sub(this._lastPoints[0]),w=c[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(b,w,g.timeStamp),this._valid)return this._lastPoints=c,this._active=!0,{pitchDelta:(b.y+w.y)/2*-.5}},p.prototype.gestureBeginsVertically=function(c,d,g){if(this._valid!==void 0)return this._valid;var b=c.mag()>=2,w=d.mag()>=2;if(b||w){if(!b||!w)return this._firstMove===void 0&&(this._firstMove=g),g-this._firstMove<100&&void 0;var C=c.y>0==d.y>0;return bu(c)&&bu(d)&&C}},p}(Zi),Ah={panStep:100,bearingStep:15,pitchStep:10},Uo=function(){var l=Ah;this._panStep=l.panStep,this._bearingStep=l.bearingStep,this._pitchStep=l.pitchStep,this._rotationDisabled=!1};function lo(l){return l*(2-l)}Uo.prototype.blur=function(){this.reset()},Uo.prototype.reset=function(){this._active=!1},Uo.prototype.keydown=function(l){var p=this;if(!(l.altKey||l.ctrlKey||l.metaKey)){var c=0,d=0,g=0,b=0,w=0;switch(l.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:l.shiftKey?d=-1:(l.preventDefault(),b=-1);break;case 39:l.shiftKey?d=1:(l.preventDefault(),b=1);break;case 38:l.shiftKey?g=1:(l.preventDefault(),w=-1);break;case 40:l.shiftKey?g=-1:(l.preventDefault(),w=1);break;default:return}return this._rotationDisabled&&(d=0,g=0),{cameraAnimation:function(C){var M=C.getZoom();C.easeTo({duration:300,easeId:"keyboardHandler",easing:lo,zoom:c?Math.round(M)+c*(l.shiftKey?2:1):M,bearing:C.getBearing()+d*p._bearingStep,pitch:C.getPitch()+g*p._pitchStep,offset:[-b*p._panStep,-w*p._panStep],center:C.getCenter()},{originalEvent:l})}}}},Uo.prototype.enable=function(){this._enabled=!0},Uo.prototype.disable=function(){this._enabled=!1,this.reset()},Uo.prototype.isEnabled=function(){return this._enabled},Uo.prototype.isActive=function(){return this._active},Uo.prototype.disableRotation=function(){this._rotationDisabled=!0},Uo.prototype.enableRotation=function(){this._rotationDisabled=!1};var cr=function(l,p){this._map=l,this._el=l.getCanvasContainer(),this._handler=p,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,o.bindAll(["_onTimeout"],this)};cr.prototype.setZoomRate=function(l){this._defaultZoomRate=l},cr.prototype.setWheelZoomRate=function(l){this._wheelZoomRate=l},cr.prototype.isEnabled=function(){return!!this._enabled},cr.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},cr.prototype.isZooming=function(){return!!this._zooming},cr.prototype.enable=function(l){this.isEnabled()||(this._enabled=!0,this._aroundCenter=l&&l.around==="center")},cr.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},cr.prototype.wheel=function(l){if(this.isEnabled()){var p=l.deltaMode===o.window.WheelEvent.DOM_DELTA_LINE?40*l.deltaY:l.deltaY,c=o.browser.now(),d=c-(this._lastWheelEventTime||0);this._lastWheelEventTime=c,p!==0&&p%4.000244140625==0?this._type="wheel":p!==0&&Math.abs(p)<4?this._type="trackpad":d>400?(this._type=null,this._lastValue=p,this._timeout=setTimeout(this._onTimeout,40,l)):this._type||(this._type=Math.abs(d*p)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,p+=this._lastValue)),l.shiftKey&&p&&(p/=4),this._type&&(this._lastWheelEvent=l,this._delta-=p,this._active||this._start(l)),l.preventDefault()}},cr.prototype._onTimeout=function(l){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(l)},cr.prototype._start=function(l){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var p=x.mousePos(this._el,l);this._around=o.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(p)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},cr.prototype.renderFrame=function(){var l=this;if(this._frameId&&(this._frameId=null,this.isActive())){var p=this._map.transform;if(this._delta!==0){var c=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,d=2/(1+Math.exp(-Math.abs(this._delta*c)));this._delta<0&&d!==0&&(d=1/d);var g=typeof this._targetZoom=="number"?p.zoomScale(this._targetZoom):p.scale;this._targetZoom=Math.min(p.maxZoom,Math.max(p.minZoom,p.scaleZoom(g*d))),this._type==="wheel"&&(this._startZoom=p.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var b,w=typeof this._targetZoom=="number"?this._targetZoom:p.zoom,C=this._startZoom,M=this._easing,B=!1;if(this._type==="wheel"&&C&&M){var K=Math.min((o.browser.now()-this._lastWheelEventTime)/200,1),Z=M(K);b=o.number(C,w,Z),K<1?this._frameId||(this._frameId=!0):B=!0}else b=w,B=!0;return this._active=!0,B&&(this._active=!1,this._finishTimeout=setTimeout(function(){l._zooming=!1,l._handler._triggerRenderFrame(),delete l._targetZoom,delete l._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!B,zoomDelta:b-p.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},cr.prototype._smoothOutEasing=function(l){var p=o.ease;if(this._prevEase){var c=this._prevEase,d=(o.browser.now()-c.start)/c.duration,g=c.easing(d+.01)-c.easing(d),b=.27/Math.sqrt(g*g+1e-4)*.01,w=Math.sqrt(.0729-b*b);p=o.bezier(b,w,.25,1)}return this._prevEase={start:o.browser.now(),duration:l,easing:p},p},cr.prototype.blur=function(){this.reset()},cr.prototype.reset=function(){this._active=!1};var oa=function(l,p){this._clickZoom=l,this._tapZoom=p};oa.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},oa.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},oa.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},oa.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var bo=function(){this.reset()};bo.prototype.reset=function(){this._active=!1},bo.prototype.blur=function(){this.reset()},bo.prototype.dblclick=function(l,p){return l.preventDefault(),{cameraAnimation:function(c){c.easeTo({duration:300,zoom:c.getZoom()+(l.shiftKey?-1:1),around:c.unproject(p)},{originalEvent:l})}}},bo.prototype.enable=function(){this._enabled=!0},bo.prototype.disable=function(){this._enabled=!1,this.reset()},bo.prototype.isEnabled=function(){return this._enabled},bo.prototype.isActive=function(){return this._active};var pi=function(){this._tap=new jo({numTouches:1,numTaps:1}),this.reset()};pi.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},pi.prototype.touchstart=function(l,p,c){this._swipePoint||(this._tapTime&&l.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?c.length>0&&(this._swipePoint=p[0],this._swipeTouch=c[0].identifier):this._tap.touchstart(l,p,c))},pi.prototype.touchmove=function(l,p,c){if(this._tapTime){if(this._swipePoint){if(c[0].identifier!==this._swipeTouch)return;var d=p[0],g=d.y-this._swipePoint.y;return this._swipePoint=d,l.preventDefault(),this._active=!0,{zoomDelta:g/128}}}else this._tap.touchmove(l,p,c)},pi.prototype.touchend=function(l,p,c){this._tapTime?this._swipePoint&&c.length===0&&this.reset():this._tap.touchend(l,p,c)&&(this._tapTime=l.timeStamp)},pi.prototype.touchcancel=function(){this.reset()},pi.prototype.enable=function(){this._enabled=!0},pi.prototype.disable=function(){this._enabled=!1,this.reset()},pi.prototype.isEnabled=function(){return this._enabled},pi.prototype.isActive=function(){return this._active};var Ns=function(l,p,c){this._el=l,this._mousePan=p,this._touchPan=c};Ns.prototype.enable=function(l){this._inertiaOptions=l||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},Ns.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},Ns.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},Ns.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Ya=function(l,p,c){this._pitchWithRotate=l.pitchWithRotate,this._mouseRotate=p,this._mousePitch=c};Ya.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Ya.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Ya.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Ya.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var $o=function(l,p,c,d){this._el=l,this._touchZoom=p,this._touchRotate=c,this._tapDragZoom=d,this._rotationDisabled=!1,this._enabled=!0};$o.prototype.enable=function(l){this._touchZoom.enable(l),this._rotationDisabled||this._touchRotate.enable(l),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},$o.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},$o.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},$o.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},$o.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},$o.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var Ei=function(l){return l.zoom||l.drag||l.pitch||l.rotate},wu=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p}(o.Event);function St(l){return l.panDelta&&l.panDelta.mag()||l.zoomDelta||l.bearingDelta||l.pitchDelta}var _t=function(l,p){this._map=l,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new vu(l),this._bearingSnap=p.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(p),o.bindAll(["handleEvent","handleWindowEvent"],this);var c=this._el;this._listeners=[[c,"touchstart",{passive:!0}],[c,"touchmove",{passive:!1}],[c,"touchend",void 0],[c,"touchcancel",void 0],[c,"mousedown",void 0],[c,"mousemove",void 0],[c,"mouseup",void 0],[o.window.document,"mousemove",{capture:!0}],[o.window.document,"mouseup",void 0],[c,"mouseover",void 0],[c,"mouseout",void 0],[c,"dblclick",void 0],[c,"click",void 0],[c,"keydown",{capture:!1}],[c,"keyup",void 0],[c,"wheel",{passive:!1}],[c,"contextmenu",void 0],[o.window,"blur",void 0]];for(var d=0,g=this._listeners;d<g.length;d+=1){var b=g[d],w=b[0];x.addEventListener(w,b[1],w===o.window.document?this.handleWindowEvent:this.handleEvent,b[2])}};_t.prototype.destroy=function(){for(var l=0,p=this._listeners;l<p.length;l+=1){var c=p[l],d=c[0];x.removeEventListener(d,c[1],d===o.window.document?this.handleWindowEvent:this.handleEvent,c[2])}},_t.prototype._addDefaultHandlers=function(l){var p=this._map,c=p.getCanvasContainer();this._add("mapEvent",new Rn(p,l));var d=p.boxZoom=new Hi(p,l);this._add("boxZoom",d);var g=new Ki,b=new bo;p.doubleClickZoom=new oa(b,g),this._add("tapZoom",g),this._add("clickZoom",b);var w=new pi;this._add("tapDragZoom",w);var C=p.touchPitch=new Ph;this._add("touchPitch",C);var M=new wc(l),B=new Ih(l);p.dragRotate=new Ya(l,M,B),this._add("mouseRotate",M,["mousePitch"]),this._add("mousePitch",B,["mouseRotate"]);var K=new Th(l),Z=new xo(l);p.dragPan=new Ns(c,K,Z),this._add("mousePan",K),this._add("touchPan",Z,["touchZoom","touchRotate"]);var Y=new sm,ce=new Xi;p.touchZoomRotate=new $o(c,ce,Y,w),this._add("touchRotate",Y,["touchPan","touchZoom"]),this._add("touchZoom",ce,["touchPan","touchRotate"]);var ue=p.scrollZoom=new cr(p,this);this._add("scrollZoom",ue,["mousePan"]);var xe=p.keyboard=new Uo;this._add("keyboard",xe),this._add("blockableMapEvent",new gt(p));for(var oe=0,ve=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];oe<ve.length;oe+=1){var Se=ve[oe];l.interactive&&l[Se]&&p[Se].enable(l[Se])}},_t.prototype._add=function(l,p,c){this._handlers.push({handlerName:l,handler:p,allowed:c}),this._handlersById[l]=p},_t.prototype.stop=function(l){if(!this._updatingCamera){for(var p=0,c=this._handlers;p<c.length;p+=1)c[p].handler.reset();this._inertia.clear(),this._fireEvents({},{},l),this._changes=[]}},_t.prototype.isActive=function(){for(var l=0,p=this._handlers;l<p.length;l+=1)if(p[l].handler.isActive())return!0;return!1},_t.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},_t.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},_t.prototype.isMoving=function(){return!!Ei(this._eventsInProgress)||this.isZooming()},_t.prototype._blockedByActive=function(l,p,c){for(var d in l)if(d!==c&&(!p||p.indexOf(d)<0))return!0;return!1},_t.prototype.handleWindowEvent=function(l){this.handleEvent(l,l.type+"Window")},_t.prototype._getMapTouches=function(l){for(var p=[],c=0,d=l;c<d.length;c+=1){var g=d[c];this._el.contains(g.target)&&p.push(g)}return p},_t.prototype.handleEvent=function(l,p){this._updatingCamera=!0;for(var c=l.type==="renderFrame"?void 0:l,d={needsRenderFrame:!1},g={},b={},w=l.touches?this._getMapTouches(l.touches):void 0,C=w?x.touchPos(this._el,w):x.mousePos(this._el,l),M=0,B=this._handlers;M<B.length;M+=1){var K=B[M],Z=K.handlerName,Y=K.handler,ce=K.allowed;if(Y.isEnabled()){var ue=void 0;this._blockedByActive(b,ce,Z)?Y.reset():Y[p||l.type]&&(ue=Y[p||l.type](l,C,w),this.mergeHandlerResult(d,g,ue,Z,c),ue&&ue.needsRenderFrame&&this._triggerRenderFrame()),(ue||Y.isActive())&&(b[Z]=Y)}}var xe={};for(var oe in this._previousActiveHandlers)b[oe]||(xe[oe]=c);this._previousActiveHandlers=b,(Object.keys(xe).length||St(d))&&(this._changes.push([d,g,xe]),this._triggerRenderFrame()),(Object.keys(b).length||St(d))&&this._map._stop(!0),this._updatingCamera=!1;var ve=d.cameraAnimation;ve&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ve(this._map))},_t.prototype.mergeHandlerResult=function(l,p,c,d,g){if(c){o.extend(l,c);var b={handlerName:d,originalEvent:c.originalEvent||g};c.zoomDelta!==void 0&&(p.zoom=b),c.panDelta!==void 0&&(p.drag=b),c.pitchDelta!==void 0&&(p.pitch=b),c.bearingDelta!==void 0&&(p.rotate=b)}},_t.prototype._applyChanges=function(){for(var l={},p={},c={},d=0,g=this._changes;d<g.length;d+=1){var b=g[d],w=b[0],C=b[1],M=b[2];w.panDelta&&(l.panDelta=(l.panDelta||new o.Point(0,0))._add(w.panDelta)),w.zoomDelta&&(l.zoomDelta=(l.zoomDelta||0)+w.zoomDelta),w.bearingDelta&&(l.bearingDelta=(l.bearingDelta||0)+w.bearingDelta),w.pitchDelta&&(l.pitchDelta=(l.pitchDelta||0)+w.pitchDelta),w.around!==void 0&&(l.around=w.around),w.pinchAround!==void 0&&(l.pinchAround=w.pinchAround),w.noInertia&&(l.noInertia=w.noInertia),o.extend(p,C),o.extend(c,M)}this._updateMapTransform(l,p,c),this._changes=[]},_t.prototype._updateMapTransform=function(l,p,c){var d=this._map,g=d.transform;if(!St(l))return this._fireEvents(p,c,!0);var b=l.panDelta,w=l.zoomDelta,C=l.bearingDelta,M=l.pitchDelta,B=l.around,K=l.pinchAround;K!==void 0&&(B=K),d._stop(!0),B=B||d.transform.centerPoint;var Z=g.pointLocation(b?B.sub(b):B);C&&(g.bearing+=C),M&&(g.pitch+=M),w&&(g.zoom+=w),g.setLocationAtPoint(Z,B),this._map._update(),l.noInertia||this._inertia.record(l),this._fireEvents(p,c,!0)},_t.prototype._fireEvents=function(l,p,c){var d=this,g=Ei(this._eventsInProgress),b=Ei(l),w={};for(var C in l)this._eventsInProgress[C]||(w[C+"start"]=l[C].originalEvent),this._eventsInProgress[C]=l[C];for(var M in!g&&b&&this._fireEvent("movestart",b.originalEvent),w)this._fireEvent(M,w[M]);for(var B in b&&this._fireEvent("move",b.originalEvent),l)this._fireEvent(B,l[B].originalEvent);var K,Z={};for(var Y in this._eventsInProgress){var ce=this._eventsInProgress[Y],ue=ce.handlerName,xe=ce.originalEvent;this._handlersById[ue].isActive()||(delete this._eventsInProgress[Y],Z[Y+"end"]=K=p[ue]||xe)}for(var oe in Z)this._fireEvent(oe,Z[oe]);var ve=Ei(this._eventsInProgress);if(c&&(g||b)&&!ve){this._updatingCamera=!0;var Se=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Pe=function(Fe){return Fe!==0&&-d._bearingSnap<Fe&&Fe<d._bearingSnap};Se?(Pe(Se.bearing||this._map.getBearing())&&(Se.bearing=0),this._map.easeTo(Se,{originalEvent:K})):(this._map.fire(new o.Event("moveend",{originalEvent:K})),Pe(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},_t.prototype._fireEvent=function(l,p){this._map.fire(new o.Event(l,p?{originalEvent:p}:{}))},_t.prototype._requestFrame=function(){var l=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(p){delete l._frameId,l.handleEvent(new wu("renderFrame",{timeStamp:p})),l._applyChanges()})},_t.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var Cc=function(l){function p(c,d){l.call(this),this._moving=!1,this._zooming=!1,this.transform=c,this._bearingSnap=d.bearingSnap,o.bindAll(["_renderFrameCallback"],this)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getCenter=function(){return new o.LngLat(this.transform.center.lng,this.transform.center.lat)},p.prototype.setCenter=function(c,d){return this.jumpTo({center:c},d)},p.prototype.panBy=function(c,d,g){return c=o.Point.convert(c).mult(-1),this.panTo(this.transform.center,o.extend({offset:c},d),g)},p.prototype.panTo=function(c,d,g){return this.easeTo(o.extend({center:c},d),g)},p.prototype.getZoom=function(){return this.transform.zoom},p.prototype.setZoom=function(c,d){return this.jumpTo({zoom:c},d),this},p.prototype.zoomTo=function(c,d,g){return this.easeTo(o.extend({zoom:c},d),g)},p.prototype.zoomIn=function(c,d){return this.zoomTo(this.getZoom()+1,c,d),this},p.prototype.zoomOut=function(c,d){return this.zoomTo(this.getZoom()-1,c,d),this},p.prototype.getBearing=function(){return this.transform.bearing},p.prototype.setBearing=function(c,d){return this.jumpTo({bearing:c},d),this},p.prototype.getPadding=function(){return this.transform.padding},p.prototype.setPadding=function(c,d){return this.jumpTo({padding:c},d),this},p.prototype.rotateTo=function(c,d,g){return this.easeTo(o.extend({bearing:c},d),g)},p.prototype.resetNorth=function(c,d){return this.rotateTo(0,o.extend({duration:1e3},c),d),this},p.prototype.resetNorthPitch=function(c,d){return this.easeTo(o.extend({bearing:0,pitch:0,duration:1e3},c),d),this},p.prototype.snapToNorth=function(c,d){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(c,d):this},p.prototype.getPitch=function(){return this.transform.pitch},p.prototype.setPitch=function(c,d){return this.jumpTo({pitch:c},d),this},p.prototype.cameraForBounds=function(c,d){c=o.LngLatBounds.convert(c);var g=d&&d.bearing||0;return this._cameraForBoxAndBearing(c.getNorthWest(),c.getSouthEast(),g,d)},p.prototype._cameraForBoxAndBearing=function(c,d,g,b){var w={top:0,bottom:0,right:0,left:0};if(typeof(b=o.extend({padding:w,offset:[0,0],maxZoom:this.transform.maxZoom},b)).padding=="number"){var C=b.padding;b.padding={top:C,bottom:C,right:C,left:C}}b.padding=o.extend(w,b.padding);var M=this.transform,B=M.padding,K=M.project(o.LngLat.convert(c)),Z=M.project(o.LngLat.convert(d)),Y=K.rotate(-g*Math.PI/180),ce=Z.rotate(-g*Math.PI/180),ue=new o.Point(Math.max(Y.x,ce.x),Math.max(Y.y,ce.y)),xe=new o.Point(Math.min(Y.x,ce.x),Math.min(Y.y,ce.y)),oe=ue.sub(xe),ve=(M.width-(B.left+B.right+b.padding.left+b.padding.right))/oe.x,Se=(M.height-(B.top+B.bottom+b.padding.top+b.padding.bottom))/oe.y;if(!(Se<0||ve<0)){var Pe=Math.min(M.scaleZoom(M.scale*Math.min(ve,Se)),b.maxZoom),Fe=typeof b.offset.x=="number"?new o.Point(b.offset.x,b.offset.y):o.Point.convert(b.offset),De=new o.Point((b.padding.left-b.padding.right)/2,(b.padding.top-b.padding.bottom)/2).rotate(g*Math.PI/180),je=Fe.add(De).mult(M.scale/M.zoomScale(Pe));return{center:M.unproject(K.add(Z).div(2).sub(je)),zoom:Pe,bearing:g}}o.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},p.prototype.fitBounds=function(c,d,g){return this._fitInternal(this.cameraForBounds(c,d),d,g)},p.prototype.fitScreenCoordinates=function(c,d,g,b,w){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(o.Point.convert(c)),this.transform.pointLocation(o.Point.convert(d)),g,b),b,w)},p.prototype._fitInternal=function(c,d,g){return c?(delete(d=o.extend(c,d)).padding,d.linear?this.easeTo(d,g):this.flyTo(d,g)):this},p.prototype.jumpTo=function(c,d){this.stop();var g=this.transform,b=!1,w=!1,C=!1;return"zoom"in c&&g.zoom!==+c.zoom&&(b=!0,g.zoom=+c.zoom),c.center!==void 0&&(g.center=o.LngLat.convert(c.center)),"bearing"in c&&g.bearing!==+c.bearing&&(w=!0,g.bearing=+c.bearing),"pitch"in c&&g.pitch!==+c.pitch&&(C=!0,g.pitch=+c.pitch),c.padding==null||g.isPaddingEqual(c.padding)||(g.padding=c.padding),this.fire(new o.Event("movestart",d)).fire(new o.Event("move",d)),b&&this.fire(new o.Event("zoomstart",d)).fire(new o.Event("zoom",d)).fire(new o.Event("zoomend",d)),w&&this.fire(new o.Event("rotatestart",d)).fire(new o.Event("rotate",d)).fire(new o.Event("rotateend",d)),C&&this.fire(new o.Event("pitchstart",d)).fire(new o.Event("pitch",d)).fire(new o.Event("pitchend",d)),this.fire(new o.Event("moveend",d))},p.prototype.easeTo=function(c,d){var g=this;this._stop(!1,c.easeId),((c=o.extend({offset:[0,0],duration:500,easing:o.ease},c)).animate===!1||!c.essential&&o.browser.prefersReducedMotion)&&(c.duration=0);var b=this.transform,w=this.getZoom(),C=this.getBearing(),M=this.getPitch(),B=this.getPadding(),K="zoom"in c?+c.zoom:w,Z="bearing"in c?this._normalizeBearing(c.bearing,C):C,Y="pitch"in c?+c.pitch:M,ce="padding"in c?c.padding:b.padding,ue=o.Point.convert(c.offset),xe=b.centerPoint.add(ue),oe=b.pointLocation(xe),ve=o.LngLat.convert(c.center||oe);this._normalizeCenter(ve);var Se,Pe,Fe=b.project(oe),De=b.project(ve).sub(Fe),je=b.zoomScale(K-w);c.around&&(Se=o.LngLat.convert(c.around),Pe=b.locationPoint(Se));var Ke={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||K!==w,this._rotating=this._rotating||C!==Z,this._pitching=this._pitching||Y!==M,this._padding=!b.isPaddingEqual(ce),this._easeId=c.easeId,this._prepareEase(d,c.noMoveStart,Ke),this._ease(function(tt){if(g._zooming&&(b.zoom=o.number(w,K,tt)),g._rotating&&(b.bearing=o.number(C,Z,tt)),g._pitching&&(b.pitch=o.number(M,Y,tt)),g._padding&&(b.interpolatePadding(B,ce,tt),xe=b.centerPoint.add(ue)),Se)b.setLocationAtPoint(Se,Pe);else{var Qe=b.zoomScale(b.zoom-w),ft=K>w?Math.min(2,je):Math.max(.5,je),Et=Math.pow(ft,1-tt),It=b.unproject(Fe.add(De.mult(tt*Et)).mult(Qe));b.setLocationAtPoint(b.renderWorldCopies?It.wrap():It,xe)}g._fireMoveEvents(d)},function(tt){g._afterEase(d,tt)},c),this},p.prototype._prepareEase=function(c,d,g){g===void 0&&(g={}),this._moving=!0,d||g.moving||this.fire(new o.Event("movestart",c)),this._zooming&&!g.zooming&&this.fire(new o.Event("zoomstart",c)),this._rotating&&!g.rotating&&this.fire(new o.Event("rotatestart",c)),this._pitching&&!g.pitching&&this.fire(new o.Event("pitchstart",c))},p.prototype._fireMoveEvents=function(c){this.fire(new o.Event("move",c)),this._zooming&&this.fire(new o.Event("zoom",c)),this._rotating&&this.fire(new o.Event("rotate",c)),this._pitching&&this.fire(new o.Event("pitch",c))},p.prototype._afterEase=function(c,d){if(!this._easeId||!d||this._easeId!==d){delete this._easeId;var g=this._zooming,b=this._rotating,w=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,g&&this.fire(new o.Event("zoomend",c)),b&&this.fire(new o.Event("rotateend",c)),w&&this.fire(new o.Event("pitchend",c)),this.fire(new o.Event("moveend",c))}},p.prototype.flyTo=function(c,d){var g=this;if(!c.essential&&o.browser.prefersReducedMotion){var b=o.pick(c,["center","zoom","bearing","pitch","around"]);return this.jumpTo(b,d)}this.stop(),c=o.extend({offset:[0,0],speed:1.2,curve:1.42,easing:o.ease},c);var w=this.transform,C=this.getZoom(),M=this.getBearing(),B=this.getPitch(),K=this.getPadding(),Z="zoom"in c?o.clamp(+c.zoom,w.minZoom,w.maxZoom):C,Y="bearing"in c?this._normalizeBearing(c.bearing,M):M,ce="pitch"in c?+c.pitch:B,ue="padding"in c?c.padding:w.padding,xe=w.zoomScale(Z-C),oe=o.Point.convert(c.offset),ve=w.centerPoint.add(oe),Se=w.pointLocation(ve),Pe=o.LngLat.convert(c.center||Se);this._normalizeCenter(Pe);var Fe=w.project(Se),De=w.project(Pe).sub(Fe),je=c.curve,Ke=Math.max(w.width,w.height),tt=Ke/xe,Qe=De.mag();if("minZoom"in c){var ft=o.clamp(Math.min(c.minZoom,C,Z),w.minZoom,w.maxZoom),Et=Ke/w.zoomScale(ft-C);je=Math.sqrt(Et/Qe*2)}var It=je*je;function Tt(Ft){var Ot=(tt*tt-Ke*Ke+(Ft?-1:1)*It*It*Qe*Qe)/(2*(Ft?tt:Ke)*It*Qe);return Math.log(Math.sqrt(Ot*Ot+1)-Ot)}function _r(Ft){return(Math.exp(Ft)-Math.exp(-Ft))/2}function mt(Ft){return(Math.exp(Ft)+Math.exp(-Ft))/2}var qt=Tt(0),rr=function(Ft){return mt(qt)/mt(qt+je*Ft)},Vt=function(Ft){return Ke*((mt(qt)*(_r(Ot=qt+je*Ft)/mt(Ot))-_r(qt))/It)/Qe;var Ot},Ut=(Tt(1)-qt)/je;if(Math.abs(Qe)<1e-6||!isFinite(Ut)){if(Math.abs(Ke-tt)<1e-6)return this.easeTo(c,d);var Jt=tt<Ke?-1:1;Ut=Math.abs(Math.log(tt/Ke))/je,Vt=function(){return 0},rr=function(Ft){return Math.exp(Jt*je*Ft)}}return c.duration="duration"in c?+c.duration:1e3*Ut/("screenSpeed"in c?+c.screenSpeed/je:+c.speed),c.maxDuration&&c.duration>c.maxDuration&&(c.duration=0),this._zooming=!0,this._rotating=M!==Y,this._pitching=ce!==B,this._padding=!w.isPaddingEqual(ue),this._prepareEase(d,!1),this._ease(function(Ft){var Ot=Ft*Ut,Gn=1/rr(Ot);w.zoom=Ft===1?Z:C+w.scaleZoom(Gn),g._rotating&&(w.bearing=o.number(M,Y,Ft)),g._pitching&&(w.pitch=o.number(B,ce,Ft)),g._padding&&(w.interpolatePadding(K,ue,Ft),ve=w.centerPoint.add(oe));var vn=Ft===1?Pe:w.unproject(Fe.add(De.mult(Vt(Ot))).mult(Gn));w.setLocationAtPoint(w.renderWorldCopies?vn.wrap():vn,ve),g._fireMoveEvents(d)},function(){return g._afterEase(d)},c),this},p.prototype.isEasing=function(){return!!this._easeFrameId},p.prototype.stop=function(){return this._stop()},p.prototype._stop=function(c,d){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var g=this._onEaseEnd;delete this._onEaseEnd,g.call(this,d)}if(!c){var b=this.handlers;b&&b.stop(!1)}return this},p.prototype._ease=function(c,d,g){g.animate===!1||g.duration===0?(c(1),d()):(this._easeStart=o.browser.now(),this._easeOptions=g,this._onEaseFrame=c,this._onEaseEnd=d,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},p.prototype._renderFrameCallback=function(){var c=Math.min((o.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(c)),c<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},p.prototype._normalizeBearing=function(c,d){c=o.wrap(c,-180,180);var g=Math.abs(c-d);return Math.abs(c-360-d)<g&&(c-=360),Math.abs(c+360-d)<g&&(c+=360),c},p.prototype._normalizeCenter=function(c){var d=this.transform;if(d.renderWorldCopies&&!d.lngRange){var g=c.lng-d.center.lng;c.lng+=g>180?-360:g<-180?360:0}},p}(o.Evented),Ci=function(l){l===void 0&&(l={}),this.options=l,o.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};Ci.prototype.getDefaultPosition=function(){return"bottom-right"},Ci.prototype.onAdd=function(l){var p=this.options&&this.options.compact;return this._map=l,this._container=x.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=x.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=x.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),p&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),p===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Ci.prototype.onRemove=function(){x.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Ci.prototype._setElementTitle=function(l,p){var c=this._map._getUIString("AttributionControl."+p);l.title=c,l.setAttribute("aria-label",c)},Ci.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},Ci.prototype._updateEditLink=function(){var l=this._editLink;l||(l=this._editLink=this._container.querySelector(".mapbox-improve-map"));var p=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||o.config.ACCESS_TOKEN}];if(l){var c=p.reduce(function(d,g,b){return g.value&&(d+=g.key+"="+g.value+(b<p.length-1?"&":"")),d},"?");l.href=o.config.FEEDBACK_URL+"/"+c+(this._map._hash?this._map._hash.getHashString(!0):""),l.rel="noopener nofollow",this._setElementTitle(l,"MapFeedback")}},Ci.prototype._updateData=function(l){!l||l.sourceDataType!=="metadata"&&l.sourceDataType!=="visibility"&&l.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},Ci.prototype._updateAttributions=function(){if(this._map.style){var l=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?l=l.concat(this.options.customAttribution.map(function(C){return typeof C!="string"?"":C})):typeof this.options.customAttribution=="string"&&l.push(this.options.customAttribution)),this._map.style.stylesheet){var p=this._map.style.stylesheet;this.styleOwner=p.owner,this.styleId=p.id}var c=this._map.style.sourceCaches;for(var d in c){var g=c[d];if(g.used){var b=g.getSource();b.attribution&&l.indexOf(b.attribution)<0&&l.push(b.attribution)}}l.sort(function(C,M){return C.length-M.length});var w=(l=l.filter(function(C,M){for(var B=M+1;B<l.length;B++)if(l[B].indexOf(C)>=0)return!1;return!0})).join(" | ");w!==this._attribHTML&&(this._attribHTML=w,l.length?(this._innerContainer.innerHTML=w,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Ci.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var Vo=function(){o.bindAll(["_updateLogo"],this),o.bindAll(["_updateCompact"],this)};Vo.prototype.onAdd=function(l){this._map=l,this._container=x.create("div","mapboxgl-ctrl");var p=x.create("a","mapboxgl-ctrl-logo");return p.target="_blank",p.rel="noopener nofollow",p.href="https://www.mapbox.com/",p.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),p.setAttribute("rel","noopener nofollow"),this._container.appendChild(p),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Vo.prototype.onRemove=function(){x.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Vo.prototype.getDefaultPosition=function(){return"bottom-left"},Vo.prototype._updateLogo=function(l){l&&l.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},Vo.prototype._logoRequired=function(){if(this._map.style){var l=this._map.style.sourceCaches;for(var p in l)if(l[p].getSource().mapbox_logo)return!0;return!1}},Vo.prototype._updateCompact=function(){var l=this._container.children;if(l.length){var p=l[0];this._map.getCanvasContainer().offsetWidth<250?p.classList.add("mapboxgl-compact"):p.classList.remove("mapboxgl-compact")}};var hi=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};hi.prototype.add=function(l){var p=++this._id;return this._queue.push({callback:l,id:p,cancelled:!1}),p},hi.prototype.remove=function(l){for(var p=this._currentlyRunning,c=0,d=p?this._queue.concat(p):this._queue;c<d.length;c+=1){var g=d[c];if(g.id===l)return void(g.cancelled=!0)}},hi.prototype.run=function(l){l===void 0&&(l=0);var p=this._currentlyRunning=this._queue;this._queue=[];for(var c=0,d=p;c<d.length;c+=1){var g=d[c];if(!g.cancelled&&(g.callback(l),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},hi.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var aa={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Mh=o.window.HTMLImageElement,kc=o.window.HTMLElement,Dr=o.window.ImageBitmap,ti={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},lm=function(l){function p(d){var g=this;if((d=o.extend({},ti,d)).minZoom!=null&&d.maxZoom!=null&&d.minZoom>d.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(d.minPitch!=null&&d.maxPitch!=null&&d.minPitch>d.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(d.minPitch!=null&&d.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(d.maxPitch!=null&&d.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var b=new mr(d.minZoom,d.maxZoom,d.minPitch,d.maxPitch,d.renderWorldCopies);if(l.call(this,b,d),this._interactive=d.interactive,this._maxTileCacheSize=d.maxTileCacheSize,this._failIfMajorPerformanceCaveat=d.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=d.preserveDrawingBuffer,this._antialias=d.antialias,this._trackResize=d.trackResize,this._bearingSnap=d.bearingSnap,this._refreshExpiredTiles=d.refreshExpiredTiles,this._fadeDuration=d.fadeDuration,this._crossSourceCollisions=d.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=d.collectResourceTiming,this._renderTaskQueue=new hi,this._controls=[],this._mapId=o.uniqueId(),this._locale=o.extend({},aa,d.locale),this._clickTolerance=d.clickTolerance,this._requestManager=new o.RequestManager(d.transformRequest,d.accessToken),typeof d.container=="string"){if(this._container=o.window.document.getElementById(d.container),!this._container)throw new Error("Container '"+d.container+"' not found.")}else{if(!(d.container instanceof kc))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=d.container}if(d.maxBounds&&this.setMaxBounds(d.maxBounds),o.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return g._update(!1)}),this.on("moveend",function(){return g._update(!1)}),this.on("zoom",function(){return g._update(!0)}),o.window!==void 0&&(o.window.addEventListener("online",this._onWindowOnline,!1),o.window.addEventListener("resize",this._onWindowResize,!1),o.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new _t(this,d),this._hash=d.hash&&new so(typeof d.hash=="string"&&d.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:d.center,zoom:d.zoom,bearing:d.bearing,pitch:d.pitch}),d.bounds&&(this.resize(),this.fitBounds(d.bounds,o.extend({},d.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=d.localIdeographFontFamily,d.style&&this.setStyle(d.style,{localIdeographFontFamily:d.localIdeographFontFamily}),d.attributionControl&&this.addControl(new Ci({customAttribution:d.customAttribution})),this.addControl(new Vo,d.logoPosition),this.on("style.load",function(){g.transform.unmodified&&g.jumpTo(g.style.stylesheet)}),this.on("data",function(w){g._update(w.dataType==="style"),g.fire(new o.Event(w.dataType+"data",w))}),this.on("dataloading",function(w){g.fire(new o.Event(w.dataType+"dataloading",w))})}l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p;var c={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return p.prototype._getMapId=function(){return this._mapId},p.prototype.addControl=function(d,g){if(g===void 0&&(g=d.getDefaultPosition?d.getDefaultPosition():"top-right"),!d||!d.onAdd)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var b=d.onAdd(this);this._controls.push(d);var w=this._controlPositions[g];return g.indexOf("bottom")!==-1?w.insertBefore(b,w.firstChild):w.appendChild(b),this},p.prototype.removeControl=function(d){if(!d||!d.onRemove)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var g=this._controls.indexOf(d);return g>-1&&this._controls.splice(g,1),d.onRemove(this),this},p.prototype.hasControl=function(d){return this._controls.indexOf(d)>-1},p.prototype.resize=function(d){var g=this._containerDimensions(),b=g[0],w=g[1];if(b===this.transform.width&&w===this.transform.height)return this;this._resizeCanvas(b,w),this.transform.resize(b,w),this.painter.resize(b,w);var C=!this._moving;return C&&this.fire(new o.Event("movestart",d)).fire(new o.Event("move",d)),this.fire(new o.Event("resize",d)),C&&this.fire(new o.Event("moveend",d)),this},p.prototype.getBounds=function(){return this.transform.getBounds()},p.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},p.prototype.setMaxBounds=function(d){return this.transform.setMaxBounds(o.LngLatBounds.convert(d)),this._update()},p.prototype.setMinZoom=function(d){if((d=d??-2)>=-2&&d<=this.transform.maxZoom)return this.transform.minZoom=d,this._update(),this.getZoom()<d&&this.setZoom(d),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},p.prototype.getMinZoom=function(){return this.transform.minZoom},p.prototype.setMaxZoom=function(d){if((d=d??22)>=this.transform.minZoom)return this.transform.maxZoom=d,this._update(),this.getZoom()>d&&this.setZoom(d),this;throw new Error("maxZoom must be greater than the current minZoom")},p.prototype.getMaxZoom=function(){return this.transform.maxZoom},p.prototype.setMinPitch=function(d){if((d=d??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(d>=0&&d<=this.transform.maxPitch)return this.transform.minPitch=d,this._update(),this.getPitch()<d&&this.setPitch(d),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},p.prototype.getMinPitch=function(){return this.transform.minPitch},p.prototype.setMaxPitch=function(d){if((d=d??60)>60)throw new Error("maxPitch must be less than or equal to 60");if(d>=this.transform.minPitch)return this.transform.maxPitch=d,this._update(),this.getPitch()>d&&this.setPitch(d),this;throw new Error("maxPitch must be greater than the current minPitch")},p.prototype.getMaxPitch=function(){return this.transform.maxPitch},p.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},p.prototype.setRenderWorldCopies=function(d){return this.transform.renderWorldCopies=d,this._update()},p.prototype.project=function(d){return this.transform.locationPoint(o.LngLat.convert(d))},p.prototype.unproject=function(d){return this.transform.pointLocation(o.Point.convert(d))},p.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},p.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},p.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},p.prototype._createDelegatedListener=function(d,g,b){var w,C=this;if(d==="mouseenter"||d==="mouseover"){var M=!1;return{layer:g,listener:b,delegates:{mousemove:function(K){var Z=C.getLayer(g)?C.queryRenderedFeatures(K.point,{layers:[g]}):[];Z.length?M||(M=!0,b.call(C,new Nn(d,C,K.originalEvent,{features:Z}))):M=!1},mouseout:function(){M=!1}}}}if(d==="mouseleave"||d==="mouseout"){var B=!1;return{layer:g,listener:b,delegates:{mousemove:function(K){(C.getLayer(g)?C.queryRenderedFeatures(K.point,{layers:[g]}):[]).length?B=!0:B&&(B=!1,b.call(C,new Nn(d,C,K.originalEvent)))},mouseout:function(K){B&&(B=!1,b.call(C,new Nn(d,C,K.originalEvent)))}}}}return{layer:g,listener:b,delegates:(w={},w[d]=function(K){var Z=C.getLayer(g)?C.queryRenderedFeatures(K.point,{layers:[g]}):[];Z.length&&(K.features=Z,b.call(C,K),delete K.features)},w)}},p.prototype.on=function(d,g,b){if(b===void 0)return l.prototype.on.call(this,d,g);var w=this._createDelegatedListener(d,g,b);for(var C in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[d]=this._delegatedListeners[d]||[],this._delegatedListeners[d].push(w),w.delegates)this.on(C,w.delegates[C]);return this},p.prototype.once=function(d,g,b){if(b===void 0)return l.prototype.once.call(this,d,g);var w=this._createDelegatedListener(d,g,b);for(var C in w.delegates)this.once(C,w.delegates[C]);return this},p.prototype.off=function(d,g,b){var w=this;return b===void 0?l.prototype.off.call(this,d,g):(this._delegatedListeners&&this._delegatedListeners[d]&&function(C){for(var M=C[d],B=0;B<M.length;B++){var K=M[B];if(K.layer===g&&K.listener===b){for(var Z in K.delegates)w.off(Z,K.delegates[Z]);return M.splice(B,1),w}}}(this._delegatedListeners),this)},p.prototype.queryRenderedFeatures=function(d,g){if(!this.style)return[];var b;if(g!==void 0||d===void 0||d instanceof o.Point||Array.isArray(d)||(g=d,d=void 0),g=g||{},(d=d||[[0,0],[this.transform.width,this.transform.height]])instanceof o.Point||typeof d[0]=="number")b=[o.Point.convert(d)];else{var w=o.Point.convert(d[0]),C=o.Point.convert(d[1]);b=[w,new o.Point(C.x,w.y),C,new o.Point(w.x,C.y),w]}return this.style.queryRenderedFeatures(b,g,this.transform)},p.prototype.querySourceFeatures=function(d,g){return this.style.querySourceFeatures(d,g)},p.prototype.setStyle=function(d,g){return(g=o.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},g)).diff!==!1&&g.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&d?(this._diffStyle(d,g),this):(this._localIdeographFontFamily=g.localIdeographFontFamily,this._updateStyle(d,g))},p.prototype._getUIString=function(d){var g=this._locale[d];if(g==null)throw new Error("Missing UI string '"+d+"'");return g},p.prototype._updateStyle=function(d,g){return this.style&&(this.style.setEventedParent(null),this.style._remove()),d?(this.style=new Gi(this,g||{}),this.style.setEventedParent(this,{style:this.style}),typeof d=="string"?this.style.loadURL(d):this.style.loadJSON(d),this):(delete this.style,this)},p.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Gi(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},p.prototype._diffStyle=function(d,g){var b=this;if(typeof d=="string"){var w=this._requestManager.normalizeStyleURL(d),C=this._requestManager.transformRequest(w,o.ResourceType.Style);o.getJSON(C,function(M,B){M?b.fire(new o.ErrorEvent(M)):B&&b._updateDiff(B,g)})}else typeof d=="object"&&this._updateDiff(d,g)},p.prototype._updateDiff=function(d,g){try{this.style.setState(d)&&this._update(!0)}catch(b){o.warnOnce("Unable to perform style diff: "+(b.message||b.error||b)+".  Rebuilding the style from scratch."),this._updateStyle(d,g)}},p.prototype.getStyle=function(){if(this.style)return this.style.serialize()},p.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():o.warnOnce("There is no style added to the map.")},p.prototype.addSource=function(d,g){return this._lazyInitEmptyStyle(),this.style.addSource(d,g),this._update(!0)},p.prototype.isSourceLoaded=function(d){var g=this.style&&this.style.sourceCaches[d];if(g!==void 0)return g.loaded();this.fire(new o.ErrorEvent(new Error("There is no source with ID '"+d+"'")))},p.prototype.areTilesLoaded=function(){var d=this.style&&this.style.sourceCaches;for(var g in d){var b=d[g]._tiles;for(var w in b){var C=b[w];if(C.state!=="loaded"&&C.state!=="errored")return!1}}return!0},p.prototype.addSourceType=function(d,g,b){return this._lazyInitEmptyStyle(),this.style.addSourceType(d,g,b)},p.prototype.removeSource=function(d){return this.style.removeSource(d),this._update(!0)},p.prototype.getSource=function(d){return this.style.getSource(d)},p.prototype.addImage=function(d,g,b){b===void 0&&(b={});var w=b.pixelRatio;w===void 0&&(w=1);var C=b.sdf;C===void 0&&(C=!1);var M=b.stretchX,B=b.stretchY,K=b.content;if(this._lazyInitEmptyStyle(),g instanceof Mh||Dr&&g instanceof Dr){var Z=o.browser.getImageData(g);this.style.addImage(d,{data:new o.RGBAImage({width:Z.width,height:Z.height},Z.data),pixelRatio:w,stretchX:M,stretchY:B,content:K,sdf:C,version:0})}else{if(g.width===void 0||g.height===void 0)return this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var Y=g;this.style.addImage(d,{data:new o.RGBAImage({width:g.width,height:g.height},new Uint8Array(g.data)),pixelRatio:w,stretchX:M,stretchY:B,content:K,sdf:C,version:0,userImage:Y}),Y.onAdd&&Y.onAdd(this,d)}},p.prototype.updateImage=function(d,g){var b=this.style.getImage(d);if(!b)return this.fire(new o.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var w=g instanceof Mh||Dr&&g instanceof Dr?o.browser.getImageData(g):g,C=w.width,M=w.height,B=w.data;return C===void 0||M===void 0?this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):C!==b.data.width||M!==b.data.height?this.fire(new o.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(b.data.replace(B,!(g instanceof Mh||Dr&&g instanceof Dr)),void this.style.updateImage(d,b))},p.prototype.hasImage=function(d){return d?!!this.style.getImage(d):(this.fire(new o.ErrorEvent(new Error("Missing required image id"))),!1)},p.prototype.removeImage=function(d){this.style.removeImage(d)},p.prototype.loadImage=function(d,g){o.getImage(this._requestManager.transformRequest(d,o.ResourceType.Image),g)},p.prototype.listImages=function(){return this.style.listImages()},p.prototype.addLayer=function(d,g){return this._lazyInitEmptyStyle(),this.style.addLayer(d,g),this._update(!0)},p.prototype.moveLayer=function(d,g){return this.style.moveLayer(d,g),this._update(!0)},p.prototype.removeLayer=function(d){return this.style.removeLayer(d),this._update(!0)},p.prototype.getLayer=function(d){return this.style.getLayer(d)},p.prototype.setLayerZoomRange=function(d,g,b){return this.style.setLayerZoomRange(d,g,b),this._update(!0)},p.prototype.setFilter=function(d,g,b){return b===void 0&&(b={}),this.style.setFilter(d,g,b),this._update(!0)},p.prototype.getFilter=function(d){return this.style.getFilter(d)},p.prototype.setPaintProperty=function(d,g,b,w){return w===void 0&&(w={}),this.style.setPaintProperty(d,g,b,w),this._update(!0)},p.prototype.getPaintProperty=function(d,g){return this.style.getPaintProperty(d,g)},p.prototype.setLayoutProperty=function(d,g,b,w){return w===void 0&&(w={}),this.style.setLayoutProperty(d,g,b,w),this._update(!0)},p.prototype.getLayoutProperty=function(d,g){return this.style.getLayoutProperty(d,g)},p.prototype.setLight=function(d,g){return g===void 0&&(g={}),this._lazyInitEmptyStyle(),this.style.setLight(d,g),this._update(!0)},p.prototype.getLight=function(){return this.style.getLight()},p.prototype.setFeatureState=function(d,g){return this.style.setFeatureState(d,g),this._update()},p.prototype.removeFeatureState=function(d,g){return this.style.removeFeatureState(d,g),this._update()},p.prototype.getFeatureState=function(d){return this.style.getFeatureState(d)},p.prototype.getContainer=function(){return this._container},p.prototype.getCanvasContainer=function(){return this._canvasContainer},p.prototype.getCanvas=function(){return this._canvas},p.prototype._containerDimensions=function(){var d=0,g=0;return this._container&&(d=this._container.clientWidth||400,g=this._container.clientHeight||300),[d,g]},p.prototype._detectMissingCSS=function(){o.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&o.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},p.prototype._setupContainer=function(){var d=this._container;d.classList.add("mapboxgl-map"),(this._missingCSSCanary=x.create("div","mapboxgl-canary",d)).style.visibility="hidden",this._detectMissingCSS();var g=this._canvasContainer=x.create("div","mapboxgl-canvas-container",d);this._interactive&&g.classList.add("mapboxgl-interactive"),this._canvas=x.create("canvas","mapboxgl-canvas",g),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var b=this._containerDimensions();this._resizeCanvas(b[0],b[1]);var w=this._controlContainer=x.create("div","mapboxgl-control-container",d),C=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(M){C[M]=x.create("div","mapboxgl-ctrl-"+M,w)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},p.prototype._resizeCanvas=function(d,g){var b=o.browser.devicePixelRatio||1;this._canvas.width=b*d,this._canvas.height=b*g,this._canvas.style.width=d+"px",this._canvas.style.height=g+"px"},p.prototype._setupPainter=function(){var d=o.extend({},v.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),g=this._canvas.getContext("webgl",d)||this._canvas.getContext("experimental-webgl",d);g?(this.painter=new sn(g,this.transform),o.webpSupported.testSupport(g)):this.fire(new o.ErrorEvent(new Error("Failed to initialize WebGL")))},p.prototype._contextLost=function(d){d.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new o.Event("webglcontextlost",{originalEvent:d}))},p.prototype._contextRestored=function(d){this._setupPainter(),this.resize(),this._update(),this.fire(new o.Event("webglcontextrestored",{originalEvent:d}))},p.prototype._onMapScroll=function(d){if(d.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},p.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},p.prototype._update=function(d){return this.style?(this._styleDirty=this._styleDirty||d,this._sourcesDirty=!0,this.triggerRepaint(),this):this},p.prototype._requestRenderFrame=function(d){return this._update(),this._renderTaskQueue.add(d)},p.prototype._cancelRenderFrame=function(d){this._renderTaskQueue.remove(d)},p.prototype._render=function(d){var g,b=this,w=0,C=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(g=C.createQueryEXT(),C.beginQueryEXT(C.TIME_ELAPSED_EXT,g),w=o.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(d),!this._removed){var M=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var B=this.transform.zoom,K=o.browser.now();this.style.zoomHistory.update(B,K);var Z=new o.EvaluationParameters(B,{now:K,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Y=Z.crossFadingFactor();Y===1&&Y===this._crossFadingFactor||(M=!0,this._crossFadingFactor=Y),this.style.update(Z)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new o.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new o.Event("load"))),this.style&&(this.style.hasTransitions()||M)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var ce=o.browser.now()-w;C.endQueryEXT(C.TIME_ELAPSED_EXT,g),setTimeout(function(){var oe=C.getQueryObjectEXT(g,C.QUERY_RESULT_EXT)/1e6;C.deleteQueryEXT(g),b.fire(new o.Event("gpu-timing-frame",{cpuTime:ce,gpuTime:oe}))},50)}if(this.listens("gpu-timing-layer")){var ue=this.painter.collectGpuTimers();setTimeout(function(){var oe=b.painter.queryGpuTimers(ue);b.fire(new o.Event("gpu-timing-layer",{layerTimes:oe}))},50)}var xe=this._sourcesDirty||this._styleDirty||this._placementDirty;return xe||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.Event("idle")),!this._loaded||this._fullyLoaded||xe||(this._fullyLoaded=!0),this}},p.prototype.remove=function(){this._hash&&this._hash.remove();for(var d=0,g=this._controls;d<g.length;d+=1)g[d].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),o.window!==void 0&&(o.window.removeEventListener("resize",this._onWindowResize,!1),o.window.removeEventListener("orientationchange",this._onWindowResize,!1),o.window.removeEventListener("online",this._onWindowOnline,!1));var b=this.painter.context.gl.getExtension("WEBGL_lose_context");b&&b.loseContext(),Fs(this._canvasContainer),Fs(this._controlContainer),Fs(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new o.Event("remove"))},p.prototype.triggerRepaint=function(){var d=this;this.style&&!this._frame&&(this._frame=o.browser.frame(function(g){d._frame=null,d._render(g)}))},p.prototype._onWindowOnline=function(){this._update()},p.prototype._onWindowResize=function(d){this._trackResize&&this.resize({originalEvent:d})._update()},c.showTileBoundaries.get=function(){return!!this._showTileBoundaries},c.showTileBoundaries.set=function(d){this._showTileBoundaries!==d&&(this._showTileBoundaries=d,this._update())},c.showPadding.get=function(){return!!this._showPadding},c.showPadding.set=function(d){this._showPadding!==d&&(this._showPadding=d,this._update())},c.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},c.showCollisionBoxes.set=function(d){this._showCollisionBoxes!==d&&(this._showCollisionBoxes=d,d?this.style._generateCollisionBoxes():this._update())},c.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},c.showOverdrawInspector.set=function(d){this._showOverdrawInspector!==d&&(this._showOverdrawInspector=d,this._update())},c.repaint.get=function(){return!!this._repaint},c.repaint.set=function(d){this._repaint!==d&&(this._repaint=d,this.triggerRepaint())},c.vertices.get=function(){return!!this._vertices},c.vertices.set=function(d){this._vertices=d,this._update()},p.prototype._setCacheLimits=function(d,g){o.setCacheLimits(d,g)},c.version.get=function(){return o.version},Object.defineProperties(p.prototype,c),p}(Cc);function Fs(l){l.parentNode&&l.parentNode.removeChild(l)}var zh={showCompass:!0,showZoom:!0,visualizePitch:!1},Ea=function(l){var p=this;this.options=o.extend({},zh,l),this._container=x.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(c){return c.preventDefault()}),this.options.showZoom&&(o.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(c){return p._map.zoomIn({},{originalEvent:c})}),x.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(c){return p._map.zoomOut({},{originalEvent:c})}),x.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(o.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(c){p.options.visualizePitch?p._map.resetNorthPitch({},{originalEvent:c}):p._map.resetNorth({},{originalEvent:c})}),this._compassIcon=x.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Ea.prototype._updateZoomButtons=function(){var l=this._map.getZoom(),p=l===this._map.getMaxZoom(),c=l===this._map.getMinZoom();this._zoomInButton.disabled=p,this._zoomOutButton.disabled=c,this._zoomInButton.setAttribute("aria-disabled",p.toString()),this._zoomOutButton.setAttribute("aria-disabled",c.toString())},Ea.prototype._rotateCompassArrow=function(){var l=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=l},Ea.prototype.onAdd=function(l){return this._map=l,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Yi(this._map,this._compass,this.options.visualizePitch)),this._container},Ea.prototype.onRemove=function(){x.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Ea.prototype._createButton=function(l,p){var c=x.create("button",l,this._container);return c.type="button",c.addEventListener("click",p),c},Ea.prototype._setButtonTitle=function(l,p){var c=this._map._getUIString("NavigationControl."+p);l.title=c,l.setAttribute("aria-label",c)};var Yi=function(l,p,c){c===void 0&&(c=!1),this._clickTolerance=10,this.element=p,this.mouseRotate=new wc({clickTolerance:l.dragRotate._mouseRotate._clickTolerance}),this.map=l,c&&(this.mousePitch=new Ih({clickTolerance:l.dragRotate._mousePitch._clickTolerance})),o.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),x.addEventListener(p,"mousedown",this.mousedown),x.addEventListener(p,"touchstart",this.touchstart,{passive:!1}),x.addEventListener(p,"touchmove",this.touchmove),x.addEventListener(p,"touchend",this.touchend),x.addEventListener(p,"touchcancel",this.reset)};function bl(l,p,c){if(l=new o.LngLat(l.lng,l.lat),p){var d=new o.LngLat(l.lng-360,l.lat),g=new o.LngLat(l.lng+360,l.lat),b=c.locationPoint(l).distSqr(p);c.locationPoint(d).distSqr(p)<b?l=d:c.locationPoint(g).distSqr(p)<b&&(l=g)}for(;Math.abs(l.lng-c.center.lng)>180;){var w=c.locationPoint(l);if(w.x>=0&&w.y>=0&&w.x<=c.width&&w.y<=c.height)break;l.lng>c.center.lng?l.lng-=360:l.lng+=360}return l}Yi.prototype.down=function(l,p){this.mouseRotate.mousedown(l,p),this.mousePitch&&this.mousePitch.mousedown(l,p),x.disableDrag()},Yi.prototype.move=function(l,p){var c=this.map,d=this.mouseRotate.mousemoveWindow(l,p);if(d&&d.bearingDelta&&c.setBearing(c.getBearing()+d.bearingDelta),this.mousePitch){var g=this.mousePitch.mousemoveWindow(l,p);g&&g.pitchDelta&&c.setPitch(c.getPitch()+g.pitchDelta)}},Yi.prototype.off=function(){var l=this.element;x.removeEventListener(l,"mousedown",this.mousedown),x.removeEventListener(l,"touchstart",this.touchstart,{passive:!1}),x.removeEventListener(l,"touchmove",this.touchmove),x.removeEventListener(l,"touchend",this.touchend),x.removeEventListener(l,"touchcancel",this.reset),this.offTemp()},Yi.prototype.offTemp=function(){x.enableDrag(),x.removeEventListener(o.window,"mousemove",this.mousemove),x.removeEventListener(o.window,"mouseup",this.mouseup)},Yi.prototype.mousedown=function(l){this.down(o.extend({},l,{ctrlKey:!0,preventDefault:function(){return l.preventDefault()}}),x.mousePos(this.element,l)),x.addEventListener(o.window,"mousemove",this.mousemove),x.addEventListener(o.window,"mouseup",this.mouseup)},Yi.prototype.mousemove=function(l){this.move(l,x.mousePos(this.element,l))},Yi.prototype.mouseup=function(l){this.mouseRotate.mouseupWindow(l),this.mousePitch&&this.mousePitch.mouseupWindow(l),this.offTemp()},Yi.prototype.touchstart=function(l){l.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=x.touchPos(this.element,l.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return l.preventDefault()}},this._startPos))},Yi.prototype.touchmove=function(l){l.targetTouches.length!==1?this.reset():(this._lastPos=x.touchPos(this.element,l.targetTouches)[0],this.move({preventDefault:function(){return l.preventDefault()}},this._lastPos))},Yi.prototype.touchend=function(l){l.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Yi.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var sa={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Tc(l,p,c){var d=l.classList;for(var g in sa)d.remove("mapboxgl-"+c+"-anchor-"+g);d.add("mapboxgl-"+c+"-anchor-"+p)}var wl,Su=function(l){function p(c,d){if(l.call(this),(c instanceof o.window.HTMLElement||d)&&(c=o.extend({element:c},d)),o.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=c&&c.anchor||"center",this._color=c&&c.color||"#3FB1CE",this._scale=c&&c.scale||1,this._draggable=c&&c.draggable||!1,this._clickTolerance=c&&c.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=c&&c.rotation||0,this._rotationAlignment=c&&c.rotationAlignment||"auto",this._pitchAlignment=c&&c.pitchAlignment&&c.pitchAlignment!=="auto"?c.pitchAlignment:this._rotationAlignment,c&&c.element)this._element=c.element,this._offset=o.Point.convert(c&&c.offset||[0,0]);else{this._defaultMarker=!0,this._element=x.create("div"),this._element.setAttribute("aria-label","Map marker");var g=x.createNS("http://www.w3.org/2000/svg","svg");g.setAttributeNS(null,"display","block"),g.setAttributeNS(null,"height","41px"),g.setAttributeNS(null,"width","27px"),g.setAttributeNS(null,"viewBox","0 0 27 41");var b=x.createNS("http://www.w3.org/2000/svg","g");b.setAttributeNS(null,"stroke","none"),b.setAttributeNS(null,"stroke-width","1"),b.setAttributeNS(null,"fill","none"),b.setAttributeNS(null,"fill-rule","evenodd");var w=x.createNS("http://www.w3.org/2000/svg","g");w.setAttributeNS(null,"fill-rule","nonzero");var C=x.createNS("http://www.w3.org/2000/svg","g");C.setAttributeNS(null,"transform","translate(3.0, 29.0)"),C.setAttributeNS(null,"fill","#000000");for(var M=0,B=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];M<B.length;M+=1){var K=B[M],Z=x.createNS("http://www.w3.org/2000/svg","ellipse");Z.setAttributeNS(null,"opacity","0.04"),Z.setAttributeNS(null,"cx","10.5"),Z.setAttributeNS(null,"cy","5.80029008"),Z.setAttributeNS(null,"rx",K.rx),Z.setAttributeNS(null,"ry",K.ry),C.appendChild(Z)}var Y=x.createNS("http://www.w3.org/2000/svg","g");Y.setAttributeNS(null,"fill",this._color);var ce=x.createNS("http://www.w3.org/2000/svg","path");ce.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Y.appendChild(ce);var ue=x.createNS("http://www.w3.org/2000/svg","g");ue.setAttributeNS(null,"opacity","0.25"),ue.setAttributeNS(null,"fill","#000000");var xe=x.createNS("http://www.w3.org/2000/svg","path");xe.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),ue.appendChild(xe);var oe=x.createNS("http://www.w3.org/2000/svg","g");oe.setAttributeNS(null,"transform","translate(6.0, 7.0)"),oe.setAttributeNS(null,"fill","#FFFFFF");var ve=x.createNS("http://www.w3.org/2000/svg","g");ve.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Se=x.createNS("http://www.w3.org/2000/svg","circle");Se.setAttributeNS(null,"fill","#000000"),Se.setAttributeNS(null,"opacity","0.25"),Se.setAttributeNS(null,"cx","5.5"),Se.setAttributeNS(null,"cy","5.5"),Se.setAttributeNS(null,"r","5.4999962");var Pe=x.createNS("http://www.w3.org/2000/svg","circle");Pe.setAttributeNS(null,"fill","#FFFFFF"),Pe.setAttributeNS(null,"cx","5.5"),Pe.setAttributeNS(null,"cy","5.5"),Pe.setAttributeNS(null,"r","5.4999962"),ve.appendChild(Se),ve.appendChild(Pe),w.appendChild(C),w.appendChild(Y),w.appendChild(ue),w.appendChild(oe),w.appendChild(ve),g.appendChild(w),g.setAttributeNS(null,"height",41*this._scale+"px"),g.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(g),this._offset=o.Point.convert(c&&c.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Fe){Fe.preventDefault()}),this._element.addEventListener("mousedown",function(Fe){Fe.preventDefault()}),Tc(this._element,this._anchor,"marker"),this._popup=null}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.addTo=function(c){return this.remove(),this._map=c,c.getCanvasContainer().appendChild(this._element),c.on("move",this._update),c.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},p.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),x.remove(this._element),this._popup&&this._popup.remove(),this},p.prototype.getLngLat=function(){return this._lngLat},p.prototype.setLngLat=function(c){return this._lngLat=o.LngLat.convert(c),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},p.prototype.getElement=function(){return this._element},p.prototype.setPopup=function(c){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),c){if(!("offset"in c.options)){var d=Math.sqrt(Math.pow(13.5,2)/2);c.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[d,-1*(24.6+d)],"bottom-right":[-d,-1*(24.6+d)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=c,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},p.prototype._onKeyPress=function(c){var d=c.code,g=c.charCode||c.keyCode;d!=="Space"&&d!=="Enter"&&g!==32&&g!==13||this.togglePopup()},p.prototype._onMapClick=function(c){var d=c.originalEvent.target,g=this._element;this._popup&&(d===g||g.contains(d))&&this.togglePopup()},p.prototype.getPopup=function(){return this._popup},p.prototype.togglePopup=function(){var c=this._popup;return c?(c.isOpen()?c.remove():c.addTo(this._map),this):this},p.prototype._update=function(c){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=bl(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var d="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?d="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(d="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var g="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?g="rotateX(0deg)":this._pitchAlignment==="map"&&(g="rotateX("+this._map.getPitch()+"deg)"),c&&c.type!=="moveend"||(this._pos=this._pos.round()),x.setTransform(this._element,sa[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+g+" "+d)}},p.prototype.getOffset=function(){return this._offset},p.prototype.setOffset=function(c){return this._offset=o.Point.convert(c),this._update(),this},p.prototype._onMove=function(c){if(!this._isDragging){var d=this._clickTolerance||this._map._clickTolerance;this._isDragging=c.point.dist(this._pointerdownPos)>=d}this._isDragging&&(this._pos=c.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.Event("dragstart"))),this.fire(new o.Event("drag")))},p.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.Event("dragend")),this._state="inactive"},p.prototype._addDragHandler=function(c){this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(this._pos).add(this._offset),this._pointerdownPos=c.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},p.prototype.setDraggable=function(c){return this._draggable=!!c,this._map&&(c?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},p.prototype.isDraggable=function(){return this._draggable},p.prototype.setRotation=function(c){return this._rotation=c||0,this._update(),this},p.prototype.getRotation=function(){return this._rotation},p.prototype.setRotationAlignment=function(c){return this._rotationAlignment=c||"auto",this._update(),this},p.prototype.getRotationAlignment=function(){return this._rotationAlignment},p.prototype.setPitchAlignment=function(c){return this._pitchAlignment=c&&c!=="auto"?c:this._rotationAlignment,this._update(),this},p.prototype.getPitchAlignment=function(){return this._pitchAlignment},p}(o.Evented),Rh={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Sl=0,js=!1,Lh=function(l){function p(c){l.call(this),this.options=o.extend({},Rh,c),o.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.onAdd=function(c){var d;return this._map=c,this._container=x.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),d=this._setupUI,wl!==void 0?d(wl):o.window.navigator.permissions!==void 0?o.window.navigator.permissions.query({name:"geolocation"}).then(function(g){d(wl=g.state!=="denied")}):d(wl=!!o.window.navigator.geolocation),this._container},p.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(o.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),x.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Sl=0,js=!1},p.prototype._isOutOfMapMaxBounds=function(c){var d=this._map.getMaxBounds(),g=c.coords;return d&&(g.longitude<d.getWest()||g.longitude>d.getEast()||g.latitude<d.getSouth()||g.latitude>d.getNorth())},p.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},p.prototype._onSuccess=function(c){if(this._map){if(this._isOutOfMapMaxBounds(c))return this._setErrorState(),this.fire(new o.Event("outofmaxbounds",c)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=c,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(c),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(c),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("geolocate",c)),this._finish()}},p.prototype._updateCamera=function(c){var d=new o.LngLat(c.coords.longitude,c.coords.latitude),g=c.coords.accuracy,b=this._map.getBearing(),w=o.extend({bearing:b},this.options.fitBoundsOptions);this._map.fitBounds(d.toBounds(g),w,{geolocateSource:!0})},p.prototype._updateMarker=function(c){if(c){var d=new o.LngLat(c.coords.longitude,c.coords.latitude);this._accuracyCircleMarker.setLngLat(d).addTo(this._map),this._userLocationDotMarker.setLngLat(d).addTo(this._map),this._accuracy=c.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},p.prototype._updateCircleRadius=function(){var c=this._map._container.clientHeight/2,d=this._map.unproject([0,c]),g=this._map.unproject([1,c]),b=d.distanceTo(g),w=Math.ceil(2*this._accuracy/b);this._circleElement.style.width=w+"px",this._circleElement.style.height=w+"px"},p.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},p.prototype._onError=function(c){if(this._map){if(this.options.trackUserLocation)if(c.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(c.code===3&&js)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("error",c)),this._finish()}},p.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},p.prototype._setupUI=function(c){var d=this;if(this._container.addEventListener("contextmenu",function(w){return w.preventDefault()}),this._geolocateButton=x.create("button","mapboxgl-ctrl-geolocate",this._container),x.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",c===!1){o.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var g=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=g,this._geolocateButton.setAttribute("aria-label",g)}else{var b=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=b,this._geolocateButton.setAttribute("aria-label",b)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=x.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Su(this._dotElement),this._circleElement=x.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Su({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(w){w.geolocateSource||d._watchState!=="ACTIVE_LOCK"||w.originalEvent&&w.originalEvent.type==="resize"||(d._watchState="BACKGROUND",d._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),d._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),d.fire(new o.Event("trackuserlocationend")))})},p.prototype.trigger=function(){if(!this._setup)return o.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Sl--,js=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new o.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var c;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Sl>1?(c={maximumAge:6e5,timeout:0},js=!0):(c=this.options.positionOptions,js=!1),this._geolocationWatchID=o.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,c)}}else o.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},p.prototype._clearWatch=function(){o.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},p}(o.Evented),Ja={maxWidth:100,unit:"metric"},Qa=function(l){this.options=o.extend({},Ja,l),o.bindAll(["_onMove","setUnit"],this)};function Ic(l,p,c){var d=c&&c.maxWidth||100,g=l._container.clientHeight/2,b=l.unproject([0,g]),w=l.unproject([d,g]),C=b.distanceTo(w);if(c&&c.unit==="imperial"){var M=3.2808*C;M>5280?es(p,d,M/5280,l._getUIString("ScaleControl.Miles")):es(p,d,M,l._getUIString("ScaleControl.Feet"))}else c&&c.unit==="nautical"?es(p,d,C/1852,l._getUIString("ScaleControl.NauticalMiles")):C>=1e3?es(p,d,C/1e3,l._getUIString("ScaleControl.Kilometers")):es(p,d,C,l._getUIString("ScaleControl.Meters"))}function es(l,p,c,d){var g,b,w,C=(g=c,(b=Math.pow(10,(""+Math.floor(g)).length-1))*(w=(w=g/b)>=10?10:w>=5?5:w>=3?3:w>=2?2:w>=1?1:function(M){var B=Math.pow(10,Math.ceil(-Math.log(M)/Math.LN10));return Math.round(M*B)/B}(w)));l.style.width=p*(C/c)+"px",l.innerHTML=C+"&nbsp;"+d}Qa.prototype.getDefaultPosition=function(){return"bottom-left"},Qa.prototype._onMove=function(){Ic(this._map,this._container,this.options)},Qa.prototype.onAdd=function(l){return this._map=l,this._container=x.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",l.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Qa.prototype.onRemove=function(){x.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Qa.prototype.setUnit=function(l){this.options.unit=l,Ic(this._map,this._container,this.options)};var wo=function(l){this._fullscreen=!1,l&&l.container&&(l.container instanceof o.window.HTMLElement?this._container=l.container:o.warnOnce("Full screen control 'container' must be a DOM element.")),o.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in o.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in o.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in o.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in o.window.document&&(this._fullscreenchange="MSFullscreenChange")};wo.prototype.onAdd=function(l){return this._map=l,this._container||(this._container=this._map.getContainer()),this._controlContainer=x.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",o.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},wo.prototype.onRemove=function(){x.remove(this._controlContainer),this._map=null,o.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},wo.prototype._checkFullscreenSupport=function(){return!!(o.window.document.fullscreenEnabled||o.window.document.mozFullScreenEnabled||o.window.document.msFullscreenEnabled||o.window.document.webkitFullscreenEnabled)},wo.prototype._setupUI=function(){var l=this._fullscreenButton=x.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);x.create("span","mapboxgl-ctrl-icon",l).setAttribute("aria-hidden",!0),l.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),o.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},wo.prototype._updateTitle=function(){var l=this._getTitle();this._fullscreenButton.setAttribute("aria-label",l),this._fullscreenButton.title=l},wo.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},wo.prototype._isFullscreen=function(){return this._fullscreen},wo.prototype._changeIcon=function(){(o.window.document.fullscreenElement||o.window.document.mozFullScreenElement||o.window.document.webkitFullscreenElement||o.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},wo.prototype._onClickFullscreen=function(){this._isFullscreen()?o.window.document.exitFullscreen?o.window.document.exitFullscreen():o.window.document.mozCancelFullScreen?o.window.document.mozCancelFullScreen():o.window.document.msExitFullscreen?o.window.document.msExitFullscreen():o.window.document.webkitCancelFullScreen&&o.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Dh={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Eu=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),Oh=function(l){function p(c){l.call(this),this.options=o.extend(Object.create(Dh),c),o.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.addTo=function(c){return this._map&&this.remove(),this._map=c,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new o.Event("open")),this},p.prototype.isOpen=function(){return!!this._map},p.prototype.remove=function(){return this._content&&x.remove(this._content),this._container&&(x.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new o.Event("close")),this},p.prototype.getLngLat=function(){return this._lngLat},p.prototype.setLngLat=function(c){return this._lngLat=o.LngLat.convert(c),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},p.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},p.prototype.getElement=function(){return this._container},p.prototype.setText=function(c){return this.setDOMContent(o.window.document.createTextNode(c))},p.prototype.setHTML=function(c){var d,g=o.window.document.createDocumentFragment(),b=o.window.document.createElement("body");for(b.innerHTML=c;d=b.firstChild;)g.appendChild(d);return this.setDOMContent(g)},p.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},p.prototype.setMaxWidth=function(c){return this.options.maxWidth=c,this._update(),this},p.prototype.setDOMContent=function(c){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=x.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(c),this._createCloseButton(),this._update(),this._focusFirstElement(),this},p.prototype.addClassName=function(c){this._container&&this._container.classList.add(c)},p.prototype.removeClassName=function(c){this._container&&this._container.classList.remove(c)},p.prototype.setOffset=function(c){return this.options.offset=c,this._update(),this},p.prototype.toggleClassName=function(c){if(this._container)return this._container.classList.toggle(c)},p.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=x.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},p.prototype._onMouseUp=function(c){this._update(c.point)},p.prototype._onMouseMove=function(c){this._update(c.point)},p.prototype._onDrag=function(c){this._update(c.point)},p.prototype._update=function(c){var d=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=x.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=x.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Z){return d._container.classList.add(Z)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=bl(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||c)){var g=this._pos=this._trackPointer&&c?c:this._map.project(this._lngLat),b=this.options.anchor,w=function Z(Y){if(Y){if(typeof Y=="number"){var ce=Math.round(Math.sqrt(.5*Math.pow(Y,2)));return{center:new o.Point(0,0),top:new o.Point(0,Y),"top-left":new o.Point(ce,ce),"top-right":new o.Point(-ce,ce),bottom:new o.Point(0,-Y),"bottom-left":new o.Point(ce,-ce),"bottom-right":new o.Point(-ce,-ce),left:new o.Point(Y,0),right:new o.Point(-Y,0)}}if(Y instanceof o.Point||Array.isArray(Y)){var ue=o.Point.convert(Y);return{center:ue,top:ue,"top-left":ue,"top-right":ue,bottom:ue,"bottom-left":ue,"bottom-right":ue,left:ue,right:ue}}return{center:o.Point.convert(Y.center||[0,0]),top:o.Point.convert(Y.top||[0,0]),"top-left":o.Point.convert(Y["top-left"]||[0,0]),"top-right":o.Point.convert(Y["top-right"]||[0,0]),bottom:o.Point.convert(Y.bottom||[0,0]),"bottom-left":o.Point.convert(Y["bottom-left"]||[0,0]),"bottom-right":o.Point.convert(Y["bottom-right"]||[0,0]),left:o.Point.convert(Y.left||[0,0]),right:o.Point.convert(Y.right||[0,0])}}return Z(new o.Point(0,0))}(this.options.offset);if(!b){var C,M=this._container.offsetWidth,B=this._container.offsetHeight;C=g.y+w.bottom.y<B?["top"]:g.y>this._map.transform.height-B?["bottom"]:[],g.x<M/2?C.push("left"):g.x>this._map.transform.width-M/2&&C.push("right"),b=C.length===0?"bottom":C.join("-")}var K=g.add(w[b]).round();x.setTransform(this._container,sa[b]+" translate("+K.x+"px,"+K.y+"px)"),Tc(this._container,b,"popup")}},p.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var c=this._container.querySelector(Eu);c&&c.focus()}},p.prototype._onClose=function(){this.remove()},p}(o.Evented),Pc={version:o.version,supported:v,setRTLTextPlugin:o.setRTLTextPlugin,getRTLTextPluginStatus:o.getRTLTextPluginStatus,Map:lm,NavigationControl:Ea,GeolocateControl:Lh,AttributionControl:Ci,ScaleControl:Qa,FullscreenControl:wo,Popup:Oh,Marker:Su,Style:Gi,LngLat:o.LngLat,LngLatBounds:o.LngLatBounds,Point:o.Point,MercatorCoordinate:o.MercatorCoordinate,Evented:o.Evented,config:o.config,prewarm:function(){Ve().acquire(Ue)},clearPrewarmedResources:function(){var l=vt;l&&(l.isPreloaded()&&l.numActive()===1?(l.release(Ue),vt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return o.config.ACCESS_TOKEN},set accessToken(l){o.config.ACCESS_TOKEN=l},get baseApiUrl(){return o.config.API_URL},set baseApiUrl(l){o.config.API_URL=l},get workerCount(){return Xe.workerCount},set workerCount(l){Xe.workerCount=l},get maxParallelImageRequests(){return o.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(l){o.config.MAX_PARALLEL_IMAGE_REQUESTS=l},clearStorage:function(l){o.clearTileCache(l)},workerUrl:""};return Pc}),u})})(gI);var fL=gI.exports;const Xs=Rg(fL);var sh=yL,mL=Object.prototype.hasOwnProperty;function yL(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var a in n)mL.call(n,a)&&(e[a]=n[a])}return e}var vI={exports:{}};(function(e,t){(function(){var n={};e.exports=n,n.simpleFilter=function(a,u){return u.filter(function(f){return n.test(a,f)})},n.test=function(a,u){return n.match(a,u)!==null},n.match=function(a,u,f){f=f||{};var o=0,v=[],x=u.length,E=0,T=0,I=f.pre||"",P=f.post||"",V=f.caseSensitive&&u||u.toLowerCase(),N;a=f.caseSensitive&&a||a.toLowerCase();for(var q=0;q<x;q++)N=u[q],V[q]===a[o]?(N=I+N+P,o+=1,T+=1+T):T=0,E+=T,v[v.length]=N;return o===a.length?(E=V===a?1/0:E,{rendered:v.join(""),score:E}):null},n.filter=function(a,u,f){return!u||u.length===0?[]:typeof a!="string"?u:(f=f||{},u.reduce(function(o,v,x,E){var T=v;f.extract&&(T=f.extract(v));var I=n.match(a,T,f);return I!=null&&(o[o.length]={string:I.rendered,score:I.score,index:x,original:v}),o},[]).sort(function(o,v){var x=v.score-o.score;return x||o.index-v.index}))}})()})(vI);var gL=vI.exports,Oo=function(e){return this.component=e,this.items=[],this.active=0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,e.el.parentNode.insertBefore(this.wrapper,e.el.nextSibling),this};Oo.prototype.show=function(){this.element.style.display="block"};Oo.prototype.hide=function(){this.element.style.display="none"};Oo.prototype.add=function(e){this.items.push(e)};Oo.prototype.clear=function(){this.items=[],this.active=0};Oo.prototype.isEmpty=function(){return!this.items.length};Oo.prototype.isVisible=function(){return this.element.style.display==="block"};Oo.prototype.draw=function(){if(this.element.innerHTML="",this.items.length===0){this.hide();return}for(var e=0;e<this.items.length;e++)this.drawItem(this.items[e],this.active===e);this.show()};Oo.prototype.drawItem=function(e,t){var n=document.createElement("li"),a=document.createElement("a");t&&(n.className+=" active"),a.innerHTML=e.string,n.appendChild(a),this.element.appendChild(n),n.addEventListener("mousedown",(function(){this.selectingListItem=!0}).bind(this)),n.addEventListener("mouseup",(function(){this.handleMouseUp.call(this,e)}).bind(this))};Oo.prototype.handleMouseUp=function(e){this.selectingListItem=!1,this.component.value(e.original),this.clear(),this.draw()};Oo.prototype.move=function(e){this.active=e,this.draw()};Oo.prototype.previous=function(){this.move(this.active===0?this.items.length-1:this.active-1)};Oo.prototype.next=function(){this.move(this.active===this.items.length-1?0:this.active+1)};Oo.prototype.drawError=function(e){var t=document.createElement("li");t.innerHTML=e,this.element.appendChild(t),this.show()};var vL=Oo,_L=sh,xL=gL,bL=vL,oo=function(e,t,n){return n=n||{},this.options=_L({minLength:2,limit:5,filter:!0,hideOnBlur:!0},n),this.el=e,this.data=t||[],this.list=new bL(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",(function(a){this.handleKeyUp(a.keyCode)}).bind(this),!1),this.el.addEventListener("keydown",(function(a){this.handleKeyDown(a)}).bind(this)),this.el.addEventListener("focus",(function(){this.handleFocus()}).bind(this)),this.el.addEventListener("blur",(function(){this.handleBlur()}).bind(this)),this.el.addEventListener("paste",(function(a){this.handlePaste(a)}).bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};oo.prototype.handleKeyUp=function(e){e===40||e===38||e===27||e===13||e===9||this.handleInputChange(this.el.value)};oo.prototype.handleKeyDown=function(e){switch(e.keyCode){case 13:case 9:this.list.isEmpty()||(this.list.isVisible()&&e.preventDefault(),this.value(this.list.items[this.list.active].original),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next();break}};oo.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()};oo.prototype.handlePaste=function(e){if(e.clipboardData)this.handleInputChange(e.clipboardData.getData("Text"));else{var t=this;setTimeout(function(){t.handleInputChange(e.target.value)},100)}};oo.prototype.handleInputChange=function(e){if(this.query=this.normalize(e),this.list.clear(),this.query.length<this.options.minLength){this.list.draw();return}this.getCandidates((function(t){for(var n=0;n<t.length&&(this.list.add(t[n]),n!==this.options.limit-1);n++);this.list.draw()}).bind(this))};oo.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1};oo.prototype.update=function(e){this.data=e,this.handleKeyUp()};oo.prototype.clear=function(){this.data=[],this.list.clear()};oo.prototype.normalize=function(e){return e=e.toLowerCase(),e};oo.prototype.match=function(e,t){return e.indexOf(t)>-1};oo.prototype.value=function(e){if(this.selected=e,this.el.value=this.getItemValue(e),document.createEvent){var t=document.createEvent("HTMLEvents");t.initEvent("change",!0,!1),this.el.dispatchEvent(t)}else this.el.fireEvent("onchange")};oo.prototype.getCandidates=function(e){var t={pre:"<strong>",post:"</strong>",extract:(function(a){return this.getItemValue(a)}).bind(this)},n;this.options.filter?(n=xL.filter(this.query,this.data,t),n=n.map((function(a){return{original:a.original,string:this.render(a.original,a.string)}}).bind(this))):n=this.data.map((function(a){var u=this.render(a);return{original:a,string:u}}).bind(this)),e(n)};oo.prototype.getItemValue=function(e){return e};oo.prototype.render=function(e,t){if(t)return t;for(var n=e.original?this.getItemValue(e.original):this.getItemValue(e),a=this.normalize(n),u=a.lastIndexOf(this.query);u>-1;){var f=u+this.query.length;n=n.slice(0,u)+"<strong>"+n.slice(u,f)+"</strong>"+n.slice(f),u=a.slice(0,u).lastIndexOf(this.query)}return n};oo.prototype.renderError=function(e){this.list.drawError(e)};var wL=oo,_I=wL,SL=_I;typeof window<"u"&&(window.Suggestions=_I);var EL="Expected a function",NS=0/0,CL="[object Symbol]",kL=/^\s+|\s+$/g,TL=/^[-+]0x[0-9a-f]+$/i,IL=/^0b[01]+$/i,PL=/^0o[0-7]+$/i,AL=parseInt,ML=typeof Da=="object"&&Da&&Da.Object===Object&&Da,zL=typeof self=="object"&&self&&self.Object===Object&&self,RL=ML||zL||Function("return this")(),LL=Object.prototype,DL=LL.toString,OL=Math.max,BL=Math.min,f_=function(){return RL.Date.now()};function NL(e,t,n){var a,u,f,o,v,x,E=0,T=!1,I=!1,P=!0;if(typeof e!="function")throw new TypeError(EL);t=FS(t)||0,Kx(n)&&(T=!!n.leading,I="maxWait"in n,f=I?OL(FS(n.maxWait)||0,t):f,P="trailing"in n?!!n.trailing:P);function V(se){var pe=a,_e=u;return a=u=void 0,E=se,o=e.apply(_e,pe),o}function N(se){return E=se,v=setTimeout(U,t),T?V(se):o}function q(se){var pe=se-x,_e=se-E,ze=t-pe;return I?BL(ze,f-_e):ze}function J(se){var pe=se-x,_e=se-E;return x===void 0||pe>=t||pe<0||I&&_e>=f}function U(){var se=f_();if(J(se))return F(se);v=setTimeout(U,q(se))}function F(se){return v=void 0,P&&a?V(se):(a=u=void 0,o)}function R(){v!==void 0&&clearTimeout(v),E=0,a=x=u=v=void 0}function O(){return v===void 0?o:F(f_())}function Q(){var se=f_(),pe=J(se);if(a=arguments,u=this,x=se,pe){if(v===void 0)return N(x);if(I)return v=setTimeout(U,t),V(x)}return v===void 0&&(v=setTimeout(U,t)),o}return Q.cancel=R,Q.flush=O,Q}function Kx(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function FL(e){return!!e&&typeof e=="object"}function jL(e){return typeof e=="symbol"||FL(e)&&DL.call(e)==CL}function FS(e){if(typeof e=="number")return e;if(jL(e))return NS;if(Kx(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Kx(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(kL,"");var n=IL.test(e);return n||PL.test(e)?AL(e.slice(2),n?2:8):TL.test(e)?NS:+e}var UL=NL,hb={exports:{}},Bp=typeof Reflect=="object"?Reflect:null,jS=Bp&&typeof Bp.apply=="function"?Bp.apply:function(t,n,a){return Function.prototype.apply.call(t,n,a)},Py;Bp&&typeof Bp.ownKeys=="function"?Py=Bp.ownKeys:Object.getOwnPropertySymbols?Py=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Py=function(t){return Object.getOwnPropertyNames(t)};function $L(e){console&&console.warn&&console.warn(e)}var xI=Number.isNaN||function(t){return t!==t};function dn(){dn.init.call(this)}hb.exports=dn;hb.exports.once=GL;dn.EventEmitter=dn;dn.prototype._events=void 0;dn.prototype._eventsCount=0;dn.prototype._maxListeners=void 0;var US=10;function Xg(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(dn,"defaultMaxListeners",{enumerable:!0,get:function(){return US},set:function(e){if(typeof e!="number"||e<0||xI(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");US=e}});dn.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};dn.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||xI(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function bI(e){return e._maxListeners===void 0?dn.defaultMaxListeners:e._maxListeners}dn.prototype.getMaxListeners=function(){return bI(this)};dn.prototype.emit=function(t){for(var n=[],a=1;a<arguments.length;a++)n.push(arguments[a]);var u=t==="error",f=this._events;if(f!==void 0)u=u&&f.error===void 0;else if(!u)return!1;if(u){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var v=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw v.context=o,v}var x=f[t];if(x===void 0)return!1;if(typeof x=="function")jS(x,this,n);else for(var E=x.length,T=kI(x,E),a=0;a<E;++a)jS(T[a],this,n);return!0};function wI(e,t,n,a){var u,f,o;if(Xg(n),f=e._events,f===void 0?(f=e._events=Object.create(null),e._eventsCount=0):(f.newListener!==void 0&&(e.emit("newListener",t,n.listener?n.listener:n),f=e._events),o=f[t]),o===void 0)o=f[t]=n,++e._eventsCount;else if(typeof o=="function"?o=f[t]=a?[n,o]:[o,n]:a?o.unshift(n):o.push(n),u=bI(e),u>0&&o.length>u&&!o.warned){o.warned=!0;var v=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");v.name="MaxListenersExceededWarning",v.emitter=e,v.type=t,v.count=o.length,$L(v)}return e}dn.prototype.addListener=function(t,n){return wI(this,t,n,!1)};dn.prototype.on=dn.prototype.addListener;dn.prototype.prependListener=function(t,n){return wI(this,t,n,!0)};function VL(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function SI(e,t,n){var a={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},u=VL.bind(a);return u.listener=n,a.wrapFn=u,u}dn.prototype.once=function(t,n){return Xg(n),this.on(t,SI(this,t,n)),this};dn.prototype.prependOnceListener=function(t,n){return Xg(n),this.prependListener(t,SI(this,t,n)),this};dn.prototype.removeListener=function(t,n){var a,u,f,o,v;if(Xg(n),u=this._events,u===void 0)return this;if(a=u[t],a===void 0)return this;if(a===n||a.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete u[t],u.removeListener&&this.emit("removeListener",t,a.listener||n));else if(typeof a!="function"){for(f=-1,o=a.length-1;o>=0;o--)if(a[o]===n||a[o].listener===n){v=a[o].listener,f=o;break}if(f<0)return this;f===0?a.shift():qL(a,f),a.length===1&&(u[t]=a[0]),u.removeListener!==void 0&&this.emit("removeListener",t,v||n)}return this};dn.prototype.off=dn.prototype.removeListener;dn.prototype.removeAllListeners=function(t){var n,a,u;if(a=this._events,a===void 0)return this;if(a.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):a[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete a[t]),this;if(arguments.length===0){var f=Object.keys(a),o;for(u=0;u<f.length;++u)o=f[u],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=a[t],typeof n=="function")this.removeListener(t,n);else if(n!==void 0)for(u=n.length-1;u>=0;u--)this.removeListener(t,n[u]);return this};function EI(e,t,n){var a=e._events;if(a===void 0)return[];var u=a[t];return u===void 0?[]:typeof u=="function"?n?[u.listener||u]:[u]:n?WL(u):kI(u,u.length)}dn.prototype.listeners=function(t){return EI(this,t,!0)};dn.prototype.rawListeners=function(t){return EI(this,t,!1)};dn.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):CI.call(e,t)};dn.prototype.listenerCount=CI;function CI(e){var t=this._events;if(t!==void 0){var n=t[e];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}dn.prototype.eventNames=function(){return this._eventsCount>0?Py(this._events):[]};function kI(e,t){for(var n=new Array(t),a=0;a<t;++a)n[a]=e[a];return n}function qL(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function WL(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function GL(e,t){return new Promise(function(n,a){function u(o){e.removeListener(t,f),a(o)}function f(){typeof e.removeListener=="function"&&e.removeListener("error",u),n([].slice.call(arguments))}TI(e,t,f,{once:!0}),t!=="error"&&HL(e,u,{once:!0})})}function HL(e,t,n){typeof e.on=="function"&&TI(e,"error",t,n)}function TI(e,t,n,a){if(typeof e.on=="function")a.once?e.once(t,n):e.on(t,n);else if(typeof e.addEventListener=="function")e.addEventListener(t,function u(f){a.once&&e.removeEventListener(t,u),n(f)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var KL=hb.exports,ZL={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}};function XL(e){var t=e.match(/\s*(.+)\s*=\s*"?([^"]+)"?/);return t?{key:t[1],value:t[2]}:null}function YL(e){var t=e.match(/<?([^>]*)>(.*)/);if(!t)return null;var n=t[1],a=t[2].split(";"),u=null,f=a.reduce(function(o,v){var x=XL(v);return x?x.key==="rel"?(u||(u=x.value),o):(o[x.key]=x.value,o):o},{});return u?{url:n,rel:u,params:f}:null}function JL(e){return e?e.split(/,\s*</).reduce(function(t,n){var a=YL(n);if(!a)return t;var u=a.rel.split(/\s+/);return u.forEach(function(f){t[f]||(t[f]={url:a.url,params:a.params})}),t},{}):{}}var QL=JL,e5=QL;function db(e,t){this.request=e,this.headers=t.headers,this.rawBody=t.body,this.statusCode=t.statusCode;try{this.body=JSON.parse(t.body||"{}")}catch{this.body=t.body}this.links=e5(this.headers.link)}db.prototype.hasNextPage=function(){return!!this.links.next};db.prototype.nextPage=function(){return this.hasNextPage()?this.request._extend({path:this.links.next.url}):null};var t5=db,Yg={API_ORIGIN:"https://api.mapbox.com",EVENT_PROGRESS_DOWNLOAD:"downloadProgress",EVENT_PROGRESS_UPLOAD:"uploadProgress",EVENT_ERROR:"error",EVENT_RESPONSE:"response",ERROR_HTTP:"HttpError",ERROR_REQUEST_ABORTED:"RequestAbortedError"},$S=Yg;function r5(e){var t=e.type||$S.ERROR_HTTP,n;if(e.body)try{n=JSON.parse(e.body)}catch{n=e.body}else n=null;var a=e.message||null;a||(typeof n=="string"?a=n:n&&typeof n.message=="string"?a=n.message:t===$S.ERROR_REQUEST_ABORTED&&(a="Request aborted")),this.message=a,this.type=t,this.statusCode=e.statusCode||null,this.request=e.request,this.body=n}var n5=r5;function i5(e){var t=e.indexOf(":"),n=e.substring(0,t).trim().toLowerCase(),a=e.substring(t+1).trim();return{name:n,value:a}}function o5(e){var t={};return e&&e.trim().split(/[\r|\n]+/).forEach(function(n){var a=i5(n);t[a.name]=a.value}),t}var a5=o5,s5=t5,VS=n5,m_=Yg,l5=a5,pg={};function u5(e){var t=pg[e.id];t&&(t.abort(),delete pg[e.id])}function c5(e,t){return new s5(e,{body:t.response,headers:l5(t.getAllResponseHeaders()),statusCode:t.status})}function qS(e){var t=e.total,n=e.loaded,a=100*n/t;return{total:t,transferred:n,percent:a}}function II(e,t){return new Promise(function(n,a){t.onprogress=function(o){e.emitter.emit(m_.EVENT_PROGRESS_DOWNLOAD,qS(o))};var u=e.file;u&&(t.upload.onprogress=function(o){e.emitter.emit(m_.EVENT_PROGRESS_UPLOAD,qS(o))}),t.onerror=function(o){a(o)},t.onabort=function(){var o=new VS({request:e,type:m_.ERROR_REQUEST_ABORTED});a(o)},t.onload=function(){if(delete pg[e.id],t.status<200||t.status>=400){var o=new VS({request:e,body:t.response,statusCode:t.status});a(o);return}n(t)};var f=e.body;typeof f=="string"?t.send(f):f?t.send(JSON.stringify(f)):u?t.send(u):t.send(),pg[e.id]=t}).then(function(n){return c5(e,n)})}function PI(e,t){var n=e.url(t),a=new window.XMLHttpRequest;return a.open(e.method,n),Object.keys(e.headers).forEach(function(u){a.setRequestHeader(u,e.headers[u])}),a}function p5(e){return Promise.resolve().then(function(){var t=PI(e,e.client.accessToken);return II(e,t)})}var h5={browserAbort:u5,sendRequestXhr:II,browserSend:p5,createRequestXhr:PI},hg={exports:{}};/*! http://mths.be/base64 v0.1.0 by @mathias | MIT license */hg.exports;(function(e,t){(function(n){var a=t,u=e&&e.exports==a&&e,f=typeof Da=="object"&&Da;(f.global===f||f.window===f)&&(n=f);var o=function(N){this.message=N};o.prototype=new Error,o.prototype.name="InvalidCharacterError";var v=function(N){throw new o(N)},x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",E=/[\t\n\f\r ]/g,T=function(N){N=String(N).replace(E,"");var q=N.length;q%4==0&&(N=N.replace(/==?$/,""),q=N.length),(q%4==1||/[^+a-zA-Z0-9/]/.test(N))&&v("Invalid character: the string to be decoded is not correctly encoded.");for(var J=0,U,F,R="",O=-1;++O<q;)F=x.indexOf(N.charAt(O)),U=J%4?U*64+F:F,J++%4&&(R+=String.fromCharCode(255&U>>(-2*J&6)));return R},I=function(N){N=String(N),/[^\0-\xFF]/.test(N)&&v("The string to be encoded contains characters outside of the Latin1 range.");for(var q=N.length%3,J="",U=-1,F,R,O,Q,se=N.length-q;++U<se;)F=N.charCodeAt(U)<<16,R=N.charCodeAt(++U)<<8,O=N.charCodeAt(++U),Q=F+R+O,J+=x.charAt(Q>>18&63)+x.charAt(Q>>12&63)+x.charAt(Q>>6&63)+x.charAt(Q&63);return q==2?(F=N.charCodeAt(U)<<8,R=N.charCodeAt(++U),Q=F+R,J+=x.charAt(Q>>10)+x.charAt(Q>>4&63)+x.charAt(Q<<2&63)+"="):q==1&&(Q=N.charCodeAt(U),J+=x.charAt(Q>>2)+x.charAt(Q<<4&63)+"=="),J},P={encode:I,decode:T,version:"0.1.0"};if(a&&!a.nodeType)if(u)u.exports=P;else for(var V in P)P.hasOwnProperty(V)&&(a[V]=P[V]);else n.base64=P})(Da)})(hg,hg.exports);var d5=hg.exports,f5=d5,y_={};function m5(e){if(y_[e])return y_[e];var t=e.split("."),n=t[0],a=t[1];if(!a)throw new Error("Invalid token");var u=y5(a),f={usage:n,user:u.u};return Ou(u,"a")&&(f.authorization=u.a),Ou(u,"exp")&&(f.expires=u.exp*1e3),Ou(u,"iat")&&(f.created=u.iat*1e3),Ou(u,"scopes")&&(f.scopes=u.scopes),Ou(u,"client")&&(f.client=u.client),Ou(u,"ll")&&(f.lastLogin=u.ll),Ou(u,"iu")&&(f.impersonator=u.iu),y_[e]=f,f}function y5(e){try{return JSON.parse(f5.decode(e))}catch{throw new Error("Invalid token")}}function Ou(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var AI=m5,MI={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(n=!1));function u(x,E,T){this.fn=x,this.context=E,this.once=T||!1}function f(x,E,T,I,P){if(typeof T!="function")throw new TypeError("The listener must be a function");var V=new u(T,I||x,P),N=n?n+E:E;return x._events[N]?x._events[N].fn?x._events[N]=[x._events[N],V]:x._events[N].push(V):(x._events[N]=V,x._eventsCount++),x}function o(x,E){--x._eventsCount===0?x._events=new a:delete x._events[E]}function v(){this._events=new a,this._eventsCount=0}v.prototype.eventNames=function(){var E=[],T,I;if(this._eventsCount===0)return E;for(I in T=this._events)t.call(T,I)&&E.push(n?I.slice(1):I);return Object.getOwnPropertySymbols?E.concat(Object.getOwnPropertySymbols(T)):E},v.prototype.listeners=function(E){var T=n?n+E:E,I=this._events[T];if(!I)return[];if(I.fn)return[I.fn];for(var P=0,V=I.length,N=new Array(V);P<V;P++)N[P]=I[P].fn;return N},v.prototype.listenerCount=function(E){var T=n?n+E:E,I=this._events[T];return I?I.fn?1:I.length:0},v.prototype.emit=function(E,T,I,P,V,N){var q=n?n+E:E;if(!this._events[q])return!1;var J=this._events[q],U=arguments.length,F,R;if(J.fn){switch(J.once&&this.removeListener(E,J.fn,void 0,!0),U){case 1:return J.fn.call(J.context),!0;case 2:return J.fn.call(J.context,T),!0;case 3:return J.fn.call(J.context,T,I),!0;case 4:return J.fn.call(J.context,T,I,P),!0;case 5:return J.fn.call(J.context,T,I,P,V),!0;case 6:return J.fn.call(J.context,T,I,P,V,N),!0}for(R=1,F=new Array(U-1);R<U;R++)F[R-1]=arguments[R];J.fn.apply(J.context,F)}else{var O=J.length,Q;for(R=0;R<O;R++)switch(J[R].once&&this.removeListener(E,J[R].fn,void 0,!0),U){case 1:J[R].fn.call(J[R].context);break;case 2:J[R].fn.call(J[R].context,T);break;case 3:J[R].fn.call(J[R].context,T,I);break;case 4:J[R].fn.call(J[R].context,T,I,P);break;default:if(!F)for(Q=1,F=new Array(U-1);Q<U;Q++)F[Q-1]=arguments[Q];J[R].fn.apply(J[R].context,F)}}return!0},v.prototype.on=function(E,T,I){return f(this,E,T,I,!1)},v.prototype.once=function(E,T,I){return f(this,E,T,I,!0)},v.prototype.removeListener=function(E,T,I,P){var V=n?n+E:E;if(!this._events[V])return this;if(!T)return o(this,V),this;var N=this._events[V];if(N.fn)N.fn===T&&(!P||N.once)&&(!I||N.context===I)&&o(this,V);else{for(var q=0,J=[],U=N.length;q<U;q++)(N[q].fn!==T||P&&!N[q].once||I&&N[q].context!==I)&&J.push(N[q]);J.length?this._events[V]=J.length===1?J[0]:J:o(this,V)}return this},v.prototype.removeAllListeners=function(E){var T;return E?(T=n?n+E:E,this._events[T]&&o(this,T)):(this._events=new a,this._eventsCount=0),this},v.prototype.off=v.prototype.removeListener,v.prototype.addListener=v.prototype.on,v.prefixed=n,v.EventEmitter=v,e.exports=v})(MI);var g5=MI.exports;function v5(e){return e.map(encodeURIComponent).join(",")}function zI(e){return Array.isArray(e)?v5(e):encodeURIComponent(String(e))}function RI(e,t,n){if(n===!1||n===null)return e;var a=/\?/.test(e)?"&":"?",u=encodeURIComponent(t);return n!==void 0&&n!==""&&n!==!0&&(u+="="+zI(n)),""+e+a+u}function _5(e,t){if(!t)return e;var n=e;return Object.keys(t).forEach(function(a){var u=t[a];u!==void 0&&(Array.isArray(u)&&(u=u.filter(function(f){return f!=null}).join(",")),n=RI(n,a,u))}),n}function x5(e,t){if(!t||e.slice(0,4)==="http")return e;var n=e[0]==="/"?"":"/";return""+t.replace(/\/$/,"")+n+e}function b5(e,t){return t?e.replace(/\/:([a-zA-Z0-9]+)/g,function(n,a){var u=t[a];if(u===void 0)throw new Error("Unspecified route parameter "+a);var f=zI(u);return"/"+f}):e}var w5={appendQueryObject:_5,appendQueryParam:RI,prependOrigin:x5,interpolateRouteParams:b5},S5=AI,fb=sh,E5=g5,oy=w5,WS=Yg,C5=1;function Jl(e,t){if(!e)throw new Error("MapiRequest requires a client");if(!t||!t.path||!t.method)throw new Error("MapiRequest requires an options object with path and method properties");var n={};t.body&&(n["content-type"]="application/json");var a=fb(n,t.headers),u=Object.keys(a).reduce(function(f,o){return f[o.toLowerCase()]=a[o],f},{});this.id=C5++,this._options=t,this.emitter=new E5,this.client=e,this.response=null,this.error=null,this.sent=!1,this.aborted=!1,this.path=t.path,this.method=t.method,this.origin=t.origin||e.origin,this.query=t.query||{},this.params=t.params||{},this.body=t.body||null,this.file=t.file||null,this.encoding=t.encoding||"utf8",this.sendFileAs=t.sendFileAs||null,this.headers=u}Jl.prototype.url=function(t){var n=oy.prependOrigin(this.path,this.origin);n=oy.appendQueryObject(n,this.query);var a=this.params,u=t??this.client.accessToken;if(u){n=oy.appendQueryParam(n,"access_token",u);var f=S5(u).user;a=fb({ownerId:f},a)}return n=oy.interpolateRouteParams(n,a),n};Jl.prototype.send=function(){var t=this;if(t.sent)throw new Error("This request has already been sent. Check the response and error properties. Create a new request with clone().");return t.sent=!0,t.client.sendRequest(t).then(function(n){return t.response=n,t.emitter.emit(WS.EVENT_RESPONSE,n),n},function(n){throw t.error=n,t.emitter.emit(WS.EVENT_ERROR,n),n})};Jl.prototype.abort=function(){this._nextPageRequest&&(this._nextPageRequest.abort(),delete this._nextPageRequest),!(this.response||this.error||this.aborted)&&(this.aborted=!0,this.client.abortRequest(this))};Jl.prototype.eachPage=function(t){var n=this;function a(o){function v(){delete n._nextPageRequest;var x=o.nextPage();x&&(n._nextPageRequest=x,f(x))}t(null,o,v)}function u(o){t(o,null,function(){})}function f(o){o.send().then(a,u)}f(this)};Jl.prototype.clone=function(){return this._extend()};Jl.prototype._extend=function(t){var n=fb(this._options,t);return new Jl(this.client,n)};var k5=Jl,T5=AI,I5=k5,P5=Yg;function LI(e){if(!e||!e.accessToken)throw new Error("Cannot create a client without an access token");T5(e.accessToken),this.accessToken=e.accessToken,this.origin=e.origin||P5.API_ORIGIN}LI.prototype.createRequest=function(t){return new I5(this,t)};var DI=LI,OI=h5,BI=DI;function Zp(e){BI.call(this,e)}Zp.prototype=Object.create(BI.prototype);Zp.prototype.constructor=Zp;Zp.prototype.sendRequest=OI.browserSend;Zp.prototype.abortRequest=OI.browserAbort;function A5(e){return new Zp(e)}var NI=A5,M5=NI,z5=M5,R5=Object.prototype.toString,L5=function(e){var t;return R5.call(e)==="[object Object]"&&(t=Object.getPrototypeOf(e),t===null||t===Object.getPrototypeOf({}))},D5=L5,O5=sh,FI="value",g_=`
  `,wn={};wn.assert=function(e,t){return t=t||{},function(n){var a=Ql(e,n);if(a){var u=mb(a,t);throw t.apiName&&(u=t.apiName+": "+u),new Error(u)}}};wn.shape=function(t){var n=j5(t);return function(u){var f=Ql(wn.plainObject,u);if(f)return f;for(var o,v,x=[],E=0;E<n.length;E++)o=n[E].key,v=n[E].value,f=Ql(v,u[o]),f&&x.push([o].concat(f));return x.length<2?x[0]:function(T){x=x.map(function(V){var N=V[0],q=mb(V,T).split(`
`).join(g_);return"- "+N+": "+q});var I=T.path.join("."),P=I===FI?"":" of "+I;return"The following properties"+P+" have invalid values:"+g_+x.join(g_)}}};wn.strictShape=function(t){var n=wn.shape(t);return function(u){var f=n(u);if(f)return f;var o=Object.keys(u).reduce(function(v,x){return t[x]===void 0&&v.push(x),v},[]);if(o.length!==0)return function(){return"The following keys are invalid: "+o.join(", ")}}};wn.arrayOf=function(t){return jI(t)};wn.tuple=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return jI(t)};function jI(e){var t=Array.isArray(e),n=function(a){return t?e[a]:e};return function(u){var f=Ql(wn.plainArray,u);if(f)return f;if(t&&u.length!==e.length)return"an array with "+e.length+" items";for(var o=0;o<u.length;o++)if(f=Ql(n(o),u[o]),f)return[o].concat(f)}}wn.required=function(t){function n(a){return a==null?function(u){return UI(u,$I(u.path)?"cannot be undefined/null.":"is required.")}:t.apply(this,arguments)}return n.__required=!0,n};wn.oneOfType=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return function(a){var u=t.map(function(f){return Ql(f,a)}).filter(Boolean);if(u.length===t.length)return u.every(function(f){return f.length===1&&typeof f[0]=="string"})?B5(u.map(function(f){return f[0]})):u.reduce(function(f,o){return o.length>f.length?o:f})}};wn.equal=function(t){return function(a){if(a!==t)return JSON.stringify(t)}};wn.oneOf=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments),n=t.map(function(a){return wn.equal(a)});return wn.oneOfType.apply(this,n)};wn.range=function(t){var n=t[0],a=t[1];return function(f){var o=Ql(wn.number,f);if(o||f<n||f>a)return"number between "+n+" & "+a+" (inclusive)"}};wn.any=function(){};wn.boolean=function(t){if(typeof t!="boolean")return"boolean"};wn.number=function(t){if(typeof t!="number")return"number"};wn.plainArray=function(t){if(!Array.isArray(t))return"array"};wn.plainObject=function(t){if(!D5(t))return"object"};wn.string=function(t){if(typeof t!="string")return"string"};wn.func=function(t){if(typeof t!="function")return"function"};function Ql(e,t){if(!(t==null&&!e.hasOwnProperty("__required"))){var n=e(t);if(n)return Array.isArray(n)?n:[n]}}function mb(e,t){var n=e.length,a=e[n-1],u=e.slice(0,n-1);return u.length===0&&(u=[FI]),t=O5(t,{path:u}),typeof a=="function"?a(t):UI(t,N5(a))}function B5(e){return e.length<2?e[0]:e.length===2?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e.slice(-1)}function N5(e){return"must be "+F5(e)+"."}function F5(e){return/^an? /.test(e)?e:/^[aeiou]/i.test(e)?"an "+e:/^[a-z]/i.test(e)?"a "+e:e}function UI(e,t){var n=$I(e.path),a=e.path.join(".")+" "+t,u=n?"Item at position ":"";return u+a}function $I(e){return typeof e[e.length-1]=="number"||typeof e[0]=="number"}function j5(e){return Object.keys(e||{}).map(function(t){return{key:t,value:e[t]}})}wn.validate=Ql;wn.processMessage=mb;var U5=wn,$5=sh,Np=U5;function V5(e){if(typeof window<"u")return e instanceof Da.Blob||e instanceof Da.ArrayBuffer?void 0:"Blob or ArrayBuffer";if(!(typeof e=="string"||e.pipe!==void 0))return"Filename or Readable stream"}function q5(e,t){return Np.assert(Np.strictShape(e),t)}function W5(e){var t="date";if(typeof e=="boolean")return t;try{var n=new Date(e);if(n.getTime&&isNaN(n.getTime()))return t}catch{return t}}function G5(e){return Np.tuple(Np.number,Np.number)(e)}var H5=$5(Np,{file:V5,date:W5,coordinates:G5,assertShape:q5});function K5(e,t){var n=function(a,u){return t.indexOf(a)!==-1&&u!==void 0};return typeof t=="function"&&(n=t),Object.keys(e).filter(function(a){return n(a,e[a])}).reduce(function(a,u){return a[u]=e[u],a},{})}var Z5=K5;function X5(e,t){return Object.keys(e).reduce(function(n,a){return n[a]=t(a,e[a]),n},{})}var Y5=X5,J5=Y5;function Q5(e){return J5(e,function(t,n){return typeof n=="boolean"?JSON.stringify(n):n})}var e4=Q5,t4=DI,r4=NI;function n4(e){return function(t){var n;t4.prototype.isPrototypeOf(t)?n=t:n=r4(t);var a=Object.create(e);return a.client=n,a}}var i4=n4,VI=sh,jr=H5,dg=Z5,qI=e4,o4=i4,yb={},WI=["country","region","postcode","district","place","locality","neighborhood","address","poi","poi.landmark"];yb.forwardGeocode=function(e){jr.assertShape({query:jr.required(jr.string),mode:jr.oneOf("mapbox.places","mapbox.places-permanent"),countries:jr.arrayOf(jr.string),proximity:jr.oneOf(jr.coordinates,"ip"),types:jr.arrayOf(jr.oneOf(WI)),autocomplete:jr.boolean,bbox:jr.arrayOf(jr.number),limit:jr.number,language:jr.arrayOf(jr.string),routing:jr.boolean,fuzzyMatch:jr.boolean,worldview:jr.string})(e),e.mode=e.mode||"mapbox.places";var t=qI(VI({country:e.countries},dg(e,["proximity","types","autocomplete","bbox","limit","language","routing","fuzzyMatch","worldview"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:dg(e,["mode","query"]),query:t})};yb.reverseGeocode=function(e){jr.assertShape({query:jr.required(jr.coordinates),mode:jr.oneOf("mapbox.places","mapbox.places-permanent"),countries:jr.arrayOf(jr.string),types:jr.arrayOf(jr.oneOf(WI)),bbox:jr.arrayOf(jr.number),limit:jr.number,language:jr.arrayOf(jr.string),reverseMode:jr.oneOf("distance","score"),routing:jr.boolean,worldview:jr.string})(e),e.mode=e.mode||"mapbox.places";var t=qI(VI({country:e.countries},dg(e,["country","types","bbox","limit","language","reverseMode","routing","worldview"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:dg(e,["mode","query"]),query:t})};var a4=o4(yb);let s4="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",GI=e=>crypto.getRandomValues(new Uint8Array(e)),HI=(e,t,n)=>{let a=(2<<Math.log(e.length-1)/Math.LN2)-1,u=-~(1.6*a*t/e.length);return(f=t)=>{let o="";for(;;){let v=n(u),x=u;for(;x--;)if(o+=e[v[x]&a]||"",o.length===f)return o}}},l4=(e,t=21)=>HI(e,t,GI),u4=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"");const c4=Object.freeze(Object.defineProperty({__proto__:null,customAlphabet:l4,customRandom:HI,nanoid:u4,random:GI,urlAlphabet:s4},Symbol.toStringTag,{value:"Module"})),p4=nk(c4);var h4=p4.nanoid;function KI(e){this.origin=e.origin||"https://api.mapbox.com",this.endpoint="events/v2",this.access_token=e.accessToken,this.version="0.2.0",this.sessionID=this.generateSessionID(),this.userAgent=this.getUserAgent(),this.options=e,this.send=this.send.bind(this),this.countries=e.countries?e.countries.split(","):null,this.types=e.types?e.types.split(","):null,this.bbox=e.bbox?e.bbox:null,this.language=e.language?e.language.split(","):null,this.limit=e.limit?+e.limit:null,this.locale=navigator.language||null,this.enableEventLogging=this.shouldEnableLogging(e),this.eventQueue=new Array,this.flushInterval=e.flushInterval||1e3,this.maxQueueSize=e.maxQueueSize||100,this.timer=this.flushInterval?setTimeout(this.flush.bind(this),this.flushInterval):null,this.lastSentInput="",this.lastSentIndex=0}KI.prototype={select:function(e,t){var n=this.getSelectedIndex(e,t),a=this.getEventPayload("search.select",t);if(a.resultIndex=n,a.resultPlaceName=e.place_name,a.resultId=e.id,!(n===this.lastSentIndex&&a.queryString===this.lastSentInput||n==-1)&&(this.lastSentIndex=n,this.lastSentInput=a.queryString,!!a.queryString))return this.push(a)},start:function(e){var t=this.getEventPayload("search.start",e);if(t.queryString)return this.push(t)},keyevent:function(e,t){if(e.key&&!(e.metaKey||[9,27,37,39,13,38,40].indexOf(e.keyCode)!==-1)){var n=this.getEventPayload("search.keystroke",t);if(n.lastAction=e.key,!!n.queryString)return this.push(n)}},send:function(e,t){if(!this.enableEventLogging)return t?t():void 0;var n=this.getRequestOptions(e);this.request(n,(function(a){if(a)return this.handleError(a,t);if(t)return t()}).bind(this))},getRequestOptions:function(e){Array.isArray(e)||(e=[e]);var t={method:"POST",host:this.origin,path:this.endpoint+"?access_token="+this.access_token,headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return t},getEventPayload:function(e,t){var n;t.options.proximity?typeof t.options.proximity=="object"?n=[t.options.proximity.longitude,t.options.proximity.latitude]:t.options.proximity==="ip"?n=[999,999]:n=t.options.proximity:n=null;var a=t._map?t._map.getZoom():void 0,u={event:e,created:+new Date,sessionIdentifier:this.sessionID,country:this.countries,userAgent:this.userAgent,language:this.language,bbox:this.bbox,types:this.types,endpoint:"mapbox.places",autocomplete:t.options.autocomplete,fuzzyMatch:t.options.fuzzyMatch,proximity:n,limit:t.options.limit,routing:t.options.routing,worldview:t.options.worldview,mapZoom:a,keyboardLocale:this.locale};return e==="search.select"?u.queryString=t.inputString:e!="search.select"&&t._inputEl?u.queryString=t._inputEl.value:u.queryString=t.inputString,u},request:function(e,t){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(this.readyState==4)return this.status==204?t(null):t(this.statusText)},n.open(e.method,e.host+"/"+e.path,!0);for(var a in e.headers){var u=e.headers[a];n.setRequestHeader(a,u)}n.send(e.body)},handleError:function(e,t){if(t)return t(e)},generateSessionID:function(){return h4()},getUserAgent:function(){return"mapbox-gl-geocoder."+this.version+"."+navigator.userAgent},getSelectedIndex:function(e,t){if(t._typeahead){var n=t._typeahead.data,a=e.id,u=n.map(function(o){return o.id}),f=u.indexOf(a);return f}},shouldEnableLogging:function(e){return!(e.enableEventLogging===!1||e.origin&&e.origin!=="https://api.mapbox.com"||e.localGeocoder||e.filter)},flush:function(){this.eventQueue.length>0&&(this.send(this.eventQueue),this.eventQueue=new Array),this.timer&&clearTimeout(this.timer),this.flushInterval&&(this.timer=setTimeout(this.flush.bind(this),this.flushInterval))},push:function(e,t){this.eventQueue.push(e),(this.eventQueue.length>=this.maxQueueSize||t)&&this.flush()},remove:function(){this.flush()}};var d4=KI,f4={de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"לחפש",ja:"サーチ",lv:"Meklēt",pt:"Procurar",sr:"Претрага",zh:"搜索",cs:"Vyhledávání",hu:"Keresés",ka:"ძიება",nb:"Søke",sk:"Vyhľadávanie",th:"ค้นหา",fi:"Hae",is:"Leita",ko:"수색",pl:"Szukaj",sl:"Iskanje",fa:"جستجو",ru:"Поиск"},m4={placeholder:f4},ZI={exports:{}};(function(e){(function(t,n,a){e.exports?e.exports=a():t[n]=a()})(Da,"subtag",function(){var t="",n=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function a(x){return x.match(n)||[]}function u(x){return a(x).filter(function(E,T){return E&&T})}function f(x){return x=a(x),{language:x[1]||t,extlang:x[2]||t,script:x[3]||t,region:x[4]||t}}function o(x,E,T){Object.defineProperty(x,E,{value:T,enumerable:!0})}function v(x,E,T){function I(P){return a(P)[x]||t}o(I,"pattern",E),o(f,T,I)}return v(1,/^[a-zA-Z]{2,3}$/,"language"),v(2,/^[a-zA-Z]{3}$/,"extlang"),v(3,/^[a-zA-Z]{4}$/,"script"),v(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),o(f,"split",u),f})})(ZI);var y4=ZI.exports;function XI(){}XI.prototype={isSupport:function(){return!!window.navigator.geolocation},getCurrentPosition:function(){const e={enableHighAccuracy:!0};return new Promise(function(t,n){window.navigator.geolocation.getCurrentPosition(t,n,e)})}};var g4=XI;function v4(e,t){const n=YI(e),a=["address","street","place","country"];var u;if(typeof t=="function")return t(n);const f=a.indexOf(t);return f===-1?u=a:u=a.slice(f),u.reduce(function(o,v){return n[v]?(o!==""&&(o=o+", "),o+n[v]):o},"")}function YI(e){const t=e.address||"",n=e.text||"",a=e.place_name||"",f={address:a.split(",")[0],houseNumber:t,street:n,placeName:a};return e.context.forEach(function(o){const v=o.id.split(".")[0];f[v]=o.text}),f}const _4=/^[ ]*(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)[ ]*$/;var x4={transformFeatureToGeolocationText:v4,getAddressInfo:YI,REVERSE_GEOCODE_COORD_RGX:_4},b4=SL,w4=UL,$u=sh,S4=KL.EventEmitter,GS=ZL,v_=z5,__=a4,E4=d4,C4=m4,k4=y4,T4=g4,HS=x4;const zl={FORWARD:0,LOCAL:1,REVERSE:2};function I4(){var e=document.createElement("div");return e.className="mapboxgl-ctrl-geocoder--powered-by",e.innerHTML='<a href="https://www.mapbox.com/search-service" target="_blank">Powered by Mapbox</a>',e}function JI(e){this._eventEmitter=new S4,this.options=$u({},this.options,e),this.inputString="",this.fresh=!0,this.lastSelected=null,this.geolocation=new T4}JI.prototype={options:{zoom:16,flyTo:!0,trackProximity:!0,minLength:2,reverseGeocode:!1,flipCoordinates:!1,limit:5,origin:"https://api.mapbox.com",enableEventLogging:!0,marker:!0,mapboxgl:null,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,enableGeolocation:!1,addressAccuracy:"street",getItemValue:function(e){return e.place_name},render:function(e){var t=e.place_name.split(",");return'<div class="mapboxgl-ctrl-geocoder--suggestion"><div class="mapboxgl-ctrl-geocoder--suggestion-title">'+t[0]+'</div><div class="mapboxgl-ctrl-geocoder--suggestion-address">'+t.splice(1,t.length).join(",")+"</div></div>"}},addTo:function(e){function t(n,a){if(!document.body.contains(a))throw new Error("Element provided to #addTo() exists, but is not in the DOM");const u=n.onAdd();a.appendChild(u)}if(e._controlContainer)e.addControl(this);else if(e instanceof HTMLElement)t(this,e);else if(typeof e=="string"){const n=document.querySelectorAll(e);if(n.length===0)throw new Error("Element ",e,"not found.");if(n.length>1)throw new Error("Geocoder can only be added to a single html element");t(this,n[0])}else throw new Error("Error: addTo must be a mapbox-gl-js map, an html element, or a CSS selector query for a single html element")},onAdd:function(e){if(e&&typeof e!="string"&&(this._map=e),this.setLanguage(),this.options.localGeocoderOnly||(this.geocoderService=__(v_({accessToken:this.options.accessToken,origin:this.options.origin}))),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this.eventManager=new E4(this.options),this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this),this._geolocateUser=this._geolocateUser.bind(this);var t=this.container=document.createElement("div");t.className="mapboxgl-ctrl-geocoder mapboxgl-ctrl";var n=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.className="mapboxgl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",w4(this._onKeyDown,200)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton),this._inputEl.addEventListener("keyup",(function(E){this.eventManager.keyevent(E,this)}).bind(this));var a=document.createElement("div");a.classList.add("mapboxgl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="mapboxgl-ctrl-geocoder--button";var u=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');if(this._clearEl.appendChild(u),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),a.appendChild(this._clearEl),a.appendChild(this._loadingEl),t.appendChild(n),t.appendChild(this._inputEl),t.appendChild(a),this.options.enableGeolocation&&this.geolocation.isSupport()){this._geolocateEl=document.createElement("button"),this._geolocateEl.setAttribute("aria-label","Geolocate"),this._geolocateEl.addEventListener("click",this._geolocateUser),this._geolocateEl.className="mapboxgl-ctrl-geocoder--button";var f=this.createIcon("geolocate",'<path d="M12.999 3.677L2.042 8.269c-.962.403-.747 1.823.29 1.912l5.032.431.431 5.033c.089 1.037 1.509 1.252 1.912.29l4.592-10.957c.345-.822-.477-1.644-1.299-1.299z" fill="#4264fb"/>');this._geolocateEl.appendChild(f),a.appendChild(this._geolocateEl),this._showGeolocateButton()}var o=this._typeahead=new b4(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit});this.setRenderFunction(this.options.render),o.getItemValue=this.options.getItemValue;var v=o.list.draw,x=this._footerNode=I4();return o.list.draw=function(){v.call(this),x.addEventListener("mousedown",(function(){this.selectingListItem=!0}).bind(this)),x.addEventListener("mouseup",(function(){this.selectingListItem=!1}).bind(this)),this.element.appendChild(x)},this.mapMarker=null,this._handleMarker=this._handleMarker.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._mapboxgl=this.options.mapboxgl,!this._mapboxgl&&this.options.marker&&(console.error("No mapboxgl detected in options. Map markers are disabled. Please set options.mapboxgl."),this.options.marker=!1)),t},_geolocateUser:function(){this._hideGeolocateButton(),this._showLoadingIcon(),this.geolocation.getCurrentPosition().then((function(e){this._hideLoadingIcon();const t={geometry:{type:"Point",coordinates:[e.coords.longitude,e.coords.latitude]}};this._handleMarker(t),this._fly(t),this._typeahead.clear(),this._typeahead.selected=!0,this.lastSelected=JSON.stringify(t),this._showClearButton(),this.fresh=!1;const n={limit:1,language:[this.options.language],query:t.geometry.coordinates,types:["address"]};if(this.options.localGeocoderOnly){const a=t.geometry.coordinates[0]+","+t.geometry.coordinates[1];this._setInputValue(a),this._eventEmitter.emit("result",{result:t})}else this.geocoderService.reverseGeocode(n).send().then((function(a){const u=a.body.features[0];if(u){const f=HS.transformFeatureToGeolocationText(u,this.options.addressAccuracy);this._setInputValue(f),u.user_coordinates=t.geometry.coordinates,this._eventEmitter.emit("result",{result:u})}else this._eventEmitter.emit("result",{result:{user_coordinates:t.geometry.coordinates}})}).bind(this))}).bind(this)).catch((function(e){e.code===1?this._renderUserDeniedGeolocationError():this._renderLocationError(),this._hideLoadingIcon(),this._showGeolocateButton(),this._hideAttribution()}).bind(this))},createIcon:function(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");return n.setAttribute("class","mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-"+e),n.setAttribute("viewBox","0 0 18 18"),n.setAttribute("xml:space","preserve"),n.setAttribute("width",18),n.setAttribute("height",18),n.innerHTML=t,n},onRemove:function(){return this.container.parentNode.removeChild(this.container),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this},_setInputValue:function(e){this._inputEl.value=e,setTimeout((function(){this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0)}).bind(this),1)},_onPaste:function(e){var t=(e.clipboardData||window.clipboardData).getData("text");t.length>=this.options.minLength&&this._geocode(t)},_onKeyDown:function(e){var t=27,n=9;if(e.keyCode===t&&this.options.clearAndBlurOnEsc)return this._clear(e),this._inputEl.blur();var a=e.target&&e.target.shadowRoot?e.target.shadowRoot.activeElement:e.target,u=a?a.value:"";if(!u)return this.fresh=!0,e.keyCode!==n&&this.clear(e),this._showGeolocateButton(),this._hideClearButton();this._hideGeolocateButton(),!(e.metaKey||[n,t,37,39,13,38,40].indexOf(e.keyCode)!==-1)&&a.value.length>=this.options.minLength&&this._geocode(a.value)},_showButton:function(){this._typeahead.selected&&this._showClearButton()},_hideButton:function(){this._typeahead.selected&&this._hideClearButton()},_showClearButton:function(){this._clearEl.style.display="block"},_hideClearButton:function(){this._clearEl.style.display="none"},_showGeolocateButton:function(){this._geolocateEl&&this.geolocation.isSupport()&&(this._geolocateEl.style.display="block")},_hideGeolocateButton:function(){this._geolocateEl&&(this._geolocateEl.style.display="none")},_showLoadingIcon:function(){this._loadingEl.style.display="block"},_hideLoadingIcon:function(){this._loadingEl.style.display="none"},_showAttribution:function(){this._footerNode.style.display="block"},_hideAttribution:function(){this._footerNode.style.display="none"},_onBlur:function(e){this.options.clearOnBlur&&this._clearOnBlur(e),this.options.collapsed&&this._collapse()},_onChange:function(){var e=this._typeahead.selected;e&&JSON.stringify(e)!==this.lastSelected&&(this._hideClearButton(),this.options.flyTo&&this._fly(e),this.options.marker&&this._mapboxgl&&this._handleMarker(e),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(e),this._eventEmitter.emit("result",{result:e}),this.eventManager.select(e,this))},_fly:function(e){var t;if(e.properties&&GS[e.properties.short_code])t=$u({},this.options.flyTo),this._map&&this._map.fitBounds(GS[e.properties.short_code].bbox,t);else if(e.bbox){var n=e.bbox;t=$u({},this.options.flyTo),this._map&&this._map.fitBounds([[n[0],n[1]],[n[2],n[3]]],t)}else{var a={zoom:this.options.zoom};t=$u({},a,this.options.flyTo),e.center?t.center=e.center:e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&(t.center=e.geometry.coordinates),this._map&&this._map.flyTo(t)}},_requestType:function(e,t){var n;return e.localGeocoderOnly?n=zl.LOCAL:e.reverseGeocode&&HS.REVERSE_GEOCODE_COORD_RGX.test(t)?n=zl.REVERSE:n=zl.FORWARD,n},_setupConfig:function(e,t){const n=["bbox","limit","proximity","countries","types","language","reverseMode","mode","autocomplete","fuzzyMatch","routing","worldview"],a=/[\s,]+/;var u=this,f=n.reduce(function(v,x){if(u.options[x]===void 0||u.options[x]===null)return v;["countries","types","language"].indexOf(x)>-1?v[x]=u.options[x].split(a):v[x]=u.options[x];const E=typeof u.options[x].longitude=="number"&&typeof u.options[x].latitude=="number";if(x==="proximity"&&E){const T=u.options[x].longitude,I=u.options[x].latitude;v[x]=[T,I]}return v},{});switch(e){case zl.REVERSE:{var o=t.split(a).map(function(v){return parseFloat(v,10)});u.options.flipCoordinates||o.reverse(),f.types&&f.types[0],f=$u(f,{query:o,limit:1}),["proximity","autocomplete","fuzzyMatch","bbox"].forEach(function(v){v in f&&delete f[v]})}break;case zl.FORWARD:{const v=t.trim();/^(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)?$/.test(v)&&(t=t.replace(/,/g," ")),f=$u(f,{query:t})}break}return f},_geocode:function(e){this.inputString=e,this._showLoadingIcon(),this._eventEmitter.emit("loading",{query:e});const t=this._requestType(this.options,e),n=this._setupConfig(t,e);var a;switch(t){case zl.LOCAL:a=Promise.resolve();break;case zl.FORWARD:a=this.geocoderService.forwardGeocode(n).send();break;case zl.REVERSE:a=this.geocoderService.reverseGeocode(n).send();break}var u=this.options.localGeocoder?this.options.localGeocoder(e)||[]:[],f=[],o=null;return a.catch((function(v){o=v}).bind(this)).then((function(v){this._hideLoadingIcon();var x={};return v?v.statusCode=="200"&&(x=v.body,x.request=v.request,x.headers=v.headers):x={type:"FeatureCollection",features:[]},x.config=n,this.fresh&&(this.eventManager.start(this),this.fresh=!1),x.features=x.features?u.concat(x.features):u,this.options.externalGeocoder?(f=this.options.externalGeocoder(e,x.features)||Promise.resolve([]),f.then(function(E){return x.features=x.features?E.concat(x.features):E,x},function(){return x})):x}).bind(this)).then((function(v){if(o)throw o;this.options.filter&&v.features.length&&(v.features=v.features.filter(this.options.filter)),v.features.length?(this._showClearButton(),this._hideGeolocateButton(),this._showAttribution(),this._eventEmitter.emit("results",v),this._typeahead.update(v.features)):(this._hideClearButton(),this._hideAttribution(),this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",v))}).bind(this)).catch((function(v){this._hideLoadingIcon(),this._hideAttribution(),u.length&&this.options.localGeocoder||f.length&&this.options.externalGeocoder?(this._showClearButton(),this._hideGeolocateButton(),this._typeahead.update(u)):(this._hideClearButton(),this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:u}),this._eventEmitter.emit("error",{error:v})}).bind(this)),a},_clear:function(e){e&&e.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._hideClearButton(),this._showGeolocateButton(),this._removeMarker(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0},clear:function(e){this._clear(e),this._inputEl.focus()},_clearOnBlur:function(e){var t=this;e.relatedTarget&&t._clear(e)},_onQueryResult:function(e){var t=e.body;if(t.features.length){var n=t.features[0];this._typeahead.selected=n,this._inputEl.value=n.place_name,this._onChange()}},_updateProximity:function(){if(!(!this._map||!this.options.trackProximity))if(this._map.getZoom()>9){var e=this._map.getCenter().wrap();this.setProximity({longitude:e.lng,latitude:e.lat},!1)}else this.setProximity(null,!1)},_collapse:function(){!this._inputEl.value&&this._inputEl!==document.activeElement&&this.container.classList.add("mapboxgl-ctrl-geocoder--collapsed")},_unCollapse:function(){this.container.classList.remove("mapboxgl-ctrl-geocoder--collapsed")},query:function(e){return this._geocode(e).then(this._onQueryResult),this},_renderError:function(){var e="<div class='mapbox-gl-geocoder--error'>There was an error reaching the server</div>";this._renderMessage(e)},_renderLocationError:function(){var e="<div class='mapbox-gl-geocoder--error'>A location error has occurred</div>";this._renderMessage(e)},_renderNoResults:function(){var e="<div class='mapbox-gl-geocoder--error mapbox-gl-geocoder--no-results'>No results found</div>";this._renderMessage(e)},_renderUserDeniedGeolocationError:function(){var e="<div class='mapbox-gl-geocoder--error'>Geolocation permission denied</div>";this._renderMessage(e)},_renderMessage:function(e){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(e)},_getPlaceholderText:function(){if(this.options.placeholder)return this.options.placeholder;if(this.options.language){var e=this.options.language.split(",")[0],t=k4.language(e),n=C4.placeholder[t];if(n)return n}return"Search"},setInput:function(e){return this._inputEl.value=e,this._typeahead.selected=null,this._typeahead.clear(),e.length>=this.options.minLength&&this._geocode(e),this},setProximity:function(e,t=!0){return this.options.proximity=e,t&&(this.options.trackProximity=!1),this},getProximity:function(){return this.options.proximity},setRenderFunction:function(e){return e&&typeof e=="function"&&(this._typeahead.render=e),this},getRenderFunction:function(){return this._typeahead.render},setLanguage:function(e){var t=navigator.language||navigator.userLanguage||navigator.browserLanguage;return this.options.language=e||this.options.language||t,this},getLanguage:function(){return this.options.language},getZoom:function(){return this.options.zoom},setZoom:function(e){return this.options.zoom=e,this},getFlyTo:function(){return this.options.flyTo},setFlyTo:function(e){return this.options.flyTo=e,this},getPlaceholder:function(){return this.options.placeholder},setPlaceholder:function(e){return this.placeholder=e||this._getPlaceholderText(),this._inputEl.placeholder=this.placeholder,this._inputEl.setAttribute("aria-label",this.placeholder),this},getBbox:function(){return this.options.bbox},setBbox:function(e){return this.options.bbox=e,this},getCountries:function(){return this.options.countries},setCountries:function(e){return this.options.countries=e,this},getTypes:function(){return this.options.types},setTypes:function(e){return this.options.types=e,this},getMinLength:function(){return this.options.minLength},setMinLength:function(e){return this.options.minLength=e,this._typeahead&&(this._typeahead.options.minLength=e),this},getLimit:function(){return this.options.limit},setLimit:function(e){return this.options.limit=e,this._typeahead&&(this._typeahead.options.limit=e),this},getFilter:function(){return this.options.filter},setFilter:function(e){return this.options.filter=e,this},setOrigin:function(e){return this.options.origin=e,this.geocoderService=__(v_({accessToken:this.options.accessToken,origin:this.options.origin})),this},getOrigin:function(){return this.options.origin},setAccessToken:function(e){return this.options.accessToken=e,this.geocoderService=__(v_({accessToken:this.options.accessToken,origin:this.options.origin})),this},setAutocomplete:function(e){return this.options.autocomplete=e,this},getAutocomplete:function(){return this.options.autocomplete},setFuzzyMatch:function(e){return this.options.fuzzyMatch=e,this},getFuzzyMatch:function(){return this.options.fuzzyMatch},setRouting:function(e){return this.options.routing=e,this},getRouting:function(){return this.options.routing},setWorldview:function(e){return this.options.worldview=e,this},getWorldview:function(){return this.options.worldview},_handleMarker:function(e){if(this._map){this._removeMarker();var t={color:"#4668F2"},n=$u({},t,this.options.marker);return this.mapMarker=new this._mapboxgl.Marker(n),e.center?this.mapMarker.setLngLat(e.center).addTo(this._map):e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&this.mapMarker.setLngLat(e.geometry.coordinates).addTo(this._map),this}},_removeMarker:function(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)},on:function(e,t){return this._eventEmitter.on(e,t),this},off:function(e,t){return this._eventEmitter.removeListener(e,t),this.eventManager.remove(),this}};var P4=JI;const A4=Rg(P4);var QI={exports:{}},gb={exports:{}},vb={exports:{}},eP=function(t,n){return function(){for(var u=new Array(arguments.length),f=0;f<u.length;f++)u[f]=arguments[f];return t.apply(n,u)}},M4=eP,iu=Object.prototype.toString;function _b(e){return Array.isArray(e)}function Zx(e){return typeof e>"u"}function z4(e){return e!==null&&!Zx(e)&&e.constructor!==null&&!Zx(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function tP(e){return iu.call(e)==="[object ArrayBuffer]"}function R4(e){return iu.call(e)==="[object FormData]"}function L4(e){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&tP(e.buffer),t}function D4(e){return typeof e=="string"}function O4(e){return typeof e=="number"}function rP(e){return e!==null&&typeof e=="object"}function Ay(e){if(iu.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function B4(e){return iu.call(e)==="[object Date]"}function N4(e){return iu.call(e)==="[object File]"}function F4(e){return iu.call(e)==="[object Blob]"}function nP(e){return iu.call(e)==="[object Function]"}function j4(e){return rP(e)&&nP(e.pipe)}function U4(e){return iu.call(e)==="[object URLSearchParams]"}function $4(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function V4(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function xb(e,t){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),_b(e))for(var n=0,a=e.length;n<a;n++)t.call(null,e[n],n,e);else for(var u in e)Object.prototype.hasOwnProperty.call(e,u)&&t.call(null,e[u],u,e)}function Xx(){var e={};function t(u,f){Ay(e[f])&&Ay(u)?e[f]=Xx(e[f],u):Ay(u)?e[f]=Xx({},u):_b(u)?e[f]=u.slice():e[f]=u}for(var n=0,a=arguments.length;n<a;n++)xb(arguments[n],t);return e}function q4(e,t,n){return xb(t,function(u,f){n&&typeof u=="function"?e[f]=M4(u,n):e[f]=u}),e}function W4(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}var Bo={isArray:_b,isArrayBuffer:tP,isBuffer:z4,isFormData:R4,isArrayBufferView:L4,isString:D4,isNumber:O4,isObject:rP,isPlainObject:Ay,isUndefined:Zx,isDate:B4,isFile:N4,isBlob:F4,isFunction:nP,isStream:j4,isURLSearchParams:U4,isStandardBrowserEnv:V4,forEach:xb,merge:Xx,extend:q4,trim:$4,stripBOM:W4},op=Bo;function KS(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var iP=function(t,n,a){if(!n)return t;var u;if(a)u=a(n);else if(op.isURLSearchParams(n))u=n.toString();else{var f=[];op.forEach(n,function(x,E){x===null||typeof x>"u"||(op.isArray(x)?E=E+"[]":x=[x],op.forEach(x,function(I){op.isDate(I)?I=I.toISOString():op.isObject(I)&&(I=JSON.stringify(I)),f.push(KS(E)+"="+KS(I))}))}),u=f.join("&")}if(u){var o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+u}return t},G4=Bo;function Jg(){this.handlers=[]}Jg.prototype.use=function(t,n,a){return this.handlers.push({fulfilled:t,rejected:n,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1};Jg.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};Jg.prototype.forEach=function(t){G4.forEach(this.handlers,function(a){a!==null&&t(a)})};var H4=Jg,K4=Bo,Z4=function(t,n){K4.forEach(t,function(u,f){f!==n&&f.toUpperCase()===n.toUpperCase()&&(t[n]=u,delete t[f])})},oP=function(t,n,a,u,f){return t.config=n,a&&(t.code=a),t.request=u,t.response=f,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},t},aP={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},x_,ZS;function sP(){if(ZS)return x_;ZS=1;var e=oP;return x_=function(n,a,u,f,o){var v=new Error(n);return e(v,a,u,f,o)},x_}var b_,XS;function X4(){if(XS)return b_;XS=1;var e=sP();return b_=function(n,a,u){var f=u.config.validateStatus;!u.status||!f||f(u.status)?n(u):a(e("Request failed with status code "+u.status,u.config,null,u.request,u))},b_}var w_,YS;function Y4(){if(YS)return w_;YS=1;var e=Bo;return w_=e.isStandardBrowserEnv()?function(){return{write:function(a,u,f,o,v,x){var E=[];E.push(a+"="+encodeURIComponent(u)),e.isNumber(f)&&E.push("expires="+new Date(f).toGMTString()),e.isString(o)&&E.push("path="+o),e.isString(v)&&E.push("domain="+v),x===!0&&E.push("secure"),document.cookie=E.join("; ")},read:function(a){var u=document.cookie.match(new RegExp("(^|;\\s*)("+a+")=([^;]*)"));return u?decodeURIComponent(u[3]):null},remove:function(a){this.write(a,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),w_}var S_,JS;function J4(){return JS||(JS=1,S_=function(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}),S_}var E_,QS;function Q4(){return QS||(QS=1,E_=function(t,n){return n?t.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):t}),E_}var C_,eE;function eD(){if(eE)return C_;eE=1;var e=J4(),t=Q4();return C_=function(a,u){return a&&!e(u)?t(a,u):u},C_}var k_,tE;function tD(){if(tE)return k_;tE=1;var e=Bo,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return k_=function(a){var u={},f,o,v;return a&&e.forEach(a.split(`
`),function(E){if(v=E.indexOf(":"),f=e.trim(E.substr(0,v)).toLowerCase(),o=e.trim(E.substr(v+1)),f){if(u[f]&&t.indexOf(f)>=0)return;f==="set-cookie"?u[f]=(u[f]?u[f]:[]).concat([o]):u[f]=u[f]?u[f]+", "+o:o}}),u},k_}var T_,rE;function rD(){if(rE)return T_;rE=1;var e=Bo;return T_=e.isStandardBrowserEnv()?function(){var n=/(msie|trident)/i.test(navigator.userAgent),a=document.createElement("a"),u;function f(o){var v=o;return n&&(a.setAttribute("href",v),v=a.href),a.setAttribute("href",v),{href:a.href,protocol:a.protocol?a.protocol.replace(/:$/,""):"",host:a.host,search:a.search?a.search.replace(/^\?/,""):"",hash:a.hash?a.hash.replace(/^#/,""):"",hostname:a.hostname,port:a.port,pathname:a.pathname.charAt(0)==="/"?a.pathname:"/"+a.pathname}}return u=f(window.location.href),function(v){var x=e.isString(v)?f(v):v;return x.protocol===u.protocol&&x.host===u.host}}():function(){return function(){return!0}}(),T_}var I_,nE;function Qg(){if(nE)return I_;nE=1;function e(t){this.message=t}return e.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},e.prototype.__CANCEL__=!0,I_=e,I_}var P_,iE;function oE(){if(iE)return P_;iE=1;var e=Bo,t=X4(),n=Y4(),a=iP,u=eD(),f=tD(),o=rD(),v=sP(),x=aP,E=Qg();return P_=function(I){return new Promise(function(V,N){var q=I.data,J=I.headers,U=I.responseType,F;function R(){I.cancelToken&&I.cancelToken.unsubscribe(F),I.signal&&I.signal.removeEventListener("abort",F)}e.isFormData(q)&&delete J["Content-Type"];var O=new XMLHttpRequest;if(I.auth){var Q=I.auth.username||"",se=I.auth.password?unescape(encodeURIComponent(I.auth.password)):"";J.Authorization="Basic "+btoa(Q+":"+se)}var pe=u(I.baseURL,I.url);O.open(I.method.toUpperCase(),a(pe,I.params,I.paramsSerializer),!0),O.timeout=I.timeout;function _e(){if(O){var he="getAllResponseHeaders"in O?f(O.getAllResponseHeaders()):null,we=!U||U==="text"||U==="json"?O.responseText:O.response,ie={data:we,status:O.status,statusText:O.statusText,headers:he,config:I,request:O};t(function(Ne){V(Ne),R()},function(Ne){N(Ne),R()},ie),O=null}}if("onloadend"in O?O.onloadend=_e:O.onreadystatechange=function(){!O||O.readyState!==4||O.status===0&&!(O.responseURL&&O.responseURL.indexOf("file:")===0)||setTimeout(_e)},O.onabort=function(){O&&(N(v("Request aborted",I,"ECONNABORTED",O)),O=null)},O.onerror=function(){N(v("Network Error",I,null,O)),O=null},O.ontimeout=function(){var we=I.timeout?"timeout of "+I.timeout+"ms exceeded":"timeout exceeded",ie=I.transitional||x;I.timeoutErrorMessage&&(we=I.timeoutErrorMessage),N(v(we,I,ie.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",O)),O=null},e.isStandardBrowserEnv()){var ze=(I.withCredentials||o(pe))&&I.xsrfCookieName?n.read(I.xsrfCookieName):void 0;ze&&(J[I.xsrfHeaderName]=ze)}"setRequestHeader"in O&&e.forEach(J,function(we,ie){typeof q>"u"&&ie.toLowerCase()==="content-type"?delete J[ie]:O.setRequestHeader(ie,we)}),e.isUndefined(I.withCredentials)||(O.withCredentials=!!I.withCredentials),U&&U!=="json"&&(O.responseType=I.responseType),typeof I.onDownloadProgress=="function"&&O.addEventListener("progress",I.onDownloadProgress),typeof I.onUploadProgress=="function"&&O.upload&&O.upload.addEventListener("progress",I.onUploadProgress),(I.cancelToken||I.signal)&&(F=function(he){O&&(N(!he||he&&he.type?new E("canceled"):he),O.abort(),O=null)},I.cancelToken&&I.cancelToken.subscribe(F),I.signal&&(I.signal.aborted?F():I.signal.addEventListener("abort",F))),q||(q=null),O.send(q)})},P_}var ji=Bo,aE=Z4,nD=oP,iD=aP,oD={"Content-Type":"application/x-www-form-urlencoded"};function sE(e,t){!ji.isUndefined(e)&&ji.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function aD(){var e;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(e=oE()),e}function sD(e,t,n){if(ji.isString(e))try{return(t||JSON.parse)(e),ji.trim(e)}catch(a){if(a.name!=="SyntaxError")throw a}return(n||JSON.stringify)(e)}var ev={transitional:iD,adapter:aD(),transformRequest:[function(t,n){return aE(n,"Accept"),aE(n,"Content-Type"),ji.isFormData(t)||ji.isArrayBuffer(t)||ji.isBuffer(t)||ji.isStream(t)||ji.isFile(t)||ji.isBlob(t)?t:ji.isArrayBufferView(t)?t.buffer:ji.isURLSearchParams(t)?(sE(n,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):ji.isObject(t)||n&&n["Content-Type"]==="application/json"?(sE(n,"application/json"),sD(t)):t}],transformResponse:[function(t){var n=this.transitional||ev.transitional,a=n&&n.silentJSONParsing,u=n&&n.forcedJSONParsing,f=!a&&this.responseType==="json";if(f||u&&ji.isString(t)&&t.length)try{return JSON.parse(t)}catch(o){if(f)throw o.name==="SyntaxError"?nD(o,this,"E_JSON_PARSE"):o}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};ji.forEach(["delete","get","head"],function(t){ev.headers[t]={}});ji.forEach(["post","put","patch"],function(t){ev.headers[t]=ji.merge(oD)});var bb=ev,lD=Bo,uD=bb,cD=function(t,n,a){var u=this||uD;return lD.forEach(a,function(o){t=o.call(u,t,n)}),t},A_,lE;function lP(){return lE||(lE=1,A_=function(t){return!!(t&&t.__CANCEL__)}),A_}var uE=Bo,M_=cD,pD=lP(),hD=bb,dD=Qg();function z_(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new dD("canceled")}var fD=function(t){z_(t),t.headers=t.headers||{},t.data=M_.call(t,t.data,t.headers,t.transformRequest),t.headers=uE.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),uE.forEach(["delete","get","head","post","put","patch","common"],function(u){delete t.headers[u]});var n=t.adapter||hD.adapter;return n(t).then(function(u){return z_(t),u.data=M_.call(t,u.data,u.headers,t.transformResponse),u},function(u){return pD(u)||(z_(t),u&&u.response&&(u.response.data=M_.call(t,u.response.data,u.response.headers,t.transformResponse))),Promise.reject(u)})},Wo=Bo,uP=function(t,n){n=n||{};var a={};function u(T,I){return Wo.isPlainObject(T)&&Wo.isPlainObject(I)?Wo.merge(T,I):Wo.isPlainObject(I)?Wo.merge({},I):Wo.isArray(I)?I.slice():I}function f(T){if(Wo.isUndefined(n[T])){if(!Wo.isUndefined(t[T]))return u(void 0,t[T])}else return u(t[T],n[T])}function o(T){if(!Wo.isUndefined(n[T]))return u(void 0,n[T])}function v(T){if(Wo.isUndefined(n[T])){if(!Wo.isUndefined(t[T]))return u(void 0,t[T])}else return u(void 0,n[T])}function x(T){if(T in n)return u(t[T],n[T]);if(T in t)return u(void 0,t[T])}var E={url:o,method:o,data:o,baseURL:v,transformRequest:v,transformResponse:v,paramsSerializer:v,timeout:v,timeoutMessage:v,withCredentials:v,adapter:v,responseType:v,xsrfCookieName:v,xsrfHeaderName:v,onUploadProgress:v,onDownloadProgress:v,decompress:v,maxContentLength:v,maxBodyLength:v,transport:v,httpAgent:v,httpsAgent:v,cancelToken:v,socketPath:v,responseEncoding:v,validateStatus:x};return Wo.forEach(Object.keys(t).concat(Object.keys(n)),function(I){var P=E[I]||f,V=P(I);Wo.isUndefined(V)&&P!==x||(a[I]=V)}),a},R_,cE;function cP(){return cE||(cE=1,R_={version:"0.26.1"}),R_}var mD=cP().version,wb={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){wb[e]=function(a){return typeof a===e||"a"+(t<1?"n ":" ")+e}});var pE={};wb.transitional=function(t,n,a){function u(f,o){return"[Axios v"+mD+"] Transitional option '"+f+"'"+o+(a?". "+a:"")}return function(f,o,v){if(t===!1)throw new Error(u(o," has been removed"+(n?" in "+n:"")));return n&&!pE[o]&&(pE[o]=!0,console.warn(u(o," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(f,o,v):!0}};function yD(e,t,n){if(typeof e!="object")throw new TypeError("options must be an object");for(var a=Object.keys(e),u=a.length;u-- >0;){var f=a[u],o=t[f];if(o){var v=e[f],x=v===void 0||o(v,f,e);if(x!==!0)throw new TypeError("option "+f+" must be "+x);continue}if(n!==!0)throw Error("Unknown option "+f)}}var gD={assertOptions:yD,validators:wb},pP=Bo,vD=iP,hE=H4,dE=fD,tv=uP,hP=gD,ap=hP.validators;function Sf(e){this.defaults=e,this.interceptors={request:new hE,response:new hE}}Sf.prototype.request=function(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=tv(this.defaults,n),n.method?n.method=n.method.toLowerCase():this.defaults.method?n.method=this.defaults.method.toLowerCase():n.method="get";var a=n.transitional;a!==void 0&&hP.assertOptions(a,{silentJSONParsing:ap.transitional(ap.boolean),forcedJSONParsing:ap.transitional(ap.boolean),clarifyTimeoutError:ap.transitional(ap.boolean)},!1);var u=[],f=!0;this.interceptors.request.forEach(function(V){typeof V.runWhen=="function"&&V.runWhen(n)===!1||(f=f&&V.synchronous,u.unshift(V.fulfilled,V.rejected))});var o=[];this.interceptors.response.forEach(function(V){o.push(V.fulfilled,V.rejected)});var v;if(!f){var x=[dE,void 0];for(Array.prototype.unshift.apply(x,u),x=x.concat(o),v=Promise.resolve(n);x.length;)v=v.then(x.shift(),x.shift());return v}for(var E=n;u.length;){var T=u.shift(),I=u.shift();try{E=T(E)}catch(P){I(P);break}}try{v=dE(E)}catch(P){return Promise.reject(P)}for(;o.length;)v=v.then(o.shift(),o.shift());return v};Sf.prototype.getUri=function(t){return t=tv(this.defaults,t),vD(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};pP.forEach(["delete","get","head","options"],function(t){Sf.prototype[t]=function(n,a){return this.request(tv(a||{},{method:t,url:n,data:(a||{}).data}))}});pP.forEach(["post","put","patch"],function(t){Sf.prototype[t]=function(n,a,u){return this.request(tv(u||{},{method:t,url:n,data:a}))}});var _D=Sf,L_,fE;function xD(){if(fE)return L_;fE=1;var e=Qg();function t(n){if(typeof n!="function")throw new TypeError("executor must be a function.");var a;this.promise=new Promise(function(o){a=o});var u=this;this.promise.then(function(f){if(u._listeners){var o,v=u._listeners.length;for(o=0;o<v;o++)u._listeners[o](f);u._listeners=null}}),this.promise.then=function(f){var o,v=new Promise(function(x){u.subscribe(x),o=x}).then(f);return v.cancel=function(){u.unsubscribe(o)},v},n(function(o){u.reason||(u.reason=new e(o),a(u.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.prototype.subscribe=function(a){if(this.reason){a(this.reason);return}this._listeners?this._listeners.push(a):this._listeners=[a]},t.prototype.unsubscribe=function(a){if(this._listeners){var u=this._listeners.indexOf(a);u!==-1&&this._listeners.splice(u,1)}},t.source=function(){var a,u=new t(function(o){a=o});return{token:u,cancel:a}},L_=t,L_}var D_,mE;function bD(){return mE||(mE=1,D_=function(t){return function(a){return t.apply(null,a)}}),D_}var O_,yE;function wD(){if(yE)return O_;yE=1;var e=Bo;return O_=function(n){return e.isObject(n)&&n.isAxiosError===!0},O_}var gE=Bo,SD=eP,My=_D,ED=uP,CD=bb;function dP(e){var t=new My(e),n=SD(My.prototype.request,t);return gE.extend(n,My.prototype,t),gE.extend(n,t),n.create=function(u){return dP(ED(e,u))},n}var ws=dP(CD);ws.Axios=My;ws.Cancel=Qg();ws.CancelToken=xD();ws.isCancel=lP();ws.VERSION=cP().version;ws.all=function(t){return Promise.all(t)};ws.spread=bD();ws.isAxiosError=wD();vb.exports=ws;vb.exports.default=ws;var kD=vb.exports,TD=kD;const ID="@sendgrid/client",PD="Twilio SendGrid NodeJS API client",AD="7.7.0",MD="Twilio SendGrid <help@twilio.com> (sendgrid.com)",zD=["Kyle Partridge <kyle.partridge@sendgrid.com>","David Tomberlin <david.tomberlin@sendgrid.com>","Swift <swift@sendgrid.com>","Brandon West <brandon.west@sendgrid.com>","Scott Motte <scott.motte@sendgrid.com>","Robert Acosta <robert.acosta@sendgrid.com>","Elmer Thomas <ethomas@twilio.com>","Adam Reis <adam@reis.nz>"],RD="MIT",LD="https://sendgrid.com",DD={type:"git",url:"git://github.com/sendgrid/sendgrid-nodejs.git"},OD={access:"public"},BD="index.js",ND={node:"6.* || 8.* || >=10.*"},FD={"@sendgrid/helpers":"^7.7.0",axios:"^0.26.0"},jD={chai:"4.2.0",nock:"^10.0.6"},UD={chai:"4.2.0"},$D=["http","rest","api","mail","sendgrid"],VD="30eebb16a51b51e6a2df1b3596044db6f5fdbe92",qD={name:ID,description:PD,version:AD,author:MD,contributors:zD,license:RD,homepage:LD,repository:DD,publishConfig:OD,main:BD,engines:ND,dependencies:FD,devDependencies:jD,resolutions:UD,tags:$D,gitHead:VD};var Sb=function e(t,n,a){if(typeof t!="object"||t===null)throw new Error("Non object passed to convertKeys: "+t);if(Array.isArray(t))return t;Array.isArray(a)||(a=[]);for(const u in t)if(t.hasOwnProperty(u)){const f=n(u);typeof t[u]=="object"&&t[u]!==null&&!a.includes(u)&&!a.includes(f)&&(t[u]=e(t[u],n,a)),f!==u&&(t[f]=t[u],delete t[u])}return t},WD=function(t){if(typeof t!="string")throw new Error("String expected for conversion to snake case");return t.trim().replace(/_+|\-+/g," ").replace(/(?:^\w|[A-Z]|\b\w|\s+)/g,function(n,a){return Number(n)===0?"":a===0?n.toLowerCase():n.toUpperCase()})};const GD=Sb,HD=WD;var Ef=function(t,n){return GD(t,HD,n)},KD=function(t){if(typeof t!="string")throw new Error("String expected for conversion to snake case");return t.trim().replace(/(\s*\-*\b\w|[A-Z])/g,function(n){return n=n.trim().toLowerCase().replace("-",""),(n[0]==="_"?"":"_")+n}).slice(1)};const ZD=Sb,XD=KD;var rv=function(t,n){return ZD(t,XD,n)},Cf=function(t){return JSON.parse(JSON.stringify(t))};const YD={},JD=Object.freeze(Object.defineProperty({__proto__:null,default:YD},Symbol.toStringTag,{value:"Module"})),fP=nk(JD),QD=Ef,eO=rv,tO=Cf,rO=fP,nO=fP;let iO=class{constructor(t){t&&this.fromData(t)}fromData(t){if(typeof t!="object")throw new Error("Expecting object for Mail data");t=tO(t),t=QD(t);const{content:n,filename:a,type:u,disposition:f,contentId:o,filePath:v}=t;if(typeof n<"u"&&typeof v<"u")throw new Error("The props 'content' and 'filePath' cannot be used together.");this.setFilename(a),this.setType(u),this.setDisposition(f),this.setContentId(o),this.setContent(v?this.readFile(v):n)}readFile(t){return rO.readFileSync(nO.resolve(t))}setContent(t){if(typeof t=="string"){this.content=t;return}else if(t instanceof Buffer&&t.toString!==void 0){this.content=t.toString(),this.disposition==="attachment"&&(this.content=t.toString("base64"));return}throw new Error("`content` expected to be either Buffer or string")}setFileContent(t){if(t instanceof Buffer&&t.toString!==void 0){this.content=t.toString("base64");return}throw new Error("`content` expected to be Buffer")}setFilename(t){if(!(typeof t>"u")){if(t&&typeof t!="string")throw new Error("String expected for `filename`");this.filename=t}}setType(t){if(!(typeof t>"u")){if(typeof t!="string")throw new Error("String expected for `type`");this.type=t}}setDisposition(t){if(!(typeof t>"u")){if(typeof t!="string")throw new Error("String expected for `disposition`");this.disposition=t}}setContentId(t){if(!(typeof t>"u")){if(typeof t!="string")throw new Error("String expected for `contentId`");this.contentId=t}}toJSON(){const{content:t,filename:n,type:a,disposition:u,contentId:f}=this,o={content:t,filename:n};return typeof a<"u"&&(o.type=a),typeof u<"u"&&(o.disposition=u),typeof f<"u"&&(o.contentId=f),eO(o)}};var oO=iO,mP=function(t){if(t.indexOf("<")===-1)return["",t];let[n,a]=t.split("<");return n=n.trim(),a=a.replace(">","").trim(),[n,a]};const aO=mP;let sO=class Yx{constructor(t){t&&this.fromData(t)}fromData(t){if(typeof t=="string"){const[u,f]=aO(t);t={name:u,email:f}}if(typeof t!="object")throw new Error("Expecting object or string for EmailAddress data");const{name:n,email:a}=t;this.setEmail(a),this.setName(n)}setName(t){if(!(typeof t>"u")){if(typeof t!="string")throw new Error("String expected for `name`");this.name=t}}setEmail(t){if(typeof t>"u")throw new Error("Must provide `email`");if(typeof t!="string")throw new Error("String expected for `email`");this.email=t}toJSON(){const{email:t,name:n}=this,a={email:t};return n!==""&&(a.name=n),a}static create(t){return Array.isArray(t)?t.filter(n=>!!n).map(n=>this.create(n)):t instanceof Yx?t:new Yx(t)}};var Eb=sO,lO=function(t){return uO(t)&&!cO(t)};function uO(e){return!!e&&typeof e=="object"}function cO(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"||dO(e)}var pO=typeof Symbol=="function"&&Symbol.for,hO=pO?Symbol.for("react.element"):60103;function dO(e){return e.$$typeof===hO}function fO(e){return Array.isArray(e)?[]:{}}function cf(e,t){return t.clone!==!1&&t.isMergeableObject(e)?Xp(fO(e),e,t):e}function mO(e,t,n){return e.concat(t).map(function(a){return cf(a,n)})}function yO(e,t){if(!t.customMerge)return Xp;var n=t.customMerge(e);return typeof n=="function"?n:Xp}function gO(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return Object.propertyIsEnumerable.call(e,t)}):[]}function vE(e){return Object.keys(e).concat(gO(e))}function yP(e,t){try{return t in e}catch{return!1}}function vO(e,t){return yP(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))}function _O(e,t,n){var a={};return n.isMergeableObject(e)&&vE(e).forEach(function(u){a[u]=cf(e[u],n)}),vE(t).forEach(function(u){vO(e,u)||(yP(e,u)&&n.isMergeableObject(t[u])?a[u]=yO(u,n)(e[u],t[u],n):a[u]=cf(t[u],n))}),a}function Xp(e,t,n){n=n||{},n.arrayMerge=n.arrayMerge||mO,n.isMergeableObject=n.isMergeableObject||lO,n.cloneUnlessOtherwiseSpecified=cf;var a=Array.isArray(t),u=Array.isArray(e),f=a===u;return f?a?n.arrayMerge(e,t,n):_O(e,t,n):cf(t,n)}Xp.all=function(t,n){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(a,u){return Xp(a,u,n)},{})};var xO=Xp,bO=xO,gP=function e(t,n="{{",a="}}"){if(Array.isArray(t))return t.map(f=>e(f,n,a));const u={};for(const f in t)t.hasOwnProperty(f)&&(u[n+f+a]=String(t[f]));return u};const Bu=Eb,wO=Ef,SO=rv,EO=Cf,CO=bO,kO=gP;let TO=class{constructor(t){this.to=[],this.cc=[],this.bcc=[],this.headers={},this.customArgs={},this.substitutions={},this.substitutionWrappers=["{{","}}"],this.dynamicTemplateData={},t&&this.fromData(t)}fromData(t){if(typeof t!="object")throw new Error("Expecting object for Mail data");t=EO(t),t=wO(t,["substitutions","dynamicTemplateData","customArgs","headers"]);const{to:n,from:a,cc:u,bcc:f,subject:o,headers:v,customArgs:x,sendAt:E,substitutions:T,substitutionWrappers:I,dynamicTemplateData:P}=t;this.setTo(n),this.setFrom(a),this.setCc(u),this.setBcc(f),this.setSubject(o),this.setHeaders(v),this.setSubstitutions(T),this.setSubstitutionWrappers(I),this.setCustomArgs(x),this.setDynamicTemplateData(P),this.setSendAt(E)}setSubject(t){if(!(typeof t>"u")){if(typeof t!="string")throw new Error("String expected for `subject`");this.subject=t}}setSendAt(t){if(!(typeof t>"u")){if(!Number.isInteger(t))throw new Error("Integer expected for `sendAt`");this.sendAt=t}}setTo(t){typeof t>"u"||(Array.isArray(t)||(t=[t]),this.to=Bu.create(t))}setFrom(t){typeof t>"u"||(this.from=Bu.create(t))}addTo(t){typeof t>"u"||this.to.push(Bu.create(t))}setCc(t){typeof t>"u"||(Array.isArray(t)||(t=[t]),this.cc=Bu.create(t))}addCc(t){typeof t>"u"||this.cc.push(Bu.create(t))}setBcc(t){typeof t>"u"||(Array.isArray(t)||(t=[t]),this.bcc=Bu.create(t))}addBcc(t){typeof t>"u"||this.bcc.push(Bu.create(t))}setHeaders(t){if(!(typeof t>"u")){if(typeof t!="object"||t===null)throw new Error("Object expected for `headers`");this.headers=t}}addHeader(t,n){if(typeof t!="string")throw new Error("String expected for header key");if(typeof n!="string")throw new Error("String expected for header value");this.headers[t]=n}setCustomArgs(t){if(!(typeof t>"u")){if(typeof t!="object"||t===null)throw new Error("Object expected for `customArgs`");this.customArgs=t}}addCustomArg(t,n){if(typeof t!="string")throw new Error("String expected for custom arg key");if(typeof n!="string")throw new Error("String expected for custom arg value");this.customArgs[t]=n}setSubstitutions(t){if(!(typeof t>"u")){if(typeof t!="object")throw new Error("Object expected for `substitutions`");this.substitutions=t}}addSubstitution(t,n){if(typeof t!="string")throw new Error("String expected for substitution key");if(typeof n!="string"&&typeof n!="number")throw new Error("String or Number expected for substitution value");this.substitutions[t]=n}reverseMergeSubstitutions(t){if(!(typeof t>"u"||t===null)){if(typeof t!="object")throw new Error("Object expected for `substitutions` in reverseMergeSubstitutions");this.substitutions=Object.assign({},t,this.substitutions)}}setSubstitutionWrappers(t){if(!(typeof t>"u"||t===null)){if(!Array.isArray(t)||t.length!==2)throw new Error("Array expected with two elements for `substitutionWrappers`");this.substitutionWrappers=t}}deepMergeDynamicTemplateData(t){if(!(typeof t>"u"||t===null)){if(typeof t!="object")throw new Error("Object expected for `dynamicTemplateData` in deepMergeDynamicTemplateData");this.dynamicTemplateData=CO(t,this.dynamicTemplateData)}}setDynamicTemplateData(t){if(!(typeof t>"u")){if(typeof t!="object")throw new Error("Object expected for `dynamicTemplateData`");this.dynamicTemplateData=t}}toJSON(){const{to:t,from:n,cc:a,bcc:u,subject:f,headers:o,customArgs:v,sendAt:x,substitutions:E,substitutionWrappers:T,dynamicTemplateData:I}=this,P={to:t};if(Array.isArray(a)&&a.length>0&&(P.cc=a),Array.isArray(u)&&u.length>0&&(P.bcc=u),Object.keys(o).length>0&&(P.headers=o),E&&Object.keys(E).length>0){const[V,N]=T;P.substitutions=kO(E,V,N)}return Object.keys(v).length>0&&(P.customArgs=v),I&&Object.keys(I).length>0&&(P.dynamicTemplateData=I),typeof f<"u"&&(P.subject=f),typeof x<"u"&&(P.sendAt=x),typeof n<"u"&&(P.from=n),SO(P,["substitutions","dynamicTemplateData","customArgs","headers"])}};var vP=TO,_P=function(t){return t.map(n=>typeof n=="object"&&n!==null&&typeof n.toJSON=="function"?n.toJSON():n)};const IO=`
Content with characters ', " or & may need to be escaped with three brackets
{{{ content }}}
See https://sendgrid.com/docs/for-developers/sending-email/using-handlebars/ for more information.`;var PO={DYNAMIC_TEMPLATE_CHAR_WARNING:IO};const gn=(e,t,n,a)=>{if(!(typeof e>"u"||typeof e[n]>"u")&&typeof e[n]!==a)throw new Error(`${a} expected for \`${t}.${n}\``)};var AO={validateMailSettings(e){if(typeof e!="object")throw new Error("Object expected for `mailSettings`");const{bcc:t,bypassListManagement:n,bypassSpamManagement:a,bypassBounceManagement:u,bypassUnsubscribeManagement:f,footer:o,sandboxMode:v,spamCheck:x}=e;gn(t,"bcc","enable","boolean"),gn(t,"bcc","email","string"),gn(n,"bypassListManagement","enable","boolean"),gn(a,"bypassSpamManagement","enable","boolean"),gn(u,"bypassBounceManagement","enable","boolean"),gn(f,"bypassUnsubscribeManagement","enable","boolean"),gn(o,"footer","enable","boolean"),gn(o,"footer","text","string"),gn(o,"footer","html","string"),gn(v,"sandboxMode","enable","boolean"),gn(x,"spamCheck","enable","boolean"),gn(x,"spamCheck","threshold","number"),gn(x,"spamCheck","postToUrl","string")},validateTrackingSettings(e){if(typeof e!="object")throw new Error("Object expected for `trackingSettings`");const{clickTracking:t,openTracking:n,subscriptionTracking:a,ganalytics:u}=e;gn(t,"clickTracking","enable","boolean"),gn(t,"clickTracking","enableText","boolean"),gn(n,"openTracking","enable","boolean"),gn(n,"openTracking","substitutionTag","string"),gn(a,"subscriptionTracking","enable","boolean"),gn(a,"subscriptionTracking","text","string"),gn(a,"subscriptionTracking","html","string"),gn(a,"subscriptionTracking","substitutionTag","string"),gn(u,"ganalytics","enable","boolean"),gn(u,"ganalytics","utm_source","string"),gn(u,"ganalytics","utm_medium","string"),gn(u,"ganalytics","utm_term","string"),gn(u,"ganalytics","utm_content","string"),gn(u,"ganalytics","utm_campaign","string")}};const _E=Eb,yd=vP,MO=Ef,zO=rv,RO=Cf,B_=_P,{DYNAMIC_TEMPLATE_CHAR_WARNING:LO}=PO,{validateMailSettings:DO,validateTrackingSettings:OO}=AO;let BO=class Jx{constructor(t){this.isDynamic=!1,this.hideWarnings=!1,this.personalizations=[],this.attachments=[],this.content=[],this.categories=[],this.headers={},this.sections={},this.customArgs={},this.trackingSettings={},this.mailSettings={},this.asm={},this.substitutions=null,this.substitutionWrappers=null,this.dynamicTemplateData=null,t&&this.fromData(t)}fromData(t){if(typeof t!="object")throw new Error("Expecting object for Mail data");t=RO(t),t=MO(t,["substitutions","dynamicTemplateData","customArgs","headers","sections"]);const{to:n,from:a,replyTo:u,cc:f,bcc:o,sendAt:v,subject:x,text:E,html:T,content:I,templateId:P,personalizations:V,attachments:N,ipPoolName:q,batchId:J,sections:U,headers:F,categories:R,category:O,customArgs:Q,asm:se,mailSettings:pe,trackingSettings:_e,substitutions:ze,substitutionWrappers:he,dynamicTemplateData:we,isMultiple:ie,hideWarnings:ge,replyToList:Ne}=t;this.setFrom(a),this.setReplyTo(u),this.setSubject(x),this.setSendAt(v),this.setTemplateId(P),this.setBatchId(J),this.setIpPoolName(q),this.setAttachments(N),this.setContent(I),this.setSections(U),this.setHeaders(F),this.setCategories(O),this.setCategories(R),this.setCustomArgs(Q),this.setAsm(se),this.setMailSettings(pe),this.setTrackingSettings(_e),this.setHideWarnings(ge),this.setReplyToList(Ne),this.isDynamic?this.setDynamicTemplateData(we):(this.setSubstitutions(ze),this.setSubstitutionWrappers(he)),this.addTextContent(E),this.addHtmlContent(T),V?this.setPersonalizations(V):ie&&Array.isArray(n)?n.forEach(qe=>this.addTo(qe,f,o)):this.addTo(n,f,o)}setFrom(t){if(this._checkProperty("from",t,[this._checkUndefined])){if(typeof t!="string"&&typeof t.email!="string")throw new Error("String or address object expected for `from`");this.from=_E.create(t)}}setReplyTo(t){if(this._checkProperty("replyTo",t,[this._checkUndefined])){if(typeof t!="string"&&typeof t.email!="string")throw new Error("String or address object expected for `replyTo`");this.replyTo=_E.create(t)}}setSubject(t){this._setProperty("subject",t,"string")}setSendAt(t){this._checkProperty("sendAt",t,[this._checkUndefined,this._createCheckThatThrows(Number.isInteger,"Integer expected for `sendAt`")])&&(this.sendAt=t)}setTemplateId(t){this._setProperty("templateId",t,"string")&&t.indexOf("d-")===0&&(this.isDynamic=!0)}setBatchId(t){this._setProperty("batchId",t,"string")}setIpPoolName(t){this._setProperty("ipPoolName",t,"string")}setAsm(t){if(this._checkProperty("asm",t,[this._checkUndefined,this._createTypeCheck("object")])){if(typeof t.groupId!="number")throw new Error("Expected `asm` to include an integer in its `groupId` field");if(t.groupsToDisplay&&(!Array.isArray(t.groupsToDisplay)||!t.groupsToDisplay.every(n=>typeof n=="number")))throw new Error("Array of integers expected for `asm.groupsToDisplay`");this.asm=t}}setPersonalizations(t){if(this._doArrayCheck("personalizations",t)){if(!t.every(n=>typeof n=="object"))throw new Error("Array of objects expected for `personalizations`");this.personalizations=[],t.forEach(n=>this.addPersonalization(n))}}addPersonalization(t){this.isDynamic&&t.substitutions?delete t.substitutions:!this.isDynamic&&t.dynamicTemplateData&&delete t.dynamicTemplateData,t instanceof yd||(t=new yd(t)),this.isDynamic?this.applyDynamicTemplateData(t):this.applySubstitutions(t),this.personalizations.push(t)}addTo(t,n,a){if(typeof t>"u"&&typeof n>"u"&&typeof a>"u")throw new Error("Provide at least one of to, cc or bcc");this.addPersonalization(new yd({to:t,cc:n,bcc:a}))}setSubstitutions(t){this._setProperty("substitutions",t,"object")}setSubstitutionWrappers(t){let n=(a,u)=>{if(!Array.isArray(u)||u.length!==2)throw new Error("Array expected with two elements for `"+a+"`")};this._checkProperty("substitutionWrappers",t,[this._checkUndefined,n])&&(this.substitutionWrappers=t)}applySubstitutions(t){t instanceof yd&&(t.reverseMergeSubstitutions(this.substitutions),t.setSubstitutionWrappers(this.substitutionWrappers))}applyDynamicTemplateData(t){t instanceof yd&&t.deepMergeDynamicTemplateData(this.dynamicTemplateData)}setDynamicTemplateData(t){if(!(typeof t>"u")){if(typeof t!="object")throw new Error("Object expected for `dynamicTemplateData`");this.hideWarnings||Object.values(t).forEach(n=>{/['"&]/.test(n)&&console.warn(LO)}),this.dynamicTemplateData=t}}setContent(t){if(this._doArrayCheck("content",t)){if(!t.every(n=>typeof n=="object"))throw new Error("Expected each entry in `content` to be an object");if(!t.every(n=>typeof n.type=="string"))throw new Error("Expected each `content` entry to contain a `type` string");if(!t.every(n=>typeof n.value=="string"))throw new Error("Expected each `content` entry to contain a `value` string");this.content=t}}addContent(t){this._checkProperty("content",t,[this._createTypeCheck("object")])&&this.content.push(t)}addTextContent(t){this._checkProperty("text",t,[this._checkUndefined,this._createTypeCheck("string")])&&this.addContent({value:t,type:"text/plain"})}addHtmlContent(t){this._checkProperty("html",t,[this._checkUndefined,this._createTypeCheck("string")])&&this.addContent({value:t,type:"text/html"})}setAttachments(t){if(this._doArrayCheck("attachments",t)){if(!t.every(n=>typeof n.content=="string"))throw new Error("Expected each attachment to contain a `content` string");if(!t.every(n=>typeof n.filename=="string"))throw new Error("Expected each attachment to contain a `filename` string");if(!t.every(n=>!n.type||typeof n.type=="string"))throw new Error("Expected the attachment's `type` field to be a string");if(!t.every(n=>!n.disposition||typeof n.disposition=="string"))throw new Error("Expected the attachment's `disposition` field to be a string");this.attachments=t}}addAttachment(t){this._checkProperty("attachment",t,[this._checkUndefined,this._createTypeCheck("object")])&&this.attachments.push(t)}setCategories(t){let n=(a,u)=>{if(!Array.isArray(u)||!u.every(f=>typeof f=="string"))throw new Error("Array of strings expected for `"+a+"`")};typeof t=="string"&&(t=[t]),this._checkProperty("categories",t,[this._checkUndefined,n])&&(this.categories=t)}addCategory(t){this._checkProperty("category",t,[this._createTypeCheck("string")])&&this.categories.push(t)}setHeaders(t){this._setProperty("headers",t,"object")}addHeader(t,n){this._checkProperty("key",t,[this._createTypeCheck("string")])&&this._checkProperty("value",n,[this._createTypeCheck("string")])&&(this.headers[t]=n)}setSections(t){this._setProperty("sections",t,"object")}setCustomArgs(t){this._setProperty("customArgs",t,"object")}setTrackingSettings(t){typeof t>"u"||(OO(t),this.trackingSettings=t)}setMailSettings(t){typeof t>"u"||(DO(t),this.mailSettings=t)}setHideWarnings(t){if(!(typeof t>"u")){if(typeof t!="boolean")throw new Error("Boolean expected for `hideWarnings`");this.hideWarnings=t}}toJSON(){const{from:t,replyTo:n,sendAt:a,subject:u,content:f,templateId:o,personalizations:v,attachments:x,ipPoolName:E,batchId:T,asm:I,sections:P,headers:V,categories:N,customArgs:q,mailSettings:J,trackingSettings:U,replyToList:F}=this,R={from:t,subject:u,personalizations:B_(v)};return Array.isArray(x)&&x.length>0&&(R.attachments=B_(x)),Array.isArray(N)&&N.length>0&&(R.categories=N.filter(O=>O!=="")),Array.isArray(f)&&f.length>0&&(R.content=B_(f)),Object.keys(V).length>0&&(R.headers=V),Object.keys(J).length>0&&(R.mailSettings=J),Object.keys(U).length>0&&(R.trackingSettings=U),Object.keys(q).length>0&&(R.customArgs=q),Object.keys(P).length>0&&(R.sections=P),Object.keys(I).length>0&&(R.asm=I),typeof n<"u"&&(R.replyTo=n),typeof a<"u"&&(R.sendAt=a),typeof T<"u"&&(R.batchId=T),typeof o<"u"&&(R.templateId=o),typeof E<"u"&&(R.ipPoolName=E),typeof F<"u"&&(R.replyToList=F),zO(R,["substitutions","dynamicTemplateData","customArgs","headers","sections"])}static create(t){return Array.isArray(t)?t.filter(n=>!!n).map(n=>this.create(n)):t instanceof Jx?t:new Jx(t)}_checkProperty(t,n,a){return!a.some(u=>u(t,n))}_setProperty(t,n,a){let u=this._checkProperty(t,n,[this._checkUndefined,this._createTypeCheck(a)]);return u&&(this[t]=n),u}_checkUndefined(t,n){return typeof n>"u"}_createTypeCheck(t){return(n,a)=>{if(typeof a!==t)throw new Error(t+" expected for `"+n+"`")}}_createCheckThatThrows(t,n){return(a,u)=>{if(!t(u))throw new Error(n)}}_setArrayProperty(t,n){this._doArrayCheck(t,n)&&(this[t]=n)}_doArrayCheck(t,n){return this._checkProperty(t,n,[this._checkUndefined,this._createCheckThatThrows(Array.isArray,"Array expected for`"+t+"`")])}setReplyToList(t){if(this._doArrayCheck("replyToList",t)&&t.length){if(!t.every(n=>n&&typeof n.email=="string"))throw new Error("Expected each replyTo to contain an `email` string");this.replyToList=t}}};var NO=BO;let FO=class{constructor(t,n,a){this.statusCode=t,this.body=n,this.headers=a}toString(){return"HTTP "+this.statusCode+" "+this.body}};var jO=FO;let UO=class extends Error{constructor(t){super();const{headers:n,status:a,statusText:u,data:f}=t;this.code=a,this.message=u,this.response={headers:n,body:f},this.stack||Error.captureStackTrace(this,this.constructor);const o=new RegExp(process.cwd()+"/","gi");this.stack=this.stack.replace(o,"")}toString(){const{body:t}=this.response;let n=`${this.message} (${this.code})`;return t&&Array.isArray(t.errors)&&t.errors.forEach(a=>{const u=a.message,f=a.field,o=a.help;n+=`
  ${u}
    ${f}
    ${o}`}),n}toJSON(){const{message:t,code:n,response:a}=this;return{message:t,code:n,response:a}}};var $O=UO;const VO=Ef,qO=Cf,WO=["day","week","month"],GO=["us","ca"],ay=["desc","asc"];let HO=class{constructor(t){this.startDate=null,this.endDate=null,this.aggregatedBy=null,t&&this.fromData(t)}fromData(t){if(typeof t!="object")throw new Error("Expecting object for Statistics data");t=qO(t),t=VO(t,["substitutions","customArgs"]);const{startDate:n,endDate:a,aggregatedBy:u}=t;this.setStartDate(n),this.setEndDate(a),this.setAggregatedBy(u)}setStartDate(t){if(typeof t>"u")throw new Error("Date expected for `startDate`");if(new Date(t)==="Invalid Date"||isNaN(new Date(t)))throw new Error("Date expected for `startDate`");console.log(t),this.startDate=new Date(t).toISOString().slice(0,10)}setEndDate(t){if(typeof t>"u"){this.endDate=new Date().toISOString().slice(0,10);return}if(new Date(t)==="Invalid Date"||isNaN(new Date(t)))throw new Error("Date expected for `endDate`");this.endDate=new Date(t).toISOString().slice(0,10)}setAggregatedBy(t){if(!(typeof t>"u"))if(typeof t=="string"&&WO.includes(t.toLowerCase()))this.aggregatedBy=t;else throw new Error("Incorrect value for `aggregatedBy`")}getGlobal(){const{startDate:t,endDate:n,aggregatedBy:a}=this;return{startDate:t,endDate:n,aggregatedBy:a}}getAdvanced(t){const n=this.getGlobal();return typeof t>"u"||typeof t=="string"&&GO.includes(t.toLowerCase())&&(n.country=t),n}getAdvancedMailboxProviders(t){const n=this.getGlobal();if(typeof t>"u")return n;if(Array.isArray(t)&&t.some(a=>typeof a!="string"))throw new Error("Array of strings expected for `mailboxProviders`");return n.mailBoxProviders=t,n}getAdvancedBrowsers(t){const n=this.getGlobal();if(typeof t>"u")return n;if(Array.isArray(t)&&t.some(a=>typeof a!="string"))throw new Error("Array of strings expected for `browsers`");return n.browsers=t,n}getCategories(t){if(typeof t>"u")throw new Error("Array of strings expected for `categories`");if(!this._isValidArrayOfStrings(t))throw new Error("Array of strings expected for `categories`");const n=this.getGlobal();return n.categories=t,n}getSubuser(t){if(typeof t>"u")throw new Error("Array of strings expected for `subusers`");if(!this._isValidArrayOfStrings(t))throw new Error("Array of strings expected for `subusers`");const n=this.getGlobal();return n.subusers=t,n}getSubuserSum(t="delivered",n=ay[0],a=5,u=0){if(typeof t!="string")throw new Error("string expected for `sortByMetric`");if(!ay.includes(n.toLowerCase()))throw new Error("desc or asc expected for `sortByDirection`");if(typeof a!="number")throw new Error("number expected for `limit`");if(typeof u!="number")throw new Error("number expected for `offset`");const f=this.getGlobal();return f.sortByMetric=t,f.sortByDirection=n,f.limit=a,f.offset=u,f}getSubuserMonthly(t="delivered",n=ay[0],a=5,u=0){if(typeof t!="string")throw new Error("string expected for `sortByMetric`");if(!ay.includes(n.toLowerCase()))throw new Error("desc or asc expected for `sortByDirection`");if(typeof a!="number")throw new Error("number expected for `limit`");if(typeof u!="number")throw new Error("number expected for `offset`");const f=this.getGlobal();return f.sortByMetric=t,f.sortByDirection=n,f.limit=a,f.offset=u,f}_isValidArrayOfStrings(t){return!(!Array.isArray(t)||t.length<1||t.some(n=>typeof n!="string"))}};var KO=HO;const ZO=oO,XO=Eb,YO=NO,JO=vP,QO=jO,eB=$O,tB=KO;var rB={Attachment:ZO,EmailAddress:XO,Mail:YO,Personalization:JO,Response:QO,ResponseError:eB,Statistics:tB},nB=function(t,n){if(typeof t!="object"||t===null)throw new Error("Not an object provided for base");if(typeof n!="object"||n===null)throw new Error("Not an object provided for data");const a=Object.assign({},t);for(const u in n)n.hasOwnProperty(u)&&(n[u]&&Array.isArray(n[u])?a[u]=n[u]:n[u]&&typeof n[u]=="object"?a[u]=Object.assign({},n[u]):n[u]&&(a[u]=n[u]));return a};const iB=_P,oB=Sb,aB=Cf,sB=nB,lB=mP,uB=Ef,cB=rv,pB=gP;var hB={arrayToJSON:iB,convertKeys:oB,deepClone:aB,mergeData:sB,splitNameEmail:lB,toCamelCase:uB,toSnakeCase:cB,wrapSubstitutions:pB};const dB=rB,fB=hB;var xP={classes:dB,helpers:fB};const mB=TD,yB=qD,{helpers:{mergeData:xE},classes:{Response:gB,ResponseError:vB}}=xP,bE="SG.",wE="https://api.sendgrid.com/",_B="https://email.twilio.com/";let xB=class{constructor(){this.auth="",this.impersonateSubuser="",this.defaultHeaders={Accept:"application/json","Content-Type":"application/json","User-Agent":"sendgrid/"+yB.version+";nodejs"},this.defaultRequest={baseUrl:wE,url:"",method:"GET",headers:{},maxContentLength:1/0,maxBodyLength:1/0}}setApiKey(t){this.auth="Bearer "+t,this.setDefaultRequest("baseUrl",wE),this.isValidApiKey(t)||console.warn(`API key does not start with "${bE}".`)}setTwilioEmailAuth(t,n){const a=Buffer.from(t+":"+n).toString("base64");this.auth="Basic "+a,this.setDefaultRequest("baseUrl",_B),this.isValidTwilioAuth(t,n)||console.warn("Twilio Email credentials must be non-empty strings.")}isValidApiKey(t){return this.isString(t)&&t.trim().startsWith(bE)}isValidTwilioAuth(t,n){return this.isString(t)&&t&&this.isString(n)&&n}isString(t){return typeof t=="string"||t instanceof String}setImpersonateSubuser(t){this.impersonateSubuser=t}setDefaultHeader(t,n){return t!==null&&typeof t=="object"?(Object.assign(this.defaultHeaders,t),this):(this.defaultHeaders[t]=n,this)}setDefaultRequest(t,n){return t!==null&&typeof t=="object"?(Object.assign(this.defaultRequest,t),this):(this.defaultRequest[t]=n,this)}createHeaders(t){const n=xE(this.defaultHeaders,t);return typeof n.Authorization>"u"&&this.auth&&(n.Authorization=this.auth),this.impersonateSubuser&&(n["On-Behalf-Of"]=this.impersonateSubuser),n}createRequest(t){let n={url:t.uri||t.url,baseUrl:t.baseUrl,method:t.method,data:t.body,params:t.qs,headers:t.headers};return n=xE(this.defaultRequest,n),n.headers=this.createHeaders(n.headers),n.baseURL=n.baseUrl,delete n.baseUrl,n}request(t,n){t=this.createRequest(t);const a=new Promise((u,f)=>{mB(t).then(o=>u([new gB(o.status,o.data,o.headers),o.data])).catch(o=>o.response&&o.response.status>=400?f(new vB(o.response)):f(o))});if(n&&typeof n!="function")throw new Error("Callback passed is not a function.");return n?a.then(u=>n(null,u)).catch(u=>n(u,null)):a}};var bP=xB;const bB=bP;var wB=new bB;const SB=wB,EB=bP;gb.exports=SB;gb.exports.Client=EB;var CB=gb.exports;const{Client:kB}=CB,{classes:{Mail:TB}}=xP;let IB=class{constructor(){this.setClient(new kB),this.setSubstitutionWrappers("{{","}}"),this.secretRules=[]}setClient(t){return this.client=t,this}setApiKey(t){return this.client.setApiKey(t),this}setTwilioEmailAuth(t,n){this.client.setTwilioEmailAuth(t,n)}setTimeout(t){typeof t>"u"||this.client.setDefaultRequest("timeout",t)}setSubstitutionWrappers(t,n){if(typeof t>"u"||typeof n>"u")throw new Error("Must provide both left and right side wrappers");return Array.isArray(this.substitutionWrappers)||(this.substitutionWrappers=[]),this.substitutionWrappers[0]=t,this.substitutionWrappers[1]=n,this}setSecretRules(t){t instanceof Array||(t=[t]);const n=t.map(function(a){const u=typeof a;if(u==="string")return{pattern:new RegExp(a)};if(u==="object"){a instanceof RegExp?a={pattern:a}:a.hasOwnProperty("pattern")&&typeof a.pattern=="string"&&(a.pattern=new RegExp(a.pattern));try{return a.pattern.test(""),a}catch{}}});this.secretRules=n.filter(function(a){return a})}filterSecrets(t){if(typeof t=="object"&&!t.hasOwnProperty("content"))return;const n=this;t.content.forEach(function(a){n.secretRules.forEach(function(u){if(u.hasOwnProperty("pattern")&&!u.pattern.test(a.value))return;let f=`The pattern '${u.pattern}'`;throw u.name&&(f+=`identified by '${u.name}'`),f+=" was found in the Mail content!",new Error(f)})})}send(t,n=!1,a){if(typeof n=="function"&&(a=n,n=!1),Array.isArray(t)){const u=Promise.all(t.map(f=>this.send(f,n)));return a&&u.then(f=>a(null,f)).catch(f=>a(f,null)),u}try{typeof t.isMultiple>"u"&&(t.isMultiple=n),typeof t.substitutionWrappers>"u"&&(t.substitutionWrappers=this.substitutionWrappers);const u=TB.create(t),f=u.toJSON();this.filterSecrets(f);const o={method:"POST",url:"/v3/mail/send",headers:u.headers,body:f};return this.client.request(o,a)}catch(u){return a&&a(u,null),Promise.reject(u)}}sendMultiple(t,n){return this.send(t,!0,n)}};var wP=IB;const PB=wP;var AB=new PB;const MB=AB,zB=wP;QI.exports=MB;QI.exports.MailService=zB;function zy(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function RB(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function SP(e){let t,n,a;e.length!==2?(t=zy,n=(v,x)=>zy(e(v),x),a=(v,x)=>e(v)-x):(t=e===zy||e===RB?e:LB,n=e,a=e);function u(v,x,E=0,T=v.length){if(E<T){if(t(x,x)!==0)return T;do{const I=E+T>>>1;n(v[I],x)<0?E=I+1:T=I}while(E<T)}return E}function f(v,x,E=0,T=v.length){if(E<T){if(t(x,x)!==0)return T;do{const I=E+T>>>1;n(v[I],x)<=0?E=I+1:T=I}while(E<T)}return E}function o(v,x,E=0,T=v.length){const I=u(v,x,E,T-1);return I>E&&a(v[I-1],x)>-a(v[I],x)?I-1:I}return{left:u,center:o,right:f}}function LB(){return 0}function DB(e){return e===null?NaN:+e}const OB=SP(zy),BB=OB.right;SP(DB).center;const NB=BB;class SE extends Map{constructor(t,n=UB){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[a,u]of t)this.set(a,u)}get(t){return super.get(EE(this,t))}has(t){return super.has(EE(this,t))}set(t,n){return super.set(FB(this,t),n)}delete(t){return super.delete(jB(this,t))}}function EE({_intern:e,_key:t},n){const a=t(n);return e.has(a)?e.get(a):n}function FB({_intern:e,_key:t},n){const a=t(n);return e.has(a)?e.get(a):(e.set(a,n),n)}function jB({_intern:e,_key:t},n){const a=t(n);return e.has(a)&&(n=e.get(a),e.delete(a)),n}function UB(e){return e!==null&&typeof e=="object"?e.valueOf():e}const $B=Math.sqrt(50),VB=Math.sqrt(10),qB=Math.sqrt(2);function fg(e,t,n){const a=(t-e)/Math.max(0,n),u=Math.floor(Math.log10(a)),f=a/Math.pow(10,u),o=f>=$B?10:f>=VB?5:f>=qB?2:1;let v,x,E;return u<0?(E=Math.pow(10,-u)/o,v=Math.round(e*E),x=Math.round(t*E),v/E<e&&++v,x/E>t&&--x,E=-E):(E=Math.pow(10,u)*o,v=Math.round(e/E),x=Math.round(t/E),v*E<e&&++v,x*E>t&&--x),x<v&&.5<=n&&n<2?fg(e,t,n*2):[v,x,E]}function WB(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const a=t<e,[u,f,o]=a?fg(t,e,n):fg(e,t,n);if(!(f>=u))return[];const v=f-u+1,x=new Array(v);if(a)if(o<0)for(let E=0;E<v;++E)x[E]=(f-E)/-o;else for(let E=0;E<v;++E)x[E]=(f-E)*o;else if(o<0)for(let E=0;E<v;++E)x[E]=(u+E)/-o;else for(let E=0;E<v;++E)x[E]=(u+E)*o;return x}function Qx(e,t,n){return t=+t,e=+e,n=+n,fg(e,t,n)[2]}function GB(e,t,n){t=+t,e=+e,n=+n;const a=t<e,u=a?Qx(t,e,n):Qx(e,t,n);return(a?-1:1)*(u<0?1/-u:u)}function HB(e,t){let n=0;if(t===void 0)for(let a of e)(a=+a)&&(n+=a);else{let a=-1;for(let u of e)(u=+t(u,++a,e))&&(n+=u)}return n}var KB={value:()=>{}};function EP(){for(var e=0,t=arguments.length,n={},a;e<t;++e){if(!(a=arguments[e]+"")||a in n||/[\s.]/.test(a))throw new Error("illegal type: "+a);n[a]=[]}return new Ry(n)}function Ry(e){this._=e}function ZB(e,t){return e.trim().split(/^|\s+/).map(function(n){var a="",u=n.indexOf(".");if(u>=0&&(a=n.slice(u+1),n=n.slice(0,u)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:a}})}Ry.prototype=EP.prototype={constructor:Ry,on:function(e,t){var n=this._,a=ZB(e+"",n),u,f=-1,o=a.length;if(arguments.length<2){for(;++f<o;)if((u=(e=a[f]).type)&&(u=XB(n[u],e.name)))return u;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++f<o;)if(u=(e=a[f]).type)n[u]=CE(n[u],e.name,t);else if(t==null)for(u in n)n[u]=CE(n[u],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Ry(e)},call:function(e,t){if((u=arguments.length-2)>0)for(var n=new Array(u),a=0,u,f;a<u;++a)n[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(f=this._[e],a=0,u=f.length;a<u;++a)f[a].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var a=this._[e],u=0,f=a.length;u<f;++u)a[u].value.apply(t,n)}};function XB(e,t){for(var n=0,a=e.length,u;n<a;++n)if((u=e[n]).name===t)return u.value}function CE(e,t,n){for(var a=0,u=e.length;a<u;++a)if(e[a].name===t){e[a]=KB,e=e.slice(0,a).concat(e.slice(a+1));break}return n!=null&&e.push({name:t,value:n}),e}var e1="http://www.w3.org/1999/xhtml";const kE={svg:"http://www.w3.org/2000/svg",xhtml:e1,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function nv(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),kE.hasOwnProperty(t)?{space:kE[t],local:e}:e}function YB(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===e1&&t.documentElement.namespaceURI===e1?t.createElement(e):t.createElementNS(n,e)}}function JB(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function CP(e){var t=nv(e);return(t.local?JB:YB)(t)}function QB(){}function Cb(e){return e==null?QB:function(){return this.querySelector(e)}}function eN(e){typeof e!="function"&&(e=Cb(e));for(var t=this._groups,n=t.length,a=new Array(n),u=0;u<n;++u)for(var f=t[u],o=f.length,v=a[u]=new Array(o),x,E,T=0;T<o;++T)(x=f[T])&&(E=e.call(x,x.__data__,T,f))&&("__data__"in x&&(E.__data__=x.__data__),v[T]=E);return new Qo(a,this._parents)}function tN(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function rN(){return[]}function kP(e){return e==null?rN:function(){return this.querySelectorAll(e)}}function nN(e){return function(){return tN(e.apply(this,arguments))}}function iN(e){typeof e=="function"?e=nN(e):e=kP(e);for(var t=this._groups,n=t.length,a=[],u=[],f=0;f<n;++f)for(var o=t[f],v=o.length,x,E=0;E<v;++E)(x=o[E])&&(a.push(e.call(x,x.__data__,E,o)),u.push(x));return new Qo(a,u)}function TP(e){return function(){return this.matches(e)}}function IP(e){return function(t){return t.matches(e)}}var oN=Array.prototype.find;function aN(e){return function(){return oN.call(this.children,e)}}function sN(){return this.firstElementChild}function lN(e){return this.select(e==null?sN:aN(typeof e=="function"?e:IP(e)))}var uN=Array.prototype.filter;function cN(){return Array.from(this.children)}function pN(e){return function(){return uN.call(this.children,e)}}function hN(e){return this.selectAll(e==null?cN:pN(typeof e=="function"?e:IP(e)))}function dN(e){typeof e!="function"&&(e=TP(e));for(var t=this._groups,n=t.length,a=new Array(n),u=0;u<n;++u)for(var f=t[u],o=f.length,v=a[u]=[],x,E=0;E<o;++E)(x=f[E])&&e.call(x,x.__data__,E,f)&&v.push(x);return new Qo(a,this._parents)}function PP(e){return new Array(e.length)}function fN(){return new Qo(this._enter||this._groups.map(PP),this._parents)}function mg(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}mg.prototype={constructor:mg,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function mN(e){return function(){return e}}function yN(e,t,n,a,u,f){for(var o=0,v,x=t.length,E=f.length;o<E;++o)(v=t[o])?(v.__data__=f[o],a[o]=v):n[o]=new mg(e,f[o]);for(;o<x;++o)(v=t[o])&&(u[o]=v)}function gN(e,t,n,a,u,f,o){var v,x,E=new Map,T=t.length,I=f.length,P=new Array(T),V;for(v=0;v<T;++v)(x=t[v])&&(P[v]=V=o.call(x,x.__data__,v,t)+"",E.has(V)?u[v]=x:E.set(V,x));for(v=0;v<I;++v)V=o.call(e,f[v],v,f)+"",(x=E.get(V))?(a[v]=x,x.__data__=f[v],E.delete(V)):n[v]=new mg(e,f[v]);for(v=0;v<T;++v)(x=t[v])&&E.get(P[v])===x&&(u[v]=x)}function vN(e){return e.__data__}function _N(e,t){if(!arguments.length)return Array.from(this,vN);var n=t?gN:yN,a=this._parents,u=this._groups;typeof e!="function"&&(e=mN(e));for(var f=u.length,o=new Array(f),v=new Array(f),x=new Array(f),E=0;E<f;++E){var T=a[E],I=u[E],P=I.length,V=xN(e.call(T,T&&T.__data__,E,a)),N=V.length,q=v[E]=new Array(N),J=o[E]=new Array(N),U=x[E]=new Array(P);n(T,I,q,J,U,V,t);for(var F=0,R=0,O,Q;F<N;++F)if(O=q[F]){for(F>=R&&(R=F+1);!(Q=J[R])&&++R<N;);O._next=Q||null}}return o=new Qo(o,a),o._enter=v,o._exit=x,o}function xN(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function bN(){return new Qo(this._exit||this._groups.map(PP),this._parents)}function wN(e,t,n){var a=this.enter(),u=this,f=this.exit();return typeof e=="function"?(a=e(a),a&&(a=a.selection())):a=a.append(e+""),t!=null&&(u=t(u),u&&(u=u.selection())),n==null?f.remove():n(f),a&&u?a.merge(u).order():u}function SN(e){for(var t=e.selection?e.selection():e,n=this._groups,a=t._groups,u=n.length,f=a.length,o=Math.min(u,f),v=new Array(u),x=0;x<o;++x)for(var E=n[x],T=a[x],I=E.length,P=v[x]=new Array(I),V,N=0;N<I;++N)(V=E[N]||T[N])&&(P[N]=V);for(;x<u;++x)v[x]=n[x];return new Qo(v,this._parents)}function EN(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var a=e[t],u=a.length-1,f=a[u],o;--u>=0;)(o=a[u])&&(f&&o.compareDocumentPosition(f)^4&&f.parentNode.insertBefore(o,f),f=o);return this}function CN(e){e||(e=kN);function t(I,P){return I&&P?e(I.__data__,P.__data__):!I-!P}for(var n=this._groups,a=n.length,u=new Array(a),f=0;f<a;++f){for(var o=n[f],v=o.length,x=u[f]=new Array(v),E,T=0;T<v;++T)(E=o[T])&&(x[T]=E);x.sort(t)}return new Qo(u,this._parents).order()}function kN(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function TN(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function IN(){return Array.from(this)}function PN(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var a=e[t],u=0,f=a.length;u<f;++u){var o=a[u];if(o)return o}return null}function AN(){let e=0;for(const t of this)++e;return e}function MN(){return!this.node()}function zN(e){for(var t=this._groups,n=0,a=t.length;n<a;++n)for(var u=t[n],f=0,o=u.length,v;f<o;++f)(v=u[f])&&e.call(v,v.__data__,f,u);return this}function RN(e){return function(){this.removeAttribute(e)}}function LN(e){return function(){this.removeAttributeNS(e.space,e.local)}}function DN(e,t){return function(){this.setAttribute(e,t)}}function ON(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function BN(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function NN(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function FN(e,t){var n=nv(e);if(arguments.length<2){var a=this.node();return n.local?a.getAttributeNS(n.space,n.local):a.getAttribute(n)}return this.each((t==null?n.local?LN:RN:typeof t=="function"?n.local?NN:BN:n.local?ON:DN)(n,t))}function AP(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function jN(e){return function(){this.style.removeProperty(e)}}function UN(e,t,n){return function(){this.style.setProperty(e,t,n)}}function $N(e,t,n){return function(){var a=t.apply(this,arguments);a==null?this.style.removeProperty(e):this.style.setProperty(e,a,n)}}function VN(e,t,n){return arguments.length>1?this.each((t==null?jN:typeof t=="function"?$N:UN)(e,t,n??"")):Yp(this.node(),e)}function Yp(e,t){return e.style.getPropertyValue(t)||AP(e).getComputedStyle(e,null).getPropertyValue(t)}function qN(e){return function(){delete this[e]}}function WN(e,t){return function(){this[e]=t}}function GN(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function HN(e,t){return arguments.length>1?this.each((t==null?qN:typeof t=="function"?GN:WN)(e,t)):this.node()[e]}function MP(e){return e.trim().split(/^|\s+/)}function kb(e){return e.classList||new zP(e)}function zP(e){this._node=e,this._names=MP(e.getAttribute("class")||"")}zP.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function RP(e,t){for(var n=kb(e),a=-1,u=t.length;++a<u;)n.add(t[a])}function LP(e,t){for(var n=kb(e),a=-1,u=t.length;++a<u;)n.remove(t[a])}function KN(e){return function(){RP(this,e)}}function ZN(e){return function(){LP(this,e)}}function XN(e,t){return function(){(t.apply(this,arguments)?RP:LP)(this,e)}}function YN(e,t){var n=MP(e+"");if(arguments.length<2){for(var a=kb(this.node()),u=-1,f=n.length;++u<f;)if(!a.contains(n[u]))return!1;return!0}return this.each((typeof t=="function"?XN:t?KN:ZN)(n,t))}function JN(){this.textContent=""}function QN(e){return function(){this.textContent=e}}function e6(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function t6(e){return arguments.length?this.each(e==null?JN:(typeof e=="function"?e6:QN)(e)):this.node().textContent}function r6(){this.innerHTML=""}function n6(e){return function(){this.innerHTML=e}}function i6(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function o6(e){return arguments.length?this.each(e==null?r6:(typeof e=="function"?i6:n6)(e)):this.node().innerHTML}function a6(){this.nextSibling&&this.parentNode.appendChild(this)}function s6(){return this.each(a6)}function l6(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function u6(){return this.each(l6)}function c6(e){var t=typeof e=="function"?e:CP(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function p6(){return null}function h6(e,t){var n=typeof e=="function"?e:CP(e),a=t==null?p6:typeof t=="function"?t:Cb(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),a.apply(this,arguments)||null)})}function d6(){var e=this.parentNode;e&&e.removeChild(this)}function f6(){return this.each(d6)}function m6(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function y6(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function g6(e){return this.select(e?y6:m6)}function v6(e){return arguments.length?this.property("__data__",e):this.node().__data__}function _6(e){return function(t){e.call(this,t,this.__data__)}}function x6(e){return e.trim().split(/^|\s+/).map(function(t){var n="",a=t.indexOf(".");return a>=0&&(n=t.slice(a+1),t=t.slice(0,a)),{type:t,name:n}})}function b6(e){return function(){var t=this.__on;if(t){for(var n=0,a=-1,u=t.length,f;n<u;++n)f=t[n],(!e.type||f.type===e.type)&&f.name===e.name?this.removeEventListener(f.type,f.listener,f.options):t[++a]=f;++a?t.length=a:delete this.__on}}}function w6(e,t,n){return function(){var a=this.__on,u,f=_6(t);if(a){for(var o=0,v=a.length;o<v;++o)if((u=a[o]).type===e.type&&u.name===e.name){this.removeEventListener(u.type,u.listener,u.options),this.addEventListener(u.type,u.listener=f,u.options=n),u.value=t;return}}this.addEventListener(e.type,f,n),u={type:e.type,name:e.name,value:t,listener:f,options:n},a?a.push(u):this.__on=[u]}}function S6(e,t,n){var a=x6(e+""),u,f=a.length,o;if(arguments.length<2){var v=this.node().__on;if(v){for(var x=0,E=v.length,T;x<E;++x)for(u=0,T=v[x];u<f;++u)if((o=a[u]).type===T.type&&o.name===T.name)return T.value}return}for(v=t?w6:b6,u=0;u<f;++u)this.each(v(a[u],t,n));return this}function DP(e,t,n){var a=AP(e),u=a.CustomEvent;typeof u=="function"?u=new u(t,n):(u=a.document.createEvent("Event"),n?(u.initEvent(t,n.bubbles,n.cancelable),u.detail=n.detail):u.initEvent(t,!1,!1)),e.dispatchEvent(u)}function E6(e,t){return function(){return DP(this,e,t)}}function C6(e,t){return function(){return DP(this,e,t.apply(this,arguments))}}function k6(e,t){return this.each((typeof t=="function"?C6:E6)(e,t))}function*T6(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var a=e[t],u=0,f=a.length,o;u<f;++u)(o=a[u])&&(yield o)}var OP=[null];function Qo(e,t){this._groups=e,this._parents=t}function kf(){return new Qo([[document.documentElement]],OP)}function I6(){return this}Qo.prototype=kf.prototype={constructor:Qo,select:eN,selectAll:iN,selectChild:lN,selectChildren:hN,filter:dN,data:_N,enter:fN,exit:bN,join:wN,merge:SN,selection:I6,order:EN,sort:CN,call:TN,nodes:IN,node:PN,size:AN,empty:MN,each:zN,attr:FN,style:VN,property:HN,classed:YN,text:t6,html:o6,raise:s6,lower:u6,append:c6,insert:h6,remove:f6,clone:g6,datum:v6,on:S6,dispatch:k6,[Symbol.iterator]:T6};function yg(e){return typeof e=="string"?new Qo([[document.querySelector(e)]],[document.documentElement]):new Qo([[e]],OP)}function Tb(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function BP(e,t){var n=Object.create(e.prototype);for(var a in t)n[a]=t[a];return n}function Tf(){}var pf=.7,gg=1/pf,Fp="\\s*([+-]?\\d+)\\s*",hf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",vs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",P6=/^#([0-9a-f]{3,8})$/,A6=new RegExp(`^rgb\\(${Fp},${Fp},${Fp}\\)$`),M6=new RegExp(`^rgb\\(${vs},${vs},${vs}\\)$`),z6=new RegExp(`^rgba\\(${Fp},${Fp},${Fp},${hf}\\)$`),R6=new RegExp(`^rgba\\(${vs},${vs},${vs},${hf}\\)$`),L6=new RegExp(`^hsl\\(${hf},${vs},${vs}\\)$`),D6=new RegExp(`^hsla\\(${hf},${vs},${vs},${hf}\\)$`),TE={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Tb(Tf,ic,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:IE,formatHex:IE,formatHex8:O6,formatHsl:B6,formatRgb:PE,toString:PE});function IE(){return this.rgb().formatHex()}function O6(){return this.rgb().formatHex8()}function B6(){return NP(this).formatHsl()}function PE(){return this.rgb().formatRgb()}function ic(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=P6.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?AE(t):n===3?new Po(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?sy(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?sy(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=A6.exec(e))?new Po(t[1],t[2],t[3],1):(t=M6.exec(e))?new Po(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=z6.exec(e))?sy(t[1],t[2],t[3],t[4]):(t=R6.exec(e))?sy(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=L6.exec(e))?RE(t[1],t[2]/100,t[3]/100,1):(t=D6.exec(e))?RE(t[1],t[2]/100,t[3]/100,t[4]):TE.hasOwnProperty(e)?AE(TE[e]):e==="transparent"?new Po(NaN,NaN,NaN,0):null}function AE(e){return new Po(e>>16&255,e>>8&255,e&255,1)}function sy(e,t,n,a){return a<=0&&(e=t=n=NaN),new Po(e,t,n,a)}function N6(e){return e instanceof Tf||(e=ic(e)),e?(e=e.rgb(),new Po(e.r,e.g,e.b,e.opacity)):new Po}function t1(e,t,n,a){return arguments.length===1?N6(e):new Po(e,t,n,a??1)}function Po(e,t,n,a){this.r=+e,this.g=+t,this.b=+n,this.opacity=+a}Tb(Po,t1,BP(Tf,{brighter(e){return e=e==null?gg:Math.pow(gg,e),new Po(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?pf:Math.pow(pf,e),new Po(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Po(Ju(this.r),Ju(this.g),Ju(this.b),vg(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ME,formatHex:ME,formatHex8:F6,formatRgb:zE,toString:zE}));function ME(){return`#${Ku(this.r)}${Ku(this.g)}${Ku(this.b)}`}function F6(){return`#${Ku(this.r)}${Ku(this.g)}${Ku(this.b)}${Ku((isNaN(this.opacity)?1:this.opacity)*255)}`}function zE(){const e=vg(this.opacity);return`${e===1?"rgb(":"rgba("}${Ju(this.r)}, ${Ju(this.g)}, ${Ju(this.b)}${e===1?")":`, ${e})`}`}function vg(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ju(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ku(e){return e=Ju(e),(e<16?"0":"")+e.toString(16)}function RE(e,t,n,a){return a<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new La(e,t,n,a)}function NP(e){if(e instanceof La)return new La(e.h,e.s,e.l,e.opacity);if(e instanceof Tf||(e=ic(e)),!e)return new La;if(e instanceof La)return e;e=e.rgb();var t=e.r/255,n=e.g/255,a=e.b/255,u=Math.min(t,n,a),f=Math.max(t,n,a),o=NaN,v=f-u,x=(f+u)/2;return v?(t===f?o=(n-a)/v+(n<a)*6:n===f?o=(a-t)/v+2:o=(t-n)/v+4,v/=x<.5?f+u:2-f-u,o*=60):v=x>0&&x<1?0:o,new La(o,v,x,e.opacity)}function j6(e,t,n,a){return arguments.length===1?NP(e):new La(e,t,n,a??1)}function La(e,t,n,a){this.h=+e,this.s=+t,this.l=+n,this.opacity=+a}Tb(La,j6,BP(Tf,{brighter(e){return e=e==null?gg:Math.pow(gg,e),new La(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?pf:Math.pow(pf,e),new La(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,a=n+(n<.5?n:1-n)*t,u=2*n-a;return new Po(N_(e>=240?e-240:e+120,u,a),N_(e,u,a),N_(e<120?e+240:e-120,u,a),this.opacity)},clamp(){return new La(LE(this.h),ly(this.s),ly(this.l),vg(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=vg(this.opacity);return`${e===1?"hsl(":"hsla("}${LE(this.h)}, ${ly(this.s)*100}%, ${ly(this.l)*100}%${e===1?")":`, ${e})`}`}}));function LE(e){return e=(e||0)%360,e<0?e+360:e}function ly(e){return Math.max(0,Math.min(1,e||0))}function N_(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Ib=e=>()=>e;function U6(e,t){return function(n){return e+n*t}}function $6(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(a){return Math.pow(e+a*t,n)}}function V6(e){return(e=+e)==1?FP:function(t,n){return n-t?$6(t,n,e):Ib(isNaN(t)?n:t)}}function FP(e,t){var n=t-e;return n?U6(e,n):Ib(isNaN(e)?t:e)}const _g=function e(t){var n=V6(t);function a(u,f){var o=n((u=t1(u)).r,(f=t1(f)).r),v=n(u.g,f.g),x=n(u.b,f.b),E=FP(u.opacity,f.opacity);return function(T){return u.r=o(T),u.g=v(T),u.b=x(T),u.opacity=E(T),u+""}}return a.gamma=e,a}(1);function q6(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,a=t.slice(),u;return function(f){for(u=0;u<n;++u)a[u]=e[u]*(1-f)+t[u]*f;return a}}function W6(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function G6(e,t){var n=t?t.length:0,a=e?Math.min(n,e.length):0,u=new Array(a),f=new Array(n),o;for(o=0;o<a;++o)u[o]=Pb(e[o],t[o]);for(;o<n;++o)f[o]=t[o];return function(v){for(o=0;o<a;++o)f[o]=u[o](v);return f}}function H6(e,t){var n=new Date;return e=+e,t=+t,function(a){return n.setTime(e*(1-a)+t*a),n}}function Ra(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function K6(e,t){var n={},a={},u;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(u in t)u in e?n[u]=Pb(e[u],t[u]):a[u]=t[u];return function(f){for(u in n)a[u]=n[u](f);return a}}var r1=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,F_=new RegExp(r1.source,"g");function Z6(e){return function(){return e}}function X6(e){return function(t){return e(t)+""}}function jP(e,t){var n=r1.lastIndex=F_.lastIndex=0,a,u,f,o=-1,v=[],x=[];for(e=e+"",t=t+"";(a=r1.exec(e))&&(u=F_.exec(t));)(f=u.index)>n&&(f=t.slice(n,f),v[o]?v[o]+=f:v[++o]=f),(a=a[0])===(u=u[0])?v[o]?v[o]+=u:v[++o]=u:(v[++o]=null,x.push({i:o,x:Ra(a,u)})),n=F_.lastIndex;return n<t.length&&(f=t.slice(n),v[o]?v[o]+=f:v[++o]=f),v.length<2?x[0]?X6(x[0].x):Z6(t):(t=x.length,function(E){for(var T=0,I;T<t;++T)v[(I=x[T]).i]=I.x(E);return v.join("")})}function Pb(e,t){var n=typeof t,a;return t==null||n==="boolean"?Ib(t):(n==="number"?Ra:n==="string"?(a=ic(t))?(t=a,_g):jP:t instanceof ic?_g:t instanceof Date?H6:W6(t)?q6:Array.isArray(t)?G6:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?K6:Ra)(e,t)}function Y6(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var DE=180/Math.PI,n1={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function UP(e,t,n,a,u,f){var o,v,x;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(x=e*n+t*a)&&(n-=e*x,a-=t*x),(v=Math.sqrt(n*n+a*a))&&(n/=v,a/=v,x/=v),e*a<t*n&&(e=-e,t=-t,x=-x,o=-o),{translateX:u,translateY:f,rotate:Math.atan2(t,e)*DE,skewX:Math.atan(x)*DE,scaleX:o,scaleY:v}}var uy;function J6(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?n1:UP(t.a,t.b,t.c,t.d,t.e,t.f)}function Q6(e){return e==null||(uy||(uy=document.createElementNS("http://www.w3.org/2000/svg","g")),uy.setAttribute("transform",e),!(e=uy.transform.baseVal.consolidate()))?n1:(e=e.matrix,UP(e.a,e.b,e.c,e.d,e.e,e.f))}function $P(e,t,n,a){function u(E){return E.length?E.pop()+" ":""}function f(E,T,I,P,V,N){if(E!==I||T!==P){var q=V.push("translate(",null,t,null,n);N.push({i:q-4,x:Ra(E,I)},{i:q-2,x:Ra(T,P)})}else(I||P)&&V.push("translate("+I+t+P+n)}function o(E,T,I,P){E!==T?(E-T>180?T+=360:T-E>180&&(E+=360),P.push({i:I.push(u(I)+"rotate(",null,a)-2,x:Ra(E,T)})):T&&I.push(u(I)+"rotate("+T+a)}function v(E,T,I,P){E!==T?P.push({i:I.push(u(I)+"skewX(",null,a)-2,x:Ra(E,T)}):T&&I.push(u(I)+"skewX("+T+a)}function x(E,T,I,P,V,N){if(E!==I||T!==P){var q=V.push(u(V)+"scale(",null,",",null,")");N.push({i:q-4,x:Ra(E,I)},{i:q-2,x:Ra(T,P)})}else(I!==1||P!==1)&&V.push(u(V)+"scale("+I+","+P+")")}return function(E,T){var I=[],P=[];return E=e(E),T=e(T),f(E.translateX,E.translateY,T.translateX,T.translateY,I,P),o(E.rotate,T.rotate,I,P),v(E.skewX,T.skewX,I,P),x(E.scaleX,E.scaleY,T.scaleX,T.scaleY,I,P),E=T=null,function(V){for(var N=-1,q=P.length,J;++N<q;)I[(J=P[N]).i]=J.x(V);return I.join("")}}}var eF=$P(J6,"px, ","px)","deg)"),tF=$P(Q6,", ",")",")"),Jp=0,Pd=0,gd=0,VP=1e3,xg,Ad,bg=0,oc=0,iv=0,df=typeof performance=="object"&&performance.now?performance:Date,qP=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Ab(){return oc||(qP(rF),oc=df.now()+iv)}function rF(){oc=0}function wg(){this._call=this._time=this._next=null}wg.prototype=WP.prototype={constructor:wg,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Ab():+n)+(t==null?0:+t),!this._next&&Ad!==this&&(Ad?Ad._next=this:xg=this,Ad=this),this._call=e,this._time=n,i1()},stop:function(){this._call&&(this._call=null,this._time=1/0,i1())}};function WP(e,t,n){var a=new wg;return a.restart(e,t,n),a}function nF(){Ab(),++Jp;for(var e=xg,t;e;)(t=oc-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Jp}function OE(){oc=(bg=df.now())+iv,Jp=Pd=0;try{nF()}finally{Jp=0,oF(),oc=0}}function iF(){var e=df.now(),t=e-bg;t>VP&&(iv-=t,bg=e)}function oF(){for(var e,t=xg,n,a=1/0;t;)t._call?(a>t._time&&(a=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:xg=n);Ad=e,i1(a)}function i1(e){if(!Jp){Pd&&(Pd=clearTimeout(Pd));var t=e-oc;t>24?(e<1/0&&(Pd=setTimeout(OE,e-df.now()-iv)),gd&&(gd=clearInterval(gd))):(gd||(bg=df.now(),gd=setInterval(iF,VP)),Jp=1,qP(OE))}}function BE(e,t,n){var a=new wg;return t=t==null?0:+t,a.restart(u=>{a.stop(),e(u+t)},t,n),a}var aF=EP("start","end","cancel","interrupt"),sF=[],GP=0,NE=1,o1=2,Ly=3,FE=4,a1=5,Dy=6;function ov(e,t,n,a,u,f){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;lF(e,n,{name:t,index:a,group:u,on:aF,tween:sF,time:f.time,delay:f.delay,duration:f.duration,ease:f.ease,timer:null,state:GP})}function Mb(e,t){var n=ja(e,t);if(n.state>GP)throw new Error("too late; already scheduled");return n}function Ss(e,t){var n=ja(e,t);if(n.state>Ly)throw new Error("too late; already running");return n}function ja(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function lF(e,t,n){var a=e.__transition,u;a[t]=n,n.timer=WP(f,0,n.time);function f(E){n.state=NE,n.timer.restart(o,n.delay,n.time),n.delay<=E&&o(E-n.delay)}function o(E){var T,I,P,V;if(n.state!==NE)return x();for(T in a)if(V=a[T],V.name===n.name){if(V.state===Ly)return BE(o);V.state===FE?(V.state=Dy,V.timer.stop(),V.on.call("interrupt",e,e.__data__,V.index,V.group),delete a[T]):+T<t&&(V.state=Dy,V.timer.stop(),V.on.call("cancel",e,e.__data__,V.index,V.group),delete a[T])}if(BE(function(){n.state===Ly&&(n.state=FE,n.timer.restart(v,n.delay,n.time),v(E))}),n.state=o1,n.on.call("start",e,e.__data__,n.index,n.group),n.state===o1){for(n.state=Ly,u=new Array(P=n.tween.length),T=0,I=-1;T<P;++T)(V=n.tween[T].value.call(e,e.__data__,n.index,n.group))&&(u[++I]=V);u.length=I+1}}function v(E){for(var T=E<n.duration?n.ease.call(null,E/n.duration):(n.timer.restart(x),n.state=a1,1),I=-1,P=u.length;++I<P;)u[I].call(e,T);n.state===a1&&(n.on.call("end",e,e.__data__,n.index,n.group),x())}function x(){n.state=Dy,n.timer.stop(),delete a[t];for(var E in a)return;delete e.__transition}}function uF(e,t){var n=e.__transition,a,u,f=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((a=n[o]).name!==t){f=!1;continue}u=a.state>o1&&a.state<a1,a.state=Dy,a.timer.stop(),a.on.call(u?"interrupt":"cancel",e,e.__data__,a.index,a.group),delete n[o]}f&&delete e.__transition}}function cF(e){return this.each(function(){uF(this,e)})}function pF(e,t){var n,a;return function(){var u=Ss(this,e),f=u.tween;if(f!==n){a=n=f;for(var o=0,v=a.length;o<v;++o)if(a[o].name===t){a=a.slice(),a.splice(o,1);break}}u.tween=a}}function hF(e,t,n){var a,u;if(typeof n!="function")throw new Error;return function(){var f=Ss(this,e),o=f.tween;if(o!==a){u=(a=o).slice();for(var v={name:t,value:n},x=0,E=u.length;x<E;++x)if(u[x].name===t){u[x]=v;break}x===E&&u.push(v)}f.tween=u}}function dF(e,t){var n=this._id;if(e+="",arguments.length<2){for(var a=ja(this.node(),n).tween,u=0,f=a.length,o;u<f;++u)if((o=a[u]).name===e)return o.value;return null}return this.each((t==null?pF:hF)(n,e,t))}function zb(e,t,n){var a=e._id;return e.each(function(){var u=Ss(this,a);(u.value||(u.value={}))[t]=n.apply(this,arguments)}),function(u){return ja(u,a).value[t]}}function HP(e,t){var n;return(typeof t=="number"?Ra:t instanceof ic?_g:(n=ic(t))?(t=n,_g):jP)(e,t)}function fF(e){return function(){this.removeAttribute(e)}}function mF(e){return function(){this.removeAttributeNS(e.space,e.local)}}function yF(e,t,n){var a,u=n+"",f;return function(){var o=this.getAttribute(e);return o===u?null:o===a?f:f=t(a=o,n)}}function gF(e,t,n){var a,u=n+"",f;return function(){var o=this.getAttributeNS(e.space,e.local);return o===u?null:o===a?f:f=t(a=o,n)}}function vF(e,t,n){var a,u,f;return function(){var o,v=n(this),x;return v==null?void this.removeAttribute(e):(o=this.getAttribute(e),x=v+"",o===x?null:o===a&&x===u?f:(u=x,f=t(a=o,v)))}}function _F(e,t,n){var a,u,f;return function(){var o,v=n(this),x;return v==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),x=v+"",o===x?null:o===a&&x===u?f:(u=x,f=t(a=o,v)))}}function xF(e,t){var n=nv(e),a=n==="transform"?tF:HP;return this.attrTween(e,typeof t=="function"?(n.local?_F:vF)(n,a,zb(this,"attr."+e,t)):t==null?(n.local?mF:fF)(n):(n.local?gF:yF)(n,a,t))}function bF(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function wF(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function SF(e,t){var n,a;function u(){var f=t.apply(this,arguments);return f!==a&&(n=(a=f)&&wF(e,f)),n}return u._value=t,u}function EF(e,t){var n,a;function u(){var f=t.apply(this,arguments);return f!==a&&(n=(a=f)&&bF(e,f)),n}return u._value=t,u}function CF(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var a=nv(e);return this.tween(n,(a.local?SF:EF)(a,t))}function kF(e,t){return function(){Mb(this,e).delay=+t.apply(this,arguments)}}function TF(e,t){return t=+t,function(){Mb(this,e).delay=t}}function IF(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?kF:TF)(t,e)):ja(this.node(),t).delay}function PF(e,t){return function(){Ss(this,e).duration=+t.apply(this,arguments)}}function AF(e,t){return t=+t,function(){Ss(this,e).duration=t}}function MF(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?PF:AF)(t,e)):ja(this.node(),t).duration}function zF(e,t){if(typeof t!="function")throw new Error;return function(){Ss(this,e).ease=t}}function RF(e){var t=this._id;return arguments.length?this.each(zF(t,e)):ja(this.node(),t).ease}function LF(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Ss(this,e).ease=n}}function DF(e){if(typeof e!="function")throw new Error;return this.each(LF(this._id,e))}function OF(e){typeof e!="function"&&(e=TP(e));for(var t=this._groups,n=t.length,a=new Array(n),u=0;u<n;++u)for(var f=t[u],o=f.length,v=a[u]=[],x,E=0;E<o;++E)(x=f[E])&&e.call(x,x.__data__,E,f)&&v.push(x);return new ll(a,this._parents,this._name,this._id)}function BF(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,a=t.length,u=n.length,f=Math.min(a,u),o=new Array(a),v=0;v<f;++v)for(var x=t[v],E=n[v],T=x.length,I=o[v]=new Array(T),P,V=0;V<T;++V)(P=x[V]||E[V])&&(I[V]=P);for(;v<a;++v)o[v]=t[v];return new ll(o,this._parents,this._name,this._id)}function NF(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function FF(e,t,n){var a,u,f=NF(t)?Mb:Ss;return function(){var o=f(this,e),v=o.on;v!==a&&(u=(a=v).copy()).on(t,n),o.on=u}}function jF(e,t){var n=this._id;return arguments.length<2?ja(this.node(),n).on.on(e):this.each(FF(n,e,t))}function UF(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function $F(){return this.on("end.remove",UF(this._id))}function VF(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Cb(e));for(var a=this._groups,u=a.length,f=new Array(u),o=0;o<u;++o)for(var v=a[o],x=v.length,E=f[o]=new Array(x),T,I,P=0;P<x;++P)(T=v[P])&&(I=e.call(T,T.__data__,P,v))&&("__data__"in T&&(I.__data__=T.__data__),E[P]=I,ov(E[P],t,n,P,E,ja(T,n)));return new ll(f,this._parents,t,n)}function qF(e){var t=this._name,n=this._id;typeof e!="function"&&(e=kP(e));for(var a=this._groups,u=a.length,f=[],o=[],v=0;v<u;++v)for(var x=a[v],E=x.length,T,I=0;I<E;++I)if(T=x[I]){for(var P=e.call(T,T.__data__,I,x),V,N=ja(T,n),q=0,J=P.length;q<J;++q)(V=P[q])&&ov(V,t,n,q,P,N);f.push(P),o.push(T)}return new ll(f,o,t,n)}var WF=kf.prototype.constructor;function GF(){return new WF(this._groups,this._parents)}function HF(e,t){var n,a,u;return function(){var f=Yp(this,e),o=(this.style.removeProperty(e),Yp(this,e));return f===o?null:f===n&&o===a?u:u=t(n=f,a=o)}}function KP(e){return function(){this.style.removeProperty(e)}}function KF(e,t,n){var a,u=n+"",f;return function(){var o=Yp(this,e);return o===u?null:o===a?f:f=t(a=o,n)}}function ZF(e,t,n){var a,u,f;return function(){var o=Yp(this,e),v=n(this),x=v+"";return v==null&&(x=v=(this.style.removeProperty(e),Yp(this,e))),o===x?null:o===a&&x===u?f:(u=x,f=t(a=o,v))}}function XF(e,t){var n,a,u,f="style."+t,o="end."+f,v;return function(){var x=Ss(this,e),E=x.on,T=x.value[f]==null?v||(v=KP(t)):void 0;(E!==n||u!==T)&&(a=(n=E).copy()).on(o,u=T),x.on=a}}function YF(e,t,n){var a=(e+="")=="transform"?eF:HP;return t==null?this.styleTween(e,HF(e,a)).on("end.style."+e,KP(e)):typeof t=="function"?this.styleTween(e,ZF(e,a,zb(this,"style."+e,t))).each(XF(this._id,e)):this.styleTween(e,KF(e,a,t),n).on("end.style."+e,null)}function JF(e,t,n){return function(a){this.style.setProperty(e,t.call(this,a),n)}}function QF(e,t,n){var a,u;function f(){var o=t.apply(this,arguments);return o!==u&&(a=(u=o)&&JF(e,o,n)),a}return f._value=t,f}function e8(e,t,n){var a="style."+(e+="");if(arguments.length<2)return(a=this.tween(a))&&a._value;if(t==null)return this.tween(a,null);if(typeof t!="function")throw new Error;return this.tween(a,QF(e,t,n??""))}function t8(e){return function(){this.textContent=e}}function r8(e){return function(){var t=e(this);this.textContent=t??""}}function n8(e){return this.tween("text",typeof e=="function"?r8(zb(this,"text",e)):t8(e==null?"":e+""))}function i8(e){return function(t){this.textContent=e.call(this,t)}}function o8(e){var t,n;function a(){var u=e.apply(this,arguments);return u!==n&&(t=(n=u)&&i8(u)),t}return a._value=e,a}function a8(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,o8(e))}function s8(){for(var e=this._name,t=this._id,n=ZP(),a=this._groups,u=a.length,f=0;f<u;++f)for(var o=a[f],v=o.length,x,E=0;E<v;++E)if(x=o[E]){var T=ja(x,t);ov(x,e,n,E,o,{time:T.time+T.delay+T.duration,delay:0,duration:T.duration,ease:T.ease})}return new ll(a,this._parents,e,n)}function l8(){var e,t,n=this,a=n._id,u=n.size();return new Promise(function(f,o){var v={value:o},x={value:function(){--u===0&&f()}};n.each(function(){var E=Ss(this,a),T=E.on;T!==e&&(t=(e=T).copy(),t._.cancel.push(v),t._.interrupt.push(v),t._.end.push(x)),E.on=t}),u===0&&f()})}var u8=0;function ll(e,t,n,a){this._groups=e,this._parents=t,this._name=n,this._id=a}function ZP(){return++u8}var Zs=kf.prototype;ll.prototype={constructor:ll,select:VF,selectAll:qF,selectChild:Zs.selectChild,selectChildren:Zs.selectChildren,filter:OF,merge:BF,selection:GF,transition:s8,call:Zs.call,nodes:Zs.nodes,node:Zs.node,size:Zs.size,empty:Zs.empty,each:Zs.each,on:jF,attr:xF,attrTween:CF,style:YF,styleTween:e8,text:n8,textTween:a8,remove:$F,tween:dF,delay:IF,duration:MF,ease:RF,easeVarying:DF,end:l8,[Symbol.iterator]:Zs[Symbol.iterator]};function c8(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var p8={time:null,delay:0,duration:250,ease:c8};function h8(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function d8(e){var t,n;e instanceof ll?(t=e._id,e=e._name):(t=ZP(),(n=p8).time=Ab(),e=e==null?null:e+"");for(var a=this._groups,u=a.length,f=0;f<u;++f)for(var o=a[f],v=o.length,x,E=0;E<v;++E)(x=o[E])&&ov(x,e,t,E,o,n||h8(x,t));return new ll(a,this._parents,e,t)}kf.prototype.interrupt=cF;kf.prototype.transition=d8;function f8(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Sg(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,a=e.slice(0,n);return[a.length>1?a[0]+a.slice(2):a,+e.slice(n+1)]}function Qp(e){return e=Sg(Math.abs(e)),e?e[1]:NaN}function m8(e,t){return function(n,a){for(var u=n.length,f=[],o=0,v=e[0],x=0;u>0&&v>0&&(x+v+1>a&&(v=Math.max(1,a-x)),f.push(n.substring(u-=v,u+v)),!((x+=v+1)>a));)v=e[o=(o+1)%e.length];return f.reverse().join(t)}}function y8(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var g8=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Eg(e){if(!(t=g8.exec(e)))throw new Error("invalid format: "+e);var t;return new Rb({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Eg.prototype=Rb.prototype;function Rb(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Rb.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function v8(e){e:for(var t=e.length,n=1,a=-1,u;n<t;++n)switch(e[n]){case".":a=u=n;break;case"0":a===0&&(a=n),u=n;break;default:if(!+e[n])break e;a>0&&(a=0);break}return a>0?e.slice(0,a)+e.slice(u+1):e}var XP;function _8(e,t){var n=Sg(e,t);if(!n)return e+"";var a=n[0],u=n[1],f=u-(XP=Math.max(-8,Math.min(8,Math.floor(u/3)))*3)+1,o=a.length;return f===o?a:f>o?a+new Array(f-o+1).join("0"):f>0?a.slice(0,f)+"."+a.slice(f):"0."+new Array(1-f).join("0")+Sg(e,Math.max(0,t+f-1))[0]}function jE(e,t){var n=Sg(e,t);if(!n)return e+"";var a=n[0],u=n[1];return u<0?"0."+new Array(-u).join("0")+a:a.length>u+1?a.slice(0,u+1)+"."+a.slice(u+1):a+new Array(u-a.length+2).join("0")}const UE={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:f8,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>jE(e*100,t),r:jE,s:_8,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function $E(e){return e}var VE=Array.prototype.map,qE=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function x8(e){var t=e.grouping===void 0||e.thousands===void 0?$E:m8(VE.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",a=e.currency===void 0?"":e.currency[1]+"",u=e.decimal===void 0?".":e.decimal+"",f=e.numerals===void 0?$E:y8(VE.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",v=e.minus===void 0?"−":e.minus+"",x=e.nan===void 0?"NaN":e.nan+"";function E(I){I=Eg(I);var P=I.fill,V=I.align,N=I.sign,q=I.symbol,J=I.zero,U=I.width,F=I.comma,R=I.precision,O=I.trim,Q=I.type;Q==="n"?(F=!0,Q="g"):UE[Q]||(R===void 0&&(R=12),O=!0,Q="g"),(J||P==="0"&&V==="=")&&(J=!0,P="0",V="=");var se=q==="$"?n:q==="#"&&/[boxX]/.test(Q)?"0"+Q.toLowerCase():"",pe=q==="$"?a:/[%p]/.test(Q)?o:"",_e=UE[Q],ze=/[defgprs%]/.test(Q);R=R===void 0?6:/[gprs]/.test(Q)?Math.max(1,Math.min(21,R)):Math.max(0,Math.min(20,R));function he(we){var ie=se,ge=pe,Ne,qe,Ce;if(Q==="c")ge=_e(we)+ge,we="";else{we=+we;var ke=we<0||1/we<0;if(we=isNaN(we)?x:_e(Math.abs(we),R),O&&(we=v8(we)),ke&&+we==0&&N!=="+"&&(ke=!1),ie=(ke?N==="("?N:v:N==="-"||N==="("?"":N)+ie,ge=(Q==="s"?qE[8+XP/3]:"")+ge+(ke&&N==="("?")":""),ze){for(Ne=-1,qe=we.length;++Ne<qe;)if(Ce=we.charCodeAt(Ne),48>Ce||Ce>57){ge=(Ce===46?u+we.slice(Ne+1):we.slice(Ne))+ge,we=we.slice(0,Ne);break}}}F&&!J&&(we=t(we,1/0));var Te=ie.length+we.length+ge.length,Oe=Te<U?new Array(U-Te+1).join(P):"";switch(F&&J&&(we=t(Oe+we,Oe.length?U-ge.length:1/0),Oe=""),V){case"<":we=ie+we+ge+Oe;break;case"=":we=ie+Oe+we+ge;break;case"^":we=Oe.slice(0,Te=Oe.length>>1)+ie+we+ge+Oe.slice(Te);break;default:we=Oe+ie+we+ge;break}return f(we)}return he.toString=function(){return I+""},he}function T(I,P){var V=E((I=Eg(I),I.type="f",I)),N=Math.max(-8,Math.min(8,Math.floor(Qp(P)/3)))*3,q=Math.pow(10,-N),J=qE[8+N/3];return function(U){return V(q*U)+J}}return{format:E,formatPrefix:T}}var cy,YP,JP;b8({thousands:",",grouping:[3],currency:["$",""]});function b8(e){return cy=x8(e),YP=cy.format,JP=cy.formatPrefix,cy}function w8(e){return Math.max(0,-Qp(Math.abs(e)))}function S8(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Qp(t)/3)))*3-Qp(Math.abs(e)))}function E8(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Qp(t)-Qp(e))+1}function QP(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const WE=Symbol("implicit");function eA(){var e=new SE,t=[],n=[],a=WE;function u(f){let o=e.get(f);if(o===void 0){if(a!==WE)return a;e.set(f,o=t.push(f)-1)}return n[o%n.length]}return u.domain=function(f){if(!arguments.length)return t.slice();t=[],e=new SE;for(const o of f)e.has(o)||e.set(o,t.push(o)-1);return u},u.range=function(f){return arguments.length?(n=Array.from(f),u):n.slice()},u.unknown=function(f){return arguments.length?(a=f,u):a},u.copy=function(){return eA(t,n).unknown(a)},QP.apply(u,arguments),u}function C8(e){return function(){return e}}function k8(e){return+e}var GE=[0,1];function Pp(e){return e}function s1(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:C8(isNaN(t)?NaN:.5)}function T8(e,t){var n;return e>t&&(n=e,e=t,t=n),function(a){return Math.max(e,Math.min(t,a))}}function I8(e,t,n){var a=e[0],u=e[1],f=t[0],o=t[1];return u<a?(a=s1(u,a),f=n(o,f)):(a=s1(a,u),f=n(f,o)),function(v){return f(a(v))}}function P8(e,t,n){var a=Math.min(e.length,t.length)-1,u=new Array(a),f=new Array(a),o=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<a;)u[o]=s1(e[o],e[o+1]),f[o]=n(t[o],t[o+1]);return function(v){var x=NB(e,v,1,a)-1;return f[x](u[x](v))}}function A8(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function M8(){var e=GE,t=GE,n=Pb,a,u,f,o=Pp,v,x,E;function T(){var P=Math.min(e.length,t.length);return o!==Pp&&(o=T8(e[0],e[P-1])),v=P>2?P8:I8,x=E=null,I}function I(P){return P==null||isNaN(P=+P)?f:(x||(x=v(e.map(a),t,n)))(a(o(P)))}return I.invert=function(P){return o(u((E||(E=v(t,e.map(a),Ra)))(P)))},I.domain=function(P){return arguments.length?(e=Array.from(P,k8),T()):e.slice()},I.range=function(P){return arguments.length?(t=Array.from(P),T()):t.slice()},I.rangeRound=function(P){return t=Array.from(P),n=Y6,T()},I.clamp=function(P){return arguments.length?(o=P?!0:Pp,T()):o!==Pp},I.interpolate=function(P){return arguments.length?(n=P,T()):n},I.unknown=function(P){return arguments.length?(f=P,I):f},function(P,V){return a=P,u=V,T()}}function z8(){return M8()(Pp,Pp)}function R8(e,t,n,a){var u=GB(e,t,n),f;switch(a=Eg(a??",f"),a.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return a.precision==null&&!isNaN(f=S8(u,o))&&(a.precision=f),JP(a,o)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(f=E8(u,Math.max(Math.abs(e),Math.abs(t))))&&(a.precision=f-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(f=w8(u))&&(a.precision=f-(a.type==="%")*2);break}}return YP(a)}function L8(e){var t=e.domain;return e.ticks=function(n){var a=t();return WB(a[0],a[a.length-1],n??10)},e.tickFormat=function(n,a){var u=t();return R8(u[0],u[u.length-1],n??10,a)},e.nice=function(n){n==null&&(n=10);var a=t(),u=0,f=a.length-1,o=a[u],v=a[f],x,E,T=10;for(v<o&&(E=o,o=v,v=E,E=u,u=f,f=E);T-- >0;){if(E=Qx(o,v,n),E===x)return a[u]=o,a[f]=v,t(a);if(E>0)o=Math.floor(o/E)*E,v=Math.ceil(v/E)*E;else if(E<0)o=Math.ceil(o*E)/E,v=Math.floor(v*E)/E;else break;x=E}return e},e}function tA(){var e=z8();return e.copy=function(){return A8(e,tA())},QP.apply(e,arguments),L8(e)}function Md(e,t,n){this.k=e,this.x=t,this.y=n}Md.prototype={constructor:Md,scale:function(e){return e===1?this:new Md(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Md(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Md.prototype;const Go=(e,t)=>{(t===null||isNaN(t)||t<9)&&(t=9);const n=10,a=t/n,u=["interpolate",["linear"],["to-number",["get",e]],0,"rgba(65, 182, 196, 0.85)"],f=[];for(let o=1;o<=n;o++){if(o===1){const v=o*a;f.push({stop:v,color:"rgba(127, 205, 187, .99)"})}if(o===2){const v=o*a;f.push({stop:v,color:"rgba(199, 233, 180, .99)"})}if(o===3){const v=o*a;f.push({stop:v,color:"rgba(220, 230, 177, 0.99)"})}if(o===4){const v=o*a;f.push({stop:v,color:"rgba(247, 237, 195,0.99)"})}if(o===5){const v=o*a;f.push({stop:v,color:"rgba(250, 240, 160, 0.99)"})}if(o===6){const v=o*a;f.push({stop:v,color:"rgba(255, 200, 118, 0.99)"})}if(o===7){const v=o*a;f.push({stop:v,color:"rgba(254, 178, 76, .99)"})}if(o===8){const v=o*a;f.push({stop:v,color:"rgba(253, 141, 60, .99)"})}if(o===9){const v=o*a;f.push({stop:v,color:"rgba(252, 78, 42, .99)"})}if(o===10){const v=o*a;f.push({stop:v,color:"rgba(227, 26, 28, .99)"})}}for(const o of f){const v=o.stop,x=o.color;u.push(v,x)}return u},D8=e=>e>11e3?Math.round(e/1e3)*1e3:e>1e3?Math.round(e/100)*100:e>100?Math.round(e/10)*10:e>10?Math.round(e/5)*5:e.toFixed(0),j_=(e,t)=>{t.current=new Set;const n=e.current;n&&["mobility-Street-Detailed-highlighted","mobility-Block-Detailed-highlighted","mobility-Street-Detailed-other","energy-Building-highlighted","energy-Feeder-highlighted"].forEach(u=>{n.setFilter(u,["in","object_id",""]),n.setFilter(u,["in","ID_ESL",""])})},U_=(e,t)=>{const n=t.current;if(!n)return;const a=d3.select("#graph-container-mobility-summary");a.html("");const u=[];n.queryRenderedFeatures({layers:["mobility-Street-Detailed","mobility-Block-Detailed"]}).forEach(R=>{const O=R.properties.object_id;e.current.has(O)&&u.push({type:"Feature",geometry:R.geometry,properties:R.properties})});let o=[{timePeriod:"Morning",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Breakfast",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Lunch",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Afternoon",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Dinner",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Night",walk:0,bike:0,car:0,publicTransit:0}],v=[{timePeriod:"Morning",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Breakfast",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Lunch",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Afternoon",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Dinner",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Night",walk:0,bike:0,car:0,publicTransit:0}];const x=[{timePeriod:"Early Morning",walk:225.31,bike:44.53,car:1766.11,publicTransit:1508.7},{timePeriod:"Morning",walk:3207.24,bike:378.92,car:20038.77,publicTransit:6659.61},{timePeriod:"Lunch",walk:2306.27,bike:316.9,car:13787.66,publicTransit:7026.34},{timePeriod:"Afternoon",walk:1359.1,bike:186.25,car:9242.15,publicTransit:6118.57},{timePeriod:"Evening",walk:1685.12,bike:331.32,car:12511.29,publicTransit:10306.86},{timePeriod:"Night",walk:263.57,bike:51.43,car:2276.55,publicTransit:2076.8}];e.current.size===0&&(o=[...x]),u.length>0&&u.forEach(R=>{Object.keys(R.properties).forEach(O=>{const[Q,se,pe,_e,ze,he]=O.split("_");pe==="0"&&se==="1"&&ze==="-1"&&he==="-1"?_e==="-1"?o[0].walk+=Number(R.properties[O]):_e==="1"?o[1].walk+=Number(R.properties[O]):_e==="2"?o[2].walk+=Number(R.properties[O]):_e==="3"?o[3].walk+=Number(R.properties[O]):_e==="4"?o[4].walk+=Number(R.properties[O]):_e==="5"&&(o[5].walk+=Number(R.properties[O])):pe==="1"&&se==="1"&&ze==="-1"&&he==="-1"?_e==="0"?o[0].bike+=Number(R.properties[O]):_e==="1"?o[1].bike+=Number(R.properties[O]):_e==="2"?o[2].bike+=Number(R.properties[O]):_e==="3"?o[3].bike+=Number(R.properties[O]):_e==="4"?o[4].bike+=Number(R.properties[O]):_e==="5"&&(o[5].bike+=Number(R.properties[O])):pe==="2"&&se==="1"&&ze==="-1"&&he==="-1"?_e==="0"?o[0].car+=Number(R.properties[O]):_e==="1"?o[1].car+=Number(R.properties[O]):_e==="2"?o[2].car+=Number(R.properties[O]):_e==="3"?o[3].car+=Number(R.properties[O]):_e==="4"?o[4].car+=Number(R.properties[O]):_e==="5"&&(o[5].car+=Number(R.properties[O])):pe==="3"&&se==="1"&&ze==="-1"&&he==="-1"&&(_e==="0"?o[0].publicTransit+=Number(R.properties[O]):_e==="1"?o[1].publicTransit+=Number(R.properties[O]):_e==="2"?o[2].publicTransit+=Number(R.properties[O]):_e==="3"?o[3].publicTransit+=Number(R.properties[O]):_e==="4"?o[4].publicTransit+=Number(R.properties[O]):_e==="5"&&(o[5].publicTransit+=Number(R.properties[O])))})}),u.length>0&&u.forEach(R=>{Object.keys(R.properties).forEach(O=>{const[Q,se,pe,_e,ze,he]=O.split("_");pe==="0"&&se==="0"&&ze==="-1"&&he==="-1"?_e==="-1"?v[0].walk+=Number(R.properties[O]):_e==="1"?v[1].walk+=Number(R.properties[O]):_e==="2"?v[2].walk+=Number(R.properties[O]):_e==="3"?v[3].walk+=Number(R.properties[O]):_e==="4"?v[4].walk+=Number(R.properties[O]):_e==="5"&&(v[5].walk+=Number(R.properties[O])):pe==="1"&&se==="0"&&ze==="-1"&&he==="-1"?_e==="0"?v[0].bike+=Number(R.properties[O]):_e==="1"?v[1].bike+=Number(R.properties[O]):_e==="2"?v[2].bike+=Number(R.properties[O]):_e==="3"?v[3].bike+=Number(R.properties[O]):_e==="4"?v[4].bike+=Number(R.properties[O]):_e==="5"&&(v[5].bike+=Number(R.properties[O])):pe==="2"&&se==="0"&&ze==="-1"&&he==="-1"?_e==="0"?v[0].car+=Number(R.properties[O]):_e==="1"?v[1].car+=Number(R.properties[O]):_e==="2"?v[2].car+=Number(R.properties[O]):_e==="3"?v[3].car+=Number(R.properties[O]):_e==="4"?v[4].car+=Number(R.properties[O]):_e==="5"&&(v[5].car+=Number(R.properties[O])):pe==="3"&&se==="0"&&ze==="-1"&&he==="-1"&&(_e==="0"?v[0].publicTransit+=Number(R.properties[O]):_e==="1"?v[1].publicTransit+=Number(R.properties[O]):_e==="2"?v[2].publicTransit+=Number(R.properties[O]):_e==="3"?v[3].publicTransit+=Number(R.properties[O]):_e==="4"?v[4].publicTransit+=Number(R.properties[O]):_e==="5"&&(v[5].publicTransit+=Number(R.properties[O])))})});const E=parseInt(o.reduce((R,O)=>R+O.walk,0))+parseInt(v.reduce((R,O)=>R+O.walk,0)),T=parseInt(o.reduce((R,O)=>R+O.bike,0))+parseInt(v.reduce((R,O)=>R+O.bike,0)),I=parseInt(o.reduce((R,O)=>R+O.car,0))+parseInt(v.reduce((R,O)=>R+O.car,0)),P=parseInt(o.reduce((R,O)=>R+O.publicTransit,0))+parseInt(v.reduce((R,O)=>R+O.publicTransit,0)),V=["walk","bike","car","publicTransit"];d3.stack().keys(V)(o);const q=340,J=70,U={top:130,right:40,bottom:40,left:80},F=a.append("svg").attr("width",q).attr("height",J);F.append("rect").attr("x",q/10).attr("y",U.top-90).attr("width",55).attr("height",25).attr("fill","#f24726").attr("rx",5).attr("ry",5),F.append("text").attr("x",q/10+26).attr("y",U.top-73).attr("text-anchor","middle").attr("font-size","12px").attr("fill","white").text(`${E.toLocaleString()}`),F.append("rect").attr("x",q/10+80).attr("y",U.top-90).attr("width",55).attr("height",25).attr("fill","#fac710").attr("rx",5).attr("ry",5),F.append("text").attr("x",q/10+106).attr("y",U.top-73).attr("text-anchor","middle").attr("font-size","12px").attr("fill","white").text(`${T.toLocaleString()}`),F.append("rect").attr("x",q/10+160).attr("y",U.top-90).attr("width",55).attr("height",25).attr("fill","#2d9bf0").attr("rx",5).attr("ry",5),F.append("text").attr("x",q/10+186).attr("y",U.top-73).attr("text-anchor","middle").attr("font-size","12px").attr("fill","white").text(`${I.toLocaleString()}`),F.append("rect").attr("x",q/10+240).attr("y",U.top-90).attr("width",55).attr("height",25).attr("fill","#0263b9").attr("rx",5).attr("ry",5),F.append("text").attr("x",q/10+266).attr("y",U.top-73).attr("text-anchor","middle").attr("font-size","12px").attr("fill","white").text(`${P.toLocaleString()}`)},$_=(e,t)=>{const n=t.current;if(!n)return;const a=d3.select("#graph-container-mobility-senario");if(!a.node()){console.error("Container element not found.");return}a.html("");const u=[];n.queryRenderedFeatures({layers:["mobility-Street-Detailed","mobility-Block-Detailed"]}).forEach(Q=>{const se=Q.properties.object_id;e.current.has(se)&&u.push({type:"Feature",geometry:Q.geometry,properties:Q.properties})});let o=[{timePeriod:"Base Case",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Senario 1",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Senario 2",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Senario 3",walk:0,bike:0,car:0,publicTransit:0}];const v=[{timePeriod:"Base Case",walk:196.42,bike:44.66,car:1591.73,publicTransit:1473.78},{timePeriod:"Senario 1",walk:3069.64,bike:394.12,car:20284.15,publicTransit:6109.5},{timePeriod:"Senario 2",walk:3000.93,bike:416.66,car:13787.66,publicTransit:9402.27},{timePeriod:"Senario 3",walk:1331.69,bike:196.68,car:19540.22,publicTransit:6137.72}];e.current.size===0&&(o=[...v]),u.length>0&&u.forEach(Q=>{Object.keys(Q.properties).forEach(se=>{const[pe,_e,ze,he,we,ie]=se.split("_");ze==="0"&&_e==="0"&&we==="-1"&&ie==="-1"?he==="-1"?o[0].walk+=Number(Q.properties[se]):he==="1"?o[1].walk+=Number(Q.properties[se]):he==="2"?o[2].walk+=Number(Q.properties[se]):he==="3"&&(o[3].walk+=Number(Q.properties[se])):ze==="1"&&_e==="0"&&we==="-1"&&ie==="-1"?he==="0"?o[0].bike+=Number(Q.properties[se]):he==="1"?o[1].bike+=Number(Q.properties[se]):he==="2"?o[2].bike+=Number(Q.properties[se]):he==="3"&&(o[3].bike+=Number(Q.properties[se])):ze==="2"&&_e==="0"&&we==="-1"&&ie==="-1"?he==="0"?o[0].car+=Number(Q.properties[se]):he==="1"?o[1].car+=Number(Q.properties[se]):he==="2"?o[2].car+=Number(Q.properties[se]):he==="3"&&(o[3].car+=Number(Q.properties[se])):ze==="3"&&_e==="0"&&we==="-1"&&ie==="-1"&&(he==="0"?o[0].publicTransit+=Number(Q.properties[se]):he==="1"?o[1].publicTransit+=Number(Q.properties[se]):he==="2"?o[2].publicTransit+=Number(Q.properties[se]):he==="3"&&(o[3].publicTransit+=Number(Q.properties[se])))})});const x=["walk","bike","car","publicTransit"],T=d3.stack().keys(x)(o),I={top:10,right:40,bottom:40,left:70},P=240,V=100,N=180,q=a.append("svg").attr("width",P+I.left+I.right).attr("height",V+I.top+I.bottom).append("g").attr("transform",`translate(${I.left},${I.top})`),J=d3.scaleBand().domain(o.map(Q=>Q.timePeriod)).range([0,P]).padding(.1),U=d3.scaleLinear().domain([0,d3.max(T[T.length-1],Q=>Q[1])]).nice().range([V,0]),F=d3.scaleOrdinal().domain(x).range(["#f24726","#fac710","#2d9bf0","#0263b9"]);q.append("g").selectAll("g").data(T).join("g").attr("fill",Q=>F(Q.key)).selectAll("rect").data(Q=>Q).join("rect").attr("x",(Q,se)=>J(o[se].timePeriod)).attr("y",Q=>U(Q[1])).attr("height",Q=>U(Q[0])-U(Q[1])).attr("width",J.bandwidth()),q.append("g").attr("transform",`translate(0,${V})`).call(d3.axisBottom(J)),q.append("g").call(d3.axisLeft(U).ticks(null,"s"));const O=q.append("g").attr("class","legend").attr("transform",`translate(${I.left}, ${N-I.bottom+30})`).selectAll(".legend-item").data(x).enter().append("g").attr("class","legend-item").attr("transform",(Q,se)=>`translate(${se*60}, 0)`).attr("stroke","none");O.append("rect").attr("x",-80).attr("y",-20).attr("width",10).attr("height",10).style("fill",Q=>F(Q)),O.append("text").attr("x",-65).attr("y",-10).text(Q=>Q).attr("font-size","10px")},V_=(e,t)=>{const n=t.current;if(!n)return;const a=d3.select("#graph-container-weekday");a.html("");const u=[];n.queryRenderedFeatures({layers:["mobility-Street-Detailed","mobility-Block-Detailed"]}).forEach(ie=>{const ge=ie.properties.object_id;e.current.has(ge)&&u.push({type:"Feature",geometry:ie.geometry,properties:ie.properties})});let o=[{timePeriod:"Morning",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Breakfast",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Lunch",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Afternoon",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Dinner",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Night",walk:0,bike:0,car:0,publicTransit:0}],v=[{timePeriod:"Morning",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Breakfast",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Lunch",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Afternoon",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Dinner",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Night",walk:0,bike:0,car:0,publicTransit:0}];const x=[{timePeriod:"Early Morning",walk:225.31,bike:44.53,car:1766.11,publicTransit:1508.7},{timePeriod:"Morning",walk:3207.24,bike:378.92,car:20038.77,publicTransit:6659.61},{timePeriod:"Lunch",walk:2306.27,bike:316.9,car:13787.66,publicTransit:7026.34},{timePeriod:"Afternoon",walk:1359.1,bike:186.25,car:9242.15,publicTransit:6118.57},{timePeriod:"Evening",walk:1685.12,bike:331.32,car:12511.29,publicTransit:10306.86},{timePeriod:"Night",walk:263.57,bike:51.43,car:2276.55,publicTransit:2076.8}];e.current.size===0&&(o=[...x]),u.length>0&&u.forEach(ie=>{Object.keys(ie.properties).forEach(ge=>{const[Ne,qe,Ce,ke,Te,Oe]=ge.split("_");Ce==="0"&&qe==="1"&&Te==="-1"&&Oe==="-1"?ke==="-1"?o[0].walk+=Number(ie.properties[ge]):ke==="1"?o[1].walk+=Number(ie.properties[ge]):ke==="2"?o[2].walk+=Number(ie.properties[ge]):ke==="3"?o[3].walk+=Number(ie.properties[ge]):ke==="4"?o[4].walk+=Number(ie.properties[ge]):ke==="5"&&(o[5].walk+=Number(ie.properties[ge])):Ce==="1"&&qe==="1"&&Te==="-1"&&Oe==="-1"?ke==="0"?o[0].bike+=Number(ie.properties[ge]):ke==="1"?o[1].bike+=Number(ie.properties[ge]):ke==="2"?o[2].bike+=Number(ie.properties[ge]):ke==="3"?o[3].bike+=Number(ie.properties[ge]):ke==="4"?o[4].bike+=Number(ie.properties[ge]):ke==="5"&&(o[5].bike+=Number(ie.properties[ge])):Ce==="2"&&qe==="1"&&Te==="-1"&&Oe==="-1"?ke==="0"?o[0].car+=Number(ie.properties[ge]):ke==="1"?o[1].car+=Number(ie.properties[ge]):ke==="2"?o[2].car+=Number(ie.properties[ge]):ke==="3"?o[3].car+=Number(ie.properties[ge]):ke==="4"?o[4].car+=Number(ie.properties[ge]):ke==="5"&&(o[5].car+=Number(ie.properties[ge])):Ce==="3"&&qe==="1"&&Te==="-1"&&Oe==="-1"&&(ke==="0"?o[0].publicTransit+=Number(ie.properties[ge]):ke==="1"?o[1].publicTransit+=Number(ie.properties[ge]):ke==="2"?o[2].publicTransit+=Number(ie.properties[ge]):ke==="3"?o[3].publicTransit+=Number(ie.properties[ge]):ke==="4"?o[4].publicTransit+=Number(ie.properties[ge]):ke==="5"&&(o[5].publicTransit+=Number(ie.properties[ge])))})}),u.length>0&&u.forEach(ie=>{Object.keys(ie.properties).forEach(ge=>{const[Ne,qe,Ce,ke,Te,Oe]=ge.split("_");Ce==="0"&&qe==="0"&&Te==="-1"&&Oe==="-1"?ke==="-1"?v[0].walk+=Number(ie.properties[ge]):ke==="1"?v[1].walk+=Number(ie.properties[ge]):ke==="2"?v[2].walk+=Number(ie.properties[ge]):ke==="3"?v[3].walk+=Number(ie.properties[ge]):ke==="4"?v[4].walk+=Number(ie.properties[ge]):ke==="5"&&(v[5].walk+=Number(ie.properties[ge])):Ce==="1"&&qe==="0"&&Te==="-1"&&Oe==="-1"?ke==="0"?v[0].bike+=Number(ie.properties[ge]):ke==="1"?v[1].bike+=Number(ie.properties[ge]):ke==="2"?v[2].bike+=Number(ie.properties[ge]):ke==="3"?v[3].bike+=Number(ie.properties[ge]):ke==="4"?v[4].bike+=Number(ie.properties[ge]):ke==="5"&&(v[5].bike+=Number(ie.properties[ge])):Ce==="2"&&qe==="0"&&Te==="-1"&&Oe==="-1"?ke==="0"?v[0].car+=Number(ie.properties[ge]):ke==="1"?v[1].car+=Number(ie.properties[ge]):ke==="2"?v[2].car+=Number(ie.properties[ge]):ke==="3"?v[3].car+=Number(ie.properties[ge]):ke==="4"?v[4].car+=Number(ie.properties[ge]):ke==="5"&&(v[5].car+=Number(ie.properties[ge])):Ce==="3"&&qe==="0"&&Te==="-1"&&Oe==="-1"&&(ke==="0"?v[0].publicTransit+=Number(ie.properties[ge]):ke==="1"?v[1].publicTransit+=Number(ie.properties[ge]):ke==="2"?v[2].publicTransit+=Number(ie.properties[ge]):ke==="3"?v[3].publicTransit+=Number(ie.properties[ge]):ke==="4"?v[4].publicTransit+=Number(ie.properties[ge]):ke==="5"&&(v[5].publicTransit+=Number(ie.properties[ge])))})}),parseInt(o.reduce((ie,ge)=>ie+ge.walk,0))+parseInt(v.reduce((ie,ge)=>ie+ge.walk,0)),parseInt(o.reduce((ie,ge)=>ie+ge.bike,0))+parseInt(v.reduce((ie,ge)=>ie+ge.bike,0)),parseInt(o.reduce((ie,ge)=>ie+ge.car,0))+parseInt(v.reduce((ie,ge)=>ie+ge.car,0)),parseInt(o.reduce((ie,ge)=>ie+ge.publicTransit,0))+parseInt(v.reduce((ie,ge)=>ie+ge.publicTransit,0));const E=["walk","bike","car","publicTransit"],I=d3.stack().keys(E)(o),P=340,V=225,N={top:40,right:40,bottom:50,left:70},q=P-N.left-N.right,J=V-N.top-N.bottom,U=a.append("svg").attr("width",P).attr("height",V);U.append("text").attr("class","graph-title").attr("x",P/2).attr("y",N.top-25).attr("font-size","14px").attr("text-anchor","middle").text("Weekday Trip Volume and Mode Split"),U.append("text").attr("class","graph-title").attr("x",30).attr("y",N.top,0).attr("font-size","9px").attr("text-anchor","middle").text("Time Periods"),U.append("text").attr("class","graph-title").attr("x",q+90).attr("y",J+70).attr("font-size","9px").attr("text-anchor","middle").text("Number of Trips");const F=U.append("g").attr("transform",`translate(${N.left}, ${N.top})`),R=d3.scaleLinear().domain([0,d3.max(I,ie=>d3.max(ie,ge=>ge[1]))]).range([0,q]),O=d3.scaleBand().domain(o.map(ie=>ie.timePeriod)).range([0,J]).padding(.3),Q=d3.scaleOrdinal().domain(E).range(["#f24726","#fac710","#2d9bf0","#0263b9"]);F.selectAll("g").data(I).enter().append("g").attr("fill",ie=>Q(ie.key)).selectAll("rect").data(ie=>ie).enter().append("rect").attr("y",ie=>O(ie.data.timePeriod)).attr("x",ie=>R(ie[0])).attr("height",O.bandwidth()).attr("width",ie=>R(ie[1])-R(ie[0]));const pe=d3.axisLeft(O);F.append("g").call(pe);const _e=5,ze=d3.axisBottom(R).ticks(_e);F.append("g").attr("transform",`translate(0, ${J})`).call(ze),U.append("text").attr("x",P/2).attr("y",V).attr("text-anchor","middle"),U.append("text").attr("transform","rotate(-90)").attr("x",-(V/2)).attr("y",10).attr("text-anchor","middle");const we=U.append("g").attr("class","legend").attr("transform",`translate(${N.left}, ${V-N.bottom+30})`).selectAll(".legend-item").data(E).enter().append("g").attr("class","legend-item").attr("transform",(ie,ge)=>`translate(${ge*60}, 0)`).attr("stroke","none");we.append("rect").attr("x",0).attr("y",10).attr("width",10).attr("height",10).style("fill",ie=>Q(ie)),we.append("text").attr("x",15).attr("y",20).text(ie=>ie).attr("font-size","10px")},q_=(e,t)=>{const n=t.current;if(!n)return;const a=d3.select("#graph-container-weekend");a.html("");const u=[];n.queryRenderedFeatures({layers:["mobility-Street-Detailed","mobility-Block-Detailed"]}).forEach(we=>{const ie=we.properties.object_id;e.current.has(ie)&&u.push({type:"Feature",geometry:we.geometry,properties:we.properties})});let o=[{timePeriod:"Morning",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Breakfast",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Lunch",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Afternoon",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Dinner",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Night",walk:0,bike:0,car:0,publicTransit:0}];const v=[{timePeriod:"Early Morning",walk:196.42,bike:44.66,car:1591.73,publicTransit:1473.78},{timePeriod:"Morning",walk:3069.64,bike:394.12,car:20284.15,publicTransit:6109.5},{timePeriod:"Lunch",walk:3000.93,bike:416.66,car:13787.66,publicTransit:9402.27},{timePeriod:"Afternoon",walk:1331.69,bike:196.68,car:19540.22,publicTransit:6137.72},{timePeriod:"Evening",walk:1916.97,bike:373.59,car:15200.76,publicTransit:11944.84},{timePeriod:"Night",walk:498.61,bike:109.18,car:4576.76,publicTransit:3883.33}];e.current.size===0&&(o=[...v]),u.length>0&&u.forEach(we=>{Object.keys(we.properties).forEach(ie=>{const[ge,Ne,qe,Ce,ke,Te]=ie.split("_");qe==="0"&&Ne==="0"&&ke==="-1"&&Te==="-1"?Ce==="-1"?o[0].walk+=Number(we.properties[ie]):Ce==="1"?o[1].walk+=Number(we.properties[ie]):Ce==="2"?o[2].walk+=Number(we.properties[ie]):Ce==="3"?o[3].walk+=Number(we.properties[ie]):Ce==="4"?o[4].walk+=Number(we.properties[ie]):Ce==="5"&&(o[5].walk+=Number(we.properties[ie])):qe==="1"&&Ne==="0"&&ke==="-1"&&Te==="-1"?Ce==="0"?o[0].bike+=Number(we.properties[ie]):Ce==="1"?o[1].bike+=Number(we.properties[ie]):Ce==="2"?o[2].bike+=Number(we.properties[ie]):Ce==="3"?o[3].bike+=Number(we.properties[ie]):Ce==="4"?o[4].bike+=Number(we.properties[ie]):Ce==="5"&&(o[5].bike+=Number(we.properties[ie])):qe==="2"&&Ne==="0"&&ke==="-1"&&Te==="-1"?Ce==="0"?o[0].car+=Number(we.properties[ie]):Ce==="1"?o[1].car+=Number(we.properties[ie]):Ce==="2"?o[2].car+=Number(we.properties[ie]):Ce==="3"?o[3].car+=Number(we.properties[ie]):Ce==="4"?o[4].car+=Number(we.properties[ie]):Ce==="5"&&(o[5].car+=Number(we.properties[ie])):qe==="3"&&Ne==="0"&&ke==="-1"&&Te==="-1"&&(Ce==="0"?o[0].publicTransit+=Number(we.properties[ie]):Ce==="1"?o[1].publicTransit+=Number(we.properties[ie]):Ce==="2"?o[2].publicTransit+=Number(we.properties[ie]):Ce==="3"?o[3].publicTransit+=Number(we.properties[ie]):Ce==="4"?o[4].publicTransit+=Number(we.properties[ie]):Ce==="5"&&(o[5].publicTransit+=Number(we.properties[ie])))})});const x=["walk","bike","car","publicTransit"],T=d3.stack().keys(x)(o),I=340,P=225,V={top:40,right:40,bottom:50,left:70},N=I-V.left-V.right,q=P-V.top-V.bottom,J=a.append("svg").attr("width",I).attr("height",P);J.append("text").attr("class","graph-title").attr("x",I/2).attr("y",V.top-22).attr("font-size","14px").attr("text-anchor","middle").text("Weekend Trip Volume and Mode Split"),J.append("text").attr("class","graph-title").attr("x",30).attr("y",V.top,10).attr("font-size","9px").attr("text-anchor","middle").text("Time Periods"),J.append("text").attr("class","graph-title").attr("x",N+90).attr("y",q+70).attr("font-size","9px").attr("text-anchor","middle").text("Number of Trips");const U=J.append("g").attr("transform",`translate(${V.left}, ${V.top})`),F=d3.scaleLinear().domain([0,d3.max(T,we=>d3.max(we,ie=>ie[1]))]).range([0,N]),R=d3.scaleBand().domain(o.map(we=>we.timePeriod)).range([0,q]).padding(.3),O=d3.scaleOrdinal().domain(x).range(["#f24726","#fac710","#2d9bf0","#0263b9"]);U.selectAll("g").data(T).enter().append("g").attr("fill",we=>O(we.key)).selectAll("rect").data(we=>we).enter().append("rect").attr("y",we=>R(we.data.timePeriod)).attr("x",we=>F(we[0])).attr("height",R.bandwidth()).attr("width",we=>F(we[1])-F(we[0]));const se=d3.axisLeft(R);U.append("g").call(se);const pe=5,_e=d3.axisBottom(F).ticks(pe);U.append("g").attr("class","x-axis").attr("transform",`translate(0, ${q})`).call(_e),J.append("text").attr("x",I/2).attr("y",P).attr("text-anchor","middle"),J.append("text").attr("transform","rotate(-90)").attr("x",-(P/2)).attr("y",20).attr("text-anchor","middle");const he=J.append("g").attr("class","legend").attr("transform",`translate(${V.left}, ${P-V.bottom+30})`).selectAll(".legend-item").data(x).enter().append("g").attr("class","legend-item").attr("transform",(we,ie)=>`translate(${ie*60}, 0)`).attr("stroke","none");he.append("rect").attr("x",0).attr("y",10).attr("width",10).attr("height",10).style("fill",we=>O(we)),he.append("text").attr("x",15).attr("y",20).text(we=>we).attr("font-size","10px")},O8=(e,t,n)=>{const a=t.current;a&&d3.json(n).then(u=>{const f=d3.select("#graph-container-energybuildingsenario");f.html("");let o=0,v=Array.from({length:12},(Te,Oe)=>({Month:Oe+1,equipment:0,lighting:0,hotWater:0,pv:0,heating:0,cooling:0}));const x=u.features[0].properties["Gas[kWh][Mth]"];u.features[0].properties["Electricity[kWh][Mth]"];const E=u.features[0].properties["Heating[KWh][Mth]"],T=u.features[0].properties["Cooling[KWh][Mth]"],I=u.features[0].properties["Equipment[KWh][Mth]"],P=u.features[0].properties["PV[KWh][Mth]"],V=u.features[0].properties["Lighting[KWh][Mth]"],N=u.features[0].properties["HotWater[KWh][Mth]"],q=x.map((Te,Oe)=>({Month:Oe+1,heating:E[Oe],cooling:T[Oe],equipment:I[Oe],lighting:V[Oe],hotWater:N[Oe],pv:P[Oe]})),J=q.reduce((Te,Oe)=>({heating:Te.heating+Oe.heating,cooling:Te.cooling+Oe.cooling,equipment:Te.equipment+Oe.equipment,lighting:Te.lighting+Oe.lighting,hotWater:Te.hotWater+Oe.hotWater,pv:Te.pv+Oe.pv}),{heating:0,cooling:0,equipment:0,lighting:0,hotWater:0,pv:0});if(Object.values(J).reduce((Te,Oe)=>Te+Oe,0),e.current.size===0)parseInt(u.features[0].properties.Area_SQM_ESL),parseInt(u.features[0].properties["Cost[$][Yr]"]),o=parseInt(u.features[0].properties["CO2[kg][Yr]"]),v=[...q];else{const Te=Array.from(e.current),Oe=[];a.queryRenderedFeatures({layers:["energy-Building"]}).forEach($e=>{const et=$e.properties.ID_ESL;Te.includes(et)&&Oe.push({type:"Feature",geometry:$e.geometry,properties:$e.properties})}),Oe.forEach($e=>{const et=JSON.parse($e.properties["Heating[KWh][Mth]"]),Wt=JSON.parse($e.properties["Cooling[KWh][Mth]"]),Re=JSON.parse($e.properties["Equipment[KWh][Mth]"]),He=JSON.parse($e.properties["Lighting[KWh][Mth]"]),Zt=JSON.parse($e.properties["HotWater[KWh][Mth]"]),Pt=JSON.parse($e.properties["PV[KWh][Mth]"]),Gt=JSON.parse($e.properties["CO2[kg][Yr]"]);JSON.parse($e.properties["Cost[$][Yr]"]),JSON.parse($e.properties.Area_SQM_ESL),console.log("co2Data:",Gt),et.forEach((zt,nr)=>{const Kt=nr;v[Kt].heating+=parseFloat(zt),v[Kt].cooling+=parseFloat(Wt[nr]),v[Kt].equipment+=parseFloat(Re[nr]),v[Kt].lighting+=parseFloat(He[nr]),v[Kt].hotWater+=parseFloat(Zt[nr]),v[Kt].pv+=parseFloat(Pt[nr])}),o+=parseInt(Gt),console.log("totalCo2:",o)})}const U=v.reduce((Te,Oe)=>({heating:Te.heating+Oe.heating,cooling:Te.cooling+Oe.cooling,equipment:Te.equipment+Oe.equipment,lighting:Te.lighting+Oe.lighting,hotWater:Te.hotWater+Oe.hotWater,pv:Te.pv+Oe.pv}),{heating:0,cooling:0,equipment:0,lighting:0,hotWater:0,pv:0});Object.values(U).reduce((Te,Oe)=>Te+Oe,0);const R=d3.stack().keys(["equipment","lighting","hotWater","PV","cooling","heating"]).order(d3.stackOrderNone).offset(d3.stackOffsetNone)(v),O=360,Q=240,se={top:30,right:20,bottom:70,left:70},pe=O-se.left-se.right,_e=Q-se.top-se.bottom,ze=f.append("svg").attr("width",O).attr("height",Q),he=ze.append("g").attr("transform",`translate(${se.left}, ${se.top})`),we=d3.max(v,Te=>d3.sum(Object.values(Te).slice(1))),ie=d3.scaleBand().domain(v.map(Te=>Te.Month)).rangeRound([0,pe]).padding(.1),ge=d3.scaleLinear().domain([0,we]).range([_e,0]),Ne=d3.scaleOrdinal().domain(["equipment","lighting","hotWater","PV","cooling","heating"]).range(["#959595","#f2e75c","#eec176","#9C27B0","#6faadd","#cf5867"]);he.selectAll(".stack").data(R).enter().append("g").attr("class","stack").attr("fill",Te=>Ne(Te.key)).selectAll("rect").data(Te=>Te).enter().append("rect").attr("x",Te=>ie(Te.data.Month)).attr("y",Te=>ge(Te[1])).attr("height",Te=>ge(Te[0])-ge(Te[1])).attr("width",ie.bandwidth());const Ce=ze.append("g").attr("class","legend").attr("transform",`translate(${se.left}, ${Q-se.bottom+20})`),ke=100;Ne.domain().forEach((Te,Oe)=>{const Je=Ce.append("g").attr("transform",`translate(${Oe%3*ke}, ${Math.floor(Oe/3)*20})`);Je.append("rect").attr("x",0).attr("y",20).attr("width",10).attr("height",10).attr("fill",Ne(Te)),Je.append("text").attr("x",15).attr("y",25).attr("dy","0.35em").style("font-size","10px").text(Te)})})},B8=(e,t,n)=>{const a=t.current;a&&d3.json(n).then(u=>{const f=d3.select("#graph-container-energysummaryuse");f.html("");let o=0,v=0,x=0,E=Array.from({length:12},(Re,He)=>({Month:He+1,equipment:0,lighting:0,hotWater:0,pv:0,heating:0,cooling:0}));const T=u.features[0].properties["Gas[kWh][Mth]"];u.features[0].properties["Electricity[kWh][Mth]"];const I=u.features[0].properties["Heating[KWh][Mth]"],P=u.features[0].properties["Cooling[KWh][Mth]"],V=u.features[0].properties["Equipment[KWh][Mth]"],N=u.features[0].properties["PV[KWh][Mth]"],q=u.features[0].properties["Lighting[KWh][Mth]"],J=u.features[0].properties["HotWater[KWh][Mth]"],U=T.map((Re,He)=>({Month:He+1,heating:I[He],cooling:P[He],equipment:V[He],lighting:q[He],hotWater:J[He],pv:N[He]})),F=U.reduce((Re,He)=>({heating:Re.heating+He.heating,cooling:Re.cooling+He.cooling,equipment:Re.equipment+He.equipment,lighting:Re.lighting+He.lighting,hotWater:Re.hotWater+He.hotWater,pv:Re.pv+He.pv}),{heating:0,cooling:0,equipment:0,lighting:0,hotWater:0,pv:0}),R=Object.values(F).reduce((Re,He)=>Re+He,0);if(e.current.size===0)x=parseInt(u.features[0].properties.Area_SQM_ESL),v=parseInt(u.features[0].properties["Cost[$][Yr]"]),o=parseInt(u.features[0].properties["CO2[kg][Yr]"]),E=[...U];else{const Re=Array.from(e.current),He=[];a.queryRenderedFeatures({layers:["energy-Building"]}).forEach(Pt=>{const Gt=Pt.properties.ID_ESL;Re.includes(Gt)&&He.push({type:"Feature",geometry:Pt.geometry,properties:Pt.properties})}),He.forEach(Pt=>{const Gt=JSON.parse(Pt.properties["Heating[KWh][Mth]"]),zt=JSON.parse(Pt.properties["Cooling[KWh][Mth]"]),nr=JSON.parse(Pt.properties["Equipment[KWh][Mth]"]),Kt=JSON.parse(Pt.properties["Lighting[KWh][Mth]"]),Yt=JSON.parse(Pt.properties["HotWater[KWh][Mth]"]),st=JSON.parse(Pt.properties["PV[KWh][Mth]"]),Lt=JSON.parse(Pt.properties["CO2[kg][Yr]"]),er=JSON.parse(Pt.properties["Cost[$][Yr]"]),Mr=JSON.parse(Pt.properties.Area_SQM_ESL);console.log("co2Data:",Lt),Gt.forEach((Nr,tr)=>{const Vr=tr;E[Vr].heating+=parseFloat(Nr),E[Vr].cooling+=parseFloat(zt[tr]),E[Vr].equipment+=parseFloat(nr[tr]),E[Vr].lighting+=parseFloat(Kt[tr]),E[Vr].hotWater+=parseFloat(Yt[tr]),E[Vr].pv+=parseFloat(st[tr])}),o+=parseInt(Lt),v+=parseInt(er),x+=Mr,console.log("totalCo2:",o)})}const O=E.reduce((Re,He)=>({heating:Re.heating+He.heating,cooling:Re.cooling+He.cooling,equipment:Re.equipment+He.equipment,lighting:Re.lighting+He.lighting,hotWater:Re.hotWater+He.hotWater,pv:Re.pv+He.pv}),{heating:0,cooling:0,equipment:0,lighting:0,hotWater:0,pv:0}),Q=Object.values(O).reduce((Re,He)=>Re+He,0);d3.stack().keys(["equipment","lighting","hotWater","PV","cooling","heating"]).order(d3.stackOrderNone).offset(d3.stackOffsetNone)(E);const pe=380,_e=200,ze={top:170,right:50,bottom:100,left:10},he=pe-ze.left-ze.right,ie=f.append("svg").attr("width",pe).attr("height",_e).append("g").attr("transform",`translate(${ze.left}, ${ze.top})`);var ge=ze.top-300,Ne=100,qe=30,Ce=5,ke=5,Te=[{x:0,y:ge,width:Ne,height:qe,fill:"#89c8a6",rx:Ce,ry:ke,value:v.toLocaleString(),title:"Cost",unit:"[$/Yr]"},{x:110,y:ge,width:Ne,height:qe,fill:"#d0df5a",rx:Ce,ry:ke,value:Q.toLocaleString(),title:"Total Energy",unit:"[kWh/Yr]"},{x:220,y:ge,width:Ne,height:qe,fill:"#f2e75c",rx:Ce,ry:ke,value:o.toLocaleString(),title:"CO2",unit:"[kg/Yr]"}],Oe=[{x:0,y:ge+qe+50,width:Ne,height:qe,fill:"#D8E0BB",rx:Ce,ry:ke,value:x.toLocaleString(),title:"Area",unit:"[SQM]"},{x:110,y:ge+qe+50,width:Ne,height:qe,fill:"#B6CEC7",rx:Ce,ry:ke,value:parseInt(Q/x).toLocaleString(),title:"Normalized Energy",unit:"[kWh/SQM/Yr]"},{x:220,y:ge+qe+50,width:Ne,height:qe,fill:"#86A3C3",rx:Ce,ry:ke,value:(Q/R).toFixed(4),title:"Percentage",unit:"[%]"}],Je=ie.selectAll(".rectangle").data(Te),$e=ie.selectAll(".rectangle").data(Oe),et=Je.enter().append("g").attr("class","rectangle"),Wt=$e.enter().append("g").attr("class","rectangle");et.append("text").attr("class","graph-title").attr("x",he/2).attr("y",ze.top/2-240).attr("font-size","14px").attr("text-anchor","middle").attr("font-family","Open Sans","sans-serif").text("Energy Use Summary"),et.append("rect").attr("x",Re=>Re.x).attr("y",Re=>Re.y).attr("width",Re=>Re.width).attr("height",Re=>Re.height).attr("fill",Re=>Re.fill).attr("rx",Re=>Re.rx).attr("ry",Re=>Re.ry),et.append("text").attr("x",Re=>Re.x+Re.width/2).attr("y",Re=>Re.y+Re.height/2).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("font-size","12px").style("font-weight","bold").text(Re=>Re.value),et.append("text").attr("x",Re=>Re.x).attr("y",Re=>Re.y+Re.height+12).attr("text-anchor","left").attr("dominant-baseline","middle").attr("font-size","11px").style("font-weight","normal").text(Re=>Re.title),et.append("text").attr("x",Re=>Re.x).attr("y",Re=>Re.y+Re.height+24).attr("text-anchor","left").attr("dominant-baseline","middle").attr("font-size","8px").style("font-weight","light").attr("fill","gray").text(Re=>Re.unit),Wt.append("rect").attr("x",Re=>Re.x).attr("y",Re=>Re.y).attr("width",Re=>Re.width).attr("height",Re=>Re.height).attr("fill",Re=>Re.fill).attr("rx",Re=>Re.rx).attr("ry",Re=>Re.ry),Wt.append("text").attr("x",Re=>Re.x+Re.width/2).attr("y",Re=>Re.y+Re.height/2).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("font-size","12px").style("font-weight","bold").text(Re=>Re.value),Wt.append("text").attr("x",Re=>Re.x).attr("y",Re=>Re.y+Re.height+12).attr("text-anchor","left").attr("dominant-baseline","middle").attr("font-size","11px").style("font-weight","normal").text(Re=>Re.title),Wt.append("text").attr("x",Re=>Re.x).attr("y",Re=>Re.y+Re.height+24).attr("text-anchor","left").attr("dominant-baseline","middle").attr("font-size","8px").style("font-weight","light").attr("fill","gray").text(Re=>Re.unit)})},HE=(e,t,n)=>{const a=t.current;a&&d3.json(n).then(u=>{const f=d3.select("#graph-container-energyenduse");f.html("");let o=0,v=Array.from({length:12},($e,et)=>({Month:et+1,equipment:0,lighting:0,hotWater:0,pv:0,heating:0,cooling:0}));const x=u.features[0].properties["Gas[kWh][Mth]"];u.features[0].properties["Electricity[kWh][Mth]"];const E=u.features[0].properties["Heating[KWh][Mth]"],T=u.features[0].properties["Cooling[KWh][Mth]"],I=u.features[0].properties["Equipment[KWh][Mth]"],P=u.features[0].properties["PV[KWh][Mth]"],V=u.features[0].properties["Lighting[KWh][Mth]"],N=u.features[0].properties["HotWater[KWh][Mth]"],q=x.map(($e,et)=>({Month:et+1,heating:E[et],cooling:T[et],equipment:I[et],lighting:V[et],hotWater:N[et],pv:P[et]})),J=q.reduce(($e,et)=>({heating:$e.heating+et.heating,cooling:$e.cooling+et.cooling,equipment:$e.equipment+et.equipment,lighting:$e.lighting+et.lighting,hotWater:$e.hotWater+et.hotWater,pv:$e.pv+et.pv}),{heating:0,cooling:0,equipment:0,lighting:0,hotWater:0,pv:0});if(Object.values(J).reduce(($e,et)=>$e+et,0),e.current.size===0)parseInt(u.features[0].properties.Area_SQM_ESL),parseInt(u.features[0].properties["Cost[$][Yr]"]),o=parseInt(u.features[0].properties["CO2[kg][Yr]"]),v=[...q];else{const $e=Array.from(e.current),et=[];a.queryRenderedFeatures({layers:["energy-Building"]}).forEach(Re=>{const He=Re.properties.ID_ESL;$e.includes(He)&&et.push({type:"Feature",geometry:Re.geometry,properties:Re.properties})}),et.forEach(Re=>{const He=JSON.parse(Re.properties["Heating[KWh][Mth]"]),Zt=JSON.parse(Re.properties["Cooling[KWh][Mth]"]),Pt=JSON.parse(Re.properties["Equipment[KWh][Mth]"]),Gt=JSON.parse(Re.properties["Lighting[KWh][Mth]"]),zt=JSON.parse(Re.properties["HotWater[KWh][Mth]"]),nr=JSON.parse(Re.properties["PV[KWh][Mth]"]),Kt=JSON.parse(Re.properties["CO2[kg][Yr]"]);JSON.parse(Re.properties["Cost[$][Yr]"]),JSON.parse(Re.properties.Area_SQM_ESL),console.log("co2Data:",Kt),He.forEach((Yt,st)=>{const Lt=st;v[Lt].heating+=parseFloat(Yt),v[Lt].cooling+=parseFloat(Zt[st]),v[Lt].equipment+=parseFloat(Pt[st]),v[Lt].lighting+=parseFloat(Gt[st]),v[Lt].hotWater+=parseFloat(zt[st]),v[Lt].pv+=parseFloat(nr[st])}),o+=parseInt(Kt),console.log("totalCo2:",o)})}const U=v.reduce(($e,et)=>({heating:$e.heating+et.heating,cooling:$e.cooling+et.cooling,equipment:$e.equipment+et.equipment,lighting:$e.lighting+et.lighting,hotWater:$e.hotWater+et.hotWater,pv:$e.pv+et.pv}),{heating:0,cooling:0,equipment:0,lighting:0,hotWater:0,pv:0});Object.values(U).reduce(($e,et)=>$e+et,0);const R=d3.stack().keys(["equipment","lighting","hotWater","PV","cooling","heating"]).order(d3.stackOrderNone).offset(d3.stackOffsetNone)(v),O=340,Q=225,se={top:30,right:20,bottom:80,left:40},pe=O-se.left-se.right,_e=Q-se.top-se.bottom,ze=f.append("svg").attr("width",O).attr("height",Q),he=ze.append("g").attr("transform",`translate(${se.left}, ${se.top})`);he.append("text").attr("class","graph-title").attr("x",pe/2).attr("y",se.top/2-30).attr("font-size","14px").attr("text-anchor","middle").text("Energy Use by End Use"),he.append("text").attr("class","graph-title").attr("x",pe+1).attr("y",_e+30).attr("font-size","10px").attr("text-anchor","middle").text("Month"),he.append("text").attr("class","graph-title").attr("x",-15).attr("y",se.top-40).attr("font-size","10px").attr("text-anchor","middle").text("kWh");const we=d3.max(v,$e=>d3.sum(Object.values($e).slice(1))),ie=d3.scaleLinear().domain([1,12]).range([0,pe]),ge=d3.scaleLinear().domain([0,we]).range([_e,0]),Ne=d3.scaleOrdinal().domain(["equipment","lighting","hotWater","PV","cooling","heating"]).range(["#959595","#f2e75c","#eec176","#9C27B0","#6faadd","#cf5867"]);he.append("g").attr("class","y-axis").call(d3.axisLeft(ge).ticks(8).tickFormat($e=>{let et=1,Wt="";return $e>=1e9?(et=1e9,Wt="G"):$e>=1e6?(et=1e6,Wt="M"):$e>=1e3&&(et=1e3,Wt="K"),$e/et+Wt})),he.selectAll(".stack").data(R).enter().append("g").attr("class","stack").attr("fill",$e=>Ne($e.key)).selectAll("rect").data($e=>$e).enter().append("rect").attr("x",$e=>ie($e.data.Month)).attr("y",$e=>ge($e[1])).attr("height",$e=>ge($e[0])-ge($e[1])).attr("width",ie(1)-ie(0)-5),he.append("g").attr("class","x-axis").attr("transform",`translate(0, ${_e})`).call(d3.axisBottom(ie).ticks(12).tickFormat(d3.format("d")));const Ce=he.append("g").attr("class","reference-lines");he.selectAll(".y-axis .tick").data().map($e=>+$e).forEach($e=>{Ce.append("line").attr("x1",0).attr("x2",pe+25).attr("y1",ge($e)).attr("y2",ge($e)).attr("class","reference-line").style("stroke","grey").attr("stroke-width",.3).style("stroke-dasharray","4 4")});const Oe=ze.append("g").attr("class","legend").attr("transform",`translate(${se.left}, ${Q-se.bottom+20})`),Je=100;Ne.domain().forEach(($e,et)=>{const Wt=Oe.append("g").attr("transform",`translate(${et%3*Je}, ${Math.floor(et/3)*20})`);Wt.append("rect").attr("x",0).attr("y",20).attr("width",10).attr("height",10).attr("fill",Ne($e)),Wt.append("text").attr("x",15).attr("y",25).attr("dy","0.35em").style("font-size","10px").text($e)})})},N8=(e,t)=>{const n=t.current;if(!n)return;const a=d3.select("#graph-container-energyfueluse");a.html("");let u=[{month:1,gas:0,electricity:0},{month:2,gas:0,electricity:0},{month:3,gas:0,electricity:0},{month:4,gas:0,electricity:0},{month:5,gas:0,electricity:0},{month:6,gas:0,electricity:0},{month:7,gas:0,electricity:0},{month:8,gas:0,electricity:0},{month:9,gas:0,electricity:0},{month:10,gas:0,electricity:0},{month:11,gas:0,electricity:0},{month:12,gas:0,electricity:0}];const f=[{month:1,gas:292456832,electricity:37756},{month:2,gas:243212032,electricity:33694},{month:3,gas:214523040,electricity:36607},{month:4,gas:113816456,electricity:32627},{month:5,gas:40872760,electricity:36890},{month:6,gas:13437732,electricity:38806},{month:7,gas:5359225,electricity:43566},{month:8,gas:9691384,electricity:42551},{month:9,gas:28674048,electricity:35716},{month:10,gas:80831360,electricity:34014},{month:11,gas:158096176,electricity:34262},{month:12,gas:238814736,electricity:35995}];if(e.current.size===0)u=[...f];else{const he=[];n.queryRenderedFeatures({layers:["energy-Building"]}).forEach(ie=>{const ge=ie.properties.ID_ESL;e.current.has(ge)&&he.push({type:"Feature",geometry:ie.geometry,properties:ie.properties})}),u=he.reduce((ie,ge)=>{const Ne=JSON.parse(ge.properties["Gas[kWh][Mth]"]),qe=JSON.parse(ge.properties["Electricity[kWh][Mth]"]);return Ne.forEach((Ce,ke)=>{ie[ke]||(ie[ke]={month:ke+1,gas:0,electricity:0}),ie[ke].gas+=Math.round(parseFloat(Ce)),ie[ke].electricity+=Math.round(parseFloat(qe[ke]))}),ie},[])}const o=340,v=225,x={top:30,right:20,bottom:40,left:40},E=o-x.left-x.right,T=v-x.top-x.bottom,I=a.append("svg").attr("width",o).attr("height",v),P=I.append("g").attr("transform",`translate(${x.left}, ${x.top})`),V=d3.max(u,he=>he.gas),N=d3.max(u,he=>he.electricity),q=Math.max(V,N),J=d3.scaleLinear().domain([1,12]).range([0,E]),U=d3.scaleLinear().domain([0,q]).range([T,0]),F=d3.line().x(he=>J(he.month)).y(he=>U(he.gas)),R=d3.line().x(he=>J(he.month)).y(he=>U(he.electricity));P.append("g").attr("transform",`translate(0, ${T})`).call(d3.axisBottom(J)),P.append("g").attr("class","y-axis").call(d3.axisLeft(U).ticks(8).tickFormat(he=>{let we=1,ie="";return he>=1e9?(we=1e9,ie="G"):he>=1e6?(we=1e6,ie="M"):he>=1e3&&(we=1e3,ie="K"),he/we+ie})),P.append("text").attr("class","graph-title").attr("x",E/2).attr("y",x.top-40).attr("font-size","14px").attr("text-anchor","middle").text("Energy Use by Fuel Use"),P.append("text").attr("class","graph-title").attr("x",E+1).attr("y",T+30).attr("font-size","10px").attr("text-anchor","middle").text("Month"),P.append("text").attr("class","graph-title").attr("x",-20).attr("y",x.top-40).attr("font-size","10px").attr("text-anchor","middle").text("kWh"),P.append("path").datum(u).attr("fill","none").attr("stroke","#FFB100").attr("stroke-width",2).attr("d",F),P.append("path").datum(u).attr("fill","none").attr("stroke","#1569C7").attr("stroke-width",2).attr("d",R);const O=P.append("g").attr("class","reference-lines");P.selectAll(".y-axis .tick").data().map(he=>+he).forEach(he=>{O.append("line").attr("x1",0).attr("x2",E).attr("y1",U(he)).attr("y2",U(he)).attr("class","reference-line").style("stroke","grey").attr("stroke-width",.3).style("stroke-dasharray","4 4")});const pe=I.append("g").attr("class","legend").attr("transform",`translate(${x.left}, ${v-x.bottom})`),_e=100,ze=35;pe.append("line").attr("x1",0).attr("y1",ze).attr("x2",30).attr("y2",ze).attr("stroke","#FFB100").attr("stroke-width",2),pe.append("text").attr("x",35).attr("y",ze).attr("dy","0.35em").style("font-size","10px").style("fill","black").text("Gas"),pe.append("line").attr("x1",_e).attr("y1",ze).attr("x2",_e+30).attr("y2",ze).attr("stroke","#1569C7").attr("stroke-width",2),pe.append("text").attr("x",_e+35).attr("y",ze).attr("dy","0.35em").style("font-size","10px").style("fill","black").text("Electricity")},KE=(e,t)=>{const n=t.current;if(!n)return;const a=d3.select("#graph-container-energyone");a.html("");const u=[];n.queryRenderedFeatures({layers:["energy-Feeder"]}).forEach(Ce=>{const ke=Ce.properties.ID_ESL;e.current.has(ke)&&u.push({type:"Feature",geometry:Ce.geometry,properties:Ce.properties})});const o=u.reduce((Ce,ke)=>{const Te=JSON.parse(ke.properties.GasDemand_KWh),Oe=JSON.parse(ke.properties.ElectricityDemand_KWh);return console.log("gasData:",Te),Te.forEach((Je,$e)=>{Ce[$e]||(Ce[$e]={hour:$e+1,gas:0,electricity:0}),Ce[$e].gas+=Math.round(Je),Ce[$e].electricity+=Math.round(Oe[$e])}),Ce},[]),v=1,x=168,E=o.filter((Ce,ke)=>ke>=v&&ke<=x),T=340,I=220,P={top:50,right:20,bottom:40,left:60},V=T-P.left-P.right,N=I-P.top-P.bottom,q=a.append("svg").attr("width",T).attr("height",I),J=q.append("g").attr("transform",`translate(${P.left}, ${P.top})`),U=d3.max(E,Ce=>Ce.gas),F=d3.max(E,Ce=>Ce.electricity),R=Math.max(U,F),O=d3.scaleLinear().domain([1,168]).range([0,V]),Q=d3.scaleLinear().domain([0,R]).range([N,0]),se=d3.line().x(Ce=>O(Ce.hour)).y(Ce=>Q(Ce.gas)),pe=d3.line().x(Ce=>O(Ce.hour)).y(Ce=>Q(Ce.electricity)),_e=[24,48,72,96,120,144],ze=d3.axisBottom(O).tickValues(_e);J.append("g").attr("class","x-axis").attr("transform","translate(0,"+N+")").call(ze),J.append("g").attr("class","y-axis").call(d3.axisLeft(Q)),J.append("text").attr("class","graph-title").attr("x",V/2).attr("y",P.top-70).attr("font-size","13px").attr("text-anchor","middle").text("Energy Load of Winter Week").append("tspan").attr("font-size","10px").text(" (1.1-1.7)"),J.append("text").attr("class","graph-title").attr("x",-20).attr("y",P.top-60).attr("font-size","10px").attr("text-anchor","middle").text("kWh"),J.append("text").attr("class","graph-title").attr("x",V+8).attr("y",N+15).attr("font-size","10px").attr("text-anchor","middle").text("Hr");const he=[24,48,72,96,120,144,168];J.selectAll(".vertical-line").data(he).enter().append("line").attr("class","vertical-line").attr("x1",Ce=>O(Ce)).attr("x2",Ce=>O(Ce)).attr("y1",0).attr("y2",N).attr("stroke-width",1).style("stroke","black").style("stroke-dasharray","2");const we=J.append("g").attr("class","reference-lines");J.selectAll(".y-axis .tick").data().map(Ce=>+Ce).forEach(Ce=>{we.append("line").attr("x1",0).attr("x2",V).attr("y1",Q(Ce)).attr("y2",Q(Ce)).attr("class","reference-line").style("stroke","grey").attr("stroke-width",.3).style("stroke-dasharray","4 4")}),J.append("path").datum(E).attr("fill","none").attr("stroke","#FFB100").attr("stroke-width",2).attr("d",se),J.append("path").datum(E).attr("fill","none").attr("stroke","#1569C7").attr("stroke-width",2).attr("d",pe);const Ne=q.append("g").attr("class","legend").attr("transform",`translate(${P.left}, ${I-P.bottom})`),qe=100;Ne.append("line").attr("x1",0).attr("y1",30).attr("x2",30).attr("y2",30).attr("stroke","#FFBF00").attr("stroke-width",2),Ne.append("text").attr("x",35).attr("y",30).attr("dy","0.35em").style("font-size","10px").style("fill","black").text("Gas"),Ne.append("line").attr("x1",qe).attr("y1",30).attr("x2",qe+30).attr("y2",30).attr("stroke","#1569C7").attr("stroke-width",2),Ne.append("text").attr("x",qe+35).attr("y",30).attr("dy","0.35em").style("font-size","10px").style("fill","black").text("Electricity")},ZE=(e,t)=>{const n=t.current;if(!n)return;const a=d3.select("#graph-container-energytwo");a.html("");const u=[];n.queryRenderedFeatures({layers:["energy-Feeder"]}).forEach(Ce=>{const ke=Ce.properties.ID_ESL;e.current.has(ke)&&u.push({type:"Feature",geometry:Ce.geometry,properties:Ce.properties})});const o=u.reduce((Ce,ke)=>{const Te=JSON.parse(ke.properties.GasDemand_KWh),Oe=JSON.parse(ke.properties.ElectricityDemand_KWh);return Te.forEach((Je,$e)=>{Ce[$e]||(Ce[$e]={hour:$e+1,gas:0,electricity:0}),Ce[$e].gas+=Math.round(Je),Ce[$e].electricity+=Math.round(Oe[$e])}),Ce},[]),v=5285,x=5453,E=o.filter((Ce,ke)=>ke>=v&&ke<=x),T=340,I=220,P={top:50,right:20,bottom:40,left:60},V=T-P.left-P.right,N=I-P.top-P.bottom,q=a.append("svg").attr("width",T).attr("height",I),J=q.append("g").attr("transform",`translate(${P.left}, ${P.top})`),U=d3.max(E,Ce=>Ce.gas),F=d3.max(E,Ce=>Ce.electricity),R=Math.max(U,F),O=d3.scaleLinear().domain([5285,5453]).range([0,V]),Q=d3.scaleLinear().domain([0,R]).range([N,0]),se=d3.line().x(Ce=>O(Ce.hour)).y(Ce=>Q(Ce.gas)),pe=d3.line().x(Ce=>O(Ce.hour)).y(Ce=>Q(Ce.electricity)),_e=[5309,5333,5357,5381,5405,5429],ze=d3.axisBottom(O).tickValues(_e);J.append("g").attr("class","x-axis").attr("transform","translate(0,"+N+")").call(ze),J.append("g").attr("class","y-axis").call(d3.axisLeft(Q)),J.append("text").attr("class","graph-title").attr("x",V/2).attr("y",P.top-70).attr("font-size","13px").attr("text-anchor","middle").text("Energy Load of Summer Week").append("tspan").attr("font-size","10px").text(" (7.1-7.7)"),J.append("text").attr("class","graph-title").attr("x",-20).attr("y",P.top-60).attr("font-size","10px").attr("text-anchor","middle").text("kWh"),J.append("text").attr("class","graph-title").attr("x",V+8).attr("y",N+15).attr("font-size","10px").attr("text-anchor","middle").text("Hr");const he=[5309,5333,5357,5381,5405,5429,5453];J.selectAll(".vertical-line").data(he).enter().append("line").attr("class","vertical-line").attr("x1",Ce=>O(Ce)).attr("x2",Ce=>O(Ce)).attr("y1",0).attr("y2",N).attr("stroke-width",1).style("stroke","black").style("stroke-dasharray","2"),J.append("path").datum(E).attr("fill","none").attr("stroke","#FFB100").attr("stroke-width",2).attr("d",se),J.append("path").datum(E).attr("fill","none").attr("stroke","#1569C7").attr("stroke-width",2).attr("d",pe);const we=J.append("g").attr("class","reference-lines");J.selectAll(".y-axis .tick").data().map(Ce=>+Ce).forEach(Ce=>{we.append("line").attr("x1",0).attr("x2",V).attr("y1",Q(Ce)).attr("y2",Q(Ce)).attr("class","reference-line").style("stroke","grey").attr("stroke-width",.3).style("stroke-dasharray","4 4")});const Ne=q.append("g").attr("class","legend").attr("transform",`translate(${P.left}, ${I-P.bottom})`),qe=100;Ne.append("line").attr("x1",0).attr("y1",30).attr("x2",30).attr("y2",30).attr("stroke","#FFB100").attr("stroke-width",2),Ne.append("text").attr("x",35).attr("y",30).attr("dy","0.35em").style("font-size","10px").style("fill","black").text("Gas"),Ne.append("line").attr("x1",qe).attr("y1",30).attr("x2",qe+30).attr("y2",30).attr("stroke","#1569C7").attr("stroke-width",2),Ne.append("text").attr("x",qe+35).attr("y",30).attr("dy","0.35em").style("font-size","10px").style("fill","black").text("Electricity")},XE=(e,t)=>{const n=t.current;if(!n)return;const a=d3.select("#graph-container-energythree");a.html("");const u=[];n.queryRenderedFeatures({layers:["energy-Feeder"]}).forEach(ie=>{const ge=ie.properties.ID_ESL;e.current.has(ge)&&u.push({type:"Feature",geometry:ie.geometry,properties:ie.properties})});const o=u.reduce((ie,ge)=>{const Ne=JSON.parse(ge.properties.GasDemand_KWh),qe=JSON.parse(ge.properties.ElectricityDemand_KWh);return Ne.forEach((Ce,ke)=>{ie[ke]||(ie[ke]={hour:ke+1,gas:0,electricity:0}),ie[ke].gas+=Math.round(Ce),ie[ke].electricity+=Math.round(qe[ke])}),ie},[]),v=o.map(ie=>({hour:ie.hour,gas:ie.gas,electricity:0})),x=o.map(ie=>({hour:ie.hour,gas:0,electricity:ie.electricity}));v.sort((ie,ge)=>ge.gas-ie.gas),x.sort((ie,ge)=>ge.electricity-ie.electricity),o.forEach((ie,ge)=>{ie.gas=v[ge].gas,ie.electricity=x[ge].electricity});const E=340,T=220,I={top:60,right:20,bottom:40,left:60},P=E-I.left-I.right,V=T-I.top-I.bottom,N=a.append("svg").attr("width",E).attr("height",T),q=N.append("g").attr("transform",`translate(${I.left}, ${I.top})`),J=d3.max(o,ie=>ie.gas),U=d3.max(o,ie=>ie.electricity),F=Math.max(J,U),R=d3.scaleLinear().domain([1,8765]).range([0,P]),O=d3.scaleLinear().domain([0,F]).range([V,0]),Q=d3.line().x(ie=>R(ie.hour)).y(ie=>O(ie.gas)),se=d3.line().x(ie=>R(ie.hour)).y(ie=>O(ie.electricity));q.append("g").attr("transform",`translate(0, ${V})`).call(d3.axisBottom(R)),q.append("g").attr("class","y-axis").call(d3.axisLeft(O)),q.append("text").attr("class","graph-title").attr("x",P/2).attr("y",I.top-70).attr("font-size","14px").attr("text-anchor","middle").text("Load Duration Curve"),q.append("text").attr("class","graph-title").attr("x",-20).attr("y",I.top-70).attr("font-size","10px").attr("text-anchor","middle").text("kWh"),q.append("text").attr("class","graph-title").attr("x",P+8).attr("y",V+15).attr("font-size","10px").attr("text-anchor","middle").text("Hr"),q.append("path").datum(o).attr("fill","none").attr("stroke","#FFB100").attr("stroke-width",2).attr("d",Q),q.append("path").datum(o).attr("fill","none").attr("stroke","#1569C7").attr("stroke-width",2).attr("d",se);const pe=q.append("g").attr("class","reference-lines");q.selectAll(".y-axis .tick").data().map(ie=>+ie).forEach(ie=>{pe.append("line").attr("x1",0).attr("x2",P).attr("y1",O(ie)).attr("y2",O(ie)).attr("class","reference-line").style("stroke","grey").attr("stroke-width",.3).style("stroke-dasharray","4 4")});const he=N.append("g").attr("class","legend").attr("transform",`translate(${I.left}, ${T-I.bottom})`),we=100;he.append("line").attr("x1",0).attr("y1",30).attr("x2",30).attr("y2",30).attr("stroke","#FFB100").attr("stroke-width",2),he.append("text").attr("x",35).attr("y",30).attr("dy","0.35em").style("font-size","10px").style("fill","black").text("Gas"),he.append("line").attr("x1",we).attr("y1",30).attr("x2",we+30).attr("y2",30).attr("stroke","#1569C7").attr("stroke-width",2),he.append("text").attr("x",we+35).attr("y",30).attr("dy","0.35em").style("font-size","10px").style("fill","black").text("Electricity")},F8=[{id:"energy-Building",label:"Building Energy"},{id:"energy-Feeder",label:"Grid Energy"},{id:"mobility-Street-Detailed",label:"Street Mobility"},{id:"mobility-Block-Detailed",label:"Block Mobility"}],YE=e=>e?`${e}-highlighted`:null,JE=e=>e?`${e}-other`:null,j8=({handleDigitalTwinClick:e})=>ee.jsxs("div",{className:"home-page",children:[ee.jsx("p",{className:"second-title",children:"Digital Twin APIs"}),ee.jsx("img",{className:"general-image",src:"../Image/digitalTwin_withIcon.png",onClick:e}),ee.jsx("img",{className:"general-image",src:"../Image/digitalTwinAdd.png"}),ee.jsx("img",{className:"general-image",src:"../Image/digitalTwinBlank.png"}),ee.jsx("img",{className:"general-image",src:"../Image/digitalTwinBlank.png"}),ee.jsx("img",{className:"general-image",src:"../Image/digitalTwinBlank.png"}),ee.jsx("p",{className:"second-title",children:"Our Partners"}),ee.jsx("img",{className:"general-image",src:"../Image/partners.png"}),ee.jsx("p",{className:"second-title",children:"Disclaimer"}),ee.jsx("p",{className:"main-text",children:'The data and the associated metadata are provided "as-is," without express or implied warranty of completeness, accuracy, or fitness for a particular purpose.'})]}),U8=({buildingLayerCode:e,setBuildingLayerCode:t})=>ee.jsxs("select",{className:"energy-dropdown",value:e,onChange:n=>t(n.target.value),children:[ee.jsx("option",{value:"Gas[kWh_m2][Yr]",children:"Gas Demand"}),ee.jsx("option",{value:"Electricity[kWh_m2][Yr]",children:"Electricity Demand"}),ee.jsx("option",{value:"Heating[KWh_m2][Yr]",children:"Heating Demand"}),ee.jsx("option",{value:"Cooling[KWh_m2][Yr]",children:"Cooling Demand"}),ee.jsx("option",{value:"Equipment[KWh_m2][Yr]",children:"Equipment Demand"}),ee.jsx("option",{value:"Lighting[KWh_m2][Yr]",children:"Lighting Demand"}),ee.jsx("option",{value:"HotWater[KWh_m2][Yr]",children:"Hotwater Demand"}),ee.jsx("option",{value:"PV[KWh_m2][Yr]",children:"Electricity Produced"})]}),$8={black:"#000",white:"#fff"},ff=$8,V8={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},sp=V8,q8={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},lp=q8,W8={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},up=W8,G8={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},cp=G8,H8={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},pp=H8,K8={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},vd=K8,Z8={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},X8=Z8;function eu(e){let t="https://mui.com/production-error/?code="+e;for(let n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}const If="$$material";function fe(){return fe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},fe.apply(this,arguments)}function jt(e,t){if(e==null)return{};var n={},a=Object.keys(e),u,f;for(f=0;f<a.length;f++)u=a[f],!(t.indexOf(u)>=0)&&(n[u]=e[u]);return n}function rA(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var Y8=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,J8=rA(function(e){return Y8.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91});function Q8(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function ej(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var tj=function(){function e(n){var a=this;this._insertTag=function(u){var f;a.tags.length===0?a.insertionPoint?f=a.insertionPoint.nextSibling:a.prepend?f=a.container.firstChild:f=a.before:f=a.tags[a.tags.length-1].nextSibling,a.container.insertBefore(u,f),a.tags.push(u)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(a){a.forEach(this._insertTag)},t.insert=function(a){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(ej(this));var u=this.tags[this.tags.length-1];if(this.isSpeedy){var f=Q8(u);try{f.insertRule(a,f.cssRules.length)}catch{}}else u.appendChild(document.createTextNode(a));this.ctr++},t.flush=function(){this.tags.forEach(function(a){return a.parentNode&&a.parentNode.removeChild(a)}),this.tags=[],this.ctr=0},e}(),ro="-ms-",Cg="-moz-",en="-webkit-",nA="comm",Lb="rule",Db="decl",rj="@import",iA="@keyframes",nj="@layer",ij=Math.abs,av=String.fromCharCode,oj=Object.assign;function aj(e,t){return Ui(e,0)^45?(((t<<2^Ui(e,0))<<2^Ui(e,1))<<2^Ui(e,2))<<2^Ui(e,3):0}function oA(e){return e.trim()}function sj(e,t){return(e=t.exec(e))?e[0]:e}function tn(e,t,n){return e.replace(t,n)}function l1(e,t){return e.indexOf(t)}function Ui(e,t){return e.charCodeAt(t)|0}function mf(e,t,n){return e.slice(t,n)}function hs(e){return e.length}function Ob(e){return e.length}function py(e,t){return t.push(e),e}function lj(e,t){return e.map(t).join("")}var sv=1,eh=1,aA=0,Do=0,di=0,lh="";function lv(e,t,n,a,u,f,o){return{value:e,root:t,parent:n,type:a,props:u,children:f,line:sv,column:eh,length:o,return:""}}function _d(e,t){return oj(lv("",null,null,"",null,null,0),e,{length:-e.length},t)}function uj(){return di}function cj(){return di=Do>0?Ui(lh,--Do):0,eh--,di===10&&(eh=1,sv--),di}function Yo(){return di=Do<aA?Ui(lh,Do++):0,eh++,di===10&&(eh=1,sv++),di}function _s(){return Ui(lh,Do)}function Oy(){return Do}function Pf(e,t){return mf(lh,e,t)}function yf(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function sA(e){return sv=eh=1,aA=hs(lh=e),Do=0,[]}function lA(e){return lh="",e}function By(e){return oA(Pf(Do-1,u1(e===91?e+2:e===40?e+1:e)))}function pj(e){for(;(di=_s())&&di<33;)Yo();return yf(e)>2||yf(di)>3?"":" "}function hj(e,t){for(;--t&&Yo()&&!(di<48||di>102||di>57&&di<65||di>70&&di<97););return Pf(e,Oy()+(t<6&&_s()==32&&Yo()==32))}function u1(e){for(;Yo();)switch(di){case e:return Do;case 34:case 39:e!==34&&e!==39&&u1(di);break;case 40:e===41&&u1(e);break;case 92:Yo();break}return Do}function dj(e,t){for(;Yo()&&e+di!==47+10;)if(e+di===42+42&&_s()===47)break;return"/*"+Pf(t,Do-1)+"*"+av(e===47?e:Yo())}function fj(e){for(;!yf(_s());)Yo();return Pf(e,Do)}function mj(e){return lA(Ny("",null,null,null,[""],e=sA(e),0,[0],e))}function Ny(e,t,n,a,u,f,o,v,x){for(var E=0,T=0,I=o,P=0,V=0,N=0,q=1,J=1,U=1,F=0,R="",O=u,Q=f,se=a,pe=R;J;)switch(N=F,F=Yo()){case 40:if(N!=108&&Ui(pe,I-1)==58){l1(pe+=tn(By(F),"&","&\f"),"&\f")!=-1&&(U=-1);break}case 34:case 39:case 91:pe+=By(F);break;case 9:case 10:case 13:case 32:pe+=pj(N);break;case 92:pe+=hj(Oy()-1,7);continue;case 47:switch(_s()){case 42:case 47:py(yj(dj(Yo(),Oy()),t,n),x);break;default:pe+="/"}break;case 123*q:v[E++]=hs(pe)*U;case 125*q:case 59:case 0:switch(F){case 0:case 125:J=0;case 59+T:U==-1&&(pe=tn(pe,/\f/g,"")),V>0&&hs(pe)-I&&py(V>32?eC(pe+";",a,n,I-1):eC(tn(pe," ","")+";",a,n,I-2),x);break;case 59:pe+=";";default:if(py(se=QE(pe,t,n,E,T,u,v,R,O=[],Q=[],I),f),F===123)if(T===0)Ny(pe,t,se,se,O,f,I,v,Q);else switch(P===99&&Ui(pe,3)===110?100:P){case 100:case 108:case 109:case 115:Ny(e,se,se,a&&py(QE(e,se,se,0,0,u,v,R,u,O=[],I),Q),u,Q,I,v,a?O:Q);break;default:Ny(pe,se,se,se,[""],Q,0,v,Q)}}E=T=V=0,q=U=1,R=pe="",I=o;break;case 58:I=1+hs(pe),V=N;default:if(q<1){if(F==123)--q;else if(F==125&&q++==0&&cj()==125)continue}switch(pe+=av(F),F*q){case 38:U=T>0?1:(pe+="\f",-1);break;case 44:v[E++]=(hs(pe)-1)*U,U=1;break;case 64:_s()===45&&(pe+=By(Yo())),P=_s(),T=I=hs(R=pe+=fj(Oy())),F++;break;case 45:N===45&&hs(pe)==2&&(q=0)}}return f}function QE(e,t,n,a,u,f,o,v,x,E,T){for(var I=u-1,P=u===0?f:[""],V=Ob(P),N=0,q=0,J=0;N<a;++N)for(var U=0,F=mf(e,I+1,I=ij(q=o[N])),R=e;U<V;++U)(R=oA(q>0?P[U]+" "+F:tn(F,/&\f/g,P[U])))&&(x[J++]=R);return lv(e,t,n,u===0?Lb:v,x,E,T)}function yj(e,t,n){return lv(e,t,n,nA,av(uj()),mf(e,2,-2),0)}function eC(e,t,n,a){return lv(e,t,n,Db,mf(e,0,a),mf(e,a+1,-1),a)}function jp(e,t){for(var n="",a=Ob(e),u=0;u<a;u++)n+=t(e[u],u,e,t)||"";return n}function gj(e,t,n,a){switch(e.type){case nj:if(e.children.length)break;case rj:case Db:return e.return=e.return||e.value;case nA:return"";case iA:return e.return=e.value+"{"+jp(e.children,a)+"}";case Lb:e.value=e.props.join(",")}return hs(n=jp(e.children,a))?e.return=e.value+"{"+n+"}":""}function vj(e){var t=Ob(e);return function(n,a,u,f){for(var o="",v=0;v<t;v++)o+=e[v](n,a,u,f)||"";return o}}function _j(e){return function(t){t.root||(t=t.return)&&e(t)}}var xj=function(t,n,a){for(var u=0,f=0;u=f,f=_s(),u===38&&f===12&&(n[a]=1),!yf(f);)Yo();return Pf(t,Do)},bj=function(t,n){var a=-1,u=44;do switch(yf(u)){case 0:u===38&&_s()===12&&(n[a]=1),t[a]+=xj(Do-1,n,a);break;case 2:t[a]+=By(u);break;case 4:if(u===44){t[++a]=_s()===58?"&\f":"",n[a]=t[a].length;break}default:t[a]+=av(u)}while(u=Yo());return t},wj=function(t,n){return lA(bj(sA(t),n))},tC=new WeakMap,Sj=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,a=t.parent,u=t.column===a.column&&t.line===a.line;a.type!=="rule";)if(a=a.parent,!a)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!tC.get(a))&&!u){tC.set(t,!0);for(var f=[],o=wj(n,f),v=a.props,x=0,E=0;x<o.length;x++)for(var T=0;T<v.length;T++,E++)t.props[E]=f[x]?o[x].replace(/&\f/g,v[T]):v[T]+" "+o[x]}}},Ej=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function uA(e,t){switch(aj(e,t)){case 5103:return en+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return en+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return en+e+Cg+e+ro+e+e;case 6828:case 4268:return en+e+ro+e+e;case 6165:return en+e+ro+"flex-"+e+e;case 5187:return en+e+tn(e,/(\w+).+(:[^]+)/,en+"box-$1$2"+ro+"flex-$1$2")+e;case 5443:return en+e+ro+"flex-item-"+tn(e,/flex-|-self/,"")+e;case 4675:return en+e+ro+"flex-line-pack"+tn(e,/align-content|flex-|-self/,"")+e;case 5548:return en+e+ro+tn(e,"shrink","negative")+e;case 5292:return en+e+ro+tn(e,"basis","preferred-size")+e;case 6060:return en+"box-"+tn(e,"-grow","")+en+e+ro+tn(e,"grow","positive")+e;case 4554:return en+tn(e,/([^-])(transform)/g,"$1"+en+"$2")+e;case 6187:return tn(tn(tn(e,/(zoom-|grab)/,en+"$1"),/(image-set)/,en+"$1"),e,"")+e;case 5495:case 3959:return tn(e,/(image-set\([^]*)/,en+"$1$`$1");case 4968:return tn(tn(e,/(.+:)(flex-)?(.*)/,en+"box-pack:$3"+ro+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+en+e+e;case 4095:case 3583:case 4068:case 2532:return tn(e,/(.+)-inline(.+)/,en+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(hs(e)-1-t>6)switch(Ui(e,t+1)){case 109:if(Ui(e,t+4)!==45)break;case 102:return tn(e,/(.+:)(.+)-([^]+)/,"$1"+en+"$2-$3$1"+Cg+(Ui(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~l1(e,"stretch")?uA(tn(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Ui(e,t+1)!==115)break;case 6444:switch(Ui(e,hs(e)-3-(~l1(e,"!important")&&10))){case 107:return tn(e,":",":"+en)+e;case 101:return tn(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+en+(Ui(e,14)===45?"inline-":"")+"box$3$1"+en+"$2$3$1"+ro+"$2box$3")+e}break;case 5936:switch(Ui(e,t+11)){case 114:return en+e+ro+tn(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return en+e+ro+tn(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return en+e+ro+tn(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return en+e+ro+e+e}return e}var Cj=function(t,n,a,u){if(t.length>-1&&!t.return)switch(t.type){case Db:t.return=uA(t.value,t.length);break;case iA:return jp([_d(t,{value:tn(t.value,"@","@"+en)})],u);case Lb:if(t.length)return lj(t.props,function(f){switch(sj(f,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return jp([_d(t,{props:[tn(f,/:(read-\w+)/,":"+Cg+"$1")]})],u);case"::placeholder":return jp([_d(t,{props:[tn(f,/:(plac\w+)/,":"+en+"input-$1")]}),_d(t,{props:[tn(f,/:(plac\w+)/,":"+Cg+"$1")]}),_d(t,{props:[tn(f,/:(plac\w+)/,ro+"input-$1")]})],u)}return""})}},kj=[Cj],Tj=function(t){var n=t.key;if(n==="css"){var a=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(a,function(q){var J=q.getAttribute("data-emotion");J.indexOf(" ")!==-1&&(document.head.appendChild(q),q.setAttribute("data-s",""))})}var u=t.stylisPlugins||kj,f={},o,v=[];o=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(q){for(var J=q.getAttribute("data-emotion").split(" "),U=1;U<J.length;U++)f[J[U]]=!0;v.push(q)});var x,E=[Sj,Ej];{var T,I=[gj,_j(function(q){T.insert(q)})],P=vj(E.concat(u,I)),V=function(J){return jp(mj(J),P)};x=function(J,U,F,R){T=F,V(J?J+"{"+U.styles+"}":U.styles),R&&(N.inserted[U.name]=!0)}}var N={key:n,sheet:new tj({key:n,container:o,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:f,registered:{},insert:x};return N.sheet.hydrate(v),N},cA={exports:{}},hn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zi=typeof Symbol=="function"&&Symbol.for,Bb=zi?Symbol.for("react.element"):60103,Nb=zi?Symbol.for("react.portal"):60106,uv=zi?Symbol.for("react.fragment"):60107,cv=zi?Symbol.for("react.strict_mode"):60108,pv=zi?Symbol.for("react.profiler"):60114,hv=zi?Symbol.for("react.provider"):60109,dv=zi?Symbol.for("react.context"):60110,Fb=zi?Symbol.for("react.async_mode"):60111,fv=zi?Symbol.for("react.concurrent_mode"):60111,mv=zi?Symbol.for("react.forward_ref"):60112,yv=zi?Symbol.for("react.suspense"):60113,Ij=zi?Symbol.for("react.suspense_list"):60120,gv=zi?Symbol.for("react.memo"):60115,vv=zi?Symbol.for("react.lazy"):60116,Pj=zi?Symbol.for("react.block"):60121,Aj=zi?Symbol.for("react.fundamental"):60117,Mj=zi?Symbol.for("react.responder"):60118,zj=zi?Symbol.for("react.scope"):60119;function ra(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Bb:switch(e=e.type,e){case Fb:case fv:case uv:case pv:case cv:case yv:return e;default:switch(e=e&&e.$$typeof,e){case dv:case mv:case vv:case gv:case hv:return e;default:return t}}case Nb:return t}}}function pA(e){return ra(e)===fv}hn.AsyncMode=Fb;hn.ConcurrentMode=fv;hn.ContextConsumer=dv;hn.ContextProvider=hv;hn.Element=Bb;hn.ForwardRef=mv;hn.Fragment=uv;hn.Lazy=vv;hn.Memo=gv;hn.Portal=Nb;hn.Profiler=pv;hn.StrictMode=cv;hn.Suspense=yv;hn.isAsyncMode=function(e){return pA(e)||ra(e)===Fb};hn.isConcurrentMode=pA;hn.isContextConsumer=function(e){return ra(e)===dv};hn.isContextProvider=function(e){return ra(e)===hv};hn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Bb};hn.isForwardRef=function(e){return ra(e)===mv};hn.isFragment=function(e){return ra(e)===uv};hn.isLazy=function(e){return ra(e)===vv};hn.isMemo=function(e){return ra(e)===gv};hn.isPortal=function(e){return ra(e)===Nb};hn.isProfiler=function(e){return ra(e)===pv};hn.isStrictMode=function(e){return ra(e)===cv};hn.isSuspense=function(e){return ra(e)===yv};hn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===uv||e===fv||e===pv||e===cv||e===yv||e===Ij||typeof e=="object"&&e!==null&&(e.$$typeof===vv||e.$$typeof===gv||e.$$typeof===hv||e.$$typeof===dv||e.$$typeof===mv||e.$$typeof===Aj||e.$$typeof===Mj||e.$$typeof===zj||e.$$typeof===Pj)};hn.typeOf=ra;cA.exports=hn;var Rj=cA.exports,hA=Rj,Lj={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Dj={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},dA={};dA[hA.ForwardRef]=Lj;dA[hA.Memo]=Dj;var Oj=!0;function Bj(e,t,n){var a="";return n.split(" ").forEach(function(u){e[u]!==void 0?t.push(e[u]+";"):a+=u+" "}),a}var fA=function(t,n,a){var u=t.key+"-"+n.name;(a===!1||Oj===!1)&&t.registered[u]===void 0&&(t.registered[u]=n.styles)},mA=function(t,n,a){fA(t,n,a);var u=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var f=n;do t.insert(n===f?"."+u:"",f,t.sheet,!0),f=f.next;while(f!==void 0)}};function Nj(e){for(var t=0,n,a=0,u=e.length;u>=4;++a,u-=4)n=e.charCodeAt(a)&255|(e.charCodeAt(++a)&255)<<8|(e.charCodeAt(++a)&255)<<16|(e.charCodeAt(++a)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(u){case 3:t^=(e.charCodeAt(a+2)&255)<<16;case 2:t^=(e.charCodeAt(a+1)&255)<<8;case 1:t^=e.charCodeAt(a)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var Fj={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},jj=/[A-Z]|^ms/g,Uj=/_EMO_([^_]+?)_([^]*?)_EMO_/g,yA=function(t){return t.charCodeAt(1)===45},rC=function(t){return t!=null&&typeof t!="boolean"},W_=rA(function(e){return yA(e)?e:e.replace(jj,"-$&").toLowerCase()}),nC=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(Uj,function(a,u,f){return ds={name:u,styles:f,next:ds},u})}return Fj[t]!==1&&!yA(t)&&typeof n=="number"&&n!==0?n+"px":n};function gf(e,t,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return ds={name:n.name,styles:n.styles,next:ds},n.name;if(n.styles!==void 0){var a=n.next;if(a!==void 0)for(;a!==void 0;)ds={name:a.name,styles:a.styles,next:ds},a=a.next;var u=n.styles+";";return u}return $j(e,t,n)}case"function":{if(e!==void 0){var f=ds,o=n(e);return ds=f,gf(e,t,o)}break}}if(t==null)return n;var v=t[n];return v!==void 0?v:n}function $j(e,t,n){var a="";if(Array.isArray(n))for(var u=0;u<n.length;u++)a+=gf(e,t,n[u])+";";else for(var f in n){var o=n[f];if(typeof o!="object")t!=null&&t[o]!==void 0?a+=f+"{"+t[o]+"}":rC(o)&&(a+=W_(f)+":"+nC(f,o)+";");else if(Array.isArray(o)&&typeof o[0]=="string"&&(t==null||t[o[0]]===void 0))for(var v=0;v<o.length;v++)rC(o[v])&&(a+=W_(f)+":"+nC(f,o[v])+";");else{var x=gf(e,t,o);switch(f){case"animation":case"animationName":{a+=W_(f)+":"+x+";";break}default:a+=f+"{"+x+"}"}}}return a}var iC=/label:\s*([^\s;\n{]+)\s*(;|$)/g,ds,jb=function(t,n,a){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var u=!0,f="";ds=void 0;var o=t[0];o==null||o.raw===void 0?(u=!1,f+=gf(a,n,o)):f+=o[0];for(var v=1;v<t.length;v++)f+=gf(a,n,t[v]),u&&(f+=o[v]);iC.lastIndex=0;for(var x="",E;(E=iC.exec(f))!==null;)x+="-"+E[1];var T=Nj(f)+x;return{name:T,styles:f,next:ds}},Vj=function(t){return t()},gA=tx["useInsertionEffect"]?tx["useInsertionEffect"]:!1,qj=gA||Vj,oC=gA||te.useLayoutEffect,vA=te.createContext(typeof HTMLElement<"u"?Tj({key:"css"}):null);vA.Provider;var _A=function(t){return te.forwardRef(function(n,a){var u=te.useContext(vA);return t(n,u,a)})},Ub=te.createContext({}),Wj=_A(function(e,t){var n=e.styles,a=jb([n],void 0,te.useContext(Ub)),u=te.useRef();return oC(function(){var f=t.key+"-global",o=new t.sheet.constructor({key:f,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),v=!1,x=document.querySelector('style[data-emotion="'+f+" "+a.name+'"]');return t.sheet.tags.length&&(o.before=t.sheet.tags[0]),x!==null&&(v=!0,x.setAttribute("data-emotion",f),o.hydrate([x])),u.current=[o,v],function(){o.flush()}},[t]),oC(function(){var f=u.current,o=f[0],v=f[1];if(v){f[1]=!1;return}if(a.next!==void 0&&mA(t,a.next,!0),o.tags.length){var x=o.tags[o.tags.length-1].nextElementSibling;o.before=x,o.flush()}t.insert("",a,o,!1)},[t,a.name]),null});function Gj(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return jb(t)}var $b=function(){var t=Gj.apply(void 0,arguments),n="animation-"+t.name;return{name:n,styles:"@keyframes "+n+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},Hj=J8,Kj=function(t){return t!=="theme"},aC=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?Hj:Kj},sC=function(t,n,a){var u;if(n){var f=n.shouldForwardProp;u=t.__emotion_forwardProp&&f?function(o){return t.__emotion_forwardProp(o)&&f(o)}:f}return typeof u!="function"&&a&&(u=t.__emotion_forwardProp),u},Zj=function(t){var n=t.cache,a=t.serialized,u=t.isStringTag;return fA(n,a,u),qj(function(){return mA(n,a,u)}),null},Xj=function e(t,n){var a=t.__emotion_real===t,u=a&&t.__emotion_base||t,f,o;n!==void 0&&(f=n.label,o=n.target);var v=sC(t,n,a),x=v||aC(u),E=!x("as");return function(){var T=arguments,I=a&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(f!==void 0&&I.push("label:"+f+";"),T[0]==null||T[0].raw===void 0)I.push.apply(I,T);else{I.push(T[0][0]);for(var P=T.length,V=1;V<P;V++)I.push(T[V],T[0][V])}var N=_A(function(q,J,U){var F=E&&q.as||u,R="",O=[],Q=q;if(q.theme==null){Q={};for(var se in q)Q[se]=q[se];Q.theme=te.useContext(Ub)}typeof q.className=="string"?R=Bj(J.registered,O,q.className):q.className!=null&&(R=q.className+" ");var pe=jb(I.concat(O),J.registered,Q);R+=J.key+"-"+pe.name,o!==void 0&&(R+=" "+o);var _e=E&&v===void 0?aC(F):x,ze={};for(var he in q)E&&he==="as"||_e(he)&&(ze[he]=q[he]);return ze.className=R,ze.ref=U,te.createElement(te.Fragment,null,te.createElement(Zj,{cache:J,serialized:pe,isStringTag:typeof F=="string"}),te.createElement(F,ze))});return N.displayName=f!==void 0?f:"Styled("+(typeof u=="string"?u:u.displayName||u.name||"Component")+")",N.defaultProps=t.defaultProps,N.__emotion_real=N,N.__emotion_base=u,N.__emotion_styles=I,N.__emotion_forwardProp=v,Object.defineProperty(N,"toString",{value:function(){return"."+o}}),N.withComponent=function(q,J){return e(q,fe({},n,J,{shouldForwardProp:sC(N,J,!0)})).apply(void 0,I)},N}},Yj=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],c1=Xj.bind();Yj.forEach(function(e){c1[e]=c1(e)});function Jj(e){return e==null||Object.keys(e).length===0}function Qj(e){const{styles:t,defaultTheme:n={}}=e,a=typeof t=="function"?u=>t(Jj(u)?n:u):t;return ee.jsx(Wj,{styles:a})}/**
 * @mui/styled-engine v5.15.7
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function xA(e,t){return c1(e,t)}const eU=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))};function Qs(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function bA(e){if(!Qs(e))return e;const t={};return Object.keys(e).forEach(n=>{t[n]=bA(e[n])}),t}function Ro(e,t,n={clone:!0}){const a=n.clone?fe({},e):e;return Qs(e)&&Qs(t)&&Object.keys(t).forEach(u=>{u!=="__proto__"&&(Qs(t[u])&&u in e&&Qs(e[u])?a[u]=Ro(e[u],t[u],n):n.clone?a[u]=Qs(t[u])?bA(t[u]):t[u]:a[u]=t[u])}),a}function Qt(e){if(typeof e!="string")throw new Error(eu(7));return e.charAt(0).toUpperCase()+e.slice(1)}function lC(...e){return e.reduce((t,n)=>n==null?t:function(...u){t.apply(this,u),n.apply(this,u)},()=>{})}function _v(e,t=166){let n;function a(...u){const f=()=>{e.apply(this,u)};clearTimeout(n),n=setTimeout(f,t)}return a.clear=()=>{clearTimeout(n)},a}function Fy(e,t){var n,a;return te.isValidElement(e)&&t.indexOf((n=e.type.muiName)!=null?n:(a=e.type)==null||(a=a._payload)==null||(a=a.value)==null?void 0:a.muiName)!==-1}function Lo(e){return e&&e.ownerDocument||document}function ul(e){return Lo(e).defaultView||window}function p1(e,t){typeof e=="function"?e(t):e&&(e.current=t)}const tU=typeof window<"u"?te.useLayoutEffect:te.useEffect,Fa=tU;let uC=0;function rU(e){const[t,n]=te.useState(e),a=e||t;return te.useEffect(()=>{t==null&&(uC+=1,n(`mui-${uC}`))},[t]),a}const cC=tx["useId".toString()];function Vb(e){if(cC!==void 0){const t=cC();return e??t}return rU(e)}function pC({controlled:e,default:t,name:n,state:a="value"}){const{current:u}=te.useRef(e!==void 0),[f,o]=te.useState(t),v=u?e:f,x=te.useCallback(E=>{u||o(E)},[]);return[v,x]}function rl(e){const t=te.useRef(e);return Fa(()=>{t.current=e}),te.useRef((...n)=>(0,t.current)(...n)).current}function qi(...e){return te.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(n=>{p1(n,t)})},e)}const hC={};function nU(e,t){const n=te.useRef(hC);return n.current===hC&&(n.current=e(t)),n}const iU=[];function oU(e){te.useEffect(e,iU)}class xv{constructor(){this.currentId=0,this.clear=()=>{this.currentId!==0&&(clearTimeout(this.currentId),this.currentId=0)},this.disposeEffect=()=>this.clear}static create(){return new xv}start(t,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=0,n()},t)}}function wA(){const e=nU(xv.create).current;return oU(e.disposeEffect),e}let bv=!0,h1=!1;const aU=new xv,sU={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function lU(e){const{type:t,tagName:n}=e;return!!(n==="INPUT"&&sU[t]&&!e.readOnly||n==="TEXTAREA"&&!e.readOnly||e.isContentEditable)}function uU(e){e.metaKey||e.altKey||e.ctrlKey||(bv=!0)}function G_(){bv=!1}function cU(){this.visibilityState==="hidden"&&h1&&(bv=!0)}function pU(e){e.addEventListener("keydown",uU,!0),e.addEventListener("mousedown",G_,!0),e.addEventListener("pointerdown",G_,!0),e.addEventListener("touchstart",G_,!0),e.addEventListener("visibilitychange",cU,!0)}function hU(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch{}return bv||lU(t)}function dU(){const e=te.useCallback(u=>{u!=null&&pU(u.ownerDocument)},[]),t=te.useRef(!1);function n(){return t.current?(h1=!0,aU.start(100,()=>{h1=!1}),t.current=!1,!0):!1}function a(u){return hU(u)?(t.current=!0,!0):!1}return{isFocusVisibleRef:t,onFocus:a,onBlur:n,ref:e}}function SA(e){const t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}let hp;function EA(){if(hp)return hp;const e=document.createElement("div"),t=document.createElement("div");return t.style.width="10px",t.style.height="1px",e.appendChild(t),e.dir="rtl",e.style.fontSize="14px",e.style.width="4px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.overflow="scroll",document.body.appendChild(e),hp="reverse",e.scrollLeft>0?hp="default":(e.scrollLeft=1,e.scrollLeft===0&&(hp="negative")),document.body.removeChild(e),hp}function fU(e,t){const n=e.scrollLeft;if(t!=="rtl")return n;switch(EA()){case"negative":return e.scrollWidth-e.clientWidth+n;case"reverse":return e.scrollWidth-e.clientWidth-n;default:return n}}function qb(e,t){const n=fe({},t);return Object.keys(e).forEach(a=>{if(a.toString().match(/^(components|slots)$/))n[a]=fe({},e[a],n[a]);else if(a.toString().match(/^(componentsProps|slotProps)$/)){const u=e[a]||{},f=t[a];n[a]={},!f||!Object.keys(f)?n[a]=u:!u||!Object.keys(u)?n[a]=f:(n[a]=fe({},f),Object.keys(u).forEach(o=>{n[a][o]=qb(u[o],f[o])}))}else n[a]===void 0&&(n[a]=e[a])}),n}function Ur(e,t,n=void 0){const a={};return Object.keys(e).forEach(u=>{a[u]=e[u].reduce((f,o)=>{if(o){const v=t(o);v!==""&&f.push(v),n&&n[o]&&f.push(n[o])}return f},[]).join(" ")}),a}const dC=e=>e,mU=()=>{let e=dC;return{configure(t){e=t},generate(t){return e(t)},reset(){e=dC}}},yU=mU(),CA=yU,gU={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Br(e,t,n="Mui"){const a=gU[t];return a?`${n}-${a}`:`${CA.generate(e)}-${t}`}function kr(e,t,n="Mui"){const a={};return t.forEach(u=>{a[u]=Br(e,u,n)}),a}function vU(e,t=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,n))}const _U=["values","unit","step"],xU=e=>{const t=Object.keys(e).map(n=>({key:n,val:e[n]}))||[];return t.sort((n,a)=>n.val-a.val),t.reduce((n,a)=>fe({},n,{[a.key]:a.val}),{})};function bU(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:a=5}=e,u=jt(e,_U),f=xU(t),o=Object.keys(f);function v(P){return`@media (min-width:${typeof t[P]=="number"?t[P]:P}${n})`}function x(P){return`@media (max-width:${(typeof t[P]=="number"?t[P]:P)-a/100}${n})`}function E(P,V){const N=o.indexOf(V);return`@media (min-width:${typeof t[P]=="number"?t[P]:P}${n}) and (max-width:${(N!==-1&&typeof t[o[N]]=="number"?t[o[N]]:V)-a/100}${n})`}function T(P){return o.indexOf(P)+1<o.length?E(P,o[o.indexOf(P)+1]):v(P)}function I(P){const V=o.indexOf(P);return V===0?v(o[1]):V===o.length-1?x(o[V]):E(P,o[o.indexOf(P)+1]).replace("@media","@media not all and")}return fe({keys:o,values:f,up:v,down:x,between:E,only:T,not:I,unit:n},u)}const wU={borderRadius:4},SU=wU;function $d(e,t){return t?Ro(e,t,{clone:!1}):e}const Wb={xs:0,sm:600,md:900,lg:1200,xl:1536},fC={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${Wb[e]}px)`};function cl(e,t,n){const a=e.theme||{};if(Array.isArray(t)){const f=a.breakpoints||fC;return t.reduce((o,v,x)=>(o[f.up(f.keys[x])]=n(t[x]),o),{})}if(typeof t=="object"){const f=a.breakpoints||fC;return Object.keys(t).reduce((o,v)=>{if(Object.keys(f.values||Wb).indexOf(v)!==-1){const x=f.up(v);o[x]=n(t[v],v)}else{const x=v;o[x]=t[x]}return o},{})}return n(t)}function EU(e={}){var t;return((t=e.keys)==null?void 0:t.reduce((a,u)=>{const f=e.up(u);return a[f]={},a},{}))||{}}function CU(e,t){return e.reduce((n,a)=>{const u=n[a];return(!u||Object.keys(u).length===0)&&delete n[a],n},t)}function wv(e,t,n=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&n){const a=`vars.${t}`.split(".").reduce((u,f)=>u&&u[f]?u[f]:null,e);if(a!=null)return a}return t.split(".").reduce((a,u)=>a&&a[u]!=null?a[u]:null,e)}function kg(e,t,n,a=n){let u;return typeof e=="function"?u=e(n):Array.isArray(e)?u=e[n]||a:u=wv(e,n)||a,t&&(u=t(u,a,e)),u}function si(e){const{prop:t,cssProperty:n=e.prop,themeKey:a,transform:u}=e,f=o=>{if(o[t]==null)return null;const v=o[t],x=o.theme,E=wv(x,a)||{};return cl(o,v,I=>{let P=kg(E,u,I);return I===P&&typeof I=="string"&&(P=kg(E,u,`${t}${I==="default"?"":Qt(I)}`,I)),n===!1?P:{[n]:P}})};return f.propTypes={},f.filterProps=[t],f}function kU(e){const t={};return n=>(t[n]===void 0&&(t[n]=e(n)),t[n])}const TU={m:"margin",p:"padding"},IU={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},mC={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},PU=kU(e=>{if(e.length>2)if(mC[e])e=mC[e];else return[e];const[t,n]=e.split(""),a=TU[t],u=IU[n]||"";return Array.isArray(u)?u.map(f=>a+f):[a+u]}),Gb=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],Hb=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...Gb,...Hb];function Af(e,t,n,a){var u;const f=(u=wv(e,t,!1))!=null?u:n;return typeof f=="number"?o=>typeof o=="string"?o:f*o:Array.isArray(f)?o=>typeof o=="string"?o:f[o]:typeof f=="function"?f:()=>{}}function kA(e){return Af(e,"spacing",8)}function Mf(e,t){if(typeof t=="string"||t==null)return t;const n=Math.abs(t),a=e(n);return t>=0?a:typeof a=="number"?-a:`-${a}`}function AU(e,t){return n=>e.reduce((a,u)=>(a[u]=Mf(t,n),a),{})}function MU(e,t,n,a){if(t.indexOf(n)===-1)return null;const u=PU(n),f=AU(u,a),o=e[n];return cl(e,o,f)}function TA(e,t){const n=kA(e.theme);return Object.keys(e).map(a=>MU(e,t,a,n)).reduce($d,{})}function Xn(e){return TA(e,Gb)}Xn.propTypes={};Xn.filterProps=Gb;function Yn(e){return TA(e,Hb)}Yn.propTypes={};Yn.filterProps=Hb;function zU(e=8){if(e.mui)return e;const t=kA({spacing:e}),n=(...a)=>(a.length===0?[1]:a).map(f=>{const o=t(f);return typeof o=="number"?`${o}px`:o}).join(" ");return n.mui=!0,n}function Sv(...e){const t=e.reduce((a,u)=>(u.filterProps.forEach(f=>{a[f]=u}),a),{}),n=a=>Object.keys(a).reduce((u,f)=>t[f]?$d(u,t[f](a)):u,{});return n.propTypes={},n.filterProps=e.reduce((a,u)=>a.concat(u.filterProps),[]),n}function fa(e){return typeof e!="number"?e:`${e}px solid`}function _a(e,t){return si({prop:e,themeKey:"borders",transform:t})}const RU=_a("border",fa),LU=_a("borderTop",fa),DU=_a("borderRight",fa),OU=_a("borderBottom",fa),BU=_a("borderLeft",fa),NU=_a("borderColor"),FU=_a("borderTopColor"),jU=_a("borderRightColor"),UU=_a("borderBottomColor"),$U=_a("borderLeftColor"),VU=_a("outline",fa),qU=_a("outlineColor"),Ev=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=Af(e.theme,"shape.borderRadius",4),n=a=>({borderRadius:Mf(t,a)});return cl(e,e.borderRadius,n)}return null};Ev.propTypes={};Ev.filterProps=["borderRadius"];Sv(RU,LU,DU,OU,BU,NU,FU,jU,UU,$U,Ev,VU,qU);const Cv=e=>{if(e.gap!==void 0&&e.gap!==null){const t=Af(e.theme,"spacing",8),n=a=>({gap:Mf(t,a)});return cl(e,e.gap,n)}return null};Cv.propTypes={};Cv.filterProps=["gap"];const kv=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=Af(e.theme,"spacing",8),n=a=>({columnGap:Mf(t,a)});return cl(e,e.columnGap,n)}return null};kv.propTypes={};kv.filterProps=["columnGap"];const Tv=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=Af(e.theme,"spacing",8),n=a=>({rowGap:Mf(t,a)});return cl(e,e.rowGap,n)}return null};Tv.propTypes={};Tv.filterProps=["rowGap"];const WU=si({prop:"gridColumn"}),GU=si({prop:"gridRow"}),HU=si({prop:"gridAutoFlow"}),KU=si({prop:"gridAutoColumns"}),ZU=si({prop:"gridAutoRows"}),XU=si({prop:"gridTemplateColumns"}),YU=si({prop:"gridTemplateRows"}),JU=si({prop:"gridTemplateAreas"}),QU=si({prop:"gridArea"});Sv(Cv,kv,Tv,WU,GU,HU,KU,ZU,XU,YU,JU,QU);function Up(e,t){return t==="grey"?t:e}const e$=si({prop:"color",themeKey:"palette",transform:Up}),t$=si({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Up}),r$=si({prop:"backgroundColor",themeKey:"palette",transform:Up});Sv(e$,t$,r$);function Ko(e){return e<=1&&e!==0?`${e*100}%`:e}const n$=si({prop:"width",transform:Ko}),Kb=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=n=>{var a,u;const f=((a=e.theme)==null||(a=a.breakpoints)==null||(a=a.values)==null?void 0:a[n])||Wb[n];return f?((u=e.theme)==null||(u=u.breakpoints)==null?void 0:u.unit)!=="px"?{maxWidth:`${f}${e.theme.breakpoints.unit}`}:{maxWidth:f}:{maxWidth:Ko(n)}};return cl(e,e.maxWidth,t)}return null};Kb.filterProps=["maxWidth"];const i$=si({prop:"minWidth",transform:Ko}),o$=si({prop:"height",transform:Ko}),a$=si({prop:"maxHeight",transform:Ko}),s$=si({prop:"minHeight",transform:Ko});si({prop:"size",cssProperty:"width",transform:Ko});si({prop:"size",cssProperty:"height",transform:Ko});const l$=si({prop:"boxSizing"});Sv(n$,Kb,i$,o$,a$,s$,l$);const u$={border:{themeKey:"borders",transform:fa},borderTop:{themeKey:"borders",transform:fa},borderRight:{themeKey:"borders",transform:fa},borderBottom:{themeKey:"borders",transform:fa},borderLeft:{themeKey:"borders",transform:fa},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:fa},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Ev},color:{themeKey:"palette",transform:Up},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Up},backgroundColor:{themeKey:"palette",transform:Up},p:{style:Yn},pt:{style:Yn},pr:{style:Yn},pb:{style:Yn},pl:{style:Yn},px:{style:Yn},py:{style:Yn},padding:{style:Yn},paddingTop:{style:Yn},paddingRight:{style:Yn},paddingBottom:{style:Yn},paddingLeft:{style:Yn},paddingX:{style:Yn},paddingY:{style:Yn},paddingInline:{style:Yn},paddingInlineStart:{style:Yn},paddingInlineEnd:{style:Yn},paddingBlock:{style:Yn},paddingBlockStart:{style:Yn},paddingBlockEnd:{style:Yn},m:{style:Xn},mt:{style:Xn},mr:{style:Xn},mb:{style:Xn},ml:{style:Xn},mx:{style:Xn},my:{style:Xn},margin:{style:Xn},marginTop:{style:Xn},marginRight:{style:Xn},marginBottom:{style:Xn},marginLeft:{style:Xn},marginX:{style:Xn},marginY:{style:Xn},marginInline:{style:Xn},marginInlineStart:{style:Xn},marginInlineEnd:{style:Xn},marginBlock:{style:Xn},marginBlockStart:{style:Xn},marginBlockEnd:{style:Xn},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Cv},rowGap:{style:Tv},columnGap:{style:kv},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Ko},maxWidth:{style:Kb},minWidth:{transform:Ko},height:{transform:Ko},maxHeight:{transform:Ko},minHeight:{transform:Ko},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},Iv=u$;function c$(...e){const t=e.reduce((a,u)=>a.concat(Object.keys(u)),[]),n=new Set(t);return e.every(a=>n.size===Object.keys(a).length)}function p$(e,t){return typeof e=="function"?e(t):e}function h$(){function e(n,a,u,f){const o={[n]:a,theme:u},v=f[n];if(!v)return{[n]:a};const{cssProperty:x=n,themeKey:E,transform:T,style:I}=v;if(a==null)return null;if(E==="typography"&&a==="inherit")return{[n]:a};const P=wv(u,E)||{};return I?I(o):cl(o,a,N=>{let q=kg(P,T,N);return N===q&&typeof N=="string"&&(q=kg(P,T,`${n}${N==="default"?"":Qt(N)}`,N)),x===!1?q:{[x]:q}})}function t(n){var a;const{sx:u,theme:f={}}=n||{};if(!u)return null;const o=(a=f.unstable_sxConfig)!=null?a:Iv;function v(x){let E=x;if(typeof x=="function")E=x(f);else if(typeof x!="object")return x;if(!E)return null;const T=EU(f.breakpoints),I=Object.keys(T);let P=T;return Object.keys(E).forEach(V=>{const N=p$(E[V],f);if(N!=null)if(typeof N=="object")if(o[V])P=$d(P,e(V,N,f,o));else{const q=cl({theme:f},N,J=>({[V]:J}));c$(q,N)?P[V]=t({sx:N,theme:f}):P=$d(P,q)}else P=$d(P,e(V,N,f,o))}),CU(I,P)}return Array.isArray(u)?u.map(v):v(u)}return t}const IA=h$();IA.filterProps=["sx"];const Pv=IA;function d$(e,t){const n=this;return n.vars&&typeof n.getColorSchemeSelector=="function"?{[n.getColorSchemeSelector(e).replace(/(\[[^\]]+\])/,"*:where($1)")]:t}:n.palette.mode===e?t:{}}const f$=["breakpoints","palette","spacing","shape"];function Zb(e={},...t){const{breakpoints:n={},palette:a={},spacing:u,shape:f={}}=e,o=jt(e,f$),v=bU(n),x=zU(u);let E=Ro({breakpoints:v,direction:"ltr",components:{},palette:fe({mode:"light"},a),spacing:x,shape:fe({},SU,f)},o);return E.applyStyles=d$,E=t.reduce((T,I)=>Ro(T,I),E),E.unstable_sxConfig=fe({},Iv,o==null?void 0:o.unstable_sxConfig),E.unstable_sx=function(I){return Pv({sx:I,theme:this})},E}function m$(e){return Object.keys(e).length===0}function y$(e=null){const t=te.useContext(Ub);return!t||m$(t)?e:t}const g$=Zb();function Av(e=g$){return y$(e)}function v$({styles:e,themeId:t,defaultTheme:n={}}){const a=Av(n),u=typeof e=="function"?e(t&&a[t]||a):e;return ee.jsx(Qj,{styles:u})}const _$=["sx"],x$=e=>{var t,n;const a={systemProps:{},otherProps:{}},u=(t=e==null||(n=e.theme)==null?void 0:n.unstable_sxConfig)!=null?t:Iv;return Object.keys(e).forEach(f=>{u[f]?a.systemProps[f]=e[f]:a.otherProps[f]=e[f]}),a};function PA(e){const{sx:t}=e,n=jt(e,_$),{systemProps:a,otherProps:u}=x$(n);let f;return Array.isArray(t)?f=[a,...t]:typeof t=="function"?f=(...o)=>{const v=t(...o);return Qs(v)?fe({},a,v):a}:f=fe({},a,t),fe({},u,{sx:f})}function AA(e){var t,n,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var u=e.length;for(t=0;t<u;t++)e[t]&&(n=AA(e[t]))&&(a&&(a+=" "),a+=n)}else for(n in e)e[n]&&(a&&(a+=" "),a+=n);return a}function $t(){for(var e,t,n=0,a="",u=arguments.length;n<u;n++)(e=arguments[n])&&(t=AA(e))&&(a&&(a+=" "),a+=t);return a}const b$=["className","component"];function w$(e={}){const{themeId:t,defaultTheme:n,defaultClassName:a="MuiBox-root",generateClassName:u}=e,f=xA("div",{shouldForwardProp:v=>v!=="theme"&&v!=="sx"&&v!=="as"})(Pv);return te.forwardRef(function(x,E){const T=Av(n),I=PA(x),{className:P,component:V="div"}=I,N=jt(I,b$);return ee.jsx(f,fe({as:V,ref:E,className:$t(P,u?u(a):a),theme:t&&T[t]||T},N))})}const S$=["variant"];function yC(e){return e.length===0}function MA(e){const{variant:t}=e,n=jt(e,S$);let a=t||"";return Object.keys(n).sort().forEach(u=>{u==="color"?a+=yC(a)?e[u]:Qt(e[u]):a+=`${yC(a)?u:Qt(u)}${Qt(e[u].toString())}`}),a}const E$=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function C$(e){return Object.keys(e).length===0}function k$(e){return typeof e=="string"&&e.charCodeAt(0)>96}const T$=(e,t)=>t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null,Tg=e=>{let t=0;const n={};return e&&e.forEach(a=>{let u="";typeof a.props=="function"?(u=`callback${t}`,t+=1):u=MA(a.props),n[u]=a.style}),n},I$=(e,t)=>{let n=[];return t&&t.components&&t.components[e]&&t.components[e].variants&&(n=t.components[e].variants),Tg(n)},Ig=(e,t,n)=>{const{ownerState:a={}}=e,u=[];let f=0;return n&&n.forEach(o=>{let v=!0;if(typeof o.props=="function"){const x=fe({},e,a);v=o.props(x)}else Object.keys(o.props).forEach(x=>{a[x]!==o.props[x]&&e[x]!==o.props[x]&&(v=!1)});v&&(typeof o.props=="function"?u.push(t[`callback${f}`]):u.push(t[MA(o.props)])),typeof o.props=="function"&&(f+=1)}),u},P$=(e,t,n,a)=>{var u;const f=n==null||(u=n.components)==null||(u=u[a])==null?void 0:u.variants;return Ig(e,t,f)};function Vd(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const A$=Zb(),M$=e=>e&&e.charAt(0).toLowerCase()+e.slice(1);function jy({defaultTheme:e,theme:t,themeId:n}){return C$(t)?e:t[n]||t}function z$(e){return e?(t,n)=>n[e]:null}const gC=({styledArg:e,props:t,defaultTheme:n,themeId:a})=>{const u=e(fe({},t,{theme:jy(fe({},t,{defaultTheme:n,themeId:a}))}));let f;if(u&&u.variants&&(f=u.variants,delete u.variants),f){const o=Ig(t,Tg(f),f);return[u,...o]}return u};function R$(e={}){const{themeId:t,defaultTheme:n=A$,rootShouldForwardProp:a=Vd,slotShouldForwardProp:u=Vd}=e,f=o=>Pv(fe({},o,{theme:jy(fe({},o,{defaultTheme:n,themeId:t}))}));return f.__mui_systemSx=!0,(o,v={})=>{eU(o,O=>O.filter(Q=>!(Q!=null&&Q.__mui_systemSx)));const{name:x,slot:E,skipVariantsResolver:T,skipSx:I,overridesResolver:P=z$(M$(E))}=v,V=jt(v,E$),N=T!==void 0?T:E&&E!=="Root"&&E!=="root"||!1,q=I||!1;let J,U=Vd;E==="Root"||E==="root"?U=a:E?U=u:k$(o)&&(U=void 0);const F=xA(o,fe({shouldForwardProp:U,label:J},V)),R=(O,...Q)=>{const se=Q?Q.map(he=>{if(typeof he=="function"&&he.__emotion_real!==he)return we=>gC({styledArg:he,props:we,defaultTheme:n,themeId:t});if(Qs(he)){let we=he,ie;return he&&he.variants&&(ie=he.variants,delete we.variants,we=ge=>{let Ne=he;return Ig(ge,Tg(ie),ie).forEach(Ce=>{Ne=Ro(Ne,Ce)}),Ne}),we}return he}):[];let pe=O;if(Qs(O)){let he;O&&O.variants&&(he=O.variants,delete pe.variants,pe=we=>{let ie=O;return Ig(we,Tg(he),he).forEach(Ne=>{ie=Ro(ie,Ne)}),ie})}else typeof O=="function"&&O.__emotion_real!==O&&(pe=he=>gC({styledArg:O,props:he,defaultTheme:n,themeId:t}));x&&P&&se.push(he=>{const we=jy(fe({},he,{defaultTheme:n,themeId:t})),ie=T$(x,we);if(ie){const ge={};return Object.entries(ie).forEach(([Ne,qe])=>{ge[Ne]=typeof qe=="function"?qe(fe({},he,{theme:we})):qe}),P(he,ge)}return null}),x&&!N&&se.push(he=>{const we=jy(fe({},he,{defaultTheme:n,themeId:t}));return P$(he,I$(x,we),we,x)}),q||se.push(f);const _e=se.length-Q.length;if(Array.isArray(O)&&_e>0){const he=new Array(_e).fill("");pe=[...O,...he],pe.raw=[...O.raw,...he]}const ze=F(pe,...se);return o.muiName&&(ze.muiName=o.muiName),ze};return F.withConfig&&(R.withConfig=F.withConfig),R}}function L$(e){const{theme:t,name:n,props:a}=e;return!t||!t.components||!t.components[n]||!t.components[n].defaultProps?a:qb(t.components[n].defaultProps,a)}function D$({props:e,name:t,defaultTheme:n,themeId:a}){let u=Av(n);return a&&(u=u[a]||u),L$({theme:u,name:t,props:e})}function Xb(e,t=0,n=1){return vU(e,t,n)}function O$(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&n[0].length===1&&(n=n.map(a=>a+a)),n?`rgb${n.length===4?"a":""}(${n.map((a,u)=>u<3?parseInt(a,16):Math.round(parseInt(a,16)/255*1e3)/1e3).join(", ")})`:""}function ac(e){if(e.type)return e;if(e.charAt(0)==="#")return ac(O$(e));const t=e.indexOf("("),n=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(n)===-1)throw new Error(eu(9,e));let a=e.substring(t+1,e.length-1),u;if(n==="color"){if(a=a.split(" "),u=a.shift(),a.length===4&&a[3].charAt(0)==="/"&&(a[3]=a[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(u)===-1)throw new Error(eu(10,u))}else a=a.split(",");return a=a.map(f=>parseFloat(f)),{type:n,values:a,colorSpace:u}}function Mv(e){const{type:t,colorSpace:n}=e;let{values:a}=e;return t.indexOf("rgb")!==-1?a=a.map((u,f)=>f<3?parseInt(u,10):u):t.indexOf("hsl")!==-1&&(a[1]=`${a[1]}%`,a[2]=`${a[2]}%`),t.indexOf("color")!==-1?a=`${n} ${a.join(" ")}`:a=`${a.join(", ")}`,`${t}(${a})`}function B$(e){e=ac(e);const{values:t}=e,n=t[0],a=t[1]/100,u=t[2]/100,f=a*Math.min(u,1-u),o=(E,T=(E+n/30)%12)=>u-f*Math.max(Math.min(T-3,9-T,1),-1);let v="rgb";const x=[Math.round(o(0)*255),Math.round(o(8)*255),Math.round(o(4)*255)];return e.type==="hsla"&&(v+="a",x.push(t[3])),Mv({type:v,values:x})}function vC(e){e=ac(e);let t=e.type==="hsl"||e.type==="hsla"?ac(B$(e)).values:e.values;return t=t.map(n=>(e.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function N$(e,t){const n=vC(e),a=vC(t);return(Math.max(n,a)+.05)/(Math.min(n,a)+.05)}function mi(e,t){return e=ac(e),t=Xb(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,Mv(e)}function F$(e,t){if(e=ac(e),t=Xb(t),e.type.indexOf("hsl")!==-1)e.values[2]*=1-t;else if(e.type.indexOf("rgb")!==-1||e.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)e.values[n]*=1-t;return Mv(e)}function j$(e,t){if(e=ac(e),t=Xb(t),e.type.indexOf("hsl")!==-1)e.values[2]+=(100-e.values[2])*t;else if(e.type.indexOf("rgb")!==-1)for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(e.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return Mv(e)}function U$(e,t){return fe({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}const $$=["mode","contrastThreshold","tonalOffset"],_C={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:ff.white,default:ff.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},H_={text:{primary:ff.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:ff.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function xC(e,t,n,a){const u=a.light||a,f=a.dark||a*1.5;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:t==="light"?e.light=j$(e.main,u):t==="dark"&&(e.dark=F$(e.main,f)))}function V$(e="light"){return e==="dark"?{main:up[200],light:up[50],dark:up[400]}:{main:up[700],light:up[400],dark:up[800]}}function q$(e="light"){return e==="dark"?{main:lp[200],light:lp[50],dark:lp[400]}:{main:lp[500],light:lp[300],dark:lp[700]}}function W$(e="light"){return e==="dark"?{main:sp[500],light:sp[300],dark:sp[700]}:{main:sp[700],light:sp[400],dark:sp[800]}}function G$(e="light"){return e==="dark"?{main:cp[400],light:cp[300],dark:cp[700]}:{main:cp[700],light:cp[500],dark:cp[900]}}function H$(e="light"){return e==="dark"?{main:pp[400],light:pp[300],dark:pp[700]}:{main:pp[800],light:pp[500],dark:pp[900]}}function K$(e="light"){return e==="dark"?{main:vd[400],light:vd[300],dark:vd[700]}:{main:"#ed6c02",light:vd[500],dark:vd[900]}}function Z$(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:a=.2}=e,u=jt(e,$$),f=e.primary||V$(t),o=e.secondary||q$(t),v=e.error||W$(t),x=e.info||G$(t),E=e.success||H$(t),T=e.warning||K$(t);function I(q){return N$(q,H_.text.primary)>=n?H_.text.primary:_C.text.primary}const P=({color:q,name:J,mainShade:U=500,lightShade:F=300,darkShade:R=700})=>{if(q=fe({},q),!q.main&&q[U]&&(q.main=q[U]),!q.hasOwnProperty("main"))throw new Error(eu(11,J?` (${J})`:"",U));if(typeof q.main!="string")throw new Error(eu(12,J?` (${J})`:"",JSON.stringify(q.main)));return xC(q,"light",F,a),xC(q,"dark",R,a),q.contrastText||(q.contrastText=I(q.main)),q},V={dark:H_,light:_C};return Ro(fe({common:fe({},ff),mode:t,primary:P({color:f,name:"primary"}),secondary:P({color:o,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:P({color:v,name:"error"}),warning:P({color:T,name:"warning"}),info:P({color:x,name:"info"}),success:P({color:E,name:"success"}),grey:X8,contrastThreshold:n,getContrastText:I,augmentColor:P,tonalOffset:a},V[t]),u)}const X$=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function Y$(e){return Math.round(e*1e5)/1e5}const bC={textTransform:"uppercase"},wC='"Roboto", "Helvetica", "Arial", sans-serif';function J$(e,t){const n=typeof t=="function"?t(e):t,{fontFamily:a=wC,fontSize:u=14,fontWeightLight:f=300,fontWeightRegular:o=400,fontWeightMedium:v=500,fontWeightBold:x=700,htmlFontSize:E=16,allVariants:T,pxToRem:I}=n,P=jt(n,X$),V=u/14,N=I||(U=>`${U/E*V}rem`),q=(U,F,R,O,Q)=>fe({fontFamily:a,fontWeight:U,fontSize:N(F),lineHeight:R},a===wC?{letterSpacing:`${Y$(O/F)}em`}:{},Q,T),J={h1:q(f,96,1.167,-1.5),h2:q(f,60,1.2,-.5),h3:q(o,48,1.167,0),h4:q(o,34,1.235,.25),h5:q(o,24,1.334,0),h6:q(v,20,1.6,.15),subtitle1:q(o,16,1.75,.15),subtitle2:q(v,14,1.57,.1),body1:q(o,16,1.5,.15),body2:q(o,14,1.43,.15),button:q(v,14,1.75,.4,bC),caption:q(o,12,1.66,.4),overline:q(o,12,2.66,1,bC),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Ro(fe({htmlFontSize:E,pxToRem:N,fontFamily:a,fontSize:u,fontWeightLight:f,fontWeightRegular:o,fontWeightMedium:v,fontWeightBold:x},J),P,{clone:!1})}const Q$=.2,eV=.14,tV=.12;function Dn(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${Q$})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${eV})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${tV})`].join(",")}const rV=["none",Dn(0,2,1,-1,0,1,1,0,0,1,3,0),Dn(0,3,1,-2,0,2,2,0,0,1,5,0),Dn(0,3,3,-2,0,3,4,0,0,1,8,0),Dn(0,2,4,-1,0,4,5,0,0,1,10,0),Dn(0,3,5,-1,0,5,8,0,0,1,14,0),Dn(0,3,5,-1,0,6,10,0,0,1,18,0),Dn(0,4,5,-2,0,7,10,1,0,2,16,1),Dn(0,5,5,-3,0,8,10,1,0,3,14,2),Dn(0,5,6,-3,0,9,12,1,0,3,16,2),Dn(0,6,6,-3,0,10,14,1,0,4,18,3),Dn(0,6,7,-4,0,11,15,1,0,4,20,3),Dn(0,7,8,-4,0,12,17,2,0,5,22,4),Dn(0,7,8,-4,0,13,19,2,0,5,24,4),Dn(0,7,9,-4,0,14,21,2,0,5,26,4),Dn(0,8,9,-5,0,15,22,2,0,6,28,5),Dn(0,8,10,-5,0,16,24,2,0,6,30,5),Dn(0,8,11,-5,0,17,26,2,0,6,32,5),Dn(0,9,11,-5,0,18,28,2,0,7,34,6),Dn(0,9,12,-6,0,19,29,2,0,7,36,6),Dn(0,10,13,-6,0,20,31,3,0,8,38,7),Dn(0,10,13,-6,0,21,33,3,0,8,40,7),Dn(0,10,14,-6,0,22,35,3,0,8,42,7),Dn(0,11,14,-7,0,23,36,3,0,9,44,8),Dn(0,11,15,-7,0,24,38,3,0,9,46,8)],nV=rV,iV=["duration","easing","delay"],oV={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},aV={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function SC(e){return`${Math.round(e)}ms`}function sV(e){if(!e)return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function lV(e){const t=fe({},oV,e.easing),n=fe({},aV,e.duration);return fe({getAutoHeightDuration:sV,create:(u=["all"],f={})=>{const{duration:o=n.standard,easing:v=t.easeInOut,delay:x=0}=f;return jt(f,iV),(Array.isArray(u)?u:[u]).map(E=>`${E} ${typeof o=="string"?o:SC(o)} ${v} ${typeof x=="string"?x:SC(x)}`).join(",")}},e,{easing:t,duration:n})}const uV={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},cV=uV,pV=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function zA(e={},...t){const{mixins:n={},palette:a={},transitions:u={},typography:f={}}=e,o=jt(e,pV);if(e.vars)throw new Error(eu(18));const v=Z$(a),x=Zb(e);let E=Ro(x,{mixins:U$(x.breakpoints,n),palette:v,shadows:nV.slice(),typography:J$(v,f),transitions:lV(u),zIndex:fe({},cV)});return E=Ro(E,o),E=t.reduce((T,I)=>Ro(T,I),E),E.unstable_sxConfig=fe({},Iv,o==null?void 0:o.unstable_sxConfig),E.unstable_sx=function(I){return Pv({sx:I,theme:this})},E}const hV=zA(),zv=hV;function uh(){const e=Av(zv);return e[If]||e}function $r({props:e,name:t}){return D$({props:e,name:t,defaultTheme:zv,themeId:If})}const na=e=>Vd(e)&&e!=="classes",dV=Vd,fV=R$({themeId:If,defaultTheme:zv,rootShouldForwardProp:na}),Rt=fV,mV=e=>{let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,(t/100).toFixed(2)},EC=mV;function yV(e){return Br("MuiSvgIcon",e)}kr("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const gV=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],vV=e=>{const{color:t,fontSize:n,classes:a}=e,u={root:["root",t!=="inherit"&&`color${Qt(t)}`,`fontSize${Qt(n)}`]};return Ur(u,yV,a)},_V=Rt("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="inherit"&&t[`color${Qt(n.color)}`],t[`fontSize${Qt(n.fontSize)}`]]}})(({theme:e,ownerState:t})=>{var n,a,u,f,o,v,x,E,T,I,P,V,N;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:t.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(n=e.transitions)==null||(a=n.create)==null?void 0:a.call(n,"fill",{duration:(u=e.transitions)==null||(u=u.duration)==null?void 0:u.shorter}),fontSize:{inherit:"inherit",small:((f=e.typography)==null||(o=f.pxToRem)==null?void 0:o.call(f,20))||"1.25rem",medium:((v=e.typography)==null||(x=v.pxToRem)==null?void 0:x.call(v,24))||"1.5rem",large:((E=e.typography)==null||(T=E.pxToRem)==null?void 0:T.call(E,35))||"2.1875rem"}[t.fontSize],color:(I=(P=(e.vars||e).palette)==null||(P=P[t.color])==null?void 0:P.main)!=null?I:{action:(V=(e.vars||e).palette)==null||(V=V.action)==null?void 0:V.active,disabled:(N=(e.vars||e).palette)==null||(N=N.action)==null?void 0:N.disabled,inherit:void 0}[t.color]}}),RA=te.forwardRef(function(t,n){const a=$r({props:t,name:"MuiSvgIcon"}),{children:u,className:f,color:o="inherit",component:v="svg",fontSize:x="medium",htmlColor:E,inheritViewBox:T=!1,titleAccess:I,viewBox:P="0 0 24 24"}=a,V=jt(a,gV),N=te.isValidElement(u)&&u.type==="svg",q=fe({},a,{color:o,component:v,fontSize:x,instanceFontSize:t.fontSize,inheritViewBox:T,viewBox:P,hasSvgAsChild:N}),J={};T||(J.viewBox=P);const U=vV(q);return ee.jsxs(_V,fe({as:v,className:$t(U.root,f),focusable:"false",color:E,"aria-hidden":I?void 0:!0,role:I?"img":void 0,ref:n},J,V,N&&u.props,{ownerState:q,children:[N?u.props.children:u,I?ee.jsx("title",{children:I}):null]}))});RA.muiName="SvgIcon";const CC=RA;function Yb(e,t){function n(a,u){return ee.jsx(CC,fe({"data-testid":`${t}Icon`,ref:u},a,{children:e}))}return n.muiName=CC.muiName,te.memo(te.forwardRef(n))}var fn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jb=Symbol.for("react.element"),Qb=Symbol.for("react.portal"),Rv=Symbol.for("react.fragment"),Lv=Symbol.for("react.strict_mode"),Dv=Symbol.for("react.profiler"),Ov=Symbol.for("react.provider"),Bv=Symbol.for("react.context"),xV=Symbol.for("react.server_context"),Nv=Symbol.for("react.forward_ref"),Fv=Symbol.for("react.suspense"),jv=Symbol.for("react.suspense_list"),Uv=Symbol.for("react.memo"),$v=Symbol.for("react.lazy"),bV=Symbol.for("react.offscreen"),LA;LA=Symbol.for("react.module.reference");function xa(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Jb:switch(e=e.type,e){case Rv:case Dv:case Lv:case Fv:case jv:return e;default:switch(e=e&&e.$$typeof,e){case xV:case Bv:case Nv:case $v:case Uv:case Ov:return e;default:return t}}case Qb:return t}}}fn.ContextConsumer=Bv;fn.ContextProvider=Ov;fn.Element=Jb;fn.ForwardRef=Nv;fn.Fragment=Rv;fn.Lazy=$v;fn.Memo=Uv;fn.Portal=Qb;fn.Profiler=Dv;fn.StrictMode=Lv;fn.Suspense=Fv;fn.SuspenseList=jv;fn.isAsyncMode=function(){return!1};fn.isConcurrentMode=function(){return!1};fn.isContextConsumer=function(e){return xa(e)===Bv};fn.isContextProvider=function(e){return xa(e)===Ov};fn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Jb};fn.isForwardRef=function(e){return xa(e)===Nv};fn.isFragment=function(e){return xa(e)===Rv};fn.isLazy=function(e){return xa(e)===$v};fn.isMemo=function(e){return xa(e)===Uv};fn.isPortal=function(e){return xa(e)===Qb};fn.isProfiler=function(e){return xa(e)===Dv};fn.isStrictMode=function(e){return xa(e)===Lv};fn.isSuspense=function(e){return xa(e)===Fv};fn.isSuspenseList=function(e){return xa(e)===jv};fn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Rv||e===Dv||e===Lv||e===Fv||e===jv||e===bV||typeof e=="object"&&e!==null&&(e.$$typeof===$v||e.$$typeof===Uv||e.$$typeof===Ov||e.$$typeof===Bv||e.$$typeof===Nv||e.$$typeof===LA||e.getModuleId!==void 0)};fn.typeOf=xa;function d1(e,t){return d1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,u){return a.__proto__=u,a},d1(e,t)}function DA(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,d1(e,t)}const kC={disabled:!1},Pg=ms.createContext(null);var wV=function(t){return t.scrollTop},zd="unmounted",Vu="exited",qu="entering",fp="entered",f1="exiting",hl=function(e){DA(t,e);function t(a,u){var f;f=e.call(this,a,u)||this;var o=u,v=o&&!o.isMounting?a.enter:a.appear,x;return f.appearStatus=null,a.in?v?(x=Vu,f.appearStatus=qu):x=fp:a.unmountOnExit||a.mountOnEnter?x=zd:x=Vu,f.state={status:x},f.nextCallback=null,f}t.getDerivedStateFromProps=function(u,f){var o=u.in;return o&&f.status===zd?{status:Vu}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(u){var f=null;if(u!==this.props){var o=this.state.status;this.props.in?o!==qu&&o!==fp&&(f=qu):(o===qu||o===fp)&&(f=f1)}this.updateStatus(!1,f)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var u=this.props.timeout,f,o,v;return f=o=v=u,u!=null&&typeof u!="number"&&(f=u.exit,o=u.enter,v=u.appear!==void 0?u.appear:o),{exit:f,enter:o,appear:v}},n.updateStatus=function(u,f){if(u===void 0&&(u=!1),f!==null)if(this.cancelNextCallback(),f===qu){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:Id.findDOMNode(this);o&&wV(o)}this.performEnter(u)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Vu&&this.setState({status:zd})},n.performEnter=function(u){var f=this,o=this.props.enter,v=this.context?this.context.isMounting:u,x=this.props.nodeRef?[v]:[Id.findDOMNode(this),v],E=x[0],T=x[1],I=this.getTimeouts(),P=v?I.appear:I.enter;if(!u&&!o||kC.disabled){this.safeSetState({status:fp},function(){f.props.onEntered(E)});return}this.props.onEnter(E,T),this.safeSetState({status:qu},function(){f.props.onEntering(E,T),f.onTransitionEnd(P,function(){f.safeSetState({status:fp},function(){f.props.onEntered(E,T)})})})},n.performExit=function(){var u=this,f=this.props.exit,o=this.getTimeouts(),v=this.props.nodeRef?void 0:Id.findDOMNode(this);if(!f||kC.disabled){this.safeSetState({status:Vu},function(){u.props.onExited(v)});return}this.props.onExit(v),this.safeSetState({status:f1},function(){u.props.onExiting(v),u.onTransitionEnd(o.exit,function(){u.safeSetState({status:Vu},function(){u.props.onExited(v)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(u,f){f=this.setNextCallback(f),this.setState(u,f)},n.setNextCallback=function(u){var f=this,o=!0;return this.nextCallback=function(v){o&&(o=!1,f.nextCallback=null,u(v))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(u,f){this.setNextCallback(f);var o=this.props.nodeRef?this.props.nodeRef.current:Id.findDOMNode(this),v=u==null&&!this.props.addEndListener;if(!o||v){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var x=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],E=x[0],T=x[1];this.props.addEndListener(E,T)}u!=null&&setTimeout(this.nextCallback,u)},n.render=function(){var u=this.state.status;if(u===zd)return null;var f=this.props,o=f.children;f.in,f.mountOnEnter,f.unmountOnExit,f.appear,f.enter,f.exit,f.timeout,f.addEndListener,f.onEnter,f.onEntering,f.onEntered,f.onExit,f.onExiting,f.onExited,f.nodeRef;var v=jt(f,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return ms.createElement(Pg.Provider,{value:null},typeof o=="function"?o(u,v):ms.cloneElement(ms.Children.only(o),v))},t}(ms.Component);hl.contextType=Pg;hl.propTypes={};function dp(){}hl.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:dp,onEntering:dp,onEntered:dp,onExit:dp,onExiting:dp,onExited:dp};hl.UNMOUNTED=zd;hl.EXITED=Vu;hl.ENTERING=qu;hl.ENTERED=fp;hl.EXITING=f1;const OA=hl;function SV(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ew(e,t){var n=function(f){return t&&te.isValidElement(f)?t(f):f},a=Object.create(null);return e&&te.Children.map(e,function(u){return u}).forEach(function(u){a[u.key]=n(u)}),a}function EV(e,t){e=e||{},t=t||{};function n(T){return T in t?t[T]:e[T]}var a=Object.create(null),u=[];for(var f in e)f in t?u.length&&(a[f]=u,u=[]):u.push(f);var o,v={};for(var x in t){if(a[x])for(o=0;o<a[x].length;o++){var E=a[x][o];v[a[x][o]]=n(E)}v[x]=n(x)}for(o=0;o<u.length;o++)v[u[o]]=n(u[o]);return v}function Zu(e,t,n){return n[t]!=null?n[t]:e.props[t]}function CV(e,t){return ew(e.children,function(n){return te.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:Zu(n,"appear",e),enter:Zu(n,"enter",e),exit:Zu(n,"exit",e)})})}function kV(e,t,n){var a=ew(e.children),u=EV(t,a);return Object.keys(u).forEach(function(f){var o=u[f];if(te.isValidElement(o)){var v=f in t,x=f in a,E=t[f],T=te.isValidElement(E)&&!E.props.in;x&&(!v||T)?u[f]=te.cloneElement(o,{onExited:n.bind(null,o),in:!0,exit:Zu(o,"exit",e),enter:Zu(o,"enter",e)}):!x&&v&&!T?u[f]=te.cloneElement(o,{in:!1}):x&&v&&te.isValidElement(E)&&(u[f]=te.cloneElement(o,{onExited:n.bind(null,o),in:E.props.in,exit:Zu(o,"exit",e),enter:Zu(o,"enter",e)}))}}),u}var TV=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},IV={component:"div",childFactory:function(t){return t}},tw=function(e){DA(t,e);function t(a,u){var f;f=e.call(this,a,u)||this;var o=f.handleExited.bind(SV(f));return f.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},f}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(u,f){var o=f.children,v=f.handleExited,x=f.firstRender;return{children:x?CV(u,v):kV(u,o,v),firstRender:!1}},n.handleExited=function(u,f){var o=ew(this.props.children);u.key in o||(u.props.onExited&&u.props.onExited(f),this.mounted&&this.setState(function(v){var x=fe({},v.children);return delete x[u.key],{children:x}}))},n.render=function(){var u=this.props,f=u.component,o=u.childFactory,v=jt(u,["component","childFactory"]),x=this.state.contextValue,E=TV(this.state.children).map(o);return delete v.appear,delete v.enter,delete v.exit,f===null?ms.createElement(Pg.Provider,{value:x},E):ms.createElement(Pg.Provider,{value:x},ms.createElement(f,v,E))},t}(ms.Component);tw.propTypes={};tw.defaultProps=IV;const PV=tw,BA=e=>e.scrollTop;function Ag(e,t){var n,a;const{timeout:u,easing:f,style:o={}}=e;return{duration:(n=o.transitionDuration)!=null?n:typeof u=="number"?u:u[t.mode]||0,easing:(a=o.transitionTimingFunction)!=null?a:typeof f=="object"?f[t.mode]:f,delay:o.transitionDelay}}function AV(e){return Br("MuiPaper",e)}kr("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const MV=["className","component","elevation","square","variant"],zV=e=>{const{square:t,elevation:n,variant:a,classes:u}=e,f={root:["root",a,!t&&"rounded",a==="elevation"&&`elevation${n}`]};return Ur(f,AV,u)},RV=Rt("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!n.square&&t.rounded,n.variant==="elevation"&&t[`elevation${n.elevation}`]]}})(({theme:e,ownerState:t})=>{var n;return fe({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow")},!t.square&&{borderRadius:e.shape.borderRadius},t.variant==="outlined"&&{border:`1px solid ${(e.vars||e).palette.divider}`},t.variant==="elevation"&&fe({boxShadow:(e.vars||e).shadows[t.elevation]},!e.vars&&e.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${mi("#fff",EC(t.elevation))}, ${mi("#fff",EC(t.elevation))})`},e.vars&&{backgroundImage:(n=e.vars.overlays)==null?void 0:n[t.elevation]}))}),LV=te.forwardRef(function(t,n){const a=$r({props:t,name:"MuiPaper"}),{className:u,component:f="div",elevation:o=1,square:v=!1,variant:x="elevation"}=a,E=jt(a,MV),T=fe({},a,{component:f,elevation:o,square:v,variant:x}),I=zV(T);return ee.jsx(RV,fe({as:f,ownerState:T,className:$t(I.root,u),ref:n},E))}),rw=LV;function th(e){return typeof e=="string"}function DV(e,t,n){return e===void 0||th(e)?t:fe({},t,{ownerState:fe({},t.ownerState,n)})}function NA(e,t=[]){if(e===void 0)return{};const n={};return Object.keys(e).filter(a=>a.match(/^on[A-Z]/)&&typeof e[a]=="function"&&!t.includes(a)).forEach(a=>{n[a]=e[a]}),n}function OV(e,t,n){return typeof e=="function"?e(t,n):e}function TC(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(n=>!(n.match(/^on[A-Z]/)&&typeof e[n]=="function")).forEach(n=>{t[n]=e[n]}),t}function BV(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:a,externalForwardedProps:u,className:f}=e;if(!t){const V=$t(n==null?void 0:n.className,f,u==null?void 0:u.className,a==null?void 0:a.className),N=fe({},n==null?void 0:n.style,u==null?void 0:u.style,a==null?void 0:a.style),q=fe({},n,u,a);return V.length>0&&(q.className=V),Object.keys(N).length>0&&(q.style=N),{props:q,internalRef:void 0}}const o=NA(fe({},u,a)),v=TC(a),x=TC(u),E=t(o),T=$t(E==null?void 0:E.className,n==null?void 0:n.className,f,u==null?void 0:u.className,a==null?void 0:a.className),I=fe({},E==null?void 0:E.style,n==null?void 0:n.style,u==null?void 0:u.style,a==null?void 0:a.style),P=fe({},E,n,x,v);return T.length>0&&(P.className=T),Object.keys(I).length>0&&(P.style=I),{props:P,internalRef:E.ref}}const NV=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function bs(e){var t;const{elementType:n,externalSlotProps:a,ownerState:u,skipResolvingSlotProps:f=!1}=e,o=jt(e,NV),v=f?{}:OV(a,u),{props:x,internalRef:E}=BV(fe({},o,{externalSlotProps:v})),T=qi(E,v==null?void 0:v.ref,(t=e.additionalProps)==null?void 0:t.ref);return DV(n,fe({},x,{ref:T}),u)}function FV(e){const{className:t,classes:n,pulsate:a=!1,rippleX:u,rippleY:f,rippleSize:o,in:v,onExited:x,timeout:E}=e,[T,I]=te.useState(!1),P=$t(t,n.ripple,n.rippleVisible,a&&n.ripplePulsate),V={width:o,height:o,top:-(o/2)+f,left:-(o/2)+u},N=$t(n.child,T&&n.childLeaving,a&&n.childPulsate);return!v&&!T&&I(!0),te.useEffect(()=>{if(!v&&x!=null){const q=setTimeout(x,E);return()=>{clearTimeout(q)}}},[x,v,E]),ee.jsx("span",{className:P,style:V,children:ee.jsx("span",{className:N})})}const jV=kr("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),pa=jV,UV=["center","classes","className"];let Vv=e=>e,IC,PC,AC,MC;const m1=550,$V=80,VV=$b(IC||(IC=Vv`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),qV=$b(PC||(PC=Vv`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),WV=$b(AC||(AC=Vv`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),GV=Rt("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),HV=Rt(FV,{name:"MuiTouchRipple",slot:"Ripple"})(MC||(MC=Vv`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),pa.rippleVisible,VV,m1,({theme:e})=>e.transitions.easing.easeInOut,pa.ripplePulsate,({theme:e})=>e.transitions.duration.shorter,pa.child,pa.childLeaving,qV,m1,({theme:e})=>e.transitions.easing.easeInOut,pa.childPulsate,WV,({theme:e})=>e.transitions.easing.easeInOut),KV=te.forwardRef(function(t,n){const a=$r({props:t,name:"MuiTouchRipple"}),{center:u=!1,classes:f={},className:o}=a,v=jt(a,UV),[x,E]=te.useState([]),T=te.useRef(0),I=te.useRef(null);te.useEffect(()=>{I.current&&(I.current(),I.current=null)},[x]);const P=te.useRef(!1),V=wA(),N=te.useRef(null),q=te.useRef(null),J=te.useCallback(O=>{const{pulsate:Q,rippleX:se,rippleY:pe,rippleSize:_e,cb:ze}=O;E(he=>[...he,ee.jsx(HV,{classes:{ripple:$t(f.ripple,pa.ripple),rippleVisible:$t(f.rippleVisible,pa.rippleVisible),ripplePulsate:$t(f.ripplePulsate,pa.ripplePulsate),child:$t(f.child,pa.child),childLeaving:$t(f.childLeaving,pa.childLeaving),childPulsate:$t(f.childPulsate,pa.childPulsate)},timeout:m1,pulsate:Q,rippleX:se,rippleY:pe,rippleSize:_e},T.current)]),T.current+=1,I.current=ze},[f]),U=te.useCallback((O={},Q={},se=()=>{})=>{const{pulsate:pe=!1,center:_e=u||Q.pulsate,fakeElement:ze=!1}=Q;if((O==null?void 0:O.type)==="mousedown"&&P.current){P.current=!1;return}(O==null?void 0:O.type)==="touchstart"&&(P.current=!0);const he=ze?null:q.current,we=he?he.getBoundingClientRect():{width:0,height:0,left:0,top:0};let ie,ge,Ne;if(_e||O===void 0||O.clientX===0&&O.clientY===0||!O.clientX&&!O.touches)ie=Math.round(we.width/2),ge=Math.round(we.height/2);else{const{clientX:qe,clientY:Ce}=O.touches&&O.touches.length>0?O.touches[0]:O;ie=Math.round(qe-we.left),ge=Math.round(Ce-we.top)}if(_e)Ne=Math.sqrt((2*we.width**2+we.height**2)/3),Ne%2===0&&(Ne+=1);else{const qe=Math.max(Math.abs((he?he.clientWidth:0)-ie),ie)*2+2,Ce=Math.max(Math.abs((he?he.clientHeight:0)-ge),ge)*2+2;Ne=Math.sqrt(qe**2+Ce**2)}O!=null&&O.touches?N.current===null&&(N.current=()=>{J({pulsate:pe,rippleX:ie,rippleY:ge,rippleSize:Ne,cb:se})},V.start($V,()=>{N.current&&(N.current(),N.current=null)})):J({pulsate:pe,rippleX:ie,rippleY:ge,rippleSize:Ne,cb:se})},[u,J,V]),F=te.useCallback(()=>{U({},{pulsate:!0})},[U]),R=te.useCallback((O,Q)=>{if(V.clear(),(O==null?void 0:O.type)==="touchend"&&N.current){N.current(),N.current=null,V.start(0,()=>{R(O,Q)});return}N.current=null,E(se=>se.length>0?se.slice(1):se),I.current=Q},[V]);return te.useImperativeHandle(n,()=>({pulsate:F,start:U,stop:R}),[F,U,R]),ee.jsx(GV,fe({className:$t(pa.root,f.root,o),ref:q},v,{children:ee.jsx(PV,{component:null,exit:!0,children:x})}))}),ZV=KV;function XV(e){return Br("MuiButtonBase",e)}const YV=kr("MuiButtonBase",["root","disabled","focusVisible"]),JV=YV,QV=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],e9=e=>{const{disabled:t,focusVisible:n,focusVisibleClassName:a,classes:u}=e,o=Ur({root:["root",t&&"disabled",n&&"focusVisible"]},XV,u);return n&&a&&(o.root+=` ${a}`),o},t9=Rt("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${JV.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),r9=te.forwardRef(function(t,n){const a=$r({props:t,name:"MuiButtonBase"}),{action:u,centerRipple:f=!1,children:o,className:v,component:x="button",disabled:E=!1,disableRipple:T=!1,disableTouchRipple:I=!1,focusRipple:P=!1,LinkComponent:V="a",onBlur:N,onClick:q,onContextMenu:J,onDragLeave:U,onFocus:F,onFocusVisible:R,onKeyDown:O,onKeyUp:Q,onMouseDown:se,onMouseLeave:pe,onMouseUp:_e,onTouchEnd:ze,onTouchMove:he,onTouchStart:we,tabIndex:ie=0,TouchRippleProps:ge,touchRippleRef:Ne,type:qe}=a,Ce=jt(a,QV),ke=te.useRef(null),Te=te.useRef(null),Oe=qi(Te,Ne),{isFocusVisibleRef:Je,onFocus:$e,onBlur:et,ref:Wt}=dU(),[Re,He]=te.useState(!1);E&&Re&&He(!1),te.useImperativeHandle(u,()=>({focusVisible:()=>{He(!0),ke.current.focus()}}),[]);const[Zt,Pt]=te.useState(!1);te.useEffect(()=>{Pt(!0)},[]);const Gt=Zt&&!T&&!E;te.useEffect(()=>{Re&&P&&!T&&Zt&&Te.current.pulsate()},[T,P,Re,Zt]);function zt(Dt,Wn,Bn=I){return rl(Wi=>(Wn&&Wn(Wi),!Bn&&Te.current&&Te.current[Dt](Wi),!0))}const nr=zt("start",se),Kt=zt("stop",J),Yt=zt("stop",U),st=zt("stop",_e),Lt=zt("stop",Dt=>{Re&&Dt.preventDefault(),pe&&pe(Dt)}),er=zt("start",we),Mr=zt("stop",ze),Nr=zt("stop",he),tr=zt("stop",Dt=>{et(Dt),Je.current===!1&&He(!1),N&&N(Dt)},!1),Vr=rl(Dt=>{ke.current||(ke.current=Dt.currentTarget),$e(Dt),Je.current===!0&&(He(!0),R&&R(Dt)),F&&F(Dt)}),zr=()=>{const Dt=ke.current;return x&&x!=="button"&&!(Dt.tagName==="A"&&Dt.href)},Sr=te.useRef(!1),on=rl(Dt=>{P&&!Sr.current&&Re&&Te.current&&Dt.key===" "&&(Sr.current=!0,Te.current.stop(Dt,()=>{Te.current.start(Dt)})),Dt.target===Dt.currentTarget&&zr()&&Dt.key===" "&&Dt.preventDefault(),O&&O(Dt),Dt.target===Dt.currentTarget&&zr()&&Dt.key==="Enter"&&!E&&(Dt.preventDefault(),q&&q(Dt))}),Ar=rl(Dt=>{P&&Dt.key===" "&&Te.current&&Re&&!Dt.defaultPrevented&&(Sr.current=!1,Te.current.stop(Dt,()=>{Te.current.pulsate(Dt)})),Q&&Q(Dt),q&&Dt.target===Dt.currentTarget&&zr()&&Dt.key===" "&&!Dt.defaultPrevented&&q(Dt)});let lr=x;lr==="button"&&(Ce.href||Ce.to)&&(lr=V);const Xr={};lr==="button"?(Xr.type=qe===void 0?"button":qe,Xr.disabled=E):(!Ce.href&&!Ce.to&&(Xr.role="button"),E&&(Xr["aria-disabled"]=E));const Sn=qi(n,Wt,ke),li=fe({},a,{centerRipple:f,component:x,disabled:E,disableRipple:T,disableTouchRipple:I,focusRipple:P,tabIndex:ie,focusVisible:Re}),hr=e9(li);return ee.jsxs(t9,fe({as:lr,className:$t(hr.root,v),ownerState:li,onBlur:tr,onClick:q,onContextMenu:Kt,onFocus:Vr,onKeyDown:on,onKeyUp:Ar,onMouseDown:nr,onMouseLeave:Lt,onMouseUp:st,onDragLeave:Yt,onTouchEnd:Mr,onTouchMove:Nr,onTouchStart:er,ref:Sn,tabIndex:E?-1:ie,type:qe},Xr,Ce,{children:[o,Gt?ee.jsx(ZV,fe({ref:Oe,center:f},ge)):null]}))}),uc=r9;function n9(e){return Br("MuiIconButton",e)}const i9=kr("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),o9=i9,a9=["edge","children","className","color","disabled","disableFocusRipple","size"],s9=e=>{const{classes:t,disabled:n,color:a,edge:u,size:f}=e,o={root:["root",n&&"disabled",a!=="default"&&`color${Qt(a)}`,u&&`edge${Qt(u)}`,`size${Qt(f)}`]};return Ur(o,n9,t)},l9=Rt(uc,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="default"&&t[`color${Qt(n.color)}`],n.edge&&t[`edge${Qt(n.edge)}`],t[`size${Qt(n.size)}`]]}})(({theme:e,ownerState:t})=>fe({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest})},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:mi(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.edge==="start"&&{marginLeft:t.size==="small"?-3:-12},t.edge==="end"&&{marginRight:t.size==="small"?-3:-12}),({theme:e,ownerState:t})=>{var n;const a=(n=(e.vars||e).palette)==null?void 0:n[t.color];return fe({},t.color==="inherit"&&{color:"inherit"},t.color!=="inherit"&&t.color!=="default"&&fe({color:a==null?void 0:a.main},!t.disableRipple&&{"&:hover":fe({},a&&{backgroundColor:e.vars?`rgba(${a.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:mi(a.main,e.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),t.size==="small"&&{padding:5,fontSize:e.typography.pxToRem(18)},t.size==="large"&&{padding:12,fontSize:e.typography.pxToRem(28)},{[`&.${o9.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled}})}),u9=te.forwardRef(function(t,n){const a=$r({props:t,name:"MuiIconButton"}),{edge:u=!1,children:f,className:o,color:v="default",disabled:x=!1,disableFocusRipple:E=!1,size:T="medium"}=a,I=jt(a,a9),P=fe({},a,{edge:u,color:v,disabled:x,disableFocusRipple:E,size:T}),V=s9(P);return ee.jsx(l9,fe({className:$t(V.root,o),centerRipple:!0,focusRipple:!E,disabled:x,ref:n,ownerState:P},I,{children:f}))}),c9=u9;function p9(e){return Br("MuiTypography",e)}kr("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const h9=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],d9=e=>{const{align:t,gutterBottom:n,noWrap:a,paragraph:u,variant:f,classes:o}=e,v={root:["root",f,e.align!=="inherit"&&`align${Qt(t)}`,n&&"gutterBottom",a&&"noWrap",u&&"paragraph"]};return Ur(v,p9,o)},f9=Rt("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.variant&&t[n.variant],n.align!=="inherit"&&t[`align${Qt(n.align)}`],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})(({theme:e,ownerState:t})=>fe({margin:0},t.variant==="inherit"&&{font:"inherit"},t.variant!=="inherit"&&e.typography[t.variant],t.align!=="inherit"&&{textAlign:t.align},t.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t.gutterBottom&&{marginBottom:"0.35em"},t.paragraph&&{marginBottom:16})),zC={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},m9={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},y9=e=>m9[e]||e,g9=te.forwardRef(function(t,n){const a=$r({props:t,name:"MuiTypography"}),u=y9(a.color),f=PA(fe({},a,{color:u})),{align:o="inherit",className:v,component:x,gutterBottom:E=!1,noWrap:T=!1,paragraph:I=!1,variant:P="body1",variantMapping:V=zC}=f,N=jt(f,h9),q=fe({},f,{align:o,color:u,className:v,component:x,gutterBottom:E,noWrap:T,paragraph:I,variant:P,variantMapping:V}),J=x||(I?"p":V[P]||zC[P])||"span",U=d9(q);return ee.jsx(f9,fe({as:J,ref:n,ownerState:q,className:$t(U.root,v)},N))}),Ap=g9,v9=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function _9(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?e.contentEditable==="true"||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:t}function x9(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;const t=a=>e.ownerDocument.querySelector(`input[type="radio"]${a}`);let n=t(`[name="${e.name}"]:checked`);return n||(n=t(`[name="${e.name}"]`)),n!==e}function b9(e){return!(e.disabled||e.tagName==="INPUT"&&e.type==="hidden"||x9(e))}function w9(e){const t=[],n=[];return Array.from(e.querySelectorAll(v9)).forEach((a,u)=>{const f=_9(a);f===-1||!b9(a)||(f===0?t.push(a):n.push({documentOrder:u,tabIndex:f,node:a}))}),n.sort((a,u)=>a.tabIndex===u.tabIndex?a.documentOrder-u.documentOrder:a.tabIndex-u.tabIndex).map(a=>a.node).concat(t)}function S9(){return!0}function E9(e){const{children:t,disableAutoFocus:n=!1,disableEnforceFocus:a=!1,disableRestoreFocus:u=!1,getTabbable:f=w9,isEnabled:o=S9,open:v}=e,x=te.useRef(!1),E=te.useRef(null),T=te.useRef(null),I=te.useRef(null),P=te.useRef(null),V=te.useRef(!1),N=te.useRef(null),q=qi(t.ref,N),J=te.useRef(null);te.useEffect(()=>{!v||!N.current||(V.current=!n)},[n,v]),te.useEffect(()=>{if(!v||!N.current)return;const R=Lo(N.current);return N.current.contains(R.activeElement)||(N.current.hasAttribute("tabIndex")||N.current.setAttribute("tabIndex","-1"),V.current&&N.current.focus()),()=>{u||(I.current&&I.current.focus&&(x.current=!0,I.current.focus()),I.current=null)}},[v]),te.useEffect(()=>{if(!v||!N.current)return;const R=Lo(N.current),O=pe=>{J.current=pe,!(a||!o()||pe.key!=="Tab")&&R.activeElement===N.current&&pe.shiftKey&&(x.current=!0,T.current&&T.current.focus())},Q=()=>{const pe=N.current;if(pe===null)return;if(!R.hasFocus()||!o()||x.current){x.current=!1;return}if(pe.contains(R.activeElement)||a&&R.activeElement!==E.current&&R.activeElement!==T.current)return;if(R.activeElement!==P.current)P.current=null;else if(P.current!==null)return;if(!V.current)return;let _e=[];if((R.activeElement===E.current||R.activeElement===T.current)&&(_e=f(N.current)),_e.length>0){var ze,he;const we=!!((ze=J.current)!=null&&ze.shiftKey&&((he=J.current)==null?void 0:he.key)==="Tab"),ie=_e[0],ge=_e[_e.length-1];typeof ie!="string"&&typeof ge!="string"&&(we?ge.focus():ie.focus())}else pe.focus()};R.addEventListener("focusin",Q),R.addEventListener("keydown",O,!0);const se=setInterval(()=>{R.activeElement&&R.activeElement.tagName==="BODY"&&Q()},50);return()=>{clearInterval(se),R.removeEventListener("focusin",Q),R.removeEventListener("keydown",O,!0)}},[n,a,u,o,v,f]);const U=R=>{I.current===null&&(I.current=R.relatedTarget),V.current=!0,P.current=R.target;const O=t.props.onFocus;O&&O(R)},F=R=>{I.current===null&&(I.current=R.relatedTarget),V.current=!0};return ee.jsxs(te.Fragment,{children:[ee.jsx("div",{tabIndex:v?0:-1,onFocus:F,ref:E,"data-testid":"sentinelStart"}),te.cloneElement(t,{ref:q,onFocus:U}),ee.jsx("div",{tabIndex:v?0:-1,onFocus:F,ref:T,"data-testid":"sentinelEnd"})]})}function C9(e){return typeof e=="function"?e():e}const k9=te.forwardRef(function(t,n){const{children:a,container:u,disablePortal:f=!1}=t,[o,v]=te.useState(null),x=qi(te.isValidElement(a)?a.ref:null,n);if(Fa(()=>{f||v(C9(u)||document.body)},[u,f]),Fa(()=>{if(o&&!f)return p1(n,o),()=>{p1(n,null)}},[n,o,f]),f){if(te.isValidElement(a)){const E={ref:x};return te.cloneElement(a,E)}return ee.jsx(te.Fragment,{children:a})}return ee.jsx(te.Fragment,{children:o&&pb.createPortal(a,o)})});function T9(e){const t=Lo(e);return t.body===e?ul(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function qd(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function RC(e){return parseInt(ul(e).getComputedStyle(e).paddingRight,10)||0}function I9(e){const n=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(e.tagName)!==-1,a=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return n||a}function LC(e,t,n,a,u){const f=[t,n,...a];[].forEach.call(e.children,o=>{const v=f.indexOf(o)===-1,x=!I9(o);v&&x&&qd(o,u)})}function K_(e,t){let n=-1;return e.some((a,u)=>t(a)?(n=u,!0):!1),n}function P9(e,t){const n=[],a=e.container;if(!t.disableScrollLock){if(T9(a)){const o=SA(Lo(a));n.push({value:a.style.paddingRight,property:"padding-right",el:a}),a.style.paddingRight=`${RC(a)+o}px`;const v=Lo(a).querySelectorAll(".mui-fixed");[].forEach.call(v,x=>{n.push({value:x.style.paddingRight,property:"padding-right",el:x}),x.style.paddingRight=`${RC(x)+o}px`})}let f;if(a.parentNode instanceof DocumentFragment)f=Lo(a).body;else{const o=a.parentElement,v=ul(a);f=(o==null?void 0:o.nodeName)==="HTML"&&v.getComputedStyle(o).overflowY==="scroll"?o:a}n.push({value:f.style.overflow,property:"overflow",el:f},{value:f.style.overflowX,property:"overflow-x",el:f},{value:f.style.overflowY,property:"overflow-y",el:f}),f.style.overflow="hidden"}return()=>{n.forEach(({value:f,el:o,property:v})=>{f?o.style.setProperty(v,f):o.style.removeProperty(v)})}}function A9(e){const t=[];return[].forEach.call(e.children,n=>{n.getAttribute("aria-hidden")==="true"&&t.push(n)}),t}class M9{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(t,n){let a=this.modals.indexOf(t);if(a!==-1)return a;a=this.modals.length,this.modals.push(t),t.modalRef&&qd(t.modalRef,!1);const u=A9(n);LC(n,t.mount,t.modalRef,u,!0);const f=K_(this.containers,o=>o.container===n);return f!==-1?(this.containers[f].modals.push(t),a):(this.containers.push({modals:[t],container:n,restore:null,hiddenSiblings:u}),a)}mount(t,n){const a=K_(this.containers,f=>f.modals.indexOf(t)!==-1),u=this.containers[a];u.restore||(u.restore=P9(u,n))}remove(t,n=!0){const a=this.modals.indexOf(t);if(a===-1)return a;const u=K_(this.containers,o=>o.modals.indexOf(t)!==-1),f=this.containers[u];if(f.modals.splice(f.modals.indexOf(t),1),this.modals.splice(a,1),f.modals.length===0)f.restore&&f.restore(),t.modalRef&&qd(t.modalRef,n),LC(f.container,t.mount,t.modalRef,f.hiddenSiblings,!1),this.containers.splice(u,1);else{const o=f.modals[f.modals.length-1];o.modalRef&&qd(o.modalRef,!1)}return a}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}function z9(e){return typeof e=="function"?e():e}function R9(e){return e?e.props.hasOwnProperty("in"):!1}const L9=new M9;function D9(e){const{container:t,disableEscapeKeyDown:n=!1,disableScrollLock:a=!1,manager:u=L9,closeAfterTransition:f=!1,onTransitionEnter:o,onTransitionExited:v,children:x,onClose:E,open:T,rootRef:I}=e,P=te.useRef({}),V=te.useRef(null),N=te.useRef(null),q=qi(N,I),[J,U]=te.useState(!T),F=R9(x);let R=!0;(e["aria-hidden"]==="false"||e["aria-hidden"]===!1)&&(R=!1);const O=()=>Lo(V.current),Q=()=>(P.current.modalRef=N.current,P.current.mount=V.current,P.current),se=()=>{u.mount(Q(),{disableScrollLock:a}),N.current&&(N.current.scrollTop=0)},pe=rl(()=>{const Ce=z9(t)||O().body;u.add(Q(),Ce),N.current&&se()}),_e=te.useCallback(()=>u.isTopModal(Q()),[u]),ze=rl(Ce=>{V.current=Ce,Ce&&(T&&_e()?se():N.current&&qd(N.current,R))}),he=te.useCallback(()=>{u.remove(Q(),R)},[R,u]);te.useEffect(()=>()=>{he()},[he]),te.useEffect(()=>{T?pe():(!F||!f)&&he()},[T,he,F,f,pe]);const we=Ce=>ke=>{var Te;(Te=Ce.onKeyDown)==null||Te.call(Ce,ke),!(ke.key!=="Escape"||ke.which===229||!_e())&&(n||(ke.stopPropagation(),E&&E(ke,"escapeKeyDown")))},ie=Ce=>ke=>{var Te;(Te=Ce.onClick)==null||Te.call(Ce,ke),ke.target===ke.currentTarget&&E&&E(ke,"backdropClick")};return{getRootProps:(Ce={})=>{const ke=NA(e);delete ke.onTransitionEnter,delete ke.onTransitionExited;const Te=fe({},ke,Ce);return fe({role:"presentation"},Te,{onKeyDown:we(Te),ref:q})},getBackdropProps:(Ce={})=>{const ke=Ce;return fe({"aria-hidden":!0},ke,{onClick:ie(ke),open:T})},getTransitionProps:()=>{const Ce=()=>{U(!1),o&&o()},ke=()=>{U(!0),v&&v(),f&&he()};return{onEnter:lC(Ce,x==null?void 0:x.props.onEnter),onExited:lC(ke,x==null?void 0:x.props.onExited)}},rootRef:q,portalRef:ze,isTopModal:_e,exited:J,hasTransition:F}}const O9=["onChange","maxRows","minRows","style","value"];function hy(e){return parseInt(e,10)||0}const B9={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function DC(e){return e==null||Object.keys(e).length===0||e.outerHeightStyle===0&&!e.overflow}const N9=te.forwardRef(function(t,n){const{onChange:a,maxRows:u,minRows:f=1,style:o,value:v}=t,x=jt(t,O9),{current:E}=te.useRef(v!=null),T=te.useRef(null),I=qi(n,T),P=te.useRef(null),V=te.useRef(0),[N,q]=te.useState({outerHeightStyle:0}),J=te.useCallback(()=>{const O=T.current,se=ul(O).getComputedStyle(O);if(se.width==="0px")return{outerHeightStyle:0};const pe=P.current;pe.style.width=se.width,pe.value=O.value||t.placeholder||"x",pe.value.slice(-1)===`
`&&(pe.value+=" ");const _e=se.boxSizing,ze=hy(se.paddingBottom)+hy(se.paddingTop),he=hy(se.borderBottomWidth)+hy(se.borderTopWidth),we=pe.scrollHeight;pe.value="x";const ie=pe.scrollHeight;let ge=we;f&&(ge=Math.max(Number(f)*ie,ge)),u&&(ge=Math.min(Number(u)*ie,ge)),ge=Math.max(ge,ie);const Ne=ge+(_e==="border-box"?ze+he:0),qe=Math.abs(ge-we)<=1;return{outerHeightStyle:Ne,overflow:qe}},[u,f,t.placeholder]),U=(O,Q)=>{const{outerHeightStyle:se,overflow:pe}=Q;return V.current<20&&(se>0&&Math.abs((O.outerHeightStyle||0)-se)>1||O.overflow!==pe)?(V.current+=1,{overflow:pe,outerHeightStyle:se}):O},F=te.useCallback(()=>{const O=J();DC(O)||q(Q=>U(Q,O))},[J]);Fa(()=>{const O=()=>{const we=J();DC(we)||pb.flushSync(()=>{q(ie=>U(ie,we))})},Q=()=>{V.current=0,O()};let se;const pe=_v(Q),_e=T.current,ze=ul(_e);ze.addEventListener("resize",pe);let he;return typeof ResizeObserver<"u"&&(he=new ResizeObserver(Q),he.observe(_e)),()=>{pe.clear(),cancelAnimationFrame(se),ze.removeEventListener("resize",pe),he&&he.disconnect()}},[J]),Fa(()=>{F()}),te.useEffect(()=>{V.current=0},[v]);const R=O=>{V.current=0,E||F(),a&&a(O)};return ee.jsxs(te.Fragment,{children:[ee.jsx("textarea",fe({value:v,onChange:R,ref:I,rows:f,style:fe({height:N.outerHeightStyle,overflow:N.overflow?"hidden":void 0},o)},x)),ee.jsx("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:P,tabIndex:-1,style:fe({},B9.shadow,o,{paddingTop:0,paddingBottom:0})})]})});function ch({props:e,states:t,muiFormControl:n}){return t.reduce((a,u)=>(a[u]=e[u],n&&typeof e[u]>"u"&&(a[u]=n[u]),a),{})}const F9=te.createContext(void 0),nw=F9;function ph(){return te.useContext(nw)}function j9(e){return ee.jsx(v$,fe({},e,{defaultTheme:zv,themeId:If}))}function OC(e){return e!=null&&!(Array.isArray(e)&&e.length===0)}function Mg(e,t=!1){return e&&(OC(e.value)&&e.value!==""||t&&OC(e.defaultValue)&&e.defaultValue!=="")}function U9(e){return e.startAdornment}function $9(e){return Br("MuiInputBase",e)}const V9=kr("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),rh=V9,q9=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],qv=(e,t)=>{const{ownerState:n}=e;return[t.root,n.formControl&&t.formControl,n.startAdornment&&t.adornedStart,n.endAdornment&&t.adornedEnd,n.error&&t.error,n.size==="small"&&t.sizeSmall,n.multiline&&t.multiline,n.color&&t[`color${Qt(n.color)}`],n.fullWidth&&t.fullWidth,n.hiddenLabel&&t.hiddenLabel]},Wv=(e,t)=>{const{ownerState:n}=e;return[t.input,n.size==="small"&&t.inputSizeSmall,n.multiline&&t.inputMultiline,n.type==="search"&&t.inputTypeSearch,n.startAdornment&&t.inputAdornedStart,n.endAdornment&&t.inputAdornedEnd,n.hiddenLabel&&t.inputHiddenLabel]},W9=e=>{const{classes:t,color:n,disabled:a,error:u,endAdornment:f,focused:o,formControl:v,fullWidth:x,hiddenLabel:E,multiline:T,readOnly:I,size:P,startAdornment:V,type:N}=e,q={root:["root",`color${Qt(n)}`,a&&"disabled",u&&"error",x&&"fullWidth",o&&"focused",v&&"formControl",P&&P!=="medium"&&`size${Qt(P)}`,T&&"multiline",V&&"adornedStart",f&&"adornedEnd",E&&"hiddenLabel",I&&"readOnly"],input:["input",a&&"disabled",N==="search"&&"inputTypeSearch",T&&"inputMultiline",P==="small"&&"inputSizeSmall",E&&"inputHiddenLabel",V&&"inputAdornedStart",f&&"inputAdornedEnd",I&&"readOnly"]};return Ur(q,$9,t)},Gv=Rt("div",{name:"MuiInputBase",slot:"Root",overridesResolver:qv})(({theme:e,ownerState:t})=>fe({},e.typography.body1,{color:(e.vars||e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${rh.disabled}`]:{color:(e.vars||e).palette.text.disabled,cursor:"default"}},t.multiline&&fe({padding:"4px 0 5px"},t.size==="small"&&{paddingTop:1}),t.fullWidth&&{width:"100%"})),Hv=Rt("input",{name:"MuiInputBase",slot:"Input",overridesResolver:Wv})(({theme:e,ownerState:t})=>{const n=e.palette.mode==="light",a=fe({color:"currentColor"},e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5},{transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})}),u={opacity:"0 !important"},f=e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5};return fe({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":a,"&::-moz-placeholder":a,"&:-ms-input-placeholder":a,"&::-ms-input-placeholder":a,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${rh.formControl} &`]:{"&::-webkit-input-placeholder":u,"&::-moz-placeholder":u,"&:-ms-input-placeholder":u,"&::-ms-input-placeholder":u,"&:focus::-webkit-input-placeholder":f,"&:focus::-moz-placeholder":f,"&:focus:-ms-input-placeholder":f,"&:focus::-ms-input-placeholder":f},[`&.${rh.disabled}`]:{opacity:1,WebkitTextFillColor:(e.vars||e).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},t.size==="small"&&{paddingTop:1},t.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},t.type==="search"&&{MozAppearance:"textfield"})}),G9=ee.jsx(j9,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),H9=te.forwardRef(function(t,n){var a;const u=$r({props:t,name:"MuiInputBase"}),{"aria-describedby":f,autoComplete:o,autoFocus:v,className:x,components:E={},componentsProps:T={},defaultValue:I,disabled:P,disableInjectingGlobalStyles:V,endAdornment:N,fullWidth:q=!1,id:J,inputComponent:U="input",inputProps:F={},inputRef:R,maxRows:O,minRows:Q,multiline:se=!1,name:pe,onBlur:_e,onChange:ze,onClick:he,onFocus:we,onKeyDown:ie,onKeyUp:ge,placeholder:Ne,readOnly:qe,renderSuffix:Ce,rows:ke,slotProps:Te={},slots:Oe={},startAdornment:Je,type:$e="text",value:et}=u,Wt=jt(u,q9),Re=F.value!=null?F.value:et,{current:He}=te.useRef(Re!=null),Zt=te.useRef(),Pt=te.useCallback(hr=>{},[]),Gt=qi(Zt,R,F.ref,Pt),[zt,nr]=te.useState(!1),Kt=ph(),Yt=ch({props:u,muiFormControl:Kt,states:["color","disabled","error","hiddenLabel","size","required","filled"]});Yt.focused=Kt?Kt.focused:zt,te.useEffect(()=>{!Kt&&P&&zt&&(nr(!1),_e&&_e())},[Kt,P,zt,_e]);const st=Kt&&Kt.onFilled,Lt=Kt&&Kt.onEmpty,er=te.useCallback(hr=>{Mg(hr)?st&&st():Lt&&Lt()},[st,Lt]);Fa(()=>{He&&er({value:Re})},[Re,er,He]);const Mr=hr=>{if(Yt.disabled){hr.stopPropagation();return}we&&we(hr),F.onFocus&&F.onFocus(hr),Kt&&Kt.onFocus?Kt.onFocus(hr):nr(!0)},Nr=hr=>{_e&&_e(hr),F.onBlur&&F.onBlur(hr),Kt&&Kt.onBlur?Kt.onBlur(hr):nr(!1)},tr=(hr,...Dt)=>{if(!He){const Wn=hr.target||Zt.current;if(Wn==null)throw new Error(eu(1));er({value:Wn.value})}F.onChange&&F.onChange(hr,...Dt),ze&&ze(hr,...Dt)};te.useEffect(()=>{er(Zt.current)},[]);const Vr=hr=>{Zt.current&&hr.currentTarget===hr.target&&Zt.current.focus(),he&&he(hr)};let zr=U,Sr=F;se&&zr==="input"&&(ke?Sr=fe({type:void 0,minRows:ke,maxRows:ke},Sr):Sr=fe({type:void 0,maxRows:O,minRows:Q},Sr),zr=N9);const on=hr=>{er(hr.animationName==="mui-auto-fill-cancel"?Zt.current:{value:"x"})};te.useEffect(()=>{Kt&&Kt.setAdornedStart(!!Je)},[Kt,Je]);const Ar=fe({},u,{color:Yt.color||"primary",disabled:Yt.disabled,endAdornment:N,error:Yt.error,focused:Yt.focused,formControl:Kt,fullWidth:q,hiddenLabel:Yt.hiddenLabel,multiline:se,size:Yt.size,startAdornment:Je,type:$e}),lr=W9(Ar),Xr=Oe.root||E.Root||Gv,Sn=Te.root||T.root||{},li=Oe.input||E.Input||Hv;return Sr=fe({},Sr,(a=Te.input)!=null?a:T.input),ee.jsxs(te.Fragment,{children:[!V&&G9,ee.jsxs(Xr,fe({},Sn,!th(Xr)&&{ownerState:fe({},Ar,Sn.ownerState)},{ref:n,onClick:Vr},Wt,{className:$t(lr.root,Sn.className,x,qe&&"MuiInputBase-readOnly"),children:[Je,ee.jsx(nw.Provider,{value:null,children:ee.jsx(li,fe({ownerState:Ar,"aria-invalid":Yt.error,"aria-describedby":f,autoComplete:o,autoFocus:v,defaultValue:I,disabled:Yt.disabled,id:J,onAnimationStart:on,name:pe,placeholder:Ne,readOnly:qe,required:Yt.required,rows:ke,value:Re,onKeyDown:ie,onKeyUp:ge,type:$e},Sr,!th(li)&&{as:zr,ownerState:fe({},Ar,Sr.ownerState)},{ref:Gt,className:$t(lr.input,Sr.className,qe&&"MuiInputBase-readOnly"),onBlur:Nr,onChange:tr,onFocus:Mr}))}),N,Ce?Ce(fe({},Yt,{startAdornment:Je})):null]}))]})}),iw=H9;function K9(e){return Br("MuiInput",e)}const Z9=fe({},rh,kr("MuiInput",["root","underline","input"])),xd=Z9;function X9(e){return Br("MuiOutlinedInput",e)}const Y9=fe({},rh,kr("MuiOutlinedInput",["root","notchedOutline","input"])),Rl=Y9;function J9(e){return Br("MuiFilledInput",e)}const Q9=fe({},rh,kr("MuiFilledInput",["root","underline","input"])),Nu=Q9,e7=Yb(ee.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),t7=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],r7={entering:{opacity:1},entered:{opacity:1}},n7=te.forwardRef(function(t,n){const a=uh(),u={enter:a.transitions.duration.enteringScreen,exit:a.transitions.duration.leavingScreen},{addEndListener:f,appear:o=!0,children:v,easing:x,in:E,onEnter:T,onEntered:I,onEntering:P,onExit:V,onExited:N,onExiting:q,style:J,timeout:U=u,TransitionComponent:F=OA}=t,R=jt(t,t7),O=te.useRef(null),Q=qi(O,v.ref,n),se=Ne=>qe=>{if(Ne){const Ce=O.current;qe===void 0?Ne(Ce):Ne(Ce,qe)}},pe=se(P),_e=se((Ne,qe)=>{BA(Ne);const Ce=Ag({style:J,timeout:U,easing:x},{mode:"enter"});Ne.style.webkitTransition=a.transitions.create("opacity",Ce),Ne.style.transition=a.transitions.create("opacity",Ce),T&&T(Ne,qe)}),ze=se(I),he=se(q),we=se(Ne=>{const qe=Ag({style:J,timeout:U,easing:x},{mode:"exit"});Ne.style.webkitTransition=a.transitions.create("opacity",qe),Ne.style.transition=a.transitions.create("opacity",qe),V&&V(Ne)}),ie=se(N),ge=Ne=>{f&&f(O.current,Ne)};return ee.jsx(F,fe({appear:o,in:E,nodeRef:O,onEnter:_e,onEntered:ze,onEntering:pe,onExit:we,onExited:ie,onExiting:he,addEndListener:ge,timeout:U},R,{children:(Ne,qe)=>te.cloneElement(v,fe({style:fe({opacity:0,visibility:Ne==="exited"&&!E?"hidden":void 0},r7[Ne],J,v.props.style),ref:Q},qe))}))}),FA=n7;function i7(e){return Br("MuiBackdrop",e)}kr("MuiBackdrop",["root","invisible"]);const o7=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],a7=e=>{const{classes:t,invisible:n}=e;return Ur({root:["root",n&&"invisible"]},i7,t)},s7=Rt("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.invisible&&t.invisible]}})(({ownerState:e})=>fe({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},e.invisible&&{backgroundColor:"transparent"})),l7=te.forwardRef(function(t,n){var a,u,f;const o=$r({props:t,name:"MuiBackdrop"}),{children:v,className:x,component:E="div",components:T={},componentsProps:I={},invisible:P=!1,open:V,slotProps:N={},slots:q={},TransitionComponent:J=FA,transitionDuration:U}=o,F=jt(o,o7),R=fe({},o,{component:E,invisible:P}),O=a7(R),Q=(a=N.root)!=null?a:I.root;return ee.jsx(J,fe({in:V,timeout:U},F,{children:ee.jsx(s7,fe({"aria-hidden":!0},Q,{as:(u=(f=q.root)!=null?f:T.Root)!=null?u:E,className:$t(O.root,x,Q==null?void 0:Q.className),ownerState:fe({},R,Q==null?void 0:Q.ownerState),classes:O,ref:n,children:v}))}))}),jA=l7,u7=kr("MuiBox",["root"]),c7=u7,p7=zA(),h7=w$({themeId:If,defaultTheme:p7,defaultClassName:c7.root,generateClassName:CA.generate}),ho=h7;function d7(e){return Br("MuiButton",e)}const f7=kr("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),dy=f7,m7=te.createContext({}),y7=m7,g7=te.createContext(void 0),v7=g7,_7=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],x7=e=>{const{color:t,disableElevation:n,fullWidth:a,size:u,variant:f,classes:o}=e,v={root:["root",f,`${f}${Qt(t)}`,`size${Qt(u)}`,`${f}Size${Qt(u)}`,t==="inherit"&&"colorInherit",n&&"disableElevation",a&&"fullWidth"],label:["label"],startIcon:["startIcon",`iconSize${Qt(u)}`],endIcon:["endIcon",`iconSize${Qt(u)}`]},x=Ur(v,d7,o);return fe({},o,x)},UA=e=>fe({},e.size==="small"&&{"& > *:nth-of-type(1)":{fontSize:18}},e.size==="medium"&&{"& > *:nth-of-type(1)":{fontSize:20}},e.size==="large"&&{"& > *:nth-of-type(1)":{fontSize:22}}),b7=Rt(uc,{shouldForwardProp:e=>na(e)||e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`${n.variant}${Qt(n.color)}`],t[`size${Qt(n.size)}`],t[`${n.variant}Size${Qt(n.size)}`],n.color==="inherit"&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth]}})(({theme:e,ownerState:t})=>{var n,a;const u=e.palette.mode==="light"?e.palette.grey[300]:e.palette.grey[800],f=e.palette.mode==="light"?e.palette.grey.A100:e.palette.grey[700];return fe({},e.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":fe({textDecoration:"none",backgroundColor:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:mi(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="text"&&t.color!=="inherit"&&{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:mi(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="outlined"&&t.color!=="inherit"&&{border:`1px solid ${(e.vars||e).palette[t.color].main}`,backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:mi(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="contained"&&{backgroundColor:e.vars?e.vars.palette.Button.inheritContainedHoverBg:f,boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2],backgroundColor:(e.vars||e).palette.grey[300]}},t.variant==="contained"&&t.color!=="inherit"&&{backgroundColor:(e.vars||e).palette[t.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t.color].main}}),"&:active":fe({},t.variant==="contained"&&{boxShadow:(e.vars||e).shadows[8]}),[`&.${dy.focusVisible}`]:fe({},t.variant==="contained"&&{boxShadow:(e.vars||e).shadows[6]}),[`&.${dy.disabled}`]:fe({color:(e.vars||e).palette.action.disabled},t.variant==="outlined"&&{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`},t.variant==="contained"&&{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground})},t.variant==="text"&&{padding:"6px 8px"},t.variant==="text"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].main},t.variant==="outlined"&&{padding:"5px 15px",border:"1px solid currentColor"},t.variant==="outlined"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].main,border:e.vars?`1px solid rgba(${e.vars.palette[t.color].mainChannel} / 0.5)`:`1px solid ${mi(e.palette[t.color].main,.5)}`},t.variant==="contained"&&{color:e.vars?e.vars.palette.text.primary:(n=(a=e.palette).getContrastText)==null?void 0:n.call(a,e.palette.grey[300]),backgroundColor:e.vars?e.vars.palette.Button.inheritContainedBg:u,boxShadow:(e.vars||e).shadows[2]},t.variant==="contained"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].contrastText,backgroundColor:(e.vars||e).palette[t.color].main},t.color==="inherit"&&{color:"inherit",borderColor:"currentColor"},t.size==="small"&&t.variant==="text"&&{padding:"4px 5px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="text"&&{padding:"8px 11px",fontSize:e.typography.pxToRem(15)},t.size==="small"&&t.variant==="outlined"&&{padding:"3px 9px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="outlined"&&{padding:"7px 21px",fontSize:e.typography.pxToRem(15)},t.size==="small"&&t.variant==="contained"&&{padding:"4px 10px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="contained"&&{padding:"8px 22px",fontSize:e.typography.pxToRem(15)},t.fullWidth&&{width:"100%"})},({ownerState:e})=>e.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${dy.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${dy.disabled}`]:{boxShadow:"none"}}),w7=Rt("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.startIcon,t[`iconSize${Qt(n.size)}`]]}})(({ownerState:e})=>fe({display:"inherit",marginRight:8,marginLeft:-4},e.size==="small"&&{marginLeft:-2},UA(e))),S7=Rt("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.endIcon,t[`iconSize${Qt(n.size)}`]]}})(({ownerState:e})=>fe({display:"inherit",marginRight:-4,marginLeft:8},e.size==="small"&&{marginRight:-2},UA(e))),E7=te.forwardRef(function(t,n){const a=te.useContext(y7),u=te.useContext(v7),f=qb(a,t),o=$r({props:f,name:"MuiButton"}),{children:v,color:x="primary",component:E="button",className:T,disabled:I=!1,disableElevation:P=!1,disableFocusRipple:V=!1,endIcon:N,focusVisibleClassName:q,fullWidth:J=!1,size:U="medium",startIcon:F,type:R,variant:O="text"}=o,Q=jt(o,_7),se=fe({},o,{color:x,component:E,disabled:I,disableElevation:P,disableFocusRipple:V,fullWidth:J,size:U,type:R,variant:O}),pe=x7(se),_e=F&&ee.jsx(w7,{className:pe.startIcon,ownerState:se,children:F}),ze=N&&ee.jsx(S7,{className:pe.endIcon,ownerState:se,children:N}),he=u||"";return ee.jsxs(b7,fe({ownerState:se,className:$t(a.className,pe.root,T,he),component:E,disabled:I,focusRipple:!V,focusVisibleClassName:$t(pe.focusVisible,q),ref:n,type:R},Q,{classes:pe,children:[_e,v,ze]}))}),jl=E7;function C7(e){return Br("MuiModal",e)}kr("MuiModal",["root","hidden","backdrop"]);const k7=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","onTransitionEnter","onTransitionExited","open","slotProps","slots","theme"],T7=e=>{const{open:t,exited:n,classes:a}=e;return Ur({root:["root",!t&&n&&"hidden"],backdrop:["backdrop"]},C7,a)},I7=Rt("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.open&&n.exited&&t.hidden]}})(({theme:e,ownerState:t})=>fe({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0},!t.open&&t.exited&&{visibility:"hidden"})),P7=Rt(jA,{name:"MuiModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({zIndex:-1}),A7=te.forwardRef(function(t,n){var a,u,f,o,v,x;const E=$r({name:"MuiModal",props:t}),{BackdropComponent:T=P7,BackdropProps:I,className:P,closeAfterTransition:V=!1,children:N,container:q,component:J,components:U={},componentsProps:F={},disableAutoFocus:R=!1,disableEnforceFocus:O=!1,disableEscapeKeyDown:Q=!1,disablePortal:se=!1,disableRestoreFocus:pe=!1,disableScrollLock:_e=!1,hideBackdrop:ze=!1,keepMounted:he=!1,onBackdropClick:we,open:ie,slotProps:ge,slots:Ne}=E,qe=jt(E,k7),Ce=fe({},E,{closeAfterTransition:V,disableAutoFocus:R,disableEnforceFocus:O,disableEscapeKeyDown:Q,disablePortal:se,disableRestoreFocus:pe,disableScrollLock:_e,hideBackdrop:ze,keepMounted:he}),{getRootProps:ke,getBackdropProps:Te,getTransitionProps:Oe,portalRef:Je,isTopModal:$e,exited:et,hasTransition:Wt}=D9(fe({},Ce,{rootRef:n})),Re=fe({},Ce,{exited:et}),He=T7(Re),Zt={};if(N.props.tabIndex===void 0&&(Zt.tabIndex="-1"),Wt){const{onEnter:st,onExited:Lt}=Oe();Zt.onEnter=st,Zt.onExited=Lt}const Pt=(a=(u=Ne==null?void 0:Ne.root)!=null?u:U.Root)!=null?a:I7,Gt=(f=(o=Ne==null?void 0:Ne.backdrop)!=null?o:U.Backdrop)!=null?f:T,zt=(v=ge==null?void 0:ge.root)!=null?v:F.root,nr=(x=ge==null?void 0:ge.backdrop)!=null?x:F.backdrop,Kt=bs({elementType:Pt,externalSlotProps:zt,externalForwardedProps:qe,getSlotProps:ke,additionalProps:{ref:n,as:J},ownerState:Re,className:$t(P,zt==null?void 0:zt.className,He==null?void 0:He.root,!Re.open&&Re.exited&&(He==null?void 0:He.hidden))}),Yt=bs({elementType:Gt,externalSlotProps:nr,additionalProps:I,getSlotProps:st=>Te(fe({},st,{onClick:Lt=>{we&&we(Lt),st!=null&&st.onClick&&st.onClick(Lt)}})),className:$t(nr==null?void 0:nr.className,I==null?void 0:I.className,He==null?void 0:He.backdrop),ownerState:Re});return!he&&!ie&&(!Wt||et)?null:ee.jsx(k9,{ref:Je,container:q,disablePortal:se,children:ee.jsxs(Pt,fe({},Kt,{children:[!ze&&T?ee.jsx(Gt,fe({},Yt)):null,ee.jsx(E9,{disableEnforceFocus:O,disableAutoFocus:R,disableRestoreFocus:pe,isEnabled:$e,open:ie,children:te.cloneElement(N,Zt)})]}))})}),$A=A7;function M7(e){return Br("MuiDialog",e)}const z7=kr("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),Z_=z7,R7=te.createContext({}),VA=R7,L7=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],D7=Rt(jA,{name:"MuiDialog",slot:"Backdrop",overrides:(e,t)=>t.backdrop})({zIndex:-1}),O7=e=>{const{classes:t,scroll:n,maxWidth:a,fullWidth:u,fullScreen:f}=e,o={root:["root"],container:["container",`scroll${Qt(n)}`],paper:["paper",`paperScroll${Qt(n)}`,`paperWidth${Qt(String(a))}`,u&&"paperFullWidth",f&&"paperFullScreen"]};return Ur(o,M7,t)},B7=Rt($A,{name:"MuiDialog",slot:"Root",overridesResolver:(e,t)=>t.root})({"@media print":{position:"absolute !important"}}),N7=Rt("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.container,t[`scroll${Qt(n.scroll)}`]]}})(({ownerState:e})=>fe({height:"100%","@media print":{height:"auto"},outline:0},e.scroll==="paper"&&{display:"flex",justifyContent:"center",alignItems:"center"},e.scroll==="body"&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}})),F7=Rt(rw,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.paper,t[`scrollPaper${Qt(n.scroll)}`],t[`paperWidth${Qt(String(n.maxWidth))}`],n.fullWidth&&t.paperFullWidth,n.fullScreen&&t.paperFullScreen]}})(({theme:e,ownerState:t})=>fe({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},t.scroll==="paper"&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},t.scroll==="body"&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!t.maxWidth&&{maxWidth:"calc(100% - 64px)"},t.maxWidth==="xs"&&{maxWidth:e.breakpoints.unit==="px"?Math.max(e.breakpoints.values.xs,444):`max(${e.breakpoints.values.xs}${e.breakpoints.unit}, 444px)`,[`&.${Z_.paperScrollBody}`]:{[e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}},t.maxWidth&&t.maxWidth!=="xs"&&{maxWidth:`${e.breakpoints.values[t.maxWidth]}${e.breakpoints.unit}`,[`&.${Z_.paperScrollBody}`]:{[e.breakpoints.down(e.breakpoints.values[t.maxWidth]+32*2)]:{maxWidth:"calc(100% - 64px)"}}},t.fullWidth&&{width:"calc(100% - 64px)"},t.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${Z_.paperScrollBody}`]:{margin:0,maxWidth:"100%"}})),j7=te.forwardRef(function(t,n){const a=$r({props:t,name:"MuiDialog"}),u=uh(),f={enter:u.transitions.duration.enteringScreen,exit:u.transitions.duration.leavingScreen},{"aria-describedby":o,"aria-labelledby":v,BackdropComponent:x,BackdropProps:E,children:T,className:I,disableEscapeKeyDown:P=!1,fullScreen:V=!1,fullWidth:N=!1,maxWidth:q="sm",onBackdropClick:J,onClose:U,open:F,PaperComponent:R=rw,PaperProps:O={},scroll:Q="paper",TransitionComponent:se=FA,transitionDuration:pe=f,TransitionProps:_e}=a,ze=jt(a,L7),he=fe({},a,{disableEscapeKeyDown:P,fullScreen:V,fullWidth:N,maxWidth:q,scroll:Q}),we=O7(he),ie=te.useRef(),ge=ke=>{ie.current=ke.target===ke.currentTarget},Ne=ke=>{ie.current&&(ie.current=null,J&&J(ke),U&&U(ke,"backdropClick"))},qe=Vb(v),Ce=te.useMemo(()=>({titleId:qe}),[qe]);return ee.jsx(B7,fe({className:$t(we.root,I),closeAfterTransition:!0,components:{Backdrop:D7},componentsProps:{backdrop:fe({transitionDuration:pe,as:x},E)},disableEscapeKeyDown:P,onClose:U,open:F,ref:n,onClick:Ne,ownerState:he},ze,{children:ee.jsx(se,fe({appear:!0,in:F,timeout:pe,role:"presentation"},_e,{children:ee.jsx(N7,{className:$t(we.container),onMouseDown:ge,ownerState:he,children:ee.jsx(F7,fe({as:R,elevation:24,role:"dialog","aria-describedby":o,"aria-labelledby":qe},O,{className:$t(we.paper,O.className),ownerState:he,children:ee.jsx(VA.Provider,{value:Ce,children:T})}))})}))}))}),qA=j7;function U7(e){return Br("MuiDialogActions",e)}kr("MuiDialogActions",["root","spacing"]);const $7=["className","disableSpacing"],V7=e=>{const{classes:t,disableSpacing:n}=e;return Ur({root:["root",!n&&"spacing"]},U7,t)},q7=Rt("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableSpacing&&t.spacing]}})(({ownerState:e})=>fe({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!e.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})),W7=te.forwardRef(function(t,n){const a=$r({props:t,name:"MuiDialogActions"}),{className:u,disableSpacing:f=!1}=a,o=jt(a,$7),v=fe({},a,{disableSpacing:f}),x=V7(v);return ee.jsx(q7,fe({className:$t(x.root,u),ownerState:v,ref:n},o))}),WA=W7;function G7(e){return Br("MuiDialogContent",e)}kr("MuiDialogContent",["root","dividers"]);function H7(e){return Br("MuiDialogTitle",e)}const K7=kr("MuiDialogTitle",["root"]),Z7=K7,X7=["className","dividers"],Y7=e=>{const{classes:t,dividers:n}=e;return Ur({root:["root",n&&"dividers"]},G7,t)},J7=Rt("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dividers&&t.dividers]}})(({theme:e,ownerState:t})=>fe({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},t.dividers?{padding:"16px 24px",borderTop:`1px solid ${(e.vars||e).palette.divider}`,borderBottom:`1px solid ${(e.vars||e).palette.divider}`}:{[`.${Z7.root} + &`]:{paddingTop:0}})),Q7=te.forwardRef(function(t,n){const a=$r({props:t,name:"MuiDialogContent"}),{className:u,dividers:f=!1}=a,o=jt(a,X7),v=fe({},a,{dividers:f}),x=Y7(v);return ee.jsx(J7,fe({className:$t(x.root,u),ownerState:v,ref:n},o))}),GA=Q7,eq=["className","id"],tq=e=>{const{classes:t}=e;return Ur({root:["root"]},H7,t)},rq=Rt(Ap,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),nq=te.forwardRef(function(t,n){const a=$r({props:t,name:"MuiDialogTitle"}),{className:u,id:f}=a,o=jt(a,eq),v=a,x=tq(v),{titleId:E=f}=te.useContext(VA);return ee.jsx(rq,fe({component:"h2",className:$t(x.root,u),ownerState:v,ref:n,variant:"h6",id:f??E},o))}),HA=nq,iq=kr("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),BC=iq,oq=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],aq=e=>{const{classes:t,disableUnderline:n}=e,u=Ur({root:["root",!n&&"underline"],input:["input"]},J9,t);return fe({},t,u)},sq=Rt(Gv,{shouldForwardProp:e=>na(e)||e==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...qv(e,t),!n.disableUnderline&&t.underline]}})(({theme:e,ownerState:t})=>{var n;const a=e.palette.mode==="light",u=a?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",f=a?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",o=a?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",v=a?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return fe({position:"relative",backgroundColor:e.vars?e.vars.palette.FilledInput.bg:f,borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:e.vars?e.vars.palette.FilledInput.hoverBg:o,"@media (hover: none)":{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:f}},[`&.${Nu.focused}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:f},[`&.${Nu.disabled}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.disabledBg:v}},!t.disableUnderline&&{"&::after":{borderBottom:`2px solid ${(n=(e.vars||e).palette[t.color||"primary"])==null?void 0:n.main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Nu.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Nu.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`:u}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Nu.disabled}, .${Nu.error}):before`]:{borderBottom:`1px solid ${(e.vars||e).palette.text.primary}`},[`&.${Nu.disabled}:before`]:{borderBottomStyle:"dotted"}},t.startAdornment&&{paddingLeft:12},t.endAdornment&&{paddingRight:12},t.multiline&&fe({padding:"25px 12px 8px"},t.size==="small"&&{paddingTop:21,paddingBottom:4},t.hiddenLabel&&{paddingTop:16,paddingBottom:17},t.hiddenLabel&&t.size==="small"&&{paddingTop:8,paddingBottom:9}))}),lq=Rt(Hv,{name:"MuiFilledInput",slot:"Input",overridesResolver:Wv})(({theme:e,ownerState:t})=>fe({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},e.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},t.size==="small"&&{paddingTop:21,paddingBottom:4},t.hiddenLabel&&{paddingTop:16,paddingBottom:17},t.startAdornment&&{paddingLeft:0},t.endAdornment&&{paddingRight:0},t.hiddenLabel&&t.size==="small"&&{paddingTop:8,paddingBottom:9},t.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0})),KA=te.forwardRef(function(t,n){var a,u,f,o;const v=$r({props:t,name:"MuiFilledInput"}),{components:x={},componentsProps:E,fullWidth:T=!1,inputComponent:I="input",multiline:P=!1,slotProps:V,slots:N={},type:q="text"}=v,J=jt(v,oq),U=fe({},v,{fullWidth:T,inputComponent:I,multiline:P,type:q}),F=aq(v),R={root:{ownerState:U},input:{ownerState:U}},O=V??E?Ro(R,V??E):R,Q=(a=(u=N.root)!=null?u:x.Root)!=null?a:sq,se=(f=(o=N.input)!=null?o:x.Input)!=null?f:lq;return ee.jsx(iw,fe({slots:{root:Q,input:se},componentsProps:O,fullWidth:T,inputComponent:I,multiline:P,ref:n,type:q},J,{classes:F}))});KA.muiName="Input";const ZA=KA;function uq(e){return Br("MuiFormControl",e)}kr("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const cq=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],pq=e=>{const{classes:t,margin:n,fullWidth:a}=e,u={root:["root",n!=="none"&&`margin${Qt(n)}`,a&&"fullWidth"]};return Ur(u,uq,t)},hq=Rt("div",{name:"MuiFormControl",slot:"Root",overridesResolver:({ownerState:e},t)=>fe({},t.root,t[`margin${Qt(e.margin)}`],e.fullWidth&&t.fullWidth)})(({ownerState:e})=>fe({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},e.margin==="normal"&&{marginTop:16,marginBottom:8},e.margin==="dense"&&{marginTop:8,marginBottom:4},e.fullWidth&&{width:"100%"})),dq=te.forwardRef(function(t,n){const a=$r({props:t,name:"MuiFormControl"}),{children:u,className:f,color:o="primary",component:v="div",disabled:x=!1,error:E=!1,focused:T,fullWidth:I=!1,hiddenLabel:P=!1,margin:V="none",required:N=!1,size:q="medium",variant:J="outlined"}=a,U=jt(a,cq),F=fe({},a,{color:o,component:v,disabled:x,error:E,fullWidth:I,hiddenLabel:P,margin:V,required:N,size:q,variant:J}),R=pq(F),[O,Q]=te.useState(()=>{let ge=!1;return u&&te.Children.forEach(u,Ne=>{if(!Fy(Ne,["Input","Select"]))return;const qe=Fy(Ne,["Select"])?Ne.props.input:Ne;qe&&U9(qe.props)&&(ge=!0)}),ge}),[se,pe]=te.useState(()=>{let ge=!1;return u&&te.Children.forEach(u,Ne=>{Fy(Ne,["Input","Select"])&&(Mg(Ne.props,!0)||Mg(Ne.props.inputProps,!0))&&(ge=!0)}),ge}),[_e,ze]=te.useState(!1);x&&_e&&ze(!1);const he=T!==void 0&&!x?T:_e;let we;const ie=te.useMemo(()=>({adornedStart:O,setAdornedStart:Q,color:o,disabled:x,error:E,filled:se,focused:he,fullWidth:I,hiddenLabel:P,size:q,onBlur:()=>{ze(!1)},onEmpty:()=>{pe(!1)},onFilled:()=>{pe(!0)},onFocus:()=>{ze(!0)},registerEffect:we,required:N,variant:J}),[O,o,x,E,se,he,I,P,we,N,q,J]);return ee.jsx(nw.Provider,{value:ie,children:ee.jsx(hq,fe({as:v,ownerState:F,className:$t(R.root,f),ref:n},U,{children:u}))})}),Kv=dq;function fq(e){return Br("MuiFormHelperText",e)}const mq=kr("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]),NC=mq;var FC;const yq=["children","className","component","disabled","error","filled","focused","margin","required","variant"],gq=e=>{const{classes:t,contained:n,size:a,disabled:u,error:f,filled:o,focused:v,required:x}=e,E={root:["root",u&&"disabled",f&&"error",a&&`size${Qt(a)}`,n&&"contained",v&&"focused",o&&"filled",x&&"required"]};return Ur(E,fq,t)},vq=Rt("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.size&&t[`size${Qt(n.size)}`],n.contained&&t.contained,n.filled&&t.filled]}})(({theme:e,ownerState:t})=>fe({color:(e.vars||e).palette.text.secondary},e.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${NC.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${NC.error}`]:{color:(e.vars||e).palette.error.main}},t.size==="small"&&{marginTop:4},t.contained&&{marginLeft:14,marginRight:14})),_q=te.forwardRef(function(t,n){const a=$r({props:t,name:"MuiFormHelperText"}),{children:u,className:f,component:o="p"}=a,v=jt(a,yq),x=ph(),E=ch({props:a,muiFormControl:x,states:["variant","size","disabled","error","filled","focused","required"]}),T=fe({},a,{component:o,contained:E.variant==="filled"||E.variant==="outlined",variant:E.variant,size:E.size,disabled:E.disabled,error:E.error,filled:E.filled,focused:E.focused,required:E.required}),I=gq(T);return ee.jsx(vq,fe({as:o,ownerState:T,className:$t(I.root,f),ref:n},v,{children:u===" "?FC||(FC=ee.jsx("span",{className:"notranslate",children:"​"})):u}))}),xq=_q;function bq(e){return Br("MuiFormLabel",e)}const wq=kr("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),Wd=wq,Sq=["children","className","color","component","disabled","error","filled","focused","required"],Eq=e=>{const{classes:t,color:n,focused:a,disabled:u,error:f,filled:o,required:v}=e,x={root:["root",`color${Qt(n)}`,u&&"disabled",f&&"error",o&&"filled",a&&"focused",v&&"required"],asterisk:["asterisk",f&&"error"]};return Ur(x,bq,t)},Cq=Rt("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:({ownerState:e},t)=>fe({},t.root,e.color==="secondary"&&t.colorSecondary,e.filled&&t.filled)})(({theme:e,ownerState:t})=>fe({color:(e.vars||e).palette.text.secondary},e.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",[`&.${Wd.focused}`]:{color:(e.vars||e).palette[t.color].main},[`&.${Wd.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${Wd.error}`]:{color:(e.vars||e).palette.error.main}})),kq=Rt("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(({theme:e})=>({[`&.${Wd.error}`]:{color:(e.vars||e).palette.error.main}})),Tq=te.forwardRef(function(t,n){const a=$r({props:t,name:"MuiFormLabel"}),{children:u,className:f,component:o="label"}=a,v=jt(a,Sq),x=ph(),E=ch({props:a,muiFormControl:x,states:["color","required","focused","disabled","error","filled"]}),T=fe({},a,{color:E.color||"primary",component:o,disabled:E.disabled,error:E.error,filled:E.filled,focused:E.focused,required:E.required}),I=Eq(T);return ee.jsxs(Cq,fe({as:o,ownerState:T,className:$t(I.root,f),ref:n},v,{children:[u,E.required&&ee.jsxs(kq,{ownerState:T,"aria-hidden":!0,className:I.asterisk,children:[" ","*"]})]}))}),Iq=Tq,Pq=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function y1(e){return`scale(${e}, ${e**2})`}const Aq={entering:{opacity:1,transform:y1(1)},entered:{opacity:1,transform:"none"}},X_=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),XA=te.forwardRef(function(t,n){const{addEndListener:a,appear:u=!0,children:f,easing:o,in:v,onEnter:x,onEntered:E,onEntering:T,onExit:I,onExited:P,onExiting:V,style:N,timeout:q="auto",TransitionComponent:J=OA}=t,U=jt(t,Pq),F=wA(),R=te.useRef(),O=uh(),Q=te.useRef(null),se=qi(Q,f.ref,n),pe=qe=>Ce=>{if(qe){const ke=Q.current;Ce===void 0?qe(ke):qe(ke,Ce)}},_e=pe(T),ze=pe((qe,Ce)=>{BA(qe);const{duration:ke,delay:Te,easing:Oe}=Ag({style:N,timeout:q,easing:o},{mode:"enter"});let Je;q==="auto"?(Je=O.transitions.getAutoHeightDuration(qe.clientHeight),R.current=Je):Je=ke,qe.style.transition=[O.transitions.create("opacity",{duration:Je,delay:Te}),O.transitions.create("transform",{duration:X_?Je:Je*.666,delay:Te,easing:Oe})].join(","),x&&x(qe,Ce)}),he=pe(E),we=pe(V),ie=pe(qe=>{const{duration:Ce,delay:ke,easing:Te}=Ag({style:N,timeout:q,easing:o},{mode:"exit"});let Oe;q==="auto"?(Oe=O.transitions.getAutoHeightDuration(qe.clientHeight),R.current=Oe):Oe=Ce,qe.style.transition=[O.transitions.create("opacity",{duration:Oe,delay:ke}),O.transitions.create("transform",{duration:X_?Oe:Oe*.666,delay:X_?ke:ke||Oe*.333,easing:Te})].join(","),qe.style.opacity=0,qe.style.transform=y1(.75),I&&I(qe)}),ge=pe(P),Ne=qe=>{q==="auto"&&F.start(R.current||0,qe),a&&a(Q.current,qe)};return ee.jsx(J,fe({appear:u,in:v,nodeRef:Q,onEnter:ze,onEntered:he,onEntering:_e,onExit:ie,onExited:ge,onExiting:we,addEndListener:Ne,timeout:q==="auto"?null:q},U,{children:(qe,Ce)=>te.cloneElement(f,fe({style:fe({opacity:0,transform:y1(.75),visibility:qe==="exited"&&!v?"hidden":void 0},Aq[qe],N,f.props.style),ref:se},Ce))}))});XA.muiSupportAuto=!0;const Mq=XA;function zq(e){return Br("MuiIcon",e)}kr("MuiIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const Rq=["baseClassName","className","color","component","fontSize"],Lq=e=>{const{color:t,fontSize:n,classes:a}=e,u={root:["root",t!=="inherit"&&`color${Qt(t)}`,`fontSize${Qt(n)}`]};return Ur(u,zq,a)},Dq=Rt("span",{name:"MuiIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="inherit"&&t[`color${Qt(n.color)}`],t[`fontSize${Qt(n.fontSize)}`]]}})(({theme:e,ownerState:t})=>({userSelect:"none",width:"1em",height:"1em",overflow:"hidden",display:"inline-block",textAlign:"center",flexShrink:0,fontSize:{inherit:"inherit",small:e.typography.pxToRem(20),medium:e.typography.pxToRem(24),large:e.typography.pxToRem(36)}[t.fontSize],color:{primary:(e.vars||e).palette.primary.main,secondary:(e.vars||e).palette.secondary.main,info:(e.vars||e).palette.info.main,success:(e.vars||e).palette.success.main,warning:(e.vars||e).palette.warning.main,action:(e.vars||e).palette.action.active,error:(e.vars||e).palette.error.main,disabled:(e.vars||e).palette.action.disabled,inherit:void 0}[t.color]})),YA=te.forwardRef(function(t,n){const a=$r({props:t,name:"MuiIcon"}),{baseClassName:u="material-icons",className:f,color:o="inherit",component:v="span",fontSize:x="medium"}=a,E=jt(a,Rq),T=fe({},a,{baseClassName:u,color:o,component:v,fontSize:x}),I=Lq(T);return ee.jsx(Dq,fe({as:v,className:$t(u,"notranslate",I.root,f),ownerState:T,"aria-hidden":!0,ref:n},E))});YA.muiName="Icon";const Oq=YA,Bq=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],Nq=e=>{const{classes:t,disableUnderline:n}=e,u=Ur({root:["root",!n&&"underline"],input:["input"]},K9,t);return fe({},t,u)},Fq=Rt(Gv,{shouldForwardProp:e=>na(e)||e==="classes",name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...qv(e,t),!n.disableUnderline&&t.underline]}})(({theme:e,ownerState:t})=>{let a=e.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return e.vars&&(a=`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`),fe({position:"relative"},t.formControl&&{"label + &":{marginTop:16}},!t.disableUnderline&&{"&::after":{borderBottom:`2px solid ${(e.vars||e).palette[t.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${xd.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${xd.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${a}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${xd.disabled}, .${xd.error}):before`]:{borderBottom:`2px solid ${(e.vars||e).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${a}`}},[`&.${xd.disabled}:before`]:{borderBottomStyle:"dotted"}})}),jq=Rt(Hv,{name:"MuiInput",slot:"Input",overridesResolver:Wv})({}),JA=te.forwardRef(function(t,n){var a,u,f,o;const v=$r({props:t,name:"MuiInput"}),{disableUnderline:x,components:E={},componentsProps:T,fullWidth:I=!1,inputComponent:P="input",multiline:V=!1,slotProps:N,slots:q={},type:J="text"}=v,U=jt(v,Bq),F=Nq(v),O={root:{ownerState:{disableUnderline:x}}},Q=N??T?Ro(N??T,O):O,se=(a=(u=q.root)!=null?u:E.Root)!=null?a:Fq,pe=(f=(o=q.input)!=null?o:E.Input)!=null?f:jq;return ee.jsx(iw,fe({slots:{root:se,input:pe},slotProps:Q,fullWidth:I,inputComponent:P,multiline:V,ref:n,type:J},U,{classes:F}))});JA.muiName="Input";const QA=JA;function Uq(e){return Br("MuiInputLabel",e)}kr("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const $q=["disableAnimation","margin","shrink","variant","className"],Vq=e=>{const{classes:t,formControl:n,size:a,shrink:u,disableAnimation:f,variant:o,required:v}=e,x={root:["root",n&&"formControl",!f&&"animated",u&&"shrink",a&&a!=="normal"&&`size${Qt(a)}`,o],asterisk:[v&&"asterisk"]},E=Ur(x,Uq,t);return fe({},t,E)},qq=Rt(Iq,{shouldForwardProp:e=>na(e)||e==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${Wd.asterisk}`]:t.asterisk},t.root,n.formControl&&t.formControl,n.size==="small"&&t.sizeSmall,n.shrink&&t.shrink,!n.disableAnimation&&t.animated,n.focused&&t.focused,t[n.variant]]}})(({theme:e,ownerState:t})=>fe({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},t.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},t.size==="small"&&{transform:"translate(0, 17px) scale(1)"},t.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!t.disableAnimation&&{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})},t.variant==="filled"&&fe({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},t.size==="small"&&{transform:"translate(12px, 13px) scale(1)"},t.shrink&&fe({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},t.size==="small"&&{transform:"translate(12px, 4px) scale(0.75)"})),t.variant==="outlined"&&fe({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},t.size==="small"&&{transform:"translate(14px, 9px) scale(1)"},t.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))),Wq=te.forwardRef(function(t,n){const a=$r({name:"MuiInputLabel",props:t}),{disableAnimation:u=!1,shrink:f,className:o}=a,v=jt(a,$q),x=ph();let E=f;typeof E>"u"&&x&&(E=x.filled||x.focused||x.adornedStart);const T=ch({props:a,muiFormControl:x,states:["size","variant","required","focused"]}),I=fe({},a,{disableAnimation:u,formControl:x,shrink:E,size:T.size,variant:T.variant,required:T.required,focused:T.focused}),P=Vq(I);return ee.jsx(qq,fe({"data-shrink":E,ownerState:I,ref:n,className:$t(P.root,o)},v,{classes:P}))}),ow=Wq,Gq=te.createContext({}),xs=Gq;function Hq(e){return Br("MuiList",e)}kr("MuiList",["root","padding","dense","subheader"]);const Kq=["children","className","component","dense","disablePadding","subheader"],Zq=e=>{const{classes:t,disablePadding:n,dense:a,subheader:u}=e;return Ur({root:["root",!n&&"padding",a&&"dense",u&&"subheader"]},Hq,t)},Xq=Rt("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disablePadding&&t.padding,n.dense&&t.dense,n.subheader&&t.subheader]}})(({ownerState:e})=>fe({listStyle:"none",margin:0,padding:0,position:"relative"},!e.disablePadding&&{paddingTop:8,paddingBottom:8},e.subheader&&{paddingTop:0})),Yq=te.forwardRef(function(t,n){const a=$r({props:t,name:"MuiList"}),{children:u,className:f,component:o="ul",dense:v=!1,disablePadding:x=!1,subheader:E}=a,T=jt(a,Kq),I=te.useMemo(()=>({dense:v}),[v]),P=fe({},a,{component:o,dense:v,disablePadding:x}),V=Zq(P);return ee.jsx(xs.Provider,{value:I,children:ee.jsxs(Xq,fe({as:o,className:$t(V.root,f),ref:n,ownerState:P},T,{children:[E,u]}))})}),aw=Yq;function Jq(e){return Br("MuiListItem",e)}const Qq=kr("MuiListItem",["root","container","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","padding","button","secondaryAction","selected"]),mp=Qq;function eW(e){return Br("MuiListItemButton",e)}const tW=kr("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]),yp=tW,rW=["alignItems","autoFocus","component","children","dense","disableGutters","divider","focusVisibleClassName","selected","className"],nW=(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.alignItems==="flex-start"&&t.alignItemsFlexStart,n.divider&&t.divider,!n.disableGutters&&t.gutters]},iW=e=>{const{alignItems:t,classes:n,dense:a,disabled:u,disableGutters:f,divider:o,selected:v}=e,E=Ur({root:["root",a&&"dense",!f&&"gutters",o&&"divider",u&&"disabled",t==="flex-start"&&"alignItemsFlexStart",v&&"selected"]},eW,n);return fe({},n,E)},oW=Rt(uc,{shouldForwardProp:e=>na(e)||e==="classes",name:"MuiListItemButton",slot:"Root",overridesResolver:nW})(({theme:e,ownerState:t})=>fe({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${yp.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:mi(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${yp.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:mi(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${yp.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:mi(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:mi(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${yp.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${yp.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},t.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},t.alignItems==="flex-start"&&{alignItems:"flex-start"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.dense&&{paddingTop:4,paddingBottom:4})),aW=te.forwardRef(function(t,n){const a=$r({props:t,name:"MuiListItemButton"}),{alignItems:u="center",autoFocus:f=!1,component:o="div",children:v,dense:x=!1,disableGutters:E=!1,divider:T=!1,focusVisibleClassName:I,selected:P=!1,className:V}=a,N=jt(a,rW),q=te.useContext(xs),J=te.useMemo(()=>({dense:x||q.dense||!1,alignItems:u,disableGutters:E}),[u,q.dense,x,E]),U=te.useRef(null);Fa(()=>{f&&U.current&&U.current.focus()},[f]);const F=fe({},a,{alignItems:u,dense:J.dense,disableGutters:E,divider:T,selected:P}),R=iW(F),O=qi(U,n);return ee.jsx(xs.Provider,{value:J,children:ee.jsx(oW,fe({ref:O,href:N.href||N.to,component:(N.href||N.to)&&o==="div"?"button":o,focusVisibleClassName:$t(R.focusVisible,I),ownerState:F,className:$t(R.root,V)},N,{classes:R,children:v}))})}),sW=aW;function lW(e){return Br("MuiListItemSecondaryAction",e)}kr("MuiListItemSecondaryAction",["root","disableGutters"]);const uW=["className"],cW=e=>{const{disableGutters:t,classes:n}=e;return Ur({root:["root",t&&"disableGutters"]},lW,n)},pW=Rt("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.disableGutters&&t.disableGutters]}})(({ownerState:e})=>fe({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"},e.disableGutters&&{right:0})),eM=te.forwardRef(function(t,n){const a=$r({props:t,name:"MuiListItemSecondaryAction"}),{className:u}=a,f=jt(a,uW),o=te.useContext(xs),v=fe({},a,{disableGutters:o.disableGutters}),x=cW(v);return ee.jsx(pW,fe({className:$t(x.root,u),ownerState:v,ref:n},f))});eM.muiName="ListItemSecondaryAction";const hW=eM,dW=["className"],fW=["alignItems","autoFocus","button","children","className","component","components","componentsProps","ContainerComponent","ContainerProps","dense","disabled","disableGutters","disablePadding","divider","focusVisibleClassName","secondaryAction","selected","slotProps","slots"],mW=(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.alignItems==="flex-start"&&t.alignItemsFlexStart,n.divider&&t.divider,!n.disableGutters&&t.gutters,!n.disablePadding&&t.padding,n.button&&t.button,n.hasSecondaryAction&&t.secondaryAction]},yW=e=>{const{alignItems:t,button:n,classes:a,dense:u,disabled:f,disableGutters:o,disablePadding:v,divider:x,hasSecondaryAction:E,selected:T}=e;return Ur({root:["root",u&&"dense",!o&&"gutters",!v&&"padding",x&&"divider",f&&"disabled",n&&"button",t==="flex-start"&&"alignItemsFlexStart",E&&"secondaryAction",T&&"selected"],container:["container"]},Jq,a)},gW=Rt("div",{name:"MuiListItem",slot:"Root",overridesResolver:mW})(({theme:e,ownerState:t})=>fe({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left"},!t.disablePadding&&fe({paddingTop:8,paddingBottom:8},t.dense&&{paddingTop:4,paddingBottom:4},!t.disableGutters&&{paddingLeft:16,paddingRight:16},!!t.secondaryAction&&{paddingRight:48}),!!t.secondaryAction&&{[`& > .${yp.root}`]:{paddingRight:48}},{[`&.${mp.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${mp.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:mi(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${mp.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:mi(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${mp.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},t.alignItems==="flex-start"&&{alignItems:"flex-start"},t.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},t.button&&{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${mp.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:mi(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:mi(e.palette.primary.main,e.palette.action.selectedOpacity)}}},t.hasSecondaryAction&&{paddingRight:48})),vW=Rt("li",{name:"MuiListItem",slot:"Container",overridesResolver:(e,t)=>t.container})({position:"relative"}),_W=te.forwardRef(function(t,n){const a=$r({props:t,name:"MuiListItem"}),{alignItems:u="center",autoFocus:f=!1,button:o=!1,children:v,className:x,component:E,components:T={},componentsProps:I={},ContainerComponent:P="li",ContainerProps:{className:V}={},dense:N=!1,disabled:q=!1,disableGutters:J=!1,disablePadding:U=!1,divider:F=!1,focusVisibleClassName:R,secondaryAction:O,selected:Q=!1,slotProps:se={},slots:pe={}}=a,_e=jt(a.ContainerProps,dW),ze=jt(a,fW),he=te.useContext(xs),we=te.useMemo(()=>({dense:N||he.dense||!1,alignItems:u,disableGutters:J}),[u,he.dense,N,J]),ie=te.useRef(null);Fa(()=>{f&&ie.current&&ie.current.focus()},[f]);const ge=te.Children.toArray(v),Ne=ge.length&&Fy(ge[ge.length-1],["ListItemSecondaryAction"]),qe=fe({},a,{alignItems:u,autoFocus:f,button:o,dense:we.dense,disabled:q,disableGutters:J,disablePadding:U,divider:F,hasSecondaryAction:Ne,selected:Q}),Ce=yW(qe),ke=qi(ie,n),Te=pe.root||T.Root||gW,Oe=se.root||I.root||{},Je=fe({className:$t(Ce.root,Oe.className,x),disabled:q},ze);let $e=E||"li";return o&&(Je.component=E||"div",Je.focusVisibleClassName=$t(mp.focusVisible,R),$e=uc),Ne?($e=!Je.component&&!E?"div":$e,P==="li"&&($e==="li"?$e="div":Je.component==="li"&&(Je.component="div")),ee.jsx(xs.Provider,{value:we,children:ee.jsxs(vW,fe({as:P,className:$t(Ce.container,V),ref:ke,ownerState:qe},_e,{children:[ee.jsx(Te,fe({},Oe,!th(Te)&&{as:$e,ownerState:fe({},qe,Oe.ownerState)},Je,{children:ge})),ge.pop()]}))})):ee.jsx(xs.Provider,{value:we,children:ee.jsxs(Te,fe({},Oe,{as:$e,ref:ke},!th(Te)&&{ownerState:fe({},qe,Oe.ownerState)},Je,{children:[ge,O&&ee.jsx(hW,{children:O})]}))})}),tM=_W,xW=kr("MuiListItemIcon",["root","alignItemsFlexStart"]),jC=xW;function bW(e){return Br("MuiListItemText",e)}const wW=kr("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),zg=wW,SW=["children","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"],EW=e=>{const{classes:t,inset:n,primary:a,secondary:u,dense:f}=e;return Ur({root:["root",n&&"inset",f&&"dense",a&&u&&"multiline"],primary:["primary"],secondary:["secondary"]},bW,t)},CW=Rt("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${zg.primary}`]:t.primary},{[`& .${zg.secondary}`]:t.secondary},t.root,n.inset&&t.inset,n.primary&&n.secondary&&t.multiline,n.dense&&t.dense]}})(({ownerState:e})=>fe({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},e.primary&&e.secondary&&{marginTop:6,marginBottom:6},e.inset&&{paddingLeft:56})),kW=te.forwardRef(function(t,n){const a=$r({props:t,name:"MuiListItemText"}),{children:u,className:f,disableTypography:o=!1,inset:v=!1,primary:x,primaryTypographyProps:E,secondary:T,secondaryTypographyProps:I}=a,P=jt(a,SW),{dense:V}=te.useContext(xs);let N=x??u,q=T;const J=fe({},a,{disableTypography:o,inset:v,primary:!!N,secondary:!!q,dense:V}),U=EW(J);return N!=null&&N.type!==Ap&&!o&&(N=ee.jsx(Ap,fe({variant:V?"body2":"body1",className:U.primary,component:E!=null&&E.variant?void 0:"span",display:"block"},E,{children:N}))),q!=null&&q.type!==Ap&&!o&&(q=ee.jsx(Ap,fe({variant:"body2",className:U.secondary,color:"text.secondary",display:"block"},I,{children:q}))),ee.jsxs(CW,fe({className:$t(U.root,f),ownerState:J,ref:n},P,{children:[N,q]}))}),TW=kW,IW=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function Y_(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function UC(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function rM(e,t){if(t===void 0)return!0;let n=e.innerText;return n===void 0&&(n=e.textContent),n=n.trim().toLowerCase(),n.length===0?!1:t.repeating?n[0]===t.keys[0]:n.indexOf(t.keys.join(""))===0}function bd(e,t,n,a,u,f){let o=!1,v=u(e,t,t?n:!1);for(;v;){if(v===e.firstChild){if(o)return!1;o=!0}const x=a?!1:v.disabled||v.getAttribute("aria-disabled")==="true";if(!v.hasAttribute("tabindex")||!rM(v,f)||x)v=u(e,v,n);else return v.focus(),!0}return!1}const PW=te.forwardRef(function(t,n){const{actions:a,autoFocus:u=!1,autoFocusItem:f=!1,children:o,className:v,disabledItemsFocusable:x=!1,disableListWrap:E=!1,onKeyDown:T,variant:I="selectedMenu"}=t,P=jt(t,IW),V=te.useRef(null),N=te.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Fa(()=>{u&&V.current.focus()},[u]),te.useImperativeHandle(a,()=>({adjustStyleForScrollbar:(R,O)=>{const Q=!V.current.style.width;if(R.clientHeight<V.current.clientHeight&&Q){const se=`${SA(Lo(R))}px`;V.current.style[O.direction==="rtl"?"paddingLeft":"paddingRight"]=se,V.current.style.width=`calc(100% + ${se})`}return V.current}}),[]);const q=R=>{const O=V.current,Q=R.key,se=Lo(O).activeElement;if(Q==="ArrowDown")R.preventDefault(),bd(O,se,E,x,Y_);else if(Q==="ArrowUp")R.preventDefault(),bd(O,se,E,x,UC);else if(Q==="Home")R.preventDefault(),bd(O,null,E,x,Y_);else if(Q==="End")R.preventDefault(),bd(O,null,E,x,UC);else if(Q.length===1){const pe=N.current,_e=Q.toLowerCase(),ze=performance.now();pe.keys.length>0&&(ze-pe.lastTime>500?(pe.keys=[],pe.repeating=!0,pe.previousKeyMatched=!0):pe.repeating&&_e!==pe.keys[0]&&(pe.repeating=!1)),pe.lastTime=ze,pe.keys.push(_e);const he=se&&!pe.repeating&&rM(se,pe);pe.previousKeyMatched&&(he||bd(O,se,!1,x,Y_,pe))?R.preventDefault():pe.previousKeyMatched=!1}T&&T(R)},J=qi(V,n);let U=-1;te.Children.forEach(o,(R,O)=>{if(!te.isValidElement(R)){U===O&&(U+=1,U>=o.length&&(U=-1));return}R.props.disabled||(I==="selectedMenu"&&R.props.selected||U===-1)&&(U=O),U===O&&(R.props.disabled||R.props.muiSkipListHighlight||R.type.muiSkipListHighlight)&&(U+=1,U>=o.length&&(U=-1))});const F=te.Children.map(o,(R,O)=>{if(O===U){const Q={};return f&&(Q.autoFocus=!0),R.props.tabIndex===void 0&&I==="selectedMenu"&&(Q.tabIndex=0),te.cloneElement(R,Q)}return R});return ee.jsx(aw,fe({role:"menu",ref:J,className:v,onKeyDown:q,tabIndex:u?0:-1},P,{children:F}))}),AW=PW;function MW(e){return Br("MuiPopover",e)}kr("MuiPopover",["root","paper"]);const zW=["onEntering"],RW=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],LW=["slotProps"];function $C(e,t){let n=0;return typeof t=="number"?n=t:t==="center"?n=e.height/2:t==="bottom"&&(n=e.height),n}function VC(e,t){let n=0;return typeof t=="number"?n=t:t==="center"?n=e.width/2:t==="right"&&(n=e.width),n}function qC(e){return[e.horizontal,e.vertical].map(t=>typeof t=="number"?`${t}px`:t).join(" ")}function J_(e){return typeof e=="function"?e():e}const DW=e=>{const{classes:t}=e;return Ur({root:["root"],paper:["paper"]},MW,t)},OW=Rt($A,{name:"MuiPopover",slot:"Root",overridesResolver:(e,t)=>t.root})({}),nM=Rt(rw,{name:"MuiPopover",slot:"Paper",overridesResolver:(e,t)=>t.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),BW=te.forwardRef(function(t,n){var a,u,f;const o=$r({props:t,name:"MuiPopover"}),{action:v,anchorEl:x,anchorOrigin:E={vertical:"top",horizontal:"left"},anchorPosition:T,anchorReference:I="anchorEl",children:P,className:V,container:N,elevation:q=8,marginThreshold:J=16,open:U,PaperProps:F={},slots:R,slotProps:O,transformOrigin:Q={vertical:"top",horizontal:"left"},TransitionComponent:se=Mq,transitionDuration:pe="auto",TransitionProps:{onEntering:_e}={},disableScrollLock:ze=!1}=o,he=jt(o.TransitionProps,zW),we=jt(o,RW),ie=(a=O==null?void 0:O.paper)!=null?a:F,ge=te.useRef(),Ne=qi(ge,ie.ref),qe=fe({},o,{anchorOrigin:E,anchorReference:I,elevation:q,marginThreshold:J,externalPaperSlotProps:ie,transformOrigin:Q,TransitionComponent:se,transitionDuration:pe,TransitionProps:he}),Ce=DW(qe),ke=te.useCallback(()=>{if(I==="anchorPosition")return T;const st=J_(x),er=(st&&st.nodeType===1?st:Lo(ge.current).body).getBoundingClientRect();return{top:er.top+$C(er,E.vertical),left:er.left+VC(er,E.horizontal)}},[x,E.horizontal,E.vertical,T,I]),Te=te.useCallback(st=>({vertical:$C(st,Q.vertical),horizontal:VC(st,Q.horizontal)}),[Q.horizontal,Q.vertical]),Oe=te.useCallback(st=>{const Lt={width:st.offsetWidth,height:st.offsetHeight},er=Te(Lt);if(I==="none")return{top:null,left:null,transformOrigin:qC(er)};const Mr=ke();let Nr=Mr.top-er.vertical,tr=Mr.left-er.horizontal;const Vr=Nr+Lt.height,zr=tr+Lt.width,Sr=ul(J_(x)),on=Sr.innerHeight-J,Ar=Sr.innerWidth-J;if(J!==null&&Nr<J){const lr=Nr-J;Nr-=lr,er.vertical+=lr}else if(J!==null&&Vr>on){const lr=Vr-on;Nr-=lr,er.vertical+=lr}if(J!==null&&tr<J){const lr=tr-J;tr-=lr,er.horizontal+=lr}else if(zr>Ar){const lr=zr-Ar;tr-=lr,er.horizontal+=lr}return{top:`${Math.round(Nr)}px`,left:`${Math.round(tr)}px`,transformOrigin:qC(er)}},[x,I,ke,Te,J]),[Je,$e]=te.useState(U),et=te.useCallback(()=>{const st=ge.current;if(!st)return;const Lt=Oe(st);Lt.top!==null&&(st.style.top=Lt.top),Lt.left!==null&&(st.style.left=Lt.left),st.style.transformOrigin=Lt.transformOrigin,$e(!0)},[Oe]);te.useEffect(()=>(ze&&window.addEventListener("scroll",et),()=>window.removeEventListener("scroll",et)),[x,ze,et]);const Wt=(st,Lt)=>{_e&&_e(st,Lt),et()},Re=()=>{$e(!1)};te.useEffect(()=>{U&&et()}),te.useImperativeHandle(v,()=>U?{updatePosition:()=>{et()}}:null,[U,et]),te.useEffect(()=>{if(!U)return;const st=_v(()=>{et()}),Lt=ul(x);return Lt.addEventListener("resize",st),()=>{st.clear(),Lt.removeEventListener("resize",st)}},[x,U,et]);let He=pe;pe==="auto"&&!se.muiSupportAuto&&(He=void 0);const Zt=N||(x?Lo(J_(x)).body:void 0),Pt=(u=R==null?void 0:R.root)!=null?u:OW,Gt=(f=R==null?void 0:R.paper)!=null?f:nM,zt=bs({elementType:Gt,externalSlotProps:fe({},ie,{style:Je?ie.style:fe({},ie.style,{opacity:0})}),additionalProps:{elevation:q,ref:Ne},ownerState:qe,className:$t(Ce.paper,ie==null?void 0:ie.className)}),nr=bs({elementType:Pt,externalSlotProps:(O==null?void 0:O.root)||{},externalForwardedProps:we,additionalProps:{ref:n,slotProps:{backdrop:{invisible:!0}},container:Zt,open:U},ownerState:qe,className:$t(Ce.root,V)}),{slotProps:Kt}=nr,Yt=jt(nr,LW);return ee.jsx(Pt,fe({},Yt,!th(Pt)&&{slotProps:Kt,disableScrollLock:ze},{children:ee.jsx(se,fe({appear:!0,in:U,onEntering:Wt,onExited:Re,timeout:He},he,{children:ee.jsx(Gt,fe({},zt,{children:P}))}))}))}),NW=BW;function FW(e){return Br("MuiMenu",e)}kr("MuiMenu",["root","paper","list"]);const jW=["onEntering"],UW=["autoFocus","children","className","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant","slots","slotProps"],$W={vertical:"top",horizontal:"right"},VW={vertical:"top",horizontal:"left"},qW=e=>{const{classes:t}=e;return Ur({root:["root"],paper:["paper"],list:["list"]},FW,t)},WW=Rt(NW,{shouldForwardProp:e=>na(e)||e==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(e,t)=>t.root})({}),GW=Rt(nM,{name:"MuiMenu",slot:"Paper",overridesResolver:(e,t)=>t.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),HW=Rt(AW,{name:"MuiMenu",slot:"List",overridesResolver:(e,t)=>t.list})({outline:0}),KW=te.forwardRef(function(t,n){var a,u;const f=$r({props:t,name:"MuiMenu"}),{autoFocus:o=!0,children:v,className:x,disableAutoFocusItem:E=!1,MenuListProps:T={},onClose:I,open:P,PaperProps:V={},PopoverClasses:N,transitionDuration:q="auto",TransitionProps:{onEntering:J}={},variant:U="selectedMenu",slots:F={},slotProps:R={}}=f,O=jt(f.TransitionProps,jW),Q=jt(f,UW),se=uh(),pe=se.direction==="rtl",_e=fe({},f,{autoFocus:o,disableAutoFocusItem:E,MenuListProps:T,onEntering:J,PaperProps:V,transitionDuration:q,TransitionProps:O,variant:U}),ze=qW(_e),he=o&&!E&&P,we=te.useRef(null),ie=(Oe,Je)=>{we.current&&we.current.adjustStyleForScrollbar(Oe,se),J&&J(Oe,Je)},ge=Oe=>{Oe.key==="Tab"&&(Oe.preventDefault(),I&&I(Oe,"tabKeyDown"))};let Ne=-1;te.Children.map(v,(Oe,Je)=>{te.isValidElement(Oe)&&(Oe.props.disabled||(U==="selectedMenu"&&Oe.props.selected||Ne===-1)&&(Ne=Je))});const qe=(a=F.paper)!=null?a:GW,Ce=(u=R.paper)!=null?u:V,ke=bs({elementType:F.root,externalSlotProps:R.root,ownerState:_e,className:[ze.root,x]}),Te=bs({elementType:qe,externalSlotProps:Ce,ownerState:_e,className:ze.paper});return ee.jsx(WW,fe({onClose:I,anchorOrigin:{vertical:"bottom",horizontal:pe?"right":"left"},transformOrigin:pe?$W:VW,slots:{paper:qe,root:F.root},slotProps:{root:ke,paper:Te},open:P,ref:n,transitionDuration:q,TransitionProps:fe({onEntering:ie},O),ownerState:_e},Q,{classes:N,children:ee.jsx(HW,fe({onKeyDown:ge,actions:we,autoFocus:o&&(Ne===-1||E),autoFocusItem:he,variant:U},T,{className:$t(ze.list,T.className),children:v}))}))}),ZW=KW;function XW(e){return Br("MuiMenuItem",e)}const YW=kr("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),wd=YW,JW=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],QW=(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.divider&&t.divider,!n.disableGutters&&t.gutters]},eG=e=>{const{disabled:t,dense:n,divider:a,disableGutters:u,selected:f,classes:o}=e,x=Ur({root:["root",n&&"dense",t&&"disabled",!u&&"gutters",a&&"divider",f&&"selected"]},XW,o);return fe({},o,x)},tG=Rt(uc,{shouldForwardProp:e=>na(e)||e==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:QW})(({theme:e,ownerState:t})=>fe({},e.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${wd.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:mi(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${wd.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:mi(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${wd.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:mi(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:mi(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${wd.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${wd.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${BC.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${BC.inset}`]:{marginLeft:52},[`& .${zg.root}`]:{marginTop:0,marginBottom:0},[`& .${zg.inset}`]:{paddingLeft:36},[`& .${jC.root}`]:{minWidth:36}},!t.dense&&{[e.breakpoints.up("sm")]:{minHeight:"auto"}},t.dense&&fe({minHeight:32,paddingTop:4,paddingBottom:4},e.typography.body2,{[`& .${jC.root} svg`]:{fontSize:"1.25rem"}}))),rG=te.forwardRef(function(t,n){const a=$r({props:t,name:"MuiMenuItem"}),{autoFocus:u=!1,component:f="li",dense:o=!1,divider:v=!1,disableGutters:x=!1,focusVisibleClassName:E,role:T="menuitem",tabIndex:I,className:P}=a,V=jt(a,JW),N=te.useContext(xs),q=te.useMemo(()=>({dense:o||N.dense||!1,disableGutters:x}),[N.dense,o,x]),J=te.useRef(null);Fa(()=>{u&&J.current&&J.current.focus()},[u]);const U=fe({},a,{dense:q.dense,divider:v,disableGutters:x}),F=eG(a),R=qi(J,n);let O;return a.disabled||(O=I!==void 0?I:-1),ee.jsx(xs.Provider,{value:q,children:ee.jsx(tG,fe({ref:R,role:T,tabIndex:O,component:f,focusVisibleClassName:$t(F.focusVisible,E),className:$t(F.root,P)},V,{ownerState:U,classes:F}))})}),nh=rG;function nG(e){return Br("MuiNativeSelect",e)}const iG=kr("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),sw=iG,oG=["className","disabled","error","IconComponent","inputRef","variant"],aG=e=>{const{classes:t,variant:n,disabled:a,multiple:u,open:f,error:o}=e,v={select:["select",n,a&&"disabled",u&&"multiple",o&&"error"],icon:["icon",`icon${Qt(n)}`,f&&"iconOpen",a&&"disabled"]};return Ur(v,nG,t)},iM=({ownerState:e,theme:t})=>fe({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":fe({},t.vars?{backgroundColor:`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.05)`}:{backgroundColor:t.palette.mode==="light"?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},[`&.${sw.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(t.vars||t).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},e.variant==="filled"&&{"&&&":{paddingRight:32}},e.variant==="outlined"&&{borderRadius:(t.vars||t).shape.borderRadius,"&:focus":{borderRadius:(t.vars||t).shape.borderRadius},"&&&":{paddingRight:32}}),sG=Rt("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:na,overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.select,t[n.variant],n.error&&t.error,{[`&.${sw.multiple}`]:t.multiple}]}})(iM),oM=({ownerState:e,theme:t})=>fe({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(t.vars||t).palette.action.active,[`&.${sw.disabled}`]:{color:(t.vars||t).palette.action.disabled}},e.open&&{transform:"rotate(180deg)"},e.variant==="filled"&&{right:7},e.variant==="outlined"&&{right:7}),lG=Rt("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${Qt(n.variant)}`],n.open&&t.iconOpen]}})(oM),uG=te.forwardRef(function(t,n){const{className:a,disabled:u,error:f,IconComponent:o,inputRef:v,variant:x="standard"}=t,E=jt(t,oG),T=fe({},t,{disabled:u,variant:x,error:f}),I=aG(T);return ee.jsxs(te.Fragment,{children:[ee.jsx(sG,fe({ownerState:T,className:$t(I.select,a),disabled:u,ref:v||n},E)),t.multiple?null:ee.jsx(lG,{as:o,ownerState:T,className:I.icon})]})}),cG=uG;var WC;const pG=["children","classes","className","label","notched"],hG=Rt("fieldset",{shouldForwardProp:na})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),dG=Rt("legend",{shouldForwardProp:na})(({ownerState:e,theme:t})=>fe({float:"unset",width:"auto",overflow:"hidden"},!e.withLabel&&{padding:0,lineHeight:"11px",transition:t.transitions.create("width",{duration:150,easing:t.transitions.easing.easeOut})},e.withLabel&&fe({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:t.transitions.create("max-width",{duration:50,easing:t.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},e.notched&&{maxWidth:"100%",transition:t.transitions.create("max-width",{duration:100,easing:t.transitions.easing.easeOut,delay:50})})));function fG(e){const{className:t,label:n,notched:a}=e,u=jt(e,pG),f=n!=null&&n!=="",o=fe({},e,{notched:a,withLabel:f});return ee.jsx(hG,fe({"aria-hidden":!0,className:t,ownerState:o},u,{children:ee.jsx(dG,{ownerState:o,children:f?ee.jsx("span",{children:n}):WC||(WC=ee.jsx("span",{className:"notranslate",children:"​"}))})}))}const mG=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],yG=e=>{const{classes:t}=e,a=Ur({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},X9,t);return fe({},t,a)},gG=Rt(Gv,{shouldForwardProp:e=>na(e)||e==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:qv})(({theme:e,ownerState:t})=>{const n=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return fe({position:"relative",borderRadius:(e.vars||e).shape.borderRadius,[`&:hover .${Rl.notchedOutline}`]:{borderColor:(e.vars||e).palette.text.primary},"@media (hover: none)":{[`&:hover .${Rl.notchedOutline}`]:{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:n}},[`&.${Rl.focused} .${Rl.notchedOutline}`]:{borderColor:(e.vars||e).palette[t.color].main,borderWidth:2},[`&.${Rl.error} .${Rl.notchedOutline}`]:{borderColor:(e.vars||e).palette.error.main},[`&.${Rl.disabled} .${Rl.notchedOutline}`]:{borderColor:(e.vars||e).palette.action.disabled}},t.startAdornment&&{paddingLeft:14},t.endAdornment&&{paddingRight:14},t.multiline&&fe({padding:"16.5px 14px"},t.size==="small"&&{padding:"8.5px 14px"}))}),vG=Rt(fG,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(e,t)=>t.notchedOutline})(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:t}}),_G=Rt(Hv,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:Wv})(({theme:e,ownerState:t})=>fe({padding:"16.5px 14px"},!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},e.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},t.size==="small"&&{padding:"8.5px 14px"},t.multiline&&{padding:0},t.startAdornment&&{paddingLeft:0},t.endAdornment&&{paddingRight:0})),aM=te.forwardRef(function(t,n){var a,u,f,o,v;const x=$r({props:t,name:"MuiOutlinedInput"}),{components:E={},fullWidth:T=!1,inputComponent:I="input",label:P,multiline:V=!1,notched:N,slots:q={},type:J="text"}=x,U=jt(x,mG),F=yG(x),R=ph(),O=ch({props:x,muiFormControl:R,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),Q=fe({},x,{color:O.color||"primary",disabled:O.disabled,error:O.error,focused:O.focused,formControl:R,fullWidth:T,hiddenLabel:O.hiddenLabel,multiline:V,size:O.size,type:J}),se=(a=(u=q.root)!=null?u:E.Root)!=null?a:gG,pe=(f=(o=q.input)!=null?o:E.Input)!=null?f:_G;return ee.jsx(iw,fe({slots:{root:se,input:pe},renderSuffix:_e=>ee.jsx(vG,{ownerState:Q,className:F.notchedOutline,label:P!=null&&P!==""&&O.required?v||(v=ee.jsxs(te.Fragment,{children:[P," ","*"]})):P,notched:typeof N<"u"?N:!!(_e.startAdornment||_e.filled||_e.focused)}),fullWidth:T,inputComponent:I,multiline:V,ref:n,type:J},U,{classes:fe({},F,{notchedOutline:null})}))});aM.muiName="Input";const sM=aM;function xG(e){return Br("MuiSelect",e)}const bG=kr("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),Sd=bG;var GC;const wG=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],SG=Rt("div",{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`&.${Sd.select}`]:t.select},{[`&.${Sd.select}`]:t[n.variant]},{[`&.${Sd.error}`]:t.error},{[`&.${Sd.multiple}`]:t.multiple}]}})(iM,{[`&.${Sd.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),EG=Rt("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${Qt(n.variant)}`],n.open&&t.iconOpen]}})(oM),CG=Rt("input",{shouldForwardProp:e=>dV(e)&&e!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(e,t)=>t.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function HC(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}function kG(e){return e==null||typeof e=="string"&&!e.trim()}const TG=e=>{const{classes:t,variant:n,disabled:a,multiple:u,open:f,error:o}=e,v={select:["select",n,a&&"disabled",u&&"multiple",o&&"error"],icon:["icon",`icon${Qt(n)}`,f&&"iconOpen",a&&"disabled"],nativeInput:["nativeInput"]};return Ur(v,xG,t)},IG=te.forwardRef(function(t,n){var a;const{"aria-describedby":u,"aria-label":f,autoFocus:o,autoWidth:v,children:x,className:E,defaultOpen:T,defaultValue:I,disabled:P,displayEmpty:V,error:N=!1,IconComponent:q,inputRef:J,labelId:U,MenuProps:F={},multiple:R,name:O,onBlur:Q,onChange:se,onClose:pe,onFocus:_e,onOpen:ze,open:he,readOnly:we,renderValue:ie,SelectDisplayProps:ge={},tabIndex:Ne,value:qe,variant:Ce="standard"}=t,ke=jt(t,wG),[Te,Oe]=pC({controlled:qe,default:I,name:"Select"}),[Je,$e]=pC({controlled:he,default:T,name:"Select"}),et=te.useRef(null),Wt=te.useRef(null),[Re,He]=te.useState(null),{current:Zt}=te.useRef(he!=null),[Pt,Gt]=te.useState(),zt=qi(n,J),nr=te.useCallback(Bt=>{Wt.current=Bt,Bt&&He(Bt)},[]),Kt=Re==null?void 0:Re.parentNode;te.useImperativeHandle(zt,()=>({focus:()=>{Wt.current.focus()},node:et.current,value:Te}),[Te]),te.useEffect(()=>{T&&Je&&Re&&!Zt&&(Gt(v?null:Kt.clientWidth),Wt.current.focus())},[Re,v]),te.useEffect(()=>{o&&Wt.current.focus()},[o]),te.useEffect(()=>{if(!U)return;const Bt=Lo(Wt.current).getElementById(U);if(Bt){const br=()=>{getSelection().isCollapsed&&Wt.current.focus()};return Bt.addEventListener("click",br),()=>{Bt.removeEventListener("click",br)}}},[U]);const Yt=(Bt,br)=>{Bt?ze&&ze(br):pe&&pe(br),Zt||(Gt(v?null:Kt.clientWidth),$e(Bt))},st=Bt=>{Bt.button===0&&(Bt.preventDefault(),Wt.current.focus(),Yt(!0,Bt))},Lt=Bt=>{Yt(!1,Bt)},er=te.Children.toArray(x),Mr=Bt=>{const br=er.find(ct=>ct.props.value===Bt.target.value);br!==void 0&&(Oe(br.props.value),se&&se(Bt,br))},Nr=Bt=>br=>{let ct;if(br.currentTarget.hasAttribute("tabindex")){if(R){ct=Array.isArray(Te)?Te.slice():[];const At=Te.indexOf(Bt.props.value);At===-1?ct.push(Bt.props.value):ct.splice(At,1)}else ct=Bt.props.value;if(Bt.props.onClick&&Bt.props.onClick(br),Te!==ct&&(Oe(ct),se)){const At=br.nativeEvent||br,yr=new At.constructor(At.type,At);Object.defineProperty(yr,"target",{writable:!0,value:{value:ct,name:O}}),se(yr,Bt)}R||Yt(!1,br)}},tr=Bt=>{we||[" ","ArrowUp","ArrowDown","Enter"].indexOf(Bt.key)!==-1&&(Bt.preventDefault(),Yt(!0,Bt))},Vr=Re!==null&&Je,zr=Bt=>{!Vr&&Q&&(Object.defineProperty(Bt,"target",{writable:!0,value:{value:Te,name:O}}),Q(Bt))};delete ke["aria-invalid"];let Sr,on;const Ar=[];let lr=!1;(Mg({value:Te})||V)&&(ie?Sr=ie(Te):lr=!0);const Xr=er.map(Bt=>{if(!te.isValidElement(Bt))return null;let br;if(R){if(!Array.isArray(Te))throw new Error(eu(2));br=Te.some(ct=>HC(ct,Bt.props.value)),br&&lr&&Ar.push(Bt.props.children)}else br=HC(Te,Bt.props.value),br&&lr&&(on=Bt.props.children);return te.cloneElement(Bt,{"aria-selected":br?"true":"false",onClick:Nr(Bt),onKeyUp:ct=>{ct.key===" "&&ct.preventDefault(),Bt.props.onKeyUp&&Bt.props.onKeyUp(ct)},role:"option",selected:br,value:void 0,"data-value":Bt.props.value})});lr&&(R?Ar.length===0?Sr=null:Sr=Ar.reduce((Bt,br,ct)=>(Bt.push(br),ct<Ar.length-1&&Bt.push(", "),Bt),[]):Sr=on);let Sn=Pt;!v&&Zt&&Re&&(Sn=Kt.clientWidth);let li;typeof Ne<"u"?li=Ne:li=P?null:0;const hr=ge.id||(O?`mui-component-select-${O}`:void 0),Dt=fe({},t,{variant:Ce,value:Te,open:Vr,error:N}),Wn=TG(Dt),Bn=fe({},F.PaperProps,(a=F.slotProps)==null?void 0:a.paper),Wi=Vb();return ee.jsxs(te.Fragment,{children:[ee.jsx(SG,fe({ref:nr,tabIndex:li,role:"combobox","aria-controls":Wi,"aria-disabled":P?"true":void 0,"aria-expanded":Vr?"true":"false","aria-haspopup":"listbox","aria-label":f,"aria-labelledby":[U,hr].filter(Boolean).join(" ")||void 0,"aria-describedby":u,onKeyDown:tr,onMouseDown:P||we?null:st,onBlur:zr,onFocus:_e},ge,{ownerState:Dt,className:$t(ge.className,Wn.select,E),id:hr,children:kG(Sr)?GC||(GC=ee.jsx("span",{className:"notranslate",children:"​"})):Sr})),ee.jsx(CG,fe({"aria-invalid":N,value:Array.isArray(Te)?Te.join(","):Te,name:O,ref:et,"aria-hidden":!0,onChange:Mr,tabIndex:-1,disabled:P,className:Wn.nativeInput,autoFocus:o,ownerState:Dt},ke)),ee.jsx(EG,{as:q,className:Wn.icon,ownerState:Dt}),ee.jsx(ZW,fe({id:`menu-${O||""}`,anchorEl:Kt,open:Vr,onClose:Lt,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},F,{MenuListProps:fe({"aria-labelledby":U,role:"listbox","aria-multiselectable":R?"true":void 0,disableListWrap:!0,id:Wi},F.MenuListProps),slotProps:fe({},F.slotProps,{paper:fe({},Bn,{style:fe({minWidth:Sn},Bn!=null?Bn.style:null)})}),children:Xr}))]})}),PG=IG,AG=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],MG=["root"],zG=e=>{const{classes:t}=e;return t},lw={name:"MuiSelect",overridesResolver:(e,t)=>t.root,shouldForwardProp:e=>na(e)&&e!=="variant",slot:"Root"},RG=Rt(QA,lw)(""),LG=Rt(sM,lw)(""),DG=Rt(ZA,lw)(""),lM=te.forwardRef(function(t,n){const a=$r({name:"MuiSelect",props:t}),{autoWidth:u=!1,children:f,classes:o={},className:v,defaultOpen:x=!1,displayEmpty:E=!1,IconComponent:T=e7,id:I,input:P,inputProps:V,label:N,labelId:q,MenuProps:J,multiple:U=!1,native:F=!1,onClose:R,onOpen:O,open:Q,renderValue:se,SelectDisplayProps:pe,variant:_e="outlined"}=a,ze=jt(a,AG),he=F?cG:PG,we=ph(),ie=ch({props:a,muiFormControl:we,states:["variant","error"]}),ge=ie.variant||_e,Ne=fe({},a,{variant:ge,classes:o}),qe=zG(Ne),Ce=jt(qe,MG),ke=P||{standard:ee.jsx(RG,{ownerState:Ne}),outlined:ee.jsx(LG,{label:N,ownerState:Ne}),filled:ee.jsx(DG,{ownerState:Ne})}[ge],Te=qi(n,ke.ref);return ee.jsx(te.Fragment,{children:te.cloneElement(ke,fe({inputComponent:he,inputProps:fe({children:f,error:ie.error,IconComponent:T,variant:ge,type:void 0,multiple:U},F?{id:I}:{autoWidth:u,defaultOpen:x,displayEmpty:E,labelId:q,MenuProps:J,onClose:R,onOpen:O,open:Q,renderValue:se,SelectDisplayProps:fe({id:I},pe)},V,{classes:V?Ro(Ce,V.classes):Ce},P?P.props.inputProps:{})},(U&&F||E)&&ge==="outlined"?{notched:!0}:{},{ref:Te,className:$t(ke.props.className,v,qe.root)},!P&&{variant:ge},ze))})});lM.muiName="Select";const Zv=lM;function OG(e){return Br("MuiTab",e)}const BG=kr("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper"]),Fu=BG,NG=["className","disabled","disableFocusRipple","fullWidth","icon","iconPosition","indicator","label","onChange","onClick","onFocus","selected","selectionFollowsFocus","textColor","value","wrapped"],FG=e=>{const{classes:t,textColor:n,fullWidth:a,wrapped:u,icon:f,label:o,selected:v,disabled:x}=e,E={root:["root",f&&o&&"labelIcon",`textColor${Qt(n)}`,a&&"fullWidth",u&&"wrapped",v&&"selected",x&&"disabled"],iconWrapper:["iconWrapper"]};return Ur(E,OG,t)},jG=Rt(uc,{name:"MuiTab",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.label&&n.icon&&t.labelIcon,t[`textColor${Qt(n.textColor)}`],n.fullWidth&&t.fullWidth,n.wrapped&&t.wrapped]}})(({theme:e,ownerState:t})=>fe({},e.typography.button,{maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center"},t.label&&{flexDirection:t.iconPosition==="top"||t.iconPosition==="bottom"?"column":"row"},{lineHeight:1.25},t.icon&&t.label&&{minHeight:72,paddingTop:9,paddingBottom:9,[`& > .${Fu.iconWrapper}`]:fe({},t.iconPosition==="top"&&{marginBottom:6},t.iconPosition==="bottom"&&{marginTop:6},t.iconPosition==="start"&&{marginRight:e.spacing(1)},t.iconPosition==="end"&&{marginLeft:e.spacing(1)})},t.textColor==="inherit"&&{color:"inherit",opacity:.6,[`&.${Fu.selected}`]:{opacity:1},[`&.${Fu.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},t.textColor==="primary"&&{color:(e.vars||e).palette.text.secondary,[`&.${Fu.selected}`]:{color:(e.vars||e).palette.primary.main},[`&.${Fu.disabled}`]:{color:(e.vars||e).palette.text.disabled}},t.textColor==="secondary"&&{color:(e.vars||e).palette.text.secondary,[`&.${Fu.selected}`]:{color:(e.vars||e).palette.secondary.main},[`&.${Fu.disabled}`]:{color:(e.vars||e).palette.text.disabled}},t.fullWidth&&{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"},t.wrapped&&{fontSize:e.typography.pxToRem(12)})),UG=te.forwardRef(function(t,n){const a=$r({props:t,name:"MuiTab"}),{className:u,disabled:f=!1,disableFocusRipple:o=!1,fullWidth:v,icon:x,iconPosition:E="top",indicator:T,label:I,onChange:P,onClick:V,onFocus:N,selected:q,selectionFollowsFocus:J,textColor:U="inherit",value:F,wrapped:R=!1}=a,O=jt(a,NG),Q=fe({},a,{disabled:f,disableFocusRipple:o,selected:q,icon:!!x,iconPosition:E,label:!!I,fullWidth:v,textColor:U,wrapped:R}),se=FG(Q),pe=x&&I&&te.isValidElement(x)?te.cloneElement(x,{className:$t(se.iconWrapper,x.props.className)}):x,_e=he=>{!q&&P&&P(he,F),V&&V(he)},ze=he=>{J&&!q&&P&&P(he,F),N&&N(he)};return ee.jsxs(jG,fe({focusRipple:!o,className:$t(se.root,u),ref:n,role:"tab","aria-selected":q,disabled:f,onClick:_e,onFocus:ze,ownerState:Q,tabIndex:q?0:-1},O,{children:[E==="top"||E==="start"?ee.jsxs(te.Fragment,{children:[pe,I]}):ee.jsxs(te.Fragment,{children:[I,pe]}),T]}))}),Zl=UG,$G=Yb(ee.jsx("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft"),VG=Yb(ee.jsx("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight");function qG(e){return(1+Math.sin(Math.PI*e-Math.PI/2))/2}function WG(e,t,n,a={},u=()=>{}){const{ease:f=qG,duration:o=300}=a;let v=null;const x=t[e];let E=!1;const T=()=>{E=!0},I=P=>{if(E){u(new Error("Animation cancelled"));return}v===null&&(v=P);const V=Math.min(1,(P-v)/o);if(t[e]=f(V)*(n-x)+x,V>=1){requestAnimationFrame(()=>{u(null)});return}requestAnimationFrame(I)};return x===n?(u(new Error("Element already at target position")),T):(requestAnimationFrame(I),T)}const GG=["onChange"],HG={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};function KG(e){const{onChange:t}=e,n=jt(e,GG),a=te.useRef(),u=te.useRef(null),f=()=>{a.current=u.current.offsetHeight-u.current.clientHeight};return Fa(()=>{const o=_v(()=>{const x=a.current;f(),x!==a.current&&t(a.current)}),v=ul(u.current);return v.addEventListener("resize",o),()=>{o.clear(),v.removeEventListener("resize",o)}},[t]),te.useEffect(()=>{f(),t(a.current)},[t]),ee.jsx("div",fe({style:HG,ref:u},n))}function ZG(e){return Br("MuiTabScrollButton",e)}const XG=kr("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),YG=XG,JG=["className","slots","slotProps","direction","orientation","disabled"],QG=e=>{const{classes:t,orientation:n,disabled:a}=e;return Ur({root:["root",n,a&&"disabled"]},ZG,t)},eH=Rt(uc,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.orientation&&t[n.orientation]]}})(({ownerState:e})=>fe({width:40,flexShrink:0,opacity:.8,[`&.${YG.disabled}`]:{opacity:0}},e.orientation==="vertical"&&{width:"100%",height:40,"& svg":{transform:`rotate(${e.isRtl?-90:90}deg)`}})),tH=te.forwardRef(function(t,n){var a,u;const f=$r({props:t,name:"MuiTabScrollButton"}),{className:o,slots:v={},slotProps:x={},direction:E}=f,T=jt(f,JG),P=uh().direction==="rtl",V=fe({isRtl:P},f),N=QG(V),q=(a=v.StartScrollButtonIcon)!=null?a:$G,J=(u=v.EndScrollButtonIcon)!=null?u:VG,U=bs({elementType:q,externalSlotProps:x.startScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:V}),F=bs({elementType:J,externalSlotProps:x.endScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:V});return ee.jsx(eH,fe({component:"div",className:$t(N.root,o),ref:n,role:null,ownerState:V,tabIndex:null},T,{children:E==="left"?ee.jsx(q,fe({},U)):ee.jsx(J,fe({},F))}))}),rH=tH;function nH(e){return Br("MuiTabs",e)}const iH=kr("MuiTabs",["root","vertical","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),Q_=iH,oH=["aria-label","aria-labelledby","action","centered","children","className","component","allowScrollButtonsMobile","indicatorColor","onChange","orientation","ScrollButtonComponent","scrollButtons","selectionFollowsFocus","slots","slotProps","TabIndicatorProps","TabScrollButtonProps","textColor","value","variant","visibleScrollbar"],KC=(e,t)=>e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:e.firstChild,ZC=(e,t)=>e===t?e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:e.lastChild,fy=(e,t,n)=>{let a=!1,u=n(e,t);for(;u;){if(u===e.firstChild){if(a)return;a=!0}const f=u.disabled||u.getAttribute("aria-disabled")==="true";if(!u.hasAttribute("tabindex")||f)u=n(e,u);else{u.focus();return}}},aH=e=>{const{vertical:t,fixed:n,hideScrollbar:a,scrollableX:u,scrollableY:f,centered:o,scrollButtonsHideMobile:v,classes:x}=e;return Ur({root:["root",t&&"vertical"],scroller:["scroller",n&&"fixed",a&&"hideScrollbar",u&&"scrollableX",f&&"scrollableY"],flexContainer:["flexContainer",t&&"flexContainerVertical",o&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",v&&"scrollButtonsHideMobile"],scrollableX:[u&&"scrollableX"],hideScrollbar:[a&&"hideScrollbar"]},nH,x)},sH=Rt("div",{name:"MuiTabs",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${Q_.scrollButtons}`]:t.scrollButtons},{[`& .${Q_.scrollButtons}`]:n.scrollButtonsHideMobile&&t.scrollButtonsHideMobile},t.root,n.vertical&&t.vertical]}})(({ownerState:e,theme:t})=>fe({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex"},e.vertical&&{flexDirection:"column"},e.scrollButtonsHideMobile&&{[`& .${Q_.scrollButtons}`]:{[t.breakpoints.down("sm")]:{display:"none"}}})),lH=Rt("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.scroller,n.fixed&&t.fixed,n.hideScrollbar&&t.hideScrollbar,n.scrollableX&&t.scrollableX,n.scrollableY&&t.scrollableY]}})(({ownerState:e})=>fe({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap"},e.fixed&&{overflowX:"hidden",width:"100%"},e.hideScrollbar&&{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},e.scrollableX&&{overflowX:"auto",overflowY:"hidden"},e.scrollableY&&{overflowY:"auto",overflowX:"hidden"})),uH=Rt("div",{name:"MuiTabs",slot:"FlexContainer",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.flexContainer,n.vertical&&t.flexContainerVertical,n.centered&&t.centered]}})(({ownerState:e})=>fe({display:"flex"},e.vertical&&{flexDirection:"column"},e.centered&&{justifyContent:"center"})),cH=Rt("span",{name:"MuiTabs",slot:"Indicator",overridesResolver:(e,t)=>t.indicator})(({ownerState:e,theme:t})=>fe({position:"absolute",height:2,bottom:0,width:"100%",transition:t.transitions.create()},e.indicatorColor==="primary"&&{backgroundColor:(t.vars||t).palette.primary.main},e.indicatorColor==="secondary"&&{backgroundColor:(t.vars||t).palette.secondary.main},e.vertical&&{height:"100%",width:2,right:0})),pH=Rt(KG)({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),XC={},hH=te.forwardRef(function(t,n){const a=$r({props:t,name:"MuiTabs"}),u=uh(),f=u.direction==="rtl",{"aria-label":o,"aria-labelledby":v,action:x,centered:E=!1,children:T,className:I,component:P="div",allowScrollButtonsMobile:V=!1,indicatorColor:N="primary",onChange:q,orientation:J="horizontal",ScrollButtonComponent:U=rH,scrollButtons:F="auto",selectionFollowsFocus:R,slots:O={},slotProps:Q={},TabIndicatorProps:se={},TabScrollButtonProps:pe={},textColor:_e="primary",value:ze,variant:he="standard",visibleScrollbar:we=!1}=a,ie=jt(a,oH),ge=he==="scrollable",Ne=J==="vertical",qe=Ne?"scrollTop":"scrollLeft",Ce=Ne?"top":"left",ke=Ne?"bottom":"right",Te=Ne?"clientHeight":"clientWidth",Oe=Ne?"height":"width",Je=fe({},a,{component:P,allowScrollButtonsMobile:V,indicatorColor:N,orientation:J,vertical:Ne,scrollButtons:F,textColor:_e,variant:he,visibleScrollbar:we,fixed:!ge,hideScrollbar:ge&&!we,scrollableX:ge&&!Ne,scrollableY:ge&&Ne,centered:E&&!ge,scrollButtonsHideMobile:!V}),$e=aH(Je),et=bs({elementType:O.StartScrollButtonIcon,externalSlotProps:Q.startScrollButtonIcon,ownerState:Je}),Wt=bs({elementType:O.EndScrollButtonIcon,externalSlotProps:Q.endScrollButtonIcon,ownerState:Je}),[Re,He]=te.useState(!1),[Zt,Pt]=te.useState(XC),[Gt,zt]=te.useState(!1),[nr,Kt]=te.useState(!1),[Yt,st]=te.useState(!1),[Lt,er]=te.useState({overflow:"hidden",scrollbarWidth:0}),Mr=new Map,Nr=te.useRef(null),tr=te.useRef(null),Vr=()=>{const ct=Nr.current;let At;if(ct){const wr=ct.getBoundingClientRect();At={clientWidth:ct.clientWidth,scrollLeft:ct.scrollLeft,scrollTop:ct.scrollTop,scrollLeftNormalized:fU(ct,u.direction),scrollWidth:ct.scrollWidth,top:wr.top,bottom:wr.bottom,left:wr.left,right:wr.right}}let yr;if(ct&&ze!==!1){const wr=tr.current.children;if(wr.length>0){const rn=wr[Mr.get(ze)];yr=rn?rn.getBoundingClientRect():null}}return{tabsMeta:At,tabMeta:yr}},zr=rl(()=>{const{tabsMeta:ct,tabMeta:At}=Vr();let yr=0,wr;if(Ne)wr="top",At&&ct&&(yr=At.top-ct.top+ct.scrollTop);else if(wr=f?"right":"left",At&&ct){const Me=f?ct.scrollLeftNormalized+ct.clientWidth-ct.scrollWidth:ct.scrollLeft;yr=(f?-1:1)*(At[wr]-ct[wr]+Me)}const rn={[wr]:yr,[Oe]:At?At[Oe]:0};if(isNaN(Zt[wr])||isNaN(Zt[Oe]))Pt(rn);else{const Me=Math.abs(Zt[wr]-rn[wr]),rt=Math.abs(Zt[Oe]-rn[Oe]);(Me>=1||rt>=1)&&Pt(rn)}}),Sr=(ct,{animation:At=!0}={})=>{At?WG(qe,Nr.current,ct,{duration:u.transitions.duration.standard}):Nr.current[qe]=ct},on=ct=>{let At=Nr.current[qe];Ne?At+=ct:(At+=ct*(f?-1:1),At*=f&&EA()==="reverse"?-1:1),Sr(At)},Ar=()=>{const ct=Nr.current[Te];let At=0;const yr=Array.from(tr.current.children);for(let wr=0;wr<yr.length;wr+=1){const rn=yr[wr];if(At+rn[Te]>ct){wr===0&&(At=ct);break}At+=rn[Te]}return At},lr=()=>{on(-1*Ar())},Xr=()=>{on(Ar())},Sn=te.useCallback(ct=>{er({overflow:null,scrollbarWidth:ct})},[]),li=()=>{const ct={};ct.scrollbarSizeListener=ge?ee.jsx(pH,{onChange:Sn,className:$t($e.scrollableX,$e.hideScrollbar)}):null;const yr=ge&&(F==="auto"&&(Gt||nr)||F===!0);return ct.scrollButtonStart=yr?ee.jsx(U,fe({slots:{StartScrollButtonIcon:O.StartScrollButtonIcon},slotProps:{startScrollButtonIcon:et},orientation:J,direction:f?"right":"left",onClick:lr,disabled:!Gt},pe,{className:$t($e.scrollButtons,pe.className)})):null,ct.scrollButtonEnd=yr?ee.jsx(U,fe({slots:{EndScrollButtonIcon:O.EndScrollButtonIcon},slotProps:{endScrollButtonIcon:Wt},orientation:J,direction:f?"left":"right",onClick:Xr,disabled:!nr},pe,{className:$t($e.scrollButtons,pe.className)})):null,ct},hr=rl(ct=>{const{tabsMeta:At,tabMeta:yr}=Vr();if(!(!yr||!At)){if(yr[Ce]<At[Ce]){const wr=At[qe]+(yr[Ce]-At[Ce]);Sr(wr,{animation:ct})}else if(yr[ke]>At[ke]){const wr=At[qe]+(yr[ke]-At[ke]);Sr(wr,{animation:ct})}}}),Dt=rl(()=>{ge&&F!==!1&&st(!Yt)});te.useEffect(()=>{const ct=_v(()=>{Nr.current&&zr()});let At;const yr=Me=>{Me.forEach(rt=>{rt.removedNodes.forEach(bt=>{var ar;(ar=At)==null||ar.unobserve(bt)}),rt.addedNodes.forEach(bt=>{var ar;(ar=At)==null||ar.observe(bt)})}),ct(),Dt()},wr=ul(Nr.current);wr.addEventListener("resize",ct);let rn;return typeof ResizeObserver<"u"&&(At=new ResizeObserver(ct),Array.from(tr.current.children).forEach(Me=>{At.observe(Me)})),typeof MutationObserver<"u"&&(rn=new MutationObserver(yr),rn.observe(tr.current,{childList:!0})),()=>{var Me,rt;ct.clear(),wr.removeEventListener("resize",ct),(Me=rn)==null||Me.disconnect(),(rt=At)==null||rt.disconnect()}},[zr,Dt]),te.useEffect(()=>{const ct=Array.from(tr.current.children),At=ct.length;if(typeof IntersectionObserver<"u"&&At>0&&ge&&F!==!1){const yr=ct[0],wr=ct[At-1],rn={root:Nr.current,threshold:.99},Me=Rr=>{zt(!Rr[0].isIntersecting)},rt=new IntersectionObserver(Me,rn);rt.observe(yr);const bt=Rr=>{Kt(!Rr[0].isIntersecting)},ar=new IntersectionObserver(bt,rn);return ar.observe(wr),()=>{rt.disconnect(),ar.disconnect()}}},[ge,F,Yt,T==null?void 0:T.length]),te.useEffect(()=>{He(!0)},[]),te.useEffect(()=>{zr()}),te.useEffect(()=>{hr(XC!==Zt)},[hr,Zt]),te.useImperativeHandle(x,()=>({updateIndicator:zr,updateScrollButtons:Dt}),[zr,Dt]);const Wn=ee.jsx(cH,fe({},se,{className:$t($e.indicator,se.className),ownerState:Je,style:fe({},Zt,se.style)}));let Bn=0;const Wi=te.Children.map(T,ct=>{if(!te.isValidElement(ct))return null;const At=ct.props.value===void 0?Bn:ct.props.value;Mr.set(At,Bn);const yr=At===ze;return Bn+=1,te.cloneElement(ct,fe({fullWidth:he==="fullWidth",indicator:yr&&!Re&&Wn,selected:yr,selectionFollowsFocus:R,onChange:q,textColor:_e,value:At},Bn===1&&ze===!1&&!ct.props.tabIndex?{tabIndex:0}:{}))}),Bt=ct=>{const At=tr.current,yr=Lo(At).activeElement;if(yr.getAttribute("role")!=="tab")return;let rn=J==="horizontal"?"ArrowLeft":"ArrowUp",Me=J==="horizontal"?"ArrowRight":"ArrowDown";switch(J==="horizontal"&&f&&(rn="ArrowRight",Me="ArrowLeft"),ct.key){case rn:ct.preventDefault(),fy(At,yr,ZC);break;case Me:ct.preventDefault(),fy(At,yr,KC);break;case"Home":ct.preventDefault(),fy(At,null,KC);break;case"End":ct.preventDefault(),fy(At,null,ZC);break}},br=li();return ee.jsxs(sH,fe({className:$t($e.root,I),ownerState:Je,ref:n,as:P},ie,{children:[br.scrollButtonStart,br.scrollbarSizeListener,ee.jsxs(lH,{className:$e.scroller,ownerState:Je,style:{overflow:Lt.overflow,[Ne?`margin${f?"Left":"Right"}`:"marginBottom"]:we?void 0:-Lt.scrollbarWidth},ref:Nr,children:[ee.jsx(uH,{"aria-label":o,"aria-labelledby":v,"aria-orientation":J==="vertical"?"vertical":null,className:$e.flexContainer,ownerState:Je,onKeyDown:Bt,ref:tr,role:"tablist",children:Wi}),Re&&Wn]}),br.scrollButtonEnd]}))}),uw=hH;function dH(e){return Br("MuiTextField",e)}kr("MuiTextField",["root"]);const fH=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],mH={standard:QA,filled:ZA,outlined:sM},yH=e=>{const{classes:t}=e;return Ur({root:["root"]},dH,t)},gH=Rt(Kv,{name:"MuiTextField",slot:"Root",overridesResolver:(e,t)=>t.root})({}),vH=te.forwardRef(function(t,n){const a=$r({props:t,name:"MuiTextField"}),{autoComplete:u,autoFocus:f=!1,children:o,className:v,color:x="primary",defaultValue:E,disabled:T=!1,error:I=!1,FormHelperTextProps:P,fullWidth:V=!1,helperText:N,id:q,InputLabelProps:J,inputProps:U,InputProps:F,inputRef:R,label:O,maxRows:Q,minRows:se,multiline:pe=!1,name:_e,onBlur:ze,onChange:he,onFocus:we,placeholder:ie,required:ge=!1,rows:Ne,select:qe=!1,SelectProps:Ce,type:ke,value:Te,variant:Oe="outlined"}=a,Je=jt(a,fH),$e=fe({},a,{autoFocus:f,color:x,disabled:T,error:I,fullWidth:V,multiline:pe,required:ge,select:qe,variant:Oe}),et=yH($e),Wt={};Oe==="outlined"&&(J&&typeof J.shrink<"u"&&(Wt.notched=J.shrink),Wt.label=O),qe&&((!Ce||!Ce.native)&&(Wt.id=void 0),Wt["aria-describedby"]=void 0);const Re=Vb(q),He=N&&Re?`${Re}-helper-text`:void 0,Zt=O&&Re?`${Re}-label`:void 0,Pt=mH[Oe],Gt=ee.jsx(Pt,fe({"aria-describedby":He,autoComplete:u,autoFocus:f,defaultValue:E,fullWidth:V,multiline:pe,name:_e,rows:Ne,maxRows:Q,minRows:se,type:ke,value:Te,id:Re,inputRef:R,onBlur:ze,onChange:he,onFocus:we,placeholder:ie,inputProps:U},Wt,F));return ee.jsxs(gH,fe({className:$t(et.root,v),disabled:T,error:I,fullWidth:V,ref:n,required:ge,color:x,variant:Oe,ownerState:$e},Je,{children:[O!=null&&O!==""&&ee.jsx(ow,fe({htmlFor:Re,id:Zt},J,{children:O})),qe?ee.jsx(Zv,fe({"aria-describedby":He,id:Re,labelId:Zt,value:Te,input:Gt},Ce,{children:o})):Gt,N&&ee.jsx(xq,fe({id:He},P,{children:N}))]}))}),uM=vH,_H=({feederLayerCode:e,setFeederLayerCode:t})=>{const n=a=>{t(a.target.value)};return ee.jsx(Kv,{variant:"outlined",className:"custom-feeder-selection",children:ee.jsxs(Zv,{id:"feeder-selection",value:e,onChange:n,style:{width:"100%",height:"40px",fontSize:"12px",marginRight:"20px"},children:[ee.jsx(nh,{value:"PeakHourGasDemand_KW",children:"Peak Hour Gas Demand"}),ee.jsx(nh,{value:"PeakHourElectricityDemand_KW",children:"Peak Hour Electricity Demand"})]})})},xH=({propertiesNumber:e,handlePropertyChange:t,blockContainerVisible:n,mobilityContainerVisible:a})=>ee.jsx("div",{children:ee.jsxs("div",{className:"mobility-dropdown-container",children:[ee.jsxs("select",{className:"mobility-dropdown",value:e.mode,onChange:u=>t("mode",u.target.value),children:[ee.jsx("option",{value:"-1",children:"All Trip Modes"}),ee.jsx("option",{value:"0",children:"Walk"}),ee.jsx("option",{value:"1",children:"Bike"}),ee.jsx("option",{value:"2",children:"Car"}),n&&ee.jsx("option",{value:"3",children:"Public Transit"})]}),ee.jsx("select",{className:"mobility-dropdown",value:e.season,onChange:u=>t("season",u.target.value),children:ee.jsx("option",{value:"1",children:"Spring"})}),ee.jsxs("select",{className:"mobility-dropdown",value:e.timeOfDay,onChange:u=>t("timeOfDay",u.target.value),children:[ee.jsx("option",{value:"-1",children:"All Time Periods"}),ee.jsx("option",{value:"0",children:"Morning (12am - 6am)"}),ee.jsx("option",{value:"1",children:"Breakfast (6am - 11am)"}),ee.jsx("option",{value:"2",children:"Lunch (11am - 3pm)"}),ee.jsx("option",{value:"3",children:"Afternoon (3pm - 5pm)"}),ee.jsx("option",{value:"4",children:"Dinner (5pm - 9pm)"}),ee.jsx("option",{value:"5",children:"Night (9pm - 12am)"})]})]})}),bH=({propertiesNumber:e,handlePropertyChange:t})=>ee.jsxs("div",{className:"mobility-dropdown-container",children:[ee.jsxs("select",{className:"mobility-dropdown",value:e.weekday,onChange:n=>t("weekday",n.target.value),children:[ee.jsx("option",{value:"1",children:"Weekday"}),ee.jsx("option",{value:"0",children:"Weekend"})]}),ee.jsxs("select",{className:"mobility-dropdown-activity",value:e.fromActivity,onChange:n=>t("fromActivity",n.target.value),children:[ee.jsx("option",{value:"0",children:"Home"}),ee.jsx("option",{value:"1",children:"Work/School"}),ee.jsx("option",{value:"2",children:"Leisure"}),ee.jsx("option",{value:"-1",children:"All From-Activities"})]}),ee.jsxs("select",{className:"mobility-dropdown-activity",value:e.toActivity,onChange:n=>t("toActivity",n.target.value),children:[ee.jsx("option",{value:"0",children:"Home"}),ee.jsx("option",{value:"1",children:"Work/School"}),ee.jsx("option",{value:"2",children:"Leisure"}),ee.jsx("option",{value:"-1",children:"All To-Activities"})]})]}),wH=()=>{const[e,t]=te.useState(0),n=(a,u)=>{t(u)};return ee.jsxs(ho,{sx:{width:"100%"},children:[ee.jsxs(uw,{value:e,onChange:n,centered:!0,children:[ee.jsx(Zl,{label:"Weekday Trip Volume",sx:{textTransform:"none"}}),ee.jsx(Zl,{label:"Weekend Trip Volume",sx:{textTransform:"none"}})]}),ee.jsx("div",{role:"tabpanel",hidden:e!==0,children:ee.jsx(ho,{sx:{p:3},children:ee.jsx("div",{id:"graph-container-weekday",className:"graph-container-weekday"})})}),ee.jsx("div",{role:"tabpanel",hidden:e!==1,children:ee.jsx(ho,{sx:{p:3},children:ee.jsx("div",{id:"graph-container-weekend",className:"graph-container-weekend"})})})]})},SH=()=>{const[e,t]=te.useState(0),n=(a,u)=>{t(u)};return ee.jsxs(ho,{sx:{width:"100%",overflow:"hidden"},children:[" ",ee.jsxs(uw,{value:e,onChange:n,centered:!0,sx:{".MuiTabs-flexContainer":{paddingLeft:"30px"},".MuiTab-root":{textTransform:"none",marginRight:"8px"}},children:[ee.jsx(Zl,{label:"Energy Summary"}),ee.jsx(Zl,{label:"Energy End Use"}),ee.jsx(Zl,{label:"Energy Fuel Use"})]}),ee.jsx("div",{role:"tabpanel",hidden:e!==0,children:ee.jsx(ho,{sx:{p:3},children:ee.jsx("div",{id:"graph-container-energysummaryuse",className:"graph-container-energysummaryuse"})})}),ee.jsx("div",{role:"tabpanel",hidden:e!==1,children:ee.jsx(ho,{sx:{p:3},children:ee.jsx("div",{id:"graph-container-energyenduse",className:"graph-container-energyenduse"})})}),ee.jsx("div",{role:"tabpanel",hidden:e!==2,children:ee.jsx(ho,{sx:{p:3},children:ee.jsx("div",{id:"graph-container-energyfueluse",className:"graph-container-energyfueluse"})})})]})},EH=()=>{const[e,t]=te.useState(0),n=(a,u)=>{t(u)};return ee.jsxs(ho,{sx:{width:"100%"},children:[ee.jsxs(uw,{value:e,onChange:n,centered:!0,children:[ee.jsx(Zl,{label:"Winter Energy Load",sx:{textTransform:"none"}}),ee.jsx(Zl,{label:"Summer Energy Load",sx:{textTransform:"none"}}),ee.jsx(Zl,{label:"Load Duration Curve",sx:{textTransform:"none"}})]}),ee.jsx("div",{role:"tabpanel",hidden:e!==0,children:ee.jsx(ho,{sx:{p:3},children:ee.jsx("div",{id:"graph-container-energyone",className:"graph-container-energyone"})})}),ee.jsx("div",{role:"tabpanel",hidden:e!==1,children:ee.jsx(ho,{sx:{p:3},children:ee.jsx("div",{id:"graph-container-energytwo",className:"graph-container-energytwo"})})}),ee.jsx("div",{role:"tabpanel",hidden:e!==2,children:ee.jsx(ho,{sx:{p:3},children:ee.jsx("div",{id:"graph-container-energythree",className:"graph-container-energythree"})})})]})},YC=eA().domain(["Heating","Cooling","Equipment","Lighting","HotWater","PV"]).range(["#cf5867","#6faadd","#959595","#f2e75c","#eec176","#9C27B0"]);function CH({data:e,colorScale:t,onBarDoubleClick:n}){const a=te.useRef();return te.useEffect(()=>{if(!a.current)return;const u=a.current;yg(u).selectAll("*").remove();const f={top:0,right:0,bottom:0,left:0},o=220-f.left-f.right,v=20-f.top-f.bottom,x=yg(u).append("svg").attr("width",o+f.left+f.right).attr("height",v+f.top+f.bottom).append("g").attr("transform",`translate(${f.left}, ${f.top})`),E=tA().domain([0,HB(e,I=>I.value)]).range([0,o]);let T=0;x.selectAll(".bar").data(e).enter().append("rect").attr("class","bar").attr("x",I=>{const P=T;return T+=E(I.value),P}).attr("y",0).attr("width",I=>E(I.value)).attr("height",v).attr("fill",I=>t(I.name)).on("dblclick",I=>n(I.name))},[e,t,n]),ee.jsx(ho,{ref:a})}function kH({colorScale:e}){const t=te.useRef();return te.useEffect(()=>{if(!t.current)return;const n=t.current;yg(n).selectAll("*").remove();const a=100,u=20,o=Math.ceil(e.domain().length/3)*u,v=yg(n).append("svg").attr("width","100%").attr("height",o).append("g");e.domain().forEach((x,E)=>{const T=Math.floor(E/3),I=E%3,P=v.append("g").attr("transform",`translate(${I*a}, ${T*u})`);P.append("rect").attr("x",40).attr("y",0).attr("width",10).attr("height",10).attr("fill",e(x)),P.append("text").attr("x",60).attr("y",10).style("font-size","10px").text(x)})},[e]),ee.jsx(ho,{ref:t})}function ex({mapRef:e,setBuildingDataUrl:t,setIthacaEnergyUrl:n,BUILDING_DATA_URL:a,BUILDING_DATA_URL_INITIAL:u,ITHACA_ENERGY_URL_INITIAL:f}){const[o,v]=te.useState([{id:1,name:"Baseline",data:[{name:"Heating",value:39973},{name:"Cooling",value:4630},{name:"Equipment",value:3372},{name:"Lighting",value:1810},{name:"HotWater",value:4900},{name:"PV",value:0}]},{id:2,name:"ResidentialElectrified",data:[{name:"Heating",value:32973},{name:"Cooling",value:4630},{name:"Equipment",value:3372},{name:"Lighting",value:1810},{name:"HotWater",value:4900},{name:"PV",value:0}]},{id:3,name:"CommercialElectrified",data:[{name:"Heating",value:22973},{name:"Cooling",value:4630},{name:"Equipment",value:3372},{name:"Lighting",value:1810},{name:"HotWater",value:4900},{name:"PV",value:0}]},{id:4,name:"FullElectrified",data:[{name:"Heating",value:15973},{name:"Cooling",value:4630},{name:"Equipment",value:3372},{name:"Lighting",value:1810},{name:"HotWater",value:4900},{name:"PV",value:0}]}]),[x,E]=te.useState(null),T=(N,q)=>{N.dataTransfer.setData("text/plain",q)},I=(N,q)=>{N.preventDefault();const J=parseInt(N.dataTransfer.getData("text/plain"),10),U=o.findIndex(Q=>Q.id===q),F=o.findIndex(Q=>Q.id===J),R=[...o],[O]=R.splice(F,1);R.splice(U,0,O),v(R)},P=N=>{N.preventDefault()},V=N=>{E(N);let q,J;switch(x){case"Baseline":q="./ScenarioData/Baseline_clean.geojson",J="./ScenarioData/Baseline_SiteSummary.geojson";break;case"Residential Electrified":q="./ScenarioData/ResidentialElectrified_clean.geojson",J="./ScenarioData/ResidentialElectrified_SiteSummary.geojson";break;case"Commercial Electrified":q="./ScenarioData/CommercialElectrified_clean.geojson",J="./ScenarioData/CommercialElectrified_SiteSummary.geojson";break;case"Full Electrified":q="./ScenarioData/FullElectrified_clean.geojson",J="./ScenarioData/FullElectrified_SiteSummary.geojson";break;default:q=u,J=f}q!==a&&(t(q),n(J));const U=e.current;U&&(U.getSource("ithaca-energy-Building").setData(q),U.getSource("ithaca-energy-Summary").setData(J))};return ee.jsxs(ho,{children:[ee.jsx(aw,{style:{padding:"12px",backgroundColor:"transparent",fontFamily:"Open Sans, sans-serif"},children:o.map(N=>ee.jsxs(tM,{draggable:!0,onDragStart:q=>T(q,N.id),onDragOver:P,onDrop:q=>I(q,N.id),onDoubleClick:()=>V(N.name),style:{margin:"8px 0",backgroundColor:x===N.name?"#E0E0E0":"#F5F5F5",borderRadius:"4px",border:"1px solid #E0E0E0",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px",height:"35px",cursor:"pointer"},disableGutters:!0,children:[ee.jsx(ho,{children:N.name.split(" ").map((q,J)=>ee.jsx(Ap,{variant:"body2",style:{fontSize:"12px"},children:q},J))}),ee.jsx(CH,{data:N.data,colorScale:YC})]},N.id))}),ee.jsx(kH,{colorScale:YC})]})}const TH=({onDataImport:e,addFile:t,mapRef:n,setTitle:a,setDisplayingLayers:u,setHomeContainerVisible:f,setGeneralContainerVisible:o})=>{const[v,x]=te.useState(!1),[E,T]=te.useState(null),[I,P]=te.useState(""),[V,N]=te.useState(""),[q,J]=te.useState(null),U=te.useRef(null),F=()=>x(!0),R=()=>x(!1),O=_e=>P(_e.target.value),Q=_e=>N(_e.target.value),se=_e=>{const ze=_e.target.files[0];if(!ze)return;T(ze),P(ze.name);const he=new FileReader;he.onload=we=>{J(we.target.result);const ie={file:ze,name:I||ze.name,content:we.target.result};t(ie)},he.readAsText(ze)},pe=()=>{if(!E){alert("Please select a file first!");return}if(!V){alert("Please select a data type!");return}try{const _e=URL.createObjectURL(E);e(_e);const ze=n.current,he=JSON.parse(q);he.features&&he.features.length>0&&ze.flyTo({center:[-76.5087,42.444],zoom:13}),u(["energy-Building","energy-Building-highlighted","energy-Building-other"]),["energy-Building","energy-Building-highlighted","energy-Building-other"].forEach(we=>{ze.setLayoutProperty(we,"visibility","visible")}),a("UBEM Viewer / Ithaca"),f(!1),o(!0)}catch(_e){console.error("Error processing the file",_e)}R()};return ee.jsxs("div",{children:[ee.jsx(jl,{variant:"contained",color:"primary",onClick:F,sx:{backgroundColor:"gray",position:"absolute",top:"35%",left:"46%",fontSize:"1.25rem",padding:"4px 12px"},children:"+ Add Data"}),ee.jsxs(qA,{open:v,onClose:R,children:[ee.jsx(HA,{children:"Upload your GeoJSON file(s) Here."}),ee.jsxs(GA,{children:[ee.jsxs(jl,{variant:"outlined",component:"label",sx:{marginTop:2},children:["Choose File",ee.jsx("input",{type:"file",hidden:!0,accept:".geojson",onChange:se,ref:U})]}),E&&ee.jsxs(ee.Fragment,{children:[ee.jsx(uM,{fullWidth:!0,label:"File Name",variant:"outlined",value:I,onChange:O,margin:"normal"}),ee.jsxs(Kv,{fullWidth:!0,margin:"normal",children:[ee.jsx(ow,{children:"Data Type"}),ee.jsxs(Zv,{value:V,label:"Data Type",onChange:Q,children:[ee.jsx(nh,{value:"mobility",children:"Mobility"}),ee.jsx(nh,{value:"energy",children:"Energy"})]})]})]})]}),ee.jsxs(WA,{children:[ee.jsx(jl,{onClick:R,children:"Cancel"}),ee.jsx(jl,{onClick:pe,children:"View"})]})]})]})},IH=({selectedFile:e,setSelectedFile:t,onDataImport:n,files:a,setFiles:u,deleteFile:f})=>{const[o,v]=te.useState(!1),[x,E]=te.useState(""),T=te.useRef(null),I=()=>v(!0),P=()=>v(!1),V=R=>E(R.target.value),N=R=>{const O=R.target.value;t({...e,name:O});const Q=a.map(se=>se===e?{...se,name:O}:se);u(Q)},q=R=>{const O=R.target.files[0];if(!O)return;const Q={file:O,name:O.name,content:null},se=new FileReader;se.onload=pe=>{Q.content=pe.target.result,u(_e=>[..._e,Q])},se.readAsText(O)},J=()=>{if(!e){alert("Please select a file from the list!");return}if(!x){alert("Please select a data type!");return}const R=URL.createObjectURL(e.file);n(R),P()},U=R=>{t(R),n(R)},F=(R,O)=>{O.stopPropagation(),f(R),e&&a[R]===e&&t(null)};return ee.jsxs("div",{children:[ee.jsx(jl,{variant:"contained",color:"primary",onClick:I,sx:{backgroundColor:"gray",fontSize:"0.75rem",padding:"2px 5px"},children:"+ Manage Data"}),ee.jsxs(qA,{open:o,onClose:P,fullWidth:!0,maxWidth:"sm",children:[ee.jsx(HA,{children:"Manage your GeoJSON files"}),ee.jsxs(GA,{children:[ee.jsxs(jl,{variant:"outlined",component:"label",sx:{marginTop:2},children:["Add File",ee.jsx("input",{type:"file",hidden:!0,accept:".geojson",onChange:q,ref:T})]}),ee.jsx(aw,{children:a.map((R,O)=>ee.jsx(tM,{disablePadding:!0,secondaryAction:ee.jsx(c9,{edge:"end","aria-label":"delete",onClick:Q=>F(O,Q),children:ee.jsx(Oq,{children:"X"})}),children:ee.jsx(sW,{onClick:()=>U(R),selected:e===R,sx:{bgcolor:Q=>e===R?Q.palette.primary.main:"transparent"},children:ee.jsx(TW,{primary:R.name})})},O))}),e&&ee.jsxs(ee.Fragment,{children:[ee.jsx(uM,{fullWidth:!0,label:"File Name",variant:"outlined",value:e.name,onChange:N,margin:"normal"}),ee.jsxs(Kv,{fullWidth:!0,margin:"normal",children:[ee.jsx(ow,{children:"Data Type"}),ee.jsxs(Zv,{value:x,label:"Data Type",onChange:V,children:[ee.jsx(nh,{value:"mobility",children:"Mobility"}),ee.jsx(nh,{value:"energy",children:"Energy"})]})]})]})]}),ee.jsxs(WA,{children:[ee.jsx(jl,{onClick:P,children:"Cancel"}),ee.jsx(jl,{onClick:J,children:"View"})]})]})]})};Xs.accessToken="pk.eyJ1Ijoia3g2NCIsImEiOiJjbGkzd2E1dmsxMzNoM2twY2p2azF0bGVlIn0.t_v73kaAMUtoGBPESpw3uA";const PH="./Data/ithaca_mobility_summary.geojson",AH="./Data/ithaca_mobility_summary_point.geojson",my="./Data/ithaca_siteSummary_energy.geojson",yy="./Data/ithaca_energy_buildingData_1107.geojson",JC="./Data/ithaca_energy_feeder.geojson",QC="./Data/ithaca_trip_volume_by_streets.geojson",ek="./Data/ithaca_trip_volume_from_blocks.geojson",tk="./Data/mobility_metric_specification.json",rk="./Data/energy_metric_specification.json",MH="https://geotile.urbano.io/Ithaca_TripVolume/{z}/{x}/{y}.mvt";function zH(){var rn;const e=te.useRef(null),t=te.useRef(null),[n,a]=te.useState([0,398]),[u,f]=te.useState(yy),[o,v]=te.useState(my),[x,E]=te.useState(!0),T="mapbox://styles/kx64/cljdd8xr6003l01qkbxctho6q",[I,P]=te.useState("UBEM Viewer"),[V,N]=te.useState(""),[q,J]=te.useState(!0),[U,F]=te.useState(!1),[R,O]=te.useState(!1),[Q,se]=te.useState(!1),[pe,_e]=te.useState(!1),[ze,he]=te.useState(!1),[we,ie]=te.useState(!1),[ge,Ne]=te.useState(!1),[qe,Ce]=te.useState(!1);te.useState("weekday"),te.useState("enduse"),te.useState("winter");const[ke,Te]=te.useState([]);te.useState(!1);const[Oe,Je]=te.useState([]),[$e,et]=te.useState(null),Wt=Me=>{Je(rt=>[...rt,Me])},Re=Me=>{Je(rt=>rt.filter((bt,ar)=>ar!==Me))},He=te.useRef(new Set),[Zt,Pt]=te.useState(0),[Gt,zt]=te.useState("1_1_-1_-1_-1_-1"),[nr,Kt]=te.useState("Gas[kWh_m2][Yr]"),[Yt,st]=te.useState("PeakHourElectricityDemand_KW"),[Lt,er]=te.useState(12857),[Mr,Nr]=te.useState(1700),[tr,Vr]=te.useState(1e3),[zr,Sr]=te.useState(0),[on,Ar]=te.useState(53143),[lr,Xr]=te.useState(1),[Sn,li]=te.useState(1),[hr,Dt]=te.useState({season:1,mode:-1,weekday:1,timeOfDay:-1,fromActivity:-1,toActivity:-1}),[Wn,Bn]=te.useState("People/hr");te.useState(ke.length>0?(rn=F8.find(Me=>Me.id===ke[0]))==null?void 0:rn.label:"Dashboard Selector");const Wi=()=>{if(t.current){const Me=t.current;ke.forEach(rt=>{Me.setLayoutProperty(rt,"visibility","none")}),P("UBEM Viewer"),he(!1),O(!1),se(!1),_e(!1),ie(!1),F(!1),J(!0),j_(t,He),Pt(He.current.size),Me.flyTo({center:[-76.5087,42.4558],zoom:8})}},Bt=()=>{if(t.current){const Me=t.current;Me.flyTo({center:[-76.5087,42.444],zoom:13}),Te(["energy-Building","energy-Building-highlighted","energy-Building-other"]),ke.forEach(rt=>{Me.setLayoutProperty(rt,"visibility","visible")}),P("UBEM Viewer / Ithaca"),N("Ithaca /ˈɪθəkə/ is a city and the county seat of Tompkins County, New York, United States. Situated on the southern shore of Cayuga Lake in the Finger Lakes region of New York, Ithaca is the largest community in the Ithaca metropolitan statistical area. It is named after the Greek island of Ithaca."),J(!1),F(!0),O(!1),j_(t,He),Pt(He.current.size),popup.remove()}},br=(Me,rt)=>{Dt(bt=>({...bt,[Me]:parseInt(rt)}))},ct=()=>{const Me=`1_${hr.weekday}_${hr.mode}_${hr.timeOfDay}_${hr.fromActivity}_${hr.toActivity}`;zt(Me),console.log("the layer Code you selected is",Gt)};te.useEffect(()=>{const Me=rt=>{rt.key==="Escape"&&(j_(t,He),Pt(He.current.size),ke.includes("energy-Building")&&(generateEndUseBarGraph(He,t),generateFuelUseBarGraph(He,t)),ke.includes("energy-Feeder")&&(KE(He,t),ZE(He,t),XE(He,t)),ke.includes("mobility-Block-Detailed")&&($_(He,t),U_(He,t),V_(He,t),q_(He,t)),ke.includes("mobility-Street-Detailed")&&($_(He,t),U_(He,t),V_(He,t),q_(He,t)))};return document.addEventListener("keydown",Me),()=>{document.removeEventListener("keydown",Me)}},[]),te.useEffect(()=>{fetch(QC).then(Me=>Me.json()).then(Me=>{const rt=Me.features.map(re=>{var ye;return((ye=re.properties[Gt])==null?void 0:ye.replace(/,/g,""))||0});rt.sort((re,me)=>re-me);const bt=Math.floor(rt.length*.05),ar=Math.floor(rt.length*.95),Rr=rt[bt],Ht=rt[ar],L=Ht-Rr,j=Ht+1.5*L,W=rt.filter(re=>re<=j),X=Math.max(...W);er(X),ke.includes("mobility-Street-Detailed")&&Xr(X)}).catch(Me=>{console.error("Error loading GeoJSON data:",Me)})},[Gt]),te.useEffect(()=>{fetch(ek).then(Me=>Me.json()).then(Me=>{const rt=Me.features.map(re=>{var ye;return parseFloat((ye=re.properties[Gt])==null?void 0:ye.replace(/,/g,""))||0});rt.sort((re,me)=>re-me);const bt=Math.floor(rt.length*.05),ar=Math.floor(rt.length*.95),Rr=rt[bt],Ht=rt[ar],L=Ht-Rr,j=Ht+1.5*L,W=rt.filter(re=>re<=j),X=Math.max(...W);Nr(X),ke.includes("mobility-Block-Detailed")&&Xr(X)}).catch(Me=>{console.error("Error loading GeoJSON data:",Me)})},[Gt]),te.useEffect(()=>{fetch(u).then(Me=>Me.json()).then(Me=>{const rt=Me.features.map(me=>me.properties[nr]||0);rt.sort((me,ye)=>me-ye);const bt=Math.floor(rt.length*.2),ar=Math.floor(rt.length*.8),Rr=rt[bt],Ht=rt[ar],L=Ht-Rr,j=Ht+1.5*L,W=rt.filter(me=>me<=j),X=Math.max(...W),re=Math.min(...W);Vr(X),Sr(re),ke.includes("energy-Building")&&(Xr(X),li(re))}).catch(Me=>{console.error("Error loading GeoJSON data:",Me)})},[nr,u]),te.useEffect(()=>{fetch(JC).then(Me=>Me.json()).then(Me=>{const rt=Me.features.map(re=>parseFloat(String(re.properties[Yt]).replace(/,/g,""))||0);rt.sort((re,me)=>re-me);const bt=Math.floor(rt.length*.2),ar=Math.floor(rt.length*.8),Rr=rt[bt],Ht=rt[ar],L=Ht-Rr,j=Ht+1.5*L,W=rt.filter(re=>re<=j),X=Math.max(...W);Ar(X),ke.includes("energy-Feeder")&&Xr(X)}).catch(Me=>{console.error("Error loading GeoJSON data:",Me)})},[Yt]);const At=Me=>{const rt=[];let bt=9,ar=Go(Gt,bt);Me.includes("mobility-Street-Detailed")?(bt=Lt,ar=Go(Gt,bt)):Me.includes("mobility-Block-Detailed")?(bt=Mr,ar=Go(Gt,bt)):Me.includes("energy-Building")?(bt=tr,ar=Go(nr,bt)):Me.includes("energy-Feeder")&&(bt=on,ar=Go(Yt,bt)),rt.push(ee.jsx("div",{className:"legend-title",children:Wn},"legend-title")),rt.push(ee.jsxs("div",{className:"input-container",children:[" ",yr()]}));for(let Rr=ar.length-2;Rr>=2;Rr-=2){const Ht=parseFloat(ar[Rr]),L=ar[Rr+1];rt.push(ee.jsxs("div",{className:"legend-item",children:[ee.jsx("span",{className:"value-label",children:D8(Ht)}),ee.jsx("div",{className:"color-swatch",style:{backgroundColor:L}})]},Ht))}return rt},yr=()=>{if(ke.includes("mobility-Street-Detailed"))return ee.jsx("input",{id:"user-max-value",type:"number",value:parseInt(Lt),onChange:Me=>{const rt=parseInt(Me.target.value);er(rt)},onBlur:Me=>{Lt<10&&er(10),Me.target.value.trim()===""&&er(lr)},placeholder:"Enter Max Value",inputMode:"numeric"});if(ke.includes("mobility-Block-Detailed"))return ee.jsx("input",{id:"user-max-value",type:"number",value:parseInt(Mr),onChange:Me=>{const rt=parseInt(Me.target.value);Nr(rt)},onBlur:Me=>{Mr<10&&Nr(10),Me.target.value.trim()===""&&Nr(lr)},placeholder:"Enter Max Value",inputMode:"numeric"});if(ke.includes("energy-Building"))return ee.jsx("input",{id:"user-max-value",type:"number",value:parseInt(tr),onChange:Me=>{const rt=parseInt(Me.target.value);Vr(rt)},onBlur:Me=>{tr<10&&Vr(10),Me.target.value.trim()===""&&Vr(lr)},placeholder:"Enter Max Value",inputMode:"numeric"});if(ke.includes("energy-Feeder"))return ee.jsx("input",{id:"user-max-value",type:"number",value:parseInt(on),onChange:Me=>{const rt=parseInt(Me.target.value);Ar(rt)},onBlur:Me=>{on<10&&Ar(10),Me.target.value.trim()===""&&Ar(lr)},placeholder:"Enter Max Value",inputMode:"numeric"})};te.useEffect(()=>{if(!e.current)return;const Me=new Xs.Map({container:e.current,style:T,center:[-76.5087,42.4558],zoom:8.5,dragRotate:!1,accessToken:Xs.accessToken});return t.current=Me,()=>{Me&&Me.remove()}},[x]),te.useEffect(()=>{if(t.current){const Me=t.current,rt=new A4({accessToken:Xs.accessToken,flyTo:{bearing:0,speed:2,curve:1,easing:function(bt){return bt}},mapboxgl:Xs});Me.addControl(rt)}},[]),te.useEffect(()=>{t.current&&t.current.addControl(new Xs.NavigationControl)},[]),te.useEffect(()=>{if(t.current){const Me=t.current,rt=Me.getCanvasContainer();let bt,ar,Rr;Me.on("load",function(){const Ht=Me.getStyle().layers;let L;for(const ne of Ht)if(ne.type==="symbol"){L=ne.id;break}Me.addSource("mobility-Street-mvt",{type:"vector",tiles:[MH]}),Me.addSource("mobility-Street-geojson",{type:"geojson",data:QC}),Me.addSource("mobility-Block-geojson",{type:"geojson",data:ek}),Me.addSource("mobility-Ithaca",{type:"geojson",data:PH}),Me.addSource("mobility-Ithaca-dot",{type:"geojson",data:AH}),Me.addLayer({id:"mobility-Block-Detailed",type:"fill",source:"mobility-Block-geojson",paint:{"fill-outline-color":"#ECECEC","fill-color":Go(Gt,Mr),"fill-opacity":.75},layout:{visibility:"none"}},L),Me.addLayer({id:"mobility-Block-Detailed-other",type:"fill",source:"mobility-Block-geojson",paint:{"fill-opacity":0},layout:{visibility:"none"}},L),Me.addLayer({id:"mobility-Block-Detailed-highlighted",type:"fill",source:"mobility-Block-geojson",paint:{"fill-outline-color":"#ffffff","fill-color":"#E8E8E8","fill-opacity":.99},filter:["in","object_id",""],layout:{visibility:"none"}},L),Me.addLayer({id:"mobility-Street-Detailed",type:"line",source:"mobility-Street-geojson",paint:{"line-color":Go(Gt,Lt),"line-width":["interpolate",["exponential",1],["to-number",["get",Gt]],0,1,parseFloat(Lt),5]},layout:{visibility:"none"}},L),Me.addLayer({id:"mobility-Street-Detailed-other",type:"line",source:"mobility-Street-geojson",paint:{"line-color":"#f7f7f7","line-width":0},layout:{visibility:"none"}},L),Me.addLayer({id:"mobility-Street-Detailed-highlighted",type:"line",source:"mobility-Street-geojson",paint:{"line-color":"#d8d8d8","line-width":["interpolate",["exponential",1],["to-number",["get",Gt]],0,1.75,parseFloat(Lt),6]},filter:["in","object_id",""],layout:{visibility:"none"}},L),Me.addLayer({id:"mobility-point",type:"circle",source:"mobility-Ithaca-dot",paint:{"circle-color":"rgba(254, 178, 76, 0.85)","circle-radius":40},layout:{visibility:"none"}}),Me.addLayer({id:"mobility-point-label",type:"symbol",source:"mobility-Ithaca-dot",layout:{"text-field":["get","name"],"text-font":["Open Sans Regular"],"text-size":18},layout:{visibility:"none"}}),Me.addLayer({id:"mobility-Ithaca-boundary",type:"line",source:"mobility-Ithaca",paint:{"line-color":"#bbbbbb","line-dasharray":[10,6],"line-opacity":.6},layout:{visibility:"none"}});const j=new Xs.Popup({closeButton:!1,closeOnClick:!1});Me.on("mouseenter","mobility-point",ne=>{Me.getCanvas().style.cursor="pointer";const Ee=ne.features[0].geometry.coordinates.slice(),Ge=`<div style="font-size: 20px; font-weight: bold; margin-bottom: 5px;">Ithaca, New York</div>
              <div style="font-size: 12px; font-weight: normal; margin-bottom: 10px;">Available Dashboard:</div>
       
              <div style="font-size: 10px; font-weight: light;">Building Energy </div>
              <div style="font-size: 10px; font-weight: light;">Grid Energy </div>
              <div style="font-size: 10px; font-weight: light;">Street Mobility </div>
              <div style="font-size: 10px; font-weight: light;">Block Mobility </div>`;for(;Math.abs(ne.lngLat.lng-Ee[0])>180;)Ee[0]+=ne.lngLat.lng>Ee[0]?360:-360;j.setLngLat(Ee).setHTML(Ge).addTo(Me)}),Me.on("mouseleave","mobility-point",()=>{Me.getCanvas().style.cursor="",j.remove()}),Me.on("click","mobility-point",ne=>{Me.flyTo({center:ne.features[0].geometry.coordinates,zoom:13}),Te(["energy-Building","energy-Building-highlighted","energy-Building-other"]),ke.forEach(Ee=>{Me.setLayoutProperty(Ee,"visibility","visible")}),P("UBEM Viewer / Ithaca"),N("Ithaca /ˈɪθəkə/ is a city and the county seat of Tompkins County, New York, United States. Situated on the southern shore of Cayuga Lake in the Finger Lakes region of New York, Ithaca is the largest community in the Ithaca metropolitan statistical area. It is named after the Greek island of Ithaca."),J(!1),F(!0),j.remove()}),Me.on("boxzoomend",ne=>{Me.dragPan.enable();const Ee=ne.boxZoomBounds;Me.fitBounds(Ee,{padding:1})}),Me.on("zoom",()=>{const ne="mobility-point",Ee="mobility-point-label",Ge="mobility-Ithaca-boundary";Me.getZoom()<10?(Me.setLayoutProperty(ne,"visibility","visible"),Me.setLayoutProperty(Ee,"visibility","visible"),Me.setLayoutProperty(Ge,"visibility","none")):(Me.setLayoutProperty(ne,"visibility","none"),Me.setLayoutProperty(Ee,"visibility","none"),Me.setLayoutProperty(Ge,"visibility","visible"))}),rt.addEventListener("mousedown",re,!0);function W(ne){const Ee=rt.getBoundingClientRect();return new Xs.Point(ne.clientX-Ee.left-rt.clientLeft,ne.clientY-Ee.top-rt.clientTop)}function X(){Me.setFilter("mobility-Street-Detailed-highlighted",["!in","object_id",...He.current]),Me.setFilter("mobility-Block-Detailed-highlighted",["!in","object_id",...He.current])}function re(ne){if(ne.button===0&&(ne.shiftKey&&Me.dragPan.disable(),document.addEventListener("mouseup",me),document.addEventListener("keydown",H),bt=W(ne),ne.ctrlKey)){const Ge=Me.queryRenderedFeatures([bt,bt],{layers:["mobility-Street-Detailed","mobility-Block-Detailed"]}).map(Ze=>Ze.properties.object_id);He.current=new Set([...He.current].filter(Ze=>!Ge.includes(Ze))),X(),Pt(He.current.size)}}function me(ne){Me.dragPan.enable(),ar=W(ne);const Ee=Me.queryRenderedFeatures([bt,ar],{layers:["mobility-Street-Detailed","mobility-Block-Detailed"]});ye(ne,Ee)}function ye(ne,Ee){if(Rr||(Rr=document.createElement("div"),Rr.classList.add("boxdraw"),rt.appendChild(Rr)),ne.shiftKey){for(const Ge of Ee)He.current.add(Ge.properties.object_id);X()}if(ne.ctrlKey){for(const Ge of Ee)He.current.delete(Ge.properties.object_id);X()}document.removeEventListener("keydown",H),document.removeEventListener("mouseup",me),Pt(He.current.size)}function H(ne){ne.keyCode===27&&mobilityfinish()}})}},[]),te.useEffect(()=>{if(t.current){const Me=t.current,rt=Me.getCanvasContainer();let bt,ar;Me.on("load",function(){const Rr=Me.getStyle().layers;let Ht;for(const ye of Rr)if(ye.type==="symbol"){Ht=ye.id;break}Me.addSource("ithaca-energy-Summary",{type:"geojson",data:o}),Me.addSource("ithaca-energy-Building",{type:"geojson",data:u}),Me.addSource("ithaca-energy-Feeder",{type:"geojson",data:JC}),Me.addLayer({id:"energy-Building",type:"fill",source:"ithaca-energy-Building",filter:["has","Equipment[KWh][Yr]"],paint:{"fill-outline-color":"#eeeeee","fill-color":Go(nr,tr)},layout:{visibility:"none"}},Ht),Me.addLayer({id:"energy-Building-highlighted",type:"fill",source:"ithaca-energy-Building",paint:{"fill-outline-color":"#ffffff","fill-color":"#d8d8d8","fill-opacity":.99},filter:["in","ID_ESL",""],layout:{visibility:"none"}},Ht),Me.addLayer({id:"energy-Building-other",type:"fill",source:"ithaca-energy-Building",filter:["!",["has","Gas[kWh][Mth]"]],paint:{"fill-outline-color":"#d9d9d9","fill-color":"#f1f1f1"},layout:{visibility:"none"}},Ht),Me.addLayer({id:"energy-Feeder",type:"line",source:"ithaca-energy-Feeder",filter:["has","GasDemand_KWh"],paint:{"line-color":Go(Yt,on),"line-width":3},layout:{visibility:"none"}},Ht),Me.addLayer({id:"energy-Feeder-other",type:"line",source:"ithaca-energy-Feeder",filter:["!",["has","GasDemand_KWh"]],paint:{"line-width":3,"line-color":"#d8d8d8"},layout:{visibility:"none"}},Ht),Me.addLayer({id:"energy-Feeder-highlighted",type:"line",source:"ithaca-energy-Feeder",filter:["has","GasDemand_KWh"],paint:{"line-color":"#d8d8d8","line-width":3},layout:{visibility:"none"}},Ht),rt.addEventListener("mousedown",W,!0);function L(ye){const H=rt.getBoundingClientRect();return new Xs.Point(ye.clientX-H.left-rt.clientLeft,ye.clientY-H.top-rt.clientTop)}function j(){Me.setFilter("energy-Building-highlighted",["!in","ID_ESL",...He.current]),Me.setFilter("energy-Feeder-highlighted",["!in","ID_ESL",...He.current])}function W(ye){ye.button===0&&(ye.shiftKey&&Me.dragPan.disable(),document.removeEventListener("mouseup",X),document.removeEventListener("keydown",re),document.addEventListener("mouseup",X),document.addEventListener("keydown",re),bt=L(ye),ye.ctrlKey&&(Me.queryRenderedFeatures([bt,bt],{layers:["energy-Building","energy-Feeder"]}).map(Ee=>Ee.properties.ID_ESL).forEach(Ee=>{He.current.has(Ee)&&He.current.delete(Ee)}),j()))}function X(ye){Me.dragPan.enable(),ar=L(ye);const H=Me.queryRenderedFeatures([bt,ar],{layers:["energy-Building","energy-Feeder"]});me(ye,H)}function re(ye){ye.keyCode===27&&me(ye,[])}function me(ye,H){document.removeEventListener("mouseup",X),document.removeEventListener("keydown",re),ye.shiftKey?(H.forEach(ne=>{const Ee=ne.properties.ID_ESL;He.current.has(Ee)||He.current.add(Ee)}),j()):ye.ctrlKey&&(H.forEach(ne=>{const Ee=ne.properties.ID_ESL;He.current.has(Ee)&&He.current.delete(Ee)}),j()),Pt(He.current.size),console.log(He.current)}te.useEffect(()=>{HE(He,t,o)},[u])})}},[]),te.useEffect(()=>{const rt=setTimeout(async()=>{if(t.current){const bt=t.current,ar="mobility-Street-Detailed",Rr="mobility-Street-Detailed-highlighted",Ht="mobility-Block-Detailed",L="energy-Building",j="energy-Feeder",W=Lt,X=Mr,re=tr,me=on;bt.getLayer(ar)&&(bt.setPaintProperty(ar,"line-color",Go(Gt,W)),bt.setPaintProperty(Rr,"line-width",["interpolate",["exponential",1],["to-number",["get",Gt]],0,1.75,parseFloat(Lt),6]),bt.setPaintProperty(ar,"line-width",["interpolate",["exponential",1],["to-number",["get",Gt]],0,1.5,parseFloat(Lt),6])),bt.getLayer(Ht)&&bt.setPaintProperty(Ht,"fill-color",Go(Gt,X)),bt.getLayer(L)&&bt.setPaintProperty(L,"fill-color",Go(nr,re)),bt.getLayer(j)&&bt.setPaintProperty(j,"line-color",Go(Yt,me))}},700);return()=>clearTimeout(rt)},[Mr,Lt,tr,on,Gt,nr,Yt]),te.useEffect(()=>{if(t.current){const Me=t.current,rt=["mobility-Street-Detailed","mobility-Block-Detailed","energy-Building","energy-Feeder"];for(const bt of rt){if(!Me.getLayer(bt))continue;const ar=ke.includes(YE(bt)),Rr=ke.includes(JE(bt)),Ht=ke.includes(bt)||ar||Rr;Rr&&Me.setLayoutProperty(JE(bt),"visibility",Ht?"visible":"none"),ar&&Me.setLayoutProperty(YE(bt),"visibility",Ht?"visible":"none"),Me.setLayoutProperty(bt,"visibility",Ht?"visible":"none")}}},[ke]),te.useEffect(()=>{ke.includes("energy-Building")&&(O(!1),_e(!0),he(!0),ie(!1),fetch(rk).then(Me=>Me.json()).then(Me=>{const rt=Me[0].metric_description;N(rt)}),Xr(tr),Bn("kWh/m2")),ke.includes("energy-Feeder")&&(O(!1),se(!1),_e(!0),ie(!0),he(!1),fetch(rk).then(Me=>Me.json()).then(Me=>{const rt=Me[1].metric_description;N(rt)}),Xr(on),Bn("kW")),(ke.includes("mobility-Street-Detailed")||ke.includes("mobility-Block-Detailed"))&&(O(!0),_e(!1),he(!1),ie(!1),ke.includes("mobility-Street-Detailed")?(fetch(tk).then(Me=>Me.json()).then(Me=>{const rt=Me[0].metric_description;N(rt)}),Xr(Lt),se(!1)):(fetch(tk).then(Me=>Me.json()).then(Me=>{const rt=Me[1].metric_description;N(rt)}),Xr(Mr),se(!0)),Bn("Number of Trips"))},[ke,nr,He]),te.useEffect(()=>{const Me=parseInt(zr),rt=parseInt(tr),bt=[Math.min(n[0],rt),Math.min(n[1],rt)];bt[0]>bt[1]&&(bt[0]=Me),a(bt)},[tr,zr]);const wr=()=>{Ce(!qe)};return ee.jsxs("div",{className:"container",children:[(R||pe)&&ee.jsxs("div",{className:"sidebar",children:[ee.jsx("div",{className:"title-container",children:ee.jsx("div",{className:"title",children:ee.jsx("p",{onClick:Wi,children:I})})}),q&&ee.jsx("div",{className:"home-page",children:ee.jsx(j8,{handleDigitalTwinClick:Bt})}),ge&&ee.jsx("div",{className:"city-info",children:V}),U&&ee.jsx("div",{class:"hr-container",children:ee.jsx("span",{class:"summary-title",children:"Dataset Management"})}),U&&ee.jsx("div",{children:ee.jsx(IH,{onDataImport:f,files:Oe,setFiles:Je,deleteFile:Re,selectedFile:$e,setSelectedFile:et})}),R&&ee.jsx("div",{children:ee.jsx(ex,{selectedFileName:$e?$e.name:null,mapRef:t,setBuildingDataUrl:f,setIthacaEnergyUrl:v,BUILDING_DATA_URL:u,BUILDING_DATA_URL_INITIAL:yy,ITHACA_ENERGY_URL_INITIAL:my})}),ze&&ee.jsx("div",{children:ee.jsx(ex,{mapRef:t,setBuildingDataUrl:f,setIthacaEnergyUrl:v,BUILDING_DATA_URL:u,BUILDING_DATA_URL_INITIAL:yy,ITHACA_ENERGY_URL_INITIAL:my})}),we&&ee.jsx("div",{children:ee.jsx(ex,{mapRef:t,setBuildingDataUrl:f,setIthacaEnergyUrl:v,BUILDING_DATA_URL:u,BUILDING_DATA_URL_INITIAL:yy,ITHACA_ENERGY_URL_INITIAL:my})})]}),(R||pe)&&ee.jsxs("div",{className:"sidebar-graph",children:[U&&ee.jsxs("div",{children:[ee.jsx("div",{class:"hr-container",children:ee.jsx("span",{class:"summary-title",children:"Summary Report"})}),ee.jsx("div",{className:"selected-number",children:ee.jsxs("p",{children:[Zt," Selected objects."]})})]}),R&&ee.jsx("div",{children:ee.jsx(wH,{})}),ze&&ee.jsx("div",{children:ee.jsx(SH,{})}),we&&ee.jsx("div",{children:ee.jsx(EH,{})}),(q||U)&&ee.jsx("div",{style:{margin:"20px"}}),R&&($_(He,t),U_(He,t),V_(He,t),q_(He,t)),pe&&(O8(He,t,o),B8(He,t,o),HE(He,t,o),N8(He,t)),we&&(KE(He,t),ZE(He,t),XE(He,t))]}),ee.jsxs("div",{className:"content-container",children:[ee.jsx("div",{className:"map-container",ref:e}),q&&ee.jsx("div",{className:"homepage-title",children:"UBEM Viewer"}),q&&ee.jsx("div",{children:ee.jsx(TH,{onDataImport:f,addFile:Wt,mapRef:t,setTitle:P,setDisplayingLayers:Te,setHomeContainerVisible:J,setGeneralContainerVisible:F})}),(R||pe)&&ee.jsx("div",{className:"main-legend-container",children:At(ke)}),(R||pe)&&ee.jsxs("div",{className:"metric-container",children:[U&&ee.jsx("div",{style:{position:"relative"},children:ee.jsx("span",{class:"click-title",onClick:wr,children:ee.jsxs("div",{class:"click-title",style:{display:"flex",alignItems:"center"},children:[ee.jsx("img",{src:"./Image/metric.png",alt:"Metrics Icon",style:{width:"30px",marginLeft:"5px"}}),"Metrics"]})})}),qe&&ze&&ee.jsx(U8,{buildingLayerCode:nr,setBuildingLayerCode:Kt}),qe&&we&&ee.jsx(_H,{feederLayerCode:Yt,setFeederLayerCode:st}),qe&&R&&ee.jsx(xH,{propertiesNumber:hr,handlePropertyChange:br,blockContainerVisible:Q}),qe&&R&&ee.jsx(bH,{propertiesNumber:hr,handlePropertyChange:br}),qe&&R&&ee.jsx("button",{className:"submit-button",onClick:ct,children:"Apply"})]})]})]})}function RH(e){Id.render(ee.jsx(zH,{}),e)}RH(document.getElementById("app"));
