function uR(e,t){for(var n=0;n<t.length;n++){const a=t[n];if(typeof a!="string"&&!Array.isArray(a)){for(const c in a)if(c!=="default"&&!(c in e)){const f=Object.getOwnPropertyDescriptor(a,c);f&&Object.defineProperty(e,c,f.get?f:{enumerable:!0,get:()=>a[c]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))a(c);new MutationObserver(c=>{for(const f of c)if(f.type==="childList")for(const o of f.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function n(c){const f={};return c.integrity&&(f.integrity=c.integrity),c.referrerPolicy&&(f.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?f.credentials="include":c.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function a(c){if(c.ep)return;c.ep=!0;const f=n(c);fetch(c.href,f)}})();var ba=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yg(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function $C(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function a(){return this instanceof a?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var c=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(n,a,c.get?c:{enumerable:!0,get:function(){return e[a]}})}),n}var VC={exports:{}},af={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var o2=Object.getOwnPropertySymbols,cR=Object.prototype.hasOwnProperty,pR=Object.prototype.propertyIsEnumerable;function hR(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function dR(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var a=Object.getOwnPropertyNames(t).map(function(f){return t[f]});if(a.join("")!=="0123456789")return!1;var c={};return"abcdefghijklmnopqrst".split("").forEach(function(f){c[f]=f}),Object.keys(Object.assign({},c)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var qC=dR()?Object.assign:function(e,t){for(var n,a=hR(e),c,f=1;f<arguments.length;f++){n=Object(arguments[f]);for(var o in n)cR.call(n,o)&&(a[o]=n[o]);if(o2){c=o2(n);for(var v=0;v<c.length;v++)pR.call(n,c[v])&&(a[c[v]]=n[c[v]])}}return a},WC={exports:{}},Kr={};/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qx=qC,Bp=60103,GC=60106;Kr.Fragment=60107;Kr.StrictMode=60108;Kr.Profiler=60114;var HC=60109,ZC=60110,KC=60112;Kr.Suspense=60113;var XC=60115,YC=60116;if(typeof Symbol=="function"&&Symbol.for){var ga=Symbol.for;Bp=ga("react.element"),GC=ga("react.portal"),Kr.Fragment=ga("react.fragment"),Kr.StrictMode=ga("react.strict_mode"),Kr.Profiler=ga("react.profiler"),HC=ga("react.provider"),ZC=ga("react.context"),KC=ga("react.forward_ref"),Kr.Suspense=ga("react.suspense"),XC=ga("react.memo"),YC=ga("react.lazy")}var a2=typeof Symbol=="function"&&Symbol.iterator;function fR(e){return e===null||typeof e!="object"?null:(e=a2&&e[a2]||e["@@iterator"],typeof e=="function"?e:null)}function sf(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var JC={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},QC={};function Np(e,t,n){this.props=e,this.context=t,this.refs=QC,this.updater=n||JC}Np.prototype.isReactComponent={};Np.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error(sf(85));this.updater.enqueueSetState(this,e,t,"setState")};Np.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function ek(){}ek.prototype=Np.prototype;function Wx(e,t,n){this.props=e,this.context=t,this.refs=QC,this.updater=n||JC}var Gx=Wx.prototype=new ek;Gx.constructor=Wx;qx(Gx,Np.prototype);Gx.isPureReactComponent=!0;var Hx={current:null},tk=Object.prototype.hasOwnProperty,rk={key:!0,ref:!0,__self:!0,__source:!0};function nk(e,t,n){var a,c={},f=null,o=null;if(t!=null)for(a in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(f=""+t.key),t)tk.call(t,a)&&!rk.hasOwnProperty(a)&&(c[a]=t[a]);var v=arguments.length-2;if(v===1)c.children=n;else if(1<v){for(var x=Array(v),E=0;E<v;E++)x[E]=arguments[E+2];c.children=x}if(e&&e.defaultProps)for(a in v=e.defaultProps,v)c[a]===void 0&&(c[a]=v[a]);return{$$typeof:Bp,type:e,key:f,ref:o,props:c,_owner:Hx.current}}function mR(e,t){return{$$typeof:Bp,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Zx(e){return typeof e=="object"&&e!==null&&e.$$typeof===Bp}function yR(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var s2=/\/+/g;function S0(e,t){return typeof e=="object"&&e!==null&&e.key!=null?yR(""+e.key):t.toString(36)}function ry(e,t,n,a,c){var f=typeof e;(f==="undefined"||f==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(f){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Bp:case GC:o=!0}}if(o)return o=e,c=c(o),e=a===""?"."+S0(o,0):a,Array.isArray(c)?(n="",e!=null&&(n=e.replace(s2,"$&/")+"/"),ry(c,t,n,"",function(E){return E})):c!=null&&(Zx(c)&&(c=mR(c,n+(!c.key||o&&o.key===c.key?"":(""+c.key).replace(s2,"$&/")+"/")+e)),t.push(c)),1;if(o=0,a=a===""?".":a+":",Array.isArray(e))for(var v=0;v<e.length;v++){f=e[v];var x=a+S0(f,v);o+=ry(f,t,n,x,c)}else if(x=fR(e),typeof x=="function")for(e=x.call(e),v=0;!(f=e.next()).done;)f=f.value,x=a+S0(f,v++),o+=ry(f,t,n,x,c);else if(f==="object")throw t=""+e,Error(sf(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t));return o}function Rm(e,t,n){if(e==null)return e;var a=[],c=0;return ry(e,a,"","",function(f){return t.call(n,f,c++)}),a}function gR(e){if(e._status===-1){var t=e._result;t=t(),e._status=0,e._result=t,t.then(function(n){e._status===0&&(n=n.default,e._status=1,e._result=n)},function(n){e._status===0&&(e._status=2,e._result=n)})}if(e._status===1)return e._result;throw e._result}var ik={current:null};function Hs(){var e=ik.current;if(e===null)throw Error(sf(321));return e}var vR={ReactCurrentDispatcher:ik,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:Hx,IsSomeRendererActing:{current:!1},assign:qx};Kr.Children={map:Rm,forEach:function(e,t,n){Rm(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Rm(e,function(){t++}),t},toArray:function(e){return Rm(e,function(t){return t})||[]},only:function(e){if(!Zx(e))throw Error(sf(143));return e}};Kr.Component=Np;Kr.PureComponent=Wx;Kr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vR;Kr.cloneElement=function(e,t,n){if(e==null)throw Error(sf(267,e));var a=qx({},e.props),c=e.key,f=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(f=t.ref,o=Hx.current),t.key!==void 0&&(c=""+t.key),e.type&&e.type.defaultProps)var v=e.type.defaultProps;for(x in t)tk.call(t,x)&&!rk.hasOwnProperty(x)&&(a[x]=t[x]===void 0&&v!==void 0?v[x]:t[x])}var x=arguments.length-2;if(x===1)a.children=n;else if(1<x){v=Array(x);for(var E=0;E<x;E++)v[E]=arguments[E+2];a.children=v}return{$$typeof:Bp,type:e.type,key:c,ref:f,props:a,_owner:o}};Kr.createContext=function(e,t){return t===void 0&&(t=null),e={$$typeof:ZC,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider={$$typeof:HC,_context:e},e.Consumer=e};Kr.createElement=nk;Kr.createFactory=function(e){var t=nk.bind(null,e);return t.type=e,t};Kr.createRef=function(){return{current:null}};Kr.forwardRef=function(e){return{$$typeof:KC,render:e}};Kr.isValidElement=Zx;Kr.lazy=function(e){return{$$typeof:YC,_payload:{_status:-1,_result:e},_init:gR}};Kr.memo=function(e,t){return{$$typeof:XC,type:e,compare:t===void 0?null:t}};Kr.useCallback=function(e,t){return Hs().useCallback(e,t)};Kr.useContext=function(e,t){return Hs().useContext(e,t)};Kr.useDebugValue=function(){};Kr.useEffect=function(e,t){return Hs().useEffect(e,t)};Kr.useImperativeHandle=function(e,t,n){return Hs().useImperativeHandle(e,t,n)};Kr.useLayoutEffect=function(e,t){return Hs().useLayoutEffect(e,t)};Kr.useMemo=function(e,t){return Hs().useMemo(e,t)};Kr.useReducer=function(e,t,n){return Hs().useReducer(e,t,n)};Kr.useRef=function(e){return Hs().useRef(e)};Kr.useState=function(e){return Hs().useState(e)};Kr.version="17.0.2";WC.exports=Kr;var ee=WC.exports;const Xa=yg(ee),z_=uR({__proto__:null,default:Xa},[ee]);/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _R=ee,ok=60103;af.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var l2=Symbol.for;ok=l2("react.element"),af.Fragment=l2("react.fragment")}var xR=_R.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,bR=Object.prototype.hasOwnProperty,wR={key:!0,ref:!0,__self:!0,__source:!0};function ak(e,t,n){var a,c={},f=null,o=null;n!==void 0&&(f=""+n),t.key!==void 0&&(f=""+t.key),t.ref!==void 0&&(o=t.ref);for(a in t)bR.call(t,a)&&!wR.hasOwnProperty(a)&&(c[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps,t)c[a]===void 0&&(c[a]=t[a]);return{$$typeof:ok,type:e,key:f,ref:o,props:c,_owner:xR.current}}af.jsx=ak;af.jsxs=ak;VC.exports=af;var Q=VC.exports;var sk={exports:{}},aa={},lk={exports:{}},uk={};/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){var t,n,a,c;if(typeof performance=="object"&&typeof performance.now=="function"){var f=performance;e.unstable_now=function(){return f.now()}}else{var o=Date,v=o.now();e.unstable_now=function(){return o.now()-v}}if(typeof window>"u"||typeof MessageChannel!="function"){var x=null,E=null,T=function(){if(x!==null)try{var Pe=e.unstable_now();x(!0,Pe),x=null}catch(Ge){throw setTimeout(T,0),Ge}};t=function(Pe){x!==null?setTimeout(t,0,Pe):(x=Pe,setTimeout(T,0))},n=function(Pe,Ge){E=setTimeout(Pe,Ge)},a=function(){clearTimeout(E)},e.unstable_shouldYield=function(){return!1},c=e.unstable_forceFrameRate=function(){}}else{var P=window.setTimeout,I=window.clearTimeout;if(typeof console<"u"){var q=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof q!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var U=!1,G=null,D=-1,F=5,V=0;e.unstable_shouldYield=function(){return e.unstable_now()>=V},c=function(){},e.unstable_forceFrameRate=function(Pe){0>Pe||125<Pe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<Pe?Math.floor(1e3/Pe):5};var B=new MessageChannel,z=B.port2;B.port1.onmessage=function(){if(G!==null){var Pe=e.unstable_now();V=Pe+F;try{G(!0,Pe)?z.postMessage(null):(U=!1,G=null)}catch(Ge){throw z.postMessage(null),Ge}}else U=!1},t=function(Pe){G=Pe,U||(U=!0,z.postMessage(null))},n=function(Pe,Ge){D=P(function(){Pe(e.unstable_now())},Ge)},a=function(){I(D),D=-1}}function ne(Pe,Ge){var st=Pe.length;Pe.push(Ge);e:for(;;){var Re=st-1>>>1,qe=Pe[Re];if(qe!==void 0&&0<be(qe,Ge))Pe[Re]=Ge,Pe[st]=qe,st=Re;else break e}}function oe(Pe){return Pe=Pe[0],Pe===void 0?null:Pe}function pe(Pe){var Ge=Pe[0];if(Ge!==void 0){var st=Pe.pop();if(st!==Ge){Pe[0]=st;e:for(var Re=0,qe=Pe.length;Re<qe;){var Kt=2*(Re+1)-1,It=Pe[Kt],Ot=Kt+1,Et=Pe[Ot];if(It!==void 0&&0>be(It,st))Et!==void 0&&0>be(Et,It)?(Pe[Re]=Et,Pe[Ot]=st,Re=Ot):(Pe[Re]=It,Pe[Kt]=st,Re=Kt);else if(Et!==void 0&&0>be(Et,st))Pe[Re]=Et,Pe[Ot]=st,Re=Ot;else break e}}return Ge}return null}function be(Pe,Ge){var st=Pe.sortIndex-Ge.sortIndex;return st!==0?st:Pe.id-Ge.id}var Te=[],_e=[],Se=1,te=null,he=3,Oe=!1,je=!1,Ce=!1;function ke(Pe){for(var Ge=oe(_e);Ge!==null;){if(Ge.callback===null)pe(_e);else if(Ge.startTime<=Pe)pe(_e),Ge.sortIndex=Ge.expirationTime,ne(Te,Ge);else break;Ge=oe(_e)}}function $e(Pe){if(Ce=!1,ke(Pe),!je)if(oe(Te)!==null)je=!0,t(Ze);else{var Ge=oe(_e);Ge!==null&&n($e,Ge.startTime-Pe)}}function Ze(Pe,Ge){je=!1,Ce&&(Ce=!1,a()),Oe=!0;var st=he;try{for(ke(Ge),te=oe(Te);te!==null&&(!(te.expirationTime>Ge)||Pe&&!e.unstable_shouldYield());){var Re=te.callback;if(typeof Re=="function"){te.callback=null,he=te.priorityLevel;var qe=Re(te.expirationTime<=Ge);Ge=e.unstable_now(),typeof qe=="function"?te.callback=qe:te===oe(Te)&&pe(Te),ke(Ge)}else pe(Te);te=oe(Te)}if(te!==null)var Kt=!0;else{var It=oe(_e);It!==null&&n($e,It.startTime-Ge),Kt=!1}return Kt}finally{te=null,he=st,Oe=!1}}var bt=c;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Pe){Pe.callback=null},e.unstable_continueExecution=function(){je||Oe||(je=!0,t(Ze))},e.unstable_getCurrentPriorityLevel=function(){return he},e.unstable_getFirstCallbackNode=function(){return oe(Te)},e.unstable_next=function(Pe){switch(he){case 1:case 2:case 3:var Ge=3;break;default:Ge=he}var st=he;he=Ge;try{return Pe()}finally{he=st}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=bt,e.unstable_runWithPriority=function(Pe,Ge){switch(Pe){case 1:case 2:case 3:case 4:case 5:break;default:Pe=3}var st=he;he=Pe;try{return Ge()}finally{he=st}},e.unstable_scheduleCallback=function(Pe,Ge,st){var Re=e.unstable_now();switch(typeof st=="object"&&st!==null?(st=st.delay,st=typeof st=="number"&&0<st?Re+st:Re):st=Re,Pe){case 1:var qe=-1;break;case 2:qe=250;break;case 5:qe=1073741823;break;case 4:qe=1e4;break;default:qe=5e3}return qe=st+qe,Pe={id:Se++,callback:Ge,priorityLevel:Pe,startTime:st,expirationTime:qe,sortIndex:-1},st>Re?(Pe.sortIndex=st,ne(_e,Pe),oe(Te)===null&&Pe===oe(_e)&&(Ce?a():Ce=!0,n($e,st-Re))):(Pe.sortIndex=qe,ne(Te,Pe),je||Oe||(je=!0,t(Ze))),Pe},e.unstable_wrapCallback=function(Pe){var Ge=he;return function(){var st=he;he=Ge;try{return Pe.apply(this,arguments)}finally{he=st}}}})(uk);lk.exports=uk;var SR=lk.exports;/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gg=ee,Dn=qC,ki=SR;function ft(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!gg)throw Error(ft(227));var ck=new Set,Bd={};function Uu(e,t){Ep(e,t),Ep(e+"Capture",t)}function Ep(e,t){for(Bd[e]=t,e=0;e<t.length;e++)ck.add(t[e])}var Vs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ER=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,u2=Object.prototype.hasOwnProperty,c2={},p2={};function CR(e){return u2.call(p2,e)?!0:u2.call(c2,e)?!1:ER.test(e)?p2[e]=!0:(c2[e]=!0,!1)}function kR(e,t,n,a){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function TR(e,t,n,a){if(t===null||typeof t>"u"||kR(e,t,n,a))return!0;if(a)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function lo(e,t,n,a,c,f,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=c,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=f,this.removeEmptyString=o}var Ni={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ni[e]=new lo(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ni[t]=new lo(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ni[e]=new lo(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ni[e]=new lo(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ni[e]=new lo(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ni[e]=new lo(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ni[e]=new lo(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ni[e]=new lo(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ni[e]=new lo(e,5,!1,e.toLowerCase(),null,!1,!1)});var Kx=/[\-:]([a-z])/g;function Xx(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Kx,Xx);Ni[t]=new lo(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Kx,Xx);Ni[t]=new lo(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Kx,Xx);Ni[t]=new lo(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ni[e]=new lo(e,1,!1,e.toLowerCase(),null,!1,!1)});Ni.xlinkHref=new lo("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ni[e]=new lo(e,1,!1,e.toLowerCase(),null,!0,!0)});function Yx(e,t,n,a){var c=Ni.hasOwnProperty(t)?Ni[t]:null,f=c!==null?c.type===0:a?!1:!(!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N");f||(TR(t,n,c,a)&&(n=null),a||c===null?CR(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):c.mustUseProperty?e[c.propertyName]=n===null?c.type===3?!1:"":n:(t=c.attributeName,a=c.attributeNamespace,n===null?e.removeAttribute(t):(c=c.type,n=c===3||c===4&&n===!0?"":""+n,a?e.setAttributeNS(a,t,n):e.setAttribute(t,n))))}var $u=gg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,pd=60103,ku=60106,yl=60107,Jx=60108,bd=60114,Qx=60109,e1=60110,vg=60112,wd=60113,Cy=60120,_g=60115,t1=60116,r1=60121,n1=60128,pk=60129,i1=60130,D_=60131;if(typeof Symbol=="function"&&Symbol.for){var Ci=Symbol.for;pd=Ci("react.element"),ku=Ci("react.portal"),yl=Ci("react.fragment"),Jx=Ci("react.strict_mode"),bd=Ci("react.profiler"),Qx=Ci("react.provider"),e1=Ci("react.context"),vg=Ci("react.forward_ref"),wd=Ci("react.suspense"),Cy=Ci("react.suspense_list"),_g=Ci("react.memo"),t1=Ci("react.lazy"),r1=Ci("react.block"),Ci("react.scope"),n1=Ci("react.opaque.id"),pk=Ci("react.debug_trace_mode"),i1=Ci("react.offscreen"),D_=Ci("react.legacy_hidden")}var h2=typeof Symbol=="function"&&Symbol.iterator;function Wh(e){return e===null||typeof e!="object"?null:(e=h2&&e[h2]||e["@@iterator"],typeof e=="function"?e:null)}var E0;function hd(e){if(E0===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);E0=t&&t[1]||""}return`
`+E0+e}var C0=!1;function Lm(e,t){if(!e||C0)return"";C0=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(x){var a=x}Reflect.construct(e,[],t)}else{try{t.call()}catch(x){a=x}e.call(t.prototype)}else{try{throw Error()}catch(x){a=x}e()}}catch(x){if(x&&a&&typeof x.stack=="string"){for(var c=x.stack.split(`
`),f=a.stack.split(`
`),o=c.length-1,v=f.length-1;1<=o&&0<=v&&c[o]!==f[v];)v--;for(;1<=o&&0<=v;o--,v--)if(c[o]!==f[v]){if(o!==1||v!==1)do if(o--,v--,0>v||c[o]!==f[v])return`
`+c[o].replace(" at new "," at ");while(1<=o&&0<=v);break}}}finally{C0=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?hd(e):""}function IR(e){switch(e.tag){case 5:return hd(e.type);case 16:return hd("Lazy");case 13:return hd("Suspense");case 19:return hd("SuspenseList");case 0:case 2:case 15:return e=Lm(e.type,!1),e;case 11:return e=Lm(e.type.render,!1),e;case 22:return e=Lm(e.type._render,!1),e;case 1:return e=Lm(e.type,!0),e;default:return""}}function up(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case yl:return"Fragment";case ku:return"Portal";case bd:return"Profiler";case Jx:return"StrictMode";case wd:return"Suspense";case Cy:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case e1:return(e.displayName||"Context")+".Consumer";case Qx:return(e._context.displayName||"Context")+".Provider";case vg:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case _g:return up(e.type);case r1:return up(e._render);case t1:t=e._payload,e=e._init;try{return up(e(t))}catch{}}return null}function Al(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function hk(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function PR(e){var t=hk(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var c=n.get,f=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(o){a=""+o,f.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return a},setValue:function(o){a=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function zm(e){e._valueTracker||(e._valueTracker=PR(e))}function dk(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),a="";return e&&(a=hk(e)?e.checked?"true":"false":e.value),e=a,e!==n?(t.setValue(e),!0):!1}function ky(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function O_(e,t){var n=t.checked;return Dn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function d2(e,t){var n=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;n=Al(t.value!=null?t.value:n),e._wrapperState={initialChecked:a,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function fk(e,t){t=t.checked,t!=null&&Yx(e,"checked",t,!1)}function B_(e,t){fk(e,t);var n=Al(t.value),a=t.type;if(n!=null)a==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?N_(e,t.type,n):t.hasOwnProperty("defaultValue")&&N_(e,t.type,Al(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function f2(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function N_(e,t,n){(t!=="number"||ky(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function AR(e){var t="";return gg.Children.forEach(e,function(n){n!=null&&(t+=n)}),t}function F_(e,t){return e=Dn({children:void 0},t),(t=AR(t.children))&&(e.children=t),e}function cp(e,t,n,a){if(e=e.options,t){t={};for(var c=0;c<n.length;c++)t["$"+n[c]]=!0;for(n=0;n<e.length;n++)c=t.hasOwnProperty("$"+e[n].value),e[n].selected!==c&&(e[n].selected=c),c&&a&&(e[n].defaultSelected=!0)}else{for(n=""+Al(n),t=null,c=0;c<e.length;c++){if(e[c].value===n){e[c].selected=!0,a&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function j_(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ft(91));return Dn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function m2(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(ft(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(ft(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Al(n)}}function mk(e,t){var n=Al(t.value),a=Al(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),a!=null&&(e.defaultValue=""+a)}function y2(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}var U_={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function yk(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $_(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?yk(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Dm,gk=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,a,c){MSApp.execUnsafeLocalFunction(function(){return e(t,n,a,c)})}:e}(function(e,t){if(e.namespaceURI!==U_.svg||"innerHTML"in e)e.innerHTML=t;else{for(Dm=Dm||document.createElement("div"),Dm.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Dm.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Nd(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Sd={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},MR=["Webkit","ms","Moz","O"];Object.keys(Sd).forEach(function(e){MR.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Sd[t]=Sd[e]})});function vk(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Sd.hasOwnProperty(e)&&Sd[e]?(""+t).trim():t+"px"}function _k(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var a=n.indexOf("--")===0,c=vk(n,t[n],a);n==="float"&&(n="cssFloat"),a?e.setProperty(n,c):e[n]=c}}var RR=Dn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function V_(e,t){if(t){if(RR[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ft(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ft(60));if(!(typeof t.dangerouslySetInnerHTML=="object"&&"__html"in t.dangerouslySetInnerHTML))throw Error(ft(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ft(62))}}function q_(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function o1(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var W_=null,pp=null,hp=null;function g2(e){if(e=uf(e)){if(typeof W_!="function")throw Error(ft(280));var t=e.stateNode;t&&(t=Cg(t),W_(e.stateNode,e.type,t))}}function xk(e){pp?hp?hp.push(e):hp=[e]:pp=e}function bk(){if(pp){var e=pp,t=hp;if(hp=pp=null,g2(e),t)for(e=0;e<t.length;e++)g2(t[e])}}function a1(e,t){return e(t)}function wk(e,t,n,a,c){return e(t,n,a,c)}function s1(){}var Sk=a1,Tu=!1,k0=!1;function l1(){(pp!==null||hp!==null)&&(s1(),bk())}function LR(e,t,n){if(k0)return e(t,n);k0=!0;try{return Sk(e,t,n)}finally{k0=!1,l1()}}function Fd(e,t){var n=e.stateNode;if(n===null)return null;var a=Cg(n);if(a===null)return null;n=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(ft(231,t,typeof n));return n}var G_=!1;if(Vs)try{var Gh={};Object.defineProperty(Gh,"passive",{get:function(){G_=!0}}),window.addEventListener("test",Gh,Gh),window.removeEventListener("test",Gh,Gh)}catch{G_=!1}function zR(e,t,n,a,c,f,o,v,x){var E=Array.prototype.slice.call(arguments,3);try{t.apply(n,E)}catch(T){this.onError(T)}}var Ed=!1,Ty=null,Iy=!1,H_=null,DR={onError:function(e){Ed=!0,Ty=e}};function OR(e,t,n,a,c,f,o,v,x){Ed=!1,Ty=null,zR.apply(DR,arguments)}function BR(e,t,n,a,c,f,o,v,x){if(OR.apply(this,arguments),Ed){if(Ed){var E=Ty;Ed=!1,Ty=null}else throw Error(ft(198));Iy||(Iy=!0,H_=E)}}function Vu(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&1026&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Ek(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function v2(e){if(Vu(e)!==e)throw Error(ft(188))}function NR(e){var t=e.alternate;if(!t){if(t=Vu(e),t===null)throw Error(ft(188));return t!==e?null:e}for(var n=e,a=t;;){var c=n.return;if(c===null)break;var f=c.alternate;if(f===null){if(a=c.return,a!==null){n=a;continue}break}if(c.child===f.child){for(f=c.child;f;){if(f===n)return v2(c),e;if(f===a)return v2(c),t;f=f.sibling}throw Error(ft(188))}if(n.return!==a.return)n=c,a=f;else{for(var o=!1,v=c.child;v;){if(v===n){o=!0,n=c,a=f;break}if(v===a){o=!0,a=c,n=f;break}v=v.sibling}if(!o){for(v=f.child;v;){if(v===n){o=!0,n=f,a=c;break}if(v===a){o=!0,a=f,n=c;break}v=v.sibling}if(!o)throw Error(ft(189))}}if(n.alternate!==a)throw Error(ft(190))}if(n.tag!==3)throw Error(ft(188));return n.stateNode.current===n?e:t}function Ck(e){if(e=NR(e),!e)return null;for(var t=e;;){if(t.tag===5||t.tag===6)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function _2(e,t){for(var n=e.alternate;t!==null;){if(t===e||t===n)return!0;t=t.return}return!1}var kk,u1,Tk,Ik,Z_=!1,Ya=[],bl=null,wl=null,Sl=null,jd=new Map,Ud=new Map,Hh=[],x2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function K_(e,t,n,a,c){return{blockedOn:e,domEventName:t,eventSystemFlags:n|16,nativeEvent:c,targetContainers:[a]}}function b2(e,t){switch(e){case"focusin":case"focusout":bl=null;break;case"dragenter":case"dragleave":wl=null;break;case"mouseover":case"mouseout":Sl=null;break;case"pointerover":case"pointerout":jd.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ud.delete(t.pointerId)}}function Zh(e,t,n,a,c,f){return e===null||e.nativeEvent!==f?(e=K_(t,n,a,c,f),t!==null&&(t=uf(t),t!==null&&u1(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function FR(e,t,n,a,c){switch(t){case"focusin":return bl=Zh(bl,e,t,n,a,c),!0;case"dragenter":return wl=Zh(wl,e,t,n,a,c),!0;case"mouseover":return Sl=Zh(Sl,e,t,n,a,c),!0;case"pointerover":var f=c.pointerId;return jd.set(f,Zh(jd.get(f)||null,e,t,n,a,c)),!0;case"gotpointercapture":return f=c.pointerId,Ud.set(f,Zh(Ud.get(f)||null,e,t,n,a,c)),!0}return!1}function jR(e){var t=Iu(e.target);if(t!==null){var n=Vu(t);if(n!==null){if(t=n.tag,t===13){if(t=Ek(n),t!==null){e.blockedOn=t,Ik(e.lanePriority,function(){ki.unstable_runWithPriority(e.priority,function(){Tk(n)})});return}}else if(t===3&&n.stateNode.hydrate){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ny(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=d1(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n!==null)return t=uf(n),t!==null&&u1(t),e.blockedOn=n,!1;t.shift()}return!0}function w2(e,t,n){ny(e)&&n.delete(t)}function UR(){for(Z_=!1;0<Ya.length;){var e=Ya[0];if(e.blockedOn!==null){e=uf(e.blockedOn),e!==null&&kk(e);break}for(var t=e.targetContainers;0<t.length;){var n=d1(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n!==null){e.blockedOn=n;break}t.shift()}e.blockedOn===null&&Ya.shift()}bl!==null&&ny(bl)&&(bl=null),wl!==null&&ny(wl)&&(wl=null),Sl!==null&&ny(Sl)&&(Sl=null),jd.forEach(w2),Ud.forEach(w2)}function Kh(e,t){e.blockedOn===t&&(e.blockedOn=null,Z_||(Z_=!0,ki.unstable_scheduleCallback(ki.unstable_NormalPriority,UR)))}function Pk(e){function t(c){return Kh(c,e)}if(0<Ya.length){Kh(Ya[0],e);for(var n=1;n<Ya.length;n++){var a=Ya[n];a.blockedOn===e&&(a.blockedOn=null)}}for(bl!==null&&Kh(bl,e),wl!==null&&Kh(wl,e),Sl!==null&&Kh(Sl,e),jd.forEach(t),Ud.forEach(t),n=0;n<Hh.length;n++)a=Hh[n],a.blockedOn===e&&(a.blockedOn=null);for(;0<Hh.length&&(n=Hh[0],n.blockedOn===null);)jR(n),n.blockedOn===null&&Hh.shift()}function Om(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var tp={animationend:Om("Animation","AnimationEnd"),animationiteration:Om("Animation","AnimationIteration"),animationstart:Om("Animation","AnimationStart"),transitionend:Om("Transition","TransitionEnd")},T0={},Ak={};Vs&&(Ak=document.createElement("div").style,"AnimationEvent"in window||(delete tp.animationend.animation,delete tp.animationiteration.animation,delete tp.animationstart.animation),"TransitionEvent"in window||delete tp.transitionend.transition);function xg(e){if(T0[e])return T0[e];if(!tp[e])return e;var t=tp[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Ak)return T0[e]=t[n];return e}var Mk=xg("animationend"),Rk=xg("animationiteration"),Lk=xg("animationstart"),zk=xg("transitionend"),Dk=new Map,c1=new Map,$R=["abort","abort",Mk,"animationEnd",Rk,"animationIteration",Lk,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",zk,"transitionEnd","waiting","waiting"];function p1(e,t){for(var n=0;n<e.length;n+=2){var a=e[n],c=e[n+1];c="on"+(c[0].toUpperCase()+c.slice(1)),c1.set(a,t),Dk.set(a,c),Uu(c,[a])}}var VR=ki.unstable_now;VR();var xn=8;function Xc(e){if(1&e)return xn=15,1;if(2&e)return xn=14,2;if(4&e)return xn=13,4;var t=24&e;return t!==0?(xn=12,t):e&32?(xn=11,32):(t=192&e,t!==0?(xn=10,t):e&256?(xn=9,256):(t=3584&e,t!==0?(xn=8,t):e&4096?(xn=7,4096):(t=4186112&e,t!==0?(xn=6,t):(t=62914560&e,t!==0?(xn=5,t):e&67108864?(xn=4,67108864):e&134217728?(xn=3,134217728):(t=805306368&e,t!==0?(xn=2,t):1073741824&e?(xn=1,1073741824):(xn=8,e))))))}function qR(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function WR(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(ft(358,e))}}function $d(e,t){var n=e.pendingLanes;if(n===0)return xn=0;var a=0,c=0,f=e.expiredLanes,o=e.suspendedLanes,v=e.pingedLanes;if(f!==0)a=f,c=xn=15;else if(f=n&134217727,f!==0){var x=f&~o;x!==0?(a=Xc(x),c=xn):(v&=f,v!==0&&(a=Xc(v),c=xn))}else f=n&~o,f!==0?(a=Xc(f),c=xn):v!==0&&(a=Xc(v),c=xn);if(a===0)return 0;if(a=31-Ml(a),a=n&((0>a?0:1<<a)<<1)-1,t!==0&&t!==a&&!(t&o)){if(Xc(t),c<=xn)return t;xn=c}if(t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)n=31-Ml(t),c=1<<n,a|=e[n],t&=~c;return a}function Ok(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Py(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return e=Yc(24&~t),e===0?Py(10,t):e;case 10:return e=Yc(192&~t),e===0?Py(8,t):e;case 8:return e=Yc(3584&~t),e===0&&(e=Yc(4186112&~t),e===0&&(e=512)),e;case 2:return t=Yc(805306368&~t),t===0&&(t=268435456),t}throw Error(ft(358,e))}function Yc(e){return e&-e}function I0(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function bg(e,t,n){e.pendingLanes|=t;var a=t-1;e.suspendedLanes&=a,e.pingedLanes&=a,e=e.eventTimes,t=31-Ml(t),e[t]=n}var Ml=Math.clz32?Math.clz32:ZR,GR=Math.log,HR=Math.LN2;function ZR(e){return e===0?32:31-(GR(e)/HR|0)|0}var KR=ki.unstable_UserBlockingPriority,XR=ki.unstable_runWithPriority,iy=!0;function YR(e,t,n,a){Tu||s1();var c=h1,f=Tu;Tu=!0;try{wk(c,e,t,n,a)}finally{(Tu=f)||l1()}}function JR(e,t,n,a){XR(KR,h1.bind(null,e,t,n,a))}function h1(e,t,n,a){if(iy){var c;if((c=(t&4)===0)&&0<Ya.length&&-1<x2.indexOf(e))e=K_(null,e,t,n,a),Ya.push(e);else{var f=d1(e,t,n,a);if(f===null)c&&b2(e,a);else{if(c){if(-1<x2.indexOf(e)){e=K_(f,e,t,n,a),Ya.push(e);return}if(FR(f,e,t,n,a))return;b2(e,a)}Kk(e,t,a,null,n)}}}}function d1(e,t,n,a){var c=o1(a);if(c=Iu(c),c!==null){var f=Vu(c);if(f===null)c=null;else{var o=f.tag;if(o===13){if(c=Ek(f),c!==null)return c;c=null}else if(o===3){if(f.stateNode.hydrate)return f.tag===3?f.stateNode.containerInfo:null;c=null}else f!==c&&(c=null)}}return Kk(e,t,a,c,n),null}var gl=null,f1=null,oy=null;function Bk(){if(oy)return oy;var e,t=f1,n=t.length,a,c="value"in gl?gl.value:gl.textContent,f=c.length;for(e=0;e<n&&t[e]===c[e];e++);var o=n-e;for(a=1;a<=o&&t[n-a]===c[f-a];a++);return oy=c.slice(e,1<a?1-a:void 0)}function ay(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Bm(){return!0}function S2(){return!1}function Vo(e){function t(n,a,c,f,o){this._reactName=n,this._targetInst=c,this.type=a,this.nativeEvent=f,this.target=o,this.currentTarget=null;for(var v in e)e.hasOwnProperty(v)&&(n=e[v],this[v]=n?n(f):f[v]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Bm:S2,this.isPropagationStopped=S2,this}return Dn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Bm)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Bm)},persist:function(){},isPersistent:Bm}),t}var Fp={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},m1=Vo(Fp),lf=Dn({},Fp,{view:0,detail:0}),QR=Vo(lf),P0,A0,Xh,wg=Dn({},lf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:y1,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Xh&&(Xh&&e.type==="mousemove"?(P0=e.screenX-Xh.screenX,A0=e.screenY-Xh.screenY):A0=P0=0,Xh=e),P0)},movementY:function(e){return"movementY"in e?e.movementY:A0}}),E2=Vo(wg),e3=Dn({},wg,{dataTransfer:0}),t3=Vo(e3),r3=Dn({},lf,{relatedTarget:0}),M0=Vo(r3),n3=Dn({},Fp,{animationName:0,elapsedTime:0,pseudoElement:0}),i3=Vo(n3),o3=Dn({},Fp,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),a3=Vo(o3),s3=Dn({},Fp,{data:0}),C2=Vo(s3),l3={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},u3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},c3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function p3(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=c3[e])?!!t[e]:!1}function y1(){return p3}var h3=Dn({},lf,{key:function(e){if(e.key){var t=l3[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ay(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?u3[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:y1,charCode:function(e){return e.type==="keypress"?ay(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ay(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),f3=Vo(h3),m3=Dn({},wg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),k2=Vo(m3),y3=Dn({},lf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:y1}),g3=Vo(y3),v3=Dn({},Fp,{propertyName:0,elapsedTime:0,pseudoElement:0}),_3=Vo(v3),x3=Dn({},wg,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),b3=Vo(x3),w3=[9,13,27,32],g1=Vs&&"CompositionEvent"in window,Cd=null;Vs&&"documentMode"in document&&(Cd=document.documentMode);var S3=Vs&&"TextEvent"in window&&!Cd,Nk=Vs&&(!g1||Cd&&8<Cd&&11>=Cd),T2=String.fromCharCode(32),I2=!1;function Fk(e,t){switch(e){case"keyup":return w3.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jk(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var rp=!1;function E3(e,t){switch(e){case"compositionend":return jk(t);case"keypress":return t.which!==32?null:(I2=!0,T2);case"textInput":return e=t.data,e===T2&&I2?null:e;default:return null}}function C3(e,t){if(rp)return e==="compositionend"||!g1&&Fk(e,t)?(e=Bk(),oy=f1=gl=null,rp=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Nk&&t.locale!=="ko"?null:t.data;default:return null}}var k3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function P2(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!k3[e.type]:t==="textarea"}function Uk(e,t,n,a){xk(a),t=Ay(t,"onChange"),0<t.length&&(n=new m1("onChange","change",null,n,a),e.push({event:n,listeners:t}))}var kd=null,Vd=null;function T3(e){Gk(e,0)}function Sg(e){var t=ip(e);if(dk(t))return e}function I3(e,t){if(e==="change")return t}var $k=!1;if(Vs){var R0;if(Vs){var L0="oninput"in document;if(!L0){var A2=document.createElement("div");A2.setAttribute("oninput","return;"),L0=typeof A2.oninput=="function"}R0=L0}else R0=!1;$k=R0&&(!document.documentMode||9<document.documentMode)}function M2(){kd&&(kd.detachEvent("onpropertychange",Vk),Vd=kd=null)}function Vk(e){if(e.propertyName==="value"&&Sg(Vd)){var t=[];if(Uk(t,Vd,e,o1(e)),e=T3,Tu)e(t);else{Tu=!0;try{a1(e,t)}finally{Tu=!1,l1()}}}}function P3(e,t,n){e==="focusin"?(M2(),kd=t,Vd=n,kd.attachEvent("onpropertychange",Vk)):e==="focusout"&&M2()}function A3(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Sg(Vd)}function M3(e,t){if(e==="click")return Sg(t)}function R3(e,t){if(e==="input"||e==="change")return Sg(t)}function L3(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ta=typeof Object.is=="function"?Object.is:L3,z3=Object.prototype.hasOwnProperty;function qd(e,t){if(ta(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++)if(!z3.call(t,n[a])||!ta(e[n[a]],t[n[a]]))return!1;return!0}function R2(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function L2(e,t){var n=R2(e);e=0;for(var a;n;){if(n.nodeType===3){if(a=e+n.textContent.length,e<=t&&a>=t)return{node:n,offset:t-e};e=a}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=R2(n)}}function qk(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?qk(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function z2(){for(var e=window,t=ky();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ky(e.document)}return t}function X_(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var D3=Vs&&"documentMode"in document&&11>=document.documentMode,np=null,Y_=null,Td=null,J_=!1;function D2(e,t,n){var a=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;J_||np==null||np!==ky(a)||(a=np,"selectionStart"in a&&X_(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Td&&qd(Td,a)||(Td=a,a=Ay(Y_,"onSelect"),0<a.length&&(t=new m1("onSelect","select",null,t,n),e.push({event:t,listeners:a}),t.target=np)))}p1("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);p1("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);p1($R,2);for(var O2="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),z0=0;z0<O2.length;z0++)c1.set(O2[z0],0);Ep("onMouseEnter",["mouseout","mouseover"]);Ep("onMouseLeave",["mouseout","mouseover"]);Ep("onPointerEnter",["pointerout","pointerover"]);Ep("onPointerLeave",["pointerout","pointerover"]);Uu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Uu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Uu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Uu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Uu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Uu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var dd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Wk=new Set("cancel close invalid load scroll toggle".split(" ").concat(dd));function B2(e,t,n){var a=e.type||"unknown-event";e.currentTarget=n,BR(a,t,void 0,e),e.currentTarget=null}function Gk(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var a=e[n],c=a.event;a=a.listeners;e:{var f=void 0;if(t)for(var o=a.length-1;0<=o;o--){var v=a[o],x=v.instance,E=v.currentTarget;if(v=v.listener,x!==f&&c.isPropagationStopped())break e;B2(c,v,E),f=x}else for(o=0;o<a.length;o++){if(v=a[o],x=v.instance,E=v.currentTarget,v=v.listener,x!==f&&c.isPropagationStopped())break e;B2(c,v,E),f=x}}}if(Iy)throw e=H_,Iy=!1,H_=null,e}function Pn(e,t){var n=Yk(t),a=e+"__bubble";n.has(a)||(Zk(t,e,2,!1),n.add(a))}var N2="_reactListening"+Math.random().toString(36).slice(2);function Hk(e){e[N2]||(e[N2]=!0,ck.forEach(function(t){Wk.has(t)||F2(t,!1,e,null),F2(t,!0,e,null)}))}function F2(e,t,n,a){var c=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,f=n;if(e==="selectionchange"&&n.nodeType!==9&&(f=n.ownerDocument),a!==null&&!t&&Wk.has(e)){if(e!=="scroll")return;c|=2,f=a}var o=Yk(f),v=e+"__"+(t?"capture":"bubble");o.has(v)||(t&&(c|=4),Zk(f,e,c,t),o.add(v))}function Zk(e,t,n,a){var c=c1.get(t);switch(c===void 0?2:c){case 0:c=YR;break;case 1:c=JR;break;default:c=h1}n=c.bind(null,t,n,e),c=void 0,!G_||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),a?c!==void 0?e.addEventListener(t,n,{capture:!0,passive:c}):e.addEventListener(t,n,!0):c!==void 0?e.addEventListener(t,n,{passive:c}):e.addEventListener(t,n,!1)}function Kk(e,t,n,a,c){var f=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var o=a.tag;if(o===3||o===4){var v=a.stateNode.containerInfo;if(v===c||v.nodeType===8&&v.parentNode===c)break;if(o===4)for(o=a.return;o!==null;){var x=o.tag;if((x===3||x===4)&&(x=o.stateNode.containerInfo,x===c||x.nodeType===8&&x.parentNode===c))return;o=o.return}for(;v!==null;){if(o=Iu(v),o===null)return;if(x=o.tag,x===5||x===6){a=f=o;continue e}v=v.parentNode}}a=a.return}LR(function(){var E=f,T=o1(n),P=[];e:{var I=Dk.get(e);if(I!==void 0){var q=m1,U=e;switch(e){case"keypress":if(ay(n)===0)break e;case"keydown":case"keyup":q=f3;break;case"focusin":U="focus",q=M0;break;case"focusout":U="blur",q=M0;break;case"beforeblur":case"afterblur":q=M0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":q=E2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":q=t3;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":q=g3;break;case Mk:case Rk:case Lk:q=i3;break;case zk:q=_3;break;case"scroll":q=QR;break;case"wheel":q=b3;break;case"copy":case"cut":case"paste":q=a3;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":q=k2}var G=(t&4)!==0,D=!G&&e==="scroll",F=G?I!==null?I+"Capture":null:I;G=[];for(var V=E,B;V!==null;){B=V;var z=B.stateNode;if(B.tag===5&&z!==null&&(B=z,F!==null&&(z=Fd(V,F),z!=null&&G.push(Wd(V,z,B)))),D)break;V=V.return}0<G.length&&(I=new q(I,U,null,n,T),P.push({event:I,listeners:G}))}}if(!(t&7)){e:{if(I=e==="mouseover"||e==="pointerover",q=e==="mouseout"||e==="pointerout",I&&!(t&16)&&(U=n.relatedTarget||n.fromElement)&&(Iu(U)||U[jp]))break e;if((q||I)&&(I=T.window===T?T:(I=T.ownerDocument)?I.defaultView||I.parentWindow:window,q?(U=n.relatedTarget||n.toElement,q=E,U=U?Iu(U):null,U!==null&&(D=Vu(U),U!==D||U.tag!==5&&U.tag!==6)&&(U=null)):(q=null,U=E),q!==U)){if(G=E2,z="onMouseLeave",F="onMouseEnter",V="mouse",(e==="pointerout"||e==="pointerover")&&(G=k2,z="onPointerLeave",F="onPointerEnter",V="pointer"),D=q==null?I:ip(q),B=U==null?I:ip(U),I=new G(z,V+"leave",q,n,T),I.target=D,I.relatedTarget=B,z=null,Iu(T)===E&&(G=new G(F,V+"enter",U,n,T),G.target=B,G.relatedTarget=D,z=G),D=z,q&&U)t:{for(G=q,F=U,V=0,B=G;B;B=jc(B))V++;for(B=0,z=F;z;z=jc(z))B++;for(;0<V-B;)G=jc(G),V--;for(;0<B-V;)F=jc(F),B--;for(;V--;){if(G===F||F!==null&&G===F.alternate)break t;G=jc(G),F=jc(F)}G=null}else G=null;q!==null&&j2(P,I,q,G,!1),U!==null&&D!==null&&j2(P,D,U,G,!0)}}e:{if(I=E?ip(E):window,q=I.nodeName&&I.nodeName.toLowerCase(),q==="select"||q==="input"&&I.type==="file")var ne=I3;else if(P2(I))if($k)ne=R3;else{ne=A3;var oe=P3}else(q=I.nodeName)&&q.toLowerCase()==="input"&&(I.type==="checkbox"||I.type==="radio")&&(ne=M3);if(ne&&(ne=ne(e,E))){Uk(P,ne,n,T);break e}oe&&oe(e,I,E),e==="focusout"&&(oe=I._wrapperState)&&oe.controlled&&I.type==="number"&&N_(I,"number",I.value)}switch(oe=E?ip(E):window,e){case"focusin":(P2(oe)||oe.contentEditable==="true")&&(np=oe,Y_=E,Td=null);break;case"focusout":Td=Y_=np=null;break;case"mousedown":J_=!0;break;case"contextmenu":case"mouseup":case"dragend":J_=!1,D2(P,n,T);break;case"selectionchange":if(D3)break;case"keydown":case"keyup":D2(P,n,T)}var pe;if(g1)e:{switch(e){case"compositionstart":var be="onCompositionStart";break e;case"compositionend":be="onCompositionEnd";break e;case"compositionupdate":be="onCompositionUpdate";break e}be=void 0}else rp?Fk(e,n)&&(be="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(be="onCompositionStart");be&&(Nk&&n.locale!=="ko"&&(rp||be!=="onCompositionStart"?be==="onCompositionEnd"&&rp&&(pe=Bk()):(gl=T,f1="value"in gl?gl.value:gl.textContent,rp=!0)),oe=Ay(E,be),0<oe.length&&(be=new C2(be,e,null,n,T),P.push({event:be,listeners:oe}),pe?be.data=pe:(pe=jk(n),pe!==null&&(be.data=pe)))),(pe=S3?E3(e,n):C3(e,n))&&(E=Ay(E,"onBeforeInput"),0<E.length&&(T=new C2("onBeforeInput","beforeinput",null,n,T),P.push({event:T,listeners:E}),T.data=pe))}Gk(P,t)})}function Wd(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ay(e,t){for(var n=t+"Capture",a=[];e!==null;){var c=e,f=c.stateNode;c.tag===5&&f!==null&&(c=f,f=Fd(e,n),f!=null&&a.unshift(Wd(e,f,c)),f=Fd(e,t),f!=null&&a.push(Wd(e,f,c))),e=e.return}return a}function jc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function j2(e,t,n,a,c){for(var f=t._reactName,o=[];n!==null&&n!==a;){var v=n,x=v.alternate,E=v.stateNode;if(x!==null&&x===a)break;v.tag===5&&E!==null&&(v=E,c?(x=Fd(n,f),x!=null&&o.unshift(Wd(n,x,v))):c||(x=Fd(n,f),x!=null&&o.push(Wd(n,x,v)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}function My(){}var D0=null,O0=null;function Xk(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Q_(e,t){return e==="textarea"||e==="option"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var U2=typeof setTimeout=="function"?setTimeout:void 0,O3=typeof clearTimeout=="function"?clearTimeout:void 0;function v1(e){e.nodeType===1?e.textContent="":e.nodeType===9&&(e=e.body,e!=null&&(e.textContent=""))}function dp(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break}return e}function $2(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var B0=0;function B3(e){return{$$typeof:n1,toString:e,valueOf:e}}var Eg=Math.random().toString(36).slice(2),vl="__reactFiber$"+Eg,Ry="__reactProps$"+Eg,jp="__reactContainer$"+Eg,V2="__reactEvents$"+Eg;function Iu(e){var t=e[vl];if(t)return t;for(var n=e.parentNode;n;){if(t=n[jp]||n[vl]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=$2(e);e!==null;){if(n=e[vl])return n;e=$2(e)}return t}e=n,n=e.parentNode}return null}function uf(e){return e=e[vl]||e[jp],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ip(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ft(33))}function Cg(e){return e[Ry]||null}function Yk(e){var t=e[V2];return t===void 0&&(t=e[V2]=new Set),t}var ex=[],op=-1;function Nl(e){return{current:e}}function An(e){0>op||(e.current=ex[op],ex[op]=null,op--)}function Kn(e,t){op++,ex[op]=e.current,e.current=t}var Rl={},Qi=Nl(Rl),So=Nl(!1),Du=Rl;function Cp(e,t){var n=e.type.contextTypes;if(!n)return Rl;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var c={},f;for(f in n)c[f]=t[f];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function Eo(e){return e=e.childContextTypes,e!=null}function Ly(){An(So),An(Qi)}function q2(e,t,n){if(Qi.current!==Rl)throw Error(ft(168));Kn(Qi,t),Kn(So,n)}function Jk(e,t,n){var a=e.stateNode;if(e=t.childContextTypes,typeof a.getChildContext!="function")return n;a=a.getChildContext();for(var c in a)if(!(c in e))throw Error(ft(108,up(t)||"Unknown",c));return Dn({},n,a)}function sy(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Rl,Du=Qi.current,Kn(Qi,e),Kn(So,So.current),!0}function W2(e,t,n){var a=e.stateNode;if(!a)throw Error(ft(169));n?(e=Jk(e,t,Du),a.__reactInternalMemoizedMergedChildContext=e,An(So),An(Qi),Kn(Qi,e)):An(So),Kn(So,n)}var _1=null,Lu=null,N3=ki.unstable_runWithPriority,x1=ki.unstable_scheduleCallback,tx=ki.unstable_cancelCallback,F3=ki.unstable_shouldYield,G2=ki.unstable_requestPaint,rx=ki.unstable_now,j3=ki.unstable_getCurrentPriorityLevel,kg=ki.unstable_ImmediatePriority,Qk=ki.unstable_UserBlockingPriority,eT=ki.unstable_NormalPriority,tT=ki.unstable_LowPriority,rT=ki.unstable_IdlePriority,N0={},U3=G2!==void 0?G2:function(){},Os=null,ly=null,F0=!1,H2=rx(),Yi=1e4>H2?rx:function(){return rx()-H2};function kp(){switch(j3()){case kg:return 99;case Qk:return 98;case eT:return 97;case tT:return 96;case rT:return 95;default:throw Error(ft(332))}}function nT(e){switch(e){case 99:return kg;case 98:return Qk;case 97:return eT;case 96:return tT;case 95:return rT;default:throw Error(ft(332))}}function Ou(e,t){return e=nT(e),N3(e,t)}function Gd(e,t,n){return e=nT(e),x1(e,t,n)}function as(){if(ly!==null){var e=ly;ly=null,tx(e)}iT()}function iT(){if(!F0&&Os!==null){F0=!0;var e=0;try{var t=Os;Ou(99,function(){for(;e<t.length;e++){var n=t[e];do n=n(!0);while(n!==null)}}),Os=null}catch(n){throw Os!==null&&(Os=Os.slice(e+1)),x1(kg,as),n}finally{F0=!1}}}var $3=$u.ReactCurrentBatchConfig;function va(e,t){if(e&&e.defaultProps){t=Dn({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var zy=Nl(null),Dy=null,ap=null,Oy=null;function b1(){Oy=ap=Dy=null}function w1(e){var t=zy.current;An(zy),e.type._context._currentValue=t}function oT(e,t){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)===t){if(n===null||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,n!==null&&(n.childLanes|=t);e=e.return}}function fp(e,t){Dy=e,Oy=ap=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(wa=!0),e.firstContext=null)}function ia(e,t){if(Oy!==e&&t!==!1&&t!==0)if((typeof t!="number"||t===1073741823)&&(Oy=e,t=1073741823),t={context:e,observedBits:t,next:null},ap===null){if(Dy===null)throw Error(ft(308));ap=t,Dy.dependencies={lanes:0,firstContext:t,responders:null}}else ap=ap.next=t;return e._currentValue}var ml=!1;function S1(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function aT(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function El(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Cl(e,t){if(e=e.updateQueue,e!==null){e=e.shared;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function Z2(e,t){var n=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,n===a)){var c=null,f=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};f===null?c=f=o:f=f.next=o,n=n.next}while(n!==null);f===null?c=f=t:f=f.next=t}else c=f=t;n={baseState:a.baseState,firstBaseUpdate:c,lastBaseUpdate:f,shared:a.shared,effects:a.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Hd(e,t,n,a){var c=e.updateQueue;ml=!1;var f=c.firstBaseUpdate,o=c.lastBaseUpdate,v=c.shared.pending;if(v!==null){c.shared.pending=null;var x=v,E=x.next;x.next=null,o===null?f=E:o.next=E,o=x;var T=e.alternate;if(T!==null){T=T.updateQueue;var P=T.lastBaseUpdate;P!==o&&(P===null?T.firstBaseUpdate=E:P.next=E,T.lastBaseUpdate=x)}}if(f!==null){P=c.baseState,o=0,T=E=x=null;do{v=f.lane;var I=f.eventTime;if((a&v)===v){T!==null&&(T=T.next={eventTime:I,lane:0,tag:f.tag,payload:f.payload,callback:f.callback,next:null});e:{var q=e,U=f;switch(v=t,I=n,U.tag){case 1:if(q=U.payload,typeof q=="function"){P=q.call(I,P,v);break e}P=q;break e;case 3:q.flags=q.flags&-4097|64;case 0:if(q=U.payload,v=typeof q=="function"?q.call(I,P,v):q,v==null)break e;P=Dn({},P,v);break e;case 2:ml=!0}}f.callback!==null&&(e.flags|=32,v=c.effects,v===null?c.effects=[f]:v.push(f))}else I={eventTime:I,lane:v,tag:f.tag,payload:f.payload,callback:f.callback,next:null},T===null?(E=T=I,x=P):T=T.next=I,o|=v;if(f=f.next,f===null){if(v=c.shared.pending,v===null)break;f=v.next,v.next=null,c.lastBaseUpdate=v,c.shared.pending=null}}while(1);T===null&&(x=P),c.baseState=x,c.firstBaseUpdate=E,c.lastBaseUpdate=T,pf|=o,e.lanes=o,e.memoizedState=P}}function K2(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],c=a.callback;if(c!==null){if(a.callback=null,a=n,typeof c!="function")throw Error(ft(191,c));c.call(a)}}}var sT=new gg.Component().refs;function By(e,t,n,a){t=e.memoizedState,n=n(a,t),n=n==null?t:Dn({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Tg={isMounted:function(e){return(e=e._reactInternals)?Vu(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var a=jo(),c=kl(e),f=El(a,c);f.payload=t,n!=null&&(f.callback=n),Cl(e,f),Tl(e,c,a)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var a=jo(),c=kl(e),f=El(a,c);f.tag=1,f.payload=t,n!=null&&(f.callback=n),Cl(e,f),Tl(e,c,a)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=jo(),a=kl(e),c=El(n,a);c.tag=2,t!=null&&(c.callback=t),Cl(e,c),Tl(e,a,n)}};function X2(e,t,n,a,c,f,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,f,o):t.prototype&&t.prototype.isPureReactComponent?!qd(n,a)||!qd(c,f):!0}function lT(e,t,n){var a=!1,c=Rl,f=t.contextType;return typeof f=="object"&&f!==null?f=ia(f):(c=Eo(t)?Du:Qi.current,a=t.contextTypes,f=(a=a!=null)?Cp(e,c):Rl),t=new t(n,f),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Tg,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=f),t}function Y2(e,t,n,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,a),t.state!==e&&Tg.enqueueReplaceState(t,t.state,null)}function nx(e,t,n,a){var c=e.stateNode;c.props=n,c.state=e.memoizedState,c.refs=sT,S1(e);var f=t.contextType;typeof f=="object"&&f!==null?c.context=ia(f):(f=Eo(t)?Du:Qi.current,c.context=Cp(e,f)),Hd(e,n,c,a),c.state=e.memoizedState,f=t.getDerivedStateFromProps,typeof f=="function"&&(By(e,t,f,n),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&Tg.enqueueReplaceState(c,c.state,null),Hd(e,n,c,a),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4)}var Nm=Array.isArray;function Yh(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ft(309));var a=n.stateNode}if(!a)throw Error(ft(147,e));var c=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===c?t.ref:(t=function(f){var o=a.refs;o===sT&&(o=a.refs={}),f===null?delete o[c]:o[c]=f},t._stringRef=c,t)}if(typeof e!="string")throw Error(ft(284));if(!n._owner)throw Error(ft(290,e))}return e}function Fm(e,t){if(e.type!=="textarea")throw Error(ft(31,Object.prototype.toString.call(t)==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function uT(e){function t(D,F){if(e){var V=D.lastEffect;V!==null?(V.nextEffect=F,D.lastEffect=F):D.firstEffect=D.lastEffect=F,F.nextEffect=null,F.flags=8}}function n(D,F){if(!e)return null;for(;F!==null;)t(D,F),F=F.sibling;return null}function a(D,F){for(D=new Map;F!==null;)F.key!==null?D.set(F.key,F):D.set(F.index,F),F=F.sibling;return D}function c(D,F){return D=zl(D,F),D.index=0,D.sibling=null,D}function f(D,F,V){return D.index=V,e?(V=D.alternate,V!==null?(V=V.index,V<F?(D.flags=2,F):V):(D.flags=2,F)):F}function o(D){return e&&D.alternate===null&&(D.flags=2),D}function v(D,F,V,B){return F===null||F.tag!==6?(F=q0(V,D.mode,B),F.return=D,F):(F=c(F,V),F.return=D,F)}function x(D,F,V,B){return F!==null&&F.elementType===V.type?(B=c(F,V.props),B.ref=Yh(D,F,V),B.return=D,B):(B=hy(V.type,V.key,V.props,null,D.mode,B),B.ref=Yh(D,F,V),B.return=D,B)}function E(D,F,V,B){return F===null||F.tag!==4||F.stateNode.containerInfo!==V.containerInfo||F.stateNode.implementation!==V.implementation?(F=W0(V,D.mode,B),F.return=D,F):(F=c(F,V.children||[]),F.return=D,F)}function T(D,F,V,B,z){return F===null||F.tag!==7?(F=vp(V,D.mode,B,z),F.return=D,F):(F=c(F,V),F.return=D,F)}function P(D,F,V){if(typeof F=="string"||typeof F=="number")return F=q0(""+F,D.mode,V),F.return=D,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case pd:return V=hy(F.type,F.key,F.props,null,D.mode,V),V.ref=Yh(D,null,F),V.return=D,V;case ku:return F=W0(F,D.mode,V),F.return=D,F}if(Nm(F)||Wh(F))return F=vp(F,D.mode,V,null),F.return=D,F;Fm(D,F)}return null}function I(D,F,V,B){var z=F!==null?F.key:null;if(typeof V=="string"||typeof V=="number")return z!==null?null:v(D,F,""+V,B);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case pd:return V.key===z?V.type===yl?T(D,F,V.props.children,B,z):x(D,F,V,B):null;case ku:return V.key===z?E(D,F,V,B):null}if(Nm(V)||Wh(V))return z!==null?null:T(D,F,V,B,null);Fm(D,V)}return null}function q(D,F,V,B,z){if(typeof B=="string"||typeof B=="number")return D=D.get(V)||null,v(F,D,""+B,z);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case pd:return D=D.get(B.key===null?V:B.key)||null,B.type===yl?T(F,D,B.props.children,z,B.key):x(F,D,B,z);case ku:return D=D.get(B.key===null?V:B.key)||null,E(F,D,B,z)}if(Nm(B)||Wh(B))return D=D.get(V)||null,T(F,D,B,z,null);Fm(F,B)}return null}function U(D,F,V,B){for(var z=null,ne=null,oe=F,pe=F=0,be=null;oe!==null&&pe<V.length;pe++){oe.index>pe?(be=oe,oe=null):be=oe.sibling;var Te=I(D,oe,V[pe],B);if(Te===null){oe===null&&(oe=be);break}e&&oe&&Te.alternate===null&&t(D,oe),F=f(Te,F,pe),ne===null?z=Te:ne.sibling=Te,ne=Te,oe=be}if(pe===V.length)return n(D,oe),z;if(oe===null){for(;pe<V.length;pe++)oe=P(D,V[pe],B),oe!==null&&(F=f(oe,F,pe),ne===null?z=oe:ne.sibling=oe,ne=oe);return z}for(oe=a(D,oe);pe<V.length;pe++)be=q(oe,D,pe,V[pe],B),be!==null&&(e&&be.alternate!==null&&oe.delete(be.key===null?pe:be.key),F=f(be,F,pe),ne===null?z=be:ne.sibling=be,ne=be);return e&&oe.forEach(function(_e){return t(D,_e)}),z}function G(D,F,V,B){var z=Wh(V);if(typeof z!="function")throw Error(ft(150));if(V=z.call(V),V==null)throw Error(ft(151));for(var ne=z=null,oe=F,pe=F=0,be=null,Te=V.next();oe!==null&&!Te.done;pe++,Te=V.next()){oe.index>pe?(be=oe,oe=null):be=oe.sibling;var _e=I(D,oe,Te.value,B);if(_e===null){oe===null&&(oe=be);break}e&&oe&&_e.alternate===null&&t(D,oe),F=f(_e,F,pe),ne===null?z=_e:ne.sibling=_e,ne=_e,oe=be}if(Te.done)return n(D,oe),z;if(oe===null){for(;!Te.done;pe++,Te=V.next())Te=P(D,Te.value,B),Te!==null&&(F=f(Te,F,pe),ne===null?z=Te:ne.sibling=Te,ne=Te);return z}for(oe=a(D,oe);!Te.done;pe++,Te=V.next())Te=q(oe,D,pe,Te.value,B),Te!==null&&(e&&Te.alternate!==null&&oe.delete(Te.key===null?pe:Te.key),F=f(Te,F,pe),ne===null?z=Te:ne.sibling=Te,ne=Te);return e&&oe.forEach(function(Se){return t(D,Se)}),z}return function(D,F,V,B){var z=typeof V=="object"&&V!==null&&V.type===yl&&V.key===null;z&&(V=V.props.children);var ne=typeof V=="object"&&V!==null;if(ne)switch(V.$$typeof){case pd:e:{for(ne=V.key,z=F;z!==null;){if(z.key===ne){switch(z.tag){case 7:if(V.type===yl){n(D,z.sibling),F=c(z,V.props.children),F.return=D,D=F;break e}break;default:if(z.elementType===V.type){n(D,z.sibling),F=c(z,V.props),F.ref=Yh(D,z,V),F.return=D,D=F;break e}}n(D,z);break}else t(D,z);z=z.sibling}V.type===yl?(F=vp(V.props.children,D.mode,B,V.key),F.return=D,D=F):(B=hy(V.type,V.key,V.props,null,D.mode,B),B.ref=Yh(D,F,V),B.return=D,D=B)}return o(D);case ku:e:{for(z=V.key;F!==null;){if(F.key===z)if(F.tag===4&&F.stateNode.containerInfo===V.containerInfo&&F.stateNode.implementation===V.implementation){n(D,F.sibling),F=c(F,V.children||[]),F.return=D,D=F;break e}else{n(D,F);break}else t(D,F);F=F.sibling}F=W0(V,D.mode,B),F.return=D,D=F}return o(D)}if(typeof V=="string"||typeof V=="number")return V=""+V,F!==null&&F.tag===6?(n(D,F.sibling),F=c(F,V),F.return=D,D=F):(n(D,F),F=q0(V,D.mode,B),F.return=D,D=F),o(D);if(Nm(V))return U(D,F,V,B);if(Wh(V))return G(D,F,V,B);if(ne&&Fm(D,V),typeof V>"u"&&!z)switch(D.tag){case 1:case 22:case 0:case 11:case 15:throw Error(ft(152,up(D.type)||"Component"))}return n(D,F)}}var Ny=uT(!0),cT=uT(!1),cf={},es=Nl(cf),Zd=Nl(cf),Kd=Nl(cf);function Pu(e){if(e===cf)throw Error(ft(174));return e}function ix(e,t){switch(Kn(Kd,t),Kn(Zd,e),Kn(es,cf),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:$_(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=$_(t,e)}An(es),Kn(es,t)}function Tp(){An(es),An(Zd),An(Kd)}function J2(e){Pu(Kd.current);var t=Pu(es.current),n=$_(t,e.type);t!==n&&(Kn(Zd,e),Kn(es,n))}function E1(e){Zd.current===e&&(An(es),An(Zd))}var Zn=Nl(0);function Fy(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&64)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Fs=null,_l=null,ts=!1;function pT(e,t){var n=ra(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,e.lastEffect!==null?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Q2(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,!0):!1;case 13:return!1;default:return!1}}function ox(e){if(ts){var t=_l;if(t){var n=t;if(!Q2(e,t)){if(t=dp(n.nextSibling),!t||!Q2(e,t)){e.flags=e.flags&-1025|2,ts=!1,Fs=e;return}pT(Fs,n)}Fs=e,_l=dp(t.firstChild)}else e.flags=e.flags&-1025|2,ts=!1,Fs=e}}function eS(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Fs=e}function jm(e){if(e!==Fs)return!1;if(!ts)return eS(e),ts=!0,!1;var t=e.type;if(e.tag!==5||t!=="head"&&t!=="body"&&!Q_(t,e.memoizedProps))for(t=_l;t;)pT(e,t),t=dp(t.nextSibling);if(eS(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ft(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){_l=dp(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}_l=null}}else _l=Fs?dp(e.stateNode.nextSibling):null;return!0}function j0(){_l=Fs=null,ts=!1}var mp=[];function C1(){for(var e=0;e<mp.length;e++)mp[e]._workInProgressVersionPrimary=null;mp.length=0}var Id=$u.ReactCurrentDispatcher,na=$u.ReactCurrentBatchConfig,Xd=0,ni=null,Xi=null,Di=null,jy=!1,Pd=!1;function xo(){throw Error(ft(321))}function k1(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ta(e[n],t[n]))return!1;return!0}function T1(e,t,n,a,c,f){if(Xd=f,ni=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Id.current=e===null||e.memoizedState===null?q3:W3,e=n(a,c),Pd){f=0;do{if(Pd=!1,!(25>f))throw Error(ft(301));f+=1,Di=Xi=null,t.updateQueue=null,Id.current=G3,e=n(a,c)}while(Pd)}if(Id.current=qy,t=Xi!==null&&Xi.next!==null,Xd=0,Di=Xi=ni=null,jy=!1,t)throw Error(ft(300));return e}function Au(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Di===null?ni.memoizedState=Di=e:Di=Di.next=e,Di}function qu(){if(Xi===null){var e=ni.alternate;e=e!==null?e.memoizedState:null}else e=Xi.next;var t=Di===null?ni.memoizedState:Di.next;if(t!==null)Di=t,Xi=e;else{if(e===null)throw Error(ft(310));Xi=e,e={memoizedState:Xi.memoizedState,baseState:Xi.baseState,baseQueue:Xi.baseQueue,queue:Xi.queue,next:null},Di===null?ni.memoizedState=Di=e:Di=Di.next=e}return Di}function Ja(e,t){return typeof t=="function"?t(e):t}function Jh(e){var t=qu(),n=t.queue;if(n===null)throw Error(ft(311));n.lastRenderedReducer=e;var a=Xi,c=a.baseQueue,f=n.pending;if(f!==null){if(c!==null){var o=c.next;c.next=f.next,f.next=o}a.baseQueue=c=f,n.pending=null}if(c!==null){c=c.next,a=a.baseState;var v=o=f=null,x=c;do{var E=x.lane;if((Xd&E)===E)v!==null&&(v=v.next={lane:0,action:x.action,eagerReducer:x.eagerReducer,eagerState:x.eagerState,next:null}),a=x.eagerReducer===e?x.eagerState:e(a,x.action);else{var T={lane:E,action:x.action,eagerReducer:x.eagerReducer,eagerState:x.eagerState,next:null};v===null?(o=v=T,f=a):v=v.next=T,ni.lanes|=E,pf|=E}x=x.next}while(x!==null&&x!==c);v===null?f=a:v.next=o,ta(a,t.memoizedState)||(wa=!0),t.memoizedState=a,t.baseState=f,t.baseQueue=v,n.lastRenderedState=a}return[t.memoizedState,n.dispatch]}function Qh(e){var t=qu(),n=t.queue;if(n===null)throw Error(ft(311));n.lastRenderedReducer=e;var a=n.dispatch,c=n.pending,f=t.memoizedState;if(c!==null){n.pending=null;var o=c=c.next;do f=e(f,o.action),o=o.next;while(o!==c);ta(f,t.memoizedState)||(wa=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),n.lastRenderedState=f}return[f,a]}function tS(e,t,n){var a=t._getVersion;a=a(t._source);var c=t._workInProgressVersionPrimary;if(c!==null?e=c===a:(e=e.mutableReadLanes,(e=(Xd&e)===e)&&(t._workInProgressVersionPrimary=a,mp.push(t))),e)return n(t._source);throw mp.push(t),Error(ft(350))}function hT(e,t,n,a){var c=so;if(c===null)throw Error(ft(349));var f=t._getVersion,o=f(t._source),v=Id.current,x=v.useState(function(){return tS(c,t,n)}),E=x[1],T=x[0];x=Di;var P=e.memoizedState,I=P.refs,q=I.getSnapshot,U=P.source;P=P.subscribe;var G=ni;return e.memoizedState={refs:I,source:t,subscribe:a},v.useEffect(function(){I.getSnapshot=n,I.setSnapshot=E;var D=f(t._source);if(!ta(o,D)){D=n(t._source),ta(T,D)||(E(D),D=kl(G),c.mutableReadLanes|=D&c.pendingLanes),D=c.mutableReadLanes,c.entangledLanes|=D;for(var F=c.entanglements,V=D;0<V;){var B=31-Ml(V),z=1<<B;F[B]|=D,V&=~z}}},[n,t,a]),v.useEffect(function(){return a(t._source,function(){var D=I.getSnapshot,F=I.setSnapshot;try{F(D(t._source));var V=kl(G);c.mutableReadLanes|=V&c.pendingLanes}catch(B){F(function(){throw B})}})},[t,a]),ta(q,n)&&ta(U,t)&&ta(P,a)||(e={pending:null,dispatch:null,lastRenderedReducer:Ja,lastRenderedState:T},e.dispatch=E=A1.bind(null,ni,e),x.queue=e,x.baseQueue=null,T=tS(c,t,n),x.memoizedState=x.baseState=T),T}function dT(e,t,n){var a=qu();return hT(a,e,t,n)}function ed(e){var t=Au();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e=t.queue={pending:null,dispatch:null,lastRenderedReducer:Ja,lastRenderedState:e},e=e.dispatch=A1.bind(null,ni,e),[t.memoizedState,e]}function Uy(e,t,n,a){return e={tag:e,create:t,destroy:n,deps:a,next:null},t=ni.updateQueue,t===null?(t={lastEffect:null},ni.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(a=n.next,n.next=e,e.next=a,t.lastEffect=e)),e}function rS(e){var t=Au();return e={current:e},t.memoizedState=e}function $y(){return qu().memoizedState}function ax(e,t,n,a){var c=Au();ni.flags|=e,c.memoizedState=Uy(1|t,n,void 0,a===void 0?null:a)}function I1(e,t,n,a){var c=qu();a=a===void 0?null:a;var f=void 0;if(Xi!==null){var o=Xi.memoizedState;if(f=o.destroy,a!==null&&k1(a,o.deps)){Uy(t,n,f,a);return}}ni.flags|=e,c.memoizedState=Uy(1|t,n,f,a)}function nS(e,t){return ax(516,4,e,t)}function Vy(e,t){return I1(516,4,e,t)}function fT(e,t){return I1(4,2,e,t)}function mT(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function yT(e,t,n){return n=n!=null?n.concat([e]):null,I1(4,2,mT.bind(null,t,e),n)}function P1(){}function gT(e,t){var n=qu();t=t===void 0?null:t;var a=n.memoizedState;return a!==null&&t!==null&&k1(t,a[1])?a[0]:(n.memoizedState=[e,t],e)}function vT(e,t){var n=qu();t=t===void 0?null:t;var a=n.memoizedState;return a!==null&&t!==null&&k1(t,a[1])?a[0]:(e=e(),n.memoizedState=[e,t],e)}function V3(e,t){var n=kp();Ou(98>n?98:n,function(){e(!0)}),Ou(97<n?97:n,function(){var a=na.transition;na.transition=1;try{e(!1),t()}finally{na.transition=a}})}function A1(e,t,n){var a=jo(),c=kl(e),f={lane:c,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(o===null?f.next=f:(f.next=o.next,o.next=f),t.pending=f,o=e.alternate,e===ni||o!==null&&o===ni)Pd=jy=!0;else{if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var v=t.lastRenderedState,x=o(v,n);if(f.eagerReducer=o,f.eagerState=x,ta(x,v))return}catch{}finally{}Tl(e,c,a)}}var qy={readContext:ia,useCallback:xo,useContext:xo,useEffect:xo,useImperativeHandle:xo,useLayoutEffect:xo,useMemo:xo,useReducer:xo,useRef:xo,useState:xo,useDebugValue:xo,useDeferredValue:xo,useTransition:xo,useMutableSource:xo,useOpaqueIdentifier:xo,unstable_isNewReconciler:!1},q3={readContext:ia,useCallback:function(e,t){return Au().memoizedState=[e,t===void 0?null:t],e},useContext:ia,useEffect:nS,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ax(4,2,mT.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ax(4,2,e,t)},useMemo:function(e,t){var n=Au();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var a=Au();return t=n!==void 0?n(t):t,a.memoizedState=a.baseState=t,e=a.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},e=e.dispatch=A1.bind(null,ni,e),[a.memoizedState,e]},useRef:rS,useState:ed,useDebugValue:P1,useDeferredValue:function(e){var t=ed(e),n=t[0],a=t[1];return nS(function(){var c=na.transition;na.transition=1;try{a(e)}finally{na.transition=c}},[e]),n},useTransition:function(){var e=ed(!1),t=e[0];return e=V3.bind(null,e[1]),rS(e),[e,t]},useMutableSource:function(e,t,n){var a=Au();return a.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},hT(a,e,t,n)},useOpaqueIdentifier:function(){if(ts){var e=!1,t=B3(function(){throw e||(e=!0,n("r:"+(B0++).toString(36))),Error(ft(355))}),n=ed(t)[1];return!(ni.mode&2)&&(ni.flags|=516,Uy(5,function(){n("r:"+(B0++).toString(36))},void 0,null)),t}return t="r:"+(B0++).toString(36),ed(t),t},unstable_isNewReconciler:!1},W3={readContext:ia,useCallback:gT,useContext:ia,useEffect:Vy,useImperativeHandle:yT,useLayoutEffect:fT,useMemo:vT,useReducer:Jh,useRef:$y,useState:function(){return Jh(Ja)},useDebugValue:P1,useDeferredValue:function(e){var t=Jh(Ja),n=t[0],a=t[1];return Vy(function(){var c=na.transition;na.transition=1;try{a(e)}finally{na.transition=c}},[e]),n},useTransition:function(){var e=Jh(Ja)[0];return[$y().current,e]},useMutableSource:dT,useOpaqueIdentifier:function(){return Jh(Ja)[0]},unstable_isNewReconciler:!1},G3={readContext:ia,useCallback:gT,useContext:ia,useEffect:Vy,useImperativeHandle:yT,useLayoutEffect:fT,useMemo:vT,useReducer:Qh,useRef:$y,useState:function(){return Qh(Ja)},useDebugValue:P1,useDeferredValue:function(e){var t=Qh(Ja),n=t[0],a=t[1];return Vy(function(){var c=na.transition;na.transition=1;try{a(e)}finally{na.transition=c}},[e]),n},useTransition:function(){var e=Qh(Ja)[0];return[$y().current,e]},useMutableSource:dT,useOpaqueIdentifier:function(){return Qh(Ja)[0]},unstable_isNewReconciler:!1},H3=$u.ReactCurrentOwner,wa=!1;function bo(e,t,n,a){t.child=e===null?cT(t,null,n,a):Ny(t,e.child,n,a)}function iS(e,t,n,a,c){n=n.render;var f=t.ref;return fp(t,c),a=T1(e,t,n,a,f,c),e!==null&&!wa?(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~c,js(e,t,c)):(t.flags|=1,bo(e,t,a,c),t.child)}function oS(e,t,n,a,c,f){if(e===null){var o=n.type;return typeof o=="function"&&!O1(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,_T(e,t,o,a,c,f)):(e=hy(n.type,null,a,t,t.mode,f),e.ref=t.ref,e.return=t,t.child=e)}return o=e.child,!(c&f)&&(c=o.memoizedProps,n=n.compare,n=n!==null?n:qd,n(c,a)&&e.ref===t.ref)?js(e,t,f):(t.flags|=1,e=zl(o,a),e.ref=t.ref,e.return=t,t.child=e)}function _T(e,t,n,a,c,f){if(e!==null&&qd(e.memoizedProps,a)&&e.ref===t.ref)if(wa=!1,(f&c)!==0)e.flags&16384&&(wa=!0);else return t.lanes=e.lanes,js(e,t,f);return sx(e,t,n,a,f)}function U0(e,t,n){var a=t.pendingProps,c=a.children,f=e!==null?e.memoizedState:null;if(a.mode==="hidden"||a.mode==="unstable-defer-without-hiding")if(!(t.mode&4))t.memoizedState={baseLanes:0},$m(t,n);else if(n&1073741824)t.memoizedState={baseLanes:0},$m(t,f!==null?f.baseLanes:n);else return e=f!==null?f.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},$m(t,e),null;else f!==null?(a=f.baseLanes|n,t.memoizedState=null):a=n,$m(t,a);return bo(e,t,c,n),t.child}function xT(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=128)}function sx(e,t,n,a,c){var f=Eo(n)?Du:Qi.current;return f=Cp(t,f),fp(t,c),n=T1(e,t,n,a,f,c),e!==null&&!wa?(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~c,js(e,t,c)):(t.flags|=1,bo(e,t,n,c),t.child)}function aS(e,t,n,a,c){if(Eo(n)){var f=!0;sy(t)}else f=!1;if(fp(t,c),t.stateNode===null)e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),lT(t,n,a),nx(t,n,a,c),a=!0;else if(e===null){var o=t.stateNode,v=t.memoizedProps;o.props=v;var x=o.context,E=n.contextType;typeof E=="object"&&E!==null?E=ia(E):(E=Eo(n)?Du:Qi.current,E=Cp(t,E));var T=n.getDerivedStateFromProps,P=typeof T=="function"||typeof o.getSnapshotBeforeUpdate=="function";P||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(v!==a||x!==E)&&Y2(t,o,a,E),ml=!1;var I=t.memoizedState;o.state=I,Hd(t,a,o,c),x=t.memoizedState,v!==a||I!==x||So.current||ml?(typeof T=="function"&&(By(t,n,T,a),x=t.memoizedState),(v=ml||X2(t,n,v,a,I,x,E))?(P||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4)):(typeof o.componentDidMount=="function"&&(t.flags|=4),t.memoizedProps=a,t.memoizedState=x),o.props=a,o.state=x,o.context=E,a=v):(typeof o.componentDidMount=="function"&&(t.flags|=4),a=!1)}else{o=t.stateNode,aT(e,t),v=t.memoizedProps,E=t.type===t.elementType?v:va(t.type,v),o.props=E,P=t.pendingProps,I=o.context,x=n.contextType,typeof x=="object"&&x!==null?x=ia(x):(x=Eo(n)?Du:Qi.current,x=Cp(t,x));var q=n.getDerivedStateFromProps;(T=typeof q=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(v!==P||I!==x)&&Y2(t,o,a,x),ml=!1,I=t.memoizedState,o.state=I,Hd(t,a,o,c);var U=t.memoizedState;v!==P||I!==U||So.current||ml?(typeof q=="function"&&(By(t,n,q,a),U=t.memoizedState),(E=ml||X2(t,n,E,a,I,U,x))?(T||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(a,U,x),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(a,U,x)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=256)):(typeof o.componentDidUpdate!="function"||v===e.memoizedProps&&I===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&I===e.memoizedState||(t.flags|=256),t.memoizedProps=a,t.memoizedState=U),o.props=a,o.state=U,o.context=x,a=E):(typeof o.componentDidUpdate!="function"||v===e.memoizedProps&&I===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&I===e.memoizedState||(t.flags|=256),a=!1)}return lx(e,t,n,a,f,c)}function lx(e,t,n,a,c,f){xT(e,t);var o=(t.flags&64)!==0;if(!a&&!o)return c&&W2(t,n,!1),js(e,t,f);a=t.stateNode,H3.current=t;var v=o&&typeof n.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&o?(t.child=Ny(t,e.child,null,f),t.child=Ny(t,null,v,f)):bo(e,t,v,f),t.memoizedState=a.state,c&&W2(t,n,!0),t.child}function sS(e){var t=e.stateNode;t.pendingContext?q2(e,t.pendingContext,t.pendingContext!==t.context):t.context&&q2(e,t.context,!1),ix(e,t.containerInfo)}var Um={dehydrated:null,retryLane:0};function lS(e,t,n){var a=t.pendingProps,c=Zn.current,f=!1,o;return(o=(t.flags&64)!==0)||(o=e!==null&&e.memoizedState===null?!1:(c&2)!==0),o?(f=!0,t.flags&=-65):e!==null&&e.memoizedState===null||a.fallback===void 0||a.unstable_avoidThisFallback===!0||(c|=1),Kn(Zn,c&1),e===null?(a.fallback!==void 0&&ox(t),e=a.children,c=a.fallback,f?(e=uS(t,e,c,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Um,e):typeof a.unstable_expectedLoadTime=="number"?(e=uS(t,e,c,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Um,t.lanes=33554432,e):(n=B1({mode:"visible",children:e},t.mode,n,null),n.return=t,t.child=n)):e.memoizedState!==null?f?(a=pS(e,t,a.children,a.fallback,n),f=t.child,c=e.child.memoizedState,f.memoizedState=c===null?{baseLanes:n}:{baseLanes:c.baseLanes|n},f.childLanes=e.childLanes&~n,t.memoizedState=Um,a):(n=cS(e,t,a.children,n),t.memoizedState=null,n):f?(a=pS(e,t,a.children,a.fallback,n),f=t.child,c=e.child.memoizedState,f.memoizedState=c===null?{baseLanes:n}:{baseLanes:c.baseLanes|n},f.childLanes=e.childLanes&~n,t.memoizedState=Um,a):(n=cS(e,t,a.children,n),t.memoizedState=null,n)}function uS(e,t,n,a){var c=e.mode,f=e.child;return t={mode:"hidden",children:t},!(c&2)&&f!==null?(f.childLanes=0,f.pendingProps=t):f=B1(t,c,0,null),n=vp(n,c,a,null),f.return=e,n.return=e,f.sibling=n,e.child=f,n}function cS(e,t,n,a){var c=e.child;return e=c.sibling,n=zl(c,{mode:"visible",children:n}),!(t.mode&2)&&(n.lanes=a),n.return=t,n.sibling=null,e!==null&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function pS(e,t,n,a,c){var f=t.mode,o=e.child;e=o.sibling;var v={mode:"hidden",children:n};return!(f&2)&&t.child!==o?(n=t.child,n.childLanes=0,n.pendingProps=v,o=n.lastEffect,o!==null?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=zl(o,v),e!==null?a=zl(e,a):(a=vp(a,f,c,null),a.flags|=2),a.return=t,n.return=t,n.sibling=a,t.child=n,a}function hS(e,t){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),oT(e.return,t)}function $0(e,t,n,a,c,f){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:c,lastEffect:f}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=a,o.tail=n,o.tailMode=c,o.lastEffect=f)}function dS(e,t,n){var a=t.pendingProps,c=a.revealOrder,f=a.tail;if(bo(e,t,a.children,n),a=Zn.current,a&2)a=a&1|2,t.flags|=64;else{if(e!==null&&e.flags&64)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&hS(e,n);else if(e.tag===19)hS(e,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(Kn(Zn,a),!(t.mode&2))t.memoizedState=null;else switch(c){case"forwards":for(n=t.child,c=null;n!==null;)e=n.alternate,e!==null&&Fy(e)===null&&(c=n),n=n.sibling;n=c,n===null?(c=t.child,t.child=null):(c=n.sibling,n.sibling=null),$0(t,!1,c,n,f,t.lastEffect);break;case"backwards":for(n=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&Fy(e)===null){t.child=c;break}e=c.sibling,c.sibling=n,n=c,c=e}$0(t,!0,n,null,f,t.lastEffect);break;case"together":$0(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function js(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),pf|=t.lanes,n&t.childLanes){if(e!==null&&t.child!==e.child)throw Error(ft(153));if(t.child!==null){for(e=t.child,n=zl(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=zl(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}return null}var bT,ux,wT,ST;bT=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ux=function(){};wT=function(e,t,n,a){var c=e.memoizedProps;if(c!==a){e=t.stateNode,Pu(es.current);var f=null;switch(n){case"input":c=O_(e,c),a=O_(e,a),f=[];break;case"option":c=F_(e,c),a=F_(e,a),f=[];break;case"select":c=Dn({},c,{value:void 0}),a=Dn({},a,{value:void 0}),f=[];break;case"textarea":c=j_(e,c),a=j_(e,a),f=[];break;default:typeof c.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=My)}V_(n,a);var o;n=null;for(E in c)if(!a.hasOwnProperty(E)&&c.hasOwnProperty(E)&&c[E]!=null)if(E==="style"){var v=c[E];for(o in v)v.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else E!=="dangerouslySetInnerHTML"&&E!=="children"&&E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&E!=="autoFocus"&&(Bd.hasOwnProperty(E)?f||(f=[]):(f=f||[]).push(E,null));for(E in a){var x=a[E];if(v=c!=null?c[E]:void 0,a.hasOwnProperty(E)&&x!==v&&(x!=null||v!=null))if(E==="style")if(v){for(o in v)!v.hasOwnProperty(o)||x&&x.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in x)x.hasOwnProperty(o)&&v[o]!==x[o]&&(n||(n={}),n[o]=x[o])}else n||(f||(f=[]),f.push(E,n)),n=x;else E==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,v=v?v.__html:void 0,x!=null&&v!==x&&(f=f||[]).push(E,x)):E==="children"?typeof x!="string"&&typeof x!="number"||(f=f||[]).push(E,""+x):E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&(Bd.hasOwnProperty(E)?(x!=null&&E==="onScroll"&&Pn("scroll",e),f||v===x||(f=[])):typeof x=="object"&&x!==null&&x.$$typeof===n1?x.toString():(f=f||[]).push(E,x))}n&&(f=f||[]).push("style",n);var E=f;(t.updateQueue=E)&&(t.flags|=4)}};ST=function(e,t,n,a){n!==a&&(t.flags|=4)};function td(e,t){if(!ts)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Z3(e,t,n){var a=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Eo(t.type)&&Ly(),null;case 3:return Tp(),An(So),An(Qi),C1(),a=t.stateNode,a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(jm(t)?t.flags|=4:a.hydrate||(t.flags|=256)),ux(t),null;case 5:E1(t);var c=Pu(Kd.current);if(n=t.type,e!==null&&t.stateNode!=null)wT(e,t,n,a,c),e.ref!==t.ref&&(t.flags|=128);else{if(!a){if(t.stateNode===null)throw Error(ft(166));return null}if(e=Pu(es.current),jm(t)){a=t.stateNode,n=t.type;var f=t.memoizedProps;switch(a[vl]=t,a[Ry]=f,n){case"dialog":Pn("cancel",a),Pn("close",a);break;case"iframe":case"object":case"embed":Pn("load",a);break;case"video":case"audio":for(e=0;e<dd.length;e++)Pn(dd[e],a);break;case"source":Pn("error",a);break;case"img":case"image":case"link":Pn("error",a),Pn("load",a);break;case"details":Pn("toggle",a);break;case"input":d2(a,f),Pn("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!f.multiple},Pn("invalid",a);break;case"textarea":m2(a,f),Pn("invalid",a)}V_(n,f),e=null;for(var o in f)f.hasOwnProperty(o)&&(c=f[o],o==="children"?typeof c=="string"?a.textContent!==c&&(e=["children",c]):typeof c=="number"&&a.textContent!==""+c&&(e=["children",""+c]):Bd.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&Pn("scroll",a));switch(n){case"input":zm(a),f2(a,f,!0);break;case"textarea":zm(a),y2(a);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(a.onclick=My)}a=e,t.updateQueue=a,a!==null&&(t.flags|=4)}else{switch(o=c.nodeType===9?c:c.ownerDocument,e===U_.html&&(e=yk(n)),e===U_.html?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=o.createElement(n,{is:a.is}):(e=o.createElement(n),n==="select"&&(o=e,a.multiple?o.multiple=!0:a.size&&(o.size=a.size))):e=o.createElementNS(e,n),e[vl]=t,e[Ry]=a,bT(e,t,!1,!1),t.stateNode=e,o=q_(n,a),n){case"dialog":Pn("cancel",e),Pn("close",e),c=a;break;case"iframe":case"object":case"embed":Pn("load",e),c=a;break;case"video":case"audio":for(c=0;c<dd.length;c++)Pn(dd[c],e);c=a;break;case"source":Pn("error",e),c=a;break;case"img":case"image":case"link":Pn("error",e),Pn("load",e),c=a;break;case"details":Pn("toggle",e),c=a;break;case"input":d2(e,a),c=O_(e,a),Pn("invalid",e);break;case"option":c=F_(e,a);break;case"select":e._wrapperState={wasMultiple:!!a.multiple},c=Dn({},a,{value:void 0}),Pn("invalid",e);break;case"textarea":m2(e,a),c=j_(e,a),Pn("invalid",e);break;default:c=a}V_(n,c);var v=c;for(f in v)if(v.hasOwnProperty(f)){var x=v[f];f==="style"?_k(e,x):f==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,x!=null&&gk(e,x)):f==="children"?typeof x=="string"?(n!=="textarea"||x!=="")&&Nd(e,x):typeof x=="number"&&Nd(e,""+x):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Bd.hasOwnProperty(f)?x!=null&&f==="onScroll"&&Pn("scroll",e):x!=null&&Yx(e,f,x,o))}switch(n){case"input":zm(e),f2(e,a,!1);break;case"textarea":zm(e),y2(e);break;case"option":a.value!=null&&e.setAttribute("value",""+Al(a.value));break;case"select":e.multiple=!!a.multiple,f=a.value,f!=null?cp(e,!!a.multiple,f,!1):a.defaultValue!=null&&cp(e,!!a.multiple,a.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=My)}Xk(n,a)&&(t.flags|=4)}t.ref!==null&&(t.flags|=128)}return null;case 6:if(e&&t.stateNode!=null)ST(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(ft(166));n=Pu(Kd.current),Pu(es.current),jm(t)?(a=t.stateNode,n=t.memoizedProps,a[vl]=t,a.nodeValue!==n&&(t.flags|=4)):(a=(n.nodeType===9?n:n.ownerDocument).createTextNode(a),a[vl]=t,t.stateNode=a)}return null;case 13:return An(Zn),a=t.memoizedState,t.flags&64?(t.lanes=n,t):(a=a!==null,n=!1,e===null?t.memoizedProps.fallback!==void 0&&jm(t):n=e.memoizedState!==null,a&&!n&&t.mode&2&&(e===null&&t.memoizedProps.unstable_avoidThisFallback!==!0||Zn.current&1?Bi===0&&(Bi=3):((Bi===0||Bi===3)&&(Bi=4),so===null||!(pf&134217727)&&!($p&134217727)||yp(so,Ji))),(a||n)&&(t.flags|=4),null);case 4:return Tp(),ux(t),e===null&&Hk(t.stateNode.containerInfo),null;case 10:return w1(t),null;case 17:return Eo(t.type)&&Ly(),null;case 19:if(An(Zn),a=t.memoizedState,a===null)return null;if(f=(t.flags&64)!==0,o=a.rendering,o===null)if(f)td(a,!1);else{if(Bi!==0||e!==null&&e.flags&64)for(e=t.child;e!==null;){if(o=Fy(e),o!==null){for(t.flags|=64,td(a,!1),f=o.updateQueue,f!==null&&(t.updateQueue=f,t.flags|=4),a.lastEffect===null&&(t.firstEffect=null),t.lastEffect=a.lastEffect,a=n,n=t.child;n!==null;)f=n,e=a,f.flags&=2,f.nextEffect=null,f.firstEffect=null,f.lastEffect=null,o=f.alternate,o===null?(f.childLanes=0,f.lanes=e,f.child=null,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=o.childLanes,f.lanes=o.lanes,f.child=o.child,f.memoizedProps=o.memoizedProps,f.memoizedState=o.memoizedState,f.updateQueue=o.updateQueue,f.type=o.type,e=o.dependencies,f.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Kn(Zn,Zn.current&1|2),t.child}e=e.sibling}a.tail!==null&&Yi()>mx&&(t.flags|=64,f=!0,td(a,!1),t.lanes=33554432)}else{if(!f)if(e=Fy(o),e!==null){if(t.flags|=64,f=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),td(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!ts)return t=t.lastEffect=a.lastEffect,t!==null&&(t.nextEffect=null),null}else 2*Yi()-a.renderingStartTime>mx&&n!==1073741824&&(t.flags|=64,f=!0,td(a,!1),t.lanes=33554432);a.isBackwards?(o.sibling=t.child,t.child=o):(n=a.last,n!==null?n.sibling=o:t.child=o,a.last=o)}return a.tail!==null?(n=a.tail,a.rendering=n,a.tail=n.sibling,a.lastEffect=t.lastEffect,a.renderingStartTime=Yi(),n.sibling=null,t=Zn.current,Kn(Zn,f?t&1|2:t&1),n):null;case 23:case 24:return D1(),e!==null&&e.memoizedState!==null!=(t.memoizedState!==null)&&a.mode!=="unstable-defer-without-hiding"&&(t.flags|=4),null}throw Error(ft(156,t.tag))}function K3(e){switch(e.tag){case 1:Eo(e.type)&&Ly();var t=e.flags;return t&4096?(e.flags=t&-4097|64,e):null;case 3:if(Tp(),An(So),An(Qi),C1(),t=e.flags,t&64)throw Error(ft(285));return e.flags=t&-4097|64,e;case 5:return E1(e),null;case 13:return An(Zn),t=e.flags,t&4096?(e.flags=t&-4097|64,e):null;case 19:return An(Zn),null;case 4:return Tp(),null;case 10:return w1(e),null;case 23:case 24:return D1(),null;default:return null}}function M1(e,t){try{var n="",a=t;do n+=IR(a),a=a.return;while(a);var c=n}catch(f){c=`
Error generating stack: `+f.message+`
`+f.stack}return{value:e,source:t,stack:c}}function cx(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var X3=typeof WeakMap=="function"?WeakMap:Map;function ET(e,t,n){n=El(-1,n),n.tag=3,n.payload={element:null};var a=t.value;return n.callback=function(){Gy||(Gy=!0,yx=a),cx(e,t)},n}function CT(e,t,n){n=El(-1,n),n.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var c=t.value;n.payload=function(){return cx(e,t),a(c)}}var f=e.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(n.callback=function(){typeof a!="function"&&(Qa===null?Qa=new Set([this]):Qa.add(this),cx(e,t));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}var Y3=typeof WeakSet=="function"?WeakSet:Set;function fS(e){var t=e.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(n){Il(e,n)}else t.current=null}function J3(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(t.flags&256&&e!==null){var n=e.memoizedProps,a=e.memoizedState;e=t.stateNode,t=e.getSnapshotBeforeUpdate(t.elementType===t.type?n:va(t.type,n),a),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:t.flags&256&&v1(t.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(ft(163))}function Q3(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(t=n.updateQueue,t=t!==null?t.lastEffect:null,t!==null){e=t=t.next;do{if((e.tag&3)===3){var a=e.create;e.destroy=a()}e=e.next}while(e!==t)}if(t=n.updateQueue,t=t!==null?t.lastEffect:null,t!==null){e=t=t.next;do{var c=e;a=c.next,c=c.tag,c&4&&c&1&&(zT(n,e),sL(n,e)),e=a}while(e!==t)}return;case 1:e=n.stateNode,n.flags&4&&(t===null?e.componentDidMount():(a=n.elementType===n.type?t.memoizedProps:va(n.type,t.memoizedProps),e.componentDidUpdate(a,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),t=n.updateQueue,t!==null&&K2(n,t,e);return;case 3:if(t=n.updateQueue,t!==null){if(e=null,n.child!==null)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}K2(n,t,e)}return;case 5:e=n.stateNode,t===null&&n.flags&4&&Xk(n.type,n.memoizedProps)&&e.focus();return;case 6:return;case 4:return;case 12:return;case 13:n.memoizedState===null&&(n=n.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&Pk(n))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(ft(163))}function mS(e,t){for(var n=e;;){if(n.tag===5){var a=n.stateNode;if(t)a=a.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{a=n.stateNode;var c=n.memoizedProps.style;c=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=vk("display",c)}}else if(n.tag===6)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((n.tag!==23&&n.tag!==24||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function yS(e,t){if(Lu&&typeof Lu.onCommitFiberUnmount=="function")try{Lu.onCommitFiberUnmount(_1,t)}catch{}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(e=t.updateQueue,e!==null&&(e=e.lastEffect,e!==null)){var n=e=e.next;do{var a=n,c=a.destroy;if(a=a.tag,c!==void 0)if(a&4)zT(t,n);else{a=t;try{c()}catch(f){Il(a,f)}}n=n.next}while(n!==e)}break;case 1:if(fS(t),e=t.stateNode,typeof e.componentWillUnmount=="function")try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(f){Il(t,f)}break;case 5:fS(t);break;case 4:kT(e,t)}}function gS(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function vS(e){return e.tag===5||e.tag===3||e.tag===4}function _S(e){e:{for(var t=e.return;t!==null;){if(vS(t))break e;t=t.return}throw Error(ft(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var a=!1;break;case 3:t=t.containerInfo,a=!0;break;case 4:t=t.containerInfo,a=!0;break;default:throw Error(ft(161))}n.flags&16&&(Nd(t,""),n.flags&=-17);e:t:for(n=e;;){for(;n.sibling===null;){if(n.return===null||vS(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2)){n=n.stateNode;break e}}a?px(e,n,t):hx(e,n,t)}function px(e,t,n){var a=e.tag,c=a===5||a===6;if(c)e=c?e.stateNode:e.stateNode.instance,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=My));else if(a!==4&&(e=e.child,e!==null))for(px(e,t,n),e=e.sibling;e!==null;)px(e,t,n),e=e.sibling}function hx(e,t,n){var a=e.tag,c=a===5||a===6;if(c)e=c?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(hx(e,t,n),e=e.sibling;e!==null;)hx(e,t,n),e=e.sibling}function kT(e,t){for(var n=t,a=!1,c,f;;){if(!a){a=n.return;e:for(;;){if(a===null)throw Error(ft(160));switch(c=a.stateNode,a.tag){case 5:f=!1;break e;case 3:c=c.containerInfo,f=!0;break e;case 4:c=c.containerInfo,f=!0;break e}a=a.return}a=!0}if(n.tag===5||n.tag===6){e:for(var o=e,v=n,x=v;;)if(yS(o,x),x.child!==null&&x.tag!==4)x.child.return=x,x=x.child;else{if(x===v)break e;for(;x.sibling===null;){if(x.return===null||x.return===v)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}f?(o=c,v=n.stateNode,o.nodeType===8?o.parentNode.removeChild(v):o.removeChild(v)):c.removeChild(n.stateNode)}else if(n.tag===4){if(n.child!==null){c=n.stateNode.containerInfo,f=!0,n.child.return=n,n=n.child;continue}}else if(yS(e,n),n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return,n.tag===4&&(a=!1)}n.sibling.return=n.return,n=n.sibling}}function V0(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do(a.tag&3)===3&&(e=a.destroy,a.destroy=void 0,e!==void 0&&e()),a=a.next;while(a!==n)}return;case 1:return;case 5:if(n=t.stateNode,n!=null){a=t.memoizedProps;var c=e!==null?e.memoizedProps:a;e=t.type;var f=t.updateQueue;if(t.updateQueue=null,f!==null){for(n[Ry]=a,e==="input"&&a.type==="radio"&&a.name!=null&&fk(n,a),q_(e,c),t=q_(e,a),c=0;c<f.length;c+=2){var o=f[c],v=f[c+1];o==="style"?_k(n,v):o==="dangerouslySetInnerHTML"?gk(n,v):o==="children"?Nd(n,v):Yx(n,o,v,t)}switch(e){case"input":B_(n,a);break;case"textarea":mk(n,a);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!a.multiple,f=a.value,f!=null?cp(n,!!a.multiple,f,!1):e!==!!a.multiple&&(a.defaultValue!=null?cp(n,!!a.multiple,a.defaultValue,!0):cp(n,!!a.multiple,a.multiple?[]:"",!1))}}}return;case 6:if(t.stateNode===null)throw Error(ft(162));t.stateNode.nodeValue=t.memoizedProps;return;case 3:n=t.stateNode,n.hydrate&&(n.hydrate=!1,Pk(n.containerInfo));return;case 12:return;case 13:t.memoizedState!==null&&(z1=Yi(),mS(t.child,!0)),xS(t);return;case 19:xS(t);return;case 17:return;case 23:case 24:mS(t,t.memoizedState!==null);return}throw Error(ft(163))}function xS(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Y3),t.forEach(function(a){var c=cL.bind(null,e,a);n.has(a)||(n.add(a),a.then(c,c))})}}function eL(e,t){return e!==null&&(e=e.memoizedState,e===null||e.dehydrated!==null)?(t=t.memoizedState,t!==null&&t.dehydrated===null):!1}var tL=Math.ceil,Wy=$u.ReactCurrentDispatcher,R1=$u.ReactCurrentOwner,pr=0,so=null,mi=null,Ji=0,Bu=0,dx=Nl(0),Bi=0,Ig=null,Up=0,pf=0,$p=0,L1=0,fx=null,z1=0,mx=1/0;function Vp(){mx=Yi()+500}var Lt=null,Gy=!1,yx=null,Qa=null,Ll=!1,Ad=null,fd=90,gx=[],vx=[],$s=null,Md=0,_x=null,uy=-1,Bs=0,cy=0,Rd=null,py=!1;function jo(){return pr&48?Yi():uy!==-1?uy:uy=Yi()}function kl(e){if(e=e.mode,!(e&2))return 1;if(!(e&4))return kp()===99?1:2;if(Bs===0&&(Bs=Up),$3.transition!==0){cy!==0&&(cy=fx!==null?fx.pendingLanes:0),e=Bs;var t=4186112&~cy;return t&=-t,t===0&&(e=4186112&~e,t=e&-e,t===0&&(t=8192)),t}return e=kp(),pr&4&&e===98?e=Py(12,Bs):(e=qR(e),e=Py(e,Bs)),e}function Tl(e,t,n){if(50<Md)throw Md=0,_x=null,Error(ft(185));if(e=Pg(e,t),e===null)return null;bg(e,t,n),e===so&&($p|=t,Bi===4&&yp(e,Ji));var a=kp();t===1?pr&8&&!(pr&48)?xx(e):(oa(e,n),pr===0&&(Vp(),as())):(!(pr&4)||a!==98&&a!==99||($s===null?$s=new Set([e]):$s.add(e)),oa(e,n)),fx=e}function Pg(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}function oa(e,t){for(var n=e.callbackNode,a=e.suspendedLanes,c=e.pingedLanes,f=e.expirationTimes,o=e.pendingLanes;0<o;){var v=31-Ml(o),x=1<<v,E=f[v];if(E===-1){if(!(x&a)||x&c){E=t,Xc(x);var T=xn;f[v]=10<=T?E+250:6<=T?E+5e3:-1}}else E<=t&&(e.expiredLanes|=x);o&=~x}if(a=$d(e,e===so?Ji:0),t=xn,a===0)n!==null&&(n!==N0&&tx(n),e.callbackNode=null,e.callbackPriority=0);else{if(n!==null){if(e.callbackPriority===t)return;n!==N0&&tx(n)}t===15?(n=xx.bind(null,e),Os===null?(Os=[n],ly=x1(kg,iT)):Os.push(n),n=N0):t===14?n=Gd(99,xx.bind(null,e)):(n=WR(t),n=Gd(n,TT.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function TT(e){if(uy=-1,cy=Bs=0,pr&48)throw Error(ft(327));var t=e.callbackNode;if(Fl()&&e.callbackNode!==t)return null;var n=$d(e,e===so?Ji:0);if(n===0)return null;var a=n,c=pr;pr|=16;var f=MT();(so!==e||Ji!==a)&&(Vp(),gp(e,a));do try{iL();break}catch(v){AT(e,v)}while(1);if(b1(),Wy.current=f,pr=c,mi!==null?a=0:(so=null,Ji=0,a=Bi),Up&$p)gp(e,0);else if(a!==0){if(a===2&&(pr|=64,e.hydrate&&(e.hydrate=!1,v1(e.containerInfo)),n=Ok(e),n!==0&&(a=md(e,n))),a===1)throw t=Ig,gp(e,0),yp(e,n),oa(e,Yi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,a){case 0:case 1:throw Error(ft(345));case 2:wu(e);break;case 3:if(yp(e,n),(n&62914560)===n&&(a=z1+500-Yi(),10<a)){if($d(e,0)!==0)break;if(c=e.suspendedLanes,(c&n)!==n){jo(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=U2(wu.bind(null,e),a);break}wu(e);break;case 4:if(yp(e,n),(n&4186112)===n)break;for(a=e.eventTimes,c=-1;0<n;){var o=31-Ml(n);f=1<<o,o=a[o],o>c&&(c=o),n&=~f}if(n=c,n=Yi()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*tL(n/1960))-n,10<n){e.timeoutHandle=U2(wu.bind(null,e),n);break}wu(e);break;case 5:wu(e);break;default:throw Error(ft(329))}}return oa(e,Yi()),e.callbackNode===t?TT.bind(null,e):null}function yp(e,t){for(t&=~L1,t&=~$p,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ml(t),a=1<<n;e[n]=-1,t&=~a}}function xx(e){if(pr&48)throw Error(ft(327));if(Fl(),e===so&&e.expiredLanes&Ji){var t=Ji,n=md(e,t);Up&$p&&(t=$d(e,t),n=md(e,t))}else t=$d(e,0),n=md(e,t);if(e.tag!==0&&n===2&&(pr|=64,e.hydrate&&(e.hydrate=!1,v1(e.containerInfo)),t=Ok(e),t!==0&&(n=md(e,t))),n===1)throw n=Ig,gp(e,0),yp(e,t),oa(e,Yi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,wu(e),oa(e,Yi()),null}function rL(){if($s!==null){var e=$s;$s=null,e.forEach(function(t){t.expiredLanes|=24&t.pendingLanes,oa(t,Yi())})}as()}function IT(e,t){var n=pr;pr|=1;try{return e(t)}finally{pr=n,pr===0&&(Vp(),as())}}function PT(e,t){var n=pr;pr&=-2,pr|=8;try{return e(t)}finally{pr=n,pr===0&&(Vp(),as())}}function $m(e,t){Kn(dx,Bu),Bu|=t,Up|=t}function D1(){Bu=dx.current,An(dx)}function gp(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,O3(n)),mi!==null)for(n=mi.return;n!==null;){var a=n;switch(a.tag){case 1:a=a.type.childContextTypes,a!=null&&Ly();break;case 3:Tp(),An(So),An(Qi),C1();break;case 5:E1(a);break;case 4:Tp();break;case 13:An(Zn);break;case 19:An(Zn);break;case 10:w1(a);break;case 23:case 24:D1()}n=n.return}so=e,mi=zl(e.current,null),Ji=Bu=Up=t,Bi=0,Ig=null,L1=$p=pf=0}function AT(e,t){do{var n=mi;try{if(b1(),Id.current=qy,jy){for(var a=ni.memoizedState;a!==null;){var c=a.queue;c!==null&&(c.pending=null),a=a.next}jy=!1}if(Xd=0,Di=Xi=ni=null,Pd=!1,R1.current=null,n===null||n.return===null){Bi=1,Ig=t,mi=null;break}e:{var f=e,o=n.return,v=n,x=t;if(t=Ji,v.flags|=2048,v.firstEffect=v.lastEffect=null,x!==null&&typeof x=="object"&&typeof x.then=="function"){var E=x;if(!(v.mode&2)){var T=v.alternate;T?(v.updateQueue=T.updateQueue,v.memoizedState=T.memoizedState,v.lanes=T.lanes):(v.updateQueue=null,v.memoizedState=null)}var P=(Zn.current&1)!==0,I=o;do{var q;if(q=I.tag===13){var U=I.memoizedState;if(U!==null)q=U.dehydrated!==null;else{var G=I.memoizedProps;q=G.fallback===void 0?!1:G.unstable_avoidThisFallback!==!0?!0:!P}}if(q){var D=I.updateQueue;if(D===null){var F=new Set;F.add(E),I.updateQueue=F}else D.add(E);if(!(I.mode&2)){if(I.flags|=64,v.flags|=16384,v.flags&=-2981,v.tag===1)if(v.alternate===null)v.tag=17;else{var V=El(-1,1);V.tag=2,Cl(v,V)}v.lanes|=1;break e}x=void 0,v=t;var B=f.pingCache;if(B===null?(B=f.pingCache=new X3,x=new Set,B.set(E,x)):(x=B.get(E),x===void 0&&(x=new Set,B.set(E,x))),!x.has(v)){x.add(v);var z=uL.bind(null,f,E,v);E.then(z,z)}I.flags|=4096,I.lanes=t;break e}I=I.return}while(I!==null);x=Error((up(v.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}Bi!==5&&(Bi=2),x=M1(x,v),I=o;do{switch(I.tag){case 3:f=x,I.flags|=4096,t&=-t,I.lanes|=t;var ne=ET(I,f,t);Z2(I,ne);break e;case 1:f=x;var oe=I.type,pe=I.stateNode;if(!(I.flags&64)&&(typeof oe.getDerivedStateFromError=="function"||pe!==null&&typeof pe.componentDidCatch=="function"&&(Qa===null||!Qa.has(pe)))){I.flags|=4096,t&=-t,I.lanes|=t;var be=CT(I,f,t);Z2(I,be);break e}}I=I.return}while(I!==null)}LT(n)}catch(Te){t=Te,mi===n&&n!==null&&(mi=n=n.return);continue}break}while(1)}function MT(){var e=Wy.current;return Wy.current=qy,e===null?qy:e}function md(e,t){var n=pr;pr|=16;var a=MT();so===e&&Ji===t||gp(e,t);do try{nL();break}catch(c){AT(e,c)}while(1);if(b1(),pr=n,Wy.current=a,mi!==null)throw Error(ft(261));return so=null,Ji=0,Bi}function nL(){for(;mi!==null;)RT(mi)}function iL(){for(;mi!==null&&!F3();)RT(mi)}function RT(e){var t=DT(e.alternate,e,Bu);e.memoizedProps=e.pendingProps,t===null?LT(e):mi=t,R1.current=null}function LT(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&2048){if(n=K3(t),n!==null){n.flags&=2047,mi=n;return}e!==null&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}else{if(n=Z3(n,t,Bu),n!==null){mi=n;return}if(n=t,n.tag!==24&&n.tag!==23||n.memoizedState===null||Bu&1073741824||!(n.mode&4)){for(var a=0,c=n.child;c!==null;)a|=c.lanes|c.childLanes,c=c.sibling;n.childLanes=a}e!==null&&!(e.flags&2048)&&(e.firstEffect===null&&(e.firstEffect=t.firstEffect),t.lastEffect!==null&&(e.lastEffect!==null&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(e.lastEffect!==null?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}if(t=t.sibling,t!==null){mi=t;return}mi=t=e}while(t!==null);Bi===0&&(Bi=5)}function wu(e){var t=kp();return Ou(99,oL.bind(null,e,t)),null}function oL(e,t){do Fl();while(Ad!==null);if(pr&48)throw Error(ft(327));var n=e.finishedWork;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ft(177));e.callbackNode=null;var a=n.lanes|n.childLanes,c=a,f=e.pendingLanes&~c;e.pendingLanes=c,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=c,e.mutableReadLanes&=c,e.entangledLanes&=c,c=e.entanglements;for(var o=e.eventTimes,v=e.expirationTimes;0<f;){var x=31-Ml(f),E=1<<x;c[x]=0,o[x]=-1,v[x]=-1,f&=~E}if($s!==null&&!(a&24)&&$s.has(e)&&$s.delete(e),e===so&&(mi=so=null,Ji=0),1<n.flags?n.lastEffect!==null?(n.lastEffect.nextEffect=n,a=n.firstEffect):a=n:a=n.firstEffect,a!==null){if(c=pr,pr|=32,R1.current=null,D0=iy,o=z2(),X_(o)){if("selectionStart"in o)v={start:o.selectionStart,end:o.selectionEnd};else e:if(v=(v=o.ownerDocument)&&v.defaultView||window,(E=v.getSelection&&v.getSelection())&&E.rangeCount!==0){v=E.anchorNode,f=E.anchorOffset,x=E.focusNode,E=E.focusOffset;try{v.nodeType,x.nodeType}catch{v=null;break e}var T=0,P=-1,I=-1,q=0,U=0,G=o,D=null;t:for(;;){for(var F;G!==v||f!==0&&G.nodeType!==3||(P=T+f),G!==x||E!==0&&G.nodeType!==3||(I=T+E),G.nodeType===3&&(T+=G.nodeValue.length),(F=G.firstChild)!==null;)D=G,G=F;for(;;){if(G===o)break t;if(D===v&&++q===f&&(P=T),D===x&&++U===E&&(I=T),(F=G.nextSibling)!==null)break;G=D,D=G.parentNode}G=F}v=P===-1||I===-1?null:{start:P,end:I}}else v=null;v=v||{start:0,end:0}}else v=null;O0={focusedElem:o,selectionRange:v},iy=!1,Rd=null,py=!1,Lt=a;do try{aL()}catch(Te){if(Lt===null)throw Error(ft(330));Il(Lt,Te),Lt=Lt.nextEffect}while(Lt!==null);Rd=null,Lt=a;do try{for(o=e;Lt!==null;){var V=Lt.flags;if(V&16&&Nd(Lt.stateNode,""),V&128){var B=Lt.alternate;if(B!==null){var z=B.ref;z!==null&&(typeof z=="function"?z(null):z.current=null)}}switch(V&1038){case 2:_S(Lt),Lt.flags&=-3;break;case 6:_S(Lt),Lt.flags&=-3,V0(Lt.alternate,Lt);break;case 1024:Lt.flags&=-1025;break;case 1028:Lt.flags&=-1025,V0(Lt.alternate,Lt);break;case 4:V0(Lt.alternate,Lt);break;case 8:v=Lt,kT(o,v);var ne=v.alternate;gS(v),ne!==null&&gS(ne)}Lt=Lt.nextEffect}}catch(Te){if(Lt===null)throw Error(ft(330));Il(Lt,Te),Lt=Lt.nextEffect}while(Lt!==null);if(z=O0,B=z2(),V=z.focusedElem,o=z.selectionRange,B!==V&&V&&V.ownerDocument&&qk(V.ownerDocument.documentElement,V)){for(o!==null&&X_(V)&&(B=o.start,z=o.end,z===void 0&&(z=B),"selectionStart"in V?(V.selectionStart=B,V.selectionEnd=Math.min(z,V.value.length)):(z=(B=V.ownerDocument||document)&&B.defaultView||window,z.getSelection&&(z=z.getSelection(),v=V.textContent.length,ne=Math.min(o.start,v),o=o.end===void 0?ne:Math.min(o.end,v),!z.extend&&ne>o&&(v=o,o=ne,ne=v),v=L2(V,ne),f=L2(V,o),v&&f&&(z.rangeCount!==1||z.anchorNode!==v.node||z.anchorOffset!==v.offset||z.focusNode!==f.node||z.focusOffset!==f.offset)&&(B=B.createRange(),B.setStart(v.node,v.offset),z.removeAllRanges(),ne>o?(z.addRange(B),z.extend(f.node,f.offset)):(B.setEnd(f.node,f.offset),z.addRange(B)))))),B=[],z=V;z=z.parentNode;)z.nodeType===1&&B.push({element:z,left:z.scrollLeft,top:z.scrollTop});for(typeof V.focus=="function"&&V.focus(),V=0;V<B.length;V++)z=B[V],z.element.scrollLeft=z.left,z.element.scrollTop=z.top}iy=!!D0,O0=D0=null,e.current=n,Lt=a;do try{for(V=e;Lt!==null;){var oe=Lt.flags;if(oe&36&&Q3(V,Lt.alternate,Lt),oe&128){B=void 0;var pe=Lt.ref;if(pe!==null){var be=Lt.stateNode;switch(Lt.tag){case 5:B=be;break;default:B=be}typeof pe=="function"?pe(B):pe.current=B}}Lt=Lt.nextEffect}}catch(Te){if(Lt===null)throw Error(ft(330));Il(Lt,Te),Lt=Lt.nextEffect}while(Lt!==null);Lt=null,U3(),pr=c}else e.current=n;if(Ll)Ll=!1,Ad=e,fd=t;else for(Lt=a;Lt!==null;)t=Lt.nextEffect,Lt.nextEffect=null,Lt.flags&8&&(oe=Lt,oe.sibling=null,oe.stateNode=null),Lt=t;if(a=e.pendingLanes,a===0&&(Qa=null),a===1?e===_x?Md++:(Md=0,_x=e):Md=0,n=n.stateNode,Lu&&typeof Lu.onCommitFiberRoot=="function")try{Lu.onCommitFiberRoot(_1,n,void 0,(n.current.flags&64)===64)}catch{}if(oa(e,Yi()),Gy)throw Gy=!1,e=yx,yx=null,e;return pr&8||as(),null}function aL(){for(;Lt!==null;){var e=Lt.alternate;py||Rd===null||(Lt.flags&8?_2(Lt,Rd)&&(py=!0):Lt.tag===13&&eL(e,Lt)&&_2(Lt,Rd)&&(py=!0));var t=Lt.flags;t&256&&J3(e,Lt),!(t&512)||Ll||(Ll=!0,Gd(97,function(){return Fl(),null})),Lt=Lt.nextEffect}}function Fl(){if(fd!==90){var e=97<fd?97:fd;return fd=90,Ou(e,lL)}return!1}function sL(e,t){gx.push(t,e),Ll||(Ll=!0,Gd(97,function(){return Fl(),null}))}function zT(e,t){vx.push(t,e),Ll||(Ll=!0,Gd(97,function(){return Fl(),null}))}function lL(){if(Ad===null)return!1;var e=Ad;if(Ad=null,pr&48)throw Error(ft(331));var t=pr;pr|=32;var n=vx;vx=[];for(var a=0;a<n.length;a+=2){var c=n[a],f=n[a+1],o=c.destroy;if(c.destroy=void 0,typeof o=="function")try{o()}catch(x){if(f===null)throw Error(ft(330));Il(f,x)}}for(n=gx,gx=[],a=0;a<n.length;a+=2){c=n[a],f=n[a+1];try{var v=c.create;c.destroy=v()}catch(x){if(f===null)throw Error(ft(330));Il(f,x)}}for(v=e.current.firstEffect;v!==null;)e=v.nextEffect,v.nextEffect=null,v.flags&8&&(v.sibling=null,v.stateNode=null),v=e;return pr=t,as(),!0}function bS(e,t,n){t=M1(n,t),t=ET(e,t,1),Cl(e,t),t=jo(),e=Pg(e,1),e!==null&&(bg(e,1,t),oa(e,t))}function Il(e,t){if(e.tag===3)bS(e,e,t);else for(var n=e.return;n!==null;){if(n.tag===3){bS(n,e,t);break}else if(n.tag===1){var a=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Qa===null||!Qa.has(a))){e=M1(t,e);var c=CT(n,e,1);if(Cl(n,c),c=jo(),n=Pg(n,1),n!==null)bg(n,1,c),oa(n,c);else if(typeof a.componentDidCatch=="function"&&(Qa===null||!Qa.has(a)))try{a.componentDidCatch(t,e)}catch{}break}}n=n.return}}function uL(e,t,n){var a=e.pingCache;a!==null&&a.delete(t),t=jo(),e.pingedLanes|=e.suspendedLanes&n,so===e&&(Ji&n)===n&&(Bi===4||Bi===3&&(Ji&62914560)===Ji&&500>Yi()-z1?gp(e,0):L1|=n),oa(e,t)}function cL(e,t){var n=e.stateNode;n!==null&&n.delete(t),t=0,t===0&&(t=e.mode,t&2?t&4?(Bs===0&&(Bs=Up),t=Yc(62914560&~Bs),t===0&&(t=4194304)):t=kp()===99?1:2:t=1),n=jo(),e=Pg(e,t),e!==null&&(bg(e,t,n),oa(e,n))}var DT;DT=function(e,t,n){var a=t.lanes;if(e!==null)if(e.memoizedProps!==t.pendingProps||So.current)wa=!0;else if(n&a)wa=!!(e.flags&16384);else{switch(wa=!1,t.tag){case 3:sS(t),j0();break;case 5:J2(t);break;case 1:Eo(t.type)&&sy(t);break;case 4:ix(t,t.stateNode.containerInfo);break;case 10:a=t.memoizedProps.value;var c=t.type._context;Kn(zy,c._currentValue),c._currentValue=a;break;case 13:if(t.memoizedState!==null)return n&t.child.childLanes?lS(e,t,n):(Kn(Zn,Zn.current&1),t=js(e,t,n),t!==null?t.sibling:null);Kn(Zn,Zn.current&1);break;case 19:if(a=(n&t.childLanes)!==0,e.flags&64){if(a)return dS(e,t,n);t.flags|=64}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),Kn(Zn,Zn.current),a)break;return null;case 23:case 24:return t.lanes=0,U0(e,t,n)}return js(e,t,n)}else wa=!1;switch(t.lanes=0,t.tag){case 2:if(a=t.type,e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,c=Cp(t,Qi.current),fp(t,n),c=T1(null,t,a,e,c,n),t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,Eo(a)){var f=!0;sy(t)}else f=!1;t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,S1(t);var o=a.getDerivedStateFromProps;typeof o=="function"&&By(t,a,o,e),c.updater=Tg,t.stateNode=c,c._reactInternals=t,nx(t,a,e,n),t=lx(null,t,a,!0,f,n)}else t.tag=0,bo(null,t,c,n),t=t.child;return t;case 16:c=t.elementType;e:{switch(e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,f=c._init,c=f(c._payload),t.type=c,f=t.tag=hL(c),e=va(c,e),f){case 0:t=sx(null,t,c,e,n);break e;case 1:t=aS(null,t,c,e,n);break e;case 11:t=iS(null,t,c,e,n);break e;case 14:t=oS(null,t,c,va(c.type,e),a,n);break e}throw Error(ft(306,c,""))}return t;case 0:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:va(a,c),sx(e,t,a,c,n);case 1:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:va(a,c),aS(e,t,a,c,n);case 3:if(sS(t),a=t.updateQueue,e===null||a===null)throw Error(ft(282));if(a=t.pendingProps,c=t.memoizedState,c=c!==null?c.element:null,aT(e,t),Hd(t,a,null,n),a=t.memoizedState.element,a===c)j0(),t=js(e,t,n);else{if(c=t.stateNode,(f=c.hydrate)&&(_l=dp(t.stateNode.containerInfo.firstChild),Fs=t,f=ts=!0),f){if(e=c.mutableSourceEagerHydrationData,e!=null)for(c=0;c<e.length;c+=2)f=e[c],f._workInProgressVersionPrimary=e[c+1],mp.push(f);for(n=cT(t,null,a,n),t.child=n;n;)n.flags=n.flags&-3|1024,n=n.sibling}else bo(e,t,a,n),j0();t=t.child}return t;case 5:return J2(t),e===null&&ox(t),a=t.type,c=t.pendingProps,f=e!==null?e.memoizedProps:null,o=c.children,Q_(a,c)?o=null:f!==null&&Q_(a,f)&&(t.flags|=16),xT(e,t),bo(e,t,o,n),t.child;case 6:return e===null&&ox(t),null;case 13:return lS(e,t,n);case 4:return ix(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=Ny(t,null,a,n):bo(e,t,a,n),t.child;case 11:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:va(a,c),iS(e,t,a,c,n);case 7:return bo(e,t,t.pendingProps,n),t.child;case 8:return bo(e,t,t.pendingProps.children,n),t.child;case 12:return bo(e,t,t.pendingProps.children,n),t.child;case 10:e:{a=t.type._context,c=t.pendingProps,o=t.memoizedProps,f=c.value;var v=t.type._context;if(Kn(zy,v._currentValue),v._currentValue=f,o!==null)if(v=o.value,f=ta(v,f)?0:(typeof a._calculateChangedBits=="function"?a._calculateChangedBits(v,f):1073741823)|0,f===0){if(o.children===c.children&&!So.current){t=js(e,t,n);break e}}else for(v=t.child,v!==null&&(v.return=t);v!==null;){var x=v.dependencies;if(x!==null){o=v.child;for(var E=x.firstContext;E!==null;){if(E.context===a&&E.observedBits&f){v.tag===1&&(E=El(-1,n&-n),E.tag=2,Cl(v,E)),v.lanes|=n,E=v.alternate,E!==null&&(E.lanes|=n),oT(v.return,n),x.lanes|=n;break}E=E.next}}else o=v.tag===10&&v.type===t.type?null:v.child;if(o!==null)o.return=v;else for(o=v;o!==null;){if(o===t){o=null;break}if(v=o.sibling,v!==null){v.return=o.return,o=v;break}o=o.return}v=o}bo(e,t,c.children,n),t=t.child}return t;case 9:return c=t.type,f=t.pendingProps,a=f.children,fp(t,n),c=ia(c,f.unstable_observedBits),a=a(c),t.flags|=1,bo(e,t,a,n),t.child;case 14:return c=t.type,f=va(c,t.pendingProps),f=va(c.type,f),oS(e,t,c,f,a,n);case 15:return _T(e,t,t.type,t.pendingProps,a,n);case 17:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:va(a,c),e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Eo(a)?(e=!0,sy(t)):e=!1,fp(t,n),lT(t,a,c),nx(t,a,c,n),lx(null,t,a,!0,e,n);case 19:return dS(e,t,n);case 23:return U0(e,t,n);case 24:return U0(e,t,n)}throw Error(ft(156,t.tag))};function pL(e,t,n,a){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function ra(e,t,n,a){return new pL(e,t,n,a)}function O1(e){return e=e.prototype,!(!e||!e.isReactComponent)}function hL(e){if(typeof e=="function")return O1(e)?1:0;if(e!=null){if(e=e.$$typeof,e===vg)return 11;if(e===_g)return 14}return 2}function zl(e,t){var n=e.alternate;return n===null?(n=ra(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function hy(e,t,n,a,c,f){var o=2;if(a=e,typeof e=="function")O1(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case yl:return vp(n.children,c,f,t);case pk:o=8,c|=16;break;case Jx:o=8,c|=1;break;case bd:return e=ra(12,n,t,c|8),e.elementType=bd,e.type=bd,e.lanes=f,e;case wd:return e=ra(13,n,t,c),e.type=wd,e.elementType=wd,e.lanes=f,e;case Cy:return e=ra(19,n,t,c),e.elementType=Cy,e.lanes=f,e;case i1:return B1(n,c,f,t);case D_:return e=ra(24,n,t,c),e.elementType=D_,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Qx:o=10;break e;case e1:o=9;break e;case vg:o=11;break e;case _g:o=14;break e;case t1:o=16,a=null;break e;case r1:o=22;break e}throw Error(ft(130,e==null?e:typeof e,""))}return t=ra(o,n,t,c),t.elementType=e,t.type=a,t.lanes=f,t}function vp(e,t,n,a){return e=ra(7,e,a,t),e.lanes=n,e}function B1(e,t,n,a){return e=ra(23,e,a,t),e.elementType=i1,e.lanes=n,e}function q0(e,t,n){return e=ra(6,e,null,t),e.lanes=n,e}function W0(e,t,n){return t=ra(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function dL(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=I0(0),this.expirationTimes=I0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=I0(0),this.mutableSourceEagerHydrationData=null}function fL(e,t,n){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ku,key:a==null?null:""+a,children:e,containerInfo:t,implementation:n}}function Hy(e,t,n,a){var c=t.current,f=jo(),o=kl(c);e:if(n){n=n._reactInternals;t:{if(Vu(n)!==n||n.tag!==1)throw Error(ft(170));var v=n;do{switch(v.tag){case 3:v=v.stateNode.context;break t;case 1:if(Eo(v.type)){v=v.stateNode.__reactInternalMemoizedMergedChildContext;break t}}v=v.return}while(v!==null);throw Error(ft(171))}if(n.tag===1){var x=n.type;if(Eo(x)){n=Jk(n,x,v);break e}}n=v}else n=Rl;return t.context===null?t.context=n:t.pendingContext=n,t=El(f,o),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),Cl(c,t),Tl(c,o,f),o}function G0(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function wS(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function N1(e,t){wS(e,t),(e=e.alternate)&&wS(e,t)}function mL(){return null}function F1(e,t,n){var a=n!=null&&n.hydrationOptions!=null&&n.hydrationOptions.mutableSources||null;if(n=new dL(e,t,n!=null&&n.hydrate===!0),t=ra(3,null,null,t===2?7:t===1?3:0),n.current=t,t.stateNode=n,S1(t),e[jp]=n.current,Hk(e.nodeType===8?e.parentNode:e),a)for(e=0;e<a.length;e++){t=a[e];var c=t._getVersion;c=c(t._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[t,c]:n.mutableSourceEagerHydrationData.push(t,c)}this._internalRoot=n}F1.prototype.render=function(e){Hy(e,this._internalRoot,null,null)};F1.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Hy(null,e,null,function(){t[jp]=null})};function hf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function yL(e,t){if(t||(t=e?e.nodeType===9?e.documentElement:e.firstChild:null,t=!(!t||t.nodeType!==1||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new F1(e,0,t?{hydrate:!0}:void 0)}function Ag(e,t,n,a,c){var f=n._reactRootContainer;if(f){var o=f._internalRoot;if(typeof c=="function"){var v=c;c=function(){var E=G0(o);v.call(E)}}Hy(t,o,e,c)}else{if(f=n._reactRootContainer=yL(n,a),o=f._internalRoot,typeof c=="function"){var x=c;c=function(){var E=G0(o);x.call(E)}}PT(function(){Hy(t,o,e,c)})}return G0(o)}kk=function(e){if(e.tag===13){var t=jo();Tl(e,4,t),N1(e,4)}};u1=function(e){if(e.tag===13){var t=jo();Tl(e,67108864,t),N1(e,67108864)}};Tk=function(e){if(e.tag===13){var t=jo(),n=kl(e);Tl(e,n,t),N1(e,n)}};Ik=function(e,t){return t()};W_=function(e,t,n){switch(t){case"input":if(B_(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var a=n[t];if(a!==e&&a.form===e.form){var c=Cg(a);if(!c)throw Error(ft(90));dk(a),B_(a,c)}}}break;case"textarea":mk(e,n);break;case"select":t=n.value,t!=null&&cp(e,!!n.multiple,t,!1)}};a1=IT;wk=function(e,t,n,a,c){var f=pr;pr|=4;try{return Ou(98,e.bind(null,t,n,a,c))}finally{pr=f,pr===0&&(Vp(),as())}};s1=function(){!(pr&49)&&(rL(),Fl())};Sk=function(e,t){var n=pr;pr|=2;try{return e(t)}finally{pr=n,pr===0&&(Vp(),as())}};function OT(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!hf(t))throw Error(ft(200));return fL(e,t,null,n)}var gL={Events:[uf,ip,Cg,xk,bk,Fl,{current:!1}]},rd={findFiberByHostInstance:Iu,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},vL={bundleType:rd.bundleType,version:rd.version,rendererPackageName:rd.rendererPackageName,rendererConfig:rd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$u.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Ck(e),e===null?null:e.stateNode},findFiberByHostInstance:rd.findFiberByHostInstance||mL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vm.isDisabled&&Vm.supportsFiber)try{_1=Vm.inject(vL),Lu=Vm}catch{}}aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gL;aa.createPortal=OT;aa.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ft(188)):Error(ft(268,Object.keys(e)));return e=Ck(t),e=e===null?null:e.stateNode,e};aa.flushSync=function(e,t){var n=pr;if(n&48)return e(t);pr|=1;try{if(e)return Ou(99,e.bind(null,t))}finally{pr=n,as()}};aa.hydrate=function(e,t,n){if(!hf(t))throw Error(ft(200));return Ag(null,e,t,!0,n)};aa.render=function(e,t,n){if(!hf(t))throw Error(ft(200));return Ag(null,e,t,!1,n)};aa.unmountComponentAtNode=function(e){if(!hf(e))throw Error(ft(40));return e._reactRootContainer?(PT(function(){Ag(null,null,e,!1,function(){e._reactRootContainer=null,e[jp]=null})}),!0):!1};aa.unstable_batchedUpdates=IT;aa.unstable_createPortal=function(e,t){return OT(e,t,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};aa.unstable_renderSubtreeIntoContainer=function(e,t,n,a){if(!hf(n))throw Error(ft(200));if(e==null||e._reactInternals===void 0)throw Error(ft(38));return Ag(e,t,n,!1,a)};aa.version="17.0.2";function BT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(BT)}catch(e){console.error(e)}}BT(),sk.exports=aa;var j1=sk.exports;const yd=yg(j1);var NT={exports:{}};(function(e,t){(function(n,a){e.exports=a()})(ba,function(){var n,a,c;function f(o,v){if(!n)n=v;else if(!a)a=v;else{var x="var sharedChunk = {}; ("+n+")(sharedChunk); ("+a+")(sharedChunk);",E={};n(E),c=v(E),typeof window<"u"&&(c.workerUrl=window.URL.createObjectURL(new Blob([x],{type:"text/javascript"})))}}return f(["exports"],function(o){function v(r,i){return r(i={exports:{}},i.exports),i.exports}var x=E;function E(r,i,s,h){this.cx=3*r,this.bx=3*(s-r)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*i,this.by=3*(h-i)-this.cy,this.ay=1-this.cy-this.by,this.p1x=r,this.p1y=h,this.p2x=s,this.p2y=h}E.prototype.sampleCurveX=function(r){return((this.ax*r+this.bx)*r+this.cx)*r},E.prototype.sampleCurveY=function(r){return((this.ay*r+this.by)*r+this.cy)*r},E.prototype.sampleCurveDerivativeX=function(r){return(3*this.ax*r+2*this.bx)*r+this.cx},E.prototype.solveCurveX=function(r,i){var s,h,m,y,_;for(i===void 0&&(i=1e-6),m=r,_=0;_<8;_++){if(y=this.sampleCurveX(m)-r,Math.abs(y)<i)return m;var S=this.sampleCurveDerivativeX(m);if(Math.abs(S)<1e-6)break;m-=y/S}if((m=r)<(s=0))return s;if(m>(h=1))return h;for(;s<h;){if(y=this.sampleCurveX(m),Math.abs(y-r)<i)return m;r>y?s=m:h=m,m=.5*(h-s)+s}return m},E.prototype.solve=function(r,i){return this.sampleCurveY(this.solveCurveX(r,i))};var T=P;function P(r,i){this.x=r,this.y=i}P.prototype={clone:function(){return new P(this.x,this.y)},add:function(r){return this.clone()._add(r)},sub:function(r){return this.clone()._sub(r)},multByPoint:function(r){return this.clone()._multByPoint(r)},divByPoint:function(r){return this.clone()._divByPoint(r)},mult:function(r){return this.clone()._mult(r)},div:function(r){return this.clone()._div(r)},rotate:function(r){return this.clone()._rotate(r)},rotateAround:function(r,i){return this.clone()._rotateAround(r,i)},matMult:function(r){return this.clone()._matMult(r)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(r){return this.x===r.x&&this.y===r.y},dist:function(r){return Math.sqrt(this.distSqr(r))},distSqr:function(r){var i=r.x-this.x,s=r.y-this.y;return i*i+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(r){return Math.atan2(this.y-r.y,this.x-r.x)},angleWith:function(r){return this.angleWithSep(r.x,r.y)},angleWithSep:function(r,i){return Math.atan2(this.x*i-this.y*r,this.x*r+this.y*i)},_matMult:function(r){var i=r[2]*this.x+r[3]*this.y;return this.x=r[0]*this.x+r[1]*this.y,this.y=i,this},_add:function(r){return this.x+=r.x,this.y+=r.y,this},_sub:function(r){return this.x-=r.x,this.y-=r.y,this},_mult:function(r){return this.x*=r,this.y*=r,this},_div:function(r){return this.x/=r,this.y/=r,this},_multByPoint:function(r){return this.x*=r.x,this.y*=r.y,this},_divByPoint:function(r){return this.x/=r.x,this.y/=r.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var r=this.y;return this.y=this.x,this.x=-r,this},_rotate:function(r){var i=Math.cos(r),s=Math.sin(r),h=s*this.x+i*this.y;return this.x=i*this.x-s*this.y,this.y=h,this},_rotateAround:function(r,i){var s=Math.cos(r),h=Math.sin(r),m=i.y+h*(this.x-i.x)+s*(this.y-i.y);return this.x=i.x+s*(this.x-i.x)-h*(this.y-i.y),this.y=m,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},P.convert=function(r){return r instanceof P?r:Array.isArray(r)?new P(r[0],r[1]):r};var I=typeof self<"u"?self:{},q=Math.pow(2,53)-1;function U(r,i,s,h){var m=new x(r,i,s,h);return function(y){return m.solve(y)}}var G=U(.25,.1,.25,1);function D(r,i,s){return Math.min(s,Math.max(i,r))}function F(r,i,s){var h=s-i,m=((r-i)%h+h)%h+i;return m===i?s:m}function V(r){for(var i=[],s=arguments.length-1;s-- >0;)i[s]=arguments[s+1];for(var h=0,m=i;h<m.length;h+=1){var y=m[h];for(var _ in y)r[_]=y[_]}return r}var B=1;function z(){return B++}function ne(){return function r(i){return i?(i^16*Math.random()>>i/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,r)}()}function oe(r){return!!r&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(r)}function pe(r,i){r.forEach(function(s){i[s]&&(i[s]=i[s].bind(i))})}function be(r,i){return r.indexOf(i,r.length-i.length)!==-1}function Te(r,i,s){var h={};for(var m in r)h[m]=i.call(s||this,r[m],m,r);return h}function _e(r,i,s){var h={};for(var m in r)i.call(s||this,r[m],m,r)&&(h[m]=r[m]);return h}function Se(r){return Array.isArray(r)?r.map(Se):typeof r=="object"&&r?Te(r,Se):r}var te={};function he(r){te[r]||(typeof console<"u"&&console.warn(r),te[r]=!0)}function Oe(r,i,s){return(s.y-r.y)*(i.x-r.x)>(i.y-r.y)*(s.x-r.x)}function je(r){for(var i=0,s=0,h=r.length,m=h-1,y=void 0,_=void 0;s<h;m=s++)i+=((_=r[m]).x-(y=r[s]).x)*(y.y+_.y);return i}function Ce(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function ke(r){var i={};if(r.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(h,m,y,_){var S=y||_;return i[m]=!S||S.toLowerCase(),""}),i["max-age"]){var s=parseInt(i["max-age"],10);isNaN(s)?delete i["max-age"]:i["max-age"]=s}return i}var $e=null;function Ze(r){if($e==null){var i=r.navigator?r.navigator.userAgent:null;$e=!!r.safari||!(!i||!(/\b(iPad|iPhone|iPod)\b/.test(i)||i.match("Safari")&&!i.match("Chrome")))}return $e}function bt(r){try{var i=I[r];return i.setItem("_mapbox_test_",1),i.removeItem("_mapbox_test_"),!0}catch{return!1}}var Pe,Ge,st,Re,qe=I.performance&&I.performance.now?I.performance.now.bind(I.performance):Date.now.bind(Date),Kt=I.requestAnimationFrame||I.mozRequestAnimationFrame||I.webkitRequestAnimationFrame||I.msRequestAnimationFrame,It=I.cancelAnimationFrame||I.mozCancelAnimationFrame||I.webkitCancelAnimationFrame||I.msCancelAnimationFrame,Ot={now:qe,frame:function(r){var i=Kt(r);return{cancel:function(){return It(i)}}},getImageData:function(r,i){i===void 0&&(i=0);var s=I.document.createElement("canvas"),h=s.getContext("2d");if(!h)throw new Error("failed to create canvas 2d context");return s.width=r.width,s.height=r.height,h.drawImage(r,0,0,r.width,r.height),h.getImageData(-i,-i,r.width+2*i,r.height+2*i)},resolveURL:function(r){return Pe||(Pe=I.document.createElement("a")),Pe.href=r,Pe.href},hardwareConcurrency:I.navigator&&I.navigator.hardwareConcurrency||4,get devicePixelRatio(){return I.devicePixelRatio},get prefersReducedMotion(){return!!I.matchMedia&&(Ge==null&&(Ge=I.matchMedia("(prefers-reduced-motion: reduce)")),Ge.matches)}},Et={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},nr={supported:!1,testSupport:function(r){!Zt&&Re&&(Yt?at(r):st=r)}},Zt=!1,Yt=!1;function at(r){var i=r.createTexture();r.bindTexture(r.TEXTURE_2D,i);try{if(r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,Re),r.isContextLost())return;nr.supported=!0}catch{}r.deleteTexture(i),Zt=!0}I.document&&((Re=I.document.createElement("img")).onload=function(){st&&at(st),st=null,Yt=!0},Re.onerror=function(){Zt=!0,st=null},Re.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var Dt="01",er=function(r,i){this._transformRequestFn=r,this._customAccessToken=i,this._createSkuToken()};function Rr(r){return r.indexOf("mapbox:")===0}er.prototype._createSkuToken=function(){var r=function(){for(var i="",s=0;s<10;s++)i+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Dt,i].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=r.token,this._skuTokenExpiresAt=r.tokenExpiresAt},er.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},er.prototype.transformRequest=function(r,i){return this._transformRequestFn&&this._transformRequestFn(r,i)||{url:r}},er.prototype.normalizeStyleURL=function(r,i){if(!Rr(r))return r;var s=Lr(r);return s.path="/styles/v1"+s.path,this._makeAPIURL(s,this._customAccessToken||i)},er.prototype.normalizeGlyphsURL=function(r,i){if(!Rr(r))return r;var s=Lr(r);return s.path="/fonts/v1"+s.path,this._makeAPIURL(s,this._customAccessToken||i)},er.prototype.normalizeSourceURL=function(r,i){if(!Rr(r))return r;var s=Lr(r);return s.path="/v4/"+s.authority+".json",s.params.push("secure"),this._makeAPIURL(s,this._customAccessToken||i)},er.prototype.normalizeSpriteURL=function(r,i,s,h){var m=Lr(r);return Rr(r)?(m.path="/styles/v1"+m.path+"/sprite"+i+s,this._makeAPIURL(m,this._customAccessToken||h)):(m.path+=""+i+s,Er(m))},er.prototype.normalizeTileURL=function(r,i){if(this._isSkuTokenExpired()&&this._createSkuToken(),r&&!Rr(r))return r;var s=Lr(r);s.path=s.path.replace(/(\.(png|jpg)\d*)(?=$)/,(Ot.devicePixelRatio>=2||i===512?"@2x":"")+(nr.supported?".webp":"$1")),s.path=s.path.replace(/^.+\/v4\//,"/"),s.path="/v4"+s.path;var h=this._customAccessToken||function(m){for(var y=0,_=m;y<_.length;y+=1){var S=_[y].match(/^access_token=(.*)$/);if(S)return S[1]}return null}(s.params)||Et.ACCESS_TOKEN;return Et.REQUIRE_ACCESS_TOKEN&&h&&this._skuToken&&s.params.push("sku="+this._skuToken),this._makeAPIURL(s,h)},er.prototype.canonicalizeTileURL=function(r,i){var s=Lr(r);if(!s.path.match(/(^\/v4\/)/)||!s.path.match(/\.[\w]+$/))return r;var h="mapbox://tiles/";h+=s.path.replace("/v4/","");var m=s.params;return i&&(m=m.filter(function(y){return!y.match(/^access_token=/)})),m.length&&(h+="?"+m.join("&")),h},er.prototype.canonicalizeTileset=function(r,i){for(var s=!!i&&Rr(i),h=[],m=0,y=r.tiles||[];m<y.length;m+=1){var _=y[m];tr(_)?h.push(this.canonicalizeTileURL(_,s)):h.push(_)}return h},er.prototype._makeAPIURL=function(r,i){var s="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",h=Lr(Et.API_URL);if(r.protocol=h.protocol,r.authority=h.authority,r.protocol==="http"){var m=r.params.indexOf("secure");m>=0&&r.params.splice(m,1)}if(h.path!=="/"&&(r.path=""+h.path+r.path),!Et.REQUIRE_ACCESS_TOKEN)return Er(r);if(!(i=i||Et.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+s);if(i[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+s);return r.params=r.params.filter(function(y){return y.indexOf("access_token")===-1}),r.params.push("access_token="+i),Er(r)};var Nr=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function tr(r){return Nr.test(r)}var Vr=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Lr(r){var i=r.match(Vr);if(!i)throw new Error("Unable to parse URL object");return{protocol:i[1],authority:i[2],path:i[3]||"/",params:i[4]?i[4].split("&"):[]}}function Er(r){var i=r.params.length?"?"+r.params.join("&"):"";return r.protocol+"://"+r.authority+r.path+i}function on(r){if(!r)return null;var i=r.split(".");if(!i||i.length!==3)return null;try{return JSON.parse(decodeURIComponent(I.atob(i[1]).split("").map(function(s){return"%"+("00"+s.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch{return null}}var Mr=function(r){this.type=r,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Mr.prototype.getStorageKey=function(r){var i,s=on(Et.ACCESS_TOKEN);return i=s&&s.u?I.btoa(encodeURIComponent(s.u).replace(/%([0-9A-F]{2})/g,function(h,m){return String.fromCharCode(+("0x"+m))})):Et.ACCESS_TOKEN||"",r?"mapbox.eventData."+r+":"+i:"mapbox.eventData:"+i},Mr.prototype.fetchEventData=function(){var r=bt("localStorage"),i=this.getStorageKey(),s=this.getStorageKey("uuid");if(r)try{var h=I.localStorage.getItem(i);h&&(this.eventData=JSON.parse(h));var m=I.localStorage.getItem(s);m&&(this.anonId=m)}catch{he("Unable to read from LocalStorage")}},Mr.prototype.saveEventData=function(){var r=bt("localStorage"),i=this.getStorageKey(),s=this.getStorageKey("uuid");if(r)try{I.localStorage.setItem(s,this.anonId),Object.keys(this.eventData).length>=1&&I.localStorage.setItem(i,JSON.stringify(this.eventData))}catch{he("Unable to write to LocalStorage")}},Mr.prototype.processRequests=function(r){},Mr.prototype.postEvent=function(r,i,s,h){var m=this;if(Et.EVENTS_URL){var y=Lr(Et.EVENTS_URL);y.params.push("access_token="+(h||Et.ACCESS_TOKEN||""));var _={event:this.type,created:new Date(r).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.3",skuId:Dt,userId:this.anonId},S=i?V(_,i):_,k={url:Er(y),headers:{"Content-Type":"text/plain"},body:JSON.stringify([S])};this.pendingRequest=Ht(k,function(A){m.pendingRequest=null,s(A),m.saveEventData(),m.processRequests(h)})}},Mr.prototype.queueRequest=function(r,i){this.queue.push(r),this.processRequests(i)};var lr,Xr,wn=function(r){function i(){r.call(this,"map.load"),this.success={},this.skuToken=""}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.postMapLoadEvent=function(s,h,m,y){this.skuToken=m;var _=!(!y&&!Et.ACCESS_TOKEN),S=Array.isArray(s)&&s.some(function(k){return Rr(k)||tr(k)});Et.EVENTS_URL&&_&&S&&this.queueRequest({id:h,timestamp:Date.now()},y)},i.prototype.processRequests=function(s){var h=this;if(!this.pendingRequest&&this.queue.length!==0){var m=this.queue.shift(),y=m.id,_=m.timestamp;y&&this.success[y]||(this.anonId||this.fetchEventData(),oe(this.anonId)||(this.anonId=ne()),this.postEvent(_,{skuToken:this.skuToken},function(S){S||y&&(h.success[y]=!0)},s))}},i}(Mr),oi=new(function(r){function i(s){r.call(this,"appUserTurnstile"),this._customAccessToken=s}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.postTurnstileEvent=function(s,h){Et.EVENTS_URL&&Et.ACCESS_TOKEN&&Array.isArray(s)&&s.some(function(m){return Rr(m)||tr(m)})&&this.queueRequest(Date.now(),h)},i.prototype.processRequests=function(s){var h=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var m=on(Et.ACCESS_TOKEN),y=m?m.u:Et.ACCESS_TOKEN,_=y!==this.eventData.tokenU;oe(this.anonId)||(this.anonId=ne(),_=!0);var S=this.queue.shift();if(this.eventData.lastSuccess){var k=new Date(this.eventData.lastSuccess),A=new Date(S),R=(S-this.eventData.lastSuccess)/864e5;_=_||R>=1||R<-1||k.getDate()!==A.getDate()}else _=!0;if(!_)return this.processRequests();this.postEvent(S,{"enabled.telemetry":!1},function(O){O||(h.eventData.lastSuccess=S,h.eventData.tokenU=y)},s)}},i}(Mr)),dr=oi.postTurnstileEvent.bind(oi),Bt=new wn,Un=Bt.postMapLoadEvent.bind(Bt),On=500,ji=50;function Ft(){I.caches&&!lr&&(lr=I.caches.open("mapbox-tiles"))}function wr(r){var i=r.indexOf("?");return i<0?r:r.slice(0,i)}var ut,Rt=1/0;function gr(){return ut==null&&(ut=I.OffscreenCanvas&&new I.OffscreenCanvas(1,1).getContext("2d")&&typeof I.createImageBitmap=="function"),ut}var Sr={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Sr);var rn=function(r){function i(s,h,m){h===401&&tr(m)&&(s+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),r.call(this,s),this.status=h,this.url=m,this.name=this.constructor.name,this.message=s}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},i}(Error),Le=Ce()?function(){return self.worker&&self.worker.referrer}:function(){return(I.location.protocol==="blob:"?I.parent:I).location.href},tt,wt,ar=function(r,i){if(!(/^file:/.test(s=r.url)||/^file:/.test(Le())&&!/^\w+:/.test(s))){if(I.fetch&&I.Request&&I.AbortController&&I.Request.prototype.hasOwnProperty("signal"))return function(h,m){var y,_=new I.AbortController,S=new I.Request(h.url,{method:h.method||"GET",body:h.body,credentials:h.credentials,headers:h.headers,referrer:Le(),signal:_.signal}),k=!1,A=!1,R=(y=S.url).indexOf("sku=")>0&&tr(y);h.type==="json"&&S.headers.set("Accept","application/json");var O=function(H,se,le){if(!A){if(H&&H.message!=="SecurityError"&&he(H),se&&le)return $(se);var xe=Date.now();I.fetch(S).then(function(de){if(de.ok){var Ie=R?de.clone():null;return $(de,Ie,xe)}return m(new rn(de.statusText,de.status,h.url))}).catch(function(de){de.code!==20&&m(new Error(de.message))})}},$=function(H,se,le){(h.type==="arrayBuffer"?H.arrayBuffer():h.type==="json"?H.json():H.text()).then(function(xe){A||(se&&le&&function(de,Ie,Me){if(Ft(),lr){var ze={status:Ie.status,statusText:Ie.statusText,headers:new I.Headers};Ie.headers.forEach(function(We,Je){return ze.headers.set(Je,We)});var Be=ke(Ie.headers.get("Cache-Control")||"");Be["no-store"]||(Be["max-age"]&&ze.headers.set("Expires",new Date(Me+1e3*Be["max-age"]).toUTCString()),new Date(ze.headers.get("Expires")).getTime()-Me<42e4||function(We,Je){if(Xr===void 0)try{new Response(new ReadableStream),Xr=!0}catch{Xr=!1}Xr?Je(We.body):We.blob().then(Je)}(Ie,function(We){var Je=new I.Response(We,ze);Ft(),lr&&lr.then(function(rt){return rt.put(wr(de.url),Je)}).catch(function(rt){return he(rt.message)})}))}}(S,se,le),k=!0,m(null,xe,H.headers.get("Cache-Control"),H.headers.get("Expires")))}).catch(function(xe){A||m(new Error(xe.message))})};return R?function(H,se){if(Ft(),!lr)return se(null);var le=wr(H.url);lr.then(function(xe){xe.match(le).then(function(de){var Ie=function(Me){if(!Me)return!1;var ze=new Date(Me.headers.get("Expires")||0),Be=ke(Me.headers.get("Cache-Control")||"");return ze>Date.now()&&!Be["no-cache"]}(de);xe.delete(le),Ie&&xe.put(le,de.clone()),se(null,de,Ie)}).catch(se)}).catch(se)}(S,O):O(null,null),{cancel:function(){A=!0,k||_.abort()}}}(r,i);if(Ce()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",r,i,void 0,!0)}var s;return function(h,m){var y=new I.XMLHttpRequest;for(var _ in y.open(h.method||"GET",h.url,!0),h.type==="arrayBuffer"&&(y.responseType="arraybuffer"),h.headers)y.setRequestHeader(_,h.headers[_]);return h.type==="json"&&(y.responseType="text",y.setRequestHeader("Accept","application/json")),y.withCredentials=h.credentials==="include",y.onerror=function(){m(new Error(y.statusText))},y.onload=function(){if((y.status>=200&&y.status<300||y.status===0)&&y.response!==null){var S=y.response;if(h.type==="json")try{S=JSON.parse(y.response)}catch(k){return m(k)}m(null,S,y.getResponseHeader("Cache-Control"),y.getResponseHeader("Expires"))}else m(new rn(y.statusText,y.status,h.url))},y.send(h.body),{cancel:function(){return y.abort()}}}(r,i)},zr=function(r,i){return ar(V(r,{type:"arrayBuffer"}),i)},Ht=function(r,i){return ar(V(r,{method:"POST"}),i)},L="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";tt=[],wt=0;var j=function(r,i){if(nr.supported&&(r.headers||(r.headers={}),r.headers.accept="image/webp,*/*"),wt>=Et.MAX_PARALLEL_IMAGE_REQUESTS){var s={requestParameters:r,callback:i,cancelled:!1,cancel:function(){this.cancelled=!0}};return tt.push(s),s}wt++;var h=!1,m=function(){if(!h)for(h=!0,wt--;tt.length&&wt<Et.MAX_PARALLEL_IMAGE_REQUESTS;){var _=tt.shift();_.cancelled||(_.cancel=j(_.requestParameters,_.callback).cancel)}},y=zr(r,function(_,S,k,A){m(),_?i(_):S&&(gr()?function(R,O){var $=new I.Blob([new Uint8Array(R)],{type:"image/png"});I.createImageBitmap($).then(function(H){O(null,H)}).catch(function(H){O(new Error("Could not load image because of "+H.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(S,i):function(R,O,$,H){var se=new I.Image,le=I.URL;se.onload=function(){O(null,se),le.revokeObjectURL(se.src),se.onload=null,I.requestAnimationFrame(function(){se.src=L})},se.onerror=function(){return O(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var xe=new I.Blob([new Uint8Array(R)],{type:"image/png"});se.cacheControl=$,se.expires=H,se.src=R.byteLength?le.createObjectURL(xe):L}(S,i,k,A))});return{cancel:function(){y.cancel(),m()}}};function W(r,i,s){s[r]&&s[r].indexOf(i)!==-1||(s[r]=s[r]||[],s[r].push(i))}function Y(r,i,s){if(s&&s[r]){var h=s[r].indexOf(i);h!==-1&&s[r].splice(h,1)}}var re=function(r,i){i===void 0&&(i={}),V(this,i),this.type=r},me=function(r){function i(s,h){h===void 0&&(h={}),r.call(this,"error",V({error:s},h))}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i}(re),ye=function(){};ye.prototype.on=function(r,i){return this._listeners=this._listeners||{},W(r,i,this._listeners),this},ye.prototype.off=function(r,i){return Y(r,i,this._listeners),Y(r,i,this._oneTimeListeners),this},ye.prototype.once=function(r,i){return this._oneTimeListeners=this._oneTimeListeners||{},W(r,i,this._oneTimeListeners),this},ye.prototype.fire=function(r,i){typeof r=="string"&&(r=new re(r,i||{}));var s=r.type;if(this.listens(s)){r.target=this;for(var h=0,m=this._listeners&&this._listeners[s]?this._listeners[s].slice():[];h<m.length;h+=1)m[h].call(this,r);for(var y=0,_=this._oneTimeListeners&&this._oneTimeListeners[s]?this._oneTimeListeners[s].slice():[];y<_.length;y+=1){var S=_[y];Y(s,S,this._oneTimeListeners),S.call(this,r)}var k=this._eventedParent;k&&(V(r,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),k.fire(r))}else r instanceof me&&console.error(r.error);return this},ye.prototype.listens=function(r){return this._listeners&&this._listeners[r]&&this._listeners[r].length>0||this._oneTimeListeners&&this._oneTimeListeners[r]&&this._oneTimeListeners[r].length>0||this._eventedParent&&this._eventedParent.listens(r)},ye.prototype.setEventedParent=function(r,i){return this._eventedParent=r,this._eventedParentData=i,this};var Z={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},ie=function(r,i,s,h){this.message=(r?r+": ":"")+s,h&&(this.identifier=h),i!=null&&i.__line__&&(this.line=i.__line__)};function Ee(r){var i=r.value;return i?[new ie(r.key,i,"constants have been deprecated as of v8")]:[]}function He(r){for(var i=[],s=arguments.length-1;s-- >0;)i[s]=arguments[s+1];for(var h=0,m=i;h<m.length;h+=1){var y=m[h];for(var _ in y)r[_]=y[_]}return r}function Xe(r){return r instanceof Number||r instanceof String||r instanceof Boolean?r.valueOf():r}function Ue(r){if(Array.isArray(r))return r.map(Ue);if(r instanceof Object&&!(r instanceof Number||r instanceof String||r instanceof Boolean)){var i={};for(var s in r)i[s]=Ue(r[s]);return i}return Xe(r)}var Ye=function(r){function i(s,h){r.call(this,h),this.message=h,this.key=s}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i}(Error),vt=function(r,i){i===void 0&&(i=[]),this.parent=r,this.bindings={};for(var s=0,h=i;s<h.length;s+=1){var m=h[s];this.bindings[m[0]]=m[1]}};vt.prototype.concat=function(r){return new vt(this,r)},vt.prototype.get=function(r){if(this.bindings[r])return this.bindings[r];if(this.parent)return this.parent.get(r);throw new Error(r+" not found in scope.")},vt.prototype.has=function(r){return!!this.bindings[r]||!!this.parent&&this.parent.has(r)};var yt={kind:"null"},Ve={kind:"number"},ht={kind:"string"},nt={kind:"boolean"},ot={kind:"color"},or={kind:"object"},ct={kind:"value"},mr={kind:"collator"},Gr={kind:"formatted"},ur={kind:"resolvedImage"};function Ir(r,i){return{kind:"array",itemType:r,N:i}}function vr(r){if(r.kind==="array"){var i=vr(r.itemType);return typeof r.N=="number"?"array<"+i+", "+r.N+">":r.itemType.kind==="value"?"array":"array<"+i+">"}return r.kind}var yi=[yt,Ve,ht,nt,ot,Gr,or,Ir(ct),ur];function Dr(r,i){if(i.kind==="error")return null;if(r.kind==="array"){if(i.kind==="array"&&(i.N===0&&i.itemType.kind==="value"||!Dr(r.itemType,i.itemType))&&(typeof r.N!="number"||r.N===i.N))return null}else{if(r.kind===i.kind)return null;if(r.kind==="value"){for(var s=0,h=yi;s<h.length;s+=1)if(!Dr(h[s],i))return null}}return"Expected "+vr(r)+" but found "+vr(i)+" instead."}function Sn(r,i){return i.some(function(s){return s.kind===r.kind})}function qr(r,i){return i.some(function(s){return s==="null"?r===null:s==="array"?Array.isArray(r):s==="object"?r&&!Array.isArray(r)&&typeof r=="object":s===typeof r})}var fr=v(function(r,i){var s={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function h(S){return(S=Math.round(S))<0?0:S>255?255:S}function m(S){return h(S[S.length-1]==="%"?parseFloat(S)/100*255:parseInt(S))}function y(S){return(k=S[S.length-1]==="%"?parseFloat(S)/100:parseFloat(S))<0?0:k>1?1:k;var k}function _(S,k,A){return A<0?A+=1:A>1&&(A-=1),6*A<1?S+(k-S)*A*6:2*A<1?k:3*A<2?S+(k-S)*(2/3-A)*6:S}try{i.parseCSSColor=function(S){var k,A=S.replace(/ /g,"").toLowerCase();if(A in s)return s[A].slice();if(A[0]==="#")return A.length===4?(k=parseInt(A.substr(1),16))>=0&&k<=4095?[(3840&k)>>4|(3840&k)>>8,240&k|(240&k)>>4,15&k|(15&k)<<4,1]:null:A.length===7&&(k=parseInt(A.substr(1),16))>=0&&k<=16777215?[(16711680&k)>>16,(65280&k)>>8,255&k,1]:null;var R=A.indexOf("("),O=A.indexOf(")");if(R!==-1&&O+1===A.length){var $=A.substr(0,R),H=A.substr(R+1,O-(R+1)).split(","),se=1;switch($){case"rgba":if(H.length!==4)return null;se=y(H.pop());case"rgb":return H.length!==3?null:[m(H[0]),m(H[1]),m(H[2]),se];case"hsla":if(H.length!==4)return null;se=y(H.pop());case"hsl":if(H.length!==3)return null;var le=(parseFloat(H[0])%360+360)%360/360,xe=y(H[1]),de=y(H[2]),Ie=de<=.5?de*(xe+1):de+xe-de*xe,Me=2*de-Ie;return[h(255*_(Me,Ie,le+1/3)),h(255*_(Me,Ie,le)),h(255*_(Me,Ie,le-1/3)),se];default:return null}}return null}}catch{}}).parseCSSColor,Pr=function(r,i,s,h){h===void 0&&(h=1),this.r=r,this.g=i,this.b=s,this.a=h};Pr.parse=function(r){if(r){if(r instanceof Pr)return r;if(typeof r=="string"){var i=fr(r);if(i)return new Pr(i[0]/255*i[3],i[1]/255*i[3],i[2]/255*i[3],i[3])}}},Pr.prototype.toString=function(){var r=this.toArray(),i=r[1],s=r[2],h=r[3];return"rgba("+Math.round(r[0])+","+Math.round(i)+","+Math.round(s)+","+h+")"},Pr.prototype.toArray=function(){var r=this.a;return r===0?[0,0,0,0]:[255*this.r/r,255*this.g/r,255*this.b/r,r]},Pr.black=new Pr(0,0,0,1),Pr.white=new Pr(1,1,1,1),Pr.transparent=new Pr(0,0,0,0),Pr.red=new Pr(1,0,0,1);var Ii=function(r,i,s){this.sensitivity=r?i?"variant":"case":i?"accent":"base",this.locale=s,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Ii.prototype.compare=function(r,i){return this.collator.compare(r,i)},Ii.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Ul=function(r,i,s,h,m){this.text=r,this.image=i,this.scale=s,this.fontStack=h,this.textColor=m},Xn=function(r){this.sections=r};Xn.fromString=function(r){return new Xn([new Ul(r,null,null,null,null)])},Xn.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(r){return r.text.length!==0||r.image&&r.image.name.length!==0})},Xn.factory=function(r){return r instanceof Xn?r:Xn.fromString(r)},Xn.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(r){return r.text}).join("")},Xn.prototype.serialize=function(){for(var r=["format"],i=0,s=this.sections;i<s.length;i+=1){var h=s[i];if(h.image)r.push(["image",h.image.name]);else{r.push(h.text);var m={};h.fontStack&&(m["text-font"]=["literal",h.fontStack.split(",")]),h.scale&&(m["font-scale"]=h.scale),h.textColor&&(m["text-color"]=["rgba"].concat(h.textColor.toArray())),r.push(m)}}return r};var Pi=function(r){this.name=r.name,this.available=r.available};function Kp(r,i,s,h){return typeof r=="number"&&r>=0&&r<=255&&typeof i=="number"&&i>=0&&i<=255&&typeof s=="number"&&s>=0&&s<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:"Invalid rgba value ["+[r,i,s,h].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof h=="number"?[r,i,s,h]:[r,i,s]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function $l(r){if(r===null||typeof r=="string"||typeof r=="boolean"||typeof r=="number"||r instanceof Pr||r instanceof Ii||r instanceof Xn||r instanceof Pi)return!0;if(Array.isArray(r)){for(var i=0,s=r;i<s.length;i+=1)if(!$l(s[i]))return!1;return!0}if(typeof r=="object"){for(var h in r)if(!$l(r[h]))return!1;return!0}return!1}function En(r){if(r===null)return yt;if(typeof r=="string")return ht;if(typeof r=="boolean")return nt;if(typeof r=="number")return Ve;if(r instanceof Pr)return ot;if(r instanceof Ii)return mr;if(r instanceof Xn)return Gr;if(r instanceof Pi)return ur;if(Array.isArray(r)){for(var i,s=r.length,h=0,m=r;h<m.length;h+=1){var y=En(m[h]);if(i){if(i===y)continue;i=ct;break}i=y}return Ir(i||ct,s)}return or}function Vl(r){var i=typeof r;return r===null?"":i==="string"||i==="number"||i==="boolean"?String(r):r instanceof Pr||r instanceof Xn||r instanceof Pi?r.toString():JSON.stringify(r)}Pi.prototype.toString=function(){return this.name},Pi.fromString=function(r){return r?new Pi({name:r,available:!1}):null},Pi.prototype.serialize=function(){return["image",this.name]};var gi=function(r,i){this.type=r,this.value=i};gi.parse=function(r,i){if(r.length!==2)return i.error("'literal' expression requires exactly one argument, but found "+(r.length-1)+" instead.");if(!$l(r[1]))return i.error("invalid value");var s=r[1],h=En(s),m=i.expectedType;return h.kind!=="array"||h.N!==0||!m||m.kind!=="array"||typeof m.N=="number"&&m.N!==0||(h=m),new gi(h,s)},gi.prototype.evaluate=function(){return this.value},gi.prototype.eachChild=function(){},gi.prototype.outputDefined=function(){return!0},gi.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Pr?["rgba"].concat(this.value.toArray()):this.value instanceof Xn?this.value.serialize():this.value};var Yn=function(r){this.name="ExpressionEvaluationError",this.message=r};Yn.prototype.toJSON=function(){return this.message};var uo={string:ht,number:Ve,boolean:nt,object:or},an=function(r,i){this.type=r,this.args=i};an.parse=function(r,i){if(r.length<2)return i.error("Expected at least one argument.");var s,h=1,m=r[0];if(m==="array"){var y,_;if(r.length>2){var S=r[1];if(typeof S!="string"||!(S in uo)||S==="object")return i.error('The item type argument of "array" must be one of string, number, boolean',1);y=uo[S],h++}else y=ct;if(r.length>3){if(r[2]!==null&&(typeof r[2]!="number"||r[2]<0||r[2]!==Math.floor(r[2])))return i.error('The length argument to "array" must be a positive integer literal',2);_=r[2],h++}s=Ir(y,_)}else s=uo[m];for(var k=[];h<r.length;h++){var A=i.parse(r[h],h,ct);if(!A)return null;k.push(A)}return new an(s,k)},an.prototype.evaluate=function(r){for(var i=0;i<this.args.length;i++){var s=this.args[i].evaluate(r);if(!Dr(this.type,En(s)))return s;if(i===this.args.length-1)throw new Yn("Expected value to be of type "+vr(this.type)+", but found "+vr(En(s))+" instead.")}return null},an.prototype.eachChild=function(r){this.args.forEach(r)},an.prototype.outputDefined=function(){return this.args.every(function(r){return r.outputDefined()})},an.prototype.serialize=function(){var r=this.type,i=[r.kind];if(r.kind==="array"){var s=r.itemType;if(s.kind==="string"||s.kind==="number"||s.kind==="boolean"){i.push(s.kind);var h=r.N;(typeof h=="number"||this.args.length>1)&&i.push(h)}}return i.concat(this.args.map(function(m){return m.serialize()}))};var Ao=function(r){this.type=Gr,this.sections=r};Ao.parse=function(r,i){if(r.length<2)return i.error("Expected at least one argument.");var s=r[1];if(!Array.isArray(s)&&typeof s=="object")return i.error("First argument must be an image or text section.");for(var h=[],m=!1,y=1;y<=r.length-1;++y){var _=r[y];if(m&&typeof _=="object"&&!Array.isArray(_)){m=!1;var S=null;if(_["font-scale"]&&!(S=i.parse(_["font-scale"],1,Ve)))return null;var k=null;if(_["text-font"]&&!(k=i.parse(_["text-font"],1,Ir(ht))))return null;var A=null;if(_["text-color"]&&!(A=i.parse(_["text-color"],1,ot)))return null;var R=h[h.length-1];R.scale=S,R.font=k,R.textColor=A}else{var O=i.parse(r[y],1,ct);if(!O)return null;var $=O.type.kind;if($!=="string"&&$!=="value"&&$!=="null"&&$!=="resolvedImage")return i.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");m=!0,h.push({content:O,scale:null,font:null,textColor:null})}}return new Ao(h)},Ao.prototype.evaluate=function(r){return new Xn(this.sections.map(function(i){var s=i.content.evaluate(r);return En(s)===ur?new Ul("",s,null,null,null):new Ul(Vl(s),null,i.scale?i.scale.evaluate(r):null,i.font?i.font.evaluate(r).join(","):null,i.textColor?i.textColor.evaluate(r):null)}))},Ao.prototype.eachChild=function(r){for(var i=0,s=this.sections;i<s.length;i+=1){var h=s[i];r(h.content),h.scale&&r(h.scale),h.font&&r(h.font),h.textColor&&r(h.textColor)}},Ao.prototype.outputDefined=function(){return!1},Ao.prototype.serialize=function(){for(var r=["format"],i=0,s=this.sections;i<s.length;i+=1){var h=s[i];r.push(h.content.serialize());var m={};h.scale&&(m["font-scale"]=h.scale.serialize()),h.font&&(m["text-font"]=h.font.serialize()),h.textColor&&(m["text-color"]=h.textColor.serialize()),r.push(m)}return r};var to=function(r){this.type=ur,this.input=r};to.parse=function(r,i){if(r.length!==2)return i.error("Expected two arguments.");var s=i.parse(r[1],1,ht);return s?new to(s):i.error("No image name provided.")},to.prototype.evaluate=function(r){var i=this.input.evaluate(r),s=Pi.fromString(i);return s&&r.availableImages&&(s.available=r.availableImages.indexOf(i)>-1),s},to.prototype.eachChild=function(r){r(this.input)},to.prototype.outputDefined=function(){return!1},to.prototype.serialize=function(){return["image",this.input.serialize()]};var wf={"to-boolean":nt,"to-color":ot,"to-number":Ve,"to-string":ht},co=function(r,i){this.type=r,this.args=i};co.parse=function(r,i){if(r.length<2)return i.error("Expected at least one argument.");var s=r[0];if((s==="to-boolean"||s==="to-string")&&r.length!==2)return i.error("Expected one argument.");for(var h=wf[s],m=[],y=1;y<r.length;y++){var _=i.parse(r[y],y,ct);if(!_)return null;m.push(_)}return new co(h,m)},co.prototype.evaluate=function(r){if(this.type.kind==="boolean")return!!this.args[0].evaluate(r);if(this.type.kind==="color"){for(var i,s,h=0,m=this.args;h<m.length;h+=1){if(s=null,(i=m[h].evaluate(r))instanceof Pr)return i;if(typeof i=="string"){var y=r.parseColor(i);if(y)return y}else if(Array.isArray(i)&&!(s=i.length<3||i.length>4?"Invalid rbga value "+JSON.stringify(i)+": expected an array containing either three or four numeric values.":Kp(i[0],i[1],i[2],i[3])))return new Pr(i[0]/255,i[1]/255,i[2]/255,i[3])}throw new Yn(s||"Could not parse color from value '"+(typeof i=="string"?i:String(JSON.stringify(i)))+"'")}if(this.type.kind==="number"){for(var _=null,S=0,k=this.args;S<k.length;S+=1){if((_=k[S].evaluate(r))===null)return 0;var A=Number(_);if(!isNaN(A))return A}throw new Yn("Could not convert "+JSON.stringify(_)+" to number.")}return this.type.kind==="formatted"?Xn.fromString(Vl(this.args[0].evaluate(r))):this.type.kind==="resolvedImage"?Pi.fromString(Vl(this.args[0].evaluate(r))):Vl(this.args[0].evaluate(r))},co.prototype.eachChild=function(r){this.args.forEach(r)},co.prototype.outputDefined=function(){return this.args.every(function(r){return r.outputDefined()})},co.prototype.serialize=function(){if(this.type.kind==="formatted")return new Ao([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new to(this.args[0]).serialize();var r=["to-"+this.type.kind];return this.eachChild(function(i){r.push(i.serialize())}),r};var Mv=["Unknown","Point","LineString","Polygon"],ua=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};ua.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},ua.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?Mv[this.feature.type]:this.feature.type:null},ua.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},ua.prototype.canonicalID=function(){return this.canonical},ua.prototype.properties=function(){return this.feature&&this.feature.properties||{}},ua.prototype.parseColor=function(r){var i=this._parseColorCache[r];return i||(i=this._parseColorCache[r]=Pr.parse(r)),i};var ai=function(r,i,s,h){this.name=r,this.type=i,this._evaluate=s,this.args=h};ai.prototype.evaluate=function(r){return this._evaluate(r,this.args)},ai.prototype.eachChild=function(r){this.args.forEach(r)},ai.prototype.outputDefined=function(){return!1},ai.prototype.serialize=function(){return[this.name].concat(this.args.map(function(r){return r.serialize()}))},ai.parse=function(r,i){var s,h=r[0],m=ai.definitions[h];if(!m)return i.error('Unknown expression "'+h+'". If you wanted a literal array, use ["literal", [...]].',0);for(var y=Array.isArray(m)?m[0]:m.type,_=Array.isArray(m)?[[m[1],m[2]]]:m.overloads,S=_.filter(function(Tt){var pt=Tt[0];return!Array.isArray(pt)||pt.length===r.length-1}),k=null,A=0,R=S;A<R.length;A+=1){var O=R[A],$=O[0],H=O[1];k=new Ia(i.registry,i.path,null,i.scope);for(var se=[],le=!1,xe=1;xe<r.length;xe++){var de=r[xe],Ie=Array.isArray($)?$[xe-1]:$.type,Me=k.parse(de,1+se.length,Ie);if(!Me){le=!0;break}se.push(Me)}if(!le)if(Array.isArray($)&&$.length!==se.length)k.error("Expected "+$.length+" arguments, but found "+se.length+" instead.");else{for(var ze=0;ze<se.length;ze++){var Be=Array.isArray($)?$[ze]:$.type,We=se[ze];k.concat(ze+1).checkSubtype(Be,We.type)}if(k.errors.length===0)return new ai(h,y,H,se)}}if(S.length===1)(s=i.errors).push.apply(s,k.errors);else{for(var Je=(S.length?S:_).map(function(Tt){var pt;return pt=Tt[0],Array.isArray(pt)?"("+pt.map(vr).join(", ")+")":"("+vr(pt.type)+"...)"}).join(" | "),rt=[],St=1;St<r.length;St++){var lt=i.parse(r[St],1+rt.length);if(!lt)return null;rt.push(vr(lt.type))}i.error("Expected arguments of type "+Je+", but found ("+rt.join(", ")+") instead.")}return null},ai.register=function(r,i){for(var s in ai.definitions=i,i)r[s]=ai};var Go=function(r,i,s){this.type=mr,this.locale=s,this.caseSensitive=r,this.diacriticSensitive=i};function vi(r,i){r[0]=Math.min(r[0],i[0]),r[1]=Math.min(r[1],i[1]),r[2]=Math.max(r[2],i[0]),r[3]=Math.max(r[3],i[1])}function us(r,i){return!(r[0]<=i[0]||r[2]>=i[2]||r[1]<=i[1]||r[3]>=i[3])}function Rv(r,i){var s=(180+r[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r[1]*Math.PI/360)))/360,m=Math.pow(2,i.z);return[Math.round(s*m*8192),Math.round(h*m*8192)]}function Lv(r,i,s){return i[1]>r[1]!=s[1]>r[1]&&r[0]<(s[0]-i[0])*(r[1]-i[1])/(s[1]-i[1])+i[0]}function Xp(r,i){for(var s,h,m,y,_,S,k,A=!1,R=0,O=i.length;R<O;R++)for(var $=i[R],H=0,se=$.length;H<se-1;H++){if((y=(s=r)[0]-(h=$[H])[0])*(k=s[1]-(m=$[H+1])[1])-(S=s[0]-m[0])*(_=s[1]-h[1])==0&&y*S<=0&&_*k<=0)return!1;Lv(r,$[H],$[H+1])&&(A=!A)}return A}function zv(r,i){for(var s=0;s<i.length;s++)if(Xp(r,i[s]))return!0;return!1}function Sf(r,i,s,h){var m=h[0]-s[0],y=h[1]-s[1],_=(r[0]-s[0])*y-m*(r[1]-s[1]),S=(i[0]-s[0])*y-m*(i[1]-s[1]);return _>0&&S<0||_<0&&S>0}function Dv(r,i,s){for(var h=0,m=s;h<m.length;h+=1)for(var y=m[h],_=0;_<y.length-1;++_)if((O=[(R=y[_+1])[0]-(A=y[_])[0],R[1]-A[1]])[0]*($=[(k=i)[0]-(S=r)[0],k[1]-S[1]])[1]-O[1]*$[0]!=0&&Sf(S,k,A,R)&&Sf(A,R,S,k))return!0;var S,k,A,R,O,$;return!1}function Ef(r,i){for(var s=0;s<r.length;++s)if(!Xp(r[s],i))return!1;for(var h=0;h<r.length-1;++h)if(Dv(r[h],r[h+1],i))return!1;return!0}function Cf(r,i){for(var s=0;s<i.length;s++)if(Ef(r,i[s]))return!0;return!1}function Ks(r,i,s){for(var h=[],m=0;m<r.length;m++){for(var y=[],_=0;_<r[m].length;_++){var S=Rv(r[m][_],s);vi(i,S),y.push(S)}h.push(y)}return h}function Yp(r,i,s){for(var h=[],m=0;m<r.length;m++){var y=Ks(r[m],i,s);h.push(y)}return h}function ql(r,i,s,h){if(r[0]<s[0]||r[0]>s[2]){var m=.5*h,y=r[0]-s[0]>m?-h:s[0]-r[0]>m?h:0;y===0&&(y=r[0]-s[2]>m?-h:s[2]-r[0]>m?h:0),r[0]+=y}vi(i,r)}function kf(r,i,s,h){for(var m=8192*Math.pow(2,h.z),y=[8192*h.x,8192*h.y],_=[],S=0,k=r;S<k.length;S+=1)for(var A=0,R=k[S];A<R.length;A+=1){var O=R[A],$=[O.x+y[0],O.y+y[1]];ql($,i,s,m),_.push($)}return _}function Gu(r,i,s,h){for(var m,y=8192*Math.pow(2,h.z),_=[8192*h.x,8192*h.y],S=[],k=0,A=r;k<A.length;k+=1){for(var R=[],O=0,$=A[k];O<$.length;O+=1){var H=$[O],se=[H.x+_[0],H.y+_[1]];vi(i,se),R.push(se)}S.push(R)}if(i[2]-i[0]<=y/2){(m=i)[0]=m[1]=1/0,m[2]=m[3]=-1/0;for(var le=0,xe=S;le<xe.length;le+=1)for(var de=0,Ie=xe[le];de<Ie.length;de+=1)ql(Ie[de],i,s,y)}return S}Go.parse=function(r,i){if(r.length!==2)return i.error("Expected one argument.");var s=r[1];if(typeof s!="object"||Array.isArray(s))return i.error("Collator options argument must be an object.");var h=i.parse(s["case-sensitive"]!==void 0&&s["case-sensitive"],1,nt);if(!h)return null;var m=i.parse(s["diacritic-sensitive"]!==void 0&&s["diacritic-sensitive"],1,nt);if(!m)return null;var y=null;return s.locale&&!(y=i.parse(s.locale,1,ht))?null:new Go(h,m,y)},Go.prototype.evaluate=function(r){return new Ii(this.caseSensitive.evaluate(r),this.diacriticSensitive.evaluate(r),this.locale?this.locale.evaluate(r):null)},Go.prototype.eachChild=function(r){r(this.caseSensitive),r(this.diacriticSensitive),this.locale&&r(this.locale)},Go.prototype.outputDefined=function(){return!1},Go.prototype.serialize=function(){var r={};return r["case-sensitive"]=this.caseSensitive.serialize(),r["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(r.locale=this.locale.serialize()),["collator",r]};var po=function(r,i){this.type=nt,this.geojson=r,this.geometries=i};function Ca(r){if(r instanceof ai&&(r.name==="get"&&r.args.length===1||r.name==="feature-state"||r.name==="has"&&r.args.length===1||r.name==="properties"||r.name==="geometry-type"||r.name==="id"||/^filter-/.test(r.name))||r instanceof po)return!1;var i=!0;return r.eachChild(function(s){i&&!Ca(s)&&(i=!1)}),i}function ka(r){if(r instanceof ai&&r.name==="feature-state")return!1;var i=!0;return r.eachChild(function(s){i&&!ka(s)&&(i=!1)}),i}function cs(r,i){if(r instanceof ai&&i.indexOf(r.name)>=0)return!1;var s=!0;return r.eachChild(function(h){s&&!cs(h,i)&&(s=!1)}),s}po.parse=function(r,i){if(r.length!==2)return i.error("'within' expression requires exactly one argument, but found "+(r.length-1)+" instead.");if($l(r[1])){var s=r[1];if(s.type==="FeatureCollection")for(var h=0;h<s.features.length;++h){var m=s.features[h].geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new po(s,s.features[h].geometry)}else if(s.type==="Feature"){var y=s.geometry.type;if(y==="Polygon"||y==="MultiPolygon")return new po(s,s.geometry)}else if(s.type==="Polygon"||s.type==="MultiPolygon")return new po(s,s)}return i.error("'within' expression requires valid geojson object that contains polygon geometry type.")},po.prototype.evaluate=function(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(i,s){var h=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],y=i.canonicalID();if(s.type==="Polygon"){var _=Ks(s.coordinates,m,y),S=kf(i.geometry(),h,m,y);if(!us(h,m))return!1;for(var k=0,A=S;k<A.length;k+=1)if(!Xp(A[k],_))return!1}if(s.type==="MultiPolygon"){var R=Yp(s.coordinates,m,y),O=kf(i.geometry(),h,m,y);if(!us(h,m))return!1;for(var $=0,H=O;$<H.length;$+=1)if(!zv(H[$],R))return!1}return!0}(r,this.geometries);if(r.geometryType()==="LineString")return function(i,s){var h=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],y=i.canonicalID();if(s.type==="Polygon"){var _=Ks(s.coordinates,m,y),S=Gu(i.geometry(),h,m,y);if(!us(h,m))return!1;for(var k=0,A=S;k<A.length;k+=1)if(!Ef(A[k],_))return!1}if(s.type==="MultiPolygon"){var R=Yp(s.coordinates,m,y),O=Gu(i.geometry(),h,m,y);if(!us(h,m))return!1;for(var $=0,H=O;$<H.length;$+=1)if(!Cf(H[$],R))return!1}return!0}(r,this.geometries)}return!1},po.prototype.eachChild=function(){},po.prototype.outputDefined=function(){return!0},po.prototype.serialize=function(){return["within",this.geojson]};var Ta=function(r,i){this.type=i.type,this.name=r,this.boundExpression=i};Ta.parse=function(r,i){if(r.length!==2||typeof r[1]!="string")return i.error("'var' expression requires exactly one string literal argument.");var s=r[1];return i.scope.has(s)?new Ta(s,i.scope.get(s)):i.error('Unknown variable "'+s+'". Make sure "'+s+'" has been bound in an enclosing "let" expression before using it.',1)},Ta.prototype.evaluate=function(r){return this.boundExpression.evaluate(r)},Ta.prototype.eachChild=function(){},Ta.prototype.outputDefined=function(){return!1},Ta.prototype.serialize=function(){return["var",this.name]};var Ia=function(r,i,s,h,m){i===void 0&&(i=[]),h===void 0&&(h=new vt),m===void 0&&(m=[]),this.registry=r,this.path=i,this.key=i.map(function(y){return"["+y+"]"}).join(""),this.scope=h,this.errors=m,this.expectedType=s};function Hu(r,i){for(var s,h=r.length-1,m=0,y=h,_=0;m<=y;)if((s=r[_=Math.floor((m+y)/2)])<=i){if(_===h||i<r[_+1])return _;m=_+1}else{if(!(s>i))throw new Yn("Input is not a number.");y=_-1}return 0}Ia.prototype.parse=function(r,i,s,h,m){return m===void 0&&(m={}),i?this.concat(i,s,h)._parse(r,m):this._parse(r,m)},Ia.prototype._parse=function(r,i){function s(A,R,O){return O==="assert"?new an(R,[A]):O==="coerce"?new co(R,[A]):A}if(r!==null&&typeof r!="string"&&typeof r!="boolean"&&typeof r!="number"||(r=["literal",r]),Array.isArray(r)){if(r.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var h=r[0];if(typeof h!="string")return this.error("Expression name must be a string, but found "+typeof h+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var m=this.registry[h];if(m){var y=m.parse(r,this);if(!y)return null;if(this.expectedType){var _=this.expectedType,S=y.type;if(_.kind!=="string"&&_.kind!=="number"&&_.kind!=="boolean"&&_.kind!=="object"&&_.kind!=="array"||S.kind!=="value")if(_.kind!=="color"&&_.kind!=="formatted"&&_.kind!=="resolvedImage"||S.kind!=="value"&&S.kind!=="string"){if(this.checkSubtype(_,S))return null}else y=s(y,_,i.typeAnnotation||"coerce");else y=s(y,_,i.typeAnnotation||"assert")}if(!(y instanceof gi)&&y.type.kind!=="resolvedImage"&&function A(R){if(R instanceof Ta)return A(R.boundExpression);if(R instanceof ai&&R.name==="error"||R instanceof Go||R instanceof po)return!1;var O=R instanceof co||R instanceof an,$=!0;return R.eachChild(function(H){$=O?$&&A(H):$&&H instanceof gi}),!!$&&Ca(R)&&cs(R,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(y)){var k=new ua;try{y=new gi(y.type,y.evaluate(k))}catch(A){return this.error(A.message),null}}return y}return this.error('Unknown expression "'+h+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(r===void 0?"'undefined' value invalid. Use null instead.":typeof r=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof r+" instead.")},Ia.prototype.concat=function(r,i,s){var h=typeof r=="number"?this.path.concat(r):this.path,m=s?this.scope.concat(s):this.scope;return new Ia(this.registry,h,i||null,m,this.errors)},Ia.prototype.error=function(r){for(var i=[],s=arguments.length-1;s-- >0;)i[s]=arguments[s+1];var h=""+this.key+i.map(function(m){return"["+m+"]"}).join("");this.errors.push(new Ye(h,r))},Ia.prototype.checkSubtype=function(r,i){var s=Dr(r,i);return s&&this.error(s),s};var Ui=function(r,i,s){this.type=r,this.input=i,this.labels=[],this.outputs=[];for(var h=0,m=s;h<m.length;h+=1){var y=m[h],_=y[1];this.labels.push(y[0]),this.outputs.push(_)}};function Mn(r,i,s){return r*(1-s)+i*s}Ui.parse=function(r,i){if(r.length-1<4)return i.error("Expected at least 4 arguments, but found only "+(r.length-1)+".");if((r.length-1)%2!=0)return i.error("Expected an even number of arguments.");var s=i.parse(r[1],1,Ve);if(!s)return null;var h=[],m=null;i.expectedType&&i.expectedType.kind!=="value"&&(m=i.expectedType);for(var y=1;y<r.length;y+=2){var _=y===1?-1/0:r[y],S=r[y+1],k=y,A=y+1;if(typeof _!="number")return i.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',k);if(h.length&&h[h.length-1][0]>=_)return i.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',k);var R=i.parse(S,A,m);if(!R)return null;m=m||R.type,h.push([_,R])}return new Ui(m,s,h)},Ui.prototype.evaluate=function(r){var i=this.labels,s=this.outputs;if(i.length===1)return s[0].evaluate(r);var h=this.input.evaluate(r);if(h<=i[0])return s[0].evaluate(r);var m=i.length;return h>=i[m-1]?s[m-1].evaluate(r):s[Hu(i,h)].evaluate(r)},Ui.prototype.eachChild=function(r){r(this.input);for(var i=0,s=this.outputs;i<s.length;i+=1)r(s[i])},Ui.prototype.outputDefined=function(){return this.outputs.every(function(r){return r.outputDefined()})},Ui.prototype.serialize=function(){for(var r=["step",this.input.serialize()],i=0;i<this.labels.length;i++)i>0&&r.push(this.labels[i]),r.push(this.outputs[i].serialize());return r};var Xs=Object.freeze({__proto__:null,number:Mn,color:function(r,i,s){return new Pr(Mn(r.r,i.r,s),Mn(r.g,i.g,s),Mn(r.b,i.b,s),Mn(r.a,i.a,s))},array:function(r,i,s){return r.map(function(h,m){return Mn(h,i[m],s)})}}),Tf=6/29*3*(6/29),Ov=Math.PI/180,Bv=180/Math.PI;function Jp(r){return r>.008856451679035631?Math.pow(r,1/3):r/Tf+4/29}function Qp(r){return r>6/29?r*r*r:Tf*(r-4/29)}function eh(r){return 255*(r<=.0031308?12.92*r:1.055*Math.pow(r,1/2.4)-.055)}function th(r){return(r/=255)<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4)}function If(r){var i=th(r.r),s=th(r.g),h=th(r.b),m=Jp((.4124564*i+.3575761*s+.1804375*h)/.95047),y=Jp((.2126729*i+.7151522*s+.072175*h)/1);return{l:116*y-16,a:500*(m-y),b:200*(y-Jp((.0193339*i+.119192*s+.9503041*h)/1.08883)),alpha:r.a}}function Pf(r){var i=(r.l+16)/116,s=isNaN(r.a)?i:i+r.a/500,h=isNaN(r.b)?i:i-r.b/200;return i=1*Qp(i),s=.95047*Qp(s),h=1.08883*Qp(h),new Pr(eh(3.2404542*s-1.5371385*i-.4985314*h),eh(-.969266*s+1.8760108*i+.041556*h),eh(.0556434*s-.2040259*i+1.0572252*h),r.alpha)}function Nv(r,i,s){var h=i-r;return r+s*(h>180||h<-180?h-360*Math.round(h/360):h)}var Wl={forward:If,reverse:Pf,interpolate:function(r,i,s){return{l:Mn(r.l,i.l,s),a:Mn(r.a,i.a,s),b:Mn(r.b,i.b,s),alpha:Mn(r.alpha,i.alpha,s)}}},Gl={forward:function(r){var i=If(r),s=i.l,h=i.a,m=i.b,y=Math.atan2(m,h)*Bv;return{h:y<0?y+360:y,c:Math.sqrt(h*h+m*m),l:s,alpha:r.a}},reverse:function(r){var i=r.h*Ov,s=r.c;return Pf({l:r.l,a:Math.cos(i)*s,b:Math.sin(i)*s,alpha:r.alpha})},interpolate:function(r,i,s){return{h:Nv(r.h,i.h,s),c:Mn(r.c,i.c,s),l:Mn(r.l,i.l,s),alpha:Mn(r.alpha,i.alpha,s)}}},Af=Object.freeze({__proto__:null,lab:Wl,hcl:Gl}),si=function(r,i,s,h,m){this.type=r,this.operator=i,this.interpolation=s,this.input=h,this.labels=[],this.outputs=[];for(var y=0,_=m;y<_.length;y+=1){var S=_[y],k=S[1];this.labels.push(S[0]),this.outputs.push(k)}};function rh(r,i,s,h){var m=h-s,y=r-s;return m===0?0:i===1?y/m:(Math.pow(i,y)-1)/(Math.pow(i,m)-1)}si.interpolationFactor=function(r,i,s,h){var m=0;if(r.name==="exponential")m=rh(i,r.base,s,h);else if(r.name==="linear")m=rh(i,1,s,h);else if(r.name==="cubic-bezier"){var y=r.controlPoints;m=new x(y[0],y[1],y[2],y[3]).solve(rh(i,1,s,h))}return m},si.parse=function(r,i){var s=r[0],h=r[1],m=r[2],y=r.slice(3);if(!Array.isArray(h)||h.length===0)return i.error("Expected an interpolation type expression.",1);if(h[0]==="linear")h={name:"linear"};else if(h[0]==="exponential"){var _=h[1];if(typeof _!="number")return i.error("Exponential interpolation requires a numeric base.",1,1);h={name:"exponential",base:_}}else{if(h[0]!=="cubic-bezier")return i.error("Unknown interpolation type "+String(h[0]),1,0);var S=h.slice(1);if(S.length!==4||S.some(function(xe){return typeof xe!="number"||xe<0||xe>1}))return i.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);h={name:"cubic-bezier",controlPoints:S}}if(r.length-1<4)return i.error("Expected at least 4 arguments, but found only "+(r.length-1)+".");if((r.length-1)%2!=0)return i.error("Expected an even number of arguments.");if(!(m=i.parse(m,2,Ve)))return null;var k=[],A=null;s==="interpolate-hcl"||s==="interpolate-lab"?A=ot:i.expectedType&&i.expectedType.kind!=="value"&&(A=i.expectedType);for(var R=0;R<y.length;R+=2){var O=y[R],$=y[R+1],H=R+3,se=R+4;if(typeof O!="number")return i.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',H);if(k.length&&k[k.length-1][0]>=O)return i.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',H);var le=i.parse($,se,A);if(!le)return null;A=A||le.type,k.push([O,le])}return A.kind==="number"||A.kind==="color"||A.kind==="array"&&A.itemType.kind==="number"&&typeof A.N=="number"?new si(A,s,h,m,k):i.error("Type "+vr(A)+" is not interpolatable.")},si.prototype.evaluate=function(r){var i=this.labels,s=this.outputs;if(i.length===1)return s[0].evaluate(r);var h=this.input.evaluate(r);if(h<=i[0])return s[0].evaluate(r);var m=i.length;if(h>=i[m-1])return s[m-1].evaluate(r);var y=Hu(i,h),_=si.interpolationFactor(this.interpolation,h,i[y],i[y+1]),S=s[y].evaluate(r),k=s[y+1].evaluate(r);return this.operator==="interpolate"?Xs[this.type.kind.toLowerCase()](S,k,_):this.operator==="interpolate-hcl"?Gl.reverse(Gl.interpolate(Gl.forward(S),Gl.forward(k),_)):Wl.reverse(Wl.interpolate(Wl.forward(S),Wl.forward(k),_))},si.prototype.eachChild=function(r){r(this.input);for(var i=0,s=this.outputs;i<s.length;i+=1)r(s[i])},si.prototype.outputDefined=function(){return this.outputs.every(function(r){return r.outputDefined()})},si.prototype.serialize=function(){var r;r=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var i=[this.operator,r,this.input.serialize()],s=0;s<this.labels.length;s++)i.push(this.labels[s],this.outputs[s].serialize());return i};var Pa=function(r,i){this.type=r,this.args=i};Pa.parse=function(r,i){if(r.length<2)return i.error("Expectected at least one argument.");var s=null,h=i.expectedType;h&&h.kind!=="value"&&(s=h);for(var m=[],y=0,_=r.slice(1);y<_.length;y+=1){var S=i.parse(_[y],1+m.length,s,void 0,{typeAnnotation:"omit"});if(!S)return null;s=s||S.type,m.push(S)}var k=h&&m.some(function(A){return Dr(h,A.type)});return new Pa(k?ct:s,m)},Pa.prototype.evaluate=function(r){for(var i,s=null,h=0,m=0,y=this.args;m<y.length&&(h++,(s=y[m].evaluate(r))&&s instanceof Pi&&!s.available&&(i||(i=s.name),s=null,h===this.args.length&&(s=i)),s===null);m+=1);return s},Pa.prototype.eachChild=function(r){this.args.forEach(r)},Pa.prototype.outputDefined=function(){return this.args.every(function(r){return r.outputDefined()})},Pa.prototype.serialize=function(){var r=["coalesce"];return this.eachChild(function(i){r.push(i.serialize())}),r};var Aa=function(r,i){this.type=i.type,this.bindings=[].concat(r),this.result=i};Aa.prototype.evaluate=function(r){return this.result.evaluate(r)},Aa.prototype.eachChild=function(r){for(var i=0,s=this.bindings;i<s.length;i+=1)r(s[i][1]);r(this.result)},Aa.parse=function(r,i){if(r.length<4)return i.error("Expected at least 3 arguments, but found "+(r.length-1)+" instead.");for(var s=[],h=1;h<r.length-1;h+=2){var m=r[h];if(typeof m!="string")return i.error("Expected string, but found "+typeof m+" instead.",h);if(/[^a-zA-Z0-9_]/.test(m))return i.error("Variable names must contain only alphanumeric characters or '_'.",h);var y=i.parse(r[h+1],h+1);if(!y)return null;s.push([m,y])}var _=i.parse(r[r.length-1],r.length-1,i.expectedType,s);return _?new Aa(s,_):null},Aa.prototype.outputDefined=function(){return this.result.outputDefined()},Aa.prototype.serialize=function(){for(var r=["let"],i=0,s=this.bindings;i<s.length;i+=1){var h=s[i];r.push(h[0],h[1].serialize())}return r.push(this.result.serialize()),r};var ps=function(r,i,s){this.type=r,this.index=i,this.input=s};ps.parse=function(r,i){if(r.length!==3)return i.error("Expected 2 arguments, but found "+(r.length-1)+" instead.");var s=i.parse(r[1],1,Ve),h=i.parse(r[2],2,Ir(i.expectedType||ct));return s&&h?new ps(h.type.itemType,s,h):null},ps.prototype.evaluate=function(r){var i=this.index.evaluate(r),s=this.input.evaluate(r);if(i<0)throw new Yn("Array index out of bounds: "+i+" < 0.");if(i>=s.length)throw new Yn("Array index out of bounds: "+i+" > "+(s.length-1)+".");if(i!==Math.floor(i))throw new Yn("Array index must be an integer, but found "+i+" instead.");return s[i]},ps.prototype.eachChild=function(r){r(this.index),r(this.input)},ps.prototype.outputDefined=function(){return!1},ps.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var hs=function(r,i){this.type=nt,this.needle=r,this.haystack=i};hs.parse=function(r,i){if(r.length!==3)return i.error("Expected 2 arguments, but found "+(r.length-1)+" instead.");var s=i.parse(r[1],1,ct),h=i.parse(r[2],2,ct);return s&&h?Sn(s.type,[nt,ht,Ve,yt,ct])?new hs(s,h):i.error("Expected first argument to be of type boolean, string, number or null, but found "+vr(s.type)+" instead"):null},hs.prototype.evaluate=function(r){var i=this.needle.evaluate(r),s=this.haystack.evaluate(r);if(!s)return!1;if(!qr(i,["boolean","string","number","null"]))throw new Yn("Expected first argument to be of type boolean, string, number or null, but found "+vr(En(i))+" instead.");if(!qr(s,["string","array"]))throw new Yn("Expected second argument to be of type array or string, but found "+vr(En(s))+" instead.");return s.indexOf(i)>=0},hs.prototype.eachChild=function(r){r(this.needle),r(this.haystack)},hs.prototype.outputDefined=function(){return!0},hs.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Ma=function(r,i,s){this.type=Ve,this.needle=r,this.haystack=i,this.fromIndex=s};Ma.parse=function(r,i){if(r.length<=2||r.length>=5)return i.error("Expected 3 or 4 arguments, but found "+(r.length-1)+" instead.");var s=i.parse(r[1],1,ct),h=i.parse(r[2],2,ct);if(!s||!h)return null;if(!Sn(s.type,[nt,ht,Ve,yt,ct]))return i.error("Expected first argument to be of type boolean, string, number or null, but found "+vr(s.type)+" instead");if(r.length===4){var m=i.parse(r[3],3,Ve);return m?new Ma(s,h,m):null}return new Ma(s,h)},Ma.prototype.evaluate=function(r){var i=this.needle.evaluate(r),s=this.haystack.evaluate(r);if(!qr(i,["boolean","string","number","null"]))throw new Yn("Expected first argument to be of type boolean, string, number or null, but found "+vr(En(i))+" instead.");if(!qr(s,["string","array"]))throw new Yn("Expected second argument to be of type array or string, but found "+vr(En(s))+" instead.");if(this.fromIndex){var h=this.fromIndex.evaluate(r);return s.indexOf(i,h)}return s.indexOf(i)},Ma.prototype.eachChild=function(r){r(this.needle),r(this.haystack),this.fromIndex&&r(this.fromIndex)},Ma.prototype.outputDefined=function(){return!1},Ma.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var r=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),r]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var ds=function(r,i,s,h,m,y){this.inputType=r,this.type=i,this.input=s,this.cases=h,this.outputs=m,this.otherwise=y};ds.parse=function(r,i){if(r.length<5)return i.error("Expected at least 4 arguments, but found only "+(r.length-1)+".");if(r.length%2!=1)return i.error("Expected an even number of arguments.");var s,h;i.expectedType&&i.expectedType.kind!=="value"&&(h=i.expectedType);for(var m={},y=[],_=2;_<r.length-1;_+=2){var S=r[_],k=r[_+1];Array.isArray(S)||(S=[S]);var A=i.concat(_);if(S.length===0)return A.error("Expected at least one branch label.");for(var R=0,O=S;R<O.length;R+=1){var $=O[R];if(typeof $!="number"&&typeof $!="string")return A.error("Branch labels must be numbers or strings.");if(typeof $=="number"&&Math.abs($)>Number.MAX_SAFE_INTEGER)return A.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof $=="number"&&Math.floor($)!==$)return A.error("Numeric branch labels must be integer values.");if(s){if(A.checkSubtype(s,En($)))return null}else s=En($);if(m[String($)]!==void 0)return A.error("Branch labels must be unique.");m[String($)]=y.length}var H=i.parse(k,_,h);if(!H)return null;h=h||H.type,y.push(H)}var se=i.parse(r[1],1,ct);if(!se)return null;var le=i.parse(r[r.length-1],r.length-1,h);return le?se.type.kind!=="value"&&i.concat(1).checkSubtype(s,se.type)?null:new ds(s,h,se,m,y,le):null},ds.prototype.evaluate=function(r){var i=this.input.evaluate(r);return(En(i)===this.inputType&&this.outputs[this.cases[i]]||this.otherwise).evaluate(r)},ds.prototype.eachChild=function(r){r(this.input),this.outputs.forEach(r),r(this.otherwise)},ds.prototype.outputDefined=function(){return this.outputs.every(function(r){return r.outputDefined()})&&this.otherwise.outputDefined()},ds.prototype.serialize=function(){for(var r=this,i=["match",this.input.serialize()],s=[],h={},m=0,y=Object.keys(this.cases).sort();m<y.length;m+=1){var _=y[m];(O=h[this.cases[_]])===void 0?(h[this.cases[_]]=s.length,s.push([this.cases[_],[_]])):s[O][1].push(_)}for(var S=function(H){return r.inputType.kind==="number"?Number(H):H},k=0,A=s;k<A.length;k+=1){var R=A[k],O=R[0],$=R[1];i.push($.length===1?S($[0]):$.map(S)),i.push(this.outputs[outputIndex$1].serialize())}return i.push(this.otherwise.serialize()),i};var fs=function(r,i,s){this.type=r,this.branches=i,this.otherwise=s};fs.parse=function(r,i){if(r.length<4)return i.error("Expected at least 3 arguments, but found only "+(r.length-1)+".");if(r.length%2!=0)return i.error("Expected an odd number of arguments.");var s;i.expectedType&&i.expectedType.kind!=="value"&&(s=i.expectedType);for(var h=[],m=1;m<r.length-1;m+=2){var y=i.parse(r[m],m,nt);if(!y)return null;var _=i.parse(r[m+1],m+1,s);if(!_)return null;h.push([y,_]),s=s||_.type}var S=i.parse(r[r.length-1],r.length-1,s);return S?new fs(s,h,S):null},fs.prototype.evaluate=function(r){for(var i=0,s=this.branches;i<s.length;i+=1){var h=s[i],m=h[1];if(h[0].evaluate(r))return m.evaluate(r)}return this.otherwise.evaluate(r)},fs.prototype.eachChild=function(r){for(var i=0,s=this.branches;i<s.length;i+=1){var h=s[i],m=h[1];r(h[0]),r(m)}r(this.otherwise)},fs.prototype.outputDefined=function(){return this.branches.every(function(r){return r[1].outputDefined()})&&this.otherwise.outputDefined()},fs.prototype.serialize=function(){var r=["case"];return this.eachChild(function(i){r.push(i.serialize())}),r};var Ra=function(r,i,s,h){this.type=r,this.input=i,this.beginIndex=s,this.endIndex=h};function Mf(r,i){return r==="=="||r==="!="?i.kind==="boolean"||i.kind==="string"||i.kind==="number"||i.kind==="null"||i.kind==="value":i.kind==="string"||i.kind==="number"||i.kind==="value"}function Rf(r,i,s,h){return h.compare(i,s)===0}function Hr(r,i,s){var h=r!=="=="&&r!=="!=";return function(){function m(y,_,S){this.type=nt,this.lhs=y,this.rhs=_,this.collator=S,this.hasUntypedArgument=y.type.kind==="value"||_.type.kind==="value"}return m.parse=function(y,_){if(y.length!==3&&y.length!==4)return _.error("Expected two or three arguments.");var S=y[0],k=_.parse(y[1],1,ct);if(!k)return null;if(!Mf(S,k.type))return _.concat(1).error('"'+S+`" comparisons are not supported for type '`+vr(k.type)+"'.");var A=_.parse(y[2],2,ct);if(!A)return null;if(!Mf(S,A.type))return _.concat(2).error('"'+S+`" comparisons are not supported for type '`+vr(A.type)+"'.");if(k.type.kind!==A.type.kind&&k.type.kind!=="value"&&A.type.kind!=="value")return _.error("Cannot compare types '"+vr(k.type)+"' and '"+vr(A.type)+"'.");h&&(k.type.kind==="value"&&A.type.kind!=="value"?k=new an(A.type,[k]):k.type.kind!=="value"&&A.type.kind==="value"&&(A=new an(k.type,[A])));var R=null;if(y.length===4){if(k.type.kind!=="string"&&A.type.kind!=="string"&&k.type.kind!=="value"&&A.type.kind!=="value")return _.error("Cannot use collator to compare non-string types.");if(!(R=_.parse(y[3],3,mr)))return null}return new m(k,A,R)},m.prototype.evaluate=function(y){var _=this.lhs.evaluate(y),S=this.rhs.evaluate(y);if(h&&this.hasUntypedArgument){var k=En(_),A=En(S);if(k.kind!==A.kind||k.kind!=="string"&&k.kind!=="number")throw new Yn('Expected arguments for "'+r+'" to be (string, string) or (number, number), but found ('+k.kind+", "+A.kind+") instead.")}if(this.collator&&!h&&this.hasUntypedArgument){var R=En(_),O=En(S);if(R.kind!=="string"||O.kind!=="string")return i(y,_,S)}return this.collator?s(y,_,S,this.collator.evaluate(y)):i(y,_,S)},m.prototype.eachChild=function(y){y(this.lhs),y(this.rhs),this.collator&&y(this.collator)},m.prototype.outputDefined=function(){return!0},m.prototype.serialize=function(){var y=[r];return this.eachChild(function(_){y.push(_.serialize())}),y},m}()}Ra.parse=function(r,i){if(r.length<=2||r.length>=5)return i.error("Expected 3 or 4 arguments, but found "+(r.length-1)+" instead.");var s=i.parse(r[1],1,ct),h=i.parse(r[2],2,Ve);if(!s||!h)return null;if(!Sn(s.type,[Ir(ct),ht,ct]))return i.error("Expected first argument to be of type array or string, but found "+vr(s.type)+" instead");if(r.length===4){var m=i.parse(r[3],3,Ve);return m?new Ra(s.type,s,h,m):null}return new Ra(s.type,s,h)},Ra.prototype.evaluate=function(r){var i=this.input.evaluate(r),s=this.beginIndex.evaluate(r);if(!qr(i,["string","array"]))throw new Yn("Expected first argument to be of type array or string, but found "+vr(En(i))+" instead.");if(this.endIndex){var h=this.endIndex.evaluate(r);return i.slice(s,h)}return i.slice(s)},Ra.prototype.eachChild=function(r){r(this.input),r(this.beginIndex),this.endIndex&&r(this.endIndex)},Ra.prototype.outputDefined=function(){return!1},Ra.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var r=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),r]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Fv=Hr("==",function(r,i,s){return i===s},Rf),Zu=Hr("!=",function(r,i,s){return i!==s},function(r,i,s,h){return!Rf(0,i,s,h)}),Lf=Hr("<",function(r,i,s){return i<s},function(r,i,s,h){return h.compare(i,s)<0}),zf=Hr(">",function(r,i,s){return i>s},function(r,i,s,h){return h.compare(i,s)>0}),Df=Hr("<=",function(r,i,s){return i<=s},function(r,i,s,h){return h.compare(i,s)<=0}),Of=Hr(">=",function(r,i,s){return i>=s},function(r,i,s,h){return h.compare(i,s)>=0}),ms=function(r,i,s,h,m){this.type=ht,this.number=r,this.locale=i,this.currency=s,this.minFractionDigits=h,this.maxFractionDigits=m};ms.parse=function(r,i){if(r.length!==3)return i.error("Expected two arguments.");var s=i.parse(r[1],1,Ve);if(!s)return null;var h=r[2];if(typeof h!="object"||Array.isArray(h))return i.error("NumberFormat options argument must be an object.");var m=null;if(h.locale&&!(m=i.parse(h.locale,1,ht)))return null;var y=null;if(h.currency&&!(y=i.parse(h.currency,1,ht)))return null;var _=null;if(h["min-fraction-digits"]&&!(_=i.parse(h["min-fraction-digits"],1,Ve)))return null;var S=null;return h["max-fraction-digits"]&&!(S=i.parse(h["max-fraction-digits"],1,Ve))?null:new ms(s,m,y,_,S)},ms.prototype.evaluate=function(r){return new Intl.NumberFormat(this.locale?this.locale.evaluate(r):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(r):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(r):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(r):void 0}).format(this.number.evaluate(r))},ms.prototype.eachChild=function(r){r(this.number),this.locale&&r(this.locale),this.currency&&r(this.currency),this.minFractionDigits&&r(this.minFractionDigits),this.maxFractionDigits&&r(this.maxFractionDigits)},ms.prototype.outputDefined=function(){return!1},ms.prototype.serialize=function(){var r={};return this.locale&&(r.locale=this.locale.serialize()),this.currency&&(r.currency=this.currency.serialize()),this.minFractionDigits&&(r["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(r["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),r]};var La=function(r){this.type=Ve,this.input=r};La.parse=function(r,i){if(r.length!==2)return i.error("Expected 1 argument, but found "+(r.length-1)+" instead.");var s=i.parse(r[1],1);return s?s.type.kind!=="array"&&s.type.kind!=="string"&&s.type.kind!=="value"?i.error("Expected argument of type string or array, but found "+vr(s.type)+" instead."):new La(s):null},La.prototype.evaluate=function(r){var i=this.input.evaluate(r);if(typeof i=="string"||Array.isArray(i))return i.length;throw new Yn("Expected value to be of type string or array, but found "+vr(En(i))+" instead.")},La.prototype.eachChild=function(r){r(this.input)},La.prototype.outputDefined=function(){return!1},La.prototype.serialize=function(){var r=["length"];return this.eachChild(function(i){r.push(i.serialize())}),r};var ys={"==":Fv,"!=":Zu,">":zf,"<":Lf,">=":Of,"<=":Df,array:an,at:ps,boolean:an,case:fs,coalesce:Pa,collator:Go,format:Ao,image:to,in:hs,"index-of":Ma,interpolate:si,"interpolate-hcl":si,"interpolate-lab":si,length:La,let:Aa,literal:gi,match:ds,number:an,"number-format":ms,object:an,slice:Ra,step:Ui,string:an,"to-boolean":co,"to-color":co,"to-number":co,"to-string":co,var:Ta,within:po};function Bf(r,i){var s=i[0],h=i[1],m=i[2],y=i[3];s=s.evaluate(r),h=h.evaluate(r),m=m.evaluate(r);var _=y?y.evaluate(r):1,S=Kp(s,h,m,_);if(S)throw new Yn(S);return new Pr(s/255*_,h/255*_,m/255*_,_)}function Nf(r,i){return r in i}function nh(r,i){var s=i[r];return s===void 0?null:s}function gs(r){return{type:r}}function Ff(r){return{result:"success",value:r}}function vs(r){return{result:"error",value:r}}function _s(r){return r["property-type"]==="data-driven"||r["property-type"]==="cross-faded-data-driven"}function jf(r){return!!r.expression&&r.expression.parameters.indexOf("zoom")>-1}function Hl(r){return!!r.expression&&r.expression.interpolated}function Yr(r){return r instanceof Number?"number":r instanceof String?"string":r instanceof Boolean?"boolean":Array.isArray(r)?"array":r===null?"null":typeof r}function Ku(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)}function jv(r){return r}function Ys(r,i,s){return r!==void 0?r:i!==void 0?i:s!==void 0?s:void 0}function Uf(r,i,s,h,m){return Ys(typeof s===m?h[s]:void 0,r.default,i.default)}function Uv(r,i,s){if(Yr(s)!=="number")return Ys(r.default,i.default);var h=r.stops.length;if(h===1||s<=r.stops[0][0])return r.stops[0][1];if(s>=r.stops[h-1][0])return r.stops[h-1][1];var m=Hu(r.stops.map(function(y){return y[0]}),s);return r.stops[m][1]}function $f(r,i,s){var h=r.base!==void 0?r.base:1;if(Yr(s)!=="number")return Ys(r.default,i.default);var m=r.stops.length;if(m===1||s<=r.stops[0][0])return r.stops[0][1];if(s>=r.stops[m-1][0])return r.stops[m-1][1];var y=Hu(r.stops.map(function(O){return O[0]}),s),_=function(O,$,H,se){var le=se-H,xe=O-H;return le===0?0:$===1?xe/le:(Math.pow($,xe)-1)/(Math.pow($,le)-1)}(s,h,r.stops[y][0],r.stops[y+1][0]),S=r.stops[y][1],k=r.stops[y+1][1],A=Xs[i.type]||jv;if(r.colorSpace&&r.colorSpace!=="rgb"){var R=Af[r.colorSpace];A=function(O,$){return R.reverse(R.interpolate(R.forward(O),R.forward($),_))}}return typeof S.evaluate=="function"?{evaluate:function(){for(var O=[],$=arguments.length;$--;)O[$]=arguments[$];var H=S.evaluate.apply(void 0,O),se=k.evaluate.apply(void 0,O);if(H!==void 0&&se!==void 0)return A(H,se,_)}}:A(S,k,_)}function Xu(r,i,s){return i.type==="color"?s=Pr.parse(s):i.type==="formatted"?s=Xn.fromString(s.toString()):i.type==="resolvedImage"?s=Pi.fromString(s.toString()):Yr(s)===i.type||i.type==="enum"&&i.values[s]||(s=void 0),Ys(s,r.default,i.default)}ai.register(ys,{error:[{kind:"error"},[ht],function(r,i){throw new Yn(i[0].evaluate(r))}],typeof:[ht,[ct],function(r,i){return vr(En(i[0].evaluate(r)))}],"to-rgba":[Ir(Ve,4),[ot],function(r,i){return i[0].evaluate(r).toArray()}],rgb:[ot,[Ve,Ve,Ve],Bf],rgba:[ot,[Ve,Ve,Ve,Ve],Bf],has:{type:nt,overloads:[[[ht],function(r,i){return Nf(i[0].evaluate(r),r.properties())}],[[ht,or],function(r,i){var s=i[1];return Nf(i[0].evaluate(r),s.evaluate(r))}]]},get:{type:ct,overloads:[[[ht],function(r,i){return nh(i[0].evaluate(r),r.properties())}],[[ht,or],function(r,i){var s=i[1];return nh(i[0].evaluate(r),s.evaluate(r))}]]},"feature-state":[ct,[ht],function(r,i){return nh(i[0].evaluate(r),r.featureState||{})}],properties:[or,[],function(r){return r.properties()}],"geometry-type":[ht,[],function(r){return r.geometryType()}],id:[ct,[],function(r){return r.id()}],zoom:[Ve,[],function(r){return r.globals.zoom}],"heatmap-density":[Ve,[],function(r){return r.globals.heatmapDensity||0}],"line-progress":[Ve,[],function(r){return r.globals.lineProgress||0}],accumulated:[ct,[],function(r){return r.globals.accumulated===void 0?null:r.globals.accumulated}],"+":[Ve,gs(Ve),function(r,i){for(var s=0,h=0,m=i;h<m.length;h+=1)s+=m[h].evaluate(r);return s}],"*":[Ve,gs(Ve),function(r,i){for(var s=1,h=0,m=i;h<m.length;h+=1)s*=m[h].evaluate(r);return s}],"-":{type:Ve,overloads:[[[Ve,Ve],function(r,i){var s=i[1];return i[0].evaluate(r)-s.evaluate(r)}],[[Ve],function(r,i){return-i[0].evaluate(r)}]]},"/":[Ve,[Ve,Ve],function(r,i){var s=i[1];return i[0].evaluate(r)/s.evaluate(r)}],"%":[Ve,[Ve,Ve],function(r,i){var s=i[1];return i[0].evaluate(r)%s.evaluate(r)}],ln2:[Ve,[],function(){return Math.LN2}],pi:[Ve,[],function(){return Math.PI}],e:[Ve,[],function(){return Math.E}],"^":[Ve,[Ve,Ve],function(r,i){var s=i[1];return Math.pow(i[0].evaluate(r),s.evaluate(r))}],sqrt:[Ve,[Ve],function(r,i){return Math.sqrt(i[0].evaluate(r))}],log10:[Ve,[Ve],function(r,i){return Math.log(i[0].evaluate(r))/Math.LN10}],ln:[Ve,[Ve],function(r,i){return Math.log(i[0].evaluate(r))}],log2:[Ve,[Ve],function(r,i){return Math.log(i[0].evaluate(r))/Math.LN2}],sin:[Ve,[Ve],function(r,i){return Math.sin(i[0].evaluate(r))}],cos:[Ve,[Ve],function(r,i){return Math.cos(i[0].evaluate(r))}],tan:[Ve,[Ve],function(r,i){return Math.tan(i[0].evaluate(r))}],asin:[Ve,[Ve],function(r,i){return Math.asin(i[0].evaluate(r))}],acos:[Ve,[Ve],function(r,i){return Math.acos(i[0].evaluate(r))}],atan:[Ve,[Ve],function(r,i){return Math.atan(i[0].evaluate(r))}],min:[Ve,gs(Ve),function(r,i){return Math.min.apply(Math,i.map(function(s){return s.evaluate(r)}))}],max:[Ve,gs(Ve),function(r,i){return Math.max.apply(Math,i.map(function(s){return s.evaluate(r)}))}],abs:[Ve,[Ve],function(r,i){return Math.abs(i[0].evaluate(r))}],round:[Ve,[Ve],function(r,i){var s=i[0].evaluate(r);return s<0?-Math.round(-s):Math.round(s)}],floor:[Ve,[Ve],function(r,i){return Math.floor(i[0].evaluate(r))}],ceil:[Ve,[Ve],function(r,i){return Math.ceil(i[0].evaluate(r))}],"filter-==":[nt,[ht,ct],function(r,i){var s=i[0],h=i[1];return r.properties()[s.value]===h.value}],"filter-id-==":[nt,[ct],function(r,i){var s=i[0];return r.id()===s.value}],"filter-type-==":[nt,[ht],function(r,i){var s=i[0];return r.geometryType()===s.value}],"filter-<":[nt,[ht,ct],function(r,i){var s=i[0],h=i[1],m=r.properties()[s.value],y=h.value;return typeof m==typeof y&&m<y}],"filter-id-<":[nt,[ct],function(r,i){var s=i[0],h=r.id(),m=s.value;return typeof h==typeof m&&h<m}],"filter->":[nt,[ht,ct],function(r,i){var s=i[0],h=i[1],m=r.properties()[s.value],y=h.value;return typeof m==typeof y&&m>y}],"filter-id->":[nt,[ct],function(r,i){var s=i[0],h=r.id(),m=s.value;return typeof h==typeof m&&h>m}],"filter-<=":[nt,[ht,ct],function(r,i){var s=i[0],h=i[1],m=r.properties()[s.value],y=h.value;return typeof m==typeof y&&m<=y}],"filter-id-<=":[nt,[ct],function(r,i){var s=i[0],h=r.id(),m=s.value;return typeof h==typeof m&&h<=m}],"filter->=":[nt,[ht,ct],function(r,i){var s=i[0],h=i[1],m=r.properties()[s.value],y=h.value;return typeof m==typeof y&&m>=y}],"filter-id->=":[nt,[ct],function(r,i){var s=i[0],h=r.id(),m=s.value;return typeof h==typeof m&&h>=m}],"filter-has":[nt,[ct],function(r,i){return i[0].value in r.properties()}],"filter-has-id":[nt,[],function(r){return r.id()!==null&&r.id()!==void 0}],"filter-type-in":[nt,[Ir(ht)],function(r,i){return i[0].value.indexOf(r.geometryType())>=0}],"filter-id-in":[nt,[Ir(ct)],function(r,i){return i[0].value.indexOf(r.id())>=0}],"filter-in-small":[nt,[ht,Ir(ct)],function(r,i){var s=i[0];return i[1].value.indexOf(r.properties()[s.value])>=0}],"filter-in-large":[nt,[ht,Ir(ct)],function(r,i){var s=i[0],h=i[1];return function(m,y,_,S){for(;_<=S;){var k=_+S>>1;if(y[k]===m)return!0;y[k]>m?S=k-1:_=k+1}return!1}(r.properties()[s.value],h.value,0,h.value.length-1)}],all:{type:nt,overloads:[[[nt,nt],function(r,i){var s=i[1];return i[0].evaluate(r)&&s.evaluate(r)}],[gs(nt),function(r,i){for(var s=0,h=i;s<h.length;s+=1)if(!h[s].evaluate(r))return!1;return!0}]]},any:{type:nt,overloads:[[[nt,nt],function(r,i){var s=i[1];return i[0].evaluate(r)||s.evaluate(r)}],[gs(nt),function(r,i){for(var s=0,h=i;s<h.length;s+=1)if(h[s].evaluate(r))return!0;return!1}]]},"!":[nt,[nt],function(r,i){return!i[0].evaluate(r)}],"is-supported-script":[nt,[ht],function(r,i){var s=r.globals&&r.globals.isSupportedScript;return!s||s(i[0].evaluate(r))}],upcase:[ht,[ht],function(r,i){return i[0].evaluate(r).toUpperCase()}],downcase:[ht,[ht],function(r,i){return i[0].evaluate(r).toLowerCase()}],concat:[ht,gs(ct),function(r,i){return i.map(function(s){return Vl(s.evaluate(r))}).join("")}],"resolved-locale":[ht,[mr],function(r,i){return i[0].evaluate(r).resolvedLocale()}]});var Js=function(r,i){this.expression=r,this._warningHistory={},this._evaluator=new ua,this._defaultValue=i?function(s){return s.type==="color"&&Ku(s.default)?new Pr(0,0,0,0):s.type==="color"?Pr.parse(s.default)||null:s.default===void 0?null:s.default}(i):null,this._enumValues=i&&i.type==="enum"?i.values:null};function Zl(r){return Array.isArray(r)&&r.length>0&&typeof r[0]=="string"&&r[0]in ys}function Yu(r,i){var s=new Ia(ys,[],i?function(m){var y={color:ot,string:ht,number:Ve,enum:ht,boolean:nt,formatted:Gr,resolvedImage:ur};return m.type==="array"?Ir(y[m.value]||ct,m.length):y[m.type]}(i):void 0),h=s.parse(r,void 0,void 0,void 0,i&&i.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?Ff(new Js(h,i)):vs(s.errors)}Js.prototype.evaluateWithoutErrorHandling=function(r,i,s,h,m,y){return this._evaluator.globals=r,this._evaluator.feature=i,this._evaluator.featureState=s,this._evaluator.canonical=h,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=y,this.expression.evaluate(this._evaluator)},Js.prototype.evaluate=function(r,i,s,h,m,y){this._evaluator.globals=r,this._evaluator.feature=i||null,this._evaluator.featureState=s||null,this._evaluator.canonical=h,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=y||null;try{var _=this.expression.evaluate(this._evaluator);if(_==null||typeof _=="number"&&_!=_)return this._defaultValue;if(this._enumValues&&!(_ in this._enumValues))throw new Yn("Expected value to be one of "+Object.keys(this._enumValues).map(function(S){return JSON.stringify(S)}).join(", ")+", but found "+JSON.stringify(_)+" instead.");return _}catch(S){return this._warningHistory[S.message]||(this._warningHistory[S.message]=!0,typeof console<"u"&&console.warn(S.message)),this._defaultValue}};var Kl=function(r,i){this.kind=r,this._styleExpression=i,this.isStateDependent=r!=="constant"&&!ka(i.expression)};Kl.prototype.evaluateWithoutErrorHandling=function(r,i,s,h,m,y){return this._styleExpression.evaluateWithoutErrorHandling(r,i,s,h,m,y)},Kl.prototype.evaluate=function(r,i,s,h,m,y){return this._styleExpression.evaluate(r,i,s,h,m,y)};var Qs=function(r,i,s,h){this.kind=r,this.zoomStops=s,this._styleExpression=i,this.isStateDependent=r!=="camera"&&!ka(i.expression),this.interpolationType=h};function Vf(r,i){if((r=Yu(r,i)).result==="error")return r;var s=r.value.expression,h=Ca(s);if(!h&&!_s(i))return vs([new Ye("","data expressions not supported")]);var m=cs(s,["zoom"]);if(!m&&!jf(i))return vs([new Ye("","zoom expressions not supported")]);var y=function _(S){var k=null;if(S instanceof Aa)k=_(S.result);else if(S instanceof Pa)for(var A=0,R=S.args;A<R.length&&!(k=_(R[A]));A+=1);else(S instanceof Ui||S instanceof si)&&S.input instanceof ai&&S.input.name==="zoom"&&(k=S);return k instanceof Ye||S.eachChild(function(O){var $=_(O);$ instanceof Ye?k=$:!k&&$?k=new Ye("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):k&&$&&k!==$&&(k=new Ye("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),k}(s);return y||m?y instanceof Ye?vs([y]):y instanceof si&&!Hl(i)?vs([new Ye("",'"interpolate" expressions cannot be used with this property')]):Ff(y?new Qs(h?"camera":"composite",r.value,y.labels,y instanceof si?y.interpolation:void 0):new Kl(h?"constant":"source",r.value)):vs([new Ye("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}Qs.prototype.evaluateWithoutErrorHandling=function(r,i,s,h,m,y){return this._styleExpression.evaluateWithoutErrorHandling(r,i,s,h,m,y)},Qs.prototype.evaluate=function(r,i,s,h,m,y){return this._styleExpression.evaluate(r,i,s,h,m,y)},Qs.prototype.interpolationFactor=function(r,i,s){return this.interpolationType?si.interpolationFactor(this.interpolationType,r,i,s):0};var el=function(r,i){this._parameters=r,this._specification=i,He(this,function s(h,m){var y,_,S,k=m.type==="color",A=h.stops&&typeof h.stops[0][0]=="object",R=A||!(A||h.property!==void 0),O=h.type||(Hl(m)?"exponential":"interval");if(k&&((h=He({},h)).stops&&(h.stops=h.stops.map(function(lt){return[lt[0],Pr.parse(lt[1])]})),h.default=Pr.parse(h.default?h.default:m.default)),h.colorSpace&&h.colorSpace!=="rgb"&&!Af[h.colorSpace])throw new Error("Unknown color space: "+h.colorSpace);if(O==="exponential")y=$f;else if(O==="interval")y=Uv;else if(O==="categorical"){y=Uf,_=Object.create(null);for(var $=0,H=h.stops;$<H.length;$+=1){var se=H[$];_[se[0]]=se[1]}S=typeof h.stops[0][0]}else{if(O!=="identity")throw new Error('Unknown function type "'+O+'"');y=Xu}if(A){for(var le={},xe=[],de=0;de<h.stops.length;de++){var Ie=h.stops[de],Me=Ie[0].zoom;le[Me]===void 0&&(le[Me]={zoom:Me,type:h.type,property:h.property,default:h.default,stops:[]},xe.push(Me)),le[Me].stops.push([Ie[0].value,Ie[1]])}for(var ze=[],Be=0,We=xe;Be<We.length;Be+=1){var Je=We[Be];ze.push([le[Je].zoom,s(le[Je],m)])}var rt={name:"linear"};return{kind:"composite",interpolationType:rt,interpolationFactor:si.interpolationFactor.bind(void 0,rt),zoomStops:ze.map(function(lt){return lt[0]}),evaluate:function(lt,Tt){var pt=lt.zoom;return $f({stops:ze,base:h.base},m,pt).evaluate(pt,Tt)}}}if(R){var St=O==="exponential"?{name:"exponential",base:h.base!==void 0?h.base:1}:null;return{kind:"camera",interpolationType:St,interpolationFactor:si.interpolationFactor.bind(void 0,St),zoomStops:h.stops.map(function(lt){return lt[0]}),evaluate:function(lt){return y(h,m,lt.zoom,_,S)}}}return{kind:"source",evaluate:function(lt,Tt){var pt=Tt&&Tt.properties?Tt.properties[h.property]:void 0;return pt===void 0?Ys(h.default,m.default):y(h,m,pt,_,S)}}}(this._parameters,this._specification))};function Mo(r){var i=r.key,s=r.value,h=r.valueSpec||{},m=r.objectElementValidators||{},y=r.style,_=r.styleSpec,S=[],k=Yr(s);if(k!=="object")return[new ie(i,s,"object expected, "+k+" found")];for(var A in s){var R=A.split(".")[0],O=h[R]||h["*"],$=void 0;if(m[R])$=m[R];else if(h[R])$=yr;else if(m["*"])$=m["*"];else{if(!h["*"]){S.push(new ie(i,s[A],'unknown property "'+A+'"'));continue}$=yr}S=S.concat($({key:(i&&i+".")+A,value:s[A],valueSpec:O,style:y,styleSpec:_,object:s,objectKey:A},s))}for(var H in h)m[H]||h[H].required&&h[H].default===void 0&&s[H]===void 0&&S.push(new ie(i,s,'missing required property "'+H+'"'));return S}function qf(r){var i=r.value,s=r.valueSpec,h=r.style,m=r.styleSpec,y=r.key,_=r.arrayElementValidator||yr;if(Yr(i)!=="array")return[new ie(y,i,"array expected, "+Yr(i)+" found")];if(s.length&&i.length!==s.length)return[new ie(y,i,"array length "+s.length+" expected, length "+i.length+" found")];if(s["min-length"]&&i.length<s["min-length"])return[new ie(y,i,"array length at least "+s["min-length"]+" expected, length "+i.length+" found")];var S={type:s.value,values:s.values};m.$version<7&&(S.function=s.function),Yr(s.value)==="object"&&(S=s.value);for(var k=[],A=0;A<i.length;A++)k=k.concat(_({array:i,arrayIndex:A,value:i[A],valueSpec:S,style:h,styleSpec:m,key:y+"["+A+"]"}));return k}function Wf(r){var i=r.key,s=r.value,h=r.valueSpec,m=Yr(s);return m==="number"&&s!=s&&(m="NaN"),m!=="number"?[new ie(i,s,"number expected, "+m+" found")]:"minimum"in h&&s<h.minimum?[new ie(i,s,s+" is less than the minimum value "+h.minimum)]:"maximum"in h&&s>h.maximum?[new ie(i,s,s+" is greater than the maximum value "+h.maximum)]:[]}function Gf(r){var i,s,h,m=r.valueSpec,y=Xe(r.value.type),_={},S=y!=="categorical"&&r.value.property===void 0,k=!S,A=Yr(r.value.stops)==="array"&&Yr(r.value.stops[0])==="array"&&Yr(r.value.stops[0][0])==="object",R=Mo({key:r.key,value:r.value,valueSpec:r.styleSpec.function,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{stops:function(H){if(y==="identity")return[new ie(H.key,H.value,'identity function may not have a "stops" property')];var se=[],le=H.value;return se=se.concat(qf({key:H.key,value:le,valueSpec:H.valueSpec,style:H.style,styleSpec:H.styleSpec,arrayElementValidator:O})),Yr(le)==="array"&&le.length===0&&se.push(new ie(H.key,le,"array must have at least one stop")),se},default:function(H){return yr({key:H.key,value:H.value,valueSpec:m,style:H.style,styleSpec:H.styleSpec})}}});return y==="identity"&&S&&R.push(new ie(r.key,r.value,'missing required property "property"')),y==="identity"||r.value.stops||R.push(new ie(r.key,r.value,'missing required property "stops"')),y==="exponential"&&r.valueSpec.expression&&!Hl(r.valueSpec)&&R.push(new ie(r.key,r.value,"exponential functions not supported")),r.styleSpec.$version>=8&&(k&&!_s(r.valueSpec)?R.push(new ie(r.key,r.value,"property functions not supported")):S&&!jf(r.valueSpec)&&R.push(new ie(r.key,r.value,"zoom functions not supported"))),y!=="categorical"&&!A||r.value.property!==void 0||R.push(new ie(r.key,r.value,'"property" property is required')),R;function O(H){var se=[],le=H.value,xe=H.key;if(Yr(le)!=="array")return[new ie(xe,le,"array expected, "+Yr(le)+" found")];if(le.length!==2)return[new ie(xe,le,"array length 2 expected, length "+le.length+" found")];if(A){if(Yr(le[0])!=="object")return[new ie(xe,le,"object expected, "+Yr(le[0])+" found")];if(le[0].zoom===void 0)return[new ie(xe,le,"object stop key must have zoom")];if(le[0].value===void 0)return[new ie(xe,le,"object stop key must have value")];if(h&&h>Xe(le[0].zoom))return[new ie(xe,le[0].zoom,"stop zoom values must appear in ascending order")];Xe(le[0].zoom)!==h&&(h=Xe(le[0].zoom),s=void 0,_={}),se=se.concat(Mo({key:xe+"[0]",value:le[0],valueSpec:{zoom:{}},style:H.style,styleSpec:H.styleSpec,objectElementValidators:{zoom:Wf,value:$}}))}else se=se.concat($({key:xe+"[0]",value:le[0],valueSpec:{},style:H.style,styleSpec:H.styleSpec},le));return Zl(Ue(le[1]))?se.concat([new ie(xe+"[1]",le[1],"expressions are not allowed in function stops.")]):se.concat(yr({key:xe+"[1]",value:le[1],valueSpec:m,style:H.style,styleSpec:H.styleSpec}))}function $(H,se){var le=Yr(H.value),xe=Xe(H.value),de=H.value!==null?H.value:se;if(i){if(le!==i)return[new ie(H.key,de,le+" stop domain type must match previous stop domain type "+i)]}else i=le;if(le!=="number"&&le!=="string"&&le!=="boolean")return[new ie(H.key,de,"stop domain value must be a number, string, or boolean")];if(le!=="number"&&y!=="categorical"){var Ie="number expected, "+le+" found";return _s(m)&&y===void 0&&(Ie+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ie(H.key,de,Ie)]}return y!=="categorical"||le!=="number"||isFinite(xe)&&Math.floor(xe)===xe?y!=="categorical"&&le==="number"&&s!==void 0&&xe<s?[new ie(H.key,de,"stop domain values must appear in ascending order")]:(s=xe,y==="categorical"&&xe in _?[new ie(H.key,de,"stop domain values must be unique")]:(_[xe]=!0,[])):[new ie(H.key,de,"integer expected, found "+xe)]}}function xs(r){var i=(r.expressionContext==="property"?Vf:Yu)(Ue(r.value),r.valueSpec);if(i.result==="error")return i.value.map(function(h){return new ie(""+r.key+h.key,r.value,h.message)});var s=i.value.expression||i.value._styleExpression.expression;if(r.expressionContext==="property"&&r.propertyKey==="text-font"&&!s.outputDefined())return[new ie(r.key,r.value,'Invalid data expression for "'+r.propertyKey+'". Output values must be contained as literals within the expression.')];if(r.expressionContext==="property"&&r.propertyType==="layout"&&!ka(s))return[new ie(r.key,r.value,'"feature-state" data expressions are not supported with layout properties.')];if(r.expressionContext==="filter"&&!ka(s))return[new ie(r.key,r.value,'"feature-state" data expressions are not supported with filters.')];if(r.expressionContext&&r.expressionContext.indexOf("cluster")===0){if(!cs(s,["zoom","feature-state"]))return[new ie(r.key,r.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(r.expressionContext==="cluster-initial"&&!Ca(s))return[new ie(r.key,r.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Xl(r){var i=r.key,s=r.value,h=r.valueSpec,m=[];return Array.isArray(h.values)?h.values.indexOf(Xe(s))===-1&&m.push(new ie(i,s,"expected one of ["+h.values.join(", ")+"], "+JSON.stringify(s)+" found")):Object.keys(h.values).indexOf(Xe(s))===-1&&m.push(new ie(i,s,"expected one of ["+Object.keys(h.values).join(", ")+"], "+JSON.stringify(s)+" found")),m}function Ju(r){if(r===!0||r===!1)return!0;if(!Array.isArray(r)||r.length===0)return!1;switch(r[0]){case"has":return r.length>=2&&r[1]!=="$id"&&r[1]!=="$type";case"in":return r.length>=3&&(typeof r[1]!="string"||Array.isArray(r[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return r.length!==3||Array.isArray(r[1])||Array.isArray(r[2]);case"any":case"all":for(var i=0,s=r.slice(1);i<s.length;i+=1){var h=s[i];if(!Ju(h)&&typeof h!="boolean")return!1}return!0;default:return!0}}el.deserialize=function(r){return new el(r._parameters,r._specification)},el.serialize=function(r){return{_parameters:r._parameters,_specification:r._specification}};var ih={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Qu(r){if(r==null)return{filter:function(){return!0},needGeometry:!1};Ju(r)||(r=ec(r));var i=Yu(r,ih);if(i.result==="error")throw new Error(i.value.map(function(s){return s.key+": "+s.message}).join(", "));return{filter:function(s,h,m){return i.value.evaluate(s,h,{},m)},needGeometry:function s(h){if(!Array.isArray(h))return!1;if(h[0]==="within")return!0;for(var m=1;m<h.length;m++)if(s(h[m]))return!0;return!1}(r)}}function $v(r,i){return r<i?-1:r>i?1:0}function ec(r){if(!r)return!0;var i,s=r[0];return r.length<=1?s!=="any":s==="=="?oh(r[1],r[2],"=="):s==="!="?tc(oh(r[1],r[2],"==")):s==="<"||s===">"||s==="<="||s===">="?oh(r[1],r[2],s):s==="any"?(i=r.slice(1),["any"].concat(i.map(ec))):s==="all"?["all"].concat(r.slice(1).map(ec)):s==="none"?["all"].concat(r.slice(1).map(ec).map(tc)):s==="in"?Hf(r[1],r.slice(2)):s==="!in"?tc(Hf(r[1],r.slice(2))):s==="has"?Zf(r[1]):s==="!has"?tc(Zf(r[1])):s!=="within"||r}function oh(r,i,s){switch(r){case"$type":return["filter-type-"+s,i];case"$id":return["filter-id-"+s,i];default:return["filter-"+s,r,i]}}function Hf(r,i){if(i.length===0)return!1;switch(r){case"$type":return["filter-type-in",["literal",i]];case"$id":return["filter-id-in",["literal",i]];default:return i.length>200&&!i.some(function(s){return typeof s!=typeof i[0]})?["filter-in-large",r,["literal",i.sort($v)]]:["filter-in-small",r,["literal",i]]}}function Zf(r){switch(r){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",r]}}function tc(r){return["!",r]}function ah(r){return Ju(Ue(r.value))?xs(He({},r,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function i(s){var h=s.value,m=s.key;if(Yr(h)!=="array")return[new ie(m,h,"array expected, "+Yr(h)+" found")];var y,_=s.styleSpec,S=[];if(h.length<1)return[new ie(m,h,"filter array must have at least 1 element")];switch(S=S.concat(Xl({key:m+"[0]",value:h[0],valueSpec:_.filter_operator,style:s.style,styleSpec:s.styleSpec})),Xe(h[0])){case"<":case"<=":case">":case">=":h.length>=2&&Xe(h[1])==="$type"&&S.push(new ie(m,h,'"$type" cannot be use with operator "'+h[0]+'"'));case"==":case"!=":h.length!==3&&S.push(new ie(m,h,'filter array for operator "'+h[0]+'" must have 3 elements'));case"in":case"!in":h.length>=2&&(y=Yr(h[1]))!=="string"&&S.push(new ie(m+"[1]",h[1],"string expected, "+y+" found"));for(var k=2;k<h.length;k++)y=Yr(h[k]),Xe(h[1])==="$type"?S=S.concat(Xl({key:m+"["+k+"]",value:h[k],valueSpec:_.geometry_type,style:s.style,styleSpec:s.styleSpec})):y!=="string"&&y!=="number"&&y!=="boolean"&&S.push(new ie(m+"["+k+"]",h[k],"string, number, or boolean expected, "+y+" found"));break;case"any":case"all":case"none":for(var A=1;A<h.length;A++)S=S.concat(i({key:m+"["+A+"]",value:h[A],style:s.style,styleSpec:s.styleSpec}));break;case"has":case"!has":y=Yr(h[1]),h.length!==2?S.push(new ie(m,h,'filter array for "'+h[0]+'" operator must have 2 elements')):y!=="string"&&S.push(new ie(m+"[1]",h[1],"string expected, "+y+" found"));break;case"within":y=Yr(h[1]),h.length!==2?S.push(new ie(m,h,'filter array for "'+h[0]+'" operator must have 2 elements')):y!=="object"&&S.push(new ie(m+"[1]",h[1],"object expected, "+y+" found"))}return S}(r)}function sh(r,i){var s=r.key,h=r.style,m=r.styleSpec,y=r.value,_=r.objectKey,S=m[i+"_"+r.layerType];if(!S)return[];var k=_.match(/^(.*)-transition$/);if(i==="paint"&&k&&S[k[1]]&&S[k[1]].transition)return yr({key:s,value:y,valueSpec:m.transition,style:h,styleSpec:m});var A,R=r.valueSpec||S[_];if(!R)return[new ie(s,y,'unknown property "'+_+'"')];if(Yr(y)==="string"&&_s(R)&&!R.tokens&&(A=/^{([^}]+)}$/.exec(y)))return[new ie(s,y,'"'+_+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(A[1])+" }`.")];var O=[];return r.layerType==="symbol"&&(_==="text-field"&&h&&!h.glyphs&&O.push(new ie(s,y,'use of "text-field" requires a style "glyphs" property')),_==="text-font"&&Ku(Ue(y))&&Xe(y.type)==="identity"&&O.push(new ie(s,y,'"text-font" does not support identity functions'))),O.concat(yr({key:r.key,value:y,valueSpec:R,style:h,styleSpec:m,expressionContext:"property",propertyType:i,propertyKey:_}))}function lh(r){return sh(r,"paint")}function Yl(r){return sh(r,"layout")}function Kf(r){var i=[],s=r.value,h=r.key,m=r.style,y=r.styleSpec;s.type||s.ref||i.push(new ie(h,s,'either "type" or "ref" is required'));var _,S=Xe(s.type),k=Xe(s.ref);if(s.id)for(var A=Xe(s.id),R=0;R<r.arrayIndex;R++){var O=m.layers[R];Xe(O.id)===A&&i.push(new ie(h,s.id,'duplicate layer id "'+s.id+'", previously used at line '+O.id.__line__))}if("ref"in s)["type","source","source-layer","filter","layout"].forEach(function(se){se in s&&i.push(new ie(h,s[se],'"'+se+'" is prohibited for ref layers'))}),m.layers.forEach(function(se){Xe(se.id)===k&&(_=se)}),_?_.ref?i.push(new ie(h,s.ref,"ref cannot reference another ref layer")):S=Xe(_.type):i.push(new ie(h,s.ref,'ref layer "'+k+'" not found'));else if(S!=="background")if(s.source){var $=m.sources&&m.sources[s.source],H=$&&Xe($.type);$?H==="vector"&&S==="raster"?i.push(new ie(h,s.source,'layer "'+s.id+'" requires a raster source')):H==="raster"&&S!=="raster"?i.push(new ie(h,s.source,'layer "'+s.id+'" requires a vector source')):H!=="vector"||s["source-layer"]?H==="raster-dem"&&S!=="hillshade"?i.push(new ie(h,s.source,"raster-dem source can only be used with layer type 'hillshade'.")):S!=="line"||!s.paint||!s.paint["line-gradient"]||H==="geojson"&&$.lineMetrics||i.push(new ie(h,s,'layer "'+s.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):i.push(new ie(h,s,'layer "'+s.id+'" must specify a "source-layer"')):i.push(new ie(h,s.source,'source "'+s.source+'" not found'))}else i.push(new ie(h,s,'missing required property "source"'));return i=i.concat(Mo({key:h,value:s,valueSpec:y.layer,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return yr({key:h+".type",value:s.type,valueSpec:y.layer.type,style:r.style,styleSpec:r.styleSpec,object:s,objectKey:"type"})},filter:ah,layout:function(se){return Mo({layer:s,key:se.key,value:se.value,style:se.style,styleSpec:se.styleSpec,objectElementValidators:{"*":function(le){return Yl(He({layerType:S},le))}}})},paint:function(se){return Mo({layer:s,key:se.key,value:se.value,style:se.style,styleSpec:se.styleSpec,objectElementValidators:{"*":function(le){return lh(He({layerType:S},le))}}})}}}))}function bs(r){var i=r.value,s=r.key,h=Yr(i);return h!=="string"?[new ie(s,i,"string expected, "+h+" found")]:[]}var sn={promoteId:function(r){var i=r.key,s=r.value;if(Yr(s)==="string")return bs({key:i,value:s});var h=[];for(var m in s)h.push.apply(h,bs({key:i+"."+m,value:s[m]}));return h}};function rc(r){var i=r.value,s=r.key,h=r.styleSpec,m=r.style;if(!i.type)return[new ie(s,i,'"type" is required')];var y,_=Xe(i.type);switch(_){case"vector":case"raster":case"raster-dem":return Mo({key:s,value:i,valueSpec:h["source_"+_.replace("-","_")],style:r.style,styleSpec:h,objectElementValidators:sn});case"geojson":if(y=Mo({key:s,value:i,valueSpec:h.source_geojson,style:m,styleSpec:h,objectElementValidators:sn}),i.cluster)for(var S in i.clusterProperties){var k=i.clusterProperties[S],A=k[0],R=typeof A=="string"?[A,["accumulated"],["get",S]]:A;y.push.apply(y,xs({key:s+"."+S+".map",value:k[1],expressionContext:"cluster-map"})),y.push.apply(y,xs({key:s+"."+S+".reduce",value:R,expressionContext:"cluster-reduce"}))}return y;case"video":return Mo({key:s,value:i,valueSpec:h.source_video,style:m,styleSpec:h});case"image":return Mo({key:s,value:i,valueSpec:h.source_image,style:m,styleSpec:h});case"canvas":return[new ie(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Xl({key:s+".type",value:i.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:m,styleSpec:h})}}function ws(r){var i=r.value,s=r.styleSpec,h=s.light,m=r.style,y=[],_=Yr(i);if(i===void 0)return y;if(_!=="object")return y.concat([new ie("light",i,"object expected, "+_+" found")]);for(var S in i){var k=S.match(/^(.*)-transition$/);y=y.concat(k&&h[k[1]]&&h[k[1]].transition?yr({key:S,value:i[S],valueSpec:s.transition,style:m,styleSpec:s}):h[S]?yr({key:S,value:i[S],valueSpec:h[S],style:m,styleSpec:s}):[new ie(S,i[S],'unknown property "'+S+'"')])}return y}var za={"*":function(){return[]},array:qf,boolean:function(r){var i=r.value,s=r.key,h=Yr(i);return h!=="boolean"?[new ie(s,i,"boolean expected, "+h+" found")]:[]},number:Wf,color:function(r){var i=r.key,s=r.value,h=Yr(s);return h!=="string"?[new ie(i,s,"color expected, "+h+" found")]:fr(s)===null?[new ie(i,s,'color expected, "'+s+'" found')]:[]},constants:Ee,enum:Xl,filter:ah,function:Gf,layer:Kf,object:Mo,source:rc,light:ws,string:bs,formatted:function(r){return bs(r).length===0?[]:xs(r)},resolvedImage:function(r){return bs(r).length===0?[]:xs(r)}};function yr(r){var i=r.value,s=r.valueSpec,h=r.styleSpec;return s.expression&&Ku(Xe(i))?Gf(r):s.expression&&Zl(Ue(i))?xs(r):s.type&&za[s.type]?za[s.type](r):Mo(He({},r,{valueSpec:s.type?h[s.type]:s}))}function Jr(r){var i=r.value,s=r.key,h=bs(r);return h.length||(i.indexOf("{fontstack}")===-1&&h.push(new ie(s,i,'"glyphs" url must include a "{fontstack}" token')),i.indexOf("{range}")===-1&&h.push(new ie(s,i,'"glyphs" url must include a "{range}" token'))),h}function ro(r,i){i===void 0&&(i=Z);var s=[];return s=s.concat(yr({key:"",value:r,valueSpec:i.$root,styleSpec:i,style:r,objectElementValidators:{glyphs:Jr,"*":function(){return[]}}})),r.constants&&(s=s.concat(Ee({key:"constants",value:r.constants,style:r,styleSpec:i}))),Jl(s)}function Jl(r){return[].concat(r).sort(function(i,s){return i.line-s.line})}function tl(r){return function(){for(var i=[],s=arguments.length;s--;)i[s]=arguments[s];return Jl(r.apply(this,i))}}ro.source=tl(rc),ro.light=tl(ws),ro.layer=tl(Kf),ro.filter=tl(ah),ro.paintProperty=tl(lh),ro.layoutProperty=tl(Yl);var Ql=ro,Vv=Ql.light,qv=Ql.paintProperty,eu=Ql.layoutProperty;function tu(r,i){var s=!1;if(i&&i.length)for(var h=0,m=i;h<m.length;h+=1)r.fire(new me(new Error(m[h].message))),s=!0;return s}var ca=Bn;function Bn(r,i,s){var h=this.cells=[];if(r instanceof ArrayBuffer){this.arrayBuffer=r;var m=new Int32Array(this.arrayBuffer);r=m[0],this.d=(i=m[1])+2*(s=m[2]);for(var y=0;y<this.d*this.d;y++){var _=m[3+y],S=m[3+y+1];h.push(_===S?null:m.subarray(_,S))}var k=m[3+h.length+1];this.keys=m.subarray(m[3+h.length],k),this.bboxes=m.subarray(k),this.insert=this._insertReadonly}else{this.d=i+2*s;for(var A=0;A<this.d*this.d;A++)h.push([]);this.keys=[],this.bboxes=[]}this.n=i,this.extent=r,this.padding=s,this.scale=i/r,this.uid=0;var R=s/i*r;this.min=-R,this.max=r+R}Bn.prototype.insert=function(r,i,s,h,m){this._forEachCell(i,s,h,m,this._insertCell,this.uid++),this.keys.push(r),this.bboxes.push(i),this.bboxes.push(s),this.bboxes.push(h),this.bboxes.push(m)},Bn.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Bn.prototype._insertCell=function(r,i,s,h,m,y){this.cells[m].push(y)},Bn.prototype.query=function(r,i,s,h,m){var y=this.min,_=this.max;if(r<=y&&i<=y&&_<=s&&_<=h&&!m)return Array.prototype.slice.call(this.keys);var S=[];return this._forEachCell(r,i,s,h,this._queryCell,S,{},m),S},Bn.prototype._queryCell=function(r,i,s,h,m,y,_,S){var k=this.cells[m];if(k!==null)for(var A=this.keys,R=this.bboxes,O=0;O<k.length;O++){var $=k[O];if(_[$]===void 0){var H=4*$;(S?S(R[H+0],R[H+1],R[H+2],R[H+3]):r<=R[H+2]&&i<=R[H+3]&&s>=R[H+0]&&h>=R[H+1])?(_[$]=!0,y.push(A[$])):_[$]=!1}}},Bn.prototype._forEachCell=function(r,i,s,h,m,y,_,S){for(var k=this._convertToCellCoord(r),A=this._convertToCellCoord(i),R=this._convertToCellCoord(s),O=this._convertToCellCoord(h),$=k;$<=R;$++)for(var H=A;H<=O;H++){var se=this.d*H+$;if((!S||S(this._convertFromCellCoord($),this._convertFromCellCoord(H),this._convertFromCellCoord($+1),this._convertFromCellCoord(H+1)))&&m.call(this,r,i,s,h,se,y,_,S))return}},Bn.prototype._convertFromCellCoord=function(r){return(r-this.padding)/this.scale},Bn.prototype._convertToCellCoord=function(r){return Math.max(0,Math.min(this.d-1,Math.floor(r*this.scale)+this.padding))},Bn.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var r=this.cells,i=3+this.cells.length+1+1,s=0,h=0;h<this.cells.length;h++)s+=this.cells[h].length;var m=new Int32Array(i+s+this.keys.length+this.bboxes.length);m[0]=this.extent,m[1]=this.n,m[2]=this.padding;for(var y=i,_=0;_<r.length;_++){var S=r[_];m[3+_]=y,m.set(S,y),y+=S.length}return m[3+r.length]=y,m.set(this.keys,y),m[3+r.length+1]=y+=this.keys.length,m.set(this.bboxes,y),y+=this.bboxes.length,m.buffer};var ru=I.ImageData,Xf=I.ImageBitmap,Rn={};function gt(r,i,s){s===void 0&&(s={}),Object.defineProperty(i,"_classRegistryKey",{value:r,writeable:!1}),Rn[r]={klass:i,omit:s.omit||[],shallow:s.shallow||[]}}for(var $i in gt("Object",Object),ca.serialize=function(r,i){var s=r.toArrayBuffer();return i&&i.push(s),{buffer:s}},ca.deserialize=function(r){return new ca(r.buffer)},gt("Grid",ca),gt("Color",Pr),gt("Error",Error),gt("ResolvedImage",Pi),gt("StylePropertyFunction",el),gt("StyleExpression",Js,{omit:["_evaluator"]}),gt("ZoomDependentExpression",Qs),gt("ZoomConstantExpression",Kl),gt("CompoundExpression",ai,{omit:["_evaluate"]}),ys)ys[$i]._classRegistryKey||gt("Expression_"+$i,ys[$i]);function nc(r){return r&&typeof ArrayBuffer<"u"&&(r instanceof ArrayBuffer||r.constructor&&r.constructor.name==="ArrayBuffer")}function rl(r){return Xf&&r instanceof Xf}function Ro(r,i){if(r==null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp)return r;if(nc(r)||rl(r))return i&&i.push(r),r;if(ArrayBuffer.isView(r)){var s=r;return i&&i.push(s.buffer),s}if(r instanceof ru)return i&&i.push(r.data.buffer),r;if(Array.isArray(r)){for(var h=[],m=0,y=r;m<y.length;m+=1)h.push(Ro(y[m],i));return h}if(typeof r=="object"){var _=r.constructor,S=_._classRegistryKey;if(!S)throw new Error("can't serialize object of unregistered class");var k=_.serialize?_.serialize(r,i):{};if(!_.serialize){for(var A in r)if(r.hasOwnProperty(A)&&!(Rn[S].omit.indexOf(A)>=0)){var R=r[A];k[A]=Rn[S].shallow.indexOf(A)>=0?R:Ro(R,i)}r instanceof Error&&(k.message=r.message)}if(k.$name)throw new Error("$name property is reserved for worker serialization logic.");return S!=="Object"&&(k.$name=S),k}throw new Error("can't serialize object of type "+typeof r)}function Vi(r){if(r==null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp||nc(r)||rl(r)||ArrayBuffer.isView(r)||r instanceof ru)return r;if(Array.isArray(r))return r.map(Vi);if(typeof r=="object"){var i=r.$name||"Object",s=Rn[i].klass;if(!s)throw new Error("can't deserialize unregistered class "+i);if(s.deserialize)return s.deserialize(r);for(var h=Object.create(s.prototype),m=0,y=Object.keys(r);m<y.length;m+=1){var _=y[m];if(_!=="$name"){var S=r[_];h[_]=Rn[i].shallow.indexOf(_)>=0?S:Vi(S)}}return h}throw new Error("can't deserialize object of type "+typeof r)}var uh=function(){this.first=!0};uh.prototype.update=function(r,i){var s=Math.floor(r);return this.first?(this.first=!1,this.lastIntegerZoom=s,this.lastIntegerZoomTime=0,this.lastZoom=r,this.lastFloorZoom=s,!0):(this.lastFloorZoom>s?(this.lastIntegerZoom=s+1,this.lastIntegerZoomTime=i):this.lastFloorZoom<s&&(this.lastIntegerZoom=s,this.lastIntegerZoomTime=i),r!==this.lastZoom&&(this.lastZoom=r,this.lastFloorZoom=s,!0))};var it={"Latin-1 Supplement":function(r){return r>=128&&r<=255},Arabic:function(r){return r>=1536&&r<=1791},"Arabic Supplement":function(r){return r>=1872&&r<=1919},"Arabic Extended-A":function(r){return r>=2208&&r<=2303},"Hangul Jamo":function(r){return r>=4352&&r<=4607},"Unified Canadian Aboriginal Syllabics":function(r){return r>=5120&&r<=5759},Khmer:function(r){return r>=6016&&r<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(r){return r>=6320&&r<=6399},"General Punctuation":function(r){return r>=8192&&r<=8303},"Letterlike Symbols":function(r){return r>=8448&&r<=8527},"Number Forms":function(r){return r>=8528&&r<=8591},"Miscellaneous Technical":function(r){return r>=8960&&r<=9215},"Control Pictures":function(r){return r>=9216&&r<=9279},"Optical Character Recognition":function(r){return r>=9280&&r<=9311},"Enclosed Alphanumerics":function(r){return r>=9312&&r<=9471},"Geometric Shapes":function(r){return r>=9632&&r<=9727},"Miscellaneous Symbols":function(r){return r>=9728&&r<=9983},"Miscellaneous Symbols and Arrows":function(r){return r>=11008&&r<=11263},"CJK Radicals Supplement":function(r){return r>=11904&&r<=12031},"Kangxi Radicals":function(r){return r>=12032&&r<=12255},"Ideographic Description Characters":function(r){return r>=12272&&r<=12287},"CJK Symbols and Punctuation":function(r){return r>=12288&&r<=12351},Hiragana:function(r){return r>=12352&&r<=12447},Katakana:function(r){return r>=12448&&r<=12543},Bopomofo:function(r){return r>=12544&&r<=12591},"Hangul Compatibility Jamo":function(r){return r>=12592&&r<=12687},Kanbun:function(r){return r>=12688&&r<=12703},"Bopomofo Extended":function(r){return r>=12704&&r<=12735},"CJK Strokes":function(r){return r>=12736&&r<=12783},"Katakana Phonetic Extensions":function(r){return r>=12784&&r<=12799},"Enclosed CJK Letters and Months":function(r){return r>=12800&&r<=13055},"CJK Compatibility":function(r){return r>=13056&&r<=13311},"CJK Unified Ideographs Extension A":function(r){return r>=13312&&r<=19903},"Yijing Hexagram Symbols":function(r){return r>=19904&&r<=19967},"CJK Unified Ideographs":function(r){return r>=19968&&r<=40959},"Yi Syllables":function(r){return r>=40960&&r<=42127},"Yi Radicals":function(r){return r>=42128&&r<=42191},"Hangul Jamo Extended-A":function(r){return r>=43360&&r<=43391},"Hangul Syllables":function(r){return r>=44032&&r<=55215},"Hangul Jamo Extended-B":function(r){return r>=55216&&r<=55295},"Private Use Area":function(r){return r>=57344&&r<=63743},"CJK Compatibility Ideographs":function(r){return r>=63744&&r<=64255},"Arabic Presentation Forms-A":function(r){return r>=64336&&r<=65023},"Vertical Forms":function(r){return r>=65040&&r<=65055},"CJK Compatibility Forms":function(r){return r>=65072&&r<=65103},"Small Form Variants":function(r){return r>=65104&&r<=65135},"Arabic Presentation Forms-B":function(r){return r>=65136&&r<=65279},"Halfwidth and Fullwidth Forms":function(r){return r>=65280&&r<=65519}};function ch(r){for(var i=0,s=r;i<s.length;i+=1)if(ic(s[i].charCodeAt(0)))return!0;return!1}function ic(r){return!(r!==746&&r!==747&&(r<4352||!(it["Bopomofo Extended"](r)||it.Bopomofo(r)||it["CJK Compatibility Forms"](r)&&!(r>=65097&&r<=65103)||it["CJK Compatibility Ideographs"](r)||it["CJK Compatibility"](r)||it["CJK Radicals Supplement"](r)||it["CJK Strokes"](r)||!(!it["CJK Symbols and Punctuation"](r)||r>=12296&&r<=12305||r>=12308&&r<=12319||r===12336)||it["CJK Unified Ideographs Extension A"](r)||it["CJK Unified Ideographs"](r)||it["Enclosed CJK Letters and Months"](r)||it["Hangul Compatibility Jamo"](r)||it["Hangul Jamo Extended-A"](r)||it["Hangul Jamo Extended-B"](r)||it["Hangul Jamo"](r)||it["Hangul Syllables"](r)||it.Hiragana(r)||it["Ideographic Description Characters"](r)||it.Kanbun(r)||it["Kangxi Radicals"](r)||it["Katakana Phonetic Extensions"](r)||it.Katakana(r)&&r!==12540||!(!it["Halfwidth and Fullwidth Forms"](r)||r===65288||r===65289||r===65293||r>=65306&&r<=65310||r===65339||r===65341||r===65343||r>=65371&&r<=65503||r===65507||r>=65512&&r<=65519)||!(!it["Small Form Variants"](r)||r>=65112&&r<=65118||r>=65123&&r<=65126)||it["Unified Canadian Aboriginal Syllabics"](r)||it["Unified Canadian Aboriginal Syllabics Extended"](r)||it["Vertical Forms"](r)||it["Yijing Hexagram Symbols"](r)||it["Yi Syllables"](r)||it["Yi Radicals"](r))))}function ph(r){return!(ic(r)||function(i){return!!(it["Latin-1 Supplement"](i)&&(i===167||i===169||i===174||i===177||i===188||i===189||i===190||i===215||i===247)||it["General Punctuation"](i)&&(i===8214||i===8224||i===8225||i===8240||i===8241||i===8251||i===8252||i===8258||i===8263||i===8264||i===8265||i===8273)||it["Letterlike Symbols"](i)||it["Number Forms"](i)||it["Miscellaneous Technical"](i)&&(i>=8960&&i<=8967||i>=8972&&i<=8991||i>=8996&&i<=9e3||i===9003||i>=9085&&i<=9114||i>=9150&&i<=9165||i===9167||i>=9169&&i<=9179||i>=9186&&i<=9215)||it["Control Pictures"](i)&&i!==9251||it["Optical Character Recognition"](i)||it["Enclosed Alphanumerics"](i)||it["Geometric Shapes"](i)||it["Miscellaneous Symbols"](i)&&!(i>=9754&&i<=9759)||it["Miscellaneous Symbols and Arrows"](i)&&(i>=11026&&i<=11055||i>=11088&&i<=11097||i>=11192&&i<=11243)||it["CJK Symbols and Punctuation"](i)||it.Katakana(i)||it["Private Use Area"](i)||it["CJK Compatibility Forms"](i)||it["Small Form Variants"](i)||it["Halfwidth and Fullwidth Forms"](i)||i===8734||i===8756||i===8757||i>=9984&&i<=10087||i>=10102&&i<=10131||i===65532||i===65533)}(r))}function ho(r){return r>=1424&&r<=2303||it["Arabic Presentation Forms-A"](r)||it["Arabic Presentation Forms-B"](r)}function qi(r,i){return!(!i&&ho(r)||r>=2304&&r<=3583||r>=3840&&r<=4255||it.Khmer(r))}function oc(r){for(var i=0,s=r;i<s.length;i+=1)if(ho(s[i].charCodeAt(0)))return!0;return!1}var ac=null,Wi="unavailable",pa=null,Yf=function(r){r&&typeof r=="string"&&r.indexOf("NetworkError")>-1&&(Wi="error"),ac&&ac(r)};function nu(){hh.fire(new re("pluginStateChange",{pluginStatus:Wi,pluginURL:pa}))}var hh=new ye,dh=function(){return Wi},Lo=function(){if(Wi!=="deferred"||!pa)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Wi="loading",nu(),pa&&zr({url:pa},function(r){r?Yf(r):(Wi="loaded",nu())})},no={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Wi==="loaded"||no.applyArabicShaping!=null},isLoading:function(){return Wi==="loading"},setState:function(r){Wi=r.pluginStatus,pa=r.pluginURL},isParsed:function(){return no.applyArabicShaping!=null&&no.processBidirectionalText!=null&&no.processStyledBidirectionalText!=null},getPluginURL:function(){return pa}},cr=function(r,i){this.zoom=r,i?(this.now=i.now,this.fadeDuration=i.fadeDuration,this.zoomHistory=i.zoomHistory,this.transition=i.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new uh,this.transition={})};cr.prototype.isSupportedScript=function(r){return function(i,s){for(var h=0,m=i;h<m.length;h+=1)if(!qi(m[h].charCodeAt(0),s))return!1;return!0}(r,no.isLoaded())},cr.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},cr.prototype.getCrossfadeParameters=function(){var r=this.zoom,i=r-Math.floor(r),s=this.crossFadingFactor();return r>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:i+(1-i)*s}:{fromScale:.5,toScale:1,t:1-(1-s)*i}};var Ho=function(r,i){this.property=r,this.value=i,this.expression=function(s,h){if(Ku(s))return new el(s,h);if(Zl(s)){var m=Vf(s,h);if(m.result==="error")throw new Error(m.value.map(function(_){return _.key+": "+_.message}).join(", "));return m.value}var y=s;return typeof s=="string"&&h.type==="color"&&(y=Pr.parse(s)),{kind:"constant",evaluate:function(){return y}}}(i===void 0?r.specification.default:i,r.specification)};Ho.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},Ho.prototype.possiblyEvaluate=function(r,i,s){return this.property.possiblyEvaluate(this,r,i,s)};var fo=function(r){this.property=r,this.value=new Ho(r,void 0)};fo.prototype.transitioned=function(r,i){return new Ss(this.property,this.value,i,V({},r.transition,this.transition),r.now)},fo.prototype.untransitioned=function(){return new Ss(this.property,this.value,null,{},0)};var li=function(r){this._properties=r,this._values=Object.create(r.defaultTransitionablePropertyValues)};li.prototype.getValue=function(r){return Se(this._values[r].value.value)},li.prototype.setValue=function(r,i){this._values.hasOwnProperty(r)||(this._values[r]=new fo(this._values[r].property)),this._values[r].value=new Ho(this._values[r].property,i===null?void 0:Se(i))},li.prototype.getTransition=function(r){return Se(this._values[r].transition)},li.prototype.setTransition=function(r,i){this._values.hasOwnProperty(r)||(this._values[r]=new fo(this._values[r].property)),this._values[r].transition=Se(i)||void 0},li.prototype.serialize=function(){for(var r={},i=0,s=Object.keys(this._values);i<s.length;i+=1){var h=s[i],m=this.getValue(h);m!==void 0&&(r[h]=m);var y=this.getTransition(h);y!==void 0&&(r[h+"-transition"]=y)}return r},li.prototype.transitioned=function(r,i){for(var s=new Da(this._properties),h=0,m=Object.keys(this._values);h<m.length;h+=1){var y=m[h];s._values[y]=this._values[y].transitioned(r,i._values[y])}return s},li.prototype.untransitioned=function(){for(var r=new Da(this._properties),i=0,s=Object.keys(this._values);i<s.length;i+=1){var h=s[i];r._values[h]=this._values[h].untransitioned()}return r};var Ss=function(r,i,s,h,m){this.property=r,this.value=i,this.begin=m+h.delay||0,this.end=this.begin+h.duration||0,r.specification.transition&&(h.delay||h.duration)&&(this.prior=s)};Ss.prototype.possiblyEvaluate=function(r,i,s){var h=r.now||0,m=this.value.possiblyEvaluate(r,i,s),y=this.prior;if(y){if(h>this.end)return this.prior=null,m;if(this.value.isDataDriven())return this.prior=null,m;if(h<this.begin)return y.possiblyEvaluate(r,i,s);var _=(h-this.begin)/(this.end-this.begin);return this.property.interpolate(y.possiblyEvaluate(r,i,s),m,function(S){if(S<=0)return 0;if(S>=1)return 1;var k=S*S,A=k*S;return 4*(S<.5?A:3*(S-k)+A-.75)}(_))}return m};var Da=function(r){this._properties=r,this._values=Object.create(r.defaultTransitioningPropertyValues)};Da.prototype.possiblyEvaluate=function(r,i,s){for(var h=new iu(this._properties),m=0,y=Object.keys(this._values);m<y.length;m+=1){var _=y[m];h._values[_]=this._values[_].possiblyEvaluate(r,i,s)}return h},Da.prototype.hasTransition=function(){for(var r=0,i=Object.keys(this._values);r<i.length;r+=1)if(this._values[i[r]].prior)return!0;return!1};var zo=function(r){this._properties=r,this._values=Object.create(r.defaultPropertyValues)};zo.prototype.getValue=function(r){return Se(this._values[r].value)},zo.prototype.setValue=function(r,i){this._values[r]=new Ho(this._values[r].property,i===null?void 0:Se(i))},zo.prototype.serialize=function(){for(var r={},i=0,s=Object.keys(this._values);i<s.length;i+=1){var h=s[i],m=this.getValue(h);m!==void 0&&(r[h]=m)}return r},zo.prototype.possiblyEvaluate=function(r,i,s){for(var h=new iu(this._properties),m=0,y=Object.keys(this._values);m<y.length;m+=1){var _=y[m];h._values[_]=this._values[_].possiblyEvaluate(r,i,s)}return h};var _i=function(r,i,s){this.property=r,this.value=i,this.parameters=s};_i.prototype.isConstant=function(){return this.value.kind==="constant"},_i.prototype.constantOr=function(r){return this.value.kind==="constant"?this.value.value:r},_i.prototype.evaluate=function(r,i,s,h){return this.property.evaluate(this.value,this.parameters,r,i,s,h)};var iu=function(r){this._properties=r,this._values=Object.create(r.defaultPossiblyEvaluatedValues)};iu.prototype.get=function(r){return this._values[r]};var Ct=function(r){this.specification=r};Ct.prototype.possiblyEvaluate=function(r,i){return r.expression.evaluate(i)},Ct.prototype.interpolate=function(r,i,s){var h=Xs[this.specification.type];return h?h(r,i,s):r};var _t=function(r,i){this.specification=r,this.overrides=i};_t.prototype.possiblyEvaluate=function(r,i,s,h){return new _i(this,r.expression.kind==="constant"||r.expression.kind==="camera"?{kind:"constant",value:r.expression.evaluate(i,null,{},s,h)}:r.expression,i)},_t.prototype.interpolate=function(r,i,s){if(r.value.kind!=="constant"||i.value.kind!=="constant")return r;if(r.value.value===void 0||i.value.value===void 0)return new _i(this,{kind:"constant",value:void 0},r.parameters);var h=Xs[this.specification.type];return h?new _i(this,{kind:"constant",value:h(r.value.value,i.value.value,s)},r.parameters):r},_t.prototype.evaluate=function(r,i,s,h,m,y){return r.kind==="constant"?r.value:r.evaluate(i,s,h,m,y)};var sc=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.possiblyEvaluate=function(s,h,m,y){if(s.value===void 0)return new _i(this,{kind:"constant",value:void 0},h);if(s.expression.kind==="constant"){var _=s.expression.evaluate(h,null,{},m,y),S=s.property.specification.type==="resolvedImage"&&typeof _!="string"?_.name:_,k=this._calculate(S,S,S,h);return new _i(this,{kind:"constant",value:k},h)}if(s.expression.kind==="camera"){var A=this._calculate(s.expression.evaluate({zoom:h.zoom-1}),s.expression.evaluate({zoom:h.zoom}),s.expression.evaluate({zoom:h.zoom+1}),h);return new _i(this,{kind:"constant",value:A},h)}return new _i(this,s.expression,h)},i.prototype.evaluate=function(s,h,m,y,_,S){if(s.kind==="source"){var k=s.evaluate(h,m,y,_,S);return this._calculate(k,k,k,h)}return s.kind==="composite"?this._calculate(s.evaluate({zoom:Math.floor(h.zoom)-1},m,y),s.evaluate({zoom:Math.floor(h.zoom)},m,y),s.evaluate({zoom:Math.floor(h.zoom)+1},m,y),h):s.value},i.prototype._calculate=function(s,h,m,y){return y.zoom>y.zoomHistory.lastIntegerZoom?{from:s,to:h}:{from:m,to:h}},i.prototype.interpolate=function(s){return s},i}(_t),xi=function(r){this.specification=r};xi.prototype.possiblyEvaluate=function(r,i,s,h){if(r.value!==void 0){if(r.expression.kind==="constant"){var m=r.expression.evaluate(i,null,{},s,h);return this._calculate(m,m,m,i)}return this._calculate(r.expression.evaluate(new cr(Math.floor(i.zoom-1),i)),r.expression.evaluate(new cr(Math.floor(i.zoom),i)),r.expression.evaluate(new cr(Math.floor(i.zoom+1),i)),i)}},xi.prototype._calculate=function(r,i,s,h){return h.zoom>h.zoomHistory.lastIntegerZoom?{from:r,to:i}:{from:s,to:i}},xi.prototype.interpolate=function(r){return r};var Do=function(r){this.specification=r};Do.prototype.possiblyEvaluate=function(r,i,s,h){return!!r.expression.evaluate(i,null,{},s,h)},Do.prototype.interpolate=function(){return!1};var ui=function(r){for(var i in this.properties=r,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],r){var s=r[i];s.specification.overridable&&this.overridableProperties.push(i);var h=this.defaultPropertyValues[i]=new Ho(s,void 0),m=this.defaultTransitionablePropertyValues[i]=new fo(s);this.defaultTransitioningPropertyValues[i]=m.untransitioned(),this.defaultPossiblyEvaluatedValues[i]=h.possiblyEvaluate({})}};gt("DataDrivenProperty",_t),gt("DataConstantProperty",Ct),gt("CrossFadedDataDrivenProperty",sc),gt("CrossFadedProperty",xi),gt("ColorRampProperty",Do);var Zo=function(r){function i(s,h){if(r.call(this),this.id=s.id,this.type=s.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},s.type!=="custom"&&(this.metadata=(s=s).metadata,this.minzoom=s.minzoom,this.maxzoom=s.maxzoom,s.type!=="background"&&(this.source=s.source,this.sourceLayer=s["source-layer"],this.filter=s.filter),h.layout&&(this._unevaluatedLayout=new zo(h.layout)),h.paint)){for(var m in this._transitionablePaint=new li(h.paint),s.paint)this.setPaintProperty(m,s.paint[m],{validate:!1});for(var y in s.layout)this.setLayoutProperty(y,s.layout[y],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new iu(h.paint)}}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},i.prototype.getLayoutProperty=function(s){return s==="visibility"?this.visibility:this._unevaluatedLayout.getValue(s)},i.prototype.setLayoutProperty=function(s,h,m){m===void 0&&(m={}),h!=null&&this._validate(eu,"layers."+this.id+".layout."+s,s,h,m)||(s!=="visibility"?this._unevaluatedLayout.setValue(s,h):this.visibility=h)},i.prototype.getPaintProperty=function(s){return be(s,"-transition")?this._transitionablePaint.getTransition(s.slice(0,-11)):this._transitionablePaint.getValue(s)},i.prototype.setPaintProperty=function(s,h,m){if(m===void 0&&(m={}),h!=null&&this._validate(qv,"layers."+this.id+".paint."+s,s,h,m))return!1;if(be(s,"-transition"))return this._transitionablePaint.setTransition(s.slice(0,-11),h||void 0),!1;var y=this._transitionablePaint._values[s],_=y.property.specification["property-type"]==="cross-faded-data-driven",S=y.value.isDataDriven(),k=y.value;this._transitionablePaint.setValue(s,h),this._handleSpecialPaintPropertyUpdate(s);var A=this._transitionablePaint._values[s].value;return A.isDataDriven()||S||_||this._handleOverridablePaintPropertyUpdate(s,k,A)},i.prototype._handleSpecialPaintPropertyUpdate=function(s){},i.prototype._handleOverridablePaintPropertyUpdate=function(s,h,m){return!1},i.prototype.isHidden=function(s){return!!(this.minzoom&&s<this.minzoom)||!!(this.maxzoom&&s>=this.maxzoom)||this.visibility==="none"},i.prototype.updateTransitions=function(s){this._transitioningPaint=this._transitionablePaint.transitioned(s,this._transitioningPaint)},i.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},i.prototype.recalculate=function(s,h){s.getCrossfadeParameters&&(this._crossfadeParameters=s.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(s,void 0,h)),this.paint=this._transitioningPaint.possiblyEvaluate(s,void 0,h)},i.prototype.serialize=function(){var s={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(s.layout=s.layout||{},s.layout.visibility=this.visibility),_e(s,function(h,m){return!(h===void 0||m==="layout"&&!Object.keys(h).length||m==="paint"&&!Object.keys(h).length)})},i.prototype._validate=function(s,h,m,y,_){return _===void 0&&(_={}),(!_||_.validate!==!1)&&tu(this,s.call(Ql,{key:h,layerType:this.type,objectKey:m,value:y,styleSpec:Z,style:{glyphs:!0,sprite:!0}}))},i.prototype.is3D=function(){return!1},i.prototype.isTileClipped=function(){return!1},i.prototype.hasOffscreenPass=function(){return!1},i.prototype.resize=function(){},i.prototype.isStateDependent=function(){for(var s in this.paint._values){var h=this.paint.get(s);if(h instanceof _i&&_s(h.property.specification)&&(h.value.kind==="source"||h.value.kind==="composite")&&h.value.isStateDependent)return!0}return!1},i}(ye),fh={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},lc=function(r,i){this._structArray=r,this._pos1=i*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Or=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Jn(r,i){i===void 0&&(i=1);var s=0,h=0;return{members:r.map(function(m){var y=fh[m.type].BYTES_PER_ELEMENT,_=s=Jf(s,Math.max(i,y)),S=m.components||1;return h=Math.max(h,y),s+=y*S,{name:m.name,type:m.type,components:S,offset:_}}),size:Jf(s,Math.max(h,i)),alignment:i}}function Jf(r,i){return Math.ceil(r/i)*i}Or.serialize=function(r,i){return r._trim(),i&&(r.isTransferred=!0,i.push(r.arrayBuffer)),{length:r.length,arrayBuffer:r.arrayBuffer}},Or.deserialize=function(r){var i=Object.create(this.prototype);return i.arrayBuffer=r.arrayBuffer,i.length=r.length,i.capacity=r.arrayBuffer.byteLength/i.bytesPerElement,i._refreshViews(),i},Or.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Or.prototype.clear=function(){this.length=0},Or.prototype.resize=function(r){this.reserve(r),this.length=r},Or.prototype.reserve=function(r){if(r>this.capacity){this.capacity=Math.max(r,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var i=this.uint8;this._refreshViews(),i&&this.uint8.set(i)}},Or.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Es=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,h){var m=this.length;return this.resize(m+1),this.emplace(m,s,h)},i.prototype.emplace=function(s,h,m){var y=2*s;return this.int16[y+0]=h,this.int16[y+1]=m,s},i}(Or);Es.prototype.bytesPerElement=4,gt("StructArrayLayout2i4",Es);var mh=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,h,m,y){var _=this.length;return this.resize(_+1),this.emplace(_,s,h,m,y)},i.prototype.emplace=function(s,h,m,y,_){var S=4*s;return this.int16[S+0]=h,this.int16[S+1]=m,this.int16[S+2]=y,this.int16[S+3]=_,s},i}(Or);mh.prototype.bytesPerElement=8,gt("StructArrayLayout4i8",mh);var ha=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,h,m,y,_,S){var k=this.length;return this.resize(k+1),this.emplace(k,s,h,m,y,_,S)},i.prototype.emplace=function(s,h,m,y,_,S,k){var A=6*s;return this.int16[A+0]=h,this.int16[A+1]=m,this.int16[A+2]=y,this.int16[A+3]=_,this.int16[A+4]=S,this.int16[A+5]=k,s},i}(Or);ha.prototype.bytesPerElement=12,gt("StructArrayLayout2i4i12",ha);var Gi=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,h,m,y,_,S){var k=this.length;return this.resize(k+1),this.emplace(k,s,h,m,y,_,S)},i.prototype.emplace=function(s,h,m,y,_,S,k){var A=4*s,R=8*s;return this.int16[A+0]=h,this.int16[A+1]=m,this.uint8[R+4]=y,this.uint8[R+5]=_,this.uint8[R+6]=S,this.uint8[R+7]=k,s},i}(Or);Gi.prototype.bytesPerElement=8,gt("StructArrayLayout2i4ub8",Gi);var nl=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,h){var m=this.length;return this.resize(m+1),this.emplace(m,s,h)},i.prototype.emplace=function(s,h,m){var y=2*s;return this.float32[y+0]=h,this.float32[y+1]=m,s},i}(Or);nl.prototype.bytesPerElement=8,gt("StructArrayLayout2f8",nl);var Ko=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,h,m,y,_,S,k,A,R,O){var $=this.length;return this.resize($+1),this.emplace($,s,h,m,y,_,S,k,A,R,O)},i.prototype.emplace=function(s,h,m,y,_,S,k,A,R,O,$){var H=10*s;return this.uint16[H+0]=h,this.uint16[H+1]=m,this.uint16[H+2]=y,this.uint16[H+3]=_,this.uint16[H+4]=S,this.uint16[H+5]=k,this.uint16[H+6]=A,this.uint16[H+7]=R,this.uint16[H+8]=O,this.uint16[H+9]=$,s},i}(Or);Ko.prototype.bytesPerElement=20,gt("StructArrayLayout10ui20",Ko);var uc=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,h,m,y,_,S,k,A,R,O,$,H){var se=this.length;return this.resize(se+1),this.emplace(se,s,h,m,y,_,S,k,A,R,O,$,H)},i.prototype.emplace=function(s,h,m,y,_,S,k,A,R,O,$,H,se){var le=12*s;return this.int16[le+0]=h,this.int16[le+1]=m,this.int16[le+2]=y,this.int16[le+3]=_,this.uint16[le+4]=S,this.uint16[le+5]=k,this.uint16[le+6]=A,this.uint16[le+7]=R,this.int16[le+8]=O,this.int16[le+9]=$,this.int16[le+10]=H,this.int16[le+11]=se,s},i}(Or);uc.prototype.bytesPerElement=24,gt("StructArrayLayout4i4ui4i24",uc);var il=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,h,m){var y=this.length;return this.resize(y+1),this.emplace(y,s,h,m)},i.prototype.emplace=function(s,h,m,y){var _=3*s;return this.float32[_+0]=h,this.float32[_+1]=m,this.float32[_+2]=y,s},i}(Or);il.prototype.bytesPerElement=12,gt("StructArrayLayout3f12",il);var ou=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s){var h=this.length;return this.resize(h+1),this.emplace(h,s)},i.prototype.emplace=function(s,h){return this.uint32[1*s+0]=h,s},i}(Or);ou.prototype.bytesPerElement=4,gt("StructArrayLayout1ul4",ou);var yh=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,h,m,y,_,S,k,A,R){var O=this.length;return this.resize(O+1),this.emplace(O,s,h,m,y,_,S,k,A,R)},i.prototype.emplace=function(s,h,m,y,_,S,k,A,R,O){var $=10*s,H=5*s;return this.int16[$+0]=h,this.int16[$+1]=m,this.int16[$+2]=y,this.int16[$+3]=_,this.int16[$+4]=S,this.int16[$+5]=k,this.uint32[H+3]=A,this.uint16[$+8]=R,this.uint16[$+9]=O,s},i}(Or);yh.prototype.bytesPerElement=20,gt("StructArrayLayout6i1ul2ui20",yh);var ol=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,h,m,y,_,S){var k=this.length;return this.resize(k+1),this.emplace(k,s,h,m,y,_,S)},i.prototype.emplace=function(s,h,m,y,_,S,k){var A=6*s;return this.int16[A+0]=h,this.int16[A+1]=m,this.int16[A+2]=y,this.int16[A+3]=_,this.int16[A+4]=S,this.int16[A+5]=k,s},i}(Or);ol.prototype.bytesPerElement=12,gt("StructArrayLayout2i2i2i12",ol);var Cs=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,h,m,y,_){var S=this.length;return this.resize(S+1),this.emplace(S,s,h,m,y,_)},i.prototype.emplace=function(s,h,m,y,_,S){var k=4*s,A=8*s;return this.float32[k+0]=h,this.float32[k+1]=m,this.float32[k+2]=y,this.int16[A+6]=_,this.int16[A+7]=S,s},i}(Or);Cs.prototype.bytesPerElement=16,gt("StructArrayLayout2f1f2i16",Cs);var gh=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,h,m,y){var _=this.length;return this.resize(_+1),this.emplace(_,s,h,m,y)},i.prototype.emplace=function(s,h,m,y,_){var S=12*s,k=3*s;return this.uint8[S+0]=h,this.uint8[S+1]=m,this.float32[k+1]=y,this.float32[k+2]=_,s},i}(Or);gh.prototype.bytesPerElement=12,gt("StructArrayLayout2ub2f12",gh);var Oa=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,h,m){var y=this.length;return this.resize(y+1),this.emplace(y,s,h,m)},i.prototype.emplace=function(s,h,m,y){var _=3*s;return this.uint16[_+0]=h,this.uint16[_+1]=m,this.uint16[_+2]=y,s},i}(Or);Oa.prototype.bytesPerElement=6,gt("StructArrayLayout3ui6",Oa);var Ba=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,h,m,y,_,S,k,A,R,O,$,H,se,le,xe,de,Ie){var Me=this.length;return this.resize(Me+1),this.emplace(Me,s,h,m,y,_,S,k,A,R,O,$,H,se,le,xe,de,Ie)},i.prototype.emplace=function(s,h,m,y,_,S,k,A,R,O,$,H,se,le,xe,de,Ie,Me){var ze=24*s,Be=12*s,We=48*s;return this.int16[ze+0]=h,this.int16[ze+1]=m,this.uint16[ze+2]=y,this.uint16[ze+3]=_,this.uint32[Be+2]=S,this.uint32[Be+3]=k,this.uint32[Be+4]=A,this.uint16[ze+10]=R,this.uint16[ze+11]=O,this.uint16[ze+12]=$,this.float32[Be+7]=H,this.float32[Be+8]=se,this.uint8[We+36]=le,this.uint8[We+37]=xe,this.uint8[We+38]=de,this.uint32[Be+10]=Ie,this.int16[ze+22]=Me,s},i}(Or);Ba.prototype.bytesPerElement=48,gt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Ba);var cc=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,h,m,y,_,S,k,A,R,O,$,H,se,le,xe,de,Ie,Me,ze,Be,We,Je,rt,St,lt,Tt,pt,ir){var jt=this.length;return this.resize(jt+1),this.emplace(jt,s,h,m,y,_,S,k,A,R,O,$,H,se,le,xe,de,Ie,Me,ze,Be,We,Je,rt,St,lt,Tt,pt,ir)},i.prototype.emplace=function(s,h,m,y,_,S,k,A,R,O,$,H,se,le,xe,de,Ie,Me,ze,Be,We,Je,rt,St,lt,Tt,pt,ir,jt){var xt=34*s,sr=17*s;return this.int16[xt+0]=h,this.int16[xt+1]=m,this.int16[xt+2]=y,this.int16[xt+3]=_,this.int16[xt+4]=S,this.int16[xt+5]=k,this.int16[xt+6]=A,this.int16[xt+7]=R,this.uint16[xt+8]=O,this.uint16[xt+9]=$,this.uint16[xt+10]=H,this.uint16[xt+11]=se,this.uint16[xt+12]=le,this.uint16[xt+13]=xe,this.uint16[xt+14]=de,this.uint16[xt+15]=Ie,this.uint16[xt+16]=Me,this.uint16[xt+17]=ze,this.uint16[xt+18]=Be,this.uint16[xt+19]=We,this.uint16[xt+20]=Je,this.uint16[xt+21]=rt,this.uint16[xt+22]=St,this.uint32[sr+12]=lt,this.float32[sr+13]=Tt,this.float32[sr+14]=pt,this.float32[sr+15]=ir,this.float32[sr+16]=jt,s},i}(Or);cc.prototype.bytesPerElement=68,gt("StructArrayLayout8i15ui1ul4f68",cc);var Na=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s){var h=this.length;return this.resize(h+1),this.emplace(h,s)},i.prototype.emplace=function(s,h){return this.float32[1*s+0]=h,s},i}(Or);Na.prototype.bytesPerElement=4,gt("StructArrayLayout1f4",Na);var mo=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,h,m){var y=this.length;return this.resize(y+1),this.emplace(y,s,h,m)},i.prototype.emplace=function(s,h,m,y){var _=3*s;return this.int16[_+0]=h,this.int16[_+1]=m,this.int16[_+2]=y,s},i}(Or);mo.prototype.bytesPerElement=6,gt("StructArrayLayout3i6",mo);var vh=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,h,m){var y=this.length;return this.resize(y+1),this.emplace(y,s,h,m)},i.prototype.emplace=function(s,h,m,y){var _=4*s;return this.uint32[2*s+0]=h,this.uint16[_+2]=m,this.uint16[_+3]=y,s},i}(Or);vh.prototype.bytesPerElement=8,gt("StructArrayLayout1ul2ui8",vh);var au=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,h){var m=this.length;return this.resize(m+1),this.emplace(m,s,h)},i.prototype.emplace=function(s,h,m){var y=2*s;return this.uint16[y+0]=h,this.uint16[y+1]=m,s},i}(Or);au.prototype.bytesPerElement=4,gt("StructArrayLayout2ui4",au);var _h=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s){var h=this.length;return this.resize(h+1),this.emplace(h,s)},i.prototype.emplace=function(s,h){return this.uint16[1*s+0]=h,s},i}(Or);_h.prototype.bytesPerElement=2,gt("StructArrayLayout1ui2",_h);var pc=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},i.prototype.emplaceBack=function(s,h,m,y){var _=this.length;return this.resize(_+1),this.emplace(_,s,h,m,y)},i.prototype.emplace=function(s,h,m,y,_){var S=4*s;return this.float32[S+0]=h,this.float32[S+1]=m,this.float32[S+2]=y,this.float32[S+3]=_,s},i}(Or);pc.prototype.bytesPerElement=16,gt("StructArrayLayout4f16",pc);var l=function(r){function i(){r.apply(this,arguments)}r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i;var s={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return s.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},s.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},s.x1.get=function(){return this._structArray.int16[this._pos2+2]},s.y1.get=function(){return this._structArray.int16[this._pos2+3]},s.x2.get=function(){return this._structArray.int16[this._pos2+4]},s.y2.get=function(){return this._structArray.int16[this._pos2+5]},s.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},s.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},s.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},s.anchorPoint.get=function(){return new T(this.anchorPointX,this.anchorPointY)},Object.defineProperties(i.prototype,s),i}(lc);l.prototype.size=20;var p=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.get=function(s){return new l(this,s)},i}(yh);gt("CollisionBoxArray",p);var u=function(r){function i(){r.apply(this,arguments)}r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i;var s={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return s.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},s.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},s.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},s.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},s.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},s.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},s.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},s.segment.get=function(){return this._structArray.uint16[this._pos2+10]},s.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},s.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},s.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},s.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},s.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},s.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},s.placedOrientation.set=function(h){this._structArray.uint8[this._pos1+37]=h},s.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},s.hidden.set=function(h){this._structArray.uint8[this._pos1+38]=h},s.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},s.crossTileID.set=function(h){this._structArray.uint32[this._pos4+10]=h},s.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(i.prototype,s),i}(lc);u.prototype.size=48;var d=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.get=function(s){return new u(this,s)},i}(Ba);gt("PlacedSymbolArray",d);var g=function(r){function i(){r.apply(this,arguments)}r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i;var s={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return s.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},s.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},s.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},s.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},s.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},s.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},s.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},s.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},s.key.get=function(){return this._structArray.uint16[this._pos2+8]},s.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},s.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},s.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},s.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},s.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},s.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},s.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},s.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},s.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},s.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},s.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},s.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},s.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},s.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},s.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},s.crossTileID.set=function(h){this._structArray.uint32[this._pos4+12]=h},s.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},s.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},s.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},s.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(i.prototype,s),i}(lc);g.prototype.size=68;var b=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.get=function(s){return new g(this,s)},i}(cc);gt("SymbolInstanceArray",b);var w=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.getoffsetX=function(s){return this.float32[1*s+0]},i}(Na);gt("GlyphOffsetArray",w);var C=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.getx=function(s){return this.int16[3*s+0]},i.prototype.gety=function(s){return this.int16[3*s+1]},i.prototype.gettileUnitDistanceFromAnchor=function(s){return this.int16[3*s+2]},i}(mo);gt("SymbolLineVertexArray",C);var M=function(r){function i(){r.apply(this,arguments)}r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i;var s={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return s.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},s.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},s.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(i.prototype,s),i}(lc);M.prototype.size=8;var N=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.get=function(s){return new M(this,s)},i}(vh);gt("FeatureIndexArray",N);var K=Jn([{name:"a_pos",components:2,type:"Int16"}],4).members,X=function(r){r===void 0&&(r=[]),this.segments=r};function J(r,i){return 256*(r=D(Math.floor(r),0,255))+D(Math.floor(i),0,255)}X.prototype.prepareSegment=function(r,i,s,h){var m=this.segments[this.segments.length-1];return r>X.MAX_VERTEX_ARRAY_LENGTH&&he("Max vertices per segment is "+X.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+r),(!m||m.vertexLength+r>X.MAX_VERTEX_ARRAY_LENGTH||m.sortKey!==h)&&(m={vertexOffset:i.length,primitiveOffset:s.length,vertexLength:0,primitiveLength:0},h!==void 0&&(m.sortKey=h),this.segments.push(m)),m},X.prototype.get=function(){return this.segments},X.prototype.destroy=function(){for(var r=0,i=this.segments;r<i.length;r+=1){var s=i[r];for(var h in s.vaos)s.vaos[h].destroy()}},X.simpleSegment=function(r,i,s,h){return new X([{vertexOffset:r,primitiveOffset:i,vertexLength:s,primitiveLength:h,vaos:{},sortKey:0}])},X.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,gt("SegmentVector",X);var ce=Jn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),ue=v(function(r){r.exports=function(i,s){var h,m,y,_,S,k,A,R;for(m=i.length-(h=3&i.length),y=s,S=3432918353,k=461845907,R=0;R<m;)A=255&i.charCodeAt(R)|(255&i.charCodeAt(++R))<<8|(255&i.charCodeAt(++R))<<16|(255&i.charCodeAt(++R))<<24,++R,y=27492+(65535&(_=5*(65535&(y=(y^=A=(65535&(A=(A=(65535&A)*S+(((A>>>16)*S&65535)<<16)&4294967295)<<15|A>>>17))*k+(((A>>>16)*k&65535)<<16)&4294967295)<<13|y>>>19))+((5*(y>>>16)&65535)<<16)&4294967295))+((58964+(_>>>16)&65535)<<16);switch(A=0,h){case 3:A^=(255&i.charCodeAt(R+2))<<16;case 2:A^=(255&i.charCodeAt(R+1))<<8;case 1:y^=A=(65535&(A=(A=(65535&(A^=255&i.charCodeAt(R)))*S+(((A>>>16)*S&65535)<<16)&4294967295)<<15|A>>>17))*k+(((A>>>16)*k&65535)<<16)&4294967295}return y^=i.length,y=2246822507*(65535&(y^=y>>>16))+((2246822507*(y>>>16)&65535)<<16)&4294967295,y=3266489909*(65535&(y^=y>>>13))+((3266489909*(y>>>16)&65535)<<16)&4294967295,(y^=y>>>16)>>>0}}),ve=v(function(r){r.exports=function(i,s){for(var h,m=i.length,y=s^m,_=0;m>=4;)h=1540483477*(65535&(h=255&i.charCodeAt(_)|(255&i.charCodeAt(++_))<<8|(255&i.charCodeAt(++_))<<16|(255&i.charCodeAt(++_))<<24))+((1540483477*(h>>>16)&65535)<<16),y=1540483477*(65535&y)+((1540483477*(y>>>16)&65535)<<16)^(h=1540483477*(65535&(h^=h>>>24))+((1540483477*(h>>>16)&65535)<<16)),m-=4,++_;switch(m){case 3:y^=(255&i.charCodeAt(_+2))<<16;case 2:y^=(255&i.charCodeAt(_+1))<<8;case 1:y=1540483477*(65535&(y^=255&i.charCodeAt(_)))+((1540483477*(y>>>16)&65535)<<16)}return y=1540483477*(65535&(y^=y>>>13))+((1540483477*(y>>>16)&65535)<<16),(y^=y>>>15)>>>0}}),ae=ue,ge=ve;ae.murmur3=ue,ae.murmur2=ge;var we=function(){this.ids=[],this.positions=[],this.indexed=!1};we.prototype.add=function(r,i,s,h){this.ids.push(Ne(r)),this.positions.push(i,s,h)},we.prototype.getPositions=function(r){for(var i=Ne(r),s=0,h=this.ids.length-1;s<h;){var m=s+h>>1;this.ids[m]>=i?h=m:s=m+1}for(var y=[];this.ids[s]===i;)y.push({index:this.positions[3*s],start:this.positions[3*s+1],end:this.positions[3*s+2]}),s++;return y},we.serialize=function(r,i){var s=new Float64Array(r.ids),h=new Uint32Array(r.positions);return function m(y,_,S,k){for(;S<k;){for(var A=y[S+k>>1],R=S-1,O=k+1;;){do R++;while(y[R]<A);do O--;while(y[O]>A);if(R>=O)break;De(y,R,O),De(_,3*R,3*O),De(_,3*R+1,3*O+1),De(_,3*R+2,3*O+2)}O-S<k-O?(m(y,_,S,O),S=O+1):(m(y,_,O+1,k),k=O)}}(s,h,0,s.length-1),i&&i.push(s.buffer,h.buffer),{ids:s,positions:h}},we.deserialize=function(r){var i=new we;return i.ids=r.ids,i.positions=r.positions,i.indexed=!0,i};var Ae=Math.pow(2,53)-1;function Ne(r){var i=+r;return!isNaN(i)&&i<=Ae?i:ae(String(r))}function De(r,i,s){var h=r[i];r[i]=r[s],r[s]=h}gt("FeaturePositionMap",we);var Fe=function(r,i){this.gl=r.gl,this.location=i},Ke=function(r){function i(s,h){r.call(this,s,h),this.current=0}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.set=function(s){this.current!==s&&(this.current=s,this.gl.uniform1i(this.location,s))},i}(Fe),et=function(r){function i(s,h){r.call(this,s,h),this.current=0}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.set=function(s){this.current!==s&&(this.current=s,this.gl.uniform1f(this.location,s))},i}(Fe),Qe=function(r){function i(s,h){r.call(this,s,h),this.current=[0,0]}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.set=function(s){s[0]===this.current[0]&&s[1]===this.current[1]||(this.current=s,this.gl.uniform2f(this.location,s[0],s[1]))},i}(Fe),dt=function(r){function i(s,h){r.call(this,s,h),this.current=[0,0,0]}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.set=function(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]||(this.current=s,this.gl.uniform3f(this.location,s[0],s[1],s[2]))},i}(Fe),kt=function(r){function i(s,h){r.call(this,s,h),this.current=[0,0,0,0]}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.set=function(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]&&s[3]===this.current[3]||(this.current=s,this.gl.uniform4f(this.location,s[0],s[1],s[2],s[3]))},i}(Fe),Mt=function(r){function i(s,h){r.call(this,s,h),this.current=Pr.transparent}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.set=function(s){s.r===this.current.r&&s.g===this.current.g&&s.b===this.current.b&&s.a===this.current.a||(this.current=s,this.gl.uniform4f(this.location,s.r,s.g,s.b,s.a))},i}(Fe),At=new Float32Array(16),xr=function(r){function i(s,h){r.call(this,s,h),this.current=At}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.set=function(s){if(s[12]!==this.current[12]||s[0]!==this.current[0])return this.current=s,void this.gl.uniformMatrix4fv(this.location,!1,s);for(var h=1;h<16;h++)if(s[h]!==this.current[h]){this.current=s,this.gl.uniformMatrix4fv(this.location,!1,s);break}},i}(Fe);function mt(r){return[J(255*r.r,255*r.g),J(255*r.b,255*r.a)]}var Gt=function(r,i,s){this.value=r,this.uniformNames=i.map(function(h){return"u_"+h}),this.type=s};Gt.prototype.setUniform=function(r,i,s){r.set(s.constantOr(this.value))},Gt.prototype.getBinding=function(r,i,s){return this.type==="color"?new Mt(r,i):new et(r,i)};var rr=function(r,i){this.uniformNames=i.map(function(s){return"u_"+s}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};rr.prototype.setConstantPatternPositions=function(r,i){this.pixelRatioFrom=i.pixelRatio,this.pixelRatioTo=r.pixelRatio,this.patternFrom=i.tlbr,this.patternTo=r.tlbr},rr.prototype.setUniform=function(r,i,s,h){var m=h==="u_pattern_to"?this.patternTo:h==="u_pattern_from"?this.patternFrom:h==="u_pixel_ratio_to"?this.pixelRatioTo:h==="u_pixel_ratio_from"?this.pixelRatioFrom:null;m&&r.set(m)},rr.prototype.getBinding=function(r,i,s){return s.substr(0,9)==="u_pattern"?new kt(r,i):new et(r,i)};var Wt=function(r,i,s,h){this.expression=r,this.type=s,this.maxValue=0,this.paintVertexAttributes=i.map(function(m){return{name:"a_"+m,type:"Float32",components:s==="color"?2:1,offset:0}}),this.paintVertexArray=new h};Wt.prototype.populatePaintArray=function(r,i,s,h,m){var y=this.paintVertexArray.length,_=this.expression.evaluate(new cr(0),i,{},h,[],m);this.paintVertexArray.resize(r),this._setPaintValue(y,r,_)},Wt.prototype.updatePaintArray=function(r,i,s,h){var m=this.expression.evaluate({zoom:0},s,h);this._setPaintValue(r,i,m)},Wt.prototype._setPaintValue=function(r,i,s){if(this.type==="color")for(var h=mt(s),m=r;m<i;m++)this.paintVertexArray.emplace(m,h[0],h[1]);else{for(var y=r;y<i;y++)this.paintVertexArray.emplace(y,s);this.maxValue=Math.max(this.maxValue,Math.abs(s))}},Wt.prototype.upload=function(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Wt.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Vt=function(r,i,s,h,m,y){this.expression=r,this.uniformNames=i.map(function(_){return"u_"+_+"_t"}),this.type=s,this.useIntegerZoom=h,this.zoom=m,this.maxValue=0,this.paintVertexAttributes=i.map(function(_){return{name:"a_"+_,type:"Float32",components:s==="color"?4:2,offset:0}}),this.paintVertexArray=new y};Vt.prototype.populatePaintArray=function(r,i,s,h,m){var y=this.expression.evaluate(new cr(this.zoom),i,{},h,[],m),_=this.expression.evaluate(new cr(this.zoom+1),i,{},h,[],m),S=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValue(S,r,y,_)},Vt.prototype.updatePaintArray=function(r,i,s,h){var m=this.expression.evaluate({zoom:this.zoom},s,h),y=this.expression.evaluate({zoom:this.zoom+1},s,h);this._setPaintValue(r,i,m,y)},Vt.prototype._setPaintValue=function(r,i,s,h){if(this.type==="color")for(var m=mt(s),y=mt(h),_=r;_<i;_++)this.paintVertexArray.emplace(_,m[0],m[1],y[0],y[1]);else{for(var S=r;S<i;S++)this.paintVertexArray.emplace(S,s,h);this.maxValue=Math.max(this.maxValue,Math.abs(s),Math.abs(h))}},Vt.prototype.upload=function(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Vt.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Vt.prototype.setUniform=function(r,i){var s=this.useIntegerZoom?Math.floor(i.zoom):i.zoom,h=D(this.expression.interpolationFactor(s,this.zoom,this.zoom+1),0,1);r.set(h)},Vt.prototype.getBinding=function(r,i,s){return new et(r,i)};var Jt=function(r,i,s,h,m,y){this.expression=r,this.type=i,this.useIntegerZoom=s,this.zoom=h,this.layerId=y,this.zoomInPaintVertexArray=new m,this.zoomOutPaintVertexArray=new m};Jt.prototype.populatePaintArray=function(r,i,s){var h=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(r),this.zoomOutPaintVertexArray.resize(r),this._setPaintValues(h,r,i.patterns&&i.patterns[this.layerId],s)},Jt.prototype.updatePaintArray=function(r,i,s,h,m){this._setPaintValues(r,i,s.patterns&&s.patterns[this.layerId],m)},Jt.prototype._setPaintValues=function(r,i,s,h){if(h&&s){var m=h[s.min],y=h[s.mid],_=h[s.max];if(m&&y&&_)for(var S=r;S<i;S++)this.zoomInPaintVertexArray.emplace(S,y.tl[0],y.tl[1],y.br[0],y.br[1],m.tl[0],m.tl[1],m.br[0],m.br[1],y.pixelRatio,m.pixelRatio),this.zoomOutPaintVertexArray.emplace(S,y.tl[0],y.tl[1],y.br[0],y.br[1],_.tl[0],_.tl[1],_.br[0],_.br[1],y.pixelRatio,_.pixelRatio)}},Jt.prototype.upload=function(r){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=r.createVertexBuffer(this.zoomInPaintVertexArray,ce.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=r.createVertexBuffer(this.zoomOutPaintVertexArray,ce.members,this.expression.isStateDependent))},Jt.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Ut=function(r,i,s){this.binders={},this._buffers=[];var h=[];for(var m in r.paint._values)if(s(m)){var y=r.paint.get(m);if(y instanceof _i&&_s(y.property.specification)){var _=$n(m,r.type),S=y.value,k=y.property.specification.type,A=y.property.useIntegerZoom,R=y.property.specification["property-type"],O=R==="cross-faded"||R==="cross-faded-data-driven";if(S.kind==="constant")this.binders[m]=O?new rr(S.value,_):new Gt(S.value,_,k),h.push("/u_"+m);else if(S.kind==="source"||O){var $=gn(m,k,"source");this.binders[m]=O?new Jt(S,k,A,i,$,r.id):new Wt(S,_,k,$),h.push("/a_"+m)}else{var H=gn(m,k,"composite");this.binders[m]=new Vt(S,_,k,A,i,H),h.push("/z_"+m)}}}this.cacheKey=h.sort().join("")};Ut.prototype.getMaxValue=function(r){var i=this.binders[r];return i instanceof Wt||i instanceof Vt?i.maxValue:0},Ut.prototype.populatePaintArrays=function(r,i,s,h,m){for(var y in this.binders){var _=this.binders[y];(_ instanceof Wt||_ instanceof Vt||_ instanceof Jt)&&_.populatePaintArray(r,i,s,h,m)}},Ut.prototype.setConstantPatternPositions=function(r,i){for(var s in this.binders){var h=this.binders[s];h instanceof rr&&h.setConstantPatternPositions(r,i)}},Ut.prototype.updatePaintArrays=function(r,i,s,h,m){var y=!1;for(var _ in r)for(var S=0,k=i.getPositions(_);S<k.length;S+=1){var A=k[S],R=s.feature(A.index);for(var O in this.binders){var $=this.binders[O];if(($ instanceof Wt||$ instanceof Vt||$ instanceof Jt)&&$.expression.isStateDependent===!0){var H=h.paint.get(O);$.expression=H.value,$.updatePaintArray(A.start,A.end,R,r[_],m),y=!0}}}return y},Ut.prototype.defines=function(){var r=[];for(var i in this.binders){var s=this.binders[i];(s instanceof Gt||s instanceof rr)&&r.push.apply(r,s.uniformNames.map(function(h){return"#define HAS_UNIFORM_"+h}))}return r},Ut.prototype.getBinderAttributes=function(){var r=[];for(var i in this.binders){var s=this.binders[i];if(s instanceof Wt||s instanceof Vt)for(var h=0;h<s.paintVertexAttributes.length;h++)r.push(s.paintVertexAttributes[h].name);else if(s instanceof Jt)for(var m=0;m<ce.members.length;m++)r.push(ce.members[m].name)}return r},Ut.prototype.getBinderUniforms=function(){var r=[];for(var i in this.binders){var s=this.binders[i];if(s instanceof Gt||s instanceof rr||s instanceof Vt)for(var h=0,m=s.uniformNames;h<m.length;h+=1)r.push(m[h])}return r},Ut.prototype.getPaintVertexBuffers=function(){return this._buffers},Ut.prototype.getUniforms=function(r,i){var s=[];for(var h in this.binders){var m=this.binders[h];if(m instanceof Gt||m instanceof rr||m instanceof Vt)for(var y=0,_=m.uniformNames;y<_.length;y+=1){var S=_[y];if(i[S]){var k=m.getBinding(r,i[S],S);s.push({name:S,property:h,binding:k})}}}return s},Ut.prototype.setUniforms=function(r,i,s,h){for(var m=0,y=i;m<y.length;m+=1){var _=y[m],S=_.name,k=_.property;this.binders[k].setUniform(_.binding,h,s.get(k),S)}},Ut.prototype.updatePaintBuffers=function(r){for(var i in this._buffers=[],this.binders){var s=this.binders[i];if(r&&s instanceof Jt){var h=r.fromScale===2?s.zoomInPaintVertexBuffer:s.zoomOutPaintVertexBuffer;h&&this._buffers.push(h)}else(s instanceof Wt||s instanceof Vt)&&s.paintVertexBuffer&&this._buffers.push(s.paintVertexBuffer)}},Ut.prototype.upload=function(r){for(var i in this.binders){var s=this.binders[i];(s instanceof Wt||s instanceof Vt||s instanceof Jt)&&s.upload(r)}this.updatePaintBuffers()},Ut.prototype.destroy=function(){for(var r in this.binders){var i=this.binders[r];(i instanceof Wt||i instanceof Vt||i instanceof Jt)&&i.destroy()}};var Nt=function(r,i,s){s===void 0&&(s=function(){return!0}),this.programConfigurations={};for(var h=0,m=r;h<m.length;h+=1){var y=m[h];this.programConfigurations[y.id]=new Ut(y,i,s)}this.needsUpload=!1,this._featureMap=new we,this._bufferOffset=0};function $n(r,i){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[r]||[r.replace(i+"-","").replace(/-/g,"_")]}function gn(r,i,s){var h={color:{source:nl,composite:pc},number:{source:Na,composite:nl}},m=function(y){return{"line-pattern":{source:Ko,composite:Ko},"fill-pattern":{source:Ko,composite:Ko},"fill-extrusion-pattern":{source:Ko,composite:Ko}}[y]}(r);return m&&m[s]||h[i][s]}Nt.prototype.populatePaintArrays=function(r,i,s,h,m,y){for(var _ in this.programConfigurations)this.programConfigurations[_].populatePaintArrays(r,i,h,m,y);i.id!==void 0&&this._featureMap.add(i.id,s,this._bufferOffset,r),this._bufferOffset=r,this.needsUpload=!0},Nt.prototype.updatePaintArrays=function(r,i,s,h){for(var m=0,y=s;m<y.length;m+=1){var _=y[m];this.needsUpload=this.programConfigurations[_.id].updatePaintArrays(r,this._featureMap,i,_,h)||this.needsUpload}},Nt.prototype.get=function(r){return this.programConfigurations[r]},Nt.prototype.upload=function(r){if(this.needsUpload){for(var i in this.programConfigurations)this.programConfigurations[i].upload(r);this.needsUpload=!1}},Nt.prototype.destroy=function(){for(var r in this.programConfigurations)this.programConfigurations[r].destroy()},gt("ConstantBinder",Gt),gt("CrossFadedConstantBinder",rr),gt("SourceExpressionBinder",Wt),gt("CrossFadedCompositeBinder",Jt),gt("CompositeExpressionBinder",Vt),gt("ProgramConfiguration",Ut,{omit:["_buffers"]}),gt("ProgramConfigurationSet",Nt);var hi=Math.pow(2,14)-1,Qn=-hi-1;function fn(r){for(var i=8192/r.extent,s=r.loadGeometry(),h=0;h<s.length;h++)for(var m=s[h],y=0;y<m.length;y++){var _=m[y],S=Math.round(_.x*i),k=Math.round(_.y*i);_.x=D(S,Qn,hi),_.y=D(k,Qn,hi),(S<_.x||S>_.x+1||k<_.y||k>_.y+1)&&he("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return s}function Cn(r,i){return{type:r.type,id:r.id,properties:r.properties,geometry:i?fn(r):[]}}function Hi(r,i,s,h,m){r.emplaceBack(2*i+(h+1)/2,2*s+(m+1)/2)}var bi=function(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(function(i){return i.id}),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new Es,this.indexArray=new Oa,this.segments=new X,this.programConfigurations=new Nt(r.layers,r.zoom),this.stateDependentLayerIds=this.layers.filter(function(i){return i.isStateDependent()}).map(function(i){return i.id})};function Fa(r,i){for(var s=0;s<r.length;s++)if(Xo(i,r[s]))return!0;for(var h=0;h<i.length;h++)if(Xo(r,i[h]))return!0;return!!su(r,i)}function Ai(r,i,s){return!!Xo(r,i)||!!ja(i,r,s)}function Oo(r,i){if(r.length===1)return lu(i,r[0]);for(var s=0;s<i.length;s++)for(var h=i[s],m=0;m<h.length;m++)if(Xo(r,h[m]))return!0;for(var y=0;y<r.length;y++)if(lu(i,r[y]))return!0;for(var _=0;_<i.length;_++)if(su(r,i[_]))return!0;return!1}function yo(r,i,s){if(r.length>1){if(su(r,i))return!0;for(var h=0;h<i.length;h++)if(ja(i[h],r,s))return!0}for(var m=0;m<r.length;m++)if(ja(r[m],i,s))return!0;return!1}function su(r,i){if(r.length===0||i.length===0)return!1;for(var s=0;s<r.length-1;s++)for(var h=r[s],m=r[s+1],y=0;y<i.length-1;y++)if(al(h,m,i[y],i[y+1]))return!0;return!1}function al(r,i,s,h){return Oe(r,s,h)!==Oe(i,s,h)&&Oe(r,i,s)!==Oe(r,i,h)}function ja(r,i,s){var h=s*s;if(i.length===1)return r.distSqr(i[0])<h;for(var m=1;m<i.length;m++)if(sl(r,i[m-1],i[m])<h)return!0;return!1}function sl(r,i,s){var h=i.distSqr(s);if(h===0)return r.distSqr(i);var m=((r.x-i.x)*(s.x-i.x)+(r.y-i.y)*(s.y-i.y))/h;return r.distSqr(m<0?i:m>1?s:s.sub(i)._mult(m)._add(i))}function lu(r,i){for(var s,h,m,y=!1,_=0;_<r.length;_++)for(var S=0,k=(s=r[_]).length-1;S<s.length;k=S++)(h=s[S]).y>i.y!=(m=s[k]).y>i.y&&i.x<(m.x-h.x)*(i.y-h.y)/(m.y-h.y)+h.x&&(y=!y);return y}function Xo(r,i){for(var s=!1,h=0,m=r.length-1;h<r.length;m=h++){var y=r[h],_=r[m];y.y>i.y!=_.y>i.y&&i.x<(_.x-y.x)*(i.y-y.y)/(_.y-y.y)+y.x&&(s=!s)}return s}function uu(r,i,s){var h=s[0],m=s[2];if(r.x<h.x&&i.x<h.x||r.x>m.x&&i.x>m.x||r.y<h.y&&i.y<h.y||r.y>m.y&&i.y>m.y)return!1;var y=Oe(r,i,s[0]);return y!==Oe(r,i,s[1])||y!==Oe(r,i,s[2])||y!==Oe(r,i,s[3])}function Yo(r,i,s){var h=i.paint.get(r).value;return h.kind==="constant"?h.value:s.programConfigurations.get(i.id).getMaxValue(r)}function Vn(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function da(r,i,s,h,m){if(!i[0]&&!i[1])return r;var y=T.convert(i)._mult(m);s==="viewport"&&y._rotate(-h);for(var _=[],S=0;S<r.length;S++)_.push(r[S].sub(y));return _}bi.prototype.populate=function(r,i,s){var h=this.layers[0],m=[],y=null;h.type==="circle"&&(y=h.layout.get("circle-sort-key"));for(var _=0,S=r;_<S.length;_+=1){var k=S[_],A=k.feature,R=k.id,O=k.index,$=k.sourceLayerIndex,H=this.layers[0]._featureFilter.needGeometry,se=Cn(A,H);if(this.layers[0]._featureFilter.filter(new cr(this.zoom),se,s)){var le=y?y.evaluate(se,{},s):void 0,xe={id:R,properties:A.properties,type:A.type,sourceLayerIndex:$,index:O,geometry:H?se.geometry:fn(A),patterns:{},sortKey:le};m.push(xe)}}y&&m.sort(function(rt,St){return rt.sortKey-St.sortKey});for(var de=0,Ie=m;de<Ie.length;de+=1){var Me=Ie[de],ze=Me.geometry,Be=Me.index,We=Me.sourceLayerIndex,Je=r[Be].feature;this.addFeature(Me,ze,Be,s),i.featureIndex.insert(Je,ze,Be,We,this.index)}},bi.prototype.update=function(r,i,s){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,i,this.stateDependentLayers,s)},bi.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},bi.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},bi.prototype.upload=function(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,K),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0},bi.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},bi.prototype.addFeature=function(r,i,s,h){for(var m=0,y=i;m<y.length;m+=1)for(var _=0,S=y[m];_<S.length;_+=1){var k=S[_],A=k.x,R=k.y;if(!(A<0||A>=8192||R<0||R>=8192)){var O=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,r.sortKey),$=O.vertexLength;Hi(this.layoutVertexArray,A,R,-1,-1),Hi(this.layoutVertexArray,A,R,1,-1),Hi(this.layoutVertexArray,A,R,1,1),Hi(this.layoutVertexArray,A,R,-1,1),this.indexArray.emplaceBack($,$+1,$+2),this.indexArray.emplaceBack($,$+3,$+2),O.vertexLength+=4,O.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,s,{},h)},gt("CircleBucket",bi,{omit:["layers"]});var Ua=new ui({"circle-sort-key":new _t(Z.layout_circle["circle-sort-key"])}),ks={paint:new ui({"circle-radius":new _t(Z.paint_circle["circle-radius"]),"circle-color":new _t(Z.paint_circle["circle-color"]),"circle-blur":new _t(Z.paint_circle["circle-blur"]),"circle-opacity":new _t(Z.paint_circle["circle-opacity"]),"circle-translate":new Ct(Z.paint_circle["circle-translate"]),"circle-translate-anchor":new Ct(Z.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ct(Z.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ct(Z.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new _t(Z.paint_circle["circle-stroke-width"]),"circle-stroke-color":new _t(Z.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new _t(Z.paint_circle["circle-stroke-opacity"])}),layout:Ua},Ar=typeof Float32Array<"u"?Float32Array:Array;function io(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function Mi(r,i,s){var h=i[0],m=i[1],y=i[2],_=i[3],S=i[4],k=i[5],A=i[6],R=i[7],O=i[8],$=i[9],H=i[10],se=i[11],le=i[12],xe=i[13],de=i[14],Ie=i[15],Me=s[0],ze=s[1],Be=s[2],We=s[3];return r[0]=Me*h+ze*S+Be*O+We*le,r[1]=Me*m+ze*k+Be*$+We*xe,r[2]=Me*y+ze*A+Be*H+We*de,r[3]=Me*_+ze*R+Be*se+We*Ie,r[4]=(Me=s[4])*h+(ze=s[5])*S+(Be=s[6])*O+(We=s[7])*le,r[5]=Me*m+ze*k+Be*$+We*xe,r[6]=Me*y+ze*A+Be*H+We*de,r[7]=Me*_+ze*R+Be*se+We*Ie,r[8]=(Me=s[8])*h+(ze=s[9])*S+(Be=s[10])*O+(We=s[11])*le,r[9]=Me*m+ze*k+Be*$+We*xe,r[10]=Me*y+ze*A+Be*H+We*de,r[11]=Me*_+ze*R+Be*se+We*Ie,r[12]=(Me=s[12])*h+(ze=s[13])*S+(Be=s[14])*O+(We=s[15])*le,r[13]=Me*m+ze*k+Be*$+We*xe,r[14]=Me*y+ze*A+Be*H+We*de,r[15]=Me*_+ze*R+Be*se+We*Ie,r}Math.hypot||(Math.hypot=function(){for(var r=arguments,i=0,s=arguments.length;s--;)i+=r[s]*r[s];return Math.sqrt(i)});var Ts,Wv=Mi;function hc(r,i,s){var h=i[0],m=i[1],y=i[2],_=i[3];return r[0]=s[0]*h+s[4]*m+s[8]*y+s[12]*_,r[1]=s[1]*h+s[5]*m+s[9]*y+s[13]*_,r[2]=s[2]*h+s[6]*m+s[10]*y+s[14]*_,r[3]=s[3]*h+s[7]*m+s[11]*y+s[15]*_,r}Ts=new Ar(3),Ar!=Float32Array&&(Ts[0]=0,Ts[1]=0,Ts[2]=0),function(){var r=new Ar(4);Ar!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0,r[3]=0)}();var Gv=(function(){var r=new Ar(2);Ar!=Float32Array&&(r[0]=0,r[1]=0)}(),function(r){function i(s){r.call(this,s,ks)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.createBucket=function(s){return new bi(s)},i.prototype.queryRadius=function(s){var h=s;return Yo("circle-radius",this,h)+Yo("circle-stroke-width",this,h)+Vn(this.paint.get("circle-translate"))},i.prototype.queryIntersectsFeature=function(s,h,m,y,_,S,k,A){for(var R=da(s,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),S.angle,k),O=this.paint.get("circle-radius").evaluate(h,m)+this.paint.get("circle-stroke-width").evaluate(h,m),$=this.paint.get("circle-pitch-alignment")==="map",H=$?R:function(Je,rt){return Je.map(function(St){return cu(St,rt)})}(R,A),se=$?O*k:O,le=0,xe=y;le<xe.length;le+=1)for(var de=0,Ie=xe[le];de<Ie.length;de+=1){var Me=Ie[de],ze=$?Me:cu(Me,A),Be=se,We=hc([],[Me.x,Me.y,0,1],A);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Be*=We[3]/S.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Be*=S.cameraToCenterDistance/We[3]),Ai(H,ze,Be))return!0}return!1},i}(Zo));function cu(r,i){var s=hc([],[r.x,r.y,0,1],i);return new T(s[0]/s[3],s[1]/s[3])}var Qf=function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i}(bi);function ll(r,i,s,h){var m=i.width,y=i.height;if(h){if(h instanceof Uint8ClampedArray)h=new Uint8Array(h.buffer);else if(h.length!==m*y*s)throw new RangeError("mismatched image size")}else h=new Uint8Array(m*y*s);return r.width=m,r.height=y,r.data=h,r}function dc(r,i,s){var h=i.width,m=i.height;if(h!==r.width||m!==r.height){var y=ll({},{width:h,height:m},s);Hv(r,y,{x:0,y:0},{x:0,y:0},{width:Math.min(r.width,h),height:Math.min(r.height,m)},s),r.width=h,r.height=m,r.data=y.data}}function Hv(r,i,s,h,m,y){if(m.width===0||m.height===0)return i;if(m.width>r.width||m.height>r.height||s.x>r.width-m.width||s.y>r.height-m.height)throw new RangeError("out of range source coordinates for image copy");if(m.width>i.width||m.height>i.height||h.x>i.width-m.width||h.y>i.height-m.height)throw new RangeError("out of range destination coordinates for image copy");for(var _=r.data,S=i.data,k=0;k<m.height;k++)for(var A=((s.y+k)*r.width+s.x)*y,R=((h.y+k)*i.width+h.x)*y,O=0;O<m.width*y;O++)S[R+O]=_[A+O];return i}gt("HeatmapBucket",Qf,{omit:["layers"]});var pu=function(r,i){ll(this,r,1,i)};pu.prototype.resize=function(r){dc(this,r,1)},pu.prototype.clone=function(){return new pu({width:this.width,height:this.height},new Uint8Array(this.data))},pu.copy=function(r,i,s,h,m){Hv(r,i,s,h,m,1)};var Zi=function(r,i){ll(this,r,4,i)};Zi.prototype.resize=function(r){dc(this,r,4)},Zi.prototype.replace=function(r,i){i?this.data.set(r):this.data=r instanceof Uint8ClampedArray?new Uint8Array(r.buffer):r},Zi.prototype.clone=function(){return new Zi({width:this.width,height:this.height},new Uint8Array(this.data))},Zi.copy=function(r,i,s,h,m){Hv(r,i,s,h,m,4)},gt("AlphaImage",pu),gt("RGBAImage",Zi);var MA={paint:new ui({"heatmap-radius":new _t(Z.paint_heatmap["heatmap-radius"]),"heatmap-weight":new _t(Z.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ct(Z.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Do(Z.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ct(Z.paint_heatmap["heatmap-opacity"])})};function Fb(r){var i={},s=r.resolution||256,h=r.clips?r.clips.length:1,m=r.image||new Zi({width:s,height:h}),y=function(se,le,xe){i[r.evaluationKey]=xe;var de=r.expression.evaluate(i);m.data[se+le+0]=Math.floor(255*de.r/de.a),m.data[se+le+1]=Math.floor(255*de.g/de.a),m.data[se+le+2]=Math.floor(255*de.b/de.a),m.data[se+le+3]=Math.floor(255*de.a)};if(r.clips)for(var _=0,S=0;_<h;++_,S+=4*s)for(var k=0,A=0;k<s;k++,A+=4){var R=k/(s-1),O=r.clips[_];y(S,A,O.start*(1-R)+O.end*R)}else for(var $=0,H=0;$<s;$++,H+=4)y(0,H,$/(s-1));return m}var RA=function(r){function i(s){r.call(this,s,MA),this._updateColorRamp()}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.createBucket=function(s){return new Qf(s)},i.prototype._handleSpecialPaintPropertyUpdate=function(s){s==="heatmap-color"&&this._updateColorRamp()},i.prototype._updateColorRamp=function(){this.colorRamp=Fb({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},i.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},i.prototype.queryRadius=function(){return 0},i.prototype.queryIntersectsFeature=function(){return!1},i.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},i}(Zo),LA={paint:new ui({"hillshade-illumination-direction":new Ct(Z.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ct(Z.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ct(Z.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ct(Z.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ct(Z.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ct(Z.paint_hillshade["hillshade-accent-color"])})},zA=function(r){function i(s){r.call(this,s,LA)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},i}(Zo),DA=Jn([{name:"a_pos",components:2,type:"Int16"}],4).members,Zv=em,OA=em;function em(r,i,s){s=s||2;var h,m,y,_,S,k,A,R=i&&i.length,O=R?i[0]*s:r.length,$=jb(r,0,O,s,!0),H=[];if(!$||$.next===$.prev)return H;if(R&&($=function(le,xe,de,Ie){var Me,ze,Be,We=[];for(Me=0,ze=xe.length;Me<ze;Me++)(Be=jb(le,xe[Me]*Ie,Me<ze-1?xe[Me+1]*Ie:le.length,Ie,!1))===Be.next&&(Be.steiner=!0),We.push(qA(Be));for(We.sort(UA),Me=0;Me<We.length;Me++)$A(We[Me],de),de=ul(de,de.next);return de}(r,i,$,s)),r.length>80*s){h=y=r[0],m=_=r[1];for(var se=s;se<O;se+=s)(S=r[se])<h&&(h=S),(k=r[se+1])<m&&(m=k),S>y&&(y=S),k>_&&(_=k);A=(A=Math.max(y-h,_-m))!==0?1/A:0}return xh($,H,s,h,m,A),H}function jb(r,i,s,h,m){var y,_;if(m===Yv(r,i,s,h)>0)for(y=i;y<s;y+=h)_=Vb(y,r[y],r[y+1],_);else for(y=s-h;y>=i;y-=h)_=Vb(y,r[y],r[y+1],_);return _&&tm(_,_.next)&&(wh(_),_=_.next),_}function ul(r,i){if(!r)return r;i||(i=r);var s,h=r;do if(s=!1,h.steiner||!tm(h,h.next)&&Nn(h.prev,h,h.next)!==0)h=h.next;else{if(wh(h),(h=i=h.prev)===h.next)break;s=!0}while(s||h!==i);return i}function xh(r,i,s,h,m,y,_){if(r){!_&&y&&function(R,O,$,H){var se=R;do se.z===null&&(se.z=Kv(se.x,se.y,O,$,H)),se.prevZ=se.prev,se.nextZ=se.next,se=se.next;while(se!==R);se.prevZ.nextZ=null,se.prevZ=null,function(le){var xe,de,Ie,Me,ze,Be,We,Je,rt=1;do{for(de=le,le=null,ze=null,Be=0;de;){for(Be++,Ie=de,We=0,xe=0;xe<rt&&(We++,Ie=Ie.nextZ);xe++);for(Je=rt;We>0||Je>0&&Ie;)We!==0&&(Je===0||!Ie||de.z<=Ie.z)?(Me=de,de=de.nextZ,We--):(Me=Ie,Ie=Ie.nextZ,Je--),ze?ze.nextZ=Me:le=Me,Me.prevZ=ze,ze=Me;de=Ie}ze.nextZ=null,rt*=2}while(Be>1)}(se)}(r,h,m,y);for(var S,k,A=r;r.prev!==r.next;)if(S=r.prev,k=r.next,y?NA(r,h,m,y):BA(r))i.push(S.i/s),i.push(r.i/s),i.push(k.i/s),wh(r),r=k.next,A=k.next;else if((r=k)===A){_?_===1?xh(r=FA(ul(r),i,s),i,s,h,m,y,2):_===2&&jA(r,i,s,h,m,y):xh(ul(r),i,s,h,m,y,1);break}}}function BA(r){var i=r.prev,s=r,h=r.next;if(Nn(i,s,h)>=0)return!1;for(var m=r.next.next;m!==r.prev;){if(fc(i.x,i.y,s.x,s.y,h.x,h.y,m.x,m.y)&&Nn(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function NA(r,i,s,h){var m=r.prev,y=r,_=r.next;if(Nn(m,y,_)>=0)return!1;for(var S=m.x>y.x?m.x>_.x?m.x:_.x:y.x>_.x?y.x:_.x,k=m.y>y.y?m.y>_.y?m.y:_.y:y.y>_.y?y.y:_.y,A=Kv(m.x<y.x?m.x<_.x?m.x:_.x:y.x<_.x?y.x:_.x,m.y<y.y?m.y<_.y?m.y:_.y:y.y<_.y?y.y:_.y,i,s,h),R=Kv(S,k,i,s,h),O=r.prevZ,$=r.nextZ;O&&O.z>=A&&$&&$.z<=R;){if(O!==r.prev&&O!==r.next&&fc(m.x,m.y,y.x,y.y,_.x,_.y,O.x,O.y)&&Nn(O.prev,O,O.next)>=0||(O=O.prevZ,$!==r.prev&&$!==r.next&&fc(m.x,m.y,y.x,y.y,_.x,_.y,$.x,$.y)&&Nn($.prev,$,$.next)>=0))return!1;$=$.nextZ}for(;O&&O.z>=A;){if(O!==r.prev&&O!==r.next&&fc(m.x,m.y,y.x,y.y,_.x,_.y,O.x,O.y)&&Nn(O.prev,O,O.next)>=0)return!1;O=O.prevZ}for(;$&&$.z<=R;){if($!==r.prev&&$!==r.next&&fc(m.x,m.y,y.x,y.y,_.x,_.y,$.x,$.y)&&Nn($.prev,$,$.next)>=0)return!1;$=$.nextZ}return!0}function FA(r,i,s){var h=r;do{var m=h.prev,y=h.next.next;!tm(m,y)&&Ub(m,h,h.next,y)&&bh(m,y)&&bh(y,m)&&(i.push(m.i/s),i.push(h.i/s),i.push(y.i/s),wh(h),wh(h.next),h=r=y),h=h.next}while(h!==r);return ul(h)}function jA(r,i,s,h,m,y){var _=r;do{for(var S=_.next.next;S!==_.prev;){if(_.i!==S.i&&WA(_,S)){var k=$b(_,S);return _=ul(_,_.next),k=ul(k,k.next),xh(_,i,s,h,m,y),void xh(k,i,s,h,m,y)}S=S.next}_=_.next}while(_!==r)}function UA(r,i){return r.x-i.x}function $A(r,i){if(i=function(h,m){var y,_=m,S=h.x,k=h.y,A=-1/0;do{if(k<=_.y&&k>=_.next.y&&_.next.y!==_.y){var R=_.x+(k-_.y)*(_.next.x-_.x)/(_.next.y-_.y);if(R<=S&&R>A){if(A=R,R===S){if(k===_.y)return _;if(k===_.next.y)return _.next}y=_.x<_.next.x?_:_.next}}_=_.next}while(_!==m);if(!y)return null;if(S===A)return y;var O,$=y,H=y.x,se=y.y,le=1/0;_=y;do S>=_.x&&_.x>=H&&S!==_.x&&fc(k<se?S:A,k,H,se,k<se?A:S,k,_.x,_.y)&&(O=Math.abs(k-_.y)/(S-_.x),bh(_,h)&&(O<le||O===le&&(_.x>y.x||_.x===y.x&&VA(y,_)))&&(y=_,le=O)),_=_.next;while(_!==$);return y}(r,i)){var s=$b(i,r);ul(i,i.next),ul(s,s.next)}}function VA(r,i){return Nn(r.prev,r,i.prev)<0&&Nn(i.next,r,r.next)<0}function Kv(r,i,s,h,m){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=32767*(r-s)*m)|r<<8))|r<<4))|r<<2))|r<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=32767*(i-h)*m)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function qA(r){var i=r,s=r;do(i.x<s.x||i.x===s.x&&i.y<s.y)&&(s=i),i=i.next;while(i!==r);return s}function fc(r,i,s,h,m,y,_,S){return(m-_)*(i-S)-(r-_)*(y-S)>=0&&(r-_)*(h-S)-(s-_)*(i-S)>=0&&(s-_)*(y-S)-(m-_)*(h-S)>=0}function WA(r,i){return r.next.i!==i.i&&r.prev.i!==i.i&&!function(s,h){var m=s;do{if(m.i!==s.i&&m.next.i!==s.i&&m.i!==h.i&&m.next.i!==h.i&&Ub(m,m.next,s,h))return!0;m=m.next}while(m!==s);return!1}(r,i)&&(bh(r,i)&&bh(i,r)&&function(s,h){var m=s,y=!1,_=(s.x+h.x)/2,S=(s.y+h.y)/2;do m.y>S!=m.next.y>S&&m.next.y!==m.y&&_<(m.next.x-m.x)*(S-m.y)/(m.next.y-m.y)+m.x&&(y=!y),m=m.next;while(m!==s);return y}(r,i)&&(Nn(r.prev,r,i.prev)||Nn(r,i.prev,i))||tm(r,i)&&Nn(r.prev,r,r.next)>0&&Nn(i.prev,i,i.next)>0)}function Nn(r,i,s){return(i.y-r.y)*(s.x-i.x)-(i.x-r.x)*(s.y-i.y)}function tm(r,i){return r.x===i.x&&r.y===i.y}function Ub(r,i,s,h){var m=nm(Nn(r,i,s)),y=nm(Nn(r,i,h)),_=nm(Nn(s,h,r)),S=nm(Nn(s,h,i));return m!==y&&_!==S||!(m!==0||!rm(r,s,i))||!(y!==0||!rm(r,h,i))||!(_!==0||!rm(s,r,h))||!(S!==0||!rm(s,i,h))}function rm(r,i,s){return i.x<=Math.max(r.x,s.x)&&i.x>=Math.min(r.x,s.x)&&i.y<=Math.max(r.y,s.y)&&i.y>=Math.min(r.y,s.y)}function nm(r){return r>0?1:r<0?-1:0}function bh(r,i){return Nn(r.prev,r,r.next)<0?Nn(r,i,r.next)>=0&&Nn(r,r.prev,i)>=0:Nn(r,i,r.prev)<0||Nn(r,r.next,i)<0}function $b(r,i){var s=new Xv(r.i,r.x,r.y),h=new Xv(i.i,i.x,i.y),m=r.next,y=i.prev;return r.next=i,i.prev=r,s.next=m,m.prev=s,h.next=s,s.prev=h,y.next=h,h.prev=y,h}function Vb(r,i,s,h){var m=new Xv(r,i,s);return h?(m.next=h.next,m.prev=h,h.next.prev=m,h.next=m):(m.prev=m,m.next=m),m}function wh(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function Xv(r,i,s){this.i=r,this.x=i,this.y=s,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Yv(r,i,s,h){for(var m=0,y=i,_=s-h;y<s;y+=h)m+=(r[_]-r[y])*(r[y+1]+r[_+1]),_=y;return m}function GA(r,i,s,h,m){(function y(_,S,k,A,R){for(;A>k;){if(A-k>600){var O=A-k+1,$=S-k+1,H=Math.log(O),se=.5*Math.exp(2*H/3),le=.5*Math.sqrt(H*se*(O-se)/O)*($-O/2<0?-1:1);y(_,S,Math.max(k,Math.floor(S-$*se/O+le)),Math.min(A,Math.floor(S+(O-$)*se/O+le)),R)}var xe=_[S],de=k,Ie=A;for(Sh(_,k,S),R(_[A],xe)>0&&Sh(_,k,A);de<Ie;){for(Sh(_,de,Ie),de++,Ie--;R(_[de],xe)<0;)de++;for(;R(_[Ie],xe)>0;)Ie--}R(_[k],xe)===0?Sh(_,k,Ie):Sh(_,++Ie,A),Ie<=S&&(k=Ie+1),S<=Ie&&(A=Ie-1)}})(r,i,s||0,h||r.length-1,m||HA)}function Sh(r,i,s){var h=r[i];r[i]=r[s],r[s]=h}function HA(r,i){return r<i?-1:r>i?1:0}function Jv(r,i){var s=r.length;if(s<=1)return[r];for(var h,m,y=[],_=0;_<s;_++){var S=je(r[_]);S!==0&&(r[_].area=Math.abs(S),m===void 0&&(m=S<0),m===S<0?(h&&y.push(h),h=[r[_]]):h.push(r[_]))}if(h&&y.push(h),i>1)for(var k=0;k<y.length;k++)y[k].length<=i||(GA(y[k],i,1,y[k].length-1,ZA),y[k]=y[k].slice(0,i));return y}function ZA(r,i){return i.area-r.area}function Qv(r,i,s){for(var h=s.patternDependencies,m=!1,y=0,_=i;y<_.length;y+=1){var S=_[y].paint.get(r+"-pattern");S.isConstant()||(m=!0);var k=S.constantOr(null);k&&(m=!0,h[k.to]=!0,h[k.from]=!0)}return m}function e0(r,i,s,h,m){for(var y=m.patternDependencies,_=0,S=i;_<S.length;_+=1){var k=S[_],A=k.paint.get(r+"-pattern").value;if(A.kind!=="constant"){var R=A.evaluate({zoom:h-1},s,{},m.availableImages),O=A.evaluate({zoom:h},s,{},m.availableImages),$=A.evaluate({zoom:h+1},s,{},m.availableImages);O=O&&O.name?O.name:O,$=$&&$.name?$.name:$,y[R=R&&R.name?R.name:R]=!0,y[O]=!0,y[$]=!0,s.patterns[k.id]={min:R,mid:O,max:$}}}return s}em.deviation=function(r,i,s,h){var m=i&&i.length,y=Math.abs(Yv(r,0,m?i[0]*s:r.length,s));if(m)for(var _=0,S=i.length;_<S;_++)y-=Math.abs(Yv(r,i[_]*s,_<S-1?i[_+1]*s:r.length,s));var k=0;for(_=0;_<h.length;_+=3){var A=h[_]*s,R=h[_+1]*s,O=h[_+2]*s;k+=Math.abs((r[A]-r[O])*(r[R+1]-r[A+1])-(r[A]-r[R])*(r[O+1]-r[A+1]))}return y===0&&k===0?0:Math.abs((k-y)/y)},em.flatten=function(r){for(var i=r[0][0].length,s={vertices:[],holes:[],dimensions:i},h=0,m=0;m<r.length;m++){for(var y=0;y<r[m].length;y++)for(var _=0;_<i;_++)s.vertices.push(r[m][y][_]);m>0&&s.holes.push(h+=r[m-1].length)}return s},Zv.default=OA;var fa=function(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(function(i){return i.id}),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Es,this.indexArray=new Oa,this.indexArray2=new au,this.programConfigurations=new Nt(r.layers,r.zoom),this.segments=new X,this.segments2=new X,this.stateDependentLayerIds=this.layers.filter(function(i){return i.isStateDependent()}).map(function(i){return i.id})};fa.prototype.populate=function(r,i,s){this.hasPattern=Qv("fill",this.layers,i);for(var h=this.layers[0].layout.get("fill-sort-key"),m=[],y=0,_=r;y<_.length;y+=1){var S=_[y],k=S.feature,A=S.id,R=S.index,O=S.sourceLayerIndex,$=this.layers[0]._featureFilter.needGeometry,H=Cn(k,$);if(this.layers[0]._featureFilter.filter(new cr(this.zoom),H,s)){var se=h?h.evaluate(H,{},s,i.availableImages):void 0,le={id:A,properties:k.properties,type:k.type,sourceLayerIndex:O,index:R,geometry:$?H.geometry:fn(k),patterns:{},sortKey:se};m.push(le)}}h&&m.sort(function(Je,rt){return Je.sortKey-rt.sortKey});for(var xe=0,de=m;xe<de.length;xe+=1){var Ie=de[xe],Me=Ie.geometry,ze=Ie.index,Be=Ie.sourceLayerIndex;if(this.hasPattern){var We=e0("fill",this.layers,Ie,this.zoom,i);this.patternFeatures.push(We)}else this.addFeature(Ie,Me,ze,s,{});i.featureIndex.insert(r[ze].feature,Me,ze,Be,this.index)}},fa.prototype.update=function(r,i,s){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,i,this.stateDependentLayers,s)},fa.prototype.addFeatures=function(r,i,s){for(var h=0,m=this.patternFeatures;h<m.length;h+=1){var y=m[h];this.addFeature(y,y.geometry,y.index,i,s)}},fa.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},fa.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},fa.prototype.upload=function(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,DA),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.indexBuffer2=r.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(r),this.uploaded=!0},fa.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},fa.prototype.addFeature=function(r,i,s,h,m){for(var y=0,_=Jv(i,500);y<_.length;y+=1){for(var S=_[y],k=0,A=0,R=S;A<R.length;A+=1)k+=R[A].length;for(var O=this.segments.prepareSegment(k,this.layoutVertexArray,this.indexArray),$=O.vertexLength,H=[],se=[],le=0,xe=S;le<xe.length;le+=1){var de=xe[le];if(de.length!==0){de!==S[0]&&se.push(H.length/2);var Ie=this.segments2.prepareSegment(de.length,this.layoutVertexArray,this.indexArray2),Me=Ie.vertexLength;this.layoutVertexArray.emplaceBack(de[0].x,de[0].y),this.indexArray2.emplaceBack(Me+de.length-1,Me),H.push(de[0].x),H.push(de[0].y);for(var ze=1;ze<de.length;ze++)this.layoutVertexArray.emplaceBack(de[ze].x,de[ze].y),this.indexArray2.emplaceBack(Me+ze-1,Me+ze),H.push(de[ze].x),H.push(de[ze].y);Ie.vertexLength+=de.length,Ie.primitiveLength+=de.length}}for(var Be=Zv(H,se),We=0;We<Be.length;We+=3)this.indexArray.emplaceBack($+Be[We],$+Be[We+1],$+Be[We+2]);O.vertexLength+=k,O.primitiveLength+=Be.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,s,m,h)},gt("FillBucket",fa,{omit:["layers","patternFeatures"]});var KA=new ui({"fill-sort-key":new _t(Z.layout_fill["fill-sort-key"])}),XA={paint:new ui({"fill-antialias":new Ct(Z.paint_fill["fill-antialias"]),"fill-opacity":new _t(Z.paint_fill["fill-opacity"]),"fill-color":new _t(Z.paint_fill["fill-color"]),"fill-outline-color":new _t(Z.paint_fill["fill-outline-color"]),"fill-translate":new Ct(Z.paint_fill["fill-translate"]),"fill-translate-anchor":new Ct(Z.paint_fill["fill-translate-anchor"]),"fill-pattern":new sc(Z.paint_fill["fill-pattern"])}),layout:KA},YA=function(r){function i(s){r.call(this,s,XA)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.recalculate=function(s,h){r.prototype.recalculate.call(this,s,h);var m=this.paint._values["fill-outline-color"];m.value.kind==="constant"&&m.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},i.prototype.createBucket=function(s){return new fa(s)},i.prototype.queryRadius=function(){return Vn(this.paint.get("fill-translate"))},i.prototype.queryIntersectsFeature=function(s,h,m,y,_,S,k){return Oo(da(s,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),S.angle,k),y)},i.prototype.isTileClipped=function(){return!0},i}(Zo),JA=Jn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,qb=mc;function mc(r,i,s,h,m){this.properties={},this.extent=s,this.type=0,this._pbf=r,this._geometry=-1,this._keys=h,this._values=m,r.readFields(QA,this,i)}function QA(r,i,s){r==1?i.id=s.readVarint():r==2?function(h,m){for(var y=h.readVarint()+h.pos;h.pos<y;){var _=m._keys[h.readVarint()],S=m._values[h.readVarint()];m.properties[_]=S}}(s,i):r==3?i.type=s.readVarint():r==4&&(i._geometry=s.pos)}function eM(r){for(var i,s,h=0,m=0,y=r.length,_=y-1;m<y;_=m++)h+=((s=r[_]).x-(i=r[m]).x)*(i.y+s.y);return h}mc.types=["Unknown","Point","LineString","Polygon"],mc.prototype.loadGeometry=function(){var r=this._pbf;r.pos=this._geometry;for(var i,s=r.readVarint()+r.pos,h=1,m=0,y=0,_=0,S=[];r.pos<s;){if(m<=0){var k=r.readVarint();h=7&k,m=k>>3}if(m--,h===1||h===2)y+=r.readSVarint(),_+=r.readSVarint(),h===1&&(i&&S.push(i),i=[]),i.push(new T(y,_));else{if(h!==7)throw new Error("unknown command "+h);i&&i.push(i[0].clone())}}return i&&S.push(i),S},mc.prototype.bbox=function(){var r=this._pbf;r.pos=this._geometry;for(var i=r.readVarint()+r.pos,s=1,h=0,m=0,y=0,_=1/0,S=-1/0,k=1/0,A=-1/0;r.pos<i;){if(h<=0){var R=r.readVarint();s=7&R,h=R>>3}if(h--,s===1||s===2)(m+=r.readSVarint())<_&&(_=m),m>S&&(S=m),(y+=r.readSVarint())<k&&(k=y),y>A&&(A=y);else if(s!==7)throw new Error("unknown command "+s)}return[_,k,S,A]},mc.prototype.toGeoJSON=function(r,i,s){var h,m,y=this.extent*Math.pow(2,s),_=this.extent*r,S=this.extent*i,k=this.loadGeometry(),A=mc.types[this.type];function R(H){for(var se=0;se<H.length;se++){var le=H[se];H[se]=[360*(le.x+_)/y-180,360/Math.PI*Math.atan(Math.exp((180-360*(le.y+S)/y)*Math.PI/180))-90]}}switch(this.type){case 1:var O=[];for(h=0;h<k.length;h++)O[h]=k[h][0];R(k=O);break;case 2:for(h=0;h<k.length;h++)R(k[h]);break;case 3:for(k=function(H){var se=H.length;if(se<=1)return[H];for(var le,xe,de=[],Ie=0;Ie<se;Ie++){var Me=eM(H[Ie]);Me!==0&&(xe===void 0&&(xe=Me<0),xe===Me<0?(le&&de.push(le),le=[H[Ie]]):le.push(H[Ie]))}return le&&de.push(le),de}(k),h=0;h<k.length;h++)for(m=0;m<k[h].length;m++)R(k[h][m])}k.length===1?k=k[0]:A="Multi"+A;var $={type:"Feature",geometry:{type:A,coordinates:k},properties:this.properties};return"id"in this&&($.id=this.id),$};var Wb=Gb;function Gb(r,i){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=r,this._keys=[],this._values=[],this._features=[],r.readFields(tM,this,i),this.length=this._features.length}function tM(r,i,s){r===15?i.version=s.readVarint():r===1?i.name=s.readString():r===5?i.extent=s.readVarint():r===2?i._features.push(s.pos):r===3?i._keys.push(s.readString()):r===4&&i._values.push(function(h){for(var m=null,y=h.readVarint()+h.pos;h.pos<y;){var _=h.readVarint()>>3;m=_===1?h.readString():_===2?h.readFloat():_===3?h.readDouble():_===4?h.readVarint64():_===5?h.readVarint():_===6?h.readSVarint():_===7?h.readBoolean():null}return m}(s))}function rM(r,i,s){if(r===3){var h=new Wb(s,s.readVarint()+s.pos);h.length&&(i[h.name]=h)}}Gb.prototype.feature=function(r){if(r<0||r>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[r];var i=this._pbf.readVarint()+this._pbf.pos;return new qb(this._pbf,i,this.extent,this._keys,this._values)};var yc={VectorTile:function(r,i){this.layers=r.readFields(rM,{},i)},VectorTileFeature:qb,VectorTileLayer:Wb},nM=yc.VectorTileFeature.types,t0=Math.pow(2,13);function Eh(r,i,s,h,m,y,_,S){r.emplaceBack(i,s,2*Math.floor(h*t0)+_,m*t0*2,y*t0*2,Math.round(S))}var ma=function(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(function(i){return i.id}),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new ha,this.indexArray=new Oa,this.programConfigurations=new Nt(r.layers,r.zoom),this.segments=new X,this.stateDependentLayerIds=this.layers.filter(function(i){return i.isStateDependent()}).map(function(i){return i.id})};function iM(r,i){return r.x===i.x&&(r.x<0||r.x>8192)||r.y===i.y&&(r.y<0||r.y>8192)}ma.prototype.populate=function(r,i,s){this.features=[],this.hasPattern=Qv("fill-extrusion",this.layers,i);for(var h=0,m=r;h<m.length;h+=1){var y=m[h],_=y.feature,S=y.id,k=y.index,A=y.sourceLayerIndex,R=this.layers[0]._featureFilter.needGeometry,O=Cn(_,R);if(this.layers[0]._featureFilter.filter(new cr(this.zoom),O,s)){var $={id:S,sourceLayerIndex:A,index:k,geometry:R?O.geometry:fn(_),properties:_.properties,type:_.type,patterns:{}};this.hasPattern?this.features.push(e0("fill-extrusion",this.layers,$,this.zoom,i)):this.addFeature($,$.geometry,k,s,{}),i.featureIndex.insert(_,$.geometry,k,A,this.index,!0)}}},ma.prototype.addFeatures=function(r,i,s){for(var h=0,m=this.features;h<m.length;h+=1){var y=m[h];this.addFeature(y,y.geometry,y.index,i,s)}},ma.prototype.update=function(r,i,s){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,i,this.stateDependentLayers,s)},ma.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},ma.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ma.prototype.upload=function(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,JA),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0},ma.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ma.prototype.addFeature=function(r,i,s,h,m){for(var y=0,_=Jv(i,500);y<_.length;y+=1){for(var S=_[y],k=0,A=0,R=S;A<R.length;A+=1)k+=R[A].length;for(var O=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),$=0,H=S;$<H.length;$+=1){var se=H[$];if(se.length!==0&&!((sr=se).every(function(Xt){return Xt.x<0})||sr.every(function(Xt){return Xt.x>8192})||sr.every(function(Xt){return Xt.y<0})||sr.every(function(Xt){return Xt.y>8192})))for(var le=0,xe=0;xe<se.length;xe++){var de=se[xe];if(xe>=1){var Ie=se[xe-1];if(!iM(de,Ie)){O.vertexLength+4>X.MAX_VERTEX_ARRAY_LENGTH&&(O=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Me=de.sub(Ie)._perp()._unit(),ze=Ie.dist(de);le+ze>32768&&(le=0),Eh(this.layoutVertexArray,de.x,de.y,Me.x,Me.y,0,0,le),Eh(this.layoutVertexArray,de.x,de.y,Me.x,Me.y,0,1,le),Eh(this.layoutVertexArray,Ie.x,Ie.y,Me.x,Me.y,0,0,le+=ze),Eh(this.layoutVertexArray,Ie.x,Ie.y,Me.x,Me.y,0,1,le);var Be=O.vertexLength;this.indexArray.emplaceBack(Be,Be+2,Be+1),this.indexArray.emplaceBack(Be+1,Be+2,Be+3),O.vertexLength+=4,O.primitiveLength+=2}}}}if(O.vertexLength+k>X.MAX_VERTEX_ARRAY_LENGTH&&(O=this.segments.prepareSegment(k,this.layoutVertexArray,this.indexArray)),nM[r.type]==="Polygon"){for(var We=[],Je=[],rt=O.vertexLength,St=0,lt=S;St<lt.length;St+=1){var Tt=lt[St];if(Tt.length!==0){Tt!==S[0]&&Je.push(We.length/2);for(var pt=0;pt<Tt.length;pt++){var ir=Tt[pt];Eh(this.layoutVertexArray,ir.x,ir.y,0,0,1,1,0),We.push(ir.x),We.push(ir.y)}}}for(var jt=Zv(We,Je),xt=0;xt<jt.length;xt+=3)this.indexArray.emplaceBack(rt+jt[xt],rt+jt[xt+2],rt+jt[xt+1]);O.primitiveLength+=jt.length/3,O.vertexLength+=k}}var sr;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,s,m,h)},gt("FillExtrusionBucket",ma,{omit:["layers","features"]});var oM={paint:new ui({"fill-extrusion-opacity":new Ct(Z["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new _t(Z["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ct(Z["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ct(Z["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new sc(Z["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new _t(Z["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new _t(Z["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Ct(Z["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},aM=function(r){function i(s){r.call(this,s,oM)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.createBucket=function(s){return new ma(s)},i.prototype.queryRadius=function(){return Vn(this.paint.get("fill-extrusion-translate"))},i.prototype.is3D=function(){return!0},i.prototype.queryIntersectsFeature=function(s,h,m,y,_,S,k,A){var R=da(s,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),S.angle,k),O=this.paint.get("fill-extrusion-height").evaluate(h,m),$=this.paint.get("fill-extrusion-base").evaluate(h,m),H=function(le,xe,de,Ie){for(var Me=[],ze=0,Be=le;ze<Be.length;ze+=1){var We=Be[ze],Je=[We.x,We.y,0,1];hc(Je,Je,xe),Me.push(new T(Je[0]/Je[3],Je[1]/Je[3]))}return Me}(R,A),se=function(le,xe,de,Ie){for(var Me=[],ze=[],Be=Ie[8]*xe,We=Ie[9]*xe,Je=Ie[10]*xe,rt=Ie[11]*xe,St=Ie[8]*de,lt=Ie[9]*de,Tt=Ie[10]*de,pt=Ie[11]*de,ir=0,jt=le;ir<jt.length;ir+=1){for(var xt=[],sr=[],Xt=0,_r=jt[ir];Xt<_r.length;Xt+=1){var Pt=_r[Xt],Cr=Pt.x,un=Pt.y,vn=Ie[0]*Cr+Ie[4]*un+Ie[12],mn=Ie[1]*Cr+Ie[5]*un+Ie[13],cn=Ie[2]*Cr+Ie[6]*un+Ie[14],_n=Ie[3]*Cr+Ie[7]*un+Ie[15],qn=cn+Je,Wn=_n+rt,Si=vn+St,ti=mn+lt,Ei=cn+Tt,kn=_n+pt,ri=new T((vn+Be)/Wn,(mn+We)/Wn);ri.z=qn/Wn,xt.push(ri);var hr=new T(Si/kn,ti/kn);hr.z=Ei/kn,sr.push(hr)}Me.push(xt),ze.push(sr)}return[Me,ze]}(y,$,O,A);return function(le,xe,de){var Ie=1/0;Oo(de,xe)&&(Ie=Hb(de,xe[0]));for(var Me=0;Me<xe.length;Me++)for(var ze=xe[Me],Be=le[Me],We=0;We<ze.length-1;We++){var Je=ze[We],rt=[Je,ze[We+1],Be[We+1],Be[We],Je];Fa(de,rt)&&(Ie=Math.min(Ie,Hb(de,rt)))}return Ie!==1/0&&Ie}(se[0],se[1],H)},i}(Zo);function Ch(r,i){return r.x*i.x+r.y*i.y}function Hb(r,i){if(r.length===1){for(var s,h=0,m=i[h++];!s||m.equals(s);)if(!(s=i[h++]))return 1/0;for(;h<i.length;h++){var y=i[h],_=r[0],S=s.sub(m),k=y.sub(m),A=_.sub(m),R=Ch(S,S),O=Ch(S,k),$=Ch(k,k),H=Ch(A,S),se=Ch(A,k),le=R*$-O*O,xe=($*H-O*se)/le,de=(R*se-O*H)/le,Ie=m.z*(1-xe-de)+s.z*xe+y.z*de;if(isFinite(Ie))return Ie}return 1/0}for(var Me=1/0,ze=0,Be=i;ze<Be.length;ze+=1)Me=Math.min(Me,Be[ze].z);return Me}var sM=Jn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,lM=Jn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,uM=yc.VectorTileFeature.types,cM=Math.cos(Math.PI/180*37.5),Zb=Math.pow(2,14)/.5,Ri=function(r){var i=this;this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(function(s){return s.id}),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(s){i.gradients[s.id]={}}),this.layoutVertexArray=new Gi,this.layoutVertexArray2=new nl,this.indexArray=new Oa,this.programConfigurations=new Nt(r.layers,r.zoom),this.segments=new X,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(s){return s.isStateDependent()}).map(function(s){return s.id})};Ri.prototype.populate=function(r,i,s){this.hasPattern=Qv("line",this.layers,i);for(var h=this.layers[0].layout.get("line-sort-key"),m=[],y=0,_=r;y<_.length;y+=1){var S=_[y],k=S.feature,A=S.id,R=S.index,O=S.sourceLayerIndex,$=this.layers[0]._featureFilter.needGeometry,H=Cn(k,$);if(this.layers[0]._featureFilter.filter(new cr(this.zoom),H,s)){var se=h?h.evaluate(H,{},s):void 0,le={id:A,properties:k.properties,type:k.type,sourceLayerIndex:O,index:R,geometry:$?H.geometry:fn(k),patterns:{},sortKey:se};m.push(le)}}h&&m.sort(function(Je,rt){return Je.sortKey-rt.sortKey});for(var xe=0,de=m;xe<de.length;xe+=1){var Ie=de[xe],Me=Ie.geometry,ze=Ie.index,Be=Ie.sourceLayerIndex;if(this.hasPattern){var We=e0("line",this.layers,Ie,this.zoom,i);this.patternFeatures.push(We)}else this.addFeature(Ie,Me,ze,s,{});i.featureIndex.insert(r[ze].feature,Me,ze,Be,this.index)}},Ri.prototype.update=function(r,i,s){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,i,this.stateDependentLayers,s)},Ri.prototype.addFeatures=function(r,i,s){for(var h=0,m=this.patternFeatures;h<m.length;h+=1){var y=m[h];this.addFeature(y,y.geometry,y.index,i,s)}},Ri.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Ri.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ri.prototype.upload=function(r){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=r.createVertexBuffer(this.layoutVertexArray2,lM)),this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,sM),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0},Ri.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ri.prototype.lineFeatureClips=function(r){if(r.properties&&r.properties.hasOwnProperty("mapbox_clip_start")&&r.properties.hasOwnProperty("mapbox_clip_end"))return{start:+r.properties.mapbox_clip_start,end:+r.properties.mapbox_clip_end}},Ri.prototype.addFeature=function(r,i,s,h,m){var y=this.layers[0].layout,_=y.get("line-join").evaluate(r,{}),S=y.get("line-cap"),k=y.get("line-miter-limit"),A=y.get("line-round-limit");this.lineClips=this.lineFeatureClips(r);for(var R=0,O=i;R<O.length;R+=1)this.addLine(O[R],r,_,S,k,A);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,s,m,h)},Ri.prototype.addLine=function(r,i,s,h,m,y){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var _=0;_<r.length-1;_++)this.totalDistance+=r[_].dist(r[_+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var S=uM[i.type]==="Polygon",k=r.length;k>=2&&r[k-1].equals(r[k-2]);)k--;for(var A=0;A<k-1&&r[A].equals(r[A+1]);)A++;if(!(k<(S?3:2))){s==="bevel"&&(m=1.05);var R,O=this.overscaling<=16?122880/(512*this.overscaling):0,$=this.segments.prepareSegment(10*k,this.layoutVertexArray,this.indexArray),H=void 0,se=void 0,le=void 0,xe=void 0;this.e1=this.e2=-1,S&&(xe=r[A].sub(R=r[k-2])._unit()._perp());for(var de=A;de<k;de++)if(!(se=de===k-1?S?r[A+1]:void 0:r[de+1])||!r[de].equals(se)){xe&&(le=xe),R&&(H=R),R=r[de],xe=se?se.sub(R)._unit()._perp():le;var Ie=(le=le||xe).add(xe);Ie.x===0&&Ie.y===0||Ie._unit();var Me=le.x*xe.x+le.y*xe.y,ze=Ie.x*xe.x+Ie.y*xe.y,Be=ze!==0?1/ze:1/0,We=2*Math.sqrt(2-2*ze),Je=ze<cM&&H&&se,rt=le.x*xe.y-le.y*xe.x>0;if(Je&&de>A){var St=R.dist(H);if(St>2*O){var lt=R.sub(R.sub(H)._mult(O/St)._round());this.updateDistance(H,lt),this.addCurrentVertex(lt,le,0,0,$),H=lt}}var Tt=H&&se,pt=Tt?s:S?"butt":h;if(Tt&&pt==="round"&&(Be<y?pt="miter":Be<=2&&(pt="fakeround")),pt==="miter"&&Be>m&&(pt="bevel"),pt==="bevel"&&(Be>2&&(pt="flipbevel"),Be<m&&(pt="miter")),H&&this.updateDistance(H,R),pt==="miter")Ie._mult(Be),this.addCurrentVertex(R,Ie,0,0,$);else if(pt==="flipbevel"){if(Be>100)Ie=xe.mult(-1);else{var ir=Be*le.add(xe).mag()/le.sub(xe).mag();Ie._perp()._mult(ir*(rt?-1:1))}this.addCurrentVertex(R,Ie,0,0,$),this.addCurrentVertex(R,Ie.mult(-1),0,0,$)}else if(pt==="bevel"||pt==="fakeround"){var jt=-Math.sqrt(Be*Be-1),xt=rt?jt:0,sr=rt?0:jt;if(H&&this.addCurrentVertex(R,le,xt,sr,$),pt==="fakeround")for(var Xt=Math.round(180*We/Math.PI/20),_r=1;_r<Xt;_r++){var Pt=_r/Xt;if(Pt!==.5){var Cr=Pt-.5;Pt+=Pt*Cr*(Pt-1)*((1.0904+Me*(Me*(3.55645-1.43519*Me)-3.2452))*Cr*Cr+(.848013+Me*(.215638*Me-1.06021)))}var un=xe.sub(le)._mult(Pt)._add(le)._unit()._mult(rt?-1:1);this.addHalfVertex(R,un.x,un.y,!1,rt,0,$)}se&&this.addCurrentVertex(R,xe,-xt,-sr,$)}else if(pt==="butt")this.addCurrentVertex(R,Ie,0,0,$);else if(pt==="square"){var vn=H?1:-1;this.addCurrentVertex(R,Ie,vn,vn,$)}else pt==="round"&&(H&&(this.addCurrentVertex(R,le,0,0,$),this.addCurrentVertex(R,le,1,1,$,!0)),se&&(this.addCurrentVertex(R,xe,-1,-1,$,!0),this.addCurrentVertex(R,xe,0,0,$)));if(Je&&de<k-1){var mn=R.dist(se);if(mn>2*O){var cn=R.add(se.sub(R)._mult(O/mn)._round());this.updateDistance(R,cn),this.addCurrentVertex(cn,xe,0,0,$),R=cn}}}}},Ri.prototype.addCurrentVertex=function(r,i,s,h,m,y){y===void 0&&(y=!1);var _=i.y*h-i.x,S=-i.y-i.x*h;this.addHalfVertex(r,i.x+i.y*s,i.y-i.x*s,y,!1,s,m),this.addHalfVertex(r,_,S,y,!0,-h,m),this.distance>Zb/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(r,i,s,h,m,y))},Ri.prototype.addHalfVertex=function(r,i,s,h,m,y,_){var S=.5*(this.lineClips?this.scaledDistance*(Zb-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((r.x<<1)+(h?1:0),(r.y<<1)+(m?1:0),Math.round(63*i)+128,Math.round(63*s)+128,1+(y===0?0:y<0?-1:1)|(63&S)<<2,S>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var k=_.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,k),_.primitiveLength++),m?this.e2=k:this.e1=k},Ri.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},Ri.prototype.updateDistance=function(r,i){this.distance+=r.dist(i),this.updateScaledDistance()},gt("LineBucket",Ri,{omit:["layers","patternFeatures"]});var pM=new ui({"line-cap":new Ct(Z.layout_line["line-cap"]),"line-join":new _t(Z.layout_line["line-join"]),"line-miter-limit":new Ct(Z.layout_line["line-miter-limit"]),"line-round-limit":new Ct(Z.layout_line["line-round-limit"]),"line-sort-key":new _t(Z.layout_line["line-sort-key"])}),Kb={paint:new ui({"line-opacity":new _t(Z.paint_line["line-opacity"]),"line-color":new _t(Z.paint_line["line-color"]),"line-translate":new Ct(Z.paint_line["line-translate"]),"line-translate-anchor":new Ct(Z.paint_line["line-translate-anchor"]),"line-width":new _t(Z.paint_line["line-width"]),"line-gap-width":new _t(Z.paint_line["line-gap-width"]),"line-offset":new _t(Z.paint_line["line-offset"]),"line-blur":new _t(Z.paint_line["line-blur"]),"line-dasharray":new xi(Z.paint_line["line-dasharray"]),"line-pattern":new sc(Z.paint_line["line-pattern"]),"line-gradient":new Do(Z.paint_line["line-gradient"])}),layout:pM},Xb=new(function(r){function i(){r.apply(this,arguments)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.possiblyEvaluate=function(s,h){return h=new cr(Math.floor(h.zoom),{now:h.now,fadeDuration:h.fadeDuration,zoomHistory:h.zoomHistory,transition:h.transition}),r.prototype.possiblyEvaluate.call(this,s,h)},i.prototype.evaluate=function(s,h,m,y){return h=V({},h,{zoom:Math.floor(h.zoom)}),r.prototype.evaluate.call(this,s,h,m,y)},i}(_t))(Kb.paint.properties["line-width"].specification);Xb.useIntegerZoom=!0;var hM=function(r){function i(s){r.call(this,s,Kb),this.gradientVersion=0}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype._handleSpecialPaintPropertyUpdate=function(s){s==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Ui,this.gradientVersion=(this.gradientVersion+1)%q)},i.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},i.prototype.recalculate=function(s,h){r.prototype.recalculate.call(this,s,h),this.paint._values["line-floorwidth"]=Xb.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,s)},i.prototype.createBucket=function(s){return new Ri(s)},i.prototype.queryRadius=function(s){var h=s,m=Yb(Yo("line-width",this,h),Yo("line-gap-width",this,h)),y=Yo("line-offset",this,h);return m/2+Math.abs(y)+Vn(this.paint.get("line-translate"))},i.prototype.queryIntersectsFeature=function(s,h,m,y,_,S,k){var A=da(s,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),S.angle,k),R=k/2*Yb(this.paint.get("line-width").evaluate(h,m),this.paint.get("line-gap-width").evaluate(h,m)),O=this.paint.get("line-offset").evaluate(h,m);return O&&(y=function($,H){for(var se=[],le=new T(0,0),xe=0;xe<$.length;xe++){for(var de=$[xe],Ie=[],Me=0;Me<de.length;Me++){var ze=de[Me],Be=de[Me+1],We=Me===0?le:ze.sub(de[Me-1])._unit()._perp(),Je=Me===de.length-1?le:Be.sub(ze)._unit()._perp(),rt=We._add(Je)._unit();rt._mult(1/(rt.x*Je.x+rt.y*Je.y)),Ie.push(rt._mult(H)._add(ze))}se.push(Ie)}return se}(y,O*k)),function($,H,se){for(var le=0;le<H.length;le++){var xe=H[le];if($.length>=3){for(var de=0;de<xe.length;de++)if(Xo($,xe[de]))return!0}if(yo($,xe,se))return!0}return!1}(A,y,R)},i.prototype.isTileClipped=function(){return!0},i}(Zo);function Yb(r,i){return i>0?i+2*r:r}var dM=Jn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),fM=Jn([{name:"a_projected_pos",components:3,type:"Float32"}],4),mM=(Jn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Jn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Jb=(Jn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Jn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),yM=Jn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function gM(r,i,s){return r.sections.forEach(function(h){h.text=function(m,y,_){var S=y.layout.get("text-transform").evaluate(_,{});return S==="uppercase"?m=m.toLocaleUpperCase():S==="lowercase"&&(m=m.toLocaleLowerCase()),no.applyArabicShaping&&(m=no.applyArabicShaping(m)),m}(h.text,i,s)}),r}Jn([{name:"triangle",components:3,type:"Uint16"}]),Jn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Jn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Jn([{type:"Float32",name:"offsetX"}]),Jn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var kh={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},Qb=function(r,i,s,h,m){var y,_,S=8*m-h-1,k=(1<<S)-1,A=k>>1,R=-7,O=s?m-1:0,$=s?-1:1,H=r[i+O];for(O+=$,y=H&(1<<-R)-1,H>>=-R,R+=S;R>0;y=256*y+r[i+O],O+=$,R-=8);for(_=y&(1<<-R)-1,y>>=-R,R+=h;R>0;_=256*_+r[i+O],O+=$,R-=8);if(y===0)y=1-A;else{if(y===k)return _?NaN:1/0*(H?-1:1);_+=Math.pow(2,h),y-=A}return(H?-1:1)*_*Math.pow(2,y-h)},ew=function(r,i,s,h,m,y){var _,S,k,A=8*y-m-1,R=(1<<A)-1,O=R>>1,$=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,H=h?0:y-1,se=h?1:-1,le=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(S=isNaN(i)?1:0,_=R):(_=Math.floor(Math.log(i)/Math.LN2),i*(k=Math.pow(2,-_))<1&&(_--,k*=2),(i+=_+O>=1?$/k:$*Math.pow(2,1-O))*k>=2&&(_++,k/=2),_+O>=R?(S=0,_=R):_+O>=1?(S=(i*k-1)*Math.pow(2,m),_+=O):(S=i*Math.pow(2,O-1)*Math.pow(2,m),_=0));m>=8;r[s+H]=255&S,H+=se,S/=256,m-=8);for(_=_<<m|S,A+=m;A>0;r[s+H]=255&_,H+=se,_/=256,A-=8);r[s+H-se]|=128*le},im=Qr;function Qr(r){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(r)?r:new Uint8Array(r||0),this.pos=0,this.type=0,this.length=this.buf.length}Qr.Varint=0,Qr.Fixed64=1,Qr.Bytes=2,Qr.Fixed32=5;var tw=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Is(r){return r.type===Qr.Bytes?r.readVarint()+r.pos:r.pos+1}function gc(r,i,s){return s?4294967296*i+(r>>>0):4294967296*(i>>>0)+(r>>>0)}function rw(r,i,s){var h=i<=16383?1:i<=2097151?2:i<=268435455?3:Math.floor(Math.log(i)/(7*Math.LN2));s.realloc(h);for(var m=s.pos-1;m>=r;m--)s.buf[m+h]=s.buf[m]}function vM(r,i){for(var s=0;s<r.length;s++)i.writeVarint(r[s])}function _M(r,i){for(var s=0;s<r.length;s++)i.writeSVarint(r[s])}function xM(r,i){for(var s=0;s<r.length;s++)i.writeFloat(r[s])}function bM(r,i){for(var s=0;s<r.length;s++)i.writeDouble(r[s])}function wM(r,i){for(var s=0;s<r.length;s++)i.writeBoolean(r[s])}function SM(r,i){for(var s=0;s<r.length;s++)i.writeFixed32(r[s])}function EM(r,i){for(var s=0;s<r.length;s++)i.writeSFixed32(r[s])}function CM(r,i){for(var s=0;s<r.length;s++)i.writeFixed64(r[s])}function kM(r,i){for(var s=0;s<r.length;s++)i.writeSFixed64(r[s])}function om(r,i){return(r[i]|r[i+1]<<8|r[i+2]<<16)+16777216*r[i+3]}function vc(r,i,s){r[s]=i,r[s+1]=i>>>8,r[s+2]=i>>>16,r[s+3]=i>>>24}function nw(r,i){return(r[i]|r[i+1]<<8|r[i+2]<<16)+(r[i+3]<<24)}function TM(r,i,s){r===1&&s.readMessage(IM,i)}function IM(r,i,s){if(r===3){var h=s.readMessage(PM,{}),m=h.width,y=h.height,_=h.left,S=h.top,k=h.advance;i.push({id:h.id,bitmap:new pu({width:m+6,height:y+6},h.bitmap),metrics:{width:m,height:y,left:_,top:S,advance:k}})}}function PM(r,i,s){r===1?i.id=s.readVarint():r===2?i.bitmap=s.readBytes():r===3?i.width=s.readVarint():r===4?i.height=s.readVarint():r===5?i.left=s.readSVarint():r===6?i.top=s.readSVarint():r===7&&(i.advance=s.readVarint())}function iw(r){for(var i=0,s=0,h=0,m=r;h<m.length;h+=1){var y=m[h];i+=y.w*y.h,s=Math.max(s,y.w)}r.sort(function(le,xe){return xe.h-le.h});for(var _=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(i/.95)),s),h:1/0}],S=0,k=0,A=0,R=r;A<R.length;A+=1)for(var O=R[A],$=_.length-1;$>=0;$--){var H=_[$];if(!(O.w>H.w||O.h>H.h)){if(O.x=H.x,O.y=H.y,k=Math.max(k,O.y+O.h),S=Math.max(S,O.x+O.w),O.w===H.w&&O.h===H.h){var se=_.pop();$<_.length&&(_[$]=se)}else O.h===H.h?(H.x+=O.w,H.w-=O.w):O.w===H.w?(H.y+=O.h,H.h-=O.h):(_.push({x:H.x+O.w,y:H.y,w:H.w-O.w,h:O.h}),H.y+=O.h,H.h-=O.h);break}}return{w:S,h:k,fill:i/(S*k)||0}}Qr.prototype={destroy:function(){this.buf=null},readFields:function(r,i,s){for(s=s||this.length;this.pos<s;){var h=this.readVarint(),m=h>>3,y=this.pos;this.type=7&h,r(m,i,this),this.pos===y&&this.skip(h)}return i},readMessage:function(r,i){return this.readFields(r,i,this.readVarint()+this.pos)},readFixed32:function(){var r=om(this.buf,this.pos);return this.pos+=4,r},readSFixed32:function(){var r=nw(this.buf,this.pos);return this.pos+=4,r},readFixed64:function(){var r=om(this.buf,this.pos)+4294967296*om(this.buf,this.pos+4);return this.pos+=8,r},readSFixed64:function(){var r=om(this.buf,this.pos)+4294967296*nw(this.buf,this.pos+4);return this.pos+=8,r},readFloat:function(){var r=Qb(this.buf,this.pos,!0,23,4);return this.pos+=4,r},readDouble:function(){var r=Qb(this.buf,this.pos,!0,52,8);return this.pos+=8,r},readVarint:function(r){var i,s,h=this.buf;return i=127&(s=h[this.pos++]),s<128?i:(i|=(127&(s=h[this.pos++]))<<7,s<128?i:(i|=(127&(s=h[this.pos++]))<<14,s<128?i:(i|=(127&(s=h[this.pos++]))<<21,s<128?i:function(m,y,_){var S,k,A=_.buf;if(S=(112&(k=A[_.pos++]))>>4,k<128||(S|=(127&(k=A[_.pos++]))<<3,k<128)||(S|=(127&(k=A[_.pos++]))<<10,k<128)||(S|=(127&(k=A[_.pos++]))<<17,k<128)||(S|=(127&(k=A[_.pos++]))<<24,k<128)||(S|=(1&(k=A[_.pos++]))<<31,k<128))return gc(m,S,y);throw new Error("Expected varint not more than 10 bytes")}(i|=(15&(s=h[this.pos]))<<28,r,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var r=this.readVarint();return r%2==1?(r+1)/-2:r/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var r=this.readVarint()+this.pos,i=this.pos;return this.pos=r,r-i>=12&&tw?function(s,h,m){return tw.decode(s.subarray(h,m))}(this.buf,i,r):function(s,h,m){for(var y="",_=h;_<m;){var S,k,A,R=s[_],O=null,$=R>239?4:R>223?3:R>191?2:1;if(_+$>m)break;$===1?R<128&&(O=R):$===2?(192&(S=s[_+1]))==128&&(O=(31&R)<<6|63&S)<=127&&(O=null):$===3?(k=s[_+2],(192&(S=s[_+1]))==128&&(192&k)==128&&((O=(15&R)<<12|(63&S)<<6|63&k)<=2047||O>=55296&&O<=57343)&&(O=null)):$===4&&(k=s[_+2],A=s[_+3],(192&(S=s[_+1]))==128&&(192&k)==128&&(192&A)==128&&((O=(15&R)<<18|(63&S)<<12|(63&k)<<6|63&A)<=65535||O>=1114112)&&(O=null)),O===null?(O=65533,$=1):O>65535&&(O-=65536,y+=String.fromCharCode(O>>>10&1023|55296),O=56320|1023&O),y+=String.fromCharCode(O),_+=$}return y}(this.buf,i,r)},readBytes:function(){var r=this.readVarint()+this.pos,i=this.buf.subarray(this.pos,r);return this.pos=r,i},readPackedVarint:function(r,i){if(this.type!==Qr.Bytes)return r.push(this.readVarint(i));var s=Is(this);for(r=r||[];this.pos<s;)r.push(this.readVarint(i));return r},readPackedSVarint:function(r){if(this.type!==Qr.Bytes)return r.push(this.readSVarint());var i=Is(this);for(r=r||[];this.pos<i;)r.push(this.readSVarint());return r},readPackedBoolean:function(r){if(this.type!==Qr.Bytes)return r.push(this.readBoolean());var i=Is(this);for(r=r||[];this.pos<i;)r.push(this.readBoolean());return r},readPackedFloat:function(r){if(this.type!==Qr.Bytes)return r.push(this.readFloat());var i=Is(this);for(r=r||[];this.pos<i;)r.push(this.readFloat());return r},readPackedDouble:function(r){if(this.type!==Qr.Bytes)return r.push(this.readDouble());var i=Is(this);for(r=r||[];this.pos<i;)r.push(this.readDouble());return r},readPackedFixed32:function(r){if(this.type!==Qr.Bytes)return r.push(this.readFixed32());var i=Is(this);for(r=r||[];this.pos<i;)r.push(this.readFixed32());return r},readPackedSFixed32:function(r){if(this.type!==Qr.Bytes)return r.push(this.readSFixed32());var i=Is(this);for(r=r||[];this.pos<i;)r.push(this.readSFixed32());return r},readPackedFixed64:function(r){if(this.type!==Qr.Bytes)return r.push(this.readFixed64());var i=Is(this);for(r=r||[];this.pos<i;)r.push(this.readFixed64());return r},readPackedSFixed64:function(r){if(this.type!==Qr.Bytes)return r.push(this.readSFixed64());var i=Is(this);for(r=r||[];this.pos<i;)r.push(this.readSFixed64());return r},skip:function(r){var i=7&r;if(i===Qr.Varint)for(;this.buf[this.pos++]>127;);else if(i===Qr.Bytes)this.pos=this.readVarint()+this.pos;else if(i===Qr.Fixed32)this.pos+=4;else{if(i!==Qr.Fixed64)throw new Error("Unimplemented type: "+i);this.pos+=8}},writeTag:function(r,i){this.writeVarint(r<<3|i)},realloc:function(r){for(var i=this.length||16;i<this.pos+r;)i*=2;if(i!==this.length){var s=new Uint8Array(i);s.set(this.buf),this.buf=s,this.length=i}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(r){this.realloc(4),vc(this.buf,r,this.pos),this.pos+=4},writeSFixed32:function(r){this.realloc(4),vc(this.buf,r,this.pos),this.pos+=4},writeFixed64:function(r){this.realloc(8),vc(this.buf,-1&r,this.pos),vc(this.buf,Math.floor(r*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(r){this.realloc(8),vc(this.buf,-1&r,this.pos),vc(this.buf,Math.floor(r*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(r){(r=+r||0)>268435455||r<0?function(i,s){var h,m;if(i>=0?(h=i%4294967296|0,m=i/4294967296|0):(m=~(-i/4294967296),4294967295^(h=~(-i%4294967296))?h=h+1|0:(h=0,m=m+1|0)),i>=18446744073709552e3||i<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");s.realloc(10),function(y,_,S){S.buf[S.pos++]=127&y|128,y>>>=7,S.buf[S.pos++]=127&y|128,y>>>=7,S.buf[S.pos++]=127&y|128,y>>>=7,S.buf[S.pos++]=127&y|128,S.buf[S.pos]=127&(y>>>=7)}(h,0,s),function(y,_){var S=(7&y)<<4;_.buf[_.pos++]|=S|((y>>>=3)?128:0),y&&(_.buf[_.pos++]=127&y|((y>>>=7)?128:0),y&&(_.buf[_.pos++]=127&y|((y>>>=7)?128:0),y&&(_.buf[_.pos++]=127&y|((y>>>=7)?128:0),y&&(_.buf[_.pos++]=127&y|((y>>>=7)?128:0),y&&(_.buf[_.pos++]=127&y)))))}(m,s)}(r,this):(this.realloc(4),this.buf[this.pos++]=127&r|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=r>>>7&127))))},writeSVarint:function(r){this.writeVarint(r<0?2*-r-1:2*r)},writeBoolean:function(r){this.writeVarint(!!r)},writeString:function(r){r=String(r),this.realloc(4*r.length),this.pos++;var i=this.pos;this.pos=function(h,m,y){for(var _,S,k=0;k<m.length;k++){if((_=m.charCodeAt(k))>55295&&_<57344){if(!S){_>56319||k+1===m.length?(h[y++]=239,h[y++]=191,h[y++]=189):S=_;continue}if(_<56320){h[y++]=239,h[y++]=191,h[y++]=189,S=_;continue}_=S-55296<<10|_-56320|65536,S=null}else S&&(h[y++]=239,h[y++]=191,h[y++]=189,S=null);_<128?h[y++]=_:(_<2048?h[y++]=_>>6|192:(_<65536?h[y++]=_>>12|224:(h[y++]=_>>18|240,h[y++]=_>>12&63|128),h[y++]=_>>6&63|128),h[y++]=63&_|128)}return y}(this.buf,r,this.pos);var s=this.pos-i;s>=128&&rw(i,s,this),this.pos=i-1,this.writeVarint(s),this.pos+=s},writeFloat:function(r){this.realloc(4),ew(this.buf,r,this.pos,!0,23,4),this.pos+=4},writeDouble:function(r){this.realloc(8),ew(this.buf,r,this.pos,!0,52,8),this.pos+=8},writeBytes:function(r){var i=r.length;this.writeVarint(i),this.realloc(i);for(var s=0;s<i;s++)this.buf[this.pos++]=r[s]},writeRawMessage:function(r,i){this.pos++;var s=this.pos;r(i,this);var h=this.pos-s;h>=128&&rw(s,h,this),this.pos=s-1,this.writeVarint(h),this.pos+=h},writeMessage:function(r,i,s){this.writeTag(r,Qr.Bytes),this.writeRawMessage(i,s)},writePackedVarint:function(r,i){i.length&&this.writeMessage(r,vM,i)},writePackedSVarint:function(r,i){i.length&&this.writeMessage(r,_M,i)},writePackedBoolean:function(r,i){i.length&&this.writeMessage(r,wM,i)},writePackedFloat:function(r,i){i.length&&this.writeMessage(r,xM,i)},writePackedDouble:function(r,i){i.length&&this.writeMessage(r,bM,i)},writePackedFixed32:function(r,i){i.length&&this.writeMessage(r,SM,i)},writePackedSFixed32:function(r,i){i.length&&this.writeMessage(r,EM,i)},writePackedFixed64:function(r,i){i.length&&this.writeMessage(r,CM,i)},writePackedSFixed64:function(r,i){i.length&&this.writeMessage(r,kM,i)},writeBytesField:function(r,i){this.writeTag(r,Qr.Bytes),this.writeBytes(i)},writeFixed32Field:function(r,i){this.writeTag(r,Qr.Fixed32),this.writeFixed32(i)},writeSFixed32Field:function(r,i){this.writeTag(r,Qr.Fixed32),this.writeSFixed32(i)},writeFixed64Field:function(r,i){this.writeTag(r,Qr.Fixed64),this.writeFixed64(i)},writeSFixed64Field:function(r,i){this.writeTag(r,Qr.Fixed64),this.writeSFixed64(i)},writeVarintField:function(r,i){this.writeTag(r,Qr.Varint),this.writeVarint(i)},writeSVarintField:function(r,i){this.writeTag(r,Qr.Varint),this.writeSVarint(i)},writeStringField:function(r,i){this.writeTag(r,Qr.Bytes),this.writeString(i)},writeFloatField:function(r,i){this.writeTag(r,Qr.Fixed32),this.writeFloat(i)},writeDoubleField:function(r,i){this.writeTag(r,Qr.Fixed64),this.writeDouble(i)},writeBooleanField:function(r,i){this.writeVarintField(r,!!i)}};var am=function(r,i){var s=i.pixelRatio,h=i.version,m=i.stretchX,y=i.stretchY,_=i.content;this.paddedRect=r,this.pixelRatio=s,this.stretchX=m,this.stretchY=y,this.content=_,this.version=h},Th={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Th.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},Th.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},Th.tlbr.get=function(){return this.tl.concat(this.br)},Th.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(am.prototype,Th);var Ih=function(r,i){var s={},h={};this.haveRenderCallbacks=[];var m=[];this.addImages(r,s,m),this.addImages(i,h,m);var y=iw(m),_=new Zi({width:y.w||1,height:y.h||1});for(var S in r){var k=r[S],A=s[S].paddedRect;Zi.copy(k.data,_,{x:0,y:0},{x:A.x+1,y:A.y+1},k.data)}for(var R in i){var O=i[R],$=h[R].paddedRect,H=$.x+1,se=$.y+1,le=O.data.width,xe=O.data.height;Zi.copy(O.data,_,{x:0,y:0},{x:H,y:se},O.data),Zi.copy(O.data,_,{x:0,y:xe-1},{x:H,y:se-1},{width:le,height:1}),Zi.copy(O.data,_,{x:0,y:0},{x:H,y:se+xe},{width:le,height:1}),Zi.copy(O.data,_,{x:le-1,y:0},{x:H-1,y:se},{width:1,height:xe}),Zi.copy(O.data,_,{x:0,y:0},{x:H+le,y:se},{width:1,height:xe})}this.image=_,this.iconPositions=s,this.patternPositions=h};Ih.prototype.addImages=function(r,i,s){for(var h in r){var m=r[h],y={x:0,y:0,w:m.data.width+2,h:m.data.height+2};s.push(y),i[h]=new am(y,m),m.hasRenderCallback&&this.haveRenderCallbacks.push(h)}},Ih.prototype.patchUpdatedImages=function(r,i){for(var s in r.dispatchRenderCallbacks(this.haveRenderCallbacks),r.updatedImages)this.patchUpdatedImage(this.iconPositions[s],r.getImage(s),i),this.patchUpdatedImage(this.patternPositions[s],r.getImage(s),i)},Ih.prototype.patchUpdatedImage=function(r,i,s){if(r&&i&&r.version!==i.version){r.version=i.version;var h=r.tl;s.update(i.data,void 0,{x:h[0],y:h[1]})}},gt("ImagePosition",am),gt("ImageAtlas",Ih);var go={horizontal:1,vertical:2,horizontalOnly:3},_c=function(){this.scale=1,this.fontStack="",this.imageName=null};_c.forText=function(r,i){var s=new _c;return s.scale=r||1,s.fontStack=i,s},_c.forImage=function(r){var i=new _c;return i.imageName=r,i};var wi=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function sm(r,i,s,h,m,y,_,S,k,A,R,O,$,H,se,le){var xe,de=wi.fromFeature(r,m);O===go.vertical&&de.verticalizePunctuation();var Ie=no.processBidirectionalText,Me=no.processStyledBidirectionalText;if(Ie&&de.sections.length===1){xe=[];for(var ze=0,Be=Ie(de.toString(),r0(de,A,y,i,h,H,se));ze<Be.length;ze+=1){var We=Be[ze],Je=new wi;Je.text=We,Je.sections=de.sections;for(var rt=0;rt<We.length;rt++)Je.sectionIndex.push(0);xe.push(Je)}}else if(Me){xe=[];for(var St=0,lt=Me(de.text,de.sectionIndex,r0(de,A,y,i,h,H,se));St<lt.length;St+=1){var Tt=lt[St],pt=new wi;pt.text=Tt[0],pt.sectionIndex=Tt[1],pt.sections=de.sections,xe.push(pt)}}else xe=function(xt,sr){for(var Xt=[],_r=xt.text,Pt=0,Cr=0,un=sr;Cr<un.length;Cr+=1){var vn=un[Cr];Xt.push(xt.substring(Pt,vn)),Pt=vn}return Pt<_r.length&&Xt.push(xt.substring(Pt,_r.length)),Xt}(de,r0(de,A,y,i,h,H,se));var ir=[],jt={positionedLines:ir,text:de.toString(),top:R[1],bottom:R[1],left:R[0],right:R[0],writingMode:O,iconsInText:!1,verticalizable:!1};return function(xt,sr,Xt,_r,Pt,Cr,un,vn,mn,cn,_n,qn){for(var Wn=0,Si=-17,ti=0,Ei=0,kn=vn==="right"?1:vn==="left"?0:.5,ri=0,hr=0,Zr=Pt;hr<Zr.length;hr+=1){var Fr=Zr[hr];Fr.trim();var br=Fr.getMaxScale(),Li=24*(br-1),di={positionedGlyphs:[],lineOffset:0};xt.positionedLines[ri]=di;var nn=di.positionedGlyphs,Ln=0;if(Fr.length()){for(var fi=0;fi<Fr.length();fi++){var kr=Fr.getSection(fi),$a=Fr.getSectionIndex(fi),vo=Fr.getCharCode(fi),Va=0,Tn=null,qa=null,Jo=null,Tc=24,mu=!(mn===go.horizontal||!_n&&!ic(vo)||_n&&(lm[vo]||(Rs=vo,it.Arabic(Rs)||it["Arabic Supplement"](Rs)||it["Arabic Extended-A"](Rs)||it["Arabic Presentation Forms-A"](Rs)||it["Arabic Presentation Forms-B"](Rs))));if(kr.imageName){var Ic=_r[kr.imageName];if(!Ic)continue;Jo=kr.imageName,xt.iconsInText=xt.iconsInText||!0,qa=Ic.paddedRect;var Ms=Ic.displaySize;kr.scale=24*kr.scale/qn,Va=Li+(24-Ms[1]*kr.scale),Tc=(Tn={width:Ms[0],height:Ms[1],left:1,top:-3,advance:mu?Ms[1]:Ms[0]}).advance;var Pc=mu?Ms[0]*kr.scale-24*br:Ms[1]*kr.scale-24*br;Pc>0&&Pc>Ln&&(Ln=Pc)}else{var gm=Xt[kr.fontStack],Ac=gm&&gm[vo];if(Ac&&Ac.rect)qa=Ac.rect,Tn=Ac.metrics;else{var Mh=sr[kr.fontStack],vm=Mh&&Mh[vo];if(!vm)continue;Tn=vm.metrics}Va=24*(br-kr.scale)}mu?(xt.verticalizable=!0,nn.push({glyph:vo,imageName:Jo,x:Wn,y:Si+Va,vertical:mu,scale:kr.scale,fontStack:kr.fontStack,sectionIndex:$a,metrics:Tn,rect:qa}),Wn+=Tc*kr.scale+cn):(nn.push({glyph:vo,imageName:Jo,x:Wn,y:Si+Va,vertical:mu,scale:kr.scale,fontStack:kr.fontStack,sectionIndex:$a,metrics:Tn,rect:qa}),Wn+=Tn.advance*kr.scale+cn)}nn.length!==0&&(ti=Math.max(Wn-cn,ti),MM(nn,0,nn.length-1,kn,Ln)),Wn=0;var _m=Cr*br+Ln;di.lineOffset=Math.max(Ln,Li),Si+=_m,Ei=Math.max(_m,Ei),++ri}else Si+=Cr,++ri}var Rs,Rh=Si- -17,Mc=n0(un),pl=Mc.horizontalAlign,Rc=Mc.verticalAlign;(function(xm,bm,Lh,zh,wm,Dh,Oh,Bh,Sm){var Lc,Em=(bm-Lh)*wm;Lc=Dh!==Oh?-Bh*zh- -17:(-zh*Sm+.5)*Oh;for(var zc=0,Nh=xm;zc<Nh.length;zc+=1)for(var yu=0,Fh=Nh[zc].positionedGlyphs;yu<Fh.length;yu+=1){var Dc=Fh[yu];Dc.x+=Em,Dc.y+=Lc}})(xt.positionedLines,kn,pl,Rc,ti,Ei,Cr,Rh,Pt.length),xt.top+=-Rc*Rh,xt.bottom=xt.top+Rh,xt.left+=-pl*ti,xt.right=xt.left+ti}(jt,i,s,h,xe,_,S,k,O,A,$,le),!function(xt){for(var sr=0,Xt=xt;sr<Xt.length;sr+=1)if(Xt[sr].positionedGlyphs.length!==0)return!1;return!0}(ir)&&jt}wi.fromFeature=function(r,i){for(var s=new wi,h=0;h<r.sections.length;h++){var m=r.sections[h];m.image?s.addImageSection(m):s.addTextSection(m,i)}return s},wi.prototype.length=function(){return this.text.length},wi.prototype.getSection=function(r){return this.sections[this.sectionIndex[r]]},wi.prototype.getSectionIndex=function(r){return this.sectionIndex[r]},wi.prototype.getCharCode=function(r){return this.text.charCodeAt(r)},wi.prototype.verticalizePunctuation=function(){this.text=function(r){for(var i="",s=0;s<r.length;s++){var h=r.charCodeAt(s+1)||null,m=r.charCodeAt(s-1)||null;i+=h&&ph(h)&&!kh[r[s+1]]||m&&ph(m)&&!kh[r[s-1]]||!kh[r[s]]?r[s]:kh[r[s]]}return i}(this.text)},wi.prototype.trim=function(){for(var r=0,i=0;i<this.text.length&&lm[this.text.charCodeAt(i)];i++)r++;for(var s=this.text.length,h=this.text.length-1;h>=0&&h>=r&&lm[this.text.charCodeAt(h)];h--)s--;this.text=this.text.substring(r,s),this.sectionIndex=this.sectionIndex.slice(r,s)},wi.prototype.substring=function(r,i){var s=new wi;return s.text=this.text.substring(r,i),s.sectionIndex=this.sectionIndex.slice(r,i),s.sections=this.sections,s},wi.prototype.toString=function(){return this.text},wi.prototype.getMaxScale=function(){var r=this;return this.sectionIndex.reduce(function(i,s){return Math.max(i,r.sections[s].scale)},0)},wi.prototype.addTextSection=function(r,i){this.text+=r.text,this.sections.push(_c.forText(r.scale,r.fontStack||i));for(var s=this.sections.length-1,h=0;h<r.text.length;++h)this.sectionIndex.push(s)},wi.prototype.addImageSection=function(r){var i=r.image?r.image.name:"";if(i.length!==0){var s=this.getNextImageSectionCharCode();s?(this.text+=String.fromCharCode(s),this.sections.push(_c.forImage(i)),this.sectionIndex.push(this.sections.length-1)):he("Reached maximum number of images 6401")}else he("Can't add FormattedSection with an empty image.")},wi.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var lm={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},oo={};function ow(r,i,s,h,m,y){if(i.imageName){var _=h[i.imageName];return _?_.displaySize[0]*i.scale*24/y+m:0}var S=s[i.fontStack],k=S&&S[r];return k?k.metrics.advance*i.scale+m:0}function aw(r,i,s,h){var m=Math.pow(r-i,2);return h?r<i?m/2:2*m:m+Math.abs(s)*s}function AM(r,i,s){var h=0;return r===10&&(h-=1e4),s&&(h+=150),r!==40&&r!==65288||(h+=50),i!==41&&i!==65289||(h+=50),h}function sw(r,i,s,h,m,y){for(var _=null,S=aw(i,s,m,y),k=0,A=h;k<A.length;k+=1){var R=A[k],O=aw(i-R.x,s,m,y)+R.badness;O<=S&&(_=R,S=O)}return{index:r,x:i,priorBreak:_,badness:S}}function r0(r,i,s,h,m,y,_){if(y!=="point")return[];if(!r)return[];for(var S,k=[],A=function(xe,de,Ie,Me,ze,Be){for(var We=0,Je=0;Je<xe.length();Je++){var rt=xe.getSection(Je);We+=ow(xe.getCharCode(Je),rt,Me,ze,de,Be)}return We/Math.max(1,Math.ceil(We/Ie))}(r,i,s,h,m,_),R=r.text.indexOf("")>=0,O=0,$=0;$<r.length();$++){var H=r.getSection($),se=r.getCharCode($);if(lm[se]||(O+=ow(se,H,h,m,i,_)),$<r.length()-1){var le=!((S=se)<11904||!(it["Bopomofo Extended"](S)||it.Bopomofo(S)||it["CJK Compatibility Forms"](S)||it["CJK Compatibility Ideographs"](S)||it["CJK Compatibility"](S)||it["CJK Radicals Supplement"](S)||it["CJK Strokes"](S)||it["CJK Symbols and Punctuation"](S)||it["CJK Unified Ideographs Extension A"](S)||it["CJK Unified Ideographs"](S)||it["Enclosed CJK Letters and Months"](S)||it["Halfwidth and Fullwidth Forms"](S)||it.Hiragana(S)||it["Ideographic Description Characters"](S)||it["Kangxi Radicals"](S)||it["Katakana Phonetic Extensions"](S)||it.Katakana(S)||it["Vertical Forms"](S)||it["Yi Radicals"](S)||it["Yi Syllables"](S)));(oo[se]||le||H.imageName)&&k.push(sw($+1,O,A,k,AM(se,r.getCharCode($+1),le&&R),!1))}}return function xe(de){return de?xe(de.priorBreak).concat(de.index):[]}(sw(r.length(),O,A,k,0,!0))}function n0(r){var i=.5,s=.5;switch(r){case"right":case"top-right":case"bottom-right":i=1;break;case"left":case"top-left":case"bottom-left":i=0}switch(r){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:i,verticalAlign:s}}function MM(r,i,s,h,m){if(h||m)for(var y=r[s],_=(r[s].x+y.metrics.advance*y.scale)*h,S=i;S<=s;S++)r[S].x-=_,r[S].y+=m}function lw(r,i,s,h,m,y){var _,S=r.image;if(S.content){var k=S.content,A=S.pixelRatio||1;_=[k[0]/A,k[1]/A,S.displaySize[0]-k[2]/A,S.displaySize[1]-k[3]/A]}var R,O,$,H,se=i.left*y,le=i.right*y;s==="width"||s==="both"?(H=m[0]+se-h[3],O=m[0]+le+h[1]):O=(H=m[0]+(se+le-S.displaySize[0])/2)+S.displaySize[0];var xe=i.top*y,de=i.bottom*y;return s==="height"||s==="both"?(R=m[1]+xe-h[0],$=m[1]+de+h[2]):$=(R=m[1]+(xe+de-S.displaySize[1])/2)+S.displaySize[1],{image:S,top:R,right:O,bottom:$,left:H,collisionPadding:_}}oo[10]=!0,oo[32]=!0,oo[38]=!0,oo[40]=!0,oo[41]=!0,oo[43]=!0,oo[45]=!0,oo[47]=!0,oo[173]=!0,oo[183]=!0,oo[8203]=!0,oo[8208]=!0,oo[8211]=!0,oo[8231]=!0;var xc=function(r){function i(s,h,m,y){r.call(this,s,h),this.angle=m,y!==void 0&&(this.segment=y)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.clone=function(){return new i(this.x,this.y,this.angle,this.segment)},i}(T);function i0(r,i){var s=i.expression;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new cr(r+1))};if(s.kind==="source")return{kind:"source"};for(var h=s.zoomStops,m=s.interpolationType,y=0;y<h.length&&h[y]<=r;)y++;for(var _=y=Math.max(0,y-1);_<h.length&&h[_]<r+1;)_++;_=Math.min(h.length-1,_);var S=h[y],k=h[_];return s.kind==="composite"?{kind:"composite",minZoom:S,maxZoom:k,interpolationType:m}:{kind:"camera",minZoom:S,maxZoom:k,minSize:s.evaluate(new cr(S)),maxSize:s.evaluate(new cr(k)),interpolationType:m}}function uw(r,i,s){var h=i.uSize,m=s.lowerSize;return r.kind==="source"?m/128:r.kind==="composite"?Mn(m/128,s.upperSize/128,i.uSizeT):h}function cw(r,i){var s=0,h=0;if(r.kind==="constant")h=r.layoutSize;else if(r.kind!=="source"){var m=r.interpolationType,y=m?D(si.interpolationFactor(m,i,r.minZoom,r.maxZoom),0,1):0;r.kind==="camera"?h=Mn(r.minSize,r.maxSize,y):s=y}return{uSizeT:s,uSize:h}}gt("Anchor",xc);var RM=Object.freeze({__proto__:null,getSizeData:i0,evaluateSizeForFeature:uw,evaluateSizeForZoom:cw,SIZE_PACK_FACTOR:128});function pw(r,i,s,h,m){if(i.segment===void 0)return!0;for(var y=i,_=i.segment+1,S=0;S>-s/2;){if(--_<0)return!1;S-=r[_].dist(y),y=r[_]}S+=r[_].dist(r[_+1]),_++;for(var k=[],A=0;S<s/2;){var R=r[_],O=r[_+1];if(!O)return!1;var $=r[_-1].angleTo(R)-R.angleTo(O);for($=Math.abs(($+3*Math.PI)%(2*Math.PI)-Math.PI),k.push({distance:S,angleDelta:$}),A+=$;S-k[0].distance>h;)A-=k.shift().angleDelta;if(A>m)return!1;_++,S+=R.dist(O)}return!0}function hw(r){for(var i=0,s=0;s<r.length-1;s++)i+=r[s].dist(r[s+1]);return i}function dw(r,i,s){return r?.6*i*s:0}function fw(r,i){return Math.max(r?r.right-r.left:0,i?i.right-i.left:0)}function LM(r,i,s,h,m,y){for(var _=dw(s,m,y),S=fw(s,h)*y,k=0,A=hw(r)/2,R=0;R<r.length-1;R++){var O=r[R],$=r[R+1],H=O.dist($);if(k+H>A){var se=(A-k)/H,le=Mn(O.x,$.x,se),xe=Mn(O.y,$.y,se),de=new xc(le,xe,$.angleTo(O),R);return de._round(),!_||pw(r,de,S,_,i)?de:void 0}k+=H}}function zM(r,i,s,h,m,y,_,S,k){var A=dw(h,y,_),R=fw(h,m),O=R*_,$=r[0].x===0||r[0].x===k||r[0].y===0||r[0].y===k;return i-O<i/4&&(i=O+i/4),function H(se,le,xe,de,Ie,Me,ze,Be,We){for(var Je=Me/2,rt=hw(se),St=0,lt=le-xe,Tt=[],pt=0;pt<se.length-1;pt++){for(var ir=se[pt],jt=se[pt+1],xt=ir.dist(jt),sr=jt.angleTo(ir);lt+xe<St+xt;){var Xt=((lt+=xe)-St)/xt,_r=Mn(ir.x,jt.x,Xt),Pt=Mn(ir.y,jt.y,Xt);if(_r>=0&&_r<We&&Pt>=0&&Pt<We&&lt-Je>=0&&lt+Je<=rt){var Cr=new xc(_r,Pt,sr,pt);Cr._round(),de&&!pw(se,Cr,Me,de,Ie)||Tt.push(Cr)}}St+=xt}return Be||Tt.length||ze||(Tt=H(se,St/2,xe,de,Ie,Me,ze,!0,We)),Tt}(r,$?i/2*S%i:(R/2+2*y)*_*S%i,i,A,s,O,$,!1,k)}function mw(r,i,s,h,m){for(var y=[],_=0;_<r.length;_++)for(var S=r[_],k=void 0,A=0;A<S.length-1;A++){var R=S[A],O=S[A+1];R.x<i&&O.x<i||(R.x<i?R=new T(i,R.y+(i-R.x)/(O.x-R.x)*(O.y-R.y))._round():O.x<i&&(O=new T(i,R.y+(i-R.x)/(O.x-R.x)*(O.y-R.y))._round()),R.y<s&&O.y<s||(R.y<s?R=new T(R.x+(s-R.y)/(O.y-R.y)*(O.x-R.x),s)._round():O.y<s&&(O=new T(R.x+(s-R.y)/(O.y-R.y)*(O.x-R.x),s)._round()),R.x>=h&&O.x>=h||(R.x>=h?R=new T(h,R.y+(h-R.x)/(O.x-R.x)*(O.y-R.y))._round():O.x>=h&&(O=new T(h,R.y+(h-R.x)/(O.x-R.x)*(O.y-R.y))._round()),R.y>=m&&O.y>=m||(R.y>=m?R=new T(R.x+(m-R.y)/(O.y-R.y)*(O.x-R.x),m)._round():O.y>=m&&(O=new T(R.x+(m-R.y)/(O.y-R.y)*(O.x-R.x),m)._round()),k&&R.equals(k[k.length-1])||y.push(k=[R]),k.push(O)))))}return y}function yw(r,i,s,h){var m=[],y=r.image,_=y.pixelRatio,S=y.paddedRect.w-2,k=y.paddedRect.h-2,A=r.right-r.left,R=r.bottom-r.top,O=y.stretchX||[[0,S]],$=y.stretchY||[[0,k]],H=function(_r,Pt){return _r+Pt[1]-Pt[0]},se=O.reduce(H,0),le=$.reduce(H,0),xe=S-se,de=k-le,Ie=0,Me=se,ze=0,Be=le,We=0,Je=xe,rt=0,St=de;if(y.content&&h){var lt=y.content;Ie=um(O,0,lt[0]),ze=um($,0,lt[1]),Me=um(O,lt[0],lt[2]),Be=um($,lt[1],lt[3]),We=lt[0]-Ie,rt=lt[1]-ze,Je=lt[2]-lt[0]-Me,St=lt[3]-lt[1]-Be}var Tt=function(_r,Pt,Cr,un){var vn=cm(_r.stretch-Ie,Me,A,r.left),mn=pm(_r.fixed-We,Je,_r.stretch,se),cn=cm(Pt.stretch-ze,Be,R,r.top),_n=pm(Pt.fixed-rt,St,Pt.stretch,le),qn=cm(Cr.stretch-Ie,Me,A,r.left),Wn=pm(Cr.fixed-We,Je,Cr.stretch,se),Si=cm(un.stretch-ze,Be,R,r.top),ti=pm(un.fixed-rt,St,un.stretch,le),Ei=new T(vn,cn),kn=new T(qn,cn),ri=new T(qn,Si),hr=new T(vn,Si),Zr=new T(mn/_,_n/_),Fr=new T(Wn/_,ti/_),br=i*Math.PI/180;if(br){var Li=Math.sin(br),di=Math.cos(br),nn=[di,-Li,Li,di];Ei._matMult(nn),kn._matMult(nn),hr._matMult(nn),ri._matMult(nn)}var Ln=_r.stretch+_r.fixed,fi=Pt.stretch+Pt.fixed;return{tl:Ei,tr:kn,bl:hr,br:ri,tex:{x:y.paddedRect.x+1+Ln,y:y.paddedRect.y+1+fi,w:Cr.stretch+Cr.fixed-Ln,h:un.stretch+un.fixed-fi},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Zr,pixelOffsetBR:Fr,minFontScaleX:Je/_/A,minFontScaleY:St/_/R,isSDF:s}};if(h&&(y.stretchX||y.stretchY))for(var pt=gw(O,xe,se),ir=gw($,de,le),jt=0;jt<pt.length-1;jt++)for(var xt=pt[jt],sr=pt[jt+1],Xt=0;Xt<ir.length-1;Xt++)m.push(Tt(xt,ir[Xt],sr,ir[Xt+1]));else m.push(Tt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:S+1},{fixed:0,stretch:k+1}));return m}function um(r,i,s){for(var h=0,m=0,y=r;m<y.length;m+=1){var _=y[m];h+=Math.max(i,Math.min(s,_[1]))-Math.max(i,Math.min(s,_[0]))}return h}function gw(r,i,s){for(var h=[{fixed:-1,stretch:0}],m=0,y=r;m<y.length;m+=1){var _=y[m],S=_[0],k=_[1],A=h[h.length-1];h.push({fixed:S-A.stretch,stretch:A.stretch}),h.push({fixed:S-A.stretch,stretch:A.stretch+(k-S)})}return h.push({fixed:i+1,stretch:s}),h}function cm(r,i,s,h){return r/i*s+h}function pm(r,i,s,h){return r-i*s/h}var hm=function(r,i,s,h,m,y,_,S,k,A){if(this.boxStartIndex=r.length,k){var R=y.top,O=y.bottom,$=y.collisionPadding;$&&(R-=$[1],O+=$[3]);var H=O-R;H>0&&(H=Math.max(10,H),this.circleDiameter=H)}else{var se=y.top*_-S,le=y.bottom*_+S,xe=y.left*_-S,de=y.right*_+S,Ie=y.collisionPadding;if(Ie&&(xe-=Ie[0]*_,se-=Ie[1]*_,de+=Ie[2]*_,le+=Ie[3]*_),A){var Me=new T(xe,se),ze=new T(de,se),Be=new T(xe,le),We=new T(de,le),Je=A*Math.PI/180;Me._rotate(Je),ze._rotate(Je),Be._rotate(Je),We._rotate(Je),xe=Math.min(Me.x,ze.x,Be.x,We.x),de=Math.max(Me.x,ze.x,Be.x,We.x),se=Math.min(Me.y,ze.y,Be.y,We.y),le=Math.max(Me.y,ze.y,Be.y,We.y)}r.emplaceBack(i.x,i.y,xe,se,de,le,s,h,m)}this.boxEndIndex=r.length},bc=function(r,i){if(r===void 0&&(r=[]),i===void 0&&(i=DM),this.data=r,this.length=this.data.length,this.compare=i,this.length>0)for(var s=(this.length>>1)-1;s>=0;s--)this._down(s)};function DM(r,i){return r<i?-1:r>i?1:0}function OM(r,i,s){i===void 0&&(i=1),s===void 0&&(s=!1);for(var h=1/0,m=1/0,y=-1/0,_=-1/0,S=r[0],k=0;k<S.length;k++){var A=S[k];(!k||A.x<h)&&(h=A.x),(!k||A.y<m)&&(m=A.y),(!k||A.x>y)&&(y=A.x),(!k||A.y>_)&&(_=A.y)}var R=Math.min(y-h,_-m),O=R/2,$=new bc([],BM);if(R===0)return new T(h,m);for(var H=h;H<y;H+=R)for(var se=m;se<_;se+=R)$.push(new wc(H+O,se+O,O,r));for(var le=function(Ie){for(var Me=0,ze=0,Be=0,We=Ie[0],Je=0,rt=We.length,St=rt-1;Je<rt;St=Je++){var lt=We[Je],Tt=We[St],pt=lt.x*Tt.y-Tt.x*lt.y;ze+=(lt.x+Tt.x)*pt,Be+=(lt.y+Tt.y)*pt,Me+=3*pt}return new wc(ze/Me,Be/Me,0,Ie)}(r),xe=$.length;$.length;){var de=$.pop();(de.d>le.d||!le.d)&&(le=de,s&&console.log("found best %d after %d probes",Math.round(1e4*de.d)/1e4,xe)),de.max-le.d<=i||($.push(new wc(de.p.x-(O=de.h/2),de.p.y-O,O,r)),$.push(new wc(de.p.x+O,de.p.y-O,O,r)),$.push(new wc(de.p.x-O,de.p.y+O,O,r)),$.push(new wc(de.p.x+O,de.p.y+O,O,r)),xe+=4)}return s&&(console.log("num probes: "+xe),console.log("best distance: "+le.d)),le.p}function BM(r,i){return i.max-r.max}function wc(r,i,s,h){this.p=new T(r,i),this.h=s,this.d=function(m,y){for(var _=!1,S=1/0,k=0;k<y.length;k++)for(var A=y[k],R=0,O=A.length,$=O-1;R<O;$=R++){var H=A[R],se=A[$];H.y>m.y!=se.y>m.y&&m.x<(se.x-H.x)*(m.y-H.y)/(se.y-H.y)+H.x&&(_=!_),S=Math.min(S,sl(m,H,se))}return(_?1:-1)*Math.sqrt(S)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}bc.prototype.push=function(r){this.data.push(r),this.length++,this._up(this.length-1)},bc.prototype.pop=function(){if(this.length!==0){var r=this.data[0],i=this.data.pop();return this.length--,this.length>0&&(this.data[0]=i,this._down(0)),r}},bc.prototype.peek=function(){return this.data[0]},bc.prototype._up=function(r){for(var i=this.data,s=this.compare,h=i[r];r>0;){var m=r-1>>1,y=i[m];if(s(h,y)>=0)break;i[r]=y,r=m}i[r]=h},bc.prototype._down=function(r){for(var i=this.data,s=this.compare,h=this.length>>1,m=i[r];r<h;){var y=1+(r<<1),_=i[y],S=y+1;if(S<this.length&&s(i[S],_)<0&&(y=S,_=i[S]),s(_,m)>=0)break;i[r]=_,r=y}i[r]=m};var o0=Number.POSITIVE_INFINITY;function vw(r,i){return i[1]!==o0?function(s,h,m){var y=0,_=0;switch(h=Math.abs(h),m=Math.abs(m),s){case"top-right":case"top-left":case"top":_=m-7;break;case"bottom-right":case"bottom-left":case"bottom":_=7-m}switch(s){case"top-right":case"bottom-right":case"right":y=-h;break;case"top-left":case"bottom-left":case"left":y=h}return[y,_]}(r,i[0],i[1]):function(s,h){var m=0,y=0;h<0&&(h=0);var _=h/Math.sqrt(2);switch(s){case"top-right":case"top-left":y=_-7;break;case"bottom-right":case"bottom-left":y=7-_;break;case"bottom":y=7-h;break;case"top":y=h-7}switch(s){case"top-right":case"bottom-right":m=-_;break;case"top-left":case"bottom-left":m=_;break;case"left":m=h;break;case"right":m=-h}return[m,y]}(r,i[0])}function a0(r){switch(r){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function _w(r,i,s,h,m,y,_,S,k,A,R,O,$,H,se){var le=function(ze,Be,We,Je,rt,St,lt,Tt){for(var pt=Je.layout.get("text-rotate").evaluate(St,{})*Math.PI/180,ir=[],jt=0,xt=Be.positionedLines;jt<xt.length;jt+=1)for(var sr=xt[jt],Xt=0,_r=sr.positionedGlyphs;Xt<_r.length;Xt+=1){var Pt=_r[Xt];if(Pt.rect){var Cr=Pt.rect||{},un=4,vn=!0,mn=1,cn=0,_n=(rt||Tt)&&Pt.vertical,qn=Pt.metrics.advance*Pt.scale/2;if(Tt&&Be.verticalizable&&(cn=sr.lineOffset/2-(Pt.imageName?-(24-Pt.metrics.width*Pt.scale)/2:24*(Pt.scale-1))),Pt.imageName){var Wn=lt[Pt.imageName];vn=Wn.sdf,un=1/(mn=Wn.pixelRatio)}var Si=rt?[Pt.x+qn,Pt.y]:[0,0],ti=rt?[0,0]:[Pt.x+qn+We[0],Pt.y+We[1]-cn],Ei=[0,0];_n&&(Ei=ti,ti=[0,0]);var kn=(Pt.metrics.left-un)*Pt.scale-qn+ti[0],ri=(-Pt.metrics.top-un)*Pt.scale+ti[1],hr=kn+Cr.w*Pt.scale/mn,Zr=ri+Cr.h*Pt.scale/mn,Fr=new T(kn,ri),br=new T(hr,ri),Li=new T(kn,Zr),di=new T(hr,Zr);if(_n){var nn=new T(-qn,qn- -17),Ln=-Math.PI/2,fi=12-qn,kr=new T(22-fi,-(Pt.imageName?fi:0)),$a=new(Function.prototype.bind.apply(T,[null].concat(Ei)));Fr._rotateAround(Ln,nn)._add(kr)._add($a),br._rotateAround(Ln,nn)._add(kr)._add($a),Li._rotateAround(Ln,nn)._add(kr)._add($a),di._rotateAround(Ln,nn)._add(kr)._add($a)}if(pt){var vo=Math.sin(pt),Va=Math.cos(pt),Tn=[Va,-vo,vo,Va];Fr._matMult(Tn),br._matMult(Tn),Li._matMult(Tn),di._matMult(Tn)}var qa=new T(0,0),Jo=new T(0,0);ir.push({tl:Fr,tr:br,bl:Li,br:di,tex:Cr,writingMode:Be.writingMode,glyphOffset:Si,sectionIndex:Pt.sectionIndex,isSDF:vn,pixelOffsetTL:qa,pixelOffsetBR:Jo,minFontScaleX:0,minFontScaleY:0})}}return ir}(0,s,S,m,y,_,h,r.allowVerticalPlacement),xe=r.textSizeData,de=null;xe.kind==="source"?(de=[128*m.layout.get("text-size").evaluate(_,{})])[0]>32640&&he(r.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):xe.kind==="composite"&&((de=[128*H.compositeTextSizes[0].evaluate(_,{},se),128*H.compositeTextSizes[1].evaluate(_,{},se)])[0]>32640||de[1]>32640)&&he(r.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),r.addSymbols(r.text,le,de,S,y,_,A,i,k.lineStartIndex,k.lineLength,$,se);for(var Ie=0,Me=R;Ie<Me.length;Ie+=1)O[Me[Ie]]=r.text.placedSymbolArray.length-1;return 4*le.length}function xw(r){for(var i in r)return r[i];return null}function NM(r,i,s,h){var m=r.compareText;if(i in m){for(var y=m[i],_=y.length-1;_>=0;_--)if(h.dist(y[_])<s)return!0}else m[i]=[];return m[i].push(h),!1}var FM=yc.VectorTileFeature.types,jM=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function dm(r,i,s,h,m,y,_,S,k,A,R,O,$){var H=S?Math.min(32640,Math.round(S[0])):0,se=S?Math.min(32640,Math.round(S[1])):0;r.emplaceBack(i,s,Math.round(32*h),Math.round(32*m),y,_,(H<<1)+(k?1:0),se,16*A,16*R,256*O,256*$)}function s0(r,i,s){r.emplaceBack(i.x,i.y,s),r.emplaceBack(i.x,i.y,s),r.emplaceBack(i.x,i.y,s),r.emplaceBack(i.x,i.y,s)}function UM(r){for(var i=0,s=r.sections;i<s.length;i+=1)if(oc(s[i].text))return!0;return!1}var Sc=function(r){this.layoutVertexArray=new uc,this.indexArray=new Oa,this.programConfigurations=r,this.segments=new X,this.dynamicLayoutVertexArray=new il,this.opacityVertexArray=new ou,this.placedSymbolArray=new d};Sc.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},Sc.prototype.upload=function(r,i,s,h){this.isEmpty()||(s&&(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,dM.members),this.indexBuffer=r.createIndexBuffer(this.indexArray,i),this.dynamicLayoutVertexBuffer=r.createVertexBuffer(this.dynamicLayoutVertexArray,fM.members,!0),this.opacityVertexBuffer=r.createVertexBuffer(this.opacityVertexArray,jM,!0),this.opacityVertexBuffer.itemSize=1),(s||h)&&this.programConfigurations.upload(r))},Sc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},gt("SymbolBuffers",Sc);var Ph=function(r,i,s){this.layoutVertexArray=new r,this.layoutAttributes=i,this.indexArray=new s,this.segments=new X,this.collisionVertexArray=new gh};Ph.prototype.upload=function(r){this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=r.createVertexBuffer(this.collisionVertexArray,mM.members,!0)},Ph.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},gt("CollisionBuffers",Ph);var Wr=function(r){this.collisionBoxArray=r.collisionBoxArray,this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(function(y){return y.id}),this.index=r.index,this.pixelRatio=r.pixelRatio,this.sourceLayerIndex=r.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=io([]),this.placementViewportMatrix=io([]);var i=this.layers[0]._unevaluatedLayout._values;this.textSizeData=i0(this.zoom,i["text-size"]),this.iconSizeData=i0(this.zoom,i["icon-size"]);var s=this.layers[0].layout,h=s.get("symbol-sort-key"),m=s.get("symbol-z-order");this.canOverlap=s.get("text-allow-overlap")||s.get("icon-allow-overlap")||s.get("text-ignore-placement")||s.get("icon-ignore-placement"),this.sortFeaturesByKey=m!=="viewport-y"&&h.constantOr(1)!==void 0,this.sortFeaturesByY=(m==="viewport-y"||m==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,s.get("symbol-placement")==="point"&&(this.writingModes=s.get("text-writing-mode").map(function(y){return go[y]})),this.stateDependentLayerIds=this.layers.filter(function(y){return y.isStateDependent()}).map(function(y){return y.id}),this.sourceID=r.sourceID};Wr.prototype.createArrays=function(){this.text=new Sc(new Nt(this.layers,this.zoom,function(r){return/^text/.test(r)})),this.icon=new Sc(new Nt(this.layers,this.zoom,function(r){return/^icon/.test(r)})),this.glyphOffsetArray=new w,this.lineVertexArray=new C,this.symbolInstances=new b},Wr.prototype.calculateGlyphDependencies=function(r,i,s,h,m){for(var y=0;y<r.length;y++)if(i[r.charCodeAt(y)]=!0,(s||h)&&m){var _=kh[r.charAt(y)];_&&(i[_.charCodeAt(0)]=!0)}},Wr.prototype.populate=function(r,i,s){var h=this.layers[0],m=h.layout,y=m.get("text-font"),_=m.get("text-field"),S=m.get("icon-image"),k=(_.value.kind!=="constant"||_.value.value instanceof Xn&&!_.value.value.isEmpty()||_.value.value.toString().length>0)&&(y.value.kind!=="constant"||y.value.value.length>0),A=S.value.kind!=="constant"||!!S.value.value||Object.keys(S.parameters).length>0,R=m.get("symbol-sort-key");if(this.features=[],k||A){for(var O=i.iconDependencies,$=i.glyphDependencies,H=i.availableImages,se=new cr(this.zoom),le=0,xe=r;le<xe.length;le+=1){var de=xe[le],Ie=de.feature,Me=de.id,ze=de.index,Be=de.sourceLayerIndex,We=h._featureFilter.needGeometry,Je=Cn(Ie,We);if(h._featureFilter.filter(se,Je,s)){We||(Je.geometry=fn(Ie));var rt=void 0;if(k){var St=h.getValueAndResolveTokens("text-field",Je,s,H),lt=Xn.factory(St);UM(lt)&&(this.hasRTLText=!0),(!this.hasRTLText||dh()==="unavailable"||this.hasRTLText&&no.isParsed())&&(rt=gM(lt,h,Je))}var Tt=void 0;if(A){var pt=h.getValueAndResolveTokens("icon-image",Je,s,H);Tt=pt instanceof Pi?pt:Pi.fromString(pt)}if(rt||Tt){var ir=this.sortFeaturesByKey?R.evaluate(Je,{},s):void 0;if(this.features.push({id:Me,text:rt,icon:Tt,index:ze,sourceLayerIndex:Be,geometry:Je.geometry,properties:Ie.properties,type:FM[Ie.type],sortKey:ir}),Tt&&(O[Tt.name]=!0),rt){var jt=y.evaluate(Je,{},s).join(","),xt=m.get("text-rotation-alignment")==="map"&&m.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(go.vertical)>=0;for(var sr=0,Xt=rt.sections;sr<Xt.length;sr+=1){var _r=Xt[sr];if(_r.image)O[_r.image.name]=!0;else{var Pt=ch(rt.toString()),Cr=_r.fontStack||jt,un=$[Cr]=$[Cr]||{};this.calculateGlyphDependencies(_r.text,un,xt,this.allowVerticalPlacement,Pt)}}}}}}m.get("symbol-placement")==="line"&&(this.features=function(vn){var mn={},cn={},_n=[],qn=0;function Wn(nn){_n.push(vn[nn]),qn++}function Si(nn,Ln,fi){var kr=cn[nn];return delete cn[nn],cn[Ln]=kr,_n[kr].geometry[0].pop(),_n[kr].geometry[0]=_n[kr].geometry[0].concat(fi[0]),kr}function ti(nn,Ln,fi){var kr=mn[Ln];return delete mn[Ln],mn[nn]=kr,_n[kr].geometry[0].shift(),_n[kr].geometry[0]=fi[0].concat(_n[kr].geometry[0]),kr}function Ei(nn,Ln,fi){var kr=fi?Ln[0][Ln[0].length-1]:Ln[0][0];return nn+":"+kr.x+":"+kr.y}for(var kn=0;kn<vn.length;kn++){var ri=vn[kn],hr=ri.geometry,Zr=ri.text?ri.text.toString():null;if(Zr){var Fr=Ei(Zr,hr),br=Ei(Zr,hr,!0);if(Fr in cn&&br in mn&&cn[Fr]!==mn[br]){var Li=ti(Fr,br,hr),di=Si(Fr,br,_n[Li].geometry);delete mn[Fr],delete cn[br],cn[Ei(Zr,_n[di].geometry,!0)]=di,_n[Li].geometry=null}else Fr in cn?Si(Fr,br,hr):br in mn?ti(Fr,br,hr):(Wn(kn),mn[Fr]=qn-1,cn[br]=qn-1)}else Wn(kn)}return _n.filter(function(nn){return nn.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(vn,mn){return vn.sortKey-mn.sortKey})}},Wr.prototype.update=function(r,i,s){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(r,i,this.layers,s),this.icon.programConfigurations.updatePaintArrays(r,i,this.layers,s))},Wr.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},Wr.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Wr.prototype.upload=function(r){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(r),this.iconCollisionBox.upload(r)),this.text.upload(r,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(r,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Wr.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Wr.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Wr.prototype.addToLineVertexArray=function(r,i){var s=this.lineVertexArray.length;if(r.segment!==void 0){for(var h=r.dist(i[r.segment+1]),m=r.dist(i[r.segment]),y={},_=r.segment+1;_<i.length;_++)y[_]={x:i[_].x,y:i[_].y,tileUnitDistanceFromAnchor:h},_<i.length-1&&(h+=i[_+1].dist(i[_]));for(var S=r.segment||0;S>=0;S--)y[S]={x:i[S].x,y:i[S].y,tileUnitDistanceFromAnchor:m},S>0&&(m+=i[S-1].dist(i[S]));for(var k=0;k<i.length;k++){var A=y[k];this.lineVertexArray.emplaceBack(A.x,A.y,A.tileUnitDistanceFromAnchor)}}return{lineStartIndex:s,lineLength:this.lineVertexArray.length-s}},Wr.prototype.addSymbols=function(r,i,s,h,m,y,_,S,k,A,R,O){for(var $=r.indexArray,H=r.layoutVertexArray,se=r.segments.prepareSegment(4*i.length,H,$,this.canOverlap?y.sortKey:void 0),le=this.glyphOffsetArray.length,xe=se.vertexLength,de=this.allowVerticalPlacement&&_===go.vertical?Math.PI/2:0,Ie=y.text&&y.text.sections,Me=0;Me<i.length;Me++){var ze=i[Me],Be=ze.tl,We=ze.tr,Je=ze.bl,rt=ze.br,St=ze.tex,lt=ze.pixelOffsetTL,Tt=ze.pixelOffsetBR,pt=ze.minFontScaleX,ir=ze.minFontScaleY,jt=ze.glyphOffset,xt=ze.isSDF,sr=ze.sectionIndex,Xt=se.vertexLength,_r=jt[1];dm(H,S.x,S.y,Be.x,_r+Be.y,St.x,St.y,s,xt,lt.x,lt.y,pt,ir),dm(H,S.x,S.y,We.x,_r+We.y,St.x+St.w,St.y,s,xt,Tt.x,lt.y,pt,ir),dm(H,S.x,S.y,Je.x,_r+Je.y,St.x,St.y+St.h,s,xt,lt.x,Tt.y,pt,ir),dm(H,S.x,S.y,rt.x,_r+rt.y,St.x+St.w,St.y+St.h,s,xt,Tt.x,Tt.y,pt,ir),s0(r.dynamicLayoutVertexArray,S,de),$.emplaceBack(Xt,Xt+1,Xt+2),$.emplaceBack(Xt+1,Xt+2,Xt+3),se.vertexLength+=4,se.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(jt[0]),Me!==i.length-1&&sr===i[Me+1].sectionIndex||r.programConfigurations.populatePaintArrays(H.length,y,y.index,{},O,Ie&&Ie[sr])}r.placedSymbolArray.emplaceBack(S.x,S.y,le,this.glyphOffsetArray.length-le,xe,k,A,S.segment,s?s[0]:0,s?s[1]:0,h[0],h[1],_,0,!1,0,R)},Wr.prototype._addCollisionDebugVertex=function(r,i,s,h,m,y){return i.emplaceBack(0,0),r.emplaceBack(s.x,s.y,h,m,Math.round(y.x),Math.round(y.y))},Wr.prototype.addCollisionDebugVertices=function(r,i,s,h,m,y,_){var S=m.segments.prepareSegment(4,m.layoutVertexArray,m.indexArray),k=S.vertexLength,A=m.layoutVertexArray,R=m.collisionVertexArray,O=_.anchorX,$=_.anchorY;this._addCollisionDebugVertex(A,R,y,O,$,new T(r,i)),this._addCollisionDebugVertex(A,R,y,O,$,new T(s,i)),this._addCollisionDebugVertex(A,R,y,O,$,new T(s,h)),this._addCollisionDebugVertex(A,R,y,O,$,new T(r,h)),S.vertexLength+=4;var H=m.indexArray;H.emplaceBack(k,k+1),H.emplaceBack(k+1,k+2),H.emplaceBack(k+2,k+3),H.emplaceBack(k+3,k),S.primitiveLength+=4},Wr.prototype.addDebugCollisionBoxes=function(r,i,s,h){for(var m=r;m<i;m++){var y=this.collisionBoxArray.get(m);this.addCollisionDebugVertices(y.x1,y.y1,y.x2,y.y2,h?this.textCollisionBox:this.iconCollisionBox,y.anchorPoint,s)}},Wr.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Ph(ol,Jb.members,au),this.iconCollisionBox=new Ph(ol,Jb.members,au);for(var r=0;r<this.symbolInstances.length;r++){var i=this.symbolInstances.get(r);this.addDebugCollisionBoxes(i.textBoxStartIndex,i.textBoxEndIndex,i,!0),this.addDebugCollisionBoxes(i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i,!0),this.addDebugCollisionBoxes(i.iconBoxStartIndex,i.iconBoxEndIndex,i,!1),this.addDebugCollisionBoxes(i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex,i,!1)}},Wr.prototype._deserializeCollisionBoxesForSymbol=function(r,i,s,h,m,y,_,S,k){for(var A={},R=i;R<s;R++){var O=r.get(R);A.textBox={x1:O.x1,y1:O.y1,x2:O.x2,y2:O.y2,anchorPointX:O.anchorPointX,anchorPointY:O.anchorPointY},A.textFeatureIndex=O.featureIndex;break}for(var $=h;$<m;$++){var H=r.get($);A.verticalTextBox={x1:H.x1,y1:H.y1,x2:H.x2,y2:H.y2,anchorPointX:H.anchorPointX,anchorPointY:H.anchorPointY},A.verticalTextFeatureIndex=H.featureIndex;break}for(var se=y;se<_;se++){var le=r.get(se);A.iconBox={x1:le.x1,y1:le.y1,x2:le.x2,y2:le.y2,anchorPointX:le.anchorPointX,anchorPointY:le.anchorPointY},A.iconFeatureIndex=le.featureIndex;break}for(var xe=S;xe<k;xe++){var de=r.get(xe);A.verticalIconBox={x1:de.x1,y1:de.y1,x2:de.x2,y2:de.y2,anchorPointX:de.anchorPointX,anchorPointY:de.anchorPointY},A.verticalIconFeatureIndex=de.featureIndex;break}return A},Wr.prototype.deserializeCollisionBoxes=function(r){this.collisionArrays=[];for(var i=0;i<this.symbolInstances.length;i++){var s=this.symbolInstances.get(i);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(r,s.textBoxStartIndex,s.textBoxEndIndex,s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s.iconBoxStartIndex,s.iconBoxEndIndex,s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex))}},Wr.prototype.hasTextData=function(){return this.text.segments.get().length>0},Wr.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Wr.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Wr.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Wr.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Wr.prototype.addIndicesForPlacedSymbol=function(r,i){for(var s=r.placedSymbolArray.get(i),h=s.vertexStartIndex+4*s.numGlyphs,m=s.vertexStartIndex;m<h;m+=4)r.indexArray.emplaceBack(m,m+1,m+2),r.indexArray.emplaceBack(m+1,m+2,m+3)},Wr.prototype.getSortedSymbolIndexes=function(r){if(this.sortedAngle===r&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var i=Math.sin(r),s=Math.cos(r),h=[],m=[],y=[],_=0;_<this.symbolInstances.length;++_){y.push(_);var S=this.symbolInstances.get(_);h.push(0|Math.round(i*S.anchorX+s*S.anchorY)),m.push(S.featureIndex)}return y.sort(function(k,A){return h[k]-h[A]||m[A]-m[k]}),y},Wr.prototype.addToSortKeyRanges=function(r,i){var s=this.sortKeyRanges[this.sortKeyRanges.length-1];s&&s.sortKey===i?s.symbolInstanceEnd=r+1:this.sortKeyRanges.push({sortKey:i,symbolInstanceStart:r,symbolInstanceEnd:r+1})},Wr.prototype.sortFeatures=function(r){var i=this;if(this.sortFeaturesByY&&this.sortedAngle!==r&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(r),this.sortedAngle=r,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var s=0,h=this.symbolInstanceIndexes;s<h.length;s+=1){var m=this.symbolInstances.get(h[s]);this.featureSortOrder.push(m.featureIndex),[m.rightJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.leftJustifiedTextSymbolIndex].forEach(function(y,_,S){y>=0&&S.indexOf(y)===_&&i.addIndicesForPlacedSymbol(i.text,y)}),m.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,m.verticalPlacedTextSymbolIndex),m.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.placedIconSymbolIndex),m.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},gt("SymbolBucket",Wr,{omit:["layers","collisionBoxArray","features","compareText"]}),Wr.MAX_GLYPHS=65535,Wr.addDynamicAttributes=s0;var $M=new ui({"symbol-placement":new Ct(Z.layout_symbol["symbol-placement"]),"symbol-spacing":new Ct(Z.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ct(Z.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new _t(Z.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ct(Z.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Ct(Z.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Ct(Z.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ct(Z.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ct(Z.layout_symbol["icon-rotation-alignment"]),"icon-size":new _t(Z.layout_symbol["icon-size"]),"icon-text-fit":new Ct(Z.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ct(Z.layout_symbol["icon-text-fit-padding"]),"icon-image":new _t(Z.layout_symbol["icon-image"]),"icon-rotate":new _t(Z.layout_symbol["icon-rotate"]),"icon-padding":new Ct(Z.layout_symbol["icon-padding"]),"icon-keep-upright":new Ct(Z.layout_symbol["icon-keep-upright"]),"icon-offset":new _t(Z.layout_symbol["icon-offset"]),"icon-anchor":new _t(Z.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ct(Z.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ct(Z.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ct(Z.layout_symbol["text-rotation-alignment"]),"text-field":new _t(Z.layout_symbol["text-field"]),"text-font":new _t(Z.layout_symbol["text-font"]),"text-size":new _t(Z.layout_symbol["text-size"]),"text-max-width":new _t(Z.layout_symbol["text-max-width"]),"text-line-height":new Ct(Z.layout_symbol["text-line-height"]),"text-letter-spacing":new _t(Z.layout_symbol["text-letter-spacing"]),"text-justify":new _t(Z.layout_symbol["text-justify"]),"text-radial-offset":new _t(Z.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ct(Z.layout_symbol["text-variable-anchor"]),"text-anchor":new _t(Z.layout_symbol["text-anchor"]),"text-max-angle":new Ct(Z.layout_symbol["text-max-angle"]),"text-writing-mode":new Ct(Z.layout_symbol["text-writing-mode"]),"text-rotate":new _t(Z.layout_symbol["text-rotate"]),"text-padding":new Ct(Z.layout_symbol["text-padding"]),"text-keep-upright":new Ct(Z.layout_symbol["text-keep-upright"]),"text-transform":new _t(Z.layout_symbol["text-transform"]),"text-offset":new _t(Z.layout_symbol["text-offset"]),"text-allow-overlap":new Ct(Z.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Ct(Z.layout_symbol["text-ignore-placement"]),"text-optional":new Ct(Z.layout_symbol["text-optional"])}),l0={paint:new ui({"icon-opacity":new _t(Z.paint_symbol["icon-opacity"]),"icon-color":new _t(Z.paint_symbol["icon-color"]),"icon-halo-color":new _t(Z.paint_symbol["icon-halo-color"]),"icon-halo-width":new _t(Z.paint_symbol["icon-halo-width"]),"icon-halo-blur":new _t(Z.paint_symbol["icon-halo-blur"]),"icon-translate":new Ct(Z.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ct(Z.paint_symbol["icon-translate-anchor"]),"text-opacity":new _t(Z.paint_symbol["text-opacity"]),"text-color":new _t(Z.paint_symbol["text-color"],{runtimeType:ot,getOverride:function(r){return r.textColor},hasOverride:function(r){return!!r.textColor}}),"text-halo-color":new _t(Z.paint_symbol["text-halo-color"]),"text-halo-width":new _t(Z.paint_symbol["text-halo-width"]),"text-halo-blur":new _t(Z.paint_symbol["text-halo-blur"]),"text-translate":new Ct(Z.paint_symbol["text-translate"]),"text-translate-anchor":new Ct(Z.paint_symbol["text-translate-anchor"])}),layout:$M},Ec=function(r){this.type=r.property.overrides?r.property.overrides.runtimeType:yt,this.defaultValue=r};Ec.prototype.evaluate=function(r){if(r.formattedSection){var i=this.defaultValue.property.overrides;if(i&&i.hasOverride(r.formattedSection))return i.getOverride(r.formattedSection)}return r.feature&&r.featureState?this.defaultValue.evaluate(r.feature,r.featureState):this.defaultValue.property.specification.default},Ec.prototype.eachChild=function(r){this.defaultValue.isConstant()||r(this.defaultValue.value._styleExpression.expression)},Ec.prototype.outputDefined=function(){return!1},Ec.prototype.serialize=function(){return null},gt("FormatSectionOverride",Ec,{omit:["defaultValue"]});var VM=function(r){function i(s){r.call(this,s,l0)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.recalculate=function(s,h){if(r.prototype.recalculate.call(this,s,h),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var m=this.layout.get("text-writing-mode");if(m){for(var y=[],_=0,S=m;_<S.length;_+=1){var k=S[_];y.indexOf(k)<0&&y.push(k)}this.layout._values["text-writing-mode"]=y}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},i.prototype.getValueAndResolveTokens=function(s,h,m,y){var _=this.layout.get(s).evaluate(h,{},m,y),S=this._unevaluatedLayout._values[s];return S.isDataDriven()||Zl(S.value)||!_?_:function(k,A){return A.replace(/{([^{}]+)}/g,function(R,O){return O in k?String(k[O]):""})}(h.properties,_)},i.prototype.createBucket=function(s){return new Wr(s)},i.prototype.queryRadius=function(){return 0},i.prototype.queryIntersectsFeature=function(){return!1},i.prototype._setPaintOverrides=function(){for(var s=0,h=l0.paint.overridableProperties;s<h.length;s+=1){var m=h[s];if(i.hasPaintOverride(this.layout,m)){var y,_=this.paint.get(m),S=new Ec(_),k=new Js(S,_.property.specification);y=_.value.kind==="constant"||_.value.kind==="source"?new Kl("source",k):new Qs("composite",k,_.value.zoomStops,_.value._interpolationType),this.paint._values[m]=new _i(_.property,y,_.parameters)}}},i.prototype._handleOverridablePaintPropertyUpdate=function(s,h,m){return!(!this.layout||h.isDataDriven()||m.isDataDriven())&&i.hasPaintOverride(this.layout,s)},i.hasPaintOverride=function(s,h){var m=s.get("text-field"),y=l0.paint.properties[h],_=!1,S=function(R){for(var O=0,$=R;O<$.length;O+=1)if(y.overrides&&y.overrides.hasOverride($[O]))return void(_=!0)};if(m.value.kind==="constant"&&m.value.value instanceof Xn)S(m.value.value.sections);else if(m.value.kind==="source"){var k=function(R){_||(R instanceof gi&&En(R.value)===Gr?S(R.value.sections):R instanceof Ao?S(R.sections):R.eachChild(k))},A=m.value;A._styleExpression&&k(A._styleExpression.expression)}return _},i}(Zo),qM={paint:new ui({"background-color":new Ct(Z.paint_background["background-color"]),"background-pattern":new xi(Z.paint_background["background-pattern"]),"background-opacity":new Ct(Z.paint_background["background-opacity"])})},WM=function(r){function i(s){r.call(this,s,qM)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i}(Zo),GM={paint:new ui({"raster-opacity":new Ct(Z.paint_raster["raster-opacity"]),"raster-hue-rotate":new Ct(Z.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ct(Z.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ct(Z.paint_raster["raster-brightness-max"]),"raster-saturation":new Ct(Z.paint_raster["raster-saturation"]),"raster-contrast":new Ct(Z.paint_raster["raster-contrast"]),"raster-resampling":new Ct(Z.paint_raster["raster-resampling"]),"raster-fade-duration":new Ct(Z.paint_raster["raster-fade-duration"])})},HM=function(r){function i(s){r.call(this,s,GM)}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i}(Zo),ZM=function(r){function i(s){r.call(this,s,{}),this.implementation=s}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},i.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},i.prototype.recalculate=function(){},i.prototype.updateTransitions=function(){},i.prototype.hasTransition=function(){},i.prototype.serialize=function(){},i.prototype.onAdd=function(s){this.implementation.onAdd&&this.implementation.onAdd(s,s.painter.context.gl)},i.prototype.onRemove=function(s){this.implementation.onRemove&&this.implementation.onRemove(s,s.painter.context.gl)},i}(Zo),KM={circle:Gv,heatmap:RA,hillshade:zA,fill:YA,"fill-extrusion":aM,line:hM,symbol:VM,background:WM,raster:HM},bw=I.HTMLImageElement,ww=I.HTMLCanvasElement,Sw=I.HTMLVideoElement,Ew=I.ImageData,fm=I.ImageBitmap,hu=function(r,i,s,h){this.context=r,this.format=s,this.texture=r.gl.createTexture(),this.update(i,h)};hu.prototype.update=function(r,i,s){var h=r.width,m=r.height,y=!(this.size&&this.size[0]===h&&this.size[1]===m||s),_=this.context,S=_.gl;if(this.useMipmap=!!(i&&i.useMipmap),S.bindTexture(S.TEXTURE_2D,this.texture),_.pixelStoreUnpackFlipY.set(!1),_.pixelStoreUnpack.set(1),_.pixelStoreUnpackPremultiplyAlpha.set(this.format===S.RGBA&&(!i||i.premultiply!==!1)),y)this.size=[h,m],r instanceof bw||r instanceof ww||r instanceof Sw||r instanceof Ew||fm&&r instanceof fm?S.texImage2D(S.TEXTURE_2D,0,this.format,this.format,S.UNSIGNED_BYTE,r):S.texImage2D(S.TEXTURE_2D,0,this.format,h,m,0,this.format,S.UNSIGNED_BYTE,r.data);else{var k=s||{x:0,y:0},A=k.x,R=k.y;r instanceof bw||r instanceof ww||r instanceof Sw||r instanceof Ew||fm&&r instanceof fm?S.texSubImage2D(S.TEXTURE_2D,0,A,R,S.RGBA,S.UNSIGNED_BYTE,r):S.texSubImage2D(S.TEXTURE_2D,0,A,R,h,m,S.RGBA,S.UNSIGNED_BYTE,r.data)}this.useMipmap&&this.isSizePowerOfTwo()&&S.generateMipmap(S.TEXTURE_2D)},hu.prototype.bind=function(r,i,s){var h=this.context.gl;h.bindTexture(h.TEXTURE_2D,this.texture),s!==h.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(s=h.LINEAR),r!==this.filter&&(h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,r),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,s||r),this.filter=r),i!==this.wrap&&(h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,i),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,i),this.wrap=i)},hu.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},hu.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var u0=function(r){var i=this;this._callback=r,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){i._triggered=!1,i._callback()})};u0.prototype.trigger=function(){var r=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){r._triggered=!1,r._callback()},0))},u0.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Cc=function(r,i,s){this.target=r,this.parent=i,this.mapId=s,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},pe(["receive","process"],this),this.invoker=new u0(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Ce()?r:I};function Cw(r,i,s){var h=2*Math.PI*6378137/256/Math.pow(2,s);return[r*h-2*Math.PI*6378137/2,i*h-2*Math.PI*6378137/2]}Cc.prototype.send=function(r,i,s,h,m){var y=this;m===void 0&&(m=!1);var _=Math.round(1e18*Math.random()).toString(36).substring(0,10);s&&(this.callbacks[_]=s);var S=Ze(this.globalScope)?void 0:[];return this.target.postMessage({id:_,type:r,hasCallback:!!s,targetMapId:h,mustQueue:m,sourceMapId:this.mapId,data:Ro(i,S)},S),{cancel:function(){s&&delete y.callbacks[_],y.target.postMessage({id:_,type:"<cancel>",targetMapId:h,sourceMapId:y.mapId})}}},Cc.prototype.receive=function(r){var i=r.data,s=i.id;if(s&&(!i.targetMapId||this.mapId===i.targetMapId))if(i.type==="<cancel>"){delete this.tasks[s];var h=this.cancelCallbacks[s];delete this.cancelCallbacks[s],h&&h()}else Ce()||i.mustQueue?(this.tasks[s]=i,this.taskQueue.push(s),this.invoker.trigger()):this.processTask(s,i)},Cc.prototype.process=function(){if(this.taskQueue.length){var r=this.taskQueue.shift(),i=this.tasks[r];delete this.tasks[r],this.taskQueue.length&&this.invoker.trigger(),i&&this.processTask(r,i)}},Cc.prototype.processTask=function(r,i){var s=this;if(i.type==="<response>"){var h=this.callbacks[r];delete this.callbacks[r],h&&(i.error?h(Vi(i.error)):h(null,Vi(i.data)))}else{var m=!1,y=Ze(this.globalScope)?void 0:[],_=i.hasCallback?function(R,O){m=!0,delete s.cancelCallbacks[r],s.target.postMessage({id:r,type:"<response>",sourceMapId:s.mapId,error:R?Ro(R):null,data:Ro(O,y)},y)}:function(R){m=!0},S=null,k=Vi(i.data);if(this.parent[i.type])S=this.parent[i.type](i.sourceMapId,k,_);else if(this.parent.getWorkerSource){var A=i.type.split(".");S=this.parent.getWorkerSource(i.sourceMapId,A[0],k.source)[A[1]](k,_)}else _(new Error("Could not find function "+i.type));!m&&S&&S.cancel&&(this.cancelCallbacks[r]=S.cancel)}},Cc.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Fn=function(r,i){r&&(i?this.setSouthWest(r).setNorthEast(i):r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1]))};Fn.prototype.setNorthEast=function(r){return this._ne=r instanceof ln?new ln(r.lng,r.lat):ln.convert(r),this},Fn.prototype.setSouthWest=function(r){return this._sw=r instanceof ln?new ln(r.lng,r.lat):ln.convert(r),this},Fn.prototype.extend=function(r){var i,s,h=this._sw,m=this._ne;if(r instanceof ln)i=r,s=r;else{if(!(r instanceof Fn))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(Fn.convert(r)):this.extend(ln.convert(r)):this;if(s=r._ne,!(i=r._sw)||!s)return this}return h||m?(h.lng=Math.min(i.lng,h.lng),h.lat=Math.min(i.lat,h.lat),m.lng=Math.max(s.lng,m.lng),m.lat=Math.max(s.lat,m.lat)):(this._sw=new ln(i.lng,i.lat),this._ne=new ln(s.lng,s.lat)),this},Fn.prototype.getCenter=function(){return new ln((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Fn.prototype.getSouthWest=function(){return this._sw},Fn.prototype.getNorthEast=function(){return this._ne},Fn.prototype.getNorthWest=function(){return new ln(this.getWest(),this.getNorth())},Fn.prototype.getSouthEast=function(){return new ln(this.getEast(),this.getSouth())},Fn.prototype.getWest=function(){return this._sw.lng},Fn.prototype.getSouth=function(){return this._sw.lat},Fn.prototype.getEast=function(){return this._ne.lng},Fn.prototype.getNorth=function(){return this._ne.lat},Fn.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Fn.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Fn.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Fn.prototype.contains=function(r){var i=ln.convert(r),s=i.lng,h=i.lat,m=this._sw.lng<=s&&s<=this._ne.lng;return this._sw.lng>this._ne.lng&&(m=this._sw.lng>=s&&s>=this._ne.lng),this._sw.lat<=h&&h<=this._ne.lat&&m},Fn.convert=function(r){return!r||r instanceof Fn?r:new Fn(r)};var ln=function(r,i){if(isNaN(r)||isNaN(i))throw new Error("Invalid LngLat object: ("+r+", "+i+")");if(this.lng=+r,this.lat=+i,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};ln.prototype.wrap=function(){return new ln(F(this.lng,-180,180),this.lat)},ln.prototype.toArray=function(){return[this.lng,this.lat]},ln.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},ln.prototype.distanceTo=function(r){var i=Math.PI/180,s=this.lat*i,h=r.lat*i,m=Math.sin(s)*Math.sin(h)+Math.cos(s)*Math.cos(h)*Math.cos((r.lng-this.lng)*i);return 63710088e-1*Math.acos(Math.min(m,1))},ln.prototype.toBounds=function(r){r===void 0&&(r=0);var i=360*r/40075017,s=i/Math.cos(Math.PI/180*this.lat);return new Fn(new ln(this.lng-s,this.lat-i),new ln(this.lng+s,this.lat+i))},ln.convert=function(r){if(r instanceof ln)return r;if(Array.isArray(r)&&(r.length===2||r.length===3))return new ln(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&typeof r=="object"&&r!==null)return new ln(Number("lng"in r?r.lng:r.lon),Number(r.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var kw=2*Math.PI*63710088e-1;function Tw(r){return kw*Math.cos(r*Math.PI/180)}function Iw(r){return(180+r)/360}function Pw(r){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r*Math.PI/360)))/360}function Aw(r,i){return r/Tw(i)}function c0(r){return 360/Math.PI*Math.atan(Math.exp((180-360*r)*Math.PI/180))-90}var du=function(r,i,s){s===void 0&&(s=0),this.x=+r,this.y=+i,this.z=+s};du.fromLngLat=function(r,i){i===void 0&&(i=0);var s=ln.convert(r);return new du(Iw(s.lng),Pw(s.lat),Aw(i,s.lat))},du.prototype.toLngLat=function(){return new ln(360*this.x-180,c0(this.y))},du.prototype.toAltitude=function(){return this.z*Tw(c0(this.y))},du.prototype.meterInMercatorCoordinateUnits=function(){return 1/kw*(r=c0(this.y),1/Math.cos(r*Math.PI/180));var r};var fu=function(r,i,s){this.z=r,this.x=i,this.y=s,this.key=Ah(0,r,r,i,s)};fu.prototype.equals=function(r){return this.z===r.z&&this.x===r.x&&this.y===r.y},fu.prototype.url=function(r,i){var s,h,m,y,_,S=(h=this.y,m=this.z,y=Cw(256*(s=this.x),256*(h=Math.pow(2,m)-h-1),m),_=Cw(256*(s+1),256*(h+1),m),y[0]+","+y[1]+","+_[0]+","+_[1]),k=function(A,R,O){for(var $,H="",se=A;se>0;se--)H+=(R&($=1<<se-1)?1:0)+(O&$?2:0);return H}(this.z,this.x,this.y);return r[(this.x+this.y)%r.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(i==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",k).replace("{bbox-epsg-3857}",S)},fu.prototype.getTilePoint=function(r){var i=Math.pow(2,this.z);return new T(8192*(r.x*i-this.x),8192*(r.y*i-this.y))},fu.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Mw=function(r,i){this.wrap=r,this.canonical=i,this.key=Ah(r,i.z,i.z,i.x,i.y)},jn=function(r,i,s,h,m){this.overscaledZ=r,this.wrap=i,this.canonical=new fu(s,+h,+m),this.key=Ah(i,r,s,h,m)};function Ah(r,i,s,h,m){(r*=2)<0&&(r=-1*r-1);var y=1<<s;return(y*y*r+y*m+h).toString(36)+s.toString(36)+i.toString(36)}jn.prototype.equals=function(r){return this.overscaledZ===r.overscaledZ&&this.wrap===r.wrap&&this.canonical.equals(r.canonical)},jn.prototype.scaledTo=function(r){var i=this.canonical.z-r;return r>this.canonical.z?new jn(r,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new jn(r,this.wrap,r,this.canonical.x>>i,this.canonical.y>>i)},jn.prototype.calculateScaledKey=function(r,i){var s=this.canonical.z-r;return r>this.canonical.z?Ah(this.wrap*+i,r,this.canonical.z,this.canonical.x,this.canonical.y):Ah(this.wrap*+i,r,r,this.canonical.x>>s,this.canonical.y>>s)},jn.prototype.isChildOf=function(r){if(r.wrap!==this.wrap)return!1;var i=this.canonical.z-r.canonical.z;return r.overscaledZ===0||r.overscaledZ<this.overscaledZ&&r.canonical.x===this.canonical.x>>i&&r.canonical.y===this.canonical.y>>i},jn.prototype.children=function(r){if(this.overscaledZ>=r)return[new jn(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var i=this.canonical.z+1,s=2*this.canonical.x,h=2*this.canonical.y;return[new jn(i,this.wrap,i,s,h),new jn(i,this.wrap,i,s+1,h),new jn(i,this.wrap,i,s,h+1),new jn(i,this.wrap,i,s+1,h+1)]},jn.prototype.isLessThan=function(r){return this.wrap<r.wrap||!(this.wrap>r.wrap)&&(this.overscaledZ<r.overscaledZ||!(this.overscaledZ>r.overscaledZ)&&(this.canonical.x<r.canonical.x||!(this.canonical.x>r.canonical.x)&&this.canonical.y<r.canonical.y))},jn.prototype.wrapped=function(){return new jn(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},jn.prototype.unwrapTo=function(r){return new jn(this.overscaledZ,r,this.canonical.z,this.canonical.x,this.canonical.y)},jn.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},jn.prototype.toUnwrapped=function(){return new Mw(this.wrap,this.canonical)},jn.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},jn.prototype.getTilePoint=function(r){return this.canonical.getTilePoint(new du(r.x-this.wrap,r.y))},gt("CanonicalTileID",fu),gt("OverscaledTileID",jn,{omit:["posMatrix"]});var Ps=function(r,i,s){if(this.uid=r,i.height!==i.width)throw new RangeError("DEM tiles must be square");if(s&&s!=="mapbox"&&s!=="terrarium")return he('"'+s+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=i.height;var h=this.dim=i.height-2;this.data=new Uint32Array(i.data.buffer),this.encoding=s||"mapbox";for(var m=0;m<h;m++)this.data[this._idx(-1,m)]=this.data[this._idx(0,m)],this.data[this._idx(h,m)]=this.data[this._idx(h-1,m)],this.data[this._idx(m,-1)]=this.data[this._idx(m,0)],this.data[this._idx(m,h)]=this.data[this._idx(m,h-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(h,-1)]=this.data[this._idx(h-1,0)],this.data[this._idx(-1,h)]=this.data[this._idx(0,h-1)],this.data[this._idx(h,h)]=this.data[this._idx(h-1,h-1)]};Ps.prototype.get=function(r,i){var s=new Uint8Array(this.data.buffer),h=4*this._idx(r,i);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(s[h],s[h+1],s[h+2])},Ps.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Ps.prototype._idx=function(r,i){if(r<-1||r>=this.dim+1||i<-1||i>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(i+1)*this.stride+(r+1)},Ps.prototype._unpackMapbox=function(r,i,s){return(256*r*256+256*i+s)/10-1e4},Ps.prototype._unpackTerrarium=function(r,i,s){return 256*r+i+s/256-32768},Ps.prototype.getPixels=function(){return new Zi({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Ps.prototype.backfillBorder=function(r,i,s){if(this.dim!==r.dim)throw new Error("dem dimension mismatch");var h=i*this.dim,m=i*this.dim+this.dim,y=s*this.dim,_=s*this.dim+this.dim;switch(i){case-1:h=m-1;break;case 1:m=h+1}switch(s){case-1:y=_-1;break;case 1:_=y+1}for(var S=-i*this.dim,k=-s*this.dim,A=y;A<_;A++)for(var R=h;R<m;R++)this.data[this._idx(R,A)]=r.data[this._idx(R+S,A+k)]},gt("DEMData",Ps);var mm=function(r){this._stringToNumber={},this._numberToString=[];for(var i=0;i<r.length;i++){var s=r[i];this._stringToNumber[s]=i,this._numberToString[i]=s}};mm.prototype.encode=function(r){return this._stringToNumber[r]},mm.prototype.decode=function(r){return this._numberToString[r]};var ym=function(r,i,s,h,m){this.type="Feature",this._vectorTileFeature=r,r._z=i,r._x=s,r._y=h,this.properties=r.properties,this.id=m},p0={geometry:{configurable:!0}};p0.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},p0.geometry.set=function(r){this._geometry=r},ym.prototype.toJSON=function(){var r={geometry:this.geometry};for(var i in this)i!=="_geometry"&&i!=="_vectorTileFeature"&&(r[i]=this[i]);return r},Object.defineProperties(ym.prototype,p0);var kc=function(){this.state={},this.stateChanges={},this.deletedStates={}};kc.prototype.updateState=function(r,i,s){var h=String(i);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][h]=this.stateChanges[r][h]||{},V(this.stateChanges[r][h],s),this.deletedStates[r]===null)for(var m in this.deletedStates[r]={},this.state[r])m!==h&&(this.deletedStates[r][m]=null);else if(this.deletedStates[r]&&this.deletedStates[r][h]===null)for(var y in this.deletedStates[r][h]={},this.state[r][h])s[y]||(this.deletedStates[r][h][y]=null);else for(var _ in s)this.deletedStates[r]&&this.deletedStates[r][h]&&this.deletedStates[r][h][_]===null&&delete this.deletedStates[r][h][_]},kc.prototype.removeFeatureState=function(r,i,s){if(this.deletedStates[r]!==null){var h=String(i);if(this.deletedStates[r]=this.deletedStates[r]||{},s&&i!==void 0)this.deletedStates[r][h]!==null&&(this.deletedStates[r][h]=this.deletedStates[r][h]||{},this.deletedStates[r][h][s]=null);else if(i!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][h])for(s in this.deletedStates[r][h]={},this.stateChanges[r][h])this.deletedStates[r][h][s]=null;else this.deletedStates[r][h]=null;else this.deletedStates[r]=null}},kc.prototype.getState=function(r,i){var s=String(i),h=V({},(this.state[r]||{})[s],(this.stateChanges[r]||{})[s]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){var m=this.deletedStates[r][i];if(m===null)return{};for(var y in m)delete h[y]}return h},kc.prototype.initializeTileState=function(r,i){r.setFeatureState(this.state,i)},kc.prototype.coalesceChanges=function(r,i){var s={};for(var h in this.stateChanges){this.state[h]=this.state[h]||{};var m={};for(var y in this.stateChanges[h])this.state[h][y]||(this.state[h][y]={}),V(this.state[h][y],this.stateChanges[h][y]),m[y]=this.state[h][y];s[h]=m}for(var _ in this.deletedStates){this.state[_]=this.state[_]||{};var S={};if(this.deletedStates[_]===null)for(var k in this.state[_])S[k]={},this.state[_][k]={};else for(var A in this.deletedStates[_]){if(this.deletedStates[_][A]===null)this.state[_][A]={};else for(var R=0,O=Object.keys(this.deletedStates[_][A]);R<O.length;R+=1)delete this.state[_][A][O[R]];S[A]=this.state[_][A]}s[_]=s[_]||{},V(s[_],S)}if(this.stateChanges={},this.deletedStates={},Object.keys(s).length!==0)for(var $ in r)r[$].setFeatureState(s,i)};var As=function(r,i){this.tileID=r,this.x=r.canonical.x,this.y=r.canonical.y,this.z=r.canonical.z,this.grid=new ca(8192,16,0),this.grid3D=new ca(8192,16,0),this.featureIndexArray=new N,this.promoteId=i};function Rw(r,i,s,h,m){return Te(r,function(y,_){var S=i instanceof iu?i.get(_):null;return S&&S.evaluate?S.evaluate(s,h,m):S})}function Lw(r){for(var i=1/0,s=1/0,h=-1/0,m=-1/0,y=0,_=r;y<_.length;y+=1){var S=_[y];i=Math.min(i,S.x),s=Math.min(s,S.y),h=Math.max(h,S.x),m=Math.max(m,S.y)}return{minX:i,minY:s,maxX:h,maxY:m}}function XM(r,i){return i-r}As.prototype.insert=function(r,i,s,h,m,y){var _=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(s,h,m);for(var S=y?this.grid3D:this.grid,k=0;k<i.length;k++){for(var A=i[k],R=[1/0,1/0,-1/0,-1/0],O=0;O<A.length;O++){var $=A[O];R[0]=Math.min(R[0],$.x),R[1]=Math.min(R[1],$.y),R[2]=Math.max(R[2],$.x),R[3]=Math.max(R[3],$.y)}R[0]<8192&&R[1]<8192&&R[2]>=0&&R[3]>=0&&S.insert(_,R[0],R[1],R[2],R[3])}},As.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new yc.VectorTile(new im(this.rawTileData)).layers,this.sourceLayerCoder=new mm(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},As.prototype.query=function(r,i,s,h){var m=this;this.loadVTLayers();for(var y=r.params||{},_=8192/r.tileSize/r.scale,S=Qu(y.filter),k=r.queryGeometry,A=r.queryPadding*_,R=Lw(k),O=this.grid.query(R.minX-A,R.minY-A,R.maxX+A,R.maxY+A),$=Lw(r.cameraQueryGeometry),H=this.grid3D.query($.minX-A,$.minY-A,$.maxX+A,$.maxY+A,function(ze,Be,We,Je){return function(rt,St,lt,Tt,pt){for(var ir=0,jt=rt;ir<jt.length;ir+=1){var xt=jt[ir];if(St<=xt.x&&lt<=xt.y&&Tt>=xt.x&&pt>=xt.y)return!0}var sr=[new T(St,lt),new T(St,pt),new T(Tt,pt),new T(Tt,lt)];if(rt.length>2){for(var Xt=0,_r=sr;Xt<_r.length;Xt+=1)if(Xo(rt,_r[Xt]))return!0}for(var Pt=0;Pt<rt.length-1;Pt++)if(uu(rt[Pt],rt[Pt+1],sr))return!0;return!1}(r.cameraQueryGeometry,ze-A,Be-A,We+A,Je+A)}),se=0,le=H;se<le.length;se+=1)O.push(le[se]);O.sort(XM);for(var xe,de={},Ie=function(ze){var Be=O[ze];if(Be!==xe){xe=Be;var We=m.featureIndexArray.get(Be),Je=null;m.loadMatchingFeature(de,We.bucketIndex,We.sourceLayerIndex,We.featureIndex,S,y.layers,y.availableImages,i,s,h,function(rt,St,lt){return Je||(Je=fn(rt)),St.queryIntersectsFeature(k,rt,lt,Je,m.z,r.transform,_,r.pixelPosMatrix)})}},Me=0;Me<O.length;Me++)Ie(Me);return de},As.prototype.loadMatchingFeature=function(r,i,s,h,m,y,_,S,k,A,R){var O=this.bucketLayerIDs[i];if(!y||function(rt,St){for(var lt=0;lt<rt.length;lt++)if(St.indexOf(rt[lt])>=0)return!0;return!1}(y,O)){var $=this.sourceLayerCoder.decode(s),H=this.vtLayers[$].feature(h);if(m.needGeometry){var se=Cn(H,!0);if(!m.filter(new cr(this.tileID.overscaledZ),se,this.tileID.canonical))return}else if(!m.filter(new cr(this.tileID.overscaledZ),H))return;for(var le=this.getId(H,$),xe=0;xe<O.length;xe++){var de=O[xe];if(!(y&&y.indexOf(de)<0)){var Ie=S[de];if(Ie){var Me={};le!==void 0&&A&&(Me=A.getState(Ie.sourceLayer||"_geojsonTileLayer",le));var ze=V({},k[de]);ze.paint=Rw(ze.paint,Ie.paint,H,Me,_),ze.layout=Rw(ze.layout,Ie.layout,H,Me,_);var Be=!R||R(H,Ie,Me);if(Be){var We=new ym(H,this.z,this.x,this.y,le);We.layer=ze;var Je=r[de];Je===void 0&&(Je=r[de]=[]),Je.push({featureIndex:h,feature:We,intersectionZ:Be})}}}}}},As.prototype.lookupSymbolFeatures=function(r,i,s,h,m,y,_,S){var k={};this.loadVTLayers();for(var A=Qu(m),R=0,O=r;R<O.length;R+=1)this.loadMatchingFeature(k,s,h,O[R],A,y,_,S,i);return k},As.prototype.hasLayer=function(r){for(var i=0,s=this.bucketLayerIDs;i<s.length;i+=1)for(var h=0,m=s[i];h<m.length;h+=1)if(r===m[h])return!0;return!1},As.prototype.getId=function(r,i){var s=r.id;return this.promoteId&&typeof(s=r.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[i]])=="boolean"&&(s=Number(s)),s},gt("FeatureIndex",As,{omit:["rawTileData","sourceLayerCoder"]});var ei=function(r,i){this.tileID=r,this.uid=z(),this.uses=0,this.tileSize=i,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};ei.prototype.registerFadeDuration=function(r){var i=r+this.timeAdded;i<Ot.now()||this.fadeEndTime&&i<this.fadeEndTime||(this.fadeEndTime=i)},ei.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},ei.prototype.loadVectorData=function(r,i,s){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){for(var h in r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(A,R){var O={};if(!R)return O;for(var $=function(){var le=se[H],xe=le.layerIds.map(function(Me){return R.getLayer(Me)}).filter(Boolean);if(xe.length!==0){le.layers=xe,le.stateDependentLayerIds&&(le.stateDependentLayers=le.stateDependentLayerIds.map(function(Me){return xe.filter(function(ze){return ze.id===Me})[0]}));for(var de=0,Ie=xe;de<Ie.length;de+=1)O[Ie[de].id]=le}},H=0,se=A;H<se.length;H+=1)$();return O}(r.buckets,i.style),this.hasSymbolBuckets=!1,this.buckets){var m=this.buckets[h];if(m instanceof Wr){if(this.hasSymbolBuckets=!0,!s)break;m.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var y in this.buckets){var _=this.buckets[y];if(_ instanceof Wr&&_.hasRTLText){this.hasRTLText=!0,no.isLoading()||no.isLoaded()||dh()!=="deferred"||Lo();break}}for(var S in this.queryPadding=0,this.buckets){var k=this.buckets[S];this.queryPadding=Math.max(this.queryPadding,i.style.getLayer(S).queryRadius(k))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage)}else this.collisionBoxArray=new p},ei.prototype.unloadVectorData=function(){for(var r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},ei.prototype.getBucket=function(r){return this.buckets[r.id]},ei.prototype.upload=function(r){for(var i in this.buckets){var s=this.buckets[i];s.uploadPending()&&s.upload(r)}var h=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new hu(r,this.imageAtlas.image,h.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new hu(r,this.glyphAtlasImage,h.ALPHA),this.glyphAtlasImage=null)},ei.prototype.prepare=function(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)},ei.prototype.queryRenderedFeatures=function(r,i,s,h,m,y,_,S,k,A){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:h,cameraQueryGeometry:m,scale:y,tileSize:this.tileSize,pixelPosMatrix:A,transform:S,params:_,queryPadding:this.queryPadding*k},r,i,s):{}},ei.prototype.querySourceFeatures=function(r,i){var s=this.latestFeatureIndex;if(s&&s.rawTileData){var h=s.loadVTLayers(),m=i?i.sourceLayer:"",y=h._geojsonTileLayer||h[m];if(y)for(var _=Qu(i&&i.filter),S=this.tileID.canonical,k=S.z,A=S.x,R=S.y,O={z:k,x:A,y:R},$=0;$<y.length;$++){var H=y.feature($);if(_.needGeometry){var se=Cn(H,!0);if(!_.filter(new cr(this.tileID.overscaledZ),se,this.tileID.canonical))continue}else if(!_.filter(new cr(this.tileID.overscaledZ),H))continue;var le=s.getId(H,m),xe=new ym(H,k,A,R,le);xe.tile=O,r.push(xe)}}},ei.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},ei.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},ei.prototype.setExpiryData=function(r){var i=this.expirationTime;if(r.cacheControl){var s=ke(r.cacheControl);s["max-age"]&&(this.expirationTime=Date.now()+1e3*s["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){var h=Date.now(),m=!1;if(this.expirationTime>h)m=!1;else if(i)if(this.expirationTime<i)m=!0;else{var y=this.expirationTime-i;y?this.expirationTime=h+Math.max(y,3e4):m=!0}else m=!0;m?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},ei.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},ei.prototype.setFeatureState=function(r,i){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(r).length!==0){var s=this.latestFeatureIndex.loadVTLayers();for(var h in this.buckets)if(i.style.hasLayer(h)){var m=this.buckets[h],y=m.layers[0].sourceLayer||"_geojsonTileLayer",_=s[y],S=r[y];if(_&&S&&Object.keys(S).length!==0){m.update(S,_,this.imageAtlas&&this.imageAtlas.patternPositions||{});var k=i&&i.style&&i.style.getLayer(h);k&&(this.queryPadding=Math.max(this.queryPadding,k.queryRadius(m)))}}}},ei.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},ei.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Ot.now()},ei.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},ei.prototype.setHoldDuration=function(r){this.symbolFadeHoldUntil=Ot.now()+r},ei.prototype.setDependencies=function(r,i){for(var s={},h=0,m=i;h<m.length;h+=1)s[m[h]]=!0;this.dependencies[r]=s},ei.prototype.hasDependency=function(r,i){for(var s=0,h=r;s<h.length;s+=1){var m=this.dependencies[h[s]];if(m){for(var y=0,_=i;y<_.length;y+=1)if(m[_[y]])return!0}}return!1};var cl=I.performance,zw=function(r){this._marks={start:[r.url,"start"].join("#"),end:[r.url,"end"].join("#"),measure:r.url.toString()},cl.mark(this._marks.start)};zw.prototype.finish=function(){cl.mark(this._marks.end);var r=cl.getEntriesByName(this._marks.measure);return r.length===0&&(cl.measure(this._marks.measure,this._marks.start,this._marks.end),r=cl.getEntriesByName(this._marks.measure),cl.clearMarks(this._marks.start),cl.clearMarks(this._marks.end),cl.clearMeasures(this._marks.measure)),r},o.Actor=Cc,o.AlphaImage=pu,o.CanonicalTileID=fu,o.CollisionBoxArray=p,o.Color=Pr,o.DEMData=Ps,o.DataConstantProperty=Ct,o.DictionaryCoder=mm,o.EXTENT=8192,o.ErrorEvent=me,o.EvaluationParameters=cr,o.Event=re,o.Evented=ye,o.FeatureIndex=As,o.FillBucket=fa,o.FillExtrusionBucket=ma,o.ImageAtlas=Ih,o.ImagePosition=am,o.LineBucket=Ri,o.LngLat=ln,o.LngLatBounds=Fn,o.MercatorCoordinate=du,o.ONE_EM=24,o.OverscaledTileID=jn,o.Point=T,o.Point$1=T,o.Properties=ui,o.Protobuf=im,o.RGBAImage=Zi,o.RequestManager=er,o.RequestPerformance=zw,o.ResourceType=Sr,o.SegmentVector=X,o.SourceFeatureState=kc,o.StructArrayLayout1ui2=_h,o.StructArrayLayout2f1f2i16=Cs,o.StructArrayLayout2i4=Es,o.StructArrayLayout3ui6=Oa,o.StructArrayLayout4i8=mh,o.SymbolBucket=Wr,o.Texture=hu,o.Tile=ei,o.Transitionable=li,o.Uniform1f=et,o.Uniform1i=Ke,o.Uniform2f=Qe,o.Uniform3f=dt,o.Uniform4f=kt,o.UniformColor=Mt,o.UniformMatrix4f=xr,o.UnwrappedTileID=Mw,o.ValidationError=ie,o.WritingMode=go,o.ZoomHistory=uh,o.add=function(r,i,s){return r[0]=i[0]+s[0],r[1]=i[1]+s[1],r[2]=i[2]+s[2],r},o.addDynamicAttributes=s0,o.asyncAll=function(r,i,s){if(!r.length)return s(null,[]);var h=r.length,m=new Array(r.length),y=null;r.forEach(function(_,S){i(_,function(k,A){k&&(y=k),m[S]=A,--h==0&&s(y,m)})})},o.bezier=U,o.bindAll=pe,o.browser=Ot,o.cacheEntryPossiblyAdded=function(r){++Rt>ji&&(r.getActor().send("enforceCacheSizeLimit",On),Rt=0)},o.clamp=D,o.clearTileCache=function(r){var i=I.caches.delete("mapbox-tiles");r&&i.catch(r).then(function(){return r()})},o.clipLine=mw,o.clone=function(r){var i=new Ar(16);return i[0]=r[0],i[1]=r[1],i[2]=r[2],i[3]=r[3],i[4]=r[4],i[5]=r[5],i[6]=r[6],i[7]=r[7],i[8]=r[8],i[9]=r[9],i[10]=r[10],i[11]=r[11],i[12]=r[12],i[13]=r[13],i[14]=r[14],i[15]=r[15],i},o.clone$1=Se,o.clone$2=function(r){var i=new Ar(3);return i[0]=r[0],i[1]=r[1],i[2]=r[2],i},o.collisionCircleLayout=yM,o.config=Et,o.create=function(){var r=new Ar(16);return Ar!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r},o.create$1=function(){var r=new Ar(9);return Ar!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r},o.create$2=function(){var r=new Ar(4);return Ar!=Float32Array&&(r[1]=0,r[2]=0),r[0]=1,r[3]=1,r},o.createCommonjsModule=v,o.createExpression=Yu,o.createLayout=Jn,o.createStyleLayer=function(r){return r.type==="custom"?new ZM(r):new KM[r.type](r)},o.cross=function(r,i,s){var h=i[0],m=i[1],y=i[2],_=s[0],S=s[1],k=s[2];return r[0]=m*k-y*S,r[1]=y*_-h*k,r[2]=h*S-m*_,r},o.deepEqual=function r(i,s){if(Array.isArray(i)){if(!Array.isArray(s)||i.length!==s.length)return!1;for(var h=0;h<i.length;h++)if(!r(i[h],s[h]))return!1;return!0}if(typeof i=="object"&&i!==null&&s!==null){if(typeof s!="object"||Object.keys(i).length!==Object.keys(s).length)return!1;for(var m in i)if(!r(i[m],s[m]))return!1;return!0}return i===s},o.dot=function(r,i){return r[0]*i[0]+r[1]*i[1]+r[2]*i[2]},o.dot$1=function(r,i){return r[0]*i[0]+r[1]*i[1]+r[2]*i[2]+r[3]*i[3]},o.ease=G,o.emitValidationErrors=tu,o.endsWith=be,o.enforceCacheSizeLimit=function(r){Ft(),lr&&lr.then(function(i){i.keys().then(function(s){for(var h=0;h<s.length-r;h++)i.delete(s[h])})})},o.evaluateSizeForFeature=uw,o.evaluateSizeForZoom=cw,o.evaluateVariableOffset=vw,o.evented=hh,o.extend=V,o.featureFilter=Qu,o.filterObject=_e,o.fromRotation=function(r,i){var s=Math.sin(i),h=Math.cos(i);return r[0]=h,r[1]=s,r[2]=0,r[3]=-s,r[4]=h,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r},o.getAnchorAlignment=n0,o.getAnchorJustification=a0,o.getArrayBuffer=zr,o.getImage=j,o.getJSON=function(r,i){return ar(V(r,{type:"json"}),i)},o.getRTLTextPluginStatus=dh,o.getReferrer=Le,o.getVideo=function(r,i){var s,h,m=I.document.createElement("video");m.muted=!0,m.onloadstart=function(){i(null,m)};for(var y=0;y<r.length;y++){var _=I.document.createElement("source");s=r[y],h=void 0,(h=I.document.createElement("a")).href=s,(h.protocol!==I.document.location.protocol||h.host!==I.document.location.host)&&(m.crossOrigin="Anonymous"),_.src=r[y],m.appendChild(_)}return{cancel:function(){}}},o.identity=io,o.invert=function(r,i){var s=i[0],h=i[1],m=i[2],y=i[3],_=i[4],S=i[5],k=i[6],A=i[7],R=i[8],O=i[9],$=i[10],H=i[11],se=i[12],le=i[13],xe=i[14],de=i[15],Ie=s*S-h*_,Me=s*k-m*_,ze=s*A-y*_,Be=h*k-m*S,We=h*A-y*S,Je=m*A-y*k,rt=R*le-O*se,St=R*xe-$*se,lt=R*de-H*se,Tt=O*xe-$*le,pt=O*de-H*le,ir=$*de-H*xe,jt=Ie*ir-Me*pt+ze*Tt+Be*lt-We*St+Je*rt;return jt?(r[0]=(S*ir-k*pt+A*Tt)*(jt=1/jt),r[1]=(m*pt-h*ir-y*Tt)*jt,r[2]=(le*Je-xe*We+de*Be)*jt,r[3]=($*We-O*Je-H*Be)*jt,r[4]=(k*lt-_*ir-A*St)*jt,r[5]=(s*ir-m*lt+y*St)*jt,r[6]=(xe*ze-se*Je-de*Me)*jt,r[7]=(R*Je-$*ze+H*Me)*jt,r[8]=(_*pt-S*lt+A*rt)*jt,r[9]=(h*lt-s*pt-y*rt)*jt,r[10]=(se*We-le*ze+de*Ie)*jt,r[11]=(O*ze-R*We-H*Ie)*jt,r[12]=(S*St-_*Tt-k*rt)*jt,r[13]=(s*Tt-h*St+m*rt)*jt,r[14]=(le*Me-se*Be-xe*Ie)*jt,r[15]=(R*Be-O*Me+$*Ie)*jt,r):null},o.isChar=it,o.isMapboxURL=Rr,o.keysDifference=function(r,i){var s=[];for(var h in r)h in i||s.push(h);return s},o.makeRequest=ar,o.mapObject=Te,o.mercatorXfromLng=Iw,o.mercatorYfromLat=Pw,o.mercatorZfromAltitude=Aw,o.mul=Wv,o.multiply=Mi,o.mvt=yc,o.nextPowerOfTwo=function(r){return r<=1?1:Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))},o.normalize=function(r,i){var s=i[0],h=i[1],m=i[2],y=s*s+h*h+m*m;return y>0&&(y=1/Math.sqrt(y)),r[0]=i[0]*y,r[1]=i[1]*y,r[2]=i[2]*y,r},o.number=Mn,o.offscreenCanvasSupported=gr,o.ortho=function(r,i,s,h,m,y,_){var S=1/(i-s),k=1/(h-m),A=1/(y-_);return r[0]=-2*S,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*k,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*A,r[11]=0,r[12]=(i+s)*S,r[13]=(m+h)*k,r[14]=(_+y)*A,r[15]=1,r},o.parseGlyphPBF=function(r){return new im(r).readFields(TM,[])},o.pbf=im,o.performSymbolLayout=function(r,i,s,h,m,y,_){r.createArrays(),r.tilePixelRatio=8192/(512*r.overscaling),r.compareText={},r.iconsNeedLinear=!1;var S=r.layers[0].layout,k=r.layers[0]._unevaluatedLayout._values,A={};if(r.textSizeData.kind==="composite"){var R=r.textSizeData,O=R.maxZoom;A.compositeTextSizes=[k["text-size"].possiblyEvaluate(new cr(R.minZoom),_),k["text-size"].possiblyEvaluate(new cr(O),_)]}if(r.iconSizeData.kind==="composite"){var $=r.iconSizeData,H=$.maxZoom;A.compositeIconSizes=[k["icon-size"].possiblyEvaluate(new cr($.minZoom),_),k["icon-size"].possiblyEvaluate(new cr(H),_)]}A.layoutTextSize=k["text-size"].possiblyEvaluate(new cr(r.zoom+1),_),A.layoutIconSize=k["icon-size"].possiblyEvaluate(new cr(r.zoom+1),_),A.textMaxSize=k["text-size"].possiblyEvaluate(new cr(18));for(var se=24*S.get("text-line-height"),le=S.get("text-rotation-alignment")==="map"&&S.get("symbol-placement")!=="point",xe=S.get("text-keep-upright"),de=S.get("text-size"),Ie=function(){var Be=ze[Me],We=S.get("text-font").evaluate(Be,{},_).join(","),Je=de.evaluate(Be,{},_),rt=A.layoutTextSize.evaluate(Be,{},_),St=A.layoutIconSize.evaluate(Be,{},_),lt={horizontal:{},vertical:void 0},Tt=Be.text,pt=[0,0];if(Tt){var ir=Tt.toString(),jt=24*S.get("text-letter-spacing").evaluate(Be,{},_),xt=function(hr){for(var Zr=0,Fr=hr;Zr<Fr.length;Zr+=1)if(br=Fr[Zr].charCodeAt(0),it.Arabic(br)||it["Arabic Supplement"](br)||it["Arabic Extended-A"](br)||it["Arabic Presentation Forms-A"](br)||it["Arabic Presentation Forms-B"](br))return!1;var br;return!0}(ir)?jt:0,sr=S.get("text-anchor").evaluate(Be,{},_),Xt=S.get("text-variable-anchor");if(!Xt){var _r=S.get("text-radial-offset").evaluate(Be,{},_);pt=_r?vw(sr,[24*_r,o0]):S.get("text-offset").evaluate(Be,{},_).map(function(hr){return 24*hr})}var Pt=le?"center":S.get("text-justify").evaluate(Be,{},_),Cr=S.get("symbol-placement"),un=Cr==="point"?24*S.get("text-max-width").evaluate(Be,{},_):0,vn=function(){r.allowVerticalPlacement&&ch(ir)&&(lt.vertical=sm(Tt,i,s,m,We,un,se,sr,"left",xt,pt,go.vertical,!0,Cr,rt,Je))};if(!le&&Xt){for(var mn=Pt==="auto"?Xt.map(function(hr){return a0(hr)}):[Pt],cn=!1,_n=0;_n<mn.length;_n++){var qn=mn[_n];if(!lt.horizontal[qn])if(cn)lt.horizontal[qn]=lt.horizontal[0];else{var Wn=sm(Tt,i,s,m,We,un,se,"center",qn,xt,pt,go.horizontal,!1,Cr,rt,Je);Wn&&(lt.horizontal[qn]=Wn,cn=Wn.positionedLines.length===1)}}vn()}else{Pt==="auto"&&(Pt=a0(sr));var Si=sm(Tt,i,s,m,We,un,se,sr,Pt,xt,pt,go.horizontal,!1,Cr,rt,Je);Si&&(lt.horizontal[Pt]=Si),vn(),ch(ir)&&le&&xe&&(lt.vertical=sm(Tt,i,s,m,We,un,se,sr,Pt,xt,pt,go.vertical,!1,Cr,rt,Je))}}var ti=void 0,Ei=!1;if(Be.icon&&Be.icon.name){var kn=h[Be.icon.name];kn&&(ti=function(hr,Zr,Fr){var br=n0(Fr),Li=Zr[0]-hr.displaySize[0]*br.horizontalAlign,di=Zr[1]-hr.displaySize[1]*br.verticalAlign;return{image:hr,top:di,bottom:di+hr.displaySize[1],left:Li,right:Li+hr.displaySize[0]}}(m[Be.icon.name],S.get("icon-offset").evaluate(Be,{},_),S.get("icon-anchor").evaluate(Be,{},_)),Ei=kn.sdf,r.sdfIcons===void 0?r.sdfIcons=kn.sdf:r.sdfIcons!==kn.sdf&&he("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(kn.pixelRatio!==r.pixelRatio||S.get("icon-rotate").constantOr(1)!==0)&&(r.iconsNeedLinear=!0))}var ri=xw(lt.horizontal)||lt.vertical;r.iconsInText=!!ri&&ri.iconsInText,(ri||ti)&&function(hr,Zr,Fr,br,Li,di,nn,Ln,fi,kr,$a){var vo=di.textMaxSize.evaluate(Zr,{});vo===void 0&&(vo=nn);var Va,Tn=hr.layers[0].layout,qa=Tn.get("icon-offset").evaluate(Zr,{},$a),Jo=xw(Fr.horizontal),Tc=nn/24,mu=hr.tilePixelRatio*Tc,Ic=hr.tilePixelRatio*vo/24,Ms=hr.tilePixelRatio*Ln,Pc=hr.tilePixelRatio*Tn.get("symbol-spacing"),gm=Tn.get("text-padding")*hr.tilePixelRatio,Ac=Tn.get("icon-padding")*hr.tilePixelRatio,Mh=Tn.get("text-max-angle")/180*Math.PI,vm=Tn.get("text-rotation-alignment")==="map"&&Tn.get("symbol-placement")!=="point",_m=Tn.get("icon-rotation-alignment")==="map"&&Tn.get("symbol-placement")!=="point",Rs=Tn.get("symbol-placement"),Rh=Pc/2,Mc=Tn.get("icon-text-fit");br&&Mc!=="none"&&(hr.allowVerticalPlacement&&Fr.vertical&&(Va=lw(br,Fr.vertical,Mc,Tn.get("icon-text-fit-padding"),qa,Tc)),Jo&&(br=lw(br,Jo,Mc,Tn.get("icon-text-fit-padding"),qa,Tc)));var pl=function(YM,jh){jh.x<0||jh.x>=8192||jh.y<0||jh.y>=8192||function(In,ya,JM,hl,m0,Bw,Cm,Wa,km,Uh,Tm,Im,y0,Nw,$h,Fw,jw,Uw,$w,Vw,_o,Pm,qw,Ga,QM){var Ww,gu,Oc,Bc,Nc,Fc=In.addToLineVertexArray(ya,JM),Gw=0,Hw=0,Zw=0,Kw=0,g0=-1,v0=-1,Ls={},Xw=ae(""),_0=0,x0=0;if(Wa._unevaluatedLayout.getValue("text-radial-offset")===void 0?(_0=(Ww=Wa.layout.get("text-offset").evaluate(_o,{},Ga).map(function(qh){return 24*qh}))[0],x0=Ww[1]):(_0=24*Wa.layout.get("text-radial-offset").evaluate(_o,{},Ga),x0=o0),In.allowVerticalPlacement&&hl.vertical){var Yw=Wa.layout.get("text-rotate").evaluate(_o,{},Ga)+90;Bc=new hm(km,ya,Uh,Tm,Im,hl.vertical,y0,Nw,$h,Yw),Cm&&(Nc=new hm(km,ya,Uh,Tm,Im,Cm,jw,Uw,$h,Yw))}if(m0){var b0=Wa.layout.get("icon-rotate").evaluate(_o,{}),Jw=Wa.layout.get("icon-text-fit")!=="none",Qw=yw(m0,b0,qw,Jw),w0=Cm?yw(Cm,b0,qw,Jw):void 0;Oc=new hm(km,ya,Uh,Tm,Im,m0,jw,Uw,!1,b0),Gw=4*Qw.length;var e2=In.iconSizeData,Vh=null;e2.kind==="source"?(Vh=[128*Wa.layout.get("icon-size").evaluate(_o,{})])[0]>32640&&he(In.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):e2.kind==="composite"&&((Vh=[128*Pm.compositeIconSizes[0].evaluate(_o,{},Ga),128*Pm.compositeIconSizes[1].evaluate(_o,{},Ga)])[0]>32640||Vh[1]>32640)&&he(In.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),In.addSymbols(In.icon,Qw,Vh,Vw,$w,_o,!1,ya,Fc.lineStartIndex,Fc.lineLength,-1,Ga),g0=In.icon.placedSymbolArray.length-1,w0&&(Hw=4*w0.length,In.addSymbols(In.icon,w0,Vh,Vw,$w,_o,go.vertical,ya,Fc.lineStartIndex,Fc.lineLength,-1,Ga),v0=In.icon.placedSymbolArray.length-1)}for(var t2 in hl.horizontal){var Am=hl.horizontal[t2];if(!gu){Xw=ae(Am.text);var eR=Wa.layout.get("text-rotate").evaluate(_o,{},Ga);gu=new hm(km,ya,Uh,Tm,Im,Am,y0,Nw,$h,eR)}var r2=Am.positionedLines.length===1;if(Zw+=_w(In,ya,Am,Bw,Wa,$h,_o,Fw,Fc,hl.vertical?go.horizontal:go.horizontalOnly,r2?Object.keys(hl.horizontal):[t2],Ls,g0,Pm,Ga),r2)break}hl.vertical&&(Kw+=_w(In,ya,hl.vertical,Bw,Wa,$h,_o,Fw,Fc,go.vertical,["vertical"],Ls,v0,Pm,Ga));var tR=gu?gu.boxStartIndex:In.collisionBoxArray.length,rR=gu?gu.boxEndIndex:In.collisionBoxArray.length,nR=Bc?Bc.boxStartIndex:In.collisionBoxArray.length,iR=Bc?Bc.boxEndIndex:In.collisionBoxArray.length,oR=Oc?Oc.boxStartIndex:In.collisionBoxArray.length,aR=Oc?Oc.boxEndIndex:In.collisionBoxArray.length,sR=Nc?Nc.boxStartIndex:In.collisionBoxArray.length,lR=Nc?Nc.boxEndIndex:In.collisionBoxArray.length,Ha=-1,Mm=function(qh,i2){return qh&&qh.circleDiameter?Math.max(qh.circleDiameter,i2):i2};Ha=Mm(gu,Ha),Ha=Mm(Bc,Ha),Ha=Mm(Oc,Ha);var n2=(Ha=Mm(Nc,Ha))>-1?1:0;n2&&(Ha*=QM/24),In.glyphOffsetArray.length>=Wr.MAX_GLYPHS&&he("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),_o.sortKey!==void 0&&In.addToSortKeyRanges(In.symbolInstances.length,_o.sortKey),In.symbolInstances.emplaceBack(ya.x,ya.y,Ls.right>=0?Ls.right:-1,Ls.center>=0?Ls.center:-1,Ls.left>=0?Ls.left:-1,Ls.vertical||-1,g0,v0,Xw,tR,rR,nR,iR,oR,aR,sR,lR,Uh,Zw,Kw,Gw,Hw,n2,0,y0,_0,x0,Ha)}(hr,jh,YM,Fr,br,Li,Va,hr.layers[0],hr.collisionBoxArray,Zr.index,Zr.sourceLayerIndex,hr.index,mu,gm,vm,fi,Ms,Ac,_m,qa,Zr,di,kr,$a,nn)};if(Rs==="line")for(var Rc=0,xm=mw(Zr.geometry,0,0,8192,8192);Rc<xm.length;Rc+=1)for(var bm=xm[Rc],Lh=0,zh=zM(bm,Pc,Mh,Fr.vertical||Jo,br,24,Ic,hr.overscaling,8192);Lh<zh.length;Lh+=1){var wm=zh[Lh];Jo&&NM(hr,Jo.text,Rh,wm)||pl(bm,wm)}else if(Rs==="line-center")for(var Dh=0,Oh=Zr.geometry;Dh<Oh.length;Dh+=1){var Bh=Oh[Dh];if(Bh.length>1){var Sm=LM(Bh,Mh,Fr.vertical||Jo,br,24,Ic);Sm&&pl(Bh,Sm)}}else if(Zr.type==="Polygon")for(var Lc=0,Em=Jv(Zr.geometry,0);Lc<Em.length;Lc+=1){var zc=Em[Lc],Nh=OM(zc,16);pl(zc[0],new xc(Nh.x,Nh.y,0))}else if(Zr.type==="LineString")for(var yu=0,Fh=Zr.geometry;yu<Fh.length;yu+=1){var Dc=Fh[yu];pl(Dc,new xc(Dc[0].x,Dc[0].y,0))}else if(Zr.type==="Point")for(var h0=0,Dw=Zr.geometry;h0<Dw.length;h0+=1)for(var d0=0,Ow=Dw[h0];d0<Ow.length;d0+=1){var f0=Ow[d0];pl([f0],new xc(f0.x,f0.y,0))}}(r,Be,lt,ti,h,A,rt,St,pt,Ei,_)},Me=0,ze=r.features;Me<ze.length;Me+=1)Ie();y&&r.generateCollisionDebugBuffers()},o.perspective=function(r,i,s,h,m){var y,_=1/Math.tan(i/2);return r[0]=_/s,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=_,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,m!=null&&m!==1/0?(r[10]=(m+h)*(y=1/(h-m)),r[14]=2*m*h*y):(r[10]=-1,r[14]=-2*h),r},o.pick=function(r,i){for(var s={},h=0;h<i.length;h++){var m=i[h];m in r&&(s[m]=r[m])}return s},o.plugin=no,o.polygonIntersectsPolygon=Fa,o.postMapLoadEvent=Un,o.postTurnstileEvent=dr,o.potpack=iw,o.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],o.register=gt,o.registerForPluginStateChange=function(r){return r({pluginStatus:Wi,pluginURL:pa}),hh.on("pluginStateChange",r),r},o.renderColorRamp=Fb,o.rotate=function(r,i,s){var h=i[0],m=i[1],y=i[2],_=i[3],S=Math.sin(s),k=Math.cos(s);return r[0]=h*k+y*S,r[1]=m*k+_*S,r[2]=h*-S+y*k,r[3]=m*-S+_*k,r},o.rotateX=function(r,i,s){var h=Math.sin(s),m=Math.cos(s),y=i[4],_=i[5],S=i[6],k=i[7],A=i[8],R=i[9],O=i[10],$=i[11];return i!==r&&(r[0]=i[0],r[1]=i[1],r[2]=i[2],r[3]=i[3],r[12]=i[12],r[13]=i[13],r[14]=i[14],r[15]=i[15]),r[4]=y*m+A*h,r[5]=_*m+R*h,r[6]=S*m+O*h,r[7]=k*m+$*h,r[8]=A*m-y*h,r[9]=R*m-_*h,r[10]=O*m-S*h,r[11]=$*m-k*h,r},o.rotateZ=function(r,i,s){var h=Math.sin(s),m=Math.cos(s),y=i[0],_=i[1],S=i[2],k=i[3],A=i[4],R=i[5],O=i[6],$=i[7];return i!==r&&(r[8]=i[8],r[9]=i[9],r[10]=i[10],r[11]=i[11],r[12]=i[12],r[13]=i[13],r[14]=i[14],r[15]=i[15]),r[0]=y*m+A*h,r[1]=_*m+R*h,r[2]=S*m+O*h,r[3]=k*m+$*h,r[4]=A*m-y*h,r[5]=R*m-_*h,r[6]=O*m-S*h,r[7]=$*m-k*h,r},o.scale=function(r,i,s){var h=s[0],m=s[1],y=s[2];return r[0]=i[0]*h,r[1]=i[1]*h,r[2]=i[2]*h,r[3]=i[3]*h,r[4]=i[4]*m,r[5]=i[5]*m,r[6]=i[6]*m,r[7]=i[7]*m,r[8]=i[8]*y,r[9]=i[9]*y,r[10]=i[10]*y,r[11]=i[11]*y,r[12]=i[12],r[13]=i[13],r[14]=i[14],r[15]=i[15],r},o.scale$1=function(r,i,s){return r[0]=i[0]*s,r[1]=i[1]*s,r[2]=i[2]*s,r[3]=i[3]*s,r},o.scale$2=function(r,i,s){return r[0]=i[0]*s,r[1]=i[1]*s,r[2]=i[2]*s,r},o.setCacheLimits=function(r,i){On=r,ji=i},o.setRTLTextPlugin=function(r,i,s){if(s===void 0&&(s=!1),Wi==="deferred"||Wi==="loading"||Wi==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");pa=Ot.resolveURL(r),Wi="deferred",ac=i,nu(),s||Lo()},o.sphericalToCartesian=function(r){var i=r[0],s=r[1],h=r[2];return s+=90,s*=Math.PI/180,h*=Math.PI/180,{x:i*Math.cos(s)*Math.sin(h),y:i*Math.sin(s)*Math.sin(h),z:i*Math.cos(h)}},o.sqrLen=function(r){var i=r[0],s=r[1];return i*i+s*s},o.styleSpec=Z,o.sub=function(r,i,s){return r[0]=i[0]-s[0],r[1]=i[1]-s[1],r[2]=i[2]-s[2],r},o.symbolSize=RM,o.transformMat3=function(r,i,s){var h=i[0],m=i[1],y=i[2];return r[0]=h*s[0]+m*s[3]+y*s[6],r[1]=h*s[1]+m*s[4]+y*s[7],r[2]=h*s[2]+m*s[5]+y*s[8],r},o.transformMat4=hc,o.translate=function(r,i,s){var h,m,y,_,S,k,A,R,O,$,H,se,le=s[0],xe=s[1],de=s[2];return i===r?(r[12]=i[0]*le+i[4]*xe+i[8]*de+i[12],r[13]=i[1]*le+i[5]*xe+i[9]*de+i[13],r[14]=i[2]*le+i[6]*xe+i[10]*de+i[14],r[15]=i[3]*le+i[7]*xe+i[11]*de+i[15]):(m=i[1],y=i[2],_=i[3],S=i[4],k=i[5],A=i[6],R=i[7],O=i[8],$=i[9],H=i[10],se=i[11],r[0]=h=i[0],r[1]=m,r[2]=y,r[3]=_,r[4]=S,r[5]=k,r[6]=A,r[7]=R,r[8]=O,r[9]=$,r[10]=H,r[11]=se,r[12]=h*le+S*xe+O*de+i[12],r[13]=m*le+k*xe+$*de+i[13],r[14]=y*le+A*xe+H*de+i[14],r[15]=_*le+R*xe+se*de+i[15]),r},o.triggerPluginCompletionEvent=Yf,o.uniqueId=z,o.validateCustomStyleLayer=function(r){var i=[],s=r.id;return s===void 0&&i.push({message:"layers."+s+': missing required property "id"'}),r.render===void 0&&i.push({message:"layers."+s+': missing required method "render"'}),r.renderingMode&&r.renderingMode!=="2d"&&r.renderingMode!=="3d"&&i.push({message:"layers."+s+': property "renderingMode" must be either "2d" or "3d"'}),i},o.validateLight=Vv,o.validateStyle=Ql,o.values=function(r){var i=[];for(var s in r)i.push(r[s]);return i},o.vectorTile=yc,o.version="1.13.3",o.warnOnce=he,o.webpSupported=nr,o.window=I,o.wrap=F}),f(["./shared"],function(o){function v(L){var j=typeof L;if(j==="number"||j==="boolean"||j==="string"||L==null)return JSON.stringify(L);if(Array.isArray(L)){for(var W="[",Y=0,re=L;Y<re.length;Y+=1)W+=v(re[Y])+",";return W+"]"}for(var me=Object.keys(L).sort(),ye="{",Z=0;Z<me.length;Z++)ye+=JSON.stringify(me[Z])+":"+v(L[me[Z]])+",";return ye+"}"}function x(L){for(var j="",W=0,Y=o.refProperties;W<Y.length;W+=1)j+="/"+v(L[Y[W]]);return j}var E=function(L){this.keyCache={},L&&this.replace(L)};E.prototype.replace=function(L){this._layerConfigs={},this._layers={},this.update(L,[])},E.prototype.update=function(L,j){for(var W=this,Y=0,re=L;Y<re.length;Y+=1){var me=re[Y];this._layerConfigs[me.id]=me;var ye=this._layers[me.id]=o.createStyleLayer(me);ye._featureFilter=o.featureFilter(ye.filter),this.keyCache[me.id]&&delete this.keyCache[me.id]}for(var Z=0,ie=j;Z<ie.length;Z+=1){var Ee=ie[Z];delete this.keyCache[Ee],delete this._layerConfigs[Ee],delete this._layers[Ee]}this.familiesBySource={};for(var He=0,Xe=function(nt,ot){for(var or={},ct=0;ct<nt.length;ct++){var mr=ot&&ot[nt[ct].id]||x(nt[ct]);ot&&(ot[nt[ct].id]=mr);var Gr=or[mr];Gr||(Gr=or[mr]=[]),Gr.push(nt[ct])}var ur=[];for(var Ir in or)ur.push(or[Ir]);return ur}(o.values(this._layerConfigs),this.keyCache);He<Xe.length;He+=1){var Ue=Xe[He].map(function(nt){return W._layers[nt.id]}),Ye=Ue[0];if(Ye.visibility!=="none"){var vt=Ye.source||"",yt=this.familiesBySource[vt];yt||(yt=this.familiesBySource[vt]={});var Ve=Ye.sourceLayer||"_geojsonTileLayer",ht=yt[Ve];ht||(ht=yt[Ve]=[]),ht.push(Ue)}}};var T=function(L){var j={},W=[];for(var Y in L){var re=L[Y],me=j[Y]={};for(var ye in re){var Z=re[+ye];if(Z&&Z.bitmap.width!==0&&Z.bitmap.height!==0){var ie={x:0,y:0,w:Z.bitmap.width+2,h:Z.bitmap.height+2};W.push(ie),me[ye]={rect:ie,metrics:Z.metrics}}}}var Ee=o.potpack(W),He=new o.AlphaImage({width:Ee.w||1,height:Ee.h||1});for(var Xe in L){var Ue=L[Xe];for(var Ye in Ue){var vt=Ue[+Ye];if(vt&&vt.bitmap.width!==0&&vt.bitmap.height!==0){var yt=j[Xe][Ye].rect;o.AlphaImage.copy(vt.bitmap,He,{x:0,y:0},{x:yt.x+1,y:yt.y+1},vt.bitmap)}}}this.image=He,this.positions=j};o.register("GlyphAtlas",T);var P=function(L){this.tileID=new o.OverscaledTileID(L.tileID.overscaledZ,L.tileID.wrap,L.tileID.canonical.z,L.tileID.canonical.x,L.tileID.canonical.y),this.uid=L.uid,this.zoom=L.zoom,this.pixelRatio=L.pixelRatio,this.tileSize=L.tileSize,this.source=L.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=L.showCollisionBoxes,this.collectResourceTiming=!!L.collectResourceTiming,this.returnDependencies=!!L.returnDependencies,this.promoteId=L.promoteId};function I(L,j,W){for(var Y=new o.EvaluationParameters(j),re=0,me=L;re<me.length;re+=1)me[re].recalculate(Y,W)}function q(L,j){var W=o.getArrayBuffer(L.request,function(Y,re,me,ye){Y?j(Y):re&&j(null,{vectorTile:new o.vectorTile.VectorTile(new o.pbf(re)),rawData:re,cacheControl:me,expires:ye})});return function(){W.cancel(),j()}}P.prototype.parse=function(L,j,W,Y,re){var me=this;this.status="parsing",this.data=L,this.collisionBoxArray=new o.CollisionBoxArray;var ye=new o.DictionaryCoder(Object.keys(L.layers).sort()),Z=new o.FeatureIndex(this.tileID,this.promoteId);Z.bucketLayerIDs=[];var ie,Ee,He,Xe,Ue={},Ye={featureIndex:Z,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:W},vt=j.familiesBySource[this.source];for(var yt in vt){var Ve=L.layers[yt];if(Ve){Ve.version===1&&o.warnOnce('Vector tile source "'+this.source+'" layer "'+yt+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var ht=ye.encode(yt),nt=[],ot=0;ot<Ve.length;ot++){var or=Ve.feature(ot),ct=Z.getId(or,yt);nt.push({feature:or,id:ct,index:ot,sourceLayerIndex:ht})}for(var mr=0,Gr=vt[yt];mr<Gr.length;mr+=1){var ur=Gr[mr],Ir=ur[0];Ir.minzoom&&this.zoom<Math.floor(Ir.minzoom)||Ir.maxzoom&&this.zoom>=Ir.maxzoom||Ir.visibility!=="none"&&(I(ur,this.zoom,W),(Ue[Ir.id]=Ir.createBucket({index:Z.bucketLayerIDs.length,layers:ur,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:ht,sourceID:this.source})).populate(nt,Ye,this.tileID.canonical),Z.bucketLayerIDs.push(ur.map(function(qr){return qr.id})))}}}var vr=o.mapObject(Ye.glyphDependencies,function(qr){return Object.keys(qr).map(Number)});Object.keys(vr).length?Y.send("getGlyphs",{uid:this.uid,stacks:vr},function(qr,fr){ie||(ie=qr,Ee=fr,Sn.call(me))}):Ee={};var yi=Object.keys(Ye.iconDependencies);yi.length?Y.send("getImages",{icons:yi,source:this.source,tileID:this.tileID,type:"icons"},function(qr,fr){ie||(ie=qr,He=fr,Sn.call(me))}):He={};var Dr=Object.keys(Ye.patternDependencies);function Sn(){if(ie)return re(ie);if(Ee&&He&&Xe){var qr=new T(Ee),fr=new o.ImageAtlas(He,Xe);for(var Pr in Ue){var Ii=Ue[Pr];Ii instanceof o.SymbolBucket?(I(Ii.layers,this.zoom,W),o.performSymbolLayout(Ii,Ee,qr.positions,He,fr.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Ii.hasPattern&&(Ii instanceof o.LineBucket||Ii instanceof o.FillBucket||Ii instanceof o.FillExtrusionBucket)&&(I(Ii.layers,this.zoom,W),Ii.addFeatures(Ye,this.tileID.canonical,fr.patternPositions))}this.status="done",re(null,{buckets:o.values(Ue).filter(function(Ul){return!Ul.isEmpty()}),featureIndex:Z,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:qr.image,imageAtlas:fr,glyphMap:this.returnDependencies?Ee:null,iconMap:this.returnDependencies?He:null,glyphPositions:this.returnDependencies?qr.positions:null})}}Dr.length?Y.send("getImages",{icons:Dr,source:this.source,tileID:this.tileID,type:"patterns"},function(qr,fr){ie||(ie=qr,Xe=fr,Sn.call(me))}):Xe={},Sn.call(this)};var U=function(L,j,W,Y){this.actor=L,this.layerIndex=j,this.availableImages=W,this.loadVectorData=Y||q,this.loading={},this.loaded={}};U.prototype.loadTile=function(L,j){var W=this,Y=L.uid;this.loading||(this.loading={});var re=!!(L&&L.request&&L.request.collectResourceTiming)&&new o.RequestPerformance(L.request),me=this.loading[Y]=new P(L);me.abort=this.loadVectorData(L,function(ye,Z){if(delete W.loading[Y],ye||!Z)return me.status="done",W.loaded[Y]=me,j(ye);var ie=Z.rawData,Ee={};Z.expires&&(Ee.expires=Z.expires),Z.cacheControl&&(Ee.cacheControl=Z.cacheControl);var He={};if(re){var Xe=re.finish();Xe&&(He.resourceTiming=JSON.parse(JSON.stringify(Xe)))}me.vectorTile=Z.vectorTile,me.parse(Z.vectorTile,W.layerIndex,W.availableImages,W.actor,function(Ue,Ye){if(Ue||!Ye)return j(Ue);j(null,o.extend({rawTileData:ie.slice(0)},Ye,Ee,He))}),W.loaded=W.loaded||{},W.loaded[Y]=me})},U.prototype.reloadTile=function(L,j){var W=this,Y=this.loaded,re=L.uid,me=this;if(Y&&Y[re]){var ye=Y[re];ye.showCollisionBoxes=L.showCollisionBoxes;var Z=function(ie,Ee){var He=ye.reloadCallback;He&&(delete ye.reloadCallback,ye.parse(ye.vectorTile,me.layerIndex,W.availableImages,me.actor,He)),j(ie,Ee)};ye.status==="parsing"?ye.reloadCallback=Z:ye.status==="done"&&(ye.vectorTile?ye.parse(ye.vectorTile,this.layerIndex,this.availableImages,this.actor,Z):Z())}},U.prototype.abortTile=function(L,j){var W=this.loading,Y=L.uid;W&&W[Y]&&W[Y].abort&&(W[Y].abort(),delete W[Y]),j()},U.prototype.removeTile=function(L,j){var W=this.loaded,Y=L.uid;W&&W[Y]&&delete W[Y],j()};var G=o.window.ImageBitmap,D=function(){this.loaded={}};function F(L,j){if(L.length!==0){V(L[0],j);for(var W=1;W<L.length;W++)V(L[W],!j)}}function V(L,j){for(var W=0,Y=0,re=0,me=L.length,ye=me-1;re<me;ye=re++){var Z=(L[re][0]-L[ye][0])*(L[ye][1]+L[re][1]),ie=W+Z;Y+=Math.abs(W)>=Math.abs(Z)?W-ie+Z:Z-ie+W,W=ie}W+Y>=0!=!!j&&L.reverse()}D.prototype.loadTile=function(L,j){var W=L.uid,Y=L.encoding,re=L.rawImageData,me=G&&re instanceof G?this.getImageData(re):re,ye=new o.DEMData(W,me,Y);this.loaded=this.loaded||{},this.loaded[W]=ye,j(null,ye)},D.prototype.getImageData=function(L){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(L.width,L.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=L.width,this.offscreenCanvas.height=L.height,this.offscreenCanvasContext.drawImage(L,0,0,L.width,L.height);var j=this.offscreenCanvasContext.getImageData(-1,-1,L.width+2,L.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new o.RGBAImage({width:j.width,height:j.height},j.data)},D.prototype.removeTile=function(L){var j=this.loaded,W=L.uid;j&&j[W]&&delete j[W]};var B=o.vectorTile.VectorTileFeature.prototype.toGeoJSON,z=function(L){this._feature=L,this.extent=o.EXTENT,this.type=L.type,this.properties=L.tags,"id"in L&&!isNaN(L.id)&&(this.id=parseInt(L.id,10))};z.prototype.loadGeometry=function(){if(this._feature.type===1){for(var L=[],j=0,W=this._feature.geometry;j<W.length;j+=1){var Y=W[j];L.push([new o.Point$1(Y[0],Y[1])])}return L}for(var re=[],me=0,ye=this._feature.geometry;me<ye.length;me+=1){for(var Z=[],ie=0,Ee=ye[me];ie<Ee.length;ie+=1){var He=Ee[ie];Z.push(new o.Point$1(He[0],He[1]))}re.push(Z)}return re},z.prototype.toGeoJSON=function(L,j,W){return B.call(this,L,j,W)};var ne=function(L){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o.EXTENT,this.length=L.length,this._features=L};ne.prototype.feature=function(L){return new z(this._features[L])};var oe=o.vectorTile.VectorTileFeature,pe=be;function be(L,j){this.options=j||{},this.features=L,this.length=L.length}function Te(L,j){this.id=typeof L.id=="number"?L.id:void 0,this.type=L.type,this.rawGeometry=L.type===1?[L.geometry]:L.geometry,this.properties=L.tags,this.extent=j||4096}be.prototype.feature=function(L){return new Te(this.features[L],this.options.extent)},Te.prototype.loadGeometry=function(){var L=this.rawGeometry;this.geometry=[];for(var j=0;j<L.length;j++){for(var W=L[j],Y=[],re=0;re<W.length;re++)Y.push(new o.Point$1(W[re][0],W[re][1]));this.geometry.push(Y)}return this.geometry},Te.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var L=this.geometry,j=1/0,W=-1/0,Y=1/0,re=-1/0,me=0;me<L.length;me++)for(var ye=L[me],Z=0;Z<ye.length;Z++){var ie=ye[Z];j=Math.min(j,ie.x),W=Math.max(W,ie.x),Y=Math.min(Y,ie.y),re=Math.max(re,ie.y)}return[j,Y,W,re]},Te.prototype.toGeoJSON=oe.prototype.toGeoJSON;var _e=te,Se=pe;function te(L){var j=new o.pbf;return function(W,Y){for(var re in W.layers)Y.writeMessage(3,he,W.layers[re])}(L,j),j.finish()}function he(L,j){var W;j.writeVarintField(15,L.version||1),j.writeStringField(1,L.name||""),j.writeVarintField(5,L.extent||4096);var Y={keys:[],values:[],keycache:{},valuecache:{}};for(W=0;W<L.length;W++)Y.feature=L.feature(W),j.writeMessage(2,Oe,Y);var re=Y.keys;for(W=0;W<re.length;W++)j.writeStringField(3,re[W]);var me=Y.values;for(W=0;W<me.length;W++)j.writeMessage(4,Ze,me[W])}function Oe(L,j){var W=L.feature;W.id!==void 0&&j.writeVarintField(1,W.id),j.writeMessage(2,je,L),j.writeVarintField(3,W.type),j.writeMessage(4,$e,W)}function je(L,j){var W=L.feature,Y=L.keys,re=L.values,me=L.keycache,ye=L.valuecache;for(var Z in W.properties){var ie=me[Z];ie===void 0&&(Y.push(Z),me[Z]=ie=Y.length-1),j.writeVarint(ie);var Ee=W.properties[Z],He=typeof Ee;He!=="string"&&He!=="boolean"&&He!=="number"&&(Ee=JSON.stringify(Ee));var Xe=He+":"+Ee,Ue=ye[Xe];Ue===void 0&&(re.push(Ee),ye[Xe]=Ue=re.length-1),j.writeVarint(Ue)}}function Ce(L,j){return(j<<3)+(7&L)}function ke(L){return L<<1^L>>31}function $e(L,j){for(var W=L.loadGeometry(),Y=L.type,re=0,me=0,ye=W.length,Z=0;Z<ye;Z++){var ie=W[Z],Ee=1;Y===1&&(Ee=ie.length),j.writeVarint(Ce(1,Ee));for(var He=Y===3?ie.length-1:ie.length,Xe=0;Xe<He;Xe++){Xe===1&&Y!==1&&j.writeVarint(Ce(2,He-1));var Ue=ie[Xe].x-re,Ye=ie[Xe].y-me;j.writeVarint(ke(Ue)),j.writeVarint(ke(Ye)),re+=Ue,me+=Ye}Y===3&&j.writeVarint(Ce(7,1))}}function Ze(L,j){var W=typeof L;W==="string"?j.writeStringField(1,L):W==="boolean"?j.writeBooleanField(7,L):W==="number"&&(L%1!=0?j.writeDoubleField(3,L):L<0?j.writeSVarintField(6,L):j.writeVarintField(5,L))}function bt(L,j,W,Y){Pe(L,W,Y),Pe(j,2*W,2*Y),Pe(j,2*W+1,2*Y+1)}function Pe(L,j,W){var Y=L[j];L[j]=L[W],L[W]=Y}function Ge(L,j,W,Y){var re=L-W,me=j-Y;return re*re+me*me}_e.fromVectorTileJs=te,_e.fromGeojsonVt=function(L,j){j=j||{};var W={};for(var Y in L)W[Y]=new pe(L[Y].features,j),W[Y].name=Y,W[Y].version=j.version,W[Y].extent=j.extent;return te({layers:W})},_e.GeoJSONWrapper=Se;var st=function(L){return L[0]},Re=function(L){return L[1]},qe=function(L,j,W,Y,re){j===void 0&&(j=st),W===void 0&&(W=Re),Y===void 0&&(Y=64),re===void 0&&(re=Float64Array),this.nodeSize=Y,this.points=L;for(var me=L.length<65536?Uint16Array:Uint32Array,ye=this.ids=new me(L.length),Z=this.coords=new re(2*L.length),ie=0;ie<L.length;ie++)ye[ie]=ie,Z[2*ie]=j(L[ie]),Z[2*ie+1]=W(L[ie]);(function Ee(He,Xe,Ue,Ye,vt,yt){if(!(vt-Ye<=Ue)){var Ve=Ye+vt>>1;(function ht(nt,ot,or,ct,mr,Gr){for(;mr>ct;){if(mr-ct>600){var ur=mr-ct+1,Ir=or-ct+1,vr=Math.log(ur),yi=.5*Math.exp(2*vr/3),Dr=.5*Math.sqrt(vr*yi*(ur-yi)/ur)*(Ir-ur/2<0?-1:1);ht(nt,ot,or,Math.max(ct,Math.floor(or-Ir*yi/ur+Dr)),Math.min(mr,Math.floor(or+(ur-Ir)*yi/ur+Dr)),Gr)}var Sn=ot[2*or+Gr],qr=ct,fr=mr;for(bt(nt,ot,ct,or),ot[2*mr+Gr]>Sn&&bt(nt,ot,ct,mr);qr<fr;){for(bt(nt,ot,qr,fr),qr++,fr--;ot[2*qr+Gr]<Sn;)qr++;for(;ot[2*fr+Gr]>Sn;)fr--}ot[2*ct+Gr]===Sn?bt(nt,ot,ct,fr):bt(nt,ot,++fr,mr),fr<=or&&(ct=fr+1),or<=fr&&(mr=fr-1)}})(He,Xe,Ve,Ye,vt,yt%2),Ee(He,Xe,Ue,Ye,Ve-1,yt+1),Ee(He,Xe,Ue,Ve+1,vt,yt+1)}})(ye,Z,Y,0,ye.length-1,0)};qe.prototype.range=function(L,j,W,Y){return function(re,me,ye,Z,ie,Ee,He){for(var Xe,Ue,Ye=[0,re.length-1,0],vt=[];Ye.length;){var yt=Ye.pop(),Ve=Ye.pop(),ht=Ye.pop();if(Ve-ht<=He)for(var nt=ht;nt<=Ve;nt++)Ue=me[2*nt+1],(Xe=me[2*nt])>=ye&&Xe<=ie&&Ue>=Z&&Ue<=Ee&&vt.push(re[nt]);else{var ot=Math.floor((ht+Ve)/2);Ue=me[2*ot+1],(Xe=me[2*ot])>=ye&&Xe<=ie&&Ue>=Z&&Ue<=Ee&&vt.push(re[ot]);var or=(yt+1)%2;(yt===0?ye<=Xe:Z<=Ue)&&(Ye.push(ht),Ye.push(ot-1),Ye.push(or)),(yt===0?ie>=Xe:Ee>=Ue)&&(Ye.push(ot+1),Ye.push(Ve),Ye.push(or))}}return vt}(this.ids,this.coords,L,j,W,Y,this.nodeSize)},qe.prototype.within=function(L,j,W){return function(Y,re,me,ye,Z,ie){for(var Ee=[0,Y.length-1,0],He=[],Xe=Z*Z;Ee.length;){var Ue=Ee.pop(),Ye=Ee.pop(),vt=Ee.pop();if(Ye-vt<=ie)for(var yt=vt;yt<=Ye;yt++)Ge(re[2*yt],re[2*yt+1],me,ye)<=Xe&&He.push(Y[yt]);else{var Ve=Math.floor((vt+Ye)/2),ht=re[2*Ve],nt=re[2*Ve+1];Ge(ht,nt,me,ye)<=Xe&&He.push(Y[Ve]);var ot=(Ue+1)%2;(Ue===0?me-Z<=ht:ye-Z<=nt)&&(Ee.push(vt),Ee.push(Ve-1),Ee.push(ot)),(Ue===0?me+Z>=ht:ye+Z>=nt)&&(Ee.push(Ve+1),Ee.push(Ye),Ee.push(ot))}}return He}(this.ids,this.coords,L,j,W,this.nodeSize)};var Kt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(L){return L}},It=function(L){this.options=Dt(Object.create(Kt),L),this.trees=new Array(this.options.maxZoom+1)};function Ot(L,j,W,Y,re){return{x:L,y:j,zoom:1/0,id:W,parentId:-1,numPoints:Y,properties:re}}function Et(L,j){var W=L.geometry.coordinates,Y=W[1];return{x:Yt(W[0]),y:at(Y),zoom:1/0,index:j,parentId:-1}}function nr(L){return{type:"Feature",id:L.id,properties:Zt(L),geometry:{type:"Point",coordinates:[(Y=L.x,360*(Y-.5)),(j=L.y,W=(180-360*j)*Math.PI/180,360*Math.atan(Math.exp(W))/Math.PI-90)]}};var j,W,Y}function Zt(L){var j=L.numPoints,W=j>=1e4?Math.round(j/1e3)+"k":j>=1e3?Math.round(j/100)/10+"k":j;return Dt(Dt({},L.properties),{cluster:!0,cluster_id:L.id,point_count:j,point_count_abbreviated:W})}function Yt(L){return L/360+.5}function at(L){var j=Math.sin(L*Math.PI/180),W=.5-.25*Math.log((1+j)/(1-j))/Math.PI;return W<0?0:W>1?1:W}function Dt(L,j){for(var W in j)L[W]=j[W];return L}function er(L){return L.x}function Rr(L){return L.y}function Nr(L,j,W,Y,re,me){var ye=re-W,Z=me-Y;if(ye!==0||Z!==0){var ie=((L-W)*ye+(j-Y)*Z)/(ye*ye+Z*Z);ie>1?(W=re,Y=me):ie>0&&(W+=ye*ie,Y+=Z*ie)}return(ye=L-W)*ye+(Z=j-Y)*Z}function tr(L,j,W,Y){var re={id:L===void 0?null:L,type:j,geometry:W,tags:Y,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(me){var ye=me.geometry,Z=me.type;if(Z==="Point"||Z==="MultiPoint"||Z==="LineString")Vr(me,ye);else if(Z==="Polygon"||Z==="MultiLineString")for(var ie=0;ie<ye.length;ie++)Vr(me,ye[ie]);else if(Z==="MultiPolygon")for(ie=0;ie<ye.length;ie++)for(var Ee=0;Ee<ye[ie].length;Ee++)Vr(me,ye[ie][Ee])}(re),re}function Vr(L,j){for(var W=0;W<j.length;W+=3)L.minX=Math.min(L.minX,j[W]),L.minY=Math.min(L.minY,j[W+1]),L.maxX=Math.max(L.maxX,j[W]),L.maxY=Math.max(L.maxY,j[W+1])}function Lr(L,j,W,Y){if(j.geometry){var re=j.geometry.coordinates,me=j.geometry.type,ye=Math.pow(W.tolerance/((1<<W.maxZoom)*W.extent),2),Z=[],ie=j.id;if(W.promoteId?ie=j.properties[W.promoteId]:W.generateId&&(ie=Y||0),me==="Point")Er(re,Z);else if(me==="MultiPoint")for(var Ee=0;Ee<re.length;Ee++)Er(re[Ee],Z);else if(me==="LineString")on(re,Z,ye,!1);else if(me==="MultiLineString"){if(W.lineMetrics){for(Ee=0;Ee<re.length;Ee++)on(re[Ee],Z=[],ye,!1),L.push(tr(ie,"LineString",Z,j.properties));return}Mr(re,Z,ye,!1)}else if(me==="Polygon")Mr(re,Z,ye,!0);else{if(me!=="MultiPolygon"){if(me==="GeometryCollection"){for(Ee=0;Ee<j.geometry.geometries.length;Ee++)Lr(L,{id:ie,geometry:j.geometry.geometries[Ee],properties:j.properties},W,Y);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Ee=0;Ee<re.length;Ee++){var He=[];Mr(re[Ee],He,ye,!0),Z.push(He)}}L.push(tr(ie,me,Z,j.properties))}}function Er(L,j){j.push(lr(L[0])),j.push(Xr(L[1])),j.push(0)}function on(L,j,W,Y){for(var re,me,ye=0,Z=0;Z<L.length;Z++){var ie=lr(L[Z][0]),Ee=Xr(L[Z][1]);j.push(ie),j.push(Ee),j.push(0),Z>0&&(ye+=Y?(re*Ee-ie*me)/2:Math.sqrt(Math.pow(ie-re,2)+Math.pow(Ee-me,2))),re=ie,me=Ee}var He=j.length-3;j[2]=1,function Xe(Ue,Ye,vt,yt){for(var Ve,ht=yt,nt=vt-Ye>>1,ot=vt-Ye,or=Ue[Ye],ct=Ue[Ye+1],mr=Ue[vt],Gr=Ue[vt+1],ur=Ye+3;ur<vt;ur+=3){var Ir=Nr(Ue[ur],Ue[ur+1],or,ct,mr,Gr);if(Ir>ht)Ve=ur,ht=Ir;else if(Ir===ht){var vr=Math.abs(ur-nt);vr<ot&&(Ve=ur,ot=vr)}}ht>yt&&(Ve-Ye>3&&Xe(Ue,Ye,Ve,yt),Ue[Ve+2]=ht,vt-Ve>3&&Xe(Ue,Ve,vt,yt))}(j,0,He,W),j[He+2]=1,j.size=Math.abs(ye),j.start=0,j.end=j.size}function Mr(L,j,W,Y){for(var re=0;re<L.length;re++){var me=[];on(L[re],me,W,Y),j.push(me)}}function lr(L){return L/360+.5}function Xr(L){var j=Math.sin(L*Math.PI/180),W=.5-.25*Math.log((1+j)/(1-j))/Math.PI;return W<0?0:W>1?1:W}function wn(L,j,W,Y,re,me,ye,Z){if(Y/=j,me>=(W/=j)&&ye<Y)return L;if(ye<W||me>=Y)return null;for(var ie=[],Ee=0;Ee<L.length;Ee++){var He=L[Ee],Xe=He.geometry,Ue=He.type,Ye=re===0?He.minX:He.minY,vt=re===0?He.maxX:He.maxY;if(Ye>=W&&vt<Y)ie.push(He);else if(!(vt<W||Ye>=Y)){var yt=[];if(Ue==="Point"||Ue==="MultiPoint")oi(Xe,yt,W,Y,re);else if(Ue==="LineString")dr(Xe,yt,W,Y,re,!1,Z.lineMetrics);else if(Ue==="MultiLineString")Un(Xe,yt,W,Y,re,!1);else if(Ue==="Polygon")Un(Xe,yt,W,Y,re,!0);else if(Ue==="MultiPolygon")for(var Ve=0;Ve<Xe.length;Ve++){var ht=[];Un(Xe[Ve],ht,W,Y,re,!0),ht.length&&yt.push(ht)}if(yt.length){if(Z.lineMetrics&&Ue==="LineString"){for(Ve=0;Ve<yt.length;Ve++)ie.push(tr(He.id,Ue,yt[Ve],He.tags));continue}Ue!=="LineString"&&Ue!=="MultiLineString"||(yt.length===1?(Ue="LineString",yt=yt[0]):Ue="MultiLineString"),Ue!=="Point"&&Ue!=="MultiPoint"||(Ue=yt.length===3?"Point":"MultiPoint"),ie.push(tr(He.id,Ue,yt,He.tags))}}}return ie.length?ie:null}function oi(L,j,W,Y,re){for(var me=0;me<L.length;me+=3){var ye=L[me+re];ye>=W&&ye<=Y&&(j.push(L[me]),j.push(L[me+1]),j.push(L[me+2]))}}function dr(L,j,W,Y,re,me,ye){for(var Z,ie,Ee=Bt(L),He=re===0?ji:Ft,Xe=L.start,Ue=0;Ue<L.length-3;Ue+=3){var Ye=L[Ue],vt=L[Ue+1],yt=L[Ue+2],Ve=L[Ue+3],ht=L[Ue+4],nt=re===0?Ye:vt,ot=re===0?Ve:ht,or=!1;ye&&(Z=Math.sqrt(Math.pow(Ye-Ve,2)+Math.pow(vt-ht,2))),nt<W?ot>W&&(ie=He(Ee,Ye,vt,Ve,ht,W),ye&&(Ee.start=Xe+Z*ie)):nt>Y?ot<Y&&(ie=He(Ee,Ye,vt,Ve,ht,Y),ye&&(Ee.start=Xe+Z*ie)):On(Ee,Ye,vt,yt),ot<W&&nt>=W&&(ie=He(Ee,Ye,vt,Ve,ht,W),or=!0),ot>Y&&nt<=Y&&(ie=He(Ee,Ye,vt,Ve,ht,Y),or=!0),!me&&or&&(ye&&(Ee.end=Xe+Z*ie),j.push(Ee),Ee=Bt(L)),ye&&(Xe+=Z)}var ct=L.length-3;Ye=L[ct],vt=L[ct+1],yt=L[ct+2],(nt=re===0?Ye:vt)>=W&&nt<=Y&&On(Ee,Ye,vt,yt),ct=Ee.length-3,me&&ct>=3&&(Ee[ct]!==Ee[0]||Ee[ct+1]!==Ee[1])&&On(Ee,Ee[0],Ee[1],Ee[2]),Ee.length&&j.push(Ee)}function Bt(L){var j=[];return j.size=L.size,j.start=L.start,j.end=L.end,j}function Un(L,j,W,Y,re,me){for(var ye=0;ye<L.length;ye++)dr(L[ye],j,W,Y,re,me,!1)}function On(L,j,W,Y){L.push(j),L.push(W),L.push(Y)}function ji(L,j,W,Y,re,me){var ye=(me-j)/(Y-j);return L.push(me),L.push(W+(re-W)*ye),L.push(1),ye}function Ft(L,j,W,Y,re,me){var ye=(me-W)/(re-W);return L.push(j+(Y-j)*ye),L.push(me),L.push(1),ye}function wr(L,j){for(var W=[],Y=0;Y<L.length;Y++){var re,me=L[Y],ye=me.type;if(ye==="Point"||ye==="MultiPoint"||ye==="LineString")re=ut(me.geometry,j);else if(ye==="MultiLineString"||ye==="Polygon"){re=[];for(var Z=0;Z<me.geometry.length;Z++)re.push(ut(me.geometry[Z],j))}else if(ye==="MultiPolygon")for(re=[],Z=0;Z<me.geometry.length;Z++){for(var ie=[],Ee=0;Ee<me.geometry[Z].length;Ee++)ie.push(ut(me.geometry[Z][Ee],j));re.push(ie)}W.push(tr(me.id,ye,re,me.tags))}return W}function ut(L,j){var W=[];W.size=L.size,L.start!==void 0&&(W.start=L.start,W.end=L.end);for(var Y=0;Y<L.length;Y+=3)W.push(L[Y]+j,L[Y+1],L[Y+2]);return W}function Rt(L,j){if(L.transformed)return L;var W,Y,re,me=1<<L.z,ye=L.x,Z=L.y;for(W=0;W<L.features.length;W++){var ie=L.features[W],Ee=ie.geometry,He=ie.type;if(ie.geometry=[],He===1)for(Y=0;Y<Ee.length;Y+=2)ie.geometry.push(gr(Ee[Y],Ee[Y+1],j,me,ye,Z));else for(Y=0;Y<Ee.length;Y++){var Xe=[];for(re=0;re<Ee[Y].length;re+=2)Xe.push(gr(Ee[Y][re],Ee[Y][re+1],j,me,ye,Z));ie.geometry.push(Xe)}}return L.transformed=!0,L}function gr(L,j,W,Y,re,me){return[Math.round(W*(L*Y-re)),Math.round(W*(j*Y-me))]}function Sr(L,j,W,Y,re){for(var me=j===re.maxZoom?0:re.tolerance/((1<<j)*re.extent),ye={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:W,y:Y,z:j,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Z=0;Z<L.length;Z++){ye.numFeatures++,rn(ye,L[Z],me,re);var ie=L[Z].minX,Ee=L[Z].minY,He=L[Z].maxX,Xe=L[Z].maxY;ie<ye.minX&&(ye.minX=ie),Ee<ye.minY&&(ye.minY=Ee),He>ye.maxX&&(ye.maxX=He),Xe>ye.maxY&&(ye.maxY=Xe)}return ye}function rn(L,j,W,Y){var re=j.geometry,me=j.type,ye=[];if(me==="Point"||me==="MultiPoint")for(var Z=0;Z<re.length;Z+=3)ye.push(re[Z]),ye.push(re[Z+1]),L.numPoints++,L.numSimplified++;else if(me==="LineString")Le(ye,re,L,W,!1,!1);else if(me==="MultiLineString"||me==="Polygon")for(Z=0;Z<re.length;Z++)Le(ye,re[Z],L,W,me==="Polygon",Z===0);else if(me==="MultiPolygon")for(var ie=0;ie<re.length;ie++){var Ee=re[ie];for(Z=0;Z<Ee.length;Z++)Le(ye,Ee[Z],L,W,!0,Z===0)}if(ye.length){var He=j.tags||null;if(me==="LineString"&&Y.lineMetrics){for(var Xe in He={},j.tags)He[Xe]=j.tags[Xe];He.mapbox_clip_start=re.start/re.size,He.mapbox_clip_end=re.end/re.size}var Ue={geometry:ye,type:me==="Polygon"||me==="MultiPolygon"?3:me==="LineString"||me==="MultiLineString"?2:1,tags:He};j.id!==null&&(Ue.id=j.id),L.features.push(Ue)}}function Le(L,j,W,Y,re,me){var ye=Y*Y;if(Y>0&&j.size<(re?ye:Y))W.numPoints+=j.length/3;else{for(var Z=[],ie=0;ie<j.length;ie+=3)(Y===0||j[ie+2]>ye)&&(W.numSimplified++,Z.push(j[ie]),Z.push(j[ie+1])),W.numPoints++;re&&function(Ee,He){for(var Xe=0,Ue=0,Ye=Ee.length,vt=Ye-2;Ue<Ye;vt=Ue,Ue+=2)Xe+=(Ee[Ue]-Ee[vt])*(Ee[Ue+1]+Ee[vt+1]);if(Xe>0===He)for(Ue=0,Ye=Ee.length;Ue<Ye/2;Ue+=2){var yt=Ee[Ue],Ve=Ee[Ue+1];Ee[Ue]=Ee[Ye-2-Ue],Ee[Ue+1]=Ee[Ye-1-Ue],Ee[Ye-2-Ue]=yt,Ee[Ye-1-Ue]=Ve}}(Z,me),L.push(Z)}}function tt(L,j){var W=(j=this.options=function(re,me){for(var ye in me)re[ye]=me[ye];return re}(Object.create(this.options),j)).debug;if(W&&console.time("preprocess data"),j.maxZoom<0||j.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(j.promoteId&&j.generateId)throw new Error("promoteId and generateId cannot be used together.");var Y=function(re,me){var ye=[];if(re.type==="FeatureCollection")for(var Z=0;Z<re.features.length;Z++)Lr(ye,re.features[Z],me,Z);else Lr(ye,re.type==="Feature"?re:{geometry:re},me);return ye}(L,j);this.tiles={},this.tileCoords=[],W&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",j.indexMaxZoom,j.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(Y=function(re,me){var ye=me.buffer/me.extent,Z=re,ie=wn(re,1,-1-ye,ye,0,-1,2,me),Ee=wn(re,1,1-ye,2+ye,0,-1,2,me);return(ie||Ee)&&(Z=wn(re,1,-ye,1+ye,0,-1,2,me)||[],ie&&(Z=wr(ie,1).concat(Z)),Ee&&(Z=Z.concat(wr(Ee,-1)))),Z}(Y,j)).length&&this.splitTile(Y,0,0,0),W&&(Y.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function wt(L,j,W){return 32*((1<<L)*W+j)+L}function ar(L,j){var W=L.tileID.canonical;if(!this._geoJSONIndex)return j(null,null);var Y=this._geoJSONIndex.getTile(W.z,W.x,W.y);if(!Y)return j(null,null);var re=new ne(Y.features),me=_e(re);me.byteOffset===0&&me.byteLength===me.buffer.byteLength||(me=new Uint8Array(me)),j(null,{vectorTile:re,rawData:me.buffer})}It.prototype.load=function(L){var j=this.options,W=j.log,Y=j.minZoom,re=j.maxZoom,me=j.nodeSize;W&&console.time("total time");var ye="prepare "+L.length+" points";W&&console.time(ye),this.points=L;for(var Z=[],ie=0;ie<L.length;ie++)L[ie].geometry&&Z.push(Et(L[ie],ie));this.trees[re+1]=new qe(Z,er,Rr,me,Float32Array),W&&console.timeEnd(ye);for(var Ee=re;Ee>=Y;Ee--){var He=+Date.now();Z=this._cluster(Z,Ee),this.trees[Ee]=new qe(Z,er,Rr,me,Float32Array),W&&console.log("z%d: %d clusters in %dms",Ee,Z.length,+Date.now()-He)}return W&&console.timeEnd("total time"),this},It.prototype.getClusters=function(L,j){var W=((L[0]+180)%360+360)%360-180,Y=Math.max(-90,Math.min(90,L[1])),re=L[2]===180?180:((L[2]+180)%360+360)%360-180,me=Math.max(-90,Math.min(90,L[3]));if(L[2]-L[0]>=360)W=-180,re=180;else if(W>re){var ye=this.getClusters([W,Y,180,me],j),Z=this.getClusters([-180,Y,re,me],j);return ye.concat(Z)}for(var ie=this.trees[this._limitZoom(j)],Ee=[],He=0,Xe=ie.range(Yt(W),at(me),Yt(re),at(Y));He<Xe.length;He+=1){var Ue=ie.points[Xe[He]];Ee.push(Ue.numPoints?nr(Ue):this.points[Ue.index])}return Ee},It.prototype.getChildren=function(L){var j=this._getOriginId(L),W=this._getOriginZoom(L),Y="No cluster with the specified id.",re=this.trees[W];if(!re)throw new Error(Y);var me=re.points[j];if(!me)throw new Error(Y);for(var ye=this.options.radius/(this.options.extent*Math.pow(2,W-1)),Z=[],ie=0,Ee=re.within(me.x,me.y,ye);ie<Ee.length;ie+=1){var He=re.points[Ee[ie]];He.parentId===L&&Z.push(He.numPoints?nr(He):this.points[He.index])}if(Z.length===0)throw new Error(Y);return Z},It.prototype.getLeaves=function(L,j,W){var Y=[];return this._appendLeaves(Y,L,j=j||10,W=W||0,0),Y},It.prototype.getTile=function(L,j,W){var Y=this.trees[this._limitZoom(L)],re=Math.pow(2,L),me=this.options,ye=me.radius/me.extent,Z=(W-ye)/re,ie=(W+1+ye)/re,Ee={features:[]};return this._addTileFeatures(Y.range((j-ye)/re,Z,(j+1+ye)/re,ie),Y.points,j,W,re,Ee),j===0&&this._addTileFeatures(Y.range(1-ye/re,Z,1,ie),Y.points,re,W,re,Ee),j===re-1&&this._addTileFeatures(Y.range(0,Z,ye/re,ie),Y.points,-1,W,re,Ee),Ee.features.length?Ee:null},It.prototype.getClusterExpansionZoom=function(L){for(var j=this._getOriginZoom(L)-1;j<=this.options.maxZoom;){var W=this.getChildren(L);if(j++,W.length!==1)break;L=W[0].properties.cluster_id}return j},It.prototype._appendLeaves=function(L,j,W,Y,re){for(var me=0,ye=this.getChildren(j);me<ye.length;me+=1){var Z=ye[me],ie=Z.properties;if(ie&&ie.cluster?re+ie.point_count<=Y?re+=ie.point_count:re=this._appendLeaves(L,ie.cluster_id,W,Y,re):re<Y?re++:L.push(Z),L.length===W)break}return re},It.prototype._addTileFeatures=function(L,j,W,Y,re,me){for(var ye=0,Z=L;ye<Z.length;ye+=1){var ie=j[Z[ye]],Ee=ie.numPoints,He={type:1,geometry:[[Math.round(this.options.extent*(ie.x*re-W)),Math.round(this.options.extent*(ie.y*re-Y))]],tags:Ee?Zt(ie):this.points[ie.index].properties},Xe=void 0;Ee?Xe=ie.id:this.options.generateId?Xe=ie.index:this.points[ie.index].id&&(Xe=this.points[ie.index].id),Xe!==void 0&&(He.id=Xe),me.features.push(He)}},It.prototype._limitZoom=function(L){return Math.max(this.options.minZoom,Math.min(+L,this.options.maxZoom+1))},It.prototype._cluster=function(L,j){for(var W=[],Y=this.options,re=Y.reduce,me=Y.minPoints,ye=Y.radius/(Y.extent*Math.pow(2,j)),Z=0;Z<L.length;Z++){var ie=L[Z];if(!(ie.zoom<=j)){ie.zoom=j;for(var Ee=this.trees[j+1],He=Ee.within(ie.x,ie.y,ye),Xe=ie.numPoints||1,Ue=Xe,Ye=0,vt=He;Ye<vt.length;Ye+=1){var yt=Ee.points[vt[Ye]];yt.zoom>j&&(Ue+=yt.numPoints||1)}if(Ue>=me){for(var Ve=ie.x*Xe,ht=ie.y*Xe,nt=re&&Xe>1?this._map(ie,!0):null,ot=(Z<<5)+(j+1)+this.points.length,or=0,ct=He;or<ct.length;or+=1){var mr=Ee.points[ct[or]];if(!(mr.zoom<=j)){mr.zoom=j;var Gr=mr.numPoints||1;Ve+=mr.x*Gr,ht+=mr.y*Gr,mr.parentId=ot,re&&(nt||(nt=this._map(ie,!0)),re(nt,this._map(mr)))}}ie.parentId=ot,W.push(Ot(Ve/Ue,ht/Ue,ot,Ue,nt))}else if(W.push(ie),Ue>1)for(var ur=0,Ir=He;ur<Ir.length;ur+=1){var vr=Ee.points[Ir[ur]];vr.zoom<=j||(vr.zoom=j,W.push(vr))}}}return W},It.prototype._getOriginId=function(L){return L-this.points.length>>5},It.prototype._getOriginZoom=function(L){return(L-this.points.length)%32},It.prototype._map=function(L,j){if(L.numPoints)return j?Dt({},L.properties):L.properties;var W=this.points[L.index].properties,Y=this.options.map(W);return j&&Y===W?Dt({},Y):Y},tt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},tt.prototype.splitTile=function(L,j,W,Y,re,me,ye){for(var Z=[L,j,W,Y],ie=this.options,Ee=ie.debug;Z.length;){Y=Z.pop(),W=Z.pop(),j=Z.pop(),L=Z.pop();var He=1<<j,Xe=wt(j,W,Y),Ue=this.tiles[Xe];if(!Ue&&(Ee>1&&console.time("creation"),Ue=this.tiles[Xe]=Sr(L,j,W,Y,ie),this.tileCoords.push({z:j,x:W,y:Y}),Ee)){Ee>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",j,W,Y,Ue.numFeatures,Ue.numPoints,Ue.numSimplified),console.timeEnd("creation"));var Ye="z"+j;this.stats[Ye]=(this.stats[Ye]||0)+1,this.total++}if(Ue.source=L,re){if(j===ie.maxZoom||j===re)continue;var vt=1<<re-j;if(W!==Math.floor(me/vt)||Y!==Math.floor(ye/vt))continue}else if(j===ie.indexMaxZoom||Ue.numPoints<=ie.indexMaxPoints)continue;if(Ue.source=null,L.length!==0){Ee>1&&console.time("clipping");var yt,Ve,ht,nt,ot,or,ct=.5*ie.buffer/ie.extent,mr=.5-ct,Gr=.5+ct,ur=1+ct;yt=Ve=ht=nt=null,ot=wn(L,He,W-ct,W+Gr,0,Ue.minX,Ue.maxX,ie),or=wn(L,He,W+mr,W+ur,0,Ue.minX,Ue.maxX,ie),L=null,ot&&(yt=wn(ot,He,Y-ct,Y+Gr,1,Ue.minY,Ue.maxY,ie),Ve=wn(ot,He,Y+mr,Y+ur,1,Ue.minY,Ue.maxY,ie),ot=null),or&&(ht=wn(or,He,Y-ct,Y+Gr,1,Ue.minY,Ue.maxY,ie),nt=wn(or,He,Y+mr,Y+ur,1,Ue.minY,Ue.maxY,ie),or=null),Ee>1&&console.timeEnd("clipping"),Z.push(yt||[],j+1,2*W,2*Y),Z.push(Ve||[],j+1,2*W,2*Y+1),Z.push(ht||[],j+1,2*W+1,2*Y),Z.push(nt||[],j+1,2*W+1,2*Y+1)}}},tt.prototype.getTile=function(L,j,W){var Y=this.options,re=Y.extent,me=Y.debug;if(L<0||L>24)return null;var ye=1<<L,Z=wt(L,j=(j%ye+ye)%ye,W);if(this.tiles[Z])return Rt(this.tiles[Z],re);me>1&&console.log("drilling down to z%d-%d-%d",L,j,W);for(var ie,Ee=L,He=j,Xe=W;!ie&&Ee>0;)Ee--,He=Math.floor(He/2),Xe=Math.floor(Xe/2),ie=this.tiles[wt(Ee,He,Xe)];return ie&&ie.source?(me>1&&console.log("found parent tile z%d-%d-%d",Ee,He,Xe),me>1&&console.time("drilling down"),this.splitTile(ie.source,Ee,He,Xe,L,j,W),me>1&&console.timeEnd("drilling down"),this.tiles[Z]?Rt(this.tiles[Z],re):null):null};var zr=function(L){function j(W,Y,re,me){L.call(this,W,Y,re,ar),me&&(this.loadGeoJSON=me)}return L&&(j.__proto__=L),(j.prototype=Object.create(L&&L.prototype)).constructor=j,j.prototype.loadData=function(W,Y){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=Y,this._pendingLoadDataParams=W,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},j.prototype._loadData=function(){var W=this;if(this._pendingCallback&&this._pendingLoadDataParams){var Y=this._pendingCallback,re=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var me=!!(re&&re.request&&re.request.collectResourceTiming)&&new o.RequestPerformance(re.request);this.loadGeoJSON(re,function(ye,Z){if(ye||!Z)return Y(ye);if(typeof Z!="object")return Y(new Error("Input data given to '"+re.source+"' is not a valid GeoJSON object."));(function Ue(Ye,vt){var yt,Ve=Ye&&Ye.type;if(Ve==="FeatureCollection")for(yt=0;yt<Ye.features.length;yt++)Ue(Ye.features[yt],vt);else if(Ve==="GeometryCollection")for(yt=0;yt<Ye.geometries.length;yt++)Ue(Ye.geometries[yt],vt);else if(Ve==="Feature")Ue(Ye.geometry,vt);else if(Ve==="Polygon")F(Ye.coordinates,vt);else if(Ve==="MultiPolygon")for(yt=0;yt<Ye.coordinates.length;yt++)F(Ye.coordinates[yt],vt);return Ye})(Z,!0);try{if(re.filter){var ie=o.createExpression(re.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ie.result==="error")throw new Error(ie.value.map(function(Ue){return Ue.key+": "+Ue.message}).join(", "));var Ee=Z.features.filter(function(Ue){return ie.value.evaluate({zoom:0},Ue)});Z={type:"FeatureCollection",features:Ee}}W._geoJSONIndex=re.cluster?new It(function(Ue){var Ye=Ue.superclusterOptions,vt=Ue.clusterProperties;if(!vt||!Ye)return Ye;for(var yt={},Ve={},ht={accumulated:null,zoom:0},nt={properties:null},ot=Object.keys(vt),or=0,ct=ot;or<ct.length;or+=1){var mr=ct[or],Gr=vt[mr],ur=Gr[0],Ir=o.createExpression(Gr[1]),vr=o.createExpression(typeof ur=="string"?[ur,["accumulated"],["get",mr]]:ur);yt[mr]=Ir.value,Ve[mr]=vr.value}return Ye.map=function(yi){nt.properties=yi;for(var Dr={},Sn=0,qr=ot;Sn<qr.length;Sn+=1){var fr=qr[Sn];Dr[fr]=yt[fr].evaluate(ht,nt)}return Dr},Ye.reduce=function(yi,Dr){nt.properties=Dr;for(var Sn=0,qr=ot;Sn<qr.length;Sn+=1){var fr=qr[Sn];ht.accumulated=yi[fr],yi[fr]=Ve[fr].evaluate(ht,nt)}},Ye}(re)).load(Z.features):function(Ue,Ye){return new tt(Ue,Ye)}(Z,re.geojsonVtOptions)}catch(Ue){return Y(Ue)}W.loaded={};var He={};if(me){var Xe=me.finish();Xe&&(He.resourceTiming={},He.resourceTiming[re.source]=JSON.parse(JSON.stringify(Xe)))}Y(null,He)})}},j.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},j.prototype.reloadTile=function(W,Y){var re=this.loaded;return re&&re[W.uid]?L.prototype.reloadTile.call(this,W,Y):this.loadTile(W,Y)},j.prototype.loadGeoJSON=function(W,Y){if(W.request)o.getJSON(W.request,Y);else{if(typeof W.data!="string")return Y(new Error("Input data given to '"+W.source+"' is not a valid GeoJSON object."));try{return Y(null,JSON.parse(W.data))}catch{return Y(new Error("Input data given to '"+W.source+"' is not a valid GeoJSON object."))}}},j.prototype.removeSource=function(W,Y){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Y()},j.prototype.getClusterExpansionZoom=function(W,Y){try{Y(null,this._geoJSONIndex.getClusterExpansionZoom(W.clusterId))}catch(re){Y(re)}},j.prototype.getClusterChildren=function(W,Y){try{Y(null,this._geoJSONIndex.getChildren(W.clusterId))}catch(re){Y(re)}},j.prototype.getClusterLeaves=function(W,Y){try{Y(null,this._geoJSONIndex.getLeaves(W.clusterId,W.limit,W.offset))}catch(re){Y(re)}},j}(U),Ht=function(L){var j=this;this.self=L,this.actor=new o.Actor(L,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:U,geojson:zr},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(W,Y){if(j.workerSourceTypes[W])throw new Error('Worker source with name "'+W+'" already registered.');j.workerSourceTypes[W]=Y},this.self.registerRTLTextPlugin=function(W){if(o.plugin.isParsed())throw new Error("RTL text plugin already registered.");o.plugin.applyArabicShaping=W.applyArabicShaping,o.plugin.processBidirectionalText=W.processBidirectionalText,o.plugin.processStyledBidirectionalText=W.processStyledBidirectionalText}};return Ht.prototype.setReferrer=function(L,j){this.referrer=j},Ht.prototype.setImages=function(L,j,W){for(var Y in this.availableImages[L]=j,this.workerSources[L]){var re=this.workerSources[L][Y];for(var me in re)re[me].availableImages=j}W()},Ht.prototype.setLayers=function(L,j,W){this.getLayerIndex(L).replace(j),W()},Ht.prototype.updateLayers=function(L,j,W){this.getLayerIndex(L).update(j.layers,j.removedIds),W()},Ht.prototype.loadTile=function(L,j,W){this.getWorkerSource(L,j.type,j.source).loadTile(j,W)},Ht.prototype.loadDEMTile=function(L,j,W){this.getDEMWorkerSource(L,j.source).loadTile(j,W)},Ht.prototype.reloadTile=function(L,j,W){this.getWorkerSource(L,j.type,j.source).reloadTile(j,W)},Ht.prototype.abortTile=function(L,j,W){this.getWorkerSource(L,j.type,j.source).abortTile(j,W)},Ht.prototype.removeTile=function(L,j,W){this.getWorkerSource(L,j.type,j.source).removeTile(j,W)},Ht.prototype.removeDEMTile=function(L,j){this.getDEMWorkerSource(L,j.source).removeTile(j)},Ht.prototype.removeSource=function(L,j,W){if(this.workerSources[L]&&this.workerSources[L][j.type]&&this.workerSources[L][j.type][j.source]){var Y=this.workerSources[L][j.type][j.source];delete this.workerSources[L][j.type][j.source],Y.removeSource!==void 0?Y.removeSource(j,W):W()}},Ht.prototype.loadWorkerSource=function(L,j,W){try{this.self.importScripts(j.url),W()}catch(Y){W(Y.toString())}},Ht.prototype.syncRTLPluginState=function(L,j,W){try{o.plugin.setState(j);var Y=o.plugin.getPluginURL();if(o.plugin.isLoaded()&&!o.plugin.isParsed()&&Y!=null){this.self.importScripts(Y);var re=o.plugin.isParsed();W(re?void 0:new Error("RTL Text Plugin failed to import scripts from "+Y),re)}}catch(me){W(me.toString())}},Ht.prototype.getAvailableImages=function(L){var j=this.availableImages[L];return j||(j=[]),j},Ht.prototype.getLayerIndex=function(L){var j=this.layerIndexes[L];return j||(j=this.layerIndexes[L]=new E),j},Ht.prototype.getWorkerSource=function(L,j,W){var Y=this;return this.workerSources[L]||(this.workerSources[L]={}),this.workerSources[L][j]||(this.workerSources[L][j]={}),this.workerSources[L][j][W]||(this.workerSources[L][j][W]=new this.workerSourceTypes[j]({send:function(re,me,ye){Y.actor.send(re,me,ye,L)}},this.getLayerIndex(L),this.getAvailableImages(L))),this.workerSources[L][j][W]},Ht.prototype.getDEMWorkerSource=function(L,j){return this.demWorkerSources[L]||(this.demWorkerSources[L]={}),this.demWorkerSources[L][j]||(this.demWorkerSources[L][j]=new D),this.demWorkerSources[L][j]},Ht.prototype.enforceCacheSizeLimit=function(L,j){o.enforceCacheSizeLimit(j)},typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Ht(self)),Ht}),f(["./shared"],function(o){var v=o.createCommonjsModule(function(l){function p(g){return!u(g)}function u(g){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var w,C,M=new Blob([""],{type:"text/javascript"}),N=URL.createObjectURL(M);try{C=new Worker(N),w=!0}catch{w=!1}return C&&C.terminate(),URL.revokeObjectURL(N),w}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var w=document.createElement("canvas");w.width=w.height=1;var C=w.getContext("2d");if(!C)return!1;var M=C.getImageData(0,0,1,1);return M&&M.width===w.width}()?(d[b=g&&g.failIfMajorPerformanceCaveat]===void 0&&(d[b]=function(w){var C=function(N){var K=document.createElement("canvas"),X=Object.create(p.webGLContextAttributes);return X.failIfMajorPerformanceCaveat=N,K.probablySupportsContext?K.probablySupportsContext("webgl",X)||K.probablySupportsContext("experimental-webgl",X):K.supportsContext?K.supportsContext("webgl",X)||K.supportsContext("experimental-webgl",X):K.getContext("webgl",X)||K.getContext("experimental-webgl",X)}(w);if(!C)return!1;var M=C.createShader(C.VERTEX_SHADER);return!(!M||C.isContextLost())&&(C.shaderSource(M,"void main() {}"),C.compileShader(M),C.getShaderParameter(M,C.COMPILE_STATUS)===!0)}(b)),d[b]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var b}l.exports?l.exports=p:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=p,window.mapboxgl.notSupportedReason=u);var d={};p.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),x={create:function(l,p,u){var d=o.window.document.createElement(l);return p!==void 0&&(d.className=p),u&&u.appendChild(d),d},createNS:function(l,p){return o.window.document.createElementNS(l,p)}},E=o.window.document&&o.window.document.documentElement.style;function T(l){if(!E)return l[0];for(var p=0;p<l.length;p++)if(l[p]in E)return l[p];return l[0]}var P,I=T(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);x.disableDrag=function(){E&&I&&(P=E[I],E[I]="none")},x.enableDrag=function(){E&&I&&(E[I]=P)};var q=T(["transform","WebkitTransform"]);x.setTransform=function(l,p){l.style[q]=p};var U=!1;try{var G=Object.defineProperty({},"passive",{get:function(){U=!0}});o.window.addEventListener("test",G,G),o.window.removeEventListener("test",G,G)}catch{U=!1}x.addEventListener=function(l,p,u,d){d===void 0&&(d={}),l.addEventListener(p,u,"passive"in d&&U?d:d.capture)},x.removeEventListener=function(l,p,u,d){d===void 0&&(d={}),l.removeEventListener(p,u,"passive"in d&&U?d:d.capture)};var D=function(l){l.preventDefault(),l.stopPropagation(),o.window.removeEventListener("click",D,!0)};function F(l){var p=l.userImage;return!!(p&&p.render&&p.render())&&(l.data.replace(new Uint8Array(p.data.buffer)),!0)}x.suppressClick=function(){o.window.addEventListener("click",D,!0),o.window.setTimeout(function(){o.window.removeEventListener("click",D,!0)},0)},x.mousePos=function(l,p){var u=l.getBoundingClientRect();return new o.Point(p.clientX-u.left-l.clientLeft,p.clientY-u.top-l.clientTop)},x.touchPos=function(l,p){for(var u=l.getBoundingClientRect(),d=[],g=0;g<p.length;g++)d.push(new o.Point(p[g].clientX-u.left-l.clientLeft,p[g].clientY-u.top-l.clientTop));return d},x.mouseButton=function(l){return o.window.InstallTrigger!==void 0&&l.button===2&&l.ctrlKey&&o.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:l.button},x.remove=function(l){l.parentNode&&l.parentNode.removeChild(l)};var V=function(l){function p(){l.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.RGBAImage({width:1,height:1}),this.dirty=!0}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.isLoaded=function(){return this.loaded},p.prototype.setLoaded=function(u){if(this.loaded!==u&&(this.loaded=u,u)){for(var d=0,g=this.requestors;d<g.length;d+=1){var b=g[d];this._notify(b.ids,b.callback)}this.requestors=[]}},p.prototype.getImage=function(u){return this.images[u]},p.prototype.addImage=function(u,d){this._validate(u,d)&&(this.images[u]=d)},p.prototype._validate=function(u,d){var g=!0;return this._validateStretch(d.stretchX,d.data&&d.data.width)||(this.fire(new o.ErrorEvent(new Error('Image "'+u+'" has invalid "stretchX" value'))),g=!1),this._validateStretch(d.stretchY,d.data&&d.data.height)||(this.fire(new o.ErrorEvent(new Error('Image "'+u+'" has invalid "stretchY" value'))),g=!1),this._validateContent(d.content,d)||(this.fire(new o.ErrorEvent(new Error('Image "'+u+'" has invalid "content" value'))),g=!1),g},p.prototype._validateStretch=function(u,d){if(!u)return!0;for(var g=0,b=0,w=u;b<w.length;b+=1){var C=w[b];if(C[0]<g||C[1]<C[0]||d<C[1])return!1;g=C[1]}return!0},p.prototype._validateContent=function(u,d){return!(u&&(u.length!==4||u[0]<0||d.data.width<u[0]||u[1]<0||d.data.height<u[1]||u[2]<0||d.data.width<u[2]||u[3]<0||d.data.height<u[3]||u[2]<u[0]||u[3]<u[1]))},p.prototype.updateImage=function(u,d){d.version=this.images[u].version+1,this.images[u]=d,this.updatedImages[u]=!0},p.prototype.removeImage=function(u){var d=this.images[u];delete this.images[u],delete this.patterns[u],d.userImage&&d.userImage.onRemove&&d.userImage.onRemove()},p.prototype.listImages=function(){return Object.keys(this.images)},p.prototype.getImages=function(u,d){var g=!0;if(!this.isLoaded())for(var b=0,w=u;b<w.length;b+=1)this.images[w[b]]||(g=!1);this.isLoaded()||g?this._notify(u,d):this.requestors.push({ids:u,callback:d})},p.prototype._notify=function(u,d){for(var g={},b=0,w=u;b<w.length;b+=1){var C=w[b];this.images[C]||this.fire(new o.Event("styleimagemissing",{id:C}));var M=this.images[C];M?g[C]={data:M.data.clone(),pixelRatio:M.pixelRatio,sdf:M.sdf,version:M.version,stretchX:M.stretchX,stretchY:M.stretchY,content:M.content,hasRenderCallback:!!(M.userImage&&M.userImage.render)}:o.warnOnce('Image "'+C+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}d(null,g)},p.prototype.getPixelSize=function(){var u=this.atlasImage;return{width:u.width,height:u.height}},p.prototype.getPattern=function(u){var d=this.patterns[u],g=this.getImage(u);if(!g)return null;if(d&&d.position.version===g.version)return d.position;if(d)d.position.version=g.version;else{var b={w:g.data.width+2,h:g.data.height+2,x:0,y:0},w=new o.ImagePosition(b,g);this.patterns[u]={bin:b,position:w}}return this._updatePatternAtlas(),this.patterns[u].position},p.prototype.bind=function(u){var d=u.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new o.Texture(u,this.atlasImage,d.RGBA),this.atlasTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE)},p.prototype._updatePatternAtlas=function(){var u=[];for(var d in this.patterns)u.push(this.patterns[d].bin);var g=o.potpack(u),b=g.w,w=g.h,C=this.atlasImage;for(var M in C.resize({width:b||1,height:w||1}),this.patterns){var N=this.patterns[M].bin,K=N.x+1,X=N.y+1,J=this.images[M].data,ce=J.width,ue=J.height;o.RGBAImage.copy(J,C,{x:0,y:0},{x:K,y:X},{width:ce,height:ue}),o.RGBAImage.copy(J,C,{x:0,y:ue-1},{x:K,y:X-1},{width:ce,height:1}),o.RGBAImage.copy(J,C,{x:0,y:0},{x:K,y:X+ue},{width:ce,height:1}),o.RGBAImage.copy(J,C,{x:ce-1,y:0},{x:K-1,y:X},{width:1,height:ue}),o.RGBAImage.copy(J,C,{x:0,y:0},{x:K+ce,y:X},{width:1,height:ue})}this.dirty=!0},p.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},p.prototype.dispatchRenderCallbacks=function(u){for(var d=0,g=u;d<g.length;d+=1){var b=g[d];if(!this.callbackDispatchedThisFrame[b]){this.callbackDispatchedThisFrame[b]=!0;var w=this.images[b];F(w)&&this.updateImage(b,w)}}},p}(o.Evented),B=oe,z=oe,ne=1e20;function oe(l,p,u,d,g,b){this.fontSize=l||24,this.buffer=p===void 0?3:p,this.cutoff=d||.25,this.fontFamily=g||"sans-serif",this.fontWeight=b||"normal",this.radius=u||8;var w=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=w,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(w*w),this.gridInner=new Float64Array(w*w),this.f=new Float64Array(w),this.d=new Float64Array(w),this.z=new Float64Array(w+1),this.v=new Int16Array(w),this.middle=Math.round(w/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function pe(l,p,u,d,g,b,w){for(var C=0;C<p;C++){for(var M=0;M<u;M++)d[M]=l[M*p+C];for(be(d,g,b,w,u),M=0;M<u;M++)l[M*p+C]=g[M]}for(M=0;M<u;M++){for(C=0;C<p;C++)d[C]=l[M*p+C];for(be(d,g,b,w,p),C=0;C<p;C++)l[M*p+C]=Math.sqrt(g[C])}}function be(l,p,u,d,g){u[0]=0,d[0]=-ne,d[1]=+ne;for(var b=1,w=0;b<g;b++){for(var C=(l[b]+b*b-(l[u[w]]+u[w]*u[w]))/(2*b-2*u[w]);C<=d[w];)w--,C=(l[b]+b*b-(l[u[w]]+u[w]*u[w]))/(2*b-2*u[w]);u[++w]=b,d[w]=C,d[w+1]=+ne}for(b=0,w=0;b<g;b++){for(;d[w+1]<b;)w++;p[b]=(b-u[w])*(b-u[w])+l[u[w]]}}oe.prototype.draw=function(l){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(l,this.buffer,this.middle);for(var p=this.ctx.getImageData(0,0,this.size,this.size),u=new Uint8ClampedArray(this.size*this.size),d=0;d<this.size*this.size;d++){var g=p.data[4*d+3]/255;this.gridOuter[d]=g===1?0:g===0?ne:Math.pow(Math.max(0,.5-g),2),this.gridInner[d]=g===1?ne:g===0?0:Math.pow(Math.max(0,g-.5),2)}for(pe(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),pe(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),d=0;d<this.size*this.size;d++)u[d]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[d]-this.gridInner[d])/this.radius+this.cutoff))));return u},B.default=z;var Te=function(l,p){this.requestManager=l,this.localIdeographFontFamily=p,this.entries={}};Te.prototype.setURL=function(l){this.url=l},Te.prototype.getGlyphs=function(l,p){var u=this,d=[];for(var g in l)for(var b=0,w=l[g];b<w.length;b+=1)d.push({stack:g,id:w[b]});o.asyncAll(d,function(C,M){var N=C.stack,K=C.id,X=u.entries[N];X||(X=u.entries[N]={glyphs:{},requests:{},ranges:{}});var J=X.glyphs[K];if(J===void 0){if(J=u._tinySDF(X,N,K))return X.glyphs[K]=J,void M(null,{stack:N,id:K,glyph:J});var ce=Math.floor(K/256);if(256*ce>65535)M(new Error("glyphs > 65535 not supported"));else if(X.ranges[ce])M(null,{stack:N,id:K,glyph:J});else{var ue=X.requests[ce];ue||(ue=X.requests[ce]=[],Te.loadGlyphRange(N,ce,u.url,u.requestManager,function(ve,ae){if(ae){for(var ge in ae)u._doesCharSupportLocalGlyph(+ge)||(X.glyphs[+ge]=ae[+ge]);X.ranges[ce]=!0}for(var we=0,Ae=ue;we<Ae.length;we+=1)(0,Ae[we])(ve,ae);delete X.requests[ce]})),ue.push(function(ve,ae){ve?M(ve):ae&&M(null,{stack:N,id:K,glyph:ae[K]||null})})}}else M(null,{stack:N,id:K,glyph:J})},function(C,M){if(C)p(C);else if(M){for(var N={},K=0,X=M;K<X.length;K+=1){var J=X[K],ce=J.stack,ue=J.id,ve=J.glyph;(N[ce]||(N[ce]={}))[ue]=ve&&{id:ve.id,bitmap:ve.bitmap.clone(),metrics:ve.metrics}}p(null,N)}})},Te.prototype._doesCharSupportLocalGlyph=function(l){return!!this.localIdeographFontFamily&&(o.isChar["CJK Unified Ideographs"](l)||o.isChar["Hangul Syllables"](l)||o.isChar.Hiragana(l)||o.isChar.Katakana(l))},Te.prototype._tinySDF=function(l,p,u){var d=this.localIdeographFontFamily;if(d&&this._doesCharSupportLocalGlyph(u)){var g=l.tinySDF;if(!g){var b="400";/bold/i.test(p)?b="900":/medium/i.test(p)?b="500":/light/i.test(p)&&(b="200"),g=l.tinySDF=new Te.TinySDF(24,3,8,.25,d,b)}return{id:u,bitmap:new o.AlphaImage({width:30,height:30},g.draw(String.fromCharCode(u))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},Te.loadGlyphRange=function(l,p,u,d,g){var b=256*p,w=b+255,C=d.transformRequest(d.normalizeGlyphsURL(u).replace("{fontstack}",l).replace("{range}",b+"-"+w),o.ResourceType.Glyphs);o.getArrayBuffer(C,function(M,N){if(M)g(M);else if(N){for(var K={},X=0,J=o.parseGlyphPBF(N);X<J.length;X+=1){var ce=J[X];K[ce.id]=ce}g(null,K)}})},Te.TinySDF=B;var _e=function(){this.specification=o.styleSpec.light.position};_e.prototype.possiblyEvaluate=function(l,p){return o.sphericalToCartesian(l.expression.evaluate(p))},_e.prototype.interpolate=function(l,p,u){return{x:o.number(l.x,p.x,u),y:o.number(l.y,p.y,u),z:o.number(l.z,p.z,u)}};var Se=new o.Properties({anchor:new o.DataConstantProperty(o.styleSpec.light.anchor),position:new _e,color:new o.DataConstantProperty(o.styleSpec.light.color),intensity:new o.DataConstantProperty(o.styleSpec.light.intensity)}),te=function(l){function p(u){l.call(this),this._transitionable=new o.Transitionable(Se),this.setLight(u),this._transitioning=this._transitionable.untransitioned()}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getLight=function(){return this._transitionable.serialize()},p.prototype.setLight=function(u,d){if(d===void 0&&(d={}),!this._validate(o.validateLight,u,d))for(var g in u){var b=u[g];o.endsWith(g,"-transition")?this._transitionable.setTransition(g.slice(0,-11),b):this._transitionable.setValue(g,b)}},p.prototype.updateTransitions=function(u){this._transitioning=this._transitionable.transitioned(u,this._transitioning)},p.prototype.hasTransition=function(){return this._transitioning.hasTransition()},p.prototype.recalculate=function(u){this.properties=this._transitioning.possiblyEvaluate(u)},p.prototype._validate=function(u,d,g){return(!g||g.validate!==!1)&&o.emitValidationErrors(this,u.call(o.validateStyle,o.extend({value:d,style:{glyphs:!0,sprite:!0},styleSpec:o.styleSpec})))},p}(o.Evented),he=function(l,p){this.width=l,this.height=p,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};he.prototype.getDash=function(l,p){var u=l.join(",")+String(p);return this.dashEntry[u]||(this.dashEntry[u]=this.addDash(l,p)),this.dashEntry[u]},he.prototype.getDashRanges=function(l,p,u){var d=[],g=l.length%2==1?-l[l.length-1]*u:0,b=l[0]*u,w=!0;d.push({left:g,right:b,isDash:w,zeroLength:l[0]===0});for(var C=l[0],M=1;M<l.length;M++){var N=l[M];d.push({left:g=C*u,right:b=(C+=N)*u,isDash:w=!w,zeroLength:N===0})}return d},he.prototype.addRoundDash=function(l,p,u){for(var d=p/2,g=-u;g<=u;g++)for(var b=this.width*(this.nextRow+u+g),w=0,C=l[w],M=0;M<this.width;M++){M/C.right>1&&(C=l[++w]);var N=Math.abs(M-C.left),K=Math.abs(M-C.right),X=Math.min(N,K),J=void 0,ce=g/u*(d+1);if(C.isDash){var ue=d-Math.abs(ce);J=Math.sqrt(X*X+ue*ue)}else J=d-Math.sqrt(X*X+ce*ce);this.data[b+M]=Math.max(0,Math.min(255,J+128))}},he.prototype.addRegularDash=function(l){for(var p=l.length-1;p>=0;--p){var u=l[p],d=l[p+1];u.zeroLength?l.splice(p,1):d&&d.isDash===u.isDash&&(d.left=u.left,l.splice(p,1))}var g=l[0],b=l[l.length-1];g.isDash===b.isDash&&(g.left=b.left-this.width,b.right=g.right+this.width);for(var w=this.width*this.nextRow,C=0,M=l[C],N=0;N<this.width;N++){N/M.right>1&&(M=l[++C]);var K=Math.abs(N-M.left),X=Math.abs(N-M.right),J=Math.min(K,X);this.data[w+N]=Math.max(0,Math.min(255,(M.isDash?J:-J)+128))}},he.prototype.addDash=function(l,p){var u=p?7:0,d=2*u+1;if(this.nextRow+d>this.height)return o.warnOnce("LineAtlas out of space"),null;for(var g=0,b=0;b<l.length;b++)g+=l[b];if(g!==0){var w=this.width/g,C=this.getDashRanges(l,this.width,w);p?this.addRoundDash(C,w,u):this.addRegularDash(C)}var M={y:(this.nextRow+u+.5)/this.height,height:2*u/this.height,width:g};return this.nextRow+=d,this.dirty=!0,M},he.prototype.bind=function(l){var p=l.gl;this.texture?(p.bindTexture(p.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,p.texSubImage2D(p.TEXTURE_2D,0,0,0,this.width,this.height,p.ALPHA,p.UNSIGNED_BYTE,this.data))):(this.texture=p.createTexture(),p.bindTexture(p.TEXTURE_2D,this.texture),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.REPEAT),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.REPEAT),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.LINEAR),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.LINEAR),p.texImage2D(p.TEXTURE_2D,0,p.ALPHA,this.width,this.height,0,p.ALPHA,p.UNSIGNED_BYTE,this.data))};var Oe=function l(p,u){this.workerPool=p,this.actors=[],this.currentActor=0,this.id=o.uniqueId();for(var d=this.workerPool.acquire(this.id),g=0;g<d.length;g++){var b=new l.Actor(d[g],u,this.id);b.name="Worker "+g,this.actors.push(b)}};function je(l,p,u){var d=function(g,b){if(g)return u(g);if(b){var w=o.pick(o.extend(b,l),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);b.vector_layers&&(w.vectorLayers=b.vector_layers,w.vectorLayerIds=w.vectorLayers.map(function(C){return C.id})),w.tiles=p.canonicalizeTileset(w,l.url),u(null,w)}};return l.url?o.getJSON(p.transformRequest(p.normalizeSourceURL(l.url),o.ResourceType.Source),d):o.browser.frame(function(){return d(null,l)})}Oe.prototype.broadcast=function(l,p,u){o.asyncAll(this.actors,function(d,g){d.send(l,p,g)},u=u||function(){})},Oe.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},Oe.prototype.remove=function(){this.actors.forEach(function(l){l.remove()}),this.actors=[],this.workerPool.release(this.id)},Oe.Actor=o.Actor;var Ce=function(l,p,u){this.bounds=o.LngLatBounds.convert(this.validateBounds(l)),this.minzoom=p||0,this.maxzoom=u||24};Ce.prototype.validateBounds=function(l){return Array.isArray(l)&&l.length===4?[Math.max(-180,l[0]),Math.max(-90,l[1]),Math.min(180,l[2]),Math.min(90,l[3])]:[-180,-90,180,90]},Ce.prototype.contains=function(l){var p=Math.pow(2,l.z),u=Math.floor(o.mercatorXfromLng(this.bounds.getWest())*p),d=Math.floor(o.mercatorYfromLat(this.bounds.getNorth())*p),g=Math.ceil(o.mercatorXfromLng(this.bounds.getEast())*p),b=Math.ceil(o.mercatorYfromLat(this.bounds.getSouth())*p);return l.x>=u&&l.x<g&&l.y>=d&&l.y<b};var ke=function(l){function p(u,d,g,b){if(l.call(this),this.id=u,this.dispatcher=g,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.extend(this,o.pick(d,["url","scheme","tileSize","promoteId"])),this._options=o.extend({type:"vector"},d),this._collectResourceTiming=d.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(b)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.load=function(){var u=this;this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=je(this._options,this.map._requestManager,function(d,g){u._tileJSONRequest=null,u._loaded=!0,d?u.fire(new o.ErrorEvent(d)):g&&(o.extend(u,g),g.bounds&&(u.tileBounds=new Ce(g.bounds,u.minzoom,u.maxzoom)),o.postTurnstileEvent(g.tiles,u.map._requestManager._customAccessToken),o.postMapLoadEvent(g.tiles,u.map._getMapId(),u.map._requestManager._skuToken,u.map._requestManager._customAccessToken),u.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),u.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})))})},p.prototype.loaded=function(){return this._loaded},p.prototype.hasTile=function(u){return!this.tileBounds||this.tileBounds.contains(u.canonical)},p.prototype.onAdd=function(u){this.map=u,this.load()},p.prototype.setSourceProperty=function(u){this._tileJSONRequest&&this._tileJSONRequest.cancel(),u(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},p.prototype.setTiles=function(u){var d=this;return this.setSourceProperty(function(){d._options.tiles=u}),this},p.prototype.setUrl=function(u){var d=this;return this.setSourceProperty(function(){d.url=u,d._options.url=u}),this},p.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},p.prototype.serialize=function(){return o.extend({},this._options)},p.prototype.loadTile=function(u,d){var g=this.map._requestManager.normalizeTileURL(u.tileID.canonical.url(this.tiles,this.scheme)),b={request:this.map._requestManager.transformRequest(g,o.ResourceType.Tile),uid:u.uid,tileID:u.tileID,zoom:u.tileID.overscaledZ,tileSize:this.tileSize*u.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:o.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function w(C,M){return delete u.request,u.aborted?d(null):C&&C.status!==404?d(C):(M&&M.resourceTiming&&(u.resourceTiming=M.resourceTiming),this.map._refreshExpiredTiles&&M&&u.setExpiryData(M),u.loadVectorData(M,this.map.painter),o.cacheEntryPossiblyAdded(this.dispatcher),d(null),void(u.reloadCallback&&(this.loadTile(u,u.reloadCallback),u.reloadCallback=null)))}b.request.collectResourceTiming=this._collectResourceTiming,u.actor&&u.state!=="expired"?u.state==="loading"?u.reloadCallback=d:u.request=u.actor.send("reloadTile",b,w.bind(this)):(u.actor=this.dispatcher.getActor(),u.request=u.actor.send("loadTile",b,w.bind(this)))},p.prototype.abortTile=function(u){u.request&&(u.request.cancel(),delete u.request),u.actor&&u.actor.send("abortTile",{uid:u.uid,type:this.type,source:this.id},void 0)},p.prototype.unloadTile=function(u){u.unloadVectorData(),u.actor&&u.actor.send("removeTile",{uid:u.uid,type:this.type,source:this.id},void 0)},p.prototype.hasTransition=function(){return!1},p}(o.Evented),$e=function(l){function p(u,d,g,b){l.call(this),this.id=u,this.dispatcher=g,this.setEventedParent(b),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.extend({type:"raster"},d),o.extend(this,o.pick(d,["url","scheme","tileSize"]))}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.load=function(){var u=this;this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=je(this._options,this.map._requestManager,function(d,g){u._tileJSONRequest=null,u._loaded=!0,d?u.fire(new o.ErrorEvent(d)):g&&(o.extend(u,g),g.bounds&&(u.tileBounds=new Ce(g.bounds,u.minzoom,u.maxzoom)),o.postTurnstileEvent(g.tiles),o.postMapLoadEvent(g.tiles,u.map._getMapId(),u.map._requestManager._skuToken),u.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),u.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})))})},p.prototype.loaded=function(){return this._loaded},p.prototype.onAdd=function(u){this.map=u,this.load()},p.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},p.prototype.serialize=function(){return o.extend({},this._options)},p.prototype.hasTile=function(u){return!this.tileBounds||this.tileBounds.contains(u.canonical)},p.prototype.loadTile=function(u,d){var g=this,b=this.map._requestManager.normalizeTileURL(u.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);u.request=o.getImage(this.map._requestManager.transformRequest(b,o.ResourceType.Tile),function(w,C){if(delete u.request,u.aborted)u.state="unloaded",d(null);else if(w)u.state="errored",d(w);else if(C){g.map._refreshExpiredTiles&&u.setExpiryData(C),delete C.cacheControl,delete C.expires;var M=g.map.painter.context,N=M.gl;u.texture=g.map.painter.getTileTexture(C.width),u.texture?u.texture.update(C,{useMipmap:!0}):(u.texture=new o.Texture(M,C,N.RGBA,{useMipmap:!0}),u.texture.bind(N.LINEAR,N.CLAMP_TO_EDGE,N.LINEAR_MIPMAP_NEAREST),M.extTextureFilterAnisotropic&&N.texParameterf(N.TEXTURE_2D,M.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,M.extTextureFilterAnisotropicMax)),u.state="loaded",o.cacheEntryPossiblyAdded(g.dispatcher),d(null)}})},p.prototype.abortTile=function(u,d){u.request&&(u.request.cancel(),delete u.request),d()},p.prototype.unloadTile=function(u,d){u.texture&&this.map.painter.saveTileTexture(u.texture),d()},p.prototype.hasTransition=function(){return!1},p}(o.Evented),Ze=function(l){function p(u,d,g,b){l.call(this,u,d,g,b),this.type="raster-dem",this.maxzoom=22,this._options=o.extend({type:"raster-dem"},d),this.encoding=d.encoding||"mapbox"}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},p.prototype.loadTile=function(u,d){var g=this.map._requestManager.normalizeTileURL(u.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function b(w,C){w&&(u.state="errored",d(w)),C&&(u.dem=C,u.needsHillshadePrepare=!0,u.state="loaded",d(null))}u.request=o.getImage(this.map._requestManager.transformRequest(g,o.ResourceType.Tile),(function(w,C){if(delete u.request,u.aborted)u.state="unloaded",d(null);else if(w)u.state="errored",d(w);else if(C){this.map._refreshExpiredTiles&&u.setExpiryData(C),delete C.cacheControl,delete C.expires;var M=o.window.ImageBitmap&&C instanceof o.window.ImageBitmap&&o.offscreenCanvasSupported()?C:o.browser.getImageData(C,1),N={uid:u.uid,coord:u.tileID,source:this.id,rawImageData:M,encoding:this.encoding};u.actor&&u.state!=="expired"||(u.actor=this.dispatcher.getActor(),u.actor.send("loadDEMTile",N,b.bind(this)))}}).bind(this)),u.neighboringTiles=this._getNeighboringTiles(u.tileID)},p.prototype._getNeighboringTiles=function(u){var d=u.canonical,g=Math.pow(2,d.z),b=(d.x-1+g)%g,w=d.x===0?u.wrap-1:u.wrap,C=(d.x+1+g)%g,M=d.x+1===g?u.wrap+1:u.wrap,N={};return N[new o.OverscaledTileID(u.overscaledZ,w,d.z,b,d.y).key]={backfilled:!1},N[new o.OverscaledTileID(u.overscaledZ,M,d.z,C,d.y).key]={backfilled:!1},d.y>0&&(N[new o.OverscaledTileID(u.overscaledZ,w,d.z,b,d.y-1).key]={backfilled:!1},N[new o.OverscaledTileID(u.overscaledZ,u.wrap,d.z,d.x,d.y-1).key]={backfilled:!1},N[new o.OverscaledTileID(u.overscaledZ,M,d.z,C,d.y-1).key]={backfilled:!1}),d.y+1<g&&(N[new o.OverscaledTileID(u.overscaledZ,w,d.z,b,d.y+1).key]={backfilled:!1},N[new o.OverscaledTileID(u.overscaledZ,u.wrap,d.z,d.x,d.y+1).key]={backfilled:!1},N[new o.OverscaledTileID(u.overscaledZ,M,d.z,C,d.y+1).key]={backfilled:!1}),N},p.prototype.unloadTile=function(u){u.demTexture&&this.map.painter.saveTileTexture(u.demTexture),u.fbo&&(u.fbo.destroy(),delete u.fbo),u.dem&&delete u.dem,delete u.neighboringTiles,u.state="unloaded",u.actor&&u.actor.send("removeDEMTile",{uid:u.uid,source:this.id})},p}($e),bt=function(l){function p(u,d,g,b){l.call(this),this.id=u,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=g.getActor(),this.setEventedParent(b),this._data=d.data,this._options=o.extend({},d),this._collectResourceTiming=d.collectResourceTiming,this._resourceTiming=[],d.maxzoom!==void 0&&(this.maxzoom=d.maxzoom),d.type&&(this.type=d.type),d.attribution&&(this.attribution=d.attribution),this.promoteId=d.promoteId;var w=o.EXTENT/this.tileSize;this.workerOptions=o.extend({source:this.id,cluster:d.cluster||!1,geojsonVtOptions:{buffer:(d.buffer!==void 0?d.buffer:128)*w,tolerance:(d.tolerance!==void 0?d.tolerance:.375)*w,extent:o.EXTENT,maxZoom:this.maxzoom,lineMetrics:d.lineMetrics||!1,generateId:d.generateId||!1},superclusterOptions:{maxZoom:d.clusterMaxZoom!==void 0?Math.min(d.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,d.clusterMinPoints||2),extent:o.EXTENT,radius:(d.clusterRadius||50)*w,log:!1,generateId:d.generateId||!1},clusterProperties:d.clusterProperties,filter:d.filter},d.workerOptions)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.load=function(){var u=this;this.fire(new o.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(d){if(d)u.fire(new o.ErrorEvent(d));else{var g={dataType:"source",sourceDataType:"metadata"};u._collectResourceTiming&&u._resourceTiming&&u._resourceTiming.length>0&&(g.resourceTiming=u._resourceTiming,u._resourceTiming=[]),u.fire(new o.Event("data",g))}})},p.prototype.onAdd=function(u){this.map=u,this.load()},p.prototype.setData=function(u){var d=this;return this._data=u,this.fire(new o.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(g){if(g)d.fire(new o.ErrorEvent(g));else{var b={dataType:"source",sourceDataType:"content"};d._collectResourceTiming&&d._resourceTiming&&d._resourceTiming.length>0&&(b.resourceTiming=d._resourceTiming,d._resourceTiming=[]),d.fire(new o.Event("data",b))}}),this},p.prototype.getClusterExpansionZoom=function(u,d){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:u,source:this.id},d),this},p.prototype.getClusterChildren=function(u,d){return this.actor.send("geojson.getClusterChildren",{clusterId:u,source:this.id},d),this},p.prototype.getClusterLeaves=function(u,d,g,b){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:u,limit:d,offset:g},b),this},p.prototype._updateWorkerData=function(u){var d=this;this._loaded=!1;var g=o.extend({},this.workerOptions),b=this._data;typeof b=="string"?(g.request=this.map._requestManager.transformRequest(o.browser.resolveURL(b),o.ResourceType.Source),g.request.collectResourceTiming=this._collectResourceTiming):g.data=JSON.stringify(b),this.actor.send(this.type+".loadData",g,function(w,C){d._removed||C&&C.abandoned||(d._loaded=!0,C&&C.resourceTiming&&C.resourceTiming[d.id]&&(d._resourceTiming=C.resourceTiming[d.id].slice(0)),d.actor.send(d.type+".coalesce",{source:g.source},null),u(w))})},p.prototype.loaded=function(){return this._loaded},p.prototype.loadTile=function(u,d){var g=this,b=u.actor?"reloadTile":"loadTile";u.actor=this.actor,u.request=this.actor.send(b,{type:this.type,uid:u.uid,tileID:u.tileID,zoom:u.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:o.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(w,C){return delete u.request,u.unloadVectorData(),u.aborted?d(null):w?d(w):(u.loadVectorData(C,g.map.painter,b==="reloadTile"),d(null))})},p.prototype.abortTile=function(u){u.request&&(u.request.cancel(),delete u.request),u.aborted=!0},p.prototype.unloadTile=function(u){u.unloadVectorData(),this.actor.send("removeTile",{uid:u.uid,type:this.type,source:this.id})},p.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},p.prototype.serialize=function(){return o.extend({},this._options,{type:this.type,data:this._data})},p.prototype.hasTransition=function(){return!1},p}(o.Evented),Pe=o.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),Ge=function(l){function p(u,d,g,b){l.call(this),this.id=u,this.dispatcher=g,this.coordinates=d.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(b),this.options=d}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.load=function(u,d){var g=this;this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this.url=this.options.url,o.getImage(this.map._requestManager.transformRequest(this.url,o.ResourceType.Image),function(b,w){g._loaded=!0,b?g.fire(new o.ErrorEvent(b)):w&&(g.image=w,u&&(g.coordinates=u),d&&d(),g._finishLoading())})},p.prototype.loaded=function(){return this._loaded},p.prototype.updateImage=function(u){var d=this;return this.image&&u.url?(this.options.url=u.url,this.load(u.coordinates,function(){d.texture=null}),this):this},p.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})))},p.prototype.onAdd=function(u){this.map=u,this.load()},p.prototype.setCoordinates=function(u){var d=this;this.coordinates=u;var g=u.map(o.MercatorCoordinate.fromLngLat);this.tileID=function(w){for(var C=1/0,M=1/0,N=-1/0,K=-1/0,X=0,J=w;X<J.length;X+=1){var ce=J[X];C=Math.min(C,ce.x),M=Math.min(M,ce.y),N=Math.max(N,ce.x),K=Math.max(K,ce.y)}var ue=Math.max(N-C,K-M),ve=Math.max(0,Math.floor(-Math.log(ue)/Math.LN2)),ae=Math.pow(2,ve);return new o.CanonicalTileID(ve,Math.floor((C+N)/2*ae),Math.floor((M+K)/2*ae))}(g),this.minzoom=this.maxzoom=this.tileID.z;var b=g.map(function(w){return d.tileID.getTilePoint(w)._round()});return this._boundsArray=new o.StructArrayLayout4i8,this._boundsArray.emplaceBack(b[0].x,b[0].y,0,0),this._boundsArray.emplaceBack(b[1].x,b[1].y,o.EXTENT,0),this._boundsArray.emplaceBack(b[3].x,b[3].y,0,o.EXTENT),this._boundsArray.emplaceBack(b[2].x,b[2].y,o.EXTENT,o.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})),this},p.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var u=this.map.painter.context,d=u.gl;for(var g in this.boundsBuffer||(this.boundsBuffer=u.createVertexBuffer(this._boundsArray,Pe.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new o.Texture(u,this.image,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE)),this.tiles){var b=this.tiles[g];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture)}}},p.prototype.loadTile=function(u,d){this.tileID&&this.tileID.equals(u.tileID.canonical)?(this.tiles[String(u.tileID.wrap)]=u,u.buckets={},d(null)):(u.state="errored",d(null))},p.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},p.prototype.hasTransition=function(){return!1},p}(o.Evented),st=function(l){function p(u,d,g,b){l.call(this,u,d,g,b),this.roundZoom=!0,this.type="video",this.options=d}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.load=function(){var u=this;this._loaded=!1;var d=this.options;this.urls=[];for(var g=0,b=d.urls;g<b.length;g+=1)this.urls.push(this.map._requestManager.transformRequest(b[g],o.ResourceType.Source).url);o.getVideo(this.urls,function(w,C){u._loaded=!0,w?u.fire(new o.ErrorEvent(w)):C&&(u.video=C,u.video.loop=!0,u.video.setAttribute("playsinline",""),u.video.addEventListener("playing",function(){u.map.triggerRepaint()}),u.map&&u.video.play(),u._finishLoading())})},p.prototype.pause=function(){this.video&&this.video.pause()},p.prototype.play=function(){this.video&&this.video.play()},p.prototype.seek=function(u){if(this.video){var d=this.video.seekable;u<d.start(0)||u>d.end(0)?this.fire(new o.ErrorEvent(new o.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+d.start(0)+" and "+d.end(0)+"-second mark."))):this.video.currentTime=u}},p.prototype.getVideo=function(){return this.video},p.prototype.onAdd=function(u){this.map||(this.map=u,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},p.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var u=this.map.painter.context,d=u.gl;for(var g in this.boundsBuffer||(this.boundsBuffer=u.createVertexBuffer(this._boundsArray,Pe.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE),d.texSubImage2D(d.TEXTURE_2D,0,0,0,d.RGBA,d.UNSIGNED_BYTE,this.video)):(this.texture=new o.Texture(u,this.video,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE)),this.tiles){var b=this.tiles[g];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture)}}},p.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},p.prototype.hasTransition=function(){return this.video&&!this.video.paused},p}(Ge),Re=function(l){function p(u,d,g,b){l.call(this,u,d,g,b),d.coordinates?Array.isArray(d.coordinates)&&d.coordinates.length===4&&!d.coordinates.some(function(w){return!Array.isArray(w)||w.length!==2||w.some(function(C){return typeof C!="number"})})||this.fire(new o.ErrorEvent(new o.ValidationError("sources."+u,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.ErrorEvent(new o.ValidationError("sources."+u,null,'missing required property "coordinates"'))),d.animate&&typeof d.animate!="boolean"&&this.fire(new o.ErrorEvent(new o.ValidationError("sources."+u,null,'optional "animate" property must be a boolean value'))),d.canvas?typeof d.canvas=="string"||d.canvas instanceof o.window.HTMLCanvasElement||this.fire(new o.ErrorEvent(new o.ValidationError("sources."+u,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.ErrorEvent(new o.ValidationError("sources."+u,null,'missing required property "canvas"'))),this.options=d,this.animate=d.animate===void 0||d.animate}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof o.window.HTMLCanvasElement?this.options.canvas:o.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},p.prototype.getCanvas=function(){return this.canvas},p.prototype.onAdd=function(u){this.map=u,this.load(),this.canvas&&this.animate&&this.play()},p.prototype.onRemove=function(){this.pause()},p.prototype.prepare=function(){var u=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,u=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,u=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var d=this.map.painter.context,g=d.gl;for(var b in this.boundsBuffer||(this.boundsBuffer=d.createVertexBuffer(this._boundsArray,Pe.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(u||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new o.Texture(d,this.canvas,g.RGBA,{premultiply:!0}),this.tiles){var w=this.tiles[b];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture)}}},p.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},p.prototype.hasTransition=function(){return this._playing},p.prototype._hasInvalidDimensions=function(){for(var u=0,d=[this.canvas.width,this.canvas.height];u<d.length;u+=1){var g=d[u];if(isNaN(g)||g<=0)return!0}return!1},p}(Ge),qe={vector:ke,raster:$e,"raster-dem":Ze,geojson:bt,video:st,image:Ge,canvas:Re};function Kt(l,p){var u=o.identity([]);return o.translate(u,u,[1,1,0]),o.scale(u,u,[.5*l.width,.5*l.height,1]),o.multiply(u,u,l.calculatePosMatrix(p.toUnwrapped()))}function It(l,p,u,d,g,b){var w=function(ve,ae,ge){if(ve)for(var we=0,Ae=ve;we<Ae.length;we+=1){var Ne=ae[Ae[we]];if(Ne&&Ne.source===ge&&Ne.type==="fill-extrusion")return!0}else for(var De in ae){var Fe=ae[De];if(Fe.source===ge&&Fe.type==="fill-extrusion")return!0}return!1}(g&&g.layers,p,l.id),C=b.maxPitchScaleFactor(),M=l.tilesIn(d,C,w);M.sort(Ot);for(var N=[],K=0,X=M;K<X.length;K+=1){var J=X[K];N.push({wrappedTileID:J.tileID.wrapped().key,queryResults:J.tile.queryRenderedFeatures(p,u,l._state,J.queryGeometry,J.cameraQueryGeometry,J.scale,g,b,C,Kt(l.transform,J.tileID))})}var ce=function(ve){for(var ae={},ge={},we=0,Ae=ve;we<Ae.length;we+=1){var Ne=Ae[we],De=Ne.queryResults,Fe=Ne.wrappedTileID,Ke=ge[Fe]=ge[Fe]||{};for(var et in De)for(var Qe=De[et],dt=Ke[et]=Ke[et]||{},kt=ae[et]=ae[et]||[],Mt=0,At=Qe;Mt<At.length;Mt+=1){var xr=At[Mt];dt[xr.featureIndex]||(dt[xr.featureIndex]=!0,kt.push(xr))}}return ae}(N);for(var ue in ce)ce[ue].forEach(function(ve){var ae=ve.feature,ge=l.getFeatureState(ae.layer["source-layer"],ae.id);ae.source=ae.layer.source,ae.layer["source-layer"]&&(ae.sourceLayer=ae.layer["source-layer"]),ae.state=ge});return ce}function Ot(l,p){var u=l.tileID,d=p.tileID;return u.overscaledZ-d.overscaledZ||u.canonical.y-d.canonical.y||u.wrap-d.wrap||u.canonical.x-d.canonical.x}var Et=function(l,p){this.max=l,this.onRemove=p,this.reset()};Et.prototype.reset=function(){for(var l in this.data)for(var p=0,u=this.data[l];p<u.length;p+=1){var d=u[p];d.timeout&&clearTimeout(d.timeout),this.onRemove(d.value)}return this.data={},this.order=[],this},Et.prototype.add=function(l,p,u){var d=this,g=l.wrapped().key;this.data[g]===void 0&&(this.data[g]=[]);var b={value:p,timeout:void 0};if(u!==void 0&&(b.timeout=setTimeout(function(){d.remove(l,b)},u)),this.data[g].push(b),this.order.push(g),this.order.length>this.max){var w=this._getAndRemoveByKey(this.order[0]);w&&this.onRemove(w)}return this},Et.prototype.has=function(l){return l.wrapped().key in this.data},Et.prototype.getAndRemove=function(l){return this.has(l)?this._getAndRemoveByKey(l.wrapped().key):null},Et.prototype._getAndRemoveByKey=function(l){var p=this.data[l].shift();return p.timeout&&clearTimeout(p.timeout),this.data[l].length===0&&delete this.data[l],this.order.splice(this.order.indexOf(l),1),p.value},Et.prototype.getByKey=function(l){var p=this.data[l];return p?p[0].value:null},Et.prototype.get=function(l){return this.has(l)?this.data[l.wrapped().key][0].value:null},Et.prototype.remove=function(l,p){if(!this.has(l))return this;var u=l.wrapped().key,d=p===void 0?0:this.data[u].indexOf(p),g=this.data[u][d];return this.data[u].splice(d,1),g.timeout&&clearTimeout(g.timeout),this.data[u].length===0&&delete this.data[u],this.onRemove(g.value),this.order.splice(this.order.indexOf(u),1),this},Et.prototype.setMaxSize=function(l){for(this.max=l;this.order.length>this.max;){var p=this._getAndRemoveByKey(this.order[0]);p&&this.onRemove(p)}return this},Et.prototype.filter=function(l){var p=[];for(var u in this.data)for(var d=0,g=this.data[u];d<g.length;d+=1){var b=g[d];l(b.value)||p.push(b)}for(var w=0,C=p;w<C.length;w+=1){var M=C[w];this.remove(M.value.tileID,M)}};var nr=function(l,p,u){this.context=l;var d=l.gl;this.buffer=d.createBuffer(),this.dynamicDraw=!!u,this.context.unbindVAO(),l.bindElementBuffer.set(this.buffer),d.bufferData(d.ELEMENT_ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?d.DYNAMIC_DRAW:d.STATIC_DRAW),this.dynamicDraw||delete p.arrayBuffer};nr.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},nr.prototype.updateData=function(l){var p=this.context.gl;this.context.unbindVAO(),this.bind(),p.bufferSubData(p.ELEMENT_ARRAY_BUFFER,0,l.arrayBuffer)},nr.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Zt={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Yt=function(l,p,u,d){this.length=p.length,this.attributes=u,this.itemSize=p.bytesPerElement,this.dynamicDraw=d,this.context=l;var g=l.gl;this.buffer=g.createBuffer(),l.bindVertexBuffer.set(this.buffer),g.bufferData(g.ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||delete p.arrayBuffer};Yt.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},Yt.prototype.updateData=function(l){var p=this.context.gl;this.bind(),p.bufferSubData(p.ARRAY_BUFFER,0,l.arrayBuffer)},Yt.prototype.enableAttributes=function(l,p){for(var u=0;u<this.attributes.length;u++){var d=p.attributes[this.attributes[u].name];d!==void 0&&l.enableVertexAttribArray(d)}},Yt.prototype.setVertexAttribPointers=function(l,p,u){for(var d=0;d<this.attributes.length;d++){var g=this.attributes[d],b=p.attributes[g.name];b!==void 0&&l.vertexAttribPointer(b,g.components,l[Zt[g.type]],!1,this.itemSize,g.offset+this.itemSize*(u||0))}},Yt.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var at=function(l){this.gl=l.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};at.prototype.get=function(){return this.current},at.prototype.set=function(l){},at.prototype.getDefault=function(){return this.default},at.prototype.setDefault=function(){this.set(this.default)};var Dt=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return o.Color.transparent},p.prototype.set=function(u){var d=this.current;(u.r!==d.r||u.g!==d.g||u.b!==d.b||u.a!==d.a||this.dirty)&&(this.gl.clearColor(u.r,u.g,u.b,u.a),this.current=u,this.dirty=!1)},p}(at),er=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return 1},p.prototype.set=function(u){(u!==this.current||this.dirty)&&(this.gl.clearDepth(u),this.current=u,this.dirty=!1)},p}(at),Rr=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return 0},p.prototype.set=function(u){(u!==this.current||this.dirty)&&(this.gl.clearStencil(u),this.current=u,this.dirty=!1)},p}(at),Nr=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return[!0,!0,!0,!0]},p.prototype.set=function(u){var d=this.current;(u[0]!==d[0]||u[1]!==d[1]||u[2]!==d[2]||u[3]!==d[3]||this.dirty)&&(this.gl.colorMask(u[0],u[1],u[2],u[3]),this.current=u,this.dirty=!1)},p}(at),tr=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return!0},p.prototype.set=function(u){(u!==this.current||this.dirty)&&(this.gl.depthMask(u),this.current=u,this.dirty=!1)},p}(at),Vr=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return 255},p.prototype.set=function(u){(u!==this.current||this.dirty)&&(this.gl.stencilMask(u),this.current=u,this.dirty=!1)},p}(at),Lr=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},p.prototype.set=function(u){var d=this.current;(u.func!==d.func||u.ref!==d.ref||u.mask!==d.mask||this.dirty)&&(this.gl.stencilFunc(u.func,u.ref,u.mask),this.current=u,this.dirty=!1)},p}(at),Er=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){var u=this.gl;return[u.KEEP,u.KEEP,u.KEEP]},p.prototype.set=function(u){var d=this.current;(u[0]!==d[0]||u[1]!==d[1]||u[2]!==d[2]||this.dirty)&&(this.gl.stencilOp(u[0],u[1],u[2]),this.current=u,this.dirty=!1)},p}(at),on=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return!1},p.prototype.set=function(u){if(u!==this.current||this.dirty){var d=this.gl;u?d.enable(d.STENCIL_TEST):d.disable(d.STENCIL_TEST),this.current=u,this.dirty=!1}},p}(at),Mr=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return[0,1]},p.prototype.set=function(u){var d=this.current;(u[0]!==d[0]||u[1]!==d[1]||this.dirty)&&(this.gl.depthRange(u[0],u[1]),this.current=u,this.dirty=!1)},p}(at),lr=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return!1},p.prototype.set=function(u){if(u!==this.current||this.dirty){var d=this.gl;u?d.enable(d.DEPTH_TEST):d.disable(d.DEPTH_TEST),this.current=u,this.dirty=!1}},p}(at),Xr=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return this.gl.LESS},p.prototype.set=function(u){(u!==this.current||this.dirty)&&(this.gl.depthFunc(u),this.current=u,this.dirty=!1)},p}(at),wn=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return!1},p.prototype.set=function(u){if(u!==this.current||this.dirty){var d=this.gl;u?d.enable(d.BLEND):d.disable(d.BLEND),this.current=u,this.dirty=!1}},p}(at),oi=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){var u=this.gl;return[u.ONE,u.ZERO]},p.prototype.set=function(u){var d=this.current;(u[0]!==d[0]||u[1]!==d[1]||this.dirty)&&(this.gl.blendFunc(u[0],u[1]),this.current=u,this.dirty=!1)},p}(at),dr=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return o.Color.transparent},p.prototype.set=function(u){var d=this.current;(u.r!==d.r||u.g!==d.g||u.b!==d.b||u.a!==d.a||this.dirty)&&(this.gl.blendColor(u.r,u.g,u.b,u.a),this.current=u,this.dirty=!1)},p}(at),Bt=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return this.gl.FUNC_ADD},p.prototype.set=function(u){(u!==this.current||this.dirty)&&(this.gl.blendEquation(u),this.current=u,this.dirty=!1)},p}(at),Un=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return!1},p.prototype.set=function(u){if(u!==this.current||this.dirty){var d=this.gl;u?d.enable(d.CULL_FACE):d.disable(d.CULL_FACE),this.current=u,this.dirty=!1}},p}(at),On=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return this.gl.BACK},p.prototype.set=function(u){(u!==this.current||this.dirty)&&(this.gl.cullFace(u),this.current=u,this.dirty=!1)},p}(at),ji=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return this.gl.CCW},p.prototype.set=function(u){(u!==this.current||this.dirty)&&(this.gl.frontFace(u),this.current=u,this.dirty=!1)},p}(at),Ft=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p.prototype.set=function(u){(u!==this.current||this.dirty)&&(this.gl.useProgram(u),this.current=u,this.dirty=!1)},p}(at),wr=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return this.gl.TEXTURE0},p.prototype.set=function(u){(u!==this.current||this.dirty)&&(this.gl.activeTexture(u),this.current=u,this.dirty=!1)},p}(at),ut=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){var u=this.gl;return[0,0,u.drawingBufferWidth,u.drawingBufferHeight]},p.prototype.set=function(u){var d=this.current;(u[0]!==d[0]||u[1]!==d[1]||u[2]!==d[2]||u[3]!==d[3]||this.dirty)&&(this.gl.viewport(u[0],u[1],u[2],u[3]),this.current=u,this.dirty=!1)},p}(at),Rt=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p.prototype.set=function(u){if(u!==this.current||this.dirty){var d=this.gl;d.bindFramebuffer(d.FRAMEBUFFER,u),this.current=u,this.dirty=!1}},p}(at),gr=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p.prototype.set=function(u){if(u!==this.current||this.dirty){var d=this.gl;d.bindRenderbuffer(d.RENDERBUFFER,u),this.current=u,this.dirty=!1}},p}(at),Sr=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p.prototype.set=function(u){if(u!==this.current||this.dirty){var d=this.gl;d.bindTexture(d.TEXTURE_2D,u),this.current=u,this.dirty=!1}},p}(at),rn=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p.prototype.set=function(u){if(u!==this.current||this.dirty){var d=this.gl;d.bindBuffer(d.ARRAY_BUFFER,u),this.current=u,this.dirty=!1}},p}(at),Le=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p.prototype.set=function(u){var d=this.gl;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,u),this.current=u,this.dirty=!1},p}(at),tt=function(l){function p(u){l.call(this,u),this.vao=u.extVertexArrayObject}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p.prototype.set=function(u){this.vao&&(u!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(u),this.current=u,this.dirty=!1)},p}(at),wt=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return 4},p.prototype.set=function(u){if(u!==this.current||this.dirty){var d=this.gl;d.pixelStorei(d.UNPACK_ALIGNMENT,u),this.current=u,this.dirty=!1}},p}(at),ar=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return!1},p.prototype.set=function(u){if(u!==this.current||this.dirty){var d=this.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,u),this.current=u,this.dirty=!1}},p}(at),zr=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return!1},p.prototype.set=function(u){if(u!==this.current||this.dirty){var d=this.gl;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,u),this.current=u,this.dirty=!1}},p}(at),Ht=function(l){function p(u,d){l.call(this,u),this.context=u,this.parent=d}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p}(at),L=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.setDirty=function(){this.dirty=!0},p.prototype.set=function(u){if(u!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,u,0),this.current=u,this.dirty=!1}},p}(Ht),j=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.set=function(u){if(u!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_ATTACHMENT,d.RENDERBUFFER,u),this.current=u,this.dirty=!1}},p}(Ht),W=function(l,p,u,d){this.context=l,this.width=p,this.height=u;var g=this.framebuffer=l.gl.createFramebuffer();this.colorAttachment=new L(l,g),d&&(this.depthAttachment=new j(l,g))};W.prototype.destroy=function(){var l=this.context.gl,p=this.colorAttachment.get();if(p&&l.deleteTexture(p),this.depthAttachment){var u=this.depthAttachment.get();u&&l.deleteRenderbuffer(u)}l.deleteFramebuffer(this.framebuffer)};var Y=function(l,p,u){this.func=l,this.mask=p,this.range=u};Y.ReadOnly=!1,Y.ReadWrite=!0,Y.disabled=new Y(519,Y.ReadOnly,[0,1]);var re=function(l,p,u,d,g,b){this.test=l,this.ref=p,this.mask=u,this.fail=d,this.depthFail=g,this.pass=b};re.disabled=new re({func:519,mask:0},0,0,7680,7680,7680);var me=function(l,p,u){this.blendFunction=l,this.blendColor=p,this.mask=u};me.disabled=new me(me.Replace=[1,0],o.Color.transparent,[!1,!1,!1,!1]),me.unblended=new me(me.Replace,o.Color.transparent,[!0,!0,!0,!0]),me.alphaBlended=new me([1,771],o.Color.transparent,[!0,!0,!0,!0]);var ye=function(l,p,u){this.enable=l,this.mode=p,this.frontFace=u};ye.disabled=new ye(!1,1029,2305),ye.backCCW=new ye(!0,1029,2305);var Z=function(l){this.gl=l,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Dt(this),this.clearDepth=new er(this),this.clearStencil=new Rr(this),this.colorMask=new Nr(this),this.depthMask=new tr(this),this.stencilMask=new Vr(this),this.stencilFunc=new Lr(this),this.stencilOp=new Er(this),this.stencilTest=new on(this),this.depthRange=new Mr(this),this.depthTest=new lr(this),this.depthFunc=new Xr(this),this.blend=new wn(this),this.blendFunc=new oi(this),this.blendColor=new dr(this),this.blendEquation=new Bt(this),this.cullFace=new Un(this),this.cullFaceSide=new On(this),this.frontFace=new ji(this),this.program=new Ft(this),this.activeTexture=new wr(this),this.viewport=new ut(this),this.bindFramebuffer=new Rt(this),this.bindRenderbuffer=new gr(this),this.bindTexture=new Sr(this),this.bindVertexBuffer=new rn(this),this.bindElementBuffer=new Le(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new tt(this),this.pixelStoreUnpack=new wt(this),this.pixelStoreUnpackPremultiplyAlpha=new ar(this),this.pixelStoreUnpackFlipY=new zr(this),this.extTextureFilterAnisotropic=l.getExtension("EXT_texture_filter_anisotropic")||l.getExtension("MOZ_EXT_texture_filter_anisotropic")||l.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=l.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=l.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(l.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=l.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=l.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE)};Z.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Z.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Z.prototype.createIndexBuffer=function(l,p){return new nr(this,l,p)},Z.prototype.createVertexBuffer=function(l,p,u){return new Yt(this,l,p,u)},Z.prototype.createRenderbuffer=function(l,p,u){var d=this.gl,g=d.createRenderbuffer();return this.bindRenderbuffer.set(g),d.renderbufferStorage(d.RENDERBUFFER,l,p,u),this.bindRenderbuffer.set(null),g},Z.prototype.createFramebuffer=function(l,p,u){return new W(this,l,p,u)},Z.prototype.clear=function(l){var p=l.color,u=l.depth,d=this.gl,g=0;p&&(g|=d.COLOR_BUFFER_BIT,this.clearColor.set(p),this.colorMask.set([!0,!0,!0,!0])),u!==void 0&&(g|=d.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),d.clear(g)},Z.prototype.setCullFace=function(l){l.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(l.mode),this.frontFace.set(l.frontFace))},Z.prototype.setDepthMode=function(l){l.func!==this.gl.ALWAYS||l.mask?(this.depthTest.set(!0),this.depthFunc.set(l.func),this.depthMask.set(l.mask),this.depthRange.set(l.range)):this.depthTest.set(!1)},Z.prototype.setStencilMode=function(l){l.test.func!==this.gl.ALWAYS||l.mask?(this.stencilTest.set(!0),this.stencilMask.set(l.mask),this.stencilOp.set([l.fail,l.depthFail,l.pass]),this.stencilFunc.set({func:l.test.func,ref:l.ref,mask:l.test.mask})):this.stencilTest.set(!1)},Z.prototype.setColorMode=function(l){o.deepEqual(l.blendFunction,me.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(l.blendFunction),this.blendColor.set(l.blendColor)),this.colorMask.set(l.mask)},Z.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var ie=function(l){function p(u,d,g){var b=this;l.call(this),this.id=u,this.dispatcher=g,this.on("data",function(w){w.dataType==="source"&&w.sourceDataType==="metadata"&&(b._sourceLoaded=!0),b._sourceLoaded&&!b._paused&&w.dataType==="source"&&w.sourceDataType==="content"&&(b.reload(),b.transform&&b.update(b.transform))}),this.on("error",function(){b._sourceErrored=!0}),this._source=function(w,C,M,N){var K=new qe[C.type](w,C,M,N);if(K.id!==w)throw new Error("Expected Source id to be "+w+" instead of "+K.id);return o.bindAll(["load","abort","unload","serialize","prepare"],K),K}(u,d,g,this),this._tiles={},this._cache=new Et(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new o.SourceFeatureState}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.onAdd=function(u){this.map=u,this._maxTileCacheSize=u?u._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(u)},p.prototype.onRemove=function(u){this._source&&this._source.onRemove&&this._source.onRemove(u)},p.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var u in this._tiles){var d=this._tiles[u];if(d.state!=="loaded"&&d.state!=="errored")return!1}return!0},p.prototype.getSource=function(){return this._source},p.prototype.pause=function(){this._paused=!0},p.prototype.resume=function(){if(this._paused){var u=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,u&&this.reload(),this.transform&&this.update(this.transform)}},p.prototype._loadTile=function(u,d){return this._source.loadTile(u,d)},p.prototype._unloadTile=function(u){if(this._source.unloadTile)return this._source.unloadTile(u,function(){})},p.prototype._abortTile=function(u){if(this._source.abortTile)return this._source.abortTile(u,function(){})},p.prototype.serialize=function(){return this._source.serialize()},p.prototype.prepare=function(u){for(var d in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var g=this._tiles[d];g.upload(u),g.prepare(this.map.style.imageManager)}},p.prototype.getIds=function(){return o.values(this._tiles).map(function(u){return u.tileID}).sort(Ee).map(function(u){return u.key})},p.prototype.getRenderableIds=function(u){var d=this,g=[];for(var b in this._tiles)this._isIdRenderable(b,u)&&g.push(this._tiles[b]);return u?g.sort(function(w,C){var M=w.tileID,N=C.tileID,K=new o.Point(M.canonical.x,M.canonical.y)._rotate(d.transform.angle),X=new o.Point(N.canonical.x,N.canonical.y)._rotate(d.transform.angle);return M.overscaledZ-N.overscaledZ||X.y-K.y||X.x-K.x}).map(function(w){return w.tileID.key}):g.map(function(w){return w.tileID}).sort(Ee).map(function(w){return w.key})},p.prototype.hasRenderableParent=function(u){var d=this.findLoadedParent(u,0);return!!d&&this._isIdRenderable(d.tileID.key)},p.prototype._isIdRenderable=function(u,d){return this._tiles[u]&&this._tiles[u].hasData()&&!this._coveredTiles[u]&&(d||!this._tiles[u].holdingForFade())},p.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var u in this._cache.reset(),this._tiles)this._tiles[u].state!=="errored"&&this._reloadTile(u,"reloading")},p.prototype._reloadTile=function(u,d){var g=this._tiles[u];g&&(g.state!=="loading"&&(g.state=d),this._loadTile(g,this._tileLoaded.bind(this,g,u,d)))},p.prototype._tileLoaded=function(u,d,g,b){if(b)return u.state="errored",void(b.status!==404?this._source.fire(new o.ErrorEvent(b,{tile:u})):this.update(this.transform));u.timeAdded=o.browser.now(),g==="expired"&&(u.refreshedUponExpiration=!0),this._setTileReloadTimer(d,u),this.getSource().type==="raster-dem"&&u.dem&&this._backfillDEM(u),this._state.initializeTileState(u,this.map?this.map.painter:null),this._source.fire(new o.Event("data",{dataType:"source",tile:u,coord:u.tileID}))},p.prototype._backfillDEM=function(u){for(var d=this.getRenderableIds(),g=0;g<d.length;g++){var b=d[g];if(u.neighboringTiles&&u.neighboringTiles[b]){var w=this.getTileByID(b);C(u,w),C(w,u)}}function C(M,N){M.needsHillshadePrepare=!0;var K=N.tileID.canonical.x-M.tileID.canonical.x,X=N.tileID.canonical.y-M.tileID.canonical.y,J=Math.pow(2,M.tileID.canonical.z),ce=N.tileID.key;K===0&&X===0||Math.abs(X)>1||(Math.abs(K)>1&&(Math.abs(K+J)===1?K+=J:Math.abs(K-J)===1&&(K-=J)),N.dem&&M.dem&&(M.dem.backfillBorder(N.dem,K,X),M.neighboringTiles&&M.neighboringTiles[ce]&&(M.neighboringTiles[ce].backfilled=!0)))}},p.prototype.getTile=function(u){return this.getTileByID(u.key)},p.prototype.getTileByID=function(u){return this._tiles[u]},p.prototype._retainLoadedChildren=function(u,d,g,b){for(var w in this._tiles){var C=this._tiles[w];if(!(b[w]||!C.hasData()||C.tileID.overscaledZ<=d||C.tileID.overscaledZ>g)){for(var M=C.tileID;C&&C.tileID.overscaledZ>d+1;){var N=C.tileID.scaledTo(C.tileID.overscaledZ-1);(C=this._tiles[N.key])&&C.hasData()&&(M=N)}for(var K=M;K.overscaledZ>d;)if(u[(K=K.scaledTo(K.overscaledZ-1)).key]){b[M.key]=M;break}}}},p.prototype.findLoadedParent=function(u,d){if(u.key in this._loadedParentTiles){var g=this._loadedParentTiles[u.key];return g&&g.tileID.overscaledZ>=d?g:null}for(var b=u.overscaledZ-1;b>=d;b--){var w=u.scaledTo(b),C=this._getLoadedTile(w);if(C)return C}},p.prototype._getLoadedTile=function(u){var d=this._tiles[u.key];return d&&d.hasData()?d:this._cache.getByKey(u.wrapped().key)},p.prototype.updateCacheSize=function(u){var d=Math.ceil(u.width/this._source.tileSize)+1,g=Math.ceil(u.height/this._source.tileSize)+1,b=Math.floor(d*g*5),w=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,b):b;this._cache.setMaxSize(w)},p.prototype.handleWrapJump=function(u){var d=Math.round((u-(this._prevLng===void 0?u:this._prevLng))/360);if(this._prevLng=u,d){var g={};for(var b in this._tiles){var w=this._tiles[b];w.tileID=w.tileID.unwrapTo(w.tileID.wrap+d),g[w.tileID.key]=w}for(var C in this._tiles=g,this._timers)clearTimeout(this._timers[C]),delete this._timers[C];for(var M in this._tiles)this._setTileReloadTimer(M,this._tiles[M])}},p.prototype.update=function(u){var d=this;if(this.transform=u,this._sourceLoaded&&!this._paused){var g;this.updateCacheSize(u),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?g=u.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Ke){return new o.OverscaledTileID(Ke.canonical.z,Ke.wrap,Ke.canonical.z,Ke.canonical.x,Ke.canonical.y)}):(g=u.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(g=g.filter(function(Ke){return d._source.hasTile(Ke)}))):g=[];var b=u.coveringZoomLevel(this._source),w=Math.max(b-p.maxOverzooming,this._source.minzoom),C=Math.max(b+p.maxUnderzooming,this._source.minzoom),M=this._updateRetainedTiles(g,b);if(He(this._source.type)){for(var N={},K={},X=0,J=Object.keys(M);X<J.length;X+=1){var ce=J[X],ue=M[ce],ve=this._tiles[ce];if(ve&&!(ve.fadeEndTime&&ve.fadeEndTime<=o.browser.now())){var ae=this.findLoadedParent(ue,w);ae&&(this._addTile(ae.tileID),N[ae.tileID.key]=ae.tileID),K[ce]=ue}}for(var ge in this._retainLoadedChildren(K,b,C,M),N)M[ge]||(this._coveredTiles[ge]=!0,M[ge]=N[ge])}for(var we in M)this._tiles[we].clearFadeHold();for(var Ae=0,Ne=o.keysDifference(this._tiles,M);Ae<Ne.length;Ae+=1){var De=Ne[Ae],Fe=this._tiles[De];Fe.hasSymbolBuckets&&!Fe.holdingForFade()?Fe.setHoldDuration(this.map._fadeDuration):Fe.hasSymbolBuckets&&!Fe.symbolFadeFinished()||this._removeTile(De)}this._updateLoadedParentTileCache()}},p.prototype.releaseSymbolFadeTiles=function(){for(var u in this._tiles)this._tiles[u].holdingForFade()&&this._removeTile(u)},p.prototype._updateRetainedTiles=function(u,d){for(var g={},b={},w=Math.max(d-p.maxOverzooming,this._source.minzoom),C=Math.max(d+p.maxUnderzooming,this._source.minzoom),M={},N=0,K=u;N<K.length;N+=1){var X=K[N],J=this._addTile(X);g[X.key]=X,J.hasData()||d<this._source.maxzoom&&(M[X.key]=X)}this._retainLoadedChildren(M,d,C,g);for(var ce=0,ue=u;ce<ue.length;ce+=1){var ve=ue[ce],ae=this._tiles[ve.key];if(!ae.hasData()){if(d+1>this._source.maxzoom){var ge=ve.children(this._source.maxzoom)[0],we=this.getTile(ge);if(we&&we.hasData()){g[ge.key]=ge;continue}}else{var Ae=ve.children(this._source.maxzoom);if(g[Ae[0].key]&&g[Ae[1].key]&&g[Ae[2].key]&&g[Ae[3].key])continue}for(var Ne=ae.wasRequested(),De=ve.overscaledZ-1;De>=w;--De){var Fe=ve.scaledTo(De);if(b[Fe.key]||(b[Fe.key]=!0,!(ae=this.getTile(Fe))&&Ne&&(ae=this._addTile(Fe)),ae&&(g[Fe.key]=Fe,Ne=ae.wasRequested(),ae.hasData())))break}}}return g},p.prototype._updateLoadedParentTileCache=function(){for(var u in this._loadedParentTiles={},this._tiles){for(var d=[],g=void 0,b=this._tiles[u].tileID;b.overscaledZ>0;){if(b.key in this._loadedParentTiles){g=this._loadedParentTiles[b.key];break}d.push(b.key);var w=b.scaledTo(b.overscaledZ-1);if(g=this._getLoadedTile(w))break;b=w}for(var C=0,M=d;C<M.length;C+=1)this._loadedParentTiles[M[C]]=g}},p.prototype._addTile=function(u){var d=this._tiles[u.key];if(d)return d;(d=this._cache.getAndRemove(u))&&(this._setTileReloadTimer(u.key,d),d.tileID=u,this._state.initializeTileState(d,this.map?this.map.painter:null),this._cacheTimers[u.key]&&(clearTimeout(this._cacheTimers[u.key]),delete this._cacheTimers[u.key],this._setTileReloadTimer(u.key,d)));var g=!!d;return g||(d=new o.Tile(u,this._source.tileSize*u.overscaleFactor()),this._loadTile(d,this._tileLoaded.bind(this,d,u.key,d.state))),d?(d.uses++,this._tiles[u.key]=d,g||this._source.fire(new o.Event("dataloading",{tile:d,coord:d.tileID,dataType:"source"})),d):null},p.prototype._setTileReloadTimer=function(u,d){var g=this;u in this._timers&&(clearTimeout(this._timers[u]),delete this._timers[u]);var b=d.getExpiryTimeout();b&&(this._timers[u]=setTimeout(function(){g._reloadTile(u,"expired"),delete g._timers[u]},b))},p.prototype._removeTile=function(u){var d=this._tiles[u];d&&(d.uses--,delete this._tiles[u],this._timers[u]&&(clearTimeout(this._timers[u]),delete this._timers[u]),d.uses>0||(d.hasData()&&d.state!=="reloading"?this._cache.add(d.tileID,d,d.getExpiryTimeout()):(d.aborted=!0,this._abortTile(d),this._unloadTile(d))))},p.prototype.clearTiles=function(){for(var u in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(u);this._cache.reset()},p.prototype.tilesIn=function(u,d,g){var b=this,w=[],C=this.transform;if(!C)return w;for(var M=g?C.getCameraQueryGeometry(u):u,N=u.map(function(De){return C.pointCoordinate(De)}),K=M.map(function(De){return C.pointCoordinate(De)}),X=this.getIds(),J=1/0,ce=1/0,ue=-1/0,ve=-1/0,ae=0,ge=K;ae<ge.length;ae+=1){var we=ge[ae];J=Math.min(J,we.x),ce=Math.min(ce,we.y),ue=Math.max(ue,we.x),ve=Math.max(ve,we.y)}for(var Ae=function(De){var Fe=b._tiles[X[De]];if(!Fe.holdingForFade()){var Ke=Fe.tileID,et=Math.pow(2,C.zoom-Fe.tileID.overscaledZ),Qe=d*Fe.queryPadding*o.EXTENT/Fe.tileSize/et,dt=[Ke.getTilePoint(new o.MercatorCoordinate(J,ce)),Ke.getTilePoint(new o.MercatorCoordinate(ue,ve))];if(dt[0].x-Qe<o.EXTENT&&dt[0].y-Qe<o.EXTENT&&dt[1].x+Qe>=0&&dt[1].y+Qe>=0){var kt=N.map(function(At){return Ke.getTilePoint(At)}),Mt=K.map(function(At){return Ke.getTilePoint(At)});w.push({tile:Fe,tileID:Ke,queryGeometry:kt,cameraQueryGeometry:Mt,scale:et})}}},Ne=0;Ne<X.length;Ne++)Ae(Ne);return w},p.prototype.getVisibleCoordinates=function(u){for(var d=this,g=this.getRenderableIds(u).map(function(M){return d._tiles[M].tileID}),b=0,w=g;b<w.length;b+=1){var C=w[b];C.posMatrix=this.transform.calculatePosMatrix(C.toUnwrapped())}return g},p.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(He(this._source.type))for(var u in this._tiles){var d=this._tiles[u];if(d.fadeEndTime!==void 0&&d.fadeEndTime>=o.browser.now())return!0}return!1},p.prototype.setFeatureState=function(u,d,g){this._state.updateState(u=u||"_geojsonTileLayer",d,g)},p.prototype.removeFeatureState=function(u,d,g){this._state.removeFeatureState(u=u||"_geojsonTileLayer",d,g)},p.prototype.getFeatureState=function(u,d){return this._state.getState(u=u||"_geojsonTileLayer",d)},p.prototype.setDependencies=function(u,d,g){var b=this._tiles[u];b&&b.setDependencies(d,g)},p.prototype.reloadTilesForDependencies=function(u,d){for(var g in this._tiles)this._tiles[g].hasDependency(u,d)&&this._reloadTile(g,"reloading");this._cache.filter(function(b){return!b.hasDependency(u,d)})},p}(o.Evented);function Ee(l,p){var u=Math.abs(2*l.wrap)-+(l.wrap<0),d=Math.abs(2*p.wrap)-+(p.wrap<0);return l.overscaledZ-p.overscaledZ||d-u||p.canonical.y-l.canonical.y||p.canonical.x-l.canonical.x}function He(l){return l==="raster"||l==="image"||l==="video"}function Xe(){return new o.window.Worker(pc.workerUrl)}ie.maxOverzooming=10,ie.maxUnderzooming=3;var Ue="mapboxgl_preloaded_worker_pool",Ye=function(){this.active={}};Ye.prototype.acquire=function(l){if(!this.workers)for(this.workers=[];this.workers.length<Ye.workerCount;)this.workers.push(new Xe);return this.active[l]=!0,this.workers.slice()},Ye.prototype.release=function(l){delete this.active[l],this.numActive()===0&&(this.workers.forEach(function(p){p.terminate()}),this.workers=null)},Ye.prototype.isPreloaded=function(){return!!this.active[Ue]},Ye.prototype.numActive=function(){return Object.keys(this.active).length};var vt,yt=Math.floor(o.browser.hardwareConcurrency/2);function Ve(){return vt||(vt=new Ye),vt}function ht(l,p){var u={};for(var d in l)d!=="ref"&&(u[d]=l[d]);return o.refProperties.forEach(function(g){g in p&&(u[g]=p[g])}),u}function nt(l){l=l.slice();for(var p=Object.create(null),u=0;u<l.length;u++)p[l[u].id]=l[u];for(var d=0;d<l.length;d++)"ref"in l[d]&&(l[d]=ht(l[d],p[l[d].ref]));return l}Ye.workerCount=Math.max(Math.min(yt,6),1);var ot={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function or(l,p,u){u.push({command:ot.addSource,args:[l,p[l]]})}function ct(l,p,u){p.push({command:ot.removeSource,args:[l]}),u[l]=!0}function mr(l,p,u,d){ct(l,u,d),or(l,p,u)}function Gr(l,p,u){var d;for(d in l[u])if(l[u].hasOwnProperty(d)&&d!=="data"&&!o.deepEqual(l[u][d],p[u][d]))return!1;for(d in p[u])if(p[u].hasOwnProperty(d)&&d!=="data"&&!o.deepEqual(l[u][d],p[u][d]))return!1;return!0}function ur(l,p,u,d,g,b){var w;for(w in p=p||{},l=l||{})l.hasOwnProperty(w)&&(o.deepEqual(l[w],p[w])||u.push({command:b,args:[d,w,p[w],g]}));for(w in p)p.hasOwnProperty(w)&&!l.hasOwnProperty(w)&&(o.deepEqual(l[w],p[w])||u.push({command:b,args:[d,w,p[w],g]}))}function Ir(l){return l.id}function vr(l,p){return l[p.id]=p,l}var yi=function(l,p){this.reset(l,p)};yi.prototype.reset=function(l,p){this.points=l||[],this._distances=[0];for(var u=1;u<this.points.length;u++)this._distances[u]=this._distances[u-1]+this.points[u].dist(this.points[u-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(p||0,.5*this.length),this.paddedLength=this.length-2*this.padding},yi.prototype.lerp=function(l){if(this.points.length===1)return this.points[0];l=o.clamp(l,0,1);for(var p=1,u=this._distances[p],d=l*this.paddedLength+this.padding;u<d&&p<this._distances.length;)u=this._distances[++p];var g=p-1,b=this._distances[g],w=u-b,C=w>0?(d-b)/w:0;return this.points[g].mult(1-C).add(this.points[p].mult(C))};var Dr=function(l,p,u){var d=this.boxCells=[],g=this.circleCells=[];this.xCellCount=Math.ceil(l/u),this.yCellCount=Math.ceil(p/u);for(var b=0;b<this.xCellCount*this.yCellCount;b++)d.push([]),g.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=l,this.height=p,this.xScale=this.xCellCount/l,this.yScale=this.yCellCount/p,this.boxUid=0,this.circleUid=0};function Sn(l,p,u,d,g){var b=o.create();return p?(o.scale(b,b,[1/g,1/g,1]),u||o.rotateZ(b,b,d.angle)):o.multiply(b,d.labelPlaneMatrix,l),b}function qr(l,p,u,d,g){if(p){var b=o.clone(l);return o.scale(b,b,[g,g,1]),u||o.rotateZ(b,b,-d.angle),b}return d.glCoordMatrix}function fr(l,p){var u=[l.x,l.y,0,1];Yn(u,u,p);var d=u[3];return{point:new o.Point(u[0]/d,u[1]/d),signedDistanceFromCamera:d}}function Pr(l,p){return .5+l/p*.5}function Ii(l,p){var u=l[0]/l[3],d=l[1]/l[3];return u>=-p[0]&&u<=p[0]&&d>=-p[1]&&d<=p[1]}function Ul(l,p,u,d,g,b,w,C){var M=d?l.textSizeData:l.iconSizeData,N=o.evaluateSizeForZoom(M,u.transform.zoom),K=[256/u.width*2+1,256/u.height*2+1],X=d?l.text.dynamicLayoutVertexArray:l.icon.dynamicLayoutVertexArray;X.clear();for(var J=l.lineVertexArray,ce=d?l.text.placedSymbolArray:l.icon.placedSymbolArray,ue=u.transform.width/u.transform.height,ve=!1,ae=0;ae<ce.length;ae++){var ge=ce.get(ae);if(ge.hidden||ge.writingMode===o.WritingMode.vertical&&!ve)gi(ge.numGlyphs,X);else{ve=!1;var we=[ge.anchorX,ge.anchorY,0,1];if(o.transformMat4(we,we,p),Ii(we,K)){var Ae=Pr(u.transform.cameraToCenterDistance,we[3]),Ne=o.evaluateSizeForFeature(M,N,ge),De=w?Ne/Ae:Ne*Ae,Fe=new o.Point(ge.anchorX,ge.anchorY),Ke=fr(Fe,g).point,et={},Qe=Kp(ge,De,!1,C,p,g,b,l.glyphOffsetArray,J,X,Ke,Fe,et,ue);ve=Qe.useVertical,(Qe.notEnoughRoom||ve||Qe.needsFlipping&&Kp(ge,De,!0,C,p,g,b,l.glyphOffsetArray,J,X,Ke,Fe,et,ue).notEnoughRoom)&&gi(ge.numGlyphs,X)}else gi(ge.numGlyphs,X)}}d?l.text.dynamicLayoutVertexBuffer.updateData(X):l.icon.dynamicLayoutVertexBuffer.updateData(X)}function Xn(l,p,u,d,g,b,w,C,M,N,K){var X=C.glyphStartIndex+C.numGlyphs,J=C.lineStartIndex,ce=C.lineStartIndex+C.lineLength,ue=p.getoffsetX(C.glyphStartIndex),ve=p.getoffsetX(X-1),ae=En(l*ue,u,d,g,b,w,C.segment,J,ce,M,N,K);if(!ae)return null;var ge=En(l*ve,u,d,g,b,w,C.segment,J,ce,M,N,K);return ge?{first:ae,last:ge}:null}function Pi(l,p,u,d){return l===o.WritingMode.horizontal&&Math.abs(u.y-p.y)>Math.abs(u.x-p.x)*d?{useVertical:!0}:(l===o.WritingMode.vertical?p.y<u.y:p.x>u.x)?{needsFlipping:!0}:null}function Kp(l,p,u,d,g,b,w,C,M,N,K,X,J,ce){var ue,ve=p/24,ae=l.lineOffsetX*ve,ge=l.lineOffsetY*ve;if(l.numGlyphs>1){var we=l.glyphStartIndex+l.numGlyphs,Ae=l.lineStartIndex,Ne=l.lineStartIndex+l.lineLength,De=Xn(ve,C,ae,ge,u,K,X,l,M,b,J);if(!De)return{notEnoughRoom:!0};var Fe=fr(De.first.point,w).point,Ke=fr(De.last.point,w).point;if(d&&!u){var et=Pi(l.writingMode,Fe,Ke,ce);if(et)return et}ue=[De.first];for(var Qe=l.glyphStartIndex+1;Qe<we-1;Qe++)ue.push(En(ve*C.getoffsetX(Qe),ae,ge,u,K,X,l.segment,Ae,Ne,M,b,J));ue.push(De.last)}else{if(d&&!u){var dt=fr(X,g).point,kt=l.lineStartIndex+l.segment+1,Mt=new o.Point(M.getx(kt),M.gety(kt)),At=fr(Mt,g),xr=At.signedDistanceFromCamera>0?At.point:$l(X,Mt,dt,1,g),mt=Pi(l.writingMode,dt,xr,ce);if(mt)return mt}var Gt=En(ve*C.getoffsetX(l.glyphStartIndex),ae,ge,u,K,X,l.segment,l.lineStartIndex,l.lineStartIndex+l.lineLength,M,b,J);if(!Gt)return{notEnoughRoom:!0};ue=[Gt]}for(var rr=0,Wt=ue;rr<Wt.length;rr+=1){var Vt=Wt[rr];o.addDynamicAttributes(N,Vt.point,Vt.angle)}return{}}function $l(l,p,u,d,g){var b=fr(l.add(l.sub(p)._unit()),g).point,w=u.sub(b);return u.add(w._mult(d/w.mag()))}function En(l,p,u,d,g,b,w,C,M,N,K,X){var J=d?l-p:l+p,ce=J>0?1:-1,ue=0;d&&(ce*=-1,ue=Math.PI),ce<0&&(ue+=Math.PI);for(var ve=ce>0?C+w:C+w+1,ae=g,ge=g,we=0,Ae=0,Ne=Math.abs(J),De=[];we+Ae<=Ne;){if((ve+=ce)<C||ve>=M)return null;if(ge=ae,De.push(ae),(ae=X[ve])===void 0){var Fe=new o.Point(N.getx(ve),N.gety(ve)),Ke=fr(Fe,K);if(Ke.signedDistanceFromCamera>0)ae=X[ve]=Ke.point;else{var et=ve-ce;ae=$l(we===0?b:new o.Point(N.getx(et),N.gety(et)),Fe,ge,Ne-we+1,K)}}we+=Ae,Ae=ge.dist(ae)}var Qe=(Ne-we)/Ae,dt=ae.sub(ge),kt=dt.mult(Qe)._add(ge);kt._add(dt._unit()._perp()._mult(u*ce));var Mt=ue+Math.atan2(ae.y-ge.y,ae.x-ge.x);return De.push(kt),{point:kt,angle:Mt,path:De}}Dr.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Dr.prototype.insert=function(l,p,u,d,g){this._forEachCell(p,u,d,g,this._insertBoxCell,this.boxUid++),this.boxKeys.push(l),this.bboxes.push(p),this.bboxes.push(u),this.bboxes.push(d),this.bboxes.push(g)},Dr.prototype.insertCircle=function(l,p,u,d){this._forEachCell(p-d,u-d,p+d,u+d,this._insertCircleCell,this.circleUid++),this.circleKeys.push(l),this.circles.push(p),this.circles.push(u),this.circles.push(d)},Dr.prototype._insertBoxCell=function(l,p,u,d,g,b){this.boxCells[g].push(b)},Dr.prototype._insertCircleCell=function(l,p,u,d,g,b){this.circleCells[g].push(b)},Dr.prototype._query=function(l,p,u,d,g,b){if(u<0||l>this.width||d<0||p>this.height)return!g&&[];var w=[];if(l<=0&&p<=0&&this.width<=u&&this.height<=d){if(g)return!0;for(var C=0;C<this.boxKeys.length;C++)w.push({key:this.boxKeys[C],x1:this.bboxes[4*C],y1:this.bboxes[4*C+1],x2:this.bboxes[4*C+2],y2:this.bboxes[4*C+3]});for(var M=0;M<this.circleKeys.length;M++){var N=this.circles[3*M],K=this.circles[3*M+1],X=this.circles[3*M+2];w.push({key:this.circleKeys[M],x1:N-X,y1:K-X,x2:N+X,y2:K+X})}return b?w.filter(b):w}return this._forEachCell(l,p,u,d,this._queryCell,w,{hitTest:g,seenUids:{box:{},circle:{}}},b),g?w.length>0:w},Dr.prototype._queryCircle=function(l,p,u,d,g){var b=l-u,w=l+u,C=p-u,M=p+u;if(w<0||b>this.width||M<0||C>this.height)return!d&&[];var N=[];return this._forEachCell(b,C,w,M,this._queryCellCircle,N,{hitTest:d,circle:{x:l,y:p,radius:u},seenUids:{box:{},circle:{}}},g),d?N.length>0:N},Dr.prototype.query=function(l,p,u,d,g){return this._query(l,p,u,d,!1,g)},Dr.prototype.hitTest=function(l,p,u,d,g){return this._query(l,p,u,d,!0,g)},Dr.prototype.hitTestCircle=function(l,p,u,d){return this._queryCircle(l,p,u,!0,d)},Dr.prototype._queryCell=function(l,p,u,d,g,b,w,C){var M=w.seenUids,N=this.boxCells[g];if(N!==null)for(var K=this.bboxes,X=0,J=N;X<J.length;X+=1){var ce=J[X];if(!M.box[ce]){M.box[ce]=!0;var ue=4*ce;if(l<=K[ue+2]&&p<=K[ue+3]&&u>=K[ue+0]&&d>=K[ue+1]&&(!C||C(this.boxKeys[ce]))){if(w.hitTest)return b.push(!0),!0;b.push({key:this.boxKeys[ce],x1:K[ue],y1:K[ue+1],x2:K[ue+2],y2:K[ue+3]})}}}var ve=this.circleCells[g];if(ve!==null)for(var ae=this.circles,ge=0,we=ve;ge<we.length;ge+=1){var Ae=we[ge];if(!M.circle[Ae]){M.circle[Ae]=!0;var Ne=3*Ae;if(this._circleAndRectCollide(ae[Ne],ae[Ne+1],ae[Ne+2],l,p,u,d)&&(!C||C(this.circleKeys[Ae]))){if(w.hitTest)return b.push(!0),!0;var De=ae[Ne],Fe=ae[Ne+1],Ke=ae[Ne+2];b.push({key:this.circleKeys[Ae],x1:De-Ke,y1:Fe-Ke,x2:De+Ke,y2:Fe+Ke})}}}},Dr.prototype._queryCellCircle=function(l,p,u,d,g,b,w,C){var M=w.circle,N=w.seenUids,K=this.boxCells[g];if(K!==null)for(var X=this.bboxes,J=0,ce=K;J<ce.length;J+=1){var ue=ce[J];if(!N.box[ue]){N.box[ue]=!0;var ve=4*ue;if(this._circleAndRectCollide(M.x,M.y,M.radius,X[ve+0],X[ve+1],X[ve+2],X[ve+3])&&(!C||C(this.boxKeys[ue])))return b.push(!0),!0}}var ae=this.circleCells[g];if(ae!==null)for(var ge=this.circles,we=0,Ae=ae;we<Ae.length;we+=1){var Ne=Ae[we];if(!N.circle[Ne]){N.circle[Ne]=!0;var De=3*Ne;if(this._circlesCollide(ge[De],ge[De+1],ge[De+2],M.x,M.y,M.radius)&&(!C||C(this.circleKeys[Ne])))return b.push(!0),!0}}},Dr.prototype._forEachCell=function(l,p,u,d,g,b,w,C){for(var M=this._convertToXCellCoord(l),N=this._convertToYCellCoord(p),K=this._convertToXCellCoord(u),X=this._convertToYCellCoord(d),J=M;J<=K;J++)for(var ce=N;ce<=X;ce++)if(g.call(this,l,p,u,d,this.xCellCount*ce+J,b,w,C))return},Dr.prototype._convertToXCellCoord=function(l){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(l*this.xScale)))},Dr.prototype._convertToYCellCoord=function(l){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(l*this.yScale)))},Dr.prototype._circlesCollide=function(l,p,u,d,g,b){var w=d-l,C=g-p,M=u+b;return M*M>w*w+C*C},Dr.prototype._circleAndRectCollide=function(l,p,u,d,g,b,w){var C=(b-d)/2,M=Math.abs(l-(d+C));if(M>C+u)return!1;var N=(w-g)/2,K=Math.abs(p-(g+N));if(K>N+u)return!1;if(M<=C||K<=N)return!0;var X=M-C,J=K-N;return X*X+J*J<=u*u};var Vl=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function gi(l,p){for(var u=0;u<l;u++){var d=p.length;p.resize(d+4),p.float32.set(Vl,3*d)}}function Yn(l,p,u){var d=p[0],g=p[1];return l[0]=u[0]*d+u[4]*g+u[12],l[1]=u[1]*d+u[5]*g+u[13],l[3]=u[3]*d+u[7]*g+u[15],l}var uo=function(l,p,u){p===void 0&&(p=new Dr(l.width+200,l.height+200,25)),u===void 0&&(u=new Dr(l.width+200,l.height+200,25)),this.transform=l,this.grid=p,this.ignoredGrid=u,this.pitchfactor=Math.cos(l._pitch)*l.cameraToCenterDistance,this.screenRightBoundary=l.width+100,this.screenBottomBoundary=l.height+100,this.gridRightBoundary=l.width+200,this.gridBottomBoundary=l.height+200};function an(l,p,u){return p*(o.EXTENT/(l.tileSize*Math.pow(2,u-l.tileID.overscaledZ)))}uo.prototype.placeCollisionBox=function(l,p,u,d,g){var b=this.projectAndGetPerspectiveRatio(d,l.anchorPointX,l.anchorPointY),w=u*b.perspectiveRatio,C=l.x1*w+b.point.x,M=l.y1*w+b.point.y,N=l.x2*w+b.point.x,K=l.y2*w+b.point.y;return!this.isInsideGrid(C,M,N,K)||!p&&this.grid.hitTest(C,M,N,K,g)?{box:[],offscreen:!1}:{box:[C,M,N,K],offscreen:this.isOffscreen(C,M,N,K)}},uo.prototype.placeCollisionCircles=function(l,p,u,d,g,b,w,C,M,N,K,X,J){var ce=[],ue=new o.Point(p.anchorX,p.anchorY),ve=fr(ue,b),ae=Pr(this.transform.cameraToCenterDistance,ve.signedDistanceFromCamera),ge=(N?g/ae:g*ae)/o.ONE_EM,we=fr(ue,w).point,Ae=Xn(ge,d,p.lineOffsetX*ge,p.lineOffsetY*ge,!1,we,ue,p,u,w,{}),Ne=!1,De=!1,Fe=!0;if(Ae){for(var Ke=.5*X*ae+J,et=new o.Point(-100,-100),Qe=new o.Point(this.screenRightBoundary,this.screenBottomBoundary),dt=new yi,kt=Ae.first,Mt=Ae.last,At=[],xr=kt.path.length-1;xr>=1;xr--)At.push(kt.path[xr]);for(var mt=1;mt<Mt.path.length;mt++)At.push(Mt.path[mt]);var Gt=2.5*Ke;if(C){var rr=At.map(function(yo){return fr(yo,C)});At=rr.some(function(yo){return yo.signedDistanceFromCamera<=0})?[]:rr.map(function(yo){return yo.point})}var Wt=[];if(At.length>0){for(var Vt=At[0].clone(),Jt=At[0].clone(),Ut=1;Ut<At.length;Ut++)Vt.x=Math.min(Vt.x,At[Ut].x),Vt.y=Math.min(Vt.y,At[Ut].y),Jt.x=Math.max(Jt.x,At[Ut].x),Jt.y=Math.max(Jt.y,At[Ut].y);Wt=Vt.x>=et.x&&Jt.x<=Qe.x&&Vt.y>=et.y&&Jt.y<=Qe.y?[At]:Jt.x<et.x||Vt.x>Qe.x||Jt.y<et.y||Vt.y>Qe.y?[]:o.clipLine([At],et.x,et.y,Qe.x,Qe.y)}for(var Nt=0,$n=Wt;Nt<$n.length;Nt+=1){var gn;dt.reset($n[Nt],.25*Ke),gn=dt.length<=.5*Ke?1:Math.ceil(dt.paddedLength/Gt)+1;for(var hi=0;hi<gn;hi++){var Qn=hi/Math.max(gn-1,1),fn=dt.lerp(Qn),Cn=fn.x+100,Hi=fn.y+100;ce.push(Cn,Hi,Ke,0);var bi=Cn-Ke,Fa=Hi-Ke,Ai=Cn+Ke,Oo=Hi+Ke;if(Fe=Fe&&this.isOffscreen(bi,Fa,Ai,Oo),De=De||this.isInsideGrid(bi,Fa,Ai,Oo),!l&&this.grid.hitTestCircle(Cn,Hi,Ke,K)&&(Ne=!0,!M))return{circles:[],offscreen:!1,collisionDetected:Ne}}}}return{circles:!M&&Ne||!De?[]:ce,offscreen:Fe,collisionDetected:Ne}},uo.prototype.queryRenderedSymbols=function(l){if(l.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var p=[],u=1/0,d=1/0,g=-1/0,b=-1/0,w=0,C=l;w<C.length;w+=1){var M=C[w],N=new o.Point(M.x+100,M.y+100);u=Math.min(u,N.x),d=Math.min(d,N.y),g=Math.max(g,N.x),b=Math.max(b,N.y),p.push(N)}for(var K={},X={},J=0,ce=this.grid.query(u,d,g,b).concat(this.ignoredGrid.query(u,d,g,b));J<ce.length;J+=1){var ue=ce[J],ve=ue.key;if(K[ve.bucketInstanceId]===void 0&&(K[ve.bucketInstanceId]={}),!K[ve.bucketInstanceId][ve.featureIndex]){var ae=[new o.Point(ue.x1,ue.y1),new o.Point(ue.x2,ue.y1),new o.Point(ue.x2,ue.y2),new o.Point(ue.x1,ue.y2)];o.polygonIntersectsPolygon(p,ae)&&(K[ve.bucketInstanceId][ve.featureIndex]=!0,X[ve.bucketInstanceId]===void 0&&(X[ve.bucketInstanceId]=[]),X[ve.bucketInstanceId].push(ve.featureIndex))}}return X},uo.prototype.insertCollisionBox=function(l,p,u,d,g){(p?this.ignoredGrid:this.grid).insert({bucketInstanceId:u,featureIndex:d,collisionGroupID:g},l[0],l[1],l[2],l[3])},uo.prototype.insertCollisionCircles=function(l,p,u,d,g){for(var b=p?this.ignoredGrid:this.grid,w={bucketInstanceId:u,featureIndex:d,collisionGroupID:g},C=0;C<l.length;C+=4)b.insertCircle(w,l[C],l[C+1],l[C+2])},uo.prototype.projectAndGetPerspectiveRatio=function(l,p,u){var d=[p,u,0,1];return Yn(d,d,l),{point:new o.Point((d[0]/d[3]+1)/2*this.transform.width+100,(-d[1]/d[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/d[3]*.5}},uo.prototype.isOffscreen=function(l,p,u,d){return u<100||l>=this.screenRightBoundary||d<100||p>this.screenBottomBoundary},uo.prototype.isInsideGrid=function(l,p,u,d){return u>=0&&l<this.gridRightBoundary&&d>=0&&p<this.gridBottomBoundary},uo.prototype.getViewportMatrix=function(){var l=o.identity([]);return o.translate(l,l,[-100,-100,0]),l};var Ao=function(l,p,u,d){this.opacity=l?Math.max(0,Math.min(1,l.opacity+(l.placed?p:-p))):d&&u?1:0,this.placed=u};Ao.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var to=function(l,p,u,d,g){this.text=new Ao(l?l.text:null,p,u,g),this.icon=new Ao(l?l.icon:null,p,d,g)};to.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var wf=function(l,p,u){this.text=l,this.icon=p,this.skipFade=u},co=function(){this.invProjMatrix=o.create(),this.viewportMatrix=o.create(),this.circles=[]},Mv=function(l,p,u,d,g){this.bucketInstanceId=l,this.featureIndex=p,this.sourceLayerIndex=u,this.bucketIndex=d,this.tileID=g},ua=function(l){this.crossSourceCollisions=l,this.maxGroupID=0,this.collisionGroups={}};function ai(l,p,u,d,g){var b=o.getAnchorAlignment(l),w=-(b.horizontalAlign-.5)*p,C=-(b.verticalAlign-.5)*u,M=o.evaluateVariableOffset(l,d);return new o.Point(w+M[0]*g,C+M[1]*g)}function Go(l,p,u,d,g,b){var w=l.x1,C=l.x2,M=l.y1,N=l.y2,K=l.anchorPointX,X=l.anchorPointY,J=new o.Point(p,u);return d&&J._rotate(g?b:-b),{x1:w+J.x,y1:M+J.y,x2:C+J.x,y2:N+J.y,anchorPointX:K,anchorPointY:X}}ua.prototype.get=function(l){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[l]){var p=++this.maxGroupID;this.collisionGroups[l]={ID:p,predicate:function(u){return u.collisionGroupID===p}}}return this.collisionGroups[l]};var vi=function(l,p,u,d){this.transform=l.clone(),this.collisionIndex=new uo(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=p,this.retainedQueryData={},this.collisionGroups=new ua(u),this.collisionCircleArrays={},this.prevPlacement=d,d&&(d.prevPlacement=void 0),this.placedOrientations={}};function us(l,p,u,d,g){l.emplaceBack(p?1:0,u?1:0,d||0,g||0),l.emplaceBack(p?1:0,u?1:0,d||0,g||0),l.emplaceBack(p?1:0,u?1:0,d||0,g||0),l.emplaceBack(p?1:0,u?1:0,d||0,g||0)}vi.prototype.getBucketParts=function(l,p,u,d){var g=u.getBucket(p),b=u.latestFeatureIndex;if(g&&b&&p.id===g.layerIds[0]){var w=u.collisionBoxArray,C=g.layers[0].layout,M=Math.pow(2,this.transform.zoom-u.tileID.overscaledZ),N=u.tileSize/o.EXTENT,K=this.transform.calculatePosMatrix(u.tileID.toUnwrapped()),X=C.get("text-pitch-alignment")==="map",J=C.get("text-rotation-alignment")==="map",ce=an(u,1,this.transform.zoom),ue=Sn(K,X,J,this.transform,ce),ve=null;if(X){var ae=qr(K,X,J,this.transform,ce);ve=o.multiply([],this.transform.labelPlaneMatrix,ae)}this.retainedQueryData[g.bucketInstanceId]=new Mv(g.bucketInstanceId,b,g.sourceLayerIndex,g.index,u.tileID);var ge={bucket:g,layout:C,posMatrix:K,textLabelPlaneMatrix:ue,labelToScreenMatrix:ve,scale:M,textPixelRatio:N,holdingForFade:u.holdingForFade(),collisionBoxArray:w,partiallyEvaluatedTextSize:o.evaluateSizeForZoom(g.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(g.sourceID)};if(d)for(var we=0,Ae=g.sortKeyRanges;we<Ae.length;we+=1){var Ne=Ae[we];l.push({sortKey:Ne.sortKey,symbolInstanceStart:Ne.symbolInstanceStart,symbolInstanceEnd:Ne.symbolInstanceEnd,parameters:ge})}else l.push({symbolInstanceStart:0,symbolInstanceEnd:g.symbolInstances.length,parameters:ge})}},vi.prototype.attemptAnchorPlacement=function(l,p,u,d,g,b,w,C,M,N,K,X,J,ce,ue){var ve,ae=[X.textOffset0,X.textOffset1],ge=ai(l,u,d,ae,g),we=this.collisionIndex.placeCollisionBox(Go(p,ge.x,ge.y,b,w,this.transform.angle),K,C,M,N.predicate);if(!ue||this.collisionIndex.placeCollisionBox(Go(ue,ge.x,ge.y,b,w,this.transform.angle),K,C,M,N.predicate).box.length!==0)return we.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[X.crossTileID]&&this.prevPlacement.placements[X.crossTileID]&&this.prevPlacement.placements[X.crossTileID].text&&(ve=this.prevPlacement.variableOffsets[X.crossTileID].anchor),this.variableOffsets[X.crossTileID]={textOffset:ae,width:u,height:d,anchor:l,textBoxScale:g,prevAnchor:ve},this.markUsedJustification(J,l,X,ce),J.allowVerticalPlacement&&(this.markUsedOrientation(J,ce,X),this.placedOrientations[X.crossTileID]=ce),{shift:ge,placedGlyphBoxes:we}):void 0},vi.prototype.placeLayerBucketPart=function(l,p,u){var d=this,g=l.parameters,b=g.bucket,w=g.layout,C=g.posMatrix,M=g.textLabelPlaneMatrix,N=g.labelToScreenMatrix,K=g.textPixelRatio,X=g.holdingForFade,J=g.collisionBoxArray,ce=g.partiallyEvaluatedTextSize,ue=g.collisionGroup,ve=w.get("text-optional"),ae=w.get("icon-optional"),ge=w.get("text-allow-overlap"),we=w.get("icon-allow-overlap"),Ae=w.get("text-rotation-alignment")==="map",Ne=w.get("text-pitch-alignment")==="map",De=w.get("icon-text-fit")!=="none",Fe=w.get("symbol-z-order")==="viewport-y",Ke=ge&&(we||!b.hasIconData()||ae),et=we&&(ge||!b.hasTextData()||ve);!b.collisionArrays&&J&&b.deserializeCollisionBoxes(J);var Qe=function(mt,Gt){if(!p[mt.crossTileID])if(X)d.placements[mt.crossTileID]=new wf(!1,!1,!1);else{var rr,Wt=!1,Vt=!1,Jt=!0,Ut=null,Nt={box:null,offscreen:null},$n={box:null,offscreen:null},gn=null,hi=null,Qn=0,fn=0,Cn=0;Gt.textFeatureIndex?Qn=Gt.textFeatureIndex:mt.useRuntimeCollisionCircles&&(Qn=mt.featureIndex),Gt.verticalTextFeatureIndex&&(fn=Gt.verticalTextFeatureIndex);var Hi=Gt.textBox;if(Hi){var bi=function(Ar){var io=o.WritingMode.horizontal;if(b.allowVerticalPlacement&&!Ar&&d.prevPlacement){var Mi=d.prevPlacement.placedOrientations[mt.crossTileID];Mi&&(d.placedOrientations[mt.crossTileID]=Mi,d.markUsedOrientation(b,io=Mi,mt))}return io},Fa=function(Ar,io){if(b.allowVerticalPlacement&&mt.numVerticalGlyphVertices>0&&Gt.verticalTextBox)for(var Mi=0,Ts=b.writingModes;Mi<Ts.length&&(Ts[Mi]===o.WritingMode.vertical?(Nt=io(),$n=Nt):Nt=Ar(),!(Nt&&Nt.box&&Nt.box.length));Mi+=1);else Nt=Ar()};if(w.get("text-variable-anchor")){var Ai=w.get("text-variable-anchor");if(d.prevPlacement&&d.prevPlacement.variableOffsets[mt.crossTileID]){var Oo=d.prevPlacement.variableOffsets[mt.crossTileID];Ai.indexOf(Oo.anchor)>0&&(Ai=Ai.filter(function(Ar){return Ar!==Oo.anchor})).unshift(Oo.anchor)}var yo=function(Ar,io,Mi){for(var Ts=Ar.x2-Ar.x1,Wv=Ar.y2-Ar.y1,hc=mt.textBoxScale,Gv=De&&!we?io:null,cu={box:[],offscreen:!1},Qf=ge?2*Ai.length:Ai.length,ll=0;ll<Qf;++ll){var dc=d.attemptAnchorPlacement(Ai[ll%Ai.length],Ar,Ts,Wv,hc,Ae,Ne,K,C,ue,ll>=Ai.length,mt,b,Mi,Gv);if(dc&&(cu=dc.placedGlyphBoxes)&&cu.box&&cu.box.length){Wt=!0,Ut=dc.shift;break}}return cu};Fa(function(){return yo(Hi,Gt.iconBox,o.WritingMode.horizontal)},function(){var Ar=Gt.verticalTextBox;return b.allowVerticalPlacement&&!(Nt&&Nt.box&&Nt.box.length)&&mt.numVerticalGlyphVertices>0&&Ar?yo(Ar,Gt.verticalIconBox,o.WritingMode.vertical):{box:null,offscreen:null}}),Nt&&(Wt=Nt.box,Jt=Nt.offscreen);var su=bi(Nt&&Nt.box);if(!Wt&&d.prevPlacement){var al=d.prevPlacement.variableOffsets[mt.crossTileID];al&&(d.variableOffsets[mt.crossTileID]=al,d.markUsedJustification(b,al.anchor,mt,su))}}else{var ja=function(Ar,io){var Mi=d.collisionIndex.placeCollisionBox(Ar,ge,K,C,ue.predicate);return Mi&&Mi.box&&Mi.box.length&&(d.markUsedOrientation(b,io,mt),d.placedOrientations[mt.crossTileID]=io),Mi};Fa(function(){return ja(Hi,o.WritingMode.horizontal)},function(){var Ar=Gt.verticalTextBox;return b.allowVerticalPlacement&&mt.numVerticalGlyphVertices>0&&Ar?ja(Ar,o.WritingMode.vertical):{box:null,offscreen:null}}),bi(Nt&&Nt.box&&Nt.box.length)}}if(Wt=(rr=Nt)&&rr.box&&rr.box.length>0,Jt=rr&&rr.offscreen,mt.useRuntimeCollisionCircles){var sl=b.text.placedSymbolArray.get(mt.centerJustifiedTextSymbolIndex),lu=o.evaluateSizeForFeature(b.textSizeData,ce,sl),Xo=w.get("text-padding");gn=d.collisionIndex.placeCollisionCircles(ge,sl,b.lineVertexArray,b.glyphOffsetArray,lu,C,M,N,u,Ne,ue.predicate,mt.collisionCircleDiameter,Xo),Wt=ge||gn.circles.length>0&&!gn.collisionDetected,Jt=Jt&&gn.offscreen}if(Gt.iconFeatureIndex&&(Cn=Gt.iconFeatureIndex),Gt.iconBox){var uu=function(Ar){var io=De&&Ut?Go(Ar,Ut.x,Ut.y,Ae,Ne,d.transform.angle):Ar;return d.collisionIndex.placeCollisionBox(io,we,K,C,ue.predicate)};Vt=$n&&$n.box&&$n.box.length&&Gt.verticalIconBox?(hi=uu(Gt.verticalIconBox)).box.length>0:(hi=uu(Gt.iconBox)).box.length>0,Jt=Jt&&hi.offscreen}var Yo=ve||mt.numHorizontalGlyphVertices===0&&mt.numVerticalGlyphVertices===0,Vn=ae||mt.numIconVertices===0;if(Yo||Vn?Vn?Yo||(Vt=Vt&&Wt):Wt=Vt&&Wt:Vt=Wt=Vt&&Wt,Wt&&rr&&rr.box&&d.collisionIndex.insertCollisionBox(rr.box,w.get("text-ignore-placement"),b.bucketInstanceId,$n&&$n.box&&fn?fn:Qn,ue.ID),Vt&&hi&&d.collisionIndex.insertCollisionBox(hi.box,w.get("icon-ignore-placement"),b.bucketInstanceId,Cn,ue.ID),gn&&(Wt&&d.collisionIndex.insertCollisionCircles(gn.circles,w.get("text-ignore-placement"),b.bucketInstanceId,Qn,ue.ID),u)){var da=b.bucketInstanceId,Ua=d.collisionCircleArrays[da];Ua===void 0&&(Ua=d.collisionCircleArrays[da]=new co);for(var ks=0;ks<gn.circles.length;ks+=4)Ua.circles.push(gn.circles[ks+0]),Ua.circles.push(gn.circles[ks+1]),Ua.circles.push(gn.circles[ks+2]),Ua.circles.push(gn.collisionDetected?1:0)}d.placements[mt.crossTileID]=new wf(Wt||Ke,Vt||et,Jt||b.justReloaded),p[mt.crossTileID]=!0}};if(Fe)for(var dt=b.getSortedSymbolIndexes(this.transform.angle),kt=dt.length-1;kt>=0;--kt){var Mt=dt[kt];Qe(b.symbolInstances.get(Mt),b.collisionArrays[Mt])}else for(var At=l.symbolInstanceStart;At<l.symbolInstanceEnd;At++)Qe(b.symbolInstances.get(At),b.collisionArrays[At]);if(u&&b.bucketInstanceId in this.collisionCircleArrays){var xr=this.collisionCircleArrays[b.bucketInstanceId];o.invert(xr.invProjMatrix,C),xr.viewportMatrix=this.collisionIndex.getViewportMatrix()}b.justReloaded=!1},vi.prototype.markUsedJustification=function(l,p,u,d){var g;g=d===o.WritingMode.vertical?u.verticalPlacedTextSymbolIndex:{left:u.leftJustifiedTextSymbolIndex,center:u.centerJustifiedTextSymbolIndex,right:u.rightJustifiedTextSymbolIndex}[o.getAnchorJustification(p)];for(var b=0,w=[u.leftJustifiedTextSymbolIndex,u.centerJustifiedTextSymbolIndex,u.rightJustifiedTextSymbolIndex,u.verticalPlacedTextSymbolIndex];b<w.length;b+=1){var C=w[b];C>=0&&(l.text.placedSymbolArray.get(C).crossTileID=g>=0&&C!==g?0:u.crossTileID)}},vi.prototype.markUsedOrientation=function(l,p,u){for(var d=p===o.WritingMode.horizontal||p===o.WritingMode.horizontalOnly?p:0,g=p===o.WritingMode.vertical?p:0,b=0,w=[u.leftJustifiedTextSymbolIndex,u.centerJustifiedTextSymbolIndex,u.rightJustifiedTextSymbolIndex];b<w.length;b+=1)l.text.placedSymbolArray.get(w[b]).placedOrientation=d;u.verticalPlacedTextSymbolIndex&&(l.text.placedSymbolArray.get(u.verticalPlacedTextSymbolIndex).placedOrientation=g)},vi.prototype.commit=function(l){this.commitTime=l,this.zoomAtLastRecencyCheck=this.transform.zoom;var p=this.prevPlacement,u=!1;this.prevZoomAdjustment=p?p.zoomAdjustment(this.transform.zoom):0;var d=p?p.symbolFadeChange(l):1,g=p?p.opacities:{},b=p?p.variableOffsets:{},w=p?p.placedOrientations:{};for(var C in this.placements){var M=this.placements[C],N=g[C];N?(this.opacities[C]=new to(N,d,M.text,M.icon),u=u||M.text!==N.text.placed||M.icon!==N.icon.placed):(this.opacities[C]=new to(null,d,M.text,M.icon,M.skipFade),u=u||M.text||M.icon)}for(var K in g){var X=g[K];if(!this.opacities[K]){var J=new to(X,d,!1,!1);J.isHidden()||(this.opacities[K]=J,u=u||X.text.placed||X.icon.placed)}}for(var ce in b)this.variableOffsets[ce]||!this.opacities[ce]||this.opacities[ce].isHidden()||(this.variableOffsets[ce]=b[ce]);for(var ue in w)this.placedOrientations[ue]||!this.opacities[ue]||this.opacities[ue].isHidden()||(this.placedOrientations[ue]=w[ue]);u?this.lastPlacementChangeTime=l:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=p?p.lastPlacementChangeTime:l)},vi.prototype.updateLayerOpacities=function(l,p){for(var u={},d=0,g=p;d<g.length;d+=1){var b=g[d],w=b.getBucket(l);w&&b.latestFeatureIndex&&l.id===w.layerIds[0]&&this.updateBucketOpacities(w,u,b.collisionBoxArray)}},vi.prototype.updateBucketOpacities=function(l,p,u){var d=this;l.hasTextData()&&l.text.opacityVertexArray.clear(),l.hasIconData()&&l.icon.opacityVertexArray.clear(),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexArray.clear(),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexArray.clear();var g=l.layers[0].layout,b=new to(null,0,!1,!1,!0),w=g.get("text-allow-overlap"),C=g.get("icon-allow-overlap"),M=g.get("text-variable-anchor"),N=g.get("text-rotation-alignment")==="map",K=g.get("text-pitch-alignment")==="map",X=g.get("icon-text-fit")!=="none",J=new to(null,0,w&&(C||!l.hasIconData()||g.get("icon-optional")),C&&(w||!l.hasTextData()||g.get("text-optional")),!0);!l.collisionArrays&&u&&(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData())&&l.deserializeCollisionBoxes(u);for(var ce=function(ge,we,Ae){for(var Ne=0;Ne<we/4;Ne++)ge.opacityVertexArray.emplaceBack(Ae)},ue=function(ge){var we=l.symbolInstances.get(ge),Ae=we.numHorizontalGlyphVertices,Ne=we.numVerticalGlyphVertices,De=we.crossTileID,Fe=d.opacities[De];p[De]?Fe=b:Fe||(d.opacities[De]=Fe=J),p[De]=!0;var Ke=we.numIconVertices>0,et=d.placedOrientations[we.crossTileID],Qe=et===o.WritingMode.vertical,dt=et===o.WritingMode.horizontal||et===o.WritingMode.horizontalOnly;if(Ae>0||Ne>0){var kt=Cf(Fe.text);ce(l.text,Ae,Qe?Ks:kt),ce(l.text,Ne,dt?Ks:kt);var Mt=Fe.text.isHidden();[we.rightJustifiedTextSymbolIndex,we.centerJustifiedTextSymbolIndex,we.leftJustifiedTextSymbolIndex].forEach(function(Nt){Nt>=0&&(l.text.placedSymbolArray.get(Nt).hidden=Mt||Qe?1:0)}),we.verticalPlacedTextSymbolIndex>=0&&(l.text.placedSymbolArray.get(we.verticalPlacedTextSymbolIndex).hidden=Mt||dt?1:0);var At=d.variableOffsets[we.crossTileID];At&&d.markUsedJustification(l,At.anchor,we,et);var xr=d.placedOrientations[we.crossTileID];xr&&(d.markUsedJustification(l,"left",we,xr),d.markUsedOrientation(l,xr,we))}if(Ke){var mt=Cf(Fe.icon),Gt=!(X&&we.verticalPlacedIconSymbolIndex&&Qe);we.placedIconSymbolIndex>=0&&(ce(l.icon,we.numIconVertices,Gt?mt:Ks),l.icon.placedSymbolArray.get(we.placedIconSymbolIndex).hidden=Fe.icon.isHidden()),we.verticalPlacedIconSymbolIndex>=0&&(ce(l.icon,we.numVerticalIconVertices,Gt?Ks:mt),l.icon.placedSymbolArray.get(we.verticalPlacedIconSymbolIndex).hidden=Fe.icon.isHidden())}if(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData()){var rr=l.collisionArrays[ge];if(rr){var Wt=new o.Point(0,0);if(rr.textBox||rr.verticalTextBox){var Vt=!0;if(M){var Jt=d.variableOffsets[De];Jt?(Wt=ai(Jt.anchor,Jt.width,Jt.height,Jt.textOffset,Jt.textBoxScale),N&&Wt._rotate(K?d.transform.angle:-d.transform.angle)):Vt=!1}rr.textBox&&us(l.textCollisionBox.collisionVertexArray,Fe.text.placed,!Vt||Qe,Wt.x,Wt.y),rr.verticalTextBox&&us(l.textCollisionBox.collisionVertexArray,Fe.text.placed,!Vt||dt,Wt.x,Wt.y)}var Ut=!!(!dt&&rr.verticalIconBox);rr.iconBox&&us(l.iconCollisionBox.collisionVertexArray,Fe.icon.placed,Ut,X?Wt.x:0,X?Wt.y:0),rr.verticalIconBox&&us(l.iconCollisionBox.collisionVertexArray,Fe.icon.placed,!Ut,X?Wt.x:0,X?Wt.y:0)}}},ve=0;ve<l.symbolInstances.length;ve++)ue(ve);if(l.sortFeatures(this.transform.angle),this.retainedQueryData[l.bucketInstanceId]&&(this.retainedQueryData[l.bucketInstanceId].featureSortOrder=l.featureSortOrder),l.hasTextData()&&l.text.opacityVertexBuffer&&l.text.opacityVertexBuffer.updateData(l.text.opacityVertexArray),l.hasIconData()&&l.icon.opacityVertexBuffer&&l.icon.opacityVertexBuffer.updateData(l.icon.opacityVertexArray),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexBuffer&&l.iconCollisionBox.collisionVertexBuffer.updateData(l.iconCollisionBox.collisionVertexArray),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexBuffer&&l.textCollisionBox.collisionVertexBuffer.updateData(l.textCollisionBox.collisionVertexArray),l.bucketInstanceId in this.collisionCircleArrays){var ae=this.collisionCircleArrays[l.bucketInstanceId];l.placementInvProjMatrix=ae.invProjMatrix,l.placementViewportMatrix=ae.viewportMatrix,l.collisionCircleArray=ae.circles,delete this.collisionCircleArrays[l.bucketInstanceId]}},vi.prototype.symbolFadeChange=function(l){return this.fadeDuration===0?1:(l-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},vi.prototype.zoomAdjustment=function(l){return Math.max(0,(this.transform.zoom-l)/1.5)},vi.prototype.hasTransitions=function(l){return this.stale||l-this.lastPlacementChangeTime<this.fadeDuration},vi.prototype.stillRecent=function(l,p){var u=this.zoomAtLastRecencyCheck===p?1-this.zoomAdjustment(p):1;return this.zoomAtLastRecencyCheck=p,this.commitTime+this.fadeDuration*u>l},vi.prototype.setStale=function(){this.stale=!0};var Rv=Math.pow(2,25),Lv=Math.pow(2,24),Xp=Math.pow(2,17),zv=Math.pow(2,16),Sf=Math.pow(2,9),Dv=Math.pow(2,8),Ef=Math.pow(2,1);function Cf(l){if(l.opacity===0&&!l.placed)return 0;if(l.opacity===1&&l.placed)return 4294967295;var p=l.placed?1:0,u=Math.floor(127*l.opacity);return u*Rv+p*Lv+u*Xp+p*zv+u*Sf+p*Dv+u*Ef+p}var Ks=0,Yp=function(l){this._sortAcrossTiles=l.layout.get("symbol-z-order")!=="viewport-y"&&l.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Yp.prototype.continuePlacement=function(l,p,u,d,g){for(var b=this._bucketParts;this._currentTileIndex<l.length;)if(p.getBucketParts(b,d,l[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,g())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,b.sort(function(w,C){return w.sortKey-C.sortKey}));this._currentPartIndex<b.length;)if(p.placeLayerBucketPart(b[this._currentPartIndex],this._seenCrossTileIDs,u),this._currentPartIndex++,g())return!0;return!1};var ql=function(l,p,u,d,g,b,w){this.placement=new vi(l,g,b,w),this._currentPlacementIndex=p.length-1,this._forceFullPlacement=u,this._showCollisionBoxes=d,this._done=!1};ql.prototype.isDone=function(){return this._done},ql.prototype.continuePlacement=function(l,p,u){for(var d=this,g=o.browser.now(),b=function(){var M=o.browser.now()-g;return!d._forceFullPlacement&&M>2};this._currentPlacementIndex>=0;){var w=p[l[this._currentPlacementIndex]],C=this.placement.collisionIndex.transform.zoom;if(w.type==="symbol"&&(!w.minzoom||w.minzoom<=C)&&(!w.maxzoom||w.maxzoom>C)){if(this._inProgressLayer||(this._inProgressLayer=new Yp(w)),this._inProgressLayer.continuePlacement(u[w.source],this.placement,this._showCollisionBoxes,w,b))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},ql.prototype.commit=function(l){return this.placement.commit(l),this.placement};var kf=512/o.EXTENT/2,Gu=function(l,p,u){this.tileID=l,this.indexedSymbolInstances={},this.bucketInstanceId=u;for(var d=0;d<p.length;d++){var g=p.get(d),b=g.key;this.indexedSymbolInstances[b]||(this.indexedSymbolInstances[b]=[]),this.indexedSymbolInstances[b].push({crossTileID:g.crossTileID,coord:this.getScaledCoordinates(g,l)})}};Gu.prototype.getScaledCoordinates=function(l,p){var u=kf/Math.pow(2,p.canonical.z-this.tileID.canonical.z);return{x:Math.floor((p.canonical.x*o.EXTENT+l.anchorX)*u),y:Math.floor((p.canonical.y*o.EXTENT+l.anchorY)*u)}},Gu.prototype.findMatches=function(l,p,u){for(var d=this.tileID.canonical.z<p.canonical.z?1:Math.pow(2,this.tileID.canonical.z-p.canonical.z),g=0;g<l.length;g++){var b=l.get(g);if(!b.crossTileID){var w=this.indexedSymbolInstances[b.key];if(w)for(var C=this.getScaledCoordinates(b,p),M=0,N=w;M<N.length;M+=1){var K=N[M];if(Math.abs(K.coord.x-C.x)<=d&&Math.abs(K.coord.y-C.y)<=d&&!u[K.crossTileID]){u[K.crossTileID]=!0,b.crossTileID=K.crossTileID;break}}}}};var po=function(){this.maxCrossTileID=0};po.prototype.generate=function(){return++this.maxCrossTileID};var Ca=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Ca.prototype.handleWrapJump=function(l){var p=Math.round((l-this.lng)/360);if(p!==0)for(var u in this.indexes){var d=this.indexes[u],g={};for(var b in d){var w=d[b];w.tileID=w.tileID.unwrapTo(w.tileID.wrap+p),g[w.tileID.key]=w}this.indexes[u]=g}this.lng=l},Ca.prototype.addBucket=function(l,p,u){if(this.indexes[l.overscaledZ]&&this.indexes[l.overscaledZ][l.key]){if(this.indexes[l.overscaledZ][l.key].bucketInstanceId===p.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(l.overscaledZ,this.indexes[l.overscaledZ][l.key])}for(var d=0;d<p.symbolInstances.length;d++)p.symbolInstances.get(d).crossTileID=0;this.usedCrossTileIDs[l.overscaledZ]||(this.usedCrossTileIDs[l.overscaledZ]={});var g=this.usedCrossTileIDs[l.overscaledZ];for(var b in this.indexes){var w=this.indexes[b];if(Number(b)>l.overscaledZ)for(var C in w){var M=w[C];M.tileID.isChildOf(l)&&M.findMatches(p.symbolInstances,l,g)}else{var N=w[l.scaledTo(Number(b)).key];N&&N.findMatches(p.symbolInstances,l,g)}}for(var K=0;K<p.symbolInstances.length;K++){var X=p.symbolInstances.get(K);X.crossTileID||(X.crossTileID=u.generate(),g[X.crossTileID]=!0)}return this.indexes[l.overscaledZ]===void 0&&(this.indexes[l.overscaledZ]={}),this.indexes[l.overscaledZ][l.key]=new Gu(l,p.symbolInstances,p.bucketInstanceId),!0},Ca.prototype.removeBucketCrossTileIDs=function(l,p){for(var u in p.indexedSymbolInstances)for(var d=0,g=p.indexedSymbolInstances[u];d<g.length;d+=1)delete this.usedCrossTileIDs[l][g[d].crossTileID]},Ca.prototype.removeStaleBuckets=function(l){var p=!1;for(var u in this.indexes){var d=this.indexes[u];for(var g in d)l[d[g].bucketInstanceId]||(this.removeBucketCrossTileIDs(u,d[g]),delete d[g],p=!0)}return p};var ka=function(){this.layerIndexes={},this.crossTileIDs=new po,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};ka.prototype.addLayer=function(l,p,u){var d=this.layerIndexes[l.id];d===void 0&&(d=this.layerIndexes[l.id]=new Ca);var g=!1,b={};d.handleWrapJump(u);for(var w=0,C=p;w<C.length;w+=1){var M=C[w],N=M.getBucket(l);N&&l.id===N.layerIds[0]&&(N.bucketInstanceId||(N.bucketInstanceId=++this.maxBucketInstanceId),d.addBucket(M.tileID,N,this.crossTileIDs)&&(g=!0),b[N.bucketInstanceId]=!0)}return d.removeStaleBuckets(b)&&(g=!0),g},ka.prototype.pruneUnusedLayers=function(l){var p={};for(var u in l.forEach(function(d){p[d]=!0}),this.layerIndexes)p[u]||delete this.layerIndexes[u]};var cs=function(l,p){return o.emitValidationErrors(l,p&&p.filter(function(u){return u.identifier!=="source.canvas"}))},Ta=o.pick(ot,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Ia=o.pick(ot,["setCenter","setZoom","setBearing","setPitch"]),Hu=function(){var l={},p=o.styleSpec.$version;for(var u in o.styleSpec.$root){var d,g=o.styleSpec.$root[u];g.required&&(d=u==="version"?p:g.type==="array"?[]:{})!=null&&(l[u]=d)}return l}(),Ui=function(l){function p(u,d){var g=this;d===void 0&&(d={}),l.call(this),this.map=u,this.dispatcher=new Oe(Ve(),this),this.imageManager=new V,this.imageManager.setEventedParent(this),this.glyphManager=new Te(u._requestManager,d.localIdeographFontFamily),this.lineAtlas=new he(256,512),this.crossTileSymbolIndex=new ka,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new o.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",o.getReferrer());var b=this;this._rtlTextPluginCallback=p.registerForPluginStateChange(function(w){b.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:w.pluginStatus,pluginURL:w.pluginURL},function(C,M){if(o.triggerPluginCompletionEvent(C),M&&M.every(function(K){return K}))for(var N in b.sourceCaches)b.sourceCaches[N].reload()})}),this.on("data",function(w){if(w.dataType==="source"&&w.sourceDataType==="metadata"){var C=g.sourceCaches[w.sourceId];if(C){var M=C.getSource();if(M&&M.vectorLayerIds)for(var N in g._layers){var K=g._layers[N];K.source===M.id&&g._validateLayer(K)}}}})}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.loadURL=function(u,d){var g=this;d===void 0&&(d={}),this.fire(new o.Event("dataloading",{dataType:"style"}));var b=typeof d.validate=="boolean"?d.validate:!o.isMapboxURL(u);u=this.map._requestManager.normalizeStyleURL(u,d.accessToken);var w=this.map._requestManager.transformRequest(u,o.ResourceType.Style);this._request=o.getJSON(w,function(C,M){g._request=null,C?g.fire(new o.ErrorEvent(C)):M&&g._load(M,b)})},p.prototype.loadJSON=function(u,d){var g=this;d===void 0&&(d={}),this.fire(new o.Event("dataloading",{dataType:"style"})),this._request=o.browser.frame(function(){g._request=null,g._load(u,d.validate!==!1)})},p.prototype.loadEmpty=function(){this.fire(new o.Event("dataloading",{dataType:"style"})),this._load(Hu,!1)},p.prototype._load=function(u,d){if(!d||!cs(this,o.validateStyle(u))){for(var g in this._loaded=!0,this.stylesheet=u,u.sources)this.addSource(g,u.sources[g],{validate:!1});u.sprite?this._loadSprite(u.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(u.glyphs);var b=nt(this.stylesheet.layers);this._order=b.map(function(N){return N.id}),this._layers={},this._serializedLayers={};for(var w=0,C=b;w<C.length;w+=1){var M=C[w];(M=o.createStyleLayer(M)).setEventedParent(this,{layer:{id:M.id}}),this._layers[M.id]=M,this._serializedLayers[M.id]=M.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new te(this.stylesheet.light),this.fire(new o.Event("data",{dataType:"style"})),this.fire(new o.Event("style.load"))}},p.prototype._loadSprite=function(u){var d=this;this._spriteRequest=function(g,b,w){var C,M,N,K=o.browser.devicePixelRatio>1?"@2x":"",X=o.getJSON(b.transformRequest(b.normalizeSpriteURL(g,K,".json"),o.ResourceType.SpriteJSON),function(ue,ve){X=null,N||(N=ue,C=ve,ce())}),J=o.getImage(b.transformRequest(b.normalizeSpriteURL(g,K,".png"),o.ResourceType.SpriteImage),function(ue,ve){J=null,N||(N=ue,M=ve,ce())});function ce(){if(N)w(N);else if(C&&M){var ue=o.browser.getImageData(M),ve={};for(var ae in C){var ge=C[ae],we=ge.width,Ae=ge.height,Ne=ge.x,De=ge.y,Fe=ge.sdf,Ke=ge.pixelRatio,et=ge.stretchX,Qe=ge.stretchY,dt=ge.content,kt=new o.RGBAImage({width:we,height:Ae});o.RGBAImage.copy(ue,kt,{x:Ne,y:De},{x:0,y:0},{width:we,height:Ae}),ve[ae]={data:kt,pixelRatio:Ke,sdf:Fe,stretchX:et,stretchY:Qe,content:dt}}w(null,ve)}}return{cancel:function(){X&&(X.cancel(),X=null),J&&(J.cancel(),J=null)}}}(u,this.map._requestManager,function(g,b){if(d._spriteRequest=null,g)d.fire(new o.ErrorEvent(g));else if(b)for(var w in b)d.imageManager.addImage(w,b[w]);d.imageManager.setLoaded(!0),d._availableImages=d.imageManager.listImages(),d.dispatcher.broadcast("setImages",d._availableImages),d.fire(new o.Event("data",{dataType:"style"}))})},p.prototype._validateLayer=function(u){var d=this.sourceCaches[u.source];if(d){var g=u.sourceLayer;if(g){var b=d.getSource();(b.type==="geojson"||b.vectorLayerIds&&b.vectorLayerIds.indexOf(g)===-1)&&this.fire(new o.ErrorEvent(new Error('Source layer "'+g+'" does not exist on source "'+b.id+'" as specified by style layer "'+u.id+'"')))}}},p.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var u in this.sourceCaches)if(!this.sourceCaches[u].loaded())return!1;return!!this.imageManager.isLoaded()},p.prototype._serializeLayers=function(u){for(var d=[],g=0,b=u;g<b.length;g+=1){var w=this._layers[b[g]];w.type!=="custom"&&d.push(w.serialize())}return d},p.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var u in this.sourceCaches)if(this.sourceCaches[u].hasTransition())return!0;for(var d in this._layers)if(this._layers[d].hasTransition())return!0;return!1},p.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},p.prototype.update=function(u){if(this._loaded){var d=this._changed;if(this._changed){var g=Object.keys(this._updatedLayers),b=Object.keys(this._removedLayers);for(var w in(g.length||b.length)&&this._updateWorkerLayers(g,b),this._updatedSources){var C=this._updatedSources[w];C==="reload"?this._reloadSource(w):C==="clear"&&this._clearSource(w)}for(var M in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[M].updateTransitions(u);this.light.updateTransitions(u),this._resetUpdates()}var N={};for(var K in this.sourceCaches){var X=this.sourceCaches[K];N[K]=X.used,X.used=!1}for(var J=0,ce=this._order;J<ce.length;J+=1){var ue=this._layers[ce[J]];ue.recalculate(u,this._availableImages),!ue.isHidden(u.zoom)&&ue.source&&(this.sourceCaches[ue.source].used=!0)}for(var ve in N){var ae=this.sourceCaches[ve];N[ve]!==ae.used&&ae.fire(new o.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:ve}))}this.light.recalculate(u),this.z=u.zoom,d&&this.fire(new o.Event("data",{dataType:"style"}))}},p.prototype._updateTilesForChangedImages=function(){var u=Object.keys(this._changedImages);if(u.length){for(var d in this.sourceCaches)this.sourceCaches[d].reloadTilesForDependencies(["icons","patterns"],u);this._changedImages={}}},p.prototype._updateWorkerLayers=function(u,d){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(u),removedIds:d})},p.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},p.prototype.setState=function(u){var d=this;if(this._checkLoaded(),cs(this,o.validateStyle(u)))return!1;(u=o.clone$1(u)).layers=nt(u.layers);var g=function(w,C){if(!w)return[{command:ot.setStyle,args:[C]}];var M=[];try{if(!o.deepEqual(w.version,C.version))return[{command:ot.setStyle,args:[C]}];o.deepEqual(w.center,C.center)||M.push({command:ot.setCenter,args:[C.center]}),o.deepEqual(w.zoom,C.zoom)||M.push({command:ot.setZoom,args:[C.zoom]}),o.deepEqual(w.bearing,C.bearing)||M.push({command:ot.setBearing,args:[C.bearing]}),o.deepEqual(w.pitch,C.pitch)||M.push({command:ot.setPitch,args:[C.pitch]}),o.deepEqual(w.sprite,C.sprite)||M.push({command:ot.setSprite,args:[C.sprite]}),o.deepEqual(w.glyphs,C.glyphs)||M.push({command:ot.setGlyphs,args:[C.glyphs]}),o.deepEqual(w.transition,C.transition)||M.push({command:ot.setTransition,args:[C.transition]}),o.deepEqual(w.light,C.light)||M.push({command:ot.setLight,args:[C.light]});var N={},K=[];(function(J,ce,ue,ve){var ae;for(ae in ce=ce||{},J=J||{})J.hasOwnProperty(ae)&&(ce.hasOwnProperty(ae)||ct(ae,ue,ve));for(ae in ce)ce.hasOwnProperty(ae)&&(J.hasOwnProperty(ae)?o.deepEqual(J[ae],ce[ae])||(J[ae].type==="geojson"&&ce[ae].type==="geojson"&&Gr(J,ce,ae)?ue.push({command:ot.setGeoJSONSourceData,args:[ae,ce[ae].data]}):mr(ae,ce,ue,ve)):or(ae,ce,ue))})(w.sources,C.sources,K,N);var X=[];w.layers&&w.layers.forEach(function(J){N[J.source]?M.push({command:ot.removeLayer,args:[J.id]}):X.push(J)}),M=M.concat(K),function(J,ce,ue){ce=ce||[];var ve,ae,ge,we,Ae,Ne,De,Fe=(J=J||[]).map(Ir),Ke=ce.map(Ir),et=J.reduce(vr,{}),Qe=ce.reduce(vr,{}),dt=Fe.slice(),kt=Object.create(null);for(ve=0,ae=0;ve<Fe.length;ve++)Qe.hasOwnProperty(ge=Fe[ve])?ae++:(ue.push({command:ot.removeLayer,args:[ge]}),dt.splice(dt.indexOf(ge,ae),1));for(ve=0,ae=0;ve<Ke.length;ve++)dt[dt.length-1-ve]!==(ge=Ke[Ke.length-1-ve])&&(et.hasOwnProperty(ge)?(ue.push({command:ot.removeLayer,args:[ge]}),dt.splice(dt.lastIndexOf(ge,dt.length-ae),1)):ae++,ue.push({command:ot.addLayer,args:[Qe[ge],Ne=dt[dt.length-ve]]}),dt.splice(dt.length-ve,0,ge),kt[ge]=!0);for(ve=0;ve<Ke.length;ve++)if(we=et[ge=Ke[ve]],Ae=Qe[ge],!kt[ge]&&!o.deepEqual(we,Ae))if(o.deepEqual(we.source,Ae.source)&&o.deepEqual(we["source-layer"],Ae["source-layer"])&&o.deepEqual(we.type,Ae.type)){for(De in ur(we.layout,Ae.layout,ue,ge,null,ot.setLayoutProperty),ur(we.paint,Ae.paint,ue,ge,null,ot.setPaintProperty),o.deepEqual(we.filter,Ae.filter)||ue.push({command:ot.setFilter,args:[ge,Ae.filter]}),o.deepEqual(we.minzoom,Ae.minzoom)&&o.deepEqual(we.maxzoom,Ae.maxzoom)||ue.push({command:ot.setLayerZoomRange,args:[ge,Ae.minzoom,Ae.maxzoom]}),we)we.hasOwnProperty(De)&&De!=="layout"&&De!=="paint"&&De!=="filter"&&De!=="metadata"&&De!=="minzoom"&&De!=="maxzoom"&&(De.indexOf("paint.")===0?ur(we[De],Ae[De],ue,ge,De.slice(6),ot.setPaintProperty):o.deepEqual(we[De],Ae[De])||ue.push({command:ot.setLayerProperty,args:[ge,De,Ae[De]]}));for(De in Ae)Ae.hasOwnProperty(De)&&!we.hasOwnProperty(De)&&De!=="layout"&&De!=="paint"&&De!=="filter"&&De!=="metadata"&&De!=="minzoom"&&De!=="maxzoom"&&(De.indexOf("paint.")===0?ur(we[De],Ae[De],ue,ge,De.slice(6),ot.setPaintProperty):o.deepEqual(we[De],Ae[De])||ue.push({command:ot.setLayerProperty,args:[ge,De,Ae[De]]}))}else ue.push({command:ot.removeLayer,args:[ge]}),Ne=dt[dt.lastIndexOf(ge)+1],ue.push({command:ot.addLayer,args:[Ae,Ne]})}(X,C.layers,M)}catch(J){console.warn("Unable to compute style diff:",J),M=[{command:ot.setStyle,args:[C]}]}return M}(this.serialize(),u).filter(function(w){return!(w.command in Ia)});if(g.length===0)return!1;var b=g.filter(function(w){return!(w.command in Ta)});if(b.length>0)throw new Error("Unimplemented: "+b.map(function(w){return w.command}).join(", ")+".");return g.forEach(function(w){w.command!=="setTransition"&&d[w.command].apply(d,w.args)}),this.stylesheet=u,!0},p.prototype.addImage=function(u,d){if(this.getImage(u))return this.fire(new o.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(u,d),this._afterImageUpdated(u)},p.prototype.updateImage=function(u,d){this.imageManager.updateImage(u,d)},p.prototype.getImage=function(u){return this.imageManager.getImage(u)},p.prototype.removeImage=function(u){if(!this.getImage(u))return this.fire(new o.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(u),this._afterImageUpdated(u)},p.prototype._afterImageUpdated=function(u){this._availableImages=this.imageManager.listImages(),this._changedImages[u]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new o.Event("data",{dataType:"style"}))},p.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},p.prototype.addSource=function(u,d,g){var b=this;if(g===void 0&&(g={}),this._checkLoaded(),this.sourceCaches[u]!==void 0)throw new Error("There is already a source with this ID");if(!d.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(d).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(d.type)>=0&&this._validate(o.validateStyle.source,"sources."+u,d,null,g))){this.map&&this.map._collectResourceTiming&&(d.collectResourceTiming=!0);var w=this.sourceCaches[u]=new ie(u,d,this.dispatcher);w.style=this,w.setEventedParent(this,function(){return{isSourceLoaded:b.loaded(),source:w.serialize(),sourceId:u}}),w.onAdd(this.map),this._changed=!0}},p.prototype.removeSource=function(u){if(this._checkLoaded(),this.sourceCaches[u]===void 0)throw new Error("There is no source with this ID");for(var d in this._layers)if(this._layers[d].source===u)return this.fire(new o.ErrorEvent(new Error('Source "'+u+'" cannot be removed while layer "'+d+'" is using it.')));var g=this.sourceCaches[u];delete this.sourceCaches[u],delete this._updatedSources[u],g.fire(new o.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:u})),g.setEventedParent(null),g.clearTiles(),g.onRemove&&g.onRemove(this.map),this._changed=!0},p.prototype.setGeoJSONSourceData=function(u,d){this._checkLoaded(),this.sourceCaches[u].getSource().setData(d),this._changed=!0},p.prototype.getSource=function(u){return this.sourceCaches[u]&&this.sourceCaches[u].getSource()},p.prototype.addLayer=function(u,d,g){g===void 0&&(g={}),this._checkLoaded();var b=u.id;if(this.getLayer(b))this.fire(new o.ErrorEvent(new Error('Layer with id "'+b+'" already exists on this map')));else{var w;if(u.type==="custom"){if(cs(this,o.validateCustomStyleLayer(u)))return;w=o.createStyleLayer(u)}else{if(typeof u.source=="object"&&(this.addSource(b,u.source),u=o.clone$1(u),u=o.extend(u,{source:b})),this._validate(o.validateStyle.layer,"layers."+b,u,{arrayIndex:-1},g))return;w=o.createStyleLayer(u),this._validateLayer(w),w.setEventedParent(this,{layer:{id:b}}),this._serializedLayers[w.id]=w.serialize()}var C=d?this._order.indexOf(d):this._order.length;if(d&&C===-1)this.fire(new o.ErrorEvent(new Error('Layer with id "'+d+'" does not exist on this map.')));else{if(this._order.splice(C,0,b),this._layerOrderChanged=!0,this._layers[b]=w,this._removedLayers[b]&&w.source&&w.type!=="custom"){var M=this._removedLayers[b];delete this._removedLayers[b],M.type!==w.type?this._updatedSources[w.source]="clear":(this._updatedSources[w.source]="reload",this.sourceCaches[w.source].pause())}this._updateLayer(w),w.onAdd&&w.onAdd(this.map)}}},p.prototype.moveLayer=function(u,d){if(this._checkLoaded(),this._changed=!0,this._layers[u]){if(u!==d){var g=this._order.indexOf(u);this._order.splice(g,1);var b=d?this._order.indexOf(d):this._order.length;d&&b===-1?this.fire(new o.ErrorEvent(new Error('Layer with id "'+d+'" does not exist on this map.'))):(this._order.splice(b,0,u),this._layerOrderChanged=!0)}}else this.fire(new o.ErrorEvent(new Error("The layer '"+u+"' does not exist in the map's style and cannot be moved.")))},p.prototype.removeLayer=function(u){this._checkLoaded();var d=this._layers[u];if(d){d.setEventedParent(null);var g=this._order.indexOf(u);this._order.splice(g,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[u]=d,delete this._layers[u],delete this._serializedLayers[u],delete this._updatedLayers[u],delete this._updatedPaintProps[u],d.onRemove&&d.onRemove(this.map)}else this.fire(new o.ErrorEvent(new Error("The layer '"+u+"' does not exist in the map's style and cannot be removed.")))},p.prototype.getLayer=function(u){return this._layers[u]},p.prototype.hasLayer=function(u){return u in this._layers},p.prototype.setLayerZoomRange=function(u,d,g){this._checkLoaded();var b=this.getLayer(u);b?b.minzoom===d&&b.maxzoom===g||(d!=null&&(b.minzoom=d),g!=null&&(b.maxzoom=g),this._updateLayer(b)):this.fire(new o.ErrorEvent(new Error("The layer '"+u+"' does not exist in the map's style and cannot have zoom extent.")))},p.prototype.setFilter=function(u,d,g){g===void 0&&(g={}),this._checkLoaded();var b=this.getLayer(u);if(b){if(!o.deepEqual(b.filter,d))return d==null?(b.filter=void 0,void this._updateLayer(b)):void(this._validate(o.validateStyle.filter,"layers."+b.id+".filter",d,null,g)||(b.filter=o.clone$1(d),this._updateLayer(b)))}else this.fire(new o.ErrorEvent(new Error("The layer '"+u+"' does not exist in the map's style and cannot be filtered.")))},p.prototype.getFilter=function(u){return o.clone$1(this.getLayer(u).filter)},p.prototype.setLayoutProperty=function(u,d,g,b){b===void 0&&(b={}),this._checkLoaded();var w=this.getLayer(u);w?o.deepEqual(w.getLayoutProperty(d),g)||(w.setLayoutProperty(d,g,b),this._updateLayer(w)):this.fire(new o.ErrorEvent(new Error("The layer '"+u+"' does not exist in the map's style and cannot be styled.")))},p.prototype.getLayoutProperty=function(u,d){var g=this.getLayer(u);if(g)return g.getLayoutProperty(d);this.fire(new o.ErrorEvent(new Error("The layer '"+u+"' does not exist in the map's style.")))},p.prototype.setPaintProperty=function(u,d,g,b){b===void 0&&(b={}),this._checkLoaded();var w=this.getLayer(u);w?o.deepEqual(w.getPaintProperty(d),g)||(w.setPaintProperty(d,g,b)&&this._updateLayer(w),this._changed=!0,this._updatedPaintProps[u]=!0):this.fire(new o.ErrorEvent(new Error("The layer '"+u+"' does not exist in the map's style and cannot be styled.")))},p.prototype.getPaintProperty=function(u,d){return this.getLayer(u).getPaintProperty(d)},p.prototype.setFeatureState=function(u,d){this._checkLoaded();var g=u.source,b=u.sourceLayer,w=this.sourceCaches[g];if(w!==void 0){var C=w.getSource().type;C==="geojson"&&b?this.fire(new o.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):C!=="vector"||b?(u.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided."))),w.setFeatureState(b,u.id,d)):this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error("The source '"+g+"' does not exist in the map's style.")))},p.prototype.removeFeatureState=function(u,d){this._checkLoaded();var g=u.source,b=this.sourceCaches[g];if(b!==void 0){var w=b.getSource().type,C=w==="vector"?u.sourceLayer:void 0;w!=="vector"||C?d&&typeof u.id!="string"&&typeof u.id!="number"?this.fire(new o.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):b.removeFeatureState(C,u.id,d):this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error("The source '"+g+"' does not exist in the map's style.")))},p.prototype.getFeatureState=function(u){this._checkLoaded();var d=u.source,g=u.sourceLayer,b=this.sourceCaches[d];if(b!==void 0){if(b.getSource().type!=="vector"||g)return u.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided."))),b.getFeatureState(g,u.id);this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error("The source '"+d+"' does not exist in the map's style.")))},p.prototype.getTransition=function(){return o.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},p.prototype.serialize=function(){return o.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:o.mapObject(this.sourceCaches,function(u){return u.serialize()}),layers:this._serializeLayers(this._order)},function(u){return u!==void 0})},p.prototype._updateLayer=function(u){this._updatedLayers[u.id]=!0,u.source&&!this._updatedSources[u.source]&&this.sourceCaches[u.source].getSource().type!=="raster"&&(this._updatedSources[u.source]="reload",this.sourceCaches[u.source].pause()),this._changed=!0},p.prototype._flattenAndSortRenderedFeatures=function(u){for(var d=this,g=function(et){return d._layers[et].type==="fill-extrusion"},b={},w=[],C=this._order.length-1;C>=0;C--){var M=this._order[C];if(g(M)){b[M]=C;for(var N=0,K=u;N<K.length;N+=1){var X=K[N][M];if(X)for(var J=0,ce=X;J<ce.length;J+=1)w.push(ce[J])}}}w.sort(function(et,Qe){return Qe.intersectionZ-et.intersectionZ});for(var ue=[],ve=this._order.length-1;ve>=0;ve--){var ae=this._order[ve];if(g(ae))for(var ge=w.length-1;ge>=0;ge--){var we=w[ge].feature;if(b[we.layer.id]<ve)break;ue.push(we),w.pop()}else for(var Ae=0,Ne=u;Ae<Ne.length;Ae+=1){var De=Ne[Ae][ae];if(De)for(var Fe=0,Ke=De;Fe<Ke.length;Fe+=1)ue.push(Ke[Fe].feature)}}return ue},p.prototype.queryRenderedFeatures=function(u,d,g){d&&d.filter&&this._validate(o.validateStyle.filter,"queryRenderedFeatures.filter",d.filter,null,d);var b={};if(d&&d.layers){if(!Array.isArray(d.layers))return this.fire(new o.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var w=0,C=d.layers;w<C.length;w+=1){var M=C[w],N=this._layers[M];if(!N)return this.fire(new o.ErrorEvent(new Error("The layer '"+M+"' does not exist in the map's style and cannot be queried for features."))),[];b[N.source]=!0}}var K=[];for(var X in d.availableImages=this._availableImages,this.sourceCaches)d.layers&&!b[X]||K.push(It(this.sourceCaches[X],this._layers,this._serializedLayers,u,d,g));return this.placement&&K.push(function(J,ce,ue,ve,ae,ge,we){for(var Ae={},Ne=ge.queryRenderedSymbols(ve),De=[],Fe=0,Ke=Object.keys(Ne).map(Number);Fe<Ke.length;Fe+=1)De.push(we[Ke[Fe]]);De.sort(Ot);for(var et=function(){var At=dt[Qe],xr=At.featureIndex.lookupSymbolFeatures(Ne[At.bucketInstanceId],ce,At.bucketIndex,At.sourceLayerIndex,ae.filter,ae.layers,ae.availableImages,J);for(var mt in xr){var Gt=Ae[mt]=Ae[mt]||[],rr=xr[mt];rr.sort(function(Jt,Ut){var Nt=At.featureSortOrder;if(Nt){var $n=Nt.indexOf(Jt.featureIndex);return Nt.indexOf(Ut.featureIndex)-$n}return Ut.featureIndex-Jt.featureIndex});for(var Wt=0,Vt=rr;Wt<Vt.length;Wt+=1)Gt.push(Vt[Wt])}},Qe=0,dt=De;Qe<dt.length;Qe+=1)et();var kt=function(At){Ae[At].forEach(function(xr){var mt=xr.feature,Gt=ue[J[At].source].getFeatureState(mt.layer["source-layer"],mt.id);mt.source=mt.layer.source,mt.layer["source-layer"]&&(mt.sourceLayer=mt.layer["source-layer"]),mt.state=Gt})};for(var Mt in Ae)kt(Mt);return Ae}(this._layers,this._serializedLayers,this.sourceCaches,u,d,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(K)},p.prototype.querySourceFeatures=function(u,d){d&&d.filter&&this._validate(o.validateStyle.filter,"querySourceFeatures.filter",d.filter,null,d);var g=this.sourceCaches[u];return g?function(b,w){for(var C=b.getRenderableIds().map(function(ce){return b.getTileByID(ce)}),M=[],N={},K=0;K<C.length;K++){var X=C[K],J=X.tileID.canonical.key;N[J]||(N[J]=!0,X.querySourceFeatures(M,w))}return M}(g,d):[]},p.prototype.addSourceType=function(u,d,g){return p.getSourceType(u)?g(new Error('A source type called "'+u+'" already exists.')):(p.setSourceType(u,d),d.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:u,url:d.workerSourceURL},g):g(null,null))},p.prototype.getLight=function(){return this.light.getLight()},p.prototype.setLight=function(u,d){d===void 0&&(d={}),this._checkLoaded();var g=this.light.getLight(),b=!1;for(var w in u)if(!o.deepEqual(u[w],g[w])){b=!0;break}if(b){var C={now:o.browser.now(),transition:o.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(u,d),this.light.updateTransitions(C)}},p.prototype._validate=function(u,d,g,b,w){return w===void 0&&(w={}),(!w||w.validate!==!1)&&cs(this,u.call(o.validateStyle,o.extend({key:d,style:this.serialize(),value:g,styleSpec:o.styleSpec},b)))},p.prototype._remove=function(){for(var u in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),o.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[u].setEventedParent(null);for(var d in this.sourceCaches)this.sourceCaches[d].clearTiles(),this.sourceCaches[d].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},p.prototype._clearSource=function(u){this.sourceCaches[u].clearTiles()},p.prototype._reloadSource=function(u){this.sourceCaches[u].resume(),this.sourceCaches[u].reload()},p.prototype._updateSources=function(u){for(var d in this.sourceCaches)this.sourceCaches[d].update(u)},p.prototype._generateCollisionBoxes=function(){for(var u in this.sourceCaches)this._reloadSource(u)},p.prototype._updatePlacement=function(u,d,g,b,w){w===void 0&&(w=!1);for(var C=!1,M=!1,N={},K=0,X=this._order;K<X.length;K+=1){var J=this._layers[X[K]];if(J.type==="symbol"){if(!N[J.source]){var ce=this.sourceCaches[J.source];N[J.source]=ce.getRenderableIds(!0).map(function(we){return ce.getTileByID(we)}).sort(function(we,Ae){return Ae.tileID.overscaledZ-we.tileID.overscaledZ||(we.tileID.isLessThan(Ae.tileID)?-1:1)})}var ue=this.crossTileSymbolIndex.addLayer(J,N[J.source],u.center.lng);C=C||ue}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((w=w||this._layerOrderChanged||g===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(o.browser.now(),u.zoom))&&(this.pauseablePlacement=new ql(u,this._order,w,d,g,b,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,N),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(o.browser.now()),M=!0),C&&this.pauseablePlacement.placement.setStale()),M||C)for(var ve=0,ae=this._order;ve<ae.length;ve+=1){var ge=this._layers[ae[ve]];ge.type==="symbol"&&this.placement.updateLayerOpacities(ge,N[ge.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(o.browser.now())},p.prototype._releaseSymbolFadeTiles=function(){for(var u in this.sourceCaches)this.sourceCaches[u].releaseSymbolFadeTiles()},p.prototype.getImages=function(u,d,g){this.imageManager.getImages(d.icons,g),this._updateTilesForChangedImages();var b=this.sourceCaches[d.source];b&&b.setDependencies(d.tileID.key,d.type,d.icons)},p.prototype.getGlyphs=function(u,d,g){this.glyphManager.getGlyphs(d.stacks,g)},p.prototype.getResource=function(u,d,g){return o.makeRequest(d,g)},p}(o.Evented);Ui.getSourceType=function(l){return qe[l]},Ui.setSourceType=function(l,p){qe[l]=p},Ui.registerForPluginStateChange=o.registerForPluginStateChange;var Mn=o.createLayout([{name:"a_pos",type:"Int16",components:2}]),Xs=Hr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),Tf=Hr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Ov=Hr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Bv=Hr(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),Jp=Hr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Qp=Hr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),eh=Hr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),th=Hr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),If=Hr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),Pf=Hr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),Nv=Hr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),Wl=Hr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Gl=Hr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Af=Hr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),si=Hr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),rh=Hr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),Pa=Hr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Aa=Hr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),ps=Hr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),hs=Hr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Ma=Hr(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),ds=Hr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),fs=Hr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),Ra=Hr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),Mf=Hr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),Rf=Hr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function Hr(l,p){var u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,d=p.match(/attribute ([\w]+) ([\w]+)/g),g=l.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),b=p.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),w=b?b.concat(g):g,C={};return{fragmentSource:l=l.replace(u,function(M,N,K,X,J){return C[J]=!0,N==="define"?`
#ifndef HAS_UNIFORM_u_`+J+`
varying `+K+" "+X+" "+J+`;
#else
uniform `+K+" "+X+" u_"+J+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+J+`
    `+K+" "+X+" "+J+" = u_"+J+`;
#endif
`}),vertexSource:p=p.replace(u,function(M,N,K,X,J){var ce=X==="float"?"vec2":"vec4",ue=J.match(/color/)?"color":ce;return C[J]?N==="define"?`
#ifndef HAS_UNIFORM_u_`+J+`
uniform lowp float u_`+J+`_t;
attribute `+K+" "+ce+" a_"+J+`;
varying `+K+" "+X+" "+J+`;
#else
uniform `+K+" "+X+" u_"+J+`;
#endif
`:ue==="vec4"?`
#ifndef HAS_UNIFORM_u_`+J+`
    `+J+" = a_"+J+`;
#else
    `+K+" "+X+" "+J+" = u_"+J+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+J+`
    `+J+" = unpack_mix_"+ue+"(a_"+J+", u_"+J+`_t);
#else
    `+K+" "+X+" "+J+" = u_"+J+`;
#endif
`:N==="define"?`
#ifndef HAS_UNIFORM_u_`+J+`
uniform lowp float u_`+J+`_t;
attribute `+K+" "+ce+" a_"+J+`;
#else
uniform `+K+" "+X+" u_"+J+`;
#endif
`:ue==="vec4"?`
#ifndef HAS_UNIFORM_u_`+J+`
    `+K+" "+X+" "+J+" = a_"+J+`;
#else
    `+K+" "+X+" "+J+" = u_"+J+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+J+`
    `+K+" "+X+" "+J+" = unpack_mix_"+ue+"(a_"+J+", u_"+J+`_t);
#else
    `+K+" "+X+" "+J+" = u_"+J+`;
#endif
`}),staticAttributes:d,staticUniforms:w}}var Fv=Object.freeze({__proto__:null,prelude:Xs,background:Tf,backgroundPattern:Ov,circle:Bv,clippingMask:Jp,heatmap:Qp,heatmapTexture:eh,collisionBox:th,collisionCircle:If,debug:Pf,fill:Nv,fillOutline:Wl,fillOutlinePattern:Gl,fillPattern:Af,fillExtrusion:si,fillExtrusionPattern:rh,hillshadePrepare:Pa,hillshade:Aa,line:ps,lineGradient:hs,linePattern:Ma,lineSDF:ds,raster:fs,symbolIcon:Ra,symbolSDF:Mf,symbolTextAndIcon:Rf}),Zu=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function Lf(l){for(var p=[],u=0;u<l.length;u++)if(l[u]!==null){var d=l[u].split(" ");p.push(d.pop())}return p}Zu.prototype.bind=function(l,p,u,d,g,b,w,C){this.context=l;for(var M=this.boundPaintVertexBuffers.length!==d.length,N=0;!M&&N<d.length;N++)this.boundPaintVertexBuffers[N]!==d[N]&&(M=!0);l.extVertexArrayObject&&this.vao&&this.boundProgram===p&&this.boundLayoutVertexBuffer===u&&!M&&this.boundIndexBuffer===g&&this.boundVertexOffset===b&&this.boundDynamicVertexBuffer===w&&this.boundDynamicVertexBuffer2===C?(l.bindVertexArrayOES.set(this.vao),w&&w.bind(),g&&g.dynamicDraw&&g.bind(),C&&C.bind()):this.freshBind(p,u,d,g,b,w,C)},Zu.prototype.freshBind=function(l,p,u,d,g,b,w){var C,M=l.numAttributes,N=this.context,K=N.gl;if(N.extVertexArrayObject)this.vao&&this.destroy(),this.vao=N.extVertexArrayObject.createVertexArrayOES(),N.bindVertexArrayOES.set(this.vao),C=0,this.boundProgram=l,this.boundLayoutVertexBuffer=p,this.boundPaintVertexBuffers=u,this.boundIndexBuffer=d,this.boundVertexOffset=g,this.boundDynamicVertexBuffer=b,this.boundDynamicVertexBuffer2=w;else{C=N.currentNumAttributes||0;for(var X=M;X<C;X++)K.disableVertexAttribArray(X)}p.enableAttributes(K,l);for(var J=0,ce=u;J<ce.length;J+=1)ce[J].enableAttributes(K,l);b&&b.enableAttributes(K,l),w&&w.enableAttributes(K,l),p.bind(),p.setVertexAttribPointers(K,l,g);for(var ue=0,ve=u;ue<ve.length;ue+=1){var ae=ve[ue];ae.bind(),ae.setVertexAttribPointers(K,l,g)}b&&(b.bind(),b.setVertexAttribPointers(K,l,g)),d&&d.bind(),w&&(w.bind(),w.setVertexAttribPointers(K,l,g)),N.currentNumAttributes=M},Zu.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var zf=function(l,p,u,d,g,b){var w=l.gl;this.program=w.createProgram();for(var C=Lf(u.staticAttributes),M=d?d.getBinderAttributes():[],N=C.concat(M),K=u.staticUniforms?Lf(u.staticUniforms):[],X=d?d.getBinderUniforms():[],J=[],ce=0,ue=K.concat(X);ce<ue.length;ce+=1){var ve=ue[ce];J.indexOf(ve)<0&&J.push(ve)}var ae=d?d.defines():[];b&&ae.push("#define OVERDRAW_INSPECTOR;");var ge=ae.concat(Xs.fragmentSource,u.fragmentSource).join(`
`),we=ae.concat(Xs.vertexSource,u.vertexSource).join(`
`),Ae=w.createShader(w.FRAGMENT_SHADER);if(w.isContextLost())this.failedToCreate=!0;else{w.shaderSource(Ae,ge),w.compileShader(Ae),w.attachShader(this.program,Ae);var Ne=w.createShader(w.VERTEX_SHADER);if(w.isContextLost())this.failedToCreate=!0;else{w.shaderSource(Ne,we),w.compileShader(Ne),w.attachShader(this.program,Ne),this.attributes={};var De={};this.numAttributes=N.length;for(var Fe=0;Fe<this.numAttributes;Fe++)N[Fe]&&(w.bindAttribLocation(this.program,Fe,N[Fe]),this.attributes[N[Fe]]=Fe);w.linkProgram(this.program),w.deleteShader(Ne),w.deleteShader(Ae);for(var Ke=0;Ke<J.length;Ke++){var et=J[Ke];if(et&&!De[et]){var Qe=w.getUniformLocation(this.program,et);Qe&&(De[et]=Qe)}}this.fixedUniforms=g(l,De),this.binderUniforms=d?d.getUniforms(l,De):[]}}};function Df(l,p,u){var d=1/an(u,1,p.transform.tileZoom),g=Math.pow(2,u.tileID.overscaledZ),b=u.tileSize*Math.pow(2,p.transform.tileZoom)/g,w=b*(u.tileID.canonical.x+u.tileID.wrap*g),C=b*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_scale:[d,l.fromScale,l.toScale],u_fade:l.t,u_pixel_coord_upper:[w>>16,C>>16],u_pixel_coord_lower:[65535&w,65535&C]}}zf.prototype.draw=function(l,p,u,d,g,b,w,C,M,N,K,X,J,ce,ue,ve){var ae,ge=l.gl;if(!this.failedToCreate){for(var we in l.program.set(this.program),l.setDepthMode(u),l.setStencilMode(d),l.setColorMode(g),l.setCullFace(b),this.fixedUniforms)this.fixedUniforms[we].set(w[we]);ce&&ce.setUniforms(l,this.binderUniforms,X,{zoom:J});for(var Ae=(ae={},ae[ge.LINES]=2,ae[ge.TRIANGLES]=3,ae[ge.LINE_STRIP]=1,ae)[p],Ne=0,De=K.get();Ne<De.length;Ne+=1){var Fe=De[Ne],Ke=Fe.vaos||(Fe.vaos={});(Ke[C]||(Ke[C]=new Zu)).bind(l,this,M,ce?ce.getPaintVertexBuffers():[],N,Fe.vertexOffset,ue,ve),ge.drawElements(p,Fe.primitiveLength*Ae,ge.UNSIGNED_SHORT,Fe.primitiveOffset*Ae*2)}}};var Of=function(l,p,u,d){var g=p.style.light,b=g.properties.get("position"),w=[b.x,b.y,b.z],C=o.create$1();g.properties.get("anchor")==="viewport"&&o.fromRotation(C,-p.transform.angle),o.transformMat3(w,w,C);var M=g.properties.get("color");return{u_matrix:l,u_lightpos:w,u_lightintensity:g.properties.get("intensity"),u_lightcolor:[M.r,M.g,M.b],u_vertical_gradient:+u,u_opacity:d}},ms=function(l,p,u,d,g,b,w){return o.extend(Of(l,p,u,d),Df(b,p,w),{u_height_factor:-Math.pow(2,g.overscaledZ)/w.tileSize/8})},La=function(l){return{u_matrix:l}},ys=function(l,p,u,d){return o.extend(La(l),Df(u,p,d))},Bf=function(l,p){return{u_matrix:l,u_world:p}},Nf=function(l,p,u,d,g){return o.extend(ys(l,p,u,d),{u_world:g})},nh=function(l,p,u,d){var g,b,w=l.transform;if(d.paint.get("circle-pitch-alignment")==="map"){var C=an(u,1,w.zoom);g=!0,b=[C,C]}else g=!1,b=w.pixelsToGLUnits;return{u_camera_to_center_distance:w.cameraToCenterDistance,u_scale_with_map:+(d.paint.get("circle-pitch-scale")==="map"),u_matrix:l.translatePosMatrix(p.posMatrix,u,d.paint.get("circle-translate"),d.paint.get("circle-translate-anchor")),u_pitch_with_map:+g,u_device_pixel_ratio:o.browser.devicePixelRatio,u_extrude_scale:b}},gs=function(l,p,u){var d=an(u,1,p.zoom),g=Math.pow(2,p.zoom-u.tileID.overscaledZ),b=u.tileID.overscaleFactor();return{u_matrix:l,u_camera_to_center_distance:p.cameraToCenterDistance,u_pixels_to_tile_units:d,u_extrude_scale:[p.pixelsToGLUnits[0]/(d*g),p.pixelsToGLUnits[1]/(d*g)],u_overscale_factor:b}},Ff=function(l,p,u){return{u_matrix:l,u_inv_matrix:p,u_camera_to_center_distance:u.cameraToCenterDistance,u_viewport_size:[u.width,u.height]}},vs=function(l,p,u){return u===void 0&&(u=1),{u_matrix:l,u_color:p,u_overlay:0,u_overlay_scale:u}},_s=function(l){return{u_matrix:l}},jf=function(l,p,u,d){return{u_matrix:l,u_extrude_scale:an(p,1,u),u_intensity:d}},Hl=function(l,p,u){var d=l.transform;return{u_matrix:Uf(l,p,u),u_ratio:1/an(p,1,d.zoom),u_device_pixel_ratio:o.browser.devicePixelRatio,u_units_to_pixels:[1/d.pixelsToGLUnits[0],1/d.pixelsToGLUnits[1]]}},Yr=function(l,p,u,d){return o.extend(Hl(l,p,u),{u_image:0,u_image_height:d})},Ku=function(l,p,u,d){var g=l.transform,b=Ys(p,g);return{u_matrix:Uf(l,p,u),u_texsize:p.imageAtlasTexture.size,u_ratio:1/an(p,1,g.zoom),u_device_pixel_ratio:o.browser.devicePixelRatio,u_image:0,u_scale:[b,d.fromScale,d.toScale],u_fade:d.t,u_units_to_pixels:[1/g.pixelsToGLUnits[0],1/g.pixelsToGLUnits[1]]}},jv=function(l,p,u,d,g){var b=l.lineAtlas,w=Ys(p,l.transform),C=u.layout.get("line-cap")==="round",M=b.getDash(d.from,C),N=b.getDash(d.to,C),K=M.width*g.fromScale,X=N.width*g.toScale;return o.extend(Hl(l,p,u),{u_patternscale_a:[w/K,-M.height/2],u_patternscale_b:[w/X,-N.height/2],u_sdfgamma:b.width/(256*Math.min(K,X)*o.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:M.y,u_tex_y_b:N.y,u_mix:g.t})};function Ys(l,p){return 1/an(l,1,p.tileZoom)}function Uf(l,p,u){return l.translatePosMatrix(p.tileID.posMatrix,p,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}var Uv=function(l,p,u,d,g){return{u_matrix:l,u_tl_parent:p,u_scale_parent:u,u_buffer_scale:1,u_fade_t:d.mix,u_opacity:d.opacity*g.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:g.paint.get("raster-brightness-min"),u_brightness_high:g.paint.get("raster-brightness-max"),u_saturation_factor:(w=g.paint.get("raster-saturation"),w>0?1-1/(1.001-w):-w),u_contrast_factor:(b=g.paint.get("raster-contrast"),b>0?1/(1-b):1+b),u_spin_weights:$f(g.paint.get("raster-hue-rotate"))};var b,w};function $f(l){l*=Math.PI/180;var p=Math.sin(l),u=Math.cos(l);return[(2*u+1)/3,(-Math.sqrt(3)*p-u+1)/3,(Math.sqrt(3)*p-u+1)/3]}var Xu,Js=function(l,p,u,d,g,b,w,C,M,N){var K=g.transform;return{u_is_size_zoom_constant:+(l==="constant"||l==="source"),u_is_size_feature_constant:+(l==="constant"||l==="camera"),u_size_t:p?p.uSizeT:0,u_size:p?p.uSize:0,u_camera_to_center_distance:K.cameraToCenterDistance,u_pitch:K.pitch/360*2*Math.PI,u_rotate_symbol:+u,u_aspect_ratio:K.width/K.height,u_fade_change:g.options.fadeDuration?g.symbolFadeChange:1,u_matrix:b,u_label_plane_matrix:w,u_coord_matrix:C,u_is_text:+M,u_pitch_with_map:+d,u_texsize:N,u_texture:0}},Zl=function(l,p,u,d,g,b,w,C,M,N,K){var X=g.transform;return o.extend(Js(l,p,u,d,g,b,w,C,M,N),{u_gamma_scale:d?Math.cos(X._pitch)*X.cameraToCenterDistance:1,u_device_pixel_ratio:o.browser.devicePixelRatio,u_is_halo:+K})},Yu=function(l,p,u,d,g,b,w,C,M,N){return o.extend(Zl(l,p,u,d,g,b,w,C,!0,M,!0),{u_texsize_icon:N,u_texture_icon:1})},Kl=function(l,p,u){return{u_matrix:l,u_opacity:p,u_color:u}},Qs=function(l,p,u,d,g,b){return o.extend(function(w,C,M,N){var K=M.imageManager.getPattern(w.from.toString()),X=M.imageManager.getPattern(w.to.toString()),J=M.imageManager.getPixelSize(),ce=J.width,ue=J.height,ve=Math.pow(2,N.tileID.overscaledZ),ae=N.tileSize*Math.pow(2,M.transform.tileZoom)/ve,ge=ae*(N.tileID.canonical.x+N.tileID.wrap*ve),we=ae*N.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:K.tl,u_pattern_br_a:K.br,u_pattern_tl_b:X.tl,u_pattern_br_b:X.br,u_texsize:[ce,ue],u_mix:C.t,u_pattern_size_a:K.displaySize,u_pattern_size_b:X.displaySize,u_scale_a:C.fromScale,u_scale_b:C.toScale,u_tile_units_to_pixels:1/an(N,1,M.transform.tileZoom),u_pixel_coord_upper:[ge>>16,we>>16],u_pixel_coord_lower:[65535&ge,65535&we]}}(d,b,u,g),{u_matrix:l,u_opacity:p})},Vf={fillExtrusion:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_lightpos:new o.Uniform3f(l,p.u_lightpos),u_lightintensity:new o.Uniform1f(l,p.u_lightintensity),u_lightcolor:new o.Uniform3f(l,p.u_lightcolor),u_vertical_gradient:new o.Uniform1f(l,p.u_vertical_gradient),u_opacity:new o.Uniform1f(l,p.u_opacity)}},fillExtrusionPattern:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_lightpos:new o.Uniform3f(l,p.u_lightpos),u_lightintensity:new o.Uniform1f(l,p.u_lightintensity),u_lightcolor:new o.Uniform3f(l,p.u_lightcolor),u_vertical_gradient:new o.Uniform1f(l,p.u_vertical_gradient),u_height_factor:new o.Uniform1f(l,p.u_height_factor),u_image:new o.Uniform1i(l,p.u_image),u_texsize:new o.Uniform2f(l,p.u_texsize),u_pixel_coord_upper:new o.Uniform2f(l,p.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(l,p.u_pixel_coord_lower),u_scale:new o.Uniform3f(l,p.u_scale),u_fade:new o.Uniform1f(l,p.u_fade),u_opacity:new o.Uniform1f(l,p.u_opacity)}},fill:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix)}},fillPattern:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_image:new o.Uniform1i(l,p.u_image),u_texsize:new o.Uniform2f(l,p.u_texsize),u_pixel_coord_upper:new o.Uniform2f(l,p.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(l,p.u_pixel_coord_lower),u_scale:new o.Uniform3f(l,p.u_scale),u_fade:new o.Uniform1f(l,p.u_fade)}},fillOutline:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_world:new o.Uniform2f(l,p.u_world)}},fillOutlinePattern:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_world:new o.Uniform2f(l,p.u_world),u_image:new o.Uniform1i(l,p.u_image),u_texsize:new o.Uniform2f(l,p.u_texsize),u_pixel_coord_upper:new o.Uniform2f(l,p.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(l,p.u_pixel_coord_lower),u_scale:new o.Uniform3f(l,p.u_scale),u_fade:new o.Uniform1f(l,p.u_fade)}},circle:function(l,p){return{u_camera_to_center_distance:new o.Uniform1f(l,p.u_camera_to_center_distance),u_scale_with_map:new o.Uniform1i(l,p.u_scale_with_map),u_pitch_with_map:new o.Uniform1i(l,p.u_pitch_with_map),u_extrude_scale:new o.Uniform2f(l,p.u_extrude_scale),u_device_pixel_ratio:new o.Uniform1f(l,p.u_device_pixel_ratio),u_matrix:new o.UniformMatrix4f(l,p.u_matrix)}},collisionBox:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_camera_to_center_distance:new o.Uniform1f(l,p.u_camera_to_center_distance),u_pixels_to_tile_units:new o.Uniform1f(l,p.u_pixels_to_tile_units),u_extrude_scale:new o.Uniform2f(l,p.u_extrude_scale),u_overscale_factor:new o.Uniform1f(l,p.u_overscale_factor)}},collisionCircle:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_inv_matrix:new o.UniformMatrix4f(l,p.u_inv_matrix),u_camera_to_center_distance:new o.Uniform1f(l,p.u_camera_to_center_distance),u_viewport_size:new o.Uniform2f(l,p.u_viewport_size)}},debug:function(l,p){return{u_color:new o.UniformColor(l,p.u_color),u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_overlay:new o.Uniform1i(l,p.u_overlay),u_overlay_scale:new o.Uniform1f(l,p.u_overlay_scale)}},clippingMask:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix)}},heatmap:function(l,p){return{u_extrude_scale:new o.Uniform1f(l,p.u_extrude_scale),u_intensity:new o.Uniform1f(l,p.u_intensity),u_matrix:new o.UniformMatrix4f(l,p.u_matrix)}},heatmapTexture:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_world:new o.Uniform2f(l,p.u_world),u_image:new o.Uniform1i(l,p.u_image),u_color_ramp:new o.Uniform1i(l,p.u_color_ramp),u_opacity:new o.Uniform1f(l,p.u_opacity)}},hillshade:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_image:new o.Uniform1i(l,p.u_image),u_latrange:new o.Uniform2f(l,p.u_latrange),u_light:new o.Uniform2f(l,p.u_light),u_shadow:new o.UniformColor(l,p.u_shadow),u_highlight:new o.UniformColor(l,p.u_highlight),u_accent:new o.UniformColor(l,p.u_accent)}},hillshadePrepare:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_image:new o.Uniform1i(l,p.u_image),u_dimension:new o.Uniform2f(l,p.u_dimension),u_zoom:new o.Uniform1f(l,p.u_zoom),u_unpack:new o.Uniform4f(l,p.u_unpack)}},line:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_ratio:new o.Uniform1f(l,p.u_ratio),u_device_pixel_ratio:new o.Uniform1f(l,p.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(l,p.u_units_to_pixels)}},lineGradient:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_ratio:new o.Uniform1f(l,p.u_ratio),u_device_pixel_ratio:new o.Uniform1f(l,p.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(l,p.u_units_to_pixels),u_image:new o.Uniform1i(l,p.u_image),u_image_height:new o.Uniform1f(l,p.u_image_height)}},linePattern:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_texsize:new o.Uniform2f(l,p.u_texsize),u_ratio:new o.Uniform1f(l,p.u_ratio),u_device_pixel_ratio:new o.Uniform1f(l,p.u_device_pixel_ratio),u_image:new o.Uniform1i(l,p.u_image),u_units_to_pixels:new o.Uniform2f(l,p.u_units_to_pixels),u_scale:new o.Uniform3f(l,p.u_scale),u_fade:new o.Uniform1f(l,p.u_fade)}},lineSDF:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_ratio:new o.Uniform1f(l,p.u_ratio),u_device_pixel_ratio:new o.Uniform1f(l,p.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(l,p.u_units_to_pixels),u_patternscale_a:new o.Uniform2f(l,p.u_patternscale_a),u_patternscale_b:new o.Uniform2f(l,p.u_patternscale_b),u_sdfgamma:new o.Uniform1f(l,p.u_sdfgamma),u_image:new o.Uniform1i(l,p.u_image),u_tex_y_a:new o.Uniform1f(l,p.u_tex_y_a),u_tex_y_b:new o.Uniform1f(l,p.u_tex_y_b),u_mix:new o.Uniform1f(l,p.u_mix)}},raster:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_tl_parent:new o.Uniform2f(l,p.u_tl_parent),u_scale_parent:new o.Uniform1f(l,p.u_scale_parent),u_buffer_scale:new o.Uniform1f(l,p.u_buffer_scale),u_fade_t:new o.Uniform1f(l,p.u_fade_t),u_opacity:new o.Uniform1f(l,p.u_opacity),u_image0:new o.Uniform1i(l,p.u_image0),u_image1:new o.Uniform1i(l,p.u_image1),u_brightness_low:new o.Uniform1f(l,p.u_brightness_low),u_brightness_high:new o.Uniform1f(l,p.u_brightness_high),u_saturation_factor:new o.Uniform1f(l,p.u_saturation_factor),u_contrast_factor:new o.Uniform1f(l,p.u_contrast_factor),u_spin_weights:new o.Uniform3f(l,p.u_spin_weights)}},symbolIcon:function(l,p){return{u_is_size_zoom_constant:new o.Uniform1i(l,p.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(l,p.u_is_size_feature_constant),u_size_t:new o.Uniform1f(l,p.u_size_t),u_size:new o.Uniform1f(l,p.u_size),u_camera_to_center_distance:new o.Uniform1f(l,p.u_camera_to_center_distance),u_pitch:new o.Uniform1f(l,p.u_pitch),u_rotate_symbol:new o.Uniform1i(l,p.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(l,p.u_aspect_ratio),u_fade_change:new o.Uniform1f(l,p.u_fade_change),u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(l,p.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(l,p.u_coord_matrix),u_is_text:new o.Uniform1i(l,p.u_is_text),u_pitch_with_map:new o.Uniform1i(l,p.u_pitch_with_map),u_texsize:new o.Uniform2f(l,p.u_texsize),u_texture:new o.Uniform1i(l,p.u_texture)}},symbolSDF:function(l,p){return{u_is_size_zoom_constant:new o.Uniform1i(l,p.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(l,p.u_is_size_feature_constant),u_size_t:new o.Uniform1f(l,p.u_size_t),u_size:new o.Uniform1f(l,p.u_size),u_camera_to_center_distance:new o.Uniform1f(l,p.u_camera_to_center_distance),u_pitch:new o.Uniform1f(l,p.u_pitch),u_rotate_symbol:new o.Uniform1i(l,p.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(l,p.u_aspect_ratio),u_fade_change:new o.Uniform1f(l,p.u_fade_change),u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(l,p.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(l,p.u_coord_matrix),u_is_text:new o.Uniform1i(l,p.u_is_text),u_pitch_with_map:new o.Uniform1i(l,p.u_pitch_with_map),u_texsize:new o.Uniform2f(l,p.u_texsize),u_texture:new o.Uniform1i(l,p.u_texture),u_gamma_scale:new o.Uniform1f(l,p.u_gamma_scale),u_device_pixel_ratio:new o.Uniform1f(l,p.u_device_pixel_ratio),u_is_halo:new o.Uniform1i(l,p.u_is_halo)}},symbolTextAndIcon:function(l,p){return{u_is_size_zoom_constant:new o.Uniform1i(l,p.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(l,p.u_is_size_feature_constant),u_size_t:new o.Uniform1f(l,p.u_size_t),u_size:new o.Uniform1f(l,p.u_size),u_camera_to_center_distance:new o.Uniform1f(l,p.u_camera_to_center_distance),u_pitch:new o.Uniform1f(l,p.u_pitch),u_rotate_symbol:new o.Uniform1i(l,p.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(l,p.u_aspect_ratio),u_fade_change:new o.Uniform1f(l,p.u_fade_change),u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(l,p.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(l,p.u_coord_matrix),u_is_text:new o.Uniform1i(l,p.u_is_text),u_pitch_with_map:new o.Uniform1i(l,p.u_pitch_with_map),u_texsize:new o.Uniform2f(l,p.u_texsize),u_texsize_icon:new o.Uniform2f(l,p.u_texsize_icon),u_texture:new o.Uniform1i(l,p.u_texture),u_texture_icon:new o.Uniform1i(l,p.u_texture_icon),u_gamma_scale:new o.Uniform1f(l,p.u_gamma_scale),u_device_pixel_ratio:new o.Uniform1f(l,p.u_device_pixel_ratio),u_is_halo:new o.Uniform1i(l,p.u_is_halo)}},background:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_opacity:new o.Uniform1f(l,p.u_opacity),u_color:new o.UniformColor(l,p.u_color)}},backgroundPattern:function(l,p){return{u_matrix:new o.UniformMatrix4f(l,p.u_matrix),u_opacity:new o.Uniform1f(l,p.u_opacity),u_image:new o.Uniform1i(l,p.u_image),u_pattern_tl_a:new o.Uniform2f(l,p.u_pattern_tl_a),u_pattern_br_a:new o.Uniform2f(l,p.u_pattern_br_a),u_pattern_tl_b:new o.Uniform2f(l,p.u_pattern_tl_b),u_pattern_br_b:new o.Uniform2f(l,p.u_pattern_br_b),u_texsize:new o.Uniform2f(l,p.u_texsize),u_mix:new o.Uniform1f(l,p.u_mix),u_pattern_size_a:new o.Uniform2f(l,p.u_pattern_size_a),u_pattern_size_b:new o.Uniform2f(l,p.u_pattern_size_b),u_scale_a:new o.Uniform1f(l,p.u_scale_a),u_scale_b:new o.Uniform1f(l,p.u_scale_b),u_pixel_coord_upper:new o.Uniform2f(l,p.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(l,p.u_pixel_coord_lower),u_tile_units_to_pixels:new o.Uniform1f(l,p.u_tile_units_to_pixels)}}};function el(l,p,u,d,g,b,w){for(var C=l.context,M=C.gl,N=l.useProgram("collisionBox"),K=[],X=0,J=0,ce=0;ce<d.length;ce++){var ue=d[ce],ve=p.getTile(ue),ae=ve.getBucket(u);if(ae){var ge=ue.posMatrix;g[0]===0&&g[1]===0||(ge=l.translatePosMatrix(ue.posMatrix,ve,g,b));var we=w?ae.textCollisionBox:ae.iconCollisionBox,Ae=ae.collisionCircleArray;if(Ae.length>0){var Ne=o.create(),De=ge;o.mul(Ne,ae.placementInvProjMatrix,l.transform.glCoordMatrix),o.mul(Ne,Ne,ae.placementViewportMatrix),K.push({circleArray:Ae,circleOffset:J,transform:De,invTransform:Ne}),J=X+=Ae.length/4}we&&N.draw(C,M.LINES,Y.disabled,re.disabled,l.colorModeForRenderPass(),ye.disabled,gs(ge,l.transform,ve),u.id,we.layoutVertexBuffer,we.indexBuffer,we.segments,null,l.transform.zoom,null,null,we.collisionVertexBuffer)}}if(w&&K.length){var Fe=l.useProgram("collisionCircle"),Ke=new o.StructArrayLayout2f1f2i16;Ke.resize(4*X),Ke._trim();for(var et=0,Qe=0,dt=K;Qe<dt.length;Qe+=1)for(var kt=dt[Qe],Mt=0;Mt<kt.circleArray.length/4;Mt++){var At=4*Mt,xr=kt.circleArray[At+0],mt=kt.circleArray[At+1],Gt=kt.circleArray[At+2],rr=kt.circleArray[At+3];Ke.emplace(et++,xr,mt,Gt,rr,0),Ke.emplace(et++,xr,mt,Gt,rr,1),Ke.emplace(et++,xr,mt,Gt,rr,2),Ke.emplace(et++,xr,mt,Gt,rr,3)}(!Xu||Xu.length<2*X)&&(Xu=function(gn){var hi=2*gn,Qn=new o.StructArrayLayout3ui6;Qn.resize(hi),Qn._trim();for(var fn=0;fn<hi;fn++){var Cn=6*fn;Qn.uint16[Cn+0]=4*fn+0,Qn.uint16[Cn+1]=4*fn+1,Qn.uint16[Cn+2]=4*fn+2,Qn.uint16[Cn+3]=4*fn+2,Qn.uint16[Cn+4]=4*fn+3,Qn.uint16[Cn+5]=4*fn+0}return Qn}(X));for(var Wt=C.createIndexBuffer(Xu,!0),Vt=C.createVertexBuffer(Ke,o.collisionCircleLayout.members,!0),Jt=0,Ut=K;Jt<Ut.length;Jt+=1){var Nt=Ut[Jt],$n=Ff(Nt.transform,Nt.invTransform,l.transform);Fe.draw(C,M.TRIANGLES,Y.disabled,re.disabled,l.colorModeForRenderPass(),ye.disabled,$n,u.id,Vt,Wt,o.SegmentVector.simpleSegment(0,2*Nt.circleOffset,Nt.circleArray.length,Nt.circleArray.length/2),null,l.transform.zoom,null,null,null)}Vt.destroy(),Wt.destroy()}}var Mo=o.identity(new Float32Array(16));function qf(l,p,u,d,g,b){var w=o.getAnchorAlignment(l),C=-(w.horizontalAlign-.5)*p,M=-(w.verticalAlign-.5)*u,N=o.evaluateVariableOffset(l,d);return new o.Point((C/g+N[0])*b,(M/g+N[1])*b)}function Wf(l,p,u,d,g,b,w,C,M,N,K){var X=l.text.placedSymbolArray,J=l.text.dynamicLayoutVertexArray,ce=l.icon.dynamicLayoutVertexArray,ue={};J.clear();for(var ve=0;ve<X.length;ve++){var ae=X.get(ve),ge=ae.hidden||!ae.crossTileID||l.allowVerticalPlacement&&!ae.placedOrientation?null:d[ae.crossTileID];if(ge){var we=new o.Point(ae.anchorX,ae.anchorY),Ae=fr(we,u?C:w),Ne=Pr(b.cameraToCenterDistance,Ae.signedDistanceFromCamera),De=g.evaluateSizeForFeature(l.textSizeData,N,ae)*Ne/o.ONE_EM;u&&(De*=l.tilePixelRatio/M);for(var Fe=qf(ge.anchor,ge.width,ge.height,ge.textOffset,ge.textBoxScale,De),Ke=u?fr(we.add(Fe),w).point:Ae.point.add(p?Fe.rotate(-b.angle):Fe),et=l.allowVerticalPlacement&&ae.placedOrientation===o.WritingMode.vertical?Math.PI/2:0,Qe=0;Qe<ae.numGlyphs;Qe++)o.addDynamicAttributes(J,Ke,et);K&&ae.associatedIconIndex>=0&&(ue[ae.associatedIconIndex]={shiftedAnchor:Ke,angle:et})}else gi(ae.numGlyphs,J)}if(K){ce.clear();for(var dt=l.icon.placedSymbolArray,kt=0;kt<dt.length;kt++){var Mt=dt.get(kt);if(Mt.hidden)gi(Mt.numGlyphs,ce);else{var At=ue[kt];if(At)for(var xr=0;xr<Mt.numGlyphs;xr++)o.addDynamicAttributes(ce,At.shiftedAnchor,At.angle);else gi(Mt.numGlyphs,ce)}}l.icon.dynamicLayoutVertexBuffer.updateData(ce)}l.text.dynamicLayoutVertexBuffer.updateData(J)}function Gf(l,p,u){return u.iconsInText&&p?"symbolTextAndIcon":l?"symbolSDF":"symbolIcon"}function xs(l,p,u,d,g,b,w,C,M,N,K,X){for(var J=l.context,ce=J.gl,ue=l.transform,ve=C==="map",ae=M==="map",ge=ve&&u.layout.get("symbol-placement")!=="point",we=ve&&!ae&&!ge,Ae=u.layout.get("symbol-sort-key").constantOr(1)!==void 0,Ne=!1,De=l.depthModeForSublayer(0,Y.ReadOnly),Fe=u.layout.get("text-variable-anchor"),Ke=[],et=0,Qe=d;et<Qe.length;et+=1){var dt=Qe[et],kt=p.getTile(dt),Mt=kt.getBucket(u);if(Mt){var At=g?Mt.text:Mt.icon;if(At&&At.segments.get().length){var xr=At.programConfigurations.get(u.id),mt=g||Mt.sdfIcons,Gt=g?Mt.textSizeData:Mt.iconSizeData,rr=ae||ue.pitch!==0,Wt=l.useProgram(Gf(mt,g,Mt),xr),Vt=o.evaluateSizeForZoom(Gt,ue.zoom),Jt=void 0,Ut=[0,0],Nt=void 0,$n=void 0,gn=null,hi=void 0;if(g)Nt=kt.glyphAtlasTexture,$n=ce.LINEAR,Jt=kt.glyphAtlasTexture.size,Mt.iconsInText&&(Ut=kt.imageAtlasTexture.size,gn=kt.imageAtlasTexture,hi=rr||l.options.rotating||l.options.zooming||Gt.kind==="composite"||Gt.kind==="camera"?ce.LINEAR:ce.NEAREST);else{var Qn=u.layout.get("icon-size").constantOr(0)!==1||Mt.iconsNeedLinear;Nt=kt.imageAtlasTexture,$n=mt||l.options.rotating||l.options.zooming||Qn||rr?ce.LINEAR:ce.NEAREST,Jt=kt.imageAtlasTexture.size}var fn=an(kt,1,l.transform.zoom),Cn=Sn(dt.posMatrix,ae,ve,l.transform,fn),Hi=qr(dt.posMatrix,ae,ve,l.transform,fn),bi=Fe&&Mt.hasTextData(),Fa=u.layout.get("icon-text-fit")!=="none"&&bi&&Mt.hasIconData();ge&&Ul(Mt,dt.posMatrix,l,g,Cn,Hi,ae,N);var Ai=l.translatePosMatrix(dt.posMatrix,kt,b,w),Oo=ge||g&&Fe||Fa?Mo:Cn,yo=l.translatePosMatrix(Hi,kt,b,w,!0),su=mt&&u.paint.get(g?"text-halo-width":"icon-halo-width").constantOr(1)!==0,al={program:Wt,buffers:At,uniformValues:mt?Mt.iconsInText?Yu(Gt.kind,Vt,we,ae,l,Ai,Oo,yo,Jt,Ut):Zl(Gt.kind,Vt,we,ae,l,Ai,Oo,yo,g,Jt,!0):Js(Gt.kind,Vt,we,ae,l,Ai,Oo,yo,g,Jt),atlasTexture:Nt,atlasTextureIcon:gn,atlasInterpolation:$n,atlasInterpolationIcon:hi,isSDF:mt,hasHalo:su};if(Ae&&Mt.canOverlap){Ne=!0;for(var ja=0,sl=At.segments.get();ja<sl.length;ja+=1){var lu=sl[ja];Ke.push({segments:new o.SegmentVector([lu]),sortKey:lu.sortKey,state:al})}}else Ke.push({segments:At.segments,sortKey:0,state:al})}}}Ne&&Ke.sort(function(Ua,ks){return Ua.sortKey-ks.sortKey});for(var Xo=0,uu=Ke;Xo<uu.length;Xo+=1){var Yo=uu[Xo],Vn=Yo.state;if(J.activeTexture.set(ce.TEXTURE0),Vn.atlasTexture.bind(Vn.atlasInterpolation,ce.CLAMP_TO_EDGE),Vn.atlasTextureIcon&&(J.activeTexture.set(ce.TEXTURE1),Vn.atlasTextureIcon&&Vn.atlasTextureIcon.bind(Vn.atlasInterpolationIcon,ce.CLAMP_TO_EDGE)),Vn.isSDF){var da=Vn.uniformValues;Vn.hasHalo&&(da.u_is_halo=1,Xl(Vn.buffers,Yo.segments,u,l,Vn.program,De,K,X,da)),da.u_is_halo=0}Xl(Vn.buffers,Yo.segments,u,l,Vn.program,De,K,X,Vn.uniformValues)}}function Xl(l,p,u,d,g,b,w,C,M){var N=d.context;g.draw(N,N.gl.TRIANGLES,b,w,C,ye.disabled,M,u.id,l.layoutVertexBuffer,l.indexBuffer,p,u.paint,d.transform.zoom,l.programConfigurations.get(u.id),l.dynamicLayoutVertexBuffer,l.opacityVertexBuffer)}function Ju(l,p,u,d,g,b,w){var C,M,N,K,X,J=l.context.gl,ce=u.paint.get("fill-pattern"),ue=ce&&ce.constantOr(1),ve=u.getCrossfadeParameters();w?(M=ue&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",C=J.LINES):(M=ue?"fillPattern":"fill",C=J.TRIANGLES);for(var ae=0,ge=d;ae<ge.length;ae+=1){var we=ge[ae],Ae=p.getTile(we);if(!ue||Ae.patternsLoaded()){var Ne=Ae.getBucket(u);if(Ne){var De=Ne.programConfigurations.get(u.id),Fe=l.useProgram(M,De);ue&&(l.context.activeTexture.set(J.TEXTURE0),Ae.imageAtlasTexture.bind(J.LINEAR,J.CLAMP_TO_EDGE),De.updatePaintBuffers(ve));var Ke=ce.constantOr(null);if(Ke&&Ae.imageAtlas){var et=Ae.imageAtlas,Qe=et.patternPositions[Ke.to.toString()],dt=et.patternPositions[Ke.from.toString()];Qe&&dt&&De.setConstantPatternPositions(Qe,dt)}var kt=l.translatePosMatrix(we.posMatrix,Ae,u.paint.get("fill-translate"),u.paint.get("fill-translate-anchor"));if(w){K=Ne.indexBuffer2,X=Ne.segments2;var Mt=[J.drawingBufferWidth,J.drawingBufferHeight];N=M==="fillOutlinePattern"&&ue?Nf(kt,l,ve,Ae,Mt):Bf(kt,Mt)}else K=Ne.indexBuffer,X=Ne.segments,N=ue?ys(kt,l,ve,Ae):La(kt);Fe.draw(l.context,C,g,l.stencilModeForClipping(we),b,ye.disabled,N,u.id,Ne.layoutVertexBuffer,K,X,u.paint,l.transform.zoom,De)}}}}function ih(l,p,u,d,g,b,w){for(var C=l.context,M=C.gl,N=u.paint.get("fill-extrusion-pattern"),K=N.constantOr(1),X=u.getCrossfadeParameters(),J=u.paint.get("fill-extrusion-opacity"),ce=0,ue=d;ce<ue.length;ce+=1){var ve=ue[ce],ae=p.getTile(ve),ge=ae.getBucket(u);if(ge){var we=ge.programConfigurations.get(u.id),Ae=l.useProgram(K?"fillExtrusionPattern":"fillExtrusion",we);K&&(l.context.activeTexture.set(M.TEXTURE0),ae.imageAtlasTexture.bind(M.LINEAR,M.CLAMP_TO_EDGE),we.updatePaintBuffers(X));var Ne=N.constantOr(null);if(Ne&&ae.imageAtlas){var De=ae.imageAtlas,Fe=De.patternPositions[Ne.to.toString()],Ke=De.patternPositions[Ne.from.toString()];Fe&&Ke&&we.setConstantPatternPositions(Fe,Ke)}var et=l.translatePosMatrix(ve.posMatrix,ae,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),Qe=u.paint.get("fill-extrusion-vertical-gradient"),dt=K?ms(et,l,Qe,J,ve,X,ae):Of(et,l,Qe,J);Ae.draw(C,C.gl.TRIANGLES,g,b,w,ye.backCCW,dt,u.id,ge.layoutVertexBuffer,ge.indexBuffer,ge.segments,u.paint,l.transform.zoom,we)}}}function Qu(l,p,u,d,g,b){var w=l.context,C=w.gl,M=p.fbo;if(M){var N=l.useProgram("hillshade");w.activeTexture.set(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,M.colorAttachment.get());var K=function(X,J,ce){var ue=ce.paint.get("hillshade-shadow-color"),ve=ce.paint.get("hillshade-highlight-color"),ae=ce.paint.get("hillshade-accent-color"),ge=ce.paint.get("hillshade-illumination-direction")*(Math.PI/180);ce.paint.get("hillshade-illumination-anchor")==="viewport"&&(ge-=X.transform.angle);var we,Ae,Ne,De=!X.options.moving;return{u_matrix:X.transform.calculatePosMatrix(J.tileID.toUnwrapped(),De),u_image:0,u_latrange:(we=J.tileID,Ae=Math.pow(2,we.canonical.z),Ne=we.canonical.y,[new o.MercatorCoordinate(0,Ne/Ae).toLngLat().lat,new o.MercatorCoordinate(0,(Ne+1)/Ae).toLngLat().lat]),u_light:[ce.paint.get("hillshade-exaggeration"),ge],u_shadow:ue,u_highlight:ve,u_accent:ae}}(l,p,u);N.draw(w,C.TRIANGLES,d,g,b,ye.disabled,K,u.id,l.rasterBoundsBuffer,l.quadTriangleIndexBuffer,l.rasterBoundsSegments)}}function $v(l,p,u,d,g,b){var w=l.context,C=w.gl,M=p.dem;if(M&&M.data){var N=M.dim,K=M.stride,X=M.getPixels();if(w.activeTexture.set(C.TEXTURE1),w.pixelStoreUnpackPremultiplyAlpha.set(!1),p.demTexture=p.demTexture||l.getTileTexture(K),p.demTexture){var J=p.demTexture;J.update(X,{premultiply:!1}),J.bind(C.NEAREST,C.CLAMP_TO_EDGE)}else p.demTexture=new o.Texture(w,X,C.RGBA,{premultiply:!1}),p.demTexture.bind(C.NEAREST,C.CLAMP_TO_EDGE);w.activeTexture.set(C.TEXTURE0);var ce=p.fbo;if(!ce){var ue=new o.Texture(w,{width:N,height:N,data:null},C.RGBA);ue.bind(C.LINEAR,C.CLAMP_TO_EDGE),(ce=p.fbo=w.createFramebuffer(N,N,!0)).colorAttachment.set(ue.texture)}w.bindFramebuffer.set(ce.framebuffer),w.viewport.set([0,0,N,N]),l.useProgram("hillshadePrepare").draw(w,C.TRIANGLES,d,g,b,ye.disabled,function(ve,ae){var ge=ae.stride,we=o.create();return o.ortho(we,0,o.EXTENT,-o.EXTENT,0,0,1),o.translate(we,we,[0,-o.EXTENT,0]),{u_matrix:we,u_image:1,u_dimension:[ge,ge],u_zoom:ve.overscaledZ,u_unpack:ae.getUnpackVector()}}(p.tileID,M),u.id,l.rasterBoundsBuffer,l.quadTriangleIndexBuffer,l.rasterBoundsSegments),p.needsHillshadePrepare=!1}}function ec(l,p,u,d,g){var b=d.paint.get("raster-fade-duration");if(b>0){var w=o.browser.now(),C=(w-l.timeAdded)/b,M=p?(w-p.timeAdded)/b:-1,N=u.getSource(),K=g.coveringZoomLevel({tileSize:N.tileSize,roundZoom:N.roundZoom}),X=!p||Math.abs(p.tileID.overscaledZ-K)>Math.abs(l.tileID.overscaledZ-K),J=X&&l.refreshedUponExpiration?1:o.clamp(X?C:1-M,0,1);return l.refreshedUponExpiration&&C>=1&&(l.refreshedUponExpiration=!1),p?{opacity:1,mix:1-J}:{opacity:J,mix:0}}return{opacity:1,mix:0}}var oh=new o.Color(1,0,0,1),Hf=new o.Color(0,1,0,1),Zf=new o.Color(0,0,1,1),tc=new o.Color(1,0,1,1),ah=new o.Color(0,1,1,1);function sh(l,p,u,d){Yl(l,0,p+u/2,l.transform.width,u,d)}function lh(l,p,u,d){Yl(l,p-u/2,0,u,l.transform.height,d)}function Yl(l,p,u,d,g,b){var w=l.context,C=w.gl;C.enable(C.SCISSOR_TEST),C.scissor(p*o.browser.devicePixelRatio,u*o.browser.devicePixelRatio,d*o.browser.devicePixelRatio,g*o.browser.devicePixelRatio),w.clear({color:b}),C.disable(C.SCISSOR_TEST)}function Kf(l,p,u){var d=l.context,g=d.gl,b=u.posMatrix,w=l.useProgram("debug"),C=Y.disabled,M=re.disabled,N=l.colorModeForRenderPass();d.activeTexture.set(g.TEXTURE0),l.emptyTexture.bind(g.LINEAR,g.CLAMP_TO_EDGE),w.draw(d,g.LINE_STRIP,C,M,N,ye.disabled,vs(b,o.Color.red),"$debug",l.debugBuffer,l.tileBorderIndexBuffer,l.debugSegments);var K=p.getTileByID(u.key).latestRawTileData,X=Math.floor((K&&K.byteLength||0)/1024),J=p.getTile(u).tileSize,ce=512/Math.min(J,512)*(u.overscaledZ/l.transform.zoom)*.5,ue=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(ue+=" => "+u.overscaledZ),function(ve,ae){ve.initDebugOverlayCanvas();var ge=ve.debugOverlayCanvas,we=ve.context.gl,Ae=ve.debugOverlayCanvas.getContext("2d");Ae.clearRect(0,0,ge.width,ge.height),Ae.shadowColor="white",Ae.shadowBlur=2,Ae.lineWidth=1.5,Ae.strokeStyle="white",Ae.textBaseline="top",Ae.font="bold 36px Open Sans, sans-serif",Ae.fillText(ae,5,5),Ae.strokeText(ae,5,5),ve.debugOverlayTexture.update(ge),ve.debugOverlayTexture.bind(we.LINEAR,we.CLAMP_TO_EDGE)}(l,ue+" "+X+"kb"),w.draw(d,g.TRIANGLES,C,M,me.alphaBlended,ye.disabled,vs(b,o.Color.transparent,ce),"$debug",l.debugBuffer,l.quadTriangleIndexBuffer,l.debugSegments)}var bs={symbol:function(l,p,u,d,g){if(l.renderPass==="translucent"){var b=re.disabled,w=l.colorModeForRenderPass();u.layout.get("text-variable-anchor")&&function(C,M,N,K,X,J,ce){for(var ue=M.transform,ve=X==="map",ae=J==="map",ge=0,we=C;ge<we.length;ge+=1){var Ae=we[ge],Ne=K.getTile(Ae),De=Ne.getBucket(N);if(De&&De.text&&De.text.segments.get().length){var Fe=o.evaluateSizeForZoom(De.textSizeData,ue.zoom),Ke=an(Ne,1,M.transform.zoom),et=Sn(Ae.posMatrix,ae,ve,M.transform,Ke),Qe=N.layout.get("icon-text-fit")!=="none"&&De.hasIconData();if(Fe){var dt=Math.pow(2,ue.zoom-Ne.tileID.overscaledZ);Wf(De,ve,ae,ce,o.symbolSize,ue,et,Ae.posMatrix,dt,Fe,Qe)}}}}(d,l,u,p,u.layout.get("text-rotation-alignment"),u.layout.get("text-pitch-alignment"),g),u.paint.get("icon-opacity").constantOr(1)!==0&&xs(l,p,u,d,!1,u.paint.get("icon-translate"),u.paint.get("icon-translate-anchor"),u.layout.get("icon-rotation-alignment"),u.layout.get("icon-pitch-alignment"),u.layout.get("icon-keep-upright"),b,w),u.paint.get("text-opacity").constantOr(1)!==0&&xs(l,p,u,d,!0,u.paint.get("text-translate"),u.paint.get("text-translate-anchor"),u.layout.get("text-rotation-alignment"),u.layout.get("text-pitch-alignment"),u.layout.get("text-keep-upright"),b,w),p.map.showCollisionBoxes&&(el(l,p,u,d,u.paint.get("text-translate"),u.paint.get("text-translate-anchor"),!0),el(l,p,u,d,u.paint.get("icon-translate"),u.paint.get("icon-translate-anchor"),!1))}},circle:function(l,p,u,d){if(l.renderPass==="translucent"){var g=u.paint.get("circle-opacity"),b=u.paint.get("circle-stroke-width"),w=u.paint.get("circle-stroke-opacity"),C=u.layout.get("circle-sort-key").constantOr(1)!==void 0;if(g.constantOr(1)!==0||b.constantOr(1)!==0&&w.constantOr(1)!==0){for(var M=l.context,N=M.gl,K=l.depthModeForSublayer(0,Y.ReadOnly),X=re.disabled,J=l.colorModeForRenderPass(),ce=[],ue=0;ue<d.length;ue++){var ve=d[ue],ae=p.getTile(ve),ge=ae.getBucket(u);if(ge){var we=ge.programConfigurations.get(u.id),Ae={programConfiguration:we,program:l.useProgram("circle",we),layoutVertexBuffer:ge.layoutVertexBuffer,indexBuffer:ge.indexBuffer,uniformValues:nh(l,ve,ae,u)};if(C)for(var Ne=0,De=ge.segments.get();Ne<De.length;Ne+=1){var Fe=De[Ne];ce.push({segments:new o.SegmentVector([Fe]),sortKey:Fe.sortKey,state:Ae})}else ce.push({segments:ge.segments,sortKey:0,state:Ae})}}C&&ce.sort(function(kt,Mt){return kt.sortKey-Mt.sortKey});for(var Ke=0,et=ce;Ke<et.length;Ke+=1){var Qe=et[Ke],dt=Qe.state;dt.program.draw(M,N.TRIANGLES,K,X,J,ye.disabled,dt.uniformValues,u.id,dt.layoutVertexBuffer,dt.indexBuffer,Qe.segments,u.paint,l.transform.zoom,dt.programConfiguration)}}}},heatmap:function(l,p,u,d){if(u.paint.get("heatmap-opacity")!==0)if(l.renderPass==="offscreen"){var g=l.context,b=g.gl,w=re.disabled,C=new me([b.ONE,b.ONE],o.Color.transparent,[!0,!0,!0,!0]);(function(ce,ue,ve){var ae=ce.gl;ce.activeTexture.set(ae.TEXTURE1),ce.viewport.set([0,0,ue.width/4,ue.height/4]);var ge=ve.heatmapFbo;if(ge)ae.bindTexture(ae.TEXTURE_2D,ge.colorAttachment.get()),ce.bindFramebuffer.set(ge.framebuffer);else{var we=ae.createTexture();ae.bindTexture(ae.TEXTURE_2D,we),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_WRAP_S,ae.CLAMP_TO_EDGE),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_WRAP_T,ae.CLAMP_TO_EDGE),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_MIN_FILTER,ae.LINEAR),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_MAG_FILTER,ae.LINEAR),ge=ve.heatmapFbo=ce.createFramebuffer(ue.width/4,ue.height/4,!1),function(Ae,Ne,De,Fe){var Ke=Ae.gl;Ke.texImage2D(Ke.TEXTURE_2D,0,Ke.RGBA,Ne.width/4,Ne.height/4,0,Ke.RGBA,Ae.extRenderToTextureHalfFloat?Ae.extTextureHalfFloat.HALF_FLOAT_OES:Ke.UNSIGNED_BYTE,null),Fe.colorAttachment.set(De)}(ce,ue,we,ge)}})(g,l,u),g.clear({color:o.Color.transparent});for(var M=0;M<d.length;M++){var N=d[M];if(!p.hasRenderableParent(N)){var K=p.getTile(N),X=K.getBucket(u);if(X){var J=X.programConfigurations.get(u.id);l.useProgram("heatmap",J).draw(g,b.TRIANGLES,Y.disabled,w,C,ye.disabled,jf(N.posMatrix,K,l.transform.zoom,u.paint.get("heatmap-intensity")),u.id,X.layoutVertexBuffer,X.indexBuffer,X.segments,u.paint,l.transform.zoom,J)}}}g.viewport.set([0,0,l.width,l.height])}else l.renderPass==="translucent"&&(l.context.setColorMode(l.colorModeForRenderPass()),function(ce,ue){var ve=ce.context,ae=ve.gl,ge=ue.heatmapFbo;if(ge){ve.activeTexture.set(ae.TEXTURE0),ae.bindTexture(ae.TEXTURE_2D,ge.colorAttachment.get()),ve.activeTexture.set(ae.TEXTURE1);var we=ue.colorRampTexture;we||(we=ue.colorRampTexture=new o.Texture(ve,ue.colorRamp,ae.RGBA)),we.bind(ae.LINEAR,ae.CLAMP_TO_EDGE),ce.useProgram("heatmapTexture").draw(ve,ae.TRIANGLES,Y.disabled,re.disabled,ce.colorModeForRenderPass(),ye.disabled,function(Ae,Ne,De,Fe){var Ke=o.create();o.ortho(Ke,0,Ae.width,Ae.height,0,0,1);var et=Ae.context.gl;return{u_matrix:Ke,u_world:[et.drawingBufferWidth,et.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Ne.paint.get("heatmap-opacity")}}(ce,ue),ue.id,ce.viewportBuffer,ce.quadTriangleIndexBuffer,ce.viewportSegments,ue.paint,ce.transform.zoom)}}(l,u))},line:function(l,p,u,d){if(l.renderPass==="translucent"){var g=u.paint.get("line-opacity"),b=u.paint.get("line-width");if(g.constantOr(1)!==0&&b.constantOr(1)!==0)for(var w=l.depthModeForSublayer(0,Y.ReadOnly),C=l.colorModeForRenderPass(),M=u.paint.get("line-dasharray"),N=u.paint.get("line-pattern"),K=N.constantOr(1),X=u.paint.get("line-gradient"),J=u.getCrossfadeParameters(),ce=K?"linePattern":M?"lineSDF":X?"lineGradient":"line",ue=l.context,ve=ue.gl,ae=!0,ge=0,we=d;ge<we.length;ge+=1){var Ae=we[ge],Ne=p.getTile(Ae);if(!K||Ne.patternsLoaded()){var De=Ne.getBucket(u);if(De){var Fe=De.programConfigurations.get(u.id),Ke=l.context.program.get(),et=l.useProgram(ce,Fe),Qe=ae||et.program!==Ke,dt=N.constantOr(null);if(dt&&Ne.imageAtlas){var kt=Ne.imageAtlas,Mt=kt.patternPositions[dt.to.toString()],At=kt.patternPositions[dt.from.toString()];Mt&&At&&Fe.setConstantPatternPositions(Mt,At)}var xr=K?Ku(l,Ne,u,J):M?jv(l,Ne,u,M,J):X?Yr(l,Ne,u,De.lineClipsArray.length):Hl(l,Ne,u);if(K)ue.activeTexture.set(ve.TEXTURE0),Ne.imageAtlasTexture.bind(ve.LINEAR,ve.CLAMP_TO_EDGE),Fe.updatePaintBuffers(J);else if(M&&(Qe||l.lineAtlas.dirty))ue.activeTexture.set(ve.TEXTURE0),l.lineAtlas.bind(ue);else if(X){var mt=De.gradients[u.id],Gt=mt.texture;if(u.gradientVersion!==mt.version){var rr=256;if(u.stepInterpolant){var Wt=p.getSource().maxzoom,Vt=Ae.canonical.z===Wt?Math.ceil(1<<l.transform.maxZoom-Ae.canonical.z):1;rr=o.clamp(o.nextPowerOfTwo(De.maxLineLength/o.EXTENT*1024*Vt),256,ue.maxTextureSize)}mt.gradient=o.renderColorRamp({expression:u.gradientExpression(),evaluationKey:"lineProgress",resolution:rr,image:mt.gradient||void 0,clips:De.lineClipsArray}),mt.texture?mt.texture.update(mt.gradient):mt.texture=new o.Texture(ue,mt.gradient,ve.RGBA),mt.version=u.gradientVersion,Gt=mt.texture}ue.activeTexture.set(ve.TEXTURE0),Gt.bind(u.stepInterpolant?ve.NEAREST:ve.LINEAR,ve.CLAMP_TO_EDGE)}et.draw(ue,ve.TRIANGLES,w,l.stencilModeForClipping(Ae),C,ye.disabled,xr,u.id,De.layoutVertexBuffer,De.indexBuffer,De.segments,u.paint,l.transform.zoom,Fe,De.layoutVertexBuffer2),ae=!1}}}}},fill:function(l,p,u,d){var g=u.paint.get("fill-color"),b=u.paint.get("fill-opacity");if(b.constantOr(1)!==0){var w=l.colorModeForRenderPass(),C=u.paint.get("fill-pattern"),M=l.opaquePassEnabledForLayer()&&!C.constantOr(1)&&g.constantOr(o.Color.transparent).a===1&&b.constantOr(0)===1?"opaque":"translucent";if(l.renderPass===M){var N=l.depthModeForSublayer(1,l.renderPass==="opaque"?Y.ReadWrite:Y.ReadOnly);Ju(l,p,u,d,N,w,!1)}if(l.renderPass==="translucent"&&u.paint.get("fill-antialias")){var K=l.depthModeForSublayer(u.getPaintProperty("fill-outline-color")?2:0,Y.ReadOnly);Ju(l,p,u,d,K,w,!0)}}},"fill-extrusion":function(l,p,u,d){var g=u.paint.get("fill-extrusion-opacity");if(g!==0&&l.renderPass==="translucent"){var b=new Y(l.context.gl.LEQUAL,Y.ReadWrite,l.depthRangeFor3D);if(g!==1||u.paint.get("fill-extrusion-pattern").constantOr(1))ih(l,p,u,d,b,re.disabled,me.disabled),ih(l,p,u,d,b,l.stencilModeFor3D(),l.colorModeForRenderPass());else{var w=l.colorModeForRenderPass();ih(l,p,u,d,b,re.disabled,w)}}},hillshade:function(l,p,u,d){if(l.renderPass==="offscreen"||l.renderPass==="translucent"){for(var g=l.context,b=l.depthModeForSublayer(0,Y.ReadOnly),w=l.colorModeForRenderPass(),C=l.renderPass==="translucent"?l.stencilConfigForOverlap(d):[{},d],M=C[0],N=0,K=C[1];N<K.length;N+=1){var X=K[N],J=p.getTile(X);J.needsHillshadePrepare&&l.renderPass==="offscreen"?$v(l,J,u,b,re.disabled,w):l.renderPass==="translucent"&&Qu(l,J,u,b,M[X.overscaledZ],w)}g.viewport.set([0,0,l.width,l.height])}},raster:function(l,p,u,d){if(l.renderPass==="translucent"&&u.paint.get("raster-opacity")!==0&&d.length)for(var g=l.context,b=g.gl,w=p.getSource(),C=l.useProgram("raster"),M=l.colorModeForRenderPass(),N=w instanceof Ge?[{},d]:l.stencilConfigForOverlap(d),K=N[0],X=N[1],J=X[X.length-1].overscaledZ,ce=!l.options.moving,ue=0,ve=X;ue<ve.length;ue+=1){var ae=ve[ue],ge=l.depthModeForSublayer(ae.overscaledZ-J,u.paint.get("raster-opacity")===1?Y.ReadWrite:Y.ReadOnly,b.LESS),we=p.getTile(ae),Ae=l.transform.calculatePosMatrix(ae.toUnwrapped(),ce);we.registerFadeDuration(u.paint.get("raster-fade-duration"));var Ne=p.findLoadedParent(ae,0),De=ec(we,Ne,p,u,l.transform),Fe=void 0,Ke=void 0,et=u.paint.get("raster-resampling")==="nearest"?b.NEAREST:b.LINEAR;g.activeTexture.set(b.TEXTURE0),we.texture.bind(et,b.CLAMP_TO_EDGE,b.LINEAR_MIPMAP_NEAREST),g.activeTexture.set(b.TEXTURE1),Ne?(Ne.texture.bind(et,b.CLAMP_TO_EDGE,b.LINEAR_MIPMAP_NEAREST),Fe=Math.pow(2,Ne.tileID.overscaledZ-we.tileID.overscaledZ),Ke=[we.tileID.canonical.x*Fe%1,we.tileID.canonical.y*Fe%1]):we.texture.bind(et,b.CLAMP_TO_EDGE,b.LINEAR_MIPMAP_NEAREST);var Qe=Uv(Ae,Ke||[0,0],Fe||1,De,u);w instanceof Ge?C.draw(g,b.TRIANGLES,ge,re.disabled,M,ye.disabled,Qe,u.id,w.boundsBuffer,l.quadTriangleIndexBuffer,w.boundsSegments):C.draw(g,b.TRIANGLES,ge,K[ae.overscaledZ],M,ye.disabled,Qe,u.id,l.rasterBoundsBuffer,l.quadTriangleIndexBuffer,l.rasterBoundsSegments)}},background:function(l,p,u){var d=u.paint.get("background-color"),g=u.paint.get("background-opacity");if(g!==0){var b=l.context,w=b.gl,C=l.transform,M=C.tileSize,N=u.paint.get("background-pattern");if(!l.isPatternMissing(N)){var K=!N&&d.a===1&&g===1&&l.opaquePassEnabledForLayer()?"opaque":"translucent";if(l.renderPass===K){var X=re.disabled,J=l.depthModeForSublayer(0,K==="opaque"?Y.ReadWrite:Y.ReadOnly),ce=l.colorModeForRenderPass(),ue=l.useProgram(N?"backgroundPattern":"background"),ve=C.coveringTiles({tileSize:M});N&&(b.activeTexture.set(w.TEXTURE0),l.imageManager.bind(l.context));for(var ae=u.getCrossfadeParameters(),ge=0,we=ve;ge<we.length;ge+=1){var Ae=we[ge],Ne=l.transform.calculatePosMatrix(Ae.toUnwrapped()),De=N?Qs(Ne,g,l,N,{tileID:Ae,tileSize:M},ae):Kl(Ne,g,d);ue.draw(b,w.TRIANGLES,J,X,ce,ye.disabled,De,u.id,l.tileExtentBuffer,l.quadTriangleIndexBuffer,l.tileExtentSegments)}}}}},debug:function(l,p,u){for(var d=0;d<u.length;d++)Kf(l,p,u[d])},custom:function(l,p,u){var d=l.context,g=u.implementation;if(l.renderPass==="offscreen"){var b=g.prerender;b&&(l.setCustomLayerDefaults(),d.setColorMode(l.colorModeForRenderPass()),b.call(g,d.gl,l.transform.customLayerMatrix()),d.setDirty(),l.setBaseState())}else if(l.renderPass==="translucent"){l.setCustomLayerDefaults(),d.setColorMode(l.colorModeForRenderPass()),d.setStencilMode(re.disabled);var w=g.renderingMode==="3d"?new Y(l.context.gl.LEQUAL,Y.ReadWrite,l.depthRangeFor3D):l.depthModeForSublayer(0,Y.ReadOnly);d.setDepthMode(w),g.render(d.gl,l.transform.customLayerMatrix()),d.setDirty(),l.setBaseState(),d.bindFramebuffer.set(null)}}},sn=function(l,p){this.context=new Z(l),this.transform=p,this._tileTextures={},this.setup(),this.numSublayers=ie.maxUnderzooming+ie.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ka,this.gpuTimers={}};sn.prototype.resize=function(l,p){if(this.width=l*o.browser.devicePixelRatio,this.height=p*o.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var u=0,d=this.style._order;u<d.length;u+=1)this.style._layers[d[u]].resize()},sn.prototype.setup=function(){var l=this.context,p=new o.StructArrayLayout2i4;p.emplaceBack(0,0),p.emplaceBack(o.EXTENT,0),p.emplaceBack(0,o.EXTENT),p.emplaceBack(o.EXTENT,o.EXTENT),this.tileExtentBuffer=l.createVertexBuffer(p,Mn.members),this.tileExtentSegments=o.SegmentVector.simpleSegment(0,0,4,2);var u=new o.StructArrayLayout2i4;u.emplaceBack(0,0),u.emplaceBack(o.EXTENT,0),u.emplaceBack(0,o.EXTENT),u.emplaceBack(o.EXTENT,o.EXTENT),this.debugBuffer=l.createVertexBuffer(u,Mn.members),this.debugSegments=o.SegmentVector.simpleSegment(0,0,4,5);var d=new o.StructArrayLayout4i8;d.emplaceBack(0,0,0,0),d.emplaceBack(o.EXTENT,0,o.EXTENT,0),d.emplaceBack(0,o.EXTENT,0,o.EXTENT),d.emplaceBack(o.EXTENT,o.EXTENT,o.EXTENT,o.EXTENT),this.rasterBoundsBuffer=l.createVertexBuffer(d,Pe.members),this.rasterBoundsSegments=o.SegmentVector.simpleSegment(0,0,4,2);var g=new o.StructArrayLayout2i4;g.emplaceBack(0,0),g.emplaceBack(1,0),g.emplaceBack(0,1),g.emplaceBack(1,1),this.viewportBuffer=l.createVertexBuffer(g,Mn.members),this.viewportSegments=o.SegmentVector.simpleSegment(0,0,4,2);var b=new o.StructArrayLayout1ui2;b.emplaceBack(0),b.emplaceBack(1),b.emplaceBack(3),b.emplaceBack(2),b.emplaceBack(0),this.tileBorderIndexBuffer=l.createIndexBuffer(b);var w=new o.StructArrayLayout3ui6;w.emplaceBack(0,1,2),w.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=l.createIndexBuffer(w),this.emptyTexture=new o.Texture(l,{width:1,height:1,data:new Uint8Array([0,0,0,0])},l.gl.RGBA);var C=this.context.gl;this.stencilClearMode=new re({func:C.ALWAYS,mask:0},0,255,C.ZERO,C.ZERO,C.ZERO)},sn.prototype.clearStencil=function(){var l=this.context,p=l.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var u=o.create();o.ortho(u,0,this.width,this.height,0,0,1),o.scale(u,u,[p.drawingBufferWidth,p.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(l,p.TRIANGLES,Y.disabled,this.stencilClearMode,me.disabled,ye.disabled,_s(u),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},sn.prototype._renderTileClippingMasks=function(l,p){if(this.currentStencilSource!==l.source&&l.isTileClipped()&&p&&p.length){this.currentStencilSource=l.source;var u=this.context,d=u.gl;this.nextStencilID+p.length>256&&this.clearStencil(),u.setColorMode(me.disabled),u.setDepthMode(Y.disabled);var g=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var b=0,w=p;b<w.length;b+=1){var C=w[b],M=this._tileClippingMaskIDs[C.key]=this.nextStencilID++;g.draw(u,d.TRIANGLES,Y.disabled,new re({func:d.ALWAYS,mask:0},M,255,d.KEEP,d.KEEP,d.REPLACE),me.disabled,ye.disabled,_s(C.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},sn.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var l=this.nextStencilID++,p=this.context.gl;return new re({func:p.NOTEQUAL,mask:255},l,255,p.KEEP,p.KEEP,p.REPLACE)},sn.prototype.stencilModeForClipping=function(l){var p=this.context.gl;return new re({func:p.EQUAL,mask:255},this._tileClippingMaskIDs[l.key],0,p.KEEP,p.KEEP,p.REPLACE)},sn.prototype.stencilConfigForOverlap=function(l){var p,u=this.context.gl,d=l.sort(function(M,N){return N.overscaledZ-M.overscaledZ}),g=d[d.length-1].overscaledZ,b=d[0].overscaledZ-g+1;if(b>1){this.currentStencilSource=void 0,this.nextStencilID+b>256&&this.clearStencil();for(var w={},C=0;C<b;C++)w[C+g]=new re({func:u.GEQUAL,mask:255},C+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=b,[w,d]}return[(p={},p[g]=re.disabled,p),d]},sn.prototype.colorModeForRenderPass=function(){var l=this.context.gl;return this._showOverdrawInspector?new me([l.CONSTANT_COLOR,l.ONE],new o.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?me.unblended:me.alphaBlended},sn.prototype.depthModeForSublayer=function(l,p,u){if(!this.opaquePassEnabledForLayer())return Y.disabled;var d=1-((1+this.currentLayer)*this.numSublayers+l)*this.depthEpsilon;return new Y(u||this.context.gl.LEQUAL,p,[d,d])},sn.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},sn.prototype.render=function(l,p){var u=this;this.style=l,this.options=p,this.lineAtlas=l.lineAtlas,this.imageManager=l.imageManager,this.glyphManager=l.glyphManager,this.symbolFadeChange=l.placement.symbolFadeChange(o.browser.now()),this.imageManager.beginFrame();var d=this.style._order,g=this.style.sourceCaches;for(var b in g){var w=g[b];w.used&&w.prepare(this.context)}var C,M,N={},K={},X={};for(var J in g){var ce=g[J];N[J]=ce.getVisibleCoordinates(),K[J]=N[J].slice().reverse(),X[J]=ce.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var ue=0;ue<d.length;ue++)if(this.style._layers[d[ue]].is3D()){this.opaquePassCutoff=ue;break}this.renderPass="offscreen";for(var ve=0,ae=d;ve<ae.length;ve+=1){var ge=this.style._layers[ae[ve]];if(ge.hasOffscreenPass()&&!ge.isHidden(this.transform.zoom)){var we=K[ge.source];(ge.type==="custom"||we.length)&&this.renderLayer(this,g[ge.source],ge,we)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:p.showOverdrawInspector?o.Color.black:o.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=p.showOverdrawInspector,this.depthRangeFor3D=[0,1-(l._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=d.length-1;this.currentLayer>=0;this.currentLayer--){var Ae=this.style._layers[d[this.currentLayer]],Ne=g[Ae.source],De=N[Ae.source];this._renderTileClippingMasks(Ae,De),this.renderLayer(this,Ne,Ae,De)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<d.length;this.currentLayer++){var Fe=this.style._layers[d[this.currentLayer]],Ke=g[Fe.source],et=(Fe.type==="symbol"?X:K)[Fe.source];this._renderTileClippingMasks(Fe,N[Fe.source]),this.renderLayer(this,Ke,Fe,et)}this.options.showTileBoundaries&&(o.values(this.style._layers).forEach(function(Qe){Qe.source&&!Qe.isHidden(u.transform.zoom)&&(Qe.source!==(M&&M.id)&&(M=u.style.sourceCaches[Qe.source]),(!C||C.getSource().maxzoom<M.getSource().maxzoom)&&(C=M))}),C&&bs.debug(this,C,C.getVisibleCoordinates())),this.options.showPadding&&function(Qe){var dt=Qe.transform.padding;sh(Qe,Qe.transform.height-(dt.top||0),3,oh),sh(Qe,dt.bottom||0,3,Hf),lh(Qe,dt.left||0,3,Zf),lh(Qe,Qe.transform.width-(dt.right||0),3,tc);var kt=Qe.transform.centerPoint;(function(Mt,At,xr,mt){Yl(Mt,At-1,xr-10,2,20,mt),Yl(Mt,At-10,xr-1,20,2,mt)})(Qe,kt.x,Qe.transform.height-kt.y,ah)}(this),this.context.setDefault()},sn.prototype.renderLayer=function(l,p,u,d){u.isHidden(this.transform.zoom)||(u.type==="background"||u.type==="custom"||d.length)&&(this.id=u.id,this.gpuTimingStart(u),bs[u.type](l,p,u,d,this.style.placement.variableOffsets),this.gpuTimingEnd())},sn.prototype.gpuTimingStart=function(l){if(this.options.gpuTiming){var p=this.context.extTimerQuery,u=this.gpuTimers[l.id];u||(u=this.gpuTimers[l.id]={calls:0,cpuTime:0,query:p.createQueryEXT()}),u.calls++,p.beginQueryEXT(p.TIME_ELAPSED_EXT,u.query)}},sn.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var l=this.context.extTimerQuery;l.endQueryEXT(l.TIME_ELAPSED_EXT)}},sn.prototype.collectGpuTimers=function(){var l=this.gpuTimers;return this.gpuTimers={},l},sn.prototype.queryGpuTimers=function(l){var p={};for(var u in l){var d=l[u],g=this.context.extTimerQuery,b=g.getQueryObjectEXT(d.query,g.QUERY_RESULT_EXT)/1e6;g.deleteQueryEXT(d.query),p[u]=b}return p},sn.prototype.translatePosMatrix=function(l,p,u,d,g){if(!u[0]&&!u[1])return l;var b=g?d==="map"?this.transform.angle:0:d==="viewport"?-this.transform.angle:0;if(b){var w=Math.sin(b),C=Math.cos(b);u=[u[0]*C-u[1]*w,u[0]*w+u[1]*C]}var M=[g?u[0]:an(p,u[0],this.transform.zoom),g?u[1]:an(p,u[1],this.transform.zoom),0],N=new Float32Array(16);return o.translate(N,l,M),N},sn.prototype.saveTileTexture=function(l){var p=this._tileTextures[l.size[0]];p?p.push(l):this._tileTextures[l.size[0]]=[l]},sn.prototype.getTileTexture=function(l){var p=this._tileTextures[l];return p&&p.length>0?p.pop():null},sn.prototype.isPatternMissing=function(l){if(!l)return!1;if(!l.from||!l.to)return!0;var p=this.imageManager.getPattern(l.from.toString()),u=this.imageManager.getPattern(l.to.toString());return!p||!u},sn.prototype.useProgram=function(l,p){this.cache=this.cache||{};var u=""+l+(p?p.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[u]||(this.cache[u]=new zf(this.context,l,Fv[l],p,Vf[l],this._showOverdrawInspector)),this.cache[u]},sn.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},sn.prototype.setBaseState=function(){var l=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(l.FUNC_ADD)},sn.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=o.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new o.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},sn.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var rc=function(l,p){this.points=l,this.planes=p};rc.fromInvProjectionMatrix=function(l,p,u){var d=Math.pow(2,u),g=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(w){return o.transformMat4([],w,l)}).map(function(w){return o.scale$1([],w,1/w[3]/p*d)}),b=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(w){var C=o.sub([],g[w[0]],g[w[1]]),M=o.sub([],g[w[2]],g[w[1]]),N=o.normalize([],o.cross([],C,M)),K=-o.dot(N,g[w[1]]);return N.concat(K)});return new rc(g,b)};var ws=function(l,p){this.min=l,this.max=p,this.center=o.scale$2([],o.add([],this.min,this.max),.5)};ws.prototype.quadrant=function(l){for(var p=[l%2==0,l<2],u=o.clone$2(this.min),d=o.clone$2(this.max),g=0;g<p.length;g++)u[g]=p[g]?this.min[g]:this.center[g],d[g]=p[g]?this.center[g]:this.max[g];return d[2]=this.max[2],new ws(u,d)},ws.prototype.distanceX=function(l){return Math.max(Math.min(this.max[0],l[0]),this.min[0])-l[0]},ws.prototype.distanceY=function(l){return Math.max(Math.min(this.max[1],l[1]),this.min[1])-l[1]},ws.prototype.intersects=function(l){for(var p=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],u=!0,d=0;d<l.planes.length;d++){for(var g=l.planes[d],b=0,w=0;w<p.length;w++)b+=o.dot$1(g,p[w])>=0;if(b===0)return 0;b!==p.length&&(u=!1)}if(u)return 2;for(var C=0;C<3;C++){for(var M=Number.MAX_VALUE,N=-Number.MAX_VALUE,K=0;K<l.points.length;K++){var X=l.points[K][C]-this.min[C];M=Math.min(M,X),N=Math.max(N,X)}if(N<0||M>this.max[C]-this.min[C])return 0}return 1};var za=function(l,p,u,d){if(l===void 0&&(l=0),p===void 0&&(p=0),u===void 0&&(u=0),d===void 0&&(d=0),isNaN(l)||l<0||isNaN(p)||p<0||isNaN(u)||u<0||isNaN(d)||d<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=l,this.bottom=p,this.left=u,this.right=d};za.prototype.interpolate=function(l,p,u){return p.top!=null&&l.top!=null&&(this.top=o.number(l.top,p.top,u)),p.bottom!=null&&l.bottom!=null&&(this.bottom=o.number(l.bottom,p.bottom,u)),p.left!=null&&l.left!=null&&(this.left=o.number(l.left,p.left,u)),p.right!=null&&l.right!=null&&(this.right=o.number(l.right,p.right,u)),this},za.prototype.getCenter=function(l,p){var u=o.clamp((this.left+l-this.right)/2,0,l),d=o.clamp((this.top+p-this.bottom)/2,0,p);return new o.Point(u,d)},za.prototype.equals=function(l){return this.top===l.top&&this.bottom===l.bottom&&this.left===l.left&&this.right===l.right},za.prototype.clone=function(){return new za(this.top,this.bottom,this.left,this.right)},za.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var yr=function(l,p,u,d,g){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=g===void 0||g,this._minZoom=l||0,this._maxZoom=p||22,this._minPitch=u??0,this._maxPitch=d??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new o.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new za,this._posMatrixCache={},this._alignedPosMatrixCache={}},Jr={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};yr.prototype.clone=function(){var l=new yr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return l.tileSize=this.tileSize,l.latRange=this.latRange,l.width=this.width,l.height=this.height,l._center=this._center,l.zoom=this.zoom,l.angle=this.angle,l._fov=this._fov,l._pitch=this._pitch,l._unmodified=this._unmodified,l._edgeInsets=this._edgeInsets.clone(),l._calcMatrices(),l},Jr.minZoom.get=function(){return this._minZoom},Jr.minZoom.set=function(l){this._minZoom!==l&&(this._minZoom=l,this.zoom=Math.max(this.zoom,l))},Jr.maxZoom.get=function(){return this._maxZoom},Jr.maxZoom.set=function(l){this._maxZoom!==l&&(this._maxZoom=l,this.zoom=Math.min(this.zoom,l))},Jr.minPitch.get=function(){return this._minPitch},Jr.minPitch.set=function(l){this._minPitch!==l&&(this._minPitch=l,this.pitch=Math.max(this.pitch,l))},Jr.maxPitch.get=function(){return this._maxPitch},Jr.maxPitch.set=function(l){this._maxPitch!==l&&(this._maxPitch=l,this.pitch=Math.min(this.pitch,l))},Jr.renderWorldCopies.get=function(){return this._renderWorldCopies},Jr.renderWorldCopies.set=function(l){l===void 0?l=!0:l===null&&(l=!1),this._renderWorldCopies=l},Jr.worldSize.get=function(){return this.tileSize*this.scale},Jr.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Jr.size.get=function(){return new o.Point(this.width,this.height)},Jr.bearing.get=function(){return-this.angle/Math.PI*180},Jr.bearing.set=function(l){var p=-o.wrap(l,-180,180)*Math.PI/180;this.angle!==p&&(this._unmodified=!1,this.angle=p,this._calcMatrices(),this.rotationMatrix=o.create$2(),o.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Jr.pitch.get=function(){return this._pitch/Math.PI*180},Jr.pitch.set=function(l){var p=o.clamp(l,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==p&&(this._unmodified=!1,this._pitch=p,this._calcMatrices())},Jr.fov.get=function(){return this._fov/Math.PI*180},Jr.fov.set=function(l){l=Math.max(.01,Math.min(60,l)),this._fov!==l&&(this._unmodified=!1,this._fov=l/180*Math.PI,this._calcMatrices())},Jr.zoom.get=function(){return this._zoom},Jr.zoom.set=function(l){var p=Math.min(Math.max(l,this.minZoom),this.maxZoom);this._zoom!==p&&(this._unmodified=!1,this._zoom=p,this.scale=this.zoomScale(p),this.tileZoom=Math.floor(p),this.zoomFraction=p-this.tileZoom,this._constrain(),this._calcMatrices())},Jr.center.get=function(){return this._center},Jr.center.set=function(l){l.lat===this._center.lat&&l.lng===this._center.lng||(this._unmodified=!1,this._center=l,this._constrain(),this._calcMatrices())},Jr.padding.get=function(){return this._edgeInsets.toJSON()},Jr.padding.set=function(l){this._edgeInsets.equals(l)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,l,1),this._calcMatrices())},Jr.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},yr.prototype.isPaddingEqual=function(l){return this._edgeInsets.equals(l)},yr.prototype.interpolatePadding=function(l,p,u){this._unmodified=!1,this._edgeInsets.interpolate(l,p,u),this._constrain(),this._calcMatrices()},yr.prototype.coveringZoomLevel=function(l){var p=(l.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/l.tileSize));return Math.max(0,p)},yr.prototype.getVisibleUnwrappedCoordinates=function(l){var p=[new o.UnwrappedTileID(0,l)];if(this._renderWorldCopies)for(var u=this.pointCoordinate(new o.Point(0,0)),d=this.pointCoordinate(new o.Point(this.width,0)),g=this.pointCoordinate(new o.Point(this.width,this.height)),b=this.pointCoordinate(new o.Point(0,this.height)),w=Math.floor(Math.min(u.x,d.x,g.x,b.x)),C=Math.floor(Math.max(u.x,d.x,g.x,b.x)),M=w-1;M<=C+1;M++)M!==0&&p.push(new o.UnwrappedTileID(M,l));return p},yr.prototype.coveringTiles=function(l){var p=this.coveringZoomLevel(l),u=p;if(l.minzoom!==void 0&&p<l.minzoom)return[];l.maxzoom!==void 0&&p>l.maxzoom&&(p=l.maxzoom);var d=o.MercatorCoordinate.fromLngLat(this.center),g=Math.pow(2,p),b=[g*d.x,g*d.y,0],w=rc.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,p),C=l.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(C=p);var M=function(Qe){return{aabb:new ws([Qe*g,0,0],[(Qe+1)*g,g,0]),zoom:0,x:0,y:0,wrap:Qe,fullyVisible:!1}},N=[],K=[],X=p,J=l.reparseOverscaled?u:p;if(this._renderWorldCopies)for(var ce=1;ce<=3;ce++)N.push(M(-ce)),N.push(M(ce));for(N.push(M(0));N.length>0;){var ue=N.pop(),ve=ue.x,ae=ue.y,ge=ue.fullyVisible;if(!ge){var we=ue.aabb.intersects(w);if(we===0)continue;ge=we===2}var Ae=ue.aabb.distanceX(b),Ne=ue.aabb.distanceY(b),De=Math.max(Math.abs(Ae),Math.abs(Ne));if(ue.zoom===X||De>3+(1<<X-ue.zoom)-2&&ue.zoom>=C)K.push({tileID:new o.OverscaledTileID(ue.zoom===X?J:ue.zoom,ue.wrap,ue.zoom,ve,ae),distanceSq:o.sqrLen([b[0]-.5-ve,b[1]-.5-ae])});else for(var Fe=0;Fe<4;Fe++){var Ke=(ve<<1)+Fe%2,et=(ae<<1)+(Fe>>1);N.push({aabb:ue.aabb.quadrant(Fe),zoom:ue.zoom+1,x:Ke,y:et,wrap:ue.wrap,fullyVisible:ge})}}return K.sort(function(Qe,dt){return Qe.distanceSq-dt.distanceSq}).map(function(Qe){return Qe.tileID})},yr.prototype.resize=function(l,p){this.width=l,this.height=p,this.pixelsToGLUnits=[2/l,-2/p],this._constrain(),this._calcMatrices()},Jr.unmodified.get=function(){return this._unmodified},yr.prototype.zoomScale=function(l){return Math.pow(2,l)},yr.prototype.scaleZoom=function(l){return Math.log(l)/Math.LN2},yr.prototype.project=function(l){var p=o.clamp(l.lat,-this.maxValidLatitude,this.maxValidLatitude);return new o.Point(o.mercatorXfromLng(l.lng)*this.worldSize,o.mercatorYfromLat(p)*this.worldSize)},yr.prototype.unproject=function(l){return new o.MercatorCoordinate(l.x/this.worldSize,l.y/this.worldSize).toLngLat()},Jr.point.get=function(){return this.project(this.center)},yr.prototype.setLocationAtPoint=function(l,p){var u=this.pointCoordinate(p),d=this.pointCoordinate(this.centerPoint),g=this.locationCoordinate(l),b=new o.MercatorCoordinate(g.x-(u.x-d.x),g.y-(u.y-d.y));this.center=this.coordinateLocation(b),this._renderWorldCopies&&(this.center=this.center.wrap())},yr.prototype.locationPoint=function(l){return this.coordinatePoint(this.locationCoordinate(l))},yr.prototype.pointLocation=function(l){return this.coordinateLocation(this.pointCoordinate(l))},yr.prototype.locationCoordinate=function(l){return o.MercatorCoordinate.fromLngLat(l)},yr.prototype.coordinateLocation=function(l){return l.toLngLat()},yr.prototype.pointCoordinate=function(l){var p=[l.x,l.y,0,1],u=[l.x,l.y,1,1];o.transformMat4(p,p,this.pixelMatrixInverse),o.transformMat4(u,u,this.pixelMatrixInverse);var d=p[3],g=u[3],b=p[1]/d,w=u[1]/g,C=p[2]/d,M=u[2]/g,N=C===M?0:(0-C)/(M-C);return new o.MercatorCoordinate(o.number(p[0]/d,u[0]/g,N)/this.worldSize,o.number(b,w,N)/this.worldSize)},yr.prototype.coordinatePoint=function(l){var p=[l.x*this.worldSize,l.y*this.worldSize,0,1];return o.transformMat4(p,p,this.pixelMatrix),new o.Point(p[0]/p[3],p[1]/p[3])},yr.prototype.getBounds=function(){return new o.LngLatBounds().extend(this.pointLocation(new o.Point(0,0))).extend(this.pointLocation(new o.Point(this.width,0))).extend(this.pointLocation(new o.Point(this.width,this.height))).extend(this.pointLocation(new o.Point(0,this.height)))},yr.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new o.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},yr.prototype.setMaxBounds=function(l){l?(this.lngRange=[l.getWest(),l.getEast()],this.latRange=[l.getSouth(),l.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},yr.prototype.calculatePosMatrix=function(l,p){p===void 0&&(p=!1);var u=l.key,d=p?this._alignedPosMatrixCache:this._posMatrixCache;if(d[u])return d[u];var g=l.canonical,b=this.worldSize/this.zoomScale(g.z),w=g.x+Math.pow(2,g.z)*l.wrap,C=o.identity(new Float64Array(16));return o.translate(C,C,[w*b,g.y*b,0]),o.scale(C,C,[b/o.EXTENT,b/o.EXTENT,1]),o.multiply(C,p?this.alignedProjMatrix:this.projMatrix,C),d[u]=new Float32Array(C),d[u]},yr.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},yr.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var l,p,u,d,g=-90,b=90,w=-180,C=180,M=this.size,N=this._unmodified;if(this.latRange){var K=this.latRange;g=o.mercatorYfromLat(K[1])*this.worldSize,l=(b=o.mercatorYfromLat(K[0])*this.worldSize)-g<M.y?M.y/(b-g):0}if(this.lngRange){var X=this.lngRange;w=o.mercatorXfromLng(X[0])*this.worldSize,p=(C=o.mercatorXfromLng(X[1])*this.worldSize)-w<M.x?M.x/(C-w):0}var J=this.point,ce=Math.max(p||0,l||0);if(ce)return this.center=this.unproject(new o.Point(p?(C+w)/2:J.x,l?(b+g)/2:J.y)),this.zoom+=this.scaleZoom(ce),this._unmodified=N,void(this._constraining=!1);if(this.latRange){var ue=J.y,ve=M.y/2;ue-ve<g&&(d=g+ve),ue+ve>b&&(d=b-ve)}if(this.lngRange){var ae=J.x,ge=M.x/2;ae-ge<w&&(u=w+ge),ae+ge>C&&(u=C-ge)}u===void 0&&d===void 0||(this.center=this.unproject(new o.Point(u!==void 0?u:J.x,d!==void 0?d:J.y))),this._unmodified=N,this._constraining=!1}},yr.prototype._calcMatrices=function(){if(this.height){var l=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var p=Math.PI/2+this._pitch,u=this._fov*(.5+l.y/this.height),d=Math.sin(u)*this.cameraToCenterDistance/Math.sin(o.clamp(Math.PI-p-u,.01,Math.PI-.01)),g=this.point,b=g.x,w=g.y,C=1.01*(Math.cos(Math.PI/2-this._pitch)*d+this.cameraToCenterDistance),M=this.height/50,N=new Float64Array(16);o.perspective(N,this._fov,this.width/this.height,M,C),N[8]=2*-l.x/this.width,N[9]=2*l.y/this.height,o.scale(N,N,[1,-1,1]),o.translate(N,N,[0,0,-this.cameraToCenterDistance]),o.rotateX(N,N,this._pitch),o.rotateZ(N,N,this.angle),o.translate(N,N,[-b,-w,0]),this.mercatorMatrix=o.scale([],N,[this.worldSize,this.worldSize,this.worldSize]),o.scale(N,N,[1,1,o.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=N,this.invProjMatrix=o.invert([],this.projMatrix);var K=this.width%2/2,X=this.height%2/2,J=Math.cos(this.angle),ce=Math.sin(this.angle),ue=b-Math.round(b)+J*K+ce*X,ve=w-Math.round(w)+J*X+ce*K,ae=new Float64Array(N);if(o.translate(ae,ae,[ue>.5?ue-1:ue,ve>.5?ve-1:ve,0]),this.alignedProjMatrix=ae,N=o.create(),o.scale(N,N,[this.width/2,-this.height/2,1]),o.translate(N,N,[1,-1,0]),this.labelPlaneMatrix=N,N=o.create(),o.scale(N,N,[1,-1,1]),o.translate(N,N,[-1,-1,0]),o.scale(N,N,[2/this.width,2/this.height,1]),this.glCoordMatrix=N,this.pixelMatrix=o.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(N=o.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=N,this._posMatrixCache={},this._alignedPosMatrixCache={}}},yr.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var l=this.pointCoordinate(new o.Point(0,0)),p=[l.x*this.worldSize,l.y*this.worldSize,0,1];return o.transformMat4(p,p,this.pixelMatrix)[3]/this.cameraToCenterDistance},yr.prototype.getCameraPoint=function(){var l=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.Point(0,l))},yr.prototype.getCameraQueryGeometry=function(l){var p=this.getCameraPoint();if(l.length===1)return[l[0],p];for(var u=p.x,d=p.y,g=p.x,b=p.y,w=0,C=l;w<C.length;w+=1){var M=C[w];u=Math.min(u,M.x),d=Math.min(d,M.y),g=Math.max(g,M.x),b=Math.max(b,M.y)}return[new o.Point(u,d),new o.Point(g,d),new o.Point(g,b),new o.Point(u,b),new o.Point(u,d)]},Object.defineProperties(yr.prototype,Jr);var ro=function(l){var p,u,d,g;this._hashName=l&&encodeURIComponent(l),o.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(p=this._updateHashUnthrottled.bind(this),u=!1,d=null,g=function(){d=null,u&&(p(),d=setTimeout(g,300),u=!1)},function(){return u=!0,d||g(),d})};ro.prototype.addTo=function(l){return this._map=l,o.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},ro.prototype.remove=function(){return o.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},ro.prototype.getHashString=function(l){var p=this._map.getCenter(),u=Math.round(100*this._map.getZoom())/100,d=Math.ceil((u*Math.LN2+Math.log(512/360/.5))/Math.LN10),g=Math.pow(10,d),b=Math.round(p.lng*g)/g,w=Math.round(p.lat*g)/g,C=this._map.getBearing(),M=this._map.getPitch(),N="";if(N+=l?"/"+b+"/"+w+"/"+u:u+"/"+w+"/"+b,(C||M)&&(N+="/"+Math.round(10*C)/10),M&&(N+="/"+Math.round(M)),this._hashName){var K=this._hashName,X=!1,J=o.window.location.hash.slice(1).split("&").map(function(ce){var ue=ce.split("=")[0];return ue===K?(X=!0,ue+"="+N):ce}).filter(function(ce){return ce});return X||J.push(K+"="+N),"#"+J.join("&")}return"#"+N},ro.prototype._getCurrentHash=function(){var l,p=this,u=o.window.location.hash.replace("#","");return this._hashName?(u.split("&").map(function(d){return d.split("=")}).forEach(function(d){d[0]===p._hashName&&(l=d)}),(l&&l[1]||"").split("/")):u.split("/")},ro.prototype._onHashChange=function(){var l=this._getCurrentHash();if(l.length>=3&&!l.some(function(u){return isNaN(u)})){var p=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(l[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+l[2],+l[1]],zoom:+l[0],bearing:p,pitch:+(l[4]||0)}),!0}return!1},ro.prototype._updateHashUnthrottled=function(){var l=o.window.location.href.replace(/(#.+)?$/,this.getHashString());try{o.window.history.replaceState(o.window.history.state,null,l)}catch{}};var Jl={linearity:.3,easing:o.bezier(0,0,.3,1)},tl=o.extend({deceleration:2500,maxSpeed:1400},Jl),Ql=o.extend({deceleration:20,maxSpeed:1400},Jl),Vv=o.extend({deceleration:1e3,maxSpeed:360},Jl),qv=o.extend({deceleration:1e3,maxSpeed:90},Jl),eu=function(l){this._map=l,this.clear()};function tu(l,p){(!l.duration||l.duration<p.duration)&&(l.duration=p.duration,l.easing=p.easing)}function ca(l,p,u){var d=u.maxSpeed,g=u.linearity,b=u.deceleration,w=o.clamp(l*g/(p/1e3),-d,d),C=Math.abs(w)/(b*g);return{easing:u.easing,duration:1e3*C,amount:w*(C/2)}}eu.prototype.clear=function(){this._inertiaBuffer=[]},eu.prototype.record=function(l){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:o.browser.now(),settings:l})},eu.prototype._drainInertiaBuffer=function(){for(var l=this._inertiaBuffer,p=o.browser.now();l.length>0&&p-l[0].time>160;)l.shift()},eu.prototype._onMoveEnd=function(l){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var p={zoom:0,bearing:0,pitch:0,pan:new o.Point(0,0),pinchAround:void 0,around:void 0},u=0,d=this._inertiaBuffer;u<d.length;u+=1){var g=d[u].settings;p.zoom+=g.zoomDelta||0,p.bearing+=g.bearingDelta||0,p.pitch+=g.pitchDelta||0,g.panDelta&&p.pan._add(g.panDelta),g.around&&(p.around=g.around),g.pinchAround&&(p.pinchAround=g.pinchAround)}var b=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,w={};if(p.pan.mag()){var C=ca(p.pan.mag(),b,o.extend({},tl,l||{}));w.offset=p.pan.mult(C.amount/p.pan.mag()),w.center=this._map.transform.center,tu(w,C)}if(p.zoom){var M=ca(p.zoom,b,Ql);w.zoom=this._map.transform.zoom+M.amount,tu(w,M)}if(p.bearing){var N=ca(p.bearing,b,Vv);w.bearing=this._map.transform.bearing+o.clamp(N.amount,-179,179),tu(w,N)}if(p.pitch){var K=ca(p.pitch,b,qv);w.pitch=this._map.transform.pitch+K.amount,tu(w,K)}if(w.zoom||w.bearing){var X=p.pinchAround===void 0?p.around:p.pinchAround;w.around=X?this._map.unproject(X):this._map.getCenter()}return this.clear(),o.extend(w,{noMoveStart:!0})}};var Bn=function(l){function p(d,g,b,w){w===void 0&&(w={});var C=x.mousePos(g.getCanvasContainer(),b),M=g.unproject(C);l.call(this,d,o.extend({point:C,lngLat:M,originalEvent:b},w)),this._defaultPrevented=!1,this.target=g}l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p;var u={defaultPrevented:{configurable:!0}};return p.prototype.preventDefault=function(){this._defaultPrevented=!0},u.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(p.prototype,u),p}(o.Event),ru=function(l){function p(d,g,b){var w=d==="touchend"?b.changedTouches:b.touches,C=x.touchPos(g.getCanvasContainer(),w),M=C.map(function(X){return g.unproject(X)}),N=C.reduce(function(X,J,ce,ue){return X.add(J.div(ue.length))},new o.Point(0,0)),K=g.unproject(N);l.call(this,d,{points:C,point:N,lngLats:M,lngLat:K,originalEvent:b}),this._defaultPrevented=!1}l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p;var u={defaultPrevented:{configurable:!0}};return p.prototype.preventDefault=function(){this._defaultPrevented=!0},u.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(p.prototype,u),p}(o.Event),Xf=function(l){function p(d,g,b){l.call(this,d,{originalEvent:b}),this._defaultPrevented=!1}l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p;var u={defaultPrevented:{configurable:!0}};return p.prototype.preventDefault=function(){this._defaultPrevented=!0},u.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(p.prototype,u),p}(o.Event),Rn=function(l,p){this._map=l,this._clickTolerance=p.clickTolerance};Rn.prototype.reset=function(){delete this._mousedownPos},Rn.prototype.wheel=function(l){return this._firePreventable(new Xf(l.type,this._map,l))},Rn.prototype.mousedown=function(l,p){return this._mousedownPos=p,this._firePreventable(new Bn(l.type,this._map,l))},Rn.prototype.mouseup=function(l){this._map.fire(new Bn(l.type,this._map,l))},Rn.prototype.click=function(l,p){this._mousedownPos&&this._mousedownPos.dist(p)>=this._clickTolerance||this._map.fire(new Bn(l.type,this._map,l))},Rn.prototype.dblclick=function(l){return this._firePreventable(new Bn(l.type,this._map,l))},Rn.prototype.mouseover=function(l){this._map.fire(new Bn(l.type,this._map,l))},Rn.prototype.mouseout=function(l){this._map.fire(new Bn(l.type,this._map,l))},Rn.prototype.touchstart=function(l){return this._firePreventable(new ru(l.type,this._map,l))},Rn.prototype.touchmove=function(l){this._map.fire(new ru(l.type,this._map,l))},Rn.prototype.touchend=function(l){this._map.fire(new ru(l.type,this._map,l))},Rn.prototype.touchcancel=function(l){this._map.fire(new ru(l.type,this._map,l))},Rn.prototype._firePreventable=function(l){if(this._map.fire(l),l.defaultPrevented)return{}},Rn.prototype.isEnabled=function(){return!0},Rn.prototype.isActive=function(){return!1},Rn.prototype.enable=function(){},Rn.prototype.disable=function(){};var gt=function(l){this._map=l};gt.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},gt.prototype.mousemove=function(l){this._map.fire(new Bn(l.type,this._map,l))},gt.prototype.mousedown=function(){this._delayContextMenu=!0},gt.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Bn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},gt.prototype.contextmenu=function(l){this._delayContextMenu?this._contextMenuEvent=l:this._map.fire(new Bn(l.type,this._map,l)),this._map.listens("contextmenu")&&l.preventDefault()},gt.prototype.isEnabled=function(){return!0},gt.prototype.isActive=function(){return!1},gt.prototype.enable=function(){},gt.prototype.disable=function(){};var $i=function(l,p){this._map=l,this._el=l.getCanvasContainer(),this._container=l.getContainer(),this._clickTolerance=p.clickTolerance||1};function nc(l,p){for(var u={},d=0;d<l.length;d++)u[l[d].identifier]=p[d];return u}$i.prototype.isEnabled=function(){return!!this._enabled},$i.prototype.isActive=function(){return!!this._active},$i.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},$i.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},$i.prototype.mousedown=function(l,p){this.isEnabled()&&l.shiftKey&&l.button===0&&(x.disableDrag(),this._startPos=this._lastPos=p,this._active=!0)},$i.prototype.mousemoveWindow=function(l,p){if(this._active){var u=p;if(!(this._lastPos.equals(u)||!this._box&&u.dist(this._startPos)<this._clickTolerance)){var d=this._startPos;this._lastPos=u,this._box||(this._box=x.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",l));var g=Math.min(d.x,u.x),b=Math.max(d.x,u.x),w=Math.min(d.y,u.y),C=Math.max(d.y,u.y);x.setTransform(this._box,"translate("+g+"px,"+w+"px)"),this._box.style.width=b-g+"px",this._box.style.height=C-w+"px"}}},$i.prototype.mouseupWindow=function(l,p){var u=this;if(this._active&&l.button===0){var d=this._startPos,g=p;if(this.reset(),x.suppressClick(),d.x!==g.x||d.y!==g.y)return this._map.fire(new o.Event("boxzoomend",{originalEvent:l})),{cameraAnimation:function(b){return b.fitScreenCoordinates(d,g,u._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",l)}},$i.prototype.keydown=function(l){this._active&&l.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",l))},$i.prototype.blur=function(){this.reset()},$i.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(x.remove(this._box),this._box=null),x.enableDrag(),delete this._startPos,delete this._lastPos},$i.prototype._fireEvent=function(l,p){return this._map.fire(new o.Event(l,{originalEvent:p}))};var rl=function(l){this.reset(),this.numTouches=l.numTouches};rl.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},rl.prototype.touchstart=function(l,p,u){(this.centroid||u.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=l.timeStamp),u.length===this.numTouches&&(this.centroid=function(d){for(var g=new o.Point(0,0),b=0,w=d;b<w.length;b+=1)g._add(w[b]);return g.div(d.length)}(p),this.touches=nc(u,p)))},rl.prototype.touchmove=function(l,p,u){if(!this.aborted&&this.centroid){var d=nc(u,p);for(var g in this.touches){var b=d[g];(!b||b.dist(this.touches[g])>30)&&(this.aborted=!0)}}},rl.prototype.touchend=function(l,p,u){if((!this.centroid||l.timeStamp-this.startTime>500)&&(this.aborted=!0),u.length===0){var d=!this.aborted&&this.centroid;if(this.reset(),d)return d}};var Ro=function(l){this.singleTap=new rl(l),this.numTaps=l.numTaps,this.reset()};Ro.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Ro.prototype.touchstart=function(l,p,u){this.singleTap.touchstart(l,p,u)},Ro.prototype.touchmove=function(l,p,u){this.singleTap.touchmove(l,p,u)},Ro.prototype.touchend=function(l,p,u){var d=this.singleTap.touchend(l,p,u);if(d){var g=l.timeStamp-this.lastTime<500,b=!this.lastTap||this.lastTap.dist(d)<30;if(g&&b||this.reset(),this.count++,this.lastTime=l.timeStamp,this.lastTap=d,this.count===this.numTaps)return this.reset(),d}};var Vi=function(){this._zoomIn=new Ro({numTouches:1,numTaps:2}),this._zoomOut=new Ro({numTouches:2,numTaps:1}),this.reset()};Vi.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Vi.prototype.touchstart=function(l,p,u){this._zoomIn.touchstart(l,p,u),this._zoomOut.touchstart(l,p,u)},Vi.prototype.touchmove=function(l,p,u){this._zoomIn.touchmove(l,p,u),this._zoomOut.touchmove(l,p,u)},Vi.prototype.touchend=function(l,p,u){var d=this,g=this._zoomIn.touchend(l,p,u),b=this._zoomOut.touchend(l,p,u);return g?(this._active=!0,l.preventDefault(),setTimeout(function(){return d.reset()},0),{cameraAnimation:function(w){return w.easeTo({duration:300,zoom:w.getZoom()+1,around:w.unproject(g)},{originalEvent:l})}}):b?(this._active=!0,l.preventDefault(),setTimeout(function(){return d.reset()},0),{cameraAnimation:function(w){return w.easeTo({duration:300,zoom:w.getZoom()-1,around:w.unproject(b)},{originalEvent:l})}}):void 0},Vi.prototype.touchcancel=function(){this.reset()},Vi.prototype.enable=function(){this._enabled=!0},Vi.prototype.disable=function(){this._enabled=!1,this.reset()},Vi.prototype.isEnabled=function(){return this._enabled},Vi.prototype.isActive=function(){return this._active};var uh={0:1,2:2},it=function(l){this.reset(),this._clickTolerance=l.clickTolerance||1};it.prototype.blur=function(){this.reset()},it.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},it.prototype._correctButton=function(l,p){return!1},it.prototype._move=function(l,p){return{}},it.prototype.mousedown=function(l,p){if(!this._lastPoint){var u=x.mouseButton(l);this._correctButton(l,u)&&(this._lastPoint=p,this._eventButton=u)}},it.prototype.mousemoveWindow=function(l,p){var u=this._lastPoint;if(u){if(l.preventDefault(),function(d,g){var b=uh[g];return d.buttons===void 0||(d.buttons&b)!==b}(l,this._eventButton))this.reset();else if(this._moved||!(p.dist(u)<this._clickTolerance))return this._moved=!0,this._lastPoint=p,this._move(u,p)}},it.prototype.mouseupWindow=function(l){this._lastPoint&&x.mouseButton(l)===this._eventButton&&(this._moved&&x.suppressClick(),this.reset())},it.prototype.enable=function(){this._enabled=!0},it.prototype.disable=function(){this._enabled=!1,this.reset()},it.prototype.isEnabled=function(){return this._enabled},it.prototype.isActive=function(){return this._active};var ch=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.mousedown=function(u,d){l.prototype.mousedown.call(this,u,d),this._lastPoint&&(this._active=!0)},p.prototype._correctButton=function(u,d){return d===0&&!u.ctrlKey},p.prototype._move=function(u,d){return{around:d,panDelta:d.sub(u)}},p}(it),ic=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype._correctButton=function(u,d){return d===0&&u.ctrlKey||d===2},p.prototype._move=function(u,d){var g=.8*(d.x-u.x);if(g)return this._active=!0,{bearingDelta:g}},p.prototype.contextmenu=function(u){u.preventDefault()},p}(it),ph=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype._correctButton=function(u,d){return d===0&&u.ctrlKey||d===2},p.prototype._move=function(u,d){var g=-.5*(d.y-u.y);if(g)return this._active=!0,{pitchDelta:g}},p.prototype.contextmenu=function(u){u.preventDefault()},p}(it),ho=function(l){this._minTouches=1,this._clickTolerance=l.clickTolerance||1,this.reset()};ho.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new o.Point(0,0)},ho.prototype.touchstart=function(l,p,u){return this._calculateTransform(l,p,u)},ho.prototype.touchmove=function(l,p,u){if(this._active&&!(u.length<this._minTouches))return l.preventDefault(),this._calculateTransform(l,p,u)},ho.prototype.touchend=function(l,p,u){this._calculateTransform(l,p,u),this._active&&u.length<this._minTouches&&this.reset()},ho.prototype.touchcancel=function(){this.reset()},ho.prototype._calculateTransform=function(l,p,u){u.length>0&&(this._active=!0);var d=nc(u,p),g=new o.Point(0,0),b=new o.Point(0,0),w=0;for(var C in d){var M=d[C],N=this._touches[C];N&&(g._add(M),b._add(M.sub(N)),w++,d[C]=M)}if(this._touches=d,!(w<this._minTouches)&&b.mag()){var K=b.div(w);if(this._sum._add(K),!(this._sum.mag()<this._clickTolerance))return{around:g.div(w),panDelta:K}}},ho.prototype.enable=function(){this._enabled=!0},ho.prototype.disable=function(){this._enabled=!1,this.reset()},ho.prototype.isEnabled=function(){return this._enabled},ho.prototype.isActive=function(){return this._active};var qi=function(){this.reset()};function oc(l,p,u){for(var d=0;d<l.length;d++)if(l[d].identifier===u)return p[d]}function ac(l,p){return Math.log(l/p)/Math.LN2}qi.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},qi.prototype._start=function(l){},qi.prototype._move=function(l,p,u){return{}},qi.prototype.touchstart=function(l,p,u){this._firstTwoTouches||u.length<2||(this._firstTwoTouches=[u[0].identifier,u[1].identifier],this._start([p[0],p[1]]))},qi.prototype.touchmove=function(l,p,u){if(this._firstTwoTouches){l.preventDefault();var d=this._firstTwoTouches,g=d[1],b=oc(u,p,d[0]),w=oc(u,p,g);if(b&&w){var C=this._aroundCenter?null:b.add(w).div(2);return this._move([b,w],C,l)}}},qi.prototype.touchend=function(l,p,u){if(this._firstTwoTouches){var d=this._firstTwoTouches,g=d[1],b=oc(u,p,d[0]),w=oc(u,p,g);b&&w||(this._active&&x.suppressClick(),this.reset())}},qi.prototype.touchcancel=function(){this.reset()},qi.prototype.enable=function(l){this._enabled=!0,this._aroundCenter=!!l&&l.around==="center"},qi.prototype.disable=function(){this._enabled=!1,this.reset()},qi.prototype.isEnabled=function(){return this._enabled},qi.prototype.isActive=function(){return this._active};var Wi=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.reset=function(){l.prototype.reset.call(this),delete this._distance,delete this._startDistance},p.prototype._start=function(u){this._startDistance=this._distance=u[0].dist(u[1])},p.prototype._move=function(u,d){var g=this._distance;if(this._distance=u[0].dist(u[1]),this._active||!(Math.abs(ac(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:ac(this._distance,g),pinchAround:d}},p}(qi);function pa(l,p){return 180*l.angleWith(p)/Math.PI}var Yf=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.reset=function(){l.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},p.prototype._start=function(u){this._startVector=this._vector=u[0].sub(u[1]),this._minDiameter=u[0].dist(u[1])},p.prototype._move=function(u,d){var g=this._vector;if(this._vector=u[0].sub(u[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:pa(this._vector,g),pinchAround:d}},p.prototype._isBelowThreshold=function(u){this._minDiameter=Math.min(this._minDiameter,u.mag());var d=25/(Math.PI*this._minDiameter)*360,g=pa(u,this._startVector);return Math.abs(g)<d},p}(qi);function nu(l){return Math.abs(l.y)>Math.abs(l.x)}var hh=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.reset=function(){l.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},p.prototype._start=function(u){this._lastPoints=u,nu(u[0].sub(u[1]))&&(this._valid=!1)},p.prototype._move=function(u,d,g){var b=u[0].sub(this._lastPoints[0]),w=u[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(b,w,g.timeStamp),this._valid)return this._lastPoints=u,this._active=!0,{pitchDelta:(b.y+w.y)/2*-.5}},p.prototype.gestureBeginsVertically=function(u,d,g){if(this._valid!==void 0)return this._valid;var b=u.mag()>=2,w=d.mag()>=2;if(b||w){if(!b||!w)return this._firstMove===void 0&&(this._firstMove=g),g-this._firstMove<100&&void 0;var C=u.y>0==d.y>0;return nu(u)&&nu(d)&&C}},p}(qi),dh={panStep:100,bearingStep:15,pitchStep:10},Lo=function(){var l=dh;this._panStep=l.panStep,this._bearingStep=l.bearingStep,this._pitchStep=l.pitchStep,this._rotationDisabled=!1};function no(l){return l*(2-l)}Lo.prototype.blur=function(){this.reset()},Lo.prototype.reset=function(){this._active=!1},Lo.prototype.keydown=function(l){var p=this;if(!(l.altKey||l.ctrlKey||l.metaKey)){var u=0,d=0,g=0,b=0,w=0;switch(l.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:l.shiftKey?d=-1:(l.preventDefault(),b=-1);break;case 39:l.shiftKey?d=1:(l.preventDefault(),b=1);break;case 38:l.shiftKey?g=1:(l.preventDefault(),w=-1);break;case 40:l.shiftKey?g=-1:(l.preventDefault(),w=1);break;default:return}return this._rotationDisabled&&(d=0,g=0),{cameraAnimation:function(C){var M=C.getZoom();C.easeTo({duration:300,easeId:"keyboardHandler",easing:no,zoom:u?Math.round(M)+u*(l.shiftKey?2:1):M,bearing:C.getBearing()+d*p._bearingStep,pitch:C.getPitch()+g*p._pitchStep,offset:[-b*p._panStep,-w*p._panStep],center:C.getCenter()},{originalEvent:l})}}}},Lo.prototype.enable=function(){this._enabled=!0},Lo.prototype.disable=function(){this._enabled=!1,this.reset()},Lo.prototype.isEnabled=function(){return this._enabled},Lo.prototype.isActive=function(){return this._active},Lo.prototype.disableRotation=function(){this._rotationDisabled=!0},Lo.prototype.enableRotation=function(){this._rotationDisabled=!1};var cr=function(l,p){this._map=l,this._el=l.getCanvasContainer(),this._handler=p,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,o.bindAll(["_onTimeout"],this)};cr.prototype.setZoomRate=function(l){this._defaultZoomRate=l},cr.prototype.setWheelZoomRate=function(l){this._wheelZoomRate=l},cr.prototype.isEnabled=function(){return!!this._enabled},cr.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},cr.prototype.isZooming=function(){return!!this._zooming},cr.prototype.enable=function(l){this.isEnabled()||(this._enabled=!0,this._aroundCenter=l&&l.around==="center")},cr.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},cr.prototype.wheel=function(l){if(this.isEnabled()){var p=l.deltaMode===o.window.WheelEvent.DOM_DELTA_LINE?40*l.deltaY:l.deltaY,u=o.browser.now(),d=u-(this._lastWheelEventTime||0);this._lastWheelEventTime=u,p!==0&&p%4.000244140625==0?this._type="wheel":p!==0&&Math.abs(p)<4?this._type="trackpad":d>400?(this._type=null,this._lastValue=p,this._timeout=setTimeout(this._onTimeout,40,l)):this._type||(this._type=Math.abs(d*p)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,p+=this._lastValue)),l.shiftKey&&p&&(p/=4),this._type&&(this._lastWheelEvent=l,this._delta-=p,this._active||this._start(l)),l.preventDefault()}},cr.prototype._onTimeout=function(l){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(l)},cr.prototype._start=function(l){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var p=x.mousePos(this._el,l);this._around=o.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(p)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},cr.prototype.renderFrame=function(){var l=this;if(this._frameId&&(this._frameId=null,this.isActive())){var p=this._map.transform;if(this._delta!==0){var u=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,d=2/(1+Math.exp(-Math.abs(this._delta*u)));this._delta<0&&d!==0&&(d=1/d);var g=typeof this._targetZoom=="number"?p.zoomScale(this._targetZoom):p.scale;this._targetZoom=Math.min(p.maxZoom,Math.max(p.minZoom,p.scaleZoom(g*d))),this._type==="wheel"&&(this._startZoom=p.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var b,w=typeof this._targetZoom=="number"?this._targetZoom:p.zoom,C=this._startZoom,M=this._easing,N=!1;if(this._type==="wheel"&&C&&M){var K=Math.min((o.browser.now()-this._lastWheelEventTime)/200,1),X=M(K);b=o.number(C,w,X),K<1?this._frameId||(this._frameId=!0):N=!0}else b=w,N=!0;return this._active=!0,N&&(this._active=!1,this._finishTimeout=setTimeout(function(){l._zooming=!1,l._handler._triggerRenderFrame(),delete l._targetZoom,delete l._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!N,zoomDelta:b-p.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},cr.prototype._smoothOutEasing=function(l){var p=o.ease;if(this._prevEase){var u=this._prevEase,d=(o.browser.now()-u.start)/u.duration,g=u.easing(d+.01)-u.easing(d),b=.27/Math.sqrt(g*g+1e-4)*.01,w=Math.sqrt(.0729-b*b);p=o.bezier(b,w,.25,1)}return this._prevEase={start:o.browser.now(),duration:l,easing:p},p},cr.prototype.blur=function(){this.reset()},cr.prototype.reset=function(){this._active=!1};var Ho=function(l,p){this._clickZoom=l,this._tapZoom=p};Ho.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Ho.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Ho.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Ho.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var fo=function(){this.reset()};fo.prototype.reset=function(){this._active=!1},fo.prototype.blur=function(){this.reset()},fo.prototype.dblclick=function(l,p){return l.preventDefault(),{cameraAnimation:function(u){u.easeTo({duration:300,zoom:u.getZoom()+(l.shiftKey?-1:1),around:u.unproject(p)},{originalEvent:l})}}},fo.prototype.enable=function(){this._enabled=!0},fo.prototype.disable=function(){this._enabled=!1,this.reset()},fo.prototype.isEnabled=function(){return this._enabled},fo.prototype.isActive=function(){return this._active};var li=function(){this._tap=new Ro({numTouches:1,numTaps:1}),this.reset()};li.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},li.prototype.touchstart=function(l,p,u){this._swipePoint||(this._tapTime&&l.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?u.length>0&&(this._swipePoint=p[0],this._swipeTouch=u[0].identifier):this._tap.touchstart(l,p,u))},li.prototype.touchmove=function(l,p,u){if(this._tapTime){if(this._swipePoint){if(u[0].identifier!==this._swipeTouch)return;var d=p[0],g=d.y-this._swipePoint.y;return this._swipePoint=d,l.preventDefault(),this._active=!0,{zoomDelta:g/128}}}else this._tap.touchmove(l,p,u)},li.prototype.touchend=function(l,p,u){this._tapTime?this._swipePoint&&u.length===0&&this.reset():this._tap.touchend(l,p,u)&&(this._tapTime=l.timeStamp)},li.prototype.touchcancel=function(){this.reset()},li.prototype.enable=function(){this._enabled=!0},li.prototype.disable=function(){this._enabled=!1,this.reset()},li.prototype.isEnabled=function(){return this._enabled},li.prototype.isActive=function(){return this._active};var Ss=function(l,p,u){this._el=l,this._mousePan=p,this._touchPan=u};Ss.prototype.enable=function(l){this._inertiaOptions=l||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},Ss.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},Ss.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},Ss.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Da=function(l,p,u){this._pitchWithRotate=l.pitchWithRotate,this._mouseRotate=p,this._mousePitch=u};Da.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Da.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Da.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Da.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var zo=function(l,p,u,d){this._el=l,this._touchZoom=p,this._touchRotate=u,this._tapDragZoom=d,this._rotationDisabled=!1,this._enabled=!0};zo.prototype.enable=function(l){this._touchZoom.enable(l),this._rotationDisabled||this._touchRotate.enable(l),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},zo.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},zo.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},zo.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},zo.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},zo.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var _i=function(l){return l.zoom||l.drag||l.pitch||l.rotate},iu=function(l){function p(){l.apply(this,arguments)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p}(o.Event);function Ct(l){return l.panDelta&&l.panDelta.mag()||l.zoomDelta||l.bearingDelta||l.pitchDelta}var _t=function(l,p){this._map=l,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new eu(l),this._bearingSnap=p.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(p),o.bindAll(["handleEvent","handleWindowEvent"],this);var u=this._el;this._listeners=[[u,"touchstart",{passive:!0}],[u,"touchmove",{passive:!1}],[u,"touchend",void 0],[u,"touchcancel",void 0],[u,"mousedown",void 0],[u,"mousemove",void 0],[u,"mouseup",void 0],[o.window.document,"mousemove",{capture:!0}],[o.window.document,"mouseup",void 0],[u,"mouseover",void 0],[u,"mouseout",void 0],[u,"dblclick",void 0],[u,"click",void 0],[u,"keydown",{capture:!1}],[u,"keyup",void 0],[u,"wheel",{passive:!1}],[u,"contextmenu",void 0],[o.window,"blur",void 0]];for(var d=0,g=this._listeners;d<g.length;d+=1){var b=g[d],w=b[0];x.addEventListener(w,b[1],w===o.window.document?this.handleWindowEvent:this.handleEvent,b[2])}};_t.prototype.destroy=function(){for(var l=0,p=this._listeners;l<p.length;l+=1){var u=p[l],d=u[0];x.removeEventListener(d,u[1],d===o.window.document?this.handleWindowEvent:this.handleEvent,u[2])}},_t.prototype._addDefaultHandlers=function(l){var p=this._map,u=p.getCanvasContainer();this._add("mapEvent",new Rn(p,l));var d=p.boxZoom=new $i(p,l);this._add("boxZoom",d);var g=new Vi,b=new fo;p.doubleClickZoom=new Ho(b,g),this._add("tapZoom",g),this._add("clickZoom",b);var w=new li;this._add("tapDragZoom",w);var C=p.touchPitch=new hh;this._add("touchPitch",C);var M=new ic(l),N=new ph(l);p.dragRotate=new Da(l,M,N),this._add("mouseRotate",M,["mousePitch"]),this._add("mousePitch",N,["mouseRotate"]);var K=new ch(l),X=new ho(l);p.dragPan=new Ss(u,K,X),this._add("mousePan",K),this._add("touchPan",X,["touchZoom","touchRotate"]);var J=new Yf,ce=new Wi;p.touchZoomRotate=new zo(u,ce,J,w),this._add("touchRotate",J,["touchPan","touchZoom"]),this._add("touchZoom",ce,["touchPan","touchRotate"]);var ue=p.scrollZoom=new cr(p,this);this._add("scrollZoom",ue,["mousePan"]);var ve=p.keyboard=new Lo;this._add("keyboard",ve),this._add("blockableMapEvent",new gt(p));for(var ae=0,ge=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];ae<ge.length;ae+=1){var we=ge[ae];l.interactive&&l[we]&&p[we].enable(l[we])}},_t.prototype._add=function(l,p,u){this._handlers.push({handlerName:l,handler:p,allowed:u}),this._handlersById[l]=p},_t.prototype.stop=function(l){if(!this._updatingCamera){for(var p=0,u=this._handlers;p<u.length;p+=1)u[p].handler.reset();this._inertia.clear(),this._fireEvents({},{},l),this._changes=[]}},_t.prototype.isActive=function(){for(var l=0,p=this._handlers;l<p.length;l+=1)if(p[l].handler.isActive())return!0;return!1},_t.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},_t.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},_t.prototype.isMoving=function(){return!!_i(this._eventsInProgress)||this.isZooming()},_t.prototype._blockedByActive=function(l,p,u){for(var d in l)if(d!==u&&(!p||p.indexOf(d)<0))return!0;return!1},_t.prototype.handleWindowEvent=function(l){this.handleEvent(l,l.type+"Window")},_t.prototype._getMapTouches=function(l){for(var p=[],u=0,d=l;u<d.length;u+=1){var g=d[u];this._el.contains(g.target)&&p.push(g)}return p},_t.prototype.handleEvent=function(l,p){this._updatingCamera=!0;for(var u=l.type==="renderFrame"?void 0:l,d={needsRenderFrame:!1},g={},b={},w=l.touches?this._getMapTouches(l.touches):void 0,C=w?x.touchPos(this._el,w):x.mousePos(this._el,l),M=0,N=this._handlers;M<N.length;M+=1){var K=N[M],X=K.handlerName,J=K.handler,ce=K.allowed;if(J.isEnabled()){var ue=void 0;this._blockedByActive(b,ce,X)?J.reset():J[p||l.type]&&(ue=J[p||l.type](l,C,w),this.mergeHandlerResult(d,g,ue,X,u),ue&&ue.needsRenderFrame&&this._triggerRenderFrame()),(ue||J.isActive())&&(b[X]=J)}}var ve={};for(var ae in this._previousActiveHandlers)b[ae]||(ve[ae]=u);this._previousActiveHandlers=b,(Object.keys(ve).length||Ct(d))&&(this._changes.push([d,g,ve]),this._triggerRenderFrame()),(Object.keys(b).length||Ct(d))&&this._map._stop(!0),this._updatingCamera=!1;var ge=d.cameraAnimation;ge&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ge(this._map))},_t.prototype.mergeHandlerResult=function(l,p,u,d,g){if(u){o.extend(l,u);var b={handlerName:d,originalEvent:u.originalEvent||g};u.zoomDelta!==void 0&&(p.zoom=b),u.panDelta!==void 0&&(p.drag=b),u.pitchDelta!==void 0&&(p.pitch=b),u.bearingDelta!==void 0&&(p.rotate=b)}},_t.prototype._applyChanges=function(){for(var l={},p={},u={},d=0,g=this._changes;d<g.length;d+=1){var b=g[d],w=b[0],C=b[1],M=b[2];w.panDelta&&(l.panDelta=(l.panDelta||new o.Point(0,0))._add(w.panDelta)),w.zoomDelta&&(l.zoomDelta=(l.zoomDelta||0)+w.zoomDelta),w.bearingDelta&&(l.bearingDelta=(l.bearingDelta||0)+w.bearingDelta),w.pitchDelta&&(l.pitchDelta=(l.pitchDelta||0)+w.pitchDelta),w.around!==void 0&&(l.around=w.around),w.pinchAround!==void 0&&(l.pinchAround=w.pinchAround),w.noInertia&&(l.noInertia=w.noInertia),o.extend(p,C),o.extend(u,M)}this._updateMapTransform(l,p,u),this._changes=[]},_t.prototype._updateMapTransform=function(l,p,u){var d=this._map,g=d.transform;if(!Ct(l))return this._fireEvents(p,u,!0);var b=l.panDelta,w=l.zoomDelta,C=l.bearingDelta,M=l.pitchDelta,N=l.around,K=l.pinchAround;K!==void 0&&(N=K),d._stop(!0),N=N||d.transform.centerPoint;var X=g.pointLocation(b?N.sub(b):N);C&&(g.bearing+=C),M&&(g.pitch+=M),w&&(g.zoom+=w),g.setLocationAtPoint(X,N),this._map._update(),l.noInertia||this._inertia.record(l),this._fireEvents(p,u,!0)},_t.prototype._fireEvents=function(l,p,u){var d=this,g=_i(this._eventsInProgress),b=_i(l),w={};for(var C in l)this._eventsInProgress[C]||(w[C+"start"]=l[C].originalEvent),this._eventsInProgress[C]=l[C];for(var M in!g&&b&&this._fireEvent("movestart",b.originalEvent),w)this._fireEvent(M,w[M]);for(var N in b&&this._fireEvent("move",b.originalEvent),l)this._fireEvent(N,l[N].originalEvent);var K,X={};for(var J in this._eventsInProgress){var ce=this._eventsInProgress[J],ue=ce.handlerName,ve=ce.originalEvent;this._handlersById[ue].isActive()||(delete this._eventsInProgress[J],X[J+"end"]=K=p[ue]||ve)}for(var ae in X)this._fireEvent(ae,X[ae]);var ge=_i(this._eventsInProgress);if(u&&(g||b)&&!ge){this._updatingCamera=!0;var we=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Ae=function(Ne){return Ne!==0&&-d._bearingSnap<Ne&&Ne<d._bearingSnap};we?(Ae(we.bearing||this._map.getBearing())&&(we.bearing=0),this._map.easeTo(we,{originalEvent:K})):(this._map.fire(new o.Event("moveend",{originalEvent:K})),Ae(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},_t.prototype._fireEvent=function(l,p){this._map.fire(new o.Event(l,p?{originalEvent:p}:{}))},_t.prototype._requestFrame=function(){var l=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(p){delete l._frameId,l.handleEvent(new iu("renderFrame",{timeStamp:p})),l._applyChanges()})},_t.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var sc=function(l){function p(u,d){l.call(this),this._moving=!1,this._zooming=!1,this.transform=u,this._bearingSnap=d.bearingSnap,o.bindAll(["_renderFrameCallback"],this)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.getCenter=function(){return new o.LngLat(this.transform.center.lng,this.transform.center.lat)},p.prototype.setCenter=function(u,d){return this.jumpTo({center:u},d)},p.prototype.panBy=function(u,d,g){return u=o.Point.convert(u).mult(-1),this.panTo(this.transform.center,o.extend({offset:u},d),g)},p.prototype.panTo=function(u,d,g){return this.easeTo(o.extend({center:u},d),g)},p.prototype.getZoom=function(){return this.transform.zoom},p.prototype.setZoom=function(u,d){return this.jumpTo({zoom:u},d),this},p.prototype.zoomTo=function(u,d,g){return this.easeTo(o.extend({zoom:u},d),g)},p.prototype.zoomIn=function(u,d){return this.zoomTo(this.getZoom()+1,u,d),this},p.prototype.zoomOut=function(u,d){return this.zoomTo(this.getZoom()-1,u,d),this},p.prototype.getBearing=function(){return this.transform.bearing},p.prototype.setBearing=function(u,d){return this.jumpTo({bearing:u},d),this},p.prototype.getPadding=function(){return this.transform.padding},p.prototype.setPadding=function(u,d){return this.jumpTo({padding:u},d),this},p.prototype.rotateTo=function(u,d,g){return this.easeTo(o.extend({bearing:u},d),g)},p.prototype.resetNorth=function(u,d){return this.rotateTo(0,o.extend({duration:1e3},u),d),this},p.prototype.resetNorthPitch=function(u,d){return this.easeTo(o.extend({bearing:0,pitch:0,duration:1e3},u),d),this},p.prototype.snapToNorth=function(u,d){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(u,d):this},p.prototype.getPitch=function(){return this.transform.pitch},p.prototype.setPitch=function(u,d){return this.jumpTo({pitch:u},d),this},p.prototype.cameraForBounds=function(u,d){u=o.LngLatBounds.convert(u);var g=d&&d.bearing||0;return this._cameraForBoxAndBearing(u.getNorthWest(),u.getSouthEast(),g,d)},p.prototype._cameraForBoxAndBearing=function(u,d,g,b){var w={top:0,bottom:0,right:0,left:0};if(typeof(b=o.extend({padding:w,offset:[0,0],maxZoom:this.transform.maxZoom},b)).padding=="number"){var C=b.padding;b.padding={top:C,bottom:C,right:C,left:C}}b.padding=o.extend(w,b.padding);var M=this.transform,N=M.padding,K=M.project(o.LngLat.convert(u)),X=M.project(o.LngLat.convert(d)),J=K.rotate(-g*Math.PI/180),ce=X.rotate(-g*Math.PI/180),ue=new o.Point(Math.max(J.x,ce.x),Math.max(J.y,ce.y)),ve=new o.Point(Math.min(J.x,ce.x),Math.min(J.y,ce.y)),ae=ue.sub(ve),ge=(M.width-(N.left+N.right+b.padding.left+b.padding.right))/ae.x,we=(M.height-(N.top+N.bottom+b.padding.top+b.padding.bottom))/ae.y;if(!(we<0||ge<0)){var Ae=Math.min(M.scaleZoom(M.scale*Math.min(ge,we)),b.maxZoom),Ne=typeof b.offset.x=="number"?new o.Point(b.offset.x,b.offset.y):o.Point.convert(b.offset),De=new o.Point((b.padding.left-b.padding.right)/2,(b.padding.top-b.padding.bottom)/2).rotate(g*Math.PI/180),Fe=Ne.add(De).mult(M.scale/M.zoomScale(Ae));return{center:M.unproject(K.add(X).div(2).sub(Fe)),zoom:Ae,bearing:g}}o.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},p.prototype.fitBounds=function(u,d,g){return this._fitInternal(this.cameraForBounds(u,d),d,g)},p.prototype.fitScreenCoordinates=function(u,d,g,b,w){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(o.Point.convert(u)),this.transform.pointLocation(o.Point.convert(d)),g,b),b,w)},p.prototype._fitInternal=function(u,d,g){return u?(delete(d=o.extend(u,d)).padding,d.linear?this.easeTo(d,g):this.flyTo(d,g)):this},p.prototype.jumpTo=function(u,d){this.stop();var g=this.transform,b=!1,w=!1,C=!1;return"zoom"in u&&g.zoom!==+u.zoom&&(b=!0,g.zoom=+u.zoom),u.center!==void 0&&(g.center=o.LngLat.convert(u.center)),"bearing"in u&&g.bearing!==+u.bearing&&(w=!0,g.bearing=+u.bearing),"pitch"in u&&g.pitch!==+u.pitch&&(C=!0,g.pitch=+u.pitch),u.padding==null||g.isPaddingEqual(u.padding)||(g.padding=u.padding),this.fire(new o.Event("movestart",d)).fire(new o.Event("move",d)),b&&this.fire(new o.Event("zoomstart",d)).fire(new o.Event("zoom",d)).fire(new o.Event("zoomend",d)),w&&this.fire(new o.Event("rotatestart",d)).fire(new o.Event("rotate",d)).fire(new o.Event("rotateend",d)),C&&this.fire(new o.Event("pitchstart",d)).fire(new o.Event("pitch",d)).fire(new o.Event("pitchend",d)),this.fire(new o.Event("moveend",d))},p.prototype.easeTo=function(u,d){var g=this;this._stop(!1,u.easeId),((u=o.extend({offset:[0,0],duration:500,easing:o.ease},u)).animate===!1||!u.essential&&o.browser.prefersReducedMotion)&&(u.duration=0);var b=this.transform,w=this.getZoom(),C=this.getBearing(),M=this.getPitch(),N=this.getPadding(),K="zoom"in u?+u.zoom:w,X="bearing"in u?this._normalizeBearing(u.bearing,C):C,J="pitch"in u?+u.pitch:M,ce="padding"in u?u.padding:b.padding,ue=o.Point.convert(u.offset),ve=b.centerPoint.add(ue),ae=b.pointLocation(ve),ge=o.LngLat.convert(u.center||ae);this._normalizeCenter(ge);var we,Ae,Ne=b.project(ae),De=b.project(ge).sub(Ne),Fe=b.zoomScale(K-w);u.around&&(we=o.LngLat.convert(u.around),Ae=b.locationPoint(we));var Ke={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||K!==w,this._rotating=this._rotating||C!==X,this._pitching=this._pitching||J!==M,this._padding=!b.isPaddingEqual(ce),this._easeId=u.easeId,this._prepareEase(d,u.noMoveStart,Ke),this._ease(function(et){if(g._zooming&&(b.zoom=o.number(w,K,et)),g._rotating&&(b.bearing=o.number(C,X,et)),g._pitching&&(b.pitch=o.number(M,J,et)),g._padding&&(b.interpolatePadding(N,ce,et),ve=b.centerPoint.add(ue)),we)b.setLocationAtPoint(we,Ae);else{var Qe=b.zoomScale(b.zoom-w),dt=K>w?Math.min(2,Fe):Math.max(.5,Fe),kt=Math.pow(dt,1-et),Mt=b.unproject(Ne.add(De.mult(et*kt)).mult(Qe));b.setLocationAtPoint(b.renderWorldCopies?Mt.wrap():Mt,ve)}g._fireMoveEvents(d)},function(et){g._afterEase(d,et)},u),this},p.prototype._prepareEase=function(u,d,g){g===void 0&&(g={}),this._moving=!0,d||g.moving||this.fire(new o.Event("movestart",u)),this._zooming&&!g.zooming&&this.fire(new o.Event("zoomstart",u)),this._rotating&&!g.rotating&&this.fire(new o.Event("rotatestart",u)),this._pitching&&!g.pitching&&this.fire(new o.Event("pitchstart",u))},p.prototype._fireMoveEvents=function(u){this.fire(new o.Event("move",u)),this._zooming&&this.fire(new o.Event("zoom",u)),this._rotating&&this.fire(new o.Event("rotate",u)),this._pitching&&this.fire(new o.Event("pitch",u))},p.prototype._afterEase=function(u,d){if(!this._easeId||!d||this._easeId!==d){delete this._easeId;var g=this._zooming,b=this._rotating,w=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,g&&this.fire(new o.Event("zoomend",u)),b&&this.fire(new o.Event("rotateend",u)),w&&this.fire(new o.Event("pitchend",u)),this.fire(new o.Event("moveend",u))}},p.prototype.flyTo=function(u,d){var g=this;if(!u.essential&&o.browser.prefersReducedMotion){var b=o.pick(u,["center","zoom","bearing","pitch","around"]);return this.jumpTo(b,d)}this.stop(),u=o.extend({offset:[0,0],speed:1.2,curve:1.42,easing:o.ease},u);var w=this.transform,C=this.getZoom(),M=this.getBearing(),N=this.getPitch(),K=this.getPadding(),X="zoom"in u?o.clamp(+u.zoom,w.minZoom,w.maxZoom):C,J="bearing"in u?this._normalizeBearing(u.bearing,M):M,ce="pitch"in u?+u.pitch:N,ue="padding"in u?u.padding:w.padding,ve=w.zoomScale(X-C),ae=o.Point.convert(u.offset),ge=w.centerPoint.add(ae),we=w.pointLocation(ge),Ae=o.LngLat.convert(u.center||we);this._normalizeCenter(Ae);var Ne=w.project(we),De=w.project(Ae).sub(Ne),Fe=u.curve,Ke=Math.max(w.width,w.height),et=Ke/ve,Qe=De.mag();if("minZoom"in u){var dt=o.clamp(Math.min(u.minZoom,C,X),w.minZoom,w.maxZoom),kt=Ke/w.zoomScale(dt-C);Fe=Math.sqrt(kt/Qe*2)}var Mt=Fe*Fe;function At(Ut){var Nt=(et*et-Ke*Ke+(Ut?-1:1)*Mt*Mt*Qe*Qe)/(2*(Ut?et:Ke)*Mt*Qe);return Math.log(Math.sqrt(Nt*Nt+1)-Nt)}function xr(Ut){return(Math.exp(Ut)-Math.exp(-Ut))/2}function mt(Ut){return(Math.exp(Ut)+Math.exp(-Ut))/2}var Gt=At(0),rr=function(Ut){return mt(Gt)/mt(Gt+Fe*Ut)},Wt=function(Ut){return Ke*((mt(Gt)*(xr(Nt=Gt+Fe*Ut)/mt(Nt))-xr(Gt))/Mt)/Qe;var Nt},Vt=(At(1)-Gt)/Fe;if(Math.abs(Qe)<1e-6||!isFinite(Vt)){if(Math.abs(Ke-et)<1e-6)return this.easeTo(u,d);var Jt=et<Ke?-1:1;Vt=Math.abs(Math.log(et/Ke))/Fe,Wt=function(){return 0},rr=function(Ut){return Math.exp(Jt*Fe*Ut)}}return u.duration="duration"in u?+u.duration:1e3*Vt/("screenSpeed"in u?+u.screenSpeed/Fe:+u.speed),u.maxDuration&&u.duration>u.maxDuration&&(u.duration=0),this._zooming=!0,this._rotating=M!==J,this._pitching=ce!==N,this._padding=!w.isPaddingEqual(ue),this._prepareEase(d,!1),this._ease(function(Ut){var Nt=Ut*Vt,$n=1/rr(Nt);w.zoom=Ut===1?X:C+w.scaleZoom($n),g._rotating&&(w.bearing=o.number(M,J,Ut)),g._pitching&&(w.pitch=o.number(N,ce,Ut)),g._padding&&(w.interpolatePadding(K,ue,Ut),ge=w.centerPoint.add(ae));var gn=Ut===1?Ae:w.unproject(Ne.add(De.mult(Wt(Nt))).mult($n));w.setLocationAtPoint(w.renderWorldCopies?gn.wrap():gn,ge),g._fireMoveEvents(d)},function(){return g._afterEase(d)},u),this},p.prototype.isEasing=function(){return!!this._easeFrameId},p.prototype.stop=function(){return this._stop()},p.prototype._stop=function(u,d){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var g=this._onEaseEnd;delete this._onEaseEnd,g.call(this,d)}if(!u){var b=this.handlers;b&&b.stop(!1)}return this},p.prototype._ease=function(u,d,g){g.animate===!1||g.duration===0?(u(1),d()):(this._easeStart=o.browser.now(),this._easeOptions=g,this._onEaseFrame=u,this._onEaseEnd=d,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},p.prototype._renderFrameCallback=function(){var u=Math.min((o.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(u)),u<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},p.prototype._normalizeBearing=function(u,d){u=o.wrap(u,-180,180);var g=Math.abs(u-d);return Math.abs(u-360-d)<g&&(u-=360),Math.abs(u+360-d)<g&&(u+=360),u},p.prototype._normalizeCenter=function(u){var d=this.transform;if(d.renderWorldCopies&&!d.lngRange){var g=u.lng-d.center.lng;u.lng+=g>180?-360:g<-180?360:0}},p}(o.Evented),xi=function(l){l===void 0&&(l={}),this.options=l,o.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};xi.prototype.getDefaultPosition=function(){return"bottom-right"},xi.prototype.onAdd=function(l){var p=this.options&&this.options.compact;return this._map=l,this._container=x.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=x.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=x.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),p&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),p===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},xi.prototype.onRemove=function(){x.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},xi.prototype._setElementTitle=function(l,p){var u=this._map._getUIString("AttributionControl."+p);l.title=u,l.setAttribute("aria-label",u)},xi.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},xi.prototype._updateEditLink=function(){var l=this._editLink;l||(l=this._editLink=this._container.querySelector(".mapbox-improve-map"));var p=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||o.config.ACCESS_TOKEN}];if(l){var u=p.reduce(function(d,g,b){return g.value&&(d+=g.key+"="+g.value+(b<p.length-1?"&":"")),d},"?");l.href=o.config.FEEDBACK_URL+"/"+u+(this._map._hash?this._map._hash.getHashString(!0):""),l.rel="noopener nofollow",this._setElementTitle(l,"MapFeedback")}},xi.prototype._updateData=function(l){!l||l.sourceDataType!=="metadata"&&l.sourceDataType!=="visibility"&&l.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},xi.prototype._updateAttributions=function(){if(this._map.style){var l=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?l=l.concat(this.options.customAttribution.map(function(C){return typeof C!="string"?"":C})):typeof this.options.customAttribution=="string"&&l.push(this.options.customAttribution)),this._map.style.stylesheet){var p=this._map.style.stylesheet;this.styleOwner=p.owner,this.styleId=p.id}var u=this._map.style.sourceCaches;for(var d in u){var g=u[d];if(g.used){var b=g.getSource();b.attribution&&l.indexOf(b.attribution)<0&&l.push(b.attribution)}}l.sort(function(C,M){return C.length-M.length});var w=(l=l.filter(function(C,M){for(var N=M+1;N<l.length;N++)if(l[N].indexOf(C)>=0)return!1;return!0})).join(" | ");w!==this._attribHTML&&(this._attribHTML=w,l.length?(this._innerContainer.innerHTML=w,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},xi.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var Do=function(){o.bindAll(["_updateLogo"],this),o.bindAll(["_updateCompact"],this)};Do.prototype.onAdd=function(l){this._map=l,this._container=x.create("div","mapboxgl-ctrl");var p=x.create("a","mapboxgl-ctrl-logo");return p.target="_blank",p.rel="noopener nofollow",p.href="https://www.mapbox.com/",p.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),p.setAttribute("rel","noopener nofollow"),this._container.appendChild(p),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Do.prototype.onRemove=function(){x.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Do.prototype.getDefaultPosition=function(){return"bottom-left"},Do.prototype._updateLogo=function(l){l&&l.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},Do.prototype._logoRequired=function(){if(this._map.style){var l=this._map.style.sourceCaches;for(var p in l)if(l[p].getSource().mapbox_logo)return!0;return!1}},Do.prototype._updateCompact=function(){var l=this._container.children;if(l.length){var p=l[0];this._map.getCanvasContainer().offsetWidth<250?p.classList.add("mapboxgl-compact"):p.classList.remove("mapboxgl-compact")}};var ui=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};ui.prototype.add=function(l){var p=++this._id;return this._queue.push({callback:l,id:p,cancelled:!1}),p},ui.prototype.remove=function(l){for(var p=this._currentlyRunning,u=0,d=p?this._queue.concat(p):this._queue;u<d.length;u+=1){var g=d[u];if(g.id===l)return void(g.cancelled=!0)}},ui.prototype.run=function(l){l===void 0&&(l=0);var p=this._currentlyRunning=this._queue;this._queue=[];for(var u=0,d=p;u<d.length;u+=1){var g=d[u];if(!g.cancelled&&(g.callback(l),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},ui.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Zo={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},fh=o.window.HTMLImageElement,lc=o.window.HTMLElement,Or=o.window.ImageBitmap,Jn={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Jf=function(l){function p(d){var g=this;if((d=o.extend({},Jn,d)).minZoom!=null&&d.maxZoom!=null&&d.minZoom>d.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(d.minPitch!=null&&d.maxPitch!=null&&d.minPitch>d.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(d.minPitch!=null&&d.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(d.maxPitch!=null&&d.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var b=new yr(d.minZoom,d.maxZoom,d.minPitch,d.maxPitch,d.renderWorldCopies);if(l.call(this,b,d),this._interactive=d.interactive,this._maxTileCacheSize=d.maxTileCacheSize,this._failIfMajorPerformanceCaveat=d.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=d.preserveDrawingBuffer,this._antialias=d.antialias,this._trackResize=d.trackResize,this._bearingSnap=d.bearingSnap,this._refreshExpiredTiles=d.refreshExpiredTiles,this._fadeDuration=d.fadeDuration,this._crossSourceCollisions=d.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=d.collectResourceTiming,this._renderTaskQueue=new ui,this._controls=[],this._mapId=o.uniqueId(),this._locale=o.extend({},Zo,d.locale),this._clickTolerance=d.clickTolerance,this._requestManager=new o.RequestManager(d.transformRequest,d.accessToken),typeof d.container=="string"){if(this._container=o.window.document.getElementById(d.container),!this._container)throw new Error("Container '"+d.container+"' not found.")}else{if(!(d.container instanceof lc))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=d.container}if(d.maxBounds&&this.setMaxBounds(d.maxBounds),o.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return g._update(!1)}),this.on("moveend",function(){return g._update(!1)}),this.on("zoom",function(){return g._update(!0)}),o.window!==void 0&&(o.window.addEventListener("online",this._onWindowOnline,!1),o.window.addEventListener("resize",this._onWindowResize,!1),o.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new _t(this,d),this._hash=d.hash&&new ro(typeof d.hash=="string"&&d.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:d.center,zoom:d.zoom,bearing:d.bearing,pitch:d.pitch}),d.bounds&&(this.resize(),this.fitBounds(d.bounds,o.extend({},d.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=d.localIdeographFontFamily,d.style&&this.setStyle(d.style,{localIdeographFontFamily:d.localIdeographFontFamily}),d.attributionControl&&this.addControl(new xi({customAttribution:d.customAttribution})),this.addControl(new Do,d.logoPosition),this.on("style.load",function(){g.transform.unmodified&&g.jumpTo(g.style.stylesheet)}),this.on("data",function(w){g._update(w.dataType==="style"),g.fire(new o.Event(w.dataType+"data",w))}),this.on("dataloading",function(w){g.fire(new o.Event(w.dataType+"dataloading",w))})}l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p;var u={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return p.prototype._getMapId=function(){return this._mapId},p.prototype.addControl=function(d,g){if(g===void 0&&(g=d.getDefaultPosition?d.getDefaultPosition():"top-right"),!d||!d.onAdd)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var b=d.onAdd(this);this._controls.push(d);var w=this._controlPositions[g];return g.indexOf("bottom")!==-1?w.insertBefore(b,w.firstChild):w.appendChild(b),this},p.prototype.removeControl=function(d){if(!d||!d.onRemove)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var g=this._controls.indexOf(d);return g>-1&&this._controls.splice(g,1),d.onRemove(this),this},p.prototype.hasControl=function(d){return this._controls.indexOf(d)>-1},p.prototype.resize=function(d){var g=this._containerDimensions(),b=g[0],w=g[1];if(b===this.transform.width&&w===this.transform.height)return this;this._resizeCanvas(b,w),this.transform.resize(b,w),this.painter.resize(b,w);var C=!this._moving;return C&&this.fire(new o.Event("movestart",d)).fire(new o.Event("move",d)),this.fire(new o.Event("resize",d)),C&&this.fire(new o.Event("moveend",d)),this},p.prototype.getBounds=function(){return this.transform.getBounds()},p.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},p.prototype.setMaxBounds=function(d){return this.transform.setMaxBounds(o.LngLatBounds.convert(d)),this._update()},p.prototype.setMinZoom=function(d){if((d=d??-2)>=-2&&d<=this.transform.maxZoom)return this.transform.minZoom=d,this._update(),this.getZoom()<d&&this.setZoom(d),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},p.prototype.getMinZoom=function(){return this.transform.minZoom},p.prototype.setMaxZoom=function(d){if((d=d??22)>=this.transform.minZoom)return this.transform.maxZoom=d,this._update(),this.getZoom()>d&&this.setZoom(d),this;throw new Error("maxZoom must be greater than the current minZoom")},p.prototype.getMaxZoom=function(){return this.transform.maxZoom},p.prototype.setMinPitch=function(d){if((d=d??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(d>=0&&d<=this.transform.maxPitch)return this.transform.minPitch=d,this._update(),this.getPitch()<d&&this.setPitch(d),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},p.prototype.getMinPitch=function(){return this.transform.minPitch},p.prototype.setMaxPitch=function(d){if((d=d??60)>60)throw new Error("maxPitch must be less than or equal to 60");if(d>=this.transform.minPitch)return this.transform.maxPitch=d,this._update(),this.getPitch()>d&&this.setPitch(d),this;throw new Error("maxPitch must be greater than the current minPitch")},p.prototype.getMaxPitch=function(){return this.transform.maxPitch},p.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},p.prototype.setRenderWorldCopies=function(d){return this.transform.renderWorldCopies=d,this._update()},p.prototype.project=function(d){return this.transform.locationPoint(o.LngLat.convert(d))},p.prototype.unproject=function(d){return this.transform.pointLocation(o.Point.convert(d))},p.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},p.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},p.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},p.prototype._createDelegatedListener=function(d,g,b){var w,C=this;if(d==="mouseenter"||d==="mouseover"){var M=!1;return{layer:g,listener:b,delegates:{mousemove:function(K){var X=C.getLayer(g)?C.queryRenderedFeatures(K.point,{layers:[g]}):[];X.length?M||(M=!0,b.call(C,new Bn(d,C,K.originalEvent,{features:X}))):M=!1},mouseout:function(){M=!1}}}}if(d==="mouseleave"||d==="mouseout"){var N=!1;return{layer:g,listener:b,delegates:{mousemove:function(K){(C.getLayer(g)?C.queryRenderedFeatures(K.point,{layers:[g]}):[]).length?N=!0:N&&(N=!1,b.call(C,new Bn(d,C,K.originalEvent)))},mouseout:function(K){N&&(N=!1,b.call(C,new Bn(d,C,K.originalEvent)))}}}}return{layer:g,listener:b,delegates:(w={},w[d]=function(K){var X=C.getLayer(g)?C.queryRenderedFeatures(K.point,{layers:[g]}):[];X.length&&(K.features=X,b.call(C,K),delete K.features)},w)}},p.prototype.on=function(d,g,b){if(b===void 0)return l.prototype.on.call(this,d,g);var w=this._createDelegatedListener(d,g,b);for(var C in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[d]=this._delegatedListeners[d]||[],this._delegatedListeners[d].push(w),w.delegates)this.on(C,w.delegates[C]);return this},p.prototype.once=function(d,g,b){if(b===void 0)return l.prototype.once.call(this,d,g);var w=this._createDelegatedListener(d,g,b);for(var C in w.delegates)this.once(C,w.delegates[C]);return this},p.prototype.off=function(d,g,b){var w=this;return b===void 0?l.prototype.off.call(this,d,g):(this._delegatedListeners&&this._delegatedListeners[d]&&function(C){for(var M=C[d],N=0;N<M.length;N++){var K=M[N];if(K.layer===g&&K.listener===b){for(var X in K.delegates)w.off(X,K.delegates[X]);return M.splice(N,1),w}}}(this._delegatedListeners),this)},p.prototype.queryRenderedFeatures=function(d,g){if(!this.style)return[];var b;if(g!==void 0||d===void 0||d instanceof o.Point||Array.isArray(d)||(g=d,d=void 0),g=g||{},(d=d||[[0,0],[this.transform.width,this.transform.height]])instanceof o.Point||typeof d[0]=="number")b=[o.Point.convert(d)];else{var w=o.Point.convert(d[0]),C=o.Point.convert(d[1]);b=[w,new o.Point(C.x,w.y),C,new o.Point(w.x,C.y),w]}return this.style.queryRenderedFeatures(b,g,this.transform)},p.prototype.querySourceFeatures=function(d,g){return this.style.querySourceFeatures(d,g)},p.prototype.setStyle=function(d,g){return(g=o.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},g)).diff!==!1&&g.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&d?(this._diffStyle(d,g),this):(this._localIdeographFontFamily=g.localIdeographFontFamily,this._updateStyle(d,g))},p.prototype._getUIString=function(d){var g=this._locale[d];if(g==null)throw new Error("Missing UI string '"+d+"'");return g},p.prototype._updateStyle=function(d,g){return this.style&&(this.style.setEventedParent(null),this.style._remove()),d?(this.style=new Ui(this,g||{}),this.style.setEventedParent(this,{style:this.style}),typeof d=="string"?this.style.loadURL(d):this.style.loadJSON(d),this):(delete this.style,this)},p.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Ui(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},p.prototype._diffStyle=function(d,g){var b=this;if(typeof d=="string"){var w=this._requestManager.normalizeStyleURL(d),C=this._requestManager.transformRequest(w,o.ResourceType.Style);o.getJSON(C,function(M,N){M?b.fire(new o.ErrorEvent(M)):N&&b._updateDiff(N,g)})}else typeof d=="object"&&this._updateDiff(d,g)},p.prototype._updateDiff=function(d,g){try{this.style.setState(d)&&this._update(!0)}catch(b){o.warnOnce("Unable to perform style diff: "+(b.message||b.error||b)+".  Rebuilding the style from scratch."),this._updateStyle(d,g)}},p.prototype.getStyle=function(){if(this.style)return this.style.serialize()},p.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():o.warnOnce("There is no style added to the map.")},p.prototype.addSource=function(d,g){return this._lazyInitEmptyStyle(),this.style.addSource(d,g),this._update(!0)},p.prototype.isSourceLoaded=function(d){var g=this.style&&this.style.sourceCaches[d];if(g!==void 0)return g.loaded();this.fire(new o.ErrorEvent(new Error("There is no source with ID '"+d+"'")))},p.prototype.areTilesLoaded=function(){var d=this.style&&this.style.sourceCaches;for(var g in d){var b=d[g]._tiles;for(var w in b){var C=b[w];if(C.state!=="loaded"&&C.state!=="errored")return!1}}return!0},p.prototype.addSourceType=function(d,g,b){return this._lazyInitEmptyStyle(),this.style.addSourceType(d,g,b)},p.prototype.removeSource=function(d){return this.style.removeSource(d),this._update(!0)},p.prototype.getSource=function(d){return this.style.getSource(d)},p.prototype.addImage=function(d,g,b){b===void 0&&(b={});var w=b.pixelRatio;w===void 0&&(w=1);var C=b.sdf;C===void 0&&(C=!1);var M=b.stretchX,N=b.stretchY,K=b.content;if(this._lazyInitEmptyStyle(),g instanceof fh||Or&&g instanceof Or){var X=o.browser.getImageData(g);this.style.addImage(d,{data:new o.RGBAImage({width:X.width,height:X.height},X.data),pixelRatio:w,stretchX:M,stretchY:N,content:K,sdf:C,version:0})}else{if(g.width===void 0||g.height===void 0)return this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var J=g;this.style.addImage(d,{data:new o.RGBAImage({width:g.width,height:g.height},new Uint8Array(g.data)),pixelRatio:w,stretchX:M,stretchY:N,content:K,sdf:C,version:0,userImage:J}),J.onAdd&&J.onAdd(this,d)}},p.prototype.updateImage=function(d,g){var b=this.style.getImage(d);if(!b)return this.fire(new o.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var w=g instanceof fh||Or&&g instanceof Or?o.browser.getImageData(g):g,C=w.width,M=w.height,N=w.data;return C===void 0||M===void 0?this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):C!==b.data.width||M!==b.data.height?this.fire(new o.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(b.data.replace(N,!(g instanceof fh||Or&&g instanceof Or)),void this.style.updateImage(d,b))},p.prototype.hasImage=function(d){return d?!!this.style.getImage(d):(this.fire(new o.ErrorEvent(new Error("Missing required image id"))),!1)},p.prototype.removeImage=function(d){this.style.removeImage(d)},p.prototype.loadImage=function(d,g){o.getImage(this._requestManager.transformRequest(d,o.ResourceType.Image),g)},p.prototype.listImages=function(){return this.style.listImages()},p.prototype.addLayer=function(d,g){return this._lazyInitEmptyStyle(),this.style.addLayer(d,g),this._update(!0)},p.prototype.moveLayer=function(d,g){return this.style.moveLayer(d,g),this._update(!0)},p.prototype.removeLayer=function(d){return this.style.removeLayer(d),this._update(!0)},p.prototype.getLayer=function(d){return this.style.getLayer(d)},p.prototype.setLayerZoomRange=function(d,g,b){return this.style.setLayerZoomRange(d,g,b),this._update(!0)},p.prototype.setFilter=function(d,g,b){return b===void 0&&(b={}),this.style.setFilter(d,g,b),this._update(!0)},p.prototype.getFilter=function(d){return this.style.getFilter(d)},p.prototype.setPaintProperty=function(d,g,b,w){return w===void 0&&(w={}),this.style.setPaintProperty(d,g,b,w),this._update(!0)},p.prototype.getPaintProperty=function(d,g){return this.style.getPaintProperty(d,g)},p.prototype.setLayoutProperty=function(d,g,b,w){return w===void 0&&(w={}),this.style.setLayoutProperty(d,g,b,w),this._update(!0)},p.prototype.getLayoutProperty=function(d,g){return this.style.getLayoutProperty(d,g)},p.prototype.setLight=function(d,g){return g===void 0&&(g={}),this._lazyInitEmptyStyle(),this.style.setLight(d,g),this._update(!0)},p.prototype.getLight=function(){return this.style.getLight()},p.prototype.setFeatureState=function(d,g){return this.style.setFeatureState(d,g),this._update()},p.prototype.removeFeatureState=function(d,g){return this.style.removeFeatureState(d,g),this._update()},p.prototype.getFeatureState=function(d){return this.style.getFeatureState(d)},p.prototype.getContainer=function(){return this._container},p.prototype.getCanvasContainer=function(){return this._canvasContainer},p.prototype.getCanvas=function(){return this._canvas},p.prototype._containerDimensions=function(){var d=0,g=0;return this._container&&(d=this._container.clientWidth||400,g=this._container.clientHeight||300),[d,g]},p.prototype._detectMissingCSS=function(){o.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&o.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},p.prototype._setupContainer=function(){var d=this._container;d.classList.add("mapboxgl-map"),(this._missingCSSCanary=x.create("div","mapboxgl-canary",d)).style.visibility="hidden",this._detectMissingCSS();var g=this._canvasContainer=x.create("div","mapboxgl-canvas-container",d);this._interactive&&g.classList.add("mapboxgl-interactive"),this._canvas=x.create("canvas","mapboxgl-canvas",g),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var b=this._containerDimensions();this._resizeCanvas(b[0],b[1]);var w=this._controlContainer=x.create("div","mapboxgl-control-container",d),C=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(M){C[M]=x.create("div","mapboxgl-ctrl-"+M,w)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},p.prototype._resizeCanvas=function(d,g){var b=o.browser.devicePixelRatio||1;this._canvas.width=b*d,this._canvas.height=b*g,this._canvas.style.width=d+"px",this._canvas.style.height=g+"px"},p.prototype._setupPainter=function(){var d=o.extend({},v.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),g=this._canvas.getContext("webgl",d)||this._canvas.getContext("experimental-webgl",d);g?(this.painter=new sn(g,this.transform),o.webpSupported.testSupport(g)):this.fire(new o.ErrorEvent(new Error("Failed to initialize WebGL")))},p.prototype._contextLost=function(d){d.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new o.Event("webglcontextlost",{originalEvent:d}))},p.prototype._contextRestored=function(d){this._setupPainter(),this.resize(),this._update(),this.fire(new o.Event("webglcontextrestored",{originalEvent:d}))},p.prototype._onMapScroll=function(d){if(d.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},p.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},p.prototype._update=function(d){return this.style?(this._styleDirty=this._styleDirty||d,this._sourcesDirty=!0,this.triggerRepaint(),this):this},p.prototype._requestRenderFrame=function(d){return this._update(),this._renderTaskQueue.add(d)},p.prototype._cancelRenderFrame=function(d){this._renderTaskQueue.remove(d)},p.prototype._render=function(d){var g,b=this,w=0,C=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(g=C.createQueryEXT(),C.beginQueryEXT(C.TIME_ELAPSED_EXT,g),w=o.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(d),!this._removed){var M=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var N=this.transform.zoom,K=o.browser.now();this.style.zoomHistory.update(N,K);var X=new o.EvaluationParameters(N,{now:K,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),J=X.crossFadingFactor();J===1&&J===this._crossFadingFactor||(M=!0,this._crossFadingFactor=J),this.style.update(X)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new o.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new o.Event("load"))),this.style&&(this.style.hasTransitions()||M)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var ce=o.browser.now()-w;C.endQueryEXT(C.TIME_ELAPSED_EXT,g),setTimeout(function(){var ae=C.getQueryObjectEXT(g,C.QUERY_RESULT_EXT)/1e6;C.deleteQueryEXT(g),b.fire(new o.Event("gpu-timing-frame",{cpuTime:ce,gpuTime:ae}))},50)}if(this.listens("gpu-timing-layer")){var ue=this.painter.collectGpuTimers();setTimeout(function(){var ae=b.painter.queryGpuTimers(ue);b.fire(new o.Event("gpu-timing-layer",{layerTimes:ae}))},50)}var ve=this._sourcesDirty||this._styleDirty||this._placementDirty;return ve||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.Event("idle")),!this._loaded||this._fullyLoaded||ve||(this._fullyLoaded=!0),this}},p.prototype.remove=function(){this._hash&&this._hash.remove();for(var d=0,g=this._controls;d<g.length;d+=1)g[d].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),o.window!==void 0&&(o.window.removeEventListener("resize",this._onWindowResize,!1),o.window.removeEventListener("orientationchange",this._onWindowResize,!1),o.window.removeEventListener("online",this._onWindowOnline,!1));var b=this.painter.context.gl.getExtension("WEBGL_lose_context");b&&b.loseContext(),Es(this._canvasContainer),Es(this._controlContainer),Es(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new o.Event("remove"))},p.prototype.triggerRepaint=function(){var d=this;this.style&&!this._frame&&(this._frame=o.browser.frame(function(g){d._frame=null,d._render(g)}))},p.prototype._onWindowOnline=function(){this._update()},p.prototype._onWindowResize=function(d){this._trackResize&&this.resize({originalEvent:d})._update()},u.showTileBoundaries.get=function(){return!!this._showTileBoundaries},u.showTileBoundaries.set=function(d){this._showTileBoundaries!==d&&(this._showTileBoundaries=d,this._update())},u.showPadding.get=function(){return!!this._showPadding},u.showPadding.set=function(d){this._showPadding!==d&&(this._showPadding=d,this._update())},u.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},u.showCollisionBoxes.set=function(d){this._showCollisionBoxes!==d&&(this._showCollisionBoxes=d,d?this.style._generateCollisionBoxes():this._update())},u.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},u.showOverdrawInspector.set=function(d){this._showOverdrawInspector!==d&&(this._showOverdrawInspector=d,this._update())},u.repaint.get=function(){return!!this._repaint},u.repaint.set=function(d){this._repaint!==d&&(this._repaint=d,this.triggerRepaint())},u.vertices.get=function(){return!!this._vertices},u.vertices.set=function(d){this._vertices=d,this._update()},p.prototype._setCacheLimits=function(d,g){o.setCacheLimits(d,g)},u.version.get=function(){return o.version},Object.defineProperties(p.prototype,u),p}(sc);function Es(l){l.parentNode&&l.parentNode.removeChild(l)}var mh={showCompass:!0,showZoom:!0,visualizePitch:!1},ha=function(l){var p=this;this.options=o.extend({},mh,l),this._container=x.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(u){return u.preventDefault()}),this.options.showZoom&&(o.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(u){return p._map.zoomIn({},{originalEvent:u})}),x.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(u){return p._map.zoomOut({},{originalEvent:u})}),x.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(o.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(u){p.options.visualizePitch?p._map.resetNorthPitch({},{originalEvent:u}):p._map.resetNorth({},{originalEvent:u})}),this._compassIcon=x.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};ha.prototype._updateZoomButtons=function(){var l=this._map.getZoom(),p=l===this._map.getMaxZoom(),u=l===this._map.getMinZoom();this._zoomInButton.disabled=p,this._zoomOutButton.disabled=u,this._zoomInButton.setAttribute("aria-disabled",p.toString()),this._zoomOutButton.setAttribute("aria-disabled",u.toString())},ha.prototype._rotateCompassArrow=function(){var l=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=l},ha.prototype.onAdd=function(l){return this._map=l,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Gi(this._map,this._compass,this.options.visualizePitch)),this._container},ha.prototype.onRemove=function(){x.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},ha.prototype._createButton=function(l,p){var u=x.create("button",l,this._container);return u.type="button",u.addEventListener("click",p),u},ha.prototype._setButtonTitle=function(l,p){var u=this._map._getUIString("NavigationControl."+p);l.title=u,l.setAttribute("aria-label",u)};var Gi=function(l,p,u){u===void 0&&(u=!1),this._clickTolerance=10,this.element=p,this.mouseRotate=new ic({clickTolerance:l.dragRotate._mouseRotate._clickTolerance}),this.map=l,u&&(this.mousePitch=new ph({clickTolerance:l.dragRotate._mousePitch._clickTolerance})),o.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),x.addEventListener(p,"mousedown",this.mousedown),x.addEventListener(p,"touchstart",this.touchstart,{passive:!1}),x.addEventListener(p,"touchmove",this.touchmove),x.addEventListener(p,"touchend",this.touchend),x.addEventListener(p,"touchcancel",this.reset)};function nl(l,p,u){if(l=new o.LngLat(l.lng,l.lat),p){var d=new o.LngLat(l.lng-360,l.lat),g=new o.LngLat(l.lng+360,l.lat),b=u.locationPoint(l).distSqr(p);u.locationPoint(d).distSqr(p)<b?l=d:u.locationPoint(g).distSqr(p)<b&&(l=g)}for(;Math.abs(l.lng-u.center.lng)>180;){var w=u.locationPoint(l);if(w.x>=0&&w.y>=0&&w.x<=u.width&&w.y<=u.height)break;l.lng>u.center.lng?l.lng-=360:l.lng+=360}return l}Gi.prototype.down=function(l,p){this.mouseRotate.mousedown(l,p),this.mousePitch&&this.mousePitch.mousedown(l,p),x.disableDrag()},Gi.prototype.move=function(l,p){var u=this.map,d=this.mouseRotate.mousemoveWindow(l,p);if(d&&d.bearingDelta&&u.setBearing(u.getBearing()+d.bearingDelta),this.mousePitch){var g=this.mousePitch.mousemoveWindow(l,p);g&&g.pitchDelta&&u.setPitch(u.getPitch()+g.pitchDelta)}},Gi.prototype.off=function(){var l=this.element;x.removeEventListener(l,"mousedown",this.mousedown),x.removeEventListener(l,"touchstart",this.touchstart,{passive:!1}),x.removeEventListener(l,"touchmove",this.touchmove),x.removeEventListener(l,"touchend",this.touchend),x.removeEventListener(l,"touchcancel",this.reset),this.offTemp()},Gi.prototype.offTemp=function(){x.enableDrag(),x.removeEventListener(o.window,"mousemove",this.mousemove),x.removeEventListener(o.window,"mouseup",this.mouseup)},Gi.prototype.mousedown=function(l){this.down(o.extend({},l,{ctrlKey:!0,preventDefault:function(){return l.preventDefault()}}),x.mousePos(this.element,l)),x.addEventListener(o.window,"mousemove",this.mousemove),x.addEventListener(o.window,"mouseup",this.mouseup)},Gi.prototype.mousemove=function(l){this.move(l,x.mousePos(this.element,l))},Gi.prototype.mouseup=function(l){this.mouseRotate.mouseupWindow(l),this.mousePitch&&this.mousePitch.mouseupWindow(l),this.offTemp()},Gi.prototype.touchstart=function(l){l.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=x.touchPos(this.element,l.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return l.preventDefault()}},this._startPos))},Gi.prototype.touchmove=function(l){l.targetTouches.length!==1?this.reset():(this._lastPos=x.touchPos(this.element,l.targetTouches)[0],this.move({preventDefault:function(){return l.preventDefault()}},this._lastPos))},Gi.prototype.touchend=function(l){l.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Gi.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Ko={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function uc(l,p,u){var d=l.classList;for(var g in Ko)d.remove("mapboxgl-"+u+"-anchor-"+g);d.add("mapboxgl-"+u+"-anchor-"+p)}var il,ou=function(l){function p(u,d){if(l.call(this),(u instanceof o.window.HTMLElement||d)&&(u=o.extend({element:u},d)),o.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=u&&u.anchor||"center",this._color=u&&u.color||"#3FB1CE",this._scale=u&&u.scale||1,this._draggable=u&&u.draggable||!1,this._clickTolerance=u&&u.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=u&&u.rotation||0,this._rotationAlignment=u&&u.rotationAlignment||"auto",this._pitchAlignment=u&&u.pitchAlignment&&u.pitchAlignment!=="auto"?u.pitchAlignment:this._rotationAlignment,u&&u.element)this._element=u.element,this._offset=o.Point.convert(u&&u.offset||[0,0]);else{this._defaultMarker=!0,this._element=x.create("div"),this._element.setAttribute("aria-label","Map marker");var g=x.createNS("http://www.w3.org/2000/svg","svg");g.setAttributeNS(null,"display","block"),g.setAttributeNS(null,"height","41px"),g.setAttributeNS(null,"width","27px"),g.setAttributeNS(null,"viewBox","0 0 27 41");var b=x.createNS("http://www.w3.org/2000/svg","g");b.setAttributeNS(null,"stroke","none"),b.setAttributeNS(null,"stroke-width","1"),b.setAttributeNS(null,"fill","none"),b.setAttributeNS(null,"fill-rule","evenodd");var w=x.createNS("http://www.w3.org/2000/svg","g");w.setAttributeNS(null,"fill-rule","nonzero");var C=x.createNS("http://www.w3.org/2000/svg","g");C.setAttributeNS(null,"transform","translate(3.0, 29.0)"),C.setAttributeNS(null,"fill","#000000");for(var M=0,N=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];M<N.length;M+=1){var K=N[M],X=x.createNS("http://www.w3.org/2000/svg","ellipse");X.setAttributeNS(null,"opacity","0.04"),X.setAttributeNS(null,"cx","10.5"),X.setAttributeNS(null,"cy","5.80029008"),X.setAttributeNS(null,"rx",K.rx),X.setAttributeNS(null,"ry",K.ry),C.appendChild(X)}var J=x.createNS("http://www.w3.org/2000/svg","g");J.setAttributeNS(null,"fill",this._color);var ce=x.createNS("http://www.w3.org/2000/svg","path");ce.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),J.appendChild(ce);var ue=x.createNS("http://www.w3.org/2000/svg","g");ue.setAttributeNS(null,"opacity","0.25"),ue.setAttributeNS(null,"fill","#000000");var ve=x.createNS("http://www.w3.org/2000/svg","path");ve.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),ue.appendChild(ve);var ae=x.createNS("http://www.w3.org/2000/svg","g");ae.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ae.setAttributeNS(null,"fill","#FFFFFF");var ge=x.createNS("http://www.w3.org/2000/svg","g");ge.setAttributeNS(null,"transform","translate(8.0, 8.0)");var we=x.createNS("http://www.w3.org/2000/svg","circle");we.setAttributeNS(null,"fill","#000000"),we.setAttributeNS(null,"opacity","0.25"),we.setAttributeNS(null,"cx","5.5"),we.setAttributeNS(null,"cy","5.5"),we.setAttributeNS(null,"r","5.4999962");var Ae=x.createNS("http://www.w3.org/2000/svg","circle");Ae.setAttributeNS(null,"fill","#FFFFFF"),Ae.setAttributeNS(null,"cx","5.5"),Ae.setAttributeNS(null,"cy","5.5"),Ae.setAttributeNS(null,"r","5.4999962"),ge.appendChild(we),ge.appendChild(Ae),w.appendChild(C),w.appendChild(J),w.appendChild(ue),w.appendChild(ae),w.appendChild(ge),g.appendChild(w),g.setAttributeNS(null,"height",41*this._scale+"px"),g.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(g),this._offset=o.Point.convert(u&&u.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Ne){Ne.preventDefault()}),this._element.addEventListener("mousedown",function(Ne){Ne.preventDefault()}),uc(this._element,this._anchor,"marker"),this._popup=null}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.addTo=function(u){return this.remove(),this._map=u,u.getCanvasContainer().appendChild(this._element),u.on("move",this._update),u.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},p.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),x.remove(this._element),this._popup&&this._popup.remove(),this},p.prototype.getLngLat=function(){return this._lngLat},p.prototype.setLngLat=function(u){return this._lngLat=o.LngLat.convert(u),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},p.prototype.getElement=function(){return this._element},p.prototype.setPopup=function(u){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),u){if(!("offset"in u.options)){var d=Math.sqrt(Math.pow(13.5,2)/2);u.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[d,-1*(24.6+d)],"bottom-right":[-d,-1*(24.6+d)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=u,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},p.prototype._onKeyPress=function(u){var d=u.code,g=u.charCode||u.keyCode;d!=="Space"&&d!=="Enter"&&g!==32&&g!==13||this.togglePopup()},p.prototype._onMapClick=function(u){var d=u.originalEvent.target,g=this._element;this._popup&&(d===g||g.contains(d))&&this.togglePopup()},p.prototype.getPopup=function(){return this._popup},p.prototype.togglePopup=function(){var u=this._popup;return u?(u.isOpen()?u.remove():u.addTo(this._map),this):this},p.prototype._update=function(u){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=nl(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var d="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?d="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(d="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var g="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?g="rotateX(0deg)":this._pitchAlignment==="map"&&(g="rotateX("+this._map.getPitch()+"deg)"),u&&u.type!=="moveend"||(this._pos=this._pos.round()),x.setTransform(this._element,Ko[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+g+" "+d)}},p.prototype.getOffset=function(){return this._offset},p.prototype.setOffset=function(u){return this._offset=o.Point.convert(u),this._update(),this},p.prototype._onMove=function(u){if(!this._isDragging){var d=this._clickTolerance||this._map._clickTolerance;this._isDragging=u.point.dist(this._pointerdownPos)>=d}this._isDragging&&(this._pos=u.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.Event("dragstart"))),this.fire(new o.Event("drag")))},p.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.Event("dragend")),this._state="inactive"},p.prototype._addDragHandler=function(u){this._element.contains(u.originalEvent.target)&&(u.preventDefault(),this._positionDelta=u.point.sub(this._pos).add(this._offset),this._pointerdownPos=u.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},p.prototype.setDraggable=function(u){return this._draggable=!!u,this._map&&(u?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},p.prototype.isDraggable=function(){return this._draggable},p.prototype.setRotation=function(u){return this._rotation=u||0,this._update(),this},p.prototype.getRotation=function(){return this._rotation},p.prototype.setRotationAlignment=function(u){return this._rotationAlignment=u||"auto",this._update(),this},p.prototype.getRotationAlignment=function(){return this._rotationAlignment},p.prototype.setPitchAlignment=function(u){return this._pitchAlignment=u&&u!=="auto"?u:this._rotationAlignment,this._update(),this},p.prototype.getPitchAlignment=function(){return this._pitchAlignment},p}(o.Evented),yh={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},ol=0,Cs=!1,gh=function(l){function p(u){l.call(this),this.options=o.extend({},yh,u),o.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.onAdd=function(u){var d;return this._map=u,this._container=x.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),d=this._setupUI,il!==void 0?d(il):o.window.navigator.permissions!==void 0?o.window.navigator.permissions.query({name:"geolocation"}).then(function(g){d(il=g.state!=="denied")}):d(il=!!o.window.navigator.geolocation),this._container},p.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(o.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),x.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,ol=0,Cs=!1},p.prototype._isOutOfMapMaxBounds=function(u){var d=this._map.getMaxBounds(),g=u.coords;return d&&(g.longitude<d.getWest()||g.longitude>d.getEast()||g.latitude<d.getSouth()||g.latitude>d.getNorth())},p.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},p.prototype._onSuccess=function(u){if(this._map){if(this._isOutOfMapMaxBounds(u))return this._setErrorState(),this.fire(new o.Event("outofmaxbounds",u)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=u,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(u),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(u),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("geolocate",u)),this._finish()}},p.prototype._updateCamera=function(u){var d=new o.LngLat(u.coords.longitude,u.coords.latitude),g=u.coords.accuracy,b=this._map.getBearing(),w=o.extend({bearing:b},this.options.fitBoundsOptions);this._map.fitBounds(d.toBounds(g),w,{geolocateSource:!0})},p.prototype._updateMarker=function(u){if(u){var d=new o.LngLat(u.coords.longitude,u.coords.latitude);this._accuracyCircleMarker.setLngLat(d).addTo(this._map),this._userLocationDotMarker.setLngLat(d).addTo(this._map),this._accuracy=u.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},p.prototype._updateCircleRadius=function(){var u=this._map._container.clientHeight/2,d=this._map.unproject([0,u]),g=this._map.unproject([1,u]),b=d.distanceTo(g),w=Math.ceil(2*this._accuracy/b);this._circleElement.style.width=w+"px",this._circleElement.style.height=w+"px"},p.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},p.prototype._onError=function(u){if(this._map){if(this.options.trackUserLocation)if(u.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(u.code===3&&Cs)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("error",u)),this._finish()}},p.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},p.prototype._setupUI=function(u){var d=this;if(this._container.addEventListener("contextmenu",function(w){return w.preventDefault()}),this._geolocateButton=x.create("button","mapboxgl-ctrl-geolocate",this._container),x.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",u===!1){o.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var g=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=g,this._geolocateButton.setAttribute("aria-label",g)}else{var b=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=b,this._geolocateButton.setAttribute("aria-label",b)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=x.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new ou(this._dotElement),this._circleElement=x.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ou({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(w){w.geolocateSource||d._watchState!=="ACTIVE_LOCK"||w.originalEvent&&w.originalEvent.type==="resize"||(d._watchState="BACKGROUND",d._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),d._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),d.fire(new o.Event("trackuserlocationend")))})},p.prototype.trigger=function(){if(!this._setup)return o.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":ol--,Cs=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new o.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var u;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++ol>1?(u={maximumAge:6e5,timeout:0},Cs=!0):(u=this.options.positionOptions,Cs=!1),this._geolocationWatchID=o.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,u)}}else o.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},p.prototype._clearWatch=function(){o.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},p}(o.Evented),Oa={maxWidth:100,unit:"metric"},Ba=function(l){this.options=o.extend({},Oa,l),o.bindAll(["_onMove","setUnit"],this)};function cc(l,p,u){var d=u&&u.maxWidth||100,g=l._container.clientHeight/2,b=l.unproject([0,g]),w=l.unproject([d,g]),C=b.distanceTo(w);if(u&&u.unit==="imperial"){var M=3.2808*C;M>5280?Na(p,d,M/5280,l._getUIString("ScaleControl.Miles")):Na(p,d,M,l._getUIString("ScaleControl.Feet"))}else u&&u.unit==="nautical"?Na(p,d,C/1852,l._getUIString("ScaleControl.NauticalMiles")):C>=1e3?Na(p,d,C/1e3,l._getUIString("ScaleControl.Kilometers")):Na(p,d,C,l._getUIString("ScaleControl.Meters"))}function Na(l,p,u,d){var g,b,w,C=(g=u,(b=Math.pow(10,(""+Math.floor(g)).length-1))*(w=(w=g/b)>=10?10:w>=5?5:w>=3?3:w>=2?2:w>=1?1:function(M){var N=Math.pow(10,Math.ceil(-Math.log(M)/Math.LN10));return Math.round(M*N)/N}(w)));l.style.width=p*(C/u)+"px",l.innerHTML=C+"&nbsp;"+d}Ba.prototype.getDefaultPosition=function(){return"bottom-left"},Ba.prototype._onMove=function(){cc(this._map,this._container,this.options)},Ba.prototype.onAdd=function(l){return this._map=l,this._container=x.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",l.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Ba.prototype.onRemove=function(){x.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Ba.prototype.setUnit=function(l){this.options.unit=l,cc(this._map,this._container,this.options)};var mo=function(l){this._fullscreen=!1,l&&l.container&&(l.container instanceof o.window.HTMLElement?this._container=l.container:o.warnOnce("Full screen control 'container' must be a DOM element.")),o.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in o.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in o.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in o.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in o.window.document&&(this._fullscreenchange="MSFullscreenChange")};mo.prototype.onAdd=function(l){return this._map=l,this._container||(this._container=this._map.getContainer()),this._controlContainer=x.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",o.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},mo.prototype.onRemove=function(){x.remove(this._controlContainer),this._map=null,o.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},mo.prototype._checkFullscreenSupport=function(){return!!(o.window.document.fullscreenEnabled||o.window.document.mozFullScreenEnabled||o.window.document.msFullscreenEnabled||o.window.document.webkitFullscreenEnabled)},mo.prototype._setupUI=function(){var l=this._fullscreenButton=x.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);x.create("span","mapboxgl-ctrl-icon",l).setAttribute("aria-hidden",!0),l.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),o.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},mo.prototype._updateTitle=function(){var l=this._getTitle();this._fullscreenButton.setAttribute("aria-label",l),this._fullscreenButton.title=l},mo.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},mo.prototype._isFullscreen=function(){return this._fullscreen},mo.prototype._changeIcon=function(){(o.window.document.fullscreenElement||o.window.document.mozFullScreenElement||o.window.document.webkitFullscreenElement||o.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},mo.prototype._onClickFullscreen=function(){this._isFullscreen()?o.window.document.exitFullscreen?o.window.document.exitFullscreen():o.window.document.mozCancelFullScreen?o.window.document.mozCancelFullScreen():o.window.document.msExitFullscreen?o.window.document.msExitFullscreen():o.window.document.webkitCancelFullScreen&&o.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var vh={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},au=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),_h=function(l){function p(u){l.call(this),this.options=o.extend(Object.create(vh),u),o.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return l&&(p.__proto__=l),(p.prototype=Object.create(l&&l.prototype)).constructor=p,p.prototype.addTo=function(u){return this._map&&this.remove(),this._map=u,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new o.Event("open")),this},p.prototype.isOpen=function(){return!!this._map},p.prototype.remove=function(){return this._content&&x.remove(this._content),this._container&&(x.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new o.Event("close")),this},p.prototype.getLngLat=function(){return this._lngLat},p.prototype.setLngLat=function(u){return this._lngLat=o.LngLat.convert(u),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},p.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},p.prototype.getElement=function(){return this._container},p.prototype.setText=function(u){return this.setDOMContent(o.window.document.createTextNode(u))},p.prototype.setHTML=function(u){var d,g=o.window.document.createDocumentFragment(),b=o.window.document.createElement("body");for(b.innerHTML=u;d=b.firstChild;)g.appendChild(d);return this.setDOMContent(g)},p.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},p.prototype.setMaxWidth=function(u){return this.options.maxWidth=u,this._update(),this},p.prototype.setDOMContent=function(u){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=x.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(u),this._createCloseButton(),this._update(),this._focusFirstElement(),this},p.prototype.addClassName=function(u){this._container&&this._container.classList.add(u)},p.prototype.removeClassName=function(u){this._container&&this._container.classList.remove(u)},p.prototype.setOffset=function(u){return this.options.offset=u,this._update(),this},p.prototype.toggleClassName=function(u){if(this._container)return this._container.classList.toggle(u)},p.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=x.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},p.prototype._onMouseUp=function(u){this._update(u.point)},p.prototype._onMouseMove=function(u){this._update(u.point)},p.prototype._onDrag=function(u){this._update(u.point)},p.prototype._update=function(u){var d=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=x.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=x.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(X){return d._container.classList.add(X)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=nl(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||u)){var g=this._pos=this._trackPointer&&u?u:this._map.project(this._lngLat),b=this.options.anchor,w=function X(J){if(J){if(typeof J=="number"){var ce=Math.round(Math.sqrt(.5*Math.pow(J,2)));return{center:new o.Point(0,0),top:new o.Point(0,J),"top-left":new o.Point(ce,ce),"top-right":new o.Point(-ce,ce),bottom:new o.Point(0,-J),"bottom-left":new o.Point(ce,-ce),"bottom-right":new o.Point(-ce,-ce),left:new o.Point(J,0),right:new o.Point(-J,0)}}if(J instanceof o.Point||Array.isArray(J)){var ue=o.Point.convert(J);return{center:ue,top:ue,"top-left":ue,"top-right":ue,bottom:ue,"bottom-left":ue,"bottom-right":ue,left:ue,right:ue}}return{center:o.Point.convert(J.center||[0,0]),top:o.Point.convert(J.top||[0,0]),"top-left":o.Point.convert(J["top-left"]||[0,0]),"top-right":o.Point.convert(J["top-right"]||[0,0]),bottom:o.Point.convert(J.bottom||[0,0]),"bottom-left":o.Point.convert(J["bottom-left"]||[0,0]),"bottom-right":o.Point.convert(J["bottom-right"]||[0,0]),left:o.Point.convert(J.left||[0,0]),right:o.Point.convert(J.right||[0,0])}}return X(new o.Point(0,0))}(this.options.offset);if(!b){var C,M=this._container.offsetWidth,N=this._container.offsetHeight;C=g.y+w.bottom.y<N?["top"]:g.y>this._map.transform.height-N?["bottom"]:[],g.x<M/2?C.push("left"):g.x>this._map.transform.width-M/2&&C.push("right"),b=C.length===0?"bottom":C.join("-")}var K=g.add(w[b]).round();x.setTransform(this._container,Ko[b]+" translate("+K.x+"px,"+K.y+"px)"),uc(this._container,b,"popup")}},p.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var u=this._container.querySelector(au);u&&u.focus()}},p.prototype._onClose=function(){this.remove()},p}(o.Evented),pc={version:o.version,supported:v,setRTLTextPlugin:o.setRTLTextPlugin,getRTLTextPluginStatus:o.getRTLTextPluginStatus,Map:Jf,NavigationControl:ha,GeolocateControl:gh,AttributionControl:xi,ScaleControl:Ba,FullscreenControl:mo,Popup:_h,Marker:ou,Style:Ui,LngLat:o.LngLat,LngLatBounds:o.LngLatBounds,Point:o.Point,MercatorCoordinate:o.MercatorCoordinate,Evented:o.Evented,config:o.config,prewarm:function(){Ve().acquire(Ue)},clearPrewarmedResources:function(){var l=vt;l&&(l.isPreloaded()&&l.numActive()===1?(l.release(Ue),vt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return o.config.ACCESS_TOKEN},set accessToken(l){o.config.ACCESS_TOKEN=l},get baseApiUrl(){return o.config.API_URL},set baseApiUrl(l){o.config.API_URL=l},get workerCount(){return Ye.workerCount},set workerCount(l){Ye.workerCount=l},get maxParallelImageRequests(){return o.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(l){o.config.MAX_PARALLEL_IMAGE_REQUESTS=l},clearStorage:function(l){o.clearTileCache(l)},workerUrl:""};return pc}),c})})(NT);var _L=NT.exports;const Ds=yg(_L);var qp=bL,xL=Object.prototype.hasOwnProperty;function bL(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var a in n)xL.call(n,a)&&(e[a]=n[a])}return e}var FT={exports:{}};(function(e,t){(function(){var n={};e.exports=n,n.simpleFilter=function(a,c){return c.filter(function(f){return n.test(a,f)})},n.test=function(a,c){return n.match(a,c)!==null},n.match=function(a,c,f){f=f||{};var o=0,v=[],x=c.length,E=0,T=0,P=f.pre||"",I=f.post||"",q=f.caseSensitive&&c||c.toLowerCase(),U;a=f.caseSensitive&&a||a.toLowerCase();for(var G=0;G<x;G++)U=c[G],q[G]===a[o]?(U=P+U+I,o+=1,T+=1+T):T=0,E+=T,v[v.length]=U;return o===a.length?(E=q===a?1/0:E,{rendered:v.join(""),score:E}):null},n.filter=function(a,c,f){return!c||c.length===0?[]:typeof a!="string"?c:(f=f||{},c.reduce(function(o,v,x,E){var T=v;f.extract&&(T=f.extract(v));var P=n.match(a,T,f);return P!=null&&(o[o.length]={string:P.rendered,score:P.score,index:x,original:v}),o},[]).sort(function(o,v){var x=v.score-o.score;return x||o.index-v.index}))}})()})(FT);var wL=FT.exports,Io=function(e){return this.component=e,this.items=[],this.active=0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,e.el.parentNode.insertBefore(this.wrapper,e.el.nextSibling),this};Io.prototype.show=function(){this.element.style.display="block"};Io.prototype.hide=function(){this.element.style.display="none"};Io.prototype.add=function(e){this.items.push(e)};Io.prototype.clear=function(){this.items=[],this.active=0};Io.prototype.isEmpty=function(){return!this.items.length};Io.prototype.isVisible=function(){return this.element.style.display==="block"};Io.prototype.draw=function(){if(this.element.innerHTML="",this.items.length===0){this.hide();return}for(var e=0;e<this.items.length;e++)this.drawItem(this.items[e],this.active===e);this.show()};Io.prototype.drawItem=function(e,t){var n=document.createElement("li"),a=document.createElement("a");t&&(n.className+=" active"),a.innerHTML=e.string,n.appendChild(a),this.element.appendChild(n),n.addEventListener("mousedown",(function(){this.selectingListItem=!0}).bind(this)),n.addEventListener("mouseup",(function(){this.handleMouseUp.call(this,e)}).bind(this))};Io.prototype.handleMouseUp=function(e){this.selectingListItem=!1,this.component.value(e.original),this.clear(),this.draw()};Io.prototype.move=function(e){this.active=e,this.draw()};Io.prototype.previous=function(){this.move(this.active===0?this.items.length-1:this.active-1)};Io.prototype.next=function(){this.move(this.active===this.items.length-1?0:this.active+1)};Io.prototype.drawError=function(e){var t=document.createElement("li");t.innerHTML=e,this.element.appendChild(t),this.show()};var SL=Io,EL=qp,CL=wL,kL=SL,eo=function(e,t,n){return n=n||{},this.options=EL({minLength:2,limit:5,filter:!0,hideOnBlur:!0},n),this.el=e,this.data=t||[],this.list=new kL(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",(function(a){this.handleKeyUp(a.keyCode)}).bind(this),!1),this.el.addEventListener("keydown",(function(a){this.handleKeyDown(a)}).bind(this)),this.el.addEventListener("focus",(function(){this.handleFocus()}).bind(this)),this.el.addEventListener("blur",(function(){this.handleBlur()}).bind(this)),this.el.addEventListener("paste",(function(a){this.handlePaste(a)}).bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};eo.prototype.handleKeyUp=function(e){e===40||e===38||e===27||e===13||e===9||this.handleInputChange(this.el.value)};eo.prototype.handleKeyDown=function(e){switch(e.keyCode){case 13:case 9:this.list.isEmpty()||(this.list.isVisible()&&e.preventDefault(),this.value(this.list.items[this.list.active].original),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next();break}};eo.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()};eo.prototype.handlePaste=function(e){if(e.clipboardData)this.handleInputChange(e.clipboardData.getData("Text"));else{var t=this;setTimeout(function(){t.handleInputChange(e.target.value)},100)}};eo.prototype.handleInputChange=function(e){if(this.query=this.normalize(e),this.list.clear(),this.query.length<this.options.minLength){this.list.draw();return}this.getCandidates((function(t){for(var n=0;n<t.length&&(this.list.add(t[n]),n!==this.options.limit-1);n++);this.list.draw()}).bind(this))};eo.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1};eo.prototype.update=function(e){this.data=e,this.handleKeyUp()};eo.prototype.clear=function(){this.data=[],this.list.clear()};eo.prototype.normalize=function(e){return e=e.toLowerCase(),e};eo.prototype.match=function(e,t){return e.indexOf(t)>-1};eo.prototype.value=function(e){if(this.selected=e,this.el.value=this.getItemValue(e),document.createEvent){var t=document.createEvent("HTMLEvents");t.initEvent("change",!0,!1),this.el.dispatchEvent(t)}else this.el.fireEvent("onchange")};eo.prototype.getCandidates=function(e){var t={pre:"<strong>",post:"</strong>",extract:(function(a){return this.getItemValue(a)}).bind(this)},n;this.options.filter?(n=CL.filter(this.query,this.data,t),n=n.map((function(a){return{original:a.original,string:this.render(a.original,a.string)}}).bind(this))):n=this.data.map((function(a){var c=this.render(a);return{original:a,string:c}}).bind(this)),e(n)};eo.prototype.getItemValue=function(e){return e};eo.prototype.render=function(e,t){if(t)return t;for(var n=e.original?this.getItemValue(e.original):this.getItemValue(e),a=this.normalize(n),c=a.lastIndexOf(this.query);c>-1;){var f=c+this.query.length;n=n.slice(0,c)+"<strong>"+n.slice(c,f)+"</strong>"+n.slice(f),c=a.slice(0,c).lastIndexOf(this.query)}return n};eo.prototype.renderError=function(e){this.list.drawError(e)};var TL=eo,jT=TL,IL=jT;typeof window<"u"&&(window.Suggestions=jT);var PL="Expected a function",SS=0/0,AL="[object Symbol]",ML=/^\s+|\s+$/g,RL=/^[-+]0x[0-9a-f]+$/i,LL=/^0b[01]+$/i,zL=/^0o[0-7]+$/i,DL=parseInt,OL=typeof ba=="object"&&ba&&ba.Object===Object&&ba,BL=typeof self=="object"&&self&&self.Object===Object&&self,NL=OL||BL||Function("return this")(),FL=Object.prototype,jL=FL.toString,UL=Math.max,$L=Math.min,H0=function(){return NL.Date.now()};function VL(e,t,n){var a,c,f,o,v,x,E=0,T=!1,P=!1,I=!0;if(typeof e!="function")throw new TypeError(PL);t=ES(t)||0,bx(n)&&(T=!!n.leading,P="maxWait"in n,f=P?UL(ES(n.maxWait)||0,t):f,I="trailing"in n?!!n.trailing:I);function q(oe){var pe=a,be=c;return a=c=void 0,E=oe,o=e.apply(be,pe),o}function U(oe){return E=oe,v=setTimeout(F,t),T?q(oe):o}function G(oe){var pe=oe-x,be=oe-E,Te=t-pe;return P?$L(Te,f-be):Te}function D(oe){var pe=oe-x,be=oe-E;return x===void 0||pe>=t||pe<0||P&&be>=f}function F(){var oe=H0();if(D(oe))return V(oe);v=setTimeout(F,G(oe))}function V(oe){return v=void 0,I&&a?q(oe):(a=c=void 0,o)}function B(){v!==void 0&&clearTimeout(v),E=0,a=x=c=v=void 0}function z(){return v===void 0?o:V(H0())}function ne(){var oe=H0(),pe=D(oe);if(a=arguments,c=this,x=oe,pe){if(v===void 0)return U(x);if(P)return v=setTimeout(F,t),q(x)}return v===void 0&&(v=setTimeout(F,t)),o}return ne.cancel=B,ne.flush=z,ne}function bx(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function qL(e){return!!e&&typeof e=="object"}function WL(e){return typeof e=="symbol"||qL(e)&&jL.call(e)==AL}function ES(e){if(typeof e=="number")return e;if(WL(e))return SS;if(bx(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=bx(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(ML,"");var n=LL.test(e);return n||zL.test(e)?DL(e.slice(2),n?2:8):RL.test(e)?SS:+e}var GL=VL,U1={exports:{}},_p=typeof Reflect=="object"?Reflect:null,CS=_p&&typeof _p.apply=="function"?_p.apply:function(t,n,a){return Function.prototype.apply.call(t,n,a)},dy;_p&&typeof _p.ownKeys=="function"?dy=_p.ownKeys:Object.getOwnPropertySymbols?dy=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:dy=function(t){return Object.getOwnPropertyNames(t)};function HL(e){console&&console.warn&&console.warn(e)}var UT=Number.isNaN||function(t){return t!==t};function hn(){hn.init.call(this)}U1.exports=hn;U1.exports.once=YL;hn.EventEmitter=hn;hn.prototype._events=void 0;hn.prototype._eventsCount=0;hn.prototype._maxListeners=void 0;var kS=10;function Mg(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(hn,"defaultMaxListeners",{enumerable:!0,get:function(){return kS},set:function(e){if(typeof e!="number"||e<0||UT(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");kS=e}});hn.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};hn.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||UT(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function $T(e){return e._maxListeners===void 0?hn.defaultMaxListeners:e._maxListeners}hn.prototype.getMaxListeners=function(){return $T(this)};hn.prototype.emit=function(t){for(var n=[],a=1;a<arguments.length;a++)n.push(arguments[a]);var c=t==="error",f=this._events;if(f!==void 0)c=c&&f.error===void 0;else if(!c)return!1;if(c){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var v=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw v.context=o,v}var x=f[t];if(x===void 0)return!1;if(typeof x=="function")CS(x,this,n);else for(var E=x.length,T=HT(x,E),a=0;a<E;++a)CS(T[a],this,n);return!0};function VT(e,t,n,a){var c,f,o;if(Mg(n),f=e._events,f===void 0?(f=e._events=Object.create(null),e._eventsCount=0):(f.newListener!==void 0&&(e.emit("newListener",t,n.listener?n.listener:n),f=e._events),o=f[t]),o===void 0)o=f[t]=n,++e._eventsCount;else if(typeof o=="function"?o=f[t]=a?[n,o]:[o,n]:a?o.unshift(n):o.push(n),c=$T(e),c>0&&o.length>c&&!o.warned){o.warned=!0;var v=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");v.name="MaxListenersExceededWarning",v.emitter=e,v.type=t,v.count=o.length,HL(v)}return e}hn.prototype.addListener=function(t,n){return VT(this,t,n,!1)};hn.prototype.on=hn.prototype.addListener;hn.prototype.prependListener=function(t,n){return VT(this,t,n,!0)};function ZL(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function qT(e,t,n){var a={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},c=ZL.bind(a);return c.listener=n,a.wrapFn=c,c}hn.prototype.once=function(t,n){return Mg(n),this.on(t,qT(this,t,n)),this};hn.prototype.prependOnceListener=function(t,n){return Mg(n),this.prependListener(t,qT(this,t,n)),this};hn.prototype.removeListener=function(t,n){var a,c,f,o,v;if(Mg(n),c=this._events,c===void 0)return this;if(a=c[t],a===void 0)return this;if(a===n||a.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete c[t],c.removeListener&&this.emit("removeListener",t,a.listener||n));else if(typeof a!="function"){for(f=-1,o=a.length-1;o>=0;o--)if(a[o]===n||a[o].listener===n){v=a[o].listener,f=o;break}if(f<0)return this;f===0?a.shift():KL(a,f),a.length===1&&(c[t]=a[0]),c.removeListener!==void 0&&this.emit("removeListener",t,v||n)}return this};hn.prototype.off=hn.prototype.removeListener;hn.prototype.removeAllListeners=function(t){var n,a,c;if(a=this._events,a===void 0)return this;if(a.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):a[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete a[t]),this;if(arguments.length===0){var f=Object.keys(a),o;for(c=0;c<f.length;++c)o=f[c],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=a[t],typeof n=="function")this.removeListener(t,n);else if(n!==void 0)for(c=n.length-1;c>=0;c--)this.removeListener(t,n[c]);return this};function WT(e,t,n){var a=e._events;if(a===void 0)return[];var c=a[t];return c===void 0?[]:typeof c=="function"?n?[c.listener||c]:[c]:n?XL(c):HT(c,c.length)}hn.prototype.listeners=function(t){return WT(this,t,!0)};hn.prototype.rawListeners=function(t){return WT(this,t,!1)};hn.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):GT.call(e,t)};hn.prototype.listenerCount=GT;function GT(e){var t=this._events;if(t!==void 0){var n=t[e];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}hn.prototype.eventNames=function(){return this._eventsCount>0?dy(this._events):[]};function HT(e,t){for(var n=new Array(t),a=0;a<t;++a)n[a]=e[a];return n}function KL(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function XL(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function YL(e,t){return new Promise(function(n,a){function c(o){e.removeListener(t,f),a(o)}function f(){typeof e.removeListener=="function"&&e.removeListener("error",c),n([].slice.call(arguments))}ZT(e,t,f,{once:!0}),t!=="error"&&JL(e,c,{once:!0})})}function JL(e,t,n){typeof e.on=="function"&&ZT(e,"error",t,n)}function ZT(e,t,n,a){if(typeof e.on=="function")a.once?e.once(t,n):e.on(t,n);else if(typeof e.addEventListener=="function")e.addEventListener(t,function c(f){a.once&&e.removeEventListener(t,c),n(f)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var QL=U1.exports,ez={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}};function tz(e){var t=e.match(/\s*(.+)\s*=\s*"?([^"]+)"?/);return t?{key:t[1],value:t[2]}:null}function rz(e){var t=e.match(/<?([^>]*)>(.*)/);if(!t)return null;var n=t[1],a=t[2].split(";"),c=null,f=a.reduce(function(o,v){var x=tz(v);return x?x.key==="rel"?(c||(c=x.value),o):(o[x.key]=x.value,o):o},{});return c?{url:n,rel:c,params:f}:null}function nz(e){return e?e.split(/,\s*</).reduce(function(t,n){var a=rz(n);if(!a)return t;var c=a.rel.split(/\s+/);return c.forEach(function(f){t[f]||(t[f]={url:a.url,params:a.params})}),t},{}):{}}var iz=nz,oz=iz;function $1(e,t){this.request=e,this.headers=t.headers,this.rawBody=t.body,this.statusCode=t.statusCode;try{this.body=JSON.parse(t.body||"{}")}catch{this.body=t.body}this.links=oz(this.headers.link)}$1.prototype.hasNextPage=function(){return!!this.links.next};$1.prototype.nextPage=function(){return this.hasNextPage()?this.request._extend({path:this.links.next.url}):null};var az=$1,Rg={API_ORIGIN:"https://api.mapbox.com",EVENT_PROGRESS_DOWNLOAD:"downloadProgress",EVENT_PROGRESS_UPLOAD:"uploadProgress",EVENT_ERROR:"error",EVENT_RESPONSE:"response",ERROR_HTTP:"HttpError",ERROR_REQUEST_ABORTED:"RequestAbortedError"},TS=Rg;function sz(e){var t=e.type||TS.ERROR_HTTP,n;if(e.body)try{n=JSON.parse(e.body)}catch{n=e.body}else n=null;var a=e.message||null;a||(typeof n=="string"?a=n:n&&typeof n.message=="string"?a=n.message:t===TS.ERROR_REQUEST_ABORTED&&(a="Request aborted")),this.message=a,this.type=t,this.statusCode=e.statusCode||null,this.request=e.request,this.body=n}var lz=sz;function uz(e){var t=e.indexOf(":"),n=e.substring(0,t).trim().toLowerCase(),a=e.substring(t+1).trim();return{name:n,value:a}}function cz(e){var t={};return e&&e.trim().split(/[\r|\n]+/).forEach(function(n){var a=uz(n);t[a.name]=a.value}),t}var pz=cz,hz=az,IS=lz,Z0=Rg,dz=pz,Zy={};function fz(e){var t=Zy[e.id];t&&(t.abort(),delete Zy[e.id])}function mz(e,t){return new hz(e,{body:t.response,headers:dz(t.getAllResponseHeaders()),statusCode:t.status})}function PS(e){var t=e.total,n=e.loaded,a=100*n/t;return{total:t,transferred:n,percent:a}}function KT(e,t){return new Promise(function(n,a){t.onprogress=function(o){e.emitter.emit(Z0.EVENT_PROGRESS_DOWNLOAD,PS(o))};var c=e.file;c&&(t.upload.onprogress=function(o){e.emitter.emit(Z0.EVENT_PROGRESS_UPLOAD,PS(o))}),t.onerror=function(o){a(o)},t.onabort=function(){var o=new IS({request:e,type:Z0.ERROR_REQUEST_ABORTED});a(o)},t.onload=function(){if(delete Zy[e.id],t.status<200||t.status>=400){var o=new IS({request:e,body:t.response,statusCode:t.status});a(o);return}n(t)};var f=e.body;typeof f=="string"?t.send(f):f?t.send(JSON.stringify(f)):c?t.send(c):t.send(),Zy[e.id]=t}).then(function(n){return mz(e,n)})}function XT(e,t){var n=e.url(t),a=new window.XMLHttpRequest;return a.open(e.method,n),Object.keys(e.headers).forEach(function(c){a.setRequestHeader(c,e.headers[c])}),a}function yz(e){return Promise.resolve().then(function(){var t=XT(e,e.client.accessToken);return KT(e,t)})}var gz={browserAbort:fz,sendRequestXhr:KT,browserSend:yz,createRequestXhr:XT},Ky={exports:{}};/*! http://mths.be/base64 v0.1.0 by @mathias | MIT license */Ky.exports;(function(e,t){(function(n){var a=t,c=e&&e.exports==a&&e,f=typeof ba=="object"&&ba;(f.global===f||f.window===f)&&(n=f);var o=function(U){this.message=U};o.prototype=new Error,o.prototype.name="InvalidCharacterError";var v=function(U){throw new o(U)},x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",E=/[\t\n\f\r ]/g,T=function(U){U=String(U).replace(E,"");var G=U.length;G%4==0&&(U=U.replace(/==?$/,""),G=U.length),(G%4==1||/[^+a-zA-Z0-9/]/.test(U))&&v("Invalid character: the string to be decoded is not correctly encoded.");for(var D=0,F,V,B="",z=-1;++z<G;)V=x.indexOf(U.charAt(z)),F=D%4?F*64+V:V,D++%4&&(B+=String.fromCharCode(255&F>>(-2*D&6)));return B},P=function(U){U=String(U),/[^\0-\xFF]/.test(U)&&v("The string to be encoded contains characters outside of the Latin1 range.");for(var G=U.length%3,D="",F=-1,V,B,z,ne,oe=U.length-G;++F<oe;)V=U.charCodeAt(F)<<16,B=U.charCodeAt(++F)<<8,z=U.charCodeAt(++F),ne=V+B+z,D+=x.charAt(ne>>18&63)+x.charAt(ne>>12&63)+x.charAt(ne>>6&63)+x.charAt(ne&63);return G==2?(V=U.charCodeAt(F)<<8,B=U.charCodeAt(++F),ne=V+B,D+=x.charAt(ne>>10)+x.charAt(ne>>4&63)+x.charAt(ne<<2&63)+"="):G==1&&(ne=U.charCodeAt(F),D+=x.charAt(ne>>2)+x.charAt(ne<<4&63)+"=="),D},I={encode:P,decode:T,version:"0.1.0"};if(a&&!a.nodeType)if(c)c.exports=I;else for(var q in I)I.hasOwnProperty(q)&&(a[q]=I[q]);else n.base64=I})(ba)})(Ky,Ky.exports);var vz=Ky.exports,_z=vz,K0={};function xz(e){if(K0[e])return K0[e];var t=e.split("."),n=t[0],a=t[1];if(!a)throw new Error("Invalid token");var c=bz(a),f={usage:n,user:c.u};return vu(c,"a")&&(f.authorization=c.a),vu(c,"exp")&&(f.expires=c.exp*1e3),vu(c,"iat")&&(f.created=c.iat*1e3),vu(c,"scopes")&&(f.scopes=c.scopes),vu(c,"client")&&(f.client=c.client),vu(c,"ll")&&(f.lastLogin=c.ll),vu(c,"iu")&&(f.impersonator=c.iu),K0[e]=f,f}function bz(e){try{return JSON.parse(_z.decode(e))}catch{throw new Error("Invalid token")}}function vu(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var YT=xz,JT={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(n=!1));function c(x,E,T){this.fn=x,this.context=E,this.once=T||!1}function f(x,E,T,P,I){if(typeof T!="function")throw new TypeError("The listener must be a function");var q=new c(T,P||x,I),U=n?n+E:E;return x._events[U]?x._events[U].fn?x._events[U]=[x._events[U],q]:x._events[U].push(q):(x._events[U]=q,x._eventsCount++),x}function o(x,E){--x._eventsCount===0?x._events=new a:delete x._events[E]}function v(){this._events=new a,this._eventsCount=0}v.prototype.eventNames=function(){var E=[],T,P;if(this._eventsCount===0)return E;for(P in T=this._events)t.call(T,P)&&E.push(n?P.slice(1):P);return Object.getOwnPropertySymbols?E.concat(Object.getOwnPropertySymbols(T)):E},v.prototype.listeners=function(E){var T=n?n+E:E,P=this._events[T];if(!P)return[];if(P.fn)return[P.fn];for(var I=0,q=P.length,U=new Array(q);I<q;I++)U[I]=P[I].fn;return U},v.prototype.listenerCount=function(E){var T=n?n+E:E,P=this._events[T];return P?P.fn?1:P.length:0},v.prototype.emit=function(E,T,P,I,q,U){var G=n?n+E:E;if(!this._events[G])return!1;var D=this._events[G],F=arguments.length,V,B;if(D.fn){switch(D.once&&this.removeListener(E,D.fn,void 0,!0),F){case 1:return D.fn.call(D.context),!0;case 2:return D.fn.call(D.context,T),!0;case 3:return D.fn.call(D.context,T,P),!0;case 4:return D.fn.call(D.context,T,P,I),!0;case 5:return D.fn.call(D.context,T,P,I,q),!0;case 6:return D.fn.call(D.context,T,P,I,q,U),!0}for(B=1,V=new Array(F-1);B<F;B++)V[B-1]=arguments[B];D.fn.apply(D.context,V)}else{var z=D.length,ne;for(B=0;B<z;B++)switch(D[B].once&&this.removeListener(E,D[B].fn,void 0,!0),F){case 1:D[B].fn.call(D[B].context);break;case 2:D[B].fn.call(D[B].context,T);break;case 3:D[B].fn.call(D[B].context,T,P);break;case 4:D[B].fn.call(D[B].context,T,P,I);break;default:if(!V)for(ne=1,V=new Array(F-1);ne<F;ne++)V[ne-1]=arguments[ne];D[B].fn.apply(D[B].context,V)}}return!0},v.prototype.on=function(E,T,P){return f(this,E,T,P,!1)},v.prototype.once=function(E,T,P){return f(this,E,T,P,!0)},v.prototype.removeListener=function(E,T,P,I){var q=n?n+E:E;if(!this._events[q])return this;if(!T)return o(this,q),this;var U=this._events[q];if(U.fn)U.fn===T&&(!I||U.once)&&(!P||U.context===P)&&o(this,q);else{for(var G=0,D=[],F=U.length;G<F;G++)(U[G].fn!==T||I&&!U[G].once||P&&U[G].context!==P)&&D.push(U[G]);D.length?this._events[q]=D.length===1?D[0]:D:o(this,q)}return this},v.prototype.removeAllListeners=function(E){var T;return E?(T=n?n+E:E,this._events[T]&&o(this,T)):(this._events=new a,this._eventsCount=0),this},v.prototype.off=v.prototype.removeListener,v.prototype.addListener=v.prototype.on,v.prefixed=n,v.EventEmitter=v,e.exports=v})(JT);var wz=JT.exports;function Sz(e){return e.map(encodeURIComponent).join(",")}function QT(e){return Array.isArray(e)?Sz(e):encodeURIComponent(String(e))}function eI(e,t,n){if(n===!1||n===null)return e;var a=/\?/.test(e)?"&":"?",c=encodeURIComponent(t);return n!==void 0&&n!==""&&n!==!0&&(c+="="+QT(n)),""+e+a+c}function Ez(e,t){if(!t)return e;var n=e;return Object.keys(t).forEach(function(a){var c=t[a];c!==void 0&&(Array.isArray(c)&&(c=c.filter(function(f){return f!=null}).join(",")),n=eI(n,a,c))}),n}function Cz(e,t){if(!t||e.slice(0,4)==="http")return e;var n=e[0]==="/"?"":"/";return""+t.replace(/\/$/,"")+n+e}function kz(e,t){return t?e.replace(/\/:([a-zA-Z0-9]+)/g,function(n,a){var c=t[a];if(c===void 0)throw new Error("Unspecified route parameter "+a);var f=QT(c);return"/"+f}):e}var Tz={appendQueryObject:Ez,appendQueryParam:eI,prependOrigin:Cz,interpolateRouteParams:kz},Iz=YT,V1=qp,Pz=wz,qm=Tz,AS=Rg,Az=1;function Dl(e,t){if(!e)throw new Error("MapiRequest requires a client");if(!t||!t.path||!t.method)throw new Error("MapiRequest requires an options object with path and method properties");var n={};t.body&&(n["content-type"]="application/json");var a=V1(n,t.headers),c=Object.keys(a).reduce(function(f,o){return f[o.toLowerCase()]=a[o],f},{});this.id=Az++,this._options=t,this.emitter=new Pz,this.client=e,this.response=null,this.error=null,this.sent=!1,this.aborted=!1,this.path=t.path,this.method=t.method,this.origin=t.origin||e.origin,this.query=t.query||{},this.params=t.params||{},this.body=t.body||null,this.file=t.file||null,this.encoding=t.encoding||"utf8",this.sendFileAs=t.sendFileAs||null,this.headers=c}Dl.prototype.url=function(t){var n=qm.prependOrigin(this.path,this.origin);n=qm.appendQueryObject(n,this.query);var a=this.params,c=t??this.client.accessToken;if(c){n=qm.appendQueryParam(n,"access_token",c);var f=Iz(c).user;a=V1({ownerId:f},a)}return n=qm.interpolateRouteParams(n,a),n};Dl.prototype.send=function(){var t=this;if(t.sent)throw new Error("This request has already been sent. Check the response and error properties. Create a new request with clone().");return t.sent=!0,t.client.sendRequest(t).then(function(n){return t.response=n,t.emitter.emit(AS.EVENT_RESPONSE,n),n},function(n){throw t.error=n,t.emitter.emit(AS.EVENT_ERROR,n),n})};Dl.prototype.abort=function(){this._nextPageRequest&&(this._nextPageRequest.abort(),delete this._nextPageRequest),!(this.response||this.error||this.aborted)&&(this.aborted=!0,this.client.abortRequest(this))};Dl.prototype.eachPage=function(t){var n=this;function a(o){function v(){delete n._nextPageRequest;var x=o.nextPage();x&&(n._nextPageRequest=x,f(x))}t(null,o,v)}function c(o){t(o,null,function(){})}function f(o){o.send().then(a,c)}f(this)};Dl.prototype.clone=function(){return this._extend()};Dl.prototype._extend=function(t){var n=V1(this._options,t);return new Dl(this.client,n)};var Mz=Dl,Rz=YT,Lz=Mz,zz=Rg;function tI(e){if(!e||!e.accessToken)throw new Error("Cannot create a client without an access token");Rz(e.accessToken),this.accessToken=e.accessToken,this.origin=e.origin||zz.API_ORIGIN}tI.prototype.createRequest=function(t){return new Lz(this,t)};var rI=tI,nI=gz,iI=rI;function Ip(e){iI.call(this,e)}Ip.prototype=Object.create(iI.prototype);Ip.prototype.constructor=Ip;Ip.prototype.sendRequest=nI.browserSend;Ip.prototype.abortRequest=nI.browserAbort;function Dz(e){return new Ip(e)}var oI=Dz,Oz=oI,Bz=Oz,Nz=Object.prototype.toString,Fz=function(e){var t;return Nz.call(e)==="[object Object]"&&(t=Object.getPrototypeOf(e),t===null||t===Object.getPrototypeOf({}))},jz=Fz,Uz=qp,aI="value",X0=`
  `,bn={};bn.assert=function(e,t){return t=t||{},function(n){var a=Ol(e,n);if(a){var c=q1(a,t);throw t.apiName&&(c=t.apiName+": "+c),new Error(c)}}};bn.shape=function(t){var n=Wz(t);return function(c){var f=Ol(bn.plainObject,c);if(f)return f;for(var o,v,x=[],E=0;E<n.length;E++)o=n[E].key,v=n[E].value,f=Ol(v,c[o]),f&&x.push([o].concat(f));return x.length<2?x[0]:function(T){x=x.map(function(q){var U=q[0],G=q1(q,T).split(`
`).join(X0);return"- "+U+": "+G});var P=T.path.join("."),I=P===aI?"":" of "+P;return"The following properties"+I+" have invalid values:"+X0+x.join(X0)}}};bn.strictShape=function(t){var n=bn.shape(t);return function(c){var f=n(c);if(f)return f;var o=Object.keys(c).reduce(function(v,x){return t[x]===void 0&&v.push(x),v},[]);if(o.length!==0)return function(){return"The following keys are invalid: "+o.join(", ")}}};bn.arrayOf=function(t){return sI(t)};bn.tuple=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return sI(t)};function sI(e){var t=Array.isArray(e),n=function(a){return t?e[a]:e};return function(c){var f=Ol(bn.plainArray,c);if(f)return f;if(t&&c.length!==e.length)return"an array with "+e.length+" items";for(var o=0;o<c.length;o++)if(f=Ol(n(o),c[o]),f)return[o].concat(f)}}bn.required=function(t){function n(a){return a==null?function(c){return lI(c,uI(c.path)?"cannot be undefined/null.":"is required.")}:t.apply(this,arguments)}return n.__required=!0,n};bn.oneOfType=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return function(a){var c=t.map(function(f){return Ol(f,a)}).filter(Boolean);if(c.length===t.length)return c.every(function(f){return f.length===1&&typeof f[0]=="string"})?$z(c.map(function(f){return f[0]})):c.reduce(function(f,o){return o.length>f.length?o:f})}};bn.equal=function(t){return function(a){if(a!==t)return JSON.stringify(t)}};bn.oneOf=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments),n=t.map(function(a){return bn.equal(a)});return bn.oneOfType.apply(this,n)};bn.range=function(t){var n=t[0],a=t[1];return function(f){var o=Ol(bn.number,f);if(o||f<n||f>a)return"number between "+n+" & "+a+" (inclusive)"}};bn.any=function(){};bn.boolean=function(t){if(typeof t!="boolean")return"boolean"};bn.number=function(t){if(typeof t!="number")return"number"};bn.plainArray=function(t){if(!Array.isArray(t))return"array"};bn.plainObject=function(t){if(!jz(t))return"object"};bn.string=function(t){if(typeof t!="string")return"string"};bn.func=function(t){if(typeof t!="function")return"function"};function Ol(e,t){if(!(t==null&&!e.hasOwnProperty("__required"))){var n=e(t);if(n)return Array.isArray(n)?n:[n]}}function q1(e,t){var n=e.length,a=e[n-1],c=e.slice(0,n-1);return c.length===0&&(c=[aI]),t=Uz(t,{path:c}),typeof a=="function"?a(t):lI(t,Vz(a))}function $z(e){return e.length<2?e[0]:e.length===2?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e.slice(-1)}function Vz(e){return"must be "+qz(e)+"."}function qz(e){return/^an? /.test(e)?e:/^[aeiou]/i.test(e)?"an "+e:/^[a-z]/i.test(e)?"a "+e:e}function lI(e,t){var n=uI(e.path),a=e.path.join(".")+" "+t,c=n?"Item at position ":"";return c+a}function uI(e){return typeof e[e.length-1]=="number"||typeof e[0]=="number"}function Wz(e){return Object.keys(e||{}).map(function(t){return{key:t,value:e[t]}})}bn.validate=Ol;bn.processMessage=q1;var Gz=bn,Hz=qp,xp=Gz;function Zz(e){if(typeof window<"u")return e instanceof ba.Blob||e instanceof ba.ArrayBuffer?void 0:"Blob or ArrayBuffer";if(!(typeof e=="string"||e.pipe!==void 0))return"Filename or Readable stream"}function Kz(e,t){return xp.assert(xp.strictShape(e),t)}function Xz(e){var t="date";if(typeof e=="boolean")return t;try{var n=new Date(e);if(n.getTime&&isNaN(n.getTime()))return t}catch{return t}}function Yz(e){return xp.tuple(xp.number,xp.number)(e)}var Jz=Hz(xp,{file:Zz,date:Xz,coordinates:Yz,assertShape:Kz});function Qz(e,t){var n=function(a,c){return t.indexOf(a)!==-1&&c!==void 0};return typeof t=="function"&&(n=t),Object.keys(e).filter(function(a){return n(a,e[a])}).reduce(function(a,c){return a[c]=e[c],a},{})}var e5=Qz;function t5(e,t){return Object.keys(e).reduce(function(n,a){return n[a]=t(a,e[a]),n},{})}var r5=t5,n5=r5;function i5(e){return n5(e,function(t,n){return typeof n=="boolean"?JSON.stringify(n):n})}var o5=i5,a5=rI,s5=oI;function l5(e){return function(t){var n;a5.prototype.isPrototypeOf(t)?n=t:n=s5(t);var a=Object.create(e);return a.client=n,a}}var u5=l5,cI=qp,jr=Jz,Xy=e5,pI=o5,c5=u5,W1={},hI=["country","region","postcode","district","place","locality","neighborhood","address","poi","poi.landmark"];W1.forwardGeocode=function(e){jr.assertShape({query:jr.required(jr.string),mode:jr.oneOf("mapbox.places","mapbox.places-permanent"),countries:jr.arrayOf(jr.string),proximity:jr.oneOf(jr.coordinates,"ip"),types:jr.arrayOf(jr.oneOf(hI)),autocomplete:jr.boolean,bbox:jr.arrayOf(jr.number),limit:jr.number,language:jr.arrayOf(jr.string),routing:jr.boolean,fuzzyMatch:jr.boolean,worldview:jr.string})(e),e.mode=e.mode||"mapbox.places";var t=pI(cI({country:e.countries},Xy(e,["proximity","types","autocomplete","bbox","limit","language","routing","fuzzyMatch","worldview"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:Xy(e,["mode","query"]),query:t})};W1.reverseGeocode=function(e){jr.assertShape({query:jr.required(jr.coordinates),mode:jr.oneOf("mapbox.places","mapbox.places-permanent"),countries:jr.arrayOf(jr.string),types:jr.arrayOf(jr.oneOf(hI)),bbox:jr.arrayOf(jr.number),limit:jr.number,language:jr.arrayOf(jr.string),reverseMode:jr.oneOf("distance","score"),routing:jr.boolean,worldview:jr.string})(e),e.mode=e.mode||"mapbox.places";var t=pI(cI({country:e.countries},Xy(e,["country","types","bbox","limit","language","reverseMode","routing","worldview"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:Xy(e,["mode","query"]),query:t})};var p5=c5(W1);let h5="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",dI=e=>crypto.getRandomValues(new Uint8Array(e)),fI=(e,t,n)=>{let a=(2<<Math.log(e.length-1)/Math.LN2)-1,c=-~(1.6*a*t/e.length);return(f=t)=>{let o="";for(;;){let v=n(c),x=c;for(;x--;)if(o+=e[v[x]&a]||"",o.length===f)return o}}},d5=(e,t=21)=>fI(e,t,dI),f5=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"");const m5=Object.freeze(Object.defineProperty({__proto__:null,customAlphabet:d5,customRandom:fI,nanoid:f5,random:dI,urlAlphabet:h5},Symbol.toStringTag,{value:"Module"})),y5=$C(m5);var g5=y5.nanoid;function mI(e){this.origin=e.origin||"https://api.mapbox.com",this.endpoint="events/v2",this.access_token=e.accessToken,this.version="0.2.0",this.sessionID=this.generateSessionID(),this.userAgent=this.getUserAgent(),this.options=e,this.send=this.send.bind(this),this.countries=e.countries?e.countries.split(","):null,this.types=e.types?e.types.split(","):null,this.bbox=e.bbox?e.bbox:null,this.language=e.language?e.language.split(","):null,this.limit=e.limit?+e.limit:null,this.locale=navigator.language||null,this.enableEventLogging=this.shouldEnableLogging(e),this.eventQueue=new Array,this.flushInterval=e.flushInterval||1e3,this.maxQueueSize=e.maxQueueSize||100,this.timer=this.flushInterval?setTimeout(this.flush.bind(this),this.flushInterval):null,this.lastSentInput="",this.lastSentIndex=0}mI.prototype={select:function(e,t){var n=this.getSelectedIndex(e,t),a=this.getEventPayload("search.select",t);if(a.resultIndex=n,a.resultPlaceName=e.place_name,a.resultId=e.id,!(n===this.lastSentIndex&&a.queryString===this.lastSentInput||n==-1)&&(this.lastSentIndex=n,this.lastSentInput=a.queryString,!!a.queryString))return this.push(a)},start:function(e){var t=this.getEventPayload("search.start",e);if(t.queryString)return this.push(t)},keyevent:function(e,t){if(e.key&&!(e.metaKey||[9,27,37,39,13,38,40].indexOf(e.keyCode)!==-1)){var n=this.getEventPayload("search.keystroke",t);if(n.lastAction=e.key,!!n.queryString)return this.push(n)}},send:function(e,t){if(!this.enableEventLogging)return t?t():void 0;var n=this.getRequestOptions(e);this.request(n,(function(a){if(a)return this.handleError(a,t);if(t)return t()}).bind(this))},getRequestOptions:function(e){Array.isArray(e)||(e=[e]);var t={method:"POST",host:this.origin,path:this.endpoint+"?access_token="+this.access_token,headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return t},getEventPayload:function(e,t){var n;t.options.proximity?typeof t.options.proximity=="object"?n=[t.options.proximity.longitude,t.options.proximity.latitude]:t.options.proximity==="ip"?n=[999,999]:n=t.options.proximity:n=null;var a=t._map?t._map.getZoom():void 0,c={event:e,created:+new Date,sessionIdentifier:this.sessionID,country:this.countries,userAgent:this.userAgent,language:this.language,bbox:this.bbox,types:this.types,endpoint:"mapbox.places",autocomplete:t.options.autocomplete,fuzzyMatch:t.options.fuzzyMatch,proximity:n,limit:t.options.limit,routing:t.options.routing,worldview:t.options.worldview,mapZoom:a,keyboardLocale:this.locale};return e==="search.select"?c.queryString=t.inputString:e!="search.select"&&t._inputEl?c.queryString=t._inputEl.value:c.queryString=t.inputString,c},request:function(e,t){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(this.readyState==4)return this.status==204?t(null):t(this.statusText)},n.open(e.method,e.host+"/"+e.path,!0);for(var a in e.headers){var c=e.headers[a];n.setRequestHeader(a,c)}n.send(e.body)},handleError:function(e,t){if(t)return t(e)},generateSessionID:function(){return g5()},getUserAgent:function(){return"mapbox-gl-geocoder."+this.version+"."+navigator.userAgent},getSelectedIndex:function(e,t){if(t._typeahead){var n=t._typeahead.data,a=e.id,c=n.map(function(o){return o.id}),f=c.indexOf(a);return f}},shouldEnableLogging:function(e){return!(e.enableEventLogging===!1||e.origin&&e.origin!=="https://api.mapbox.com"||e.localGeocoder||e.filter)},flush:function(){this.eventQueue.length>0&&(this.send(this.eventQueue),this.eventQueue=new Array),this.timer&&clearTimeout(this.timer),this.flushInterval&&(this.timer=setTimeout(this.flush.bind(this),this.flushInterval))},push:function(e,t){this.eventQueue.push(e),(this.eventQueue.length>=this.maxQueueSize||t)&&this.flush()},remove:function(){this.flush()}};var v5=mI,_5={de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"",ja:"",lv:"Meklt",pt:"Procurar",sr:"",zh:"",cs:"Vyhledvn",hu:"Keress",ka:"",nb:"Ske",sk:"Vyhadvanie",th:"",fi:"Hae",is:"Leita",ko:"",pl:"Szukaj",sl:"Iskanje",fa:"",ru:""},x5={placeholder:_5},yI={exports:{}};(function(e){(function(t,n,a){e.exports?e.exports=a():t[n]=a()})(ba,"subtag",function(){var t="",n=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function a(x){return x.match(n)||[]}function c(x){return a(x).filter(function(E,T){return E&&T})}function f(x){return x=a(x),{language:x[1]||t,extlang:x[2]||t,script:x[3]||t,region:x[4]||t}}function o(x,E,T){Object.defineProperty(x,E,{value:T,enumerable:!0})}function v(x,E,T){function P(I){return a(I)[x]||t}o(P,"pattern",E),o(f,T,P)}return v(1,/^[a-zA-Z]{2,3}$/,"language"),v(2,/^[a-zA-Z]{3}$/,"extlang"),v(3,/^[a-zA-Z]{4}$/,"script"),v(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),o(f,"split",c),f})})(yI);var b5=yI.exports;function gI(){}gI.prototype={isSupport:function(){return!!window.navigator.geolocation},getCurrentPosition:function(){const e={enableHighAccuracy:!0};return new Promise(function(t,n){window.navigator.geolocation.getCurrentPosition(t,n,e)})}};var w5=gI;function S5(e,t){const n=vI(e),a=["address","street","place","country"];var c;if(typeof t=="function")return t(n);const f=a.indexOf(t);return f===-1?c=a:c=a.slice(f),c.reduce(function(o,v){return n[v]?(o!==""&&(o=o+", "),o+n[v]):o},"")}function vI(e){const t=e.address||"",n=e.text||"",a=e.place_name||"",f={address:a.split(",")[0],houseNumber:t,street:n,placeName:a};return e.context.forEach(function(o){const v=o.id.split(".")[0];f[v]=o.text}),f}const E5=/^[ ]*(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)[ ]*$/;var C5={transformFeatureToGeolocationText:S5,getAddressInfo:vI,REVERSE_GEOCODE_COORD_RGX:E5},k5=IL,T5=GL,Su=qp,I5=QL.EventEmitter,MS=ez,Y0=Bz,J0=p5,P5=v5,A5=x5,M5=b5,R5=w5,RS=C5;const dl={FORWARD:0,LOCAL:1,REVERSE:2};function L5(){var e=document.createElement("div");return e.className="mapboxgl-ctrl-geocoder--powered-by",e.innerHTML='<a href="https://www.mapbox.com/search-service" target="_blank">Powered by Mapbox</a>',e}function _I(e){this._eventEmitter=new I5,this.options=Su({},this.options,e),this.inputString="",this.fresh=!0,this.lastSelected=null,this.geolocation=new R5}_I.prototype={options:{zoom:16,flyTo:!0,trackProximity:!0,minLength:2,reverseGeocode:!1,flipCoordinates:!1,limit:5,origin:"https://api.mapbox.com",enableEventLogging:!0,marker:!0,mapboxgl:null,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,enableGeolocation:!1,addressAccuracy:"street",getItemValue:function(e){return e.place_name},render:function(e){var t=e.place_name.split(",");return'<div class="mapboxgl-ctrl-geocoder--suggestion"><div class="mapboxgl-ctrl-geocoder--suggestion-title">'+t[0]+'</div><div class="mapboxgl-ctrl-geocoder--suggestion-address">'+t.splice(1,t.length).join(",")+"</div></div>"}},addTo:function(e){function t(n,a){if(!document.body.contains(a))throw new Error("Element provided to #addTo() exists, but is not in the DOM");const c=n.onAdd();a.appendChild(c)}if(e._controlContainer)e.addControl(this);else if(e instanceof HTMLElement)t(this,e);else if(typeof e=="string"){const n=document.querySelectorAll(e);if(n.length===0)throw new Error("Element ",e,"not found.");if(n.length>1)throw new Error("Geocoder can only be added to a single html element");t(this,n[0])}else throw new Error("Error: addTo must be a mapbox-gl-js map, an html element, or a CSS selector query for a single html element")},onAdd:function(e){if(e&&typeof e!="string"&&(this._map=e),this.setLanguage(),this.options.localGeocoderOnly||(this.geocoderService=J0(Y0({accessToken:this.options.accessToken,origin:this.options.origin}))),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this.eventManager=new P5(this.options),this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this),this._geolocateUser=this._geolocateUser.bind(this);var t=this.container=document.createElement("div");t.className="mapboxgl-ctrl-geocoder mapboxgl-ctrl";var n=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.className="mapboxgl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",T5(this._onKeyDown,200)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton),this._inputEl.addEventListener("keyup",(function(E){this.eventManager.keyevent(E,this)}).bind(this));var a=document.createElement("div");a.classList.add("mapboxgl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="mapboxgl-ctrl-geocoder--button";var c=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');if(this._clearEl.appendChild(c),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),a.appendChild(this._clearEl),a.appendChild(this._loadingEl),t.appendChild(n),t.appendChild(this._inputEl),t.appendChild(a),this.options.enableGeolocation&&this.geolocation.isSupport()){this._geolocateEl=document.createElement("button"),this._geolocateEl.setAttribute("aria-label","Geolocate"),this._geolocateEl.addEventListener("click",this._geolocateUser),this._geolocateEl.className="mapboxgl-ctrl-geocoder--button";var f=this.createIcon("geolocate",'<path d="M12.999 3.677L2.042 8.269c-.962.403-.747 1.823.29 1.912l5.032.431.431 5.033c.089 1.037 1.509 1.252 1.912.29l4.592-10.957c.345-.822-.477-1.644-1.299-1.299z" fill="#4264fb"/>');this._geolocateEl.appendChild(f),a.appendChild(this._geolocateEl),this._showGeolocateButton()}var o=this._typeahead=new k5(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit});this.setRenderFunction(this.options.render),o.getItemValue=this.options.getItemValue;var v=o.list.draw,x=this._footerNode=L5();return o.list.draw=function(){v.call(this),x.addEventListener("mousedown",(function(){this.selectingListItem=!0}).bind(this)),x.addEventListener("mouseup",(function(){this.selectingListItem=!1}).bind(this)),this.element.appendChild(x)},this.mapMarker=null,this._handleMarker=this._handleMarker.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._mapboxgl=this.options.mapboxgl,!this._mapboxgl&&this.options.marker&&(console.error("No mapboxgl detected in options. Map markers are disabled. Please set options.mapboxgl."),this.options.marker=!1)),t},_geolocateUser:function(){this._hideGeolocateButton(),this._showLoadingIcon(),this.geolocation.getCurrentPosition().then((function(e){this._hideLoadingIcon();const t={geometry:{type:"Point",coordinates:[e.coords.longitude,e.coords.latitude]}};this._handleMarker(t),this._fly(t),this._typeahead.clear(),this._typeahead.selected=!0,this.lastSelected=JSON.stringify(t),this._showClearButton(),this.fresh=!1;const n={limit:1,language:[this.options.language],query:t.geometry.coordinates,types:["address"]};if(this.options.localGeocoderOnly){const a=t.geometry.coordinates[0]+","+t.geometry.coordinates[1];this._setInputValue(a),this._eventEmitter.emit("result",{result:t})}else this.geocoderService.reverseGeocode(n).send().then((function(a){const c=a.body.features[0];if(c){const f=RS.transformFeatureToGeolocationText(c,this.options.addressAccuracy);this._setInputValue(f),c.user_coordinates=t.geometry.coordinates,this._eventEmitter.emit("result",{result:c})}else this._eventEmitter.emit("result",{result:{user_coordinates:t.geometry.coordinates}})}).bind(this))}).bind(this)).catch((function(e){e.code===1?this._renderUserDeniedGeolocationError():this._renderLocationError(),this._hideLoadingIcon(),this._showGeolocateButton(),this._hideAttribution()}).bind(this))},createIcon:function(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");return n.setAttribute("class","mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-"+e),n.setAttribute("viewBox","0 0 18 18"),n.setAttribute("xml:space","preserve"),n.setAttribute("width",18),n.setAttribute("height",18),n.innerHTML=t,n},onRemove:function(){return this.container.parentNode.removeChild(this.container),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this},_setInputValue:function(e){this._inputEl.value=e,setTimeout((function(){this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0)}).bind(this),1)},_onPaste:function(e){var t=(e.clipboardData||window.clipboardData).getData("text");t.length>=this.options.minLength&&this._geocode(t)},_onKeyDown:function(e){var t=27,n=9;if(e.keyCode===t&&this.options.clearAndBlurOnEsc)return this._clear(e),this._inputEl.blur();var a=e.target&&e.target.shadowRoot?e.target.shadowRoot.activeElement:e.target,c=a?a.value:"";if(!c)return this.fresh=!0,e.keyCode!==n&&this.clear(e),this._showGeolocateButton(),this._hideClearButton();this._hideGeolocateButton(),!(e.metaKey||[n,t,37,39,13,38,40].indexOf(e.keyCode)!==-1)&&a.value.length>=this.options.minLength&&this._geocode(a.value)},_showButton:function(){this._typeahead.selected&&this._showClearButton()},_hideButton:function(){this._typeahead.selected&&this._hideClearButton()},_showClearButton:function(){this._clearEl.style.display="block"},_hideClearButton:function(){this._clearEl.style.display="none"},_showGeolocateButton:function(){this._geolocateEl&&this.geolocation.isSupport()&&(this._geolocateEl.style.display="block")},_hideGeolocateButton:function(){this._geolocateEl&&(this._geolocateEl.style.display="none")},_showLoadingIcon:function(){this._loadingEl.style.display="block"},_hideLoadingIcon:function(){this._loadingEl.style.display="none"},_showAttribution:function(){this._footerNode.style.display="block"},_hideAttribution:function(){this._footerNode.style.display="none"},_onBlur:function(e){this.options.clearOnBlur&&this._clearOnBlur(e),this.options.collapsed&&this._collapse()},_onChange:function(){var e=this._typeahead.selected;e&&JSON.stringify(e)!==this.lastSelected&&(this._hideClearButton(),this.options.flyTo&&this._fly(e),this.options.marker&&this._mapboxgl&&this._handleMarker(e),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(e),this._eventEmitter.emit("result",{result:e}),this.eventManager.select(e,this))},_fly:function(e){var t;if(e.properties&&MS[e.properties.short_code])t=Su({},this.options.flyTo),this._map&&this._map.fitBounds(MS[e.properties.short_code].bbox,t);else if(e.bbox){var n=e.bbox;t=Su({},this.options.flyTo),this._map&&this._map.fitBounds([[n[0],n[1]],[n[2],n[3]]],t)}else{var a={zoom:this.options.zoom};t=Su({},a,this.options.flyTo),e.center?t.center=e.center:e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&(t.center=e.geometry.coordinates),this._map&&this._map.flyTo(t)}},_requestType:function(e,t){var n;return e.localGeocoderOnly?n=dl.LOCAL:e.reverseGeocode&&RS.REVERSE_GEOCODE_COORD_RGX.test(t)?n=dl.REVERSE:n=dl.FORWARD,n},_setupConfig:function(e,t){const n=["bbox","limit","proximity","countries","types","language","reverseMode","mode","autocomplete","fuzzyMatch","routing","worldview"],a=/[\s,]+/;var c=this,f=n.reduce(function(v,x){if(c.options[x]===void 0||c.options[x]===null)return v;["countries","types","language"].indexOf(x)>-1?v[x]=c.options[x].split(a):v[x]=c.options[x];const E=typeof c.options[x].longitude=="number"&&typeof c.options[x].latitude=="number";if(x==="proximity"&&E){const T=c.options[x].longitude,P=c.options[x].latitude;v[x]=[T,P]}return v},{});switch(e){case dl.REVERSE:{var o=t.split(a).map(function(v){return parseFloat(v,10)});c.options.flipCoordinates||o.reverse(),f.types&&f.types[0],f=Su(f,{query:o,limit:1}),["proximity","autocomplete","fuzzyMatch","bbox"].forEach(function(v){v in f&&delete f[v]})}break;case dl.FORWARD:{const v=t.trim();/^(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)?$/.test(v)&&(t=t.replace(/,/g," ")),f=Su(f,{query:t})}break}return f},_geocode:function(e){this.inputString=e,this._showLoadingIcon(),this._eventEmitter.emit("loading",{query:e});const t=this._requestType(this.options,e),n=this._setupConfig(t,e);var a;switch(t){case dl.LOCAL:a=Promise.resolve();break;case dl.FORWARD:a=this.geocoderService.forwardGeocode(n).send();break;case dl.REVERSE:a=this.geocoderService.reverseGeocode(n).send();break}var c=this.options.localGeocoder?this.options.localGeocoder(e)||[]:[],f=[],o=null;return a.catch((function(v){o=v}).bind(this)).then((function(v){this._hideLoadingIcon();var x={};return v?v.statusCode=="200"&&(x=v.body,x.request=v.request,x.headers=v.headers):x={type:"FeatureCollection",features:[]},x.config=n,this.fresh&&(this.eventManager.start(this),this.fresh=!1),x.features=x.features?c.concat(x.features):c,this.options.externalGeocoder?(f=this.options.externalGeocoder(e,x.features)||Promise.resolve([]),f.then(function(E){return x.features=x.features?E.concat(x.features):E,x},function(){return x})):x}).bind(this)).then((function(v){if(o)throw o;this.options.filter&&v.features.length&&(v.features=v.features.filter(this.options.filter)),v.features.length?(this._showClearButton(),this._hideGeolocateButton(),this._showAttribution(),this._eventEmitter.emit("results",v),this._typeahead.update(v.features)):(this._hideClearButton(),this._hideAttribution(),this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",v))}).bind(this)).catch((function(v){this._hideLoadingIcon(),this._hideAttribution(),c.length&&this.options.localGeocoder||f.length&&this.options.externalGeocoder?(this._showClearButton(),this._hideGeolocateButton(),this._typeahead.update(c)):(this._hideClearButton(),this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:c}),this._eventEmitter.emit("error",{error:v})}).bind(this)),a},_clear:function(e){e&&e.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._hideClearButton(),this._showGeolocateButton(),this._removeMarker(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0},clear:function(e){this._clear(e),this._inputEl.focus()},_clearOnBlur:function(e){var t=this;e.relatedTarget&&t._clear(e)},_onQueryResult:function(e){var t=e.body;if(t.features.length){var n=t.features[0];this._typeahead.selected=n,this._inputEl.value=n.place_name,this._onChange()}},_updateProximity:function(){if(!(!this._map||!this.options.trackProximity))if(this._map.getZoom()>9){var e=this._map.getCenter().wrap();this.setProximity({longitude:e.lng,latitude:e.lat},!1)}else this.setProximity(null,!1)},_collapse:function(){!this._inputEl.value&&this._inputEl!==document.activeElement&&this.container.classList.add("mapboxgl-ctrl-geocoder--collapsed")},_unCollapse:function(){this.container.classList.remove("mapboxgl-ctrl-geocoder--collapsed")},query:function(e){return this._geocode(e).then(this._onQueryResult),this},_renderError:function(){var e="<div class='mapbox-gl-geocoder--error'>There was an error reaching the server</div>";this._renderMessage(e)},_renderLocationError:function(){var e="<div class='mapbox-gl-geocoder--error'>A location error has occurred</div>";this._renderMessage(e)},_renderNoResults:function(){var e="<div class='mapbox-gl-geocoder--error mapbox-gl-geocoder--no-results'>No results found</div>";this._renderMessage(e)},_renderUserDeniedGeolocationError:function(){var e="<div class='mapbox-gl-geocoder--error'>Geolocation permission denied</div>";this._renderMessage(e)},_renderMessage:function(e){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(e)},_getPlaceholderText:function(){if(this.options.placeholder)return this.options.placeholder;if(this.options.language){var e=this.options.language.split(",")[0],t=M5.language(e),n=A5.placeholder[t];if(n)return n}return"Search"},setInput:function(e){return this._inputEl.value=e,this._typeahead.selected=null,this._typeahead.clear(),e.length>=this.options.minLength&&this._geocode(e),this},setProximity:function(e,t=!0){return this.options.proximity=e,t&&(this.options.trackProximity=!1),this},getProximity:function(){return this.options.proximity},setRenderFunction:function(e){return e&&typeof e=="function"&&(this._typeahead.render=e),this},getRenderFunction:function(){return this._typeahead.render},setLanguage:function(e){var t=navigator.language||navigator.userLanguage||navigator.browserLanguage;return this.options.language=e||this.options.language||t,this},getLanguage:function(){return this.options.language},getZoom:function(){return this.options.zoom},setZoom:function(e){return this.options.zoom=e,this},getFlyTo:function(){return this.options.flyTo},setFlyTo:function(e){return this.options.flyTo=e,this},getPlaceholder:function(){return this.options.placeholder},setPlaceholder:function(e){return this.placeholder=e||this._getPlaceholderText(),this._inputEl.placeholder=this.placeholder,this._inputEl.setAttribute("aria-label",this.placeholder),this},getBbox:function(){return this.options.bbox},setBbox:function(e){return this.options.bbox=e,this},getCountries:function(){return this.options.countries},setCountries:function(e){return this.options.countries=e,this},getTypes:function(){return this.options.types},setTypes:function(e){return this.options.types=e,this},getMinLength:function(){return this.options.minLength},setMinLength:function(e){return this.options.minLength=e,this._typeahead&&(this._typeahead.options.minLength=e),this},getLimit:function(){return this.options.limit},setLimit:function(e){return this.options.limit=e,this._typeahead&&(this._typeahead.options.limit=e),this},getFilter:function(){return this.options.filter},setFilter:function(e){return this.options.filter=e,this},setOrigin:function(e){return this.options.origin=e,this.geocoderService=J0(Y0({accessToken:this.options.accessToken,origin:this.options.origin})),this},getOrigin:function(){return this.options.origin},setAccessToken:function(e){return this.options.accessToken=e,this.geocoderService=J0(Y0({accessToken:this.options.accessToken,origin:this.options.origin})),this},setAutocomplete:function(e){return this.options.autocomplete=e,this},getAutocomplete:function(){return this.options.autocomplete},setFuzzyMatch:function(e){return this.options.fuzzyMatch=e,this},getFuzzyMatch:function(){return this.options.fuzzyMatch},setRouting:function(e){return this.options.routing=e,this},getRouting:function(){return this.options.routing},setWorldview:function(e){return this.options.worldview=e,this},getWorldview:function(){return this.options.worldview},_handleMarker:function(e){if(this._map){this._removeMarker();var t={color:"#4668F2"},n=Su({},t,this.options.marker);return this.mapMarker=new this._mapboxgl.Marker(n),e.center?this.mapMarker.setLngLat(e.center).addTo(this._map):e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&this.mapMarker.setLngLat(e.geometry.coordinates).addTo(this._map),this}},_removeMarker:function(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)},on:function(e,t){return this._eventEmitter.on(e,t),this},off:function(e,t){return this._eventEmitter.removeListener(e,t),this.eventManager.remove(),this}};var z5=_I;const D5=yg(z5);var xI={exports:{}},G1={exports:{}},H1={exports:{}},bI=function(t,n){return function(){for(var c=new Array(arguments.length),f=0;f<c.length;f++)c[f]=arguments[f];return t.apply(n,c)}},O5=bI,jl=Object.prototype.toString;function Z1(e){return Array.isArray(e)}function wx(e){return typeof e>"u"}function B5(e){return e!==null&&!wx(e)&&e.constructor!==null&&!wx(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function wI(e){return jl.call(e)==="[object ArrayBuffer]"}function N5(e){return jl.call(e)==="[object FormData]"}function F5(e){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&wI(e.buffer),t}function j5(e){return typeof e=="string"}function U5(e){return typeof e=="number"}function SI(e){return e!==null&&typeof e=="object"}function fy(e){if(jl.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function $5(e){return jl.call(e)==="[object Date]"}function V5(e){return jl.call(e)==="[object File]"}function q5(e){return jl.call(e)==="[object Blob]"}function EI(e){return jl.call(e)==="[object Function]"}function W5(e){return SI(e)&&EI(e.pipe)}function G5(e){return jl.call(e)==="[object URLSearchParams]"}function H5(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function Z5(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function K1(e,t){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),Z1(e))for(var n=0,a=e.length;n<a;n++)t.call(null,e[n],n,e);else for(var c in e)Object.prototype.hasOwnProperty.call(e,c)&&t.call(null,e[c],c,e)}function Sx(){var e={};function t(c,f){fy(e[f])&&fy(c)?e[f]=Sx(e[f],c):fy(c)?e[f]=Sx({},c):Z1(c)?e[f]=c.slice():e[f]=c}for(var n=0,a=arguments.length;n<a;n++)K1(arguments[n],t);return e}function K5(e,t,n){return K1(t,function(c,f){n&&typeof c=="function"?e[f]=O5(c,n):e[f]=c}),e}function X5(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}var Po={isArray:Z1,isArrayBuffer:wI,isBuffer:B5,isFormData:N5,isArrayBufferView:F5,isString:j5,isNumber:U5,isObject:SI,isPlainObject:fy,isUndefined:wx,isDate:$5,isFile:V5,isBlob:q5,isFunction:EI,isStream:W5,isURLSearchParams:G5,isStandardBrowserEnv:Z5,forEach:K1,merge:Sx,extend:K5,trim:H5,stripBOM:X5},Uc=Po;function LS(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var CI=function(t,n,a){if(!n)return t;var c;if(a)c=a(n);else if(Uc.isURLSearchParams(n))c=n.toString();else{var f=[];Uc.forEach(n,function(x,E){x===null||typeof x>"u"||(Uc.isArray(x)?E=E+"[]":x=[x],Uc.forEach(x,function(P){Uc.isDate(P)?P=P.toISOString():Uc.isObject(P)&&(P=JSON.stringify(P)),f.push(LS(E)+"="+LS(P))}))}),c=f.join("&")}if(c){var o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+c}return t},Y5=Po;function Lg(){this.handlers=[]}Lg.prototype.use=function(t,n,a){return this.handlers.push({fulfilled:t,rejected:n,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1};Lg.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};Lg.prototype.forEach=function(t){Y5.forEach(this.handlers,function(a){a!==null&&t(a)})};var J5=Lg,Q5=Po,eD=function(t,n){Q5.forEach(t,function(c,f){f!==n&&f.toUpperCase()===n.toUpperCase()&&(t[n]=c,delete t[f])})},kI=function(t,n,a,c,f){return t.config=n,a&&(t.code=a),t.request=c,t.response=f,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},t},TI={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Q0,zS;function II(){if(zS)return Q0;zS=1;var e=kI;return Q0=function(n,a,c,f,o){var v=new Error(n);return e(v,a,c,f,o)},Q0}var e_,DS;function tD(){if(DS)return e_;DS=1;var e=II();return e_=function(n,a,c){var f=c.config.validateStatus;!c.status||!f||f(c.status)?n(c):a(e("Request failed with status code "+c.status,c.config,null,c.request,c))},e_}var t_,OS;function rD(){if(OS)return t_;OS=1;var e=Po;return t_=e.isStandardBrowserEnv()?function(){return{write:function(a,c,f,o,v,x){var E=[];E.push(a+"="+encodeURIComponent(c)),e.isNumber(f)&&E.push("expires="+new Date(f).toGMTString()),e.isString(o)&&E.push("path="+o),e.isString(v)&&E.push("domain="+v),x===!0&&E.push("secure"),document.cookie=E.join("; ")},read:function(a){var c=document.cookie.match(new RegExp("(^|;\\s*)("+a+")=([^;]*)"));return c?decodeURIComponent(c[3]):null},remove:function(a){this.write(a,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),t_}var r_,BS;function nD(){return BS||(BS=1,r_=function(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}),r_}var n_,NS;function iD(){return NS||(NS=1,n_=function(t,n){return n?t.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):t}),n_}var i_,FS;function oD(){if(FS)return i_;FS=1;var e=nD(),t=iD();return i_=function(a,c){return a&&!e(c)?t(a,c):c},i_}var o_,jS;function aD(){if(jS)return o_;jS=1;var e=Po,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return o_=function(a){var c={},f,o,v;return a&&e.forEach(a.split(`
`),function(E){if(v=E.indexOf(":"),f=e.trim(E.substr(0,v)).toLowerCase(),o=e.trim(E.substr(v+1)),f){if(c[f]&&t.indexOf(f)>=0)return;f==="set-cookie"?c[f]=(c[f]?c[f]:[]).concat([o]):c[f]=c[f]?c[f]+", "+o:o}}),c},o_}var a_,US;function sD(){if(US)return a_;US=1;var e=Po;return a_=e.isStandardBrowserEnv()?function(){var n=/(msie|trident)/i.test(navigator.userAgent),a=document.createElement("a"),c;function f(o){var v=o;return n&&(a.setAttribute("href",v),v=a.href),a.setAttribute("href",v),{href:a.href,protocol:a.protocol?a.protocol.replace(/:$/,""):"",host:a.host,search:a.search?a.search.replace(/^\?/,""):"",hash:a.hash?a.hash.replace(/^#/,""):"",hostname:a.hostname,port:a.port,pathname:a.pathname.charAt(0)==="/"?a.pathname:"/"+a.pathname}}return c=f(window.location.href),function(v){var x=e.isString(v)?f(v):v;return x.protocol===c.protocol&&x.host===c.host}}():function(){return function(){return!0}}(),a_}var s_,$S;function zg(){if($S)return s_;$S=1;function e(t){this.message=t}return e.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},e.prototype.__CANCEL__=!0,s_=e,s_}var l_,VS;function qS(){if(VS)return l_;VS=1;var e=Po,t=tD(),n=rD(),a=CI,c=oD(),f=aD(),o=sD(),v=II(),x=TI,E=zg();return l_=function(P){return new Promise(function(q,U){var G=P.data,D=P.headers,F=P.responseType,V;function B(){P.cancelToken&&P.cancelToken.unsubscribe(V),P.signal&&P.signal.removeEventListener("abort",V)}e.isFormData(G)&&delete D["Content-Type"];var z=new XMLHttpRequest;if(P.auth){var ne=P.auth.username||"",oe=P.auth.password?unescape(encodeURIComponent(P.auth.password)):"";D.Authorization="Basic "+btoa(ne+":"+oe)}var pe=c(P.baseURL,P.url);z.open(P.method.toUpperCase(),a(pe,P.params,P.paramsSerializer),!0),z.timeout=P.timeout;function be(){if(z){var _e="getAllResponseHeaders"in z?f(z.getAllResponseHeaders()):null,Se=!F||F==="text"||F==="json"?z.responseText:z.response,te={data:Se,status:z.status,statusText:z.statusText,headers:_e,config:P,request:z};t(function(Oe){q(Oe),B()},function(Oe){U(Oe),B()},te),z=null}}if("onloadend"in z?z.onloadend=be:z.onreadystatechange=function(){!z||z.readyState!==4||z.status===0&&!(z.responseURL&&z.responseURL.indexOf("file:")===0)||setTimeout(be)},z.onabort=function(){z&&(U(v("Request aborted",P,"ECONNABORTED",z)),z=null)},z.onerror=function(){U(v("Network Error",P,null,z)),z=null},z.ontimeout=function(){var Se=P.timeout?"timeout of "+P.timeout+"ms exceeded":"timeout exceeded",te=P.transitional||x;P.timeoutErrorMessage&&(Se=P.timeoutErrorMessage),U(v(Se,P,te.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",z)),z=null},e.isStandardBrowserEnv()){var Te=(P.withCredentials||o(pe))&&P.xsrfCookieName?n.read(P.xsrfCookieName):void 0;Te&&(D[P.xsrfHeaderName]=Te)}"setRequestHeader"in z&&e.forEach(D,function(Se,te){typeof G>"u"&&te.toLowerCase()==="content-type"?delete D[te]:z.setRequestHeader(te,Se)}),e.isUndefined(P.withCredentials)||(z.withCredentials=!!P.withCredentials),F&&F!=="json"&&(z.responseType=P.responseType),typeof P.onDownloadProgress=="function"&&z.addEventListener("progress",P.onDownloadProgress),typeof P.onUploadProgress=="function"&&z.upload&&z.upload.addEventListener("progress",P.onUploadProgress),(P.cancelToken||P.signal)&&(V=function(_e){z&&(U(!_e||_e&&_e.type?new E("canceled"):_e),z.abort(),z=null)},P.cancelToken&&P.cancelToken.subscribe(V),P.signal&&(P.signal.aborted?V():P.signal.addEventListener("abort",V))),G||(G=null),z.send(G)})},l_}var zi=Po,WS=eD,lD=kI,uD=TI,cD={"Content-Type":"application/x-www-form-urlencoded"};function GS(e,t){!zi.isUndefined(e)&&zi.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function pD(){var e;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(e=qS()),e}function hD(e,t,n){if(zi.isString(e))try{return(t||JSON.parse)(e),zi.trim(e)}catch(a){if(a.name!=="SyntaxError")throw a}return(n||JSON.stringify)(e)}var Dg={transitional:uD,adapter:pD(),transformRequest:[function(t,n){return WS(n,"Accept"),WS(n,"Content-Type"),zi.isFormData(t)||zi.isArrayBuffer(t)||zi.isBuffer(t)||zi.isStream(t)||zi.isFile(t)||zi.isBlob(t)?t:zi.isArrayBufferView(t)?t.buffer:zi.isURLSearchParams(t)?(GS(n,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):zi.isObject(t)||n&&n["Content-Type"]==="application/json"?(GS(n,"application/json"),hD(t)):t}],transformResponse:[function(t){var n=this.transitional||Dg.transitional,a=n&&n.silentJSONParsing,c=n&&n.forcedJSONParsing,f=!a&&this.responseType==="json";if(f||c&&zi.isString(t)&&t.length)try{return JSON.parse(t)}catch(o){if(f)throw o.name==="SyntaxError"?lD(o,this,"E_JSON_PARSE"):o}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};zi.forEach(["delete","get","head"],function(t){Dg.headers[t]={}});zi.forEach(["post","put","patch"],function(t){Dg.headers[t]=zi.merge(cD)});var X1=Dg,dD=Po,fD=X1,mD=function(t,n,a){var c=this||fD;return dD.forEach(a,function(o){t=o.call(c,t,n)}),t},u_,HS;function PI(){return HS||(HS=1,u_=function(t){return!!(t&&t.__CANCEL__)}),u_}var ZS=Po,c_=mD,yD=PI(),gD=X1,vD=zg();function p_(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new vD("canceled")}var _D=function(t){p_(t),t.headers=t.headers||{},t.data=c_.call(t,t.data,t.headers,t.transformRequest),t.headers=ZS.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),ZS.forEach(["delete","get","head","post","put","patch","common"],function(c){delete t.headers[c]});var n=t.adapter||gD.adapter;return n(t).then(function(c){return p_(t),c.data=c_.call(t,c.data,c.headers,t.transformResponse),c},function(c){return yD(c)||(p_(t),c&&c.response&&(c.response.data=c_.call(t,c.response.data,c.response.headers,t.transformResponse))),Promise.reject(c)})},Bo=Po,AI=function(t,n){n=n||{};var a={};function c(T,P){return Bo.isPlainObject(T)&&Bo.isPlainObject(P)?Bo.merge(T,P):Bo.isPlainObject(P)?Bo.merge({},P):Bo.isArray(P)?P.slice():P}function f(T){if(Bo.isUndefined(n[T])){if(!Bo.isUndefined(t[T]))return c(void 0,t[T])}else return c(t[T],n[T])}function o(T){if(!Bo.isUndefined(n[T]))return c(void 0,n[T])}function v(T){if(Bo.isUndefined(n[T])){if(!Bo.isUndefined(t[T]))return c(void 0,t[T])}else return c(void 0,n[T])}function x(T){if(T in n)return c(t[T],n[T]);if(T in t)return c(void 0,t[T])}var E={url:o,method:o,data:o,baseURL:v,transformRequest:v,transformResponse:v,paramsSerializer:v,timeout:v,timeoutMessage:v,withCredentials:v,adapter:v,responseType:v,xsrfCookieName:v,xsrfHeaderName:v,onUploadProgress:v,onDownloadProgress:v,decompress:v,maxContentLength:v,maxBodyLength:v,transport:v,httpAgent:v,httpsAgent:v,cancelToken:v,socketPath:v,responseEncoding:v,validateStatus:x};return Bo.forEach(Object.keys(t).concat(Object.keys(n)),function(P){var I=E[P]||f,q=I(P);Bo.isUndefined(q)&&I!==x||(a[P]=q)}),a},h_,KS;function MI(){return KS||(KS=1,h_={version:"0.26.1"}),h_}var xD=MI().version,Y1={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){Y1[e]=function(a){return typeof a===e||"a"+(t<1?"n ":" ")+e}});var XS={};Y1.transitional=function(t,n,a){function c(f,o){return"[Axios v"+xD+"] Transitional option '"+f+"'"+o+(a?". "+a:"")}return function(f,o,v){if(t===!1)throw new Error(c(o," has been removed"+(n?" in "+n:"")));return n&&!XS[o]&&(XS[o]=!0,console.warn(c(o," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(f,o,v):!0}};function bD(e,t,n){if(typeof e!="object")throw new TypeError("options must be an object");for(var a=Object.keys(e),c=a.length;c-- >0;){var f=a[c],o=t[f];if(o){var v=e[f],x=v===void 0||o(v,f,e);if(x!==!0)throw new TypeError("option "+f+" must be "+x);continue}if(n!==!0)throw Error("Unknown option "+f)}}var wD={assertOptions:bD,validators:Y1},RI=Po,SD=CI,YS=J5,JS=_D,Og=AI,LI=wD,$c=LI.validators;function df(e){this.defaults=e,this.interceptors={request:new YS,response:new YS}}df.prototype.request=function(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Og(this.defaults,n),n.method?n.method=n.method.toLowerCase():this.defaults.method?n.method=this.defaults.method.toLowerCase():n.method="get";var a=n.transitional;a!==void 0&&LI.assertOptions(a,{silentJSONParsing:$c.transitional($c.boolean),forcedJSONParsing:$c.transitional($c.boolean),clarifyTimeoutError:$c.transitional($c.boolean)},!1);var c=[],f=!0;this.interceptors.request.forEach(function(q){typeof q.runWhen=="function"&&q.runWhen(n)===!1||(f=f&&q.synchronous,c.unshift(q.fulfilled,q.rejected))});var o=[];this.interceptors.response.forEach(function(q){o.push(q.fulfilled,q.rejected)});var v;if(!f){var x=[JS,void 0];for(Array.prototype.unshift.apply(x,c),x=x.concat(o),v=Promise.resolve(n);x.length;)v=v.then(x.shift(),x.shift());return v}for(var E=n;c.length;){var T=c.shift(),P=c.shift();try{E=T(E)}catch(I){P(I);break}}try{v=JS(E)}catch(I){return Promise.reject(I)}for(;o.length;)v=v.then(o.shift(),o.shift());return v};df.prototype.getUri=function(t){return t=Og(this.defaults,t),SD(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};RI.forEach(["delete","get","head","options"],function(t){df.prototype[t]=function(n,a){return this.request(Og(a||{},{method:t,url:n,data:(a||{}).data}))}});RI.forEach(["post","put","patch"],function(t){df.prototype[t]=function(n,a,c){return this.request(Og(c||{},{method:t,url:n,data:a}))}});var ED=df,d_,QS;function CD(){if(QS)return d_;QS=1;var e=zg();function t(n){if(typeof n!="function")throw new TypeError("executor must be a function.");var a;this.promise=new Promise(function(o){a=o});var c=this;this.promise.then(function(f){if(c._listeners){var o,v=c._listeners.length;for(o=0;o<v;o++)c._listeners[o](f);c._listeners=null}}),this.promise.then=function(f){var o,v=new Promise(function(x){c.subscribe(x),o=x}).then(f);return v.cancel=function(){c.unsubscribe(o)},v},n(function(o){c.reason||(c.reason=new e(o),a(c.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.prototype.subscribe=function(a){if(this.reason){a(this.reason);return}this._listeners?this._listeners.push(a):this._listeners=[a]},t.prototype.unsubscribe=function(a){if(this._listeners){var c=this._listeners.indexOf(a);c!==-1&&this._listeners.splice(c,1)}},t.source=function(){var a,c=new t(function(o){a=o});return{token:c,cancel:a}},d_=t,d_}var f_,eE;function kD(){return eE||(eE=1,f_=function(t){return function(a){return t.apply(null,a)}}),f_}var m_,tE;function TD(){if(tE)return m_;tE=1;var e=Po;return m_=function(n){return e.isObject(n)&&n.isAxiosError===!0},m_}var rE=Po,ID=bI,my=ED,PD=AI,AD=X1;function zI(e){var t=new my(e),n=ID(my.prototype.request,t);return rE.extend(n,my.prototype,t),rE.extend(n,t),n.create=function(c){return zI(PD(e,c))},n}var ss=zI(AD);ss.Axios=my;ss.Cancel=zg();ss.CancelToken=CD();ss.isCancel=PI();ss.VERSION=MI().version;ss.all=function(t){return Promise.all(t)};ss.spread=kD();ss.isAxiosError=TD();H1.exports=ss;H1.exports.default=ss;var MD=H1.exports,RD=MD;const LD="@sendgrid/client",zD="Twilio SendGrid NodeJS API client",DD="7.7.0",OD="Twilio SendGrid <help@twilio.com> (sendgrid.com)",BD=["Kyle Partridge <kyle.partridge@sendgrid.com>","David Tomberlin <david.tomberlin@sendgrid.com>","Swift <swift@sendgrid.com>","Brandon West <brandon.west@sendgrid.com>","Scott Motte <scott.motte@sendgrid.com>","Robert Acosta <robert.acosta@sendgrid.com>","Elmer Thomas <ethomas@twilio.com>","Adam Reis <adam@reis.nz>"],ND="MIT",FD="https://sendgrid.com",jD={type:"git",url:"git://github.com/sendgrid/sendgrid-nodejs.git"},UD={access:"public"},$D="index.js",VD={node:"6.* || 8.* || >=10.*"},qD={"@sendgrid/helpers":"^7.7.0",axios:"^0.26.0"},WD={chai:"4.2.0",nock:"^10.0.6"},GD={chai:"4.2.0"},HD=["http","rest","api","mail","sendgrid"],ZD="30eebb16a51b51e6a2df1b3596044db6f5fdbe92",KD={name:LD,description:zD,version:DD,author:OD,contributors:BD,license:ND,homepage:FD,repository:jD,publishConfig:UD,main:$D,engines:VD,dependencies:qD,devDependencies:WD,resolutions:GD,tags:HD,gitHead:ZD};var J1=function e(t,n,a){if(typeof t!="object"||t===null)throw new Error("Non object passed to convertKeys: "+t);if(Array.isArray(t))return t;Array.isArray(a)||(a=[]);for(const c in t)if(t.hasOwnProperty(c)){const f=n(c);typeof t[c]=="object"&&t[c]!==null&&!a.includes(c)&&!a.includes(f)&&(t[c]=e(t[c],n,a)),f!==c&&(t[f]=t[c],delete t[c])}return t},XD=function(t){if(typeof t!="string")throw new Error("String expected for conversion to snake case");return t.trim().replace(/_+|\-+/g," ").replace(/(?:^\w|[A-Z]|\b\w|\s+)/g,function(n,a){return Number(n)===0?"":a===0?n.toLowerCase():n.toUpperCase()})};const YD=J1,JD=XD;var ff=function(t,n){return YD(t,JD,n)},QD=function(t){if(typeof t!="string")throw new Error("String expected for conversion to snake case");return t.trim().replace(/(\s*\-*\b\w|[A-Z])/g,function(n){return n=n.trim().toLowerCase().replace("-",""),(n[0]==="_"?"":"_")+n}).slice(1)};const e4=J1,t4=QD;var Bg=function(t,n){return e4(t,t4,n)},mf=function(t){return JSON.parse(JSON.stringify(t))};const r4={},n4=Object.freeze(Object.defineProperty({__proto__:null,default:r4},Symbol.toStringTag,{value:"Module"})),DI=$C(n4),i4=ff,o4=Bg,a4=mf,s4=DI,l4=DI;let u4=class{constructor(t){t&&this.fromData(t)}fromData(t){if(typeof t!="object")throw new Error("Expecting object for Mail data");t=a4(t),t=i4(t);const{content:n,filename:a,type:c,disposition:f,contentId:o,filePath:v}=t;if(typeof n<"u"&&typeof v<"u")throw new Error("The props 'content' and 'filePath' cannot be used together.");this.setFilename(a),this.setType(c),this.setDisposition(f),this.setContentId(o),this.setContent(v?this.readFile(v):n)}readFile(t){return s4.readFileSync(l4.resolve(t))}setContent(t){if(typeof t=="string"){this.content=t;return}else if(t instanceof Buffer&&t.toString!==void 0){this.content=t.toString(),this.disposition==="attachment"&&(this.content=t.toString("base64"));return}throw new Error("`content` expected to be either Buffer or string")}setFileContent(t){if(t instanceof Buffer&&t.toString!==void 0){this.content=t.toString("base64");return}throw new Error("`content` expected to be Buffer")}setFilename(t){if(!(typeof t>"u")){if(t&&typeof t!="string")throw new Error("String expected for `filename`");this.filename=t}}setType(t){if(!(typeof t>"u")){if(typeof t!="string")throw new Error("String expected for `type`");this.type=t}}setDisposition(t){if(!(typeof t>"u")){if(typeof t!="string")throw new Error("String expected for `disposition`");this.disposition=t}}setContentId(t){if(!(typeof t>"u")){if(typeof t!="string")throw new Error("String expected for `contentId`");this.contentId=t}}toJSON(){const{content:t,filename:n,type:a,disposition:c,contentId:f}=this,o={content:t,filename:n};return typeof a<"u"&&(o.type=a),typeof c<"u"&&(o.disposition=c),typeof f<"u"&&(o.contentId=f),o4(o)}};var c4=u4,OI=function(t){if(t.indexOf("<")===-1)return["",t];let[n,a]=t.split("<");return n=n.trim(),a=a.replace(">","").trim(),[n,a]};const p4=OI;let h4=class Ex{constructor(t){t&&this.fromData(t)}fromData(t){if(typeof t=="string"){const[c,f]=p4(t);t={name:c,email:f}}if(typeof t!="object")throw new Error("Expecting object or string for EmailAddress data");const{name:n,email:a}=t;this.setEmail(a),this.setName(n)}setName(t){if(!(typeof t>"u")){if(typeof t!="string")throw new Error("String expected for `name`");this.name=t}}setEmail(t){if(typeof t>"u")throw new Error("Must provide `email`");if(typeof t!="string")throw new Error("String expected for `email`");this.email=t}toJSON(){const{email:t,name:n}=this,a={email:t};return n!==""&&(a.name=n),a}static create(t){return Array.isArray(t)?t.filter(n=>!!n).map(n=>this.create(n)):t instanceof Ex?t:new Ex(t)}};var Q1=h4,d4=function(t){return f4(t)&&!m4(t)};function f4(e){return!!e&&typeof e=="object"}function m4(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"||v4(e)}var y4=typeof Symbol=="function"&&Symbol.for,g4=y4?Symbol.for("react.element"):60103;function v4(e){return e.$$typeof===g4}function _4(e){return Array.isArray(e)?[]:{}}function Yd(e,t){return t.clone!==!1&&t.isMergeableObject(e)?Pp(_4(e),e,t):e}function x4(e,t,n){return e.concat(t).map(function(a){return Yd(a,n)})}function b4(e,t){if(!t.customMerge)return Pp;var n=t.customMerge(e);return typeof n=="function"?n:Pp}function w4(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return Object.propertyIsEnumerable.call(e,t)}):[]}function nE(e){return Object.keys(e).concat(w4(e))}function BI(e,t){try{return t in e}catch{return!1}}function S4(e,t){return BI(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))}function E4(e,t,n){var a={};return n.isMergeableObject(e)&&nE(e).forEach(function(c){a[c]=Yd(e[c],n)}),nE(t).forEach(function(c){S4(e,c)||(BI(e,c)&&n.isMergeableObject(t[c])?a[c]=b4(c,n)(e[c],t[c],n):a[c]=Yd(t[c],n))}),a}function Pp(e,t,n){n=n||{},n.arrayMerge=n.arrayMerge||x4,n.isMergeableObject=n.isMergeableObject||d4,n.cloneUnlessOtherwiseSpecified=Yd;var a=Array.isArray(t),c=Array.isArray(e),f=a===c;return f?a?n.arrayMerge(e,t,n):E4(e,t,n):Yd(t,n)}Pp.all=function(t,n){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(a,c){return Pp(a,c,n)},{})};var C4=Pp,k4=C4,NI=function e(t,n="{{",a="}}"){if(Array.isArray(t))return t.map(f=>e(f,n,a));const c={};for(const f in t)t.hasOwnProperty(f)&&(c[n+f+a]=String(t[f]));return c};const _u=Q1,T4=ff,I4=Bg,P4=mf,A4=k4,M4=NI;let R4=class{constructor(t){this.to=[],this.cc=[],this.bcc=[],this.headers={},this.customArgs={},this.substitutions={},this.substitutionWrappers=["{{","}}"],this.dynamicTemplateData={},t&&this.fromData(t)}fromData(t){if(typeof t!="object")throw new Error("Expecting object for Mail data");t=P4(t),t=T4(t,["substitutions","dynamicTemplateData","customArgs","headers"]);const{to:n,from:a,cc:c,bcc:f,subject:o,headers:v,customArgs:x,sendAt:E,substitutions:T,substitutionWrappers:P,dynamicTemplateData:I}=t;this.setTo(n),this.setFrom(a),this.setCc(c),this.setBcc(f),this.setSubject(o),this.setHeaders(v),this.setSubstitutions(T),this.setSubstitutionWrappers(P),this.setCustomArgs(x),this.setDynamicTemplateData(I),this.setSendAt(E)}setSubject(t){if(!(typeof t>"u")){if(typeof t!="string")throw new Error("String expected for `subject`");this.subject=t}}setSendAt(t){if(!(typeof t>"u")){if(!Number.isInteger(t))throw new Error("Integer expected for `sendAt`");this.sendAt=t}}setTo(t){typeof t>"u"||(Array.isArray(t)||(t=[t]),this.to=_u.create(t))}setFrom(t){typeof t>"u"||(this.from=_u.create(t))}addTo(t){typeof t>"u"||this.to.push(_u.create(t))}setCc(t){typeof t>"u"||(Array.isArray(t)||(t=[t]),this.cc=_u.create(t))}addCc(t){typeof t>"u"||this.cc.push(_u.create(t))}setBcc(t){typeof t>"u"||(Array.isArray(t)||(t=[t]),this.bcc=_u.create(t))}addBcc(t){typeof t>"u"||this.bcc.push(_u.create(t))}setHeaders(t){if(!(typeof t>"u")){if(typeof t!="object"||t===null)throw new Error("Object expected for `headers`");this.headers=t}}addHeader(t,n){if(typeof t!="string")throw new Error("String expected for header key");if(typeof n!="string")throw new Error("String expected for header value");this.headers[t]=n}setCustomArgs(t){if(!(typeof t>"u")){if(typeof t!="object"||t===null)throw new Error("Object expected for `customArgs`");this.customArgs=t}}addCustomArg(t,n){if(typeof t!="string")throw new Error("String expected for custom arg key");if(typeof n!="string")throw new Error("String expected for custom arg value");this.customArgs[t]=n}setSubstitutions(t){if(!(typeof t>"u")){if(typeof t!="object")throw new Error("Object expected for `substitutions`");this.substitutions=t}}addSubstitution(t,n){if(typeof t!="string")throw new Error("String expected for substitution key");if(typeof n!="string"&&typeof n!="number")throw new Error("String or Number expected for substitution value");this.substitutions[t]=n}reverseMergeSubstitutions(t){if(!(typeof t>"u"||t===null)){if(typeof t!="object")throw new Error("Object expected for `substitutions` in reverseMergeSubstitutions");this.substitutions=Object.assign({},t,this.substitutions)}}setSubstitutionWrappers(t){if(!(typeof t>"u"||t===null)){if(!Array.isArray(t)||t.length!==2)throw new Error("Array expected with two elements for `substitutionWrappers`");this.substitutionWrappers=t}}deepMergeDynamicTemplateData(t){if(!(typeof t>"u"||t===null)){if(typeof t!="object")throw new Error("Object expected for `dynamicTemplateData` in deepMergeDynamicTemplateData");this.dynamicTemplateData=A4(t,this.dynamicTemplateData)}}setDynamicTemplateData(t){if(!(typeof t>"u")){if(typeof t!="object")throw new Error("Object expected for `dynamicTemplateData`");this.dynamicTemplateData=t}}toJSON(){const{to:t,from:n,cc:a,bcc:c,subject:f,headers:o,customArgs:v,sendAt:x,substitutions:E,substitutionWrappers:T,dynamicTemplateData:P}=this,I={to:t};if(Array.isArray(a)&&a.length>0&&(I.cc=a),Array.isArray(c)&&c.length>0&&(I.bcc=c),Object.keys(o).length>0&&(I.headers=o),E&&Object.keys(E).length>0){const[q,U]=T;I.substitutions=M4(E,q,U)}return Object.keys(v).length>0&&(I.customArgs=v),P&&Object.keys(P).length>0&&(I.dynamicTemplateData=P),typeof f<"u"&&(I.subject=f),typeof x<"u"&&(I.sendAt=x),typeof n<"u"&&(I.from=n),I4(I,["substitutions","dynamicTemplateData","customArgs","headers"])}};var FI=R4,jI=function(t){return t.map(n=>typeof n=="object"&&n!==null&&typeof n.toJSON=="function"?n.toJSON():n)};const L4=`
Content with characters ', " or & may need to be escaped with three brackets
{{{ content }}}
See https://sendgrid.com/docs/for-developers/sending-email/using-handlebars/ for more information.`;var z4={DYNAMIC_TEMPLATE_CHAR_WARNING:L4};const yn=(e,t,n,a)=>{if(!(typeof e>"u"||typeof e[n]>"u")&&typeof e[n]!==a)throw new Error(`${a} expected for \`${t}.${n}\``)};var D4={validateMailSettings(e){if(typeof e!="object")throw new Error("Object expected for `mailSettings`");const{bcc:t,bypassListManagement:n,bypassSpamManagement:a,bypassBounceManagement:c,bypassUnsubscribeManagement:f,footer:o,sandboxMode:v,spamCheck:x}=e;yn(t,"bcc","enable","boolean"),yn(t,"bcc","email","string"),yn(n,"bypassListManagement","enable","boolean"),yn(a,"bypassSpamManagement","enable","boolean"),yn(c,"bypassBounceManagement","enable","boolean"),yn(f,"bypassUnsubscribeManagement","enable","boolean"),yn(o,"footer","enable","boolean"),yn(o,"footer","text","string"),yn(o,"footer","html","string"),yn(v,"sandboxMode","enable","boolean"),yn(x,"spamCheck","enable","boolean"),yn(x,"spamCheck","threshold","number"),yn(x,"spamCheck","postToUrl","string")},validateTrackingSettings(e){if(typeof e!="object")throw new Error("Object expected for `trackingSettings`");const{clickTracking:t,openTracking:n,subscriptionTracking:a,ganalytics:c}=e;yn(t,"clickTracking","enable","boolean"),yn(t,"clickTracking","enableText","boolean"),yn(n,"openTracking","enable","boolean"),yn(n,"openTracking","substitutionTag","string"),yn(a,"subscriptionTracking","enable","boolean"),yn(a,"subscriptionTracking","text","string"),yn(a,"subscriptionTracking","html","string"),yn(a,"subscriptionTracking","substitutionTag","string"),yn(c,"ganalytics","enable","boolean"),yn(c,"ganalytics","utm_source","string"),yn(c,"ganalytics","utm_medium","string"),yn(c,"ganalytics","utm_term","string"),yn(c,"ganalytics","utm_content","string"),yn(c,"ganalytics","utm_campaign","string")}};const iE=Q1,nd=FI,O4=ff,B4=Bg,N4=mf,y_=jI,{DYNAMIC_TEMPLATE_CHAR_WARNING:F4}=z4,{validateMailSettings:j4,validateTrackingSettings:U4}=D4;let $4=class Cx{constructor(t){this.isDynamic=!1,this.hideWarnings=!1,this.personalizations=[],this.attachments=[],this.content=[],this.categories=[],this.headers={},this.sections={},this.customArgs={},this.trackingSettings={},this.mailSettings={},this.asm={},this.substitutions=null,this.substitutionWrappers=null,this.dynamicTemplateData=null,t&&this.fromData(t)}fromData(t){if(typeof t!="object")throw new Error("Expecting object for Mail data");t=N4(t),t=O4(t,["substitutions","dynamicTemplateData","customArgs","headers","sections"]);const{to:n,from:a,replyTo:c,cc:f,bcc:o,sendAt:v,subject:x,text:E,html:T,content:P,templateId:I,personalizations:q,attachments:U,ipPoolName:G,batchId:D,sections:F,headers:V,categories:B,category:z,customArgs:ne,asm:oe,mailSettings:pe,trackingSettings:be,substitutions:Te,substitutionWrappers:_e,dynamicTemplateData:Se,isMultiple:te,hideWarnings:he,replyToList:Oe}=t;this.setFrom(a),this.setReplyTo(c),this.setSubject(x),this.setSendAt(v),this.setTemplateId(I),this.setBatchId(D),this.setIpPoolName(G),this.setAttachments(U),this.setContent(P),this.setSections(F),this.setHeaders(V),this.setCategories(z),this.setCategories(B),this.setCustomArgs(ne),this.setAsm(oe),this.setMailSettings(pe),this.setTrackingSettings(be),this.setHideWarnings(he),this.setReplyToList(Oe),this.isDynamic?this.setDynamicTemplateData(Se):(this.setSubstitutions(Te),this.setSubstitutionWrappers(_e)),this.addTextContent(E),this.addHtmlContent(T),q?this.setPersonalizations(q):te&&Array.isArray(n)?n.forEach(je=>this.addTo(je,f,o)):this.addTo(n,f,o)}setFrom(t){if(this._checkProperty("from",t,[this._checkUndefined])){if(typeof t!="string"&&typeof t.email!="string")throw new Error("String or address object expected for `from`");this.from=iE.create(t)}}setReplyTo(t){if(this._checkProperty("replyTo",t,[this._checkUndefined])){if(typeof t!="string"&&typeof t.email!="string")throw new Error("String or address object expected for `replyTo`");this.replyTo=iE.create(t)}}setSubject(t){this._setProperty("subject",t,"string")}setSendAt(t){this._checkProperty("sendAt",t,[this._checkUndefined,this._createCheckThatThrows(Number.isInteger,"Integer expected for `sendAt`")])&&(this.sendAt=t)}setTemplateId(t){this._setProperty("templateId",t,"string")&&t.indexOf("d-")===0&&(this.isDynamic=!0)}setBatchId(t){this._setProperty("batchId",t,"string")}setIpPoolName(t){this._setProperty("ipPoolName",t,"string")}setAsm(t){if(this._checkProperty("asm",t,[this._checkUndefined,this._createTypeCheck("object")])){if(typeof t.groupId!="number")throw new Error("Expected `asm` to include an integer in its `groupId` field");if(t.groupsToDisplay&&(!Array.isArray(t.groupsToDisplay)||!t.groupsToDisplay.every(n=>typeof n=="number")))throw new Error("Array of integers expected for `asm.groupsToDisplay`");this.asm=t}}setPersonalizations(t){if(this._doArrayCheck("personalizations",t)){if(!t.every(n=>typeof n=="object"))throw new Error("Array of objects expected for `personalizations`");this.personalizations=[],t.forEach(n=>this.addPersonalization(n))}}addPersonalization(t){this.isDynamic&&t.substitutions?delete t.substitutions:!this.isDynamic&&t.dynamicTemplateData&&delete t.dynamicTemplateData,t instanceof nd||(t=new nd(t)),this.isDynamic?this.applyDynamicTemplateData(t):this.applySubstitutions(t),this.personalizations.push(t)}addTo(t,n,a){if(typeof t>"u"&&typeof n>"u"&&typeof a>"u")throw new Error("Provide at least one of to, cc or bcc");this.addPersonalization(new nd({to:t,cc:n,bcc:a}))}setSubstitutions(t){this._setProperty("substitutions",t,"object")}setSubstitutionWrappers(t){let n=(a,c)=>{if(!Array.isArray(c)||c.length!==2)throw new Error("Array expected with two elements for `"+a+"`")};this._checkProperty("substitutionWrappers",t,[this._checkUndefined,n])&&(this.substitutionWrappers=t)}applySubstitutions(t){t instanceof nd&&(t.reverseMergeSubstitutions(this.substitutions),t.setSubstitutionWrappers(this.substitutionWrappers))}applyDynamicTemplateData(t){t instanceof nd&&t.deepMergeDynamicTemplateData(this.dynamicTemplateData)}setDynamicTemplateData(t){if(!(typeof t>"u")){if(typeof t!="object")throw new Error("Object expected for `dynamicTemplateData`");this.hideWarnings||Object.values(t).forEach(n=>{/['"&]/.test(n)&&console.warn(F4)}),this.dynamicTemplateData=t}}setContent(t){if(this._doArrayCheck("content",t)){if(!t.every(n=>typeof n=="object"))throw new Error("Expected each entry in `content` to be an object");if(!t.every(n=>typeof n.type=="string"))throw new Error("Expected each `content` entry to contain a `type` string");if(!t.every(n=>typeof n.value=="string"))throw new Error("Expected each `content` entry to contain a `value` string");this.content=t}}addContent(t){this._checkProperty("content",t,[this._createTypeCheck("object")])&&this.content.push(t)}addTextContent(t){this._checkProperty("text",t,[this._checkUndefined,this._createTypeCheck("string")])&&this.addContent({value:t,type:"text/plain"})}addHtmlContent(t){this._checkProperty("html",t,[this._checkUndefined,this._createTypeCheck("string")])&&this.addContent({value:t,type:"text/html"})}setAttachments(t){if(this._doArrayCheck("attachments",t)){if(!t.every(n=>typeof n.content=="string"))throw new Error("Expected each attachment to contain a `content` string");if(!t.every(n=>typeof n.filename=="string"))throw new Error("Expected each attachment to contain a `filename` string");if(!t.every(n=>!n.type||typeof n.type=="string"))throw new Error("Expected the attachment's `type` field to be a string");if(!t.every(n=>!n.disposition||typeof n.disposition=="string"))throw new Error("Expected the attachment's `disposition` field to be a string");this.attachments=t}}addAttachment(t){this._checkProperty("attachment",t,[this._checkUndefined,this._createTypeCheck("object")])&&this.attachments.push(t)}setCategories(t){let n=(a,c)=>{if(!Array.isArray(c)||!c.every(f=>typeof f=="string"))throw new Error("Array of strings expected for `"+a+"`")};typeof t=="string"&&(t=[t]),this._checkProperty("categories",t,[this._checkUndefined,n])&&(this.categories=t)}addCategory(t){this._checkProperty("category",t,[this._createTypeCheck("string")])&&this.categories.push(t)}setHeaders(t){this._setProperty("headers",t,"object")}addHeader(t,n){this._checkProperty("key",t,[this._createTypeCheck("string")])&&this._checkProperty("value",n,[this._createTypeCheck("string")])&&(this.headers[t]=n)}setSections(t){this._setProperty("sections",t,"object")}setCustomArgs(t){this._setProperty("customArgs",t,"object")}setTrackingSettings(t){typeof t>"u"||(U4(t),this.trackingSettings=t)}setMailSettings(t){typeof t>"u"||(j4(t),this.mailSettings=t)}setHideWarnings(t){if(!(typeof t>"u")){if(typeof t!="boolean")throw new Error("Boolean expected for `hideWarnings`");this.hideWarnings=t}}toJSON(){const{from:t,replyTo:n,sendAt:a,subject:c,content:f,templateId:o,personalizations:v,attachments:x,ipPoolName:E,batchId:T,asm:P,sections:I,headers:q,categories:U,customArgs:G,mailSettings:D,trackingSettings:F,replyToList:V}=this,B={from:t,subject:c,personalizations:y_(v)};return Array.isArray(x)&&x.length>0&&(B.attachments=y_(x)),Array.isArray(U)&&U.length>0&&(B.categories=U.filter(z=>z!=="")),Array.isArray(f)&&f.length>0&&(B.content=y_(f)),Object.keys(q).length>0&&(B.headers=q),Object.keys(D).length>0&&(B.mailSettings=D),Object.keys(F).length>0&&(B.trackingSettings=F),Object.keys(G).length>0&&(B.customArgs=G),Object.keys(I).length>0&&(B.sections=I),Object.keys(P).length>0&&(B.asm=P),typeof n<"u"&&(B.replyTo=n),typeof a<"u"&&(B.sendAt=a),typeof T<"u"&&(B.batchId=T),typeof o<"u"&&(B.templateId=o),typeof E<"u"&&(B.ipPoolName=E),typeof V<"u"&&(B.replyToList=V),B4(B,["substitutions","dynamicTemplateData","customArgs","headers","sections"])}static create(t){return Array.isArray(t)?t.filter(n=>!!n).map(n=>this.create(n)):t instanceof Cx?t:new Cx(t)}_checkProperty(t,n,a){return!a.some(c=>c(t,n))}_setProperty(t,n,a){let c=this._checkProperty(t,n,[this._checkUndefined,this._createTypeCheck(a)]);return c&&(this[t]=n),c}_checkUndefined(t,n){return typeof n>"u"}_createTypeCheck(t){return(n,a)=>{if(typeof a!==t)throw new Error(t+" expected for `"+n+"`")}}_createCheckThatThrows(t,n){return(a,c)=>{if(!t(c))throw new Error(n)}}_setArrayProperty(t,n){this._doArrayCheck(t,n)&&(this[t]=n)}_doArrayCheck(t,n){return this._checkProperty(t,n,[this._checkUndefined,this._createCheckThatThrows(Array.isArray,"Array expected for`"+t+"`")])}setReplyToList(t){if(this._doArrayCheck("replyToList",t)&&t.length){if(!t.every(n=>n&&typeof n.email=="string"))throw new Error("Expected each replyTo to contain an `email` string");this.replyToList=t}}};var V4=$4;let q4=class{constructor(t,n,a){this.statusCode=t,this.body=n,this.headers=a}toString(){return"HTTP "+this.statusCode+" "+this.body}};var W4=q4;let G4=class extends Error{constructor(t){super();const{headers:n,status:a,statusText:c,data:f}=t;this.code=a,this.message=c,this.response={headers:n,body:f},this.stack||Error.captureStackTrace(this,this.constructor);const o=new RegExp(process.cwd()+"/","gi");this.stack=this.stack.replace(o,"")}toString(){const{body:t}=this.response;let n=`${this.message} (${this.code})`;return t&&Array.isArray(t.errors)&&t.errors.forEach(a=>{const c=a.message,f=a.field,o=a.help;n+=`
  ${c}
    ${f}
    ${o}`}),n}toJSON(){const{message:t,code:n,response:a}=this;return{message:t,code:n,response:a}}};var H4=G4;const Z4=ff,K4=mf,X4=["day","week","month"],Y4=["us","ca"],Wm=["desc","asc"];let J4=class{constructor(t){this.startDate=null,this.endDate=null,this.aggregatedBy=null,t&&this.fromData(t)}fromData(t){if(typeof t!="object")throw new Error("Expecting object for Statistics data");t=K4(t),t=Z4(t,["substitutions","customArgs"]);const{startDate:n,endDate:a,aggregatedBy:c}=t;this.setStartDate(n),this.setEndDate(a),this.setAggregatedBy(c)}setStartDate(t){if(typeof t>"u")throw new Error("Date expected for `startDate`");if(new Date(t)==="Invalid Date"||isNaN(new Date(t)))throw new Error("Date expected for `startDate`");console.log(t),this.startDate=new Date(t).toISOString().slice(0,10)}setEndDate(t){if(typeof t>"u"){this.endDate=new Date().toISOString().slice(0,10);return}if(new Date(t)==="Invalid Date"||isNaN(new Date(t)))throw new Error("Date expected for `endDate`");this.endDate=new Date(t).toISOString().slice(0,10)}setAggregatedBy(t){if(!(typeof t>"u"))if(typeof t=="string"&&X4.includes(t.toLowerCase()))this.aggregatedBy=t;else throw new Error("Incorrect value for `aggregatedBy`")}getGlobal(){const{startDate:t,endDate:n,aggregatedBy:a}=this;return{startDate:t,endDate:n,aggregatedBy:a}}getAdvanced(t){const n=this.getGlobal();return typeof t>"u"||typeof t=="string"&&Y4.includes(t.toLowerCase())&&(n.country=t),n}getAdvancedMailboxProviders(t){const n=this.getGlobal();if(typeof t>"u")return n;if(Array.isArray(t)&&t.some(a=>typeof a!="string"))throw new Error("Array of strings expected for `mailboxProviders`");return n.mailBoxProviders=t,n}getAdvancedBrowsers(t){const n=this.getGlobal();if(typeof t>"u")return n;if(Array.isArray(t)&&t.some(a=>typeof a!="string"))throw new Error("Array of strings expected for `browsers`");return n.browsers=t,n}getCategories(t){if(typeof t>"u")throw new Error("Array of strings expected for `categories`");if(!this._isValidArrayOfStrings(t))throw new Error("Array of strings expected for `categories`");const n=this.getGlobal();return n.categories=t,n}getSubuser(t){if(typeof t>"u")throw new Error("Array of strings expected for `subusers`");if(!this._isValidArrayOfStrings(t))throw new Error("Array of strings expected for `subusers`");const n=this.getGlobal();return n.subusers=t,n}getSubuserSum(t="delivered",n=Wm[0],a=5,c=0){if(typeof t!="string")throw new Error("string expected for `sortByMetric`");if(!Wm.includes(n.toLowerCase()))throw new Error("desc or asc expected for `sortByDirection`");if(typeof a!="number")throw new Error("number expected for `limit`");if(typeof c!="number")throw new Error("number expected for `offset`");const f=this.getGlobal();return f.sortByMetric=t,f.sortByDirection=n,f.limit=a,f.offset=c,f}getSubuserMonthly(t="delivered",n=Wm[0],a=5,c=0){if(typeof t!="string")throw new Error("string expected for `sortByMetric`");if(!Wm.includes(n.toLowerCase()))throw new Error("desc or asc expected for `sortByDirection`");if(typeof a!="number")throw new Error("number expected for `limit`");if(typeof c!="number")throw new Error("number expected for `offset`");const f=this.getGlobal();return f.sortByMetric=t,f.sortByDirection=n,f.limit=a,f.offset=c,f}_isValidArrayOfStrings(t){return!(!Array.isArray(t)||t.length<1||t.some(n=>typeof n!="string"))}};var Q4=J4;const eO=c4,tO=Q1,rO=V4,nO=FI,iO=W4,oO=H4,aO=Q4;var sO={Attachment:eO,EmailAddress:tO,Mail:rO,Personalization:nO,Response:iO,ResponseError:oO,Statistics:aO},lO=function(t,n){if(typeof t!="object"||t===null)throw new Error("Not an object provided for base");if(typeof n!="object"||n===null)throw new Error("Not an object provided for data");const a=Object.assign({},t);for(const c in n)n.hasOwnProperty(c)&&(n[c]&&Array.isArray(n[c])?a[c]=n[c]:n[c]&&typeof n[c]=="object"?a[c]=Object.assign({},n[c]):n[c]&&(a[c]=n[c]));return a};const uO=jI,cO=J1,pO=mf,hO=lO,dO=OI,fO=ff,mO=Bg,yO=NI;var gO={arrayToJSON:uO,convertKeys:cO,deepClone:pO,mergeData:hO,splitNameEmail:dO,toCamelCase:fO,toSnakeCase:mO,wrapSubstitutions:yO};const vO=sO,_O=gO;var UI={classes:vO,helpers:_O};const xO=RD,bO=KD,{helpers:{mergeData:oE},classes:{Response:wO,ResponseError:SO}}=UI,aE="SG.",sE="https://api.sendgrid.com/",EO="https://email.twilio.com/";let CO=class{constructor(){this.auth="",this.impersonateSubuser="",this.defaultHeaders={Accept:"application/json","Content-Type":"application/json","User-Agent":"sendgrid/"+bO.version+";nodejs"},this.defaultRequest={baseUrl:sE,url:"",method:"GET",headers:{},maxContentLength:1/0,maxBodyLength:1/0}}setApiKey(t){this.auth="Bearer "+t,this.setDefaultRequest("baseUrl",sE),this.isValidApiKey(t)||console.warn(`API key does not start with "${aE}".`)}setTwilioEmailAuth(t,n){const a=Buffer.from(t+":"+n).toString("base64");this.auth="Basic "+a,this.setDefaultRequest("baseUrl",EO),this.isValidTwilioAuth(t,n)||console.warn("Twilio Email credentials must be non-empty strings.")}isValidApiKey(t){return this.isString(t)&&t.trim().startsWith(aE)}isValidTwilioAuth(t,n){return this.isString(t)&&t&&this.isString(n)&&n}isString(t){return typeof t=="string"||t instanceof String}setImpersonateSubuser(t){this.impersonateSubuser=t}setDefaultHeader(t,n){return t!==null&&typeof t=="object"?(Object.assign(this.defaultHeaders,t),this):(this.defaultHeaders[t]=n,this)}setDefaultRequest(t,n){return t!==null&&typeof t=="object"?(Object.assign(this.defaultRequest,t),this):(this.defaultRequest[t]=n,this)}createHeaders(t){const n=oE(this.defaultHeaders,t);return typeof n.Authorization>"u"&&this.auth&&(n.Authorization=this.auth),this.impersonateSubuser&&(n["On-Behalf-Of"]=this.impersonateSubuser),n}createRequest(t){let n={url:t.uri||t.url,baseUrl:t.baseUrl,method:t.method,data:t.body,params:t.qs,headers:t.headers};return n=oE(this.defaultRequest,n),n.headers=this.createHeaders(n.headers),n.baseURL=n.baseUrl,delete n.baseUrl,n}request(t,n){t=this.createRequest(t);const a=new Promise((c,f)=>{xO(t).then(o=>c([new wO(o.status,o.data,o.headers),o.data])).catch(o=>o.response&&o.response.status>=400?f(new SO(o.response)):f(o))});if(n&&typeof n!="function")throw new Error("Callback passed is not a function.");return n?a.then(c=>n(null,c)).catch(c=>n(c,null)):a}};var $I=CO;const kO=$I;var TO=new kO;const IO=TO,PO=$I;G1.exports=IO;G1.exports.Client=PO;var AO=G1.exports;const{Client:MO}=AO,{classes:{Mail:RO}}=UI;let LO=class{constructor(){this.setClient(new MO),this.setSubstitutionWrappers("{{","}}"),this.secretRules=[]}setClient(t){return this.client=t,this}setApiKey(t){return this.client.setApiKey(t),this}setTwilioEmailAuth(t,n){this.client.setTwilioEmailAuth(t,n)}setTimeout(t){typeof t>"u"||this.client.setDefaultRequest("timeout",t)}setSubstitutionWrappers(t,n){if(typeof t>"u"||typeof n>"u")throw new Error("Must provide both left and right side wrappers");return Array.isArray(this.substitutionWrappers)||(this.substitutionWrappers=[]),this.substitutionWrappers[0]=t,this.substitutionWrappers[1]=n,this}setSecretRules(t){t instanceof Array||(t=[t]);const n=t.map(function(a){const c=typeof a;if(c==="string")return{pattern:new RegExp(a)};if(c==="object"){a instanceof RegExp?a={pattern:a}:a.hasOwnProperty("pattern")&&typeof a.pattern=="string"&&(a.pattern=new RegExp(a.pattern));try{return a.pattern.test(""),a}catch{}}});this.secretRules=n.filter(function(a){return a})}filterSecrets(t){if(typeof t=="object"&&!t.hasOwnProperty("content"))return;const n=this;t.content.forEach(function(a){n.secretRules.forEach(function(c){if(c.hasOwnProperty("pattern")&&!c.pattern.test(a.value))return;let f=`The pattern '${c.pattern}'`;throw c.name&&(f+=`identified by '${c.name}'`),f+=" was found in the Mail content!",new Error(f)})})}send(t,n=!1,a){if(typeof n=="function"&&(a=n,n=!1),Array.isArray(t)){const c=Promise.all(t.map(f=>this.send(f,n)));return a&&c.then(f=>a(null,f)).catch(f=>a(f,null)),c}try{typeof t.isMultiple>"u"&&(t.isMultiple=n),typeof t.substitutionWrappers>"u"&&(t.substitutionWrappers=this.substitutionWrappers);const c=RO.create(t),f=c.toJSON();this.filterSecrets(f);const o={method:"POST",url:"/v3/mail/send",headers:c.headers,body:f};return this.client.request(o,a)}catch(c){return a&&a(c,null),Promise.reject(c)}}sendMultiple(t,n){return this.send(t,!0,n)}};var VI=LO;const zO=VI;var DO=new zO;const OO=DO,BO=VI;xI.exports=OO;xI.exports.MailService=BO;function yy(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function NO(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function qI(e){let t,n,a;e.length!==2?(t=yy,n=(v,x)=>yy(e(v),x),a=(v,x)=>e(v)-x):(t=e===yy||e===NO?e:FO,n=e,a=e);function c(v,x,E=0,T=v.length){if(E<T){if(t(x,x)!==0)return T;do{const P=E+T>>>1;n(v[P],x)<0?E=P+1:T=P}while(E<T)}return E}function f(v,x,E=0,T=v.length){if(E<T){if(t(x,x)!==0)return T;do{const P=E+T>>>1;n(v[P],x)<=0?E=P+1:T=P}while(E<T)}return E}function o(v,x,E=0,T=v.length){const P=c(v,x,E,T-1);return P>E&&a(v[P-1],x)>-a(v[P],x)?P-1:P}return{left:c,center:o,right:f}}function FO(){return 0}function jO(e){return e===null?NaN:+e}const UO=qI(yy),$O=UO.right;qI(jO).center;const VO=$O;class lE extends Map{constructor(t,n=GO){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[a,c]of t)this.set(a,c)}get(t){return super.get(uE(this,t))}has(t){return super.has(uE(this,t))}set(t,n){return super.set(qO(this,t),n)}delete(t){return super.delete(WO(this,t))}}function uE({_intern:e,_key:t},n){const a=t(n);return e.has(a)?e.get(a):n}function qO({_intern:e,_key:t},n){const a=t(n);return e.has(a)?e.get(a):(e.set(a,n),n)}function WO({_intern:e,_key:t},n){const a=t(n);return e.has(a)&&(n=e.get(a),e.delete(a)),n}function GO(e){return e!==null&&typeof e=="object"?e.valueOf():e}const HO=Math.sqrt(50),ZO=Math.sqrt(10),KO=Math.sqrt(2);function Yy(e,t,n){const a=(t-e)/Math.max(0,n),c=Math.floor(Math.log10(a)),f=a/Math.pow(10,c),o=f>=HO?10:f>=ZO?5:f>=KO?2:1;let v,x,E;return c<0?(E=Math.pow(10,-c)/o,v=Math.round(e*E),x=Math.round(t*E),v/E<e&&++v,x/E>t&&--x,E=-E):(E=Math.pow(10,c)*o,v=Math.round(e/E),x=Math.round(t/E),v*E<e&&++v,x*E>t&&--x),x<v&&.5<=n&&n<2?Yy(e,t,n*2):[v,x,E]}function XO(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const a=t<e,[c,f,o]=a?Yy(t,e,n):Yy(e,t,n);if(!(f>=c))return[];const v=f-c+1,x=new Array(v);if(a)if(o<0)for(let E=0;E<v;++E)x[E]=(f-E)/-o;else for(let E=0;E<v;++E)x[E]=(f-E)*o;else if(o<0)for(let E=0;E<v;++E)x[E]=(c+E)/-o;else for(let E=0;E<v;++E)x[E]=(c+E)*o;return x}function kx(e,t,n){return t=+t,e=+e,n=+n,Yy(e,t,n)[2]}function YO(e,t,n){t=+t,e=+e,n=+n;const a=t<e,c=a?kx(t,e,n):kx(e,t,n);return(a?-1:1)*(c<0?1/-c:c)}function JO(e,t){let n=0;if(t===void 0)for(let a of e)(a=+a)&&(n+=a);else{let a=-1;for(let c of e)(c=+t(c,++a,e))&&(n+=c)}return n}var QO={value:()=>{}};function WI(){for(var e=0,t=arguments.length,n={},a;e<t;++e){if(!(a=arguments[e]+"")||a in n||/[\s.]/.test(a))throw new Error("illegal type: "+a);n[a]=[]}return new gy(n)}function gy(e){this._=e}function eB(e,t){return e.trim().split(/^|\s+/).map(function(n){var a="",c=n.indexOf(".");if(c>=0&&(a=n.slice(c+1),n=n.slice(0,c)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:a}})}gy.prototype=WI.prototype={constructor:gy,on:function(e,t){var n=this._,a=eB(e+"",n),c,f=-1,o=a.length;if(arguments.length<2){for(;++f<o;)if((c=(e=a[f]).type)&&(c=tB(n[c],e.name)))return c;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++f<o;)if(c=(e=a[f]).type)n[c]=cE(n[c],e.name,t);else if(t==null)for(c in n)n[c]=cE(n[c],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new gy(e)},call:function(e,t){if((c=arguments.length-2)>0)for(var n=new Array(c),a=0,c,f;a<c;++a)n[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(f=this._[e],a=0,c=f.length;a<c;++a)f[a].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var a=this._[e],c=0,f=a.length;c<f;++c)a[c].value.apply(t,n)}};function tB(e,t){for(var n=0,a=e.length,c;n<a;++n)if((c=e[n]).name===t)return c.value}function cE(e,t,n){for(var a=0,c=e.length;a<c;++a)if(e[a].name===t){e[a]=QO,e=e.slice(0,a).concat(e.slice(a+1));break}return n!=null&&e.push({name:t,value:n}),e}var Tx="http://www.w3.org/1999/xhtml";const pE={svg:"http://www.w3.org/2000/svg",xhtml:Tx,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ng(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),pE.hasOwnProperty(t)?{space:pE[t],local:e}:e}function rB(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Tx&&t.documentElement.namespaceURI===Tx?t.createElement(e):t.createElementNS(n,e)}}function nB(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function GI(e){var t=Ng(e);return(t.local?nB:rB)(t)}function iB(){}function eb(e){return e==null?iB:function(){return this.querySelector(e)}}function oB(e){typeof e!="function"&&(e=eb(e));for(var t=this._groups,n=t.length,a=new Array(n),c=0;c<n;++c)for(var f=t[c],o=f.length,v=a[c]=new Array(o),x,E,T=0;T<o;++T)(x=f[T])&&(E=e.call(x,x.__data__,T,f))&&("__data__"in x&&(E.__data__=x.__data__),v[T]=E);return new $o(a,this._parents)}function aB(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function sB(){return[]}function HI(e){return e==null?sB:function(){return this.querySelectorAll(e)}}function lB(e){return function(){return aB(e.apply(this,arguments))}}function uB(e){typeof e=="function"?e=lB(e):e=HI(e);for(var t=this._groups,n=t.length,a=[],c=[],f=0;f<n;++f)for(var o=t[f],v=o.length,x,E=0;E<v;++E)(x=o[E])&&(a.push(e.call(x,x.__data__,E,o)),c.push(x));return new $o(a,c)}function ZI(e){return function(){return this.matches(e)}}function KI(e){return function(t){return t.matches(e)}}var cB=Array.prototype.find;function pB(e){return function(){return cB.call(this.children,e)}}function hB(){return this.firstElementChild}function dB(e){return this.select(e==null?hB:pB(typeof e=="function"?e:KI(e)))}var fB=Array.prototype.filter;function mB(){return Array.from(this.children)}function yB(e){return function(){return fB.call(this.children,e)}}function gB(e){return this.selectAll(e==null?mB:yB(typeof e=="function"?e:KI(e)))}function vB(e){typeof e!="function"&&(e=ZI(e));for(var t=this._groups,n=t.length,a=new Array(n),c=0;c<n;++c)for(var f=t[c],o=f.length,v=a[c]=[],x,E=0;E<o;++E)(x=f[E])&&e.call(x,x.__data__,E,f)&&v.push(x);return new $o(a,this._parents)}function XI(e){return new Array(e.length)}function _B(){return new $o(this._enter||this._groups.map(XI),this._parents)}function Jy(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Jy.prototype={constructor:Jy,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function xB(e){return function(){return e}}function bB(e,t,n,a,c,f){for(var o=0,v,x=t.length,E=f.length;o<E;++o)(v=t[o])?(v.__data__=f[o],a[o]=v):n[o]=new Jy(e,f[o]);for(;o<x;++o)(v=t[o])&&(c[o]=v)}function wB(e,t,n,a,c,f,o){var v,x,E=new Map,T=t.length,P=f.length,I=new Array(T),q;for(v=0;v<T;++v)(x=t[v])&&(I[v]=q=o.call(x,x.__data__,v,t)+"",E.has(q)?c[v]=x:E.set(q,x));for(v=0;v<P;++v)q=o.call(e,f[v],v,f)+"",(x=E.get(q))?(a[v]=x,x.__data__=f[v],E.delete(q)):n[v]=new Jy(e,f[v]);for(v=0;v<T;++v)(x=t[v])&&E.get(I[v])===x&&(c[v]=x)}function SB(e){return e.__data__}function EB(e,t){if(!arguments.length)return Array.from(this,SB);var n=t?wB:bB,a=this._parents,c=this._groups;typeof e!="function"&&(e=xB(e));for(var f=c.length,o=new Array(f),v=new Array(f),x=new Array(f),E=0;E<f;++E){var T=a[E],P=c[E],I=P.length,q=CB(e.call(T,T&&T.__data__,E,a)),U=q.length,G=v[E]=new Array(U),D=o[E]=new Array(U),F=x[E]=new Array(I);n(T,P,G,D,F,q,t);for(var V=0,B=0,z,ne;V<U;++V)if(z=G[V]){for(V>=B&&(B=V+1);!(ne=D[B])&&++B<U;);z._next=ne||null}}return o=new $o(o,a),o._enter=v,o._exit=x,o}function CB(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function kB(){return new $o(this._exit||this._groups.map(XI),this._parents)}function TB(e,t,n){var a=this.enter(),c=this,f=this.exit();return typeof e=="function"?(a=e(a),a&&(a=a.selection())):a=a.append(e+""),t!=null&&(c=t(c),c&&(c=c.selection())),n==null?f.remove():n(f),a&&c?a.merge(c).order():c}function IB(e){for(var t=e.selection?e.selection():e,n=this._groups,a=t._groups,c=n.length,f=a.length,o=Math.min(c,f),v=new Array(c),x=0;x<o;++x)for(var E=n[x],T=a[x],P=E.length,I=v[x]=new Array(P),q,U=0;U<P;++U)(q=E[U]||T[U])&&(I[U]=q);for(;x<c;++x)v[x]=n[x];return new $o(v,this._parents)}function PB(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var a=e[t],c=a.length-1,f=a[c],o;--c>=0;)(o=a[c])&&(f&&o.compareDocumentPosition(f)^4&&f.parentNode.insertBefore(o,f),f=o);return this}function AB(e){e||(e=MB);function t(P,I){return P&&I?e(P.__data__,I.__data__):!P-!I}for(var n=this._groups,a=n.length,c=new Array(a),f=0;f<a;++f){for(var o=n[f],v=o.length,x=c[f]=new Array(v),E,T=0;T<v;++T)(E=o[T])&&(x[T]=E);x.sort(t)}return new $o(c,this._parents).order()}function MB(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function RB(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function LB(){return Array.from(this)}function zB(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var a=e[t],c=0,f=a.length;c<f;++c){var o=a[c];if(o)return o}return null}function DB(){let e=0;for(const t of this)++e;return e}function OB(){return!this.node()}function BB(e){for(var t=this._groups,n=0,a=t.length;n<a;++n)for(var c=t[n],f=0,o=c.length,v;f<o;++f)(v=c[f])&&e.call(v,v.__data__,f,c);return this}function NB(e){return function(){this.removeAttribute(e)}}function FB(e){return function(){this.removeAttributeNS(e.space,e.local)}}function jB(e,t){return function(){this.setAttribute(e,t)}}function UB(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function $B(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function VB(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function qB(e,t){var n=Ng(e);if(arguments.length<2){var a=this.node();return n.local?a.getAttributeNS(n.space,n.local):a.getAttribute(n)}return this.each((t==null?n.local?FB:NB:typeof t=="function"?n.local?VB:$B:n.local?UB:jB)(n,t))}function YI(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function WB(e){return function(){this.style.removeProperty(e)}}function GB(e,t,n){return function(){this.style.setProperty(e,t,n)}}function HB(e,t,n){return function(){var a=t.apply(this,arguments);a==null?this.style.removeProperty(e):this.style.setProperty(e,a,n)}}function ZB(e,t,n){return arguments.length>1?this.each((t==null?WB:typeof t=="function"?HB:GB)(e,t,n??"")):Ap(this.node(),e)}function Ap(e,t){return e.style.getPropertyValue(t)||YI(e).getComputedStyle(e,null).getPropertyValue(t)}function KB(e){return function(){delete this[e]}}function XB(e,t){return function(){this[e]=t}}function YB(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function JB(e,t){return arguments.length>1?this.each((t==null?KB:typeof t=="function"?YB:XB)(e,t)):this.node()[e]}function JI(e){return e.trim().split(/^|\s+/)}function tb(e){return e.classList||new QI(e)}function QI(e){this._node=e,this._names=JI(e.getAttribute("class")||"")}QI.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function eP(e,t){for(var n=tb(e),a=-1,c=t.length;++a<c;)n.add(t[a])}function tP(e,t){for(var n=tb(e),a=-1,c=t.length;++a<c;)n.remove(t[a])}function QB(e){return function(){eP(this,e)}}function eN(e){return function(){tP(this,e)}}function tN(e,t){return function(){(t.apply(this,arguments)?eP:tP)(this,e)}}function rN(e,t){var n=JI(e+"");if(arguments.length<2){for(var a=tb(this.node()),c=-1,f=n.length;++c<f;)if(!a.contains(n[c]))return!1;return!0}return this.each((typeof t=="function"?tN:t?QB:eN)(n,t))}function nN(){this.textContent=""}function iN(e){return function(){this.textContent=e}}function oN(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function aN(e){return arguments.length?this.each(e==null?nN:(typeof e=="function"?oN:iN)(e)):this.node().textContent}function sN(){this.innerHTML=""}function lN(e){return function(){this.innerHTML=e}}function uN(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function cN(e){return arguments.length?this.each(e==null?sN:(typeof e=="function"?uN:lN)(e)):this.node().innerHTML}function pN(){this.nextSibling&&this.parentNode.appendChild(this)}function hN(){return this.each(pN)}function dN(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function fN(){return this.each(dN)}function mN(e){var t=typeof e=="function"?e:GI(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function yN(){return null}function gN(e,t){var n=typeof e=="function"?e:GI(e),a=t==null?yN:typeof t=="function"?t:eb(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),a.apply(this,arguments)||null)})}function vN(){var e=this.parentNode;e&&e.removeChild(this)}function _N(){return this.each(vN)}function xN(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function bN(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function wN(e){return this.select(e?bN:xN)}function SN(e){return arguments.length?this.property("__data__",e):this.node().__data__}function EN(e){return function(t){e.call(this,t,this.__data__)}}function CN(e){return e.trim().split(/^|\s+/).map(function(t){var n="",a=t.indexOf(".");return a>=0&&(n=t.slice(a+1),t=t.slice(0,a)),{type:t,name:n}})}function kN(e){return function(){var t=this.__on;if(t){for(var n=0,a=-1,c=t.length,f;n<c;++n)f=t[n],(!e.type||f.type===e.type)&&f.name===e.name?this.removeEventListener(f.type,f.listener,f.options):t[++a]=f;++a?t.length=a:delete this.__on}}}function TN(e,t,n){return function(){var a=this.__on,c,f=EN(t);if(a){for(var o=0,v=a.length;o<v;++o)if((c=a[o]).type===e.type&&c.name===e.name){this.removeEventListener(c.type,c.listener,c.options),this.addEventListener(c.type,c.listener=f,c.options=n),c.value=t;return}}this.addEventListener(e.type,f,n),c={type:e.type,name:e.name,value:t,listener:f,options:n},a?a.push(c):this.__on=[c]}}function IN(e,t,n){var a=CN(e+""),c,f=a.length,o;if(arguments.length<2){var v=this.node().__on;if(v){for(var x=0,E=v.length,T;x<E;++x)for(c=0,T=v[x];c<f;++c)if((o=a[c]).type===T.type&&o.name===T.name)return T.value}return}for(v=t?TN:kN,c=0;c<f;++c)this.each(v(a[c],t,n));return this}function rP(e,t,n){var a=YI(e),c=a.CustomEvent;typeof c=="function"?c=new c(t,n):(c=a.document.createEvent("Event"),n?(c.initEvent(t,n.bubbles,n.cancelable),c.detail=n.detail):c.initEvent(t,!1,!1)),e.dispatchEvent(c)}function PN(e,t){return function(){return rP(this,e,t)}}function AN(e,t){return function(){return rP(this,e,t.apply(this,arguments))}}function MN(e,t){return this.each((typeof t=="function"?AN:PN)(e,t))}function*RN(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var a=e[t],c=0,f=a.length,o;c<f;++c)(o=a[c])&&(yield o)}var nP=[null];function $o(e,t){this._groups=e,this._parents=t}function yf(){return new $o([[document.documentElement]],nP)}function LN(){return this}$o.prototype=yf.prototype={constructor:$o,select:oB,selectAll:uB,selectChild:dB,selectChildren:gB,filter:vB,data:EB,enter:_B,exit:kB,join:TB,merge:IB,selection:LN,order:PB,sort:AB,call:RB,nodes:LB,node:zB,size:DB,empty:OB,each:BB,attr:qB,style:ZB,property:JB,classed:rN,text:aN,html:cN,raise:hN,lower:fN,append:mN,insert:gN,remove:_N,clone:wN,datum:SN,on:IN,dispatch:MN,[Symbol.iterator]:RN};function Qy(e){return typeof e=="string"?new $o([[document.querySelector(e)]],[document.documentElement]):new $o([[e]],nP)}function rb(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function iP(e,t){var n=Object.create(e.prototype);for(var a in t)n[a]=t[a];return n}function gf(){}var Jd=.7,eg=1/Jd,bp="\\s*([+-]?\\d+)\\s*",Qd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",rs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",zN=/^#([0-9a-f]{3,8})$/,DN=new RegExp(`^rgb\\(${bp},${bp},${bp}\\)$`),ON=new RegExp(`^rgb\\(${rs},${rs},${rs}\\)$`),BN=new RegExp(`^rgba\\(${bp},${bp},${bp},${Qd}\\)$`),NN=new RegExp(`^rgba\\(${rs},${rs},${rs},${Qd}\\)$`),FN=new RegExp(`^hsl\\(${Qd},${rs},${rs}\\)$`),jN=new RegExp(`^hsla\\(${Qd},${rs},${rs},${Qd}\\)$`),hE={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};rb(gf,Nu,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:dE,formatHex:dE,formatHex8:UN,formatHsl:$N,formatRgb:fE,toString:fE});function dE(){return this.rgb().formatHex()}function UN(){return this.rgb().formatHex8()}function $N(){return oP(this).formatHsl()}function fE(){return this.rgb().formatRgb()}function Nu(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=zN.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?mE(t):n===3?new wo(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Gm(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Gm(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=DN.exec(e))?new wo(t[1],t[2],t[3],1):(t=ON.exec(e))?new wo(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=BN.exec(e))?Gm(t[1],t[2],t[3],t[4]):(t=NN.exec(e))?Gm(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=FN.exec(e))?vE(t[1],t[2]/100,t[3]/100,1):(t=jN.exec(e))?vE(t[1],t[2]/100,t[3]/100,t[4]):hE.hasOwnProperty(e)?mE(hE[e]):e==="transparent"?new wo(NaN,NaN,NaN,0):null}function mE(e){return new wo(e>>16&255,e>>8&255,e&255,1)}function Gm(e,t,n,a){return a<=0&&(e=t=n=NaN),new wo(e,t,n,a)}function VN(e){return e instanceof gf||(e=Nu(e)),e?(e=e.rgb(),new wo(e.r,e.g,e.b,e.opacity)):new wo}function Ix(e,t,n,a){return arguments.length===1?VN(e):new wo(e,t,n,a??1)}function wo(e,t,n,a){this.r=+e,this.g=+t,this.b=+n,this.opacity=+a}rb(wo,Ix,iP(gf,{brighter(e){return e=e==null?eg:Math.pow(eg,e),new wo(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Jd:Math.pow(Jd,e),new wo(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new wo(zu(this.r),zu(this.g),zu(this.b),tg(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:yE,formatHex:yE,formatHex8:qN,formatRgb:gE,toString:gE}));function yE(){return`#${Mu(this.r)}${Mu(this.g)}${Mu(this.b)}`}function qN(){return`#${Mu(this.r)}${Mu(this.g)}${Mu(this.b)}${Mu((isNaN(this.opacity)?1:this.opacity)*255)}`}function gE(){const e=tg(this.opacity);return`${e===1?"rgb(":"rgba("}${zu(this.r)}, ${zu(this.g)}, ${zu(this.b)}${e===1?")":`, ${e})`}`}function tg(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function zu(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Mu(e){return e=zu(e),(e<16?"0":"")+e.toString(16)}function vE(e,t,n,a){return a<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new xa(e,t,n,a)}function oP(e){if(e instanceof xa)return new xa(e.h,e.s,e.l,e.opacity);if(e instanceof gf||(e=Nu(e)),!e)return new xa;if(e instanceof xa)return e;e=e.rgb();var t=e.r/255,n=e.g/255,a=e.b/255,c=Math.min(t,n,a),f=Math.max(t,n,a),o=NaN,v=f-c,x=(f+c)/2;return v?(t===f?o=(n-a)/v+(n<a)*6:n===f?o=(a-t)/v+2:o=(t-n)/v+4,v/=x<.5?f+c:2-f-c,o*=60):v=x>0&&x<1?0:o,new xa(o,v,x,e.opacity)}function WN(e,t,n,a){return arguments.length===1?oP(e):new xa(e,t,n,a??1)}function xa(e,t,n,a){this.h=+e,this.s=+t,this.l=+n,this.opacity=+a}rb(xa,WN,iP(gf,{brighter(e){return e=e==null?eg:Math.pow(eg,e),new xa(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Jd:Math.pow(Jd,e),new xa(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,a=n+(n<.5?n:1-n)*t,c=2*n-a;return new wo(g_(e>=240?e-240:e+120,c,a),g_(e,c,a),g_(e<120?e+240:e-120,c,a),this.opacity)},clamp(){return new xa(_E(this.h),Hm(this.s),Hm(this.l),tg(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=tg(this.opacity);return`${e===1?"hsl(":"hsla("}${_E(this.h)}, ${Hm(this.s)*100}%, ${Hm(this.l)*100}%${e===1?")":`, ${e})`}`}}));function _E(e){return e=(e||0)%360,e<0?e+360:e}function Hm(e){return Math.max(0,Math.min(1,e||0))}function g_(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const nb=e=>()=>e;function GN(e,t){return function(n){return e+n*t}}function HN(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(a){return Math.pow(e+a*t,n)}}function ZN(e){return(e=+e)==1?aP:function(t,n){return n-t?HN(t,n,e):nb(isNaN(t)?n:t)}}function aP(e,t){var n=t-e;return n?GN(e,n):nb(isNaN(e)?t:e)}const rg=function e(t){var n=ZN(t);function a(c,f){var o=n((c=Ix(c)).r,(f=Ix(f)).r),v=n(c.g,f.g),x=n(c.b,f.b),E=aP(c.opacity,f.opacity);return function(T){return c.r=o(T),c.g=v(T),c.b=x(T),c.opacity=E(T),c+""}}return a.gamma=e,a}(1);function KN(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,a=t.slice(),c;return function(f){for(c=0;c<n;++c)a[c]=e[c]*(1-f)+t[c]*f;return a}}function XN(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function YN(e,t){var n=t?t.length:0,a=e?Math.min(n,e.length):0,c=new Array(a),f=new Array(n),o;for(o=0;o<a;++o)c[o]=ib(e[o],t[o]);for(;o<n;++o)f[o]=t[o];return function(v){for(o=0;o<a;++o)f[o]=c[o](v);return f}}function JN(e,t){var n=new Date;return e=+e,t=+t,function(a){return n.setTime(e*(1-a)+t*a),n}}function _a(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function QN(e,t){var n={},a={},c;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(c in t)c in e?n[c]=ib(e[c],t[c]):a[c]=t[c];return function(f){for(c in n)a[c]=n[c](f);return a}}var Px=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,v_=new RegExp(Px.source,"g");function eF(e){return function(){return e}}function tF(e){return function(t){return e(t)+""}}function sP(e,t){var n=Px.lastIndex=v_.lastIndex=0,a,c,f,o=-1,v=[],x=[];for(e=e+"",t=t+"";(a=Px.exec(e))&&(c=v_.exec(t));)(f=c.index)>n&&(f=t.slice(n,f),v[o]?v[o]+=f:v[++o]=f),(a=a[0])===(c=c[0])?v[o]?v[o]+=c:v[++o]=c:(v[++o]=null,x.push({i:o,x:_a(a,c)})),n=v_.lastIndex;return n<t.length&&(f=t.slice(n),v[o]?v[o]+=f:v[++o]=f),v.length<2?x[0]?tF(x[0].x):eF(t):(t=x.length,function(E){for(var T=0,P;T<t;++T)v[(P=x[T]).i]=P.x(E);return v.join("")})}function ib(e,t){var n=typeof t,a;return t==null||n==="boolean"?nb(t):(n==="number"?_a:n==="string"?(a=Nu(t))?(t=a,rg):sP:t instanceof Nu?rg:t instanceof Date?JN:XN(t)?KN:Array.isArray(t)?YN:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?QN:_a)(e,t)}function rF(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var xE=180/Math.PI,Ax={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function lP(e,t,n,a,c,f){var o,v,x;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(x=e*n+t*a)&&(n-=e*x,a-=t*x),(v=Math.sqrt(n*n+a*a))&&(n/=v,a/=v,x/=v),e*a<t*n&&(e=-e,t=-t,x=-x,o=-o),{translateX:c,translateY:f,rotate:Math.atan2(t,e)*xE,skewX:Math.atan(x)*xE,scaleX:o,scaleY:v}}var Zm;function nF(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Ax:lP(t.a,t.b,t.c,t.d,t.e,t.f)}function iF(e){return e==null||(Zm||(Zm=document.createElementNS("http://www.w3.org/2000/svg","g")),Zm.setAttribute("transform",e),!(e=Zm.transform.baseVal.consolidate()))?Ax:(e=e.matrix,lP(e.a,e.b,e.c,e.d,e.e,e.f))}function uP(e,t,n,a){function c(E){return E.length?E.pop()+" ":""}function f(E,T,P,I,q,U){if(E!==P||T!==I){var G=q.push("translate(",null,t,null,n);U.push({i:G-4,x:_a(E,P)},{i:G-2,x:_a(T,I)})}else(P||I)&&q.push("translate("+P+t+I+n)}function o(E,T,P,I){E!==T?(E-T>180?T+=360:T-E>180&&(E+=360),I.push({i:P.push(c(P)+"rotate(",null,a)-2,x:_a(E,T)})):T&&P.push(c(P)+"rotate("+T+a)}function v(E,T,P,I){E!==T?I.push({i:P.push(c(P)+"skewX(",null,a)-2,x:_a(E,T)}):T&&P.push(c(P)+"skewX("+T+a)}function x(E,T,P,I,q,U){if(E!==P||T!==I){var G=q.push(c(q)+"scale(",null,",",null,")");U.push({i:G-4,x:_a(E,P)},{i:G-2,x:_a(T,I)})}else(P!==1||I!==1)&&q.push(c(q)+"scale("+P+","+I+")")}return function(E,T){var P=[],I=[];return E=e(E),T=e(T),f(E.translateX,E.translateY,T.translateX,T.translateY,P,I),o(E.rotate,T.rotate,P,I),v(E.skewX,T.skewX,P,I),x(E.scaleX,E.scaleY,T.scaleX,T.scaleY,P,I),E=T=null,function(q){for(var U=-1,G=I.length,D;++U<G;)P[(D=I[U]).i]=D.x(q);return P.join("")}}}var oF=uP(nF,"px, ","px)","deg)"),aF=uP(iF,", ",")",")"),Mp=0,gd=0,id=0,cP=1e3,ng,vd,ig=0,Fu=0,Fg=0,ef=typeof performance=="object"&&performance.now?performance:Date,pP=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ob(){return Fu||(pP(sF),Fu=ef.now()+Fg)}function sF(){Fu=0}function og(){this._call=this._time=this._next=null}og.prototype=hP.prototype={constructor:og,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?ob():+n)+(t==null?0:+t),!this._next&&vd!==this&&(vd?vd._next=this:ng=this,vd=this),this._call=e,this._time=n,Mx()},stop:function(){this._call&&(this._call=null,this._time=1/0,Mx())}};function hP(e,t,n){var a=new og;return a.restart(e,t,n),a}function lF(){ob(),++Mp;for(var e=ng,t;e;)(t=Fu-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Mp}function bE(){Fu=(ig=ef.now())+Fg,Mp=gd=0;try{lF()}finally{Mp=0,cF(),Fu=0}}function uF(){var e=ef.now(),t=e-ig;t>cP&&(Fg-=t,ig=e)}function cF(){for(var e,t=ng,n,a=1/0;t;)t._call?(a>t._time&&(a=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:ng=n);vd=e,Mx(a)}function Mx(e){if(!Mp){gd&&(gd=clearTimeout(gd));var t=e-Fu;t>24?(e<1/0&&(gd=setTimeout(bE,e-ef.now()-Fg)),id&&(id=clearInterval(id))):(id||(ig=ef.now(),id=setInterval(uF,cP)),Mp=1,pP(bE))}}function wE(e,t,n){var a=new og;return t=t==null?0:+t,a.restart(c=>{a.stop(),e(c+t)},t,n),a}var pF=WI("start","end","cancel","interrupt"),hF=[],dP=0,SE=1,Rx=2,vy=3,EE=4,Lx=5,_y=6;function jg(e,t,n,a,c,f){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;dF(e,n,{name:t,index:a,group:c,on:pF,tween:hF,time:f.time,delay:f.delay,duration:f.duration,ease:f.ease,timer:null,state:dP})}function ab(e,t){var n=Ea(e,t);if(n.state>dP)throw new Error("too late; already scheduled");return n}function ls(e,t){var n=Ea(e,t);if(n.state>vy)throw new Error("too late; already running");return n}function Ea(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function dF(e,t,n){var a=e.__transition,c;a[t]=n,n.timer=hP(f,0,n.time);function f(E){n.state=SE,n.timer.restart(o,n.delay,n.time),n.delay<=E&&o(E-n.delay)}function o(E){var T,P,I,q;if(n.state!==SE)return x();for(T in a)if(q=a[T],q.name===n.name){if(q.state===vy)return wE(o);q.state===EE?(q.state=_y,q.timer.stop(),q.on.call("interrupt",e,e.__data__,q.index,q.group),delete a[T]):+T<t&&(q.state=_y,q.timer.stop(),q.on.call("cancel",e,e.__data__,q.index,q.group),delete a[T])}if(wE(function(){n.state===vy&&(n.state=EE,n.timer.restart(v,n.delay,n.time),v(E))}),n.state=Rx,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Rx){for(n.state=vy,c=new Array(I=n.tween.length),T=0,P=-1;T<I;++T)(q=n.tween[T].value.call(e,e.__data__,n.index,n.group))&&(c[++P]=q);c.length=P+1}}function v(E){for(var T=E<n.duration?n.ease.call(null,E/n.duration):(n.timer.restart(x),n.state=Lx,1),P=-1,I=c.length;++P<I;)c[P].call(e,T);n.state===Lx&&(n.on.call("end",e,e.__data__,n.index,n.group),x())}function x(){n.state=_y,n.timer.stop(),delete a[t];for(var E in a)return;delete e.__transition}}function fF(e,t){var n=e.__transition,a,c,f=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((a=n[o]).name!==t){f=!1;continue}c=a.state>Rx&&a.state<Lx,a.state=_y,a.timer.stop(),a.on.call(c?"interrupt":"cancel",e,e.__data__,a.index,a.group),delete n[o]}f&&delete e.__transition}}function mF(e){return this.each(function(){fF(this,e)})}function yF(e,t){var n,a;return function(){var c=ls(this,e),f=c.tween;if(f!==n){a=n=f;for(var o=0,v=a.length;o<v;++o)if(a[o].name===t){a=a.slice(),a.splice(o,1);break}}c.tween=a}}function gF(e,t,n){var a,c;if(typeof n!="function")throw new Error;return function(){var f=ls(this,e),o=f.tween;if(o!==a){c=(a=o).slice();for(var v={name:t,value:n},x=0,E=c.length;x<E;++x)if(c[x].name===t){c[x]=v;break}x===E&&c.push(v)}f.tween=c}}function vF(e,t){var n=this._id;if(e+="",arguments.length<2){for(var a=Ea(this.node(),n).tween,c=0,f=a.length,o;c<f;++c)if((o=a[c]).name===e)return o.value;return null}return this.each((t==null?yF:gF)(n,e,t))}function sb(e,t,n){var a=e._id;return e.each(function(){var c=ls(this,a);(c.value||(c.value={}))[t]=n.apply(this,arguments)}),function(c){return Ea(c,a).value[t]}}function fP(e,t){var n;return(typeof t=="number"?_a:t instanceof Nu?rg:(n=Nu(t))?(t=n,rg):sP)(e,t)}function _F(e){return function(){this.removeAttribute(e)}}function xF(e){return function(){this.removeAttributeNS(e.space,e.local)}}function bF(e,t,n){var a,c=n+"",f;return function(){var o=this.getAttribute(e);return o===c?null:o===a?f:f=t(a=o,n)}}function wF(e,t,n){var a,c=n+"",f;return function(){var o=this.getAttributeNS(e.space,e.local);return o===c?null:o===a?f:f=t(a=o,n)}}function SF(e,t,n){var a,c,f;return function(){var o,v=n(this),x;return v==null?void this.removeAttribute(e):(o=this.getAttribute(e),x=v+"",o===x?null:o===a&&x===c?f:(c=x,f=t(a=o,v)))}}function EF(e,t,n){var a,c,f;return function(){var o,v=n(this),x;return v==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),x=v+"",o===x?null:o===a&&x===c?f:(c=x,f=t(a=o,v)))}}function CF(e,t){var n=Ng(e),a=n==="transform"?aF:fP;return this.attrTween(e,typeof t=="function"?(n.local?EF:SF)(n,a,sb(this,"attr."+e,t)):t==null?(n.local?xF:_F)(n):(n.local?wF:bF)(n,a,t))}function kF(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function TF(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function IF(e,t){var n,a;function c(){var f=t.apply(this,arguments);return f!==a&&(n=(a=f)&&TF(e,f)),n}return c._value=t,c}function PF(e,t){var n,a;function c(){var f=t.apply(this,arguments);return f!==a&&(n=(a=f)&&kF(e,f)),n}return c._value=t,c}function AF(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var a=Ng(e);return this.tween(n,(a.local?IF:PF)(a,t))}function MF(e,t){return function(){ab(this,e).delay=+t.apply(this,arguments)}}function RF(e,t){return t=+t,function(){ab(this,e).delay=t}}function LF(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?MF:RF)(t,e)):Ea(this.node(),t).delay}function zF(e,t){return function(){ls(this,e).duration=+t.apply(this,arguments)}}function DF(e,t){return t=+t,function(){ls(this,e).duration=t}}function OF(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?zF:DF)(t,e)):Ea(this.node(),t).duration}function BF(e,t){if(typeof t!="function")throw new Error;return function(){ls(this,e).ease=t}}function NF(e){var t=this._id;return arguments.length?this.each(BF(t,e)):Ea(this.node(),t).ease}function FF(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;ls(this,e).ease=n}}function jF(e){if(typeof e!="function")throw new Error;return this.each(FF(this._id,e))}function UF(e){typeof e!="function"&&(e=ZI(e));for(var t=this._groups,n=t.length,a=new Array(n),c=0;c<n;++c)for(var f=t[c],o=f.length,v=a[c]=[],x,E=0;E<o;++E)(x=f[E])&&e.call(x,x.__data__,E,f)&&v.push(x);return new qs(a,this._parents,this._name,this._id)}function $F(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,a=t.length,c=n.length,f=Math.min(a,c),o=new Array(a),v=0;v<f;++v)for(var x=t[v],E=n[v],T=x.length,P=o[v]=new Array(T),I,q=0;q<T;++q)(I=x[q]||E[q])&&(P[q]=I);for(;v<a;++v)o[v]=t[v];return new qs(o,this._parents,this._name,this._id)}function VF(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function qF(e,t,n){var a,c,f=VF(t)?ab:ls;return function(){var o=f(this,e),v=o.on;v!==a&&(c=(a=v).copy()).on(t,n),o.on=c}}function WF(e,t){var n=this._id;return arguments.length<2?Ea(this.node(),n).on.on(e):this.each(qF(n,e,t))}function GF(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function HF(){return this.on("end.remove",GF(this._id))}function ZF(e){var t=this._name,n=this._id;typeof e!="function"&&(e=eb(e));for(var a=this._groups,c=a.length,f=new Array(c),o=0;o<c;++o)for(var v=a[o],x=v.length,E=f[o]=new Array(x),T,P,I=0;I<x;++I)(T=v[I])&&(P=e.call(T,T.__data__,I,v))&&("__data__"in T&&(P.__data__=T.__data__),E[I]=P,jg(E[I],t,n,I,E,Ea(T,n)));return new qs(f,this._parents,t,n)}function KF(e){var t=this._name,n=this._id;typeof e!="function"&&(e=HI(e));for(var a=this._groups,c=a.length,f=[],o=[],v=0;v<c;++v)for(var x=a[v],E=x.length,T,P=0;P<E;++P)if(T=x[P]){for(var I=e.call(T,T.__data__,P,x),q,U=Ea(T,n),G=0,D=I.length;G<D;++G)(q=I[G])&&jg(q,t,n,G,I,U);f.push(I),o.push(T)}return new qs(f,o,t,n)}var XF=yf.prototype.constructor;function YF(){return new XF(this._groups,this._parents)}function JF(e,t){var n,a,c;return function(){var f=Ap(this,e),o=(this.style.removeProperty(e),Ap(this,e));return f===o?null:f===n&&o===a?c:c=t(n=f,a=o)}}function mP(e){return function(){this.style.removeProperty(e)}}function QF(e,t,n){var a,c=n+"",f;return function(){var o=Ap(this,e);return o===c?null:o===a?f:f=t(a=o,n)}}function e6(e,t,n){var a,c,f;return function(){var o=Ap(this,e),v=n(this),x=v+"";return v==null&&(x=v=(this.style.removeProperty(e),Ap(this,e))),o===x?null:o===a&&x===c?f:(c=x,f=t(a=o,v))}}function t6(e,t){var n,a,c,f="style."+t,o="end."+f,v;return function(){var x=ls(this,e),E=x.on,T=x.value[f]==null?v||(v=mP(t)):void 0;(E!==n||c!==T)&&(a=(n=E).copy()).on(o,c=T),x.on=a}}function r6(e,t,n){var a=(e+="")=="transform"?oF:fP;return t==null?this.styleTween(e,JF(e,a)).on("end.style."+e,mP(e)):typeof t=="function"?this.styleTween(e,e6(e,a,sb(this,"style."+e,t))).each(t6(this._id,e)):this.styleTween(e,QF(e,a,t),n).on("end.style."+e,null)}function n6(e,t,n){return function(a){this.style.setProperty(e,t.call(this,a),n)}}function i6(e,t,n){var a,c;function f(){var o=t.apply(this,arguments);return o!==c&&(a=(c=o)&&n6(e,o,n)),a}return f._value=t,f}function o6(e,t,n){var a="style."+(e+="");if(arguments.length<2)return(a=this.tween(a))&&a._value;if(t==null)return this.tween(a,null);if(typeof t!="function")throw new Error;return this.tween(a,i6(e,t,n??""))}function a6(e){return function(){this.textContent=e}}function s6(e){return function(){var t=e(this);this.textContent=t??""}}function l6(e){return this.tween("text",typeof e=="function"?s6(sb(this,"text",e)):a6(e==null?"":e+""))}function u6(e){return function(t){this.textContent=e.call(this,t)}}function c6(e){var t,n;function a(){var c=e.apply(this,arguments);return c!==n&&(t=(n=c)&&u6(c)),t}return a._value=e,a}function p6(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,c6(e))}function h6(){for(var e=this._name,t=this._id,n=yP(),a=this._groups,c=a.length,f=0;f<c;++f)for(var o=a[f],v=o.length,x,E=0;E<v;++E)if(x=o[E]){var T=Ea(x,t);jg(x,e,n,E,o,{time:T.time+T.delay+T.duration,delay:0,duration:T.duration,ease:T.ease})}return new qs(a,this._parents,e,n)}function d6(){var e,t,n=this,a=n._id,c=n.size();return new Promise(function(f,o){var v={value:o},x={value:function(){--c===0&&f()}};n.each(function(){var E=ls(this,a),T=E.on;T!==e&&(t=(e=T).copy(),t._.cancel.push(v),t._.interrupt.push(v),t._.end.push(x)),E.on=t}),c===0&&f()})}var f6=0;function qs(e,t,n,a){this._groups=e,this._parents=t,this._name=n,this._id=a}function yP(){return++f6}var zs=yf.prototype;qs.prototype={constructor:qs,select:ZF,selectAll:KF,selectChild:zs.selectChild,selectChildren:zs.selectChildren,filter:UF,merge:$F,selection:YF,transition:h6,call:zs.call,nodes:zs.nodes,node:zs.node,size:zs.size,empty:zs.empty,each:zs.each,on:WF,attr:CF,attrTween:AF,style:r6,styleTween:o6,text:l6,textTween:p6,remove:HF,tween:vF,delay:LF,duration:OF,ease:NF,easeVarying:jF,end:d6,[Symbol.iterator]:zs[Symbol.iterator]};function m6(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var y6={time:null,delay:0,duration:250,ease:m6};function g6(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function v6(e){var t,n;e instanceof qs?(t=e._id,e=e._name):(t=yP(),(n=y6).time=ob(),e=e==null?null:e+"");for(var a=this._groups,c=a.length,f=0;f<c;++f)for(var o=a[f],v=o.length,x,E=0;E<v;++E)(x=o[E])&&jg(x,e,t,E,o,n||g6(x,t));return new qs(a,this._parents,e,t)}yf.prototype.interrupt=mF;yf.prototype.transition=v6;function _6(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function ag(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,a=e.slice(0,n);return[a.length>1?a[0]+a.slice(2):a,+e.slice(n+1)]}function Rp(e){return e=ag(Math.abs(e)),e?e[1]:NaN}function x6(e,t){return function(n,a){for(var c=n.length,f=[],o=0,v=e[0],x=0;c>0&&v>0&&(x+v+1>a&&(v=Math.max(1,a-x)),f.push(n.substring(c-=v,c+v)),!((x+=v+1)>a));)v=e[o=(o+1)%e.length];return f.reverse().join(t)}}function b6(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var w6=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function sg(e){if(!(t=w6.exec(e)))throw new Error("invalid format: "+e);var t;return new lb({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}sg.prototype=lb.prototype;function lb(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}lb.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function S6(e){e:for(var t=e.length,n=1,a=-1,c;n<t;++n)switch(e[n]){case".":a=c=n;break;case"0":a===0&&(a=n),c=n;break;default:if(!+e[n])break e;a>0&&(a=0);break}return a>0?e.slice(0,a)+e.slice(c+1):e}var gP;function E6(e,t){var n=ag(e,t);if(!n)return e+"";var a=n[0],c=n[1],f=c-(gP=Math.max(-8,Math.min(8,Math.floor(c/3)))*3)+1,o=a.length;return f===o?a:f>o?a+new Array(f-o+1).join("0"):f>0?a.slice(0,f)+"."+a.slice(f):"0."+new Array(1-f).join("0")+ag(e,Math.max(0,t+f-1))[0]}function CE(e,t){var n=ag(e,t);if(!n)return e+"";var a=n[0],c=n[1];return c<0?"0."+new Array(-c).join("0")+a:a.length>c+1?a.slice(0,c+1)+"."+a.slice(c+1):a+new Array(c-a.length+2).join("0")}const kE={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:_6,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>CE(e*100,t),r:CE,s:E6,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function TE(e){return e}var IE=Array.prototype.map,PE=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function C6(e){var t=e.grouping===void 0||e.thousands===void 0?TE:x6(IE.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",a=e.currency===void 0?"":e.currency[1]+"",c=e.decimal===void 0?".":e.decimal+"",f=e.numerals===void 0?TE:b6(IE.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",v=e.minus===void 0?"":e.minus+"",x=e.nan===void 0?"NaN":e.nan+"";function E(P){P=sg(P);var I=P.fill,q=P.align,U=P.sign,G=P.symbol,D=P.zero,F=P.width,V=P.comma,B=P.precision,z=P.trim,ne=P.type;ne==="n"?(V=!0,ne="g"):kE[ne]||(B===void 0&&(B=12),z=!0,ne="g"),(D||I==="0"&&q==="=")&&(D=!0,I="0",q="=");var oe=G==="$"?n:G==="#"&&/[boxX]/.test(ne)?"0"+ne.toLowerCase():"",pe=G==="$"?a:/[%p]/.test(ne)?o:"",be=kE[ne],Te=/[defgprs%]/.test(ne);B=B===void 0?6:/[gprs]/.test(ne)?Math.max(1,Math.min(21,B)):Math.max(0,Math.min(20,B));function _e(Se){var te=oe,he=pe,Oe,je,Ce;if(ne==="c")he=be(Se)+he,Se="";else{Se=+Se;var ke=Se<0||1/Se<0;if(Se=isNaN(Se)?x:be(Math.abs(Se),B),z&&(Se=S6(Se)),ke&&+Se==0&&U!=="+"&&(ke=!1),te=(ke?U==="("?U:v:U==="-"||U==="("?"":U)+te,he=(ne==="s"?PE[8+gP/3]:"")+he+(ke&&U==="("?")":""),Te){for(Oe=-1,je=Se.length;++Oe<je;)if(Ce=Se.charCodeAt(Oe),48>Ce||Ce>57){he=(Ce===46?c+Se.slice(Oe+1):Se.slice(Oe))+he,Se=Se.slice(0,Oe);break}}}V&&!D&&(Se=t(Se,1/0));var $e=te.length+Se.length+he.length,Ze=$e<F?new Array(F-$e+1).join(I):"";switch(V&&D&&(Se=t(Ze+Se,Ze.length?F-he.length:1/0),Ze=""),q){case"<":Se=te+Se+he+Ze;break;case"=":Se=te+Ze+Se+he;break;case"^":Se=Ze.slice(0,$e=Ze.length>>1)+te+Se+he+Ze.slice($e);break;default:Se=Ze+te+Se+he;break}return f(Se)}return _e.toString=function(){return P+""},_e}function T(P,I){var q=E((P=sg(P),P.type="f",P)),U=Math.max(-8,Math.min(8,Math.floor(Rp(I)/3)))*3,G=Math.pow(10,-U),D=PE[8+U/3];return function(F){return q(G*F)+D}}return{format:E,formatPrefix:T}}var Km,vP,_P;k6({thousands:",",grouping:[3],currency:["$",""]});function k6(e){return Km=C6(e),vP=Km.format,_P=Km.formatPrefix,Km}function T6(e){return Math.max(0,-Rp(Math.abs(e)))}function I6(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Rp(t)/3)))*3-Rp(Math.abs(e)))}function P6(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Rp(t)-Rp(e))+1}function xP(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const AE=Symbol("implicit");function bP(){var e=new lE,t=[],n=[],a=AE;function c(f){let o=e.get(f);if(o===void 0){if(a!==AE)return a;e.set(f,o=t.push(f)-1)}return n[o%n.length]}return c.domain=function(f){if(!arguments.length)return t.slice();t=[],e=new lE;for(const o of f)e.has(o)||e.set(o,t.push(o)-1);return c},c.range=function(f){return arguments.length?(n=Array.from(f),c):n.slice()},c.unknown=function(f){return arguments.length?(a=f,c):a},c.copy=function(){return bP(t,n).unknown(a)},xP.apply(c,arguments),c}function A6(e){return function(){return e}}function M6(e){return+e}var ME=[0,1];function sp(e){return e}function zx(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:A6(isNaN(t)?NaN:.5)}function R6(e,t){var n;return e>t&&(n=e,e=t,t=n),function(a){return Math.max(e,Math.min(t,a))}}function L6(e,t,n){var a=e[0],c=e[1],f=t[0],o=t[1];return c<a?(a=zx(c,a),f=n(o,f)):(a=zx(a,c),f=n(f,o)),function(v){return f(a(v))}}function z6(e,t,n){var a=Math.min(e.length,t.length)-1,c=new Array(a),f=new Array(a),o=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<a;)c[o]=zx(e[o],e[o+1]),f[o]=n(t[o],t[o+1]);return function(v){var x=VO(e,v,1,a)-1;return f[x](c[x](v))}}function D6(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function O6(){var e=ME,t=ME,n=ib,a,c,f,o=sp,v,x,E;function T(){var I=Math.min(e.length,t.length);return o!==sp&&(o=R6(e[0],e[I-1])),v=I>2?z6:L6,x=E=null,P}function P(I){return I==null||isNaN(I=+I)?f:(x||(x=v(e.map(a),t,n)))(a(o(I)))}return P.invert=function(I){return o(c((E||(E=v(t,e.map(a),_a)))(I)))},P.domain=function(I){return arguments.length?(e=Array.from(I,M6),T()):e.slice()},P.range=function(I){return arguments.length?(t=Array.from(I),T()):t.slice()},P.rangeRound=function(I){return t=Array.from(I),n=rF,T()},P.clamp=function(I){return arguments.length?(o=I?!0:sp,T()):o!==sp},P.interpolate=function(I){return arguments.length?(n=I,T()):n},P.unknown=function(I){return arguments.length?(f=I,P):f},function(I,q){return a=I,c=q,T()}}function B6(){return O6()(sp,sp)}function N6(e,t,n,a){var c=YO(e,t,n),f;switch(a=sg(a??",f"),a.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return a.precision==null&&!isNaN(f=I6(c,o))&&(a.precision=f),_P(a,o)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(f=P6(c,Math.max(Math.abs(e),Math.abs(t))))&&(a.precision=f-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(f=T6(c))&&(a.precision=f-(a.type==="%")*2);break}}return vP(a)}function F6(e){var t=e.domain;return e.ticks=function(n){var a=t();return XO(a[0],a[a.length-1],n??10)},e.tickFormat=function(n,a){var c=t();return N6(c[0],c[c.length-1],n??10,a)},e.nice=function(n){n==null&&(n=10);var a=t(),c=0,f=a.length-1,o=a[c],v=a[f],x,E,T=10;for(v<o&&(E=o,o=v,v=E,E=c,c=f,f=E);T-- >0;){if(E=kx(o,v,n),E===x)return a[c]=o,a[f]=v,t(a);if(E>0)o=Math.floor(o/E)*E,v=Math.ceil(v/E)*E;else if(E<0)o=Math.ceil(o*E)/E,v=Math.floor(v*E)/E;else break;x=E}return e},e}function wP(){var e=B6();return e.copy=function(){return D6(e,wP())},xP.apply(e,arguments),F6(e)}function _d(e,t,n){this.k=e,this.x=t,this.y=n}_d.prototype={constructor:_d,scale:function(e){return e===1?this:new _d(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new _d(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};_d.prototype;const No=(e,t)=>{(t===null||isNaN(t)||t<9)&&(t=9);const n=10,a=t/n,c=["interpolate",["linear"],["to-number",["get",e]],0,"rgba(65, 182, 196, 0.85)"],f=[];for(let o=1;o<=n;o++){if(o===1){const v=o*a;f.push({stop:v,color:"rgba(127, 205, 187, .99)"})}if(o===2){const v=o*a;f.push({stop:v,color:"rgba(199, 233, 180, .99)"})}if(o===3){const v=o*a;f.push({stop:v,color:"rgba(220, 230, 177, 0.99)"})}if(o===4){const v=o*a;f.push({stop:v,color:"rgba(247, 237, 195,0.99)"})}if(o===5){const v=o*a;f.push({stop:v,color:"rgba(250, 240, 160, 0.99)"})}if(o===6){const v=o*a;f.push({stop:v,color:"rgba(255, 200, 118, 0.99)"})}if(o===7){const v=o*a;f.push({stop:v,color:"rgba(254, 178, 76, .99)"})}if(o===8){const v=o*a;f.push({stop:v,color:"rgba(253, 141, 60, .99)"})}if(o===9){const v=o*a;f.push({stop:v,color:"rgba(252, 78, 42, .99)"})}if(o===10){const v=o*a;f.push({stop:v,color:"rgba(227, 26, 28, .99)"})}}for(const o of f){const v=o.stop,x=o.color;c.push(v,x)}return c},j6=e=>e>11e3?Math.round(e/1e3)*1e3:e>1e3?Math.round(e/100)*100:e>100?Math.round(e/10)*10:e>10?Math.round(e/5)*5:e.toFixed(0),__=(e,t)=>{t.current=new Set;const n=e.current;n&&["mobility-Street-Detailed-highlighted","mobility-Block-Detailed-highlighted","mobility-Street-Detailed-other","energy-Building-highlighted","energy-Feeder-highlighted"].forEach(c=>{n.setFilter(c,["in","object_id",""]),n.setFilter(c,["in","ID_ESL",""])})},x_=(e,t)=>{const n=t.current;if(!n)return;const a=d3.select("#graph-container-mobility-summary");a.html("");const c=[];n.queryRenderedFeatures({layers:["mobility-Street-Detailed","mobility-Block-Detailed"]}).forEach(B=>{const z=B.properties.object_id;e.current.has(z)&&c.push({type:"Feature",geometry:B.geometry,properties:B.properties})});let o=[{timePeriod:"Morning",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Breakfast",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Lunch",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Afternoon",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Dinner",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Night",walk:0,bike:0,car:0,publicTransit:0}],v=[{timePeriod:"Morning",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Breakfast",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Lunch",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Afternoon",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Dinner",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Night",walk:0,bike:0,car:0,publicTransit:0}];const x=[{timePeriod:"Early Morning",walk:225.31,bike:44.53,car:1766.11,publicTransit:1508.7},{timePeriod:"Morning",walk:3207.24,bike:378.92,car:20038.77,publicTransit:6659.61},{timePeriod:"Lunch",walk:2306.27,bike:316.9,car:13787.66,publicTransit:7026.34},{timePeriod:"Afternoon",walk:1359.1,bike:186.25,car:9242.15,publicTransit:6118.57},{timePeriod:"Evening",walk:1685.12,bike:331.32,car:12511.29,publicTransit:10306.86},{timePeriod:"Night",walk:263.57,bike:51.43,car:2276.55,publicTransit:2076.8}];e.current.size===0&&(o=[...x]),c.length>0&&c.forEach(B=>{Object.keys(B.properties).forEach(z=>{const[ne,oe,pe,be,Te,_e]=z.split("_");pe==="0"&&oe==="1"&&Te==="-1"&&_e==="-1"?be==="-1"?o[0].walk+=Number(B.properties[z]):be==="1"?o[1].walk+=Number(B.properties[z]):be==="2"?o[2].walk+=Number(B.properties[z]):be==="3"?o[3].walk+=Number(B.properties[z]):be==="4"?o[4].walk+=Number(B.properties[z]):be==="5"&&(o[5].walk+=Number(B.properties[z])):pe==="1"&&oe==="1"&&Te==="-1"&&_e==="-1"?be==="0"?o[0].bike+=Number(B.properties[z]):be==="1"?o[1].bike+=Number(B.properties[z]):be==="2"?o[2].bike+=Number(B.properties[z]):be==="3"?o[3].bike+=Number(B.properties[z]):be==="4"?o[4].bike+=Number(B.properties[z]):be==="5"&&(o[5].bike+=Number(B.properties[z])):pe==="2"&&oe==="1"&&Te==="-1"&&_e==="-1"?be==="0"?o[0].car+=Number(B.properties[z]):be==="1"?o[1].car+=Number(B.properties[z]):be==="2"?o[2].car+=Number(B.properties[z]):be==="3"?o[3].car+=Number(B.properties[z]):be==="4"?o[4].car+=Number(B.properties[z]):be==="5"&&(o[5].car+=Number(B.properties[z])):pe==="3"&&oe==="1"&&Te==="-1"&&_e==="-1"&&(be==="0"?o[0].publicTransit+=Number(B.properties[z]):be==="1"?o[1].publicTransit+=Number(B.properties[z]):be==="2"?o[2].publicTransit+=Number(B.properties[z]):be==="3"?o[3].publicTransit+=Number(B.properties[z]):be==="4"?o[4].publicTransit+=Number(B.properties[z]):be==="5"&&(o[5].publicTransit+=Number(B.properties[z])))})}),c.length>0&&c.forEach(B=>{Object.keys(B.properties).forEach(z=>{const[ne,oe,pe,be,Te,_e]=z.split("_");pe==="0"&&oe==="0"&&Te==="-1"&&_e==="-1"?be==="-1"?v[0].walk+=Number(B.properties[z]):be==="1"?v[1].walk+=Number(B.properties[z]):be==="2"?v[2].walk+=Number(B.properties[z]):be==="3"?v[3].walk+=Number(B.properties[z]):be==="4"?v[4].walk+=Number(B.properties[z]):be==="5"&&(v[5].walk+=Number(B.properties[z])):pe==="1"&&oe==="0"&&Te==="-1"&&_e==="-1"?be==="0"?v[0].bike+=Number(B.properties[z]):be==="1"?v[1].bike+=Number(B.properties[z]):be==="2"?v[2].bike+=Number(B.properties[z]):be==="3"?v[3].bike+=Number(B.properties[z]):be==="4"?v[4].bike+=Number(B.properties[z]):be==="5"&&(v[5].bike+=Number(B.properties[z])):pe==="2"&&oe==="0"&&Te==="-1"&&_e==="-1"?be==="0"?v[0].car+=Number(B.properties[z]):be==="1"?v[1].car+=Number(B.properties[z]):be==="2"?v[2].car+=Number(B.properties[z]):be==="3"?v[3].car+=Number(B.properties[z]):be==="4"?v[4].car+=Number(B.properties[z]):be==="5"&&(v[5].car+=Number(B.properties[z])):pe==="3"&&oe==="0"&&Te==="-1"&&_e==="-1"&&(be==="0"?v[0].publicTransit+=Number(B.properties[z]):be==="1"?v[1].publicTransit+=Number(B.properties[z]):be==="2"?v[2].publicTransit+=Number(B.properties[z]):be==="3"?v[3].publicTransit+=Number(B.properties[z]):be==="4"?v[4].publicTransit+=Number(B.properties[z]):be==="5"&&(v[5].publicTransit+=Number(B.properties[z])))})});const E=parseInt(o.reduce((B,z)=>B+z.walk,0))+parseInt(v.reduce((B,z)=>B+z.walk,0)),T=parseInt(o.reduce((B,z)=>B+z.bike,0))+parseInt(v.reduce((B,z)=>B+z.bike,0)),P=parseInt(o.reduce((B,z)=>B+z.car,0))+parseInt(v.reduce((B,z)=>B+z.car,0)),I=parseInt(o.reduce((B,z)=>B+z.publicTransit,0))+parseInt(v.reduce((B,z)=>B+z.publicTransit,0)),q=["walk","bike","car","publicTransit"];d3.stack().keys(q)(o);const G=340,D=70,F={top:130,right:40,bottom:40,left:80},V=a.append("svg").attr("width",G).attr("height",D);V.append("rect").attr("x",G/10).attr("y",F.top-90).attr("width",55).attr("height",25).attr("fill","#f24726").attr("rx",5).attr("ry",5),V.append("text").attr("x",G/10+26).attr("y",F.top-73).attr("text-anchor","middle").attr("font-size","12px").attr("fill","white").text(`${E.toLocaleString()}`),V.append("rect").attr("x",G/10+80).attr("y",F.top-90).attr("width",55).attr("height",25).attr("fill","#fac710").attr("rx",5).attr("ry",5),V.append("text").attr("x",G/10+106).attr("y",F.top-73).attr("text-anchor","middle").attr("font-size","12px").attr("fill","white").text(`${T.toLocaleString()}`),V.append("rect").attr("x",G/10+160).attr("y",F.top-90).attr("width",55).attr("height",25).attr("fill","#2d9bf0").attr("rx",5).attr("ry",5),V.append("text").attr("x",G/10+186).attr("y",F.top-73).attr("text-anchor","middle").attr("font-size","12px").attr("fill","white").text(`${P.toLocaleString()}`),V.append("rect").attr("x",G/10+240).attr("y",F.top-90).attr("width",55).attr("height",25).attr("fill","#0263b9").attr("rx",5).attr("ry",5),V.append("text").attr("x",G/10+266).attr("y",F.top-73).attr("text-anchor","middle").attr("font-size","12px").attr("fill","white").text(`${I.toLocaleString()}`)},b_=(e,t)=>{const n=t.current;if(!n)return;const a=d3.select("#graph-container-mobility-senario");if(!a.node()){console.error("Container element not found.");return}a.html("");const c=[];n.queryRenderedFeatures({layers:["mobility-Street-Detailed","mobility-Block-Detailed"]}).forEach(ne=>{const oe=ne.properties.object_id;e.current.has(oe)&&c.push({type:"Feature",geometry:ne.geometry,properties:ne.properties})});let o=[{timePeriod:"Base Case",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Senario 1",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Senario 2",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Senario 3",walk:0,bike:0,car:0,publicTransit:0}];const v=[{timePeriod:"Base Case",walk:196.42,bike:44.66,car:1591.73,publicTransit:1473.78},{timePeriod:"Senario 1",walk:3069.64,bike:394.12,car:20284.15,publicTransit:6109.5},{timePeriod:"Senario 2",walk:3000.93,bike:416.66,car:13787.66,publicTransit:9402.27},{timePeriod:"Senario 3",walk:1331.69,bike:196.68,car:19540.22,publicTransit:6137.72}];e.current.size===0&&(o=[...v]),c.length>0&&c.forEach(ne=>{Object.keys(ne.properties).forEach(oe=>{const[pe,be,Te,_e,Se,te]=oe.split("_");Te==="0"&&be==="0"&&Se==="-1"&&te==="-1"?_e==="-1"?o[0].walk+=Number(ne.properties[oe]):_e==="1"?o[1].walk+=Number(ne.properties[oe]):_e==="2"?o[2].walk+=Number(ne.properties[oe]):_e==="3"&&(o[3].walk+=Number(ne.properties[oe])):Te==="1"&&be==="0"&&Se==="-1"&&te==="-1"?_e==="0"?o[0].bike+=Number(ne.properties[oe]):_e==="1"?o[1].bike+=Number(ne.properties[oe]):_e==="2"?o[2].bike+=Number(ne.properties[oe]):_e==="3"&&(o[3].bike+=Number(ne.properties[oe])):Te==="2"&&be==="0"&&Se==="-1"&&te==="-1"?_e==="0"?o[0].car+=Number(ne.properties[oe]):_e==="1"?o[1].car+=Number(ne.properties[oe]):_e==="2"?o[2].car+=Number(ne.properties[oe]):_e==="3"&&(o[3].car+=Number(ne.properties[oe])):Te==="3"&&be==="0"&&Se==="-1"&&te==="-1"&&(_e==="0"?o[0].publicTransit+=Number(ne.properties[oe]):_e==="1"?o[1].publicTransit+=Number(ne.properties[oe]):_e==="2"?o[2].publicTransit+=Number(ne.properties[oe]):_e==="3"&&(o[3].publicTransit+=Number(ne.properties[oe])))})});const x=["walk","bike","car","publicTransit"],T=d3.stack().keys(x)(o),P={top:10,right:40,bottom:40,left:70},I=240,q=100,U=180,G=a.append("svg").attr("width",I+P.left+P.right).attr("height",q+P.top+P.bottom).append("g").attr("transform",`translate(${P.left},${P.top})`),D=d3.scaleBand().domain(o.map(ne=>ne.timePeriod)).range([0,I]).padding(.1),F=d3.scaleLinear().domain([0,d3.max(T[T.length-1],ne=>ne[1])]).nice().range([q,0]),V=d3.scaleOrdinal().domain(x).range(["#f24726","#fac710","#2d9bf0","#0263b9"]);G.append("g").selectAll("g").data(T).join("g").attr("fill",ne=>V(ne.key)).selectAll("rect").data(ne=>ne).join("rect").attr("x",(ne,oe)=>D(o[oe].timePeriod)).attr("y",ne=>F(ne[1])).attr("height",ne=>F(ne[0])-F(ne[1])).attr("width",D.bandwidth()),G.append("g").attr("transform",`translate(0,${q})`).call(d3.axisBottom(D)),G.append("g").call(d3.axisLeft(F).ticks(null,"s"));const z=G.append("g").attr("class","legend").attr("transform",`translate(${P.left}, ${U-P.bottom+30})`).selectAll(".legend-item").data(x).enter().append("g").attr("class","legend-item").attr("transform",(ne,oe)=>`translate(${oe*60}, 0)`).attr("stroke","none");z.append("rect").attr("x",-80).attr("y",-20).attr("width",10).attr("height",10).style("fill",ne=>V(ne)),z.append("text").attr("x",-65).attr("y",-10).text(ne=>ne).attr("font-size","10px")},w_=(e,t)=>{const n=t.current;if(!n)return;const a=d3.select("#graph-container-weekday");a.html("");const c=[];n.queryRenderedFeatures({layers:["mobility-Street-Detailed","mobility-Block-Detailed"]}).forEach(te=>{const he=te.properties.object_id;e.current.has(he)&&c.push({type:"Feature",geometry:te.geometry,properties:te.properties})});let o=[{timePeriod:"Morning",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Breakfast",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Lunch",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Afternoon",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Dinner",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Night",walk:0,bike:0,car:0,publicTransit:0}],v=[{timePeriod:"Morning",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Breakfast",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Lunch",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Afternoon",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Dinner",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Night",walk:0,bike:0,car:0,publicTransit:0}];const x=[{timePeriod:"Early Morning",walk:225.31,bike:44.53,car:1766.11,publicTransit:1508.7},{timePeriod:"Morning",walk:3207.24,bike:378.92,car:20038.77,publicTransit:6659.61},{timePeriod:"Lunch",walk:2306.27,bike:316.9,car:13787.66,publicTransit:7026.34},{timePeriod:"Afternoon",walk:1359.1,bike:186.25,car:9242.15,publicTransit:6118.57},{timePeriod:"Evening",walk:1685.12,bike:331.32,car:12511.29,publicTransit:10306.86},{timePeriod:"Night",walk:263.57,bike:51.43,car:2276.55,publicTransit:2076.8}];e.current.size===0&&(o=[...x]),c.length>0&&c.forEach(te=>{Object.keys(te.properties).forEach(he=>{const[Oe,je,Ce,ke,$e,Ze]=he.split("_");Ce==="0"&&je==="1"&&$e==="-1"&&Ze==="-1"?ke==="-1"?o[0].walk+=Number(te.properties[he]):ke==="1"?o[1].walk+=Number(te.properties[he]):ke==="2"?o[2].walk+=Number(te.properties[he]):ke==="3"?o[3].walk+=Number(te.properties[he]):ke==="4"?o[4].walk+=Number(te.properties[he]):ke==="5"&&(o[5].walk+=Number(te.properties[he])):Ce==="1"&&je==="1"&&$e==="-1"&&Ze==="-1"?ke==="0"?o[0].bike+=Number(te.properties[he]):ke==="1"?o[1].bike+=Number(te.properties[he]):ke==="2"?o[2].bike+=Number(te.properties[he]):ke==="3"?o[3].bike+=Number(te.properties[he]):ke==="4"?o[4].bike+=Number(te.properties[he]):ke==="5"&&(o[5].bike+=Number(te.properties[he])):Ce==="2"&&je==="1"&&$e==="-1"&&Ze==="-1"?ke==="0"?o[0].car+=Number(te.properties[he]):ke==="1"?o[1].car+=Number(te.properties[he]):ke==="2"?o[2].car+=Number(te.properties[he]):ke==="3"?o[3].car+=Number(te.properties[he]):ke==="4"?o[4].car+=Number(te.properties[he]):ke==="5"&&(o[5].car+=Number(te.properties[he])):Ce==="3"&&je==="1"&&$e==="-1"&&Ze==="-1"&&(ke==="0"?o[0].publicTransit+=Number(te.properties[he]):ke==="1"?o[1].publicTransit+=Number(te.properties[he]):ke==="2"?o[2].publicTransit+=Number(te.properties[he]):ke==="3"?o[3].publicTransit+=Number(te.properties[he]):ke==="4"?o[4].publicTransit+=Number(te.properties[he]):ke==="5"&&(o[5].publicTransit+=Number(te.properties[he])))})}),c.length>0&&c.forEach(te=>{Object.keys(te.properties).forEach(he=>{const[Oe,je,Ce,ke,$e,Ze]=he.split("_");Ce==="0"&&je==="0"&&$e==="-1"&&Ze==="-1"?ke==="-1"?v[0].walk+=Number(te.properties[he]):ke==="1"?v[1].walk+=Number(te.properties[he]):ke==="2"?v[2].walk+=Number(te.properties[he]):ke==="3"?v[3].walk+=Number(te.properties[he]):ke==="4"?v[4].walk+=Number(te.properties[he]):ke==="5"&&(v[5].walk+=Number(te.properties[he])):Ce==="1"&&je==="0"&&$e==="-1"&&Ze==="-1"?ke==="0"?v[0].bike+=Number(te.properties[he]):ke==="1"?v[1].bike+=Number(te.properties[he]):ke==="2"?v[2].bike+=Number(te.properties[he]):ke==="3"?v[3].bike+=Number(te.properties[he]):ke==="4"?v[4].bike+=Number(te.properties[he]):ke==="5"&&(v[5].bike+=Number(te.properties[he])):Ce==="2"&&je==="0"&&$e==="-1"&&Ze==="-1"?ke==="0"?v[0].car+=Number(te.properties[he]):ke==="1"?v[1].car+=Number(te.properties[he]):ke==="2"?v[2].car+=Number(te.properties[he]):ke==="3"?v[3].car+=Number(te.properties[he]):ke==="4"?v[4].car+=Number(te.properties[he]):ke==="5"&&(v[5].car+=Number(te.properties[he])):Ce==="3"&&je==="0"&&$e==="-1"&&Ze==="-1"&&(ke==="0"?v[0].publicTransit+=Number(te.properties[he]):ke==="1"?v[1].publicTransit+=Number(te.properties[he]):ke==="2"?v[2].publicTransit+=Number(te.properties[he]):ke==="3"?v[3].publicTransit+=Number(te.properties[he]):ke==="4"?v[4].publicTransit+=Number(te.properties[he]):ke==="5"&&(v[5].publicTransit+=Number(te.properties[he])))})}),parseInt(o.reduce((te,he)=>te+he.walk,0))+parseInt(v.reduce((te,he)=>te+he.walk,0)),parseInt(o.reduce((te,he)=>te+he.bike,0))+parseInt(v.reduce((te,he)=>te+he.bike,0)),parseInt(o.reduce((te,he)=>te+he.car,0))+parseInt(v.reduce((te,he)=>te+he.car,0)),parseInt(o.reduce((te,he)=>te+he.publicTransit,0))+parseInt(v.reduce((te,he)=>te+he.publicTransit,0));const E=["walk","bike","car","publicTransit"],P=d3.stack().keys(E)(o),I=340,q=225,U={top:40,right:40,bottom:50,left:70},G=I-U.left-U.right,D=q-U.top-U.bottom,F=a.append("svg").attr("width",I).attr("height",q);F.append("text").attr("class","graph-title").attr("x",I/2).attr("y",U.top-25).attr("font-size","14px").attr("text-anchor","middle").text("Weekday Trip Volume and Mode Split"),F.append("text").attr("class","graph-title").attr("x",30).attr("y",U.top,0).attr("font-size","9px").attr("text-anchor","middle").text("Time Periods"),F.append("text").attr("class","graph-title").attr("x",G+90).attr("y",D+70).attr("font-size","9px").attr("text-anchor","middle").text("Number of Trips");const V=F.append("g").attr("transform",`translate(${U.left}, ${U.top})`),B=d3.scaleLinear().domain([0,d3.max(P,te=>d3.max(te,he=>he[1]))]).range([0,G]),z=d3.scaleBand().domain(o.map(te=>te.timePeriod)).range([0,D]).padding(.3),ne=d3.scaleOrdinal().domain(E).range(["#f24726","#fac710","#2d9bf0","#0263b9"]);V.selectAll("g").data(P).enter().append("g").attr("fill",te=>ne(te.key)).selectAll("rect").data(te=>te).enter().append("rect").attr("y",te=>z(te.data.timePeriod)).attr("x",te=>B(te[0])).attr("height",z.bandwidth()).attr("width",te=>B(te[1])-B(te[0]));const pe=d3.axisLeft(z);V.append("g").call(pe);const be=5,Te=d3.axisBottom(B).ticks(be);V.append("g").attr("transform",`translate(0, ${D})`).call(Te),F.append("text").attr("x",I/2).attr("y",q).attr("text-anchor","middle"),F.append("text").attr("transform","rotate(-90)").attr("x",-(q/2)).attr("y",10).attr("text-anchor","middle");const Se=F.append("g").attr("class","legend").attr("transform",`translate(${U.left}, ${q-U.bottom+30})`).selectAll(".legend-item").data(E).enter().append("g").attr("class","legend-item").attr("transform",(te,he)=>`translate(${he*60}, 0)`).attr("stroke","none");Se.append("rect").attr("x",0).attr("y",10).attr("width",10).attr("height",10).style("fill",te=>ne(te)),Se.append("text").attr("x",15).attr("y",20).text(te=>te).attr("font-size","10px")},S_=(e,t)=>{const n=t.current;if(!n)return;const a=d3.select("#graph-container-weekend");a.html("");const c=[];n.queryRenderedFeatures({layers:["mobility-Street-Detailed","mobility-Block-Detailed"]}).forEach(Se=>{const te=Se.properties.object_id;e.current.has(te)&&c.push({type:"Feature",geometry:Se.geometry,properties:Se.properties})});let o=[{timePeriod:"Morning",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Breakfast",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Lunch",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Afternoon",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Dinner",walk:0,bike:0,car:0,publicTransit:0},{timePeriod:"Night",walk:0,bike:0,car:0,publicTransit:0}];const v=[{timePeriod:"Early Morning",walk:196.42,bike:44.66,car:1591.73,publicTransit:1473.78},{timePeriod:"Morning",walk:3069.64,bike:394.12,car:20284.15,publicTransit:6109.5},{timePeriod:"Lunch",walk:3000.93,bike:416.66,car:13787.66,publicTransit:9402.27},{timePeriod:"Afternoon",walk:1331.69,bike:196.68,car:19540.22,publicTransit:6137.72},{timePeriod:"Evening",walk:1916.97,bike:373.59,car:15200.76,publicTransit:11944.84},{timePeriod:"Night",walk:498.61,bike:109.18,car:4576.76,publicTransit:3883.33}];e.current.size===0&&(o=[...v]),c.length>0&&c.forEach(Se=>{Object.keys(Se.properties).forEach(te=>{const[he,Oe,je,Ce,ke,$e]=te.split("_");je==="0"&&Oe==="0"&&ke==="-1"&&$e==="-1"?Ce==="-1"?o[0].walk+=Number(Se.properties[te]):Ce==="1"?o[1].walk+=Number(Se.properties[te]):Ce==="2"?o[2].walk+=Number(Se.properties[te]):Ce==="3"?o[3].walk+=Number(Se.properties[te]):Ce==="4"?o[4].walk+=Number(Se.properties[te]):Ce==="5"&&(o[5].walk+=Number(Se.properties[te])):je==="1"&&Oe==="0"&&ke==="-1"&&$e==="-1"?Ce==="0"?o[0].bike+=Number(Se.properties[te]):Ce==="1"?o[1].bike+=Number(Se.properties[te]):Ce==="2"?o[2].bike+=Number(Se.properties[te]):Ce==="3"?o[3].bike+=Number(Se.properties[te]):Ce==="4"?o[4].bike+=Number(Se.properties[te]):Ce==="5"&&(o[5].bike+=Number(Se.properties[te])):je==="2"&&Oe==="0"&&ke==="-1"&&$e==="-1"?Ce==="0"?o[0].car+=Number(Se.properties[te]):Ce==="1"?o[1].car+=Number(Se.properties[te]):Ce==="2"?o[2].car+=Number(Se.properties[te]):Ce==="3"?o[3].car+=Number(Se.properties[te]):Ce==="4"?o[4].car+=Number(Se.properties[te]):Ce==="5"&&(o[5].car+=Number(Se.properties[te])):je==="3"&&Oe==="0"&&ke==="-1"&&$e==="-1"&&(Ce==="0"?o[0].publicTransit+=Number(Se.properties[te]):Ce==="1"?o[1].publicTransit+=Number(Se.properties[te]):Ce==="2"?o[2].publicTransit+=Number(Se.properties[te]):Ce==="3"?o[3].publicTransit+=Number(Se.properties[te]):Ce==="4"?o[4].publicTransit+=Number(Se.properties[te]):Ce==="5"&&(o[5].publicTransit+=Number(Se.properties[te])))})});const x=["walk","bike","car","publicTransit"],T=d3.stack().keys(x)(o),P=340,I=225,q={top:40,right:40,bottom:50,left:70},U=P-q.left-q.right,G=I-q.top-q.bottom,D=a.append("svg").attr("width",P).attr("height",I);D.append("text").attr("class","graph-title").attr("x",P/2).attr("y",q.top-22).attr("font-size","14px").attr("text-anchor","middle").text("Weekend Trip Volume and Mode Split"),D.append("text").attr("class","graph-title").attr("x",30).attr("y",q.top,10).attr("font-size","9px").attr("text-anchor","middle").text("Time Periods"),D.append("text").attr("class","graph-title").attr("x",U+90).attr("y",G+70).attr("font-size","9px").attr("text-anchor","middle").text("Number of Trips");const F=D.append("g").attr("transform",`translate(${q.left}, ${q.top})`),V=d3.scaleLinear().domain([0,d3.max(T,Se=>d3.max(Se,te=>te[1]))]).range([0,U]),B=d3.scaleBand().domain(o.map(Se=>Se.timePeriod)).range([0,G]).padding(.3),z=d3.scaleOrdinal().domain(x).range(["#f24726","#fac710","#2d9bf0","#0263b9"]);F.selectAll("g").data(T).enter().append("g").attr("fill",Se=>z(Se.key)).selectAll("rect").data(Se=>Se).enter().append("rect").attr("y",Se=>B(Se.data.timePeriod)).attr("x",Se=>V(Se[0])).attr("height",B.bandwidth()).attr("width",Se=>V(Se[1])-V(Se[0]));const oe=d3.axisLeft(B);F.append("g").call(oe);const pe=5,be=d3.axisBottom(V).ticks(pe);F.append("g").attr("class","x-axis").attr("transform",`translate(0, ${G})`).call(be),D.append("text").attr("x",P/2).attr("y",I).attr("text-anchor","middle"),D.append("text").attr("transform","rotate(-90)").attr("x",-(I/2)).attr("y",20).attr("text-anchor","middle");const _e=D.append("g").attr("class","legend").attr("transform",`translate(${q.left}, ${I-q.bottom+30})`).selectAll(".legend-item").data(x).enter().append("g").attr("class","legend-item").attr("transform",(Se,te)=>`translate(${te*60}, 0)`).attr("stroke","none");_e.append("rect").attr("x",0).attr("y",10).attr("width",10).attr("height",10).style("fill",Se=>z(Se)),_e.append("text").attr("x",15).attr("y",20).text(Se=>Se).attr("font-size","10px")},U6=(e,t,n)=>{const a=t.current;a&&d3.json(n).then(c=>{const f=d3.select("#graph-container-energybuildingsenario");f.html("");let o=0,v=Array.from({length:12},($e,Ze)=>({Month:Ze+1,equipment:0,lighting:0,hotWater:0,pv:0,heating:0,cooling:0}));const x=c.features[0].properties["Gas[kWh][Mth]"];c.features[0].properties["Electricity[kWh][Mth]"];const E=c.features[0].properties["Heating[KWh][Mth]"],T=c.features[0].properties["Cooling[KWh][Mth]"],P=c.features[0].properties["Equipment[KWh][Mth]"],I=c.features[0].properties["PV[KWh][Mth]"],q=c.features[0].properties["Lighting[KWh][Mth]"],U=c.features[0].properties["HotWater[KWh][Mth]"],G=x.map(($e,Ze)=>({Month:Ze+1,heating:E[Ze],cooling:T[Ze],equipment:P[Ze],lighting:q[Ze],hotWater:U[Ze],pv:I[Ze]})),D=G.reduce(($e,Ze)=>({heating:$e.heating+Ze.heating,cooling:$e.cooling+Ze.cooling,equipment:$e.equipment+Ze.equipment,lighting:$e.lighting+Ze.lighting,hotWater:$e.hotWater+Ze.hotWater,pv:$e.pv+Ze.pv}),{heating:0,cooling:0,equipment:0,lighting:0,hotWater:0,pv:0});if(Object.values(D).reduce(($e,Ze)=>$e+Ze,0),e.current.size===0)parseInt(c.features[0].properties.Area_SQM_ESL),parseInt(c.features[0].properties["Cost[$][Yr]"]),o=parseInt(c.features[0].properties["CO2[kg][Yr]"]),v=[...G];else{const $e=Array.from(e.current),Ze=[];a.queryRenderedFeatures({layers:["energy-Building"]}).forEach(Pe=>{const Ge=Pe.properties.ID_ESL;$e.includes(Ge)&&Ze.push({type:"Feature",geometry:Pe.geometry,properties:Pe.properties})}),Ze.forEach(Pe=>{const Ge=JSON.parse(Pe.properties["Heating[KWh][Mth]"]),st=JSON.parse(Pe.properties["Cooling[KWh][Mth]"]),Re=JSON.parse(Pe.properties["Equipment[KWh][Mth]"]),qe=JSON.parse(Pe.properties["Lighting[KWh][Mth]"]),Kt=JSON.parse(Pe.properties["HotWater[KWh][Mth]"]),It=JSON.parse(Pe.properties["PV[KWh][Mth]"]),Ot=JSON.parse(Pe.properties["CO2[kg][Yr]"]);JSON.parse(Pe.properties["Cost[$][Yr]"]),JSON.parse(Pe.properties.Area_SQM_ESL),console.log("co2Data:",Ot),Ge.forEach((Et,nr)=>{const Zt=nr;v[Zt].heating+=parseFloat(Et),v[Zt].cooling+=parseFloat(st[nr]),v[Zt].equipment+=parseFloat(Re[nr]),v[Zt].lighting+=parseFloat(qe[nr]),v[Zt].hotWater+=parseFloat(Kt[nr]),v[Zt].pv+=parseFloat(It[nr])}),o+=parseInt(Ot),console.log("totalCo2:",o)})}const F=v.reduce(($e,Ze)=>({heating:$e.heating+Ze.heating,cooling:$e.cooling+Ze.cooling,equipment:$e.equipment+Ze.equipment,lighting:$e.lighting+Ze.lighting,hotWater:$e.hotWater+Ze.hotWater,pv:$e.pv+Ze.pv}),{heating:0,cooling:0,equipment:0,lighting:0,hotWater:0,pv:0});Object.values(F).reduce(($e,Ze)=>$e+Ze,0);const B=d3.stack().keys(["equipment","lighting","hotWater","PV","cooling","heating"]).order(d3.stackOrderNone).offset(d3.stackOffsetNone)(v),z=360,ne=240,oe={top:30,right:20,bottom:70,left:70},pe=z-oe.left-oe.right,be=ne-oe.top-oe.bottom,Te=f.append("svg").attr("width",z).attr("height",ne),_e=Te.append("g").attr("transform",`translate(${oe.left}, ${oe.top})`),Se=d3.max(v,$e=>d3.sum(Object.values($e).slice(1))),te=d3.scaleBand().domain(v.map($e=>$e.Month)).rangeRound([0,pe]).padding(.1),he=d3.scaleLinear().domain([0,Se]).range([be,0]),Oe=d3.scaleOrdinal().domain(["equipment","lighting","hotWater","PV","cooling","heating"]).range(["#959595","#f2e75c","#eec176","#9C27B0","#6faadd","#cf5867"]);_e.selectAll(".stack").data(B).enter().append("g").attr("class","stack").attr("fill",$e=>Oe($e.key)).selectAll("rect").data($e=>$e).enter().append("rect").attr("x",$e=>te($e.data.Month)).attr("y",$e=>he($e[1])).attr("height",$e=>he($e[0])-he($e[1])).attr("width",te.bandwidth());const Ce=Te.append("g").attr("class","legend").attr("transform",`translate(${oe.left}, ${ne-oe.bottom+20})`),ke=100;Oe.domain().forEach(($e,Ze)=>{const bt=Ce.append("g").attr("transform",`translate(${Ze%3*ke}, ${Math.floor(Ze/3)*20})`);bt.append("rect").attr("x",0).attr("y",20).attr("width",10).attr("height",10).attr("fill",Oe($e)),bt.append("text").attr("x",15).attr("y",25).attr("dy","0.35em").style("font-size","10px").text($e)})})},$6=(e,t,n)=>{const a=t.current;a&&d3.json(n).then(c=>{const f=d3.select("#graph-container-energysummaryuse");f.html("");let o=0,v=0,x=0,E=Array.from({length:12},(Re,qe)=>({Month:qe+1,equipment:0,lighting:0,hotWater:0,pv:0,heating:0,cooling:0}));const T=c.features[0].properties["Gas[kWh][Mth]"];c.features[0].properties["Electricity[kWh][Mth]"];const P=c.features[0].properties["Heating[KWh][Mth]"],I=c.features[0].properties["Cooling[KWh][Mth]"],q=c.features[0].properties["Equipment[KWh][Mth]"],U=c.features[0].properties["PV[KWh][Mth]"],G=c.features[0].properties["Lighting[KWh][Mth]"],D=c.features[0].properties["HotWater[KWh][Mth]"],F=T.map((Re,qe)=>({Month:qe+1,heating:P[qe],cooling:I[qe],equipment:q[qe],lighting:G[qe],hotWater:D[qe],pv:U[qe]})),V=F.reduce((Re,qe)=>({heating:Re.heating+qe.heating,cooling:Re.cooling+qe.cooling,equipment:Re.equipment+qe.equipment,lighting:Re.lighting+qe.lighting,hotWater:Re.hotWater+qe.hotWater,pv:Re.pv+qe.pv}),{heating:0,cooling:0,equipment:0,lighting:0,hotWater:0,pv:0}),B=Object.values(V).reduce((Re,qe)=>Re+qe,0);if(e.current.size===0)x=parseInt(c.features[0].properties.Area_SQM_ESL),v=parseInt(c.features[0].properties["Cost[$][Yr]"]),o=parseInt(c.features[0].properties["CO2[kg][Yr]"]),E=[...F];else{const Re=Array.from(e.current),qe=[];a.queryRenderedFeatures({layers:["energy-Building"]}).forEach(It=>{const Ot=It.properties.ID_ESL;Re.includes(Ot)&&qe.push({type:"Feature",geometry:It.geometry,properties:It.properties})}),qe.forEach(It=>{const Ot=JSON.parse(It.properties["Heating[KWh][Mth]"]),Et=JSON.parse(It.properties["Cooling[KWh][Mth]"]),nr=JSON.parse(It.properties["Equipment[KWh][Mth]"]),Zt=JSON.parse(It.properties["Lighting[KWh][Mth]"]),Yt=JSON.parse(It.properties["HotWater[KWh][Mth]"]),at=JSON.parse(It.properties["PV[KWh][Mth]"]),Dt=JSON.parse(It.properties["CO2[kg][Yr]"]),er=JSON.parse(It.properties["Cost[$][Yr]"]),Rr=JSON.parse(It.properties.Area_SQM_ESL);console.log("co2Data:",Dt),Ot.forEach((Nr,tr)=>{const Vr=tr;E[Vr].heating+=parseFloat(Nr),E[Vr].cooling+=parseFloat(Et[tr]),E[Vr].equipment+=parseFloat(nr[tr]),E[Vr].lighting+=parseFloat(Zt[tr]),E[Vr].hotWater+=parseFloat(Yt[tr]),E[Vr].pv+=parseFloat(at[tr])}),o+=parseInt(Dt),v+=parseInt(er),x+=Rr,console.log("totalCo2:",o)})}const z=E.reduce((Re,qe)=>({heating:Re.heating+qe.heating,cooling:Re.cooling+qe.cooling,equipment:Re.equipment+qe.equipment,lighting:Re.lighting+qe.lighting,hotWater:Re.hotWater+qe.hotWater,pv:Re.pv+qe.pv}),{heating:0,cooling:0,equipment:0,lighting:0,hotWater:0,pv:0}),ne=Object.values(z).reduce((Re,qe)=>Re+qe,0);d3.stack().keys(["equipment","lighting","hotWater","PV","cooling","heating"]).order(d3.stackOrderNone).offset(d3.stackOffsetNone)(E);const pe=380,be=200,Te={top:170,right:50,bottom:100,left:10},_e=pe-Te.left-Te.right,te=f.append("svg").attr("width",pe).attr("height",be).append("g").attr("transform",`translate(${Te.left}, ${Te.top})`);var he=Te.top-300,Oe=100,je=30,Ce=5,ke=5,$e=[{x:0,y:he,width:Oe,height:je,fill:"#89c8a6",rx:Ce,ry:ke,value:v.toLocaleString(),title:"Cost",unit:"[$/Yr]"},{x:110,y:he,width:Oe,height:je,fill:"#d0df5a",rx:Ce,ry:ke,value:ne.toLocaleString(),title:"Total Energy",unit:"[kWh/Yr]"},{x:220,y:he,width:Oe,height:je,fill:"#f2e75c",rx:Ce,ry:ke,value:o.toLocaleString(),title:"CO2",unit:"[kg/Yr]"}],Ze=[{x:0,y:he+je+50,width:Oe,height:je,fill:"#D8E0BB",rx:Ce,ry:ke,value:x.toLocaleString(),title:"Area",unit:"[SQM]"},{x:110,y:he+je+50,width:Oe,height:je,fill:"#B6CEC7",rx:Ce,ry:ke,value:parseInt(ne/x).toLocaleString(),title:"Normalized Energy",unit:"[kWh/SQM/Yr]"},{x:220,y:he+je+50,width:Oe,height:je,fill:"#86A3C3",rx:Ce,ry:ke,value:(ne/B).toFixed(4),title:"Percentage",unit:"[%]"}],bt=te.selectAll(".rectangle").data($e),Pe=te.selectAll(".rectangle").data(Ze),Ge=bt.enter().append("g").attr("class","rectangle"),st=Pe.enter().append("g").attr("class","rectangle");Ge.append("text").attr("class","graph-title").attr("x",_e/2).attr("y",Te.top/2-240).attr("font-size","14px").attr("text-anchor","middle").attr("font-family","Open Sans","sans-serif").text("Energy Use Summary"),Ge.append("rect").attr("x",Re=>Re.x).attr("y",Re=>Re.y).attr("width",Re=>Re.width).attr("height",Re=>Re.height).attr("fill",Re=>Re.fill).attr("rx",Re=>Re.rx).attr("ry",Re=>Re.ry),Ge.append("text").attr("x",Re=>Re.x+Re.width/2).attr("y",Re=>Re.y+Re.height/2).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("font-size","12px").style("font-weight","bold").text(Re=>Re.value),Ge.append("text").attr("x",Re=>Re.x).attr("y",Re=>Re.y+Re.height+12).attr("text-anchor","left").attr("dominant-baseline","middle").attr("font-size","11px").style("font-weight","normal").text(Re=>Re.title),Ge.append("text").attr("x",Re=>Re.x).attr("y",Re=>Re.y+Re.height+24).attr("text-anchor","left").attr("dominant-baseline","middle").attr("font-size","8px").style("font-weight","light").attr("fill","gray").text(Re=>Re.unit),st.append("rect").attr("x",Re=>Re.x).attr("y",Re=>Re.y).attr("width",Re=>Re.width).attr("height",Re=>Re.height).attr("fill",Re=>Re.fill).attr("rx",Re=>Re.rx).attr("ry",Re=>Re.ry),st.append("text").attr("x",Re=>Re.x+Re.width/2).attr("y",Re=>Re.y+Re.height/2).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("font-size","12px").style("font-weight","bold").text(Re=>Re.value),st.append("text").attr("x",Re=>Re.x).attr("y",Re=>Re.y+Re.height+12).attr("text-anchor","left").attr("dominant-baseline","middle").attr("font-size","11px").style("font-weight","normal").text(Re=>Re.title),st.append("text").attr("x",Re=>Re.x).attr("y",Re=>Re.y+Re.height+24).attr("text-anchor","left").attr("dominant-baseline","middle").attr("font-size","8px").style("font-weight","light").attr("fill","gray").text(Re=>Re.unit)})},RE=(e,t,n)=>{const a=t.current;a&&d3.json(n).then(c=>{const f=d3.select("#graph-container-energyenduse");f.html("");let o=0,v=Array.from({length:12},(Pe,Ge)=>({Month:Ge+1,equipment:0,lighting:0,hotWater:0,pv:0,heating:0,cooling:0}));const x=c.features[0].properties["Gas[kWh][Mth]"];c.features[0].properties["Electricity[kWh][Mth]"];const E=c.features[0].properties["Heating[KWh][Mth]"],T=c.features[0].properties["Cooling[KWh][Mth]"],P=c.features[0].properties["Equipment[KWh][Mth]"],I=c.features[0].properties["PV[KWh][Mth]"],q=c.features[0].properties["Lighting[KWh][Mth]"],U=c.features[0].properties["HotWater[KWh][Mth]"],G=x.map((Pe,Ge)=>({Month:Ge+1,heating:E[Ge],cooling:T[Ge],equipment:P[Ge],lighting:q[Ge],hotWater:U[Ge],pv:I[Ge]})),D=G.reduce((Pe,Ge)=>({heating:Pe.heating+Ge.heating,cooling:Pe.cooling+Ge.cooling,equipment:Pe.equipment+Ge.equipment,lighting:Pe.lighting+Ge.lighting,hotWater:Pe.hotWater+Ge.hotWater,pv:Pe.pv+Ge.pv}),{heating:0,cooling:0,equipment:0,lighting:0,hotWater:0,pv:0});if(Object.values(D).reduce((Pe,Ge)=>Pe+Ge,0),e.current.size===0)parseInt(c.features[0].properties.Area_SQM_ESL),parseInt(c.features[0].properties["Cost[$][Yr]"]),o=parseInt(c.features[0].properties["CO2[kg][Yr]"]),v=[...G];else{const Pe=Array.from(e.current),Ge=[];a.queryRenderedFeatures({layers:["energy-Building"]}).forEach(Re=>{const qe=Re.properties.ID_ESL;Pe.includes(qe)&&Ge.push({type:"Feature",geometry:Re.geometry,properties:Re.properties})}),Ge.forEach(Re=>{const qe=JSON.parse(Re.properties["Heating[KWh][Mth]"]),Kt=JSON.parse(Re.properties["Cooling[KWh][Mth]"]),It=JSON.parse(Re.properties["Equipment[KWh][Mth]"]),Ot=JSON.parse(Re.properties["Lighting[KWh][Mth]"]),Et=JSON.parse(Re.properties["HotWater[KWh][Mth]"]),nr=JSON.parse(Re.properties["PV[KWh][Mth]"]),Zt=JSON.parse(Re.properties["CO2[kg][Yr]"]);JSON.parse(Re.properties["Cost[$][Yr]"]),JSON.parse(Re.properties.Area_SQM_ESL),console.log("co2Data:",Zt),qe.forEach((Yt,at)=>{const Dt=at;v[Dt].heating+=parseFloat(Yt),v[Dt].cooling+=parseFloat(Kt[at]),v[Dt].equipment+=parseFloat(It[at]),v[Dt].lighting+=parseFloat(Ot[at]),v[Dt].hotWater+=parseFloat(Et[at]),v[Dt].pv+=parseFloat(nr[at])}),o+=parseInt(Zt),console.log("totalCo2:",o)})}const F=v.reduce((Pe,Ge)=>({heating:Pe.heating+Ge.heating,cooling:Pe.cooling+Ge.cooling,equipment:Pe.equipment+Ge.equipment,lighting:Pe.lighting+Ge.lighting,hotWater:Pe.hotWater+Ge.hotWater,pv:Pe.pv+Ge.pv}),{heating:0,cooling:0,equipment:0,lighting:0,hotWater:0,pv:0});Object.values(F).reduce((Pe,Ge)=>Pe+Ge,0);const B=d3.stack().keys(["equipment","lighting","hotWater","PV","cooling","heating"]).order(d3.stackOrderNone).offset(d3.stackOffsetNone)(v),z=340,ne=225,oe={top:30,right:20,bottom:80,left:40},pe=z-oe.left-oe.right,be=ne-oe.top-oe.bottom,Te=f.append("svg").attr("width",z).attr("height",ne),_e=Te.append("g").attr("transform",`translate(${oe.left}, ${oe.top})`);_e.append("text").attr("class","graph-title").attr("x",pe/2).attr("y",oe.top/2-30).attr("font-size","14px").attr("text-anchor","middle").text("Energy Use by End Use"),_e.append("text").attr("class","graph-title").attr("x",pe+1).attr("y",be+30).attr("font-size","10px").attr("text-anchor","middle").text("Month"),_e.append("text").attr("class","graph-title").attr("x",-15).attr("y",oe.top-40).attr("font-size","10px").attr("text-anchor","middle").text("kWh");const Se=d3.max(v,Pe=>d3.sum(Object.values(Pe).slice(1))),te=d3.scaleLinear().domain([1,12]).range([0,pe]),he=d3.scaleLinear().domain([0,Se]).range([be,0]),Oe=d3.scaleOrdinal().domain(["equipment","lighting","hotWater","PV","cooling","heating"]).range(["#959595","#f2e75c","#eec176","#9C27B0","#6faadd","#cf5867"]);_e.append("g").attr("class","y-axis").call(d3.axisLeft(he).ticks(8).tickFormat(Pe=>{let Ge=1,st="";return Pe>=1e9?(Ge=1e9,st="G"):Pe>=1e6?(Ge=1e6,st="M"):Pe>=1e3&&(Ge=1e3,st="K"),Pe/Ge+st})),_e.selectAll(".stack").data(B).enter().append("g").attr("class","stack").attr("fill",Pe=>Oe(Pe.key)).selectAll("rect").data(Pe=>Pe).enter().append("rect").attr("x",Pe=>te(Pe.data.Month)).attr("y",Pe=>he(Pe[1])).attr("height",Pe=>he(Pe[0])-he(Pe[1])).attr("width",te(1)-te(0)-5),_e.append("g").attr("class","x-axis").attr("transform",`translate(0, ${be})`).call(d3.axisBottom(te).ticks(12).tickFormat(d3.format("d")));const Ce=_e.append("g").attr("class","reference-lines");_e.selectAll(".y-axis .tick").data().map(Pe=>+Pe).forEach(Pe=>{Ce.append("line").attr("x1",0).attr("x2",pe+25).attr("y1",he(Pe)).attr("y2",he(Pe)).attr("class","reference-line").style("stroke","grey").attr("stroke-width",.3).style("stroke-dasharray","4 4")});const Ze=Te.append("g").attr("class","legend").attr("transform",`translate(${oe.left}, ${ne-oe.bottom+20})`),bt=100;Oe.domain().forEach((Pe,Ge)=>{const st=Ze.append("g").attr("transform",`translate(${Ge%3*bt}, ${Math.floor(Ge/3)*20})`);st.append("rect").attr("x",0).attr("y",20).attr("width",10).attr("height",10).attr("fill",Oe(Pe)),st.append("text").attr("x",15).attr("y",25).attr("dy","0.35em").style("font-size","10px").text(Pe)})})},V6=(e,t)=>{const n=t.current;if(!n)return;const a=d3.select("#graph-container-energyfueluse");a.html("");let c=[{month:1,gas:0,electricity:0},{month:2,gas:0,electricity:0},{month:3,gas:0,electricity:0},{month:4,gas:0,electricity:0},{month:5,gas:0,electricity:0},{month:6,gas:0,electricity:0},{month:7,gas:0,electricity:0},{month:8,gas:0,electricity:0},{month:9,gas:0,electricity:0},{month:10,gas:0,electricity:0},{month:11,gas:0,electricity:0},{month:12,gas:0,electricity:0}];const f=[{month:1,gas:292456832,electricity:37756},{month:2,gas:243212032,electricity:33694},{month:3,gas:214523040,electricity:36607},{month:4,gas:113816456,electricity:32627},{month:5,gas:40872760,electricity:36890},{month:6,gas:13437732,electricity:38806},{month:7,gas:5359225,electricity:43566},{month:8,gas:9691384,electricity:42551},{month:9,gas:28674048,electricity:35716},{month:10,gas:80831360,electricity:34014},{month:11,gas:158096176,electricity:34262},{month:12,gas:238814736,electricity:35995}];if(e.current.size===0)c=[...f];else{const _e=[];n.queryRenderedFeatures({layers:["energy-Building"]}).forEach(te=>{const he=te.properties.ID_ESL;e.current.has(he)&&_e.push({type:"Feature",geometry:te.geometry,properties:te.properties})}),c=_e.reduce((te,he)=>{const Oe=JSON.parse(he.properties["Gas[kWh][Mth]"]),je=JSON.parse(he.properties["Electricity[kWh][Mth]"]);return Oe.forEach((Ce,ke)=>{te[ke]||(te[ke]={month:ke+1,gas:0,electricity:0}),te[ke].gas+=Math.round(parseFloat(Ce)),te[ke].electricity+=Math.round(parseFloat(je[ke]))}),te},[])}const o=340,v=225,x={top:30,right:20,bottom:40,left:40},E=o-x.left-x.right,T=v-x.top-x.bottom,P=a.append("svg").attr("width",o).attr("height",v),I=P.append("g").attr("transform",`translate(${x.left}, ${x.top})`),q=d3.max(c,_e=>_e.gas),U=d3.max(c,_e=>_e.electricity),G=Math.max(q,U),D=d3.scaleLinear().domain([1,12]).range([0,E]),F=d3.scaleLinear().domain([0,G]).range([T,0]),V=d3.line().x(_e=>D(_e.month)).y(_e=>F(_e.gas)),B=d3.line().x(_e=>D(_e.month)).y(_e=>F(_e.electricity));I.append("g").attr("transform",`translate(0, ${T})`).call(d3.axisBottom(D)),I.append("g").attr("class","y-axis").call(d3.axisLeft(F).ticks(8).tickFormat(_e=>{let Se=1,te="";return _e>=1e9?(Se=1e9,te="G"):_e>=1e6?(Se=1e6,te="M"):_e>=1e3&&(Se=1e3,te="K"),_e/Se+te})),I.append("text").attr("class","graph-title").attr("x",E/2).attr("y",x.top-40).attr("font-size","14px").attr("text-anchor","middle").text("Energy Use by Fuel Use"),I.append("text").attr("class","graph-title").attr("x",E+1).attr("y",T+30).attr("font-size","10px").attr("text-anchor","middle").text("Month"),I.append("text").attr("class","graph-title").attr("x",-20).attr("y",x.top-40).attr("font-size","10px").attr("text-anchor","middle").text("kWh"),I.append("path").datum(c).attr("fill","none").attr("stroke","#FFB100").attr("stroke-width",2).attr("d",V),I.append("path").datum(c).attr("fill","none").attr("stroke","#1569C7").attr("stroke-width",2).attr("d",B);const z=I.append("g").attr("class","reference-lines");I.selectAll(".y-axis .tick").data().map(_e=>+_e).forEach(_e=>{z.append("line").attr("x1",0).attr("x2",E).attr("y1",F(_e)).attr("y2",F(_e)).attr("class","reference-line").style("stroke","grey").attr("stroke-width",.3).style("stroke-dasharray","4 4")});const pe=P.append("g").attr("class","legend").attr("transform",`translate(${x.left}, ${v-x.bottom})`),be=100,Te=35;pe.append("line").attr("x1",0).attr("y1",Te).attr("x2",30).attr("y2",Te).attr("stroke","#FFB100").attr("stroke-width",2),pe.append("text").attr("x",35).attr("y",Te).attr("dy","0.35em").style("font-size","10px").style("fill","black").text("Gas"),pe.append("line").attr("x1",be).attr("y1",Te).attr("x2",be+30).attr("y2",Te).attr("stroke","#1569C7").attr("stroke-width",2),pe.append("text").attr("x",be+35).attr("y",Te).attr("dy","0.35em").style("font-size","10px").style("fill","black").text("Electricity")},LE=(e,t)=>{const n=t.current;if(!n)return;const a=d3.select("#graph-container-energyone");a.html("");const c=[];n.queryRenderedFeatures({layers:["energy-Feeder"]}).forEach(Ce=>{const ke=Ce.properties.ID_ESL;e.current.has(ke)&&c.push({type:"Feature",geometry:Ce.geometry,properties:Ce.properties})});const o=c.reduce((Ce,ke)=>{const $e=JSON.parse(ke.properties.GasDemand_KWh),Ze=JSON.parse(ke.properties.ElectricityDemand_KWh);return console.log("gasData:",$e),$e.forEach((bt,Pe)=>{Ce[Pe]||(Ce[Pe]={hour:Pe+1,gas:0,electricity:0}),Ce[Pe].gas+=Math.round(bt),Ce[Pe].electricity+=Math.round(Ze[Pe])}),Ce},[]),v=1,x=168,E=o.filter((Ce,ke)=>ke>=v&&ke<=x),T=340,P=220,I={top:50,right:20,bottom:40,left:60},q=T-I.left-I.right,U=P-I.top-I.bottom,G=a.append("svg").attr("width",T).attr("height",P),D=G.append("g").attr("transform",`translate(${I.left}, ${I.top})`),F=d3.max(E,Ce=>Ce.gas),V=d3.max(E,Ce=>Ce.electricity),B=Math.max(F,V),z=d3.scaleLinear().domain([1,168]).range([0,q]),ne=d3.scaleLinear().domain([0,B]).range([U,0]),oe=d3.line().x(Ce=>z(Ce.hour)).y(Ce=>ne(Ce.gas)),pe=d3.line().x(Ce=>z(Ce.hour)).y(Ce=>ne(Ce.electricity)),be=[24,48,72,96,120,144],Te=d3.axisBottom(z).tickValues(be);D.append("g").attr("class","x-axis").attr("transform","translate(0,"+U+")").call(Te),D.append("g").attr("class","y-axis").call(d3.axisLeft(ne)),D.append("text").attr("class","graph-title").attr("x",q/2).attr("y",I.top-70).attr("font-size","13px").attr("text-anchor","middle").text("Energy Load of Winter Week").append("tspan").attr("font-size","10px").text(" (1.1-1.7)"),D.append("text").attr("class","graph-title").attr("x",-20).attr("y",I.top-60).attr("font-size","10px").attr("text-anchor","middle").text("kWh"),D.append("text").attr("class","graph-title").attr("x",q+8).attr("y",U+15).attr("font-size","10px").attr("text-anchor","middle").text("Hr");const _e=[24,48,72,96,120,144,168];D.selectAll(".vertical-line").data(_e).enter().append("line").attr("class","vertical-line").attr("x1",Ce=>z(Ce)).attr("x2",Ce=>z(Ce)).attr("y1",0).attr("y2",U).attr("stroke-width",1).style("stroke","black").style("stroke-dasharray","2");const Se=D.append("g").attr("class","reference-lines");D.selectAll(".y-axis .tick").data().map(Ce=>+Ce).forEach(Ce=>{Se.append("line").attr("x1",0).attr("x2",q).attr("y1",ne(Ce)).attr("y2",ne(Ce)).attr("class","reference-line").style("stroke","grey").attr("stroke-width",.3).style("stroke-dasharray","4 4")}),D.append("path").datum(E).attr("fill","none").attr("stroke","#FFB100").attr("stroke-width",2).attr("d",oe),D.append("path").datum(E).attr("fill","none").attr("stroke","#1569C7").attr("stroke-width",2).attr("d",pe);const Oe=G.append("g").attr("class","legend").attr("transform",`translate(${I.left}, ${P-I.bottom})`),je=100;Oe.append("line").attr("x1",0).attr("y1",30).attr("x2",30).attr("y2",30).attr("stroke","#FFBF00").attr("stroke-width",2),Oe.append("text").attr("x",35).attr("y",30).attr("dy","0.35em").style("font-size","10px").style("fill","black").text("Gas"),Oe.append("line").attr("x1",je).attr("y1",30).attr("x2",je+30).attr("y2",30).attr("stroke","#1569C7").attr("stroke-width",2),Oe.append("text").attr("x",je+35).attr("y",30).attr("dy","0.35em").style("font-size","10px").style("fill","black").text("Electricity")},zE=(e,t)=>{const n=t.current;if(!n)return;const a=d3.select("#graph-container-energytwo");a.html("");const c=[];n.queryRenderedFeatures({layers:["energy-Feeder"]}).forEach(Ce=>{const ke=Ce.properties.ID_ESL;e.current.has(ke)&&c.push({type:"Feature",geometry:Ce.geometry,properties:Ce.properties})});const o=c.reduce((Ce,ke)=>{const $e=JSON.parse(ke.properties.GasDemand_KWh),Ze=JSON.parse(ke.properties.ElectricityDemand_KWh);return $e.forEach((bt,Pe)=>{Ce[Pe]||(Ce[Pe]={hour:Pe+1,gas:0,electricity:0}),Ce[Pe].gas+=Math.round(bt),Ce[Pe].electricity+=Math.round(Ze[Pe])}),Ce},[]),v=5285,x=5453,E=o.filter((Ce,ke)=>ke>=v&&ke<=x),T=340,P=220,I={top:50,right:20,bottom:40,left:60},q=T-I.left-I.right,U=P-I.top-I.bottom,G=a.append("svg").attr("width",T).attr("height",P),D=G.append("g").attr("transform",`translate(${I.left}, ${I.top})`),F=d3.max(E,Ce=>Ce.gas),V=d3.max(E,Ce=>Ce.electricity),B=Math.max(F,V),z=d3.scaleLinear().domain([5285,5453]).range([0,q]),ne=d3.scaleLinear().domain([0,B]).range([U,0]),oe=d3.line().x(Ce=>z(Ce.hour)).y(Ce=>ne(Ce.gas)),pe=d3.line().x(Ce=>z(Ce.hour)).y(Ce=>ne(Ce.electricity)),be=[5309,5333,5357,5381,5405,5429],Te=d3.axisBottom(z).tickValues(be);D.append("g").attr("class","x-axis").attr("transform","translate(0,"+U+")").call(Te),D.append("g").attr("class","y-axis").call(d3.axisLeft(ne)),D.append("text").attr("class","graph-title").attr("x",q/2).attr("y",I.top-70).attr("font-size","13px").attr("text-anchor","middle").text("Energy Load of Summer Week").append("tspan").attr("font-size","10px").text(" (7.1-7.7)"),D.append("text").attr("class","graph-title").attr("x",-20).attr("y",I.top-60).attr("font-size","10px").attr("text-anchor","middle").text("kWh"),D.append("text").attr("class","graph-title").attr("x",q+8).attr("y",U+15).attr("font-size","10px").attr("text-anchor","middle").text("Hr");const _e=[5309,5333,5357,5381,5405,5429,5453];D.selectAll(".vertical-line").data(_e).enter().append("line").attr("class","vertical-line").attr("x1",Ce=>z(Ce)).attr("x2",Ce=>z(Ce)).attr("y1",0).attr("y2",U).attr("stroke-width",1).style("stroke","black").style("stroke-dasharray","2"),D.append("path").datum(E).attr("fill","none").attr("stroke","#FFB100").attr("stroke-width",2).attr("d",oe),D.append("path").datum(E).attr("fill","none").attr("stroke","#1569C7").attr("stroke-width",2).attr("d",pe);const Se=D.append("g").attr("class","reference-lines");D.selectAll(".y-axis .tick").data().map(Ce=>+Ce).forEach(Ce=>{Se.append("line").attr("x1",0).attr("x2",q).attr("y1",ne(Ce)).attr("y2",ne(Ce)).attr("class","reference-line").style("stroke","grey").attr("stroke-width",.3).style("stroke-dasharray","4 4")});const Oe=G.append("g").attr("class","legend").attr("transform",`translate(${I.left}, ${P-I.bottom})`),je=100;Oe.append("line").attr("x1",0).attr("y1",30).attr("x2",30).attr("y2",30).attr("stroke","#FFB100").attr("stroke-width",2),Oe.append("text").attr("x",35).attr("y",30).attr("dy","0.35em").style("font-size","10px").style("fill","black").text("Gas"),Oe.append("line").attr("x1",je).attr("y1",30).attr("x2",je+30).attr("y2",30).attr("stroke","#1569C7").attr("stroke-width",2),Oe.append("text").attr("x",je+35).attr("y",30).attr("dy","0.35em").style("font-size","10px").style("fill","black").text("Electricity")},DE=(e,t)=>{const n=t.current;if(!n)return;const a=d3.select("#graph-container-energythree");a.html("");const c=[];n.queryRenderedFeatures({layers:["energy-Feeder"]}).forEach(te=>{const he=te.properties.ID_ESL;e.current.has(he)&&c.push({type:"Feature",geometry:te.geometry,properties:te.properties})});const o=c.reduce((te,he)=>{const Oe=JSON.parse(he.properties.GasDemand_KWh),je=JSON.parse(he.properties.ElectricityDemand_KWh);return Oe.forEach((Ce,ke)=>{te[ke]||(te[ke]={hour:ke+1,gas:0,electricity:0}),te[ke].gas+=Math.round(Ce),te[ke].electricity+=Math.round(je[ke])}),te},[]),v=o.map(te=>({hour:te.hour,gas:te.gas,electricity:0})),x=o.map(te=>({hour:te.hour,gas:0,electricity:te.electricity}));v.sort((te,he)=>he.gas-te.gas),x.sort((te,he)=>he.electricity-te.electricity),o.forEach((te,he)=>{te.gas=v[he].gas,te.electricity=x[he].electricity});const E=340,T=220,P={top:60,right:20,bottom:40,left:60},I=E-P.left-P.right,q=T-P.top-P.bottom,U=a.append("svg").attr("width",E).attr("height",T),G=U.append("g").attr("transform",`translate(${P.left}, ${P.top})`),D=d3.max(o,te=>te.gas),F=d3.max(o,te=>te.electricity),V=Math.max(D,F),B=d3.scaleLinear().domain([1,8765]).range([0,I]),z=d3.scaleLinear().domain([0,V]).range([q,0]),ne=d3.line().x(te=>B(te.hour)).y(te=>z(te.gas)),oe=d3.line().x(te=>B(te.hour)).y(te=>z(te.electricity));G.append("g").attr("transform",`translate(0, ${q})`).call(d3.axisBottom(B)),G.append("g").attr("class","y-axis").call(d3.axisLeft(z)),G.append("text").attr("class","graph-title").attr("x",I/2).attr("y",P.top-70).attr("font-size","14px").attr("text-anchor","middle").text("Load Duration Curve"),G.append("text").attr("class","graph-title").attr("x",-20).attr("y",P.top-70).attr("font-size","10px").attr("text-anchor","middle").text("kWh"),G.append("text").attr("class","graph-title").attr("x",I+8).attr("y",q+15).attr("font-size","10px").attr("text-anchor","middle").text("Hr"),G.append("path").datum(o).attr("fill","none").attr("stroke","#FFB100").attr("stroke-width",2).attr("d",ne),G.append("path").datum(o).attr("fill","none").attr("stroke","#1569C7").attr("stroke-width",2).attr("d",oe);const pe=G.append("g").attr("class","reference-lines");G.selectAll(".y-axis .tick").data().map(te=>+te).forEach(te=>{pe.append("line").attr("x1",0).attr("x2",I).attr("y1",z(te)).attr("y2",z(te)).attr("class","reference-line").style("stroke","grey").attr("stroke-width",.3).style("stroke-dasharray","4 4")});const _e=U.append("g").attr("class","legend").attr("transform",`translate(${P.left}, ${T-P.bottom})`),Se=100;_e.append("line").attr("x1",0).attr("y1",30).attr("x2",30).attr("y2",30).attr("stroke","#FFB100").attr("stroke-width",2),_e.append("text").attr("x",35).attr("y",30).attr("dy","0.35em").style("font-size","10px").style("fill","black").text("Gas"),_e.append("line").attr("x1",Se).attr("y1",30).attr("x2",Se+30).attr("y2",30).attr("stroke","#1569C7").attr("stroke-width",2),_e.append("text").attr("x",Se+35).attr("y",30).attr("dy","0.35em").style("font-size","10px").style("fill","black").text("Electricity")},q6=[{id:"energy-Building",label:"Building Energy"},{id:"energy-Feeder",label:"Grid Energy"},{id:"mobility-Street-Detailed",label:"Street Mobility"},{id:"mobility-Block-Detailed",label:"Block Mobility"}],OE=e=>e?`${e}-highlighted`:null,BE=e=>e?`${e}-other`:null,W6=({handleDigitalTwinClick:e})=>Q.jsxs("div",{className:"home-page",children:[Q.jsx("p",{className:"second-title",children:"Digital Twin APIs"}),Q.jsx("img",{className:"general-image",src:"../Image/digitalTwin_withIcon.png",onClick:e}),Q.jsx("img",{className:"general-image",src:"../Image/digitalTwinAdd.png"}),Q.jsx("img",{className:"general-image",src:"../Image/digitalTwinBlank.png"}),Q.jsx("img",{className:"general-image",src:"../Image/digitalTwinBlank.png"}),Q.jsx("img",{className:"general-image",src:"../Image/digitalTwinBlank.png"}),Q.jsx("p",{className:"second-title",children:"Our Partners"}),Q.jsx("img",{className:"general-image",src:"../Image/partners.png"}),Q.jsx("p",{className:"second-title",children:"Disclaimer"}),Q.jsx("p",{className:"main-text",children:'The data and the associated metadata are provided "as-is," without express or implied warranty of completeness, accuracy, or fitness for a particular purpose.'})]}),G6=({buildingLayerCode:e,setBuildingLayerCode:t})=>Q.jsxs("select",{className:"energy-dropdown",value:e,onChange:n=>t(n.target.value),children:[Q.jsx("option",{value:"Gas[kWh_m2][Yr]",children:"Gas Demand"}),Q.jsx("option",{value:"Electricity[kWh_m2][Yr]",children:"Electricity Demand"}),Q.jsx("option",{value:"Heating[KWh_m2][Yr]",children:"Heating Demand"}),Q.jsx("option",{value:"Cooling[KWh_m2][Yr]",children:"Cooling Demand"}),Q.jsx("option",{value:"Equipment[KWh_m2][Yr]",children:"Equipment Demand"}),Q.jsx("option",{value:"Lighting[KWh_m2][Yr]",children:"Lighting Demand"}),Q.jsx("option",{value:"HotWater[KWh_m2][Yr]",children:"Hotwater Demand"}),Q.jsx("option",{value:"PV[KWh_m2][Yr]",children:"Electricity Produced"})]}),H6={black:"#000",white:"#fff"},tf=H6,Z6={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},Vc=Z6,K6={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},qc=K6,X6={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},Wc=X6,Y6={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},Gc=Y6,J6={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},Hc=J6,Q6={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},od=Q6,ej={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},tj=ej;function Bl(e){let t="https://mui.com/production-error/?code="+e;for(let n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}const vf="$$material";function fe(){return fe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},fe.apply(this,arguments)}function $t(e,t){if(e==null)return{};var n={},a=Object.keys(e),c,f;for(f=0;f<a.length;f++)c=a[f],!(t.indexOf(c)>=0)&&(n[c]=e[c]);return n}function SP(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var rj=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,nj=SP(function(e){return rj.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91});function ij(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function oj(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var aj=function(){function e(n){var a=this;this._insertTag=function(c){var f;a.tags.length===0?a.insertionPoint?f=a.insertionPoint.nextSibling:a.prepend?f=a.container.firstChild:f=a.before:f=a.tags[a.tags.length-1].nextSibling,a.container.insertBefore(c,f),a.tags.push(c)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(a){a.forEach(this._insertTag)},t.insert=function(a){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(oj(this));var c=this.tags[this.tags.length-1];if(this.isSpeedy){var f=ij(c);try{f.insertRule(a,f.cssRules.length)}catch{}}else c.appendChild(document.createTextNode(a));this.ctr++},t.flush=function(){this.tags.forEach(function(a){return a.parentNode&&a.parentNode.removeChild(a)}),this.tags=[],this.ctr=0},e}(),Ki="-ms-",lg="-moz-",en="-webkit-",EP="comm",ub="rule",cb="decl",sj="@import",CP="@keyframes",lj="@layer",uj=Math.abs,Ug=String.fromCharCode,cj=Object.assign;function pj(e,t){return Oi(e,0)^45?(((t<<2^Oi(e,0))<<2^Oi(e,1))<<2^Oi(e,2))<<2^Oi(e,3):0}function kP(e){return e.trim()}function hj(e,t){return(e=t.exec(e))?e[0]:e}function tn(e,t,n){return e.replace(t,n)}function Dx(e,t){return e.indexOf(t)}function Oi(e,t){return e.charCodeAt(t)|0}function rf(e,t,n){return e.slice(t,n)}function Za(e){return e.length}function pb(e){return e.length}function Xm(e,t){return t.push(e),e}function dj(e,t){return e.map(t).join("")}var $g=1,Lp=1,TP=0,To=0,ci=0,Wp="";function Vg(e,t,n,a,c,f,o){return{value:e,root:t,parent:n,type:a,props:c,children:f,line:$g,column:Lp,length:o,return:""}}function ad(e,t){return cj(Vg("",null,null,"",null,null,0),e,{length:-e.length},t)}function fj(){return ci}function mj(){return ci=To>0?Oi(Wp,--To):0,Lp--,ci===10&&(Lp=1,$g--),ci}function Uo(){return ci=To<TP?Oi(Wp,To++):0,Lp++,ci===10&&(Lp=1,$g++),ci}function ns(){return Oi(Wp,To)}function xy(){return To}function _f(e,t){return rf(Wp,e,t)}function nf(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function IP(e){return $g=Lp=1,TP=Za(Wp=e),To=0,[]}function PP(e){return Wp="",e}function by(e){return kP(_f(To-1,Ox(e===91?e+2:e===40?e+1:e)))}function yj(e){for(;(ci=ns())&&ci<33;)Uo();return nf(e)>2||nf(ci)>3?"":" "}function gj(e,t){for(;--t&&Uo()&&!(ci<48||ci>102||ci>57&&ci<65||ci>70&&ci<97););return _f(e,xy()+(t<6&&ns()==32&&Uo()==32))}function Ox(e){for(;Uo();)switch(ci){case e:return To;case 34:case 39:e!==34&&e!==39&&Ox(ci);break;case 40:e===41&&Ox(e);break;case 92:Uo();break}return To}function vj(e,t){for(;Uo()&&e+ci!==47+10;)if(e+ci===42+42&&ns()===47)break;return"/*"+_f(t,To-1)+"*"+Ug(e===47?e:Uo())}function _j(e){for(;!nf(ns());)Uo();return _f(e,To)}function xj(e){return PP(wy("",null,null,null,[""],e=IP(e),0,[0],e))}function wy(e,t,n,a,c,f,o,v,x){for(var E=0,T=0,P=o,I=0,q=0,U=0,G=1,D=1,F=1,V=0,B="",z=c,ne=f,oe=a,pe=B;D;)switch(U=V,V=Uo()){case 40:if(U!=108&&Oi(pe,P-1)==58){Dx(pe+=tn(by(V),"&","&\f"),"&\f")!=-1&&(F=-1);break}case 34:case 39:case 91:pe+=by(V);break;case 9:case 10:case 13:case 32:pe+=yj(U);break;case 92:pe+=gj(xy()-1,7);continue;case 47:switch(ns()){case 42:case 47:Xm(bj(vj(Uo(),xy()),t,n),x);break;default:pe+="/"}break;case 123*G:v[E++]=Za(pe)*F;case 125*G:case 59:case 0:switch(V){case 0:case 125:D=0;case 59+T:F==-1&&(pe=tn(pe,/\f/g,"")),q>0&&Za(pe)-P&&Xm(q>32?FE(pe+";",a,n,P-1):FE(tn(pe," ","")+";",a,n,P-2),x);break;case 59:pe+=";";default:if(Xm(oe=NE(pe,t,n,E,T,c,v,B,z=[],ne=[],P),f),V===123)if(T===0)wy(pe,t,oe,oe,z,f,P,v,ne);else switch(I===99&&Oi(pe,3)===110?100:I){case 100:case 108:case 109:case 115:wy(e,oe,oe,a&&Xm(NE(e,oe,oe,0,0,c,v,B,c,z=[],P),ne),c,ne,P,v,a?z:ne);break;default:wy(pe,oe,oe,oe,[""],ne,0,v,ne)}}E=T=q=0,G=F=1,B=pe="",P=o;break;case 58:P=1+Za(pe),q=U;default:if(G<1){if(V==123)--G;else if(V==125&&G++==0&&mj()==125)continue}switch(pe+=Ug(V),V*G){case 38:F=T>0?1:(pe+="\f",-1);break;case 44:v[E++]=(Za(pe)-1)*F,F=1;break;case 64:ns()===45&&(pe+=by(Uo())),I=ns(),T=P=Za(B=pe+=_j(xy())),V++;break;case 45:U===45&&Za(pe)==2&&(G=0)}}return f}function NE(e,t,n,a,c,f,o,v,x,E,T){for(var P=c-1,I=c===0?f:[""],q=pb(I),U=0,G=0,D=0;U<a;++U)for(var F=0,V=rf(e,P+1,P=uj(G=o[U])),B=e;F<q;++F)(B=kP(G>0?I[F]+" "+V:tn(V,/&\f/g,I[F])))&&(x[D++]=B);return Vg(e,t,n,c===0?ub:v,x,E,T)}function bj(e,t,n){return Vg(e,t,n,EP,Ug(fj()),rf(e,2,-2),0)}function FE(e,t,n,a){return Vg(e,t,n,cb,rf(e,0,a),rf(e,a+1,-1),a)}function wp(e,t){for(var n="",a=pb(e),c=0;c<a;c++)n+=t(e[c],c,e,t)||"";return n}function wj(e,t,n,a){switch(e.type){case lj:if(e.children.length)break;case sj:case cb:return e.return=e.return||e.value;case EP:return"";case CP:return e.return=e.value+"{"+wp(e.children,a)+"}";case ub:e.value=e.props.join(",")}return Za(n=wp(e.children,a))?e.return=e.value+"{"+n+"}":""}function Sj(e){var t=pb(e);return function(n,a,c,f){for(var o="",v=0;v<t;v++)o+=e[v](n,a,c,f)||"";return o}}function Ej(e){return function(t){t.root||(t=t.return)&&e(t)}}var Cj=function(t,n,a){for(var c=0,f=0;c=f,f=ns(),c===38&&f===12&&(n[a]=1),!nf(f);)Uo();return _f(t,To)},kj=function(t,n){var a=-1,c=44;do switch(nf(c)){case 0:c===38&&ns()===12&&(n[a]=1),t[a]+=Cj(To-1,n,a);break;case 2:t[a]+=by(c);break;case 4:if(c===44){t[++a]=ns()===58?"&\f":"",n[a]=t[a].length;break}default:t[a]+=Ug(c)}while(c=Uo());return t},Tj=function(t,n){return PP(kj(IP(t),n))},jE=new WeakMap,Ij=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,a=t.parent,c=t.column===a.column&&t.line===a.line;a.type!=="rule";)if(a=a.parent,!a)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!jE.get(a))&&!c){jE.set(t,!0);for(var f=[],o=Tj(n,f),v=a.props,x=0,E=0;x<o.length;x++)for(var T=0;T<v.length;T++,E++)t.props[E]=f[x]?o[x].replace(/&\f/g,v[T]):v[T]+" "+o[x]}}},Pj=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function AP(e,t){switch(pj(e,t)){case 5103:return en+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return en+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return en+e+lg+e+Ki+e+e;case 6828:case 4268:return en+e+Ki+e+e;case 6165:return en+e+Ki+"flex-"+e+e;case 5187:return en+e+tn(e,/(\w+).+(:[^]+)/,en+"box-$1$2"+Ki+"flex-$1$2")+e;case 5443:return en+e+Ki+"flex-item-"+tn(e,/flex-|-self/,"")+e;case 4675:return en+e+Ki+"flex-line-pack"+tn(e,/align-content|flex-|-self/,"")+e;case 5548:return en+e+Ki+tn(e,"shrink","negative")+e;case 5292:return en+e+Ki+tn(e,"basis","preferred-size")+e;case 6060:return en+"box-"+tn(e,"-grow","")+en+e+Ki+tn(e,"grow","positive")+e;case 4554:return en+tn(e,/([^-])(transform)/g,"$1"+en+"$2")+e;case 6187:return tn(tn(tn(e,/(zoom-|grab)/,en+"$1"),/(image-set)/,en+"$1"),e,"")+e;case 5495:case 3959:return tn(e,/(image-set\([^]*)/,en+"$1$`$1");case 4968:return tn(tn(e,/(.+:)(flex-)?(.*)/,en+"box-pack:$3"+Ki+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+en+e+e;case 4095:case 3583:case 4068:case 2532:return tn(e,/(.+)-inline(.+)/,en+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Za(e)-1-t>6)switch(Oi(e,t+1)){case 109:if(Oi(e,t+4)!==45)break;case 102:return tn(e,/(.+:)(.+)-([^]+)/,"$1"+en+"$2-$3$1"+lg+(Oi(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~Dx(e,"stretch")?AP(tn(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Oi(e,t+1)!==115)break;case 6444:switch(Oi(e,Za(e)-3-(~Dx(e,"!important")&&10))){case 107:return tn(e,":",":"+en)+e;case 101:return tn(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+en+(Oi(e,14)===45?"inline-":"")+"box$3$1"+en+"$2$3$1"+Ki+"$2box$3")+e}break;case 5936:switch(Oi(e,t+11)){case 114:return en+e+Ki+tn(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return en+e+Ki+tn(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return en+e+Ki+tn(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return en+e+Ki+e+e}return e}var Aj=function(t,n,a,c){if(t.length>-1&&!t.return)switch(t.type){case cb:t.return=AP(t.value,t.length);break;case CP:return wp([ad(t,{value:tn(t.value,"@","@"+en)})],c);case ub:if(t.length)return dj(t.props,function(f){switch(hj(f,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return wp([ad(t,{props:[tn(f,/:(read-\w+)/,":"+lg+"$1")]})],c);case"::placeholder":return wp([ad(t,{props:[tn(f,/:(plac\w+)/,":"+en+"input-$1")]}),ad(t,{props:[tn(f,/:(plac\w+)/,":"+lg+"$1")]}),ad(t,{props:[tn(f,/:(plac\w+)/,Ki+"input-$1")]})],c)}return""})}},Mj=[Aj],Rj=function(t){var n=t.key;if(n==="css"){var a=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(a,function(G){var D=G.getAttribute("data-emotion");D.indexOf(" ")!==-1&&(document.head.appendChild(G),G.setAttribute("data-s",""))})}var c=t.stylisPlugins||Mj,f={},o,v=[];o=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(G){for(var D=G.getAttribute("data-emotion").split(" "),F=1;F<D.length;F++)f[D[F]]=!0;v.push(G)});var x,E=[Ij,Pj];{var T,P=[wj,Ej(function(G){T.insert(G)})],I=Sj(E.concat(c,P)),q=function(D){return wp(xj(D),I)};x=function(D,F,V,B){T=V,q(D?D+"{"+F.styles+"}":F.styles),B&&(U.inserted[F.name]=!0)}}var U={key:n,sheet:new aj({key:n,container:o,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:f,registered:{},insert:x};return U.sheet.hydrate(v),U},MP={exports:{}},pn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ti=typeof Symbol=="function"&&Symbol.for,hb=Ti?Symbol.for("react.element"):60103,db=Ti?Symbol.for("react.portal"):60106,qg=Ti?Symbol.for("react.fragment"):60107,Wg=Ti?Symbol.for("react.strict_mode"):60108,Gg=Ti?Symbol.for("react.profiler"):60114,Hg=Ti?Symbol.for("react.provider"):60109,Zg=Ti?Symbol.for("react.context"):60110,fb=Ti?Symbol.for("react.async_mode"):60111,Kg=Ti?Symbol.for("react.concurrent_mode"):60111,Xg=Ti?Symbol.for("react.forward_ref"):60112,Yg=Ti?Symbol.for("react.suspense"):60113,Lj=Ti?Symbol.for("react.suspense_list"):60120,Jg=Ti?Symbol.for("react.memo"):60115,Qg=Ti?Symbol.for("react.lazy"):60116,zj=Ti?Symbol.for("react.block"):60121,Dj=Ti?Symbol.for("react.fundamental"):60117,Oj=Ti?Symbol.for("react.responder"):60118,Bj=Ti?Symbol.for("react.scope"):60119;function qo(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case hb:switch(e=e.type,e){case fb:case Kg:case qg:case Gg:case Wg:case Yg:return e;default:switch(e=e&&e.$$typeof,e){case Zg:case Xg:case Qg:case Jg:case Hg:return e;default:return t}}case db:return t}}}function RP(e){return qo(e)===Kg}pn.AsyncMode=fb;pn.ConcurrentMode=Kg;pn.ContextConsumer=Zg;pn.ContextProvider=Hg;pn.Element=hb;pn.ForwardRef=Xg;pn.Fragment=qg;pn.Lazy=Qg;pn.Memo=Jg;pn.Portal=db;pn.Profiler=Gg;pn.StrictMode=Wg;pn.Suspense=Yg;pn.isAsyncMode=function(e){return RP(e)||qo(e)===fb};pn.isConcurrentMode=RP;pn.isContextConsumer=function(e){return qo(e)===Zg};pn.isContextProvider=function(e){return qo(e)===Hg};pn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===hb};pn.isForwardRef=function(e){return qo(e)===Xg};pn.isFragment=function(e){return qo(e)===qg};pn.isLazy=function(e){return qo(e)===Qg};pn.isMemo=function(e){return qo(e)===Jg};pn.isPortal=function(e){return qo(e)===db};pn.isProfiler=function(e){return qo(e)===Gg};pn.isStrictMode=function(e){return qo(e)===Wg};pn.isSuspense=function(e){return qo(e)===Yg};pn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===qg||e===Kg||e===Gg||e===Wg||e===Yg||e===Lj||typeof e=="object"&&e!==null&&(e.$$typeof===Qg||e.$$typeof===Jg||e.$$typeof===Hg||e.$$typeof===Zg||e.$$typeof===Xg||e.$$typeof===Dj||e.$$typeof===Oj||e.$$typeof===Bj||e.$$typeof===zj)};pn.typeOf=qo;MP.exports=pn;var Nj=MP.exports,LP=Nj,Fj={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},jj={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},zP={};zP[LP.ForwardRef]=Fj;zP[LP.Memo]=jj;var Uj=!0;function $j(e,t,n){var a="";return n.split(" ").forEach(function(c){e[c]!==void 0?t.push(e[c]+";"):a+=c+" "}),a}var DP=function(t,n,a){var c=t.key+"-"+n.name;(a===!1||Uj===!1)&&t.registered[c]===void 0&&(t.registered[c]=n.styles)},OP=function(t,n,a){DP(t,n,a);var c=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var f=n;do t.insert(n===f?"."+c:"",f,t.sheet,!0),f=f.next;while(f!==void 0)}};function Vj(e){for(var t=0,n,a=0,c=e.length;c>=4;++a,c-=4)n=e.charCodeAt(a)&255|(e.charCodeAt(++a)&255)<<8|(e.charCodeAt(++a)&255)<<16|(e.charCodeAt(++a)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(c){case 3:t^=(e.charCodeAt(a+2)&255)<<16;case 2:t^=(e.charCodeAt(a+1)&255)<<8;case 1:t^=e.charCodeAt(a)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var qj={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Wj=/[A-Z]|^ms/g,Gj=/_EMO_([^_]+?)_([^]*?)_EMO_/g,BP=function(t){return t.charCodeAt(1)===45},UE=function(t){return t!=null&&typeof t!="boolean"},E_=SP(function(e){return BP(e)?e:e.replace(Wj,"-$&").toLowerCase()}),$E=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(Gj,function(a,c,f){return Ka={name:c,styles:f,next:Ka},c})}return qj[t]!==1&&!BP(t)&&typeof n=="number"&&n!==0?n+"px":n};function of(e,t,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return Ka={name:n.name,styles:n.styles,next:Ka},n.name;if(n.styles!==void 0){var a=n.next;if(a!==void 0)for(;a!==void 0;)Ka={name:a.name,styles:a.styles,next:Ka},a=a.next;var c=n.styles+";";return c}return Hj(e,t,n)}case"function":{if(e!==void 0){var f=Ka,o=n(e);return Ka=f,of(e,t,o)}break}}if(t==null)return n;var v=t[n];return v!==void 0?v:n}function Hj(e,t,n){var a="";if(Array.isArray(n))for(var c=0;c<n.length;c++)a+=of(e,t,n[c])+";";else for(var f in n){var o=n[f];if(typeof o!="object")t!=null&&t[o]!==void 0?a+=f+"{"+t[o]+"}":UE(o)&&(a+=E_(f)+":"+$E(f,o)+";");else if(Array.isArray(o)&&typeof o[0]=="string"&&(t==null||t[o[0]]===void 0))for(var v=0;v<o.length;v++)UE(o[v])&&(a+=E_(f)+":"+$E(f,o[v])+";");else{var x=of(e,t,o);switch(f){case"animation":case"animationName":{a+=E_(f)+":"+x+";";break}default:a+=f+"{"+x+"}"}}}return a}var VE=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Ka,mb=function(t,n,a){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var c=!0,f="";Ka=void 0;var o=t[0];o==null||o.raw===void 0?(c=!1,f+=of(a,n,o)):f+=o[0];for(var v=1;v<t.length;v++)f+=of(a,n,t[v]),c&&(f+=o[v]);VE.lastIndex=0;for(var x="",E;(E=VE.exec(f))!==null;)x+="-"+E[1];var T=Vj(f)+x;return{name:T,styles:f,next:Ka}},Zj=function(t){return t()},NP=z_["useInsertionEffect"]?z_["useInsertionEffect"]:!1,Kj=NP||Zj,qE=NP||ee.useLayoutEffect,FP=ee.createContext(typeof HTMLElement<"u"?Rj({key:"css"}):null);FP.Provider;var jP=function(t){return ee.forwardRef(function(n,a){var c=ee.useContext(FP);return t(n,c,a)})},yb=ee.createContext({}),Xj=jP(function(e,t){var n=e.styles,a=mb([n],void 0,ee.useContext(yb)),c=ee.useRef();return qE(function(){var f=t.key+"-global",o=new t.sheet.constructor({key:f,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),v=!1,x=document.querySelector('style[data-emotion="'+f+" "+a.name+'"]');return t.sheet.tags.length&&(o.before=t.sheet.tags[0]),x!==null&&(v=!0,x.setAttribute("data-emotion",f),o.hydrate([x])),c.current=[o,v],function(){o.flush()}},[t]),qE(function(){var f=c.current,o=f[0],v=f[1];if(v){f[1]=!1;return}if(a.next!==void 0&&OP(t,a.next,!0),o.tags.length){var x=o.tags[o.tags.length-1].nextElementSibling;o.before=x,o.flush()}t.insert("",a,o,!1)},[t,a.name]),null});function Yj(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return mb(t)}var gb=function(){var t=Yj.apply(void 0,arguments),n="animation-"+t.name;return{name:n,styles:"@keyframes "+n+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},Jj=nj,Qj=function(t){return t!=="theme"},WE=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?Jj:Qj},GE=function(t,n,a){var c;if(n){var f=n.shouldForwardProp;c=t.__emotion_forwardProp&&f?function(o){return t.__emotion_forwardProp(o)&&f(o)}:f}return typeof c!="function"&&a&&(c=t.__emotion_forwardProp),c},e8=function(t){var n=t.cache,a=t.serialized,c=t.isStringTag;return DP(n,a,c),Kj(function(){return OP(n,a,c)}),null},t8=function e(t,n){var a=t.__emotion_real===t,c=a&&t.__emotion_base||t,f,o;n!==void 0&&(f=n.label,o=n.target);var v=GE(t,n,a),x=v||WE(c),E=!x("as");return function(){var T=arguments,P=a&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(f!==void 0&&P.push("label:"+f+";"),T[0]==null||T[0].raw===void 0)P.push.apply(P,T);else{P.push(T[0][0]);for(var I=T.length,q=1;q<I;q++)P.push(T[q],T[0][q])}var U=jP(function(G,D,F){var V=E&&G.as||c,B="",z=[],ne=G;if(G.theme==null){ne={};for(var oe in G)ne[oe]=G[oe];ne.theme=ee.useContext(yb)}typeof G.className=="string"?B=$j(D.registered,z,G.className):G.className!=null&&(B=G.className+" ");var pe=mb(P.concat(z),D.registered,ne);B+=D.key+"-"+pe.name,o!==void 0&&(B+=" "+o);var be=E&&v===void 0?WE(V):x,Te={};for(var _e in G)E&&_e==="as"||be(_e)&&(Te[_e]=G[_e]);return Te.className=B,Te.ref=F,ee.createElement(ee.Fragment,null,ee.createElement(e8,{cache:D,serialized:pe,isStringTag:typeof V=="string"}),ee.createElement(V,Te))});return U.displayName=f!==void 0?f:"Styled("+(typeof c=="string"?c:c.displayName||c.name||"Component")+")",U.defaultProps=t.defaultProps,U.__emotion_real=U,U.__emotion_base=c,U.__emotion_styles=P,U.__emotion_forwardProp=v,Object.defineProperty(U,"toString",{value:function(){return"."+o}}),U.withComponent=function(G,D){return e(G,fe({},n,D,{shouldForwardProp:GE(U,D,!0)})).apply(void 0,P)},U}},r8=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],Bx=t8.bind();r8.forEach(function(e){Bx[e]=Bx(e)});function n8(e){return e==null||Object.keys(e).length===0}function i8(e){const{styles:t,defaultTheme:n={}}=e,a=typeof t=="function"?c=>t(n8(c)?n:c):t;return Q.jsx(Xj,{styles:a})}/**
 * @mui/styled-engine v5.15.7
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function UP(e,t){return Bx(e,t)}const o8=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))};function Ns(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function $P(e){if(!Ns(e))return e;const t={};return Object.keys(e).forEach(n=>{t[n]=$P(e[n])}),t}function Co(e,t,n={clone:!0}){const a=n.clone?fe({},e):e;return Ns(e)&&Ns(t)&&Object.keys(t).forEach(c=>{c!=="__proto__"&&(Ns(t[c])&&c in e&&Ns(e[c])?a[c]=Co(e[c],t[c],n):n.clone?a[c]=Ns(t[c])?$P(t[c]):t[c]:a[c]=t[c])}),a}function Qt(e){if(typeof e!="string")throw new Error(Bl(7));return e.charAt(0).toUpperCase()+e.slice(1)}function HE(...e){return e.reduce((t,n)=>n==null?t:function(...c){t.apply(this,c),n.apply(this,c)},()=>{})}function ev(e,t=166){let n;function a(...c){const f=()=>{e.apply(this,c)};clearTimeout(n),n=setTimeout(f,t)}return a.clear=()=>{clearTimeout(n)},a}function Sy(e,t){var n,a;return ee.isValidElement(e)&&t.indexOf((n=e.type.muiName)!=null?n:(a=e.type)==null||(a=a._payload)==null||(a=a.value)==null?void 0:a.muiName)!==-1}function ko(e){return e&&e.ownerDocument||document}function Ws(e){return ko(e).defaultView||window}function Nx(e,t){typeof e=="function"?e(t):e&&(e.current=t)}const a8=typeof window<"u"?ee.useLayoutEffect:ee.useEffect,Sa=a8;let ZE=0;function s8(e){const[t,n]=ee.useState(e),a=e||t;return ee.useEffect(()=>{t==null&&(ZE+=1,n(`mui-${ZE}`))},[t]),a}const KE=z_["useId".toString()];function vb(e){if(KE!==void 0){const t=KE();return e??t}return s8(e)}function XE({controlled:e,default:t,name:n,state:a="value"}){const{current:c}=ee.useRef(e!==void 0),[f,o]=ee.useState(t),v=c?e:f,x=ee.useCallback(E=>{c||o(E)},[]);return[v,x]}function Us(e){const t=ee.useRef(e);return Sa(()=>{t.current=e}),ee.useRef((...n)=>(0,t.current)(...n)).current}function Fi(...e){return ee.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(n=>{Nx(n,t)})},e)}const YE={};function l8(e,t){const n=ee.useRef(YE);return n.current===YE&&(n.current=e(t)),n}const u8=[];function c8(e){ee.useEffect(e,u8)}class tv{constructor(){this.currentId=0,this.clear=()=>{this.currentId!==0&&(clearTimeout(this.currentId),this.currentId=0)},this.disposeEffect=()=>this.clear}static create(){return new tv}start(t,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=0,n()},t)}}function VP(){const e=l8(tv.create).current;return c8(e.disposeEffect),e}let rv=!0,Fx=!1;const p8=new tv,h8={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function d8(e){const{type:t,tagName:n}=e;return!!(n==="INPUT"&&h8[t]&&!e.readOnly||n==="TEXTAREA"&&!e.readOnly||e.isContentEditable)}function f8(e){e.metaKey||e.altKey||e.ctrlKey||(rv=!0)}function C_(){rv=!1}function m8(){this.visibilityState==="hidden"&&Fx&&(rv=!0)}function y8(e){e.addEventListener("keydown",f8,!0),e.addEventListener("mousedown",C_,!0),e.addEventListener("pointerdown",C_,!0),e.addEventListener("touchstart",C_,!0),e.addEventListener("visibilitychange",m8,!0)}function g8(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch{}return rv||d8(t)}function v8(){const e=ee.useCallback(c=>{c!=null&&y8(c.ownerDocument)},[]),t=ee.useRef(!1);function n(){return t.current?(Fx=!0,p8.start(100,()=>{Fx=!1}),t.current=!1,!0):!1}function a(c){return g8(c)?(t.current=!0,!0):!1}return{isFocusVisibleRef:t,onFocus:a,onBlur:n,ref:e}}function qP(e){const t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}let Zc;function WP(){if(Zc)return Zc;const e=document.createElement("div"),t=document.createElement("div");return t.style.width="10px",t.style.height="1px",e.appendChild(t),e.dir="rtl",e.style.fontSize="14px",e.style.width="4px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.overflow="scroll",document.body.appendChild(e),Zc="reverse",e.scrollLeft>0?Zc="default":(e.scrollLeft=1,e.scrollLeft===0&&(Zc="negative")),document.body.removeChild(e),Zc}function _8(e,t){const n=e.scrollLeft;if(t!=="rtl")return n;switch(WP()){case"negative":return e.scrollWidth-e.clientWidth+n;case"reverse":return e.scrollWidth-e.clientWidth-n;default:return n}}function _b(e,t){const n=fe({},t);return Object.keys(e).forEach(a=>{if(a.toString().match(/^(components|slots)$/))n[a]=fe({},e[a],n[a]);else if(a.toString().match(/^(componentsProps|slotProps)$/)){const c=e[a]||{},f=t[a];n[a]={},!f||!Object.keys(f)?n[a]=c:!c||!Object.keys(c)?n[a]=f:(n[a]=fe({},f),Object.keys(c).forEach(o=>{n[a][o]=_b(c[o],f[o])}))}else n[a]===void 0&&(n[a]=e[a])}),n}function Ur(e,t,n=void 0){const a={};return Object.keys(e).forEach(c=>{a[c]=e[c].reduce((f,o)=>{if(o){const v=t(o);v!==""&&f.push(v),n&&n[o]&&f.push(n[o])}return f},[]).join(" ")}),a}const JE=e=>e,x8=()=>{let e=JE;return{configure(t){e=t},generate(t){return e(t)},reset(){e=JE}}},b8=x8(),GP=b8,w8={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Br(e,t,n="Mui"){const a=w8[t];return a?`${n}-${a}`:`${GP.generate(e)}-${t}`}function Tr(e,t,n="Mui"){const a={};return t.forEach(c=>{a[c]=Br(e,c,n)}),a}function S8(e,t=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,n))}const E8=["values","unit","step"],C8=e=>{const t=Object.keys(e).map(n=>({key:n,val:e[n]}))||[];return t.sort((n,a)=>n.val-a.val),t.reduce((n,a)=>fe({},n,{[a.key]:a.val}),{})};function k8(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:a=5}=e,c=$t(e,E8),f=C8(t),o=Object.keys(f);function v(I){return`@media (min-width:${typeof t[I]=="number"?t[I]:I}${n})`}function x(I){return`@media (max-width:${(typeof t[I]=="number"?t[I]:I)-a/100}${n})`}function E(I,q){const U=o.indexOf(q);return`@media (min-width:${typeof t[I]=="number"?t[I]:I}${n}) and (max-width:${(U!==-1&&typeof t[o[U]]=="number"?t[o[U]]:q)-a/100}${n})`}function T(I){return o.indexOf(I)+1<o.length?E(I,o[o.indexOf(I)+1]):v(I)}function P(I){const q=o.indexOf(I);return q===0?v(o[1]):q===o.length-1?x(o[q]):E(I,o[o.indexOf(I)+1]).replace("@media","@media not all and")}return fe({keys:o,values:f,up:v,down:x,between:E,only:T,not:P,unit:n},c)}const T8={borderRadius:4},I8=T8;function Ld(e,t){return t?Co(e,t,{clone:!1}):e}const xb={xs:0,sm:600,md:900,lg:1200,xl:1536},QE={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${xb[e]}px)`};function Gs(e,t,n){const a=e.theme||{};if(Array.isArray(t)){const f=a.breakpoints||QE;return t.reduce((o,v,x)=>(o[f.up(f.keys[x])]=n(t[x]),o),{})}if(typeof t=="object"){const f=a.breakpoints||QE;return Object.keys(t).reduce((o,v)=>{if(Object.keys(f.values||xb).indexOf(v)!==-1){const x=f.up(v);o[x]=n(t[v],v)}else{const x=v;o[x]=t[x]}return o},{})}return n(t)}function P8(e={}){var t;return((t=e.keys)==null?void 0:t.reduce((a,c)=>{const f=e.up(c);return a[f]={},a},{}))||{}}function A8(e,t){return e.reduce((n,a)=>{const c=n[a];return(!c||Object.keys(c).length===0)&&delete n[a],n},t)}function nv(e,t,n=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&n){const a=`vars.${t}`.split(".").reduce((c,f)=>c&&c[f]?c[f]:null,e);if(a!=null)return a}return t.split(".").reduce((a,c)=>a&&a[c]!=null?a[c]:null,e)}function ug(e,t,n,a=n){let c;return typeof e=="function"?c=e(n):Array.isArray(e)?c=e[n]||a:c=nv(e,n)||a,t&&(c=t(c,a,e)),c}function ii(e){const{prop:t,cssProperty:n=e.prop,themeKey:a,transform:c}=e,f=o=>{if(o[t]==null)return null;const v=o[t],x=o.theme,E=nv(x,a)||{};return Gs(o,v,P=>{let I=ug(E,c,P);return P===I&&typeof P=="string"&&(I=ug(E,c,`${t}${P==="default"?"":Qt(P)}`,P)),n===!1?I:{[n]:I}})};return f.propTypes={},f.filterProps=[t],f}function M8(e){const t={};return n=>(t[n]===void 0&&(t[n]=e(n)),t[n])}const R8={m:"margin",p:"padding"},L8={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},eC={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},z8=M8(e=>{if(e.length>2)if(eC[e])e=eC[e];else return[e];const[t,n]=e.split(""),a=R8[t],c=L8[n]||"";return Array.isArray(c)?c.map(f=>a+f):[a+c]}),bb=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],wb=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...bb,...wb];function xf(e,t,n,a){var c;const f=(c=nv(e,t,!1))!=null?c:n;return typeof f=="number"?o=>typeof o=="string"?o:f*o:Array.isArray(f)?o=>typeof o=="string"?o:f[o]:typeof f=="function"?f:()=>{}}function HP(e){return xf(e,"spacing",8)}function bf(e,t){if(typeof t=="string"||t==null)return t;const n=Math.abs(t),a=e(n);return t>=0?a:typeof a=="number"?-a:`-${a}`}function D8(e,t){return n=>e.reduce((a,c)=>(a[c]=bf(t,n),a),{})}function O8(e,t,n,a){if(t.indexOf(n)===-1)return null;const c=z8(n),f=D8(c,a),o=e[n];return Gs(e,o,f)}function ZP(e,t){const n=HP(e.theme);return Object.keys(e).map(a=>O8(e,t,a,n)).reduce(Ld,{})}function Gn(e){return ZP(e,bb)}Gn.propTypes={};Gn.filterProps=bb;function Hn(e){return ZP(e,wb)}Hn.propTypes={};Hn.filterProps=wb;function B8(e=8){if(e.mui)return e;const t=HP({spacing:e}),n=(...a)=>(a.length===0?[1]:a).map(f=>{const o=t(f);return typeof o=="number"?`${o}px`:o}).join(" ");return n.mui=!0,n}function iv(...e){const t=e.reduce((a,c)=>(c.filterProps.forEach(f=>{a[f]=c}),a),{}),n=a=>Object.keys(a).reduce((c,f)=>t[f]?Ld(c,t[f](a)):c,{});return n.propTypes={},n.filterProps=e.reduce((a,c)=>a.concat(c.filterProps),[]),n}function ea(e){return typeof e!="number"?e:`${e}px solid`}function sa(e,t){return ii({prop:e,themeKey:"borders",transform:t})}const N8=sa("border",ea),F8=sa("borderTop",ea),j8=sa("borderRight",ea),U8=sa("borderBottom",ea),$8=sa("borderLeft",ea),V8=sa("borderColor"),q8=sa("borderTopColor"),W8=sa("borderRightColor"),G8=sa("borderBottomColor"),H8=sa("borderLeftColor"),Z8=sa("outline",ea),K8=sa("outlineColor"),ov=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=xf(e.theme,"shape.borderRadius",4),n=a=>({borderRadius:bf(t,a)});return Gs(e,e.borderRadius,n)}return null};ov.propTypes={};ov.filterProps=["borderRadius"];iv(N8,F8,j8,U8,$8,V8,q8,W8,G8,H8,ov,Z8,K8);const av=e=>{if(e.gap!==void 0&&e.gap!==null){const t=xf(e.theme,"spacing",8),n=a=>({gap:bf(t,a)});return Gs(e,e.gap,n)}return null};av.propTypes={};av.filterProps=["gap"];const sv=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=xf(e.theme,"spacing",8),n=a=>({columnGap:bf(t,a)});return Gs(e,e.columnGap,n)}return null};sv.propTypes={};sv.filterProps=["columnGap"];const lv=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=xf(e.theme,"spacing",8),n=a=>({rowGap:bf(t,a)});return Gs(e,e.rowGap,n)}return null};lv.propTypes={};lv.filterProps=["rowGap"];const X8=ii({prop:"gridColumn"}),Y8=ii({prop:"gridRow"}),J8=ii({prop:"gridAutoFlow"}),Q8=ii({prop:"gridAutoColumns"}),eU=ii({prop:"gridAutoRows"}),tU=ii({prop:"gridTemplateColumns"}),rU=ii({prop:"gridTemplateRows"}),nU=ii({prop:"gridTemplateAreas"}),iU=ii({prop:"gridArea"});iv(av,sv,lv,X8,Y8,J8,Q8,eU,tU,rU,nU,iU);function Sp(e,t){return t==="grey"?t:e}const oU=ii({prop:"color",themeKey:"palette",transform:Sp}),aU=ii({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Sp}),sU=ii({prop:"backgroundColor",themeKey:"palette",transform:Sp});iv(oU,aU,sU);function Fo(e){return e<=1&&e!==0?`${e*100}%`:e}const lU=ii({prop:"width",transform:Fo}),Sb=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=n=>{var a,c;const f=((a=e.theme)==null||(a=a.breakpoints)==null||(a=a.values)==null?void 0:a[n])||xb[n];return f?((c=e.theme)==null||(c=c.breakpoints)==null?void 0:c.unit)!=="px"?{maxWidth:`${f}${e.theme.breakpoints.unit}`}:{maxWidth:f}:{maxWidth:Fo(n)}};return Gs(e,e.maxWidth,t)}return null};Sb.filterProps=["maxWidth"];const uU=ii({prop:"minWidth",transform:Fo}),cU=ii({prop:"height",transform:Fo}),pU=ii({prop:"maxHeight",transform:Fo}),hU=ii({prop:"minHeight",transform:Fo});ii({prop:"size",cssProperty:"width",transform:Fo});ii({prop:"size",cssProperty:"height",transform:Fo});const dU=ii({prop:"boxSizing"});iv(lU,Sb,uU,cU,pU,hU,dU);const fU={border:{themeKey:"borders",transform:ea},borderTop:{themeKey:"borders",transform:ea},borderRight:{themeKey:"borders",transform:ea},borderBottom:{themeKey:"borders",transform:ea},borderLeft:{themeKey:"borders",transform:ea},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:ea},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:ov},color:{themeKey:"palette",transform:Sp},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Sp},backgroundColor:{themeKey:"palette",transform:Sp},p:{style:Hn},pt:{style:Hn},pr:{style:Hn},pb:{style:Hn},pl:{style:Hn},px:{style:Hn},py:{style:Hn},padding:{style:Hn},paddingTop:{style:Hn},paddingRight:{style:Hn},paddingBottom:{style:Hn},paddingLeft:{style:Hn},paddingX:{style:Hn},paddingY:{style:Hn},paddingInline:{style:Hn},paddingInlineStart:{style:Hn},paddingInlineEnd:{style:Hn},paddingBlock:{style:Hn},paddingBlockStart:{style:Hn},paddingBlockEnd:{style:Hn},m:{style:Gn},mt:{style:Gn},mr:{style:Gn},mb:{style:Gn},ml:{style:Gn},mx:{style:Gn},my:{style:Gn},margin:{style:Gn},marginTop:{style:Gn},marginRight:{style:Gn},marginBottom:{style:Gn},marginLeft:{style:Gn},marginX:{style:Gn},marginY:{style:Gn},marginInline:{style:Gn},marginInlineStart:{style:Gn},marginInlineEnd:{style:Gn},marginBlock:{style:Gn},marginBlockStart:{style:Gn},marginBlockEnd:{style:Gn},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:av},rowGap:{style:lv},columnGap:{style:sv},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Fo},maxWidth:{style:Sb},minWidth:{transform:Fo},height:{transform:Fo},maxHeight:{transform:Fo},minHeight:{transform:Fo},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},uv=fU;function mU(...e){const t=e.reduce((a,c)=>a.concat(Object.keys(c)),[]),n=new Set(t);return e.every(a=>n.size===Object.keys(a).length)}function yU(e,t){return typeof e=="function"?e(t):e}function gU(){function e(n,a,c,f){const o={[n]:a,theme:c},v=f[n];if(!v)return{[n]:a};const{cssProperty:x=n,themeKey:E,transform:T,style:P}=v;if(a==null)return null;if(E==="typography"&&a==="inherit")return{[n]:a};const I=nv(c,E)||{};return P?P(o):Gs(o,a,U=>{let G=ug(I,T,U);return U===G&&typeof U=="string"&&(G=ug(I,T,`${n}${U==="default"?"":Qt(U)}`,U)),x===!1?G:{[x]:G}})}function t(n){var a;const{sx:c,theme:f={}}=n||{};if(!c)return null;const o=(a=f.unstable_sxConfig)!=null?a:uv;function v(x){let E=x;if(typeof x=="function")E=x(f);else if(typeof x!="object")return x;if(!E)return null;const T=P8(f.breakpoints),P=Object.keys(T);let I=T;return Object.keys(E).forEach(q=>{const U=yU(E[q],f);if(U!=null)if(typeof U=="object")if(o[q])I=Ld(I,e(q,U,f,o));else{const G=Gs({theme:f},U,D=>({[q]:D}));mU(G,U)?I[q]=t({sx:U,theme:f}):I=Ld(I,G)}else I=Ld(I,e(q,U,f,o))}),A8(P,I)}return Array.isArray(c)?c.map(v):v(c)}return t}const KP=gU();KP.filterProps=["sx"];const cv=KP;function vU(e,t){const n=this;return n.vars&&typeof n.getColorSchemeSelector=="function"?{[n.getColorSchemeSelector(e).replace(/(\[[^\]]+\])/,"*:where($1)")]:t}:n.palette.mode===e?t:{}}const _U=["breakpoints","palette","spacing","shape"];function Eb(e={},...t){const{breakpoints:n={},palette:a={},spacing:c,shape:f={}}=e,o=$t(e,_U),v=k8(n),x=B8(c);let E=Co({breakpoints:v,direction:"ltr",components:{},palette:fe({mode:"light"},a),spacing:x,shape:fe({},I8,f)},o);return E.applyStyles=vU,E=t.reduce((T,P)=>Co(T,P),E),E.unstable_sxConfig=fe({},uv,o==null?void 0:o.unstable_sxConfig),E.unstable_sx=function(P){return cv({sx:P,theme:this})},E}function xU(e){return Object.keys(e).length===0}function bU(e=null){const t=ee.useContext(yb);return!t||xU(t)?e:t}const wU=Eb();function pv(e=wU){return bU(e)}function SU({styles:e,themeId:t,defaultTheme:n={}}){const a=pv(n),c=typeof e=="function"?e(t&&a[t]||a):e;return Q.jsx(i8,{styles:c})}const EU=["sx"],CU=e=>{var t,n;const a={systemProps:{},otherProps:{}},c=(t=e==null||(n=e.theme)==null?void 0:n.unstable_sxConfig)!=null?t:uv;return Object.keys(e).forEach(f=>{c[f]?a.systemProps[f]=e[f]:a.otherProps[f]=e[f]}),a};function XP(e){const{sx:t}=e,n=$t(e,EU),{systemProps:a,otherProps:c}=CU(n);let f;return Array.isArray(t)?f=[a,...t]:typeof t=="function"?f=(...o)=>{const v=t(...o);return Ns(v)?fe({},a,v):a}:f=fe({},a,t),fe({},c,{sx:f})}function YP(e){var t,n,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var c=e.length;for(t=0;t<c;t++)e[t]&&(n=YP(e[t]))&&(a&&(a+=" "),a+=n)}else for(n in e)e[n]&&(a&&(a+=" "),a+=n);return a}function qt(){for(var e,t,n=0,a="",c=arguments.length;n<c;n++)(e=arguments[n])&&(t=YP(e))&&(a&&(a+=" "),a+=t);return a}const kU=["className","component"];function TU(e={}){const{themeId:t,defaultTheme:n,defaultClassName:a="MuiBox-root",generateClassName:c}=e,f=UP("div",{shouldForwardProp:v=>v!=="theme"&&v!=="sx"&&v!=="as"})(cv);return ee.forwardRef(function(x,E){const T=pv(n),P=XP(x),{className:I,component:q="div"}=P,U=$t(P,kU);return Q.jsx(f,fe({as:q,ref:E,className:qt(I,c?c(a):a),theme:t&&T[t]||T},U))})}const IU=["variant"];function tC(e){return e.length===0}function JP(e){const{variant:t}=e,n=$t(e,IU);let a=t||"";return Object.keys(n).sort().forEach(c=>{c==="color"?a+=tC(a)?e[c]:Qt(e[c]):a+=`${tC(a)?c:Qt(c)}${Qt(e[c].toString())}`}),a}const PU=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function AU(e){return Object.keys(e).length===0}function MU(e){return typeof e=="string"&&e.charCodeAt(0)>96}const RU=(e,t)=>t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null,cg=e=>{let t=0;const n={};return e&&e.forEach(a=>{let c="";typeof a.props=="function"?(c=`callback${t}`,t+=1):c=JP(a.props),n[c]=a.style}),n},LU=(e,t)=>{let n=[];return t&&t.components&&t.components[e]&&t.components[e].variants&&(n=t.components[e].variants),cg(n)},pg=(e,t,n)=>{const{ownerState:a={}}=e,c=[];let f=0;return n&&n.forEach(o=>{let v=!0;if(typeof o.props=="function"){const x=fe({},e,a);v=o.props(x)}else Object.keys(o.props).forEach(x=>{a[x]!==o.props[x]&&e[x]!==o.props[x]&&(v=!1)});v&&(typeof o.props=="function"?c.push(t[`callback${f}`]):c.push(t[JP(o.props)])),typeof o.props=="function"&&(f+=1)}),c},zU=(e,t,n,a)=>{var c;const f=n==null||(c=n.components)==null||(c=c[a])==null?void 0:c.variants;return pg(e,t,f)};function zd(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const DU=Eb(),OU=e=>e&&e.charAt(0).toLowerCase()+e.slice(1);function Ey({defaultTheme:e,theme:t,themeId:n}){return AU(t)?e:t[n]||t}function BU(e){return e?(t,n)=>n[e]:null}const rC=({styledArg:e,props:t,defaultTheme:n,themeId:a})=>{const c=e(fe({},t,{theme:Ey(fe({},t,{defaultTheme:n,themeId:a}))}));let f;if(c&&c.variants&&(f=c.variants,delete c.variants),f){const o=pg(t,cg(f),f);return[c,...o]}return c};function NU(e={}){const{themeId:t,defaultTheme:n=DU,rootShouldForwardProp:a=zd,slotShouldForwardProp:c=zd}=e,f=o=>cv(fe({},o,{theme:Ey(fe({},o,{defaultTheme:n,themeId:t}))}));return f.__mui_systemSx=!0,(o,v={})=>{o8(o,z=>z.filter(ne=>!(ne!=null&&ne.__mui_systemSx)));const{name:x,slot:E,skipVariantsResolver:T,skipSx:P,overridesResolver:I=BU(OU(E))}=v,q=$t(v,PU),U=T!==void 0?T:E&&E!=="Root"&&E!=="root"||!1,G=P||!1;let D,F=zd;E==="Root"||E==="root"?F=a:E?F=c:MU(o)&&(F=void 0);const V=UP(o,fe({shouldForwardProp:F,label:D},q)),B=(z,...ne)=>{const oe=ne?ne.map(_e=>{if(typeof _e=="function"&&_e.__emotion_real!==_e)return Se=>rC({styledArg:_e,props:Se,defaultTheme:n,themeId:t});if(Ns(_e)){let Se=_e,te;return _e&&_e.variants&&(te=_e.variants,delete Se.variants,Se=he=>{let Oe=_e;return pg(he,cg(te),te).forEach(Ce=>{Oe=Co(Oe,Ce)}),Oe}),Se}return _e}):[];let pe=z;if(Ns(z)){let _e;z&&z.variants&&(_e=z.variants,delete pe.variants,pe=Se=>{let te=z;return pg(Se,cg(_e),_e).forEach(Oe=>{te=Co(te,Oe)}),te})}else typeof z=="function"&&z.__emotion_real!==z&&(pe=_e=>rC({styledArg:z,props:_e,defaultTheme:n,themeId:t}));x&&I&&oe.push(_e=>{const Se=Ey(fe({},_e,{defaultTheme:n,themeId:t})),te=RU(x,Se);if(te){const he={};return Object.entries(te).forEach(([Oe,je])=>{he[Oe]=typeof je=="function"?je(fe({},_e,{theme:Se})):je}),I(_e,he)}return null}),x&&!U&&oe.push(_e=>{const Se=Ey(fe({},_e,{defaultTheme:n,themeId:t}));return zU(_e,LU(x,Se),Se,x)}),G||oe.push(f);const be=oe.length-ne.length;if(Array.isArray(z)&&be>0){const _e=new Array(be).fill("");pe=[...z,..._e],pe.raw=[...z.raw,..._e]}const Te=V(pe,...oe);return o.muiName&&(Te.muiName=o.muiName),Te};return V.withConfig&&(B.withConfig=V.withConfig),B}}function FU(e){const{theme:t,name:n,props:a}=e;return!t||!t.components||!t.components[n]||!t.components[n].defaultProps?a:_b(t.components[n].defaultProps,a)}function jU({props:e,name:t,defaultTheme:n,themeId:a}){let c=pv(n);return a&&(c=c[a]||c),FU({theme:c,name:t,props:e})}function Cb(e,t=0,n=1){return S8(e,t,n)}function UU(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&n[0].length===1&&(n=n.map(a=>a+a)),n?`rgb${n.length===4?"a":""}(${n.map((a,c)=>c<3?parseInt(a,16):Math.round(parseInt(a,16)/255*1e3)/1e3).join(", ")})`:""}function ju(e){if(e.type)return e;if(e.charAt(0)==="#")return ju(UU(e));const t=e.indexOf("("),n=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(n)===-1)throw new Error(Bl(9,e));let a=e.substring(t+1,e.length-1),c;if(n==="color"){if(a=a.split(" "),c=a.shift(),a.length===4&&a[3].charAt(0)==="/"&&(a[3]=a[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(c)===-1)throw new Error(Bl(10,c))}else a=a.split(",");return a=a.map(f=>parseFloat(f)),{type:n,values:a,colorSpace:c}}function hv(e){const{type:t,colorSpace:n}=e;let{values:a}=e;return t.indexOf("rgb")!==-1?a=a.map((c,f)=>f<3?parseInt(c,10):c):t.indexOf("hsl")!==-1&&(a[1]=`${a[1]}%`,a[2]=`${a[2]}%`),t.indexOf("color")!==-1?a=`${n} ${a.join(" ")}`:a=`${a.join(", ")}`,`${t}(${a})`}function $U(e){e=ju(e);const{values:t}=e,n=t[0],a=t[1]/100,c=t[2]/100,f=a*Math.min(c,1-c),o=(E,T=(E+n/30)%12)=>c-f*Math.max(Math.min(T-3,9-T,1),-1);let v="rgb";const x=[Math.round(o(0)*255),Math.round(o(8)*255),Math.round(o(4)*255)];return e.type==="hsla"&&(v+="a",x.push(t[3])),hv({type:v,values:x})}function nC(e){e=ju(e);let t=e.type==="hsl"||e.type==="hsla"?ju($U(e)).values:e.values;return t=t.map(n=>(e.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function VU(e,t){const n=nC(e),a=nC(t);return(Math.max(n,a)+.05)/(Math.min(n,a)+.05)}function pi(e,t){return e=ju(e),t=Cb(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,hv(e)}function qU(e,t){if(e=ju(e),t=Cb(t),e.type.indexOf("hsl")!==-1)e.values[2]*=1-t;else if(e.type.indexOf("rgb")!==-1||e.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)e.values[n]*=1-t;return hv(e)}function WU(e,t){if(e=ju(e),t=Cb(t),e.type.indexOf("hsl")!==-1)e.values[2]+=(100-e.values[2])*t;else if(e.type.indexOf("rgb")!==-1)for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(e.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return hv(e)}function GU(e,t){return fe({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}const HU=["mode","contrastThreshold","tonalOffset"],iC={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:tf.white,default:tf.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},k_={text:{primary:tf.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:tf.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function oC(e,t,n,a){const c=a.light||a,f=a.dark||a*1.5;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:t==="light"?e.light=WU(e.main,c):t==="dark"&&(e.dark=qU(e.main,f)))}function ZU(e="light"){return e==="dark"?{main:Wc[200],light:Wc[50],dark:Wc[400]}:{main:Wc[700],light:Wc[400],dark:Wc[800]}}function KU(e="light"){return e==="dark"?{main:qc[200],light:qc[50],dark:qc[400]}:{main:qc[500],light:qc[300],dark:qc[700]}}function XU(e="light"){return e==="dark"?{main:Vc[500],light:Vc[300],dark:Vc[700]}:{main:Vc[700],light:Vc[400],dark:Vc[800]}}function YU(e="light"){return e==="dark"?{main:Gc[400],light:Gc[300],dark:Gc[700]}:{main:Gc[700],light:Gc[500],dark:Gc[900]}}function JU(e="light"){return e==="dark"?{main:Hc[400],light:Hc[300],dark:Hc[700]}:{main:Hc[800],light:Hc[500],dark:Hc[900]}}function QU(e="light"){return e==="dark"?{main:od[400],light:od[300],dark:od[700]}:{main:"#ed6c02",light:od[500],dark:od[900]}}function e$(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:a=.2}=e,c=$t(e,HU),f=e.primary||ZU(t),o=e.secondary||KU(t),v=e.error||XU(t),x=e.info||YU(t),E=e.success||JU(t),T=e.warning||QU(t);function P(G){return VU(G,k_.text.primary)>=n?k_.text.primary:iC.text.primary}const I=({color:G,name:D,mainShade:F=500,lightShade:V=300,darkShade:B=700})=>{if(G=fe({},G),!G.main&&G[F]&&(G.main=G[F]),!G.hasOwnProperty("main"))throw new Error(Bl(11,D?` (${D})`:"",F));if(typeof G.main!="string")throw new Error(Bl(12,D?` (${D})`:"",JSON.stringify(G.main)));return oC(G,"light",V,a),oC(G,"dark",B,a),G.contrastText||(G.contrastText=P(G.main)),G},q={dark:k_,light:iC};return Co(fe({common:fe({},tf),mode:t,primary:I({color:f,name:"primary"}),secondary:I({color:o,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:I({color:v,name:"error"}),warning:I({color:T,name:"warning"}),info:I({color:x,name:"info"}),success:I({color:E,name:"success"}),grey:tj,contrastThreshold:n,getContrastText:P,augmentColor:I,tonalOffset:a},q[t]),c)}const t$=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function r$(e){return Math.round(e*1e5)/1e5}const aC={textTransform:"uppercase"},sC='"Roboto", "Helvetica", "Arial", sans-serif';function n$(e,t){const n=typeof t=="function"?t(e):t,{fontFamily:a=sC,fontSize:c=14,fontWeightLight:f=300,fontWeightRegular:o=400,fontWeightMedium:v=500,fontWeightBold:x=700,htmlFontSize:E=16,allVariants:T,pxToRem:P}=n,I=$t(n,t$),q=c/14,U=P||(F=>`${F/E*q}rem`),G=(F,V,B,z,ne)=>fe({fontFamily:a,fontWeight:F,fontSize:U(V),lineHeight:B},a===sC?{letterSpacing:`${r$(z/V)}em`}:{},ne,T),D={h1:G(f,96,1.167,-1.5),h2:G(f,60,1.2,-.5),h3:G(o,48,1.167,0),h4:G(o,34,1.235,.25),h5:G(o,24,1.334,0),h6:G(v,20,1.6,.15),subtitle1:G(o,16,1.75,.15),subtitle2:G(v,14,1.57,.1),body1:G(o,16,1.5,.15),body2:G(o,14,1.43,.15),button:G(v,14,1.75,.4,aC),caption:G(o,12,1.66,.4),overline:G(o,12,2.66,1,aC),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Co(fe({htmlFontSize:E,pxToRem:U,fontFamily:a,fontSize:c,fontWeightLight:f,fontWeightRegular:o,fontWeightMedium:v,fontWeightBold:x},D),I,{clone:!1})}const i$=.2,o$=.14,a$=.12;function zn(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${i$})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${o$})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${a$})`].join(",")}const s$=["none",zn(0,2,1,-1,0,1,1,0,0,1,3,0),zn(0,3,1,-2,0,2,2,0,0,1,5,0),zn(0,3,3,-2,0,3,4,0,0,1,8,0),zn(0,2,4,-1,0,4,5,0,0,1,10,0),zn(0,3,5,-1,0,5,8,0,0,1,14,0),zn(0,3,5,-1,0,6,10,0,0,1,18,0),zn(0,4,5,-2,0,7,10,1,0,2,16,1),zn(0,5,5,-3,0,8,10,1,0,3,14,2),zn(0,5,6,-3,0,9,12,1,0,3,16,2),zn(0,6,6,-3,0,10,14,1,0,4,18,3),zn(0,6,7,-4,0,11,15,1,0,4,20,3),zn(0,7,8,-4,0,12,17,2,0,5,22,4),zn(0,7,8,-4,0,13,19,2,0,5,24,4),zn(0,7,9,-4,0,14,21,2,0,5,26,4),zn(0,8,9,-5,0,15,22,2,0,6,28,5),zn(0,8,10,-5,0,16,24,2,0,6,30,5),zn(0,8,11,-5,0,17,26,2,0,6,32,5),zn(0,9,11,-5,0,18,28,2,0,7,34,6),zn(0,9,12,-6,0,19,29,2,0,7,36,6),zn(0,10,13,-6,0,20,31,3,0,8,38,7),zn(0,10,13,-6,0,21,33,3,0,8,40,7),zn(0,10,14,-6,0,22,35,3,0,8,42,7),zn(0,11,14,-7,0,23,36,3,0,9,44,8),zn(0,11,15,-7,0,24,38,3,0,9,46,8)],l$=s$,u$=["duration","easing","delay"],c$={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},p$={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function lC(e){return`${Math.round(e)}ms`}function h$(e){if(!e)return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function d$(e){const t=fe({},c$,e.easing),n=fe({},p$,e.duration);return fe({getAutoHeightDuration:h$,create:(c=["all"],f={})=>{const{duration:o=n.standard,easing:v=t.easeInOut,delay:x=0}=f;return $t(f,u$),(Array.isArray(c)?c:[c]).map(E=>`${E} ${typeof o=="string"?o:lC(o)} ${v} ${typeof x=="string"?x:lC(x)}`).join(",")}},e,{easing:t,duration:n})}const f$={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},m$=f$,y$=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function QP(e={},...t){const{mixins:n={},palette:a={},transitions:c={},typography:f={}}=e,o=$t(e,y$);if(e.vars)throw new Error(Bl(18));const v=e$(a),x=Eb(e);let E=Co(x,{mixins:GU(x.breakpoints,n),palette:v,shadows:l$.slice(),typography:n$(v,f),transitions:d$(c),zIndex:fe({},m$)});return E=Co(E,o),E=t.reduce((T,P)=>Co(T,P),E),E.unstable_sxConfig=fe({},uv,o==null?void 0:o.unstable_sxConfig),E.unstable_sx=function(P){return cv({sx:P,theme:this})},E}const g$=QP(),dv=g$;function Gp(){const e=pv(dv);return e[vf]||e}function $r({props:e,name:t}){return jU({props:e,name:t,defaultTheme:dv,themeId:vf})}const Wo=e=>zd(e)&&e!=="classes",v$=zd,_$=NU({themeId:vf,defaultTheme:dv,rootShouldForwardProp:Wo}),zt=_$,x$=e=>{let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,(t/100).toFixed(2)},uC=x$;function b$(e){return Br("MuiSvgIcon",e)}Tr("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const w$=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],S$=e=>{const{color:t,fontSize:n,classes:a}=e,c={root:["root",t!=="inherit"&&`color${Qt(t)}`,`fontSize${Qt(n)}`]};return Ur(c,b$,a)},E$=zt("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="inherit"&&t[`color${Qt(n.color)}`],t[`fontSize${Qt(n.fontSize)}`]]}})(({theme:e,ownerState:t})=>{var n,a,c,f,o,v,x,E,T,P,I,q,U;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:t.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(n=e.transitions)==null||(a=n.create)==null?void 0:a.call(n,"fill",{duration:(c=e.transitions)==null||(c=c.duration)==null?void 0:c.shorter}),fontSize:{inherit:"inherit",small:((f=e.typography)==null||(o=f.pxToRem)==null?void 0:o.call(f,20))||"1.25rem",medium:((v=e.typography)==null||(x=v.pxToRem)==null?void 0:x.call(v,24))||"1.5rem",large:((E=e.typography)==null||(T=E.pxToRem)==null?void 0:T.call(E,35))||"2.1875rem"}[t.fontSize],color:(P=(I=(e.vars||e).palette)==null||(I=I[t.color])==null?void 0:I.main)!=null?P:{action:(q=(e.vars||e).palette)==null||(q=q.action)==null?void 0:q.active,disabled:(U=(e.vars||e).palette)==null||(U=U.action)==null?void 0:U.disabled,inherit:void 0}[t.color]}}),eA=ee.forwardRef(function(t,n){const a=$r({props:t,name:"MuiSvgIcon"}),{children:c,className:f,color:o="inherit",component:v="svg",fontSize:x="medium",htmlColor:E,inheritViewBox:T=!1,titleAccess:P,viewBox:I="0 0 24 24"}=a,q=$t(a,w$),U=ee.isValidElement(c)&&c.type==="svg",G=fe({},a,{color:o,component:v,fontSize:x,instanceFontSize:t.fontSize,inheritViewBox:T,viewBox:I,hasSvgAsChild:U}),D={};T||(D.viewBox=I);const F=S$(G);return Q.jsxs(E$,fe({as:v,className:qt(F.root,f),focusable:"false",color:E,"aria-hidden":P?void 0:!0,role:P?"img":void 0,ref:n},D,q,U&&c.props,{ownerState:G,children:[U?c.props.children:c,P?Q.jsx("title",{children:P}):null]}))});eA.muiName="SvgIcon";const cC=eA;function kb(e,t){function n(a,c){return Q.jsx(cC,fe({"data-testid":`${t}Icon`,ref:c},a,{children:e}))}return n.muiName=cC.muiName,ee.memo(ee.forwardRef(n))}var dn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tb=Symbol.for("react.element"),Ib=Symbol.for("react.portal"),fv=Symbol.for("react.fragment"),mv=Symbol.for("react.strict_mode"),yv=Symbol.for("react.profiler"),gv=Symbol.for("react.provider"),vv=Symbol.for("react.context"),C$=Symbol.for("react.server_context"),_v=Symbol.for("react.forward_ref"),xv=Symbol.for("react.suspense"),bv=Symbol.for("react.suspense_list"),wv=Symbol.for("react.memo"),Sv=Symbol.for("react.lazy"),k$=Symbol.for("react.offscreen"),tA;tA=Symbol.for("react.module.reference");function la(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Tb:switch(e=e.type,e){case fv:case yv:case mv:case xv:case bv:return e;default:switch(e=e&&e.$$typeof,e){case C$:case vv:case _v:case Sv:case wv:case gv:return e;default:return t}}case Ib:return t}}}dn.ContextConsumer=vv;dn.ContextProvider=gv;dn.Element=Tb;dn.ForwardRef=_v;dn.Fragment=fv;dn.Lazy=Sv;dn.Memo=wv;dn.Portal=Ib;dn.Profiler=yv;dn.StrictMode=mv;dn.Suspense=xv;dn.SuspenseList=bv;dn.isAsyncMode=function(){return!1};dn.isConcurrentMode=function(){return!1};dn.isContextConsumer=function(e){return la(e)===vv};dn.isContextProvider=function(e){return la(e)===gv};dn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Tb};dn.isForwardRef=function(e){return la(e)===_v};dn.isFragment=function(e){return la(e)===fv};dn.isLazy=function(e){return la(e)===Sv};dn.isMemo=function(e){return la(e)===wv};dn.isPortal=function(e){return la(e)===Ib};dn.isProfiler=function(e){return la(e)===yv};dn.isStrictMode=function(e){return la(e)===mv};dn.isSuspense=function(e){return la(e)===xv};dn.isSuspenseList=function(e){return la(e)===bv};dn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===fv||e===yv||e===mv||e===xv||e===bv||e===k$||typeof e=="object"&&e!==null&&(e.$$typeof===Sv||e.$$typeof===wv||e.$$typeof===gv||e.$$typeof===vv||e.$$typeof===_v||e.$$typeof===tA||e.getModuleId!==void 0)};dn.typeOf=la;function jx(e,t){return jx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,c){return a.__proto__=c,a},jx(e,t)}function rA(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,jx(e,t)}const pC={disabled:!1},hg=Xa.createContext(null);var T$=function(t){return t.scrollTop},xd="unmounted",Eu="exited",Cu="entering",Jc="entered",Ux="exiting",Zs=function(e){rA(t,e);function t(a,c){var f;f=e.call(this,a,c)||this;var o=c,v=o&&!o.isMounting?a.enter:a.appear,x;return f.appearStatus=null,a.in?v?(x=Eu,f.appearStatus=Cu):x=Jc:a.unmountOnExit||a.mountOnEnter?x=xd:x=Eu,f.state={status:x},f.nextCallback=null,f}t.getDerivedStateFromProps=function(c,f){var o=c.in;return o&&f.status===xd?{status:Eu}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(c){var f=null;if(c!==this.props){var o=this.state.status;this.props.in?o!==Cu&&o!==Jc&&(f=Cu):(o===Cu||o===Jc)&&(f=Ux)}this.updateStatus(!1,f)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var c=this.props.timeout,f,o,v;return f=o=v=c,c!=null&&typeof c!="number"&&(f=c.exit,o=c.enter,v=c.appear!==void 0?c.appear:o),{exit:f,enter:o,appear:v}},n.updateStatus=function(c,f){if(c===void 0&&(c=!1),f!==null)if(this.cancelNextCallback(),f===Cu){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:yd.findDOMNode(this);o&&T$(o)}this.performEnter(c)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Eu&&this.setState({status:xd})},n.performEnter=function(c){var f=this,o=this.props.enter,v=this.context?this.context.isMounting:c,x=this.props.nodeRef?[v]:[yd.findDOMNode(this),v],E=x[0],T=x[1],P=this.getTimeouts(),I=v?P.appear:P.enter;if(!c&&!o||pC.disabled){this.safeSetState({status:Jc},function(){f.props.onEntered(E)});return}this.props.onEnter(E,T),this.safeSetState({status:Cu},function(){f.props.onEntering(E,T),f.onTransitionEnd(I,function(){f.safeSetState({status:Jc},function(){f.props.onEntered(E,T)})})})},n.performExit=function(){var c=this,f=this.props.exit,o=this.getTimeouts(),v=this.props.nodeRef?void 0:yd.findDOMNode(this);if(!f||pC.disabled){this.safeSetState({status:Eu},function(){c.props.onExited(v)});return}this.props.onExit(v),this.safeSetState({status:Ux},function(){c.props.onExiting(v),c.onTransitionEnd(o.exit,function(){c.safeSetState({status:Eu},function(){c.props.onExited(v)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(c,f){f=this.setNextCallback(f),this.setState(c,f)},n.setNextCallback=function(c){var f=this,o=!0;return this.nextCallback=function(v){o&&(o=!1,f.nextCallback=null,c(v))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(c,f){this.setNextCallback(f);var o=this.props.nodeRef?this.props.nodeRef.current:yd.findDOMNode(this),v=c==null&&!this.props.addEndListener;if(!o||v){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var x=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],E=x[0],T=x[1];this.props.addEndListener(E,T)}c!=null&&setTimeout(this.nextCallback,c)},n.render=function(){var c=this.state.status;if(c===xd)return null;var f=this.props,o=f.children;f.in,f.mountOnEnter,f.unmountOnExit,f.appear,f.enter,f.exit,f.timeout,f.addEndListener,f.onEnter,f.onEntering,f.onEntered,f.onExit,f.onExiting,f.onExited,f.nodeRef;var v=$t(f,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Xa.createElement(hg.Provider,{value:null},typeof o=="function"?o(c,v):Xa.cloneElement(Xa.Children.only(o),v))},t}(Xa.Component);Zs.contextType=hg;Zs.propTypes={};function Kc(){}Zs.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Kc,onEntering:Kc,onEntered:Kc,onExit:Kc,onExiting:Kc,onExited:Kc};Zs.UNMOUNTED=xd;Zs.EXITED=Eu;Zs.ENTERING=Cu;Zs.ENTERED=Jc;Zs.EXITING=Ux;const nA=Zs;function I$(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pb(e,t){var n=function(f){return t&&ee.isValidElement(f)?t(f):f},a=Object.create(null);return e&&ee.Children.map(e,function(c){return c}).forEach(function(c){a[c.key]=n(c)}),a}function P$(e,t){e=e||{},t=t||{};function n(T){return T in t?t[T]:e[T]}var a=Object.create(null),c=[];for(var f in e)f in t?c.length&&(a[f]=c,c=[]):c.push(f);var o,v={};for(var x in t){if(a[x])for(o=0;o<a[x].length;o++){var E=a[x][o];v[a[x][o]]=n(E)}v[x]=n(x)}for(o=0;o<c.length;o++)v[c[o]]=n(c[o]);return v}function Ru(e,t,n){return n[t]!=null?n[t]:e.props[t]}function A$(e,t){return Pb(e.children,function(n){return ee.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:Ru(n,"appear",e),enter:Ru(n,"enter",e),exit:Ru(n,"exit",e)})})}function M$(e,t,n){var a=Pb(e.children),c=P$(t,a);return Object.keys(c).forEach(function(f){var o=c[f];if(ee.isValidElement(o)){var v=f in t,x=f in a,E=t[f],T=ee.isValidElement(E)&&!E.props.in;x&&(!v||T)?c[f]=ee.cloneElement(o,{onExited:n.bind(null,o),in:!0,exit:Ru(o,"exit",e),enter:Ru(o,"enter",e)}):!x&&v&&!T?c[f]=ee.cloneElement(o,{in:!1}):x&&v&&ee.isValidElement(E)&&(c[f]=ee.cloneElement(o,{onExited:n.bind(null,o),in:E.props.in,exit:Ru(o,"exit",e),enter:Ru(o,"enter",e)}))}}),c}var R$=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},L$={component:"div",childFactory:function(t){return t}},Ab=function(e){rA(t,e);function t(a,c){var f;f=e.call(this,a,c)||this;var o=f.handleExited.bind(I$(f));return f.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},f}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(c,f){var o=f.children,v=f.handleExited,x=f.firstRender;return{children:x?A$(c,v):M$(c,o,v),firstRender:!1}},n.handleExited=function(c,f){var o=Pb(this.props.children);c.key in o||(c.props.onExited&&c.props.onExited(f),this.mounted&&this.setState(function(v){var x=fe({},v.children);return delete x[c.key],{children:x}}))},n.render=function(){var c=this.props,f=c.component,o=c.childFactory,v=$t(c,["component","childFactory"]),x=this.state.contextValue,E=R$(this.state.children).map(o);return delete v.appear,delete v.enter,delete v.exit,f===null?Xa.createElement(hg.Provider,{value:x},E):Xa.createElement(hg.Provider,{value:x},Xa.createElement(f,v,E))},t}(Xa.Component);Ab.propTypes={};Ab.defaultProps=L$;const z$=Ab,iA=e=>e.scrollTop;function dg(e,t){var n,a;const{timeout:c,easing:f,style:o={}}=e;return{duration:(n=o.transitionDuration)!=null?n:typeof c=="number"?c:c[t.mode]||0,easing:(a=o.transitionTimingFunction)!=null?a:typeof f=="object"?f[t.mode]:f,delay:o.transitionDelay}}function D$(e){return Br("MuiPaper",e)}Tr("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const O$=["className","component","elevation","square","variant"],B$=e=>{const{square:t,elevation:n,variant:a,classes:c}=e,f={root:["root",a,!t&&"rounded",a==="elevation"&&`elevation${n}`]};return Ur(f,D$,c)},N$=zt("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!n.square&&t.rounded,n.variant==="elevation"&&t[`elevation${n.elevation}`]]}})(({theme:e,ownerState:t})=>{var n;return fe({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow")},!t.square&&{borderRadius:e.shape.borderRadius},t.variant==="outlined"&&{border:`1px solid ${(e.vars||e).palette.divider}`},t.variant==="elevation"&&fe({boxShadow:(e.vars||e).shadows[t.elevation]},!e.vars&&e.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${pi("#fff",uC(t.elevation))}, ${pi("#fff",uC(t.elevation))})`},e.vars&&{backgroundImage:(n=e.vars.overlays)==null?void 0:n[t.elevation]}))}),F$=ee.forwardRef(function(t,n){const a=$r({props:t,name:"MuiPaper"}),{className:c,component:f="div",elevation:o=1,square:v=!1,variant:x="elevation"}=a,E=$t(a,O$),T=fe({},a,{component:f,elevation:o,square:v,variant:x}),P=B$(T);return Q.jsx(N$,fe({as:f,ownerState:T,className:qt(P.root,c),ref:n},E))}),Mb=F$;function zp(e){return typeof e=="string"}function j$(e,t,n){return e===void 0||zp(e)?t:fe({},t,{ownerState:fe({},t.ownerState,n)})}function oA(e,t=[]){if(e===void 0)return{};const n={};return Object.keys(e).filter(a=>a.match(/^on[A-Z]/)&&typeof e[a]=="function"&&!t.includes(a)).forEach(a=>{n[a]=e[a]}),n}function U$(e,t,n){return typeof e=="function"?e(t,n):e}function hC(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(n=>!(n.match(/^on[A-Z]/)&&typeof e[n]=="function")).forEach(n=>{t[n]=e[n]}),t}function $$(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:a,externalForwardedProps:c,className:f}=e;if(!t){const q=qt(n==null?void 0:n.className,f,c==null?void 0:c.className,a==null?void 0:a.className),U=fe({},n==null?void 0:n.style,c==null?void 0:c.style,a==null?void 0:a.style),G=fe({},n,c,a);return q.length>0&&(G.className=q),Object.keys(U).length>0&&(G.style=U),{props:G,internalRef:void 0}}const o=oA(fe({},c,a)),v=hC(a),x=hC(c),E=t(o),T=qt(E==null?void 0:E.className,n==null?void 0:n.className,f,c==null?void 0:c.className,a==null?void 0:a.className),P=fe({},E==null?void 0:E.style,n==null?void 0:n.style,c==null?void 0:c.style,a==null?void 0:a.style),I=fe({},E,n,x,v);return T.length>0&&(I.className=T),Object.keys(P).length>0&&(I.style=P),{props:I,internalRef:E.ref}}const V$=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function os(e){var t;const{elementType:n,externalSlotProps:a,ownerState:c,skipResolvingSlotProps:f=!1}=e,o=$t(e,V$),v=f?{}:U$(a,c),{props:x,internalRef:E}=$$(fe({},o,{externalSlotProps:v})),T=Fi(E,v==null?void 0:v.ref,(t=e.additionalProps)==null?void 0:t.ref);return j$(n,fe({},x,{ref:T}),c)}function q$(e){const{className:t,classes:n,pulsate:a=!1,rippleX:c,rippleY:f,rippleSize:o,in:v,onExited:x,timeout:E}=e,[T,P]=ee.useState(!1),I=qt(t,n.ripple,n.rippleVisible,a&&n.ripplePulsate),q={width:o,height:o,top:-(o/2)+f,left:-(o/2)+c},U=qt(n.child,T&&n.childLeaving,a&&n.childPulsate);return!v&&!T&&P(!0),ee.useEffect(()=>{if(!v&&x!=null){const G=setTimeout(x,E);return()=>{clearTimeout(G)}}},[x,v,E]),Q.jsx("span",{className:I,style:q,children:Q.jsx("span",{className:U})})}const W$=Tr("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),Qo=W$,G$=["center","classes","className"];let Ev=e=>e,dC,fC,mC,yC;const $x=550,H$=80,Z$=gb(dC||(dC=Ev`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),K$=gb(fC||(fC=Ev`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),X$=gb(mC||(mC=Ev`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),Y$=zt("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),J$=zt(q$,{name:"MuiTouchRipple",slot:"Ripple"})(yC||(yC=Ev`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),Qo.rippleVisible,Z$,$x,({theme:e})=>e.transitions.easing.easeInOut,Qo.ripplePulsate,({theme:e})=>e.transitions.duration.shorter,Qo.child,Qo.childLeaving,K$,$x,({theme:e})=>e.transitions.easing.easeInOut,Qo.childPulsate,X$,({theme:e})=>e.transitions.easing.easeInOut),Q$=ee.forwardRef(function(t,n){const a=$r({props:t,name:"MuiTouchRipple"}),{center:c=!1,classes:f={},className:o}=a,v=$t(a,G$),[x,E]=ee.useState([]),T=ee.useRef(0),P=ee.useRef(null);ee.useEffect(()=>{P.current&&(P.current(),P.current=null)},[x]);const I=ee.useRef(!1),q=VP(),U=ee.useRef(null),G=ee.useRef(null),D=ee.useCallback(z=>{const{pulsate:ne,rippleX:oe,rippleY:pe,rippleSize:be,cb:Te}=z;E(_e=>[..._e,Q.jsx(J$,{classes:{ripple:qt(f.ripple,Qo.ripple),rippleVisible:qt(f.rippleVisible,Qo.rippleVisible),ripplePulsate:qt(f.ripplePulsate,Qo.ripplePulsate),child:qt(f.child,Qo.child),childLeaving:qt(f.childLeaving,Qo.childLeaving),childPulsate:qt(f.childPulsate,Qo.childPulsate)},timeout:$x,pulsate:ne,rippleX:oe,rippleY:pe,rippleSize:be},T.current)]),T.current+=1,P.current=Te},[f]),F=ee.useCallback((z={},ne={},oe=()=>{})=>{const{pulsate:pe=!1,center:be=c||ne.pulsate,fakeElement:Te=!1}=ne;if((z==null?void 0:z.type)==="mousedown"&&I.current){I.current=!1;return}(z==null?void 0:z.type)==="touchstart"&&(I.current=!0);const _e=Te?null:G.current,Se=_e?_e.getBoundingClientRect():{width:0,height:0,left:0,top:0};let te,he,Oe;if(be||z===void 0||z.clientX===0&&z.clientY===0||!z.clientX&&!z.touches)te=Math.round(Se.width/2),he=Math.round(Se.height/2);else{const{clientX:je,clientY:Ce}=z.touches&&z.touches.length>0?z.touches[0]:z;te=Math.round(je-Se.left),he=Math.round(Ce-Se.top)}if(be)Oe=Math.sqrt((2*Se.width**2+Se.height**2)/3),Oe%2===0&&(Oe+=1);else{const je=Math.max(Math.abs((_e?_e.clientWidth:0)-te),te)*2+2,Ce=Math.max(Math.abs((_e?_e.clientHeight:0)-he),he)*2+2;Oe=Math.sqrt(je**2+Ce**2)}z!=null&&z.touches?U.current===null&&(U.current=()=>{D({pulsate:pe,rippleX:te,rippleY:he,rippleSize:Oe,cb:oe})},q.start(H$,()=>{U.current&&(U.current(),U.current=null)})):D({pulsate:pe,rippleX:te,rippleY:he,rippleSize:Oe,cb:oe})},[c,D,q]),V=ee.useCallback(()=>{F({},{pulsate:!0})},[F]),B=ee.useCallback((z,ne)=>{if(q.clear(),(z==null?void 0:z.type)==="touchend"&&U.current){U.current(),U.current=null,q.start(0,()=>{B(z,ne)});return}U.current=null,E(oe=>oe.length>0?oe.slice(1):oe),P.current=ne},[q]);return ee.useImperativeHandle(n,()=>({pulsate:V,start:F,stop:B}),[V,F,B]),Q.jsx(Y$,fe({className:qt(Qo.root,f.root,o),ref:G},v,{children:Q.jsx(z$,{component:null,exit:!0,children:x})}))}),eV=Q$;function tV(e){return Br("MuiButtonBase",e)}const rV=Tr("MuiButtonBase",["root","disabled","focusVisible"]),nV=rV,iV=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],oV=e=>{const{disabled:t,focusVisible:n,focusVisibleClassName:a,classes:c}=e,o=Ur({root:["root",t&&"disabled",n&&"focusVisible"]},tV,c);return n&&a&&(o.root+=` ${a}`),o},aV=zt("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${nV.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),sV=ee.forwardRef(function(t,n){const a=$r({props:t,name:"MuiButtonBase"}),{action:c,centerRipple:f=!1,children:o,className:v,component:x="button",disabled:E=!1,disableRipple:T=!1,disableTouchRipple:P=!1,focusRipple:I=!1,LinkComponent:q="a",onBlur:U,onClick:G,onContextMenu:D,onDragLeave:F,onFocus:V,onFocusVisible:B,onKeyDown:z,onKeyUp:ne,onMouseDown:oe,onMouseLeave:pe,onMouseUp:be,onTouchEnd:Te,onTouchMove:_e,onTouchStart:Se,tabIndex:te=0,TouchRippleProps:he,touchRippleRef:Oe,type:je}=a,Ce=$t(a,iV),ke=ee.useRef(null),$e=ee.useRef(null),Ze=Fi($e,Oe),{isFocusVisibleRef:bt,onFocus:Pe,onBlur:Ge,ref:st}=v8(),[Re,qe]=ee.useState(!1);E&&Re&&qe(!1),ee.useImperativeHandle(c,()=>({focusVisible:()=>{qe(!0),ke.current.focus()}}),[]);const[Kt,It]=ee.useState(!1);ee.useEffect(()=>{It(!0)},[]);const Ot=Kt&&!T&&!E;ee.useEffect(()=>{Re&&I&&!T&&Kt&&$e.current.pulsate()},[T,I,Re,Kt]);function Et(Bt,Un,On=P){return Us(ji=>(Un&&Un(ji),!On&&$e.current&&$e.current[Bt](ji),!0))}const nr=Et("start",oe),Zt=Et("stop",D),Yt=Et("stop",F),at=Et("stop",be),Dt=Et("stop",Bt=>{Re&&Bt.preventDefault(),pe&&pe(Bt)}),er=Et("start",Se),Rr=Et("stop",Te),Nr=Et("stop",_e),tr=Et("stop",Bt=>{Ge(Bt),bt.current===!1&&qe(!1),U&&U(Bt)},!1),Vr=Us(Bt=>{ke.current||(ke.current=Bt.currentTarget),Pe(Bt),bt.current===!0&&(qe(!0),B&&B(Bt)),V&&V(Bt)}),Lr=()=>{const Bt=ke.current;return x&&x!=="button"&&!(Bt.tagName==="A"&&Bt.href)},Er=ee.useRef(!1),on=Us(Bt=>{I&&!Er.current&&Re&&$e.current&&Bt.key===" "&&(Er.current=!0,$e.current.stop(Bt,()=>{$e.current.start(Bt)})),Bt.target===Bt.currentTarget&&Lr()&&Bt.key===" "&&Bt.preventDefault(),z&&z(Bt),Bt.target===Bt.currentTarget&&Lr()&&Bt.key==="Enter"&&!E&&(Bt.preventDefault(),G&&G(Bt))}),Mr=Us(Bt=>{I&&Bt.key===" "&&$e.current&&Re&&!Bt.defaultPrevented&&(Er.current=!1,$e.current.stop(Bt,()=>{$e.current.pulsate(Bt)})),ne&&ne(Bt),G&&Bt.target===Bt.currentTarget&&Lr()&&Bt.key===" "&&!Bt.defaultPrevented&&G(Bt)});let lr=x;lr==="button"&&(Ce.href||Ce.to)&&(lr=q);const Xr={};lr==="button"?(Xr.type=je===void 0?"button":je,Xr.disabled=E):(!Ce.href&&!Ce.to&&(Xr.role="button"),E&&(Xr["aria-disabled"]=E));const wn=Fi(n,st,ke),oi=fe({},a,{centerRipple:f,component:x,disabled:E,disableRipple:T,disableTouchRipple:P,focusRipple:I,tabIndex:te,focusVisible:Re}),dr=oV(oi);return Q.jsxs(aV,fe({as:lr,className:qt(dr.root,v),ownerState:oi,onBlur:tr,onClick:G,onContextMenu:Zt,onFocus:Vr,onKeyDown:on,onKeyUp:Mr,onMouseDown:nr,onMouseLeave:Dt,onMouseUp:at,onDragLeave:Yt,onTouchEnd:Rr,onTouchMove:Nr,onTouchStart:er,ref:wn,tabIndex:E?-1:te,type:je},Xr,Ce,{children:[o,Ot?Q.jsx(eV,fe({ref:Ze,center:f},he)):null]}))}),Wu=sV;function lV(e){return Br("MuiIconButton",e)}const uV=Tr("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),cV=uV,pV=["edge","children","className","color","disabled","disableFocusRipple","size"],hV=e=>{const{classes:t,disabled:n,color:a,edge:c,size:f}=e,o={root:["root",n&&"disabled",a!=="default"&&`color${Qt(a)}`,c&&`edge${Qt(c)}`,`size${Qt(f)}`]};return Ur(o,lV,t)},dV=zt(Wu,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="default"&&t[`color${Qt(n.color)}`],n.edge&&t[`edge${Qt(n.edge)}`],t[`size${Qt(n.size)}`]]}})(({theme:e,ownerState:t})=>fe({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest})},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:pi(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.edge==="start"&&{marginLeft:t.size==="small"?-3:-12},t.edge==="end"&&{marginRight:t.size==="small"?-3:-12}),({theme:e,ownerState:t})=>{var n;const a=(n=(e.vars||e).palette)==null?void 0:n[t.color];return fe({},t.color==="inherit"&&{color:"inherit"},t.color!=="inherit"&&t.color!=="default"&&fe({color:a==null?void 0:a.main},!t.disableRipple&&{"&:hover":fe({},a&&{backgroundColor:e.vars?`rgba(${a.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:pi(a.main,e.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),t.size==="small"&&{padding:5,fontSize:e.typography.pxToRem(18)},t.size==="large"&&{padding:12,fontSize:e.typography.pxToRem(28)},{[`&.${cV.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled}})}),fV=ee.forwardRef(function(t,n){const a=$r({props:t,name:"MuiIconButton"}),{edge:c=!1,children:f,className:o,color:v="default",disabled:x=!1,disableFocusRipple:E=!1,size:T="medium"}=a,P=$t(a,pV),I=fe({},a,{edge:c,color:v,disabled:x,disableFocusRipple:E,size:T}),q=hV(I);return Q.jsx(dV,fe({className:qt(q.root,o),centerRipple:!0,focusRipple:!E,disabled:x,ref:n,ownerState:I},P,{children:f}))}),mV=fV;function yV(e){return Br("MuiTypography",e)}Tr("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const gV=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],vV=e=>{const{align:t,gutterBottom:n,noWrap:a,paragraph:c,variant:f,classes:o}=e,v={root:["root",f,e.align!=="inherit"&&`align${Qt(t)}`,n&&"gutterBottom",a&&"noWrap",c&&"paragraph"]};return Ur(v,yV,o)},_V=zt("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.variant&&t[n.variant],n.align!=="inherit"&&t[`align${Qt(n.align)}`],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})(({theme:e,ownerState:t})=>fe({margin:0},t.variant==="inherit"&&{font:"inherit"},t.variant!=="inherit"&&e.typography[t.variant],t.align!=="inherit"&&{textAlign:t.align},t.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t.gutterBottom&&{marginBottom:"0.35em"},t.paragraph&&{marginBottom:16})),gC={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},xV={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},bV=e=>xV[e]||e,wV=ee.forwardRef(function(t,n){const a=$r({props:t,name:"MuiTypography"}),c=bV(a.color),f=XP(fe({},a,{color:c})),{align:o="inherit",className:v,component:x,gutterBottom:E=!1,noWrap:T=!1,paragraph:P=!1,variant:I="body1",variantMapping:q=gC}=f,U=$t(f,gV),G=fe({},f,{align:o,color:c,className:v,component:x,gutterBottom:E,noWrap:T,paragraph:P,variant:I,variantMapping:q}),D=x||(P?"p":q[I]||gC[I])||"span",F=vV(G);return Q.jsx(_V,fe({as:D,ref:n,ownerState:G,className:qt(F.root,v)},U))}),lp=wV,SV=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function EV(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?e.contentEditable==="true"||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:t}function CV(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;const t=a=>e.ownerDocument.querySelector(`input[type="radio"]${a}`);let n=t(`[name="${e.name}"]:checked`);return n||(n=t(`[name="${e.name}"]`)),n!==e}function kV(e){return!(e.disabled||e.tagName==="INPUT"&&e.type==="hidden"||CV(e))}function TV(e){const t=[],n=[];return Array.from(e.querySelectorAll(SV)).forEach((a,c)=>{const f=EV(a);f===-1||!kV(a)||(f===0?t.push(a):n.push({documentOrder:c,tabIndex:f,node:a}))}),n.sort((a,c)=>a.tabIndex===c.tabIndex?a.documentOrder-c.documentOrder:a.tabIndex-c.tabIndex).map(a=>a.node).concat(t)}function IV(){return!0}function PV(e){const{children:t,disableAutoFocus:n=!1,disableEnforceFocus:a=!1,disableRestoreFocus:c=!1,getTabbable:f=TV,isEnabled:o=IV,open:v}=e,x=ee.useRef(!1),E=ee.useRef(null),T=ee.useRef(null),P=ee.useRef(null),I=ee.useRef(null),q=ee.useRef(!1),U=ee.useRef(null),G=Fi(t.ref,U),D=ee.useRef(null);ee.useEffect(()=>{!v||!U.current||(q.current=!n)},[n,v]),ee.useEffect(()=>{if(!v||!U.current)return;const B=ko(U.current);return U.current.contains(B.activeElement)||(U.current.hasAttribute("tabIndex")||U.current.setAttribute("tabIndex","-1"),q.current&&U.current.focus()),()=>{c||(P.current&&P.current.focus&&(x.current=!0,P.current.focus()),P.current=null)}},[v]),ee.useEffect(()=>{if(!v||!U.current)return;const B=ko(U.current),z=pe=>{D.current=pe,!(a||!o()||pe.key!=="Tab")&&B.activeElement===U.current&&pe.shiftKey&&(x.current=!0,T.current&&T.current.focus())},ne=()=>{const pe=U.current;if(pe===null)return;if(!B.hasFocus()||!o()||x.current){x.current=!1;return}if(pe.contains(B.activeElement)||a&&B.activeElement!==E.current&&B.activeElement!==T.current)return;if(B.activeElement!==I.current)I.current=null;else if(I.current!==null)return;if(!q.current)return;let be=[];if((B.activeElement===E.current||B.activeElement===T.current)&&(be=f(U.current)),be.length>0){var Te,_e;const Se=!!((Te=D.current)!=null&&Te.shiftKey&&((_e=D.current)==null?void 0:_e.key)==="Tab"),te=be[0],he=be[be.length-1];typeof te!="string"&&typeof he!="string"&&(Se?he.focus():te.focus())}else pe.focus()};B.addEventListener("focusin",ne),B.addEventListener("keydown",z,!0);const oe=setInterval(()=>{B.activeElement&&B.activeElement.tagName==="BODY"&&ne()},50);return()=>{clearInterval(oe),B.removeEventListener("focusin",ne),B.removeEventListener("keydown",z,!0)}},[n,a,c,o,v,f]);const F=B=>{P.current===null&&(P.current=B.relatedTarget),q.current=!0,I.current=B.target;const z=t.props.onFocus;z&&z(B)},V=B=>{P.current===null&&(P.current=B.relatedTarget),q.current=!0};return Q.jsxs(ee.Fragment,{children:[Q.jsx("div",{tabIndex:v?0:-1,onFocus:V,ref:E,"data-testid":"sentinelStart"}),ee.cloneElement(t,{ref:G,onFocus:F}),Q.jsx("div",{tabIndex:v?0:-1,onFocus:V,ref:T,"data-testid":"sentinelEnd"})]})}function AV(e){return typeof e=="function"?e():e}const MV=ee.forwardRef(function(t,n){const{children:a,container:c,disablePortal:f=!1}=t,[o,v]=ee.useState(null),x=Fi(ee.isValidElement(a)?a.ref:null,n);if(Sa(()=>{f||v(AV(c)||document.body)},[c,f]),Sa(()=>{if(o&&!f)return Nx(n,o),()=>{Nx(n,null)}},[n,o,f]),f){if(ee.isValidElement(a)){const E={ref:x};return ee.cloneElement(a,E)}return Q.jsx(ee.Fragment,{children:a})}return Q.jsx(ee.Fragment,{children:o&&j1.createPortal(a,o)})});function RV(e){const t=ko(e);return t.body===e?Ws(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function Dd(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function vC(e){return parseInt(Ws(e).getComputedStyle(e).paddingRight,10)||0}function LV(e){const n=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(e.tagName)!==-1,a=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return n||a}function _C(e,t,n,a,c){const f=[t,n,...a];[].forEach.call(e.children,o=>{const v=f.indexOf(o)===-1,x=!LV(o);v&&x&&Dd(o,c)})}function T_(e,t){let n=-1;return e.some((a,c)=>t(a)?(n=c,!0):!1),n}function zV(e,t){const n=[],a=e.container;if(!t.disableScrollLock){if(RV(a)){const o=qP(ko(a));n.push({value:a.style.paddingRight,property:"padding-right",el:a}),a.style.paddingRight=`${vC(a)+o}px`;const v=ko(a).querySelectorAll(".mui-fixed");[].forEach.call(v,x=>{n.push({value:x.style.paddingRight,property:"padding-right",el:x}),x.style.paddingRight=`${vC(x)+o}px`})}let f;if(a.parentNode instanceof DocumentFragment)f=ko(a).body;else{const o=a.parentElement,v=Ws(a);f=(o==null?void 0:o.nodeName)==="HTML"&&v.getComputedStyle(o).overflowY==="scroll"?o:a}n.push({value:f.style.overflow,property:"overflow",el:f},{value:f.style.overflowX,property:"overflow-x",el:f},{value:f.style.overflowY,property:"overflow-y",el:f}),f.style.overflow="hidden"}return()=>{n.forEach(({value:f,el:o,property:v})=>{f?o.style.setProperty(v,f):o.style.removeProperty(v)})}}function DV(e){const t=[];return[].forEach.call(e.children,n=>{n.getAttribute("aria-hidden")==="true"&&t.push(n)}),t}class OV{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(t,n){let a=this.modals.indexOf(t);if(a!==-1)return a;a=this.modals.length,this.modals.push(t),t.modalRef&&Dd(t.modalRef,!1);const c=DV(n);_C(n,t.mount,t.modalRef,c,!0);const f=T_(this.containers,o=>o.container===n);return f!==-1?(this.containers[f].modals.push(t),a):(this.containers.push({modals:[t],container:n,restore:null,hiddenSiblings:c}),a)}mount(t,n){const a=T_(this.containers,f=>f.modals.indexOf(t)!==-1),c=this.containers[a];c.restore||(c.restore=zV(c,n))}remove(t,n=!0){const a=this.modals.indexOf(t);if(a===-1)return a;const c=T_(this.containers,o=>o.modals.indexOf(t)!==-1),f=this.containers[c];if(f.modals.splice(f.modals.indexOf(t),1),this.modals.splice(a,1),f.modals.length===0)f.restore&&f.restore(),t.modalRef&&Dd(t.modalRef,n),_C(f.container,t.mount,t.modalRef,f.hiddenSiblings,!1),this.containers.splice(c,1);else{const o=f.modals[f.modals.length-1];o.modalRef&&Dd(o.modalRef,!1)}return a}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}function BV(e){return typeof e=="function"?e():e}function NV(e){return e?e.props.hasOwnProperty("in"):!1}const FV=new OV;function jV(e){const{container:t,disableEscapeKeyDown:n=!1,disableScrollLock:a=!1,manager:c=FV,closeAfterTransition:f=!1,onTransitionEnter:o,onTransitionExited:v,children:x,onClose:E,open:T,rootRef:P}=e,I=ee.useRef({}),q=ee.useRef(null),U=ee.useRef(null),G=Fi(U,P),[D,F]=ee.useState(!T),V=NV(x);let B=!0;(e["aria-hidden"]==="false"||e["aria-hidden"]===!1)&&(B=!1);const z=()=>ko(q.current),ne=()=>(I.current.modalRef=U.current,I.current.mount=q.current,I.current),oe=()=>{c.mount(ne(),{disableScrollLock:a}),U.current&&(U.current.scrollTop=0)},pe=Us(()=>{const Ce=BV(t)||z().body;c.add(ne(),Ce),U.current&&oe()}),be=ee.useCallback(()=>c.isTopModal(ne()),[c]),Te=Us(Ce=>{q.current=Ce,Ce&&(T&&be()?oe():U.current&&Dd(U.current,B))}),_e=ee.useCallback(()=>{c.remove(ne(),B)},[B,c]);ee.useEffect(()=>()=>{_e()},[_e]),ee.useEffect(()=>{T?pe():(!V||!f)&&_e()},[T,_e,V,f,pe]);const Se=Ce=>ke=>{var $e;($e=Ce.onKeyDown)==null||$e.call(Ce,ke),!(ke.key!=="Escape"||ke.which===229||!be())&&(n||(ke.stopPropagation(),E&&E(ke,"escapeKeyDown")))},te=Ce=>ke=>{var $e;($e=Ce.onClick)==null||$e.call(Ce,ke),ke.target===ke.currentTarget&&E&&E(ke,"backdropClick")};return{getRootProps:(Ce={})=>{const ke=oA(e);delete ke.onTransitionEnter,delete ke.onTransitionExited;const $e=fe({},ke,Ce);return fe({role:"presentation"},$e,{onKeyDown:Se($e),ref:G})},getBackdropProps:(Ce={})=>{const ke=Ce;return fe({"aria-hidden":!0},ke,{onClick:te(ke),open:T})},getTransitionProps:()=>{const Ce=()=>{F(!1),o&&o()},ke=()=>{F(!0),v&&v(),f&&_e()};return{onEnter:HE(Ce,x==null?void 0:x.props.onEnter),onExited:HE(ke,x==null?void 0:x.props.onExited)}},rootRef:G,portalRef:Te,isTopModal:be,exited:D,hasTransition:V}}const UV=["onChange","maxRows","minRows","style","value"];function Ym(e){return parseInt(e,10)||0}const $V={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function xC(e){return e==null||Object.keys(e).length===0||e.outerHeightStyle===0&&!e.overflow}const VV=ee.forwardRef(function(t,n){const{onChange:a,maxRows:c,minRows:f=1,style:o,value:v}=t,x=$t(t,UV),{current:E}=ee.useRef(v!=null),T=ee.useRef(null),P=Fi(n,T),I=ee.useRef(null),q=ee.useRef(0),[U,G]=ee.useState({outerHeightStyle:0}),D=ee.useCallback(()=>{const z=T.current,oe=Ws(z).getComputedStyle(z);if(oe.width==="0px")return{outerHeightStyle:0};const pe=I.current;pe.style.width=oe.width,pe.value=z.value||t.placeholder||"x",pe.value.slice(-1)===`
`&&(pe.value+=" ");const be=oe.boxSizing,Te=Ym(oe.paddingBottom)+Ym(oe.paddingTop),_e=Ym(oe.borderBottomWidth)+Ym(oe.borderTopWidth),Se=pe.scrollHeight;pe.value="x";const te=pe.scrollHeight;let he=Se;f&&(he=Math.max(Number(f)*te,he)),c&&(he=Math.min(Number(c)*te,he)),he=Math.max(he,te);const Oe=he+(be==="border-box"?Te+_e:0),je=Math.abs(he-Se)<=1;return{outerHeightStyle:Oe,overflow:je}},[c,f,t.placeholder]),F=(z,ne)=>{const{outerHeightStyle:oe,overflow:pe}=ne;return q.current<20&&(oe>0&&Math.abs((z.outerHeightStyle||0)-oe)>1||z.overflow!==pe)?(q.current+=1,{overflow:pe,outerHeightStyle:oe}):z},V=ee.useCallback(()=>{const z=D();xC(z)||G(ne=>F(ne,z))},[D]);Sa(()=>{const z=()=>{const Se=D();xC(Se)||j1.flushSync(()=>{G(te=>F(te,Se))})},ne=()=>{q.current=0,z()};let oe;const pe=ev(ne),be=T.current,Te=Ws(be);Te.addEventListener("resize",pe);let _e;return typeof ResizeObserver<"u"&&(_e=new ResizeObserver(ne),_e.observe(be)),()=>{pe.clear(),cancelAnimationFrame(oe),Te.removeEventListener("resize",pe),_e&&_e.disconnect()}},[D]),Sa(()=>{V()}),ee.useEffect(()=>{q.current=0},[v]);const B=z=>{q.current=0,E||V(),a&&a(z)};return Q.jsxs(ee.Fragment,{children:[Q.jsx("textarea",fe({value:v,onChange:B,ref:P,rows:f,style:fe({height:U.outerHeightStyle,overflow:U.overflow?"hidden":void 0},o)},x)),Q.jsx("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:I,tabIndex:-1,style:fe({},$V.shadow,o,{paddingTop:0,paddingBottom:0})})]})});function Hp({props:e,states:t,muiFormControl:n}){return t.reduce((a,c)=>(a[c]=e[c],n&&typeof e[c]>"u"&&(a[c]=n[c]),a),{})}const qV=ee.createContext(void 0),Rb=qV;function Zp(){return ee.useContext(Rb)}function WV(e){return Q.jsx(SU,fe({},e,{defaultTheme:dv,themeId:vf}))}function bC(e){return e!=null&&!(Array.isArray(e)&&e.length===0)}function fg(e,t=!1){return e&&(bC(e.value)&&e.value!==""||t&&bC(e.defaultValue)&&e.defaultValue!=="")}function GV(e){return e.startAdornment}function HV(e){return Br("MuiInputBase",e)}const ZV=Tr("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),Dp=ZV,KV=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],Cv=(e,t)=>{const{ownerState:n}=e;return[t.root,n.formControl&&t.formControl,n.startAdornment&&t.adornedStart,n.endAdornment&&t.adornedEnd,n.error&&t.error,n.size==="small"&&t.sizeSmall,n.multiline&&t.multiline,n.color&&t[`color${Qt(n.color)}`],n.fullWidth&&t.fullWidth,n.hiddenLabel&&t.hiddenLabel]},kv=(e,t)=>{const{ownerState:n}=e;return[t.input,n.size==="small"&&t.inputSizeSmall,n.multiline&&t.inputMultiline,n.type==="search"&&t.inputTypeSearch,n.startAdornment&&t.inputAdornedStart,n.endAdornment&&t.inputAdornedEnd,n.hiddenLabel&&t.inputHiddenLabel]},XV=e=>{const{classes:t,color:n,disabled:a,error:c,endAdornment:f,focused:o,formControl:v,fullWidth:x,hiddenLabel:E,multiline:T,readOnly:P,size:I,startAdornment:q,type:U}=e,G={root:["root",`color${Qt(n)}`,a&&"disabled",c&&"error",x&&"fullWidth",o&&"focused",v&&"formControl",I&&I!=="medium"&&`size${Qt(I)}`,T&&"multiline",q&&"adornedStart",f&&"adornedEnd",E&&"hiddenLabel",P&&"readOnly"],input:["input",a&&"disabled",U==="search"&&"inputTypeSearch",T&&"inputMultiline",I==="small"&&"inputSizeSmall",E&&"inputHiddenLabel",q&&"inputAdornedStart",f&&"inputAdornedEnd",P&&"readOnly"]};return Ur(G,HV,t)},Tv=zt("div",{name:"MuiInputBase",slot:"Root",overridesResolver:Cv})(({theme:e,ownerState:t})=>fe({},e.typography.body1,{color:(e.vars||e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${Dp.disabled}`]:{color:(e.vars||e).palette.text.disabled,cursor:"default"}},t.multiline&&fe({padding:"4px 0 5px"},t.size==="small"&&{paddingTop:1}),t.fullWidth&&{width:"100%"})),Iv=zt("input",{name:"MuiInputBase",slot:"Input",overridesResolver:kv})(({theme:e,ownerState:t})=>{const n=e.palette.mode==="light",a=fe({color:"currentColor"},e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5},{transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})}),c={opacity:"0 !important"},f=e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5};return fe({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":a,"&::-moz-placeholder":a,"&:-ms-input-placeholder":a,"&::-ms-input-placeholder":a,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${Dp.formControl} &`]:{"&::-webkit-input-placeholder":c,"&::-moz-placeholder":c,"&:-ms-input-placeholder":c,"&::-ms-input-placeholder":c,"&:focus::-webkit-input-placeholder":f,"&:focus::-moz-placeholder":f,"&:focus:-ms-input-placeholder":f,"&:focus::-ms-input-placeholder":f},[`&.${Dp.disabled}`]:{opacity:1,WebkitTextFillColor:(e.vars||e).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},t.size==="small"&&{paddingTop:1},t.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},t.type==="search"&&{MozAppearance:"textfield"})}),YV=Q.jsx(WV,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),JV=ee.forwardRef(function(t,n){var a;const c=$r({props:t,name:"MuiInputBase"}),{"aria-describedby":f,autoComplete:o,autoFocus:v,className:x,components:E={},componentsProps:T={},defaultValue:P,disabled:I,disableInjectingGlobalStyles:q,endAdornment:U,fullWidth:G=!1,id:D,inputComponent:F="input",inputProps:V={},inputRef:B,maxRows:z,minRows:ne,multiline:oe=!1,name:pe,onBlur:be,onChange:Te,onClick:_e,onFocus:Se,onKeyDown:te,onKeyUp:he,placeholder:Oe,readOnly:je,renderSuffix:Ce,rows:ke,slotProps:$e={},slots:Ze={},startAdornment:bt,type:Pe="text",value:Ge}=c,st=$t(c,KV),Re=V.value!=null?V.value:Ge,{current:qe}=ee.useRef(Re!=null),Kt=ee.useRef(),It=ee.useCallback(dr=>{},[]),Ot=Fi(Kt,B,V.ref,It),[Et,nr]=ee.useState(!1),Zt=Zp(),Yt=Hp({props:c,muiFormControl:Zt,states:["color","disabled","error","hiddenLabel","size","required","filled"]});Yt.focused=Zt?Zt.focused:Et,ee.useEffect(()=>{!Zt&&I&&Et&&(nr(!1),be&&be())},[Zt,I,Et,be]);const at=Zt&&Zt.onFilled,Dt=Zt&&Zt.onEmpty,er=ee.useCallback(dr=>{fg(dr)?at&&at():Dt&&Dt()},[at,Dt]);Sa(()=>{qe&&er({value:Re})},[Re,er,qe]);const Rr=dr=>{if(Yt.disabled){dr.stopPropagation();return}Se&&Se(dr),V.onFocus&&V.onFocus(dr),Zt&&Zt.onFocus?Zt.onFocus(dr):nr(!0)},Nr=dr=>{be&&be(dr),V.onBlur&&V.onBlur(dr),Zt&&Zt.onBlur?Zt.onBlur(dr):nr(!1)},tr=(dr,...Bt)=>{if(!qe){const Un=dr.target||Kt.current;if(Un==null)throw new Error(Bl(1));er({value:Un.value})}V.onChange&&V.onChange(dr,...Bt),Te&&Te(dr,...Bt)};ee.useEffect(()=>{er(Kt.current)},[]);const Vr=dr=>{Kt.current&&dr.currentTarget===dr.target&&Kt.current.focus(),_e&&_e(dr)};let Lr=F,Er=V;oe&&Lr==="input"&&(ke?Er=fe({type:void 0,minRows:ke,maxRows:ke},Er):Er=fe({type:void 0,maxRows:z,minRows:ne},Er),Lr=VV);const on=dr=>{er(dr.animationName==="mui-auto-fill-cancel"?Kt.current:{value:"x"})};ee.useEffect(()=>{Zt&&Zt.setAdornedStart(!!bt)},[Zt,bt]);const Mr=fe({},c,{color:Yt.color||"primary",disabled:Yt.disabled,endAdornment:U,error:Yt.error,focused:Yt.focused,formControl:Zt,fullWidth:G,hiddenLabel:Yt.hiddenLabel,multiline:oe,size:Yt.size,startAdornment:bt,type:Pe}),lr=XV(Mr),Xr=Ze.root||E.Root||Tv,wn=$e.root||T.root||{},oi=Ze.input||E.Input||Iv;return Er=fe({},Er,(a=$e.input)!=null?a:T.input),Q.jsxs(ee.Fragment,{children:[!q&&YV,Q.jsxs(Xr,fe({},wn,!zp(Xr)&&{ownerState:fe({},Mr,wn.ownerState)},{ref:n,onClick:Vr},st,{className:qt(lr.root,wn.className,x,je&&"MuiInputBase-readOnly"),children:[bt,Q.jsx(Rb.Provider,{value:null,children:Q.jsx(oi,fe({ownerState:Mr,"aria-invalid":Yt.error,"aria-describedby":f,autoComplete:o,autoFocus:v,defaultValue:P,disabled:Yt.disabled,id:D,onAnimationStart:on,name:pe,placeholder:Oe,readOnly:je,required:Yt.required,rows:ke,value:Re,onKeyDown:te,onKeyUp:he,type:Pe},Er,!zp(oi)&&{as:Lr,ownerState:fe({},Mr,Er.ownerState)},{ref:Ot,className:qt(lr.input,Er.className,je&&"MuiInputBase-readOnly"),onBlur:Nr,onChange:tr,onFocus:Rr}))}),U,Ce?Ce(fe({},Yt,{startAdornment:bt})):null]}))]})}),Lb=JV;function QV(e){return Br("MuiInput",e)}const e9=fe({},Dp,Tr("MuiInput",["root","underline","input"])),sd=e9;function t9(e){return Br("MuiOutlinedInput",e)}const r9=fe({},Dp,Tr("MuiOutlinedInput",["root","notchedOutline","input"])),fl=r9;function n9(e){return Br("MuiFilledInput",e)}const i9=fe({},Dp,Tr("MuiFilledInput",["root","underline","input"])),xu=i9,o9=kb(Q.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),a9=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],s9={entering:{opacity:1},entered:{opacity:1}},l9=ee.forwardRef(function(t,n){const a=Gp(),c={enter:a.transitions.duration.enteringScreen,exit:a.transitions.duration.leavingScreen},{addEndListener:f,appear:o=!0,children:v,easing:x,in:E,onEnter:T,onEntered:P,onEntering:I,onExit:q,onExited:U,onExiting:G,style:D,timeout:F=c,TransitionComponent:V=nA}=t,B=$t(t,a9),z=ee.useRef(null),ne=Fi(z,v.ref,n),oe=Oe=>je=>{if(Oe){const Ce=z.current;je===void 0?Oe(Ce):Oe(Ce,je)}},pe=oe(I),be=oe((Oe,je)=>{iA(Oe);const Ce=dg({style:D,timeout:F,easing:x},{mode:"enter"});Oe.style.webkitTransition=a.transitions.create("opacity",Ce),Oe.style.transition=a.transitions.create("opacity",Ce),T&&T(Oe,je)}),Te=oe(P),_e=oe(G),Se=oe(Oe=>{const je=dg({style:D,timeout:F,easing:x},{mode:"exit"});Oe.style.webkitTransition=a.transitions.create("opacity",je),Oe.style.transition=a.transitions.create("opacity",je),q&&q(Oe)}),te=oe(U),he=Oe=>{f&&f(z.current,Oe)};return Q.jsx(V,fe({appear:o,in:E,nodeRef:z,onEnter:be,onEntered:Te,onEntering:pe,onExit:Se,onExited:te,onExiting:_e,addEndListener:he,timeout:F},B,{children:(Oe,je)=>ee.cloneElement(v,fe({style:fe({opacity:0,visibility:Oe==="exited"&&!E?"hidden":void 0},s9[Oe],D,v.props.style),ref:ne},je))}))}),aA=l9;function u9(e){return Br("MuiBackdrop",e)}Tr("MuiBackdrop",["root","invisible"]);const c9=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],p9=e=>{const{classes:t,invisible:n}=e;return Ur({root:["root",n&&"invisible"]},u9,t)},h9=zt("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.invisible&&t.invisible]}})(({ownerState:e})=>fe({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},e.invisible&&{backgroundColor:"transparent"})),d9=ee.forwardRef(function(t,n){var a,c,f;const o=$r({props:t,name:"MuiBackdrop"}),{children:v,className:x,component:E="div",components:T={},componentsProps:P={},invisible:I=!1,open:q,slotProps:U={},slots:G={},TransitionComponent:D=aA,transitionDuration:F}=o,V=$t(o,c9),B=fe({},o,{component:E,invisible:I}),z=p9(B),ne=(a=U.root)!=null?a:P.root;return Q.jsx(D,fe({in:q,timeout:F},V,{children:Q.jsx(h9,fe({"aria-hidden":!0},ne,{as:(c=(f=G.root)!=null?f:T.Root)!=null?c:E,className:qt(z.root,x,ne==null?void 0:ne.className),ownerState:fe({},B,ne==null?void 0:ne.ownerState),classes:z,ref:n,children:v}))}))}),sA=d9,f9=Tr("MuiBox",["root"]),m9=f9,y9=QP(),g9=TU({themeId:vf,defaultTheme:y9,defaultClassName:m9.root,generateClassName:GP.generate}),ao=g9;function v9(e){return Br("MuiButton",e)}const _9=Tr("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),Jm=_9,x9=ee.createContext({}),b9=x9,w9=ee.createContext(void 0),S9=w9,E9=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],C9=e=>{const{color:t,disableElevation:n,fullWidth:a,size:c,variant:f,classes:o}=e,v={root:["root",f,`${f}${Qt(t)}`,`size${Qt(c)}`,`${f}Size${Qt(c)}`,t==="inherit"&&"colorInherit",n&&"disableElevation",a&&"fullWidth"],label:["label"],startIcon:["startIcon",`iconSize${Qt(c)}`],endIcon:["endIcon",`iconSize${Qt(c)}`]},x=Ur(v,v9,o);return fe({},o,x)},lA=e=>fe({},e.size==="small"&&{"& > *:nth-of-type(1)":{fontSize:18}},e.size==="medium"&&{"& > *:nth-of-type(1)":{fontSize:20}},e.size==="large"&&{"& > *:nth-of-type(1)":{fontSize:22}}),k9=zt(Wu,{shouldForwardProp:e=>Wo(e)||e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`${n.variant}${Qt(n.color)}`],t[`size${Qt(n.size)}`],t[`${n.variant}Size${Qt(n.size)}`],n.color==="inherit"&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth]}})(({theme:e,ownerState:t})=>{var n,a;const c=e.palette.mode==="light"?e.palette.grey[300]:e.palette.grey[800],f=e.palette.mode==="light"?e.palette.grey.A100:e.palette.grey[700];return fe({},e.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":fe({textDecoration:"none",backgroundColor:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:pi(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="text"&&t.color!=="inherit"&&{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:pi(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="outlined"&&t.color!=="inherit"&&{border:`1px solid ${(e.vars||e).palette[t.color].main}`,backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:pi(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="contained"&&{backgroundColor:e.vars?e.vars.palette.Button.inheritContainedHoverBg:f,boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2],backgroundColor:(e.vars||e).palette.grey[300]}},t.variant==="contained"&&t.color!=="inherit"&&{backgroundColor:(e.vars||e).palette[t.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t.color].main}}),"&:active":fe({},t.variant==="contained"&&{boxShadow:(e.vars||e).shadows[8]}),[`&.${Jm.focusVisible}`]:fe({},t.variant==="contained"&&{boxShadow:(e.vars||e).shadows[6]}),[`&.${Jm.disabled}`]:fe({color:(e.vars||e).palette.action.disabled},t.variant==="outlined"&&{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`},t.variant==="contained"&&{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground})},t.variant==="text"&&{padding:"6px 8px"},t.variant==="text"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].main},t.variant==="outlined"&&{padding:"5px 15px",border:"1px solid currentColor"},t.variant==="outlined"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].main,border:e.vars?`1px solid rgba(${e.vars.palette[t.color].mainChannel} / 0.5)`:`1px solid ${pi(e.palette[t.color].main,.5)}`},t.variant==="contained"&&{color:e.vars?e.vars.palette.text.primary:(n=(a=e.palette).getContrastText)==null?void 0:n.call(a,e.palette.grey[300]),backgroundColor:e.vars?e.vars.palette.Button.inheritContainedBg:c,boxShadow:(e.vars||e).shadows[2]},t.variant==="contained"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].contrastText,backgroundColor:(e.vars||e).palette[t.color].main},t.color==="inherit"&&{color:"inherit",borderColor:"currentColor"},t.size==="small"&&t.variant==="text"&&{padding:"4px 5px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="text"&&{padding:"8px 11px",fontSize:e.typography.pxToRem(15)},t.size==="small"&&t.variant==="outlined"&&{padding:"3px 9px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="outlined"&&{padding:"7px 21px",fontSize:e.typography.pxToRem(15)},t.size==="small"&&t.variant==="contained"&&{padding:"4px 10px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="contained"&&{padding:"8px 22px",fontSize:e.typography.pxToRem(15)},t.fullWidth&&{width:"100%"})},({ownerState:e})=>e.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${Jm.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${Jm.disabled}`]:{boxShadow:"none"}}),T9=zt("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.startIcon,t[`iconSize${Qt(n.size)}`]]}})(({ownerState:e})=>fe({display:"inherit",marginRight:8,marginLeft:-4},e.size==="small"&&{marginLeft:-2},lA(e))),I9=zt("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.endIcon,t[`iconSize${Qt(n.size)}`]]}})(({ownerState:e})=>fe({display:"inherit",marginRight:-4,marginLeft:8},e.size==="small"&&{marginRight:-2},lA(e))),P9=ee.forwardRef(function(t,n){const a=ee.useContext(b9),c=ee.useContext(S9),f=_b(a,t),o=$r({props:f,name:"MuiButton"}),{children:v,color:x="primary",component:E="button",className:T,disabled:P=!1,disableElevation:I=!1,disableFocusRipple:q=!1,endIcon:U,focusVisibleClassName:G,fullWidth:D=!1,size:F="medium",startIcon:V,type:B,variant:z="text"}=o,ne=$t(o,E9),oe=fe({},o,{color:x,component:E,disabled:P,disableElevation:I,disableFocusRipple:q,fullWidth:D,size:F,type:B,variant:z}),pe=C9(oe),be=V&&Q.jsx(T9,{className:pe.startIcon,ownerState:oe,children:V}),Te=U&&Q.jsx(I9,{className:pe.endIcon,ownerState:oe,children:U}),_e=c||"";return Q.jsxs(k9,fe({ownerState:oe,className:qt(a.className,pe.root,T,_e),component:E,disabled:P,focusRipple:!q,focusVisibleClassName:qt(pe.focusVisible,G),ref:n,type:B},ne,{classes:pe,children:[be,v,Te]}))}),xl=P9;function A9(e){return Br("MuiModal",e)}Tr("MuiModal",["root","hidden","backdrop"]);const M9=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","onTransitionEnter","onTransitionExited","open","slotProps","slots","theme"],R9=e=>{const{open:t,exited:n,classes:a}=e;return Ur({root:["root",!t&&n&&"hidden"],backdrop:["backdrop"]},A9,a)},L9=zt("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.open&&n.exited&&t.hidden]}})(({theme:e,ownerState:t})=>fe({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0},!t.open&&t.exited&&{visibility:"hidden"})),z9=zt(sA,{name:"MuiModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({zIndex:-1}),D9=ee.forwardRef(function(t,n){var a,c,f,o,v,x;const E=$r({name:"MuiModal",props:t}),{BackdropComponent:T=z9,BackdropProps:P,className:I,closeAfterTransition:q=!1,children:U,container:G,component:D,components:F={},componentsProps:V={},disableAutoFocus:B=!1,disableEnforceFocus:z=!1,disableEscapeKeyDown:ne=!1,disablePortal:oe=!1,disableRestoreFocus:pe=!1,disableScrollLock:be=!1,hideBackdrop:Te=!1,keepMounted:_e=!1,onBackdropClick:Se,open:te,slotProps:he,slots:Oe}=E,je=$t(E,M9),Ce=fe({},E,{closeAfterTransition:q,disableAutoFocus:B,disableEnforceFocus:z,disableEscapeKeyDown:ne,disablePortal:oe,disableRestoreFocus:pe,disableScrollLock:be,hideBackdrop:Te,keepMounted:_e}),{getRootProps:ke,getBackdropProps:$e,getTransitionProps:Ze,portalRef:bt,isTopModal:Pe,exited:Ge,hasTransition:st}=jV(fe({},Ce,{rootRef:n})),Re=fe({},Ce,{exited:Ge}),qe=R9(Re),Kt={};if(U.props.tabIndex===void 0&&(Kt.tabIndex="-1"),st){const{onEnter:at,onExited:Dt}=Ze();Kt.onEnter=at,Kt.onExited=Dt}const It=(a=(c=Oe==null?void 0:Oe.root)!=null?c:F.Root)!=null?a:L9,Ot=(f=(o=Oe==null?void 0:Oe.backdrop)!=null?o:F.Backdrop)!=null?f:T,Et=(v=he==null?void 0:he.root)!=null?v:V.root,nr=(x=he==null?void 0:he.backdrop)!=null?x:V.backdrop,Zt=os({elementType:It,externalSlotProps:Et,externalForwardedProps:je,getSlotProps:ke,additionalProps:{ref:n,as:D},ownerState:Re,className:qt(I,Et==null?void 0:Et.className,qe==null?void 0:qe.root,!Re.open&&Re.exited&&(qe==null?void 0:qe.hidden))}),Yt=os({elementType:Ot,externalSlotProps:nr,additionalProps:P,getSlotProps:at=>$e(fe({},at,{onClick:Dt=>{Se&&Se(Dt),at!=null&&at.onClick&&at.onClick(Dt)}})),className:qt(nr==null?void 0:nr.className,P==null?void 0:P.className,qe==null?void 0:qe.backdrop),ownerState:Re});return!_e&&!te&&(!st||Ge)?null:Q.jsx(MV,{ref:bt,container:G,disablePortal:oe,children:Q.jsxs(It,fe({},Zt,{children:[!Te&&T?Q.jsx(Ot,fe({},Yt)):null,Q.jsx(PV,{disableEnforceFocus:z,disableAutoFocus:B,disableRestoreFocus:pe,isEnabled:Pe,open:te,children:ee.cloneElement(U,Kt)})]}))})}),uA=D9;function O9(e){return Br("MuiDialog",e)}const B9=Tr("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),I_=B9,N9=ee.createContext({}),cA=N9,F9=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],j9=zt(sA,{name:"MuiDialog",slot:"Backdrop",overrides:(e,t)=>t.backdrop})({zIndex:-1}),U9=e=>{const{classes:t,scroll:n,maxWidth:a,fullWidth:c,fullScreen:f}=e,o={root:["root"],container:["container",`scroll${Qt(n)}`],paper:["paper",`paperScroll${Qt(n)}`,`paperWidth${Qt(String(a))}`,c&&"paperFullWidth",f&&"paperFullScreen"]};return Ur(o,O9,t)},$9=zt(uA,{name:"MuiDialog",slot:"Root",overridesResolver:(e,t)=>t.root})({"@media print":{position:"absolute !important"}}),V9=zt("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.container,t[`scroll${Qt(n.scroll)}`]]}})(({ownerState:e})=>fe({height:"100%","@media print":{height:"auto"},outline:0},e.scroll==="paper"&&{display:"flex",justifyContent:"center",alignItems:"center"},e.scroll==="body"&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}})),q9=zt(Mb,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.paper,t[`scrollPaper${Qt(n.scroll)}`],t[`paperWidth${Qt(String(n.maxWidth))}`],n.fullWidth&&t.paperFullWidth,n.fullScreen&&t.paperFullScreen]}})(({theme:e,ownerState:t})=>fe({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},t.scroll==="paper"&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},t.scroll==="body"&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!t.maxWidth&&{maxWidth:"calc(100% - 64px)"},t.maxWidth==="xs"&&{maxWidth:e.breakpoints.unit==="px"?Math.max(e.breakpoints.values.xs,444):`max(${e.breakpoints.values.xs}${e.breakpoints.unit}, 444px)`,[`&.${I_.paperScrollBody}`]:{[e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}},t.maxWidth&&t.maxWidth!=="xs"&&{maxWidth:`${e.breakpoints.values[t.maxWidth]}${e.breakpoints.unit}`,[`&.${I_.paperScrollBody}`]:{[e.breakpoints.down(e.breakpoints.values[t.maxWidth]+32*2)]:{maxWidth:"calc(100% - 64px)"}}},t.fullWidth&&{width:"calc(100% - 64px)"},t.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${I_.paperScrollBody}`]:{margin:0,maxWidth:"100%"}})),W9=ee.forwardRef(function(t,n){const a=$r({props:t,name:"MuiDialog"}),c=Gp(),f={enter:c.transitions.duration.enteringScreen,exit:c.transitions.duration.leavingScreen},{"aria-describedby":o,"aria-labelledby":v,BackdropComponent:x,BackdropProps:E,children:T,className:P,disableEscapeKeyDown:I=!1,fullScreen:q=!1,fullWidth:U=!1,maxWidth:G="sm",onBackdropClick:D,onClose:F,open:V,PaperComponent:B=Mb,PaperProps:z={},scroll:ne="paper",TransitionComponent:oe=aA,transitionDuration:pe=f,TransitionProps:be}=a,Te=$t(a,F9),_e=fe({},a,{disableEscapeKeyDown:I,fullScreen:q,fullWidth:U,maxWidth:G,scroll:ne}),Se=U9(_e),te=ee.useRef(),he=ke=>{te.current=ke.target===ke.currentTarget},Oe=ke=>{te.current&&(te.current=null,D&&D(ke),F&&F(ke,"backdropClick"))},je=vb(v),Ce=ee.useMemo(()=>({titleId:je}),[je]);return Q.jsx($9,fe({className:qt(Se.root,P),closeAfterTransition:!0,components:{Backdrop:j9},componentsProps:{backdrop:fe({transitionDuration:pe,as:x},E)},disableEscapeKeyDown:I,onClose:F,open:V,ref:n,onClick:Oe,ownerState:_e},Te,{children:Q.jsx(oe,fe({appear:!0,in:V,timeout:pe,role:"presentation"},be,{children:Q.jsx(V9,{className:qt(Se.container),onMouseDown:he,ownerState:_e,children:Q.jsx(q9,fe({as:B,elevation:24,role:"dialog","aria-describedby":o,"aria-labelledby":je},z,{className:qt(Se.paper,z.className),ownerState:_e,children:Q.jsx(cA.Provider,{value:Ce,children:T})}))})}))}))}),pA=W9;function G9(e){return Br("MuiDialogActions",e)}Tr("MuiDialogActions",["root","spacing"]);const H9=["className","disableSpacing"],Z9=e=>{const{classes:t,disableSpacing:n}=e;return Ur({root:["root",!n&&"spacing"]},G9,t)},K9=zt("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableSpacing&&t.spacing]}})(({ownerState:e})=>fe({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!e.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})),X9=ee.forwardRef(function(t,n){const a=$r({props:t,name:"MuiDialogActions"}),{className:c,disableSpacing:f=!1}=a,o=$t(a,H9),v=fe({},a,{disableSpacing:f}),x=Z9(v);return Q.jsx(K9,fe({className:qt(x.root,c),ownerState:v,ref:n},o))}),hA=X9;function Y9(e){return Br("MuiDialogContent",e)}Tr("MuiDialogContent",["root","dividers"]);function J9(e){return Br("MuiDialogTitle",e)}const Q9=Tr("MuiDialogTitle",["root"]),e7=Q9,t7=["className","dividers"],r7=e=>{const{classes:t,dividers:n}=e;return Ur({root:["root",n&&"dividers"]},Y9,t)},n7=zt("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dividers&&t.dividers]}})(({theme:e,ownerState:t})=>fe({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},t.dividers?{padding:"16px 24px",borderTop:`1px solid ${(e.vars||e).palette.divider}`,borderBottom:`1px solid ${(e.vars||e).palette.divider}`}:{[`.${e7.root} + &`]:{paddingTop:0}})),i7=ee.forwardRef(function(t,n){const a=$r({props:t,name:"MuiDialogContent"}),{className:c,dividers:f=!1}=a,o=$t(a,t7),v=fe({},a,{dividers:f}),x=r7(v);return Q.jsx(n7,fe({className:qt(x.root,c),ownerState:v,ref:n},o))}),dA=i7,o7=["className","id"],a7=e=>{const{classes:t}=e;return Ur({root:["root"]},J9,t)},s7=zt(lp,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),l7=ee.forwardRef(function(t,n){const a=$r({props:t,name:"MuiDialogTitle"}),{className:c,id:f}=a,o=$t(a,o7),v=a,x=a7(v),{titleId:E=f}=ee.useContext(cA);return Q.jsx(s7,fe({component:"h2",className:qt(x.root,c),ownerState:v,ref:n,variant:"h6",id:f??E},o))}),fA=l7,u7=Tr("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),wC=u7,c7=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],p7=e=>{const{classes:t,disableUnderline:n}=e,c=Ur({root:["root",!n&&"underline"],input:["input"]},n9,t);return fe({},t,c)},h7=zt(Tv,{shouldForwardProp:e=>Wo(e)||e==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...Cv(e,t),!n.disableUnderline&&t.underline]}})(({theme:e,ownerState:t})=>{var n;const a=e.palette.mode==="light",c=a?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",f=a?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",o=a?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",v=a?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return fe({position:"relative",backgroundColor:e.vars?e.vars.palette.FilledInput.bg:f,borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:e.vars?e.vars.palette.FilledInput.hoverBg:o,"@media (hover: none)":{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:f}},[`&.${xu.focused}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:f},[`&.${xu.disabled}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.disabledBg:v}},!t.disableUnderline&&{"&::after":{borderBottom:`2px solid ${(n=(e.vars||e).palette[t.color||"primary"])==null?void 0:n.main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${xu.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${xu.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`:c}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${xu.disabled}, .${xu.error}):before`]:{borderBottom:`1px solid ${(e.vars||e).palette.text.primary}`},[`&.${xu.disabled}:before`]:{borderBottomStyle:"dotted"}},t.startAdornment&&{paddingLeft:12},t.endAdornment&&{paddingRight:12},t.multiline&&fe({padding:"25px 12px 8px"},t.size==="small"&&{paddingTop:21,paddingBottom:4},t.hiddenLabel&&{paddingTop:16,paddingBottom:17},t.hiddenLabel&&t.size==="small"&&{paddingTop:8,paddingBottom:9}))}),d7=zt(Iv,{name:"MuiFilledInput",slot:"Input",overridesResolver:kv})(({theme:e,ownerState:t})=>fe({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},e.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},t.size==="small"&&{paddingTop:21,paddingBottom:4},t.hiddenLabel&&{paddingTop:16,paddingBottom:17},t.startAdornment&&{paddingLeft:0},t.endAdornment&&{paddingRight:0},t.hiddenLabel&&t.size==="small"&&{paddingTop:8,paddingBottom:9},t.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0})),mA=ee.forwardRef(function(t,n){var a,c,f,o;const v=$r({props:t,name:"MuiFilledInput"}),{components:x={},componentsProps:E,fullWidth:T=!1,inputComponent:P="input",multiline:I=!1,slotProps:q,slots:U={},type:G="text"}=v,D=$t(v,c7),F=fe({},v,{fullWidth:T,inputComponent:P,multiline:I,type:G}),V=p7(v),B={root:{ownerState:F},input:{ownerState:F}},z=q??E?Co(B,q??E):B,ne=(a=(c=U.root)!=null?c:x.Root)!=null?a:h7,oe=(f=(o=U.input)!=null?o:x.Input)!=null?f:d7;return Q.jsx(Lb,fe({slots:{root:ne,input:oe},componentsProps:z,fullWidth:T,inputComponent:P,multiline:I,ref:n,type:G},D,{classes:V}))});mA.muiName="Input";const yA=mA;function f7(e){return Br("MuiFormControl",e)}Tr("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const m7=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],y7=e=>{const{classes:t,margin:n,fullWidth:a}=e,c={root:["root",n!=="none"&&`margin${Qt(n)}`,a&&"fullWidth"]};return Ur(c,f7,t)},g7=zt("div",{name:"MuiFormControl",slot:"Root",overridesResolver:({ownerState:e},t)=>fe({},t.root,t[`margin${Qt(e.margin)}`],e.fullWidth&&t.fullWidth)})(({ownerState:e})=>fe({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},e.margin==="normal"&&{marginTop:16,marginBottom:8},e.margin==="dense"&&{marginTop:8,marginBottom:4},e.fullWidth&&{width:"100%"})),v7=ee.forwardRef(function(t,n){const a=$r({props:t,name:"MuiFormControl"}),{children:c,className:f,color:o="primary",component:v="div",disabled:x=!1,error:E=!1,focused:T,fullWidth:P=!1,hiddenLabel:I=!1,margin:q="none",required:U=!1,size:G="medium",variant:D="outlined"}=a,F=$t(a,m7),V=fe({},a,{color:o,component:v,disabled:x,error:E,fullWidth:P,hiddenLabel:I,margin:q,required:U,size:G,variant:D}),B=y7(V),[z,ne]=ee.useState(()=>{let he=!1;return c&&ee.Children.forEach(c,Oe=>{if(!Sy(Oe,["Input","Select"]))return;const je=Sy(Oe,["Select"])?Oe.props.input:Oe;je&&GV(je.props)&&(he=!0)}),he}),[oe,pe]=ee.useState(()=>{let he=!1;return c&&ee.Children.forEach(c,Oe=>{Sy(Oe,["Input","Select"])&&(fg(Oe.props,!0)||fg(Oe.props.inputProps,!0))&&(he=!0)}),he}),[be,Te]=ee.useState(!1);x&&be&&Te(!1);const _e=T!==void 0&&!x?T:be;let Se;const te=ee.useMemo(()=>({adornedStart:z,setAdornedStart:ne,color:o,disabled:x,error:E,filled:oe,focused:_e,fullWidth:P,hiddenLabel:I,size:G,onBlur:()=>{Te(!1)},onEmpty:()=>{pe(!1)},onFilled:()=>{pe(!0)},onFocus:()=>{Te(!0)},registerEffect:Se,required:U,variant:D}),[z,o,x,E,oe,_e,P,I,Se,U,G,D]);return Q.jsx(Rb.Provider,{value:te,children:Q.jsx(g7,fe({as:v,ownerState:V,className:qt(B.root,f),ref:n},F,{children:c}))})}),Pv=v7;function _7(e){return Br("MuiFormHelperText",e)}const x7=Tr("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]),SC=x7;var EC;const b7=["children","className","component","disabled","error","filled","focused","margin","required","variant"],w7=e=>{const{classes:t,contained:n,size:a,disabled:c,error:f,filled:o,focused:v,required:x}=e,E={root:["root",c&&"disabled",f&&"error",a&&`size${Qt(a)}`,n&&"contained",v&&"focused",o&&"filled",x&&"required"]};return Ur(E,_7,t)},S7=zt("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.size&&t[`size${Qt(n.size)}`],n.contained&&t.contained,n.filled&&t.filled]}})(({theme:e,ownerState:t})=>fe({color:(e.vars||e).palette.text.secondary},e.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${SC.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${SC.error}`]:{color:(e.vars||e).palette.error.main}},t.size==="small"&&{marginTop:4},t.contained&&{marginLeft:14,marginRight:14})),E7=ee.forwardRef(function(t,n){const a=$r({props:t,name:"MuiFormHelperText"}),{children:c,className:f,component:o="p"}=a,v=$t(a,b7),x=Zp(),E=Hp({props:a,muiFormControl:x,states:["variant","size","disabled","error","filled","focused","required"]}),T=fe({},a,{component:o,contained:E.variant==="filled"||E.variant==="outlined",variant:E.variant,size:E.size,disabled:E.disabled,error:E.error,filled:E.filled,focused:E.focused,required:E.required}),P=w7(T);return Q.jsx(S7,fe({as:o,ownerState:T,className:qt(P.root,f),ref:n},v,{children:c===" "?EC||(EC=Q.jsx("span",{className:"notranslate",children:""})):c}))}),C7=E7;function k7(e){return Br("MuiFormLabel",e)}const T7=Tr("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),Od=T7,I7=["children","className","color","component","disabled","error","filled","focused","required"],P7=e=>{const{classes:t,color:n,focused:a,disabled:c,error:f,filled:o,required:v}=e,x={root:["root",`color${Qt(n)}`,c&&"disabled",f&&"error",o&&"filled",a&&"focused",v&&"required"],asterisk:["asterisk",f&&"error"]};return Ur(x,k7,t)},A7=zt("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:({ownerState:e},t)=>fe({},t.root,e.color==="secondary"&&t.colorSecondary,e.filled&&t.filled)})(({theme:e,ownerState:t})=>fe({color:(e.vars||e).palette.text.secondary},e.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",[`&.${Od.focused}`]:{color:(e.vars||e).palette[t.color].main},[`&.${Od.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${Od.error}`]:{color:(e.vars||e).palette.error.main}})),M7=zt("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(({theme:e})=>({[`&.${Od.error}`]:{color:(e.vars||e).palette.error.main}})),R7=ee.forwardRef(function(t,n){const a=$r({props:t,name:"MuiFormLabel"}),{children:c,className:f,component:o="label"}=a,v=$t(a,I7),x=Zp(),E=Hp({props:a,muiFormControl:x,states:["color","required","focused","disabled","error","filled"]}),T=fe({},a,{color:E.color||"primary",component:o,disabled:E.disabled,error:E.error,filled:E.filled,focused:E.focused,required:E.required}),P=P7(T);return Q.jsxs(A7,fe({as:o,ownerState:T,className:qt(P.root,f),ref:n},v,{children:[c,E.required&&Q.jsxs(M7,{ownerState:T,"aria-hidden":!0,className:P.asterisk,children:["","*"]})]}))}),L7=R7,z7=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function Vx(e){return`scale(${e}, ${e**2})`}const D7={entering:{opacity:1,transform:Vx(1)},entered:{opacity:1,transform:"none"}},P_=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),gA=ee.forwardRef(function(t,n){const{addEndListener:a,appear:c=!0,children:f,easing:o,in:v,onEnter:x,onEntered:E,onEntering:T,onExit:P,onExited:I,onExiting:q,style:U,timeout:G="auto",TransitionComponent:D=nA}=t,F=$t(t,z7),V=VP(),B=ee.useRef(),z=Gp(),ne=ee.useRef(null),oe=Fi(ne,f.ref,n),pe=je=>Ce=>{if(je){const ke=ne.current;Ce===void 0?je(ke):je(ke,Ce)}},be=pe(T),Te=pe((je,Ce)=>{iA(je);const{duration:ke,delay:$e,easing:Ze}=dg({style:U,timeout:G,easing:o},{mode:"enter"});let bt;G==="auto"?(bt=z.transitions.getAutoHeightDuration(je.clientHeight),B.current=bt):bt=ke,je.style.transition=[z.transitions.create("opacity",{duration:bt,delay:$e}),z.transitions.create("transform",{duration:P_?bt:bt*.666,delay:$e,easing:Ze})].join(","),x&&x(je,Ce)}),_e=pe(E),Se=pe(q),te=pe(je=>{const{duration:Ce,delay:ke,easing:$e}=dg({style:U,timeout:G,easing:o},{mode:"exit"});let Ze;G==="auto"?(Ze=z.transitions.getAutoHeightDuration(je.clientHeight),B.current=Ze):Ze=Ce,je.style.transition=[z.transitions.create("opacity",{duration:Ze,delay:ke}),z.transitions.create("transform",{duration:P_?Ze:Ze*.666,delay:P_?ke:ke||Ze*.333,easing:$e})].join(","),je.style.opacity=0,je.style.transform=Vx(.75),P&&P(je)}),he=pe(I),Oe=je=>{G==="auto"&&V.start(B.current||0,je),a&&a(ne.current,je)};return Q.jsx(D,fe({appear:c,in:v,nodeRef:ne,onEnter:Te,onEntered:_e,onEntering:be,onExit:te,onExited:he,onExiting:Se,addEndListener:Oe,timeout:G==="auto"?null:G},F,{children:(je,Ce)=>ee.cloneElement(f,fe({style:fe({opacity:0,transform:Vx(.75),visibility:je==="exited"&&!v?"hidden":void 0},D7[je],U,f.props.style),ref:oe},Ce))}))});gA.muiSupportAuto=!0;const O7=gA;function B7(e){return Br("MuiIcon",e)}Tr("MuiIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const N7=["baseClassName","className","color","component","fontSize"],F7=e=>{const{color:t,fontSize:n,classes:a}=e,c={root:["root",t!=="inherit"&&`color${Qt(t)}`,`fontSize${Qt(n)}`]};return Ur(c,B7,a)},j7=zt("span",{name:"MuiIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="inherit"&&t[`color${Qt(n.color)}`],t[`fontSize${Qt(n.fontSize)}`]]}})(({theme:e,ownerState:t})=>({userSelect:"none",width:"1em",height:"1em",overflow:"hidden",display:"inline-block",textAlign:"center",flexShrink:0,fontSize:{inherit:"inherit",small:e.typography.pxToRem(20),medium:e.typography.pxToRem(24),large:e.typography.pxToRem(36)}[t.fontSize],color:{primary:(e.vars||e).palette.primary.main,secondary:(e.vars||e).palette.secondary.main,info:(e.vars||e).palette.info.main,success:(e.vars||e).palette.success.main,warning:(e.vars||e).palette.warning.main,action:(e.vars||e).palette.action.active,error:(e.vars||e).palette.error.main,disabled:(e.vars||e).palette.action.disabled,inherit:void 0}[t.color]})),vA=ee.forwardRef(function(t,n){const a=$r({props:t,name:"MuiIcon"}),{baseClassName:c="material-icons",className:f,color:o="inherit",component:v="span",fontSize:x="medium"}=a,E=$t(a,N7),T=fe({},a,{baseClassName:c,color:o,component:v,fontSize:x}),P=F7(T);return Q.jsx(j7,fe({as:v,className:qt(c,"notranslate",P.root,f),ownerState:T,"aria-hidden":!0,ref:n},E))});vA.muiName="Icon";const U7=vA,$7=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],V7=e=>{const{classes:t,disableUnderline:n}=e,c=Ur({root:["root",!n&&"underline"],input:["input"]},QV,t);return fe({},t,c)},q7=zt(Tv,{shouldForwardProp:e=>Wo(e)||e==="classes",name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...Cv(e,t),!n.disableUnderline&&t.underline]}})(({theme:e,ownerState:t})=>{let a=e.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return e.vars&&(a=`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`),fe({position:"relative"},t.formControl&&{"label + &":{marginTop:16}},!t.disableUnderline&&{"&::after":{borderBottom:`2px solid ${(e.vars||e).palette[t.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${sd.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${sd.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${a}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${sd.disabled}, .${sd.error}):before`]:{borderBottom:`2px solid ${(e.vars||e).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${a}`}},[`&.${sd.disabled}:before`]:{borderBottomStyle:"dotted"}})}),W7=zt(Iv,{name:"MuiInput",slot:"Input",overridesResolver:kv})({}),_A=ee.forwardRef(function(t,n){var a,c,f,o;const v=$r({props:t,name:"MuiInput"}),{disableUnderline:x,components:E={},componentsProps:T,fullWidth:P=!1,inputComponent:I="input",multiline:q=!1,slotProps:U,slots:G={},type:D="text"}=v,F=$t(v,$7),V=V7(v),z={root:{ownerState:{disableUnderline:x}}},ne=U??T?Co(U??T,z):z,oe=(a=(c=G.root)!=null?c:E.Root)!=null?a:q7,pe=(f=(o=G.input)!=null?o:E.Input)!=null?f:W7;return Q.jsx(Lb,fe({slots:{root:oe,input:pe},slotProps:ne,fullWidth:P,inputComponent:I,multiline:q,ref:n,type:D},F,{classes:V}))});_A.muiName="Input";const xA=_A;function G7(e){return Br("MuiInputLabel",e)}Tr("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const H7=["disableAnimation","margin","shrink","variant","className"],Z7=e=>{const{classes:t,formControl:n,size:a,shrink:c,disableAnimation:f,variant:o,required:v}=e,x={root:["root",n&&"formControl",!f&&"animated",c&&"shrink",a&&a!=="normal"&&`size${Qt(a)}`,o],asterisk:[v&&"asterisk"]},E=Ur(x,G7,t);return fe({},t,E)},K7=zt(L7,{shouldForwardProp:e=>Wo(e)||e==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${Od.asterisk}`]:t.asterisk},t.root,n.formControl&&t.formControl,n.size==="small"&&t.sizeSmall,n.shrink&&t.shrink,!n.disableAnimation&&t.animated,n.focused&&t.focused,t[n.variant]]}})(({theme:e,ownerState:t})=>fe({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},t.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},t.size==="small"&&{transform:"translate(0, 17px) scale(1)"},t.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!t.disableAnimation&&{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})},t.variant==="filled"&&fe({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},t.size==="small"&&{transform:"translate(12px, 13px) scale(1)"},t.shrink&&fe({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},t.size==="small"&&{transform:"translate(12px, 4px) scale(0.75)"})),t.variant==="outlined"&&fe({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},t.size==="small"&&{transform:"translate(14px, 9px) scale(1)"},t.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))),X7=ee.forwardRef(function(t,n){const a=$r({name:"MuiInputLabel",props:t}),{disableAnimation:c=!1,shrink:f,className:o}=a,v=$t(a,H7),x=Zp();let E=f;typeof E>"u"&&x&&(E=x.filled||x.focused||x.adornedStart);const T=Hp({props:a,muiFormControl:x,states:["size","variant","required","focused"]}),P=fe({},a,{disableAnimation:c,formControl:x,shrink:E,size:T.size,variant:T.variant,required:T.required,focused:T.focused}),I=Z7(P);return Q.jsx(K7,fe({"data-shrink":E,ownerState:P,ref:n,className:qt(I.root,o)},v,{classes:I}))}),zb=X7,Y7=ee.createContext({}),is=Y7;function J7(e){return Br("MuiList",e)}Tr("MuiList",["root","padding","dense","subheader"]);const Q7=["children","className","component","dense","disablePadding","subheader"],eq=e=>{const{classes:t,disablePadding:n,dense:a,subheader:c}=e;return Ur({root:["root",!n&&"padding",a&&"dense",c&&"subheader"]},J7,t)},tq=zt("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disablePadding&&t.padding,n.dense&&t.dense,n.subheader&&t.subheader]}})(({ownerState:e})=>fe({listStyle:"none",margin:0,padding:0,position:"relative"},!e.disablePadding&&{paddingTop:8,paddingBottom:8},e.subheader&&{paddingTop:0})),rq=ee.forwardRef(function(t,n){const a=$r({props:t,name:"MuiList"}),{children:c,className:f,component:o="ul",dense:v=!1,disablePadding:x=!1,subheader:E}=a,T=$t(a,Q7),P=ee.useMemo(()=>({dense:v}),[v]),I=fe({},a,{component:o,dense:v,disablePadding:x}),q=eq(I);return Q.jsx(is.Provider,{value:P,children:Q.jsxs(tq,fe({as:o,className:qt(q.root,f),ref:n,ownerState:I},T,{children:[E,c]}))})}),Db=rq;function nq(e){return Br("MuiListItem",e)}const iq=Tr("MuiListItem",["root","container","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","padding","button","secondaryAction","selected"]),Qc=iq;function oq(e){return Br("MuiListItemButton",e)}const aq=Tr("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]),ep=aq,sq=["alignItems","autoFocus","component","children","dense","disableGutters","divider","focusVisibleClassName","selected","className"],lq=(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.alignItems==="flex-start"&&t.alignItemsFlexStart,n.divider&&t.divider,!n.disableGutters&&t.gutters]},uq=e=>{const{alignItems:t,classes:n,dense:a,disabled:c,disableGutters:f,divider:o,selected:v}=e,E=Ur({root:["root",a&&"dense",!f&&"gutters",o&&"divider",c&&"disabled",t==="flex-start"&&"alignItemsFlexStart",v&&"selected"]},oq,n);return fe({},n,E)},cq=zt(Wu,{shouldForwardProp:e=>Wo(e)||e==="classes",name:"MuiListItemButton",slot:"Root",overridesResolver:lq})(({theme:e,ownerState:t})=>fe({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${ep.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:pi(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${ep.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:pi(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${ep.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:pi(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:pi(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${ep.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${ep.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},t.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},t.alignItems==="flex-start"&&{alignItems:"flex-start"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.dense&&{paddingTop:4,paddingBottom:4})),pq=ee.forwardRef(function(t,n){const a=$r({props:t,name:"MuiListItemButton"}),{alignItems:c="center",autoFocus:f=!1,component:o="div",children:v,dense:x=!1,disableGutters:E=!1,divider:T=!1,focusVisibleClassName:P,selected:I=!1,className:q}=a,U=$t(a,sq),G=ee.useContext(is),D=ee.useMemo(()=>({dense:x||G.dense||!1,alignItems:c,disableGutters:E}),[c,G.dense,x,E]),F=ee.useRef(null);Sa(()=>{f&&F.current&&F.current.focus()},[f]);const V=fe({},a,{alignItems:c,dense:D.dense,disableGutters:E,divider:T,selected:I}),B=uq(V),z=Fi(F,n);return Q.jsx(is.Provider,{value:D,children:Q.jsx(cq,fe({ref:z,href:U.href||U.to,component:(U.href||U.to)&&o==="div"?"button":o,focusVisibleClassName:qt(B.focusVisible,P),ownerState:V,className:qt(B.root,q)},U,{classes:B,children:v}))})}),hq=pq;function dq(e){return Br("MuiListItemSecondaryAction",e)}Tr("MuiListItemSecondaryAction",["root","disableGutters"]);const fq=["className"],mq=e=>{const{disableGutters:t,classes:n}=e;return Ur({root:["root",t&&"disableGutters"]},dq,n)},yq=zt("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.disableGutters&&t.disableGutters]}})(({ownerState:e})=>fe({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"},e.disableGutters&&{right:0})),bA=ee.forwardRef(function(t,n){const a=$r({props:t,name:"MuiListItemSecondaryAction"}),{className:c}=a,f=$t(a,fq),o=ee.useContext(is),v=fe({},a,{disableGutters:o.disableGutters}),x=mq(v);return Q.jsx(yq,fe({className:qt(x.root,c),ownerState:v,ref:n},f))});bA.muiName="ListItemSecondaryAction";const gq=bA,vq=["className"],_q=["alignItems","autoFocus","button","children","className","component","components","componentsProps","ContainerComponent","ContainerProps","dense","disabled","disableGutters","disablePadding","divider","focusVisibleClassName","secondaryAction","selected","slotProps","slots"],xq=(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.alignItems==="flex-start"&&t.alignItemsFlexStart,n.divider&&t.divider,!n.disableGutters&&t.gutters,!n.disablePadding&&t.padding,n.button&&t.button,n.hasSecondaryAction&&t.secondaryAction]},bq=e=>{const{alignItems:t,button:n,classes:a,dense:c,disabled:f,disableGutters:o,disablePadding:v,divider:x,hasSecondaryAction:E,selected:T}=e;return Ur({root:["root",c&&"dense",!o&&"gutters",!v&&"padding",x&&"divider",f&&"disabled",n&&"button",t==="flex-start"&&"alignItemsFlexStart",E&&"secondaryAction",T&&"selected"],container:["container"]},nq,a)},wq=zt("div",{name:"MuiListItem",slot:"Root",overridesResolver:xq})(({theme:e,ownerState:t})=>fe({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left"},!t.disablePadding&&fe({paddingTop:8,paddingBottom:8},t.dense&&{paddingTop:4,paddingBottom:4},!t.disableGutters&&{paddingLeft:16,paddingRight:16},!!t.secondaryAction&&{paddingRight:48}),!!t.secondaryAction&&{[`& > .${ep.root}`]:{paddingRight:48}},{[`&.${Qc.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${Qc.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:pi(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${Qc.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:pi(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${Qc.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},t.alignItems==="flex-start"&&{alignItems:"flex-start"},t.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},t.button&&{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Qc.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:pi(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:pi(e.palette.primary.main,e.palette.action.selectedOpacity)}}},t.hasSecondaryAction&&{paddingRight:48})),Sq=zt("li",{name:"MuiListItem",slot:"Container",overridesResolver:(e,t)=>t.container})({position:"relative"}),Eq=ee.forwardRef(function(t,n){const a=$r({props:t,name:"MuiListItem"}),{alignItems:c="center",autoFocus:f=!1,button:o=!1,children:v,className:x,component:E,components:T={},componentsProps:P={},ContainerComponent:I="li",ContainerProps:{className:q}={},dense:U=!1,disabled:G=!1,disableGutters:D=!1,disablePadding:F=!1,divider:V=!1,focusVisibleClassName:B,secondaryAction:z,selected:ne=!1,slotProps:oe={},slots:pe={}}=a,be=$t(a.ContainerProps,vq),Te=$t(a,_q),_e=ee.useContext(is),Se=ee.useMemo(()=>({dense:U||_e.dense||!1,alignItems:c,disableGutters:D}),[c,_e.dense,U,D]),te=ee.useRef(null);Sa(()=>{f&&te.current&&te.current.focus()},[f]);const he=ee.Children.toArray(v),Oe=he.length&&Sy(he[he.length-1],["ListItemSecondaryAction"]),je=fe({},a,{alignItems:c,autoFocus:f,button:o,dense:Se.dense,disabled:G,disableGutters:D,disablePadding:F,divider:V,hasSecondaryAction:Oe,selected:ne}),Ce=bq(je),ke=Fi(te,n),$e=pe.root||T.Root||wq,Ze=oe.root||P.root||{},bt=fe({className:qt(Ce.root,Ze.className,x),disabled:G},Te);let Pe=E||"li";return o&&(bt.component=E||"div",bt.focusVisibleClassName=qt(Qc.focusVisible,B),Pe=Wu),Oe?(Pe=!bt.component&&!E?"div":Pe,I==="li"&&(Pe==="li"?Pe="div":bt.component==="li"&&(bt.component="div")),Q.jsx(is.Provider,{value:Se,children:Q.jsxs(Sq,fe({as:I,className:qt(Ce.container,q),ref:ke,ownerState:je},be,{children:[Q.jsx($e,fe({},Ze,!zp($e)&&{as:Pe,ownerState:fe({},je,Ze.ownerState)},bt,{children:he})),he.pop()]}))})):Q.jsx(is.Provider,{value:Se,children:Q.jsxs($e,fe({},Ze,{as:Pe,ref:ke},!zp($e)&&{ownerState:fe({},je,Ze.ownerState)},bt,{children:[he,z&&Q.jsx(gq,{children:z})]}))})}),wA=Eq,Cq=Tr("MuiListItemIcon",["root","alignItemsFlexStart"]),CC=Cq;function kq(e){return Br("MuiListItemText",e)}const Tq=Tr("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),mg=Tq,Iq=["children","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"],Pq=e=>{const{classes:t,inset:n,primary:a,secondary:c,dense:f}=e;return Ur({root:["root",n&&"inset",f&&"dense",a&&c&&"multiline"],primary:["primary"],secondary:["secondary"]},kq,t)},Aq=zt("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${mg.primary}`]:t.primary},{[`& .${mg.secondary}`]:t.secondary},t.root,n.inset&&t.inset,n.primary&&n.secondary&&t.multiline,n.dense&&t.dense]}})(({ownerState:e})=>fe({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},e.primary&&e.secondary&&{marginTop:6,marginBottom:6},e.inset&&{paddingLeft:56})),Mq=ee.forwardRef(function(t,n){const a=$r({props:t,name:"MuiListItemText"}),{children:c,className:f,disableTypography:o=!1,inset:v=!1,primary:x,primaryTypographyProps:E,secondary:T,secondaryTypographyProps:P}=a,I=$t(a,Iq),{dense:q}=ee.useContext(is);let U=x??c,G=T;const D=fe({},a,{disableTypography:o,inset:v,primary:!!U,secondary:!!G,dense:q}),F=Pq(D);return U!=null&&U.type!==lp&&!o&&(U=Q.jsx(lp,fe({variant:q?"body2":"body1",className:F.primary,component:E!=null&&E.variant?void 0:"span",display:"block"},E,{children:U}))),G!=null&&G.type!==lp&&!o&&(G=Q.jsx(lp,fe({variant:"body2",className:F.secondary,color:"text.secondary",display:"block"},P,{children:G}))),Q.jsxs(Aq,fe({className:qt(F.root,f),ownerState:D,ref:n},I,{children:[U,G]}))}),Rq=Mq,Lq=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function A_(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function kC(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function SA(e,t){if(t===void 0)return!0;let n=e.innerText;return n===void 0&&(n=e.textContent),n=n.trim().toLowerCase(),n.length===0?!1:t.repeating?n[0]===t.keys[0]:n.indexOf(t.keys.join(""))===0}function ld(e,t,n,a,c,f){let o=!1,v=c(e,t,t?n:!1);for(;v;){if(v===e.firstChild){if(o)return!1;o=!0}const x=a?!1:v.disabled||v.getAttribute("aria-disabled")==="true";if(!v.hasAttribute("tabindex")||!SA(v,f)||x)v=c(e,v,n);else return v.focus(),!0}return!1}const zq=ee.forwardRef(function(t,n){const{actions:a,autoFocus:c=!1,autoFocusItem:f=!1,children:o,className:v,disabledItemsFocusable:x=!1,disableListWrap:E=!1,onKeyDown:T,variant:P="selectedMenu"}=t,I=$t(t,Lq),q=ee.useRef(null),U=ee.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Sa(()=>{c&&q.current.focus()},[c]),ee.useImperativeHandle(a,()=>({adjustStyleForScrollbar:(B,z)=>{const ne=!q.current.style.width;if(B.clientHeight<q.current.clientHeight&&ne){const oe=`${qP(ko(B))}px`;q.current.style[z.direction==="rtl"?"paddingLeft":"paddingRight"]=oe,q.current.style.width=`calc(100% + ${oe})`}return q.current}}),[]);const G=B=>{const z=q.current,ne=B.key,oe=ko(z).activeElement;if(ne==="ArrowDown")B.preventDefault(),ld(z,oe,E,x,A_);else if(ne==="ArrowUp")B.preventDefault(),ld(z,oe,E,x,kC);else if(ne==="Home")B.preventDefault(),ld(z,null,E,x,A_);else if(ne==="End")B.preventDefault(),ld(z,null,E,x,kC);else if(ne.length===1){const pe=U.current,be=ne.toLowerCase(),Te=performance.now();pe.keys.length>0&&(Te-pe.lastTime>500?(pe.keys=[],pe.repeating=!0,pe.previousKeyMatched=!0):pe.repeating&&be!==pe.keys[0]&&(pe.repeating=!1)),pe.lastTime=Te,pe.keys.push(be);const _e=oe&&!pe.repeating&&SA(oe,pe);pe.previousKeyMatched&&(_e||ld(z,oe,!1,x,A_,pe))?B.preventDefault():pe.previousKeyMatched=!1}T&&T(B)},D=Fi(q,n);let F=-1;ee.Children.forEach(o,(B,z)=>{if(!ee.isValidElement(B)){F===z&&(F+=1,F>=o.length&&(F=-1));return}B.props.disabled||(P==="selectedMenu"&&B.props.selected||F===-1)&&(F=z),F===z&&(B.props.disabled||B.props.muiSkipListHighlight||B.type.muiSkipListHighlight)&&(F+=1,F>=o.length&&(F=-1))});const V=ee.Children.map(o,(B,z)=>{if(z===F){const ne={};return f&&(ne.autoFocus=!0),B.props.tabIndex===void 0&&P==="selectedMenu"&&(ne.tabIndex=0),ee.cloneElement(B,ne)}return B});return Q.jsx(Db,fe({role:"menu",ref:D,className:v,onKeyDown:G,tabIndex:c?0:-1},I,{children:V}))}),Dq=zq;function Oq(e){return Br("MuiPopover",e)}Tr("MuiPopover",["root","paper"]);const Bq=["onEntering"],Nq=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],Fq=["slotProps"];function TC(e,t){let n=0;return typeof t=="number"?n=t:t==="center"?n=e.height/2:t==="bottom"&&(n=e.height),n}function IC(e,t){let n=0;return typeof t=="number"?n=t:t==="center"?n=e.width/2:t==="right"&&(n=e.width),n}function PC(e){return[e.horizontal,e.vertical].map(t=>typeof t=="number"?`${t}px`:t).join(" ")}function M_(e){return typeof e=="function"?e():e}const jq=e=>{const{classes:t}=e;return Ur({root:["root"],paper:["paper"]},Oq,t)},Uq=zt(uA,{name:"MuiPopover",slot:"Root",overridesResolver:(e,t)=>t.root})({}),EA=zt(Mb,{name:"MuiPopover",slot:"Paper",overridesResolver:(e,t)=>t.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),$q=ee.forwardRef(function(t,n){var a,c,f;const o=$r({props:t,name:"MuiPopover"}),{action:v,anchorEl:x,anchorOrigin:E={vertical:"top",horizontal:"left"},anchorPosition:T,anchorReference:P="anchorEl",children:I,className:q,container:U,elevation:G=8,marginThreshold:D=16,open:F,PaperProps:V={},slots:B,slotProps:z,transformOrigin:ne={vertical:"top",horizontal:"left"},TransitionComponent:oe=O7,transitionDuration:pe="auto",TransitionProps:{onEntering:be}={},disableScrollLock:Te=!1}=o,_e=$t(o.TransitionProps,Bq),Se=$t(o,Nq),te=(a=z==null?void 0:z.paper)!=null?a:V,he=ee.useRef(),Oe=Fi(he,te.ref),je=fe({},o,{anchorOrigin:E,anchorReference:P,elevation:G,marginThreshold:D,externalPaperSlotProps:te,transformOrigin:ne,TransitionComponent:oe,transitionDuration:pe,TransitionProps:_e}),Ce=jq(je),ke=ee.useCallback(()=>{if(P==="anchorPosition")return T;const at=M_(x),er=(at&&at.nodeType===1?at:ko(he.current).body).getBoundingClientRect();return{top:er.top+TC(er,E.vertical),left:er.left+IC(er,E.horizontal)}},[x,E.horizontal,E.vertical,T,P]),$e=ee.useCallback(at=>({vertical:TC(at,ne.vertical),horizontal:IC(at,ne.horizontal)}),[ne.horizontal,ne.vertical]),Ze=ee.useCallback(at=>{const Dt={width:at.offsetWidth,height:at.offsetHeight},er=$e(Dt);if(P==="none")return{top:null,left:null,transformOrigin:PC(er)};const Rr=ke();let Nr=Rr.top-er.vertical,tr=Rr.left-er.horizontal;const Vr=Nr+Dt.height,Lr=tr+Dt.width,Er=Ws(M_(x)),on=Er.innerHeight-D,Mr=Er.innerWidth-D;if(D!==null&&Nr<D){const lr=Nr-D;Nr-=lr,er.vertical+=lr}else if(D!==null&&Vr>on){const lr=Vr-on;Nr-=lr,er.vertical+=lr}if(D!==null&&tr<D){const lr=tr-D;tr-=lr,er.horizontal+=lr}else if(Lr>Mr){const lr=Lr-Mr;tr-=lr,er.horizontal+=lr}return{top:`${Math.round(Nr)}px`,left:`${Math.round(tr)}px`,transformOrigin:PC(er)}},[x,P,ke,$e,D]),[bt,Pe]=ee.useState(F),Ge=ee.useCallback(()=>{const at=he.current;if(!at)return;const Dt=Ze(at);Dt.top!==null&&(at.style.top=Dt.top),Dt.left!==null&&(at.style.left=Dt.left),at.style.transformOrigin=Dt.transformOrigin,Pe(!0)},[Ze]);ee.useEffect(()=>(Te&&window.addEventListener("scroll",Ge),()=>window.removeEventListener("scroll",Ge)),[x,Te,Ge]);const st=(at,Dt)=>{be&&be(at,Dt),Ge()},Re=()=>{Pe(!1)};ee.useEffect(()=>{F&&Ge()}),ee.useImperativeHandle(v,()=>F?{updatePosition:()=>{Ge()}}:null,[F,Ge]),ee.useEffect(()=>{if(!F)return;const at=ev(()=>{Ge()}),Dt=Ws(x);return Dt.addEventListener("resize",at),()=>{at.clear(),Dt.removeEventListener("resize",at)}},[x,F,Ge]);let qe=pe;pe==="auto"&&!oe.muiSupportAuto&&(qe=void 0);const Kt=U||(x?ko(M_(x)).body:void 0),It=(c=B==null?void 0:B.root)!=null?c:Uq,Ot=(f=B==null?void 0:B.paper)!=null?f:EA,Et=os({elementType:Ot,externalSlotProps:fe({},te,{style:bt?te.style:fe({},te.style,{opacity:0})}),additionalProps:{elevation:G,ref:Oe},ownerState:je,className:qt(Ce.paper,te==null?void 0:te.className)}),nr=os({elementType:It,externalSlotProps:(z==null?void 0:z.root)||{},externalForwardedProps:Se,additionalProps:{ref:n,slotProps:{backdrop:{invisible:!0}},container:Kt,open:F},ownerState:je,className:qt(Ce.root,q)}),{slotProps:Zt}=nr,Yt=$t(nr,Fq);return Q.jsx(It,fe({},Yt,!zp(It)&&{slotProps:Zt,disableScrollLock:Te},{children:Q.jsx(oe,fe({appear:!0,in:F,onEntering:st,onExited:Re,timeout:qe},_e,{children:Q.jsx(Ot,fe({},Et,{children:I}))}))}))}),Vq=$q;function qq(e){return Br("MuiMenu",e)}Tr("MuiMenu",["root","paper","list"]);const Wq=["onEntering"],Gq=["autoFocus","children","className","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant","slots","slotProps"],Hq={vertical:"top",horizontal:"right"},Zq={vertical:"top",horizontal:"left"},Kq=e=>{const{classes:t}=e;return Ur({root:["root"],paper:["paper"],list:["list"]},qq,t)},Xq=zt(Vq,{shouldForwardProp:e=>Wo(e)||e==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Yq=zt(EA,{name:"MuiMenu",slot:"Paper",overridesResolver:(e,t)=>t.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),Jq=zt(Dq,{name:"MuiMenu",slot:"List",overridesResolver:(e,t)=>t.list})({outline:0}),Qq=ee.forwardRef(function(t,n){var a,c;const f=$r({props:t,name:"MuiMenu"}),{autoFocus:o=!0,children:v,className:x,disableAutoFocusItem:E=!1,MenuListProps:T={},onClose:P,open:I,PaperProps:q={},PopoverClasses:U,transitionDuration:G="auto",TransitionProps:{onEntering:D}={},variant:F="selectedMenu",slots:V={},slotProps:B={}}=f,z=$t(f.TransitionProps,Wq),ne=$t(f,Gq),oe=Gp(),pe=oe.direction==="rtl",be=fe({},f,{autoFocus:o,disableAutoFocusItem:E,MenuListProps:T,onEntering:D,PaperProps:q,transitionDuration:G,TransitionProps:z,variant:F}),Te=Kq(be),_e=o&&!E&&I,Se=ee.useRef(null),te=(Ze,bt)=>{Se.current&&Se.current.adjustStyleForScrollbar(Ze,oe),D&&D(Ze,bt)},he=Ze=>{Ze.key==="Tab"&&(Ze.preventDefault(),P&&P(Ze,"tabKeyDown"))};let Oe=-1;ee.Children.map(v,(Ze,bt)=>{ee.isValidElement(Ze)&&(Ze.props.disabled||(F==="selectedMenu"&&Ze.props.selected||Oe===-1)&&(Oe=bt))});const je=(a=V.paper)!=null?a:Yq,Ce=(c=B.paper)!=null?c:q,ke=os({elementType:V.root,externalSlotProps:B.root,ownerState:be,className:[Te.root,x]}),$e=os({elementType:je,externalSlotProps:Ce,ownerState:be,className:Te.paper});return Q.jsx(Xq,fe({onClose:P,anchorOrigin:{vertical:"bottom",horizontal:pe?"right":"left"},transformOrigin:pe?Hq:Zq,slots:{paper:je,root:V.root},slotProps:{root:ke,paper:$e},open:I,ref:n,transitionDuration:G,TransitionProps:fe({onEntering:te},z),ownerState:be},ne,{classes:U,children:Q.jsx(Jq,fe({onKeyDown:he,actions:Se,autoFocus:o&&(Oe===-1||E),autoFocusItem:_e,variant:F},T,{className:qt(Te.list,T.className),children:v}))}))}),eW=Qq;function tW(e){return Br("MuiMenuItem",e)}const rW=Tr("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),ud=rW,nW=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],iW=(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.divider&&t.divider,!n.disableGutters&&t.gutters]},oW=e=>{const{disabled:t,dense:n,divider:a,disableGutters:c,selected:f,classes:o}=e,x=Ur({root:["root",n&&"dense",t&&"disabled",!c&&"gutters",a&&"divider",f&&"selected"]},tW,o);return fe({},o,x)},aW=zt(Wu,{shouldForwardProp:e=>Wo(e)||e==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:iW})(({theme:e,ownerState:t})=>fe({},e.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${ud.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:pi(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${ud.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:pi(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${ud.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:pi(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:pi(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${ud.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${ud.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${wC.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${wC.inset}`]:{marginLeft:52},[`& .${mg.root}`]:{marginTop:0,marginBottom:0},[`& .${mg.inset}`]:{paddingLeft:36},[`& .${CC.root}`]:{minWidth:36}},!t.dense&&{[e.breakpoints.up("sm")]:{minHeight:"auto"}},t.dense&&fe({minHeight:32,paddingTop:4,paddingBottom:4},e.typography.body2,{[`& .${CC.root} svg`]:{fontSize:"1.25rem"}}))),sW=ee.forwardRef(function(t,n){const a=$r({props:t,name:"MuiMenuItem"}),{autoFocus:c=!1,component:f="li",dense:o=!1,divider:v=!1,disableGutters:x=!1,focusVisibleClassName:E,role:T="menuitem",tabIndex:P,className:I}=a,q=$t(a,nW),U=ee.useContext(is),G=ee.useMemo(()=>({dense:o||U.dense||!1,disableGutters:x}),[U.dense,o,x]),D=ee.useRef(null);Sa(()=>{c&&D.current&&D.current.focus()},[c]);const F=fe({},a,{dense:G.dense,divider:v,disableGutters:x}),V=oW(a),B=Fi(D,n);let z;return a.disabled||(z=P!==void 0?P:-1),Q.jsx(is.Provider,{value:G,children:Q.jsx(aW,fe({ref:B,role:T,tabIndex:z,component:f,focusVisibleClassName:qt(V.focusVisible,E),className:qt(V.root,I)},q,{ownerState:F,classes:V}))})}),Op=sW;function lW(e){return Br("MuiNativeSelect",e)}const uW=Tr("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),Ob=uW,cW=["className","disabled","error","IconComponent","inputRef","variant"],pW=e=>{const{classes:t,variant:n,disabled:a,multiple:c,open:f,error:o}=e,v={select:["select",n,a&&"disabled",c&&"multiple",o&&"error"],icon:["icon",`icon${Qt(n)}`,f&&"iconOpen",a&&"disabled"]};return Ur(v,lW,t)},CA=({ownerState:e,theme:t})=>fe({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":fe({},t.vars?{backgroundColor:`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.05)`}:{backgroundColor:t.palette.mode==="light"?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},[`&.${Ob.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(t.vars||t).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},e.variant==="filled"&&{"&&&":{paddingRight:32}},e.variant==="outlined"&&{borderRadius:(t.vars||t).shape.borderRadius,"&:focus":{borderRadius:(t.vars||t).shape.borderRadius},"&&&":{paddingRight:32}}),hW=zt("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:Wo,overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.select,t[n.variant],n.error&&t.error,{[`&.${Ob.multiple}`]:t.multiple}]}})(CA),kA=({ownerState:e,theme:t})=>fe({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(t.vars||t).palette.action.active,[`&.${Ob.disabled}`]:{color:(t.vars||t).palette.action.disabled}},e.open&&{transform:"rotate(180deg)"},e.variant==="filled"&&{right:7},e.variant==="outlined"&&{right:7}),dW=zt("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${Qt(n.variant)}`],n.open&&t.iconOpen]}})(kA),fW=ee.forwardRef(function(t,n){const{className:a,disabled:c,error:f,IconComponent:o,inputRef:v,variant:x="standard"}=t,E=$t(t,cW),T=fe({},t,{disabled:c,variant:x,error:f}),P=pW(T);return Q.jsxs(ee.Fragment,{children:[Q.jsx(hW,fe({ownerState:T,className:qt(P.select,a),disabled:c,ref:v||n},E)),t.multiple?null:Q.jsx(dW,{as:o,ownerState:T,className:P.icon})]})}),mW=fW;var AC;const yW=["children","classes","className","label","notched"],gW=zt("fieldset",{shouldForwardProp:Wo})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),vW=zt("legend",{shouldForwardProp:Wo})(({ownerState:e,theme:t})=>fe({float:"unset",width:"auto",overflow:"hidden"},!e.withLabel&&{padding:0,lineHeight:"11px",transition:t.transitions.create("width",{duration:150,easing:t.transitions.easing.easeOut})},e.withLabel&&fe({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:t.transitions.create("max-width",{duration:50,easing:t.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},e.notched&&{maxWidth:"100%",transition:t.transitions.create("max-width",{duration:100,easing:t.transitions.easing.easeOut,delay:50})})));function _W(e){const{className:t,label:n,notched:a}=e,c=$t(e,yW),f=n!=null&&n!=="",o=fe({},e,{notched:a,withLabel:f});return Q.jsx(gW,fe({"aria-hidden":!0,className:t,ownerState:o},c,{children:Q.jsx(vW,{ownerState:o,children:f?Q.jsx("span",{children:n}):AC||(AC=Q.jsx("span",{className:"notranslate",children:""}))})}))}const xW=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],bW=e=>{const{classes:t}=e,a=Ur({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},t9,t);return fe({},t,a)},wW=zt(Tv,{shouldForwardProp:e=>Wo(e)||e==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:Cv})(({theme:e,ownerState:t})=>{const n=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return fe({position:"relative",borderRadius:(e.vars||e).shape.borderRadius,[`&:hover .${fl.notchedOutline}`]:{borderColor:(e.vars||e).palette.text.primary},"@media (hover: none)":{[`&:hover .${fl.notchedOutline}`]:{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:n}},[`&.${fl.focused} .${fl.notchedOutline}`]:{borderColor:(e.vars||e).palette[t.color].main,borderWidth:2},[`&.${fl.error} .${fl.notchedOutline}`]:{borderColor:(e.vars||e).palette.error.main},[`&.${fl.disabled} .${fl.notchedOutline}`]:{borderColor:(e.vars||e).palette.action.disabled}},t.startAdornment&&{paddingLeft:14},t.endAdornment&&{paddingRight:14},t.multiline&&fe({padding:"16.5px 14px"},t.size==="small"&&{padding:"8.5px 14px"}))}),SW=zt(_W,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(e,t)=>t.notchedOutline})(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:t}}),EW=zt(Iv,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:kv})(({theme:e,ownerState:t})=>fe({padding:"16.5px 14px"},!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},e.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},t.size==="small"&&{padding:"8.5px 14px"},t.multiline&&{padding:0},t.startAdornment&&{paddingLeft:0},t.endAdornment&&{paddingRight:0})),TA=ee.forwardRef(function(t,n){var a,c,f,o,v;const x=$r({props:t,name:"MuiOutlinedInput"}),{components:E={},fullWidth:T=!1,inputComponent:P="input",label:I,multiline:q=!1,notched:U,slots:G={},type:D="text"}=x,F=$t(x,xW),V=bW(x),B=Zp(),z=Hp({props:x,muiFormControl:B,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),ne=fe({},x,{color:z.color||"primary",disabled:z.disabled,error:z.error,focused:z.focused,formControl:B,fullWidth:T,hiddenLabel:z.hiddenLabel,multiline:q,size:z.size,type:D}),oe=(a=(c=G.root)!=null?c:E.Root)!=null?a:wW,pe=(f=(o=G.input)!=null?o:E.Input)!=null?f:EW;return Q.jsx(Lb,fe({slots:{root:oe,input:pe},renderSuffix:be=>Q.jsx(SW,{ownerState:ne,className:V.notchedOutline,label:I!=null&&I!==""&&z.required?v||(v=Q.jsxs(ee.Fragment,{children:[I,"","*"]})):I,notched:typeof U<"u"?U:!!(be.startAdornment||be.filled||be.focused)}),fullWidth:T,inputComponent:P,multiline:q,ref:n,type:D},F,{classes:fe({},V,{notchedOutline:null})}))});TA.muiName="Input";const IA=TA;function CW(e){return Br("MuiSelect",e)}const kW=Tr("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),cd=kW;var MC;const TW=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],IW=zt("div",{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`&.${cd.select}`]:t.select},{[`&.${cd.select}`]:t[n.variant]},{[`&.${cd.error}`]:t.error},{[`&.${cd.multiple}`]:t.multiple}]}})(CA,{[`&.${cd.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),PW=zt("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${Qt(n.variant)}`],n.open&&t.iconOpen]}})(kA),AW=zt("input",{shouldForwardProp:e=>v$(e)&&e!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(e,t)=>t.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function RC(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}function MW(e){return e==null||typeof e=="string"&&!e.trim()}const RW=e=>{const{classes:t,variant:n,disabled:a,multiple:c,open:f,error:o}=e,v={select:["select",n,a&&"disabled",c&&"multiple",o&&"error"],icon:["icon",`icon${Qt(n)}`,f&&"iconOpen",a&&"disabled"],nativeInput:["nativeInput"]};return Ur(v,CW,t)},LW=ee.forwardRef(function(t,n){var a;const{"aria-describedby":c,"aria-label":f,autoFocus:o,autoWidth:v,children:x,className:E,defaultOpen:T,defaultValue:P,disabled:I,displayEmpty:q,error:U=!1,IconComponent:G,inputRef:D,labelId:F,MenuProps:V={},multiple:B,name:z,onBlur:ne,onChange:oe,onClose:pe,onFocus:be,onOpen:Te,open:_e,readOnly:Se,renderValue:te,SelectDisplayProps:he={},tabIndex:Oe,value:je,variant:Ce="standard"}=t,ke=$t(t,TW),[$e,Ze]=XE({controlled:je,default:P,name:"Select"}),[bt,Pe]=XE({controlled:_e,default:T,name:"Select"}),Ge=ee.useRef(null),st=ee.useRef(null),[Re,qe]=ee.useState(null),{current:Kt}=ee.useRef(_e!=null),[It,Ot]=ee.useState(),Et=Fi(n,D),nr=ee.useCallback(Ft=>{st.current=Ft,Ft&&qe(Ft)},[]),Zt=Re==null?void 0:Re.parentNode;ee.useImperativeHandle(Et,()=>({focus:()=>{st.current.focus()},node:Ge.current,value:$e}),[$e]),ee.useEffect(()=>{T&&bt&&Re&&!Kt&&(Ot(v?null:Zt.clientWidth),st.current.focus())},[Re,v]),ee.useEffect(()=>{o&&st.current.focus()},[o]),ee.useEffect(()=>{if(!F)return;const Ft=ko(st.current).getElementById(F);if(Ft){const wr=()=>{getSelection().isCollapsed&&st.current.focus()};return Ft.addEventListener("click",wr),()=>{Ft.removeEventListener("click",wr)}}},[F]);const Yt=(Ft,wr)=>{Ft?Te&&Te(wr):pe&&pe(wr),Kt||(Ot(v?null:Zt.clientWidth),Pe(Ft))},at=Ft=>{Ft.button===0&&(Ft.preventDefault(),st.current.focus(),Yt(!0,Ft))},Dt=Ft=>{Yt(!1,Ft)},er=ee.Children.toArray(x),Rr=Ft=>{const wr=er.find(ut=>ut.props.value===Ft.target.value);wr!==void 0&&(Ze(wr.props.value),oe&&oe(Ft,wr))},Nr=Ft=>wr=>{let ut;if(wr.currentTarget.hasAttribute("tabindex")){if(B){ut=Array.isArray($e)?$e.slice():[];const Rt=$e.indexOf(Ft.props.value);Rt===-1?ut.push(Ft.props.value):ut.splice(Rt,1)}else ut=Ft.props.value;if(Ft.props.onClick&&Ft.props.onClick(wr),$e!==ut&&(Ze(ut),oe)){const Rt=wr.nativeEvent||wr,gr=new Rt.constructor(Rt.type,Rt);Object.defineProperty(gr,"target",{writable:!0,value:{value:ut,name:z}}),oe(gr,Ft)}B||Yt(!1,wr)}},tr=Ft=>{Se||[" ","ArrowUp","ArrowDown","Enter"].indexOf(Ft.key)!==-1&&(Ft.preventDefault(),Yt(!0,Ft))},Vr=Re!==null&&bt,Lr=Ft=>{!Vr&&ne&&(Object.defineProperty(Ft,"target",{writable:!0,value:{value:$e,name:z}}),ne(Ft))};delete ke["aria-invalid"];let Er,on;const Mr=[];let lr=!1;(fg({value:$e})||q)&&(te?Er=te($e):lr=!0);const Xr=er.map(Ft=>{if(!ee.isValidElement(Ft))return null;let wr;if(B){if(!Array.isArray($e))throw new Error(Bl(2));wr=$e.some(ut=>RC(ut,Ft.props.value)),wr&&lr&&Mr.push(Ft.props.children)}else wr=RC($e,Ft.props.value),wr&&lr&&(on=Ft.props.children);return ee.cloneElement(Ft,{"aria-selected":wr?"true":"false",onClick:Nr(Ft),onKeyUp:ut=>{ut.key===" "&&ut.preventDefault(),Ft.props.onKeyUp&&Ft.props.onKeyUp(ut)},role:"option",selected:wr,value:void 0,"data-value":Ft.props.value})});lr&&(B?Mr.length===0?Er=null:Er=Mr.reduce((Ft,wr,ut)=>(Ft.push(wr),ut<Mr.length-1&&Ft.push(", "),Ft),[]):Er=on);let wn=It;!v&&Kt&&Re&&(wn=Zt.clientWidth);let oi;typeof Oe<"u"?oi=Oe:oi=I?null:0;const dr=he.id||(z?`mui-component-select-${z}`:void 0),Bt=fe({},t,{variant:Ce,value:$e,open:Vr,error:U}),Un=RW(Bt),On=fe({},V.PaperProps,(a=V.slotProps)==null?void 0:a.paper),ji=vb();return Q.jsxs(ee.Fragment,{children:[Q.jsx(IW,fe({ref:nr,tabIndex:oi,role:"combobox","aria-controls":ji,"aria-disabled":I?"true":void 0,"aria-expanded":Vr?"true":"false","aria-haspopup":"listbox","aria-label":f,"aria-labelledby":[F,dr].filter(Boolean).join(" ")||void 0,"aria-describedby":c,onKeyDown:tr,onMouseDown:I||Se?null:at,onBlur:Lr,onFocus:be},he,{ownerState:Bt,className:qt(he.className,Un.select,E),id:dr,children:MW(Er)?MC||(MC=Q.jsx("span",{className:"notranslate",children:""})):Er})),Q.jsx(AW,fe({"aria-invalid":U,value:Array.isArray($e)?$e.join(","):$e,name:z,ref:Ge,"aria-hidden":!0,onChange:Rr,tabIndex:-1,disabled:I,className:Un.nativeInput,autoFocus:o,ownerState:Bt},ke)),Q.jsx(PW,{as:G,className:Un.icon,ownerState:Bt}),Q.jsx(eW,fe({id:`menu-${z||""}`,anchorEl:Zt,open:Vr,onClose:Dt,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},V,{MenuListProps:fe({"aria-labelledby":F,role:"listbox","aria-multiselectable":B?"true":void 0,disableListWrap:!0,id:ji},V.MenuListProps),slotProps:fe({},V.slotProps,{paper:fe({},On,{style:fe({minWidth:wn},On!=null?On.style:null)})}),children:Xr}))]})}),zW=LW,DW=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],OW=["root"],BW=e=>{const{classes:t}=e;return t},Bb={name:"MuiSelect",overridesResolver:(e,t)=>t.root,shouldForwardProp:e=>Wo(e)&&e!=="variant",slot:"Root"},NW=zt(xA,Bb)(""),FW=zt(IA,Bb)(""),jW=zt(yA,Bb)(""),PA=ee.forwardRef(function(t,n){const a=$r({name:"MuiSelect",props:t}),{autoWidth:c=!1,children:f,classes:o={},className:v,defaultOpen:x=!1,displayEmpty:E=!1,IconComponent:T=o9,id:P,input:I,inputProps:q,label:U,labelId:G,MenuProps:D,multiple:F=!1,native:V=!1,onClose:B,onOpen:z,open:ne,renderValue:oe,SelectDisplayProps:pe,variant:be="outlined"}=a,Te=$t(a,DW),_e=V?mW:zW,Se=Zp(),te=Hp({props:a,muiFormControl:Se,states:["variant","error"]}),he=te.variant||be,Oe=fe({},a,{variant:he,classes:o}),je=BW(Oe),Ce=$t(je,OW),ke=I||{standard:Q.jsx(NW,{ownerState:Oe}),outlined:Q.jsx(FW,{label:U,ownerState:Oe}),filled:Q.jsx(jW,{ownerState:Oe})}[he],$e=Fi(n,ke.ref);return Q.jsx(ee.Fragment,{children:ee.cloneElement(ke,fe({inputComponent:_e,inputProps:fe({children:f,error:te.error,IconComponent:T,variant:he,type:void 0,multiple:F},V?{id:P}:{autoWidth:c,defaultOpen:x,displayEmpty:E,labelId:G,MenuProps:D,onClose:B,onOpen:z,open:ne,renderValue:oe,SelectDisplayProps:fe({id:P},pe)},q,{classes:q?Co(Ce,q.classes):Ce},I?I.props.inputProps:{})},(F&&V||E)&&he==="outlined"?{notched:!0}:{},{ref:$e,className:qt(ke.props.className,v,je.root)},!I&&{variant:he},Te))})});PA.muiName="Select";const Av=PA;function UW(e){return Br("MuiTab",e)}const $W=Tr("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper"]),bu=$W,VW=["className","disabled","disableFocusRipple","fullWidth","icon","iconPosition","indicator","label","onChange","onClick","onFocus","selected","selectionFollowsFocus","textColor","value","wrapped"],qW=e=>{const{classes:t,textColor:n,fullWidth:a,wrapped:c,icon:f,label:o,selected:v,disabled:x}=e,E={root:["root",f&&o&&"labelIcon",`textColor${Qt(n)}`,a&&"fullWidth",c&&"wrapped",v&&"selected",x&&"disabled"],iconWrapper:["iconWrapper"]};return Ur(E,UW,t)},WW=zt(Wu,{name:"MuiTab",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.label&&n.icon&&t.labelIcon,t[`textColor${Qt(n.textColor)}`],n.fullWidth&&t.fullWidth,n.wrapped&&t.wrapped]}})(({theme:e,ownerState:t})=>fe({},e.typography.button,{maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center"},t.label&&{flexDirection:t.iconPosition==="top"||t.iconPosition==="bottom"?"column":"row"},{lineHeight:1.25},t.icon&&t.label&&{minHeight:72,paddingTop:9,paddingBottom:9,[`& > .${bu.iconWrapper}`]:fe({},t.iconPosition==="top"&&{marginBottom:6},t.iconPosition==="bottom"&&{marginTop:6},t.iconPosition==="start"&&{marginRight:e.spacing(1)},t.iconPosition==="end"&&{marginLeft:e.spacing(1)})},t.textColor==="inherit"&&{color:"inherit",opacity:.6,[`&.${bu.selected}`]:{opacity:1},[`&.${bu.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},t.textColor==="primary"&&{color:(e.vars||e).palette.text.secondary,[`&.${bu.selected}`]:{color:(e.vars||e).palette.primary.main},[`&.${bu.disabled}`]:{color:(e.vars||e).palette.text.disabled}},t.textColor==="secondary"&&{color:(e.vars||e).palette.text.secondary,[`&.${bu.selected}`]:{color:(e.vars||e).palette.secondary.main},[`&.${bu.disabled}`]:{color:(e.vars||e).palette.text.disabled}},t.fullWidth&&{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"},t.wrapped&&{fontSize:e.typography.pxToRem(12)})),GW=ee.forwardRef(function(t,n){const a=$r({props:t,name:"MuiTab"}),{className:c,disabled:f=!1,disableFocusRipple:o=!1,fullWidth:v,icon:x,iconPosition:E="top",indicator:T,label:P,onChange:I,onClick:q,onFocus:U,selected:G,selectionFollowsFocus:D,textColor:F="inherit",value:V,wrapped:B=!1}=a,z=$t(a,VW),ne=fe({},a,{disabled:f,disableFocusRipple:o,selected:G,icon:!!x,iconPosition:E,label:!!P,fullWidth:v,textColor:F,wrapped:B}),oe=qW(ne),pe=x&&P&&ee.isValidElement(x)?ee.cloneElement(x,{className:qt(oe.iconWrapper,x.props.className)}):x,be=_e=>{!G&&I&&I(_e,V),q&&q(_e)},Te=_e=>{D&&!G&&I&&I(_e,V),U&&U(_e)};return Q.jsxs(WW,fe({focusRipple:!o,className:qt(oe.root,c),ref:n,role:"tab","aria-selected":G,disabled:f,onClick:be,onFocus:Te,ownerState:ne,tabIndex:G?0:-1},z,{children:[E==="top"||E==="start"?Q.jsxs(ee.Fragment,{children:[pe,P]}):Q.jsxs(ee.Fragment,{children:[P,pe]}),T]}))}),Pl=GW,HW=kb(Q.jsx("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft"),ZW=kb(Q.jsx("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight");function KW(e){return(1+Math.sin(Math.PI*e-Math.PI/2))/2}function XW(e,t,n,a={},c=()=>{}){const{ease:f=KW,duration:o=300}=a;let v=null;const x=t[e];let E=!1;const T=()=>{E=!0},P=I=>{if(E){c(new Error("Animation cancelled"));return}v===null&&(v=I);const q=Math.min(1,(I-v)/o);if(t[e]=f(q)*(n-x)+x,q>=1){requestAnimationFrame(()=>{c(null)});return}requestAnimationFrame(P)};return x===n?(c(new Error("Element already at target position")),T):(requestAnimationFrame(P),T)}const YW=["onChange"],JW={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};function QW(e){const{onChange:t}=e,n=$t(e,YW),a=ee.useRef(),c=ee.useRef(null),f=()=>{a.current=c.current.offsetHeight-c.current.clientHeight};return Sa(()=>{const o=ev(()=>{const x=a.current;f(),x!==a.current&&t(a.current)}),v=Ws(c.current);return v.addEventListener("resize",o),()=>{o.clear(),v.removeEventListener("resize",o)}},[t]),ee.useEffect(()=>{f(),t(a.current)},[t]),Q.jsx("div",fe({style:JW,ref:c},n))}function eG(e){return Br("MuiTabScrollButton",e)}const tG=Tr("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),rG=tG,nG=["className","slots","slotProps","direction","orientation","disabled"],iG=e=>{const{classes:t,orientation:n,disabled:a}=e;return Ur({root:["root",n,a&&"disabled"]},eG,t)},oG=zt(Wu,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.orientation&&t[n.orientation]]}})(({ownerState:e})=>fe({width:40,flexShrink:0,opacity:.8,[`&.${rG.disabled}`]:{opacity:0}},e.orientation==="vertical"&&{width:"100%",height:40,"& svg":{transform:`rotate(${e.isRtl?-90:90}deg)`}})),aG=ee.forwardRef(function(t,n){var a,c;const f=$r({props:t,name:"MuiTabScrollButton"}),{className:o,slots:v={},slotProps:x={},direction:E}=f,T=$t(f,nG),I=Gp().direction==="rtl",q=fe({isRtl:I},f),U=iG(q),G=(a=v.StartScrollButtonIcon)!=null?a:HW,D=(c=v.EndScrollButtonIcon)!=null?c:ZW,F=os({elementType:G,externalSlotProps:x.startScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:q}),V=os({elementType:D,externalSlotProps:x.endScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:q});return Q.jsx(oG,fe({component:"div",className:qt(U.root,o),ref:n,role:null,ownerState:q,tabIndex:null},T,{children:E==="left"?Q.jsx(G,fe({},F)):Q.jsx(D,fe({},V))}))}),sG=aG;function lG(e){return Br("MuiTabs",e)}const uG=Tr("MuiTabs",["root","vertical","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),R_=uG,cG=["aria-label","aria-labelledby","action","centered","children","className","component","allowScrollButtonsMobile","indicatorColor","onChange","orientation","ScrollButtonComponent","scrollButtons","selectionFollowsFocus","slots","slotProps","TabIndicatorProps","TabScrollButtonProps","textColor","value","variant","visibleScrollbar"],LC=(e,t)=>e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:e.firstChild,zC=(e,t)=>e===t?e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:e.lastChild,Qm=(e,t,n)=>{let a=!1,c=n(e,t);for(;c;){if(c===e.firstChild){if(a)return;a=!0}const f=c.disabled||c.getAttribute("aria-disabled")==="true";if(!c.hasAttribute("tabindex")||f)c=n(e,c);else{c.focus();return}}},pG=e=>{const{vertical:t,fixed:n,hideScrollbar:a,scrollableX:c,scrollableY:f,centered:o,scrollButtonsHideMobile:v,classes:x}=e;return Ur({root:["root",t&&"vertical"],scroller:["scroller",n&&"fixed",a&&"hideScrollbar",c&&"scrollableX",f&&"scrollableY"],flexContainer:["flexContainer",t&&"flexContainerVertical",o&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",v&&"scrollButtonsHideMobile"],scrollableX:[c&&"scrollableX"],hideScrollbar:[a&&"hideScrollbar"]},lG,x)},hG=zt("div",{name:"MuiTabs",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${R_.scrollButtons}`]:t.scrollButtons},{[`& .${R_.scrollButtons}`]:n.scrollButtonsHideMobile&&t.scrollButtonsHideMobile},t.root,n.vertical&&t.vertical]}})(({ownerState:e,theme:t})=>fe({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex"},e.vertical&&{flexDirection:"column"},e.scrollButtonsHideMobile&&{[`& .${R_.scrollButtons}`]:{[t.breakpoints.down("sm")]:{display:"none"}}})),dG=zt("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.scroller,n.fixed&&t.fixed,n.hideScrollbar&&t.hideScrollbar,n.scrollableX&&t.scrollableX,n.scrollableY&&t.scrollableY]}})(({ownerState:e})=>fe({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap"},e.fixed&&{overflowX:"hidden",width:"100%"},e.hideScrollbar&&{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},e.scrollableX&&{overflowX:"auto",overflowY:"hidden"},e.scrollableY&&{overflowY:"auto",overflowX:"hidden"})),fG=zt("div",{name:"MuiTabs",slot:"FlexContainer",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.flexContainer,n.vertical&&t.flexContainerVertical,n.centered&&t.centered]}})(({ownerState:e})=>fe({display:"flex"},e.vertical&&{flexDirection:"column"},e.centered&&{justifyContent:"center"})),mG=zt("span",{name:"MuiTabs",slot:"Indicator",overridesResolver:(e,t)=>t.indicator})(({ownerState:e,theme:t})=>fe({position:"absolute",height:2,bottom:0,width:"100%",transition:t.transitions.create()},e.indicatorColor==="primary"&&{backgroundColor:(t.vars||t).palette.primary.main},e.indicatorColor==="secondary"&&{backgroundColor:(t.vars||t).palette.secondary.main},e.vertical&&{height:"100%",width:2,right:0})),yG=zt(QW)({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),DC={},gG=ee.forwardRef(function(t,n){const a=$r({props:t,name:"MuiTabs"}),c=Gp(),f=c.direction==="rtl",{"aria-label":o,"aria-labelledby":v,action:x,centered:E=!1,children:T,className:P,component:I="div",allowScrollButtonsMobile:q=!1,indicatorColor:U="primary",onChange:G,orientation:D="horizontal",ScrollButtonComponent:F=sG,scrollButtons:V="auto",selectionFollowsFocus:B,slots:z={},slotProps:ne={},TabIndicatorProps:oe={},TabScrollButtonProps:pe={},textColor:be="primary",value:Te,variant:_e="standard",visibleScrollbar:Se=!1}=a,te=$t(a,cG),he=_e==="scrollable",Oe=D==="vertical",je=Oe?"scrollTop":"scrollLeft",Ce=Oe?"top":"left",ke=Oe?"bottom":"right",$e=Oe?"clientHeight":"clientWidth",Ze=Oe?"height":"width",bt=fe({},a,{component:I,allowScrollButtonsMobile:q,indicatorColor:U,orientation:D,vertical:Oe,scrollButtons:V,textColor:be,variant:_e,visibleScrollbar:Se,fixed:!he,hideScrollbar:he&&!Se,scrollableX:he&&!Oe,scrollableY:he&&Oe,centered:E&&!he,scrollButtonsHideMobile:!q}),Pe=pG(bt),Ge=os({elementType:z.StartScrollButtonIcon,externalSlotProps:ne.startScrollButtonIcon,ownerState:bt}),st=os({elementType:z.EndScrollButtonIcon,externalSlotProps:ne.endScrollButtonIcon,ownerState:bt}),[Re,qe]=ee.useState(!1),[Kt,It]=ee.useState(DC),[Ot,Et]=ee.useState(!1),[nr,Zt]=ee.useState(!1),[Yt,at]=ee.useState(!1),[Dt,er]=ee.useState({overflow:"hidden",scrollbarWidth:0}),Rr=new Map,Nr=ee.useRef(null),tr=ee.useRef(null),Vr=()=>{const ut=Nr.current;let Rt;if(ut){const Sr=ut.getBoundingClientRect();Rt={clientWidth:ut.clientWidth,scrollLeft:ut.scrollLeft,scrollTop:ut.scrollTop,scrollLeftNormalized:_8(ut,c.direction),scrollWidth:ut.scrollWidth,top:Sr.top,bottom:Sr.bottom,left:Sr.left,right:Sr.right}}let gr;if(ut&&Te!==!1){const Sr=tr.current.children;if(Sr.length>0){const rn=Sr[Rr.get(Te)];gr=rn?rn.getBoundingClientRect():null}}return{tabsMeta:Rt,tabMeta:gr}},Lr=Us(()=>{const{tabsMeta:ut,tabMeta:Rt}=Vr();let gr=0,Sr;if(Oe)Sr="top",Rt&&ut&&(gr=Rt.top-ut.top+ut.scrollTop);else if(Sr=f?"right":"left",Rt&&ut){const Le=f?ut.scrollLeftNormalized+ut.clientWidth-ut.scrollWidth:ut.scrollLeft;gr=(f?-1:1)*(Rt[Sr]-ut[Sr]+Le)}const rn={[Sr]:gr,[Ze]:Rt?Rt[Ze]:0};if(isNaN(Kt[Sr])||isNaN(Kt[Ze]))It(rn);else{const Le=Math.abs(Kt[Sr]-rn[Sr]),tt=Math.abs(Kt[Ze]-rn[Ze]);(Le>=1||tt>=1)&&It(rn)}}),Er=(ut,{animation:Rt=!0}={})=>{Rt?XW(je,Nr.current,ut,{duration:c.transitions.duration.standard}):Nr.current[je]=ut},on=ut=>{let Rt=Nr.current[je];Oe?Rt+=ut:(Rt+=ut*(f?-1:1),Rt*=f&&WP()==="reverse"?-1:1),Er(Rt)},Mr=()=>{const ut=Nr.current[$e];let Rt=0;const gr=Array.from(tr.current.children);for(let Sr=0;Sr<gr.length;Sr+=1){const rn=gr[Sr];if(Rt+rn[$e]>ut){Sr===0&&(Rt=ut);break}Rt+=rn[$e]}return Rt},lr=()=>{on(-1*Mr())},Xr=()=>{on(Mr())},wn=ee.useCallback(ut=>{er({overflow:null,scrollbarWidth:ut})},[]),oi=()=>{const ut={};ut.scrollbarSizeListener=he?Q.jsx(yG,{onChange:wn,className:qt(Pe.scrollableX,Pe.hideScrollbar)}):null;const gr=he&&(V==="auto"&&(Ot||nr)||V===!0);return ut.scrollButtonStart=gr?Q.jsx(F,fe({slots:{StartScrollButtonIcon:z.StartScrollButtonIcon},slotProps:{startScrollButtonIcon:Ge},orientation:D,direction:f?"right":"left",onClick:lr,disabled:!Ot},pe,{className:qt(Pe.scrollButtons,pe.className)})):null,ut.scrollButtonEnd=gr?Q.jsx(F,fe({slots:{EndScrollButtonIcon:z.EndScrollButtonIcon},slotProps:{endScrollButtonIcon:st},orientation:D,direction:f?"left":"right",onClick:Xr,disabled:!nr},pe,{className:qt(Pe.scrollButtons,pe.className)})):null,ut},dr=Us(ut=>{const{tabsMeta:Rt,tabMeta:gr}=Vr();if(!(!gr||!Rt)){if(gr[Ce]<Rt[Ce]){const Sr=Rt[je]+(gr[Ce]-Rt[Ce]);Er(Sr,{animation:ut})}else if(gr[ke]>Rt[ke]){const Sr=Rt[je]+(gr[ke]-Rt[ke]);Er(Sr,{animation:ut})}}}),Bt=Us(()=>{he&&V!==!1&&at(!Yt)});ee.useEffect(()=>{const ut=ev(()=>{Nr.current&&Lr()});let Rt;const gr=Le=>{Le.forEach(tt=>{tt.removedNodes.forEach(wt=>{var ar;(ar=Rt)==null||ar.unobserve(wt)}),tt.addedNodes.forEach(wt=>{var ar;(ar=Rt)==null||ar.observe(wt)})}),ut(),Bt()},Sr=Ws(Nr.current);Sr.addEventListener("resize",ut);let rn;return typeof ResizeObserver<"u"&&(Rt=new ResizeObserver(ut),Array.from(tr.current.children).forEach(Le=>{Rt.observe(Le)})),typeof MutationObserver<"u"&&(rn=new MutationObserver(gr),rn.observe(tr.current,{childList:!0})),()=>{var Le,tt;ut.clear(),Sr.removeEventListener("resize",ut),(Le=rn)==null||Le.disconnect(),(tt=Rt)==null||tt.disconnect()}},[Lr,Bt]),ee.useEffect(()=>{const ut=Array.from(tr.current.children),Rt=ut.length;if(typeof IntersectionObserver<"u"&&Rt>0&&he&&V!==!1){const gr=ut[0],Sr=ut[Rt-1],rn={root:Nr.current,threshold:.99},Le=zr=>{Et(!zr[0].isIntersecting)},tt=new IntersectionObserver(Le,rn);tt.observe(gr);const wt=zr=>{Zt(!zr[0].isIntersecting)},ar=new IntersectionObserver(wt,rn);return ar.observe(Sr),()=>{tt.disconnect(),ar.disconnect()}}},[he,V,Yt,T==null?void 0:T.length]),ee.useEffect(()=>{qe(!0)},[]),ee.useEffect(()=>{Lr()}),ee.useEffect(()=>{dr(DC!==Kt)},[dr,Kt]),ee.useImperativeHandle(x,()=>({updateIndicator:Lr,updateScrollButtons:Bt}),[Lr,Bt]);const Un=Q.jsx(mG,fe({},oe,{className:qt(Pe.indicator,oe.className),ownerState:bt,style:fe({},Kt,oe.style)}));let On=0;const ji=ee.Children.map(T,ut=>{if(!ee.isValidElement(ut))return null;const Rt=ut.props.value===void 0?On:ut.props.value;Rr.set(Rt,On);const gr=Rt===Te;return On+=1,ee.cloneElement(ut,fe({fullWidth:_e==="fullWidth",indicator:gr&&!Re&&Un,selected:gr,selectionFollowsFocus:B,onChange:G,textColor:be,value:Rt},On===1&&Te===!1&&!ut.props.tabIndex?{tabIndex:0}:{}))}),Ft=ut=>{const Rt=tr.current,gr=ko(Rt).activeElement;if(gr.getAttribute("role")!=="tab")return;let rn=D==="horizontal"?"ArrowLeft":"ArrowUp",Le=D==="horizontal"?"ArrowRight":"ArrowDown";switch(D==="horizontal"&&f&&(rn="ArrowRight",Le="ArrowLeft"),ut.key){case rn:ut.preventDefault(),Qm(Rt,gr,zC);break;case Le:ut.preventDefault(),Qm(Rt,gr,LC);break;case"Home":ut.preventDefault(),Qm(Rt,null,LC);break;case"End":ut.preventDefault(),Qm(Rt,null,zC);break}},wr=oi();return Q.jsxs(hG,fe({className:qt(Pe.root,P),ownerState:bt,ref:n,as:I},te,{children:[wr.scrollButtonStart,wr.scrollbarSizeListener,Q.jsxs(dG,{className:Pe.scroller,ownerState:bt,style:{overflow:Dt.overflow,[Oe?`margin${f?"Left":"Right"}`:"marginBottom"]:Se?void 0:-Dt.scrollbarWidth},ref:Nr,children:[Q.jsx(fG,{"aria-label":o,"aria-labelledby":v,"aria-orientation":D==="vertical"?"vertical":null,className:Pe.flexContainer,ownerState:bt,onKeyDown:Ft,ref:tr,role:"tablist",children:ji}),Re&&Un]}),wr.scrollButtonEnd]}))}),Nb=gG;function vG(e){return Br("MuiTextField",e)}Tr("MuiTextField",["root"]);const _G=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],xG={standard:xA,filled:yA,outlined:IA},bG=e=>{const{classes:t}=e;return Ur({root:["root"]},vG,t)},wG=zt(Pv,{name:"MuiTextField",slot:"Root",overridesResolver:(e,t)=>t.root})({}),SG=ee.forwardRef(function(t,n){const a=$r({props:t,name:"MuiTextField"}),{autoComplete:c,autoFocus:f=!1,children:o,className:v,color:x="primary",defaultValue:E,disabled:T=!1,error:P=!1,FormHelperTextProps:I,fullWidth:q=!1,helperText:U,id:G,InputLabelProps:D,inputProps:F,InputProps:V,inputRef:B,label:z,maxRows:ne,minRows:oe,multiline:pe=!1,name:be,onBlur:Te,onChange:_e,onFocus:Se,placeholder:te,required:he=!1,rows:Oe,select:je=!1,SelectProps:Ce,type:ke,value:$e,variant:Ze="outlined"}=a,bt=$t(a,_G),Pe=fe({},a,{autoFocus:f,color:x,disabled:T,error:P,fullWidth:q,multiline:pe,required:he,select:je,variant:Ze}),Ge=bG(Pe),st={};Ze==="outlined"&&(D&&typeof D.shrink<"u"&&(st.notched=D.shrink),st.label=z),je&&((!Ce||!Ce.native)&&(st.id=void 0),st["aria-describedby"]=void 0);const Re=vb(G),qe=U&&Re?`${Re}-helper-text`:void 0,Kt=z&&Re?`${Re}-label`:void 0,It=xG[Ze],Ot=Q.jsx(It,fe({"aria-describedby":qe,autoComplete:c,autoFocus:f,defaultValue:E,fullWidth:q,multiline:pe,name:be,rows:Oe,maxRows:ne,minRows:oe,type:ke,value:$e,id:Re,inputRef:B,onBlur:Te,onChange:_e,onFocus:Se,placeholder:te,inputProps:F},st,V));return Q.jsxs(wG,fe({className:qt(Ge.root,v),disabled:T,error:P,fullWidth:q,ref:n,required:he,color:x,variant:Ze,ownerState:Pe},bt,{children:[z!=null&&z!==""&&Q.jsx(zb,fe({htmlFor:Re,id:Kt},D,{children:z})),je?Q.jsx(Av,fe({"aria-describedby":qe,id:Re,labelId:Kt,value:$e,input:Ot},Ce,{children:o})):Ot,U&&Q.jsx(C7,fe({id:qe},I,{children:U}))]}))}),AA=SG,EG=({feederLayerCode:e,setFeederLayerCode:t})=>{const n=a=>{t(a.target.value)};return Q.jsx(Pv,{variant:"outlined",className:"custom-feeder-selection",children:Q.jsxs(Av,{id:"feeder-selection",value:e,onChange:n,style:{width:"100%",height:"40px",fontSize:"12px",marginRight:"20px"},children:[Q.jsx(Op,{value:"PeakHourGasDemand_KW",children:"Peak Hour Gas Demand"}),Q.jsx(Op,{value:"PeakHourElectricityDemand_KW",children:"Peak Hour Electricity Demand"})]})})},CG=({propertiesNumber:e,handlePropertyChange:t,blockContainerVisible:n,mobilityContainerVisible:a})=>Q.jsx("div",{children:Q.jsxs("div",{className:"mobility-dropdown-container",children:[Q.jsxs("select",{className:"mobility-dropdown",value:e.mode,onChange:c=>t("mode",c.target.value),children:[Q.jsx("option",{value:"-1",children:"All Trip Modes"}),Q.jsx("option",{value:"0",children:"Walk"}),Q.jsx("option",{value:"1",children:"Bike"}),Q.jsx("option",{value:"2",children:"Car"}),n&&Q.jsx("option",{value:"3",children:"Public Transit"})]}),Q.jsx("select",{className:"mobility-dropdown",value:e.season,onChange:c=>t("season",c.target.value),children:Q.jsx("option",{value:"1",children:"Spring"})}),Q.jsxs("select",{className:"mobility-dropdown",value:e.timeOfDay,onChange:c=>t("timeOfDay",c.target.value),children:[Q.jsx("option",{value:"-1",children:"All Time Periods"}),Q.jsx("option",{value:"0",children:"Morning (12am - 6am)"}),Q.jsx("option",{value:"1",children:"Breakfast (6am - 11am)"}),Q.jsx("option",{value:"2",children:"Lunch (11am - 3pm)"}),Q.jsx("option",{value:"3",children:"Afternoon (3pm - 5pm)"}),Q.jsx("option",{value:"4",children:"Dinner (5pm - 9pm)"}),Q.jsx("option",{value:"5",children:"Night (9pm - 12am)"})]})]})}),kG=({propertiesNumber:e,handlePropertyChange:t})=>Q.jsxs("div",{className:"mobility-dropdown-container",children:[Q.jsxs("select",{className:"mobility-dropdown",value:e.weekday,onChange:n=>t("weekday",n.target.value),children:[Q.jsx("option",{value:"1",children:"Weekday"}),Q.jsx("option",{value:"0",children:"Weekend"})]}),Q.jsxs("select",{className:"mobility-dropdown-activity",value:e.fromActivity,onChange:n=>t("fromActivity",n.target.value),children:[Q.jsx("option",{value:"0",children:"Home"}),Q.jsx("option",{value:"1",children:"Work/School"}),Q.jsx("option",{value:"2",children:"Leisure"}),Q.jsx("option",{value:"-1",children:"All From-Activities"})]}),Q.jsxs("select",{className:"mobility-dropdown-activity",value:e.toActivity,onChange:n=>t("toActivity",n.target.value),children:[Q.jsx("option",{value:"0",children:"Home"}),Q.jsx("option",{value:"1",children:"Work/School"}),Q.jsx("option",{value:"2",children:"Leisure"}),Q.jsx("option",{value:"-1",children:"All To-Activities"})]})]}),TG=()=>{const[e,t]=ee.useState(0),n=(a,c)=>{t(c)};return Q.jsxs(ao,{sx:{width:"100%"},children:[Q.jsxs(Nb,{value:e,onChange:n,centered:!0,children:[Q.jsx(Pl,{label:"Weekday Trip Volume",sx:{textTransform:"none"}}),Q.jsx(Pl,{label:"Weekend Trip Volume",sx:{textTransform:"none"}})]}),Q.jsx("div",{role:"tabpanel",hidden:e!==0,children:Q.jsx(ao,{sx:{p:3},children:Q.jsx("div",{id:"graph-container-weekday",className:"graph-container-weekday"})})}),Q.jsx("div",{role:"tabpanel",hidden:e!==1,children:Q.jsx(ao,{sx:{p:3},children:Q.jsx("div",{id:"graph-container-weekend",className:"graph-container-weekend"})})})]})},IG=()=>{const[e,t]=ee.useState(0),n=(a,c)=>{t(c)};return Q.jsxs(ao,{sx:{width:"100%",overflow:"hidden"},children:[" ",Q.jsxs(Nb,{value:e,onChange:n,centered:!0,sx:{".MuiTabs-flexContainer":{paddingLeft:"30px"},".MuiTab-root":{textTransform:"none",marginRight:"8px"}},children:[Q.jsx(Pl,{label:"Energy Summary"}),Q.jsx(Pl,{label:"Energy End Use"}),Q.jsx(Pl,{label:"Energy Fuel Use"})]}),Q.jsx("div",{role:"tabpanel",hidden:e!==0,children:Q.jsx(ao,{sx:{p:3},children:Q.jsx("div",{id:"graph-container-energysummaryuse",className:"graph-container-energysummaryuse"})})}),Q.jsx("div",{role:"tabpanel",hidden:e!==1,children:Q.jsx(ao,{sx:{p:3},children:Q.jsx("div",{id:"graph-container-energyenduse",className:"graph-container-energyenduse"})})}),Q.jsx("div",{role:"tabpanel",hidden:e!==2,children:Q.jsx(ao,{sx:{p:3},children:Q.jsx("div",{id:"graph-container-energyfueluse",className:"graph-container-energyfueluse"})})})]})},PG=()=>{const[e,t]=ee.useState(0),n=(a,c)=>{t(c)};return Q.jsxs(ao,{sx:{width:"100%"},children:[Q.jsxs(Nb,{value:e,onChange:n,centered:!0,children:[Q.jsx(Pl,{label:"Winter Energy Load",sx:{textTransform:"none"}}),Q.jsx(Pl,{label:"Summer Energy Load",sx:{textTransform:"none"}}),Q.jsx(Pl,{label:"Load Duration Curve",sx:{textTransform:"none"}})]}),Q.jsx("div",{role:"tabpanel",hidden:e!==0,children:Q.jsx(ao,{sx:{p:3},children:Q.jsx("div",{id:"graph-container-energyone",className:"graph-container-energyone"})})}),Q.jsx("div",{role:"tabpanel",hidden:e!==1,children:Q.jsx(ao,{sx:{p:3},children:Q.jsx("div",{id:"graph-container-energytwo",className:"graph-container-energytwo"})})}),Q.jsx("div",{role:"tabpanel",hidden:e!==2,children:Q.jsx(ao,{sx:{p:3},children:Q.jsx("div",{id:"graph-container-energythree",className:"graph-container-energythree"})})})]})},OC=bP().domain(["Heating","Cooling","Equipment","Lighting","HotWater","PV"]).range(["#cf5867","#6faadd","#959595","#f2e75c","#eec176","#9C27B0"]);function AG({data:e,colorScale:t,onBarDoubleClick:n}){const a=ee.useRef();return ee.useEffect(()=>{if(!a.current)return;const c=a.current;Qy(c).selectAll("*").remove();const f={top:0,right:0,bottom:0,left:0},o=220-f.left-f.right,v=20-f.top-f.bottom,x=Qy(c).append("svg").attr("width",o+f.left+f.right).attr("height",v+f.top+f.bottom).append("g").attr("transform",`translate(${f.left}, ${f.top})`),E=wP().domain([0,JO(e,P=>P.value)]).range([0,o]);let T=0;x.selectAll(".bar").data(e).enter().append("rect").attr("class","bar").attr("x",P=>{const I=T;return T+=E(P.value),I}).attr("y",0).attr("width",P=>E(P.value)).attr("height",v).attr("fill",P=>t(P.name)).on("dblclick",P=>n(P.name))},[e,t,n]),Q.jsx(ao,{ref:a})}function MG({colorScale:e}){const t=ee.useRef();return ee.useEffect(()=>{if(!t.current)return;const n=t.current;Qy(n).selectAll("*").remove();const a=100,c=20,o=Math.ceil(e.domain().length/3)*c,v=Qy(n).append("svg").attr("width","100%").attr("height",o).append("g");e.domain().forEach((x,E)=>{const T=Math.floor(E/3),P=E%3,I=v.append("g").attr("transform",`translate(${P*a}, ${T*c})`);I.append("rect").attr("x",40).attr("y",0).attr("width",10).attr("height",10).attr("fill",e(x)),I.append("text").attr("x",60).attr("y",10).style("font-size","10px").text(x)})},[e]),Q.jsx(ao,{ref:t})}function L_({mapRef:e,setBuildingDataUrl:t,setIthacaEnergyUrl:n,BUILDING_DATA_URL:a,BUILDING_DATA_URL_INITIAL:c,ITHACA_ENERGY_URL_INITIAL:f}){const[o,v]=ee.useState([{id:1,name:"Baseline",data:[{name:"Heating",value:39973},{name:"Cooling",value:4630},{name:"Equipment",value:3372},{name:"Lighting",value:1810},{name:"HotWater",value:4900},{name:"PV",value:0}]},{id:2,name:"ResidentialElectrified",data:[{name:"Heating",value:32973},{name:"Cooling",value:4630},{name:"Equipment",value:3372},{name:"Lighting",value:1810},{name:"HotWater",value:4900},{name:"PV",value:0}]},{id:3,name:"CommercialElectrified",data:[{name:"Heating",value:22973},{name:"Cooling",value:4630},{name:"Equipment",value:3372},{name:"Lighting",value:1810},{name:"HotWater",value:4900},{name:"PV",value:0}]},{id:4,name:"FullElectrified",data:[{name:"Heating",value:15973},{name:"Cooling",value:4630},{name:"Equipment",value:3372},{name:"Lighting",value:1810},{name:"HotWater",value:4900},{name:"PV",value:0}]}]),[x,E]=ee.useState(null),T=(U,G)=>{U.dataTransfer.setData("text/plain",G)},P=(U,G)=>{U.preventDefault();const D=parseInt(U.dataTransfer.getData("text/plain"),10),F=o.findIndex(ne=>ne.id===G),V=o.findIndex(ne=>ne.id===D),B=[...o],[z]=B.splice(V,1);B.splice(F,0,z),v(B)},I=U=>{U.preventDefault()},q=U=>{E(U);let G,D;switch(x){case"Baseline":G="./ScenarioData/Baseline_clean.geojson",D="./ScenarioData/Baseline_SiteSummary.geojson";break;case"Residential Electrified":G="./ScenarioData/ResidentialElectrified_clean.geojson",D="./ScenarioData/ResidentialElectrified_SiteSummary.geojson";break;case"Commercial Electrified":G="./ScenarioData/CommercialElectrified_clean.geojson",D="./ScenarioData/CommercialElectrified_SiteSummary.geojson";break;case"Full Electrified":G="./ScenarioData/FullElectrified_clean.geojson",D="./ScenarioData/FullElectrified_SiteSummary.geojson";break;default:G=c,D=f}G!==a&&(t(G),n(D));const F=e.current;F&&(F.getSource("ithaca-energy-Building").setData(G),F.getSource("ithaca-energy-Summary").setData(D))};return Q.jsxs(ao,{children:[Q.jsx(Db,{style:{padding:"12px",backgroundColor:"transparent",fontFamily:"Open Sans, sans-serif"},children:o.map(U=>Q.jsxs(wA,{draggable:!0,onDragStart:G=>T(G,U.id),onDragOver:I,onDrop:G=>P(G,U.id),onDoubleClick:()=>q(U.name),style:{margin:"8px 0",backgroundColor:x===U.name?"#E0E0E0":"#F5F5F5",borderRadius:"4px",border:"1px solid #E0E0E0",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px",height:"35px",cursor:"pointer"},disableGutters:!0,children:[Q.jsx(ao,{children:U.name.split(" ").map((G,D)=>Q.jsx(lp,{variant:"body2",style:{fontSize:"12px"},children:G},D))}),Q.jsx(AG,{data:U.data,colorScale:OC})]},U.id))}),Q.jsx(MG,{colorScale:OC})]})}const RG=({onDataImport:e,addFile:t,mapRef:n,setTitle:a,setDisplayingLayers:c,setHomeContainerVisible:f,setGeneralContainerVisible:o})=>{const[v,x]=ee.useState(!1),[E,T]=ee.useState(null),[P,I]=ee.useState(""),[q,U]=ee.useState(""),[G,D]=ee.useState(null),F=ee.useRef(null),V=()=>x(!0),B=()=>x(!1),z=be=>I(be.target.value),ne=be=>U(be.target.value),oe=be=>{const Te=be.target.files[0];if(!Te)return;T(Te),I(Te.name);const _e=new FileReader;_e.onload=Se=>{D(Se.target.result);const te={file:Te,name:P||Te.name,content:Se.target.result};t(te)},_e.readAsText(Te)},pe=()=>{if(!E){alert("Please select a file first!");return}if(!q){alert("Please select a data type!");return}try{const be=URL.createObjectURL(E);e(be);const Te=n.current,_e=JSON.parse(G);_e.features&&_e.features.length>0&&Te.flyTo({center:[-76.5087,42.444],zoom:13}),c(["energy-Building","energy-Building-highlighted","energy-Building-other"]),["energy-Building","energy-Building-highlighted","energy-Building-other"].forEach(Se=>{Te.setLayoutProperty(Se,"visibility","visible")}),a("UBEM Viewer / Ithaca"),f(!1),o(!0)}catch(be){console.error("Error processing the file",be)}B()};return Q.jsxs("div",{children:[Q.jsx(xl,{variant:"contained",color:"primary",onClick:V,sx:{backgroundColor:"gray",position:"absolute",top:"35%",left:"46%",fontSize:"1.25rem",padding:"4px 12px"},children:"+ Add Data"}),Q.jsxs(pA,{open:v,onClose:B,children:[Q.jsx(fA,{children:"Upload your GeoJSON file(s) Here."}),Q.jsxs(dA,{children:[Q.jsxs(xl,{variant:"outlined",component:"label",sx:{marginTop:2},children:["Choose File",Q.jsx("input",{type:"file",hidden:!0,accept:".geojson",onChange:oe,ref:F})]}),E&&Q.jsxs(Q.Fragment,{children:[Q.jsx(AA,{fullWidth:!0,label:"File Name",variant:"outlined",value:P,onChange:z,margin:"normal"}),Q.jsxs(Pv,{fullWidth:!0,margin:"normal",children:[Q.jsx(zb,{children:"Data Type"}),Q.jsxs(Av,{value:q,label:"Data Type",onChange:ne,children:[Q.jsx(Op,{value:"mobility",children:"Mobility"}),Q.jsx(Op,{value:"energy",children:"Energy"})]})]})]})]}),Q.jsxs(hA,{children:[Q.jsx(xl,{onClick:B,children:"Cancel"}),Q.jsx(xl,{onClick:pe,children:"View"})]})]})]})},LG=({selectedFile:e,setSelectedFile:t,onDataImport:n,files:a,setFiles:c,deleteFile:f})=>{const[o,v]=ee.useState(!1),[x,E]=ee.useState(""),T=ee.useRef(null),P=()=>v(!0),I=()=>v(!1),q=B=>E(B.target.value),U=B=>{const z=B.target.value;t({...e,name:z});const ne=a.map(oe=>oe===e?{...oe,name:z}:oe);c(ne)},G=B=>{const z=B.target.files[0];if(!z)return;const ne={file:z,name:z.name,content:null},oe=new FileReader;oe.onload=pe=>{ne.content=pe.target.result,c(be=>[...be,ne])},oe.readAsText(z)},D=()=>{if(!e){alert("Please select a file from the list!");return}if(!x){alert("Please select a data type!");return}const B=URL.createObjectURL(e.file);n(B),I()},F=B=>{t(B),n(B)},V=(B,z)=>{z.stopPropagation(),f(B),e&&a[B]===e&&t(null)};return Q.jsxs("div",{children:[Q.jsx(xl,{variant:"contained",color:"primary",onClick:P,sx:{backgroundColor:"gray",fontSize:"0.75rem",padding:"2px 5px"},children:"+ Manage Data"}),Q.jsxs(pA,{open:o,onClose:I,fullWidth:!0,maxWidth:"sm",children:[Q.jsx(fA,{children:"Manage your GeoJSON files"}),Q.jsxs(dA,{children:[Q.jsxs(xl,{variant:"outlined",component:"label",sx:{marginTop:2},children:["Add File",Q.jsx("input",{type:"file",hidden:!0,accept:".geojson",onChange:G,ref:T})]}),Q.jsx(Db,{children:a.map((B,z)=>Q.jsx(wA,{disablePadding:!0,secondaryAction:Q.jsx(mV,{edge:"end","aria-label":"delete",onClick:ne=>V(z,ne),children:Q.jsx(U7,{children:"X"})}),children:Q.jsx(hq,{onClick:()=>F(B),selected:e===B,sx:{bgcolor:ne=>e===B?ne.palette.primary.main:"transparent"},children:Q.jsx(Rq,{primary:B.name})})},z))}),e&&Q.jsxs(Q.Fragment,{children:[Q.jsx(AA,{fullWidth:!0,label:"File Name",variant:"outlined",value:e.name,onChange:U,margin:"normal"}),Q.jsxs(Pv,{fullWidth:!0,margin:"normal",children:[Q.jsx(zb,{children:"Data Type"}),Q.jsxs(Av,{value:x,label:"Data Type",onChange:q,children:[Q.jsx(Op,{value:"mobility",children:"Mobility"}),Q.jsx(Op,{value:"energy",children:"Energy"})]})]})]})]}),Q.jsxs(hA,{children:[Q.jsx(xl,{onClick:I,children:"Cancel"}),Q.jsx(xl,{onClick:D,children:"View"})]})]})]})};Ds.accessToken="pk.eyJ1Ijoia3g2NCIsImEiOiJjbGkzd2E1dmsxMzNoM2twY2p2azF0bGVlIn0.t_v73kaAMUtoGBPESpw3uA";const zG="./Data/ithaca_mobility_summary.geojson",DG="./Data/ithaca_mobility_summary_point.geojson",ey="./Data/ithaca_siteSummary_energy.geojson",ty="./Data/ithaca_energy_buildingData_1107.geojson",BC="./Data/ithaca_energy_feeder.geojson",NC="./Data/ithaca_trip_volume_by_streets.geojson",FC="./Data/ithaca_trip_volume_from_blocks.geojson",jC="./Data/mobility_metric_specification.json",UC="./Data/energy_metric_specification.json",OG="https://geotile.urbano.io/Ithaca_TripVolume/{z}/{x}/{y}.mvt";function BG(){var rn;const e=ee.useRef(null),t=ee.useRef(null),[n,a]=ee.useState([0,398]),[c,f]=ee.useState(ty),[o,v]=ee.useState(ey),[x,E]=ee.useState(!0),T="mapbox://styles/kx64/cljdd8xr6003l01qkbxctho6q",[P,I]=ee.useState("UBEM Viewer"),[q,U]=ee.useState(""),[G,D]=ee.useState(!0),[F,V]=ee.useState(!1),[B,z]=ee.useState(!1),[ne,oe]=ee.useState(!1),[pe,be]=ee.useState(!1),[Te,_e]=ee.useState(!1),[Se,te]=ee.useState(!1),[he,Oe]=ee.useState(!1),[je,Ce]=ee.useState(!1);ee.useState("weekday"),ee.useState("enduse"),ee.useState("winter");const[ke,$e]=ee.useState([]);ee.useState(!1);const[Ze,bt]=ee.useState([]),[Pe,Ge]=ee.useState(null),st=Le=>{bt(tt=>[...tt,Le])},Re=Le=>{bt(tt=>tt.filter((wt,ar)=>ar!==Le))},qe=ee.useRef(new Set),[Kt,It]=ee.useState(0),[Ot,Et]=ee.useState("1_1_-1_-1_-1_-1"),[nr,Zt]=ee.useState("Gas[kWh_m2][Yr]"),[Yt,at]=ee.useState("PeakHourElectricityDemand_KW"),[Dt,er]=ee.useState(12857),[Rr,Nr]=ee.useState(1700),[tr,Vr]=ee.useState(1e3),[Lr,Er]=ee.useState(0),[on,Mr]=ee.useState(53143),[lr,Xr]=ee.useState(1),[wn,oi]=ee.useState(1),[dr,Bt]=ee.useState({season:1,mode:-1,weekday:1,timeOfDay:-1,fromActivity:-1,toActivity:-1}),[Un,On]=ee.useState("People/hr");ee.useState(ke.length>0?(rn=q6.find(Le=>Le.id===ke[0]))==null?void 0:rn.label:"Dashboard Selector");const ji=()=>{if(t.current){const Le=t.current;ke.forEach(tt=>{Le.setLayoutProperty(tt,"visibility","none")}),I("UBEM Viewer"),_e(!1),z(!1),oe(!1),be(!1),te(!1),V(!1),D(!0),__(t,qe),It(qe.current.size),Le.flyTo({center:[-76.5087,42.4558],zoom:8})}},Ft=()=>{if(t.current){const Le=t.current;Le.flyTo({center:[-76.5087,42.444],zoom:13}),$e(["energy-Building","energy-Building-highlighted","energy-Building-other"]),ke.forEach(tt=>{Le.setLayoutProperty(tt,"visibility","visible")}),I("UBEM Viewer / Ithaca"),U("Ithaca /k/ is a city and the county seat of Tompkins County, New York, United States. Situated on the southern shore of Cayuga Lake in the Finger Lakes region of New York, Ithaca is the largest community in the Ithaca metropolitan statistical area. It is named after the Greek island of Ithaca."),D(!1),V(!0),z(!1),__(t,qe),It(qe.current.size),popup.remove()}},wr=(Le,tt)=>{Bt(wt=>({...wt,[Le]:parseInt(tt)}))},ut=()=>{const Le=`1_${dr.weekday}_${dr.mode}_${dr.timeOfDay}_${dr.fromActivity}_${dr.toActivity}`;Et(Le),console.log("the layer Code you selected is",Ot)};ee.useEffect(()=>{const Le=tt=>{tt.key==="Escape"&&(__(t,qe),It(qe.current.size),ke.includes("energy-Building")&&(generateEndUseBarGraph(qe,t),generateFuelUseBarGraph(qe,t)),ke.includes("energy-Feeder")&&(LE(qe,t),zE(qe,t),DE(qe,t)),ke.includes("mobility-Block-Detailed")&&(b_(qe,t),x_(qe,t),w_(qe,t),S_(qe,t)),ke.includes("mobility-Street-Detailed")&&(b_(qe,t),x_(qe,t),w_(qe,t),S_(qe,t)))};return document.addEventListener("keydown",Le),()=>{document.removeEventListener("keydown",Le)}},[]),ee.useEffect(()=>{fetch(NC).then(Le=>Le.json()).then(Le=>{const tt=Le.features.map(re=>{var ye;return((ye=re.properties[Ot])==null?void 0:ye.replace(/,/g,""))||0});tt.sort((re,me)=>re-me);const wt=Math.floor(tt.length*.05),ar=Math.floor(tt.length*.95),zr=tt[wt],Ht=tt[ar],L=Ht-zr,j=Ht+1.5*L,W=tt.filter(re=>re<=j),Y=Math.max(...W);er(Y),ke.includes("mobility-Street-Detailed")&&Xr(Y)}).catch(Le=>{console.error("Error loading GeoJSON data:",Le)})},[Ot]),ee.useEffect(()=>{fetch(FC).then(Le=>Le.json()).then(Le=>{const tt=Le.features.map(re=>{var ye;return parseFloat((ye=re.properties[Ot])==null?void 0:ye.replace(/,/g,""))||0});tt.sort((re,me)=>re-me);const wt=Math.floor(tt.length*.05),ar=Math.floor(tt.length*.95),zr=tt[wt],Ht=tt[ar],L=Ht-zr,j=Ht+1.5*L,W=tt.filter(re=>re<=j),Y=Math.max(...W);Nr(Y),ke.includes("mobility-Block-Detailed")&&Xr(Y)}).catch(Le=>{console.error("Error loading GeoJSON data:",Le)})},[Ot]),ee.useEffect(()=>{fetch(c).then(Le=>Le.json()).then(Le=>{const tt=Le.features.map(me=>me.properties[nr]||0);tt.sort((me,ye)=>me-ye);const wt=Math.floor(tt.length*.2),ar=Math.floor(tt.length*.8),zr=tt[wt],Ht=tt[ar],L=Ht-zr,j=Ht+1.5*L,W=tt.filter(me=>me<=j),Y=Math.max(...W),re=Math.min(...W);Vr(Y),Er(re),ke.includes("energy-Building")&&(Xr(Y),oi(re))}).catch(Le=>{console.error("Error loading GeoJSON data:",Le)})},[nr,c]),ee.useEffect(()=>{fetch(BC).then(Le=>Le.json()).then(Le=>{const tt=Le.features.map(re=>parseFloat(String(re.properties[Yt]).replace(/,/g,""))||0);tt.sort((re,me)=>re-me);const wt=Math.floor(tt.length*.2),ar=Math.floor(tt.length*.8),zr=tt[wt],Ht=tt[ar],L=Ht-zr,j=Ht+1.5*L,W=tt.filter(re=>re<=j),Y=Math.max(...W);Mr(Y),ke.includes("energy-Feeder")&&Xr(Y)}).catch(Le=>{console.error("Error loading GeoJSON data:",Le)})},[Yt]);const Rt=Le=>{const tt=[];let wt=9,ar=No(Ot,wt);Le.includes("mobility-Street-Detailed")?(wt=Dt,ar=No(Ot,wt)):Le.includes("mobility-Block-Detailed")?(wt=Rr,ar=No(Ot,wt)):Le.includes("energy-Building")?(wt=tr,ar=No(nr,wt)):Le.includes("energy-Feeder")&&(wt=on,ar=No(Yt,wt)),tt.push(Q.jsx("div",{className:"legend-title",children:Un},"legend-title")),tt.push(Q.jsxs("div",{className:"input-container",children:[" ",gr()]}));for(let zr=ar.length-2;zr>=2;zr-=2){const Ht=parseFloat(ar[zr]),L=ar[zr+1];tt.push(Q.jsxs("div",{className:"legend-item",children:[Q.jsx("span",{className:"value-label",children:j6(Ht)}),Q.jsx("div",{className:"color-swatch",style:{backgroundColor:L}})]},Ht))}return tt},gr=()=>{if(ke.includes("mobility-Street-Detailed"))return Q.jsx("input",{id:"user-max-value",type:"number",value:parseInt(Dt),onChange:Le=>{const tt=parseInt(Le.target.value);er(tt)},onBlur:Le=>{Dt<10&&er(10),Le.target.value.trim()===""&&er(lr)},placeholder:"Enter Max Value",inputMode:"numeric"});if(ke.includes("mobility-Block-Detailed"))return Q.jsx("input",{id:"user-max-value",type:"number",value:parseInt(Rr),onChange:Le=>{const tt=parseInt(Le.target.value);Nr(tt)},onBlur:Le=>{Rr<10&&Nr(10),Le.target.value.trim()===""&&Nr(lr)},placeholder:"Enter Max Value",inputMode:"numeric"});if(ke.includes("energy-Building"))return Q.jsx("input",{id:"user-max-value",type:"number",value:parseInt(tr),onChange:Le=>{const tt=parseInt(Le.target.value);Vr(tt)},onBlur:Le=>{tr<10&&Vr(10),Le.target.value.trim()===""&&Vr(lr)},placeholder:"Enter Max Value",inputMode:"numeric"});if(ke.includes("energy-Feeder"))return Q.jsx("input",{id:"user-max-value",type:"number",value:parseInt(on),onChange:Le=>{const tt=parseInt(Le.target.value);Mr(tt)},onBlur:Le=>{on<10&&Mr(10),Le.target.value.trim()===""&&Mr(lr)},placeholder:"Enter Max Value",inputMode:"numeric"})};ee.useEffect(()=>{if(!e.current)return;const Le=new Ds.Map({container:e.current,style:T,center:[-76.5087,42.4558],zoom:8.5,dragRotate:!1,accessToken:Ds.accessToken});return t.current=Le,()=>{Le&&Le.remove()}},[x]),ee.useEffect(()=>{if(t.current){const Le=t.current,tt=new D5({accessToken:Ds.accessToken,flyTo:{bearing:0,speed:2,curve:1,easing:function(wt){return wt}},mapboxgl:Ds});Le.addControl(tt)}},[]),ee.useEffect(()=>{t.current&&t.current.addControl(new Ds.NavigationControl)},[]),ee.useEffect(()=>{if(t.current){const Le=t.current,tt=Le.getCanvasContainer();let wt,ar,zr;Le.on("load",function(){const Ht=Le.getStyle().layers;let L;for(const ie of Ht)if(ie.type==="symbol"){L=ie.id;break}Le.addSource("mobility-Street-mvt",{type:"vector",tiles:[OG]}),Le.addSource("mobility-Street-geojson",{type:"geojson",data:NC}),Le.addSource("mobility-Block-geojson",{type:"geojson",data:FC}),Le.addSource("mobility-Ithaca",{type:"geojson",data:zG}),Le.addSource("mobility-Ithaca-dot",{type:"geojson",data:DG}),Le.addLayer({id:"mobility-Block-Detailed",type:"fill",source:"mobility-Block-geojson",paint:{"fill-outline-color":"#ECECEC","fill-color":No(Ot,Rr),"fill-opacity":.75},layout:{visibility:"none"}},L),Le.addLayer({id:"mobility-Block-Detailed-other",type:"fill",source:"mobility-Block-geojson",paint:{"fill-opacity":0},layout:{visibility:"none"}},L),Le.addLayer({id:"mobility-Block-Detailed-highlighted",type:"fill",source:"mobility-Block-geojson",paint:{"fill-outline-color":"#ffffff","fill-color":"#E8E8E8","fill-opacity":.99},filter:["in","object_id",""],layout:{visibility:"none"}},L),Le.addLayer({id:"mobility-Street-Detailed",type:"line",source:"mobility-Street-geojson",paint:{"line-color":No(Ot,Dt),"line-width":["interpolate",["exponential",1],["to-number",["get",Ot]],0,1,parseFloat(Dt),5]},layout:{visibility:"none"}},L),Le.addLayer({id:"mobility-Street-Detailed-other",type:"line",source:"mobility-Street-geojson",paint:{"line-color":"#f7f7f7","line-width":0},layout:{visibility:"none"}},L),Le.addLayer({id:"mobility-Street-Detailed-highlighted",type:"line",source:"mobility-Street-geojson",paint:{"line-color":"#d8d8d8","line-width":["interpolate",["exponential",1],["to-number",["get",Ot]],0,1.75,parseFloat(Dt),6]},filter:["in","object_id",""],layout:{visibility:"none"}},L),Le.addLayer({id:"mobility-point",type:"circle",source:"mobility-Ithaca-dot",paint:{"circle-color":"rgba(254, 178, 76, 0.85)","circle-radius":40},layout:{visibility:"none"}}),Le.addLayer({id:"mobility-point-label",type:"symbol",source:"mobility-Ithaca-dot",layout:{"text-field":["get","name"],"text-font":["Open Sans Regular"],"text-size":18},layout:{visibility:"none"}}),Le.addLayer({id:"mobility-Ithaca-boundary",type:"line",source:"mobility-Ithaca",paint:{"line-color":"#bbbbbb","line-dasharray":[10,6],"line-opacity":.6},layout:{visibility:"none"}});const j=new Ds.Popup({closeButton:!1,closeOnClick:!1});Le.on("mouseenter","mobility-point",ie=>{Le.getCanvas().style.cursor="pointer";const Ee=ie.features[0].geometry.coordinates.slice(),He=`<div style="font-size: 20px; font-weight: bold; margin-bottom: 5px;">Ithaca, New York</div>
              <div style="font-size: 12px; font-weight: normal; margin-bottom: 10px;">Available Dashboard:</div>
       
              <div style="font-size: 10px; font-weight: light;">Building Energy </div>
              <div style="font-size: 10px; font-weight: light;">Grid Energy </div>
              <div style="font-size: 10px; font-weight: light;">Street Mobility </div>
              <div style="font-size: 10px; font-weight: light;">Block Mobility </div>`;for(;Math.abs(ie.lngLat.lng-Ee[0])>180;)Ee[0]+=ie.lngLat.lng>Ee[0]?360:-360;j.setLngLat(Ee).setHTML(He).addTo(Le)}),Le.on("mouseleave","mobility-point",()=>{Le.getCanvas().style.cursor="",j.remove()}),Le.on("click","mobility-point",ie=>{Le.flyTo({center:ie.features[0].geometry.coordinates,zoom:13}),$e(["energy-Building","energy-Building-highlighted","energy-Building-other"]),ke.forEach(Ee=>{Le.setLayoutProperty(Ee,"visibility","visible")}),I("UBEM Viewer / Ithaca"),U("Ithaca /k/ is a city and the county seat of Tompkins County, New York, United States. Situated on the southern shore of Cayuga Lake in the Finger Lakes region of New York, Ithaca is the largest community in the Ithaca metropolitan statistical area. It is named after the Greek island of Ithaca."),D(!1),V(!0),j.remove()}),Le.on("boxzoomend",ie=>{Le.dragPan.enable();const Ee=ie.boxZoomBounds;Le.fitBounds(Ee,{padding:1})}),Le.on("zoom",()=>{const ie="mobility-point",Ee="mobility-point-label",He="mobility-Ithaca-boundary";Le.getZoom()<10?(Le.setLayoutProperty(ie,"visibility","visible"),Le.setLayoutProperty(Ee,"visibility","visible"),Le.setLayoutProperty(He,"visibility","none")):(Le.setLayoutProperty(ie,"visibility","none"),Le.setLayoutProperty(Ee,"visibility","none"),Le.setLayoutProperty(He,"visibility","visible"))}),tt.addEventListener("mousedown",re,!0);function W(ie){const Ee=tt.getBoundingClientRect();return new Ds.Point(ie.clientX-Ee.left-tt.clientLeft,ie.clientY-Ee.top-tt.clientTop)}function Y(){Le.setFilter("mobility-Street-Detailed-highlighted",["!in","object_id",...qe.current]),Le.setFilter("mobility-Block-Detailed-highlighted",["!in","object_id",...qe.current])}function re(ie){if(ie.button===0&&(ie.shiftKey&&Le.dragPan.disable(),document.addEventListener("mouseup",me),document.addEventListener("keydown",Z),wt=W(ie),ie.ctrlKey)){const He=Le.queryRenderedFeatures([wt,wt],{layers:["mobility-Street-Detailed","mobility-Block-Detailed"]}).map(Xe=>Xe.properties.object_id);qe.current=new Set([...qe.current].filter(Xe=>!He.includes(Xe))),Y(),It(qe.current.size)}}function me(ie){Le.dragPan.enable(),ar=W(ie);const Ee=Le.queryRenderedFeatures([wt,ar],{layers:["mobility-Street-Detailed","mobility-Block-Detailed"]});ye(ie,Ee)}function ye(ie,Ee){if(zr||(zr=document.createElement("div"),zr.classList.add("boxdraw"),tt.appendChild(zr)),ie.shiftKey){for(const He of Ee)qe.current.add(He.properties.object_id);Y()}if(ie.ctrlKey){for(const He of Ee)qe.current.delete(He.properties.object_id);Y()}document.removeEventListener("keydown",Z),document.removeEventListener("mouseup",me),It(qe.current.size)}function Z(ie){ie.keyCode===27&&mobilityfinish()}})}},[]),ee.useEffect(()=>{if(t.current){const Le=t.current,tt=Le.getCanvasContainer();let wt,ar;Le.on("load",function(){const zr=Le.getStyle().layers;let Ht;for(const ye of zr)if(ye.type==="symbol"){Ht=ye.id;break}Le.addSource("ithaca-energy-Summary",{type:"geojson",data:o}),Le.addSource("ithaca-energy-Building",{type:"geojson",data:c}),Le.addSource("ithaca-energy-Feeder",{type:"geojson",data:BC}),Le.addLayer({id:"energy-Building",type:"fill",source:"ithaca-energy-Building",filter:["has","Equipment[KWh][Yr]"],paint:{"fill-outline-color":"#eeeeee","fill-color":No(nr,tr)},layout:{visibility:"none"}},Ht),Le.addLayer({id:"energy-Building-highlighted",type:"fill",source:"ithaca-energy-Building",paint:{"fill-outline-color":"#ffffff","fill-color":"#d8d8d8","fill-opacity":.99},filter:["in","ID_ESL",""],layout:{visibility:"none"}},Ht),Le.addLayer({id:"energy-Building-other",type:"fill",source:"ithaca-energy-Building",filter:["!",["has","Gas[kWh][Mth]"]],paint:{"fill-outline-color":"#d9d9d9","fill-color":"#f1f1f1"},layout:{visibility:"none"}},Ht),Le.addLayer({id:"energy-Feeder",type:"line",source:"ithaca-energy-Feeder",filter:["has","GasDemand_KWh"],paint:{"line-color":No(Yt,on),"line-width":3},layout:{visibility:"none"}},Ht),Le.addLayer({id:"energy-Feeder-other",type:"line",source:"ithaca-energy-Feeder",filter:["!",["has","GasDemand_KWh"]],paint:{"line-width":3,"line-color":"#d8d8d8"},layout:{visibility:"none"}},Ht),Le.addLayer({id:"energy-Feeder-highlighted",type:"line",source:"ithaca-energy-Feeder",filter:["has","GasDemand_KWh"],paint:{"line-color":"#d8d8d8","line-width":3},layout:{visibility:"none"}},Ht),tt.addEventListener("mousedown",W,!0);function L(ye){const Z=tt.getBoundingClientRect();return new Ds.Point(ye.clientX-Z.left-tt.clientLeft,ye.clientY-Z.top-tt.clientTop)}function j(){Le.setFilter("energy-Building-highlighted",["!in","ID_ESL",...qe.current]),Le.setFilter("energy-Feeder-highlighted",["!in","ID_ESL",...qe.current])}function W(ye){ye.button===0&&(ye.shiftKey&&Le.dragPan.disable(),document.removeEventListener("mouseup",Y),document.removeEventListener("keydown",re),document.addEventListener("mouseup",Y),document.addEventListener("keydown",re),wt=L(ye),ye.ctrlKey&&(Le.queryRenderedFeatures([wt,wt],{layers:["energy-Building","energy-Feeder"]}).map(Ee=>Ee.properties.ID_ESL).forEach(Ee=>{qe.current.has(Ee)&&qe.current.delete(Ee)}),j()))}function Y(ye){Le.dragPan.enable(),ar=L(ye);const Z=Le.queryRenderedFeatures([wt,ar],{layers:["energy-Building","energy-Feeder"]});me(ye,Z)}function re(ye){ye.keyCode===27&&me(ye,[])}function me(ye,Z){document.removeEventListener("mouseup",Y),document.removeEventListener("keydown",re),ye.shiftKey?(Z.forEach(ie=>{const Ee=ie.properties.ID_ESL;qe.current.has(Ee)||qe.current.add(Ee)}),j()):ye.ctrlKey&&(Z.forEach(ie=>{const Ee=ie.properties.ID_ESL;qe.current.has(Ee)&&qe.current.delete(Ee)}),j()),It(qe.current.size),console.log(qe.current)}ee.useEffect(()=>{RE(qe,t,o)},[c])})}},[]),ee.useEffect(()=>{const tt=setTimeout(async()=>{if(t.current){const wt=t.current,ar="mobility-Street-Detailed",zr="mobility-Street-Detailed-highlighted",Ht="mobility-Block-Detailed",L="energy-Building",j="energy-Feeder",W=Dt,Y=Rr,re=tr,me=on;wt.getLayer(ar)&&(wt.setPaintProperty(ar,"line-color",No(Ot,W)),wt.setPaintProperty(zr,"line-width",["interpolate",["exponential",1],["to-number",["get",Ot]],0,1.75,parseFloat(Dt),6]),wt.setPaintProperty(ar,"line-width",["interpolate",["exponential",1],["to-number",["get",Ot]],0,1.5,parseFloat(Dt),6])),wt.getLayer(Ht)&&wt.setPaintProperty(Ht,"fill-color",No(Ot,Y)),wt.getLayer(L)&&wt.setPaintProperty(L,"fill-color",No(nr,re)),wt.getLayer(j)&&wt.setPaintProperty(j,"line-color",No(Yt,me))}},700);return()=>clearTimeout(tt)},[Rr,Dt,tr,on,Ot,nr,Yt]),ee.useEffect(()=>{if(t.current){const Le=t.current,tt=["mobility-Street-Detailed","mobility-Block-Detailed","energy-Building","energy-Feeder"];for(const wt of tt){if(!Le.getLayer(wt))continue;const ar=ke.includes(OE(wt)),zr=ke.includes(BE(wt)),Ht=ke.includes(wt)||ar||zr;zr&&Le.setLayoutProperty(BE(wt),"visibility",Ht?"visible":"none"),ar&&Le.setLayoutProperty(OE(wt),"visibility",Ht?"visible":"none"),Le.setLayoutProperty(wt,"visibility",Ht?"visible":"none")}}},[ke]),ee.useEffect(()=>{ke.includes("energy-Building")&&(z(!1),be(!0),_e(!0),te(!1),fetch(UC).then(Le=>Le.json()).then(Le=>{const tt=Le[0].metric_description;U(tt)}),Xr(tr),On("kWh/m2")),ke.includes("energy-Feeder")&&(z(!1),oe(!1),be(!0),te(!0),_e(!1),fetch(UC).then(Le=>Le.json()).then(Le=>{const tt=Le[1].metric_description;U(tt)}),Xr(on),On("kW")),(ke.includes("mobility-Street-Detailed")||ke.includes("mobility-Block-Detailed"))&&(z(!0),be(!1),_e(!1),te(!1),ke.includes("mobility-Street-Detailed")?(fetch(jC).then(Le=>Le.json()).then(Le=>{const tt=Le[0].metric_description;U(tt)}),Xr(Dt),oe(!1)):(fetch(jC).then(Le=>Le.json()).then(Le=>{const tt=Le[1].metric_description;U(tt)}),Xr(Rr),oe(!0)),On("Number of Trips"))},[ke,nr,qe]),ee.useEffect(()=>{const Le=parseInt(Lr),tt=parseInt(tr),wt=[Math.min(n[0],tt),Math.min(n[1],tt)];wt[0]>wt[1]&&(wt[0]=Le),a(wt)},[tr,Lr]);const Sr=()=>{Ce(!je)};return Q.jsxs("div",{className:"container",children:[(B||pe)&&Q.jsxs("div",{className:"sidebar",children:[Q.jsx("div",{className:"title-container",children:Q.jsx("div",{className:"title",children:Q.jsx("p",{onClick:ji,children:P})})}),G&&Q.jsx("div",{className:"home-page",children:Q.jsx(W6,{handleDigitalTwinClick:Ft})}),he&&Q.jsx("div",{className:"city-info",children:q}),F&&Q.jsx("div",{class:"hr-container",children:Q.jsx("span",{class:"summary-title",children:"Dataset Management"})}),F&&Q.jsx("div",{children:Q.jsx(LG,{onDataImport:f,files:Ze,setFiles:bt,deleteFile:Re,selectedFile:Pe,setSelectedFile:Ge})}),B&&Q.jsx("div",{children:Q.jsx(L_,{selectedFileName:Pe?Pe.name:null,mapRef:t,setBuildingDataUrl:f,setIthacaEnergyUrl:v,BUILDING_DATA_URL:c,BUILDING_DATA_URL_INITIAL:ty,ITHACA_ENERGY_URL_INITIAL:ey})}),Te&&Q.jsx("div",{children:Q.jsx(L_,{mapRef:t,setBuildingDataUrl:f,setIthacaEnergyUrl:v,BUILDING_DATA_URL:c,BUILDING_DATA_URL_INITIAL:ty,ITHACA_ENERGY_URL_INITIAL:ey})}),Se&&Q.jsx("div",{children:Q.jsx(L_,{mapRef:t,setBuildingDataUrl:f,setIthacaEnergyUrl:v,BUILDING_DATA_URL:c,BUILDING_DATA_URL_INITIAL:ty,ITHACA_ENERGY_URL_INITIAL:ey})})]}),(B||pe)&&Q.jsxs("div",{className:"sidebar-graph",children:[F&&Q.jsxs("div",{children:[Q.jsx("div",{class:"hr-container",children:Q.jsx("span",{class:"summary-title",children:"Summary Report"})}),Q.jsx("div",{className:"selected-number",children:Q.jsxs("p",{children:[Kt," Selected objects."]})})]}),B&&Q.jsx("div",{children:Q.jsx(TG,{})}),Te&&Q.jsx("div",{children:Q.jsx(IG,{})}),Se&&Q.jsx("div",{children:Q.jsx(PG,{})}),(G||F)&&Q.jsx("div",{style:{margin:"20px"}}),B&&(b_(qe,t),x_(qe,t),w_(qe,t),S_(qe,t)),pe&&(U6(qe,t,o),$6(qe,t,o),RE(qe,t,o),V6(qe,t)),Se&&(LE(qe,t),zE(qe,t),DE(qe,t))]}),Q.jsxs("div",{className:"content-container",children:[Q.jsx("div",{className:"map-container",ref:e}),G&&Q.jsx("div",{className:"homepage-title",children:"UBEM Viewer"}),G&&Q.jsx("div",{children:Q.jsx(RG,{onDataImport:f,addFile:st,mapRef:t,setTitle:I,setDisplayingLayers:$e,setHomeContainerVisible:D,setGeneralContainerVisible:V})}),(B||pe)&&Q.jsx("div",{className:"main-legend-container",children:Rt(ke)}),(B||pe)&&Q.jsxs("div",{className:"metric-container",children:[F&&Q.jsx("div",{style:{position:"relative"},children:Q.jsx("span",{class:"click-title",onClick:Sr,children:Q.jsxs("div",{class:"click-title",style:{display:"flex",alignItems:"center"},children:[Q.jsx("img",{src:"./Image/metric.png",alt:"Metrics Icon",style:{width:"30px",marginLeft:"5px"}}),"Metrics"]})})}),je&&Te&&Q.jsx(G6,{buildingLayerCode:nr,setBuildingLayerCode:Zt}),je&&Se&&Q.jsx(EG,{feederLayerCode:Yt,setFeederLayerCode:at}),je&&B&&Q.jsx(CG,{propertiesNumber:dr,handlePropertyChange:wr,blockContainerVisible:ne}),je&&B&&Q.jsx(kG,{propertiesNumber:dr,handlePropertyChange:wr}),je&&B&&Q.jsx("button",{className:"submit-button",onClick:ut,children:"Apply"})]})]})]})}function NG(e){yd.render(Q.jsx(BG,{}),e)}NG(document.getElementById("app"));
